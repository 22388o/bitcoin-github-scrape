[
  {
    "sha": "7406336a585c72adbc7094bfd95f5fda1d447630",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo3NDA2MzM2YTU4NWM3MmFkYmM3MDk0YmZkOTVmNWZkYTFkNDQ3NjMw",
    "commit": {
      "author": {
        "name": "Jorge Tim\u00f3n",
        "email": "jtimon@jtimon.cc",
        "date": "2017-02-22T23:45:26Z"
      },
      "committer": {
        "name": "Jorge Tim\u00f3n",
        "email": "jtimon@jtimon.cc",
        "date": "2017-02-25T00:28:32Z"
      },
      "message": "RPC: Allow AmountFromValue() to process in units other than satoshis",
      "tree": {
        "sha": "6600b51cc467db07ab8e5fd2c01224791cef0098",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6600b51cc467db07ab8e5fd2c01224791cef0098"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7406336a585c72adbc7094bfd95f5fda1d447630",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v2\n\niQIcBAABCAAGBQJYsM+wAAoJEKT10UHAGgOHpakP/25/888fjjwDasAJwrDrOx+7\nM5DW6gnCWuLO6ygyjbXHFIj7JLs8GeUsMX5ERn/PxhEk0UpLATYehsN1s0Xj+vW4\n6Id+w/K4mhoj79rwJ9IM7+I8fbuPA+WpDt8Zq5uNvTvOl2y3xDKhQOVdhxkHyb9W\ny7kayttPsEj3Sd00Hh0/FyhqhmTrCiH+h5cJW/gCS5tT7HngmEnaie07Cr7J8Izx\nQiWExYGFkAnoFOVcsV4D1II4Vy2GR2oLTqk50TGYqba4YWYp+XmB49JD9IDXOwK4\niFU+LGMwPsPtC7s/+ctJf9UNRlJDd5dnq/SFvMYR5a9giKdr1GG/ap8CZj+Bc+X2\n48AFxB2g2kJXhIuvPUV/aBInFim31XFCetbgNnnPDZev2UDMBqeL/kDu8PjLk48S\nmiT0T4MY4ER9avHM63aKLG/4d3gFo00EjW3UQ+iVBnu5GwtJOk7VYi66WtwP7ypA\nRVzJiZ/7jAJBwC+EtUmjx7AHOvIrC0qs6kB1L/Q2XpAUgtv/xZmZpF2yRzwVikDo\n5pwFWUqS5xaY6DjXnpz/jucCsjSsnXYnmCxtKJKySlCoE2FkxTXnKelYhSa91YlQ\nJug3vQVjzHGKf+I63xSxjv4UuSytWdgPYdiX7doQ0D7WuBUE6I14Zc8/pbyOTobs\nZOL+xsMxgE+NXYi8FR3D\n=jL8F\n-----END PGP SIGNATURE-----",
        "payload": "tree 6600b51cc467db07ab8e5fd2c01224791cef0098\nparent f19afdbfb4cb2223d492d5e7d4087567af9d5f28\nauthor Jorge Tim\u00f3n <jtimon@jtimon.cc> 1487807126 +0100\ncommitter Jorge Tim\u00f3n <jtimon@jtimon.cc> 1487982512 +0100\n\nRPC: Allow AmountFromValue() to process in units other than satoshis\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7406336a585c72adbc7094bfd95f5fda1d447630",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/7406336a585c72adbc7094bfd95f5fda1d447630",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7406336a585c72adbc7094bfd95f5fda1d447630/comments",
    "author": {
      "login": "jtimon",
      "id": 1008458,
      "node_id": "MDQ6VXNlcjEwMDg0NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1008458?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtimon",
      "html_url": "https://github.com/jtimon",
      "followers_url": "https://api.github.com/users/jtimon/followers",
      "following_url": "https://api.github.com/users/jtimon/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtimon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtimon/subscriptions",
      "organizations_url": "https://api.github.com/users/jtimon/orgs",
      "repos_url": "https://api.github.com/users/jtimon/repos",
      "events_url": "https://api.github.com/users/jtimon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtimon/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jtimon",
      "id": 1008458,
      "node_id": "MDQ6VXNlcjEwMDg0NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1008458?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtimon",
      "html_url": "https://github.com/jtimon",
      "followers_url": "https://api.github.com/users/jtimon/followers",
      "following_url": "https://api.github.com/users/jtimon/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtimon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtimon/subscriptions",
      "organizations_url": "https://api.github.com/users/jtimon/orgs",
      "repos_url": "https://api.github.com/users/jtimon/repos",
      "events_url": "https://api.github.com/users/jtimon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtimon/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "f19afdbfb4cb2223d492d5e7d4087567af9d5f28",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f19afdbfb4cb2223d492d5e7d4087567af9d5f28",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/f19afdbfb4cb2223d492d5e7d4087567af9d5f28"
      }
    ],
    "stats": {
      "total": 6,
      "additions": 3,
      "deletions": 3
    },
    "files": [
      {
        "sha": "d8ae5404047d245fe1407df67a3e048dbca61f5d",
        "filename": "src/rpc/server.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/7406336a585c72adbc7094bfd95f5fda1d447630/src/rpc/server.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/7406336a585c72adbc7094bfd95f5fda1d447630/src/rpc/server.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/server.cpp?ref=7406336a585c72adbc7094bfd95f5fda1d447630",
        "patch": "@@ -121,12 +121,12 @@ void RPCTypeCheckObj(const UniValue& o,\n     }\n }\n \n-CAmount AmountFromValue(const UniValue& value)\n+CAmount AmountFromValue(const UniValue& value, int decimals)\n {\n     if (!value.isNum() && !value.isStr())\n         throw JSONRPCError(RPC_TYPE_ERROR, \"Amount is not a number or string\");\n     CAmount amount;\n-    if (!ParseFixedPoint(value.getValStr(), 8, &amount))\n+    if (!ParseFixedPoint(value.getValStr(), decimals, &amount))\n         throw JSONRPCError(RPC_TYPE_ERROR, \"Invalid amount\");\n     if (!MoneyRange(amount))\n         throw JSONRPCError(RPC_TYPE_ERROR, \"Amount out of range\");"
      },
      {
        "sha": "85bbd456f663dca6bbbf36b54910f1abcd12f230",
        "filename": "src/rpc/server.h",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/7406336a585c72adbc7094bfd95f5fda1d447630/src/rpc/server.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/7406336a585c72adbc7094bfd95f5fda1d447630/src/rpc/server.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/server.h?ref=7406336a585c72adbc7094bfd95f5fda1d447630",
        "patch": "@@ -191,7 +191,7 @@ extern std::vector<unsigned char> ParseHexV(const UniValue& v, std::string strNa\n extern std::vector<unsigned char> ParseHexO(const UniValue& o, std::string strKey);\n \n extern int64_t nWalletUnlockTime;\n-extern CAmount AmountFromValue(const UniValue& value);\n+extern CAmount AmountFromValue(const UniValue& value, int decimals=8);\n extern UniValue ValueFromAmount(const CAmount& amount);\n extern double GetDifficulty(const CBlockIndex* blockindex = NULL);\n extern std::string HelpRequiringPassphrase();"
      }
    ]
  },
  {
    "sha": "d59e2251482a371a25d0d9005f53ddba3abdaf09",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkNTllMjI1MTQ4MmEzNzFhMjVkMGQ5MDA1ZjUzZGRiYTNhYmRhZjA5",
    "commit": {
      "author": {
        "name": "Jorge Tim\u00f3n",
        "email": "jtimon@jtimon.cc",
        "date": "2017-02-25T00:24:55Z"
      },
      "committer": {
        "name": "Jorge Tim\u00f3n",
        "email": "jtimon@jtimon.cc",
        "date": "2017-02-25T00:28:33Z"
      },
      "message": "RPC: Allow int satoshis instead of BTC with decimals for amounts:\n\n(using the option useDecimalAmounts)\n\n- createrawtransaction\n- signrawtransaction",
      "tree": {
        "sha": "594bd6f5ed7860ecfcd67196299f355310266c66",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/594bd6f5ed7860ecfcd67196299f355310266c66"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d59e2251482a371a25d0d9005f53ddba3abdaf09",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v2\n\niQIcBAABCAAGBQJYsM+xAAoJEKT10UHAGgOHYi0P/2Ki3CWKY5w4MtXovRYS6yk3\nrDXWTQ5adhibK0anVV7t3+cU/LwgOvvBmxXUF75VTRbLOo2s9qpHlm0Lsvuj4llm\nTFG6iGjtg08M7jzfyrQDdvRkkqxBaYNHVuVFdJ5wVZgrV6aJyVrkSLWOX8uP0d2P\ndya3iCK2i/wAWJX2U0EdJY0p3sz3fm4lBp+qeYSO5P/2beeha8tsbKXwfFEbC/Uv\nrbnCbqFYxOgBSyqL2hXnHWWxM5zVdcTBYMOTw/4/iBTVJ6WyiuGvC4slJZEhR56v\nBj3lUFxwbts61eG1RCao65fdg4yZwFztJmDbO24t7Fdb00PgMQ48t/GZ6tkkY1fg\na9qIc8nmyFqQuk3lTXkcBIVGMj2E+H6w9QdSHxf0HqgoP/LuHd5OY81dQJiooWFs\naSzPRjzYrcWMSB6wkYbCelQnbaibw9Qze9yYcff3WmJukw3UaKmkvxhV4zBsWTxg\nqBVsQfUHaAS0r6j6U+hAk2niTB4Og1f1VMy5OQdnrMa8AL3AHkV1PRy3C/kE3tia\nIHlOL+PHi9OX5mXnM0e/1Rs+ThyPegAah1M39yQ5q8H1yQeQDZAGa6+jz+3Ocyjm\nrgJHBiz7sicggEm9p7IAqnIPHfCfV7sqXcOyJAX7fuKzztfhFw2j91EDZ1puISRl\nYogI6Khv7euYZL+0zTEo\n=DVGH\n-----END PGP SIGNATURE-----",
        "payload": "tree 594bd6f5ed7860ecfcd67196299f355310266c66\nparent 7406336a585c72adbc7094bfd95f5fda1d447630\nauthor Jorge Tim\u00f3n <jtimon@jtimon.cc> 1487982295 +0100\ncommitter Jorge Tim\u00f3n <jtimon@jtimon.cc> 1487982513 +0100\n\nRPC: Allow int satoshis instead of BTC with decimals for amounts:\n\n(using the option useDecimalAmounts)\n\n- createrawtransaction\n- signrawtransaction\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d59e2251482a371a25d0d9005f53ddba3abdaf09",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/d59e2251482a371a25d0d9005f53ddba3abdaf09",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d59e2251482a371a25d0d9005f53ddba3abdaf09/comments",
    "author": {
      "login": "jtimon",
      "id": 1008458,
      "node_id": "MDQ6VXNlcjEwMDg0NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1008458?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtimon",
      "html_url": "https://github.com/jtimon",
      "followers_url": "https://api.github.com/users/jtimon/followers",
      "following_url": "https://api.github.com/users/jtimon/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtimon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtimon/subscriptions",
      "organizations_url": "https://api.github.com/users/jtimon/orgs",
      "repos_url": "https://api.github.com/users/jtimon/repos",
      "events_url": "https://api.github.com/users/jtimon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtimon/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jtimon",
      "id": 1008458,
      "node_id": "MDQ6VXNlcjEwMDg0NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1008458?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtimon",
      "html_url": "https://github.com/jtimon",
      "followers_url": "https://api.github.com/users/jtimon/followers",
      "following_url": "https://api.github.com/users/jtimon/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtimon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtimon/subscriptions",
      "organizations_url": "https://api.github.com/users/jtimon/orgs",
      "repos_url": "https://api.github.com/users/jtimon/repos",
      "events_url": "https://api.github.com/users/jtimon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtimon/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "7406336a585c72adbc7094bfd95f5fda1d447630",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7406336a585c72adbc7094bfd95f5fda1d447630",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/7406336a585c72adbc7094bfd95f5fda1d447630"
      }
    ],
    "stats": {
      "total": 30,
      "additions": 20,
      "deletions": 10
    },
    "files": [
      {
        "sha": "f49728025d13548561c1444b0e15c5c54287e86f",
        "filename": "qa/rpc-tests/fundrawtransaction.py",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d59e2251482a371a25d0d9005f53ddba3abdaf09/qa/rpc-tests/fundrawtransaction.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d59e2251482a371a25d0d9005f53ddba3abdaf09/qa/rpc-tests/fundrawtransaction.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/qa/rpc-tests/fundrawtransaction.py?ref=d59e2251482a371a25d0d9005f53ddba3abdaf09",
        "patch": "@@ -73,8 +73,8 @@ def run_test(self):\n         # simple test #\n         ###############\n         inputs  = [ ]\n-        outputs = { self.nodes[0].getnewaddress() : 1.0 }\n-        rawtx   = self.nodes[2].createrawtransaction(inputs, outputs)\n+        outputs = { self.nodes[0].getnewaddress() : 100000000 }\n+        rawtx   = self.nodes[2].createrawtransaction(inputs, outputs, 0, False)\n         dec_tx  = self.nodes[2].decoderawtransaction(rawtx)\n         rawtxfund = self.nodes[2].fundrawtransaction(rawtx)\n         fee = rawtxfund['fee']"
      },
      {
        "sha": "0effd4e6880d148cd38b7d452e4baacbfda5b250",
        "filename": "src/rpc/rawtransaction.cpp",
        "status": "modified",
        "additions": 18,
        "deletions": 8,
        "changes": 26,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d59e2251482a371a25d0d9005f53ddba3abdaf09/src/rpc/rawtransaction.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d59e2251482a371a25d0d9005f53ddba3abdaf09/src/rpc/rawtransaction.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/rawtransaction.cpp?ref=d59e2251482a371a25d0d9005f53ddba3abdaf09",
        "patch": "@@ -351,9 +351,9 @@ UniValue verifytxoutproof(const JSONRPCRequest& request)\n \n UniValue createrawtransaction(const JSONRPCRequest& request)\n {\n-    if (request.fHelp || request.params.size() < 2 || request.params.size() > 3)\n+    if (request.fHelp || request.params.size() < 2 || request.params.size() > 4)\n         throw runtime_error(\n-            \"createrawtransaction [{\\\"txid\\\":\\\"id\\\",\\\"vout\\\":n},...] {\\\"address\\\":amount,\\\"data\\\":\\\"hex\\\",...} ( locktime )\\n\"\n+            \"createrawtransaction [{\\\"txid\\\":\\\"id\\\",\\\"vout\\\":n},...] {\\\"address\\\":amount,\\\"data\\\":\\\"hex\\\",...} ( locktime, useDecimalAmounts )\\n\"\n             \"\\nCreate a transaction spending the given inputs and creating new outputs.\\n\"\n             \"Outputs can be addresses or data.\\n\"\n             \"Returns hex-encoded raw transaction.\\n\"\n@@ -372,11 +372,12 @@ UniValue createrawtransaction(const JSONRPCRequest& request)\n             \"     ]\\n\"\n             \"2. \\\"outputs\\\"               (string, required) a json object with outputs\\n\"\n             \"    {\\n\"\n-            \"      \\\"address\\\": x.xxx,    (numeric or string, required) The key is the bitcoin address, the numeric value (can be string) is the \" + CURRENCY_UNIT + \" amount\\n\"\n+            \"      \\\"address\\\": x,        (numeric, required) The key is the bitcoin address, the numeric value is the amount in satoshis\\n\"\n             \"      \\\"data\\\": \\\"hex\\\"      (string, required) The key is \\\"data\\\", the value is hex encoded data\\n\"\n             \"      ,...\\n\"\n             \"    }\\n\"\n             \"3. locktime                  (numeric, optional, default=0) Raw locktime. Non-0 value also locktime-activates inputs\\n\"\n+            \"4. \\\"useDecimalAmounts\\\"     (boolean, optional, default=true) Use BTC units (up to 8 decimals) instead of satoshis. If true, the amounts must be strings.\\n\"\n             \"\\nResult:\\n\"\n             \"\\\"transaction\\\"              (string) hex string of the transaction\\n\"\n \n@@ -403,6 +404,10 @@ UniValue createrawtransaction(const JSONRPCRequest& request)\n         rawTx.nLockTime = nLockTime;\n     }\n \n+    int decimals = 8;\n+    if (request.params.size() > 3 && !request.params[3].get_bool())\n+        decimals = 0;    \n+    \n     for (unsigned int idx = 0; idx < inputs.size(); idx++) {\n         const UniValue& input = inputs[idx];\n         const UniValue& o = input.get_obj();\n@@ -452,7 +457,7 @@ UniValue createrawtransaction(const JSONRPCRequest& request)\n             setAddress.insert(address);\n \n             CScript scriptPubKey = GetScriptForDestination(address.Get());\n-            CAmount nAmount = AmountFromValue(sendTo[name_]);\n+            CAmount nAmount = AmountFromValue(sendTo[name_], decimals);\n \n             CTxOut out(nAmount, scriptPubKey);\n             rawTx.vout.push_back(out);\n@@ -594,9 +599,9 @@ static void TxInErrorToJSON(const CTxIn& txin, UniValue& vErrorsRet, const std::\n \n UniValue signrawtransaction(const JSONRPCRequest& request)\n {\n-    if (request.fHelp || request.params.size() < 1 || request.params.size() > 4)\n+    if (request.fHelp || request.params.size() < 1 || request.params.size() > 5)\n         throw runtime_error(\n-            \"signrawtransaction \\\"hexstring\\\" ( [{\\\"txid\\\":\\\"id\\\",\\\"vout\\\":n,\\\"scriptPubKey\\\":\\\"hex\\\",\\\"redeemScript\\\":\\\"hex\\\"},...] [\\\"privatekey1\\\",...] sighashtype )\\n\"\n+            \"signrawtransaction \\\"hexstring\\\" ( [{\\\"txid\\\":\\\"id\\\",\\\"vout\\\":n,\\\"scriptPubKey\\\":\\\"hex\\\",\\\"redeemScript\\\":\\\"hex\\\"},...] [\\\"privatekey1\\\",...] sighashtype, useDecimalAmounts )\\n\"\n             \"\\nSign inputs for raw transaction (serialized, hex-encoded).\\n\"\n             \"The second optional argument (may be null) is an array of previous transaction outputs that\\n\"\n             \"this transaction depends on but may not yet be in the block chain.\\n\"\n@@ -615,7 +620,7 @@ UniValue signrawtransaction(const JSONRPCRequest& request)\n             \"         \\\"vout\\\":n,                  (numeric, required) The output number\\n\"\n             \"         \\\"scriptPubKey\\\": \\\"hex\\\",   (string, required) script key\\n\"\n             \"         \\\"redeemScript\\\": \\\"hex\\\",   (string, required for P2SH or P2WSH) redeem script\\n\"\n-            \"         \\\"amount\\\": value            (numeric, required) The amount spent\\n\"\n+            \"         \\\"amount\\\": value            (numeric, required) The amount spent in satoshis\\n\"\n             \"       }\\n\"\n             \"       ,...\\n\"\n             \"    ]\\n\"\n@@ -631,6 +636,7 @@ UniValue signrawtransaction(const JSONRPCRequest& request)\n             \"       \\\"ALL|ANYONECANPAY\\\"\\n\"\n             \"       \\\"NONE|ANYONECANPAY\\\"\\n\"\n             \"       \\\"SINGLE|ANYONECANPAY\\\"\\n\"\n+            \"5. \\\"useDecimalAmounts\\\"     (boolean, optional, default=false) Use BTC units (up to 8 decimals) instead of satoshis. If true, the amounts must be strings.\\n\"\n \n             \"\\nResult:\\n\"\n             \"{\\n\"\n@@ -681,6 +687,10 @@ UniValue signrawtransaction(const JSONRPCRequest& request)\n     // starts as a clone of the rawtx:\n     CMutableTransaction mergedTx(txVariants[0]);\n \n+    int decimals = 0;\n+    if (request.params.size() > 4 && request.params[4].get_bool())\n+        decimals = 8;    \n+    \n     // Fetch previous transactions (inputs):\n     CCoinsView viewDummy;\n     CCoinsViewCache view(&viewDummy);\n@@ -760,7 +770,7 @@ UniValue signrawtransaction(const JSONRPCRequest& request)\n                 coins->vout[nOut].scriptPubKey = scriptPubKey;\n                 coins->vout[nOut].nValue = 0;\n                 if (prevOut.exists(\"amount\")) {\n-                    coins->vout[nOut].nValue = AmountFromValue(find_value(prevOut, \"amount\"));\n+                    coins->vout[nOut].nValue = AmountFromValue(find_value(prevOut, \"amount\"), decimals);\n                 }\n             }\n "
      }
    ]
  },
  {
    "sha": "f799d8b01d4bf475cef26db061f94ea9a879ab23",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmNzk5ZDhiMDFkNGJmNDc1Y2VmMjZkYjA2MWY5NGVhOWE4NzlhYjIz",
    "commit": {
      "author": {
        "name": "Jorge Tim\u00f3n",
        "email": "jtimon@jtimon.cc",
        "date": "2017-02-25T00:26:14Z"
      },
      "committer": {
        "name": "Jorge Tim\u00f3n",
        "email": "jtimon@jtimon.cc",
        "date": "2017-02-25T00:28:34Z"
      },
      "message": "TODO: named params",
      "tree": {
        "sha": "e00c08139827ef76d499f0fbc268989b482ce0d0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e00c08139827ef76d499f0fbc268989b482ce0d0"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f799d8b01d4bf475cef26db061f94ea9a879ab23",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v2\n\niQIcBAABCAAGBQJYsM+yAAoJEKT10UHAGgOHdKAP+wU+4pqkuYuA59heZZTfTGWd\ndbMs4V+88/EDW2ijowQFlSGXwIVYgcoLF9fBaWjA6BB1ppHnyO91pl0GnTW1lmAP\nOnx66ELr84oXL0loq/Fzcf8lRkXK1bsoawHG2nz09/oWE/pY/nBUImlmZ2p590QB\nM9Uk4lAMi2F4qVr86QtSI9Mcf+JA+aGasvVZwCJ9XsWQjONqPAqKqxl/lslq3MyK\noF5cDhVC40opAZdMY43Fc3bpMXiUZpV0hS58c4SpmiIclh3vOAo7tDPia76E8BOC\ndo0qCFINycb7vWRsmNHcE6MJ5HeFZ6q/Lw795v3Ho4kKyaBIsm5OyivDbV2SrpJJ\nwQivGUojA3jTDl+oj1bdyUP5BeC0L5wsafy54a8KxMsVxpU1Qyrp66dKzt7I/7Nx\nDGnncTL/TK0QmoxCFMybyVSm+HtRvETIn6za7UXH3FuFGh+i68eLD22GdxbdOrTi\nRAXIfIP9hSpQp0EpD4cJ2OZ+nNjt+xUqZw1wXzeoVUrAVis8ZXq35tIOcshDKXrB\nZl3tLnc9mNvkw1pVN2wd/BrVmMRi0JHhDDwIFUyll37riGvm3x4GqupAvCC2VfT7\ndYb2ioZgiY7/Q4ZC6qds6/pwjSGxFIx6SPYeUA/INM9pGwaP1Zbg5/ujLmApK4A5\njpGxZcyYyW5raO3p5FT6\n=JS3X\n-----END PGP SIGNATURE-----",
        "payload": "tree e00c08139827ef76d499f0fbc268989b482ce0d0\nparent d59e2251482a371a25d0d9005f53ddba3abdaf09\nauthor Jorge Tim\u00f3n <jtimon@jtimon.cc> 1487982374 +0100\ncommitter Jorge Tim\u00f3n <jtimon@jtimon.cc> 1487982514 +0100\n\nTODO: named params\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f799d8b01d4bf475cef26db061f94ea9a879ab23",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/f799d8b01d4bf475cef26db061f94ea9a879ab23",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f799d8b01d4bf475cef26db061f94ea9a879ab23/comments",
    "author": {
      "login": "jtimon",
      "id": 1008458,
      "node_id": "MDQ6VXNlcjEwMDg0NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1008458?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtimon",
      "html_url": "https://github.com/jtimon",
      "followers_url": "https://api.github.com/users/jtimon/followers",
      "following_url": "https://api.github.com/users/jtimon/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtimon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtimon/subscriptions",
      "organizations_url": "https://api.github.com/users/jtimon/orgs",
      "repos_url": "https://api.github.com/users/jtimon/repos",
      "events_url": "https://api.github.com/users/jtimon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtimon/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jtimon",
      "id": 1008458,
      "node_id": "MDQ6VXNlcjEwMDg0NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1008458?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtimon",
      "html_url": "https://github.com/jtimon",
      "followers_url": "https://api.github.com/users/jtimon/followers",
      "following_url": "https://api.github.com/users/jtimon/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtimon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtimon/subscriptions",
      "organizations_url": "https://api.github.com/users/jtimon/orgs",
      "repos_url": "https://api.github.com/users/jtimon/repos",
      "events_url": "https://api.github.com/users/jtimon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtimon/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "d59e2251482a371a25d0d9005f53ddba3abdaf09",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d59e2251482a371a25d0d9005f53ddba3abdaf09",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/d59e2251482a371a25d0d9005f53ddba3abdaf09"
      }
    ],
    "stats": {
      "total": 2,
      "additions": 2,
      "deletions": 0
    },
    "files": [
      {
        "sha": "4fd771b0ab1f9c05bceb9a723e39a514beb3670d",
        "filename": "src/rpc/client.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/f799d8b01d4bf475cef26db061f94ea9a879ab23/src/rpc/client.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/f799d8b01d4bf475cef26db061f94ea9a879ab23/src/rpc/client.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/client.cpp?ref=f799d8b01d4bf475cef26db061f94ea9a879ab23",
        "patch": "@@ -86,8 +86,10 @@ static const CRPCConvertParam vRPCConvertParams[] =\n     { \"createrawtransaction\", 0, \"transactions\" },\n     { \"createrawtransaction\", 1, \"outputs\" },\n     { \"createrawtransaction\", 2, \"locktime\" },\n+    { \"createrawtransaction\", 3, \"useDecimalAmounts\" },\n     { \"signrawtransaction\", 1, \"prevtxs\" },\n     { \"signrawtransaction\", 2, \"privkeys\" },\n+    { \"signrawtransaction\", 4, \"useDecimalAmounts\" },\n     { \"sendrawtransaction\", 1, \"allowhighfees\" },\n     { \"fundrawtransaction\", 1, \"options\" },\n     { \"gettxout\", 1, \"n\" },"
      }
    ]
  },
  {
    "sha": "35854c31c32d77e5b0d19ac7f0970377f11b0be1",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzozNTg1NGMzMWMzMmQ3N2U1YjBkMTlhYzdmMDk3MDM3N2YxMWIwYmUx",
    "commit": {
      "author": {
        "name": "Jorge Tim\u00f3n",
        "email": "jtimon@jtimon.cc",
        "date": "2017-02-25T00:27:07Z"
      },
      "committer": {
        "name": "Jorge Tim\u00f3n",
        "email": "jtimon@jtimon.cc",
        "date": "2017-02-25T00:28:35Z"
      },
      "message": "TODO: Remaining RPC functions that use BTC instead of satoshis for amounts",
      "tree": {
        "sha": "2edc6ee2eb50955443cdd922a975b05b02bd5557",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2edc6ee2eb50955443cdd922a975b05b02bd5557"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/35854c31c32d77e5b0d19ac7f0970377f11b0be1",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v2\n\niQIcBAABCAAGBQJYsM+zAAoJEKT10UHAGgOHcykP/3jGYqPB0lD9GY0yx2DItBuO\n4SCxtGDCHrSp4CY85ng7oaRQCJL4cuOKwb5qVoboG9GWbXkDUViovgqDs35o5sqS\nzMb51NxkWU0zH4iFQbPx8U+T/XGBvVuGV/IKQKnLBhAxeow9eV+CeKeNG2XsjAOS\n6SfHdQSKBvR1tCq06BuRUg+4NyKx1CCrOOOu8Ls8sP5oP1nxaVIRSz1wotqFRcQ3\nUm3LAcC2I9wxwgfTEsVZ5Jor+DBHDDgsQBpeLFjK+G9h68iwo2fOFxugpmmEYFjT\nOyz8hF3DV9Ne5ANHEZmvWxM1QE0aghUTkPPe1lFlnF1Qyon3SY3xKl5fEV+h7fZx\nbaBfJfRxcdzRiVIke0QvV3bDGLBREhdUNE65MmB3FEcr6SDALTrSKCsocByByRiN\nRb/NHgEqvY2kI1JijEj68emp5zgG4dVrFk94t3CcH1FmgzOyOnlMtjnsFVLhv1Yk\nk3BLgfLG0vkhRoYV7Vf4tH5l5ncrgXYgZoX4IJJGedVUsRIUc2bTgJOHlLINoDxM\ny4GUgWrcI+F55OFXTuj5M7Y2QwjCUzgYY1/gxrs1Hc6+z5qJkIczFrEISlvHQV1h\nyzdIMp6J2Hmr1e+8H+uSHi51U8hGz2RDyvYHS4mr67+w/ei4ttXC5NZciosTlSLW\n6E02dZhNQYiadpYBuxv+\n=1wyJ\n-----END PGP SIGNATURE-----",
        "payload": "tree 2edc6ee2eb50955443cdd922a975b05b02bd5557\nparent f799d8b01d4bf475cef26db061f94ea9a879ab23\nauthor Jorge Tim\u00f3n <jtimon@jtimon.cc> 1487982427 +0100\ncommitter Jorge Tim\u00f3n <jtimon@jtimon.cc> 1487982515 +0100\n\nTODO: Remaining RPC functions that use BTC instead of satoshis for amounts\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/35854c31c32d77e5b0d19ac7f0970377f11b0be1",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/35854c31c32d77e5b0d19ac7f0970377f11b0be1",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/35854c31c32d77e5b0d19ac7f0970377f11b0be1/comments",
    "author": {
      "login": "jtimon",
      "id": 1008458,
      "node_id": "MDQ6VXNlcjEwMDg0NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1008458?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtimon",
      "html_url": "https://github.com/jtimon",
      "followers_url": "https://api.github.com/users/jtimon/followers",
      "following_url": "https://api.github.com/users/jtimon/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtimon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtimon/subscriptions",
      "organizations_url": "https://api.github.com/users/jtimon/orgs",
      "repos_url": "https://api.github.com/users/jtimon/repos",
      "events_url": "https://api.github.com/users/jtimon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtimon/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jtimon",
      "id": 1008458,
      "node_id": "MDQ6VXNlcjEwMDg0NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1008458?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtimon",
      "html_url": "https://github.com/jtimon",
      "followers_url": "https://api.github.com/users/jtimon/followers",
      "following_url": "https://api.github.com/users/jtimon/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtimon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtimon/subscriptions",
      "organizations_url": "https://api.github.com/users/jtimon/orgs",
      "repos_url": "https://api.github.com/users/jtimon/repos",
      "events_url": "https://api.github.com/users/jtimon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtimon/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "f799d8b01d4bf475cef26db061f94ea9a879ab23",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f799d8b01d4bf475cef26db061f94ea9a879ab23",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/f799d8b01d4bf475cef26db061f94ea9a879ab23"
      }
    ],
    "stats": {
      "total": 12,
      "additions": 6,
      "deletions": 6
    },
    "files": [
      {
        "sha": "ac67a5613df90602a7b267c8bdee545b902a84bf",
        "filename": "src/wallet/rpcwallet.cpp",
        "status": "modified",
        "additions": 6,
        "deletions": 6,
        "changes": 12,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/35854c31c32d77e5b0d19ac7f0970377f11b0be1/src/wallet/rpcwallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/35854c31c32d77e5b0d19ac7f0970377f11b0be1/src/wallet/rpcwallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/rpcwallet.cpp?ref=35854c31c32d77e5b0d19ac7f0970377f11b0be1",
        "patch": "@@ -411,7 +411,7 @@ UniValue sendtoaddress(const JSONRPCRequest& request)\n         throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid Bitcoin address\");\n \n     // Amount\n-    CAmount nAmount = AmountFromValue(request.params[1]);\n+    CAmount nAmount = AmountFromValue(request.params[1], 8); // 8 decimals for BTC\n     if (nAmount <= 0)\n         throw JSONRPCError(RPC_TYPE_ERROR, \"Invalid amount for send\");\n \n@@ -790,7 +790,7 @@ UniValue movecmd(const JSONRPCRequest& request)\n \n     string strFrom = AccountFromValue(request.params[0]);\n     string strTo = AccountFromValue(request.params[1]);\n-    CAmount nAmount = AmountFromValue(request.params[2]);\n+    CAmount nAmount = AmountFromValue(request.params[2], 8); // 8 decimals for BTC\n     if (nAmount <= 0)\n         throw JSONRPCError(RPC_TYPE_ERROR, \"Invalid amount for send\");\n     if (request.params.size() > 3)\n@@ -847,7 +847,7 @@ UniValue sendfrom(const JSONRPCRequest& request)\n     CBitcoinAddress address(request.params[1].get_str());\n     if (!address.IsValid())\n         throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid Bitcoin address\");\n-    CAmount nAmount = AmountFromValue(request.params[2]);\n+    CAmount nAmount = AmountFromValue(request.params[2], 8); // 8 decimals for BTC\n     if (nAmount <= 0)\n         throw JSONRPCError(RPC_TYPE_ERROR, \"Invalid amount for send\");\n     int nMinDepth = 1;\n@@ -951,7 +951,7 @@ UniValue sendmany(const JSONRPCRequest& request)\n         setAddress.insert(address);\n \n         CScript scriptPubKey = GetScriptForDestination(address.Get());\n-        CAmount nAmount = AmountFromValue(sendTo[name_]);\n+        CAmount nAmount = AmountFromValue(sendTo[name_], 8); // 8 decimals for BTC\n         if (nAmount <= 0)\n             throw JSONRPCError(RPC_TYPE_ERROR, \"Invalid amount for send\");\n         totalAmount += nAmount;\n@@ -2308,7 +2308,7 @@ UniValue settxfee(const JSONRPCRequest& request)\n     LOCK2(cs_main, pwalletMain->cs_wallet);\n \n     // Amount\n-    CAmount nAmount = AmountFromValue(request.params[0]);\n+    CAmount nAmount = AmountFromValue(request.params[0], 8); // 8 decimals for BTC\n \n     payTxFee = CFeeRate(nAmount, 1000);\n     return true;\n@@ -2622,7 +2622,7 @@ UniValue fundrawtransaction(const JSONRPCRequest& request)\n \n         if (options.exists(\"feeRate\"))\n         {\n-            feeRate = CFeeRate(AmountFromValue(options[\"feeRate\"]));\n+            feeRate = CFeeRate(AmountFromValue(options[\"feeRate\"], 8)); // 8 decimals for BTC\n             overrideEstimatedFeerate = true;\n         }\n "
      }
    ]
  }
]