theStack,2021-09-12 21:30:56,"Thanks to all reviewers! Force-pushed with all the suggestions proposed by @promag, @LarryRuane and @jonatack.",https://github.com/bitcoin/bitcoin/pull/22896#issuecomment-917714020,917714020,
klementtan,2021-09-13 07:15:54,crAck fa75c590f3e26d675d5e5506aba49e159fe20221,https://github.com/bitcoin/bitcoin/pull/22896#issuecomment-917908910,917908910,
theStack,2021-09-14 16:27:04,"Force-pushed with suggestions of @MarcoFalke (https://github.com/bitcoin/bitcoin/pull/22896#discussion_r702647329, https://github.com/bitcoin/bitcoin/pull/22896#discussion_r707089832).",https://github.com/bitcoin/bitcoin/pull/22896#issuecomment-919312654,919312654,
naumenkogs,2021-09-17 09:19:11,"ACK 330d3aa1a2c740dfa31bed3a6ed6b5f88e5426ad\n\nNote, PR description is no longer accurate\n`insert() and use the returned <iterator, inserted> pair (for lookups where a new element should be inserted if the key isn't found), see https://www.cplusplus.com/reference/map/map/insert/`\n\nYou're using emplace, not insert.",https://github.com/bitcoin/bitcoin/pull/22896#issuecomment-921644307,921644307,
theStack,2021-09-17 11:20:31,"> Note, PR description is no longer accurate\n> `insert() and use the returned <iterator, inserted> pair (for lookups where a new element should be inserted if the key isn't found), see https://www.cplusplus.com/reference/map/map/insert/`\n> \n> You're using emplace, not insert.\n\nThanks for your review and the hint, I updated the PR description accordingly.",https://github.com/bitcoin/bitcoin/pull/22896#issuecomment-921717463,921717463,
MarcoFalke,2021-09-06 07:13:27,"Nit: See https://en.cppreference.com/w/cpp/container/map/emplace , if it compiles:\n\n```suggestion\n        auto [it, is_newly_added] = mapLocalHost.emplace(addr, LocalServiceInfo());\n```",https://github.com/bitcoin/bitcoin/pull/22896#discussion_r702647329,702647329,src/net.cpp
promag,2021-09-06 17:04:36,"nit, maybe simplify `is_newly_added ? 0 : 1`?",https://github.com/bitcoin/bitcoin/pull/22896#discussion_r703014927,703014927,src/net.cpp
promag,2021-09-06 17:05:38,"nit, could also ditch these inner scopes.",https://github.com/bitcoin/bitcoin/pull/22896#discussion_r703015231,703015231,src/net.cpp
LarryRuane,2021-09-06 19:21:56,"nit, add `const`",https://github.com/bitcoin/bitcoin/pull/22896#discussion_r703048601,703048601,src/net.cpp
jonatack,2021-09-06 19:48:46,"```diff\n-    if (it == mapLocalHost.end()) return 0;\n-    return it->second.nScore;\n+    return (it == mapLocalHost.end()) ? 0 : it->second.nScore\n```",https://github.com/bitcoin/bitcoin/pull/22896#discussion_r703054677,703054677,src/net.cpp
jonatack,2021-09-06 19:49:53,"prefer prefix operator per developer-notes.md\n```suggestion\n        ++it->second.nScore;\n```",https://github.com/bitcoin/bitcoin/pull/22896#discussion_r703054983,703054983,src/net.cpp
theStack,2021-09-12 21:26:03,"Thanks, done.",https://github.com/bitcoin/bitcoin/pull/22896#discussion_r706914933,706914933,src/net.cpp
theStack,2021-09-12 21:26:17,"Good idea, done.",https://github.com/bitcoin/bitcoin/pull/22896#discussion_r706914954,706914954,src/net.cpp
theStack,2021-09-12 21:26:37,"Good idea, done.",https://github.com/bitcoin/bitcoin/pull/22896#discussion_r706915009,706915009,src/net.cpp
theStack,2021-09-12 21:28:21,"Good idea, done. Though I negated the condition to have the ""found"" outcome first, which seems more natural to me. ",https://github.com/bitcoin/bitcoin/pull/22896#discussion_r706915211,706915211,src/net.cpp
theStack,2021-09-12 21:28:33,"Thanks, done.",https://github.com/bitcoin/bitcoin/pull/22896#discussion_r706915241,706915241,src/net.cpp
MarcoFalke,2021-09-13 07:54:32,"The diff would be smaller by one line if you kept the early return like it was before.\n\n```suggestion\n    if (it == mapLocalHost.end()) {\n```",https://github.com/bitcoin/bitcoin/pull/22896#discussion_r707089832,707089832,src/net.cpp
theStack,2021-09-14 16:25:56,"Thanks, done.",https://github.com/bitcoin/bitcoin/pull/22896#discussion_r708439681,708439681,src/net.cpp
theStack,2021-09-14 16:26:16,Done.,https://github.com/bitcoin/bitcoin/pull/22896#discussion_r708439977,708439977,src/net.cpp
jonatack,2021-09-17 12:07:34,":stuck_out_tongue: \n```suggestion\n            info.nScore = nScore + !is_newly_added;\n```",https://github.com/bitcoin/bitcoin/pull/22896#discussion_r710999967,710999967,src/net.cpp
MarcoFalke,2021-09-17 12:30:34,"Obviously doesn't matter here, but if there is an `else` to the `if`, I prefer to not invert the condition:\n\n\n```cpp\n     return it == mapLocalHost.end() ? 0 : it->second.nScore;",https://github.com/bitcoin/bitcoin/pull/22896#discussion_r711014408,711014408,src/net.cpp
