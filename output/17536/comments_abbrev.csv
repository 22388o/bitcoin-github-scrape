JeremyRubin,2019-11-20 18:39:45,"The test looks good so far!\n\nSome other conditions to check:\n\n```\nrpcwhitelist=user1:A,B,C\nrpcwhitelist=user1:B\n```\n\nresults in only B being available, not A or C.\n\n\nTest empty rpcwhitelist\n```\nrpcwhitelist=user1\nrpcwhitelist=user2:\n```\n\nTest trailing comma\n```\nrpcwhitelist=user1:A,\n```\n\n\nTest the above where `whitelistrpcdefault=1` is set. This case",https://github.com/bitcoin/bitcoin/pull/17536#issuecomment-556225907,556225907,
DrahtBot,2019-11-20 19:18:51,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#16698](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/16698.html) (Mempool: rework rebroadcast logic to improv",https://github.com/bitcoin/bitcoin/pull/17536#issuecomment-556271906,556271906,
emilengler,2019-11-20 19:47:52,"@JeremyRubin \nThe test was written from scratch with a method taken from `rpc_users.py`\nI will add your suggestions now",https://github.com/bitcoin/bitcoin/pull/17536#issuecomment-556305394,556305394,
JeremyRubin,2019-11-20 20:31:22,Ah yeah -- I just mean that I think the add_options method appears to be new -- newer than rpc_users too I guess? Not sure!,https://github.com/bitcoin/bitcoin/pull/17536#issuecomment-556355916,556355916,
JeremyRubin,2019-11-20 20:44:38,"BTW (maybe a minority opinion here) but those linters are *super* pesky.\n\nYou need to fix the typos on ""permissions"" in order for the tests to run.",https://github.com/bitcoin/bitcoin/pull/17536#issuecomment-556370904,556370904,
emilengler,2019-11-20 20:49:12,"@JeremyRubin Ok, will change that.\nI also added the exceptions mentioned in your first comment. See f012f12",https://github.com/bitcoin/bitcoin/pull/17536#issuecomment-556376093,556376093,
emilengler,2019-11-20 20:52:21,BTW where you've found the type you meant in the comment? Any line number please?,https://github.com/bitcoin/bitcoin/pull/17536#issuecomment-556379660,556379660,
MarcoFalke,2019-11-20 21:01:44,The linters fail because trailing white space was added. Trailing white space is causing issues with `git` and many editors. The type can be left as is if you want to.,https://github.com/bitcoin/bitcoin/pull/17536#issuecomment-556390404,556390404,
emilengler,2019-11-20 21:06:39,"Oh now I understand what you mean :D\nShould be fixed now",https://github.com/bitcoin/bitcoin/pull/17536#issuecomment-556396050,556396050,
fanquake,2019-11-20 21:19:55,"@emilengler You need need to [squash your commits](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#squashing-commits). If you're fixing things like typos and whitespace, you'll always need to squash, so it's best to just do it before pushing to GitHub.",https://github.com/bitcoin/bitcoin/pull/17536#issuecomment-556411304,556411304,
emilengler,2019-11-20 21:21:45,@fanquake Done,https://github.com/bitcoin/bitcoin/pull/17536#issuecomment-556413353,556413353,
MarcoFalke,2019-11-20 21:58:19,It might be possible to adjust `def wait_for_rpc_connection` to accept the 403 error code as acceptable signal that indicates the rpc thread is running.,https://github.com/bitcoin/bitcoin/pull/17536#issuecomment-556453378,556453378,
emilengler,2019-11-22 18:50:23,"The test is done.\nThe only problem is to test `rpcwhitelistdefault=1`\nThere are two possible ways:\n\n- The easy way: Just add another test (file)\n- The hard way: Restart bitcoind with other args during the test. Any ideas on how to do this @MarcoFalke?",https://github.com/bitcoin/bitcoin/pull/17536#issuecomment-557649038,557649038,
JeremyRubin,2019-11-22 22:18:06,"You don't need a new file, you can just do a new subclass of the test framework in that file and call one after the other in Main.\n\nIt will be a bit tough because you can't actually stop a node using RPC with rpcwhitelistdefault=1 and no auth with stop permitted. So you'd need to write a bit of code to kill by PID.\n\n\n",https://github.com/bitcoin/bitcoin/pull/17536#issuecomment-557715275,557715275,
emilengler,2019-11-23 02:05:26,"> You don't need a new file, you can just do a new subclass of the test framework in that file and call one after the other in Main.\n\nTried that and failed, will try it again tomorrow",https://github.com/bitcoin/bitcoin/pull/17536#issuecomment-557755338,557755338,
JeremyRubin,2019-12-06 05:13:56,@emilengler checking in here -- stuck?,https://github.com/bitcoin/bitcoin/pull/17536#issuecomment-562435360,562435360,
emilengler,2019-12-06 14:37:03,@JeremyRubin The test works fine. The only problem is testing `rpcwhitelistenable=1`. The problem is that I haven't found a way to restart bitcoind. It would need to be separate test.,https://github.com/bitcoin/bitcoin/pull/17536#issuecomment-562595291,562595291,
JeremyRubin,2019-12-06 15:56:20,"I'm OK with that; great work preparing these tests.\n\n@MarcoFalke given the strong concept ACKs+utacks/lgtms on the original PR, now with @emilengler's work on tests I think this is in a mergeable state. Do you prefer for me to squash the existing branch (I don't want to make people have to re-ack the squash needlessly)?",https://github.com/bitcoin/bitcoin/pull/17536#issuecomment-562629388,562629388,
emilengler,2019-12-07 00:43:44,"> @emilengler's work on tests I think this is in a mergeable state. Do you prefer for me to squash the existing branch (I don't want to make people have to re-ack the squash needlessly)?\n\nI'm a bit afraid that mine will cause merge issues then. Otherwise I will rebase it from your updated branch.",https://github.com/bitcoin/bitcoin/pull/17536#issuecomment-562794200,562794200,
JeremyRubin,2019-12-11 21:17:13,@emilengler you can rebase,https://github.com/bitcoin/bitcoin/pull/17536#issuecomment-564736696,564736696,
emilengler,2019-12-12 19:22:54,@JeremyRubin Should be done now,https://github.com/bitcoin/bitcoin/pull/17536#issuecomment-565147543,565147543,
emilengler,2019-12-13 13:18:36,Got merged into master by `2081442c421cc4376e5d7839f68fbe7630e89103`,https://github.com/bitcoin/bitcoin/pull/17536#issuecomment-565438145,565438145,
JeremyRubin,2019-11-20 21:48:16,"just use `import re; filter(lambda x: x=='', re.split("" |,"", user[2]))`?",https://github.com/bitcoin/bitcoin/pull/17536#discussion_r348762331,348762331,test/functional/rpc_whitelist.py
JeremyRubin,2019-11-20 21:49:30,"I like what you're thinking here with picking a random permission (especially if we eventually make this scale out to test a larger set), but I think for functional tests we value the determinism & repeatability a bit more. So maybe as a compromise, test everything in permissions, and then test all of the disallowed (until in the future they are too many).\n",https://github.com/bitcoin/bitcoin/pull/17536#discussion_r348762842,348762842,test/functional/rpc_whitelist.py
emilengler,2019-11-21 16:17:25,Ok,https://github.com/bitcoin/bitcoin/pull/17536#discussion_r349180809,349180809,test/functional/rpc_whitelist.py
emilengler,2019-11-21 17:32:31,Done,https://github.com/bitcoin/bitcoin/pull/17536#discussion_r349222828,349222828,test/functional/rpc_whitelist.py
JeremyRubin,2019-11-21 22:43:35,I think you left a few instances lower down where you still do random :),https://github.com/bitcoin/bitcoin/pull/17536#discussion_r349355704,349355704,test/functional/rpc_whitelist.py
emilengler,2019-11-22 18:09:56,"Oh right, forgot the strange tests",https://github.com/bitcoin/bitcoin/pull/17536#discussion_r349726069,349726069,test/functional/rpc_whitelist.py
emilengler,2019-11-22 18:47:04,Done,https://github.com/bitcoin/bitcoin/pull/17536#discussion_r349741147,349741147,test/functional/rpc_whitelist.py
