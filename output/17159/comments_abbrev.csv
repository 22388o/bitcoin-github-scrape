carnhofdaki,2019-10-16 10:16:09,@laanwj So what do you think about adding this note to the documentation?,https://github.com/bitcoin/bitcoin/pull/17159#issuecomment-542632053,542632053,
laanwj,2019-10-16 10:18:54,"I think it is a good idea to add information about backporting (when to backport, how to backport) to the documentation, but I'm not sure a disconnected note only saying what *not* to do is the best way.",https://github.com/bitcoin/bitcoin/pull/17159#issuecomment-542633121,542633121,
carnhofdaki,2019-10-16 10:32:08,"In this case we could see that the backport was clearly requested, so ""when to backport"" was easy. ""How to backport"" was as you commented an automated conflict-free cherry-pick. Which leads me to following idea of text:\n\n-----\n\nBackporting is done whenever the fix needs to be present in a release branch (e.g. a security issue) or on request. If the backport is trivial and can be cherry-pic",https://github.com/bitcoin/bitcoin/pull/17159#issuecomment-542637664,542637664,
laanwj,2019-10-16 14:02:52,"Looks good to me, thanks!\n\nAnother thing to mention maybe is to only create a backport PR (when necessary) after the original PR was merged into master. This makes sure that the latest version of the code is backported, so makes review easier (no moving target).\n",https://github.com/bitcoin/bitcoin/pull/17159#issuecomment-542716740,542716740,
carnhofdaki,2019-10-17 12:33:56,"> Also [backport.py](https://github.com/bitcoin-core/bitcoin-maintainer-tools#backport) script could be mentioned.\n\n@hebasto please have a look at 28537b729 and tell me what you think\n\nEdit: I actually removed the redundant header, see e52ac9c36",https://github.com/bitcoin/bitcoin/pull/17159#issuecomment-543153056,543153056,
promag,2019-10-18 19:52:17,"I mean adding an example, like #16189.",https://github.com/bitcoin/bitcoin/pull/17159#issuecomment-543911607,543911607,
carnhofdaki,2019-10-20 06:02:19,"> I mean adding an example, like #16189.\n\n@promag Added. Have a look.",https://github.com/bitcoin/bitcoin/pull/17159#issuecomment-544223693,544223693,
carnhofdaki,2019-10-20 06:03:03,"> I'd re-write the text to be something like:\n> \n> Security and bug fixes can be backported from `master` to release branches.\n> If the backport is non-trivial, it may be appropriate to open an additional PR,\n> to backport the change, only after the original PR has been merged.\n> Otherwise, backports will be done in batches by maintainers.\n> \n> A backport should contain the following",https://github.com/bitcoin/bitcoin/pull/17159#issuecomment-544223734,544223734,
fanquake,2020-01-05 05:41:07,This looks ok now. @carnhofdaki  can you squash.,https://github.com/bitcoin/bitcoin/pull/17159#issuecomment-570867551,570867551,
carnhofdaki,2020-01-06 12:51:10,@fanquake Sure. Thank you for info.,https://github.com/bitcoin/bitcoin/pull/17159#issuecomment-571126882,571126882,
hebasto,2019-10-16 16:36:09,"```suggestion\n(e.g., a security issue) or on request.\n```",https://github.com/bitcoin/bitcoin/pull/17159#discussion_r335584365,335584365,CONTRIBUTING.md
hebasto,2019-10-16 16:39:20,"```suggestion\njust request a ""Needs backport"" label for the original PR.\n```",https://github.com/bitcoin/bitcoin/pull/17159#discussion_r335585867,335585867,CONTRIBUTING.md
promag,2019-10-17 09:15:33,"Could mention that the PR must be for a specific branch, not master. Also, a PR may be needed for each version where the backport makes sense.\n\nnit, drop ""wait for comments""?",https://github.com/bitcoin/bitcoin/pull/17159#discussion_r335895368,335895368,CONTRIBUTING.md
promag,2019-10-17 09:15:48,`Each commit message of a backport ...`,https://github.com/bitcoin/bitcoin/pull/17159#discussion_r335895496,335895496,CONTRIBUTING.md
promag,2019-10-17 09:16:27,commit hash of the respective merged commit?,https://github.com/bitcoin/bitcoin/pull/17159#discussion_r335895811,335895811,CONTRIBUTING.md
carnhofdaki,2019-10-17 12:15:09,"Thank you. A nice one. I actually learned something.\nhttps://www.dailywritingtips.com/comma-after-i-e-and-e-g/",https://github.com/bitcoin/bitcoin/pull/17159#discussion_r335967962,335967962,CONTRIBUTING.md
carnhofdaki,2019-10-17 12:17:07,Done in 7c5ce792ef498598bd57780d42938139dbcd58e7 and will be squashed in the end.,https://github.com/bitcoin/bitcoin/pull/17159#discussion_r335968764,335968764,CONTRIBUTING.md
carnhofdaki,2019-10-17 12:19:46,"Why a specific branch, not master? I understand that my development is done on a specific branch in my forked repo, but I ask for the Pull Request to master.\n\n""wait for comments"" dropped in 1d9ffdd2432f9a89f77204505b221616cf74b704 and will be squashed in the end",https://github.com/bitcoin/bitcoin/pull/17159#discussion_r335969838,335969838,CONTRIBUTING.md
carnhofdaki,2019-10-17 12:22:51,"Backports are done when something is already in master (that is the practice of Linux development, where git itself comes from; in contrary to what Android or other BSP developers tend to do - they add specific hardware patches to a stable branch, making master run away quickly and then they are unable to catch up so after the device is not sold anymore, one can hardly find a current kernel and An",https://github.com/bitcoin/bitcoin/pull/17159#discussion_r335971195,335971195,CONTRIBUTING.md
carnhofdaki,2019-10-17 12:25:02,Thanks. Fixed in 163fe28c54105fdde687cc49c51e635d6e483ccb and will be squashed later into the final commit.,https://github.com/bitcoin/bitcoin/pull/17159#discussion_r335972175,335972175,CONTRIBUTING.md
hebasto,2019-10-17 12:26:33,"> Why a specific branch, not master? I understand that my development is done on a specific branch in my forked repo, but I ask for the Pull Request to master.\n\nCommits are backported *from* the master branch *to* a specific branch, e.g., `0.18` or `0.19`; not *to* the master branch.",https://github.com/bitcoin/bitcoin/pull/17159#discussion_r335972923,335972923,CONTRIBUTING.md
carnhofdaki,2019-10-17 12:26:36,Fixed in 842aa85aa ...,https://github.com/bitcoin/bitcoin/pull/17159#discussion_r335972940,335972940,CONTRIBUTING.md
carnhofdaki,2019-10-17 12:28:11,"@promag @hebasto OK, sorry. I totally misunderstood the comment.",https://github.com/bitcoin/bitcoin/pull/17159#discussion_r335973653,335973653,CONTRIBUTING.md
carnhofdaki,2019-10-17 12:31:05,@promag What do you think about 2aa9503ea ?,https://github.com/bitcoin/bitcoin/pull/17159#discussion_r335974906,335974906,CONTRIBUTING.md
fanquake,2019-10-17 12:50:08,"This should only ever be a PR number.\n\n```suggestion\nGithub-Pull: #<PR number>\n```",https://github.com/bitcoin/bitcoin/pull/17159#discussion_r335983849,335983849,CONTRIBUTING.md
fanquake,2019-10-17 12:50:52,"```suggestion\nRebased-From: <commit hash of the original commit>\n```",https://github.com/bitcoin/bitcoin/pull/17159#discussion_r335984236,335984236,CONTRIBUTING.md
fanquake,2019-10-17 14:24:53,"```suggestion\nAlso see the [backport.py script](\n```",https://github.com/bitcoin/bitcoin/pull/17159#discussion_r336036478,336036478,CONTRIBUTING.md
carnhofdaki,2019-10-20 05:44:00,Done. 57379c8a5,https://github.com/bitcoin/bitcoin/pull/17159#discussion_r336763942,336763942,CONTRIBUTING.md
carnhofdaki,2019-10-20 05:44:41,"Aah, I just realized this ""Commit suggestion"" button :-) Will try it next time.",https://github.com/bitcoin/bitcoin/pull/17159#discussion_r336763948,336763948,CONTRIBUTING.md
luke-jr,2019-10-20 06:42:27,This is intended to be a new policy?,https://github.com/bitcoin/bitcoin/pull/17159#discussion_r336765259,336765259,CONTRIBUTING.md
luke-jr,2019-10-20 06:42:51,... unless a straightforward merge of the original branch is possible.,https://github.com/bitcoin/bitcoin/pull/17159#discussion_r336765267,336765267,CONTRIBUTING.md
carnhofdaki,2019-10-20 10:35:46,"As far as I understood, we are just describing the commonly used, but yet uncodified process. Or is it something new @laanwj ?",https://github.com/bitcoin/bitcoin/pull/17159#discussion_r336772944,336772944,CONTRIBUTING.md
carnhofdaki,2019-10-20 10:38:54,"Why would a straightforward merge of something which has different checksum in `master` branch not contain a pointer to the parent (original commit in `master`)?\n\nPlease provide some `git` command line examples on how to find the equivalent commit in master, given a release commit. If possible and if I understand correctly. Thank you.",https://github.com/bitcoin/bitcoin/pull/17159#discussion_r336773059,336773059,CONTRIBUTING.md
fanquake,2019-10-20 14:35:43,"> This is intended to be a new policy?\n\nIt's not a new policy, just what happens [in reality (when looking at bulk backports)](https://github.com/bitcoin/bitcoin/pulls?q=is%3Apr+label%3ABackport+is%3Aclosed). However if this is controversial just drop the sentence. ",https://github.com/bitcoin/bitcoin/pull/17159#discussion_r336781422,336781422,CONTRIBUTING.md
laanwj,2019-10-23 09:58:16,"Sometimes it's possible to base a new commit on a commit *before* the branch split (e.g. between `0.19` and `master`). If nothing conflicts in between, it can be a clean merge to both branches (unclean merges are rejected by the CI checks). This is quite rare, though, and I'm not sure mentioning it here is important. If you're enough of a git guru to do this, you don't need it mentioned here.",https://github.com/bitcoin/bitcoin/pull/17159#discussion_r337955924,337955924,CONTRIBUTING.md
carnhofdaki,2019-10-29 16:26:08,"@laanwj I see.\n\n@luke-jr Was this ^^ what you meant?\n\nI still think that one commit has to be the first one (in linear time) and merged into `master`. Then any other cherry-pick, no matter if there were conflicts, should IMHO contain a reference to the original unless it is easy in git to find out the original (first) patch on which this ""backport"" is based...",https://github.com/bitcoin/bitcoin/pull/17159#discussion_r340185354,340185354,CONTRIBUTING.md
laanwj,2019-10-30 10:31:01,Maybe mention that the `Needs backport (...)` labels are a tracking tool for maintainers and not meant as a TODO for the author of the PR. This has confused a few people.,https://github.com/bitcoin/bitcoin/pull/17159#discussion_r340536400,340536400,CONTRIBUTING.md
laanwj,2019-10-30 10:33:22,"Yes, no matter how they're represented in git, changes should still be merged first into master. This is to make absolutely sure that the future major release contains everything.",https://github.com/bitcoin/bitcoin/pull/17159#discussion_r340537477,340537477,CONTRIBUTING.md
carnhofdaki,2019-10-30 12:47:06,@laanwj see 4d47775c1,https://github.com/bitcoin/bitcoin/pull/17159#discussion_r340592002,340592002,CONTRIBUTING.md
carnhofdaki,2019-10-30 12:48:58,"```diff\ndiff --git a/CONTRIBUTING.md b/CONTRIBUTING.md\nindex d38e44c47..f36f29dcf 100644\n--- a/CONTRIBUTING.md\n+++ b/CONTRIBUTING.md\n@@ -317,7 +317,9 @@ branches.\n If the backport is non-trivial, it may be appropriate to open an\n additional PR, to backport the change, only after the original PR\n has been merged.\n-Otherwise, backports will be done in batches by maintainers.\n+Oth",https://github.com/bitcoin/bitcoin/pull/17159#discussion_r340592846,340592846,CONTRIBUTING.md
carnhofdaki,2019-10-30 13:09:05,"Right. My point was just if there is a better way to find ""parent"" (i.e. original upstream patch) but I found there is not because even in Linux kernel development (and I suppose they know how to use git given it was born there) they always write a comment in a backported patch:\n\n```\ncommit <hash> upstream.\n```\n\nSee [this backported patch](https://git.kernel.org/pub/scm/linux/kernel/gi",https://github.com/bitcoin/bitcoin/pull/17159#discussion_r340601772,340601772,CONTRIBUTING.md
luke-jr,2019-11-04 15:59:29,"Yes, bugfixes are best when based immediately on top of the commit introducing the bug, in which case it is a clean merge to all affected branches.\n\nSometimes that's not possible and a cherry-pick is needed instead, but when it is possible, it should be preferred.\n\n(Linux doesn't set a good example in this regard.)",https://github.com/bitcoin/bitcoin/pull/17159#discussion_r342127308,342127308,CONTRIBUTING.md
luke-jr,2019-11-04 16:01:01,"Maybe just remove ""maintainers"" here?",https://github.com/bitcoin/bitcoin/pull/17159#discussion_r342128186,342128186,CONTRIBUTING.md
carnhofdaki,2019-11-10 17:48:03,"https://github.com/carnhofdaki/bitcoin/commit/9e35eaeddbb46405e30c05de27ebdb7aa4e87fd1\n",https://github.com/bitcoin/bitcoin/pull/17159#discussion_r344505259,344505259,CONTRIBUTING.md
