laanwj,2014-10-14T09:26:26Z,"~~Makes sense, utACK~~\n",https://github.com/bitcoin/bitcoin/pull/5087#issuecomment-59013097,59013097,
sipa,2014-10-14T19:05:50Z,utACK\n,https://github.com/bitcoin/bitcoin/pull/5087#issuecomment-59098703,59098703,
TheBlueMatt,2014-10-14T19:49:52Z,"NACK, this breaks the ""I ran a importprivkey without understanding that I needed a rescan, but restarted bitcoin with -rescan case"", I think.\n",https://github.com/bitcoin/bitcoin/pull/5087#issuecomment-59105168,59105168,
panlilu,2014-10-15T06:09:58Z,"The param rescan is true by default at  function importprivkey, so that's not a problem.\n@TheBlueMatt\n",https://github.com/bitcoin/bitcoin/pull/5087#issuecomment-59161902,59161902,
TheBlueMatt,2014-10-15T06:15:47Z,"Thats not entirely my point...its more that, if you're importing a privkey in a new wallet, whether you specify rescan or not, you really shouldnt set the wallet to never be able to rescan to something before the wallet birthday.\n",https://github.com/bitcoin/bitcoin/pull/5087#issuecomment-59162300,59162300,
panlilu,2014-10-15T06:38:37Z,"In my pull request I just move the code ""pwalletMain->nTimeFirstKey = 1;""  to the right place. If you think the code ""pwalletMain->nTimeFirstKey = 1;"" is not working that's not the problem in this case. Perhaps you can make another commit.\n",https://github.com/bitcoin/bitcoin/pull/5087#issuecomment-59163872,59163872,
laanwj,2014-10-15T06:55:25Z,"@panlilu I think he means that you need test that the scenario that he mentions still works. Ie,\n\n``` bash\n# <key> is an old key that was created before the birthday of the wallet, and has transaction in the blockchain before that\nbitcoin-cli importkey <key> """" false\n# oops, rescan had to be true!\nbitcoin-cli stop\nbitcoind -rescan\n# phew, it rescanned the key now and found the transactions",https://github.com/bitcoin/bitcoin/pull/5087#issuecomment-59165033,59165033,
panlilu,2014-10-15T07:51:31Z,"Yes, the case is exist because of the update in 0.9.0 ""Optimize rescan to skip blocks prior to birthday"",\nbut the param rescan in function importprivkey is from https://github.com/bitcoin/bitcoin/issues/1085 and before my commit bitcoind will start a rescan automaticly and immediately (Tested) thus the param with false is not working. Setting the param rescan false means I know the privatekey is ",https://github.com/bitcoin/bitcoin/pull/5087#issuecomment-59169620,59169620,
TheBlueMatt,2014-10-16T06:03:29Z,"Sorry, there appears to be a language barrier here...are you saying the scenario @laanwj  listed above will currently not work on master?\n",https://github.com/bitcoin/bitcoin/pull/5087#issuecomment-59317871,59317871,
panlilu,2014-10-18T02:30:19Z,@TheBlueMatt Not working. \n,https://github.com/bitcoin/bitcoin/pull/5087#issuecomment-59596232,59596232,
cozz,2014-10-18T02:45:16Z,"@panlilu Are you sure you didnt forget the label?\n\n```\nimportprivkey <key> false\n```\n\ninstead of\n\n```\nimportprivkey <key> """" false\n```\n",https://github.com/bitcoin/bitcoin/pull/5087#issuecomment-59596576,59596576,
panlilu,2014-10-18T02:47:01Z,@cozz Pretty sure.\n,https://github.com/bitcoin/bitcoin/pull/5087#issuecomment-59596611,59596611,
cozz,2014-10-18T03:31:35Z,"Just tested on current master, I can not reproduce a bug here, the parameter works as expected,\nand also -rescan.\n\nnTimeFirstKey is memory-only, not written to disk, it does not have any effect on rescan after restart.\nSo I'm fine with merging this pull request as it doesnt hurt anybody, but I cant imagine how this\nwill fix a bug either.\n",https://github.com/bitcoin/bitcoin/pull/5087#issuecomment-59597590,59597590,
panlilu,2014-10-18T03:57:09Z,I start my bitcoind with the -txindex parameter.\nI'm running a project for vanity address (with lot of address). It works fine before update the bitcoin-core. But  it hang and with a 100% cpu when I import a new private key in the new master version bitcoin-core.\n,https://github.com/bitcoin/bitcoin/pull/5087#issuecomment-59598124,59598124,
laanwj,2014-10-22T09:58:23Z,"> nTimeFirstKey is memory-only, not written to disk, it does not have any effect on rescan after restart.\n\nThat's a good point. I take back my utACK.\n\nTo have effect beyond a restart you'd also have to change this:\n\n```\npwalletMain->mapKeyMetadata[vchAddress].nCreateTime = 1;\n```\n\n`pwalletMain->nTimeFirstKey = 1;` is just an update so that `nTimeFirstKey = min(a.nCreateTime for a in keys",https://github.com/bitcoin/bitcoin/pull/5087#issuecomment-60061750,60061750,
laanwj,2014-10-29T14:40:24Z,"Closing this for now - let me know if you want to work on a better solution and reopen this, or open a new pull\n",https://github.com/bitcoin/bitcoin/pull/5087#issuecomment-60935072,60935072,
