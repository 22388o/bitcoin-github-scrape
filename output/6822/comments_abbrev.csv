paveljanik,2015-10-13T18:13:29Z,"init.h: not worth to change IMO\n\ntransaction.h: NACK, the comment on _spendable_ output is important there.\n\ntransactions_tests: ACK - I like such changes :-)\n",https://github.com/bitcoin/bitcoin/pull/6822#issuecomment-147799888,147799888,
MarcoFalke,2015-10-13T18:21:34Z,"> @paveljanik transaction.h: NACK, the comment on spendable output is important there.\n\nSpendable is mentioned in L144 as well but I am happy to revert that if others agree. (Personally, I don't like magic numbers in comments)\n",https://github.com/bitcoin/bitcoin/pull/6822#issuecomment-147801876,147801876,
paveljanik,2015-10-13T18:35:19Z,Don't get me wrong: the comment has to be changed. Maybe change the magic numbers to some math formula there? Something like:\n\n```\n// So dust is a spendable txout less than 3*(34+148)*(minRelayTxFee/1000) satoshis\n```\n,https://github.com/bitcoin/bitcoin/pull/6822#issuecomment-147806141,147806141,
MarcoFalke,2015-10-13T19:41:46Z,Addressed comment NACK by @paveljanik \n,https://github.com/bitcoin/bitcoin/pull/6822#issuecomment-147827493,147827493,
paveljanik,2015-10-13T19:50:37Z,Can you also change 2730 (ie. magic number :-) into the above mentioned math. formula?\n,https://github.com/bitcoin/bitcoin/pull/6822#issuecomment-147830028,147830028,
sipa,2015-10-14T00:55:14Z,utACK\n,https://github.com/bitcoin/bitcoin/pull/6822#issuecomment-147894336,147894336,
TheBlueMatt,2015-10-14T10:05:27Z,"Is it just me or does this gratuitously conflict with another outstanding PR? When proposing a PR that isnt designed to replace another, but will make it fail CI (or otherwise not merge cleanly), can you either rebase your work on the other, or, at a minimum, mention it on the PR that it effects?\n",https://github.com/bitcoin/bitcoin/pull/6822#issuecomment-147998883,147998883,
sipa,2015-10-14T10:11:06Z,"@TheBlueMatt Please... it's hard enough for reviewers to keep up with all\nproposed patches, you can't expect all contributors to do so as well.\n\nIt would be helpful if you mentioned what PR it is, and suggest how it\ncould be adapted to keep working.\n",https://github.com/bitcoin/bitcoin/pull/6822#issuecomment-148001532,148001532,
MarcoFalke,2015-10-14T10:11:50Z,"@paveljanik 8d02c78 is for you but imo the tests should not replace or duplicate the documentation of the source code.\n\n@TheBlueMatt  No worries, I have this already in mind and request a rebase on your PR once this is merged.\n",https://github.com/bitcoin/bitcoin/pull/6822#issuecomment-148002048,148002048,
TheBlueMatt,2015-10-14T10:14:03Z,"@sipa I only bring it up because it was mentioned in the opening commit, only to not be tagged or worked around. I almost missed this.\n",https://github.com/bitcoin/bitcoin/pull/6822#issuecomment-148003485,148003485,
MarcoFalke,2015-10-14T10:15:52Z,"@TheBlueMatt If you want me to change the default in this PR, making yours a little bit cleaner, I am happy to do so. (Given that dropping the minRelayTxFee for the master branch is uncontroversial)\n",https://github.com/bitcoin/bitcoin/pull/6822#issuecomment-148004117,148004117,
sipa,2015-10-14T10:18:53Z,This PR could define the dust limit variable in function of minTxRelayFee?\n,https://github.com/bitcoin/bitcoin/pull/6822#issuecomment-148004978,148004978,
TheBlueMatt,2015-10-14T10:19:22Z,"Naa, I can do it in #6722 if this is merged first... I just wanted to make sure it was tagged so that it's visible. You could include the commit that changed the min relay fee if you prefer, but if you want to do that probably wait until mempool limiting is merged anyway.\n\nOn October 14, 2015 3:16:02 AM PDT, MarcoFalke notifications@github.com wrote:\n\n> @TheBlueMatt If you want me to change th",https://github.com/bitcoin/bitcoin/pull/6822#issuecomment-148005051,148005051,
paveljanik,2015-10-14T10:26:39Z,@MarcoFalke I just wanted to prevent this issue (forgotten update of this test) in the future. The suggested change doesn't prevent it though.\n,https://github.com/bitcoin/bitcoin/pull/6822#issuecomment-148006249,148006249,
MarcoFalke,2015-10-14T10:49:14Z, Addressed nit by @paveljanik and force pushed.\n,https://github.com/bitcoin/bitcoin/pull/6822#issuecomment-148012478,148012478,
laanwj,2015-10-26T09:23:00Z,"> I just wanted to prevent this issue (forgotten update of this test) in the future. The suggested change doesn't prevent it though.\n\nOn the other hand having to update the test with fixed values was a good reminder that changing minTxFee also changes the dust threshold. At least I hadn't realized this at first.\n(I think adding a test with computed, exact threshold value is a good idea, but not",https://github.com/bitcoin/bitcoin/pull/6822#issuecomment-151073967,151073967,
dexX7,2015-10-26T11:30:55Z,"> (I think adding a test with computed, exact threshold value is a good idea, but not entirely convinced it should replace the fixed values)\n\nThere are potentially a few different things to test:\n1. the global `minRelayTxFee` is `1000` (or `5000`)\n2. the dust threshold calculation is `3*aFeeRate.GetFee(nSize)`\n3. the dust threshold calculation in `IsStandardTx()` is based on the `minRelayTxFe",https://github.com/bitcoin/bitcoin/pull/6822#issuecomment-151106022,151106022,
MarcoFalke,2015-10-28T10:14:45Z,@dexX7 Let me know if the nits are fixed so I can squash the commit.\n,https://github.com/bitcoin/bitcoin/pull/6822#issuecomment-151790983,151790983,
MarcoFalke,2015-11-05T20:15:38Z,Rebased.\nAnything holding this back?\n,https://github.com/bitcoin/bitcoin/pull/6822#issuecomment-154178046,154178046,
dexX7,2015-10-14T10:45:12Z,"Nit: 546 is only accurate for pay-to-pubkey-hash outputs.\n\nEdit: nevermind.. I guess that's covered by ""a _typical_ spendable txout ..."".\n",https://github.com/bitcoin/bitcoin/pull/6822#discussion_r41978698,41978698,src/primitives/transaction.h
dexX7,2015-10-28T10:56:22Z,"There is an unneeded space at the end.\n\nOther than that, for this line you may consider using:\n\n``` cpp\nCAmount nDustThreshold = t.vout[0].GetDustThreshold(minRelayTxFee);\n```\n\nIt should have a similar effect. Since hardcoded values are used (such as `546`), it might be good to specify the ""default relay fee"" in the comment one line above.\n",https://github.com/bitcoin/bitcoin/pull/6822#discussion_r43240838,43240838,src/test/transaction_tests.cpp
MarcoFalke,2015-10-28T11:12:32Z,"`GetDustThreshold` is called via `IsStandardTx` so for the tests it's better not used here, imo. But thanks for the white space nit.\n",https://github.com/bitcoin/bitcoin/pull/6822#discussion_r43242220,43242220,src/test/transaction_tests.cpp
MarcoFalke,2015-10-28T11:35:09Z,Travis passes. Looks merge ready.\n,https://github.com/bitcoin/bitcoin/pull/6822#discussion_r43243971,43243971,src/test/transaction_tests.cpp
dexX7,2015-10-28T15:06:47Z,"> GetDustThreshold is called via IsStandardTx so for the tests it's better not used here, imo.\n\nYeah, I guess it doesn't make much difference.\n\n>  But thanks for the white space nit.\n\nYou're welcome! :)\n",https://github.com/bitcoin/bitcoin/pull/6822#discussion_r43267658,43267658,src/test/transaction_tests.cpp
laanwj,2015-11-05T22:36:55Z,"As you define this constant, please also use it in init.cpp, for example when printing the option help or when parsing the option.\n",https://github.com/bitcoin/bitcoin/pull/6822#discussion_r44080197,44080197,src/main.h
MarcoFalke,2015-11-06T07:59:15Z,@laanwj :ballot_box_with_check: done.\n,https://github.com/bitcoin/bitcoin/pull/6822#discussion_r44112178,44112178,src/main.h
