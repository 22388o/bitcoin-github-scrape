[
  {
    "sha": "5f46a7d0689ff1457b016fdf0de89e5153058864",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo1ZjQ2YTdkMDY4OWZmMTQ1N2IwMTZmZGYwZGU4OWU1MTUzMDU4ODY0",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2015-10-13T17:23:11Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2015-11-09T20:00:16Z"
      },
      "message": "transaction_tests: Be more strict checking dust\n\n* Don't allow off-by-one or more\n* Make clear dust is coupled with minRelayTxFee\n* Check rounding for odd values",
      "tree": {
        "sha": "2dc4685628cd5f641156ce4a17bc047704e8898d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2dc4685628cd5f641156ce4a17bc047704e8898d"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5f46a7d0689ff1457b016fdf0de89e5153058864",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5f46a7d0689ff1457b016fdf0de89e5153058864",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/5f46a7d0689ff1457b016fdf0de89e5153058864",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5f46a7d0689ff1457b016fdf0de89e5153058864/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "503ff6e1ae6932b63892099b4c63e92a9263fed6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/503ff6e1ae6932b63892099b4c63e92a9263fed6",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/503ff6e1ae6932b63892099b4c63e92a9263fed6"
      }
    ],
    "stats": {
      "total": 23,
      "additions": 19,
      "deletions": 4
    },
    "files": [
      {
        "sha": "98882d315e8bc426404a73c79f0fc87b9c6a8333",
        "filename": "src/primitives/transaction.h",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5f46a7d0689ff1457b016fdf0de89e5153058864/src/primitives/transaction.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5f46a7d0689ff1457b016fdf0de89e5153058864/src/primitives/transaction.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/primitives/transaction.h?ref=5f46a7d0689ff1457b016fdf0de89e5153058864",
        "patch": "@@ -143,8 +143,8 @@ class CTxOut\n         // to spend something, then we consider it dust.\n         // A typical spendable txout is 34 bytes big, and will\n         // need a CTxIn of at least 148 bytes to spend:\n-        // so dust is a spendable txout less than 546 satoshis\n-        // with default minRelayTxFee.\n+        // so dust is a spendable txout less than\n+        // 546*minRelayTxFee/1000 (in satoshis)\n         if (scriptPubKey.IsUnspendable())\n             return 0;\n "
      },
      {
        "sha": "c840f4c9fd14f5f80be6f7763721daf439b2961e",
        "filename": "src/test/transaction_tests.cpp",
        "status": "modified",
        "additions": 17,
        "deletions": 2,
        "changes": 19,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5f46a7d0689ff1457b016fdf0de89e5153058864/src/test/transaction_tests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5f46a7d0689ff1457b016fdf0de89e5153058864/src/test/transaction_tests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/transaction_tests.cpp?ref=5f46a7d0689ff1457b016fdf0de89e5153058864",
        "patch": "@@ -342,11 +342,26 @@ BOOST_AUTO_TEST_CASE(test_IsStandard)\n     string reason;\n     BOOST_CHECK(IsStandardTx(t, reason));\n \n-    t.vout[0].nValue = 501; // dust\n+    // Check dust with default relay fee:\n+    CAmount nDustThreshold = 182 * minRelayTxFee.GetFeePerK()/1000 * 3;\n+    BOOST_CHECK_EQUAL(nDustThreshold, 546);\n+    // dust:\n+    t.vout[0].nValue = nDustThreshold - 1;\n     BOOST_CHECK(!IsStandardTx(t, reason));\n+    // not dust:\n+    t.vout[0].nValue = nDustThreshold;\n+    BOOST_CHECK(IsStandardTx(t, reason));\n \n-    t.vout[0].nValue = 2730; // not dust\n+    // Check dust with odd relay fee to verify rounding:\n+    // nDustThreshold = 182 * 1234 / 1000 * 3\n+    minRelayTxFee = CFeeRate(1234);\n+    // dust:\n+    t.vout[0].nValue = 672 - 1;\n+    BOOST_CHECK(!IsStandardTx(t, reason));\n+    // not dust:\n+    t.vout[0].nValue = 672;\n     BOOST_CHECK(IsStandardTx(t, reason));\n+    minRelayTxFee = CFeeRate(1000);\n \n     t.vout[0].scriptPubKey = CScript() << OP_1;\n     BOOST_CHECK(!IsStandardTx(t, reason));"
      }
    ]
  },
  {
    "sha": "536766c903c8dc84e6709e4bd387aad5acf8e433",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo1MzY3NjZjOTAzYzhkYzg0ZTY3MDllNGJkMzg3YWFkNWFjZjhlNDMz",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2015-10-27T16:21:43Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2015-11-09T20:00:16Z"
      },
      "message": "[trivial] New DEFAULT_MIN_RELAY_TX_FEE = 1000",
      "tree": {
        "sha": "4534cad8d5959d8791f1ed016f9717e787e7ab7e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/4534cad8d5959d8791f1ed016f9717e787e7ab7e"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/536766c903c8dc84e6709e4bd387aad5acf8e433",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/536766c903c8dc84e6709e4bd387aad5acf8e433",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/536766c903c8dc84e6709e4bd387aad5acf8e433",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/536766c903c8dc84e6709e4bd387aad5acf8e433/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "5f46a7d0689ff1457b016fdf0de89e5153058864",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5f46a7d0689ff1457b016fdf0de89e5153058864",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/5f46a7d0689ff1457b016fdf0de89e5153058864"
      }
    ],
    "stats": {
      "total": 6,
      "additions": 4,
      "deletions": 2
    },
    "files": [
      {
        "sha": "9212b309dadd08b3fa9841ba762739138e809157",
        "filename": "src/main.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/536766c903c8dc84e6709e4bd387aad5acf8e433/src/main.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/536766c903c8dc84e6709e4bd387aad5acf8e433/src/main.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/main.cpp?ref=536766c903c8dc84e6709e4bd387aad5acf8e433",
        "patch": "@@ -75,7 +75,7 @@ uint64_t nPruneTarget = 0;\n bool fAlerts = DEFAULT_ALERTS;\n \n /** Fees smaller than this (in satoshi) are considered zero fee (for relaying, mining and transaction creation) */\n-CFeeRate minRelayTxFee = CFeeRate(1000);\n+CFeeRate minRelayTxFee = CFeeRate(DEFAULT_MIN_RELAY_TX_FEE);\n \n CTxMemPool mempool(::minRelayTxFee);\n "
      },
      {
        "sha": "0a7944092ac37ddb58c24c36e62013ecaadcd76a",
        "filename": "src/main.h",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/536766c903c8dc84e6709e4bd387aad5acf8e433/src/main.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/536766c903c8dc84e6709e4bd387aad5acf8e433/src/main.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/main.h?ref=536766c903c8dc84e6709e4bd387aad5acf8e433",
        "patch": "@@ -41,6 +41,8 @@ struct CNodeStateStats;\n \n /** Default for accepting alerts from the P2P network. */\n static const bool DEFAULT_ALERTS = true;\n+/** Default for -minrelaytxfee, minimum relay fee for transactions */\n+static const unsigned int DEFAULT_MIN_RELAY_TX_FEE = 1000;\n /** Default for -maxorphantx, maximum number of orphan transactions kept in memory */\n static const unsigned int DEFAULT_MAX_ORPHAN_TRANSACTIONS = 100;\n /** Default for -limitancestorcount, max number of in-mempool ancestors */"
      },
      {
        "sha": "fb0df1aff431d793dd37a5c9ec5300af7831ca0d",
        "filename": "src/test/transaction_tests.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/536766c903c8dc84e6709e4bd387aad5acf8e433/src/test/transaction_tests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/536766c903c8dc84e6709e4bd387aad5acf8e433/src/test/transaction_tests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/transaction_tests.cpp?ref=536766c903c8dc84e6709e4bd387aad5acf8e433",
        "patch": "@@ -361,7 +361,7 @@ BOOST_AUTO_TEST_CASE(test_IsStandard)\n     // not dust:\n     t.vout[0].nValue = 672;\n     BOOST_CHECK(IsStandardTx(t, reason));\n-    minRelayTxFee = CFeeRate(1000);\n+    minRelayTxFee = CFeeRate(DEFAULT_MIN_RELAY_TX_FEE);\n \n     t.vout[0].scriptPubKey = CScript() << OP_1;\n     BOOST_CHECK(!IsStandardTx(t, reason));"
      }
    ]
  },
  {
    "sha": "e20d9245e58bafdab51105c985478ccb3e0c9095",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzplMjBkOTI0NWU1OGJhZmRhYjUxMTA1Yzk4NTQ3OGNjYjNlMGM5MDk1",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2015-11-06T07:33:14Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2015-11-09T20:12:55Z"
      },
      "message": "[trivial] init: Use defaults MIN_RELAY_TX_FEE & TRANSACTION_MAXFEE",
      "tree": {
        "sha": "e0c3e7ade73dea07725461013113495f14785c69",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e0c3e7ade73dea07725461013113495f14785c69"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e20d9245e58bafdab51105c985478ccb3e0c9095",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e20d9245e58bafdab51105c985478ccb3e0c9095",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/e20d9245e58bafdab51105c985478ccb3e0c9095",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e20d9245e58bafdab51105c985478ccb3e0c9095/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "536766c903c8dc84e6709e4bd387aad5acf8e433",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/536766c903c8dc84e6709e4bd387aad5acf8e433",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/536766c903c8dc84e6709e4bd387aad5acf8e433"
      }
    ],
    "stats": {
      "total": 4,
      "additions": 2,
      "deletions": 2
    },
    "files": [
      {
        "sha": "5f2dc8bf2fce153631626d87f09587b3cb8641e1",
        "filename": "src/init.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e20d9245e58bafdab51105c985478ccb3e0c9095/src/init.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e20d9245e58bafdab51105c985478ccb3e0c9095/src/init.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/init.cpp?ref=e20d9245e58bafdab51105c985478ccb3e0c9095",
        "patch": "@@ -385,7 +385,7 @@ std::string HelpMessage(HelpMessageMode mode)\n     strUsage += HelpMessageOpt(\"-spendzeroconfchange\", strprintf(_(\"Spend unconfirmed change when sending transactions (default: %u)\"), 1));\n     strUsage += HelpMessageOpt(\"-txconfirmtarget=<n>\", strprintf(_(\"If paytxfee is not set, include enough fee so transactions begin confirmation on average within n blocks (default: %u)\"), DEFAULT_TX_CONFIRM_TARGET));\n     strUsage += HelpMessageOpt(\"-maxtxfee=<amt>\", strprintf(_(\"Maximum total fees (in %s) to use in a single wallet transaction; setting this too low may abort large transactions (default: %s)\"),\n-        CURRENCY_UNIT, FormatMoney(maxTxFee)));\n+        CURRENCY_UNIT, FormatMoney(DEFAULT_TRANSACTION_MAXFEE)));\n     strUsage += HelpMessageOpt(\"-upgradewallet\", _(\"Upgrade wallet to latest format on startup\"));\n     strUsage += HelpMessageOpt(\"-wallet=<file>\", _(\"Specify wallet file (within data directory)\") + \" \" + strprintf(_(\"(default: %s)\"), \"wallet.dat\"));\n     strUsage += HelpMessageOpt(\"-walletbroadcast\", _(\"Make the wallet broadcast transactions\") + \" \" + strprintf(_(\"(default: %u)\"), true));\n@@ -440,7 +440,7 @@ std::string HelpMessage(HelpMessageMode mode)\n         strUsage += HelpMessageOpt(\"-maxsigcachesize=<n>\", strprintf(\"Limit size of signature cache to <n> entries (default: %u)\", 50000));\n     }\n     strUsage += HelpMessageOpt(\"-minrelaytxfee=<amt>\", strprintf(_(\"Fees (in %s/kB) smaller than this are considered zero fee for relaying, mining and transaction creation (default: %s)\"),\n-        CURRENCY_UNIT, FormatMoney(::minRelayTxFee.GetFeePerK())));\n+        CURRENCY_UNIT, FormatMoney(DEFAULT_MIN_RELAY_TX_FEE)));\n     strUsage += HelpMessageOpt(\"-printtoconsole\", _(\"Send trace/debug info to console instead of debug.log file\"));\n     if (showDebug)\n     {"
      }
    ]
  }
]