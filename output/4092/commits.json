[
  {
    "sha": "40c5b939f2bff960e397da6ae3651952adc68cbe",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo0MGM1YjkzOWYyYmZmOTYwZTM5N2RhNmFlMzY1MTk1MmFkYzY4Y2Jl",
    "commit": {
      "author": {
        "name": "Cozz Lovan",
        "email": "cozzlovan@yahoo.com",
        "date": "2014-04-24T20:21:45Z"
      },
      "committer": {
        "name": "Cozz Lovan",
        "email": "cozzlovan@yahoo.com",
        "date": "2014-04-25T18:01:20Z"
      },
      "message": "[Qt] Optionally add third party links to transaction context menu",
      "tree": {
        "sha": "2e6ce47bb89c7daa525858cf6e965495f6088426",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2e6ce47bb89c7daa525858cf6e965495f6088426"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/40c5b939f2bff960e397da6ae3651952adc68cbe",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/40c5b939f2bff960e397da6ae3651952adc68cbe",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/40c5b939f2bff960e397da6ae3651952adc68cbe",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/40c5b939f2bff960e397da6ae3651952adc68cbe/comments",
    "author": {
      "login": "cozz",
      "id": 2814559,
      "node_id": "MDQ6VXNlcjI4MTQ1NTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2814559?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cozz",
      "html_url": "https://github.com/cozz",
      "followers_url": "https://api.github.com/users/cozz/followers",
      "following_url": "https://api.github.com/users/cozz/following{/other_user}",
      "gists_url": "https://api.github.com/users/cozz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cozz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cozz/subscriptions",
      "organizations_url": "https://api.github.com/users/cozz/orgs",
      "repos_url": "https://api.github.com/users/cozz/repos",
      "events_url": "https://api.github.com/users/cozz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cozz/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "cozz",
      "id": 2814559,
      "node_id": "MDQ6VXNlcjI4MTQ1NTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2814559?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cozz",
      "html_url": "https://github.com/cozz",
      "followers_url": "https://api.github.com/users/cozz/followers",
      "following_url": "https://api.github.com/users/cozz/following{/other_user}",
      "gists_url": "https://api.github.com/users/cozz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cozz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cozz/subscriptions",
      "organizations_url": "https://api.github.com/users/cozz/orgs",
      "repos_url": "https://api.github.com/users/cozz/repos",
      "events_url": "https://api.github.com/users/cozz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cozz/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "4765b8c11679aeb76efd9ce907a5c17661d4b018",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4765b8c11679aeb76efd9ce907a5c17661d4b018",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/4765b8c11679aeb76efd9ce907a5c17661d4b018"
      }
    ],
    "stats": {
      "total": 87,
      "additions": 87,
      "deletions": 0
    },
    "files": [
      {
        "sha": "0103842e029d50d1bdc92afd06f7d160d64e9235",
        "filename": "src/qt/forms/optionsdialog.ui",
        "status": "modified",
        "additions": 24,
        "deletions": 0,
        "changes": 24,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/40c5b939f2bff960e397da6ae3651952adc68cbe/src/qt/forms/optionsdialog.ui",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/40c5b939f2bff960e397da6ae3651952adc68cbe/src/qt/forms/optionsdialog.ui",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/forms/optionsdialog.ui?ref=40c5b939f2bff960e397da6ae3651952adc68cbe",
        "patch": "@@ -471,6 +471,30 @@\n          </property>\n         </widget>\n        </item>\n+       <item>\n+        <layout class=\"QHBoxLayout\" name=\"horizontalLayout_3_Display\">\n+         <item>\n+          <widget class=\"QLabel\" name=\"thirdPartyTxUrlsLabel\">\n+           <property name=\"toolTip\">\n+            <string>Third party URLs (e.g. a block explorer) that appear in the transactions tab as context menu items. %s in the URL is replaced by transaction hash. Multiple URLs are separated by vertical bar |.</string>\n+           </property>\n+           <property name=\"text\">\n+            <string>Third party transaction URLs</string>\n+           </property>\n+           <property name=\"buddy\">\n+            <cstring>thirdPartyTxUrls</cstring>\n+           </property>\n+          </widget>\n+         </item>\n+         <item>\n+          <widget class=\"QLineEdit\" name=\"thirdPartyTxUrls\">\n+           <property name=\"toolTip\">\n+            <string>Third party URLs (e.g. a block explorer) that appear in the transactions tab as context menu items. %s in the URL is replaced by transaction hash. Multiple URLs are separated by vertical bar |.</string>\n+           </property>\n+          </widget>\n+         </item>\n+        </layout>\n+       </item>\n        <item>\n         <spacer name=\"verticalSpacer_Display\">\n          <property name=\"orientation\">"
      },
      {
        "sha": "96464d2cc0154dc1f4c74e189f872919945acb58",
        "filename": "src/qt/optionsdialog.cpp",
        "status": "modified",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/40c5b939f2bff960e397da6ae3651952adc68cbe/src/qt/optionsdialog.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/40c5b939f2bff960e397da6ae3651952adc68cbe/src/qt/optionsdialog.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/optionsdialog.cpp?ref=40c5b939f2bff960e397da6ae3651952adc68cbe",
        "patch": "@@ -96,6 +96,9 @@ OptionsDialog::OptionsDialog(QWidget *parent) :\n #endif\n         }\n     }\n+#if QT_VERSION >= 0x040700\n+    ui->thirdPartyTxUrls->setPlaceholderText(\"https://example.com/tx/%s\");\n+#endif\n \n     ui->unit->setModel(new BitcoinUnits(this));\n     ui->transactionFee->setSingleStep(CTransaction::nMinTxFee);\n@@ -151,6 +154,7 @@ void OptionsDialog::setModel(OptionsModel *model)\n     connect(ui->connectSocks, SIGNAL(clicked(bool)), this, SLOT(showRestartWarning()));\n     /* Display */\n     connect(ui->lang, SIGNAL(valueChanged()), this, SLOT(showRestartWarning()));\n+    connect(ui->thirdPartyTxUrls, SIGNAL(textChanged(const QString &)), this, SLOT(showRestartWarning()));\n }\n \n void OptionsDialog::setMapper()\n@@ -183,6 +187,7 @@ void OptionsDialog::setMapper()\n     mapper->addMapping(ui->lang, OptionsModel::Language);\n     mapper->addMapping(ui->unit, OptionsModel::DisplayUnit);\n     mapper->addMapping(ui->displayAddresses, OptionsModel::DisplayAddresses);\n+    mapper->addMapping(ui->thirdPartyTxUrls, OptionsModel::ThirdPartyTxUrls);\n }\n \n void OptionsDialog::enableOkButton()"
      },
      {
        "sha": "74c6b10ce29e4013b9b730aa3000040e77d30589",
        "filename": "src/qt/optionsmodel.cpp",
        "status": "modified",
        "additions": 13,
        "deletions": 0,
        "changes": 13,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/40c5b939f2bff960e397da6ae3651952adc68cbe/src/qt/optionsmodel.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/40c5b939f2bff960e397da6ae3651952adc68cbe/src/qt/optionsmodel.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/optionsmodel.cpp?ref=40c5b939f2bff960e397da6ae3651952adc68cbe",
        "patch": "@@ -63,6 +63,10 @@ void OptionsModel::Init()\n         settings.setValue(\"bDisplayAddresses\", false);\n     bDisplayAddresses = settings.value(\"bDisplayAddresses\", false).toBool();\n \n+    if (!settings.contains(\"strThirdPartyTxUrls\"))\n+        settings.setValue(\"strThirdPartyTxUrls\", \"\");\n+    strThirdPartyTxUrls = settings.value(\"strThirdPartyTxUrls\", \"\").toString();\n+\n     if (!settings.contains(\"fCoinControlFeatures\"))\n         settings.setValue(\"fCoinControlFeatures\", false);\n     fCoinControlFeatures = settings.value(\"fCoinControlFeatures\", false).toBool();\n@@ -203,6 +207,8 @@ QVariant OptionsModel::data(const QModelIndex & index, int role) const\n             return nDisplayUnit;\n         case DisplayAddresses:\n             return bDisplayAddresses;\n+        case ThirdPartyTxUrls:\n+            return strThirdPartyTxUrls;\n         case Language:\n             return settings.value(\"language\");\n         case CoinControlFeatures:\n@@ -304,6 +310,13 @@ bool OptionsModel::setData(const QModelIndex & index, const QVariant & value, in\n             bDisplayAddresses = value.toBool();\n             settings.setValue(\"bDisplayAddresses\", bDisplayAddresses);\n             break;\n+        case ThirdPartyTxUrls:\n+            if (strThirdPartyTxUrls != value.toString()) {\n+                strThirdPartyTxUrls = value.toString();\n+                settings.setValue(\"strThirdPartyTxUrls\", strThirdPartyTxUrls);\n+                setRestartRequired(true);\n+            }\n+            break;\n         case Language:\n             if (settings.value(\"language\") != value) {\n                 settings.setValue(\"language\", value);"
      },
      {
        "sha": "f05e3e92de1657ede401e5bf3255c91ee8ab4641",
        "filename": "src/qt/optionsmodel.h",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/40c5b939f2bff960e397da6ae3651952adc68cbe/src/qt/optionsmodel.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/40c5b939f2bff960e397da6ae3651952adc68cbe/src/qt/optionsmodel.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/optionsmodel.h?ref=40c5b939f2bff960e397da6ae3651952adc68cbe",
        "patch": "@@ -36,6 +36,7 @@ class OptionsModel : public QAbstractListModel\n         Fee,                    // qint64\n         DisplayUnit,            // BitcoinUnits::Unit\n         DisplayAddresses,       // bool\n+        ThirdPartyTxUrls,       // QString\n         Language,               // QString\n         CoinControlFeatures,    // bool\n         ThreadsScriptVerif,     // int\n@@ -56,6 +57,7 @@ class OptionsModel : public QAbstractListModel\n     bool getMinimizeOnClose() { return fMinimizeOnClose; }\n     int getDisplayUnit() { return nDisplayUnit; }\n     bool getDisplayAddresses() { return bDisplayAddresses; }\n+    QString getThirdPartyTxUrls() { return strThirdPartyTxUrls; }\n     bool getProxySettings(QNetworkProxy& proxy) const;\n     bool getCoinControlFeatures() { return fCoinControlFeatures; }\n     const QString& getOverriddenByCommandLine() { return strOverriddenByCommandLine; }\n@@ -71,6 +73,7 @@ class OptionsModel : public QAbstractListModel\n     QString language;\n     int nDisplayUnit;\n     bool bDisplayAddresses;\n+    QString strThirdPartyTxUrls;\n     bool fCoinControlFeatures;\n     /* settings that were overriden by command-line */\n     QString strOverriddenByCommandLine;"
      },
      {
        "sha": "8cf2b0a1b1e4fdba4834f108a8e7bbbce26da634",
        "filename": "src/qt/transactiontablemodel.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/40c5b939f2bff960e397da6ae3651952adc68cbe/src/qt/transactiontablemodel.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/40c5b939f2bff960e397da6ae3651952adc68cbe/src/qt/transactiontablemodel.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/transactiontablemodel.cpp?ref=40c5b939f2bff960e397da6ae3651952adc68cbe",
        "patch": "@@ -564,6 +564,8 @@ QVariant TransactionTableModel::data(const QModelIndex &index, int role) const\n         return rec->credit + rec->debit;\n     case TxIDRole:\n         return rec->getTxID();\n+    case TxHashRole:\n+        return QString::fromStdString(rec->hash.ToString());\n     case ConfirmedRole:\n         return rec->status.countsForBalance;\n     case FormattedAmountRole:"
      },
      {
        "sha": "333e6bc6ed5829ede3c6a37174c41148e59cc325",
        "filename": "src/qt/transactiontablemodel.h",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/40c5b939f2bff960e397da6ae3651952adc68cbe/src/qt/transactiontablemodel.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/40c5b939f2bff960e397da6ae3651952adc68cbe/src/qt/transactiontablemodel.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/transactiontablemodel.h?ref=40c5b939f2bff960e397da6ae3651952adc68cbe",
        "patch": "@@ -50,6 +50,8 @@ class TransactionTableModel : public QAbstractTableModel\n         AmountRole,\n         /** Unique identifier */\n         TxIDRole,\n+        /** Transaction hash */\n+        TxHashRole,\n         /** Is transaction confirmed? */\n         ConfirmedRole,\n         /** Formatted amount, without brackets when unconfirmed */"
      },
      {
        "sha": "d4d29416caff5f6d619db888ff6ccd33aeb9d094",
        "filename": "src/qt/transactionview.cpp",
        "status": "modified",
        "additions": 35,
        "deletions": 0,
        "changes": 35,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/40c5b939f2bff960e397da6ae3651952adc68cbe/src/qt/transactionview.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/40c5b939f2bff960e397da6ae3651952adc68cbe/src/qt/transactionview.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/transactionview.cpp?ref=40c5b939f2bff960e397da6ae3651952adc68cbe",
        "patch": "@@ -20,6 +20,7 @@\n \n #include <QComboBox>\n #include <QDateTimeEdit>\n+#include <QDesktopServices>\n #include <QDoubleValidator>\n #include <QHBoxLayout>\n #include <QHeaderView>\n@@ -28,7 +29,9 @@\n #include <QMenu>\n #include <QPoint>\n #include <QScrollBar>\n+#include <QSignalMapper>\n #include <QTableView>\n+#include <QUrl>\n #include <QVBoxLayout>\n \n TransactionView::TransactionView(QWidget *parent) :\n@@ -138,7 +141,11 @@ TransactionView::TransactionView(QWidget *parent) :\n     contextMenu->addAction(editLabelAction);\n     contextMenu->addAction(showDetailsAction);\n \n+    mapperThirdPartyTxUrls = new QSignalMapper(this);\n+\n     // Connect actions\n+    connect(mapperThirdPartyTxUrls, SIGNAL(mapped(QString)), this, SLOT(openThirdPartyTxUrl(QString)));\n+\n     connect(dateWidget, SIGNAL(activated(int)), this, SLOT(chooseDate(int)));\n     connect(typeWidget, SIGNAL(activated(int)), this, SLOT(chooseType(int)));\n     connect(addressWidget, SIGNAL(textChanged(QString)), this, SLOT(changedPrefix(QString)));\n@@ -183,6 +190,25 @@ void TransactionView::setModel(WalletModel *model)\n         transactionView->setColumnWidth(TransactionTableModel::Amount, AMOUNT_MINIMUM_COLUMN_WIDTH);\n \n         columnResizingFixer = new GUIUtil::TableViewLastColumnResizingFixer(transactionView, AMOUNT_MINIMUM_COLUMN_WIDTH, MINIMUM_COLUMN_WIDTH);\n+\n+        if (model->getOptionsModel())\n+        {\n+            // Add third party transaction URLs to context menu\n+            QStringList listUrls = model->getOptionsModel()->getThirdPartyTxUrls().split(\"|\", QString::SkipEmptyParts);\n+            for (int i = 0; i < listUrls.size(); ++i)\n+            {\n+                QString host = QUrl(listUrls[i].trimmed(), QUrl::StrictMode).host();\n+                if (!host.isEmpty())\n+                {\n+                    QAction *thirdPartyTxUrlAction = new QAction(host, this); // use host as menu item label\n+                    if (i == 0)\n+                        contextMenu->addSeparator();\n+                    contextMenu->addAction(thirdPartyTxUrlAction);\n+                    connect(thirdPartyTxUrlAction, SIGNAL(triggered()), mapperThirdPartyTxUrls, SLOT(map()));\n+                    mapperThirdPartyTxUrls->setMapping(thirdPartyTxUrlAction, listUrls[i].trimmed());\n+                }\n+            }\n+        }\n     }\n }\n \n@@ -383,6 +409,15 @@ void TransactionView::showDetails()\n     }\n }\n \n+void TransactionView::openThirdPartyTxUrl(QString url)\n+{\n+    if(!transactionView || !transactionView->selectionModel())\n+        return;\n+    QModelIndexList selection = transactionView->selectionModel()->selectedRows(0);\n+    if(!selection.isEmpty())\n+         QDesktopServices::openUrl(QUrl::fromUserInput(url.replace(\"%s\", selection.at(0).data(TransactionTableModel::TxHashRole).toString())));\n+}\n+\n QWidget *TransactionView::createDateRangeWidget()\n {\n     dateRangeWidget = new QFrame();"
      },
      {
        "sha": "7a89fa11caea3f20774a76afd3a4ea657e91cd44",
        "filename": "src/qt/transactionview.h",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/40c5b939f2bff960e397da6ae3651952adc68cbe/src/qt/transactionview.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/40c5b939f2bff960e397da6ae3651952adc68cbe/src/qt/transactionview.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/transactionview.h?ref=40c5b939f2bff960e397da6ae3651952adc68cbe",
        "patch": "@@ -19,6 +19,7 @@ class QFrame;\n class QLineEdit;\n class QMenu;\n class QModelIndex;\n+class QSignalMapper;\n class QTableView;\n QT_END_NAMESPACE\n \n@@ -65,6 +66,7 @@ class TransactionView : public QWidget\n     QLineEdit *amountWidget;\n \n     QMenu *contextMenu;\n+    QSignalMapper *mapperThirdPartyTxUrls;\n \n     QFrame *dateRangeWidget;\n     QDateTimeEdit *dateFrom;\n@@ -85,6 +87,7 @@ private slots:\n     void copyLabel();\n     void copyAmount();\n     void copyTxID();\n+    void openThirdPartyTxUrl(QString url);\n \n signals:\n     void doubleClicked(const QModelIndex&);"
      }
    ]
  }
]