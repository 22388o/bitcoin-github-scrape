ryanofsky,2017-05-04T20:56:07Z,utACK 31b7171cbfef7d66957a7721aff524778dbdf5b0,https://github.com/bitcoin/bitcoin/pull/10340#issuecomment-299306605,299306605,
ryanofsky,2017-05-04T22:15:32Z,"It'd be nice to have a comment attached to cs_wallet saying when the lock needs to be acquired:\n\nhttps://github.com/bitcoin/bitcoin/blob/d3dce0eb67e8691745be6cf7e04b920f5e419bd9/src/wallet/wallet.h#L721\n\nBringing this up because I think at this point if anybody would know how to write such a comment, it would probably be you.",https://github.com/bitcoin/bitcoin/pull/10340#issuecomment-299324417,299324417,
jonasschnelli,2017-05-05T07:51:01Z,"If a non-wallet-model code-part needs to obtain the `cs_wallet` lock, then we should move the logic-part (that requires the lock) to wallet-model.",https://github.com/bitcoin/bitcoin/pull/10340#issuecomment-299403707,299403707,
TheBlueMatt,2017-05-05T14:46:25Z,"Closing in favor of #10244, which is a much better fix, though larger diff.",https://github.com/bitcoin/bitcoin/pull/10340#issuecomment-299484710,299484710,
jonasschnelli,2017-05-05T07:49:42Z,How can we avoid this really undesirable layer violation (`model->wallet->cs_wallet`)? This seems to go in the wrong direction with @ryanofsky approach to form clean layers for later process separation.,https://github.com/bitcoin/bitcoin/pull/10340#discussion_r114945584,114945584,src/qt/coincontroldialog.cpp
jonasschnelli,2017-05-05T07:49:47Z,Meh!,https://github.com/bitcoin/bitcoin/pull/10340#discussion_r114945596,114945596,src/qt/walletmodel.h
ryanofsky,2017-05-05T09:14:17Z,"> How can we avoid this really undesirable layer violation (model->wallet->cs_wallet)?\n\n#10244 stops using CWalletTx pointers in Qt altogether, so I think the layer violation would only be temporary. I think #10340 complements #10244 because it makes sense to fix correctness and safety issues first, and then organize the code around those changes.",https://github.com/bitcoin/bitcoin/pull/10340#discussion_r114957774,114957774,src/qt/coincontroldialog.cpp
