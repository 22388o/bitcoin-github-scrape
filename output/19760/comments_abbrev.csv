MarcoFalke,2020-08-18 14:18:55,I think instead of `mv` you'll need to use `git mv`?,https://github.com/bitcoin/bitcoin/pull/19760#issuecomment-675506723,675506723,
jnewbery,2020-08-18 14:30:06,"> I think instead of mv you'll need to use git mv?\n\nThanks Marco. Should be fixed now.",https://github.com/bitcoin/bitcoin/pull/19760#issuecomment-675513227,675513227,
amitiuttarwar,2020-08-18 16:16:44,"concept ACK! I still have to stop and think to distinguish testnode from mininode. I was skeptical about the rename to p2p, but looking at the code has convinced me it makes sense. ",https://github.com/bitcoin/bitcoin/pull/19760#issuecomment-675575728,675575728,
practicalswift,2020-08-18 17:25:46,"Concept ACK\n\nOn behalf of future generations of Bitcoin Core contributors: thank you! :)",https://github.com/bitcoin/bitcoin/pull/19760#issuecomment-675611161,675611161,
dhruv,2020-08-18 22:28:29,"Concept ACK! Thank you for the PR, @jnewbery.\n\nAs a newcomer, I have started to think about mininode as ""mocknode"" and testnode as just ""node"". Since the entire network is peer-to-peer anyway, would it be valuable to avoid using that to mean mock?",https://github.com/bitcoin/bitcoin/pull/19760#issuecomment-675751091,675751091,
jnewbery,2020-08-19 08:38:27,"> As a newcomer, I have started to think about mininode as ""mocknode"" and testnode as just ""node"".\n\nYes indeed. A `P2PInterface` object can be thought of as a mock node.\n\n> Since the entire network is peer-to-peer anyway, would it be valuable to avoid using that to mean mock?\n\nIn the abstract, it doesn't make sense to talk about a `P2PInterface` as a peer. When a bitcoind node creates ",https://github.com/bitcoin/bitcoin/pull/19760#issuecomment-675953094,675953094,
laanwj,2020-08-19 14:53:47,Concept ACK,https://github.com/bitcoin/bitcoin/pull/19760#issuecomment-676476117,676476117,
mzumsande,2020-08-19 16:27:20,"I'm not sure if this makes things less confusing: \n\nIn a test where our node has, in current terminology, one connection to a mininode and one to another bitcoind instance, it would in future terminology have one `test framework p2p connection` and another connection to a regular node, which we probably shouldn't call `test framework p2p connection`, even though the node would be managed by th",https://github.com/bitcoin/bitcoin/pull/19760#issuecomment-676528738,676528738,
glozow,2020-08-19 18:46:26,"(Edited for some inaccuracies pointed out by sipa)\n\n~The main thing is that people often call mininodes ""nodes"" when they are not, so we want to remove that naming.~ I think the main thing is that we don't want people to confuse mininodes (a minimal p2p interface) with testnodes (the bitcoind node we are testing in functional tests). I was skeptical about calling it ""p2p"" at first as well but,",https://github.com/bitcoin/bitcoin/pull/19760#issuecomment-676597241,676597241,
sipa,2020-08-19 19:11:00,"I don't have a strong opinion either way on the renaming, but wanted to respond to this::\n\n> But all they can do is p2p messages, nothing more, so it's incorrect to call them ""__nodes"".\n\nTo me, that's exactly what makes something a node: whether or not it interacts with other nodes via the P2P protocol, making it a node of the P2P network graph. Here we just have a very minimal node that d",https://github.com/bitcoin/bitcoin/pull/19760#issuecomment-676608824,676608824,
promag,2020-08-19 22:16:51,"@sipa so ""peer"" == ""node""?",https://github.com/bitcoin/bitcoin/pull/19760#issuecomment-676758308,676758308,
sipa,2020-08-20 00:21:20,A peer is a node that's not yourself (and you're communicating with).,https://github.com/bitcoin/bitcoin/pull/19760#issuecomment-676825671,676825671,
dhruv,2020-08-20 01:38:34,"> A peer is a node that's not yourself.\n\nThis comment pinpoints one source of my confusion: `BitcoinTestFramework.num_nodes` can set up multiple TestNode instances which are also peers and speak the P2P protocol. This then starts to imply that there are nodes in the P2P network, that are not ""peers"" as we use that word in the test framework.\n\nOverall, I understand the distinction now and d",https://github.com/bitcoin/bitcoin/pull/19760#issuecomment-676845790,676845790,
jnewbery,2020-08-20 07:12:32,"@gzhao408 \n> There's almost always a better option than the test_framework.util wait_until, which does not grab the lock automatically, and doesn't have any context from the TestFramework instance.\n\nI think this is done in #19752.\n\n> Generally I think it's always better to either use the connection returned by add_p2p_connection or index into the p2ps list.\n\nI have no problem with th",https://github.com/bitcoin/bitcoin/pull/19760#issuecomment-677395343,677395343,
jnewbery,2020-08-20 07:45:57,"My PR description has made this conversation a bit more abstract than it needs to be. To recenter on the changes this PR is making:\n\n- we have a file that contains our python implementation of a p2p stack. It contains a `P2PConnection` object (a low level connection to a bitcoind node's P2P interface) and a `P2PInterface` (a higher level object that allows us to communicate with the node's net",https://github.com/bitcoin/bitcoin/pull/19760#issuecomment-677433900,677433900,
DrahtBot,2020-08-20 19:58:30,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #19804 (test: remove confusing p2p property by gzhao408)\n* #19801 (test: check for all possible OP_CLTV fail reasons in f",https://github.com/bitcoin/bitcoin/pull/19760#issuecomment-677872862,677872862,
jnewbery,2020-08-21 14:54:11,rebased,https://github.com/bitcoin/bitcoin/pull/19760#issuecomment-678332994,678332994,
amitiuttarwar,2020-08-24 21:10:08,"changes look good, but I think there are two more uses of the word ""mininode"" in comments that would be nice to update\n- `example_test.py` L170\n- `feature_block.py` L56 ",https://github.com/bitcoin/bitcoin/pull/19760#issuecomment-679368081,679368081,
jnewbery,2020-08-25 09:04:59,"> there are two more uses of the word ""mininode"" in comments that would be nice to update\n\nThanks! Not sure how I missed those. I've now removed them.",https://github.com/bitcoin/bitcoin/pull/19760#issuecomment-679902188,679902188,
amitiuttarwar,2020-08-25 19:44:55,ACK d5800da519,https://github.com/bitcoin/bitcoin/pull/19760#issuecomment-680233021,680233021,
MarcoFalke,2020-08-26 05:08:10,"ACK d5800da5199527a366024bc80cad7fcca17d5c4a ðŸšž\n\n<details><summary>Show signature and timestamp</summary>\n\nSignature:\n\n```\n-----BEGIN PGP SIGNED MESSAGE-----\nHash: SHA512\n\nACK d5800da5199527a366024bc80cad7fcca17d5c4a ðŸšž\n-----BEGIN PGP SIGNATURE-----\n\niQGzBAEBCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUiZNAwAtJbH7PHEONAA5ZbYzkGjBBwJg2v6IwplI/7lrqAlWVZdGOWX3U",https://github.com/bitcoin/bitcoin/pull/19760#issuecomment-680641921,680641921,
jnewbery,2020-08-26 07:14:53,"> @jnewbery let me know if you want this merged or want to address the nits\n\n> I think this is rfm\n\nIf you think it's rfm, let's merge it now. I can fix the style comments in a follow-up.",https://github.com/bitcoin/bitcoin/pull/19760#issuecomment-680704309,680704309,
glozow,2020-08-19 18:11:36,"I've been waiting for someone to touch these lines so I can recommend using this function I made ðŸ˜‚  \nAvoid using the test_framework.util `wait_until` and also avoid using the `p2p` property.\n```suggestion\n        node.p2ps[0].wait_for_broadcast([txid])\n```\nThis requires that you don't convert `txid` to an int (i.e. get rid of int(..., 16)) which I think is a good thing.",https://github.com/bitcoin/bitcoin/pull/19760#discussion_r473228303,473228303,test/functional/wallet_resendwallettransactions.py
glozow,2020-08-19 18:12:49,"Same here\n```suggestion\n        node.p2ps[1].wait_for_broadcast([txid])\n```",https://github.com/bitcoin/bitcoin/pull/19760#discussion_r473228963,473228963,test/functional/wallet_resendwallettransactions.py
glozow,2020-08-19 18:15:00,"Since you're touching this line, I'd say avoid using the `p2p` property. Especially in example_test.py\n```suggestion\n        wait_until(lambda: sorted(blocks) == sorted(list(self.nodes[2].p2ps[0].block_receive_map.keys())), timeout=5, lock=p2p_lock)\n```",https://github.com/bitcoin/bitcoin/pull/19760#discussion_r473230103,473230103,test/functional/example_test.py
jnewbery,2020-08-20 07:13:13,"These all seem like fine suggestions, but out of scope for this renaming PR.",https://github.com/bitcoin/bitcoin/pull/19760#discussion_r473680247,473680247,test/functional/wallet_resendwallettransactions.py
jnewbery,2020-08-20 07:13:18,as above,https://github.com/bitcoin/bitcoin/pull/19760#discussion_r473680319,473680319,test/functional/wallet_resendwallettransactions.py
jnewbery,2020-08-20 07:13:24,as above,https://github.com/bitcoin/bitcoin/pull/19760#discussion_r473680402,473680402,test/functional/example_test.py
kallewoof,2020-08-26 02:04:21,`i` < `r`,https://github.com/bitcoin/bitcoin/pull/19760#discussion_r476975992,476975992,test/functional/rpc_blockchain.py
sipa,2020-08-26 03:11:55,"> `i` < `r`\n\n![youropinion](https://user-images.githubusercontent.com/548488/91250988-32248000-e70f-11ea-8f69-0a9e44c46055.gif)\n",https://github.com/bitcoin/bitcoin/pull/19760#discussion_r477006765,477006765,test/functional/rpc_blockchain.py
MarcoFalke,2020-08-26 05:09:52,"P < p\n\n<img src=""https://upload.wikimedia.org/wikipedia/commons/c/cf/USASCII_code_chart.png""></img>",https://github.com/bitcoin/bitcoin/pull/19760#discussion_r477037288,477037288,test/functional/feature_versionbits_warning.py
MarcoFalke,2020-08-26 05:11:54,"```suggestion\nThe P2PInterface classes interact with the ____ nodes under test using the\n```\n\nI think this should say ""classes"" instead. Also, I am not sure about `bitcoind`, since it is also possible to run the tests against the gui. Though using PACKAGE_NAME here might be a bit too abstract?",https://github.com/bitcoin/bitcoin/pull/19760#discussion_r477037833,477037833,test/functional/test_framework/p2p.py
