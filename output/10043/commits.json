[
  {
    "sha": "fe5ca6f765313c9ca51616917ab14d65d4b44956",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmZTVjYTZmNzY1MzEzYzljYTUxNjE2OTE3YWIxNGQ2NWQ0YjQ0OTU2",
    "commit": {
      "author": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2017-03-21T08:47:24Z"
      },
      "committer": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2017-03-21T08:50:13Z"
      },
      "message": "CKey::SetPrivKey assert the compressed flag",
      "tree": {
        "sha": "e2dbd7fa478b303cc4945162317f0b91f8eae1fa",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e2dbd7fa478b303cc4945162317f0b91f8eae1fa"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fe5ca6f765313c9ca51616917ab14d65d4b44956",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEyhopCNzi8TB0xizeHrd2uwPHki0FAljQ6UUACgkQHrd2uwPH\nki11KBAA1UxmvW+mbeyoRB/Awno57/ezTxHmbhMuwN8uXHZA2n6ZsNG3IouAKef8\n8P2TI/9ACjTYQmaI8JSbbXO0AROJfQB0sAMP6Eu1rrY+HsVNxATHT+b36LCHzLK8\nHkvZd4iz6rpMOP/4FLoXaH4NrKkTzluCJXMcsZN+WcnEJAU2jROqpmBYo99Gs0im\nRz8mf6uw6FRLpl3chh+CJro8NRqrY0kG1kmNPXDn2/R5NYkepI++nvo4EkBEAq+6\npQ1lE6xcaKsod6RKhciXOSLcwApkWCSjrEXeXMHQqN93OWFz7/K/O8SYBWx0U5/r\nPj4Da+GPzUfKrgTDugDNesIQnTjVEJCgC46q01qvKflH58pqOk/ZR0nUct40uVfR\nTBwvdUVXEUbWS2+mM3bzLzLubYt50bwD1kmAxQ+TgZ9P1TcG6drdaSRs6B5CSlsO\nbqbu9/lUEp18lk/jTSQq9KHZKIJJ0B3YA/3hOfFbOBmqxNzsX88KZ/EgnqU5nPka\nWZ1GzEs3gN0JHcJlJdjFuyE7ftG2C7OkSdU6rb9vlwfZOacGSrIjx6xUsySFdX2W\nuqVpBUynP4aZSqhYuTMbZzLyqmIZEEJN8i4c2aKej94Zc7fM42Rk/TYTpB8S4k1G\nM36123R5TZaol9hcpdg1Je3STOO9D2DJHLNVHz7Yum8Ohke0Q9w=\n=tphf\n-----END PGP SIGNATURE-----",
        "payload": "tree e2dbd7fa478b303cc4945162317f0b91f8eae1fa\nparent 3192e5278abca7c1f3b4a2a7f77a0ce941c73985\nauthor Jonas Schnelli <dev@jonasschnelli.ch> 1490086044 +0100\ncommitter Jonas Schnelli <dev@jonasschnelli.ch> 1490086213 +0100\n\nCKey::SetPrivKey assert the compressed flag\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fe5ca6f765313c9ca51616917ab14d65d4b44956",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fe5ca6f765313c9ca51616917ab14d65d4b44956",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fe5ca6f765313c9ca51616917ab14d65d4b44956/comments",
    "author": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "3192e5278abca7c1f3b4a2a7f77a0ce941c73985",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3192e5278abca7c1f3b4a2a7f77a0ce941c73985",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/3192e5278abca7c1f3b4a2a7f77a0ce941c73985"
      }
    ],
    "stats": {
      "total": 16,
      "additions": 16,
      "deletions": 0
    },
    "files": [
      {
        "sha": "f413b3c2b6cdd8a76db1e008ca4f43eb11041747",
        "filename": "src/key.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fe5ca6f765313c9ca51616917ab14d65d4b44956/src/key.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fe5ca6f765313c9ca51616917ab14d65d4b44956/src/key.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/key.cpp?ref=fe5ca6f765313c9ca51616917ab14d65d4b44956",
        "patch": "@@ -135,6 +135,7 @@ bool CKey::SetPrivKey(const CPrivKey &privkey, bool fCompressedIn) {\n     if (!ec_privkey_import_der(secp256k1_context_sign, (unsigned char*)begin(), &privkey[0], privkey.size()))\n         return false;\n     fCompressed = fCompressedIn;\n+    assert(privkey[1] == (fCompressed ? 0x81 : 0x82));\n     fValid = true;\n     return true;\n }"
      },
      {
        "sha": "5733a0e1aa76a0aee2f5311b7b9d9a8bbd7001df",
        "filename": "src/test/key_tests.cpp",
        "status": "modified",
        "additions": 15,
        "deletions": 0,
        "changes": 15,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fe5ca6f765313c9ca51616917ab14d65d4b44956/src/test/key_tests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fe5ca6f765313c9ca51616917ab14d65d4b44956/src/test/key_tests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/key_tests.cpp?ref=fe5ca6f765313c9ca51616917ab14d65d4b44956",
        "patch": "@@ -158,4 +158,19 @@ BOOST_AUTO_TEST_CASE(key_test1)\n     BOOST_CHECK(detsigc == ParseHex(\"2052d8a32079c11e79db95af63bb9600c5b04f21a9ca33dc129c2bfa8ac9dc1cd561d8ae5e0f6c1a16bde3719c64c2fd70e404b6428ab9a69566962e8771b5944d\"));\n }\n \n+BOOST_AUTO_TEST_CASE(key_export_test)\n+{\n+    CKey key1;\n+    key1.MakeNewKey(true);\n+    CPrivKey pkey1 = key1.GetPrivKey();\n+    key1.SetPrivKey(pkey1, true);\n+    BOOST_CHECK(key1.IsCompressed() == true);\n+\n+    CKey key2;\n+    key2.MakeNewKey(false);\n+    CPrivKey pkey2 = key2.GetPrivKey();\n+    key2.SetPrivKey(pkey2, false);\n+    BOOST_CHECK(key2.IsCompressed() == false);\n+}\n+\n BOOST_AUTO_TEST_SUITE_END()"
      }
    ]
  },
  {
    "sha": "85745423b356830e81e121ffb09563bcdfca55a1",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo4NTc0NTQyM2IzNTY4MzBlODFlMTIxZmZiMDk1NjNiY2RmY2E1NWEx",
    "commit": {
      "author": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2017-03-21T08:49:25Z"
      },
      "committer": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2017-03-21T08:50:13Z"
      },
      "message": "Fix bug in CKey DER encoding",
      "tree": {
        "sha": "0a997bae62b3044bd79be9b75d24e60077ea871b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/0a997bae62b3044bd79be9b75d24e60077ea871b"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/85745423b356830e81e121ffb09563bcdfca55a1",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEyhopCNzi8TB0xizeHrd2uwPHki0FAljQ6UUACgkQHrd2uwPH\nki2FXhAAqs/iOr+sTx2MoN3KjAm64v0OgIuvLuKWhUxj3EP8vsV/TEncYfc5Oxmf\nCaHuxH8zRm5+GXBNMSpub5O22kHQmOLqO5mSOARzdPsqhVAgl+nRNSp8IQMoe3uW\ntcJtzJPFnPMTLNsi/FC7p+eKVDrXXAJm/xAiikTmQsT35/YsS6YyX8zhpfgTfqAB\nuImwl4wQn4e3fQgIorscwZcuLXsARpp5r4PvlB17cylFHg4/DEHqSt42mp/NXxSF\nQRN1MSCW4CDHGpx3mhK+rS2GdVCGOFly0yNNQ8oFvgl0S6d63P4mxklAdiVrfPkI\n9UDi+/SRm2Dw+pld/NvhaS/ENbZHNdUZDT2/xlJOJ8XuVCOjkTdXk8iDDQrWV84I\nJbTa2qXFbrHQM9TzhNX4SAdHU2C/xAktaDeNi1Bnm3TpXSegwTqFSn/ayq+hLx6g\nYZM/YQ55jcYCaL/+OK5sdePghTsxTpDO/OwPk2qDcrgHkdHAhyGyqCi7rkMTAggr\nPSonBiqBGRuc81iN1WL5YjwMgnWOwkdEaFzsgzA/Se4T0IEfLGRGLiHVzTtPZmjS\nHegW2ewKyTEKGVQX0uwt/Ig5tWhpNpT3Ri9dYjXBy0VZsz+eVsXGHoc0jgo5Qf/r\nRJ196Ul9w+rSZlGT8i73ZM4SaSnCbwaoYt5gQ6qBUVhXUe7QabQ=\n=7BSv\n-----END PGP SIGNATURE-----",
        "payload": "tree 0a997bae62b3044bd79be9b75d24e60077ea871b\nparent fe5ca6f765313c9ca51616917ab14d65d4b44956\nauthor Jonas Schnelli <dev@jonasschnelli.ch> 1490086165 +0100\ncommitter Jonas Schnelli <dev@jonasschnelli.ch> 1490086213 +0100\n\nFix bug in CKey DER encoding\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/85745423b356830e81e121ffb09563bcdfca55a1",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/85745423b356830e81e121ffb09563bcdfca55a1",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/85745423b356830e81e121ffb09563bcdfca55a1/comments",
    "author": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "fe5ca6f765313c9ca51616917ab14d65d4b44956",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fe5ca6f765313c9ca51616917ab14d65d4b44956",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/fe5ca6f765313c9ca51616917ab14d65d4b44956"
      }
    ],
    "stats": {
      "total": 2,
      "additions": 1,
      "deletions": 1
    },
    "files": [
      {
        "sha": "d49f2e23c7a09751980d4737e57e6480ab587717",
        "filename": "src/key.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/85745423b356830e81e121ffb09563bcdfca55a1/src/key.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/85745423b356830e81e121ffb09563bcdfca55a1/src/key.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/key.cpp?ref=85745423b356830e81e121ffb09563bcdfca55a1",
        "patch": "@@ -147,7 +147,7 @@ CPrivKey CKey::GetPrivKey() const {\n     size_t privkeylen;\n     privkey.resize(279);\n     privkeylen = 279;\n-    ret = ec_privkey_export_der(secp256k1_context_sign, (unsigned char*)&privkey[0], &privkeylen, begin(), fCompressed ? SECP256K1_EC_COMPRESSED : SECP256K1_EC_UNCOMPRESSED);\n+    ret = ec_privkey_export_der(secp256k1_context_sign, (unsigned char*)&privkey[0], &privkeylen, begin(), fCompressed);\n     assert(ret);\n     privkey.resize(privkeylen);\n     return privkey;"
      }
    ]
  }
]