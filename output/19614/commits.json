[
  {
    "sha": "1d8338d6b71447a5bf18750ca44724345aae5b60",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoxZDgzMzhkNmI3MTQ0N2E1YmYxODc1MGNhNDQ3MjQzNDVhYWU1YjYw",
    "commit": {
      "author": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2020-07-28T11:55:00Z"
      },
      "committer": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2020-07-28T14:39:56Z"
      },
      "message": "util: use HAVE_FDATASYNC to determine fdatasync() use\n\nRather than just using it on Linux and NetBSD, use `fdatasync()` based\non whether it's available. i.e it is available in newer versions\nof FreeBSD (11.1 and later).\n\nThis also aligns our code more closely with what is being done in leveldb.\n\nWas pointed out by Luke in #19430.",
      "tree": {
        "sha": "6bf4e53bd468cfb6f634f1343430ef9100edb4c2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6bf4e53bd468cfb6f634f1343430ef9100edb4c2"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1d8338d6b71447a5bf18750ca44724345aae5b60",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEz7FuIclQ9n+pXlWPLuufXMCVJsEFAl8gOUgACgkQLuufXMCV\nJsHoOw/8D8Ke6W9u4SnHb+XEy6/wqAWAmZHykMzl9cZDcSfEUSzAxDlbUmxEq37m\n98zNYQcn52tkP2eRlTEcXH/U7ujf4JDR/wYEFRtW/MtGNnmcnfEKerjK3YOdHdvw\nuOwH3+h5RWKWT2EAW4UKG/wgkoVWC4UHA7SjHDHF5BONKUeqJOqH10tRRVjT3g78\n8Nx6mzvPATUX0x4Qa0lMyHUwDfdISxsjHbMRBSQ0QNOV72+N6fC8DOQ1cj3e6uua\nqBpAvX730UM0n3IVFpghPFA7I9MEfvzP1XHza+LNjtobDJlybhh/h1IlTDr0vTIm\n3GRkXe25N2mogON2U/zH119NPyQBsP4U4/XZKk/jswoIbiPPQ986INNkj/BzI8o3\nCnyx0Tk5TewYoV3NipFcnrc6eRa1Sduy+3pyXyw49gA4i6ac2FLKn7GtAwgbJnRx\nn+CCvN8IcqLm9HCij6wS9ymWMmVNNNyXKkdBp/k/MH1aRj1IwvawiLsjOWSQlHfz\n+83aCyuLBzb94ZGiFCac0hz0Xig/TnoQWDwirONFuX5NPSQa1DZSJq0xu0mv4GhC\nGnlL7XGX9WudK0FsxdtodtfR5ler5SQwpnXx05PQzQClWDLjCwOlfzxMJKbDBbWk\n7IiUhx75DisV082bezhR2FnL6dNAnoQa1EoJt2SLGUReC36TX0U=\n=tRPz\n-----END PGP SIGNATURE-----",
        "payload": "tree 6bf4e53bd468cfb6f634f1343430ef9100edb4c2\nparent 24ead1a923e3af0f4e9178cc3de033493401192c\nauthor fanquake <fanquake@gmail.com> 1595937300 +0800\ncommitter fanquake <fanquake@gmail.com> 1595947196 +0800\n\nutil: use HAVE_FDATASYNC to determine fdatasync() use\n\nRather than just using it on Linux and NetBSD, use `fdatasync()` based\non whether it's available. i.e it is available in newer versions\nof FreeBSD (11.1 and later).\n\nThis also aligns our code more closely with what is being done in leveldb.\n\nWas pointed out by Luke in #19430.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1d8338d6b71447a5bf18750ca44724345aae5b60",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/1d8338d6b71447a5bf18750ca44724345aae5b60",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1d8338d6b71447a5bf18750ca44724345aae5b60/comments",
    "author": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "24ead1a923e3af0f4e9178cc3de033493401192c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/24ead1a923e3af0f4e9178cc3de033493401192c",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/24ead1a923e3af0f4e9178cc3de033493401192c"
      }
    ],
    "stats": {
      "total": 2,
      "additions": 1,
      "deletions": 1
    },
    "files": [
      {
        "sha": "e63f2e5c70858328a62e37c77d313940f7cbfe82",
        "filename": "src/util/system.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/1d8338d6b71447a5bf18750ca44724345aae5b60/src/util/system.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/1d8338d6b71447a5bf18750ca44724345aae5b60/src/util/system.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/util/system.cpp?ref=1d8338d6b71447a5bf18750ca44724345aae5b60",
        "patch": "@@ -1021,7 +1021,7 @@ bool FileCommit(FILE *file)\n         return false;\n     }\n #else\n-    #if defined(__linux__) || defined(__NetBSD__)\n+    #if defined(HAVE_FDATASYNC)\n     if (fdatasync(fileno(file)) != 0 && errno != EINVAL) { // Ignore EINVAL for filesystems that don't support sync\n         LogPrintf(\"%s: fdatasync failed: %d\\n\", __func__, errno);\n         return false;"
      }
    ]
  }
]