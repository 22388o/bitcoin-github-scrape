[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/497579493",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16127#issuecomment-497579493",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16127",
    "id": 497579493,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NzU3OTQ5Mw==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-31T05:21:11Z",
    "updated_at": "2020-05-13T23:24:10Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #18731 (refactor: Make CCheckQueue RAII-styled by hebasto)\n* #18710 (Add local thread pool to CCheckQueue by hebasto)\n* #16673 (Relog configuration args on debug.log rotation by LarryRuane)\n* #15719 (Drop Chain::requestMempoolTransactions method by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/497579493/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/497599196",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16127#issuecomment-497599196",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16127",
    "id": 497599196,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NzU5OTE5Ng==",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?u=5ff13e375b40ea55ecd3c108337dd6a23f68eddf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-31T06:59:16Z",
    "updated_at": "2019-05-31T06:59:16Z",
    "author_association": "CONTRIBUTOR",
    "body": "Strong concept ACK: thanks for fixing this!",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/497599196/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/497601104",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16127#issuecomment-497601104",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16127",
    "id": 497601104,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NzYwMTEwNA==",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?u=4a9af998e1a560b3f49c3827f453e1bcbe6a5cfb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-31T07:07:38Z",
    "updated_at": "2019-05-31T07:07:38Z",
    "author_association": "MEMBER",
    "body": "> In a few cases we need to use `std::mutex` rather than the sync.h primitives.\r\n\r\nCan you explain why?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/497601104/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/497661895",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16127#issuecomment-497661895",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16127",
    "id": 497661895,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NzY2MTg5NQ==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-31T10:31:21Z",
    "updated_at": "2019-05-31T10:31:21Z",
    "author_association": "MEMBER",
    "body": "@promag Our \"default\" mutexes are recursive mutexes (which you can enter multiple times from the same thread). They're easier to work with as you don't need to worry about whether to call a lock-grabbing function from either inside or outside the lock. However, recursive mutexes can't be used for condition variable waiting, so for those, we use std::mutex (which is not recursive) directly.\n\nLonger term we should try to get rid of recursive mutexes entirely; code is much cleaner without them.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/497661895/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/497733944",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16127#issuecomment-497733944",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16127",
    "id": 497733944,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NzczMzk0NA==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-31T14:42:34Z",
    "updated_at": "2019-05-31T14:42:34Z",
    "author_association": "MEMBER",
    "body": "How is this different from using `Mutex` and `Lock`?\r\n\r\nE.g.\r\n\r\n```cpp\r\nMutex m;\r\nLOCK(m);",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/497733944/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/498059158",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16127#issuecomment-498059158",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16127",
    "id": 498059158,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5ODA1OTE1OA==",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?u=4a9af998e1a560b3f49c3827f453e1bcbe6a5cfb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-02T19:36:37Z",
    "updated_at": "2019-06-02T19:36:37Z",
    "author_association": "MEMBER",
    "body": "@sipa thanks, I was aware of that. I wasn't sure _why_ \"In a few cases we need to use `std::mutex`\".",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/498059158/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/498083950",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16127#issuecomment-498083950",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16127",
    "id": 498083950,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5ODA4Mzk1MA==",
    "user": {
      "login": "ajtowns",
      "id": 127186,
      "node_id": "MDQ6VXNlcjEyNzE4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajtowns",
      "html_url": "https://github.com/ajtowns",
      "followers_url": "https://api.github.com/users/ajtowns/followers",
      "following_url": "https://api.github.com/users/ajtowns/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajtowns/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
      "organizations_url": "https://api.github.com/users/ajtowns/orgs",
      "repos_url": "https://api.github.com/users/ajtowns/repos",
      "events_url": "https://api.github.com/users/ajtowns/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajtowns/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-03T01:22:35Z",
    "updated_at": "2019-06-03T01:22:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "> How is this different from using `Mutex` and `Lock`?\r\n\r\nIf you do `Mutex cs;` instead of `std::mutex cs;` then you can do `LOCK(cs);` or `WAIT_LOCK(cs, g);` instead of `MutexGuard g(cs);`. In that case the type of `g` changes from a trivial subclass of `std::lock_guard` to `UniqueLock` which is a subclass of `std::unique_lock` that supports `DEBUG_LOCKCONTENTION` in which case it uses `LogPrintf` to report potential deadlocks or lock contention. Even without the extra features we have, `std::unique_lock` is potentially higher overhead than `std::lock_guard`, but `std::lock_guard` isn't unlockable except on destruction, so `unique_lock` is needed for use with condition variables.\r\n\r\n * We can't use `Mutex` for locking for the logging API, because that is a circular dependency.\r\n * We use `std::mutex` in code that implements our specialised locking behaviour got `Mutex` etc.\r\n * We don't use `Mutex` in `support/lockedpool.h`, probably because at present it is independent of bitcoin interfaces in general (this PR adds a dependency on threadsafety.h, so maybe just using `Mutex` would make sense at that point).\r\n * We use `std::mutex` instead of `Mutex` for protecting `dir_locks` in `util/system.h`, not sure if there's a circular dependency there to justify it though?\r\n * We also use `std::mutex` in some unit tests, which I don't think matters much.\r\n\r\nThere's some cases where we currently use `std::lock_guard<std::mutex> g(cs)` where `cs` is a `Mutex`, rather than calling `LOCK(cs);` or `WAIT_LOCK(cs, g);` That saves a bit of overhead, while losing our contention/deadlock debugging info, which I'm not sure makes much sense. I've updated this PR to change those instances to just use `LOCK(cs)` instead of `lock_guard`.\r\n\r\nI think that means it makes sense to:\r\n\r\n * Use `Mutex` and `LOCK` etc as the \"normal\" locking mechanism.\r\n * Use `RecursiveMutex` (aka `CCriticalSection`) if recursive locks are needed, or it's old code that we haven't worked through yet.\r\n * Use `std::mutex` and `{ MutexGuard guard(mutex); ... }` for code that's used to implement `Mutex`\r\n\r\nI've bumped this PR to replace a couple of the `lock_guard` instances that referred to our Mutex/CCriticalSection classes with `LOCK` instead of `MutexGuard`.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/498083950/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/499068336",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16127#issuecomment-499068336",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16127",
    "id": 499068336,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5OTA2ODMzNg==",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-05T12:48:12Z",
    "updated_at": "2019-06-05T13:28:51Z",
    "author_association": "CONTRIBUTOR",
    "body": "> We can't use Mutex for locking for the logging API, because that is a circular dependency.\r\n\r\nI don't think this is true (that we can't allow a circular dependency), but maybe you can explain more. I think ideally, we would just use `Mutex` and `RecursiveMutex` everywhere, since they fully support LOCK macros, lock assertions, lock annotations, deadlock detection, and so on. What exactly is the need for std::mutex and MutexGuard?\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/499068336/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/499092691",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16127#issuecomment-499092691",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16127",
    "id": 499092691,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5OTA5MjY5MQ==",
    "user": {
      "login": "ajtowns",
      "id": 127186,
      "node_id": "MDQ6VXNlcjEyNzE4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajtowns",
      "html_url": "https://github.com/ajtowns",
      "followers_url": "https://api.github.com/users/ajtowns/followers",
      "following_url": "https://api.github.com/users/ajtowns/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajtowns/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
      "organizations_url": "https://api.github.com/users/ajtowns/orgs",
      "repos_url": "https://api.github.com/users/ajtowns/repos",
      "events_url": "https://api.github.com/users/ajtowns/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajtowns/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-05T13:54:05Z",
    "updated_at": "2019-06-05T13:54:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "> > We can't use Mutex for locking for the logging API, because that is a circular dependency.\r\n> \r\n> I don't think this is true (that we can't allow a circular dependency), but maybe you can explain more. \r\n\r\nMaybe; `LOCK(m);` becomes a call to `UniqueLock` contstructor, which calls `Enter()` (or `TryEnter()`), which calls `EnterCritical()`, which calls `push_lock()` which may call `potential_deadlock_detected()` which then calls `LogPrintf`, which calls `LogPrintStr` which, when logging to a file, will then lock `m_file_mutex`. But I don't think that actually causes a problem, because I don't think any lock is ever taken while the m_file_mutex is held, so that shouldn't trigger potential_deadlock_detected.\r\n\r\nThere's also the case if you compile with `-DDEBUG_LOCKCONTENTION`. If two processes try to log simultaneously, the first one will lock `m_file_mutex` successfully, while the second one will fail at the `try_lock` phase of `UniqueLock::Enter`, which will then call `PrintLockContention` and hence `LogPrintf`, and recursively fail for the same reason until `m_file_mutex` is released, at which point things should clean up.\r\n\r\n> I think ideally, we would just use `Mutex` and `RecursiveMutex` everywhere, since they fully support LOCK macros, lock assertions, lock annotations, deadlock detection, and so on. What exactly is the need for std::mutex and MutexGuard?\r\n\r\nIf we can switch all the uses of std::mutex to Mutex, I don't think there's a need for MutexGuard.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/499092691/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/584508080",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16127#issuecomment-584508080",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16127",
    "id": 584508080,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4NDUwODA4MA==",
    "user": {
      "login": "ajtowns",
      "id": 127186,
      "node_id": "MDQ6VXNlcjEyNzE4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajtowns",
      "html_url": "https://github.com/ajtowns",
      "followers_url": "https://api.github.com/users/ajtowns/followers",
      "following_url": "https://api.github.com/users/ajtowns/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajtowns/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
      "organizations_url": "https://api.github.com/users/ajtowns/orgs",
      "repos_url": "https://api.github.com/users/ajtowns/repos",
      "events_url": "https://api.github.com/users/ajtowns/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajtowns/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-11T07:31:43Z",
    "updated_at": "2020-02-11T07:31:43Z",
    "author_association": "CONTRIBUTOR",
    "body": "Rebased; updated to only use `MutexGuard` for logging.h.\r\n\r\nRemaining uses of `std::mutex` and `lock_guard` are sync.h (duh), logging.h (which is used by sync.h), support/lockedpool.h (could be changed to Mutex, but I'm not confident the overhead wouldn't cause problems), tests/checkqueue_tests.cpp (complicated, and just a test) and leveldb.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/584508080/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/598605665",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16127#issuecomment-598605665",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16127",
    "id": 598605665,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5ODYwNTY2NQ==",
    "user": {
      "login": "ajtowns",
      "id": 127186,
      "node_id": "MDQ6VXNlcjEyNzE4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajtowns",
      "html_url": "https://github.com/ajtowns",
      "followers_url": "https://api.github.com/users/ajtowns/followers",
      "following_url": "https://api.github.com/users/ajtowns/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajtowns/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
      "organizations_url": "https://api.github.com/users/ajtowns/orgs",
      "repos_url": "https://api.github.com/users/ajtowns/repos",
      "events_url": "https://api.github.com/users/ajtowns/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajtowns/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-13T08:24:22Z",
    "updated_at": "2020-03-13T08:24:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "Rebased to master to avoid #18111 and updated with @sipa's suggestions.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/598605665/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/604205991",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16127#issuecomment-604205991",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16127",
    "id": 604205991,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYwNDIwNTk5MQ==",
    "user": {
      "login": "ajtowns",
      "id": 127186,
      "node_id": "MDQ6VXNlcjEyNzE4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajtowns",
      "html_url": "https://github.com/ajtowns",
      "followers_url": "https://api.github.com/users/ajtowns/followers",
      "following_url": "https://api.github.com/users/ajtowns/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajtowns/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
      "organizations_url": "https://api.github.com/users/ajtowns/orgs",
      "repos_url": "https://api.github.com/users/ajtowns/repos",
      "events_url": "https://api.github.com/users/ajtowns/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajtowns/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-26T03:21:55Z",
    "updated_at": "2020-03-26T03:21:55Z",
    "author_association": "CONTRIBUTOR",
    "body": "Rebased for the ToString changes",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/604205991/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/624606896",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16127#issuecomment-624606896",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16127",
    "id": 624606896,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyNDYwNjg5Ng==",
    "user": {
      "login": "ajtowns",
      "id": 127186,
      "node_id": "MDQ6VXNlcjEyNzE4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajtowns",
      "html_url": "https://github.com/ajtowns",
      "followers_url": "https://api.github.com/users/ajtowns/followers",
      "following_url": "https://api.github.com/users/ajtowns/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajtowns/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
      "organizations_url": "https://api.github.com/users/ajtowns/orgs",
      "repos_url": "https://api.github.com/users/ajtowns/repos",
      "events_url": "https://api.github.com/users/ajtowns/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajtowns/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-06T11:58:18Z",
    "updated_at": "2020-05-06T11:58:18Z",
    "author_association": "CONTRIBUTOR",
    "body": "Rebased",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/624606896/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/626105963",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16127#issuecomment-626105963",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16127",
    "id": 626105963,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyNjEwNTk2Mw==",
    "user": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?u=7297e8aaf9188c0cb98bc549a8a02a1dc8d59e4c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-09T04:52:46Z",
    "updated_at": "2020-05-09T04:52:46Z",
    "author_association": "MEMBER",
    "body": "Concept ACK.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/626105963/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/634110415",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16127#issuecomment-634110415",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16127",
    "id": 634110415,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzNDExMDQxNQ==",
    "user": {
      "login": "ajtowns",
      "id": 127186,
      "node_id": "MDQ6VXNlcjEyNzE4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajtowns",
      "html_url": "https://github.com/ajtowns",
      "followers_url": "https://api.github.com/users/ajtowns/followers",
      "following_url": "https://api.github.com/users/ajtowns/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajtowns/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
      "organizations_url": "https://api.github.com/users/ajtowns/orgs",
      "repos_url": "https://api.github.com/users/ajtowns/repos",
      "events_url": "https://api.github.com/users/ajtowns/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajtowns/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-26T15:48:07Z",
    "updated_at": "2020-05-26T15:48:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "Renamed MutexGuard to LockGuard, and dropped util_threadnames_tests changes.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/634110415/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/634997490",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16127#issuecomment-634997490",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16127",
    "id": 634997490,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzNDk5NzQ5MA==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-27T23:29:59Z",
    "updated_at": "2020-05-27T23:29:59Z",
    "author_association": "MEMBER",
    "body": "ACK 5478d6c099e76fe070703cc5383cba7b91468b0f \ud83d\uddfe\r\n\r\n<details><summary>Show signature and timestamp</summary>\r\n\r\nSignature:\r\n\r\n```\r\n-----BEGIN PGP SIGNED MESSAGE-----\r\nHash: SHA512\r\n\r\nACK 5478d6c099e76fe070703cc5383cba7b91468b0f \ud83d\uddfe\r\n-----BEGIN PGP SIGNATURE-----\r\n\r\niQGzBAEBCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\r\npUiM+Qv/bctxRqxjmwEq2xf4FSS7ej1ao6ni8G8tnk9+sB1QniYItq56EOxEe99u\r\nlEB6lt7QFL2z9fD/mH6gEp5mdM0yqt16z35+MGxxVYNrBX0Lm/8lquFqHlPA5DNF\r\nmfUp7Ro82ixyc65ZlMakjkgY5lr1rrNDPB9XWpw5jKFTvc5b2Dv+n7FxshM77BXd\r\n1U8tgAOviw8etuhIWDSoTSVj85ubx9ld0cualiKg55prHi1gyH7zEQrOTJ4TYiS7\r\nR8vPpnvK/nKpnbUq/jbXXT9DgV+3O0nKfSA+uipzsG0417ON83ugewko8oOQaP19\r\nNtJWThsr1Eijk/YiPpdSpdNX2s0xqcvRTGaxEFU3Vwh80x4p3If2pPI96izs5Ye5\r\nHyEGjZDtZRfco27eUp+YHPM8pk8Fg5pAJqdTQLfkGR3FTgR+r6PuXJ2GkSkXqHKv\r\nPlx/qOYuSNlDJMd1dyCCeW6GiEpNh2XuszgldLIB8pjSCaq8qjSJtep+wmEIdsh/\r\nueOKDaHz\r\n=Ww4X\r\n-----END PGP SIGNATURE-----\r\n```\r\n\r\n[Timestamp of file with hash `0b593eb159203e57d289eb41d38e7938cdd641ec1ddca7c9967f9f58ff7986de  -`](https://opentimestamps.org/info/?004f70656e54696d657374616d7073000050726f6f6600bf89e2e884e8929401080b593eb159203e57d289eb41d38e7938cdd641ec1ddca7c9967f9f58ff7986def010076e49e0fdf64c9f08efab3cdcd17dbf08fff01000729c2b396617f47e7ffab0f759f0b408f1045ecef7c4f00835f85e03c086bdb00083dfe30d2ef90c8e2c2b68747470733a2f2f626f622e6274632e63616c656e6461722e6f70656e74696d657374616d70732e6f7267fff010b1eed4f26455c9149fcbd475c371a6c208f1045ecef7c5f008368d67ad1ecc33920083dfe30d2ef90c8e232268747470733a2f2f6274632e63616c656e6461722e636174616c6c6178792e636f6dfff010cb1b2c27980fb97d708a17b0c088f61008f1045ecef7c6f008134680dd0ff538420083dfe30d2ef90c8e292868747470733a2f2f66696e6e65792e63616c656e6461722e657465726e69747977616c6c2e636f6df010f96397bca3c1a55b66466781671a737f08f1045ecef7c5f0086a8e138f330ee0940083dfe30d2ef90c8e2e2d68747470733a2f2f616c6963652e6274632e63616c656e6461722e6f70656e74696d657374616d70732e6f7267)\r\n\r\n</details>\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/634997490/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/391997044",
    "pull_request_review_id": 374008911,
    "id": 391997044,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTk5NzA0NA==",
    "diff_hunk": "@@ -290,11 +291,14 @@ BOOST_AUTO_TEST_CASE(test_CheckQueue_UniqueCheck)\n             control.Add(vChecks);\n         }\n     }\n-    bool r = true;\n-    BOOST_REQUIRE_EQUAL(UniqueCheck::results.size(), COUNT);\n-    for (size_t i = 0; i < COUNT; ++i)\n-        r = r && UniqueCheck::results.count(i) == 1;\n-    BOOST_REQUIRE(r);\n+    {\n+        LOCK(UniqueCheck::m);\n+        bool r = true;\n+        BOOST_REQUIRE_EQUAL(UniqueCheck::results.size(), COUNT);\n+        for (size_t i = 0; i < COUNT; ++i)",
    "path": "src/test/checkqueue_tests.cpp",
    "position": null,
    "original_position": 48,
    "commit_id": "5478d6c099e76fe070703cc5383cba7b91468b0f",
    "original_commit_id": "7c3979f9c54293a91fa950af8d7610a7f2487c28",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Nit: if you're reflowing this code anyway, can you put { } around the then branch?",
    "created_at": "2020-03-13T02:23:02Z",
    "updated_at": "2020-05-26T15:45:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16127#discussion_r391997044",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16127",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/391997044"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16127#discussion_r391997044"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16127"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/391997044/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 298,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/391998012",
    "pull_request_review_id": 374008911,
    "id": 391998012,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTk5ODAxMg==",
    "diff_hunk": "@@ -62,9 +63,18 @@ namespace BCLog {\n     {\n     private:\n         mutable std::mutex m_cs;                   // Can not use Mutex from sync.h because in debug mode it would cause a deadlock when a potential deadlock was detected\n-        FILE* m_fileout = nullptr;                 // GUARDED_BY(m_cs)\n-        std::list<std::string> m_msgs_before_open; // GUARDED_BY(m_cs)\n-        bool m_buffering{true};                    //!< Buffer messages before logging can be started. GUARDED_BY(m_cs)\n+\n+        // so MutexGuard provides an annotated version of lock_guard for us",
    "path": "src/logging.h",
    "position": null,
    "original_position": 16,
    "commit_id": "5478d6c099e76fe070703cc5383cba7b91468b0f",
    "original_commit_id": "165d3edc86ec30cfbbde551a24e72c7f104c5c43",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Maybe move MutexGuard to sync.h, as it's more generally useful?",
    "created_at": "2020-03-13T02:27:50Z",
    "updated_at": "2020-05-26T15:45:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16127#discussion_r391998012",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16127",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/391998012"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16127#discussion_r391998012"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16127"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/391998012/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 67,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/392085444",
    "pull_request_review_id": 374116067,
    "id": 392085444,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjA4NTQ0NA==",
    "diff_hunk": "@@ -62,9 +63,18 @@ namespace BCLog {\n     {\n     private:\n         mutable std::mutex m_cs;                   // Can not use Mutex from sync.h because in debug mode it would cause a deadlock when a potential deadlock was detected\n-        FILE* m_fileout = nullptr;                 // GUARDED_BY(m_cs)\n-        std::list<std::string> m_msgs_before_open; // GUARDED_BY(m_cs)\n-        bool m_buffering{true};                    //!< Buffer messages before logging can be started. GUARDED_BY(m_cs)\n+\n+        // so MutexGuard provides an annotated version of lock_guard for us",
    "path": "src/logging.h",
    "position": null,
    "original_position": 16,
    "commit_id": "5478d6c099e76fe070703cc5383cba7b91468b0f",
    "original_commit_id": "165d3edc86ec30cfbbde551a24e72c7f104c5c43",
    "user": {
      "login": "ajtowns",
      "id": 127186,
      "node_id": "MDQ6VXNlcjEyNzE4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajtowns",
      "html_url": "https://github.com/ajtowns",
      "followers_url": "https://api.github.com/users/ajtowns/followers",
      "following_url": "https://api.github.com/users/ajtowns/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajtowns/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
      "organizations_url": "https://api.github.com/users/ajtowns/orgs",
      "repos_url": "https://api.github.com/users/ajtowns/repos",
      "events_url": "https://api.github.com/users/ajtowns/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajtowns/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "There are a bunch of places that include logging.h but not sync.h, so doing it via threadsafety.h might keep things a little more minimal? I've done this.",
    "created_at": "2020-03-13T08:22:12Z",
    "updated_at": "2020-05-26T15:45:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16127#discussion_r392085444",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16127",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/392085444"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16127#discussion_r392085444"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16127"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/392085444/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 67,
    "side": "RIGHT",
    "in_reply_to_id": 391998012
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/392085481",
    "pull_request_review_id": 374116124,
    "id": 392085481,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjA4NTQ4MQ==",
    "diff_hunk": "@@ -290,11 +291,14 @@ BOOST_AUTO_TEST_CASE(test_CheckQueue_UniqueCheck)\n             control.Add(vChecks);\n         }\n     }\n-    bool r = true;\n-    BOOST_REQUIRE_EQUAL(UniqueCheck::results.size(), COUNT);\n-    for (size_t i = 0; i < COUNT; ++i)\n-        r = r && UniqueCheck::results.count(i) == 1;\n-    BOOST_REQUIRE(r);\n+    {\n+        LOCK(UniqueCheck::m);\n+        bool r = true;\n+        BOOST_REQUIRE_EQUAL(UniqueCheck::results.size(), COUNT);\n+        for (size_t i = 0; i < COUNT; ++i)",
    "path": "src/test/checkqueue_tests.cpp",
    "position": null,
    "original_position": 48,
    "commit_id": "5478d6c099e76fe070703cc5383cba7b91468b0f",
    "original_commit_id": "7c3979f9c54293a91fa950af8d7610a7f2487c28",
    "user": {
      "login": "ajtowns",
      "id": 127186,
      "node_id": "MDQ6VXNlcjEyNzE4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajtowns",
      "html_url": "https://github.com/ajtowns",
      "followers_url": "https://api.github.com/users/ajtowns/followers",
      "following_url": "https://api.github.com/users/ajtowns/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajtowns/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
      "organizations_url": "https://api.github.com/users/ajtowns/orgs",
      "repos_url": "https://api.github.com/users/ajtowns/repos",
      "events_url": "https://api.github.com/users/ajtowns/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajtowns/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done",
    "created_at": "2020-03-13T08:22:18Z",
    "updated_at": "2020-05-26T15:45:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16127#discussion_r392085481",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16127",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/392085481"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16127#discussion_r392085481"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16127"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/392085481/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 298,
    "side": "RIGHT",
    "in_reply_to_id": 391997044
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422453441",
    "pull_request_review_id": 408612834,
    "id": 422453441,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ1MzQ0MQ==",
    "diff_hunk": "@@ -1989,18 +1988,15 @@ class CoinsViewScanReserver\n \n     bool reserve() {\n         CHECK_NONFATAL(!m_could_reserve);\n-        std::lock_guard<std::mutex> lock(g_utxosetscan);\n-        if (g_scan_in_progress) {\n+        if (g_scan_in_progress.exchange(true)) {\n             return false;\n         }\n-        g_scan_in_progress = true;\n         m_could_reserve = true;\n         return true;\n     }",
    "path": "src/rpc/blockchain.cpp",
    "position": 74,
    "original_position": 20,
    "commit_id": "5478d6c099e76fe070703cc5383cba7b91468b0f",
    "original_commit_id": "c3cf2f55013c4ea1c1ef4a878fc7ff8e92f2c42d",
    "user": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "c3cf2f55013c4ea1c1ef4a878fc7ff8e92f2c42d\r\nIt seems this changes behavior as `m_could_reserve = true;` is also guarded by mutex currently.",
    "created_at": "2020-05-09T05:00:33Z",
    "updated_at": "2020-05-26T15:45:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16127#discussion_r422453441",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16127",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422453441"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16127#discussion_r422453441"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16127"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422453441/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": 1989,
    "original_start_line": 1989,
    "start_side": "RIGHT",
    "line": 1996,
    "original_line": 1996,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422453632",
    "pull_request_review_id": 408613004,
    "id": 422453632,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ1MzYzMg==",
    "diff_hunk": "@@ -1286,8 +1285,7 @@ class WalletRescanReserver\n     bool reserve()\n     {\n         assert(!m_could_reserve);\n-        std::lock_guard<std::mutex> lock(m_wallet.mutexScanning);",
    "path": "src/wallet/wallet.h",
    "position": 12,
    "original_position": 12,
    "commit_id": "5478d6c099e76fe070703cc5383cba7b91468b0f",
    "original_commit_id": "960d64d326c501dbe22b80094171d7fe3e86bd69",
    "user": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "960d64d326c501dbe22b80094171d7fe3e86bd69\r\nIt seems this changes behavior as the whole block is guarded by mutex currently.",
    "created_at": "2020-05-09T05:03:14Z",
    "updated_at": "2020-05-26T15:45:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16127#discussion_r422453632",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16127",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422453632"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16127#discussion_r422453632"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16127"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422453632/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1289,
    "original_line": 1289,
    "side": "LEFT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422455250",
    "pull_request_review_id": 408614445,
    "id": 422455250,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ1NTI1MA==",
    "diff_hunk": "@@ -1989,18 +1988,15 @@ class CoinsViewScanReserver\n \n     bool reserve() {\n         CHECK_NONFATAL(!m_could_reserve);\n-        std::lock_guard<std::mutex> lock(g_utxosetscan);\n-        if (g_scan_in_progress) {\n+        if (g_scan_in_progress.exchange(true)) {\n             return false;\n         }\n-        g_scan_in_progress = true;\n         m_could_reserve = true;\n         return true;\n     }",
    "path": "src/rpc/blockchain.cpp",
    "position": 74,
    "original_position": 20,
    "commit_id": "5478d6c099e76fe070703cc5383cba7b91468b0f",
    "original_commit_id": "c3cf2f55013c4ea1c1ef4a878fc7ff8e92f2c42d",
    "user": {
      "login": "ajtowns",
      "id": 127186,
      "node_id": "MDQ6VXNlcjEyNzE4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajtowns",
      "html_url": "https://github.com/ajtowns",
      "followers_url": "https://api.github.com/users/ajtowns/followers",
      "following_url": "https://api.github.com/users/ajtowns/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajtowns/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
      "organizations_url": "https://api.github.com/users/ajtowns/orgs",
      "repos_url": "https://api.github.com/users/ajtowns/repos",
      "events_url": "https://api.github.com/users/ajtowns/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajtowns/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "`m_could_reserve` isn't a global, and instances of `CoinsViewScanReserver` aren't shared across threads either.",
    "created_at": "2020-05-09T05:31:33Z",
    "updated_at": "2020-05-26T15:45:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16127#discussion_r422455250",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16127",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422455250"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16127#discussion_r422455250"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16127"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422455250/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": 1989,
    "original_start_line": 1989,
    "start_side": "RIGHT",
    "line": 1996,
    "original_line": 1996,
    "side": "RIGHT",
    "in_reply_to_id": 422453441
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422455355",
    "pull_request_review_id": 408614556,
    "id": 422455355,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ1NTM1NQ==",
    "diff_hunk": "@@ -1286,8 +1285,7 @@ class WalletRescanReserver\n     bool reserve()\n     {\n         assert(!m_could_reserve);\n-        std::lock_guard<std::mutex> lock(m_wallet.mutexScanning);",
    "path": "src/wallet/wallet.h",
    "position": 12,
    "original_position": 12,
    "commit_id": "5478d6c099e76fe070703cc5383cba7b91468b0f",
    "original_commit_id": "960d64d326c501dbe22b80094171d7fe3e86bd69",
    "user": {
      "login": "ajtowns",
      "id": 127186,
      "node_id": "MDQ6VXNlcjEyNzE4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajtowns",
      "html_url": "https://github.com/ajtowns",
      "followers_url": "https://api.github.com/users/ajtowns/followers",
      "following_url": "https://api.github.com/users/ajtowns/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajtowns/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
      "organizations_url": "https://api.github.com/users/ajtowns/orgs",
      "repos_url": "https://api.github.com/users/ajtowns/repos",
      "events_url": "https://api.github.com/users/ajtowns/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajtowns/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Same reasoning as previous; except that this one sets `fScanningWallet` to `true` twice :(",
    "created_at": "2020-05-09T05:33:44Z",
    "updated_at": "2020-05-26T15:45:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16127#discussion_r422455355",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16127",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422455355"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16127#discussion_r422455355"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16127"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422455355/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1289,
    "original_line": 1289,
    "side": "LEFT",
    "in_reply_to_id": 422453632
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422456173",
    "pull_request_review_id": 408615250,
    "id": 422456173,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ1NjE3Mw==",
    "diff_hunk": "@@ -1989,18 +1988,15 @@ class CoinsViewScanReserver\n \n     bool reserve() {\n         CHECK_NONFATAL(!m_could_reserve);\n-        std::lock_guard<std::mutex> lock(g_utxosetscan);\n-        if (g_scan_in_progress) {\n+        if (g_scan_in_progress.exchange(true)) {\n             return false;\n         }\n-        g_scan_in_progress = true;\n         m_could_reserve = true;\n         return true;\n     }",
    "path": "src/rpc/blockchain.cpp",
    "position": 74,
    "original_position": 20,
    "commit_id": "5478d6c099e76fe070703cc5383cba7b91468b0f",
    "original_commit_id": "c3cf2f55013c4ea1c1ef4a878fc7ff8e92f2c42d",
    "user": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Oh, I see that all instances of `CoinsViewScanReserver` are local in the `scantxoutset()` function.",
    "created_at": "2020-05-09T05:47:28Z",
    "updated_at": "2020-05-26T15:45:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16127#discussion_r422456173",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16127",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422456173"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16127#discussion_r422456173"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16127"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422456173/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": 1989,
    "original_start_line": 1989,
    "start_side": "RIGHT",
    "line": 1996,
    "original_line": 1996,
    "side": "RIGHT",
    "in_reply_to_id": 422453441
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/426133811",
    "pull_request_review_id": 413060075,
    "id": 426133811,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjEzMzgxMQ==",
    "diff_hunk": "@@ -1286,8 +1285,7 @@ class WalletRescanReserver\n     bool reserve()\n     {\n         assert(!m_could_reserve);\n-        std::lock_guard<std::mutex> lock(m_wallet.mutexScanning);",
    "path": "src/wallet/wallet.h",
    "position": 12,
    "original_position": 12,
    "commit_id": "5478d6c099e76fe070703cc5383cba7b91468b0f",
    "original_commit_id": "960d64d326c501dbe22b80094171d7fe3e86bd69",
    "user": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "So why not dropping the following `m_wallet.fScanningWallet = true;` ?",
    "created_at": "2020-05-16T08:44:20Z",
    "updated_at": "2020-05-26T15:45:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16127#discussion_r426133811",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16127",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/426133811"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16127#discussion_r426133811"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16127"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/426133811/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1289,
    "original_line": 1289,
    "side": "LEFT",
    "in_reply_to_id": 422453632
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/426136962",
    "pull_request_review_id": 413062849,
    "id": 426136962,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjEzNjk2Mg==",
    "diff_hunk": "@@ -1286,8 +1285,7 @@ class WalletRescanReserver\n     bool reserve()\n     {\n         assert(!m_could_reserve);\n-        std::lock_guard<std::mutex> lock(m_wallet.mutexScanning);",
    "path": "src/wallet/wallet.h",
    "position": 12,
    "original_position": 12,
    "commit_id": "5478d6c099e76fe070703cc5383cba7b91468b0f",
    "original_commit_id": "960d64d326c501dbe22b80094171d7fe3e86bd69",
    "user": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "~As `WalletRescanReserver.m_wallet` is a reference, the object being referenced to could be shared among different threads. So not using the `mutexScanning` mutex here is not thread-safe, IMO.~",
    "created_at": "2020-05-16T09:29:07Z",
    "updated_at": "2020-05-26T15:45:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16127#discussion_r426136962",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16127",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/426136962"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16127#discussion_r426136962"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16127"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/426136962/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1289,
    "original_line": 1289,
    "side": "LEFT",
    "in_reply_to_id": 422453632
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/426142357",
    "pull_request_review_id": 413067315,
    "id": 426142357,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjE0MjM1Nw==",
    "diff_hunk": "@@ -26,15 +26,17 @@ const std::string TEST_THREAD_NAME_BASE = \"test_thread.\";\n  *\n  * @return the set of name each thread has after attempted renaming.\n  */\n+\n+static Mutex lock;\n+static std::set<std::string> names GUARDED_BY(lock);\n+\n std::set<std::string> RenameEnMasse(int num_threads)\n {\n     std::vector<std::thread> threads;\n-    std::set<std::string> names;\n-    std::mutex lock;\n \n     auto RenameThisThread = [&](int i) {\n         util::ThreadRename(TEST_THREAD_NAME_BASE + ToString(i));\n-        std::lock_guard<std::mutex> guard(lock);\n+        LOCK(lock);\n         names.insert(util::ThreadGetInternalName());\n     };",
    "path": "src/test/util_threadnames_tests.cpp",
    "position": null,
    "original_position": 19,
    "commit_id": "5478d6c099e76fe070703cc5383cba7b91468b0f",
    "original_commit_id": "bbe87c91a8594e33542bae3d738499324cd06906",
    "user": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "bbe87c91a8594e33542bae3d738499324cd06906\r\n\r\nIt seems nothing to capture now:\r\n```suggestion\r\n    auto RenameThisThread = [](int i) {\r\n        util::ThreadRename(TEST_THREAD_NAME_BASE + ToString(i));\r\n        std::lock_guard<std::mutex> guard(lock);\r\n        LOCK(lock);\r\n        names.insert(util::ThreadGetInternalName());\r\n    };\r\n```",
    "created_at": "2020-05-16T10:46:37Z",
    "updated_at": "2020-05-26T15:45:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16127#discussion_r426142357",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16127",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/426142357"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16127#discussion_r426142357"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16127"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/426142357/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": 37,
    "start_side": "RIGHT",
    "line": null,
    "original_line": 39,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/427077866",
    "pull_request_review_id": 414160343,
    "id": 427077866,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzA3Nzg2Ng==",
    "diff_hunk": "@@ -1286,8 +1285,7 @@ class WalletRescanReserver\n     bool reserve()\n     {\n         assert(!m_could_reserve);\n-        std::lock_guard<std::mutex> lock(m_wallet.mutexScanning);",
    "path": "src/wallet/wallet.h",
    "position": 12,
    "original_position": 12,
    "commit_id": "5478d6c099e76fe070703cc5383cba7b91468b0f",
    "original_commit_id": "960d64d326c501dbe22b80094171d7fe3e86bd69",
    "user": {
      "login": "ajtowns",
      "id": 127186,
      "node_id": "MDQ6VXNlcjEyNzE4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajtowns",
      "html_url": "https://github.com/ajtowns",
      "followers_url": "https://api.github.com/users/ajtowns/followers",
      "following_url": "https://api.github.com/users/ajtowns/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajtowns/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
      "organizations_url": "https://api.github.com/users/ajtowns/orgs",
      "repos_url": "https://api.github.com/users/ajtowns/repos",
      "events_url": "https://api.github.com/users/ajtowns/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajtowns/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "dropped redundant `fScanningWallet = true`",
    "created_at": "2020-05-19T07:12:28Z",
    "updated_at": "2020-05-26T15:45:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16127#discussion_r427077866",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16127",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/427077866"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16127#discussion_r427077866"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16127"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/427077866/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1289,
    "original_line": 1289,
    "side": "LEFT",
    "in_reply_to_id": 422453632
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/427078489",
    "pull_request_review_id": 414161153,
    "id": 427078489,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzA3ODQ4OQ==",
    "diff_hunk": "@@ -26,15 +26,17 @@ const std::string TEST_THREAD_NAME_BASE = \"test_thread.\";\n  *\n  * @return the set of name each thread has after attempted renaming.\n  */\n+\n+static Mutex lock;\n+static std::set<std::string> names GUARDED_BY(lock);\n+\n std::set<std::string> RenameEnMasse(int num_threads)\n {\n     std::vector<std::thread> threads;\n-    std::set<std::string> names;\n-    std::mutex lock;\n \n     auto RenameThisThread = [&](int i) {\n         util::ThreadRename(TEST_THREAD_NAME_BASE + ToString(i));\n-        std::lock_guard<std::mutex> guard(lock);\n+        LOCK(lock);\n         names.insert(util::ThreadGetInternalName());\n     };",
    "path": "src/test/util_threadnames_tests.cpp",
    "position": null,
    "original_position": 19,
    "commit_id": "5478d6c099e76fe070703cc5383cba7b91468b0f",
    "original_commit_id": "bbe87c91a8594e33542bae3d738499324cd06906",
    "user": {
      "login": "ajtowns",
      "id": 127186,
      "node_id": "MDQ6VXNlcjEyNzE4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajtowns",
      "html_url": "https://github.com/ajtowns",
      "followers_url": "https://api.github.com/users/ajtowns/followers",
      "following_url": "https://api.github.com/users/ajtowns/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajtowns/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
      "organizations_url": "https://api.github.com/users/ajtowns/orgs",
      "repos_url": "https://api.github.com/users/ajtowns/repos",
      "events_url": "https://api.github.com/users/ajtowns/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajtowns/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Dropped redundant capture",
    "created_at": "2020-05-19T07:13:40Z",
    "updated_at": "2020-05-26T15:45:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16127#discussion_r427078489",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16127",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/427078489"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16127#discussion_r427078489"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16127"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/427078489/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": 37,
    "start_side": "RIGHT",
    "line": null,
    "original_line": 39,
    "side": "RIGHT",
    "in_reply_to_id": 426142357
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/427378681",
    "pull_request_review_id": 414546341,
    "id": 427378681,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzM3ODY4MQ==",
    "diff_hunk": "@@ -26,15 +26,17 @@ const std::string TEST_THREAD_NAME_BASE = \"test_thread.\";\n  *\n  * @return the set of name each thread has after attempted renaming.\n  */\n+\n+static Mutex lock;\n+static std::set<std::string> names GUARDED_BY(lock);",
    "path": "src/test/util_threadnames_tests.cpp",
    "position": null,
    "original_position": 6,
    "commit_id": "5478d6c099e76fe070703cc5383cba7b91468b0f",
    "original_commit_id": "d53072ec730d8eec5a5b72f7e65a54b141e62b19",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "In commit \"test/util_threadnames_tests: add thread safety annotations\" (d53072ec730d8eec5a5b72f7e65a54b141e62b19)\r\n\r\nAssuming the reason these need to be global is lock annotations not working on local variables (didn't check), better IMO to simply not to use lock annotations here than to introduce global variables and make it unsafe to call RenameEnMasse from different threads itself. \r\n\r\nOther option would be to make RenameEnMasse a member function in a class with Mutex and std::set members so it could work non-globally and also be annotated",
    "created_at": "2020-05-19T15:08:22Z",
    "updated_at": "2020-05-26T15:45:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16127#discussion_r427378681",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16127",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/427378681"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16127#discussion_r427378681"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16127"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/427378681/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 31,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/430517879",
    "pull_request_review_id": 418435895,
    "id": 430517879,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDUxNzg3OQ==",
    "diff_hunk": "@@ -26,15 +26,17 @@ const std::string TEST_THREAD_NAME_BASE = \"test_thread.\";\n  *\n  * @return the set of name each thread has after attempted renaming.\n  */\n+\n+static Mutex lock;\n+static std::set<std::string> names GUARDED_BY(lock);",
    "path": "src/test/util_threadnames_tests.cpp",
    "position": null,
    "original_position": 6,
    "commit_id": "5478d6c099e76fe070703cc5383cba7b91468b0f",
    "original_commit_id": "d53072ec730d8eec5a5b72f7e65a54b141e62b19",
    "user": {
      "login": "ajtowns",
      "id": 127186,
      "node_id": "MDQ6VXNlcjEyNzE4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajtowns",
      "html_url": "https://github.com/ajtowns",
      "followers_url": "https://api.github.com/users/ajtowns/followers",
      "following_url": "https://api.github.com/users/ajtowns/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajtowns/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
      "organizations_url": "https://api.github.com/users/ajtowns/orgs",
      "repos_url": "https://api.github.com/users/ajtowns/repos",
      "events_url": "https://api.github.com/users/ajtowns/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajtowns/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "It's not unsafe to call RenameEnMasse from different threads with the global lock, just inefficient. I tried the class approach but it seemed like overkill, so I've dropped the commit instead.",
    "created_at": "2020-05-26T15:47:51Z",
    "updated_at": "2020-05-26T15:47:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16127#discussion_r430517879",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16127",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/430517879"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16127#discussion_r430517879"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16127"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/430517879/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 31,
    "side": "RIGHT",
    "in_reply_to_id": 427378681
  }
]