theuni,2014-10-03T20:24:56Z,"ACK in principle. As you said on IRC, I'd like to have travis testing for this. Shouldn't be too hard to spawn in a new shell and export a few things as needed.\n\nOne request though.. please split into 3 commits: build/tests/gitian, that way we can backport more easily if needed.\n",https://github.com/bitcoin/bitcoin/pull/5038#issuecomment-57854336,57854336,
luke-jr,2014-10-03T22:38:26Z,Split\n,https://github.com/bitcoin/bitcoin/pull/5038#issuecomment-57872168,57872168,
theuni,2014-10-03T23:25:27Z,"@luke-jr Please see #5040 and grab the commit from there if you agree with it (I'll close that PR).\n\nIf that is green, ACK.\n",https://github.com/bitcoin/bitcoin/pull/5038#issuecomment-57880004,57880004,
theuni,2014-10-06T22:37:50Z,"In case it's non-obvious to anyone reading after-the-fact:\n\nThis PR adds fixes for shell-scripts that needlessly used bashisms. There was previously no test for these. #5040 introduced a test, and the build failed as expected. This PR fixes the scripts and adds the test from #5040. The fact that it's green means that they're confirmed fixed.\n\nACK.\n",https://github.com/bitcoin/bitcoin/pull/5038#issuecomment-58111210,58111210,
gmaxwell,2014-10-07T00:31:54Z,utACK.\n,https://github.com/bitcoin/bitcoin/pull/5038#issuecomment-58120986,58120986,
laanwj,2014-10-07T06:42:34Z,"Not meaning to depreciate this pull, but is there really no modern non-bash alternative to uglyness like\n\n```\nif test x$use_pkgconfig = x; then\n```\n\nI remember, from maybe 20 years ago, that constructions like that were used for compatibility with some shell from the 80's. Hasn't really anything changed on that front?\n",https://github.com/bitcoin/bitcoin/pull/5038#issuecomment-58143526,58143526,
luke-jr,2014-10-07T06:44:39Z,"@laanwj I'm pretty sure\n\n``` sh\nif test ""$use_pkgconfig"" = """"; then\n```\n\nis fine in most shells, but when the _entire_ purpose of a configure script is portability, it makes sense to use the most portable code.\n",https://github.com/bitcoin/bitcoin/pull/5038#issuecomment-58143637,58143637,
laanwj,2014-10-07T06:48:02Z,"It's just so stupid to have to add a dummy string to do a _string comparison_, as if it's some amazing new thing. In other places we also have limits on how far we go back with regard to compatibility.\n\nAnyhow, I was just asking. For anything worthwhile (that is actually meant to be reviewed) we should be using Python, not shellscript.\n\nutACK.\n",https://github.com/bitcoin/bitcoin/pull/5038#issuecomment-58143873,58143873,
Michagogo,2014-10-08T09:20:49Z,"Um, why did we make the changes within the gitian build scripts? Those, by definition, run on Ubuntu 12.04, and with bash, unless I'm missing something. I just checked gitian's source, and the build script has a hard-coded `#!/bin/bash`, as well as the fact that the actual command run is `on-target setarch #{@arches[arch]} bash -x < var/build-script > var/build.log 2>&1`\n",https://github.com/bitcoin/bitcoin/pull/5038#issuecomment-58331286,58331286,
luke-jr,2014-10-08T09:27:16Z,Better to use standards?\n,https://github.com/bitcoin/bitcoin/pull/5038#issuecomment-58331986,58331986,
Michagogo,2014-10-08T09:29:19Z,"It just seems weird to me to make it ugly in the name of compatibility/reducing bashisms, in a script that will only ever be run by bash.\n",https://github.com/bitcoin/bitcoin/pull/5038#issuecomment-58332212,58332212,
laanwj,2014-10-08T09:44:06Z,"@Michagogo Agreed. Wouldn't have been needed for the gitian descriptors as it forces bash. It's just the basic build system that needs to be compatible between shells. @theuni We could revert this with #4727, which completely overhauls the gitian descriptors anyway.\n",https://github.com/bitcoin/bitcoin/pull/5038#issuecomment-58333796,58333796,
theuni,2014-10-08T19:03:59Z,"Yea, all of the above is fine by me. I didn't argue it because they should be obsoleted soon anyway, as you said.\n",https://github.com/bitcoin/bitcoin/pull/5038#issuecomment-58409629,58409629,
