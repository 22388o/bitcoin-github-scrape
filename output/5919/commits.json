[
  {
    "sha": "ae599054ee725234e5c0e47a73dbb5bf712e558d",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzphZTU5OTA1NGVlNzI1MjM0ZTVjMGU0N2E3M2RiYjViZjcxMmU1NThk",
    "commit": {
      "author": {
        "name": "Elias Rohrer",
        "email": "rohrer@informatik.hu-berlin.de",
        "date": "2015-03-17T14:57:18Z"
      },
      "committer": {
        "name": "Elias Rohrer",
        "email": "trash@tnull.de",
        "date": "2015-03-18T10:22:06Z"
      },
      "message": "Unified number constants of getaddr return addrs\n\n- Reduced ADDRMAN_GETADDR_MAX to 1000 (was 2500, but the addr vector would later be reduced to 1000 addrs anyhow).\n- Removed MAX_ADDR_TO_SEND and replaced it with ADDRMAN_GETADDR_MAX.\n- Introduced the constant where before \"1000\" was hardcoded",
      "tree": {
        "sha": "aec69679f8ea65612cb70b42e9884492e855114b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/aec69679f8ea65612cb70b42e9884492e855114b"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ae599054ee725234e5c0e47a73dbb5bf712e558d",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ae599054ee725234e5c0e47a73dbb5bf712e558d",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/ae599054ee725234e5c0e47a73dbb5bf712e558d",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ae599054ee725234e5c0e47a73dbb5bf712e558d/comments",
    "author": null,
    "committer": null,
    "parents": [
      {
        "sha": "5bd3a92da2ddfc831520685b4492569b4a5ed543",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5bd3a92da2ddfc831520685b4492569b4a5ed543",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/5bd3a92da2ddfc831520685b4492569b4a5ed543"
      }
    ],
    "stats": {
      "total": 14,
      "additions": 6,
      "deletions": 8
    },
    "files": [
      {
        "sha": "50983ae0fecbeb86fba30f22d780c9cd3d167757",
        "filename": "src/addrman.h",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/ae599054ee725234e5c0e47a73dbb5bf712e558d/src/addrman.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/ae599054ee725234e5c0e47a73dbb5bf712e558d/src/addrman.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/addrman.h?ref=ae599054ee725234e5c0e47a73dbb5bf712e558d",
        "patch": "@@ -164,7 +164,7 @@ class CAddrInfo : public CAddress\n #define ADDRMAN_GETADDR_MAX_PCT 23\n \n //! the maximum number of nodes to return in a getaddr call\n-#define ADDRMAN_GETADDR_MAX 2500\n+#define ADDRMAN_GETADDR_MAX 1000\n \n /** \n  * Stochastical (IP) address manager "
      },
      {
        "sha": "5bf066c0f38ccf079c8406464e4bb4c1aa1a48a2",
        "filename": "src/main.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/ae599054ee725234e5c0e47a73dbb5bf712e558d/src/main.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/ae599054ee725234e5c0e47a73dbb5bf712e558d/src/main.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/main.cpp?ref=ae599054ee725234e5c0e47a73dbb5bf712e558d",
        "patch": "@@ -3638,7 +3638,7 @@ bool static ProcessMessage(CNode* pfrom, string strCommand, CDataStream& vRecv,\n         // Don't want addr from older versions unless seeding\n         if (pfrom->nVersion < CADDR_TIME_VERSION && addrman.size() > 1000)\n             return true;\n-        if (vAddr.size() > 1000)\n+        if (vAddr.size() > ADDRMAN_GETADDR_MAX)\n         {\n             Misbehaving(pfrom->GetId(), 20);\n             return error(\"message addr size() = %u\", vAddr.size());\n@@ -3690,7 +3690,7 @@ bool static ProcessMessage(CNode* pfrom, string strCommand, CDataStream& vRecv,\n                 vAddrOk.push_back(addr);\n         }\n         addrman.Add(vAddrOk, pfrom->addr, 2 * 60 * 60);\n-        if (vAddr.size() < 1000)\n+        if (vAddr.size() < ADDRMAN_GETADDR_MAX)\n             pfrom->fGetAddr = false;\n         if (pfrom->fOneShot)\n             pfrom->fDisconnect = true;\n@@ -4473,7 +4473,7 @@ bool SendMessages(CNode* pto, bool fSendTrickle)\n                 {\n                     vAddr.push_back(addr);\n                     // receiver rejects addr messages larger than 1000\n-                    if (vAddr.size() >= 1000)\n+                    if (vAddr.size() >= ADDRMAN_GETADDR_MAX)\n                     {\n                         pto->PushMessage(\"addr\", vAddr);\n                         vAddr.clear();"
      },
      {
        "sha": "51bad010cec4774cc43f25ef99f1ff88ed6aecdd",
        "filename": "src/net.cpp",
        "status": "modified",
        "additions": 0,
        "deletions": 1,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/ae599054ee725234e5c0e47a73dbb5bf712e558d/src/net.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/ae599054ee725234e5c0e47a73dbb5bf712e558d/src/net.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/net.cpp?ref=ae599054ee725234e5c0e47a73dbb5bf712e558d",
        "patch": "@@ -9,7 +9,6 @@\n \n #include \"net.h\"\n \n-#include \"addrman.h\"\n #include \"chainparams.h\"\n #include \"clientversion.h\"\n #include \"primitives/transaction.h\""
      },
      {
        "sha": "83aeda27ac2660efb814ee51990b7b660f056465",
        "filename": "src/net.h",
        "status": "modified",
        "additions": 2,
        "deletions": 3,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/ae599054ee725234e5c0e47a73dbb5bf712e558d/src/net.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/ae599054ee725234e5c0e47a73dbb5bf712e558d/src/net.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/net.h?ref=ae599054ee725234e5c0e47a73dbb5bf712e558d",
        "patch": "@@ -6,6 +6,7 @@\n #ifndef BITCOIN_NET_H\n #define BITCOIN_NET_H\n \n+#include \"addrman.h\"\n #include \"bloom.h\"\n #include \"compat.h\"\n #include \"hash.h\"\n@@ -44,8 +45,6 @@ static const int PING_INTERVAL = 2 * 60;\n static const int TIMEOUT_INTERVAL = 20 * 60;\n /** The maximum number of entries in an 'inv' protocol message */\n static const unsigned int MAX_INV_SZ = 50000;\n-/** The maximum number of new addresses to accumulate before announcing. */\n-static const unsigned int MAX_ADDR_TO_SEND = 1000;\n /** Maximum length of incoming protocol messages (no message over 2 MiB is currently acceptable). */\n static const unsigned int MAX_PROTOCOL_MESSAGE_LENGTH = 2 * 1024 * 1024;\n /** -listen default */\n@@ -389,7 +388,7 @@ class CNode\n         // SendMessages will filter it again for knowns that were added\n         // after addresses were pushed.\n         if (addr.IsValid() && !setAddrKnown.count(addr)) {\n-            if (vAddrToSend.size() >= MAX_ADDR_TO_SEND) {\n+            if (vAddrToSend.size() >= ADDRMAN_GETADDR_MAX) {\n                 vAddrToSend[insecure_rand() % vAddrToSend.size()] = addr;\n             } else {\n                 vAddrToSend.push_back(addr);"
      }
    ]
  }
]