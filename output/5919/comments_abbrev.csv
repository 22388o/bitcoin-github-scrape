jonasschnelli,2015-03-17T19:18:45Z,@tnull: i think it would be good to give a more detailed commit message.\n,https://github.com/bitcoin/bitcoin/pull/5919#issuecomment-82548425,82548425,
laanwj,2015-03-18T09:04:32Z,"ACK on replacing 1000 with a constant where appropriate.\n\nNACK on the naming. `MAX_ADDR_TO_SEND` in net.h is clear, using `ADDRMAN_GETADDR_MAX` everywhere less so.\n\nAs for unifying them, I tend to say no unless there is a clear problem. Remember that there are various filtering steps that reduce the size of the list, for example to remove addresses already known, so starting off with 1000 entr",https://github.com/bitcoin/bitcoin/pull/5919#issuecomment-82831017,82831017,
tnull,2015-03-18T11:16:04Z,"@jonasschnelli Amended the commit to have a better message.\n@laanwj Thats true, `MAX_ADDR_TO_SEND` is better, however, I didn't want to introduce circular dependencies, or modify many files for this first minimal patch, before I didn't hear from the developers. `MAX_ADDR_TO_SEND` can't be used in addrman.h/.cpp, while `ADDRMAN_GETADDR_MAX` is available in net.h, if we include addrman.h in it (ins",https://github.com/bitcoin/bitcoin/pull/5919#issuecomment-82908021,82908021,
laanwj,2015-03-18T12:09:09Z,> On less than 1000 addresses being returned: the same can be true for 2500...\n\nBut with a smaller probability.\n,https://github.com/bitcoin/bitcoin/pull/5919#issuecomment-82939537,82939537,
sipa,2015-03-18T12:43:35Z,"Also, the 1000 number is part of the protocol implementation, the 2500 is from addrman. I don't think that changing a number in addrman should have an effect on protocol behaviour, so it seems weird to use addrman's constant inside net.\n",https://github.com/bitcoin/bitcoin/pull/5919#issuecomment-82953398,82953398,
tnull,2015-03-18T12:43:57Z,"> But with a smaller probability.\n\nOf course! I argue that the concept of checking and reducing the set of addrs multiple times is flawed and since it's creating a new vector every time should introduce a good amount of overhead. But probably you're right, if the concept stays the same, it'll be better to leave it at 2500. \n",https://github.com/bitcoin/bitcoin/pull/5919#issuecomment-82953534,82953534,
laanwj,2015-03-18T12:48:05Z,"Well, the concept is not changing here, just the number, so I'm commenting on that :)\n\nHave you measured the overhead? Without measurements from a profiler that show that this is actually a big time sink for a node, I wouldn't worry about it.\n",https://github.com/bitcoin/bitcoin/pull/5919#issuecomment-82954447,82954447,
tnull,2015-03-18T12:48:37Z,"> I don't think that changing a number in addrman should have an effect on protocol behaviour, so it seems weird to use addrman's constant inside net.\n\nTrue again. Maybe this request can be closed, maybe I'll send another one just replacing some of the hardcoded ""1000"" number with `MAX_ADDR_TO_SEND` constant.\n\nDoes anyone have thoughts on the issue of the possibility that initial `addr`-messag",https://github.com/bitcoin/bitcoin/pull/5919#issuecomment-82954508,82954508,
laanwj,2015-03-19T11:27:00Z,"You mean that the node's self-advertisement may get lost? I don't think that is a huge issue. It will re-advertise and for some peer, at some point it's bound to get through. Some unpredictability in getaddr may even be desirable to break assumptions about the returned data.\n",https://github.com/bitcoin/bitcoin/pull/5919#issuecomment-83518174,83518174,
tnull,2015-03-20T10:28:54Z,"Ok, I understand if you think this is no huge issue. However, I fail to see how this unpredictability would be desirable (on top of randomizing returned addresses). \nClosing this request now, thanks for your time! :)\n",https://github.com/bitcoin/bitcoin/pull/5919#issuecomment-83982284,83982284,
