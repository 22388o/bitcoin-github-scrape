[
  {
    "sha": "c3904564541b1460d6afb0fe753280531b49a840",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjMzkwNDU2NDU0MWIxNDYwZDZhZmIwZmU3NTMyODA1MzFiNDlhODQw",
    "commit": {
      "author": {
        "name": "bill-walker",
        "email": "35947992+bill-walker@users.noreply.github.com",
        "date": "2018-03-14T09:27:52Z"
      },
      "committer": {
        "name": "GitHub",
        "email": "noreply@github.com",
        "date": "2018-03-14T09:27:52Z"
      },
      "message": "script addresses for sending, not signing",
      "tree": {
        "sha": "116bae50bdf0f159b2c5aff0869f40176ae6546c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/116bae50bdf0f159b2c5aff0869f40176ae6546c"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c3904564541b1460d6afb0fe753280531b49a840",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJaqOsYCRBK7hj4Ov3rIwAAdHIIAAUGaWY0/6EegQmsaXCc21ls\nT+0gJI7QWZShJtCUfYN67B4QXIu8xPK+jfNuV5bXrlVBZUSptu/VnqBjYWJpnYr8\nvzHvmpNrEmLtODbAO4xqxV0YmwvAeK8csRrpbdobMCrKSR4zzCwlPh5CgS5XXCDK\nNymkBoVYGMRq18oQjmDOdxxfvqDzx8P0yXRj2YL6CW9H3bj9/6kwb5HipTSM6bne\ngNbF3T7zhQheC4mw37t9lrzVHxWDMaGvyOGyg9dM9gW+c8YTyMnDVsIf7uS6R6/m\nkvhcsxe8BqLDiENVefgXhKyl05dkqEVDBz0dtw72WG4qzPI7SLXhndpH0DA9Qno=\n=uV+X\n-----END PGP SIGNATURE-----\n",
        "payload": "tree 116bae50bdf0f159b2c5aff0869f40176ae6546c\nparent 6acd8700bc0ee1d10207a362c1e07372ba274041\nauthor bill-walker <35947992+bill-walker@users.noreply.github.com> 1521019672 -0400\ncommitter GitHub <noreply@github.com> 1521019672 -0400\n\nscript addresses for sending, not signing"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c3904564541b1460d6afb0fe753280531b49a840",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/c3904564541b1460d6afb0fe753280531b49a840",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c3904564541b1460d6afb0fe753280531b49a840/comments",
    "author": {
      "login": "bill-walker",
      "id": 35947992,
      "node_id": "MDQ6VXNlcjM1OTQ3OTky",
      "avatar_url": "https://avatars.githubusercontent.com/u/35947992?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bill-walker",
      "html_url": "https://github.com/bill-walker",
      "followers_url": "https://api.github.com/users/bill-walker/followers",
      "following_url": "https://api.github.com/users/bill-walker/following{/other_user}",
      "gists_url": "https://api.github.com/users/bill-walker/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bill-walker/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bill-walker/subscriptions",
      "organizations_url": "https://api.github.com/users/bill-walker/orgs",
      "repos_url": "https://api.github.com/users/bill-walker/repos",
      "events_url": "https://api.github.com/users/bill-walker/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bill-walker/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "web-flow",
      "id": 19864447,
      "node_id": "MDQ6VXNlcjE5ODY0NDQ3",
      "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/web-flow",
      "html_url": "https://github.com/web-flow",
      "followers_url": "https://api.github.com/users/web-flow/followers",
      "following_url": "https://api.github.com/users/web-flow/following{/other_user}",
      "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions",
      "organizations_url": "https://api.github.com/users/web-flow/orgs",
      "repos_url": "https://api.github.com/users/web-flow/repos",
      "events_url": "https://api.github.com/users/web-flow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/web-flow/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "6acd8700bc0ee1d10207a362c1e07372ba274041",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6acd8700bc0ee1d10207a362c1e07372ba274041",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/6acd8700bc0ee1d10207a362c1e07372ba274041"
      }
    ],
    "stats": {
      "total": 36,
      "additions": 33,
      "deletions": 3
    },
    "files": [
      {
        "sha": "858459aaa0fe971f3cdeb9e282642b40d7e1c20e",
        "filename": "src/qt/editaddressdialog.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c3904564541b1460d6afb0fe753280531b49a840/src/qt/editaddressdialog.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c3904564541b1460d6afb0fe753280531b49a840/src/qt/editaddressdialog.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/editaddressdialog.cpp?ref=c3904564541b1460d6afb0fe753280531b49a840",
        "patch": "@@ -22,7 +22,7 @@ EditAddressDialog::EditAddressDialog(Mode _mode, QWidget *parent) :\n {\n     ui->setupUi(this);\n \n-    GUIUtil::setupAddressWidget(ui->addressEdit, this);\n+    GUIUtil::setupScriptAddressWidget(ui->addressEdit, this);\n \n     switch(mode)\n     {"
      },
      {
        "sha": "67715ba59cb41fc55aa156e1c00d8aed500dbfe7",
        "filename": "src/qt/guiutil.cpp",
        "status": "modified",
        "additions": 30,
        "deletions": 0,
        "changes": 30,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c3904564541b1460d6afb0fe753280531b49a840/src/qt/guiutil.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c3904564541b1460d6afb0fe753280531b49a840/src/qt/guiutil.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/guiutil.cpp?ref=c3904564541b1460d6afb0fe753280531b49a840",
        "patch": "@@ -122,6 +122,21 @@ static std::string DummyAddress(const CChainParams &params)\n     return \"\";\n }\n \n+// Generate a dummy script address with invalid CRC, starting with the network prefix.\n+static std::string DummyScriptAddress(const CChainParams &params)\n+{\n+    std::vector<unsigned char> sourcedata = params.Base58Prefix(CChainParams::SCRIPT_ADDRESS);\n+    sourcedata.insert(sourcedata.end(), dummydata, dummydata + sizeof(dummydata));\n+    for(int i=0; i<256; ++i) { // Try every trailing byte\n+        std::string s = EncodeBase58(sourcedata.data(), sourcedata.data() + sourcedata.size());\n+        if (!IsValidDestinationString(s)) {\n+            return s;\n+        }\n+        sourcedata[sourcedata.size()-1] += 1;\n+    }\n+    return \"\";\n+}\n+\n void setupAddressWidget(QValidatedLineEdit *widget, QWidget *parent)\n {\n     parent->setFocusProxy(widget);\n@@ -137,6 +152,21 @@ void setupAddressWidget(QValidatedLineEdit *widget, QWidget *parent)\n     widget->setCheckValidator(new BitcoinAddressCheckValidator(parent));\n }\n \n+void setupScriptAddressWidget(QValidatedLineEdit *widget, QWidget *parent)\n+{\n+    parent->setFocusProxy(widget);\n+\n+    widget->setFont(fixedPitchFont());\n+#if QT_VERSION >= 0x040700\n+    // We don't want translators to use own addresses in translations\n+    // and this is the only place, where this address is supplied.\n+    widget->setPlaceholderText(QObject::tr(\"Enter a Bitcoin address (e.g. %1)\").arg(\n+        QString::fromStdString(DummyScriptAddress(Params()))));\n+#endif\n+    widget->setValidator(new BitcoinAddressEntryValidator(parent));\n+    widget->setCheckValidator(new BitcoinAddressCheckValidator(parent));\n+}\n+\n void setupAmountWidget(QLineEdit *widget, QWidget *parent)\n {\n     QDoubleValidator *amountValidator = new QDoubleValidator(parent);"
      },
      {
        "sha": "5a6979b85c72050d3ca9e93148a72f1357754dfd",
        "filename": "src/qt/sendcoinsdialog.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c3904564541b1460d6afb0fe753280531b49a840/src/qt/sendcoinsdialog.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c3904564541b1460d6afb0fe753280531b49a840/src/qt/sendcoinsdialog.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/sendcoinsdialog.cpp?ref=c3904564541b1460d6afb0fe753280531b49a840",
        "patch": "@@ -68,7 +68,7 @@ SendCoinsDialog::SendCoinsDialog(const PlatformStyle *_platformStyle, QWidget *p\n         ui->sendButton->setIcon(_platformStyle->SingleColorIcon(\":/icons/send\"));\n     }\n \n-    GUIUtil::setupAddressWidget(ui->lineEditCoinControlChange, this);\n+    GUIUtil::setupScriptAddressWidget(ui->lineEditCoinControlChange, this);\n \n     addEntry();\n "
      },
      {
        "sha": "3b96970d01f731b494ef18c2cac336ae9067671d",
        "filename": "src/qt/sendcoinsentry.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c3904564541b1460d6afb0fe753280531b49a840/src/qt/sendcoinsentry.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c3904564541b1460d6afb0fe753280531b49a840/src/qt/sendcoinsentry.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/sendcoinsentry.cpp?ref=c3904564541b1460d6afb0fe753280531b49a840",
        "patch": "@@ -37,7 +37,7 @@ SendCoinsEntry::SendCoinsEntry(const PlatformStyle *_platformStyle, QWidget *par\n #endif\n \n     // normal bitcoin address field\n-    GUIUtil::setupAddressWidget(ui->payTo, this);\n+    GUIUtil::setupScriptAddressWidget(ui->payTo, this);\n     // just a label for displaying bitcoin address(es)\n     ui->payTo_is->setFont(GUIUtil::fixedPitchFont());\n "
      }
    ]
  }
]