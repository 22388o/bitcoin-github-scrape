shaavan,2021-11-26 13:44:19,"Updated from 46cdabc to 503359e\nAddressed @MarcoFalke comment\n\nChanges:\n1. Corrected Clang Formatting\n\n> Wouldn't it be better to return the error from StartTorControl? This way, other error conditions that are currently silently ignored are reported to the user.\n\nLet me take a look and try to figure it out.",https://github.com/bitcoin/bitcoin/pull/23605#issuecomment-979988602,979988602,
laanwj,2021-11-26 14:25:23,"> Wouldn't it be better to return the error from StartTorControl? This way, other error conditions that are currently silently ignored are reported to the user.\n\nA drawback of this is that `TorControl` is called fairly late in the initialization process. To provide quick feedback to the user, I like the current early validation in that regard.\n(the implementation logic could still be moved t",https://github.com/bitcoin/bitcoin/pull/23605#issuecomment-980013210,980013210,
MarcoFalke,2021-11-26 14:36:34,"Sure, I am not against early sanity checks. Though, some errors can only be checked when the thread is started, so I don't think there is any way to avoid the delay (in general). Currently all errors are ignored, so anything that turns them into actual init errors is an improvement, regardless of when that happens.",https://github.com/bitcoin/bitcoin/pull/23605#issuecomment-980024581,980024581,
shaavan,2021-11-26 14:51:23,"> the implementation logic could still be moved to a function in torcontrol.cpp ofc\n\nSo would you suggest I should move `isValidHostPort` under the torcontrol.cpp file?",https://github.com/bitcoin/bitcoin/pull/23605#issuecomment-980036359,980036359,
laanwj,2021-11-26 15:07:01,"> Though, some errors can only be checked when the thread is started, so I don't think there is any way to avoid the delay (in general)\n\nRight. I'm fine with moving the check there, to be clear.\n\n> So would you suggest I should move isValidHostPort under the torcontrol.cpp file?\n\nNo, not really. If it's a generally useful utility function it makes sense to put it under `util`. Though `",https://github.com/bitcoin/bitcoin/pull/23605#issuecomment-980045955,980045955,
shaavan,2021-11-26 15:50:51,"> Though utilstrencodings.cpp is somewhat debatable, it's network utility functionality not general number/string parsing.\n\nThat's true. I was not sure where to put the function since none of the `util/` files felt right for this function.\nSo what do you think would be the right place to move it to:\n1. Move it under `util/url.cpp`\n2. Create a new `util/network.cpp` file and move this fn ",https://github.com/bitcoin/bitcoin/pull/23605#issuecomment-980070991,980070991,
prayank23,2021-11-26 16:00:32,"Concept ACK\n\nTried experimenting with PR branch and use `-torcontrol`. Can't use domain anymore which was added in https://github.com/bitcoin/bitcoin/pull/22288\n\n```\nbitcoind -torcontrol=localhost:9051\n\nError: -torcontrol has to be in the form <host>:<port>\n```\n\nAlso not sure about use of `regex` or if this can be implemented without using it. However I will leave that for othe",https://github.com/bitcoin/bitcoin/pull/23605#issuecomment-980076565,980076565,
laanwj,2021-11-29 10:15:21,"@prayank23 Thanks for testing. Handling domains is a good point. We really need a test for this.\n\n> Also not sure about use of regex or if this can be implemented without using it. \n\nDoing it without introducing use of `regex` should definitely be possible. We already necessarily parse the host:port spec after all, the thing missing is error feedback.\n",https://github.com/bitcoin/bitcoin/pull/23605#issuecomment-981491687,981491687,
