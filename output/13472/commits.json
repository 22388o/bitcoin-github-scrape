[
  {
    "sha": "2f46efa1051ffb935bf420f7b00049817c4844d2",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyZjQ2ZWZhMTA1MWZmYjkzNWJmNDIwZjdiMDAwNDk4MTdjNDg0NGQy",
    "commit": {
      "author": {
        "name": "Michael Polzer",
        "email": "hashrate@pm-tech.at",
        "date": "2018-06-14T18:58:35Z"
      },
      "committer": {
        "name": "GitHub",
        "email": "noreply@github.com",
        "date": "2018-06-14T18:58:35Z"
      },
      "message": "[devtools translations] catch invalid specifiers",
      "tree": {
        "sha": "83d35f812302c7719266ff6ca4f60bee59dc7908",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/83d35f812302c7719266ff6ca4f60bee59dc7908"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2f46efa1051ffb935bf420f7b00049817c4844d2",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJbIrrbCRBK7hj4Ov3rIwAAdHIIAIt5AOua4ZvuZoG7QGymJzg1\nXlAlMxenjTCuxqxOATaECSnUBz8YcJRnix0NyKcC7NEGxLkwKX4wTN/vmCfTjXJX\n8dm2qoN9nVYTTzcYfTgiDY9deo3y7P25eYPYejdZbD6ZR3N+fHbinM0bfSPqxYxb\n4nSDaAw8lVG0xLfcIZplWK7ZzFkcY0USK2vPHRzgFJql+jow/H05Zp1r3/bECUtr\nZ4zzYJWpQYgQRE8N5s67+Ix9F1Zu2cqjfm/QPsPCvZQ1G18ayLhh6cn13u42ps33\n97ZwVITvn3YPNXjtBkp4NkQ3ioisyyUlILy1d60DrZSb3MU3bBdVBKaKBP/shdA=\n=+6rv\n-----END PGP SIGNATURE-----\n",
        "payload": "tree 83d35f812302c7719266ff6ca4f60bee59dc7908\nparent cc7cbd756acd79623230f7a1b0b0e40c772a82e1\nauthor Michael Polzer <hashrate@pm-tech.at> 1529002715 +0200\ncommitter GitHub <noreply@github.com> 1529002715 +0200\n\n[devtools translations] catch invalid specifiers"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2f46efa1051ffb935bf420f7b00049817c4844d2",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/2f46efa1051ffb935bf420f7b00049817c4844d2",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2f46efa1051ffb935bf420f7b00049817c4844d2/comments",
    "author": {
      "login": "HashUnlimited",
      "id": 26601261,
      "node_id": "MDQ6VXNlcjI2NjAxMjYx",
      "avatar_url": "https://avatars.githubusercontent.com/u/26601261?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/HashUnlimited",
      "html_url": "https://github.com/HashUnlimited",
      "followers_url": "https://api.github.com/users/HashUnlimited/followers",
      "following_url": "https://api.github.com/users/HashUnlimited/following{/other_user}",
      "gists_url": "https://api.github.com/users/HashUnlimited/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/HashUnlimited/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/HashUnlimited/subscriptions",
      "organizations_url": "https://api.github.com/users/HashUnlimited/orgs",
      "repos_url": "https://api.github.com/users/HashUnlimited/repos",
      "events_url": "https://api.github.com/users/HashUnlimited/events{/privacy}",
      "received_events_url": "https://api.github.com/users/HashUnlimited/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "web-flow",
      "id": 19864447,
      "node_id": "MDQ6VXNlcjE5ODY0NDQ3",
      "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/web-flow",
      "html_url": "https://github.com/web-flow",
      "followers_url": "https://api.github.com/users/web-flow/followers",
      "following_url": "https://api.github.com/users/web-flow/following{/other_user}",
      "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions",
      "organizations_url": "https://api.github.com/users/web-flow/orgs",
      "repos_url": "https://api.github.com/users/web-flow/repos",
      "events_url": "https://api.github.com/users/web-flow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/web-flow/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "cc7cbd756acd79623230f7a1b0b0e40c772a82e1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/cc7cbd756acd79623230f7a1b0b0e40c772a82e1",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/cc7cbd756acd79623230f7a1b0b0e40c772a82e1"
      }
    ],
    "stats": {
      "total": 4,
      "additions": 4,
      "deletions": 0
    },
    "files": [
      {
        "sha": "a283646a742c26eee77b00820c33f2e4bba0a867",
        "filename": "contrib/devtools/update-translations.py",
        "status": "modified",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2f46efa1051ffb935bf420f7b00049817c4844d2/contrib/devtools/update-translations.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2f46efa1051ffb935bf420f7b00049817c4844d2/contrib/devtools/update-translations.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/devtools/update-translations.py?ref=2f46efa1051ffb935bf420f7b00049817c4844d2",
        "patch": "@@ -52,6 +52,10 @@ def find_format_specifiers(s):\n         percent = s.find('%', pos)\n         if percent < 0:\n             break\n+        try:\n+            specifiers.append(s[percent+1])\n+        except:\n+            print('Failed to get specifier')\n         specifiers.append(s[percent+1])\n         pos = percent+2\n     return specifiers"
      }
    ]
  },
  {
    "sha": "86807f8b6a83e4ebeee30e58e301076eec8031a9",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo4NjgwN2Y4YjZhODNlNGViZWVlMzBlNThlMzAxMDc2ZWVjODAzMWE5",
    "commit": {
      "author": {
        "name": "Michael Polzer",
        "email": "hashrate@pm-tech.at",
        "date": "2018-06-27T13:46:49Z"
      },
      "committer": {
        "name": "GitHub",
        "email": "noreply@github.com",
        "date": "2018-06-27T13:46:49Z"
      },
      "message": "catch exact exception ...\n\n ... and display the affected string",
      "tree": {
        "sha": "85e4e1fa38b6a2f9d1de14f3dde958d5310f5e26",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/85e4e1fa38b6a2f9d1de14f3dde958d5310f5e26"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/86807f8b6a83e4ebeee30e58e301076eec8031a9",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJbM5VJCRBK7hj4Ov3rIwAAdHIIABr4ivPg+hewN+wgQtg1EQxk\nziBCHpOWa5d5K5hbpDmQyvnbHDNodYQ8JUSNxx5Vs9tdaxwfIn4UNbz07r5Zefma\nrtF+wioMXKwuscQ3sJ9rKbamz26aI6h57C379d2f1rhjYkAMBiYDkI0jPDvkPSzk\naEoRS3naeDSprXE5TsD6LrGHmxo9cdqmnLVkjOrPCAUQmEbbATttGasgHO5JmVv8\n0o7Gwt735DA0ltwpFeRVz+d3CXnbj8C7Mhf03lVLrF+PScGY/MVuRYUPr6AEbbmk\n3baI5CxJ6rMcMm1rQ+DznpiCUK/oIsUeFwrmcvD2ujhDWK3DksmuydnqCHMB1W8=\n=TD9h\n-----END PGP SIGNATURE-----\n",
        "payload": "tree 85e4e1fa38b6a2f9d1de14f3dde958d5310f5e26\nparent 2f46efa1051ffb935bf420f7b00049817c4844d2\nauthor Michael Polzer <hashrate@pm-tech.at> 1530107209 +0300\ncommitter GitHub <noreply@github.com> 1530107209 +0300\n\ncatch exact exception ...\n\n ... and display the affected string"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/86807f8b6a83e4ebeee30e58e301076eec8031a9",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/86807f8b6a83e4ebeee30e58e301076eec8031a9",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/86807f8b6a83e4ebeee30e58e301076eec8031a9/comments",
    "author": {
      "login": "HashUnlimited",
      "id": 26601261,
      "node_id": "MDQ6VXNlcjI2NjAxMjYx",
      "avatar_url": "https://avatars.githubusercontent.com/u/26601261?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/HashUnlimited",
      "html_url": "https://github.com/HashUnlimited",
      "followers_url": "https://api.github.com/users/HashUnlimited/followers",
      "following_url": "https://api.github.com/users/HashUnlimited/following{/other_user}",
      "gists_url": "https://api.github.com/users/HashUnlimited/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/HashUnlimited/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/HashUnlimited/subscriptions",
      "organizations_url": "https://api.github.com/users/HashUnlimited/orgs",
      "repos_url": "https://api.github.com/users/HashUnlimited/repos",
      "events_url": "https://api.github.com/users/HashUnlimited/events{/privacy}",
      "received_events_url": "https://api.github.com/users/HashUnlimited/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "web-flow",
      "id": 19864447,
      "node_id": "MDQ6VXNlcjE5ODY0NDQ3",
      "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/web-flow",
      "html_url": "https://github.com/web-flow",
      "followers_url": "https://api.github.com/users/web-flow/followers",
      "following_url": "https://api.github.com/users/web-flow/following{/other_user}",
      "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions",
      "organizations_url": "https://api.github.com/users/web-flow/orgs",
      "repos_url": "https://api.github.com/users/web-flow/repos",
      "events_url": "https://api.github.com/users/web-flow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/web-flow/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "2f46efa1051ffb935bf420f7b00049817c4844d2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2f46efa1051ffb935bf420f7b00049817c4844d2",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/2f46efa1051ffb935bf420f7b00049817c4844d2"
      }
    ],
    "stats": {
      "total": 15,
      "additions": 8,
      "deletions": 7
    },
    "files": [
      {
        "sha": "7b23224ac49ed96acbabdf3ead9ca1b27c1e9b4a",
        "filename": "contrib/devtools/update-translations.py",
        "status": "modified",
        "additions": 8,
        "deletions": 7,
        "changes": 15,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/86807f8b6a83e4ebeee30e58e301076eec8031a9/contrib/devtools/update-translations.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/86807f8b6a83e4ebeee30e58e301076eec8031a9/contrib/devtools/update-translations.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/devtools/update-translations.py?ref=86807f8b6a83e4ebeee30e58e301076eec8031a9",
        "patch": "@@ -44,7 +44,7 @@ def fetch_all_translations():\n         print('Error while fetching translations', file=sys.stderr)\n         sys.exit(1)\n \n-def find_format_specifiers(s):\n+def find_format_specifiers(s, errors):\n     '''Find all format specifiers in a string.'''\n     pos = 0\n     specifiers = []\n@@ -54,10 +54,11 @@ def find_format_specifiers(s):\n             break\n         try:\n             specifiers.append(s[percent+1])\n-        except:\n-            print('Failed to get specifier')\n-        specifiers.append(s[percent+1])\n-        pos = percent+2\n+            pos = percent+2\n+        except IndexError:\n+            errors.append(\"Failed to parse specifier: %s'\" % (sanitize_string(s)))\n+            # just jump over and move on\n+            pos = percent+1\n     return specifiers\n \n def split_format_specifiers(specifiers):\n@@ -86,12 +87,12 @@ def sanitize_string(s):\n     return s.replace('\\n',' ')\n \n def check_format_specifiers(source, translation, errors, numerus):\n-    source_f = split_format_specifiers(find_format_specifiers(source))\n+    source_f = split_format_specifiers(find_format_specifiers(source, errors))\n     # assert that no source messages contain both Qt and strprintf format specifiers\n     # if this fails, go change the source as this is hacky and confusing!\n     assert(not(source_f[0] and source_f[1]))\n     try:\n-        translation_f = split_format_specifiers(find_format_specifiers(translation))\n+        translation_f = split_format_specifiers(find_format_specifiers(translation, errors))\n     except IndexError:\n         errors.append(\"Parse error in translation for '%s': '%s'\" % (sanitize_string(source), sanitize_string(translation)))\n         return False"
      }
    ]
  }
]