{
  "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9452",
  "id": 99810212,
  "node_id": "MDExOlB1bGxSZXF1ZXN0OTk4MTAyMTI=",
  "html_url": "https://github.com/bitcoin/bitcoin/pull/9452",
  "diff_url": "https://github.com/bitcoin/bitcoin/pull/9452.diff",
  "patch_url": "https://github.com/bitcoin/bitcoin/pull/9452.patch",
  "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9452",
  "number": 9452,
  "state": "closed",
  "locked": true,
  "title": "Use TravisCI to enforce copyright header rules for source files",
  "user": {
    "login": "isle2983",
    "id": 20916903,
    "node_id": "MDQ6VXNlcjIwOTE2OTAz",
    "avatar_url": "https://avatars.githubusercontent.com/u/20916903?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/isle2983",
    "html_url": "https://github.com/isle2983",
    "followers_url": "https://api.github.com/users/isle2983/followers",
    "following_url": "https://api.github.com/users/isle2983/following{/other_user}",
    "gists_url": "https://api.github.com/users/isle2983/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/isle2983/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/isle2983/subscriptions",
    "organizations_url": "https://api.github.com/users/isle2983/orgs",
    "repos_url": "https://api.github.com/users/isle2983/repos",
    "events_url": "https://api.github.com/users/isle2983/events{/privacy}",
    "received_events_url": "https://api.github.com/users/isle2983/received_events",
    "type": "User",
    "site_admin": false
  },
  "body": "As the title indicates, this PR adds the enforcement of MIT Licence copyright headers. The idea is that missing headers are caught ASAP and any deviation from the normal `The Bitcoin Core developers` header needs to be explicitly marked as such in the script.\r\n\r\nIn addition this PR does a significant iteration on `contrib/devtools/copyright_header.py`. Like the preceding version, this script is able to parse through the source files and report on the state of the copyright headers as well as update the year.\r\n\r\nThe first major improvement in this new iteration is that it now has a ruleset specific for each subtree to detect the local proper header style (the subtrees being secp256k1, leveldb, univalue and ctaes).\r\n\r\nThe second major improvement in this iteration makes more elegant use of Python's regular expressions to detect and manipulate the header text. This approach should be maintainable and extensible while keeping the script's quick execution time.\r\n\r\n\r\nTo provide the TravisCI integration, a `ci_check` subcommand is implemented. This executes the logic of the script to catch submissions early where a header was not added pre-merge. A non-zero status is returned to the shell if a problem is found. If everything is fine, TravisCI will look like this:\r\n\r\n![noissuesfound](https://cloud.githubusercontent.com/assets/20916903/21578780/227af4ee-cf4a-11e6-80fc-c2d293e48724.png)\r\n\r\n\r\nIf, for example, a source file is added with no copyright header it will be errored in TravisCI it like this:\r\n\r\n![novalidheader](https://cloud.githubusercontent.com/assets/20916903/21578782/2dac6e60-cf4a-11e6-98b1-a6d13aa6c8c9.png)\r\n\r\n\r\nIf a file has a proper copyright, but is added with some other copyright text such as \"Copyright (c) 2016 Some Other Entity\", the error will be:\r\n\r\n![otherheaderinstance](https://cloud.githubusercontent.com/assets/20916903/21578783/32fbfac0-cf4a-11e6-82d7-04e60a7481a8.png)\r\n\r\n\r\nIn total there are six failure conditions as per what is loaded into the FAILURE_REASONS list of the script. They each have a 'resolution' string attached to them to point the reader to the appropriate resolution - either fix the file (because it is a problem) or update the script (because it is a legitimate change involving non-standard copyright that the script must tolerate). The rules and exceptions for each subtree are loaded into the HEADER_RULES list.\r\n\r\nThere is a commit preceding the update to the script which makes small adjustments to the set of MIT copyright headers to make them uniform in instances where they are not. Also, this commit adds the MIT header to `contrib/dev/tools/gen-manpages.sh`, and hence requires an ACK from @nomnombtc.",
  "created_at": "2016-12-31T18:41:14Z",
  "updated_at": "2021-09-08T11:08:19Z",
  "closed_at": "2017-01-21T00:07:37Z",
  "merged_at": null,
  "merge_commit_sha": "38f102d7628e9a296429b5efbb008c52c1af2e14",
  "assignee": null,
  "assignees": [],
  "requested_reviewers": [],
  "requested_teams": [],
  "labels": [
    {
      "id": 64584,
      "node_id": "MDU6TGFiZWw2NDU4NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Brainstorming",
      "name": "Brainstorming",
      "color": "ebd775",
      "default": false,
      "description": null
    },
    {
      "id": 148216,
      "node_id": "MDU6TGFiZWwxNDgyMTY=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Docs",
      "name": "Docs",
      "color": "02d7e1",
      "default": false,
      "description": null
    }
  ],
  "milestone": null,
  "draft": false,
  "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9452/commits",
  "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9452/comments",
  "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments{/number}",
  "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9452/comments",
  "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/28f8a3642bcf8b8006e20e219206eb85a692ee54",
  "head": {
    "label": "isle2983:PR-travisci-copyright-enforce",
    "ref": "PR-travisci-copyright-enforce",
    "sha": "28f8a3642bcf8b8006e20e219206eb85a692ee54",
    "user": {
      "login": "isle2983",
      "id": 20916903,
      "node_id": "MDQ6VXNlcjIwOTE2OTAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/20916903?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/isle2983",
      "html_url": "https://github.com/isle2983",
      "followers_url": "https://api.github.com/users/isle2983/followers",
      "following_url": "https://api.github.com/users/isle2983/following{/other_user}",
      "gists_url": "https://api.github.com/users/isle2983/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/isle2983/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/isle2983/subscriptions",
      "organizations_url": "https://api.github.com/users/isle2983/orgs",
      "repos_url": "https://api.github.com/users/isle2983/repos",
      "events_url": "https://api.github.com/users/isle2983/events{/privacy}",
      "received_events_url": "https://api.github.com/users/isle2983/received_events",
      "type": "User",
      "site_admin": false
    },
    "repo": {
      "id": 66122772,
      "node_id": "MDEwOlJlcG9zaXRvcnk2NjEyMjc3Mg==",
      "name": "bitcoin",
      "full_name": "isle2983/bitcoin",
      "private": false,
      "owner": {
        "login": "isle2983",
        "id": 20916903,
        "node_id": "MDQ6VXNlcjIwOTE2OTAz",
        "avatar_url": "https://avatars.githubusercontent.com/u/20916903?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/isle2983",
        "html_url": "https://github.com/isle2983",
        "followers_url": "https://api.github.com/users/isle2983/followers",
        "following_url": "https://api.github.com/users/isle2983/following{/other_user}",
        "gists_url": "https://api.github.com/users/isle2983/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/isle2983/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/isle2983/subscriptions",
        "organizations_url": "https://api.github.com/users/isle2983/orgs",
        "repos_url": "https://api.github.com/users/isle2983/repos",
        "events_url": "https://api.github.com/users/isle2983/events{/privacy}",
        "received_events_url": "https://api.github.com/users/isle2983/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/isle2983/bitcoin",
      "description": "Bitcoin Core integration/staging tree",
      "fork": true,
      "url": "https://api.github.com/repos/isle2983/bitcoin",
      "forks_url": "https://api.github.com/repos/isle2983/bitcoin/forks",
      "keys_url": "https://api.github.com/repos/isle2983/bitcoin/keys{/key_id}",
      "collaborators_url": "https://api.github.com/repos/isle2983/bitcoin/collaborators{/collaborator}",
      "teams_url": "https://api.github.com/repos/isle2983/bitcoin/teams",
      "hooks_url": "https://api.github.com/repos/isle2983/bitcoin/hooks",
      "issue_events_url": "https://api.github.com/repos/isle2983/bitcoin/issues/events{/number}",
      "events_url": "https://api.github.com/repos/isle2983/bitcoin/events",
      "assignees_url": "https://api.github.com/repos/isle2983/bitcoin/assignees{/user}",
      "branches_url": "https://api.github.com/repos/isle2983/bitcoin/branches{/branch}",
      "tags_url": "https://api.github.com/repos/isle2983/bitcoin/tags",
      "blobs_url": "https://api.github.com/repos/isle2983/bitcoin/git/blobs{/sha}",
      "git_tags_url": "https://api.github.com/repos/isle2983/bitcoin/git/tags{/sha}",
      "git_refs_url": "https://api.github.com/repos/isle2983/bitcoin/git/refs{/sha}",
      "trees_url": "https://api.github.com/repos/isle2983/bitcoin/git/trees{/sha}",
      "statuses_url": "https://api.github.com/repos/isle2983/bitcoin/statuses/{sha}",
      "languages_url": "https://api.github.com/repos/isle2983/bitcoin/languages",
      "stargazers_url": "https://api.github.com/repos/isle2983/bitcoin/stargazers",
      "contributors_url": "https://api.github.com/repos/isle2983/bitcoin/contributors",
      "subscribers_url": "https://api.github.com/repos/isle2983/bitcoin/subscribers",
      "subscription_url": "https://api.github.com/repos/isle2983/bitcoin/subscription",
      "commits_url": "https://api.github.com/repos/isle2983/bitcoin/commits{/sha}",
      "git_commits_url": "https://api.github.com/repos/isle2983/bitcoin/git/commits{/sha}",
      "comments_url": "https://api.github.com/repos/isle2983/bitcoin/comments{/number}",
      "issue_comment_url": "https://api.github.com/repos/isle2983/bitcoin/issues/comments{/number}",
      "contents_url": "https://api.github.com/repos/isle2983/bitcoin/contents/{+path}",
      "compare_url": "https://api.github.com/repos/isle2983/bitcoin/compare/{base}...{head}",
      "merges_url": "https://api.github.com/repos/isle2983/bitcoin/merges",
      "archive_url": "https://api.github.com/repos/isle2983/bitcoin/{archive_format}{/ref}",
      "downloads_url": "https://api.github.com/repos/isle2983/bitcoin/downloads",
      "issues_url": "https://api.github.com/repos/isle2983/bitcoin/issues{/number}",
      "pulls_url": "https://api.github.com/repos/isle2983/bitcoin/pulls{/number}",
      "milestones_url": "https://api.github.com/repos/isle2983/bitcoin/milestones{/number}",
      "notifications_url": "https://api.github.com/repos/isle2983/bitcoin/notifications{?since,all,participating}",
      "labels_url": "https://api.github.com/repos/isle2983/bitcoin/labels{/name}",
      "releases_url": "https://api.github.com/repos/isle2983/bitcoin/releases{/id}",
      "deployments_url": "https://api.github.com/repos/isle2983/bitcoin/deployments",
      "created_at": "2016-08-20T01:51:53Z",
      "updated_at": "2018-08-21T18:59:04Z",
      "pushed_at": "2017-03-18T20:11:16Z",
      "git_url": "git://github.com/isle2983/bitcoin.git",
      "ssh_url": "git@github.com:isle2983/bitcoin.git",
      "clone_url": "https://github.com/isle2983/bitcoin.git",
      "svn_url": "https://github.com/isle2983/bitcoin",
      "homepage": "https://bitcoin.org/en/download",
      "size": 78143,
      "stargazers_count": 0,
      "watchers_count": 0,
      "language": "C++",
      "has_issues": false,
      "has_projects": true,
      "has_downloads": false,
      "has_wiki": false,
      "has_pages": false,
      "forks_count": 0,
      "mirror_url": null,
      "archived": false,
      "disabled": false,
      "open_issues_count": 1,
      "license": {
        "key": "mit",
        "name": "MIT License",
        "spdx_id": "MIT",
        "url": "https://api.github.com/licenses/mit",
        "node_id": "MDc6TGljZW5zZTEz"
      },
      "allow_forking": true,
      "is_template": false,
      "topics": [],
      "visibility": "public",
      "forks": 0,
      "open_issues": 1,
      "watchers": 0,
      "default_branch": "master"
    }
  },
  "base": {
    "label": "bitcoin:master",
    "ref": "master",
    "sha": "46b249e578e8a3dfbe85bc7253a12e82ef4b658b",
    "user": {
      "login": "bitcoin",
      "id": 528860,
      "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bitcoin",
      "html_url": "https://github.com/bitcoin",
      "followers_url": "https://api.github.com/users/bitcoin/followers",
      "following_url": "https://api.github.com/users/bitcoin/following{/other_user}",
      "gists_url": "https://api.github.com/users/bitcoin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/bitcoin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
      "organizations_url": "https://api.github.com/users/bitcoin/orgs",
      "repos_url": "https://api.github.com/users/bitcoin/repos",
      "events_url": "https://api.github.com/users/bitcoin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/bitcoin/received_events",
      "type": "Organization",
      "site_admin": false
    },
    "repo": {
      "id": 1181927,
      "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
      "name": "bitcoin",
      "full_name": "bitcoin/bitcoin",
      "private": false,
      "owner": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following{/other_user}",
        "gists_url": "https://api.github.com/users/bitcoin/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/bitcoin/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events{/privacy}",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin",
      "description": "Bitcoin Core integration/staging tree",
      "fork": false,
      "url": "https://api.github.com/repos/bitcoin/bitcoin",
      "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
      "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys{/key_id}",
      "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators{/collaborator}",
      "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
      "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
      "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events{/number}",
      "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
      "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees{/user}",
      "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches{/branch}",
      "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
      "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs{/sha}",
      "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags{/sha}",
      "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs{/sha}",
      "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees{/sha}",
      "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/{sha}",
      "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
      "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
      "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
      "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
      "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
      "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits{/sha}",
      "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits{/sha}",
      "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments{/number}",
      "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments{/number}",
      "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/{+path}",
      "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/{base}...{head}",
      "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
      "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/{archive_format}{/ref}",
      "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
      "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues{/number}",
      "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls{/number}",
      "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones{/number}",
      "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications{?since,all,participating}",
      "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels{/name}",
      "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases{/id}",
      "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
      "created_at": "2010-12-19T15:16:43Z",
      "updated_at": "2021-12-03T12:29:04Z",
      "pushed_at": "2021-12-03T12:46:37Z",
      "git_url": "git://github.com/bitcoin/bitcoin.git",
      "ssh_url": "git@github.com:bitcoin/bitcoin.git",
      "clone_url": "https://github.com/bitcoin/bitcoin.git",
      "svn_url": "https://github.com/bitcoin/bitcoin",
      "homepage": "https://bitcoincore.org/en/download",
      "size": 188505,
      "stargazers_count": 59769,
      "watchers_count": 59769,
      "language": "C++",
      "has_issues": true,
      "has_projects": true,
      "has_downloads": false,
      "has_wiki": false,
      "has_pages": false,
      "forks_count": 30725,
      "mirror_url": null,
      "archived": false,
      "disabled": false,
      "open_issues_count": 1015,
      "license": {
        "key": "mit",
        "name": "MIT License",
        "spdx_id": "MIT",
        "url": "https://api.github.com/licenses/mit",
        "node_id": "MDc6TGljZW5zZTEz"
      },
      "allow_forking": true,
      "is_template": false,
      "topics": [
        "bitcoin",
        "c-plus-plus",
        "cryptocurrency",
        "cryptography",
        "p2p"
      ],
      "visibility": "public",
      "forks": 30725,
      "open_issues": 1015,
      "watchers": 59769,
      "default_branch": "master"
    }
  },
  "_links": {
    "self": {
      "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9452"
    },
    "html": {
      "href": "https://github.com/bitcoin/bitcoin/pull/9452"
    },
    "issue": {
      "href": "https://api.github.com/repos/bitcoin/bitcoin/issues/9452"
    },
    "comments": {
      "href": "https://api.github.com/repos/bitcoin/bitcoin/issues/9452/comments"
    },
    "review_comments": {
      "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9452/comments"
    },
    "review_comment": {
      "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments{/number}"
    },
    "commits": {
      "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9452/commits"
    },
    "statuses": {
      "href": "https://api.github.com/repos/bitcoin/bitcoin/statuses/28f8a3642bcf8b8006e20e219206eb85a692ee54"
    }
  },
  "author_association": "CONTRIBUTOR",
  "auto_merge": null,
  "active_lock_reason": "resolved",
  "merged": false,
  "mergeable": false,
  "rebaseable": false,
  "mergeable_state": "dirty",
  "merged_by": null,
  "comments": 13,
  "review_comments": 0,
  "maintainer_can_modify": false,
  "commits": 2,
  "additions": 886,
  "deletions": 376,
  "changed_files": 13
}