[
  {
    "sha": "083f20369878196785151e038e5f5126fed74021",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowODNmMjAzNjk4NzgxOTY3ODUxNTFlMDM4ZTVmNTEyNmZlZDc0MDIx",
    "commit": {
      "author": {
        "name": "Gregory Maxwell",
        "email": "greg@xiph.org",
        "date": "2016-11-27T02:47:22Z"
      },
      "committer": {
        "name": "Gregory Maxwell",
        "email": "greg@xiph.org",
        "date": "2016-11-27T04:13:54Z"
      },
      "message": "Remove fNetworkNode.\n\nMatt pointed out to me that this appeared to be doing nothing (except involving itself in data races).",
      "tree": {
        "sha": "c57369aeff2af76a042bca5a23f64ba321bf0ac7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c57369aeff2af76a042bca5a23f64ba321bf0ac7"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/083f20369878196785151e038e5f5126fed74021",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/083f20369878196785151e038e5f5126fed74021",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/083f20369878196785151e038e5f5126fed74021",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/083f20369878196785151e038e5f5126fed74021/comments",
    "author": {
      "login": "gmaxwell",
      "id": 858454,
      "node_id": "MDQ6VXNlcjg1ODQ1NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/858454?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gmaxwell",
      "html_url": "https://github.com/gmaxwell",
      "followers_url": "https://api.github.com/users/gmaxwell/followers",
      "following_url": "https://api.github.com/users/gmaxwell/following{/other_user}",
      "gists_url": "https://api.github.com/users/gmaxwell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
      "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
      "repos_url": "https://api.github.com/users/gmaxwell/repos",
      "events_url": "https://api.github.com/users/gmaxwell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "gmaxwell",
      "id": 858454,
      "node_id": "MDQ6VXNlcjg1ODQ1NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/858454?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gmaxwell",
      "html_url": "https://github.com/gmaxwell",
      "followers_url": "https://api.github.com/users/gmaxwell/followers",
      "following_url": "https://api.github.com/users/gmaxwell/following{/other_user}",
      "gists_url": "https://api.github.com/users/gmaxwell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
      "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
      "repos_url": "https://api.github.com/users/gmaxwell/repos",
      "events_url": "https://api.github.com/users/gmaxwell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "76fec09d878d6dbf214bdb6228d480bd9195db4c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/76fec09d878d6dbf214bdb6228d480bd9195db4c",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/76fec09d878d6dbf214bdb6228d480bd9195db4c"
      }
    ],
    "stats": {
      "total": 10,
      "additions": 3,
      "deletions": 7
    },
    "files": [
      {
        "sha": "4b6872146c5313f9f3e99872bc140df52b80d9f5",
        "filename": "src/main.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/083f20369878196785151e038e5f5126fed74021/src/main.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/083f20369878196785151e038e5f5126fed74021/src/main.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/main.cpp?ref=083f20369878196785151e038e5f5126fed74021",
        "patch": "@@ -5242,8 +5242,8 @@ bool static ProcessMessage(CNode* pfrom, string strCommand, CDataStream& vRecv,\n     {\n         pfrom->SetRecvVersion(min(pfrom->nVersion, PROTOCOL_VERSION));\n \n-        // Mark this node as currently connected, so we update its timestamp later.\n-        if (pfrom->fNetworkNode) {\n+        if (!pfrom->fInbound) {\n+            // Mark this node as currently connected, so we update its timestamp later.\n             LOCK(cs_main);\n             State(pfrom->GetId())->fCurrentlyConnected = true;\n         }"
      },
      {
        "sha": "08115a3518f2e3b242234a32ea78d012595be06c",
        "filename": "src/net.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 4,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/083f20369878196785151e038e5f5126fed74021/src/net.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/083f20369878196785151e038e5f5126fed74021/src/net.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/net.cpp?ref=083f20369878196785151e038e5f5126fed74021",
        "patch": "@@ -1067,8 +1067,7 @@ void CConnman::ThreadSocketHandler()\n                     pnode->CloseSocketDisconnect();\n \n                     // hold in disconnected pool until all refs are released\n-                    if (pnode->fNetworkNode || pnode->fInbound)\n-                        pnode->Release();\n+                    pnode->Release();\n                     vNodesDisconnected.push_back(pnode);\n                 }\n             }\n@@ -1808,7 +1807,6 @@ bool CConnman::OpenNetworkConnection(const CAddress& addrConnect, bool fCountFai\n         return false;\n     if (grantOutbound)\n         grantOutbound->MoveTo(pnode->grantOutbound);\n-    pnode->fNetworkNode = true;\n     if (fOneShot)\n         pnode->fOneShot = true;\n     if (fFeeler)\n@@ -2531,7 +2529,6 @@ CNode::CNode(NodeId idIn, ServiceFlags nLocalServicesIn, int nMyStartingHeightIn\n     fOneShot = false;\n     fClient = false; // set by version message\n     fFeeler = false;\n-    fNetworkNode = false;\n     fSuccessfullyConnected = false;\n     fDisconnect = false;\n     nRefCount = 0;"
      },
      {
        "sha": "ebea488a4d9b63b8deb5a41bcc1534ef709ac291",
        "filename": "src/net.h",
        "status": "modified",
        "additions": 0,
        "deletions": 1,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/083f20369878196785151e038e5f5126fed74021/src/net.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/083f20369878196785151e038e5f5126fed74021/src/net.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/net.h?ref=083f20369878196785151e038e5f5126fed74021",
        "patch": "@@ -613,7 +613,6 @@ class CNode\n     bool fOneShot;\n     bool fClient;\n     const bool fInbound;\n-    bool fNetworkNode;\n     bool fSuccessfullyConnected;\n     bool fDisconnect;\n     // We use fRelayTxes for two purposes -"
      }
    ]
  },
  {
    "sha": "bdb922b34c9a477c4ebf358653f6bcfb9bee48ce",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiZGI5MjJiMzRjOWE0NzdjNGViZjM1ODY1M2Y2YmNmYjliZWU0OGNl",
    "commit": {
      "author": {
        "name": "Gregory Maxwell",
        "email": "greg@xiph.org",
        "date": "2016-11-27T04:19:37Z"
      },
      "committer": {
        "name": "Gregory Maxwell",
        "email": "greg@xiph.org",
        "date": "2016-11-27T04:19:37Z"
      },
      "message": "Remove pnodeLocalHost.\n\nMostly a legacy of the long removed pub/sub system.",
      "tree": {
        "sha": "c48185a1c51b4c2760648f8bcd94eb9e68a6375c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c48185a1c51b4c2760648f8bcd94eb9e68a6375c"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/bdb922b34c9a477c4ebf358653f6bcfb9bee48ce",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/bdb922b34c9a477c4ebf358653f6bcfb9bee48ce",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/bdb922b34c9a477c4ebf358653f6bcfb9bee48ce",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/bdb922b34c9a477c4ebf358653f6bcfb9bee48ce/comments",
    "author": {
      "login": "gmaxwell",
      "id": 858454,
      "node_id": "MDQ6VXNlcjg1ODQ1NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/858454?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gmaxwell",
      "html_url": "https://github.com/gmaxwell",
      "followers_url": "https://api.github.com/users/gmaxwell/followers",
      "following_url": "https://api.github.com/users/gmaxwell/following{/other_user}",
      "gists_url": "https://api.github.com/users/gmaxwell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
      "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
      "repos_url": "https://api.github.com/users/gmaxwell/repos",
      "events_url": "https://api.github.com/users/gmaxwell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "gmaxwell",
      "id": 858454,
      "node_id": "MDQ6VXNlcjg1ODQ1NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/858454?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gmaxwell",
      "html_url": "https://github.com/gmaxwell",
      "followers_url": "https://api.github.com/users/gmaxwell/followers",
      "following_url": "https://api.github.com/users/gmaxwell/following{/other_user}",
      "gists_url": "https://api.github.com/users/gmaxwell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
      "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
      "repos_url": "https://api.github.com/users/gmaxwell/repos",
      "events_url": "https://api.github.com/users/gmaxwell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "083f20369878196785151e038e5f5126fed74021",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/083f20369878196785151e038e5f5126fed74021",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/083f20369878196785151e038e5f5126fed74021"
      }
    ],
    "stats": {
      "total": 15,
      "additions": 0,
      "deletions": 15
    },
    "files": [
      {
        "sha": "c9317c30254d0a673790f7bc0a9b11f6d60ef22e",
        "filename": "src/net.cpp",
        "status": "modified",
        "additions": 0,
        "deletions": 15,
        "changes": 15,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/bdb922b34c9a477c4ebf358653f6bcfb9bee48ce/src/net.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/bdb922b34c9a477c4ebf358653f6bcfb9bee48ce/src/net.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/net.cpp?ref=bdb922b34c9a477c4ebf358653f6bcfb9bee48ce",
        "patch": "@@ -74,7 +74,6 @@ bool fRelayTxes = true;\n CCriticalSection cs_mapLocalHost;\n std::map<CNetAddr, LocalServiceInfo> mapLocalHost;\n static bool vfLimited[NET_MAX] = {};\n-static CNode* pnodeLocalHost = NULL;\n std::string strSubVersion;\n \n limitedmap<uint256, int64_t> mapAlreadyAskedFor(MAX_INV_SZ);\n@@ -2137,17 +2136,6 @@ bool CConnman::Start(boost::thread_group& threadGroup, CScheduler& scheduler, st\n         semOutbound = new CSemaphore(std::min((nMaxOutbound + nMaxFeeler), nMaxConnections));\n     }\n \n-    if (pnodeLocalHost == NULL) {\n-        CNetAddr local;\n-        LookupHost(\"127.0.0.1\", local, false);\n-\n-        NodeId id = GetNewNodeId();\n-        uint64_t nonce = GetDeterministicRandomizer(RANDOMIZER_ID_LOCALHOSTNONCE).Write(id).Finalize();\n-\n-        pnodeLocalHost = new CNode(id, nLocalServices, GetBestHeight(), INVALID_SOCKET, CAddress(CService(local, 0), nLocalServices), 0, nonce);\n-        GetNodeSignals().InitializeNode(pnodeLocalHost, *this);\n-    }\n-\n     //\n     // Start threads\n     //\n@@ -2225,9 +2213,6 @@ void CConnman::Stop()\n     vhListenSocket.clear();\n     delete semOutbound;\n     semOutbound = NULL;\n-    if(pnodeLocalHost)\n-        DeleteNode(pnodeLocalHost);\n-    pnodeLocalHost = NULL;\n }\n \n void CConnman::DeleteNode(CNode* pnode)"
      }
    ]
  }
]