gmaxwell,2012-08-28T18:57:06Z,"I reviewed the IsCanonicalSignature code with Pieter before he posted the pull request, so ACK on that much.\n\nGenerally, with test cases we should be striving for tests that hit every path through the code where it's reasonably possible to do so. For IsCanonicalSignature this would just require adding must-pass/must-fail cases right along the boundaries of each of the tests. See line 260 of this",https://github.com/bitcoin/bitcoin/pull/1742#issuecomment-8102942,8102942,
sipa,2012-08-28T19:28:22Z,"As a general comment about why not using the OpenSSL-based IsCanonical that is present in test/canonical_tests.cpp, I prefer to have a very clear set of rules to assess canonicality (is that a word?) with, as that is easier to port to other clients.\n\nOne thing I haven't tested yet, but we probably should: what if R or S is >= the field size? If OpenSSL allows that, we should make sure that it's ",https://github.com/bitcoin/bitcoin/pull/1742#issuecomment-8103968,8103968,
Diapolo,2012-08-28T20:11:35Z,"Can (in short term) one of you explain to me, what the term canonical means in that context here?\n",https://github.com/bitcoin/bitcoin/pull/1742#issuecomment-8105324,8105324,
sipa,2012-08-28T20:25:22Z,"Bitcoin uses OpenSSL to encode public keys and signature. For public keys, one of encodings defined in the SEC specification is used, for signatures, DER encoding is used.\n\nThe problem is that in both cases, OpenSSL supports several encodings for the same data. In particular, for public keys it supports the (standard) uncompressed (0x04 as first byte) and compressed (0x02 or 0x03 as first byte) ",https://github.com/bitcoin/bitcoin/pull/1742#issuecomment-8105762,8105762,
gmaxwell,2012-08-28T20:33:52Z,"@Diapolo    Imagine you were to send a number in the range -127 to 127 inclusive to someone using bits. You decide to send one bit to indicate positive or negative, then 7 more bits to signal 0-127.    In this encoding there are two ways to send zero:  +0 and -0.  This can create problems if some series of calculations could result in +0 and some series of calculations could result in -0 and then ",https://github.com/bitcoin/bitcoin/pull/1742#issuecomment-8106026,8106026,
Diapolo,2012-08-28T20:49:26Z,"Thanks for both explanations, very informative!\nSo this is a new enforced key / signature checking policy in the end ... would that require a new BIP?\n",https://github.com/bitcoin/bitcoin/pull/1742#issuecomment-8106520,8106520,
sipa,2012-08-28T20:51:42Z,"The plan is to initially just enable it for mempool transactions, which is technically not yet a protocol change. If we'd ever enable it (after some point) for blockchain transactions, it would mean a protocol change, and certainly need a BIP.\n",https://github.com/bitcoin/bitcoin/pull/1742#issuecomment-8106606,8106606,
gmaxwell,2012-08-28T20:53:37Z,"At least for the near term future we'd only enforce this as IsStandard()â€” so unmodified clients wouldn't mine or relay them. Miners could, if they modify their code, still insert transactions which are not in the canonical form.\n\nIf we wanted to add a new rule to Bitcoin it would need to be a BIP. It might get swept up with another change. For example, if we'd done this with IsStandard some mont",https://github.com/bitcoin/bitcoin/pull/1742#issuecomment-8106688,8106688,
BitcoinPullTester,2012-08-29T03:08:27Z,"Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/0e8b6b83cb310fce4371daf1a88650ef2275c15c for binaries and test log.\n",https://github.com/bitcoin/bitcoin/pull/1742#issuecomment-8114134,8114134,
sipa,2012-08-30T00:03:55Z,Added more test cases. All reasons for non-canonicality should occur now.\n,https://github.com/bitcoin/bitcoin/pull/1742#issuecomment-8145470,8145470,
BitcoinPullTester,2012-09-06T03:52:09Z,"Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/c24e931733c24c0c5e5848b99cfa5c25514f6e78 for binaries and test log.\n",https://github.com/bitcoin/bitcoin/pull/1742#issuecomment-8321775,8321775,
sipa,2012-09-20T23:27:47Z,"Rebased, and updated test cases. 100% coverage in the signature tests now.\n",https://github.com/bitcoin/bitcoin/pull/1742#issuecomment-8749180,8749180,
BitcoinPullTester,2012-09-21T05:10:42Z,"Automatic sanity-testing: FAILED MERGE, see http://jenkins.bluematt.me/pull-tester/04c094401efe0ae267a5888be0911f6331387dc0 for test log.\n\nThis pull does not merge cleanly onto current master\n",https://github.com/bitcoin/bitcoin/pull/1742#issuecomment-8755293,8755293,
laanwj,2012-09-21T13:44:53Z,"```\n I prefer to have a very clear set of rules to assess \n canonicality (is that a word?) with, as that is easier to port to other clients.\n```\n\n100% agree. It should be fully possible to write (or specify) a bitcoin client without relying on OpenSSL.\n",https://github.com/bitcoin/bitcoin/pull/1742#issuecomment-8765041,8765041,
BitcoinPullTester,2012-09-21T15:07:19Z,"Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/58bc86e37fda1aec270bccb3df6c20fbd2a6591c for binaries and test log.\n",https://github.com/bitcoin/bitcoin/pull/1742#issuecomment-8767638,8767638,
sipa,2012-09-28T14:48:27Z,"@gavinandresen @jgarzik\nCan I get some ACKs on this? This pull request has no semantic effect, it just brings a test function into scope.\n\nI suppose the question is whether the code here reflects the actual standard for public keys and signatures we want. The test case does have a function to verify consistency with OpenSSL, and has 100% coverage (for signatures), though.\n",https://github.com/bitcoin/bitcoin/pull/1742#issuecomment-8978659,8978659,
jgarzik,2012-09-28T16:03:19Z,"As-good-as-you're-gonna-get ACK :)\n\nI cannot claim that I understand the problem enough to verify the correctness of IsCanonical{pubkey,signature}...  however assuming they are correct, the rest of the code appears correct.\n\nAs the earlier discussion indicated, this should not be applied strictly for blocks -- and indeed it is not.\n",https://github.com/bitcoin/bitcoin/pull/1742#issuecomment-8981552,8981552,
gmaxwell,2012-10-20T16:16:44Z,"This needs checks for flipped values. (Still ACK, though)\n",https://github.com/bitcoin/bitcoin/pull/1742#issuecomment-9633016,9633016,
sipa,2012-10-20T16:28:27Z,"@gmaxwell I think we need code that enforces creation of strictly-even-s-value-signatures, and have some discussion with authors of other clients before we can even think about code to test for that...\n",https://github.com/bitcoin/bitcoin/pull/1742#issuecomment-9633166,9633166,
gavinandresen,2012-10-20T17:43:39Z,ACK\n,https://github.com/bitcoin/bitcoin/pull/1742#issuecomment-9634007,9634007,
laanwj,2012-09-09T19:00:09Z,"_never mind, I was reading it wrong_\n",https://github.com/bitcoin/bitcoin/pull/1742#discussion_r1562200,1562200,src/script.cpp
