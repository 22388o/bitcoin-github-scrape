[
  {
    "sha": "65e3a1e76202b9a695fc6319dbd527ac563e0895",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo2NWUzYTFlNzYyMDJiOWE2OTVmYzYzMTlkYmQ1MjdhYzU2M2UwODk1",
    "commit": {
      "author": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2014-11-07T12:42:52Z"
      },
      "committer": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2014-11-07T12:49:25Z"
      },
      "message": "Make sure that GetRandomBytes never fails\n\nWe're using GetRandomBytes in several contexts where it's either\nunwieldy to return an error, or an error would mean a fatal exception\nanyhow.\n\n@gmaxwell checked OpenSSL a while ago and discovered that it never\nactually fails, but it can't hurt to be a bit paranoid here.",
      "tree": {
        "sha": "4346296f76f3f17b5f3c0120c79f166da64c489f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/4346296f76f3f17b5f3c0120c79f166da64c489f"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/65e3a1e76202b9a695fc6319dbd527ac563e0895",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1\n\niQEcBAABCgAGBQJUXL/WAAoJEHSBCwEjRsmmZi8IAL1ZggXEGoosnLExEAK0Cv3q\n8rNrIDu+MPTvz9w6i0MN8Bg0xDhV2hZ+HurcF2SQ1zCsPrBEeWDi2KqKeGaX02Aq\n210tLtbwyZJA0klA5BOczljYcRiJ64We6dGJCZojQbCVstTya6jSuMnbX43ojfib\nSxhoo6am4xrTc33KP7RYQat07q+KIY3WZBp1hiDgHRkHN838UCwdwBq6Qp/cSV61\nKBmkRHRxvK2uMROhUNjbjQZBS3o5AYDGL3nm/vBzZSTr0y8+HICepyQ+McEWeJzD\nlljHHvF2lzksrw+K8Y/Yxy1gmhlX/l6CzZ+sZfxNzIPvoPJHiEVre1OtM1nWnq4=\n=Fz0g\n-----END PGP SIGNATURE-----",
        "payload": "tree 4346296f76f3f17b5f3c0120c79f166da64c489f\nparent 9ea87f9e187da41964c3cafdadf54b2f767c3450\nauthor Wladimir J. van der Laan <laanwj@gmail.com> 1415364172 +0100\ncommitter Wladimir J. van der Laan <laanwj@gmail.com> 1415364565 +0100\n\nMake sure that GetRandomBytes never fails\n\nWe're using GetRandomBytes in several contexts where it's either\nunwieldy to return an error, or an error would mean a fatal exception\nanyhow.\n\n@gmaxwell checked OpenSSL a while ago and discovered that it never\nactually fails, but it can't hurt to be a bit paranoid here.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/65e3a1e76202b9a695fc6319dbd527ac563e0895",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/65e3a1e76202b9a695fc6319dbd527ac563e0895",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/65e3a1e76202b9a695fc6319dbd527ac563e0895/comments",
    "author": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "9ea87f9e187da41964c3cafdadf54b2f767c3450",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9ea87f9e187da41964c3cafdadf54b2f767c3450",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/9ea87f9e187da41964c3cafdadf54b2f767c3450"
      }
    ],
    "stats": {
      "total": 13,
      "additions": 5,
      "deletions": 8
    },
    "files": [
      {
        "sha": "fc9505ae73dbf4422489918d0b3b016078bdfb78",
        "filename": "src/random.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 3,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/65e3a1e76202b9a695fc6319dbd527ac563e0895/src/random.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/65e3a1e76202b9a695fc6319dbd527ac563e0895/src/random.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/random.cpp?ref=65e3a1e76202b9a695fc6319dbd527ac563e0895",
        "patch": "@@ -82,13 +82,12 @@ void RandAddSeedPerfmon()\n #endif\n }\n \n-bool GetRandBytes(unsigned char* buf, int num)\n+void GetRandBytes(unsigned char* buf, int num)\n {\n     if (RAND_bytes(buf, num) != 1) {\n         LogPrintf(\"%s: OpenSSL RAND_bytes() failed with error: %s\\n\", __func__, ERR_error_string(ERR_get_error(), NULL));\n-        return false;\n+        assert(false);\n     }\n-    return true;\n }\n \n uint64_t GetRand(uint64_t nMax)"
      },
      {
        "sha": "ec73d910c48d76dade5de58312afdf9be0967808",
        "filename": "src/random.h",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/65e3a1e76202b9a695fc6319dbd527ac563e0895/src/random.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/65e3a1e76202b9a695fc6319dbd527ac563e0895/src/random.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/random.h?ref=65e3a1e76202b9a695fc6319dbd527ac563e0895",
        "patch": "@@ -19,7 +19,7 @@ void RandAddSeedPerfmon();\n /**\n  * Functions to gather random data via the OpenSSL PRNG\n  */\n-bool GetRandBytes(unsigned char* buf, int num);\n+void GetRandBytes(unsigned char* buf, int num);\n uint64_t GetRand(uint64_t nMax);\n int GetRandInt(int nMax);\n uint256 GetRandHash();"
      },
      {
        "sha": "ec439c5aad9076d9f25c16652dd9541ca9d8e9f6",
        "filename": "src/wallet.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 4,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/65e3a1e76202b9a695fc6319dbd527ac563e0895/src/wallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/65e3a1e76202b9a695fc6319dbd527ac563e0895/src/wallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet.cpp?ref=65e3a1e76202b9a695fc6319dbd527ac563e0895",
        "patch": "@@ -422,15 +422,13 @@ bool CWallet::EncryptWallet(const SecureString& strWalletPassphrase)\n     RandAddSeedPerfmon();\n \n     vMasterKey.resize(WALLET_CRYPTO_KEY_SIZE);\n-    if (!GetRandBytes(&vMasterKey[0], WALLET_CRYPTO_KEY_SIZE))\n-        return false;\n+    GetRandBytes(&vMasterKey[0], WALLET_CRYPTO_KEY_SIZE);\n \n     CMasterKey kMasterKey;\n     RandAddSeedPerfmon();\n \n     kMasterKey.vchSalt.resize(WALLET_CRYPTO_SALT_SIZE);\n-    if (!GetRandBytes(&kMasterKey.vchSalt[0], WALLET_CRYPTO_SALT_SIZE))\n-        return false;\n+    GetRandBytes(&kMasterKey.vchSalt[0], WALLET_CRYPTO_SALT_SIZE);\n \n     CCrypter crypter;\n     int64_t nStartTime = GetTimeMillis();"
      }
    ]
  }
]