[
  {
    "sha": "21a65756f558a2bd50e71c6dfb04143533e59f76",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyMWE2NTc1NmY1NThhMmJkNTBlNzFjNmRmYjA0MTQzNTMzZTU5Zjc2",
    "commit": {
      "author": {
        "name": "Aaron Clauson",
        "email": "aaron@sipsorcery.com",
        "date": "2020-06-29T12:25:59Z"
      },
      "committer": {
        "name": "Aaron Clauson",
        "email": "aaron@sipsorcery.com",
        "date": "2020-06-29T12:25:59Z"
      },
      "message": "Add Windows WSL build recommendation to temporarily disable Win32 PE support.",
      "tree": {
        "sha": "dbe290244fe64acf2ce72b3229c2b6360f832a60",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/dbe290244fe64acf2ce72b3229c2b6360f832a60"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/21a65756f558a2bd50e71c6dfb04143533e59f76",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEnTzIanL4SUNC6l/RCkG9w/T6/xwFAl753dcACgkQCkG9w/T6\n/xwMqg//UTi5THCGxmvgWy7XK7plmLjl6XF75utD3M+N9dm7q9BwziZI5ADPq9n3\nsdIkJmNpW+NuRcd69oYS3xuy2d55GLGZQLxxIwNid2M/QFlLQnnPYC+E2y0ADa2G\nASpU+eXTwp1sntD6SY0j8Txb/a8+KxmK5/FQuMBSPdEnIHCrHWaGaIa3CT1f5Bpn\nOQ7LnM4cefuQsfeJ7GbZK+9JiEceQcjnHF0X/DFv1zgXmcbVofD9HVIsXEUzCDBF\nY+kfvo/yWZY7NUJGsADk1eUIll339JKsUf9sWkNdG8vjqyjVv3aCEeWxWteCjUa8\nV0Xv07+2OMYkk5738/R+DPykqfqZ0KDY60kp15k0eRIyOxmIEUHrkbz8n75Lx7DH\nfcoJPLbZWHiU2zdyPXpOQd95le6Ddr5VJ6oNwOki/HBUqc9XwwRfCyua88LW5oo2\nSkBw2R9rtUS9uJCviVQAU/VIFkJ/EwqCnRUrL11Mx2E0it/GvKKNGR+kP+YO5lOt\n7UqXgmasJT4PYD0HcapMI4nw73toSVn80S2xfSsasuvppRAzYIUez4J4wA6m/COD\nbgHFHVSy2jgcGTwDQeZJeONm41Uu7uMbO/sLPDQI+RZX+83lIDgMGHhEIaNqfARU\n7XdQMZ80GZkyD4Tiz2+BQuRo1gRAKpJkgdPR95tEzZZg2nBSBBU=\n=0IPY\n-----END PGP SIGNATURE-----",
        "payload": "tree dbe290244fe64acf2ce72b3229c2b6360f832a60\nparent 19612ca2eb2e335c8ccc9c0f33421df22f1cc3b6\nauthor Aaron Clauson <aaron@sipsorcery.com> 1593433559 +0100\ncommitter Aaron Clauson <aaron@sipsorcery.com> 1593433559 +0100\n\nAdd Windows WSL build recommendation to temporarily disable Win32 PE support.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/21a65756f558a2bd50e71c6dfb04143533e59f76",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/21a65756f558a2bd50e71c6dfb04143533e59f76",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/21a65756f558a2bd50e71c6dfb04143533e59f76/comments",
    "author": {
      "login": "sipsorcery",
      "id": 197660,
      "node_id": "MDQ6VXNlcjE5NzY2MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/197660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipsorcery",
      "html_url": "https://github.com/sipsorcery",
      "followers_url": "https://api.github.com/users/sipsorcery/followers",
      "following_url": "https://api.github.com/users/sipsorcery/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipsorcery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipsorcery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipsorcery/subscriptions",
      "organizations_url": "https://api.github.com/users/sipsorcery/orgs",
      "repos_url": "https://api.github.com/users/sipsorcery/repos",
      "events_url": "https://api.github.com/users/sipsorcery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipsorcery/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "sipsorcery",
      "id": 197660,
      "node_id": "MDQ6VXNlcjE5NzY2MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/197660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipsorcery",
      "html_url": "https://github.com/sipsorcery",
      "followers_url": "https://api.github.com/users/sipsorcery/followers",
      "following_url": "https://api.github.com/users/sipsorcery/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipsorcery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipsorcery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipsorcery/subscriptions",
      "organizations_url": "https://api.github.com/users/sipsorcery/orgs",
      "repos_url": "https://api.github.com/users/sipsorcery/repos",
      "events_url": "https://api.github.com/users/sipsorcery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipsorcery/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "19612ca2eb2e335c8ccc9c0f33421df22f1cc3b6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/19612ca2eb2e335c8ccc9c0f33421df22f1cc3b6",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/19612ca2eb2e335c8ccc9c0f33421df22f1cc3b6"
      }
    ],
    "stats": {
      "total": 7,
      "additions": 7,
      "deletions": 0
    },
    "files": [
      {
        "sha": "28b6aceb3cc6208857e73aedd54efa472a094867",
        "filename": "doc/build-windows.md",
        "status": "modified",
        "additions": 7,
        "deletions": 0,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/21a65756f558a2bd50e71c6dfb04143533e59f76/doc/build-windows.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/21a65756f558a2bd50e71c6dfb04143533e59f76/doc/build-windows.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/doc/build-windows.md?ref=21a65756f558a2bd50e71c6dfb04143533e59f76",
        "patch": "@@ -91,15 +91,22 @@ Note that for WSL the Bitcoin Core source path MUST be somewhere in the default\n example /usr/src/bitcoin, AND not under /mnt/d/. If this is not the case the dependency autoconf scripts will fail.\n This means you cannot use a directory that is located directly on the host Windows file system to perform the build.\n \n+Additional WSL Note: WSL support for [launching Win32 applications](https://docs.microsoft.com/en-us/archive/blogs/wsl/windows-and-ubuntu-interoperability#launching-win32-applications-from-within-wsl)\n+results in `Autoconf` configure scripts being able to execute Windows Portable Executable files. This can cause\n+unexpected behaviour during the build, such as Win32 error dialogs for missing libraries. The recommended approach\n+is to temporarily disable WSL support for Win32 applications.\n+\n Build using:\n \n     PATH=$(echo \"$PATH\" | sed -e 's/:\\/mnt.*//g') # strip out problematic Windows %PATH% imported var\n+    sudo bash -c \"echo 0 > /proc/sys/fs/binfmt_misc/status\" # Disable WSL support for Win32 applications.\n     cd depends\n     make HOST=x86_64-w64-mingw32\n     cd ..\n     ./autogen.sh # not required when building from tarball\n     CONFIG_SITE=$PWD/depends/x86_64-w64-mingw32/share/config.site ./configure --prefix=/\n     make\n+    sudo bash -c \"echo 1 > /proc/sys/fs/binfmt_misc/status\" # Enable WSL support for Win32 applications.\n \n ## Depends system\n "
      }
    ]
  }
]