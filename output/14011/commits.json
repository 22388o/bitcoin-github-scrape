[
  {
    "sha": "a3197c5294df4711bab0ff6dcdd061ceab115c7d",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzphMzE5N2M1Mjk0ZGY0NzExYmFiMGZmNmRjZGQwNjFjZWFiMTE1Yzdk",
    "commit": {
      "author": {
        "name": "Russell Yanofsky",
        "email": "russ@yanofsky.org",
        "date": "2018-08-20T19:24:55Z"
      },
      "committer": {
        "name": "Russell Yanofsky",
        "email": "russ@yanofsky.org",
        "date": "2018-08-20T19:24:55Z"
      },
      "message": "Disable wallet and address book Qt tests on macOS minimal platform\n\nmacOS Qt minimal platform is frequently broken, and these are currently failing\nwith Qt 5.11.1.\n\nThe tests do pass when run on the full cocoa platform\n(with `test_bitcoin-qt -platform cocoa`).",
      "tree": {
        "sha": "48671933685369a552bae6bc4bf3e0c8bdfd7a96",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/48671933685369a552bae6bc4bf3e0c8bdfd7a96"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a3197c5294df4711bab0ff6dcdd061ceab115c7d",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a3197c5294df4711bab0ff6dcdd061ceab115c7d",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/a3197c5294df4711bab0ff6dcdd061ceab115c7d",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a3197c5294df4711bab0ff6dcdd061ceab115c7d/comments",
    "author": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "2a583406c00761c0ac1d162531256b401d5b16c3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2a583406c00761c0ac1d162531256b401d5b16c3",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/2a583406c00761c0ac1d162531256b401d5b16c3"
      }
    ],
    "stats": {
      "total": 23,
      "additions": 23,
      "deletions": 0
    },
    "files": [
      {
        "sha": "35258460441f428803d52f795017694baf95800f",
        "filename": "src/qt/test/addressbooktests.cpp",
        "status": "modified",
        "additions": 12,
        "deletions": 0,
        "changes": 12,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a3197c5294df4711bab0ff6dcdd061ceab115c7d/src/qt/test/addressbooktests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a3197c5294df4711bab0ff6dcdd061ceab115c7d/src/qt/test/addressbooktests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/test/addressbooktests.cpp?ref=a3197c5294df4711bab0ff6dcdd061ceab115c7d",
        "patch": "@@ -17,6 +17,7 @@\n #include <key_io.h>\n #include <wallet/wallet.h>\n \n+#include <QApplication>\n #include <QTimer>\n #include <QMessageBox>\n \n@@ -139,5 +140,16 @@ void TestAddAddressesToSendBook()\n \n void AddressBookTests::addressBookTests()\n {\n+#ifdef Q_OS_MAC\n+    if (QApplication::platformName() == \"minimal\") {\n+        // Disable for mac on \"minimal\" platform to avoid crashes inside the Qt\n+        // framework when it tries to look up unimplemented cocoa functions,\n+        // and fails to handle returned nulls\n+        // (https://bugreports.qt.io/browse/QTBUG-49686).\n+        QWARN(\"Skipping AddressBookTests on mac build with 'minimal' platform set due to Qt bugs. To run AppTests, invoke \"\n+              \"with 'test_bitcoin-qt -platform cocoa' on mac, or else use a linux or windows build.\");\n+        return;\n+    }\n+#endif\n     TestAddAddressesToSendBook();\n }"
      },
      {
        "sha": "9598d64845c30f0e505b257a1310961d0afb8a1c",
        "filename": "src/qt/test/wallettests.cpp",
        "status": "modified",
        "additions": 11,
        "deletions": 0,
        "changes": 11,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a3197c5294df4711bab0ff6dcdd061ceab115c7d/src/qt/test/wallettests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a3197c5294df4711bab0ff6dcdd061ceab115c7d/src/qt/test/wallettests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/test/wallettests.cpp?ref=a3197c5294df4711bab0ff6dcdd061ceab115c7d",
        "patch": "@@ -243,5 +243,16 @@ void TestGUI()\n \n void WalletTests::walletTests()\n {\n+#ifdef Q_OS_MAC\n+    if (QApplication::platformName() == \"minimal\") {\n+        // Disable for mac on \"minimal\" platform to avoid crashes inside the Qt\n+        // framework when it tries to look up unimplemented cocoa functions,\n+        // and fails to handle returned nulls\n+        // (https://bugreports.qt.io/browse/QTBUG-49686).\n+        QWARN(\"Skipping WalletTests on mac build with 'minimal' platform set due to Qt bugs. To run AppTests, invoke \"\n+              \"with 'test_bitcoin-qt -platform cocoa' on mac, or else use a linux or windows build.\");\n+        return;\n+    }\n+#endif\n     TestGUI();\n }"
      }
    ]
  }
]