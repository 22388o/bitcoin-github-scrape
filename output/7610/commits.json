[
  {
    "sha": "a9028b5df6a412886b3d1ba2498be5afdd748b2b",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzphOTAyOGI1ZGY2YTQxMjg4NmIzZDFiYTI0OThiZTVhZmRkNzQ4YjJi",
    "commit": {
      "author": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2016-02-26T19:49:13Z"
      },
      "committer": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2016-02-26T19:49:53Z"
      },
      "message": "Fix memleak in TorController",
      "tree": {
        "sha": "b620d43cbbe19540b22c5a096dadf752523a52d4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b620d43cbbe19540b22c5a096dadf752523a52d4"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a9028b5df6a412886b3d1ba2498be5afdd748b2b",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "expired_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1\n\niQIcBAABAgAGBQJW0KxhAAoJECnUvLZBb1Ps1vsQAKw8BU8dWIc2s26W7qjeLfCq\nUjcbM0yCjTpAhCDPB2DcAoG5814VNjeIp+Jd226t896caJd3noSxlvsRYRa8MdzB\ncHxWCDjFEqsiUFxqG8/DfQzcuvg1TtabeXYLbZ1dEk2+pAKbNI3LPO5xOnNdvNnO\n3/4IVQJkuyvIAmFAz33rRL2feJ0xQFUnQYHNCo8VaVmDA3ddzEvgfl7359OmhhZp\n3+k63YIKX6Vz5dHjvUS8HBc1CeNsYUgBkZ3kdAHlv1zp7zRpL0wd+qXGkZ9ToRv1\n6yF6Z+/nOJBKJtQczaqM969jlfN0qe1zEkAlQcgjmdHBdGDdZ5rLERTr9QbUdOjt\nK8cUqjZEyKCOjw0QleDX3cyZoHZo2OfTdr3G7aN3ItHocnTXb2lxDBXQ1whI7tnw\ncBh5wMI4qE+OCFSizUYth6Ue5JH/+cM9pRPrTzx0G87htlOgTfICvXvU5S4lMsRn\nvQm2cLPLJUoVkYBGas0opmKoDLYkjVglTym1994wJOFh9mAeDbRKd7kcBJJfJbMC\n7G1Udi/gRLC7lqE1A+4plMDnBi3lCT21f5JMsXKpopLBmnc0MRfGVZuTZ7nIM36g\nZ5n6JgZBMlL9sS3FZ6ZNuwNRXV7Za+p3t71B+LV5GSh3LO/iz5oHVNSHKGdvhhQR\n098aQybIEvQVuJVPZrMY\n=IVew\n-----END PGP SIGNATURE-----",
        "payload": "tree b620d43cbbe19540b22c5a096dadf752523a52d4\nparent 317462123f8e41fd7dd967ab907e59ddffb19898\nauthor Jonas Schnelli <dev@jonasschnelli.ch> 1456516153 +0100\ncommitter Jonas Schnelli <dev@jonasschnelli.ch> 1456516193 +0100\n\nFix memleak in TorController\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a9028b5df6a412886b3d1ba2498be5afdd748b2b",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/a9028b5df6a412886b3d1ba2498be5afdd748b2b",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a9028b5df6a412886b3d1ba2498be5afdd748b2b/comments",
    "author": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "317462123f8e41fd7dd967ab907e59ddffb19898",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/317462123f8e41fd7dd967ab907e59ddffb19898",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/317462123f8e41fd7dd967ab907e59ddffb19898"
      }
    ],
    "stats": {
      "total": 8,
      "additions": 8,
      "deletions": 0
    },
    "files": [
      {
        "sha": "4f642d398782711da33ff772d95cba8015b35fff",
        "filename": "src/torcontrol.cpp",
        "status": "modified",
        "additions": 8,
        "deletions": 0,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a9028b5df6a412886b3d1ba2498be5afdd748b2b/src/torcontrol.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a9028b5df6a412886b3d1ba2498be5afdd748b2b/src/torcontrol.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/torcontrol.cpp?ref=a9028b5df6a412886b3d1ba2498be5afdd748b2b",
        "patch": "@@ -414,7 +414,10 @@ TorController::TorController(struct event_base* base, const std::string& target)\n TorController::~TorController()\n {\n     if (reconnect_ev)\n+    {\n         event_del(reconnect_ev);\n+        event_free(reconnect_ev); reconnect_ev = NULL;\n+    }\n     if (service.IsValid()) {\n         RemoveLocal(service);\n     }\n@@ -626,6 +629,11 @@ void TorController::disconnected_cb(TorControlConnection& conn)\n \n     // Single-shot timer for reconnect. Use exponential backoff.\n     struct timeval time = MillisToTimeval(int64_t(reconnect_timeout * 1000.0));\n+    if (reconnect_ev)\n+    {\n+        event_del(reconnect_ev);\n+        event_free(reconnect_ev); reconnect_ev = NULL;\n+    }\n     reconnect_ev = event_new(base, -1, 0, reconnect_cb, this);\n     event_add(reconnect_ev, &time);\n     reconnect_timeout *= RECONNECT_TIMEOUT_EXP;"
      }
    ]
  }
]