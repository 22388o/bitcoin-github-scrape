sdaftuar,2017-10-26T16:56:33Z,Closing in favor of #11560,https://github.com/bitcoin/bitcoin/pull/11534#issuecomment-339730761,339730761,
promag,2017-10-20T20:56:22Z,"Is this only meant for tests?\n\nOtherwise replace the following code with a call to this function?\nhttps://github.com/bitcoin/bitcoin/blob/ff92fbf24739a022eb677daab03c87c5e6971094/src/net.cpp#L1140-L1143",https://github.com/bitcoin/bitcoin/pull/11534#discussion_r146064942,146064942,src/net.cpp
sdaftuar,2017-10-21T09:27:41Z,Yeah this is only for the unit test; I'm hoping someone is able to suggest a better way of doing this than what I did here to get the test working.,https://github.com/bitcoin/bitcoin/pull/11534#discussion_r146101422,146101422,src/net.cpp
promag,2017-10-24T08:27:44Z,@sdaftuar see 6f6e7e0 for an alternative that doesn't change the *production* interface.,https://github.com/bitcoin/bitcoin/pull/11534#discussion_r146486372,146486372,src/net.cpp
theuni,2017-10-24T17:14:54Z,"I'm ok with leaving the hacks for now, though please make them private and a friend to the boost test functions.\n\nAfter we merge #11457 (and the follow-up for addrman: https://github.com/theuni/bitcoin/tree/move-addrdb), I believe we'll have enough broken out to create 2 CConnman instances and run them against each-other for these tests. At that point, we can remove the test hacks.",https://github.com/bitcoin/bitcoin/pull/11534#discussion_r146630355,146630355,src/net.cpp
theuni,2017-10-24T19:59:52Z,"I wonder if we might turn this logic around: rather than marking for disconnection, mark for protection from disconnection. For example, each time we get a new header that extends our tip, we could do:\n```\nconnman->ResetOutboundEvictionTimer(id, current_time + new_timeout);\n```\nThen when we need a connection slot, if any timer has expred, whichever has been expired the longest gets dropped",https://github.com/bitcoin/bitcoin/pull/11534#discussion_r146675367,146675367,src/net_processing.cpp
theuni,2017-10-24T20:03:17Z,Move these into PeerLogicValidation ?,https://github.com/bitcoin/bitcoin/pull/11534#discussion_r146676213,146676213,src/net_processing.cpp
sdaftuar,2017-10-26T14:32:03Z,"@promag Thanks for the patch, I'm going to include it in #11560",https://github.com/bitcoin/bitcoin/pull/11534#discussion_r147160358,147160358,src/net.cpp
