hebasto,2020-10-19 13:11:26,Concept ACK.,https://github.com/bitcoin/bitcoin/pull/20186#issuecomment-712146190,712146190,
DrahtBot,2020-10-19 13:11:46,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #20260 (wallet: Create named SQLite wallet files instead of wallet directories by achow101)\n* #20094 (wallet: Unify walle",https://github.com/bitcoin/bitcoin/pull/20186#issuecomment-712146360,712146360,
hebasto,2020-10-21 05:19:21,"Testing bc2b0d99a5f54b941f8c663385f42cb9da20b94b with the GUI.\n\nSteps:\n1. having two wallets: a bdb, and a sqlite\n2. in the GUI open the both wallets, and shutdown\n3. verifying that the both wallets are written into the `settings.json`\n4. rename/remove the sqlite wallet\n5. start `bitcoin-qt`, observing a nice warning (on master a new bdb wallet was created silently)\n6. in the GUI o",https://github.com/bitcoin/bitcoin/pull/20186#issuecomment-713309780,713309780,
jonasschnelli,2020-10-21 11:26:32,Concept ACK,https://github.com/bitcoin/bitcoin/pull/20186#issuecomment-713501054,713501054,
ryanofsky,2020-10-21 13:40:18,"Rebased e368d2bb3b4d1211f01e17dbe7e1f80528b77626 -> 01476a88a6095fd3af71cb9bf1eadef920a1197b ([`pr/nowa.3`](https://github.com/ryanofsky/bitcoin/commits/pr/nowa.3) -> [`pr/nowa.4`](https://github.com/ryanofsky/bitcoin/commits/pr/nowa.4), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/nowa.3-rebase..pr/nowa.4)) due to conflict with #19967",https://github.com/bitcoin/bitcoin/pull/20186#issuecomment-713583911,713583911,
achow101,2020-10-21 17:13:30,ACK 01476a88a6095fd3af71cb9bf1eadef920a1197b,https://github.com/bitcoin/bitcoin/pull/20186#issuecomment-713726076,713726076,
laanwj,2020-10-29 11:24:24,Concept ACK. I agree creating wallets is better left as an explicit operation.,https://github.com/bitcoin/bitcoin/pull/20186#issuecomment-718687102,718687102,
ryanofsky,2020-10-29 12:44:17,"ACK roundup\n\nmeshcollider utACK https://github.com/bitcoin/bitcoin/pull/20186#pullrequestreview-512233389\nhebasto ACK https://github.com/bitcoin/bitcoin/pull/20186#pullrequestreview-516615230\nachow101 ACK https://github.com/bitcoin/bitcoin/pull/20186#issuecomment-713726076\n\njonatack concept ACK https://github.com/bitcoin/bitcoin/pull/20186#pullrequestreview-513540739\njonasschnelli co",https://github.com/bitcoin/bitcoin/pull/20186#issuecomment-718728298,718728298,
MarcoFalke,2020-10-19 12:46:27,Seems unrelated to the changes here. Probably best to put into https://github.com/bitcoin-core/bitcoin-devwiki/wiki/0.21.0-Release-Notes-Draft,https://github.com/bitcoin/bitcoin/pull/20186#discussion_r507716803,507716803,doc/release-notes.md
MarcoFalke,2020-10-19 12:49:20,"nit:\n\n```suggestion\nwarnings instead of creating new wallets with generated keys and addresses like\n```",https://github.com/bitcoin/bitcoin/pull/20186#discussion_r507718806,507718806,doc/release-notes.md
MarcoFalke,2020-10-19 12:52:00,"```suggestion\n                chain.initWarning(strprintf(Untranslated(""Skipping -wallet path that doesn't exist. %s\n""), error_string)));\n```",https://github.com/bitcoin/bitcoin/pull/20186#discussion_r507720604,507720604,src/wallet/load.cpp
MarcoFalke,2020-10-19 12:55:56,"Could keep the assert as\n\n```\nassert len(self.wallet_names) <= len(self.nodes)",https://github.com/bitcoin/bitcoin/pull/20186#discussion_r507723131,507723131,test/functional/test_framework/test_framework.py
ryanofsky,2020-10-19 13:06:58,"re: https://github.com/bitcoin/bitcoin/pull/20186#discussion_r507718806\n\n> nit:\n\nUpdated",https://github.com/bitcoin/bitcoin/pull/20186#discussion_r507730096,507730096,doc/release-notes.md
ryanofsky,2020-10-19 13:07:07,"re: https://github.com/bitcoin/bitcoin/pull/20186#discussion_r507716803\n\n> Seems unrelated to the changes here. Probably best to put into [bitcoin-core/bitcoin-devwiki/wiki/0.21.0-Release-Notes-Draft](https://github.com/bitcoin-core/bitcoin-devwiki/wiki/0.21.0-Release-Notes-Draft)\n\nThanks. Moved to wiki",https://github.com/bitcoin/bitcoin/pull/20186#discussion_r507730184,507730184,doc/release-notes.md
ryanofsky,2020-10-19 13:07:19,"re: https://github.com/bitcoin/bitcoin/pull/20186#discussion_r507720604\n\n> \n\nIt would be nice if this worked, but it doesn't currently. We only overloaded tfm::format inutil/translation.h to substitute normal arguments into bilingual format strings, not bilingual arguments into bilingual format strings",https://github.com/bitcoin/bitcoin/pull/20186#discussion_r507730302,507730302,src/wallet/load.cpp
ryanofsky,2020-10-19 13:07:42,"re: https://github.com/bitcoin/bitcoin/pull/20186#discussion_r507723131\n\n> Could keep the assert as\n> \n> ```\n> assert len(self.wallet_names) <= len(self.nodes)\n> ```\n\nAdded back",https://github.com/bitcoin/bitcoin/pull/20186#discussion_r507730537,507730537,test/functional/test_framework/test_framework.py
hebasto,2020-10-21 05:24:29,"bc2b0d99a5f54b941f8c663385f42cb9da20b94b\n\nI've read and then re-read this sentence _""It will load existing wallets specified by `-wallet` options on the command line, wallets listed in `bitcoin.conf` or `settings.json` files, and a top-level unnamed ("""") wallet.""_\n\nIt sounds to me like an existing top-level unnamed ("""") wallet is loaded unconditionally. That is not the case, right?",https://github.com/bitcoin/bitcoin/pull/20186#discussion_r508997319,508997319,doc/release-notes.md
hebasto,2020-10-21 05:35:16,"bc2b0d99a5f54b941f8c663385f42cb9da20b94b\n\nThis is a user faced message. Why keep it untranslated?",https://github.com/bitcoin/bitcoin/pull/20186#discussion_r509000504,509000504,src/wallet/load.cpp
ryanofsky,2020-10-21 09:02:42,"> [bc2b0d9](https://github.com/bitcoin/bitcoin/commit/bc2b0d99a5f54b941f8c663385f42cb9da20b94b)\n> \n> I've read and then re-read this sentence _""It will load existing wallets specified by `-wallet` options on the command line, wallets listed in `bitcoin.conf` or `settings.json` files, and a top-level unnamed ("""") wallet.""_\n> \n> It sounds to me like an existing top-level unnamed ("""") wallet ",https://github.com/bitcoin/bitcoin/pull/20186#discussion_r509111931,509111931,doc/release-notes.md
ryanofsky,2020-10-21 09:10:55,"> This is a user faced message. Why keep it untranslated?\n\nIt's a technical message not going to be shown to a typical GUI user just loading and unloading wallets, instead of manually moving files inside wallet directories or creating a bitcoin.conf and writing a list of wallets. I think the message might also be short lived (https://github.com/bitcoin-core/gui/issues/95#issuecomment-694236940",https://github.com/bitcoin/bitcoin/pull/20186#discussion_r509117398,509117398,src/wallet/load.cpp
hebasto,2020-10-21 09:40:41,"Suggesting _""It will load existing wallets specified by `-wallet` options on the command line, wallets listed in `bitcoin.conf` or `settings.json` files.""_ but not having a strong opinion about that. Feel free to ignore this comment.",https://github.com/bitcoin/bitcoin/pull/20186#discussion_r509137521,509137521,doc/release-notes.md
hebasto,2020-10-21 09:46:00,"Wallets are just files, and such a warning could be caused by user's operations with wallets.\n\n>  I believe similar warnings like ones from UpdateWalletSetting are also untranslated.\n\nCorrect. I think the reason of that is an absence of the pr :)\nSure, no need to change here.",https://github.com/bitcoin/bitcoin/pull/20186#discussion_r509141029,509141029,src/wallet/load.cpp
ryanofsky,2020-10-21 09:55:50,"> Suggesting _""It will load existing wallets specified by `-wallet` options on the command line, wallets listed in `bitcoin.conf` or `settings.json` files.""_ but not having a strong opinion about that. Feel free to ignore this comment.\n\nThat text seems to match current text exactly, so the suggestion is to stop mentioning the top-level wallet? That seems ok because it's not essential informati",https://github.com/bitcoin/bitcoin/pull/20186#discussion_r509147405,509147405,doc/release-notes.md
ryanofsky,2020-10-21 10:03:17,"> Wallets are just files, and such a warning could be caused by user's operations with wallets.\n\nSure. If this warning turns out to occur by common file operations, my first preference would be to implement one of the other alternatives in https://github.com/bitcoin-core/gui/issues/95#issuecomment-694236940 so the warning stops occurring",https://github.com/bitcoin/bitcoin/pull/20186#discussion_r509151964,509151964,src/wallet/load.cpp
jonatack,2020-10-21 10:42:23,maybe s/new wallets/a new wallet/,https://github.com/bitcoin/bitcoin/pull/20186#discussion_r509175105,509175105,doc/release-notes.md
jonatack,2020-10-21 10:43:50,"maybe ""log a warning instead of creating a new wallet""",https://github.com/bitcoin/bitcoin/pull/20186#discussion_r509175881,509175881,doc/release-notes.md
jonatack,2020-10-21 10:44:40,"maybe s/But if specified wallets/However, if the specified wallets/ (missing ""the"" in any case)",https://github.com/bitcoin/bitcoin/pull/20186#discussion_r509176315,509176315,doc/release-notes.md
jonatack,2020-10-21 10:46:09,"- dangling bracket: `s/<walletdir>.)/<walletdir>./` (was originally present but may as well fix it)\n\n- maybe ""Path is to a directory containing wallet data and log files. If the path is not absolute, it is interpreted as relative to `<walletdir>`.""\n\n- mixed (inconsistent) verb tenses (present, then switches to future), consider s/this will also accept/this accepts/ and ""This only loads exi",https://github.com/bitcoin/bitcoin/pull/20186#discussion_r509177097,509177097,src/wallet/init.cpp
ryanofsky,2020-10-21 11:30:14,"re: https://github.com/bitcoin/bitcoin/pull/20186#discussion_r509175105\n\n> maybe s/new wallets/a new wallet/\n\nI don't think this is right. The previous release created wallets on startup, the new release doesn't create wallets on startup. Only the intermediate code between PRs made a special case for one wallet (the top level wallet)",https://github.com/bitcoin/bitcoin/pull/20186#discussion_r509201532,509201532,doc/release-notes.md
ryanofsky,2020-10-21 11:30:21,"re: https://github.com/bitcoin/bitcoin/pull/20186#discussion_r509147405\n\n> I don't this release note implies that it's not possible.\n\nAdded ""by default"" to avoid implying it always loads the wallet\n\nre: https://github.com/bitcoin/bitcoin/pull/20186#discussion_r509176315\n\n> maybe s/But if specified wallets/However, if the specified wallets/ (missing ""the"" in any case)\n\nSwitched ",https://github.com/bitcoin/bitcoin/pull/20186#discussion_r509201600,509201600,doc/release-notes.md
ryanofsky,2020-10-21 11:30:45,"re: https://github.com/bitcoin/bitcoin/pull/20186#discussion_r509175881\n\n> maybe ""log a warning instead of creating a new wallet""\n\nSeems more consistent to use plural everywhere: multiple wallets specified, multiple warnings, multiple wallets not created",https://github.com/bitcoin/bitcoin/pull/20186#discussion_r509201813,509201813,doc/release-notes.md
ryanofsky,2020-10-21 11:30:51,"re: https://github.com/bitcoin/bitcoin/pull/20186#discussion_r509177097\n\n> * dangling bracket: `s/<walletdir>.)/<walletdir>./` (was originally present but may as well fix it)\n> * maybe ""Path is to a directory containing wallet data and log files. If the path is not absolute, it is interpreted as relative to `<walletdir>`.""\n> * mixed (inconsistent) verb tenses (present, then switches to fut",https://github.com/bitcoin/bitcoin/pull/20186#discussion_r509201867,509201867,src/wallet/init.cpp
MarcoFalke,2020-10-21 12:46:18,needs rebase,https://github.com/bitcoin/bitcoin/pull/20186#discussion_r509247183,509247183,test/functional/wallet_backup.py
achow101,2020-10-26 21:02:19,"When possible, can we please avoid forcing legacy wallets? Not all of these newly created wallets need to be legacy.",https://github.com/bitcoin/bitcoin/pull/20186#discussion_r512266002,512266002,test/functional/wallet_multiwallet.py
ryanofsky,2020-10-26 21:31:51,"re: https://github.com/bitcoin/bitcoin/pull/20186#discussion_r512266002\n\n> When possible, can we please avoid forcing legacy wallets? Not all of these newly created wallets need to be legacy.\n\nObviously yes, but these wallets were legacy before this PR and they are legacy after this PR. This PR isn't trying to change wallet types, and I wasn't trying to make things more difficult for mysel",https://github.com/bitcoin/bitcoin/pull/20186#discussion_r512281392,512281392,test/functional/wallet_multiwallet.py
achow101,2020-10-26 21:57:56,"Hmm, then `wallet_multiwallet.py --descriptors` is currently very misleading as it doesn't actually test multiwallet descriptor wallets.",https://github.com/bitcoin/bitcoin/pull/20186#discussion_r512293907,512293907,test/functional/wallet_multiwallet.py
ryanofsky,2020-10-26 22:36:06,"re: https://github.com/bitcoin/bitcoin/pull/20186#discussion_r512293907\n\n> Hmm, then `wallet_multiwallet.py --descriptors` is currently very misleading as it doesn't actually test multiwallet descriptor wallets.\n\nI'm not seeing that. There are createwallet calls that don't set descriptors=False, including the one that creates the default wallet. I know I definitely made updates to this tes",https://github.com/bitcoin/bitcoin/pull/20186#discussion_r512310022,512310022,test/functional/wallet_multiwallet.py
MarcoFalke,2020-10-29 13:39:53,"```suggestion\ncreate` commands, or the `createwallet` RPC. (#15454, #20186)\n```",https://github.com/bitcoin/bitcoin/pull/20186#discussion_r514265254,514265254,doc/release-notes.md
MarcoFalke,2020-10-29 13:55:28,"```suggestion\ntop-level unnamed ("""") wallet if it exists. However, if specified wallets don't exist,\n```",https://github.com/bitcoin/bitcoin/pull/20186#discussion_r514276864,514276864,doc/release-notes.md
ryanofsky,2020-10-29 14:20:37,"re: https://github.com/bitcoin/bitcoin/pull/20186#discussion_r514265254\n\nThanks, added this to https://github.com/bitcoin-core/bitcoin-devwiki/wiki/0.21.0-Release-Notes-Draft",https://github.com/bitcoin/bitcoin/pull/20186#discussion_r514295671,514295671,doc/release-notes.md
ryanofsky,2020-10-29 14:34:17,"re: https://github.com/bitcoin/bitcoin/pull/20186#discussion_r514276864\n\nMy brain might just be poisoned from looking at this paragraph too many times, but ""if it exists"" seems like a suspicious condition to add. Like going to a bank teller and saying ""I am not robbing this bank today."" The paragraph starts off by saying new wallets won't be created, and if a wallet doesn't exist it can't be l",https://github.com/bitcoin/bitcoin/pull/20186#discussion_r514306469,514306469,doc/release-notes.md
