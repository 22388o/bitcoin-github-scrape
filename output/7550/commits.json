[
  {
    "sha": "92bcca37ab0c52789b13ebee1f4659e30f05e2b6",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo5MmJjY2EzN2FiMGM1Mjc4OWIxM2ViZWUxZjQ2NTllMzBmMDVlMmI2",
    "commit": {
      "author": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2016-02-17T14:03:38Z"
      },
      "committer": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2016-02-24T09:12:25Z"
      },
      "message": "rpc: Input-from-stdin mode for bitcoin-cli\n\nImplements #7442 by adding an option `-stdin` which reads\nadditional arguments from stdin, one per line.\n\nFor example\n\n```bash\necho -e \"mysecretcode\\n120\" | src/bitcoin-cli -stdin walletpassphrase\necho -e \"walletpassphrase\\nmysecretcode\\n120\" | src/bitcoin-cli -stdin\n```",
      "tree": {
        "sha": "6d8e536eed9c2cdac24c2a07f3cce083e364811e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6d8e536eed9c2cdac24c2a07f3cce083e364811e"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/92bcca37ab0c52789b13ebee1f4659e30f05e2b6",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/92bcca37ab0c52789b13ebee1f4659e30f05e2b6",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/92bcca37ab0c52789b13ebee1f4659e30f05e2b6",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/92bcca37ab0c52789b13ebee1f4659e30f05e2b6/comments",
    "author": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "8b70a64d62c6e64288762d062414cc979f880c54",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8b70a64d62c6e64288762d062414cc979f880c54",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/8b70a64d62c6e64288762d062414cc979f880c54"
      }
    ],
    "stats": {
      "total": 21,
      "additions": 12,
      "deletions": 9
    },
    "files": [
      {
        "sha": "49935699fd5d88ba1449910e2a13294e3fab52ab",
        "filename": "src/bitcoin-cli.cpp",
        "status": "modified",
        "additions": 12,
        "deletions": 9,
        "changes": 21,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/92bcca37ab0c52789b13ebee1f4659e30f05e2b6/src/bitcoin-cli.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/92bcca37ab0c52789b13ebee1f4659e30f05e2b6/src/bitcoin-cli.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/bitcoin-cli.cpp?ref=92bcca37ab0c52789b13ebee1f4659e30f05e2b6",
        "patch": "@@ -43,6 +43,7 @@ std::string HelpMessageCli()\n     strUsage += HelpMessageOpt(\"-rpcuser=<user>\", _(\"Username for JSON-RPC connections\"));\n     strUsage += HelpMessageOpt(\"-rpcpassword=<pw>\", _(\"Password for JSON-RPC connections\"));\n     strUsage += HelpMessageOpt(\"-rpcclienttimeout=<n>\", strprintf(_(\"Timeout during HTTP requests (default: %d)\"), DEFAULT_HTTP_CLIENT_TIMEOUT));\n+    strUsage += HelpMessageOpt(\"-stdin\", _(\"Read extra arguments from standard input, one per line until EOF/Ctrl-D (recommended for sensitive information such as passphrases)\"));\n \n     return strUsage;\n }\n@@ -232,15 +233,17 @@ int CommandLineRPC(int argc, char *argv[])\n             argc--;\n             argv++;\n         }\n-\n-        // Method\n-        if (argc < 2)\n-            throw runtime_error(\"too few parameters\");\n-        string strMethod = argv[1];\n-\n-        // Parameters default to strings\n-        std::vector<std::string> strParams(&argv[2], &argv[argc]);\n-        UniValue params = RPCConvertValues(strMethod, strParams);\n+        std::vector<std::string> args = std::vector<std::string>(&argv[1], &argv[argc]);\n+        if (GetBoolArg(\"-stdin\", false)) {\n+            // Read one arg per line from stdin and append\n+            std::string line;\n+            while (std::getline(std::cin,line))\n+                args.push_back(line);\n+        }\n+        if (args.size() < 1)\n+            throw runtime_error(\"too few parameters (need at least command)\");\n+        std::string strMethod = args[0];\n+        UniValue params = RPCConvertValues(strMethod, std::vector<std::string>(args.begin()+1, args.end()));\n \n         // Execute and handle connection failures with -rpcwait\n         const bool fWait = GetBoolArg(\"-rpcwait\", false);"
      }
    ]
  },
  {
    "sha": "f22f14c65bb9fba946e5039132a4c0b01b0c02ce",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmMjJmMTRjNjViYjlmYmE5NDZlNTAzOTEzMmE0YzBiMDFiMGMwMmNl",
    "commit": {
      "author": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2016-02-24T09:22:43Z"
      },
      "committer": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2016-02-24T09:22:43Z"
      },
      "message": "doc: mention bitcoin-cli -stdin in release notes",
      "tree": {
        "sha": "6055696111e8b1d91ed97eb0231c3db245b2f1c2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6055696111e8b1d91ed97eb0231c3db245b2f1c2"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f22f14c65bb9fba946e5039132a4c0b01b0c02ce",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f22f14c65bb9fba946e5039132a4c0b01b0c02ce",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/f22f14c65bb9fba946e5039132a4c0b01b0c02ce",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f22f14c65bb9fba946e5039132a4c0b01b0c02ce/comments",
    "author": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "92bcca37ab0c52789b13ebee1f4659e30f05e2b6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/92bcca37ab0c52789b13ebee1f4659e30f05e2b6",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/92bcca37ab0c52789b13ebee1f4659e30f05e2b6"
      }
    ],
    "stats": {
      "total": 13,
      "additions": 13,
      "deletions": 0
    },
    "files": [
      {
        "sha": "707f2357f8c06430187aa83ba29e32bc547c67bc",
        "filename": "doc/release-notes.md",
        "status": "modified",
        "additions": 13,
        "deletions": 0,
        "changes": 13,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/f22f14c65bb9fba946e5039132a4c0b01b0c02ce/doc/release-notes.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/f22f14c65bb9fba946e5039132a4c0b01b0c02ce/doc/release-notes.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/doc/release-notes.md?ref=f22f14c65bb9fba946e5039132a4c0b01b0c02ce",
        "patch": "@@ -8,6 +8,19 @@ Example item\n ----------------\n \n \n+bitcoin-cli: arguments privacy\n+--------------------------------\n+\n+The RPC command line client gained a new argument, `-stdin`\n+to read extra arguments from standard input, one per line until EOF/Ctrl-D.\n+For example:\n+\n+    $ echo -e \"mysecretcode\\n120\" | src/bitcoin-cli -stdin walletpassphrase\n+\n+It is recommended to use this for sensitive information such as wallet\n+passphrases, as command-line arguments can usually be read from the process\n+table by any user on the system.\n+\n 0.13.0 Change log\n =================\n "
      }
    ]
  }
]