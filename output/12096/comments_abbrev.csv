promag,2018-01-05T09:26:55Z,Missing test.,https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-355509666,355509666,
sipa,2018-01-05T12:30:56Z,"This decreases the output? In some cases that may desirable, but in general I think that's very unexpected (I would think it would add a new input instead).",https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-355544243,355544243,
kallewoof,2018-01-05T12:40:50Z,"If you don't have a change address chance are fairly high that you're simply moving coins (e.g. between wallets). Especially if you only have one utxo in, you may not want to associate other utxo's with it for privacy reasons.",https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-355545850,355545850,
wtogami,2018-01-05T12:49:03Z,"> _""single output transactions are special in that the exact amount doesn't usually matter (the user is emptying a wallet or using coin control to move UTXOs).""_\n\nI would argue that this is not stated strongly enough. If they previously paid to a single output then it is *almost always* true that they do not care about the particular amount. This is especially true as the previous amount was s",https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-355547260,355547260,
sipa,2018-01-05T12:51:35Z,"@kallewoof You're right that in *most* cases right now that you don't care about the amount if there is only one output, but there is certainly no guarantee. The coin selection algorithm even explicitly tries to find a solution without change first - it's just pretty terrible at its job current (#10637 will make it succeed much more often).\n  ",https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-355547735,355547735,
ryanofsky,2018-01-05T12:55:10Z,"I think this could be generalized and also be made safer by adding an `reduce_output` option to bumpfee (could also call it something like `output_number` or `txout`). This way you'd be able to bump single output transactions by specifying `reduce_output: 0`, but there'd be no risk of someone accidentally decreasing the amount they are trying to send by bumping the fee in other cases.\n  ",https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-355548327,355548327,
kallewoof,2018-01-05T12:55:19Z,"I don't think it makes sense to arbitrarily add inputs to bumpfee. I don't even know if RBF allows it (since you're suggesting it, I guess it does -- I thought I tried and failed).\n\nMaybe a `bump_from_output` flag in `options` that did this behavior.\n \nEdit: @ryanofsky That looks good to me.",https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-355548355,355548355,
sipa,2018-01-05T13:00:25Z,"I don't see why RBF wouldn't allow it, as long as all transactions you're replacing have been marked as replaceable.\n\nI like the idea of explicitly marking an output that can be reduced.\n\nOver time (especially after #10637), I think we'll inevitably need a way to bump transactions that don't have change. Depending on feerates and your wallet's UTXO set distribution, a large fraction of tra",https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-355549264,355549264,
instagibbs,2018-01-05T14:11:07Z,does the wallet track which outputs had subtractFeeFromOutput? In that case further reduction seems completely fine as well.,https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-355563425,355563425,
promag,2018-01-05T15:14:23Z,"Agree that there are cases where the output(s) can't be reduced. In the cases it can be reduced, should it be re-funded?\n  ",https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-355578491,355578491,
sdaftuar,2018-01-05T15:41:30Z,"> I don't think it makes sense to arbitrarily add inputs to bumpfee. I don't even know if RBF allows it (since you're suggesting it, I guess it does -- I thought I tried and failed).\n\n@kallewoof Currently our relay policy (and BIP 125) require that if you add a new input, it must be already confirmed -- perhaps you tested with an unconfirmed input?\n\n(The idea behind that requirement was to",https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-355585456,355585456,
jtimon,2018-01-08T20:38:19Z,"concept ack after the current coin selection stop trying 1 output (I assume  #10637 solves that?).\n",https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-356088910,356088910,
gmaxwell,2018-01-08T20:42:22Z,NAK.  The only time it would be acceptable to reduce the output is if the transaction was created as subtract fee from output.  Bumping should add additional inputs as required.,https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-356089931,356089931,
promag,2018-01-08T20:50:04Z,"@gmaxwell even with an option to allow the subtract, default to false (since there is no subtract from output record)?\n  ",https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-356092114,356092114,
gmaxwell,2018-01-08T21:00:21Z,"if it were behind a bunch of warnings, ... but even though if substract from wasn't initially selected should only be a last resort if it can't bump otherwise.  The wallet shouldn't quietly direct the user into behavior that might cause them to get criminally prosecuted.",https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-356094763,356094763,
gmaxwell,2018-01-09T03:53:42Z,"@wtogami  The wallet has explicit information about transactions created where the user requested subtracting fees from amounts. Using that information would be  fine but you cannot use the lack of a change output to detect this,  when 2^inputs * fees_saved_from_excluding_an_output  is large relative to the amount being paid an exact match frequently exists. And the PR pieter linked to will usuall",https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-356172731,356172731,
kallewoof,2018-01-09T04:04:03Z,"Summary:\n* Do not implicitly assume a single-output-no-change transaction can be altered due to better coin selection in the future.\n* Require the user to select the output if the user does not want additional inputs to be added to cover increased fees.\n* (Allow adding additional inputs to cover increased fees -- separate PR)\n\nFor this PR, that translates to:\n* Fail if no output is exp",https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-356173981,356173981,
kallewoof,2018-01-09T14:17:08Z,"- [x] Self-review: RPC command help needs update to reflect change\n",https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-356295827,356295827,
luke-jr,2018-02-26T17:35:14Z,"> The only time it would be acceptable to reduce the output is if the transaction was created as subtract fee from output.\n\n@gmaxwell What if you want to subtract-fee-from-output after the fact?",https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-368583330,368583330,
kallewoof,2018-02-27T04:46:03Z,@luke-jr Now throws on negative `reduce_output` in RPC code.,https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-368746102,368746102,
Sjors,2018-02-28T12:53:22Z,#12565 takes advantage of this in QT.,https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-369230273,369230273,
kallewoof,2018-03-01T03:19:45Z,@Sjors Thanks! I fixed the `wallet_bumpfee` error in 765162c.,https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-369461737,369461737,
DrahtBot,2018-07-22T23:50:51Z,"<!--5d09a71f8925f3f132321140b44b946d-->The last travis run for this pull request was 89 days ago and is thus outdated. To trigger a fresh travis build, this pull request should be closed and re-opened.",https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-406906795,406906795,
DrahtBot,2018-10-20T11:13:24Z,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#15778](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/15778.html) ([wallet] Move maxtxfee from node to wallet ",https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-431571223,431571223,
kallewoof,2018-11-12T07:25:11Z,@MeshCollider Thanks for the review! I updated commit description and added comment to `qt/walletmodel.cpp`.,https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-437781855,437781855,
DrahtBot,2019-04-27T13:37:01Z,<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase,https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-487286797,487286797,
kallewoof,2019-06-19T08:18:00Z,Rebase is becoming overwhelming on this. Closing until further notice (may rewrite the code).,https://github.com/bitcoin/bitcoin/pull/12096#issuecomment-503457915,503457915,
promag,2018-01-05T15:11:03Z,Check new output is less than 0.00099?,https://github.com/bitcoin/bitcoin/pull/12096#discussion_r159898177,159898177,test/functional/bumpfee.py
kallewoof,2018-01-09T04:13:45Z,"Thanks, good point - fixing.",https://github.com/bitcoin/bitcoin/pull/12096#discussion_r160315813,160315813,test/functional/bumpfee.py
MarcoFalke,2018-01-13T18:00:36Z,This error will also display in the gui. Not sure if it makes sense there to mention reduce_output,https://github.com/bitcoin/bitcoin/pull/12096#discussion_r161377915,161377915,src/wallet/feebumper.cpp
MarcoFalke,2018-01-13T18:43:57Z,This will segfault on OOB,https://github.com/bitcoin/bitcoin/pull/12096#discussion_r161378876,161378876,src/wallet/rpcwallet.cpp
kallewoof,2018-01-13T21:34:51Z,Oh. Hm..,https://github.com/bitcoin/bitcoin/pull/12096#discussion_r161382085,161382085,src/wallet/feebumper.cpp
kallewoof,2018-01-13T21:59:55Z,Oops. Added bounds check in `feebumper::CreateTransaction`.,https://github.com/bitcoin/bitcoin/pull/12096#discussion_r161382531,161382531,src/wallet/rpcwallet.cpp
promag,2018-01-18T17:38:38Z,Where?,https://github.com/bitcoin/bitcoin/pull/12096#discussion_r162416337,162416337,src/wallet/rpcwallet.cpp
promag,2018-01-18T17:47:22Z,"Also add `assert_raises_rpc_error` tests for:\n - when not a number;\n - when reduce_output < 0 and >= len(vout).\n\nFor instance, see 7f67dd0aa.",https://github.com/bitcoin/bitcoin/pull/12096#discussion_r162418688,162418688,src/wallet/rpcwallet.cpp
promag,2018-01-18T17:50:27Z,Place `reduce_output` after `total_fee`? Those after `total_fee` are *output* values.,https://github.com/bitcoin/bitcoin/pull/12096#discussion_r162419493,162419493,src/wallet/feebumper.cpp
promag,2018-01-18T17:51:05Z,`` `reduce_output` ``,https://github.com/bitcoin/bitcoin/pull/12096#discussion_r162419665,162419665,src/wallet/rpcwallet.cpp
kallewoof,2018-01-18T23:20:18Z,"No idea how that happened, but my changes are gone. Fixing, again.",https://github.com/bitcoin/bitcoin/pull/12096#discussion_r162499062,162499062,src/wallet/rpcwallet.cpp
sipa,2018-02-20T02:42:51Z,It also sounds confusing when there isn't a single output?,https://github.com/bitcoin/bitcoin/pull/12096#discussion_r169206471,169206471,src/wallet/feebumper.cpp
kallewoof,2018-02-20T03:28:31Z,I'll just revert it.,https://github.com/bitcoin/bitcoin/pull/12096#discussion_r169210796,169210796,src/wallet/feebumper.cpp
luke-jr,2018-02-26T17:32:02Z,"Needs a lower bounds check here too, to avoid accepting -1.",https://github.com/bitcoin/bitcoin/pull/12096#discussion_r170672617,170672617,src/wallet/rpcwallet.cpp
luke-jr,2018-02-26T17:32:19Z,-1 shouldn't be exposed to the user IMO (especially since the internal interfaces will probably change when we add support for additional inputs).,https://github.com/bitcoin/bitcoin/pull/12096#discussion_r170672694,170672694,src/wallet/feebumper.cpp
kallewoof,2018-02-27T04:44:12Z,The default is `-1` to mean `auto-select`. How would you propose that is expressed otherwise? As an additional `bool explicit_reduce_output` feels messy.,https://github.com/bitcoin/bitcoin/pull/12096#discussion_r170814148,170814148,src/wallet/feebumper.cpp
Sjors,2018-02-28T10:19:13Z,"`rpcwallet.cpp` already checks this, so just put an assert here?",https://github.com/bitcoin/bitcoin/pull/12096#discussion_r171198211,171198211,src/wallet/feebumper.cpp
Sjors,2018-02-28T10:23:14Z, Can you define a constant like `ONLY_REDUCE_CHANGE_OUTPUT=-1`?,https://github.com/bitcoin/bitcoin/pull/12096#discussion_r171199195,171199195,src/wallet/feebumper.cpp
Sjors,2018-02-28T10:27:49Z,Why is this an error? Why not just pick the largest (or both)?,https://github.com/bitcoin/bitcoin/pull/12096#discussion_r171200319,171200319,src/wallet/feebumper.cpp
Sjors,2018-02-28T11:05:38Z,`reduce_output` or `reduceOutput`?,https://github.com/bitcoin/bitcoin/pull/12096#discussion_r171210422,171210422,src/wallet/rpcwallet.cpp
kallewoof,2018-03-01T02:58:48Z,"This is beyond the scope of this PR (pre-existing behavior, and my code doesn't really fix it). You can do `?w=1`, e.g. https://github.com/bitcoin/bitcoin/pull/12096/files?w=1 which ignores whitespace-only changes.",https://github.com/bitcoin/bitcoin/pull/12096#discussion_r171452087,171452087,src/wallet/feebumper.cpp
kallewoof,2018-03-01T02:59:40Z,"I think the standard these days is to use snake case, even for new RPC commands. See e.g. `address_style` in `getrawtransaction` which was from a recent implementation.",https://github.com/bitcoin/bitcoin/pull/12096#discussion_r171452183,171452183,src/wallet/rpcwallet.cpp
Sjors,2018-03-01T08:40:43Z,"Ah, I didn't notice it was just a whitespace change.",https://github.com/bitcoin/bitcoin/pull/12096#discussion_r171491290,171491290,src/wallet/feebumper.cpp
luke-jr,2018-03-10T19:05:32Z,@kallewoof Just change the error message (and prevent -1 from being passed in from the user),https://github.com/bitcoin/bitcoin/pull/12096#discussion_r173631574,173631574,src/wallet/feebumper.cpp
kallewoof,2018-03-12T01:38:26Z,"@luke-jr I can't distinguish from user passing -1 and from the default (which means 'auto-pick' like the current behavior). I can change the message to say `0..`, though. And it already prevents user from passing -1 in the RPC command itself.",https://github.com/bitcoin/bitcoin/pull/12096#discussion_r173680193,173680193,src/wallet/feebumper.cpp
meshcollider,2018-11-11T11:35:43Z,Maybe add a `/* reduce_output */` comment for this new param too,https://github.com/bitcoin/bitcoin/pull/12096#discussion_r232484267,232484267,src/qt/walletmodel.cpp
kallewoof,2018-11-12T07:23:39Z,Done,https://github.com/bitcoin/bitcoin/pull/12096#discussion_r232553473,232553473,src/qt/walletmodel.cpp
luke-jr,2019-04-16T18:57:00Z,Nit: Extra space on the end,https://github.com/bitcoin/bitcoin/pull/12096#discussion_r275945738,275945738,src/wallet/feebumper.cpp
luke-jr,2019-04-16T18:58:58Z,`CreateTotalBumpTransaction` returns an error if `reduce_output` is out of range. This code just ignores it. Probably should be consistent.,https://github.com/bitcoin/bitcoin/pull/12096#discussion_r275946471,275946471,src/wallet/feebumper.cpp
luke-jr,2019-04-16T18:59:34Z,Couldn't this result in the `reduce_output` getting *increased*? That could be a serious problem in some cases...,https://github.com/bitcoin/bitcoin/pull/12096#discussion_r275946696,275946696,src/wallet/feebumper.cpp
instagibbs,2019-04-16T19:17:20Z,"""change"" is really over-loaded here, please call it something else",https://github.com/bitcoin/bitcoin/pull/12096#discussion_r275952901,275952901,src/wallet/feebumper.cpp
kallewoof,2019-04-24T03:53:47Z,"@luke-jr Agreed - now consistent.\n\n@instagibbs Renamed to `reduce_output_vout`.",https://github.com/bitcoin/bitcoin/pull/12096#discussion_r277947125,277947125,src/wallet/feebumper.cpp
kallewoof,2019-04-24T03:54:15Z,I'm not sure I follow. In which case would `reduce_output` increase?,https://github.com/bitcoin/bitcoin/pull/12096#discussion_r277947177,277947177,src/wallet/feebumper.cpp
