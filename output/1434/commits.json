[
  {
    "sha": "e0873dafc57980caffd1cdff597b4317d9cdcea6",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzplMDg3M2RhZmM1Nzk4MGNhZmZkMWNkZmY1OTdiNDMxN2Q5Y2RjZWE2",
    "commit": {
      "author": {
        "name": "Philip Kaufmann",
        "email": "phil.kaufmann@t-online.de",
        "date": "2012-06-09T13:41:21Z"
      },
      "committer": {
        "name": "Philip Kaufmann",
        "email": "phil.kaufmann@t-online.de",
        "date": "2012-06-17T13:20:42Z"
      },
      "message": "add the slot updateDisplayUnit() to overviewpage, sendcoinsdialog, sendcoinsentry and connect it to displayUnitChanged() - this ensures all fields in the GUI, who use a display unit are imediately updated, when the user changes this setting in the optionsdialog / ensure used fields init with the current set display unit",
      "tree": {
        "sha": "6e1e779a8a3fe54a8bd4a5eef2ba02c873d8f308",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6e1e779a8a3fe54a8bd4a5eef2ba02c873d8f308"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e0873dafc57980caffd1cdff597b4317d9cdcea6",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e0873dafc57980caffd1cdff597b4317d9cdcea6",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/e0873dafc57980caffd1cdff597b4317d9cdcea6",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e0873dafc57980caffd1cdff597b4317d9cdcea6/comments",
    "author": null,
    "committer": null,
    "parents": [
      {
        "sha": "fab7858a350d4650686b3aa07bd6277ce7c9685f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fab7858a350d4650686b3aa07bd6277ce7c9685f",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/fab7858a350d4650686b3aa07bd6277ce7c9685f"
      }
    ],
    "stats": {
      "total": 63,
      "additions": 45,
      "deletions": 18
    },
    "files": [
      {
        "sha": "07be9c520a676f54d4a3018e0f9cc08fea4603e0",
        "filename": "src/qt/overviewpage.cpp",
        "status": "modified",
        "additions": 15,
        "deletions": 9,
        "changes": 24,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e0873dafc57980caffd1cdff597b4317d9cdcea6/src/qt/overviewpage.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e0873dafc57980caffd1cdff597b4317d9cdcea6/src/qt/overviewpage.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/overviewpage.cpp?ref=e0873dafc57980caffd1cdff597b4317d9cdcea6",
        "patch": "@@ -152,7 +152,7 @@ void OverviewPage::setNumTransactions(int count)\n void OverviewPage::setModel(WalletModel *model)\n {\n     this->model = model;\n-    if(model)\n+    if(model && model->getOptionsModel())\n     {\n         // Set up transaction list\n         filter = new TransactionFilterProxy();\n@@ -172,19 +172,25 @@ void OverviewPage::setModel(WalletModel *model)\n         setNumTransactions(model->getNumTransactions());\n         connect(model, SIGNAL(numTransactionsChanged(int)), this, SLOT(setNumTransactions(int)));\n \n-        connect(model->getOptionsModel(), SIGNAL(displayUnitChanged(int)), this, SLOT(displayUnitChanged()));\n+        connect(model->getOptionsModel(), SIGNAL(displayUnitChanged(int)), this, SLOT(updateDisplayUnit()));\n     }\n+\n+    // update the display unit, to not use the default (\"BTC\")\n+    updateDisplayUnit();\n }\n \n-void OverviewPage::displayUnitChanged()\n+void OverviewPage::updateDisplayUnit()\n {\n-    if(!model || !model->getOptionsModel())\n-        return;\n-    if(currentBalance != -1)\n-        setBalance(currentBalance, currentUnconfirmedBalance, currentImmatureBalance);\n+    if(model && model->getOptionsModel())\n+    {\n+        if(currentBalance != -1)\n+            setBalance(currentBalance, currentUnconfirmedBalance, currentImmatureBalance);\n \n-    txdelegate->unit = model->getOptionsModel()->getDisplayUnit();\n-    ui->listTransactions->update();\n+        // Update txdelegate->unit with the current unit\n+        txdelegate->unit = model->getOptionsModel()->getDisplayUnit();\n+\n+        ui->listTransactions->update();\n+    }\n }\n \n void OverviewPage::showOutOfSyncWarning(bool fShow)"
      },
      {
        "sha": "00048cc8f8f8e857076a117873f00e916aa79fbe",
        "filename": "src/qt/overviewpage.h",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e0873dafc57980caffd1cdff597b4317d9cdcea6/src/qt/overviewpage.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e0873dafc57980caffd1cdff597b4317d9cdcea6/src/qt/overviewpage.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/overviewpage.h?ref=e0873dafc57980caffd1cdff597b4317d9cdcea6",
        "patch": "@@ -44,7 +44,7 @@ public slots:\n     TransactionFilterProxy *filter;\n \n private slots:\n-    void displayUnitChanged();\n+    void updateDisplayUnit();\n     void handleTransactionClicked(const QModelIndex &index);\n };\n "
      },
      {
        "sha": "86c2b01fec3dadce5dfd0485eedbbbb9e6e1a931",
        "filename": "src/qt/sendcoinsdialog.cpp",
        "status": "modified",
        "additions": 13,
        "deletions": 3,
        "changes": 16,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e0873dafc57980caffd1cdff597b4317d9cdcea6/src/qt/sendcoinsdialog.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e0873dafc57980caffd1cdff597b4317d9cdcea6/src/qt/sendcoinsdialog.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/sendcoinsdialog.cpp?ref=e0873dafc57980caffd1cdff597b4317d9cdcea6",
        "patch": "@@ -46,10 +46,11 @@ void SendCoinsDialog::setModel(WalletModel *model)\n             entry->setModel(model);\n         }\n     }\n-    if(model)\n+    if(model && model->getOptionsModel())\n     {\n         setBalance(model->getBalance(), model->getUnconfirmedBalance(), model->getImmatureBalance());\n         connect(model, SIGNAL(balanceChanged(qint64, qint64, qint64)), this, SLOT(setBalance(qint64, qint64, qint64)));\n+        connect(model->getOptionsModel(), SIGNAL(displayUnitChanged(int)), this, SLOT(updateDisplayUnit()));\n     }\n }\n \n@@ -202,7 +203,7 @@ SendCoinsEntry *SendCoinsDialog::addEntry()\n     ui->scrollAreaWidgetContents->resize(ui->scrollAreaWidgetContents->sizeHint());\n     QCoreApplication::instance()->processEvents();\n     QScrollBar* bar = ui->scrollArea->verticalScrollBar();\n-    if (bar)\n+    if(bar)\n         bar->setSliderPosition(bar->maximum());\n     return entry;\n }\n@@ -245,7 +246,7 @@ QWidget *SendCoinsDialog::setupTabChain(QWidget *prev)\n \n void SendCoinsDialog::pasteEntry(const SendCoinsRecipient &rv)\n {\n-    if (!fNewRecipientAllowed)\n+    if(!fNewRecipientAllowed)\n         return;\n \n     SendCoinsEntry *entry = 0;\n@@ -289,3 +290,12 @@ void SendCoinsDialog::setBalance(qint64 balance, qint64 unconfirmedBalance, qint\n     int unit = model->getOptionsModel()->getDisplayUnit();\n     ui->labelBalance->setText(BitcoinUnits::formatWithUnit(unit, balance));\n }\n+\n+void SendCoinsDialog::updateDisplayUnit()\n+{\n+    if(model && model->getOptionsModel())\n+    {\n+        // Update labelBalance with the current balance and the current unit\n+        ui->labelBalance->setText(BitcoinUnits::formatWithUnit(model->getOptionsModel()->getDisplayUnit(), model->getBalance()));\n+    }\n+}"
      },
      {
        "sha": "def2f83c302b192a55698d17fd348c83798ef45f",
        "filename": "src/qt/sendcoinsdialog.h",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e0873dafc57980caffd1cdff597b4317d9cdcea6/src/qt/sendcoinsdialog.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e0873dafc57980caffd1cdff597b4317d9cdcea6/src/qt/sendcoinsdialog.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/sendcoinsdialog.h?ref=e0873dafc57980caffd1cdff597b4317d9cdcea6",
        "patch": "@@ -47,8 +47,8 @@ public slots:\n \n private slots:\n     void on_sendButton_clicked();\n-\n     void removeEntry(SendCoinsEntry* entry);\n+    void updateDisplayUnit();\n };\n \n #endif // SENDCOINSDIALOG_H"
      },
      {
        "sha": "71891e79cad6de0457ea0be39b1abdcb7eecbfd0",
        "filename": "src/qt/sendcoinsentry.cpp",
        "status": "modified",
        "additions": 14,
        "deletions": 4,
        "changes": 18,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e0873dafc57980caffd1cdff597b4317d9cdcea6/src/qt/sendcoinsentry.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e0873dafc57980caffd1cdff597b4317d9cdcea6/src/qt/sendcoinsentry.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/sendcoinsentry.cpp?ref=e0873dafc57980caffd1cdff597b4317d9cdcea6",
        "patch": "@@ -68,6 +68,10 @@ void SendCoinsEntry::on_payTo_textChanged(const QString &address)\n void SendCoinsEntry::setModel(WalletModel *model)\n {\n     this->model = model;\n+\n+    if(model && model->getOptionsModel())\n+        connect(model->getOptionsModel(), SIGNAL(displayUnitChanged(int)), this, SLOT(updateDisplayUnit()));\n+\n     clear();\n }\n \n@@ -82,10 +86,8 @@ void SendCoinsEntry::clear()\n     ui->addAsLabel->clear();\n     ui->payAmount->clear();\n     ui->payTo->setFocus();\n-    if(model && model->getOptionsModel())\n-    {\n-        ui->payAmount->setDisplayUnit(model->getOptionsModel()->getDisplayUnit());\n-    }\n+    // update the display unit, to not use the default (\"BTC\")\n+    updateDisplayUnit();\n }\n \n void SendCoinsEntry::on_deleteButton_clicked()\n@@ -160,3 +162,11 @@ void SendCoinsEntry::setFocus()\n     ui->payTo->setFocus();\n }\n \n+void SendCoinsEntry::updateDisplayUnit()\n+{\n+    if(model && model->getOptionsModel())\n+    {\n+        // Update payAmount with the current unit\n+        ui->payAmount->setDisplayUnit(model->getOptionsModel()->getDisplayUnit());\n+    }\n+}"
      },
      {
        "sha": "db6cba0d80c8080944f1f080fb68c122be104591",
        "filename": "src/qt/sendcoinsentry.h",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e0873dafc57980caffd1cdff597b4317d9cdcea6/src/qt/sendcoinsentry.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e0873dafc57980caffd1cdff597b4317d9cdcea6/src/qt/sendcoinsentry.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/sendcoinsentry.h?ref=e0873dafc57980caffd1cdff597b4317d9cdcea6",
        "patch": "@@ -45,6 +45,7 @@ private slots:\n     void on_payTo_textChanged(const QString &address);\n     void on_addressBookButton_clicked();\n     void on_pasteButton_clicked();\n+    void updateDisplayUnit();\n \n private:\n     Ui::SendCoinsEntry *ui;"
      }
    ]
  }
]