[
  {
    "sha": "0849eabfd6b4478359e3af440cdc7a99b1563df9",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowODQ5ZWFiZmQ2YjQ0NzgzNTllM2FmNDQwY2RjN2E5OWIxNTYzZGY5",
    "commit": {
      "author": {
        "name": "Emil Engler",
        "email": "me@emilengler.com",
        "date": "2019-09-08T13:59:35Z"
      },
      "committer": {
        "name": "Emil Engler",
        "email": "me@emilengler.com",
        "date": "2019-09-08T14:12:18Z"
      },
      "message": "Add envvar system",
      "tree": {
        "sha": "ef0ddccdc6e404ea9715fd1447cad15a05af92ed",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ef0ddccdc6e404ea9715fd1447cad15a05af92ed"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0849eabfd6b4478359e3af440cdc7a99b1563df9",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0849eabfd6b4478359e3af440cdc7a99b1563df9",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/0849eabfd6b4478359e3af440cdc7a99b1563df9",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0849eabfd6b4478359e3af440cdc7a99b1563df9/comments",
    "author": {
      "login": "emilengler",
      "id": 12272949,
      "node_id": "MDQ6VXNlcjEyMjcyOTQ5",
      "avatar_url": "https://avatars.githubusercontent.com/u/12272949?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/emilengler",
      "html_url": "https://github.com/emilengler",
      "followers_url": "https://api.github.com/users/emilengler/followers",
      "following_url": "https://api.github.com/users/emilengler/following{/other_user}",
      "gists_url": "https://api.github.com/users/emilengler/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/emilengler/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/emilengler/subscriptions",
      "organizations_url": "https://api.github.com/users/emilengler/orgs",
      "repos_url": "https://api.github.com/users/emilengler/repos",
      "events_url": "https://api.github.com/users/emilengler/events{/privacy}",
      "received_events_url": "https://api.github.com/users/emilengler/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "emilengler",
      "id": 12272949,
      "node_id": "MDQ6VXNlcjEyMjcyOTQ5",
      "avatar_url": "https://avatars.githubusercontent.com/u/12272949?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/emilengler",
      "html_url": "https://github.com/emilengler",
      "followers_url": "https://api.github.com/users/emilengler/followers",
      "following_url": "https://api.github.com/users/emilengler/following{/other_user}",
      "gists_url": "https://api.github.com/users/emilengler/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/emilengler/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/emilengler/subscriptions",
      "organizations_url": "https://api.github.com/users/emilengler/orgs",
      "repos_url": "https://api.github.com/users/emilengler/repos",
      "events_url": "https://api.github.com/users/emilengler/events{/privacy}",
      "received_events_url": "https://api.github.com/users/emilengler/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "ae3e3bd151f43dfa9e08bf592aafc6066bad258d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ae3e3bd151f43dfa9e08bf592aafc6066bad258d",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/ae3e3bd151f43dfa9e08bf592aafc6066bad258d"
      }
    ],
    "stats": {
      "total": 59,
      "additions": 59,
      "deletions": 0
    },
    "files": [
      {
        "sha": "ebe295b3a22e856a30f528feff39d8b50229f5e5",
        "filename": "src/bitcoind.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0849eabfd6b4478359e3af440cdc7a99b1563df9/src/bitcoind.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0849eabfd6b4478359e3af440cdc7a99b1563df9/src/bitcoind.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/bitcoind.cpp?ref=0849eabfd6b4478359e3af440cdc7a99b1563df9",
        "patch": "@@ -75,6 +75,8 @@ static bool AppInit(int argc, char* argv[])\n         return InitError(strprintf(\"Error parsing command line arguments: %s\\n\", error));\n     }\n \n+    InstallEnvVars(gArgs);\n+\n     // Process help and version before taking care about datadir\n     if (HelpRequested(gArgs) || gArgs.IsArgSet(\"-version\")) {\n         std::string strUsage = PACKAGE_NAME \" Daemon version \" + FormatFullVersion() + \"\\n\";"
      },
      {
        "sha": "d460a3310322f3325f76596bec1d59edbe75c4cb",
        "filename": "src/init.cpp",
        "status": "modified",
        "additions": 27,
        "deletions": 0,
        "changes": 27,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0849eabfd6b4478359e3af440cdc7a99b1563df9/src/init.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0849eabfd6b4478359e3af440cdc7a99b1563df9/src/init.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/init.cpp?ref=0849eabfd6b4478359e3af440cdc7a99b1563df9",
        "patch": "@@ -57,6 +57,7 @@\n \n #include <stdint.h>\n #include <stdio.h>\n+#include <stdlib.h>\n \n #ifndef WIN32\n #include <attributes.h>\n@@ -550,6 +551,32 @@ void SetupServerArgs()\n     gArgs.AddHiddenArgs(hidden_args);\n }\n \n+void InstallEnvVars(ArgsManager &am)\n+{\n+    // Set args based on their environment variable\n+    std::vector<std::string> args = am.GetAddedArgs();\n+    for (long unsigned int i = 0; i < args.size(); ++i)\n+    {\n+        std::string element;\n+        for(auto &c: args[i]) {\n+            element += toupper(c);\n+        }\n+        // Schema = BITCOIND_<ARG>\n+        std::string envname = \"BITCOIND_\" + element.substr(1, element.size()); \n+        const char *envvar = getenv(envname.c_str());\n+        // Check if envvar is set\n+        if (envvar != NULL)\n+        {\n+            if (gArgs.IsArgSet(args[i]))\n+                LogPrintf(\"Envvar %s is set but is not being used\\n\", envname);\n+            else\n+                LogPrintf(\"Envvar %s is set and used\\n\", envname);\n+            \n+            am.SoftSetArg(args[i], std::string(envvar));\n+        }\n+    }\n+}\n+\n std::string LicenseInfo()\n {\n     const std::string URL_SOURCE_CODE = \"<https://github.com/bitcoin/bitcoin>\";"
      },
      {
        "sha": "168bab875857a8958de0fb5534f30d53a8f84d29",
        "filename": "src/init.h",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0849eabfd6b4478359e3af440cdc7a99b1563df9/src/init.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0849eabfd6b4478359e3af440cdc7a99b1563df9/src/init.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/init.h?ref=0849eabfd6b4478359e3af440cdc7a99b1563df9",
        "patch": "@@ -70,6 +70,8 @@ bool AppInitMain(InitInterfaces& interfaces);\n  */\n void SetupServerArgs();\n \n+void InstallEnvVars(ArgsManager &am);\n+\n /** Returns licensing information (for -version) */\n std::string LicenseInfo();\n "
      },
      {
        "sha": "6c59ff861d005c2bbd701090398dd5bb2ca77bbb",
        "filename": "src/interfaces/node.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0849eabfd6b4478359e3af440cdc7a99b1563df9/src/interfaces/node.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0849eabfd6b4478359e3af440cdc7a99b1563df9/src/interfaces/node.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/interfaces/node.cpp?ref=0849eabfd6b4478359e3af440cdc7a99b1563df9",
        "patch": "@@ -93,6 +93,7 @@ class NodeImpl : public Node\n         }\n     }\n     void setupServerArgs() override { return SetupServerArgs(); }\n+    void installEnvvars(ArgsManager &am) { return InstallEnvVars(am); }\n     bool getProxy(Network net, proxyType& proxy_info) override { return GetProxy(net, proxy_info); }\n     size_t getNodeCount(CConnman::NumConnections flags) override\n     {"
      },
      {
        "sha": "c36df646c66d904da0d3fbc138f5bd7c3525f890",
        "filename": "src/interfaces/node.h",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0849eabfd6b4478359e3af440cdc7a99b1563df9/src/interfaces/node.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0849eabfd6b4478359e3af440cdc7a99b1563df9/src/interfaces/node.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/interfaces/node.h?ref=0849eabfd6b4478359e3af440cdc7a99b1563df9",
        "patch": "@@ -95,6 +95,9 @@ class Node\n     //! Setup arguments\n     virtual void setupServerArgs() = 0;\n \n+    //! Install Envvars\n+    virtual void installEnvvars(ArgsManager &am) = 0;\n+\n     //! Map port.\n     virtual void mapPort(bool use_upnp) = 0;\n "
      },
      {
        "sha": "98423e892f11a6ef5d032bcb15d3d956be3d1388",
        "filename": "src/qt/bitcoin.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0849eabfd6b4478359e3af440cdc7a99b1563df9/src/qt/bitcoin.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0849eabfd6b4478359e3af440cdc7a99b1563df9/src/qt/bitcoin.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoin.cpp?ref=0849eabfd6b4478359e3af440cdc7a99b1563df9",
        "patch": "@@ -461,6 +461,8 @@ int GuiMain(int argc, char* argv[])\n             QString::fromStdString(\"Error parsing command line arguments: %1.\").arg(QString::fromStdString(error)));\n         return EXIT_FAILURE;\n     }\n+    // Setup env vars\n+    node->installEnvvars(gArgs);\n \n     // Now that the QApplication is setup and we have parsed our parameters, we can set the platform style\n     app.setupPlatformStyle();"
      },
      {
        "sha": "1dc125993d11a7eb68bd6f29f47eb0411a4093c3",
        "filename": "src/util/system.cpp",
        "status": "modified",
        "additions": 15,
        "deletions": 0,
        "changes": 15,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0849eabfd6b4478359e3af440cdc7a99b1563df9/src/util/system.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0849eabfd6b4478359e3af440cdc7a99b1563df9/src/util/system.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/util/system.cpp?ref=0849eabfd6b4478359e3af440cdc7a99b1563df9",
        "patch": "@@ -469,6 +469,21 @@ std::vector<std::string> ArgsManager::GetArgs(const std::string& strArg) const\n     return result;\n }\n \n+std::vector<std::string> ArgsManager::GetAddedArgs() const\n+{\n+    std::vector<std::string> ret;\n+    LOCK(cs_args);\n+    for (auto const& x : m_available_args)\n+    {\n+        for(auto const& y : x.second)\n+        {\n+            ret.push_back(y.first);\n+        }\n+    }\n+\n+    return ret;\n+}\n+\n bool ArgsManager::IsArgSet(const std::string& strArg) const\n {\n     if (IsArgNegated(strArg)) return true; // special case"
      },
      {
        "sha": "ec5e426c00100d5573282bfc40c49b6231e21605",
        "filename": "src/util/system.h",
        "status": "modified",
        "additions": 7,
        "deletions": 0,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0849eabfd6b4478359e3af440cdc7a99b1563df9/src/util/system.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0849eabfd6b4478359e3af440cdc7a99b1563df9/src/util/system.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/util/system.h?ref=0849eabfd6b4478359e3af440cdc7a99b1563df9",
        "patch": "@@ -198,6 +198,13 @@ class ArgsManager\n      */\n     std::vector<std::string> GetArgs(const std::string& strArg) const;\n \n+    /**\n+     * Return list of all args\n+     * \n+     * @return Return list of all args\n+    */\n+   std::vector<std::string> GetAddedArgs() const;\n+\n     /**\n      * Return true if the given argument has been manually set\n      *"
      }
    ]
  },
  {
    "sha": "a294e1b3a55e7e59302830854c9c4e4a76f5525f",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzphMjk0ZTFiM2E1NWU3ZTU5MzAyODMwODU0YzljNGU0YTc2ZjU1MjVm",
    "commit": {
      "author": {
        "name": "Emil Engler",
        "email": "me@emilengler.com",
        "date": "2019-09-08T14:32:31Z"
      },
      "committer": {
        "name": "Emil Engler",
        "email": "me@emilengler.com",
        "date": "2019-09-08T19:12:11Z"
      },
      "message": "Fix whitespace\n\nFix whitespaces",
      "tree": {
        "sha": "d7d8a93bbf8772920afd28210980cee7f80cee4a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d7d8a93bbf8772920afd28210980cee7f80cee4a"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a294e1b3a55e7e59302830854c9c4e4a76f5525f",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a294e1b3a55e7e59302830854c9c4e4a76f5525f",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/a294e1b3a55e7e59302830854c9c4e4a76f5525f",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a294e1b3a55e7e59302830854c9c4e4a76f5525f/comments",
    "author": {
      "login": "emilengler",
      "id": 12272949,
      "node_id": "MDQ6VXNlcjEyMjcyOTQ5",
      "avatar_url": "https://avatars.githubusercontent.com/u/12272949?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/emilengler",
      "html_url": "https://github.com/emilengler",
      "followers_url": "https://api.github.com/users/emilengler/followers",
      "following_url": "https://api.github.com/users/emilengler/following{/other_user}",
      "gists_url": "https://api.github.com/users/emilengler/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/emilengler/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/emilengler/subscriptions",
      "organizations_url": "https://api.github.com/users/emilengler/orgs",
      "repos_url": "https://api.github.com/users/emilengler/repos",
      "events_url": "https://api.github.com/users/emilengler/events{/privacy}",
      "received_events_url": "https://api.github.com/users/emilengler/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "emilengler",
      "id": 12272949,
      "node_id": "MDQ6VXNlcjEyMjcyOTQ5",
      "avatar_url": "https://avatars.githubusercontent.com/u/12272949?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/emilengler",
      "html_url": "https://github.com/emilengler",
      "followers_url": "https://api.github.com/users/emilengler/followers",
      "following_url": "https://api.github.com/users/emilengler/following{/other_user}",
      "gists_url": "https://api.github.com/users/emilengler/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/emilengler/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/emilengler/subscriptions",
      "organizations_url": "https://api.github.com/users/emilengler/orgs",
      "repos_url": "https://api.github.com/users/emilengler/repos",
      "events_url": "https://api.github.com/users/emilengler/events{/privacy}",
      "received_events_url": "https://api.github.com/users/emilengler/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "0849eabfd6b4478359e3af440cdc7a99b1563df9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0849eabfd6b4478359e3af440cdc7a99b1563df9",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/0849eabfd6b4478359e3af440cdc7a99b1563df9"
      }
    ],
    "stats": {
      "total": 6,
      "additions": 3,
      "deletions": 3
    },
    "files": [
      {
        "sha": "28be8ac2903d8eba5447db5cd5ae1430df71424d",
        "filename": "src/init.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a294e1b3a55e7e59302830854c9c4e4a76f5525f/src/init.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a294e1b3a55e7e59302830854c9c4e4a76f5525f/src/init.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/init.cpp?ref=a294e1b3a55e7e59302830854c9c4e4a76f5525f",
        "patch": "@@ -562,7 +562,7 @@ void InstallEnvVars(ArgsManager &am)\n             element += toupper(c);\n         }\n         // Schema = BITCOIND_<ARG>\n-        std::string envname = \"BITCOIND_\" + element.substr(1, element.size()); \n+        std::string envname = \"BITCOIND_\" + element.substr(1, element.size());\n         const char *envvar = getenv(envname.c_str());\n         // Check if envvar is set\n         if (envvar != NULL)\n@@ -571,7 +571,7 @@ void InstallEnvVars(ArgsManager &am)\n                 LogPrintf(\"Envvar %s is set but is not being used\\n\", envname);\n             else\n                 LogPrintf(\"Envvar %s is set and used\\n\", envname);\n-            \n+\n             am.SoftSetArg(args[i], std::string(envvar));\n         }\n     }"
      },
      {
        "sha": "0c8b13cd94606fafa83d4202bdc781596643c9b0",
        "filename": "src/util/system.h",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a294e1b3a55e7e59302830854c9c4e4a76f5525f/src/util/system.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a294e1b3a55e7e59302830854c9c4e4a76f5525f/src/util/system.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/util/system.h?ref=a294e1b3a55e7e59302830854c9c4e4a76f5525f",
        "patch": "@@ -200,7 +200,7 @@ class ArgsManager\n \n     /**\n      * Return list of all args\n-     * \n+     *\n      * @return Return list of all args\n     */\n    std::vector<std::string> GetAddedArgs() const;"
      }
    ]
  },
  {
    "sha": "c8470c3ed074ded8738c71f6304084afaf9f5f14",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjODQ3MGMzZWQwNzRkZWQ4NzM4YzcxZjYzMDQwODRhZmFmOWY1ZjE0",
    "commit": {
      "author": {
        "name": "Emil Engler",
        "email": "me@emilengler.com",
        "date": "2019-09-11T14:22:19Z"
      },
      "committer": {
        "name": "Emil Engler",
        "email": "me@emilengler.com",
        "date": "2019-09-11T14:22:19Z"
      },
      "message": "Add support for envvars in bitcoin-cli",
      "tree": {
        "sha": "69c767923f2f0f94e6d3c96f485cfb43ba37d0de",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/69c767923f2f0f94e6d3c96f485cfb43ba37d0de"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c8470c3ed074ded8738c71f6304084afaf9f5f14",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE82XmVEpcmrEyk0LUL21BRcVfx8cFAl15AxsACgkQL21BRcVf\nx8eDxA/9HIeMF9J3iZD68G7XZ0eNwMe+EjdJFog4jtjk7olLly+Hu6Hb4brwF/lz\nmhDRvE9zLhm9hJuOtj58GeYr44aMWLSfL5K30+iOBK3eXVZWs0oPDfCGLQ32Bi0h\ncR86afiPT0JdmH4XrESsIGfetLDrvaIKj5+bw4QA0GRdtprpC5YS7mFSpmUqwdE0\nZKOo+czW1DtFyN4ERRx4c9XxyjUcIq5Yq3FHUMFV1uXHgipTGan7lGXVJbY6suaH\n4wa6da/wQHtWfsD049VaafkTUNlJ5fKmQh3JvvzKYA0ZoaiP5q85KNmum9MqfafN\nTpIHgZ65vLrAv62pmzoL1LhIPXpmNEhQksfXzlj7OAsnuJ2RdUubJoZJbRYz0PAi\ndUoizN69nllZy55cepSgPkeOPArabfb72Rbn7OFv73HXW2Iw9F4UyYSbhh88k45N\nydWZbGbXvjgpF9SY4KYrs57bmVjbYz5BORw46AUOB3joS1vvGFkx73sjZQQoS0V2\n5JW/+a9kNtfJscE2T3VHbHGtYsIB9GIvCLs2zU8mzSpDHWnNFg/ObBLssH4sdvp1\nH3x2oiat4J2OWzofSdhj+l8THuvyGM7sjYoRXrhCtACLK1IBzcy2sxi3rNJlwf43\nGPyzOxb+oyEAwp87I/QiqTKcQCeUB0L/VvNy4tBYPs59eRneB6Q=\n=CTLz\n-----END PGP SIGNATURE-----",
        "payload": "tree 69c767923f2f0f94e6d3c96f485cfb43ba37d0de\nparent a294e1b3a55e7e59302830854c9c4e4a76f5525f\nauthor Emil Engler <me@emilengler.com> 1568211739 +0200\ncommitter Emil Engler <me@emilengler.com> 1568211739 +0200\n\nAdd support for envvars in bitcoin-cli\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c8470c3ed074ded8738c71f6304084afaf9f5f14",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/c8470c3ed074ded8738c71f6304084afaf9f5f14",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c8470c3ed074ded8738c71f6304084afaf9f5f14/comments",
    "author": {
      "login": "emilengler",
      "id": 12272949,
      "node_id": "MDQ6VXNlcjEyMjcyOTQ5",
      "avatar_url": "https://avatars.githubusercontent.com/u/12272949?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/emilengler",
      "html_url": "https://github.com/emilengler",
      "followers_url": "https://api.github.com/users/emilengler/followers",
      "following_url": "https://api.github.com/users/emilengler/following{/other_user}",
      "gists_url": "https://api.github.com/users/emilengler/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/emilengler/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/emilengler/subscriptions",
      "organizations_url": "https://api.github.com/users/emilengler/orgs",
      "repos_url": "https://api.github.com/users/emilengler/repos",
      "events_url": "https://api.github.com/users/emilengler/events{/privacy}",
      "received_events_url": "https://api.github.com/users/emilengler/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "emilengler",
      "id": 12272949,
      "node_id": "MDQ6VXNlcjEyMjcyOTQ5",
      "avatar_url": "https://avatars.githubusercontent.com/u/12272949?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/emilengler",
      "html_url": "https://github.com/emilengler",
      "followers_url": "https://api.github.com/users/emilengler/followers",
      "following_url": "https://api.github.com/users/emilengler/following{/other_user}",
      "gists_url": "https://api.github.com/users/emilengler/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/emilengler/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/emilengler/subscriptions",
      "organizations_url": "https://api.github.com/users/emilengler/orgs",
      "repos_url": "https://api.github.com/users/emilengler/repos",
      "events_url": "https://api.github.com/users/emilengler/events{/privacy}",
      "received_events_url": "https://api.github.com/users/emilengler/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "a294e1b3a55e7e59302830854c9c4e4a76f5525f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a294e1b3a55e7e59302830854c9c4e4a76f5525f",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/a294e1b3a55e7e59302830854c9c4e4a76f5525f"
      }
    ],
    "stats": {
      "total": 20,
      "additions": 20,
      "deletions": 0
    },
    "files": [
      {
        "sha": "32e818ae3373bc028588c7de164845e4ac70687a",
        "filename": "src/bitcoin-cli.cpp",
        "status": "modified",
        "additions": 20,
        "deletions": 0,
        "changes": 20,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c8470c3ed074ded8738c71f6304084afaf9f5f14/src/bitcoin-cli.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c8470c3ed074ded8738c71f6304084afaf9f5f14/src/bitcoin-cli.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/bitcoin-cli.cpp?ref=c8470c3ed074ded8738c71f6304084afaf9f5f14",
        "patch": "@@ -92,6 +92,25 @@ class CConnectionFailed : public std::runtime_error\n \n };\n \n+void BitcoinCliInstallEnvVars(ArgsManager &am)\n+{\n+    // Set args based on their environment variable\n+    std::vector<std::string> args = am.GetAddedArgs();\n+    for (long unsigned int i = 0; i < args.size(); ++i)\n+    {\n+        std::string element;\n+        for(auto &c: args[i]) {\n+            element += toupper(c);\n+        }\n+        // Schema = BITCOIND_<ARG>\n+        std::string envname = \"BITCOIND_\" + element.substr(1, element.size());\n+        const char *envvar = getenv(envname.c_str());\n+        // Check if envvar is set\n+        if (envvar != NULL)\n+            am.SoftSetArg(args[i], std::string(envvar));\n+    }\n+}\n+\n //\n // This function returns either one of EXIT_ codes when it's expected to stop the process or\n // CONTINUE_EXECUTION when it's expected to continue further.\n@@ -107,6 +126,7 @@ static int AppInitRPC(int argc, char* argv[])\n         tfm::format(std::cerr, \"Error parsing command line arguments: %s\\n\", error.c_str());\n         return EXIT_FAILURE;\n     }\n+    BitcoinCliInstallEnvVars(gArgs);\n     if (argc < 2 || HelpRequested(gArgs) || gArgs.IsArgSet(\"-version\")) {\n         std::string strUsage = PACKAGE_NAME \" RPC client version \" + FormatFullVersion() + \"\\n\";\n         if (!gArgs.IsArgSet(\"-version\")) {"
      }
    ]
  }
]