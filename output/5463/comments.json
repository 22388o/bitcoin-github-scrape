[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/68635777",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/5463#issuecomment-68635777",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/5463",
    "id": 68635777,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NjM1Nzc3",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-04T15:05:06Z",
    "updated_at": "2015-01-04T15:05:06Z",
    "author_association": "MEMBER",
    "body": "I think this approach will work, but it is easier and more obviously correct to just disconnect peers that have a very old outstanding request. The normal parallel block fetching mechanism should then request it in from other peers.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/68635777/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/68896385",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/5463#issuecomment-68896385",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/5463",
    "id": 68896385,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4ODk2Mzg1",
    "user": {
      "login": "ajweiss",
      "id": 430315,
      "node_id": "MDQ6VXNlcjQzMDMxNQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/430315?u=1f49edbe9a1dee0adfa6af5328bef874c9cc4963&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajweiss",
      "html_url": "https://github.com/ajweiss",
      "followers_url": "https://api.github.com/users/ajweiss/followers",
      "following_url": "https://api.github.com/users/ajweiss/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajweiss/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajweiss/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajweiss/subscriptions",
      "organizations_url": "https://api.github.com/users/ajweiss/orgs",
      "repos_url": "https://api.github.com/users/ajweiss/repos",
      "events_url": "https://api.github.com/users/ajweiss/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajweiss/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-01-06T17:13:57Z",
    "updated_at": "2015-01-06T17:13:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "Closed in favor of #5608\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/68896385/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/22439670",
    "pull_request_review_id": null,
    "id": 22439670,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyNDM5Njcw",
    "diff_hunk": "@@ -336,6 +336,24 @@ void MarkBlockAsInFlight(NodeId nodeid, const uint256& hash, CBlockIndex *pindex\n     mapBlocksInFlight[hash] = std::make_pair(nodeid, it);\n }\n \n+// Requires cs_main.\n+bool IsBlockTransferTimedOut(const uint256& hash, NodeId newnode) {\n+    // 20 minutes ~ 2 blocks - maybe this should be configurable for slow nodes\n+    int64_t nTimeout = GetTimeMicros() - Params().TargetSpacing() * 2 * 1000000;\n+\n+    map<uint256, pair<NodeId, list<QueuedBlock>::iterator> >::iterator itInFlight = mapBlocksInFlight.find(hash);\n+    if (itInFlight->second.second->nTime < nTimeout &&\n+        itInFlight->second.first != newnode)\n+    {\n+        LogPrintf(\"Peer=%d failed to transfer block %s in twice the expected block interval, requesting elsewhere...\\n\",\n+                  itInFlight->second.first, hash.ToString());\n+        Misbehaving(itInFlight->second.first, 10);",
    "path": "src/main.cpp",
    "position": 15,
    "original_position": 15,
    "commit_id": "8db8a91cb66340010e77ea905c190c15fc3e85c8",
    "original_commit_id": "8db8a91cb66340010e77ea905c190c15fc3e85c8",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I think we want to disconnect such a node (but without raising banning score highly) immediately, to avoid having them think we still want the block (as there is no way to cancel a download request).\n",
    "created_at": "2015-01-04T14:40:39Z",
    "updated_at": "2015-01-04T14:40:39Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/5463#discussion_r22439670",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/5463",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/22439670"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/5463#discussion_r22439670"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/5463"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/22439670/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 350,
    "original_line": 350,
    "side": "RIGHT"
  }
]