[
  {
    "sha": "ba860c7b2af7fd9cd4b3d314f2d9cd393fcde655",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiYTg2MGM3YjJhZjdmZDljZDRiM2QzMTRmMmQ5Y2QzOTNmY2RlNjU1",
    "commit": {
      "author": {
        "name": "Kristaps Kaupe",
        "email": "kristaps@blogiem.lv",
        "date": "2019-12-28T02:47:51Z"
      },
      "committer": {
        "name": "Kristaps Kaupe",
        "email": "kristaps@blogiem.lv",
        "date": "2019-12-28T02:47:51Z"
      },
      "message": "Optimize ToLower() and ToUpper()\n\nFlipping 6th bit instead of adding and subtraction to switch from\nlowercase to uppercase and vice versa in ASCII is a well known bit hack.",
      "tree": {
        "sha": "071a2079f12abb66b0a161e07b73c159c8d10146",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/071a2079f12abb66b0a161e07b73c159c8d10146"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ba860c7b2af7fd9cd4b3d314f2d9cd393fcde655",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEv2Dflk+I3YgXQImi1HsbQjK1VDcFAl4GwwAACgkQ1HsbQjK1\nVDfENhAAw91Pd72WN7O1iF3c27MJhkV99sXqvFC0BJE0cGAtinQGMwLhEbJbC4iA\ngk5K0T0+JPiGE5xsYHHH1D9VNu45GotupdaD6VIUdwj0U81dYzsMpAObWJBq5CO+\nzVQELsleWIDcLwoDtv5eL/OD4Vk7eMmlWzsYLDL3QZ2f7/fGC4epS1W9NXez1PYK\nYOahC1i6uYVcEaBLjM0ImcaKMZ8VJHvUtyDW65jTESWFNavJ725oHPDJx/s3Vu0D\nD0uvNjDINGsiPM/nNxJK1CesMb+e8F1P4Qtgc3DElf29uixz7fcpdUlVYFmDOHUO\nrvP7QDDSHuUk76VbB9x6V376K7iLGYh7d8s1Fg8nR7mvPS4gdCTikCTDzPszenV2\nJ4LrVW33u3TEQBHWy6IhS5MXHaj5fK7LJaruu0HzAk1NL0OdOn3nXHAQquv2tXPq\nmfzRIk6MOp43y0e+kntyhbsByyBR3e7ARenSTg4xaJ1AOGsEotcjr/O28c6UyA+0\nGSze3LxmxcFHiWd3oEZM6w4h++l1j35GzJAb9qajzmiVImno4ghY3SG7qmgIXcf8\nH9nKwmdB2KjgkwutQJT/0s3MDy9ukrvXckGsVnqdkgV0sWwzpgZ8d+urFjG1MGAU\ngXRGIGh9LQfnNqDzI1cSRJT0kAx7w3aMd7j9HQJYWl2cxLK0zAU=\n=wYuO\n-----END PGP SIGNATURE-----",
        "payload": "tree 071a2079f12abb66b0a161e07b73c159c8d10146\nparent 6cb80a068dc198832febe456139bed3ae7a1145c\nauthor Kristaps Kaupe <kristaps@blogiem.lv> 1577501271 +0200\ncommitter Kristaps Kaupe <kristaps@blogiem.lv> 1577501271 +0200\n\nOptimize ToLower() and ToUpper()\n\nFlipping 6th bit instead of adding and subtraction to switch from\nlowercase to uppercase and vice versa in ASCII is a well known bit hack.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ba860c7b2af7fd9cd4b3d314f2d9cd393fcde655",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/ba860c7b2af7fd9cd4b3d314f2d9cd393fcde655",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ba860c7b2af7fd9cd4b3d314f2d9cd393fcde655/comments",
    "author": {
      "login": "kristapsk",
      "id": 4500994,
      "node_id": "MDQ6VXNlcjQ1MDA5OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4500994?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kristapsk",
      "html_url": "https://github.com/kristapsk",
      "followers_url": "https://api.github.com/users/kristapsk/followers",
      "following_url": "https://api.github.com/users/kristapsk/following{/other_user}",
      "gists_url": "https://api.github.com/users/kristapsk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kristapsk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kristapsk/subscriptions",
      "organizations_url": "https://api.github.com/users/kristapsk/orgs",
      "repos_url": "https://api.github.com/users/kristapsk/repos",
      "events_url": "https://api.github.com/users/kristapsk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kristapsk/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "kristapsk",
      "id": 4500994,
      "node_id": "MDQ6VXNlcjQ1MDA5OTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4500994?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kristapsk",
      "html_url": "https://github.com/kristapsk",
      "followers_url": "https://api.github.com/users/kristapsk/followers",
      "following_url": "https://api.github.com/users/kristapsk/following{/other_user}",
      "gists_url": "https://api.github.com/users/kristapsk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kristapsk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kristapsk/subscriptions",
      "organizations_url": "https://api.github.com/users/kristapsk/orgs",
      "repos_url": "https://api.github.com/users/kristapsk/repos",
      "events_url": "https://api.github.com/users/kristapsk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kristapsk/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "6cb80a068dc198832febe456139bed3ae7a1145c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6cb80a068dc198832febe456139bed3ae7a1145c",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/6cb80a068dc198832febe456139bed3ae7a1145c"
      }
    ],
    "stats": {
      "total": 8,
      "additions": 4,
      "deletions": 4
    },
    "files": [
      {
        "sha": "ede7e009e728cb3e2a16467d7d9765f4aa0742c4",
        "filename": "src/util/strencodings.h",
        "status": "modified",
        "additions": 4,
        "deletions": 4,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/ba860c7b2af7fd9cd4b3d314f2d9cd393fcde655/src/util/strencodings.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/ba860c7b2af7fd9cd4b3d314f2d9cd393fcde655/src/util/strencodings.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/util/strencodings.h?ref=ba860c7b2af7fd9cd4b3d314f2d9cd393fcde655",
        "patch": "@@ -205,9 +205,9 @@ bool ConvertBits(const O& outfn, I it, I end) {\n  * @return          the lowercase equivalent of c; or the argument\n  *                  if no conversion is possible.\n  */\n-constexpr char ToLower(char c)\n+constexpr char ToLower(const char c)\n {\n-    return (c >= 'A' && c <= 'Z' ? (c - 'A') + 'a' : c);\n+    return (c >= 'A' && c <= 'Z' ? c | 0x20 : c);\n }\n \n /**\n@@ -231,9 +231,9 @@ std::string ToLower(const std::string& str);\n  * @return          the uppercase equivalent of c; or the argument\n  *                  if no conversion is possible.\n  */\n-constexpr char ToUpper(char c)\n+constexpr char ToUpper(const char c)\n {\n-    return (c >= 'a' && c <= 'z' ? (c - 'a') + 'A' : c);\n+    return (c >= 'a' && c <= 'z' ? c & ~0x20 : c);\n }\n \n /**"
      }
    ]
  }
]