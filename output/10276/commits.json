[
  {
    "sha": "8d4dafd774436a355b6aa49a44b867cf78c38f6d",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo4ZDRkYWZkNzc0NDM2YTM1NWI2YWE0OWE0NGI4NjdjZjc4YzM4ZjZk",
    "commit": {
      "author": {
        "name": "Andres G. Aragoneses",
        "email": "knocte@gmail.com",
        "date": "2017-04-25T09:40:09Z"
      },
      "committer": {
        "name": "Andres G. Aragoneses",
        "email": "knocte@gmail.com",
        "date": "2017-06-06T05:33:19Z"
      },
      "message": "contrib/verifybinaries: allow filtering by platform\n\nDownloading all the binaries of all platforms can take quite long,\nespecially for slow connections, which may deter people from using\nthis script and, therefore, to disregard security altogether.\n\nThis change introduces the new possibility of specifying the\nplatform along with the version number, so that only the binaries\nthat contain the platform name are downloaded.",
      "tree": {
        "sha": "9319664f69980eb602de881b9587ee91864b91c3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9319664f69980eb602de881b9587ee91864b91c3"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8d4dafd774436a355b6aa49a44b867cf78c38f6d",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8d4dafd774436a355b6aa49a44b867cf78c38f6d",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/8d4dafd774436a355b6aa49a44b867cf78c38f6d",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8d4dafd774436a355b6aa49a44b867cf78c38f6d/comments",
    "author": {
      "login": "knocte",
      "id": 331303,
      "node_id": "MDQ6VXNlcjMzMTMwMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/331303?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/knocte",
      "html_url": "https://github.com/knocte",
      "followers_url": "https://api.github.com/users/knocte/followers",
      "following_url": "https://api.github.com/users/knocte/following{/other_user}",
      "gists_url": "https://api.github.com/users/knocte/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/knocte/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/knocte/subscriptions",
      "organizations_url": "https://api.github.com/users/knocte/orgs",
      "repos_url": "https://api.github.com/users/knocte/repos",
      "events_url": "https://api.github.com/users/knocte/events{/privacy}",
      "received_events_url": "https://api.github.com/users/knocte/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "knocte",
      "id": 331303,
      "node_id": "MDQ6VXNlcjMzMTMwMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/331303?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/knocte",
      "html_url": "https://github.com/knocte",
      "followers_url": "https://api.github.com/users/knocte/followers",
      "following_url": "https://api.github.com/users/knocte/following{/other_user}",
      "gists_url": "https://api.github.com/users/knocte/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/knocte/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/knocte/subscriptions",
      "organizations_url": "https://api.github.com/users/knocte/orgs",
      "repos_url": "https://api.github.com/users/knocte/repos",
      "events_url": "https://api.github.com/users/knocte/events{/privacy}",
      "received_events_url": "https://api.github.com/users/knocte/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "9fec4da0bec93a49798b5f5e92cf76e900759ee4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9fec4da0bec93a49798b5f5e92cf76e900759ee4",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/9fec4da0bec93a49798b5f5e92cf76e900759ee4"
      }
    ],
    "stats": {
      "total": 51,
      "additions": 46,
      "deletions": 5
    },
    "files": [
      {
        "sha": "3ffe0a2f289556d40fab4f5ed82ddefaab645ea9",
        "filename": "contrib/verifybinaries/README.md",
        "status": "modified",
        "additions": 8,
        "deletions": 0,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8d4dafd774436a355b6aa49a44b867cf78c38f6d/contrib/verifybinaries/README.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8d4dafd774436a355b6aa49a44b867cf78c38f6d/contrib/verifybinaries/README.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/verifybinaries/README.md?ref=8d4dafd774436a355b6aa49a44b867cf78c38f6d",
        "patch": "@@ -26,6 +26,14 @@ The script returns 0 if everything passes the checks. It returns 1 if either the\n ./verify.sh bitcoin-core-0.13.0-rc3\n ```\n \n+If you only want to download the binaries of certain platform, add the corresponding suffix, e.g.:\n+\n+```sh\n+./verify.sh bitcoin-core-0.11.2-osx\n+./verify.sh 0.12.0-linux\n+./verify.sh bitcoin-core-0.13.0-rc3-win64\n+```\n+\n If you do not want to keep the downloaded binaries, specify anything as the second parameter.\n \n ```sh"
      },
      {
        "sha": "c2cc2b7013ad9ddee52374b89750d52342792370",
        "filename": "contrib/verifybinaries/verify.sh",
        "status": "modified",
        "additions": 38,
        "deletions": 5,
        "changes": 43,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8d4dafd774436a355b6aa49a44b867cf78c38f6d/contrib/verifybinaries/verify.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8d4dafd774436a355b6aa49a44b867cf78c38f6d/contrib/verifybinaries/verify.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/verifybinaries/verify.sh?ref=8d4dafd774436a355b6aa49a44b867cf78c38f6d",
        "patch": "@@ -42,13 +42,36 @@ if [ -n \"$1\" ]; then\n       VERSION=\"$VERSIONPREFIX$1\"\n    fi\n \n-   #now let's see if the version string contains \"rc\", and strip it off if it does\n-   #  and simultaneously add RCSUBDIR to BASEDIR, where we will look for SIGNATUREFILENAME\n-   if [[ $VERSION == *\"$RCVERSIONSTRING\"* ]]; then\n-      BASEDIR=\"$BASEDIR${VERSION/%-$RCVERSIONSTRING*}/\"\n-      BASEDIR=\"$BASEDIR$RCSUBDIR.$RCVERSIONSTRING${VERSION: -1}/\"\n+   STRIPPEDLAST=\"${VERSION%-*}\"\n+\n+   #now let's see if the version string contains \"rc\" or a platform name (e.g. \"osx\")\n+   if [[ \"$STRIPPEDLAST-\" == \"$VERSIONPREFIX\" ]]; then\n+      BASEDIR=\"$BASEDIR$VERSION/\"\n    else\n+      # let's examine the last part to see if it's rc and/or platform name\n+      STRIPPEDNEXTTOLAST=\"${STRIPPEDLAST%-*}\"\n+      if [[ \"$STRIPPEDNEXTTOLAST-\" == \"$VERSIONPREFIX\" ]]; then\n+\n+         LASTSUFFIX=\"${VERSION##*-}\"\n+         VERSION=\"$STRIPPEDLAST\"\n+\n+         if [[ $LASTSUFFIX == *\"$RCVERSIONSTRING\"* ]]; then\n+            RCVERSION=\"$LASTSUFFIX\"\n+         else\n+            PLATFORM=\"$LASTSUFFIX\"\n+         fi\n+\n+      else\n+         RCVERSION=\"${STRIPPEDLAST##*-}\"\n+         PLATFORM=\"${VERSION##*-}\"\n+\n+         VERSION=\"$STRIPPEDNEXTTOLAST\"\n+      fi\n+\n       BASEDIR=\"$BASEDIR$VERSION/\"\n+      if [[ $RCVERSION == *\"$RCVERSIONSTRING\"* ]]; then\n+         BASEDIR=\"$BASEDIR$RCSUBDIR.$RCVERSION/\"\n+      fi\n    fi\n \n    SIGNATUREFILE=\"$BASEDIR$SIGNATUREFILENAME\"\n@@ -92,12 +115,22 @@ if [ $RET -ne 0 ]; then\n    exit \"$RET\"\n fi\n \n+if [ -n \"$PLATFORM\" ]; then\n+   grep $PLATFORM $TMPFILE > \"$TMPFILE-plat\"\n+   TMPFILESIZE=$(stat -c%s \"$TMPFILE-plat\")\n+   if [ $TMPFILESIZE -eq 0 ]; then\n+      echo \"error: no files matched the platform specified\" && exit 3\n+   fi\n+   mv \"$TMPFILE-plat\" $TMPFILE\n+fi\n+\n #here we extract the filenames from the signature file\n FILES=$(awk '{print $2}' \"$TMPFILE\")\n \n #and download these one by one\n for file in $FILES\n do\n+   echo \"Downloading $file\"\n    wget --quiet -N \"$BASEDIR$file\"\n done\n "
      }
    ]
  }
]