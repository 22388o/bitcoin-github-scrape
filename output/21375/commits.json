[
  {
    "sha": "d5a71e97853ea9e1b879e8c76bfb01d4bef33172",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkNWE3MWU5Nzg1M2VhOWUxYjg3OWU4Yzc2YmZiMDFkNGJlZjMzMTcy",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-02-22T22:04:19Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-04-01T20:53:17Z"
      },
      "message": "guix: Use --cores instead of --max-jobs\n\nIn Guix, there are two flags for controlling parallelism:\n\nNote: When I say \"derivation,\" think \"package\"\n\n--cores=n\n  - controls the number of CPU cores to build each derivation. This is\n    the value passed to `make`'s `--jobs=` flag.\n  - defaults to 0: as many cores as is available\n\n--max-jobs=n\n  - controls how many derivations can be built in parallel\n  - defaults to 1\n\nTherefore, if set --max-jobs=$MAX_JOBS and don't set --cores, Guix could\ntheoretically spin up $MAX_JOBS * $(nproc) number of threads, and that's\nno good.\n\nSo we could either default to --cores=1, --max-jobs=$MAX_JOBS\n\n  - Pro: --cores=1 means that `make` will be invoked with `-j1`,\n         avoiding problems with package whose build systems and test\n         suites break when running multi-threaded.\n\n  - Con: There will be times when only 1 or 2 derivations can be built\n         at a time, because the rest of the dependency graph all depend\n         on those 1 or 2 derivations. During these times, the machine\n         will be severely under-utilized.\n\nor --cores=$MAX_JOBS, --max-jobs=1\n\n  - Pro: We don't encounter prolonged periods of\n         severe under-utilization mentioned above.\n\n  - Con: Many packages' build systems and test suites break when running\n         multi-threaded.\n\nor --cores=1, --max-jobs=1 and let the user override with\n$ADDITIONAL_GUIX_COMMON_FLAGS",
      "tree": {
        "sha": "2305ac3d3962c7bdef5cfa1afe53e76fce38f456",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2305ac3d3962c7bdef5cfa1afe53e76fce38f456"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d5a71e97853ea9e1b879e8c76bfb01d4bef33172",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d5a71e97853ea9e1b879e8c76bfb01d4bef33172",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/d5a71e97853ea9e1b879e8c76bfb01d4bef33172",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d5a71e97853ea9e1b879e8c76bfb01d4bef33172/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "66daf4cb3b47e8218623936d23ad504fd189e70b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/66daf4cb3b47e8218623936d23ad504fd189e70b",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/66daf4cb3b47e8218623936d23ad504fd189e70b"
      }
    ],
    "stats": {
      "total": 78,
      "additions": 63,
      "deletions": 15
    },
    "files": [
      {
        "sha": "133f250ad29fc54c7e9654055071f6a62a560926",
        "filename": "contrib/guix/README.md",
        "status": "modified",
        "additions": 53,
        "deletions": 5,
        "changes": 58,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d5a71e97853ea9e1b879e8c76bfb01d4bef33172/contrib/guix/README.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d5a71e97853ea9e1b879e8c76bfb01d4bef33172/contrib/guix/README.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/README.md?ref=d5a71e97853ea9e1b879e8c76bfb01d4bef33172",
        "patch": "@@ -80,6 +80,50 @@ at the end of the `guix pull`)\n export PATH=\"${HOME}/.config/guix/current/bin${PATH:+:}$PATH\"\n ```\n \n+### Controlling the number of threads used by `guix` build commands\n+\n+By default, the scripts under `./contrib/guix` will invoke all `guix` build\n+commands with `--cores=\"$JOBS\"`. Note that `$JOBS` defaults to `$(nproc)` if not\n+specified. However, astute manual readers will also notice that there is a\n+`--max-jobs=` flag (which defaults to 1 if unspecified).\n+\n+Here is the difference between `--cores=` and `--max-jobs=`:\n+\n+> Note: When I say \"derivation,\" think \"package\"\n+\n+`--cores=`\n+\n+  - controls the number of CPU cores to build each derivation. This is the value\n+    passed to `make`'s `--jobs=` flag.\n+\n+`--max-jobs=`\n+\n+  - controls how many derivations can be built in parallel\n+  - defaults to 1\n+\n+Therefore, the default is for `guix` build commands to build one derivation at a\n+time, utilizing `$JOBS` threads.\n+\n+Specifying the `$JOBS` environment variable will only modify `--cores=`, but you\n+can also modify the value for `--max-jobs=` by specifying\n+`$ADDITIONAL_GUIX_COMMON_FLAGS`. For example, if you have a LOT of memory, you\n+may want to set:\n+\n+```sh\n+export ADDITIONAL_GUIX_COMMON_FLAGS='--max-jobs=8'\n+```\n+\n+Which allows for a maximum of 8 derivations to be built at the same time, each\n+utilizing `$JOBS` threads.\n+\n+Or, if you'd like to avoid spurious build failures caused by issues with\n+parallelism within a single package, but would still like to build multiple\n+packages when the dependency graph allows for it, you may want to try:\n+\n+```sh\n+export JOBS=1 ADDITIONAL_GUIX_COMMON_FLAGS='--max-jobs=8'\n+```\n+\n ## Usage\n \n ### As a Tool for Deterministic Builds\n@@ -125,12 +169,16 @@ find output/ -type f -print0 | sort -z | xargs -r0 sha256sum\n   the actual SDK (e.g. SDK_PATH=$HOME/Downloads/macOS-SDKs instead of\n   $HOME/Downloads/macOS-SDKs/Xcode-11.3.1-11C505-extracted-SDK-with-libcxx-headers).\n \n-* _**MAX_JOBS**_\n+* _**JOBS**_\n+\n+  Override the number of jobs to run simultaneously, you might want to do so on\n+  a memory-limited machine. This may be passed to:\n+\n+  - `guix` build commands as in `guix environment --cores=\"$JOBS\"`\n+  - `make` as in `make --jobs=\"$JOBS\"`\n+  - `xargs` as in `xargs -P\"$JOBS\"`\n \n-  Override the maximum number of jobs to run simultaneously, you might want to\n-  do so on a memory-limited machine. This may be passed to `make` as in `make\n-  --jobs=\"$MAX_JOBS\"` or `xargs` as in `xargs -P\"$MAX_JOBS\"`. _(defaults to the\n-  value of `nproc` outside the container)_\n+  _(defaults to the value of `nproc` outside the container)_\n \n * _**SOURCE_DATE_EPOCH**_\n "
      },
      {
        "sha": "430b7c320954e2dcb5da812c797aabaeec0540cc",
        "filename": "contrib/guix/guix-build.sh",
        "status": "modified",
        "additions": 6,
        "deletions": 6,
        "changes": 12,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d5a71e97853ea9e1b879e8c76bfb01d4bef33172/contrib/guix/guix-build.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d5a71e97853ea9e1b879e8c76bfb01d4bef33172/contrib/guix/guix-build.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/guix-build.sh?ref=d5a71e97853ea9e1b879e8c76bfb01d4bef33172",
        "patch": "@@ -134,7 +134,7 @@ done\n \n # Determine the maximum number of jobs to run simultaneously (overridable by\n # environment)\n-MAX_JOBS=\"${MAX_JOBS:-$(nproc)}\"\n+JOBS=\"${JOBS:-$(nproc)}\"\n \n # Usage: host_to_commonname HOST\n #\n@@ -152,7 +152,7 @@ host_to_commonname() {\n # Download the depends sources now as we won't have internet access in the build\n # container\n for host in $HOSTS; do\n-  make -C \"${PWD}/depends\" -j\"$MAX_JOBS\" download-\"$(host_to_commonname \"$host\")\" ${V:+V=1} ${SOURCES_PATH:+SOURCES_PATH=\"$SOURCES_PATH\"}\n+    make -C \"${PWD}/depends\" -j\"$JOBS\" download-\"$(host_to_commonname \"$host\")\" ${V:+V=1} ${SOURCES_PATH:+SOURCES_PATH=\"$SOURCES_PATH\"}\n done\n \n # Determine the reference time used for determinism (overridable by environment)\n@@ -164,7 +164,7 @@ time-machine() {\n     # shellcheck disable=SC2086\n     guix time-machine --url=https://github.com/dongcarl/guix.git \\\n                       --commit=490e39ff303f4f6873a04bfb8253755bdae1b29c \\\n-                      --max-jobs=\"$MAX_JOBS\" \\\n+                      --cores=\"$JOBS\" \\\n                       --keep-failed \\\n                       ${SUBSTITUTE_URLS:+--substitute-urls=\"$SUBSTITUTE_URLS\"} \\\n                       ${ADDITIONAL_GUIX_COMMON_FLAGS} ${ADDITIONAL_GUIX_TIMEMACHINE_FLAGS} \\\n@@ -218,7 +218,7 @@ for host in $HOSTS; do\n cat << EOF\n INFO: Building commit ${GIT_COMMIT:?not set} for platform triple ${HOST:?not set}:\n       ...using reference timestamp: ${SOURCE_DATE_EPOCH:?not set}\n-      ...running at most ${MAX_JOBS:?not set} jobs\n+      ...running at most ${JOBS:?not set} jobs\n       ...from worktree directory: '${PWD}'\n           ...bind-mounted in container to: '/bitcoin'\n       ...in build directory: '$(distsrc_for_host \"$HOST\")'\n@@ -304,12 +304,12 @@ EOF\n                                  ${SOURCES_PATH:+--share=\"$SOURCES_PATH\"} \\\n                                  ${BASE_CACHE:+--share=\"$BASE_CACHE\"} \\\n                                  ${SDK_PATH:+--share=\"$SDK_PATH\"} \\\n-                                 --max-jobs=\"$MAX_JOBS\" \\\n+                                 --cores=\"$JOBS\" \\\n                                  --keep-failed \\\n                                  ${SUBSTITUTE_URLS:+--substitute-urls=\"$SUBSTITUTE_URLS\"} \\\n                                  ${ADDITIONAL_GUIX_COMMON_FLAGS} ${ADDITIONAL_GUIX_ENVIRONMENT_FLAGS} \\\n                                  -- env HOST=\"$host\" \\\n-                                        MAX_JOBS=\"$MAX_JOBS\" \\\n+                                        JOBS=\"$JOBS\" \\\n                                         SOURCE_DATE_EPOCH=\"${SOURCE_DATE_EPOCH:?unable to determine value}\" \\\n                                         ${V:+V=1} \\\n                                         ${SOURCES_PATH:+SOURCES_PATH=\"$SOURCES_PATH\"} \\"
      },
      {
        "sha": "0301d10522329e46593c83e8ea8331a10a0c2a0b",
        "filename": "contrib/guix/libexec/build.sh",
        "status": "modified",
        "additions": 4,
        "deletions": 4,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d5a71e97853ea9e1b879e8c76bfb01d4bef33172/contrib/guix/libexec/build.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d5a71e97853ea9e1b879e8c76bfb01d4bef33172/contrib/guix/libexec/build.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/libexec/build.sh?ref=d5a71e97853ea9e1b879e8c76bfb01d4bef33172",
        "patch": "@@ -26,7 +26,7 @@ cat << EOF\n Required environment variables as seen inside the container:\n     HOST: ${HOST:?not set}\n     SOURCE_DATE_EPOCH: ${SOURCE_DATE_EPOCH:?not set}\n-    MAX_JOBS: ${MAX_JOBS:?not set}\n+    JOBS: ${JOBS:?not set}\n     DISTSRC: ${DISTSRC:?not set}\n     OUTDIR: ${OUTDIR:?not set}\n EOF\n@@ -173,7 +173,7 @@ esac\n ####################\n \n # Build the depends tree, overriding variables that assume multilib gcc\n-make -C depends --jobs=\"$MAX_JOBS\" HOST=\"$HOST\" \\\n+make -C depends --jobs=\"$JOBS\" HOST=\"$HOST\" \\\n                                    ${V:+V=1} \\\n                                    ${SOURCES_PATH+SOURCES_PATH=\"$SOURCES_PATH\"} \\\n                                    ${BASE_CACHE+BASE_CACHE=\"$BASE_CACHE\"} \\\n@@ -267,7 +267,7 @@ mkdir -p \"$DISTSRC\"\n     sed -i.old 's/-lstdc++ //g' config.status libtool src/univalue/config.status src/univalue/libtool\n \n     # Build Bitcoin Core\n-    make --jobs=\"$MAX_JOBS\" ${V:+V=1}\n+    make --jobs=\"$JOBS\" ${V:+V=1}\n \n     # Perform basic ELF security checks on a series of executables.\n     make -C src --jobs=1 check-security ${V:+V=1}\n@@ -344,7 +344,7 @@ mkdir -p \"$DISTSRC\"\n                 {\n                     find \"${DISTNAME}/bin\" -type f -executable -print0\n                     find \"${DISTNAME}/lib\" -type f -print0\n-                } | xargs -0 -n1 -P\"$MAX_JOBS\" -I{} \"${DISTSRC}/contrib/devtools/split-debug.sh\" {} {} {}.dbg\n+                } | xargs -0 -n1 -P\"$JOBS\" -I{} \"${DISTSRC}/contrib/devtools/split-debug.sh\" {} {} {}.dbg\n                 ;;\n         esac\n "
      }
    ]
  },
  {
    "sha": "3e9982ab3877eb8fe0a8c0cb3d847ac0913c7336",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzozZTk5ODJhYjM4NzdlYjhmZTBhOGMwY2IzZDg0N2FjMDkxM2M3MzM2",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-02-26T22:38:35Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-04-01T20:53:17Z"
      },
      "message": "contrib: Silence git-describe when looking for tag\n\nOtherwise, it prints a rather disturbing message to stderr:\n\n    fatal: no tag exactly matches '<hash>'",
      "tree": {
        "sha": "f0fddb7f010af15a6829dd2abef11e02afe6b445",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f0fddb7f010af15a6829dd2abef11e02afe6b445"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3e9982ab3877eb8fe0a8c0cb3d847ac0913c7336",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3e9982ab3877eb8fe0a8c0cb3d847ac0913c7336",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/3e9982ab3877eb8fe0a8c0cb3d847ac0913c7336",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3e9982ab3877eb8fe0a8c0cb3d847ac0913c7336/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "d5a71e97853ea9e1b879e8c76bfb01d4bef33172",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d5a71e97853ea9e1b879e8c76bfb01d4bef33172",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/d5a71e97853ea9e1b879e8c76bfb01d4bef33172"
      }
    ],
    "stats": {
      "total": 2,
      "additions": 1,
      "deletions": 1
    },
    "files": [
      {
        "sha": "330fbc041b31ac8f1a828f7eccca76f866cc51b7",
        "filename": "contrib/gitian-descriptors/assign_DISTNAME",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/3e9982ab3877eb8fe0a8c0cb3d847ac0913c7336/contrib/gitian-descriptors/assign_DISTNAME",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/3e9982ab3877eb8fe0a8c0cb3d847ac0913c7336/contrib/gitian-descriptors/assign_DISTNAME",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/gitian-descriptors/assign_DISTNAME?ref=3e9982ab3877eb8fe0a8c0cb3d847ac0913c7336",
        "patch": "@@ -4,7 +4,7 @@\n #\n # A helper script to be sourced into the gitian descriptors\n \n-if RECENT_TAG=\"$(git describe --exact-match HEAD)\"; then\n+if RECENT_TAG=\"$(git describe --exact-match HEAD 2> /dev/null)\"; then\n     VERSION=\"${RECENT_TAG#v}\"\n else\n     VERSION=\"$(git rev-parse --short=12 HEAD)\""
      }
    ]
  },
  {
    "sha": "e5b49a01f5d0f631e7f08f86ca8a2c2b8213319f",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzplNWI0OWEwMWY1ZDBmNjMxZTdmMDhmODZjYThhMmMyYjgyMTMzMTlm",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-02-26T22:39:44Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-04-01T20:53:17Z"
      },
      "message": "guix: Create windeploy inside distsrc-*\n\n./windeploy is a \"working directory\", and therefore belongs inside\ndistsrc-*. Many people have noticed their Guix builds failing after\nhours simply because they did not remove windeploy (but did remove the\ndistsrc-* directories).",
      "tree": {
        "sha": "f67fdad31a1cff9ad19a796d07f77a6d319f7fa9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f67fdad31a1cff9ad19a796d07f77a6d319f7fa9"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e5b49a01f5d0f631e7f08f86ca8a2c2b8213319f",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e5b49a01f5d0f631e7f08f86ca8a2c2b8213319f",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/e5b49a01f5d0f631e7f08f86ca8a2c2b8213319f",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e5b49a01f5d0f631e7f08f86ca8a2c2b8213319f/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "3e9982ab3877eb8fe0a8c0cb3d847ac0913c7336",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3e9982ab3877eb8fe0a8c0cb3d847ac0913c7336",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/3e9982ab3877eb8fe0a8c0cb3d847ac0913c7336"
      }
    ],
    "stats": {
      "total": 34,
      "additions": 17,
      "deletions": 17
    },
    "files": [
      {
        "sha": "9888a84c9dfe3346508c531e8fb0f0e71da3b869",
        "filename": "contrib/guix/libexec/build.sh",
        "status": "modified",
        "additions": 17,
        "deletions": 17,
        "changes": 34,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e5b49a01f5d0f631e7f08f86ca8a2c2b8213319f/contrib/guix/libexec/build.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e5b49a01f5d0f631e7f08f86ca8a2c2b8213319f/contrib/guix/libexec/build.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/libexec/build.sh?ref=e5b49a01f5d0f631e7f08f86ca8a2c2b8213319f",
        "patch": "@@ -394,21 +394,21 @@ mkdir -p \"$DISTSRC\"\n                     || ( rm -f \"${OUTDIR}/${DISTNAME}-${HOST//x86_64-apple-darwin18/osx64}.tar.gz\" && exit 1 )\n                 ;;\n         esac\n-    )\n-)\n+    )  # $DISTSRC/installed\n \n-case \"$HOST\" in\n-    *mingw*)\n-        cp -rf --target-directory=. contrib/windeploy\n-        (\n-            cd ./windeploy\n-            mkdir unsigned\n-            cp --target-directory=unsigned/ \"${OUTDIR}/${DISTNAME}-win64-setup-unsigned.exe\"\n-            find . -print0 \\\n-                | sort --zero-terminated \\\n-                | tar --create --no-recursion --mode='u+rw,go+r-w,a+X' --null --files-from=- \\\n-                | gzip -9n > \"${OUTDIR}/${DISTNAME}-win-unsigned.tar.gz\" \\\n-                || ( rm -f \"${OUTDIR}/${DISTNAME}-win-unsigned.tar.gz\" && exit 1 )\n-        )\n-        ;;\n-esac\n+    case \"$HOST\" in\n+        *mingw*)\n+            cp -rf --target-directory=. contrib/windeploy\n+            (\n+                cd ./windeploy\n+                mkdir -p unsigned\n+                cp --target-directory=unsigned/ \"${OUTDIR}/${DISTNAME}-win64-setup-unsigned.exe\"\n+                find . -print0 \\\n+                    | sort --zero-terminated \\\n+                    | tar --create --no-recursion --mode='u+rw,go+r-w,a+X' --null --files-from=- \\\n+                    | gzip -9n > \"${OUTDIR}/${DISTNAME}-win-unsigned.tar.gz\" \\\n+                    || ( rm -f \"${OUTDIR}/${DISTNAME}-win-unsigned.tar.gz\" && exit 1 )\n+            )\n+            ;;\n+    esac\n+)  # $DISTSRC"
      }
    ]
  },
  {
    "sha": "7753357a7bae98ec775c707b9dec4cea1e945802",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo3NzUzMzU3YTdiYWU5OGVjNzc1YzcwN2I5ZGVjNGNlYTFlOTQ1ODAy",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-03-17T16:36:55Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-04-05T15:00:21Z"
      },
      "message": "guix: Add source-able bash prelude and utils",
      "tree": {
        "sha": "81eb95d504fb71a062c068f1def14298c45b4485",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/81eb95d504fb71a062c068f1def14298c45b4485"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7753357a7bae98ec775c707b9dec4cea1e945802",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7753357a7bae98ec775c707b9dec4cea1e945802",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/7753357a7bae98ec775c707b9dec4cea1e945802",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7753357a7bae98ec775c707b9dec4cea1e945802/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "e5b49a01f5d0f631e7f08f86ca8a2c2b8213319f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e5b49a01f5d0f631e7f08f86ca8a2c2b8213319f",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/e5b49a01f5d0f631e7f08f86ca8a2c2b8213319f"
      }
    ],
    "stats": {
      "total": 145,
      "additions": 145,
      "deletions": 0
    },
    "files": [
      {
        "sha": "33a319012cb9edc93df3568c7ac4fefdcdad0ea3",
        "filename": "contrib/guix/libexec/prelude.bash",
        "status": "added",
        "additions": 60,
        "deletions": 0,
        "changes": 60,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/7753357a7bae98ec775c707b9dec4cea1e945802/contrib/guix/libexec/prelude.bash",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/7753357a7bae98ec775c707b9dec4cea1e945802/contrib/guix/libexec/prelude.bash",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/libexec/prelude.bash?ref=7753357a7bae98ec775c707b9dec4cea1e945802",
        "patch": "@@ -0,0 +1,60 @@\n+#!/usr/bin/env bash\n+export LC_ALL=C\n+set -e -o pipefail\n+\n+# shellcheck source=../../shell/realpath.bash\n+source contrib/shell/realpath.bash\n+\n+# shellcheck source=../../shell/git-utils.bash\n+source contrib/shell/git-utils.bash\n+\n+################\n+# Required non-builtin commands should be invokable\n+################\n+\n+check_tools() {\n+    for cmd in \"$@\"; do\n+        if ! command -v \"$cmd\" > /dev/null 2>&1; then\n+            echo \"ERR: This script requires that '$cmd' is installed and available in your \\$PATH\"\n+            exit 1\n+        fi\n+    done\n+}\n+\n+check_tools cat env readlink dirname basename git\n+\n+################\n+# We should be at the top directory of the repository\n+################\n+\n+same_dir() {\n+    local resolved1 resolved2\n+    resolved1=\"$(bash_realpath \"${1}\")\"\n+    resolved2=\"$(bash_realpath \"${2}\")\"\n+    [ \"$resolved1\" = \"$resolved2\" ]\n+}\n+\n+if ! same_dir \"${PWD}\" \"$(git_root)\"; then\n+cat << EOF\n+ERR: This script must be invoked from the top level of the git repository\n+\n+Hint: This may look something like:\n+    env FOO=BAR ./contrib/guix/guix-<blah>\n+\n+EOF\n+exit 1\n+fi\n+\n+################\n+# Set common variables\n+################\n+\n+VERSION=\"${VERSION:-$(git_head_version)}\"\n+DISTNAME=\"${DISTNAME:-bitcoin-${VERSION}}\"\n+\n+version_base_prefix=\"${PWD}/guix-build-\"\n+VERSION_BASE=\"${version_base_prefix}${VERSION}\"  # TOP\n+\n+DISTSRC_BASE=\"${DISTSRC_BASE:-${VERSION_BASE}}\"\n+\n+OUTDIR_BASE=\"${OUTDIR_BASE:-${VERSION_BASE}/output}\""
      },
      {
        "sha": "37bac1f38d8f087b4b0e073141bdd29a6a33f8ac",
        "filename": "contrib/shell/git-utils.bash",
        "status": "added",
        "additions": 14,
        "deletions": 0,
        "changes": 14,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/7753357a7bae98ec775c707b9dec4cea1e945802/contrib/shell/git-utils.bash",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/7753357a7bae98ec775c707b9dec4cea1e945802/contrib/shell/git-utils.bash",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/shell/git-utils.bash?ref=7753357a7bae98ec775c707b9dec4cea1e945802",
        "patch": "@@ -0,0 +1,14 @@\n+#!/usr/bin/env bash\n+\n+git_root() {\n+    git rev-parse --show-toplevel 2> /dev/null\n+}\n+\n+git_head_version() {\n+    local recent_tag\n+    if recent_tag=\"$(git describe --exact-match HEAD 2> /dev/null)\"; then\n+        echo \"${recent_tag#v}\"\n+    else\n+        git rev-parse --short=12 HEAD\n+    fi\n+}"
      },
      {
        "sha": "389b77b56266d3e753598d5aa90d9642b2e7c30f",
        "filename": "contrib/shell/realpath.bash",
        "status": "added",
        "additions": 71,
        "deletions": 0,
        "changes": 71,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/7753357a7bae98ec775c707b9dec4cea1e945802/contrib/shell/realpath.bash",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/7753357a7bae98ec775c707b9dec4cea1e945802/contrib/shell/realpath.bash",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/shell/realpath.bash?ref=7753357a7bae98ec775c707b9dec4cea1e945802",
        "patch": "@@ -0,0 +1,71 @@\n+#!/usr/bin/env bash\n+\n+# Based on realpath.sh written by Michael Kropat\n+# Found at: https://github.com/mkropat/sh-realpath/blob/65512368b8155b176b67122aa395ac580d9acc5b/realpath.sh\n+\n+bash_realpath() {\n+    canonicalize_path \"$(resolve_symlinks \"$1\")\"\n+}\n+\n+resolve_symlinks() {\n+    _resolve_symlinks \"$1\"\n+}\n+\n+_resolve_symlinks() {\n+    _assert_no_path_cycles \"$@\" || return\n+\n+    local dir_context path\n+    if path=$(readlink -- \"$1\"); then\n+        dir_context=$(dirname -- \"$1\")\n+        _resolve_symlinks \"$(_prepend_dir_context_if_necessary \"$dir_context\" \"$path\")\" \"$@\"\n+    else\n+        printf '%s\\n' \"$1\"\n+    fi\n+}\n+\n+_prepend_dir_context_if_necessary() {\n+    if [ \"$1\" = . ]; then\n+        printf '%s\\n' \"$2\"\n+    else\n+        _prepend_path_if_relative \"$1\" \"$2\"\n+    fi\n+}\n+\n+_prepend_path_if_relative() {\n+    case \"$2\" in\n+        /* ) printf '%s\\n' \"$2\" ;;\n+         * ) printf '%s\\n' \"$1/$2\" ;;\n+    esac\n+}\n+\n+_assert_no_path_cycles() {\n+    local target path\n+\n+    target=$1\n+    shift\n+\n+    for path in \"$@\"; do\n+        if [ \"$path\" = \"$target\" ]; then\n+            return 1\n+        fi\n+    done\n+}\n+\n+canonicalize_path() {\n+    if [ -d \"$1\" ]; then\n+        _canonicalize_dir_path \"$1\"\n+    else\n+        _canonicalize_file_path \"$1\"\n+    fi\n+}\n+\n+_canonicalize_dir_path() {\n+    (cd \"$1\" 2>/dev/null && pwd -P)\n+}\n+\n+_canonicalize_file_path() {\n+    local dir file\n+    dir=$(dirname -- \"$1\")\n+    file=$(basename -- \"$1\")\n+    (cd \"$dir\" 2>/dev/null && printf '%s/%s\\n' \"$(pwd -P)\" \"$file\")\n+}"
      }
    ]
  },
  {
    "sha": "4eccf063b252bfe256cf72d363a24cf0183e926e",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo0ZWNjZjA2M2IyNTJiZmUyNTZjZjcyZDM2M2EyNGNmMDE4M2U5MjZl",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-03-17T18:33:10Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-04-05T15:00:39Z"
      },
      "message": "guix: Remove guix-build.sh filename extension",
      "tree": {
        "sha": "6e68a21777c4cd9dbd69f5df3ba63a5e930349f8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6e68a21777c4cd9dbd69f5df3ba63a5e930349f8"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4eccf063b252bfe256cf72d363a24cf0183e926e",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4eccf063b252bfe256cf72d363a24cf0183e926e",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/4eccf063b252bfe256cf72d363a24cf0183e926e",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4eccf063b252bfe256cf72d363a24cf0183e926e/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "7753357a7bae98ec775c707b9dec4cea1e945802",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7753357a7bae98ec775c707b9dec4cea1e945802",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/7753357a7bae98ec775c707b9dec4cea1e945802"
      }
    ],
    "stats": {
      "total": 0,
      "additions": 0,
      "deletions": 0
    },
    "files": [
      {
        "sha": "430b7c320954e2dcb5da812c797aabaeec0540cc",
        "filename": "contrib/guix/guix-build",
        "status": "renamed",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/4eccf063b252bfe256cf72d363a24cf0183e926e/contrib/guix/guix-build",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/4eccf063b252bfe256cf72d363a24cf0183e926e/contrib/guix/guix-build",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/guix-build?ref=4eccf063b252bfe256cf72d363a24cf0183e926e",
        "previous_filename": "contrib/guix/guix-build.sh"
      }
    ]
  },
  {
    "sha": "7f401c953f8bb3574cec48561e13ef3b47dedc6e",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo3ZjQwMWM5NTNmOGJiMzU3NGNlYzQ4NTYxZTEzZWYzYjQ3ZGVkYzZl",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-03-17T16:59:18Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-04-05T15:00:39Z"
      },
      "message": "guix: Adapt guix-build to prelude, restructure hier",
      "tree": {
        "sha": "f5a537255ce7490f861273e5a34dae4e075f1bd7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f5a537255ce7490f861273e5a34dae4e075f1bd7"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7f401c953f8bb3574cec48561e13ef3b47dedc6e",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7f401c953f8bb3574cec48561e13ef3b47dedc6e",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/7f401c953f8bb3574cec48561e13ef3b47dedc6e",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7f401c953f8bb3574cec48561e13ef3b47dedc6e/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "4eccf063b252bfe256cf72d363a24cf0183e926e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4eccf063b252bfe256cf72d363a24cf0183e926e",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/4eccf063b252bfe256cf72d363a24cf0183e926e"
      }
    ],
    "stats": {
      "total": 76,
      "additions": 44,
      "deletions": 32
    },
    "files": [
      {
        "sha": "a1c120f412b46b13829a3b4f3f574ecf5d2ecaf7",
        "filename": "contrib/guix/guix-build",
        "status": "modified",
        "additions": 40,
        "deletions": 27,
        "changes": 67,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/7f401c953f8bb3574cec48561e13ef3b47dedc6e/contrib/guix/guix-build",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/7f401c953f8bb3574cec48561e13ef3b47dedc6e/contrib/guix/guix-build",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/guix-build?ref=7f401c953f8bb3574cec48561e13ef3b47dedc6e",
        "patch": "@@ -2,22 +2,26 @@\n export LC_ALL=C\n set -e -o pipefail\n \n+# Source the common prelude, which:\n+#   1. Checks if we're at the top directory of the Bitcoin Core repository\n+#   2. Defines a few common functions and variables\n+#\n+# shellcheck source=libexec/prelude.bash\n+source \"$(dirname \"${BASH_SOURCE[0]}\")/libexec/prelude.bash\"\n+\n+\n ###################\n-## Sanity Checks ##\n+## SANITY CHECKS ##\n ###################\n \n ################\n-# Check 1: Make sure that we can invoke required tools\n+# Required non-builtin commands should be invokable\n ################\n-for cmd in git make guix cat mkdir curl; do\n-    if ! command -v \"$cmd\" > /dev/null 2>&1; then\n-        echo \"ERR: This script requires that '$cmd' is installed and available in your \\$PATH\"\n-        exit 1\n-    fi\n-done\n+\n+check_tools cat mkdir make git guix\n \n ################\n-# Check 2: Make sure GUIX_BUILD_OPTIONS is empty\n+# GUIX_BUILD_OPTIONS should be empty\n ################\n #\n # GUIX_BUILD_OPTIONS is an environment variable recognized by guix commands that\n@@ -45,8 +49,9 @@ exit 1\n fi\n \n ################\n-# Check 3: Make sure that we're not in a dirty worktree\n+# The git worktree should not be dirty\n ################\n+\n if ! git diff-index --quiet HEAD -- && [ -z \"$FORCE_DIRTY_WORKTREE\" ]; then\n cat << EOF\n ERR: The current git worktree is dirty, which may lead to broken builds.\n@@ -60,27 +65,25 @@ Hint: To make your git worktree clean, You may want to:\n          using a dirty worktree\n EOF\n exit 1\n-else\n-    GIT_COMMIT=$(git rev-parse --short=12 HEAD)\n fi\n \n+mkdir -p \"$VERSION_BASE\"\n+\n ################\n-# Check 4: Make sure that build directories do not exist\n+# Build directories should not exist\n ################\n \n # Default to building for all supported HOSTs (overridable by environment)\n export HOSTS=\"${HOSTS:-x86_64-linux-gnu arm-linux-gnueabihf aarch64-linux-gnu riscv64-linux-gnu powerpc64-linux-gnu powerpc64le-linux-gnu\n                        x86_64-w64-mingw32\n                        x86_64-apple-darwin18}\"\n \n-DISTSRC_BASE=\"${DISTSRC_BASE:-${PWD}}\"\n-\n # Usage: distsrc_for_host HOST\n #\n #   HOST: The current platform triple we're building for\n #\n distsrc_for_host() {\n-    echo \"${DISTSRC_BASE}/distsrc-${GIT_COMMIT}-${1}\"\n+    echo \"${DISTSRC_BASE}/distsrc-${VERSION}-${1}\"\n }\n \n # Accumulate a list of build directories that already exist...\n@@ -106,12 +109,11 @@ for host in $hosts_distsrc_exists; do\n done\n exit 1\n else\n-\n     mkdir -p \"$DISTSRC_BASE\"\n fi\n \n ################\n-# Check 5: When building for darwin, make sure that the macOS SDK exists\n+# When building for darwin, the macOS SDK should exists\n ################\n \n for host in $HOSTS; do\n@@ -129,7 +131,7 @@ for host in $HOSTS; do\n done\n \n #########\n-# Setup #\n+# SETUP #\n #########\n \n # Determine the maximum number of jobs to run simultaneously (overridable by\n@@ -172,11 +174,20 @@ time-machine() {\n }\n \n # Make sure an output directory exists for our builds\n-OUTDIR=\"${OUTDIR:-${PWD}/output}\"\n-[ -e \"$OUTDIR\" ] || mkdir -p \"$OUTDIR\"\n+OUTDIR_BASE=\"${OUTDIR_BASE:-${VERSION_BASE}/output}\"\n+mkdir -p \"$OUTDIR_BASE\"\n+\n+# Usage: outdir_for_host HOST\n+#\n+#   HOST: The current platform triple we're building for\n+#\n+outdir_for_host() {\n+    echo \"${OUTDIR_BASE}/${1}\"\n+}\n+\n \n #########\n-# Build #\n+# BUILD #\n #########\n \n # Function to be called when building for host ${1} and the user interrupts the\n@@ -216,15 +227,15 @@ for host in $HOSTS; do\n \n         # shellcheck disable=SC2030\n cat << EOF\n-INFO: Building commit ${GIT_COMMIT:?not set} for platform triple ${HOST:?not set}:\n+INFO: Building ${VERSION:?not set} for platform triple ${HOST:?not set}:\n       ...using reference timestamp: ${SOURCE_DATE_EPOCH:?not set}\n       ...running at most ${JOBS:?not set} jobs\n       ...from worktree directory: '${PWD}'\n           ...bind-mounted in container to: '/bitcoin'\n       ...in build directory: '$(distsrc_for_host \"$HOST\")'\n           ...bind-mounted in container to: '$(DISTSRC_BASE=/distsrc-base && distsrc_for_host \"$HOST\")'\n-      ...outputting in: '${OUTDIR:?not set}'\n-          ...bind-mounted in container to: '/outdir'\n+      ...outdirting in: '$(outdir_for_host \"$HOST\")'\n+          ...bind-mounted in container to: '$(OUTDIR_BASE=/outdir-base && outdir_for_host \"$HOST\")'\n EOF\n \n         # Run the build script 'contrib/guix/libexec/build.sh' in the build\n@@ -299,7 +310,7 @@ EOF\n                                  --no-cwd \\\n                                  --share=\"$PWD\"=/bitcoin \\\n                                  --share=\"$DISTSRC_BASE\"=/distsrc-base \\\n-                                 --share=\"$OUTDIR\"=/outdir \\\n+                                 --share=\"$OUTDIR_BASE\"=/outdir-base \\\n                                  --expose=\"$(git rev-parse --git-common-dir)\" \\\n                                  ${SOURCES_PATH:+--share=\"$SOURCES_PATH\"} \\\n                                  ${BASE_CACHE:+--share=\"$BASE_CACHE\"} \\\n@@ -309,14 +320,16 @@ EOF\n                                  ${SUBSTITUTE_URLS:+--substitute-urls=\"$SUBSTITUTE_URLS\"} \\\n                                  ${ADDITIONAL_GUIX_COMMON_FLAGS} ${ADDITIONAL_GUIX_ENVIRONMENT_FLAGS} \\\n                                  -- env HOST=\"$host\" \\\n+                                        DISTNAME=\"$DISTNAME\" \\\n                                         JOBS=\"$JOBS\" \\\n                                         SOURCE_DATE_EPOCH=\"${SOURCE_DATE_EPOCH:?unable to determine value}\" \\\n                                         ${V:+V=1} \\\n                                         ${SOURCES_PATH:+SOURCES_PATH=\"$SOURCES_PATH\"} \\\n                                         ${BASE_CACHE:+BASE_CACHE=\"$BASE_CACHE\"} \\\n                                         ${SDK_PATH:+SDK_PATH=\"$SDK_PATH\"} \\\n                                         DISTSRC=\"$(DISTSRC_BASE=/distsrc-base && distsrc_for_host \"$HOST\")\" \\\n-                                        OUTDIR=/outdir \\\n+                                        OUTDIR=\"$(OUTDIR_BASE=/outdir-base && outdir_for_host \"$HOST\")\" \\\n+                                        DIST_ARCHIVE_BASE=/outdir-base/dist-archive \\\n                                       bash -c \"cd /bitcoin && bash contrib/guix/libexec/build.sh\"\n     )\n "
      },
      {
        "sha": "bb83516f8919d6decaee6241be460ec78bff9570",
        "filename": "contrib/guix/libexec/build.sh",
        "status": "modified",
        "additions": 4,
        "deletions": 5,
        "changes": 9,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/7f401c953f8bb3574cec48561e13ef3b47dedc6e/contrib/guix/libexec/build.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/7f401c953f8bb3574cec48561e13ef3b47dedc6e/contrib/guix/libexec/build.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/libexec/build.sh?ref=7f401c953f8bb3574cec48561e13ef3b47dedc6e",
        "patch": "@@ -24,6 +24,8 @@ fi\n # Check that required environment variables are set\n cat << EOF\n Required environment variables as seen inside the container:\n+    DIST_ARCHIVE_BASE: ${DIST_ARCHIVE_BASE:?not set}\n+    DISTNAME: ${DISTNAME:?not set}\n     HOST: ${HOST:?not set}\n     SOURCE_DATE_EPOCH: ${SOURCE_DATE_EPOCH:?not set}\n     JOBS: ${JOBS:?not set}\n@@ -198,11 +200,7 @@ make -C depends --jobs=\"$JOBS\" HOST=\"$HOST\" \\\n # Source Tarball Building #\n ###########################\n \n-# Define DISTNAME variable.\n-# shellcheck source=contrib/gitian-descriptors/assign_DISTNAME\n-source contrib/gitian-descriptors/assign_DISTNAME\n-\n-GIT_ARCHIVE=\"${OUTDIR}/src/${DISTNAME}.tar.gz\"\n+GIT_ARCHIVE=\"${DIST_ARCHIVE_BASE}/${DISTNAME}.tar.gz\"\n \n # Create the source tarball if not already there\n if [ ! -e \"$GIT_ARCHIVE\" ]; then\n@@ -275,6 +273,7 @@ mkdir -p \"$DISTSRC\"\n     # version symbols for Linux distro back-compatibility.\n     make -C src --jobs=1 check-symbols  ${V:+V=1}\n \n+    mkdir -p ${OUTDIR}\n     # Make the os-specific installers\n     case \"$HOST\" in\n         *mingw*)"
      }
    ]
  },
  {
    "sha": "d55a1056ee565afed64e42d6f6efb6b0adc5599b",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkNTVhMTA1NmVlNTY1YWZlZDY0ZTQyZDZmNmVmYjZiMGFkYzU1OTli",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-03-17T17:01:07Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-04-05T15:00:39Z"
      },
      "message": "guix: Add troubleshooting documentation entries",
      "tree": {
        "sha": "bcf472e7cc0fab9c7da90681d60debd279a579b0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/bcf472e7cc0fab9c7da90681d60debd279a579b0"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d55a1056ee565afed64e42d6f6efb6b0adc5599b",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d55a1056ee565afed64e42d6f6efb6b0adc5599b",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/d55a1056ee565afed64e42d6f6efb6b0adc5599b",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d55a1056ee565afed64e42d6f6efb6b0adc5599b/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "7f401c953f8bb3574cec48561e13ef3b47dedc6e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7f401c953f8bb3574cec48561e13ef3b47dedc6e",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/7f401c953f8bb3574cec48561e13ef3b47dedc6e"
      }
    ],
    "stats": {
      "total": 51,
      "additions": 51,
      "deletions": 0
    },
    "files": [
      {
        "sha": "2d128c7ed690f6c8b5d7d2ef130be17d4eba0308",
        "filename": "contrib/guix/README.md",
        "status": "modified",
        "additions": 51,
        "deletions": 0,
        "changes": 51,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d55a1056ee565afed64e42d6f6efb6b0adc5599b/contrib/guix/README.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d55a1056ee565afed64e42d6f6efb6b0adc5599b/contrib/guix/README.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/README.md?ref=d55a1056ee565afed64e42d6f6efb6b0adc5599b",
        "patch": "@@ -265,6 +265,57 @@ To use dongcarl's substitute server for Bitcoin Core builds after having\n export SUBSTITUTE_URLS='https://guix.carldong.io https://ci.guix.gnu.org'\n ```\n \n+## Troubleshooting\n+\n+### Derivation failed to build\n+\n+When you see a build failure like below:\n+\n+```\n+building /gnu/store/...-foo-3.6.12.drv...\n+/ 'check' phasenote: keeping build directory `/tmp/guix-build-foo-3.6.12.drv-0'\n+builder for `/gnu/store/...-foo-3.6.12.drv' failed with exit code 1\n+build of /gnu/store/...-foo-3.6.12.drv failed\n+View build log at '/var/log/guix/drvs/../...-foo-3.6.12.drv.bz2'.\n+cannot build derivation `/gnu/store/...-qux-7.69.1.drv': 1 dependencies couldn't be built\n+cannot build derivation `/gnu/store/...-bar-3.16.5.drv': 1 dependencies couldn't be built\n+cannot build derivation `/gnu/store/...-baz-2.0.5.drv': 1 dependencies couldn't be built\n+guix time-machine: error: build of `/gnu/store/...-baz-2.0.5.drv' failed\n+```\n+\n+It means that `guix` failed to build a package named `foo`, which was a\n+dependency of `qux`, `bar`, and `baz`. Importantly, note that the last \"failed\"\n+line is not necessarily the root cause, the first \"failed\" line is.\n+\n+Most of the time, the build failure is due to a spurious test failure or the\n+package's build system/test suite breaking when running multi-threaded. To\n+rebuild _just_ this derivation in a single-threaded fashion:\n+\n+```sh\n+$ guix build --cores=1 /gnu/store/...-foo-3.6.12.drv\n+```\n+\n+If the single-threaded rebuild stil did not succeed, you may need to dig deeper.\n+You may view `foo`'s build logs in `less` like so (please replace paths with the\n+path you see in the build failure output):\n+\n+```sh\n+$ bzcat /var/log/guix/drvs/../...-foo-3.6.12.drv.bz2 | less\n+```\n+\n+`foo`'s build directory is also preserved and available at\n+`/tmp/guix-build-foo-3.6.12.drv-0`. However, if you fail to build `foo` multiple\n+times, it may be `/tmp/...drv-1` or `/tmp/...drv-2`. Always consult the build\n+failure output for the most accurate, up-to-date information.\n+\n+#### python(-minimal): [Errno 84] Invalid or incomplete multibyte or wide character\n+\n+This error occurs when your `$TMPDIR` (default: /tmp) exists on a filesystem\n+which rejects characters not present in the UTF-8 character code set. An example\n+is ZFS with the utf8only=on option set.\n+\n+More information: https://bugs.python.org/issue37584\n+\n ## FAQ\n \n ### How can I trust the binary installation?"
      }
    ]
  },
  {
    "sha": "39741128d3775d198dbee34dc827353bfd18acd8",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzozOTc0MTEyOGQzNzc1ZDE5OGRiZWUzNGRjODI3MzUzYmZkMThhY2Q4",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-03-17T17:03:46Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-04-05T15:00:39Z"
      },
      "message": "guix: Supply --link-profile",
      "tree": {
        "sha": "db4bf390ec57a9d8406563462f3e45c69b0b3f2a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/db4bf390ec57a9d8406563462f3e45c69b0b3f2a"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/39741128d3775d198dbee34dc827353bfd18acd8",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/39741128d3775d198dbee34dc827353bfd18acd8",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/39741128d3775d198dbee34dc827353bfd18acd8",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/39741128d3775d198dbee34dc827353bfd18acd8/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "d55a1056ee565afed64e42d6f6efb6b0adc5599b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d55a1056ee565afed64e42d6f6efb6b0adc5599b",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/d55a1056ee565afed64e42d6f6efb6b0adc5599b"
      }
    ],
    "stats": {
      "total": 5,
      "additions": 3,
      "deletions": 2
    },
    "files": [
      {
        "sha": "6c0930df1826e7bd0bff651ba0f78941f20f50cf",
        "filename": "contrib/guix/guix-build",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/39741128d3775d198dbee34dc827353bfd18acd8/contrib/guix/guix-build",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/39741128d3775d198dbee34dc827353bfd18acd8/contrib/guix/guix-build",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/guix-build?ref=39741128d3775d198dbee34dc827353bfd18acd8",
        "patch": "@@ -317,6 +317,7 @@ EOF\n                                  ${SDK_PATH:+--share=\"$SDK_PATH\"} \\\n                                  --cores=\"$JOBS\" \\\n                                  --keep-failed \\\n+                                 --link-profile \\\n                                  ${SUBSTITUTE_URLS:+--substitute-urls=\"$SUBSTITUTE_URLS\"} \\\n                                  ${ADDITIONAL_GUIX_COMMON_FLAGS} ${ADDITIONAL_GUIX_ENVIRONMENT_FLAGS} \\\n                                  -- env HOST=\"$host\" \\"
      },
      {
        "sha": "dadb21515a42b5a541f4cdff786da41dd904f4fd",
        "filename": "depends/Makefile",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/39741128d3775d198dbee34dc827353bfd18acd8/depends/Makefile",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/39741128d3775d198dbee34dc827353bfd18acd8/depends/Makefile",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/Makefile?ref=39741128d3775d198dbee34dc827353bfd18acd8",
        "patch": "@@ -141,8 +141,8 @@ build_id_string+=system_clang\n $(host_arch)_$(host_os)_id_string+=system_clang\n endif\n \n-build_id_string+=GUIX_ENVIRONMENT=$(GUIX_ENVIRONMENT)\n-$(host_arch)_$(host_os)_id_string+=GUIX_ENVIRONMENT=$(GUIX_ENVIRONMENT)\n+build_id_string+=GUIX_ENVIRONMENT=$(realpath $(GUIX_ENVIRONMENT))\n+$(host_arch)_$(host_os)_id_string+=GUIX_ENVIRONMENT=$(realpath $(GUIX_ENVIRONMENT))\n \n qrencode_packages_$(NO_QR) = $(qrencode_packages)\n "
      }
    ]
  },
  {
    "sha": "c1ae726a13ecfa5e7e9fdc3030a8110b8bb263f8",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjMWFlNzI2YTEzZWNmYTVlN2U5ZmRjMzAzMGE4MTEwYjhiYjI2M2Y4",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-03-17T17:07:40Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-04-05T15:00:39Z"
      },
      "message": "guix: More thoroughly control native toolchain",
      "tree": {
        "sha": "6c8606544b5f1122082c819317ce0a3f0bbc7146",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6c8606544b5f1122082c819317ce0a3f0bbc7146"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c1ae726a13ecfa5e7e9fdc3030a8110b8bb263f8",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c1ae726a13ecfa5e7e9fdc3030a8110b8bb263f8",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/c1ae726a13ecfa5e7e9fdc3030a8110b8bb263f8",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c1ae726a13ecfa5e7e9fdc3030a8110b8bb263f8/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "39741128d3775d198dbee34dc827353bfd18acd8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/39741128d3775d198dbee34dc827353bfd18acd8",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/39741128d3775d198dbee34dc827353bfd18acd8"
      }
    ],
    "stats": {
      "total": 46,
      "additions": 41,
      "deletions": 5
    },
    "files": [
      {
        "sha": "7d4609c17a98f13b8311b5304d784df008d1be3a",
        "filename": "contrib/guix/libexec/build.sh",
        "status": "modified",
        "additions": 22,
        "deletions": 4,
        "changes": 26,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c1ae726a13ecfa5e7e9fdc3030a8110b8bb263f8/contrib/guix/libexec/build.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c1ae726a13ecfa5e7e9fdc3030a8110b8bb263f8/contrib/guix/libexec/build.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/libexec/build.sh?ref=c1ae726a13ecfa5e7e9fdc3030a8110b8bb263f8",
        "patch": "@@ -54,16 +54,34 @@ store_path() {\n # Set environment variables to point the NATIVE toolchain to the right\n # includes/libs\n NATIVE_GCC=\"$(store_path gcc-toolchain)\"\n-export LIBRARY_PATH=\"${NATIVE_GCC}/lib:${NATIVE_GCC}/lib64\"\n-export CPATH=\"${NATIVE_GCC}/include\"\n+\n+unset LIBRARY_PATH\n+unset CPATH\n unset C_INCLUDE_PATH\n unset CPLUS_INCLUDE_PATH\n+unset OBJC_INCLUDE_PATH\n+unset OBJCPLUS_INCLUDE_PATH\n+\n+export LIBRARY_PATH=\"${NATIVE_GCC}/lib:${NATIVE_GCC}/lib64\"\n+export C_INCLUDE_PATH=\"${NATIVE_GCC}/include\"\n+export CPLUS_INCLUDE_PATH=\"${NATIVE_GCC}/include/c++:${NATIVE_GCC}/include\"\n+export OBJC_INCLUDE_PATH=\"${NATIVE_GCC}/include\"\n+export OBJCPLUS_INCLUDE_PATH=\"${NATIVE_GCC}/include/c++:${NATIVE_GCC}/include\"\n+\n+prepend_to_search_env_var() {\n+    export \"${1}=${2}${!1:+:}${!1}\"\n+}\n+\n case \"$HOST\" in\n     *darwin*)\n         # When targeting darwin, zlib is required by native_libdmg-hfsplus.\n         zlib_store_path=$(store_path \"zlib\")\n-        export LIBRARY_PATH=\"${zlib_store_path}/lib:${LIBRARY_PATH}\"\n-        export CPATH=\"${zlib_store_path}/include:${CPATH}\"\n+\n+        prepend_to_search_env_var LIBRARY_PATH \"${zlib_store_path}/lib\"\n+        prepend_to_search_env_var C_INCLUDE_PATH \"${zlib_store_path}/include\"\n+        prepend_to_search_env_var CPLUS_INCLUDE_PATH \"${zlib_store_path}/include\"\n+        prepend_to_search_env_var OBJC_INCLUDE_PATH \"${zlib_store_path}/include\"\n+        prepend_to_search_env_var OBJCPLUS_INCLUDE_PATH \"${zlib_store_path}/include\"\n esac\n \n # Set environment variables to point the CROSS toolchain to the right"
      },
      {
        "sha": "ae83eae911caa0badf5e5ce1ba5871c0fc68cb5e",
        "filename": "depends/packages/qt.mk",
        "status": "modified",
        "additions": 2,
        "deletions": 1,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c1ae726a13ecfa5e7e9fdc3030a8110b8bb263f8/depends/packages/qt.mk",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c1ae726a13ecfa5e7e9fdc3030a8110b8bb263f8/depends/packages/qt.mk",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/packages/qt.mk?ref=c1ae726a13ecfa5e7e9fdc3030a8110b8bb263f8",
        "patch": "@@ -10,7 +10,7 @@ $(package)_patches=fix_qt_pkgconfig.patch mac-qmake.conf fix_no_printer.patch no\n $(package)_patches+= fix_android_qmake_conf.patch fix_android_jni_static.patch dont_hardcode_pwd.patch\n $(package)_patches+= drop_lrelease_dependency.patch no_sdk_version_check.patch\n $(package)_patches+= fix_qpainter_non_determinism.patch fix_lib_paths.patch fix_android_pch.patch\n-$(package)_patches+= fix_bigsur_drawing.patch\n+$(package)_patches+= fix_bigsur_drawing.patch qtbase-moc-ignore-gcc-macro.patch\n \n $(package)_qttranslations_file_name=qttranslations-$($(package)_suffix)\n $(package)_qttranslations_sha256_hash=e1de58ed108b7e0a138815ea60fd46a2c4e1fc31396a707e5630e92de79c53de\n@@ -232,6 +232,7 @@ define $(package)_preprocess_cmds\n   patch -p1 -i $($(package)_patch_dir)/no_sdk_version_check.patch && \\\n   patch -p1 -i $($(package)_patch_dir)/fix_lib_paths.patch && \\\n   patch -p1 -i $($(package)_patch_dir)/fix_bigsur_drawing.patch && \\\n+  patch -p1 -i $($(package)_patch_dir)/qtbase-moc-ignore-gcc-macro.patch && \\\n   sed -i.old \"s|updateqm.commands = \\$$$$\\$$$$LRELEASE|updateqm.commands = $($(package)_extract_dir)/qttools/bin/lrelease|\" qttranslations/translations/translations.pro && \\\n   mkdir -p qtbase/mkspecs/macx-clang-linux &&\\\n   cp -f qtbase/mkspecs/macx-clang/qplatformdefs.h qtbase/mkspecs/macx-clang-linux/ &&\\"
      },
      {
        "sha": "0358bea6e940384ada32e83fa8ed5bf987b90a14",
        "filename": "depends/patches/qt/qtbase-moc-ignore-gcc-macro.patch",
        "status": "added",
        "additions": 17,
        "deletions": 0,
        "changes": 17,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c1ae726a13ecfa5e7e9fdc3030a8110b8bb263f8/depends/patches/qt/qtbase-moc-ignore-gcc-macro.patch",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c1ae726a13ecfa5e7e9fdc3030a8110b8bb263f8/depends/patches/qt/qtbase-moc-ignore-gcc-macro.patch",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/patches/qt/qtbase-moc-ignore-gcc-macro.patch?ref=c1ae726a13ecfa5e7e9fdc3030a8110b8bb263f8",
        "patch": "@@ -0,0 +1,17 @@\n+The moc executable loops through headers on CPLUS_INCLUDE_PATH and stumbles\n+on the GCC internal _GLIBCXX_VISIBILITY macro.  Tell it to ignore it as it is\n+not supposed to be looking there to begin with.\n+\n+Upstream report: https://bugreports.qt.io/browse/QTBUG-83160\n+\n+diff --git a/qtbase/src/tools/moc/main.cpp b/qtbase/src/tools/moc/main.cpp\n+--- a/qtbase/src/tools/moc/main.cpp\n++++ b/qtbase/src/tools/moc/main.cpp\n+@@ -188,6 +188,7 @@ int runMoc(int argc, char **argv)\n+     dummyVariadicFunctionMacro.arguments += Symbol(0, PP_IDENTIFIER, \"__VA_ARGS__\");\n+     pp.macros[\"__attribute__\"] = dummyVariadicFunctionMacro;\n+     pp.macros[\"__declspec\"] = dummyVariadicFunctionMacro;\n++    pp.macros[\"_GLIBCXX_VISIBILITY\"] = dummyVariadicFunctionMacro;\n+ \n+     QString filename;\n+     QString output;"
      }
    ]
  },
  {
    "sha": "1742f8e12d163852df09575e03edcd3db73198ee",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoxNzQyZjhlMTJkMTYzODUyZGYwOTU3NWUwM2VkY2QzZGI3MzE5OGVl",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-03-17T17:14:00Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-04-05T15:00:39Z"
      },
      "message": "guix: Add early health check for guix-daemon",
      "tree": {
        "sha": "b149197696feb6f02698f57ee4594e8bb36faff5",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b149197696feb6f02698f57ee4594e8bb36faff5"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1742f8e12d163852df09575e03edcd3db73198ee",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1742f8e12d163852df09575e03edcd3db73198ee",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/1742f8e12d163852df09575e03edcd3db73198ee",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1742f8e12d163852df09575e03edcd3db73198ee/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "c1ae726a13ecfa5e7e9fdc3030a8110b8bb263f8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c1ae726a13ecfa5e7e9fdc3030a8110b8bb263f8",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/c1ae726a13ecfa5e7e9fdc3030a8110b8bb263f8"
      }
    ],
    "stats": {
      "total": 27,
      "additions": 27,
      "deletions": 0
    },
    "files": [
      {
        "sha": "7f74524ddc33da235363cfcb15cb180a53619cd3",
        "filename": "contrib/guix/guix-build",
        "status": "modified",
        "additions": 27,
        "deletions": 0,
        "changes": 27,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/1742f8e12d163852df09575e03edcd3db73198ee/contrib/guix/guix-build",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/1742f8e12d163852df09575e03edcd3db73198ee/contrib/guix/guix-build",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/guix-build?ref=1742f8e12d163852df09575e03edcd3db73198ee",
        "patch": "@@ -130,6 +130,33 @@ for host in $HOSTS; do\n     esac\n done\n \n+################\n+# Check that we can connect to the guix-daemon\n+################\n+\n+cat << EOF\n+Checking that we can connect to the guix-daemon...\n+\n+Hint: If this hangs, you may want to try turning your guix-daemon off and on\n+      again.\n+\n+EOF\n+if ! guix gc --list-failures > /dev/null; then\n+cat << EOF\n+\n+ERR: Failed to connect to the guix-daemon, please ensure that one is running and\n+     reachable.\n+EOF\n+exit 1\n+fi\n+\n+# Developer note: we could use `guix repl` for this check and run:\n+#\n+#     (import (guix store)) (close-connection (open-connection))\n+#\n+# However, the internal API is likely to change more than the CLI invocation\n+\n+\n #########\n # SETUP #\n #########"
      }
    ]
  },
  {
    "sha": "1aec0eda8fd31a57b0621eea616398017c2ead98",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoxYWVjMGVkYThmZDMxYTU3YjA2MjFlZWE2MTYzOTgwMTdjMmVhZDk4",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-03-17T17:14:21Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-04-05T15:00:39Z"
      },
      "message": "guix: Fallback to local build for substitute-enabled Guix users",
      "tree": {
        "sha": "fcb5f52438f0486458039f5853f620003a063649",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/fcb5f52438f0486458039f5853f620003a063649"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1aec0eda8fd31a57b0621eea616398017c2ead98",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1aec0eda8fd31a57b0621eea616398017c2ead98",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/1aec0eda8fd31a57b0621eea616398017c2ead98",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1aec0eda8fd31a57b0621eea616398017c2ead98/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "1742f8e12d163852df09575e03edcd3db73198ee",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1742f8e12d163852df09575e03edcd3db73198ee",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/1742f8e12d163852df09575e03edcd3db73198ee"
      }
    ],
    "stats": {
      "total": 2,
      "additions": 2,
      "deletions": 0
    },
    "files": [
      {
        "sha": "d817fb74ba5bd1b75faa568c081ee9b9535feb33",
        "filename": "contrib/guix/guix-build",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/1aec0eda8fd31a57b0621eea616398017c2ead98/contrib/guix/guix-build",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/1aec0eda8fd31a57b0621eea616398017c2ead98/contrib/guix/guix-build",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/guix-build?ref=1aec0eda8fd31a57b0621eea616398017c2ead98",
        "patch": "@@ -195,6 +195,7 @@ time-machine() {\n                       --commit=490e39ff303f4f6873a04bfb8253755bdae1b29c \\\n                       --cores=\"$JOBS\" \\\n                       --keep-failed \\\n+                      --fallback \\\n                       ${SUBSTITUTE_URLS:+--substitute-urls=\"$SUBSTITUTE_URLS\"} \\\n                       ${ADDITIONAL_GUIX_COMMON_FLAGS} ${ADDITIONAL_GUIX_TIMEMACHINE_FLAGS} \\\n                       -- \"$@\"\n@@ -344,6 +345,7 @@ EOF\n                                  ${SDK_PATH:+--share=\"$SDK_PATH\"} \\\n                                  --cores=\"$JOBS\" \\\n                                  --keep-failed \\\n+                                 --fallback \\\n                                  --link-profile \\\n                                  ${SUBSTITUTE_URLS:+--substitute-urls=\"$SUBSTITUTE_URLS\"} \\\n                                  ${ADDITIONAL_GUIX_COMMON_FLAGS} ${ADDITIONAL_GUIX_ENVIRONMENT_FLAGS} \\"
      }
    ]
  },
  {
    "sha": "ca85679eb43b8375a95d82101977829d08fb1e1b",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjYTg1Njc5ZWI0M2I4Mzc1YTk1ZDgyMTAxOTc3ODI5ZDA4ZmIxZTFi",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-03-17T17:15:08Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-04-05T15:00:39Z"
      },
      "message": "guix: Use clang-toolchain instead of clang",
      "tree": {
        "sha": "c14df80d3692de8ae19db89c0fb06cb2695fc082",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c14df80d3692de8ae19db89c0fb06cb2695fc082"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ca85679eb43b8375a95d82101977829d08fb1e1b",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ca85679eb43b8375a95d82101977829d08fb1e1b",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/ca85679eb43b8375a95d82101977829d08fb1e1b",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ca85679eb43b8375a95d82101977829d08fb1e1b/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "1aec0eda8fd31a57b0621eea616398017c2ead98",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1aec0eda8fd31a57b0621eea616398017c2ead98",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/1aec0eda8fd31a57b0621eea616398017c2ead98"
      }
    ],
    "stats": {
      "total": 2,
      "additions": 1,
      "deletions": 1
    },
    "files": [
      {
        "sha": "3fc3f4d404d5ee126a0a16957d1552216229c9ca",
        "filename": "contrib/guix/manifest.scm",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/ca85679eb43b8375a95d82101977829d08fb1e1b/contrib/guix/manifest.scm",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/ca85679eb43b8375a95d82101977829d08fb1e1b/contrib/guix/manifest.scm",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/manifest.scm?ref=ca85679eb43b8375a95d82101977829d08fb1e1b",
        "patch": "@@ -237,5 +237,5 @@ chain for \" target \" development.\"))\n           ((string-contains target \"-linux-\")\n            (list (make-bitcoin-cross-toolchain target)))\n           ((string-contains target \"darwin\")\n-           (list clang-8 binutils imagemagick libtiff librsvg font-tuffy cmake xorriso))\n+           (list clang-toolchain-8 binutils imagemagick libtiff librsvg font-tuffy cmake xorriso))\n           (else '())))))"
      }
    ]
  },
  {
    "sha": "65176ab5730dff34466caaecdd292625ef8294fc",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo2NTE3NmFiNTczMGRmZjM0NDY2Y2FhZWNkZDI5MjYyNWVmODI5NGZj",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-03-17T19:33:18Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-04-05T15:00:39Z"
      },
      "message": "guix: Remove codesign_allocate+pagestuff from unsigned tarball",
      "tree": {
        "sha": "e4ef015e053c7bb6b86ba5690eccda9b0ab119e8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e4ef015e053c7bb6b86ba5690eccda9b0ab119e8"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/65176ab5730dff34466caaecdd292625ef8294fc",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/65176ab5730dff34466caaecdd292625ef8294fc",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/65176ab5730dff34466caaecdd292625ef8294fc",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/65176ab5730dff34466caaecdd292625ef8294fc/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "ca85679eb43b8375a95d82101977829d08fb1e1b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ca85679eb43b8375a95d82101977829d08fb1e1b",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/ca85679eb43b8375a95d82101977829d08fb1e1b"
      }
    ],
    "stats": {
      "total": 3,
      "additions": 0,
      "deletions": 3
    },
    "files": [
      {
        "sha": "4a6b7792a9769eba6d68602ac4631a4e313792d1",
        "filename": "contrib/guix/libexec/build.sh",
        "status": "modified",
        "additions": 0,
        "deletions": 3,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/65176ab5730dff34466caaecdd292625ef8294fc/contrib/guix/libexec/build.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/65176ab5730dff34466caaecdd292625ef8294fc/contrib/guix/libexec/build.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/libexec/build.sh?ref=65176ab5730dff34466caaecdd292625ef8294fc",
        "patch": "@@ -323,9 +323,6 @@ mkdir -p \"$DISTSRC\"\n                 osx_volname \\\n                 contrib/macdeploy/detached-sig-{apply,create}.sh \\\n                 \"${BASEPREFIX}/${HOST}\"/native/bin/dmg\n-            for util in codesign_allocate pagestuff; do\n-                cp --no-target-directory {\"${BASEPREFIX}/${HOST}/native/bin/${HOST}-\",\"unsigned-app-${HOST}/\"}\"$util\"\n-            done\n             mv --target-directory=\"unsigned-app-${HOST}\" dist\n             (\n                 cd \"unsigned-app-${HOST}\""
      }
    ]
  },
  {
    "sha": "06d6cf6784421290e6235fe8684d5e08ed6f1b62",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowNmQ2Y2Y2Nzg0NDIxMjkwZTYyMzVmZTg2ODRkNWUwOGVkNmYxYjYy",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-03-18T20:20:18Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-04-05T15:00:39Z"
      },
      "message": "depends: libdmg-hfsplus: Skip CMake RPATH patching\n\nCMake's RPATH patching apparently causes non-reproducibility in the\nexecutables which are produced, manifesting in a difference in padding\nin the .dynstr section (we found this while investigating\nnon-reproducibility in the \"dmg\" tool). This RPATH patching can be\nsafely skipped for executables which don't depend on internal shared\nlibraries.\n\nDocumentation sources:\n1. https://gitlab.kitware.com/cmake/community/-/wikis/doc/cmake/RPATH-handling\n2. https://reproducible-builds.org/docs/deterministic-build-systems/#cmake-notes\n\nPrior debugging art:\n1. https://stackoverflow.com/questions/63438206/cmake-g-reproducible-build-issue-with-changing-build-path\n2. https://github.com/NXPmicro/mfgtools/pull/229/files",
      "tree": {
        "sha": "abf5c623cf47f5612114960cb370348ba8c50792",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/abf5c623cf47f5612114960cb370348ba8c50792"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/06d6cf6784421290e6235fe8684d5e08ed6f1b62",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/06d6cf6784421290e6235fe8684d5e08ed6f1b62",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/06d6cf6784421290e6235fe8684d5e08ed6f1b62",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/06d6cf6784421290e6235fe8684d5e08ed6f1b62/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "65176ab5730dff34466caaecdd292625ef8294fc",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/65176ab5730dff34466caaecdd292625ef8294fc",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/65176ab5730dff34466caaecdd292625ef8294fc"
      }
    ],
    "stats": {
      "total": 2,
      "additions": 1,
      "deletions": 1
    },
    "files": [
      {
        "sha": "f9d4b0797f726213f3abae28fac8dd2dd962a1a8",
        "filename": "depends/packages/native_libdmg-hfsplus.mk",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/06d6cf6784421290e6235fe8684d5e08ed6f1b62/depends/packages/native_libdmg-hfsplus.mk",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/06d6cf6784421290e6235fe8684d5e08ed6f1b62/depends/packages/native_libdmg-hfsplus.mk",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/packages/native_libdmg-hfsplus.mk?ref=06d6cf6784421290e6235fe8684d5e08ed6f1b62",
        "patch": "@@ -12,7 +12,7 @@ define $(package)_preprocess_cmds\n endef\n \n define $(package)_config_cmds\n-  $($(package)_cmake) -DCMAKE_C_FLAGS=\"$$($(1)_cflags) -Wl,--build-id=none\" ..\n+  $($(package)_cmake) -DCMAKE_C_FLAGS=\"$$($(1)_cflags) -Wl,--build-id=none\" -DCMAKE_SKIP_RPATH=\"ON\" ..\n endef\n \n define $(package)_build_cmds"
      }
    ]
  },
  {
    "sha": "7476b46f1893a4858616d2a8456a7c43238851ed",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo3NDc2YjQ2ZjE4OTNhNDg1ODYxNmQyYTg0NTZhN2M0MzIzODg1MWVk",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-03-23T16:59:59Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-04-05T15:00:39Z"
      },
      "message": "guix: Build dmg as a static binary\n\nThis relatively easy change eliminates all runtime dependencies (except\nfor the kernel) for dmg, which is the only native build tool that gets\nput in our output tarballs.\n\nThis allows much more flexibility when constructing the codesigning\nenvironment, and is much more robust.",
      "tree": {
        "sha": "e6de72becabe6936d1ec4576b0acb67efae7ebed",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e6de72becabe6936d1ec4576b0acb67efae7ebed"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7476b46f1893a4858616d2a8456a7c43238851ed",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7476b46f1893a4858616d2a8456a7c43238851ed",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/7476b46f1893a4858616d2a8456a7c43238851ed",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7476b46f1893a4858616d2a8456a7c43238851ed/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "06d6cf6784421290e6235fe8684d5e08ed6f1b62",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/06d6cf6784421290e6235fe8684d5e08ed6f1b62",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/06d6cf6784421290e6235fe8684d5e08ed6f1b62"
      }
    ],
    "stats": {
      "total": 12,
      "additions": 8,
      "deletions": 4
    },
    "files": [
      {
        "sha": "4239c3d4755566d08540b5e7617bafb88a709c21",
        "filename": "contrib/guix/libexec/build.sh",
        "status": "modified",
        "additions": 4,
        "deletions": 2,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/7476b46f1893a4858616d2a8456a7c43238851ed/contrib/guix/libexec/build.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/7476b46f1893a4858616d2a8456a7c43238851ed/contrib/guix/libexec/build.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/libexec/build.sh?ref=7476b46f1893a4858616d2a8456a7c43238851ed",
        "patch": "@@ -54,6 +54,7 @@ store_path() {\n # Set environment variables to point the NATIVE toolchain to the right\n # includes/libs\n NATIVE_GCC=\"$(store_path gcc-toolchain)\"\n+NATIVE_GCC_STATIC=\"$(store_path gcc-toolchain static)\"\n \n unset LIBRARY_PATH\n unset CPATH\n@@ -62,7 +63,7 @@ unset CPLUS_INCLUDE_PATH\n unset OBJC_INCLUDE_PATH\n unset OBJCPLUS_INCLUDE_PATH\n \n-export LIBRARY_PATH=\"${NATIVE_GCC}/lib:${NATIVE_GCC}/lib64\"\n+export LIBRARY_PATH=\"${NATIVE_GCC}/lib:${NATIVE_GCC}/lib64:${NATIVE_GCC_STATIC}/lib:${NATIVE_GCC_STATIC}/lib64\"\n export C_INCLUDE_PATH=\"${NATIVE_GCC}/include\"\n export CPLUS_INCLUDE_PATH=\"${NATIVE_GCC}/include/c++:${NATIVE_GCC}/include\"\n export OBJC_INCLUDE_PATH=\"${NATIVE_GCC}/include\"\n@@ -76,8 +77,9 @@ case \"$HOST\" in\n     *darwin*)\n         # When targeting darwin, zlib is required by native_libdmg-hfsplus.\n         zlib_store_path=$(store_path \"zlib\")\n+        zlib_static_store_path=$(store_path \"zlib\" static)\n \n-        prepend_to_search_env_var LIBRARY_PATH \"${zlib_store_path}/lib\"\n+        prepend_to_search_env_var LIBRARY_PATH \"${zlib_static_store_path}/lib:${zlib_store_path}/lib\"\n         prepend_to_search_env_var C_INCLUDE_PATH \"${zlib_store_path}/include\"\n         prepend_to_search_env_var CPLUS_INCLUDE_PATH \"${zlib_store_path}/include\"\n         prepend_to_search_env_var OBJC_INCLUDE_PATH \"${zlib_store_path}/include\""
      },
      {
        "sha": "910a9dd6f65230b4215c3c343dcbd1f127ab9f09",
        "filename": "contrib/guix/manifest.scm",
        "status": "modified",
        "additions": 3,
        "deletions": 1,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/7476b46f1893a4858616d2a8456a7c43238851ed/contrib/guix/manifest.scm",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/7476b46f1893a4858616d2a8456a7c43238851ed/contrib/guix/manifest.scm",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/manifest.scm?ref=7476b46f1893a4858616d2a8456a7c43238851ed",
        "patch": "@@ -214,6 +214,7 @@ chain for \" target \" development.\"))\n         gzip\n         xz\n         zlib\n+        (list zlib \"static\")\n         ;; Build tools\n         gnu-make\n         libtool\n@@ -227,7 +228,8 @@ chain for \" target \" development.\"))\n         ;; Git\n         git\n         ;; Native gcc 7 toolchain\n-        gcc-toolchain-7)\n+        gcc-toolchain-7\n+        (list gcc-toolchain-7 \"static\"))\n   (let ((target (getenv \"HOST\")))\n     (cond ((string-suffix? \"-mingw32\" target)\n            ;; Windows"
      },
      {
        "sha": "c7c8adef41580324169ac5be802beafa9860759f",
        "filename": "depends/packages/native_libdmg-hfsplus.mk",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/7476b46f1893a4858616d2a8456a7c43238851ed/depends/packages/native_libdmg-hfsplus.mk",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/7476b46f1893a4858616d2a8456a7c43238851ed/depends/packages/native_libdmg-hfsplus.mk",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/packages/native_libdmg-hfsplus.mk?ref=7476b46f1893a4858616d2a8456a7c43238851ed",
        "patch": "@@ -12,7 +12,7 @@ define $(package)_preprocess_cmds\n endef\n \n define $(package)_config_cmds\n-  $($(package)_cmake) -DCMAKE_C_FLAGS=\"$$($(1)_cflags) -Wl,--build-id=none\" -DCMAKE_SKIP_RPATH=\"ON\" ..\n+  $($(package)_cmake) -DCMAKE_C_FLAGS=\"$$($(1)_cflags) -Wl,--build-id=none\" -DCMAKE_SKIP_RPATH=\"ON\" -DCMAKE_EXE_LINKER_FLAGS=\"-static\" -DCMAKE_FIND_LIBRARY_SUFFIXES=\".a\" ..\n endef\n \n define $(package)_build_cmds"
      }
    ]
  }
]