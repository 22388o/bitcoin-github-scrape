[
  {
    "sha": "0cc7b2352e749a7863d7b5ed680e3fb5f04f9511",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowY2M3YjIzNTJlNzQ5YTc4NjNkN2I1ZWQ2ODBlM2ZiNWYwNGY5NTEx",
    "commit": {
      "author": {
        "name": "Daniel Kraft",
        "email": "d@domob.eu",
        "date": "2015-06-10T12:57:57Z"
      },
      "committer": {
        "name": "Daniel Kraft",
        "email": "d@domob.eu",
        "date": "2015-06-11T10:09:05Z"
      },
      "message": "Fix univalue handling of \\u0000 characters.\n\nUnivalue's parsing of \\u escape sequences did not handle NUL characters\ncorrectly.  They were, effectively, dropped.  The extended test-case\nfails with the old code, and is fixed with this patch.",
      "tree": {
        "sha": "613e4d563b3f7f7590b45621da797536d77c04c3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/613e4d563b3f7f7590b45621da797536d77c04c3"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0cc7b2352e749a7863d7b5ed680e3fb5f04f9511",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0cc7b2352e749a7863d7b5ed680e3fb5f04f9511",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/0cc7b2352e749a7863d7b5ed680e3fb5f04f9511",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0cc7b2352e749a7863d7b5ed680e3fb5f04f9511/comments",
    "author": {
      "login": "domob1812",
      "id": 4943644,
      "node_id": "MDQ6VXNlcjQ5NDM2NDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4943644?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/domob1812",
      "html_url": "https://github.com/domob1812",
      "followers_url": "https://api.github.com/users/domob1812/followers",
      "following_url": "https://api.github.com/users/domob1812/following{/other_user}",
      "gists_url": "https://api.github.com/users/domob1812/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/domob1812/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/domob1812/subscriptions",
      "organizations_url": "https://api.github.com/users/domob1812/orgs",
      "repos_url": "https://api.github.com/users/domob1812/repos",
      "events_url": "https://api.github.com/users/domob1812/events{/privacy}",
      "received_events_url": "https://api.github.com/users/domob1812/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "domob1812",
      "id": 4943644,
      "node_id": "MDQ6VXNlcjQ5NDM2NDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4943644?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/domob1812",
      "html_url": "https://github.com/domob1812",
      "followers_url": "https://api.github.com/users/domob1812/followers",
      "following_url": "https://api.github.com/users/domob1812/following{/other_user}",
      "gists_url": "https://api.github.com/users/domob1812/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/domob1812/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/domob1812/subscriptions",
      "organizations_url": "https://api.github.com/users/domob1812/orgs",
      "repos_url": "https://api.github.com/users/domob1812/repos",
      "events_url": "https://api.github.com/users/domob1812/events{/privacy}",
      "received_events_url": "https://api.github.com/users/domob1812/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "51870fc1512157de3b3b9640a9332afb7e2c3aa4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/51870fc1512157de3b3b9640a9332afb7e2c3aa4",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/51870fc1512157de3b3b9640a9332afb7e2c3aa4"
      }
    ],
    "stats": {
      "total": 21,
      "additions": 10,
      "deletions": 11
    },
    "files": [
      {
        "sha": "2c1d303f660698ae731b7de1e5fec4f95c753817",
        "filename": "src/test/univalue_tests.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 2,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0cc7b2352e749a7863d7b5ed680e3fb5f04f9511/src/test/univalue_tests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0cc7b2352e749a7863d7b5ed680e3fb5f04f9511/src/test/univalue_tests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/univalue_tests.cpp?ref=0cc7b2352e749a7863d7b5ed680e3fb5f04f9511",
        "patch": "@@ -286,7 +286,7 @@ BOOST_AUTO_TEST_CASE(univalue_object)\n }\n \n static const char *json1 =\n-\"[1.10000000,{\\\"key1\\\":\\\"str\\\",\\\"key2\\\":800,\\\"key3\\\":{\\\"name\\\":\\\"martian\\\"}}]\";\n+\"[1.10000000,{\\\"key1\\\":\\\"str\\\\u0000\\\",\\\"key2\\\":800,\\\"key3\\\":{\\\"name\\\":\\\"martian\\\"}}]\";\n \n BOOST_AUTO_TEST_CASE(univalue_readwrite)\n {\n@@ -306,7 +306,9 @@ BOOST_AUTO_TEST_CASE(univalue_readwrite)\n     BOOST_CHECK_EQUAL(obj.size(), 3);\n \n     BOOST_CHECK(obj[\"key1\"].isStr());\n-    BOOST_CHECK_EQUAL(obj[\"key1\"].getValStr(), \"str\");\n+    std::string correctValue(\"str\");\n+    correctValue.push_back('\\0');\n+    BOOST_CHECK_EQUAL(obj[\"key1\"].getValStr(), correctValue);\n     BOOST_CHECK(obj[\"key2\"].isNum());\n     BOOST_CHECK_EQUAL(obj[\"key2\"].getValStr(), \"800\");\n     BOOST_CHECK(obj[\"key3\"].isObject());"
      },
      {
        "sha": "261771811de67cde5d776d7be056a8d0855a6dc6",
        "filename": "src/univalue/univalue_read.cpp",
        "status": "modified",
        "additions": 6,
        "deletions": 9,
        "changes": 15,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0cc7b2352e749a7863d7b5ed680e3fb5f04f9511/src/univalue/univalue_read.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0cc7b2352e749a7863d7b5ed680e3fb5f04f9511/src/univalue/univalue_read.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/univalue/univalue_read.cpp?ref=0cc7b2352e749a7863d7b5ed680e3fb5f04f9511",
        "patch": "@@ -188,25 +188,22 @@ enum jtokentype getJsonToken(string& tokenVal, unsigned int& consumed,\n                 case 't':  valStr += \"\\t\"; break;\n \n                 case 'u': {\n-                    char buf[4] = {0,0,0,0};\n-                    char *last = &buf[0];\n                     unsigned int codepoint;\n                     if (hatoui(raw + 1, raw + 1 + 4, codepoint) !=\n                                raw + 1 + 4)\n                         return JTOK_ERR;\n \n                     if (codepoint <= 0x7f)\n-                         *last = (char)codepoint;\n+                        valStr.push_back((char)codepoint);\n                     else if (codepoint <= 0x7FF) {\n-                        *last++ = (char)(0xC0 | (codepoint >> 6));\n-                        *last = (char)(0x80 | (codepoint & 0x3F));\n+                        valStr.push_back((char)(0xC0 | (codepoint >> 6)));\n+                        valStr.push_back((char)(0x80 | (codepoint & 0x3F)));\n                     } else if (codepoint <= 0xFFFF) {\n-                        *last++ = (char)(0xE0 | (codepoint >> 12));\n-                        *last++ = (char)(0x80 | ((codepoint >> 6) & 0x3F));\n-                        *last = (char)(0x80 | (codepoint & 0x3F));\n+                        valStr.push_back((char)(0xE0 | (codepoint >> 12)));\n+                        valStr.push_back((char)(0x80 | ((codepoint >> 6) & 0x3F)));\n+                        valStr.push_back((char)(0x80 | (codepoint & 0x3F)));\n                     }\n \n-                    valStr += buf;\n                     raw += 4;\n                     break;\n                     }"
      }
    ]
  }
]