laanwj,2015-05-16T07:19:09Z,Concept ACK; I like making opening the debug log explicit. \n\nThis will correctly handle any sequence of Shutdown() being called after AppInit2 errored out somewhere along the way? (just asking -  previous changes in this sequence have tended to cause unexpected problems there)\n,https://github.com/bitcoin/bitcoin/pull/6149#issuecomment-102583130,102583130,
ajweiss,2015-05-18T23:20:14Z,"It will now.  I wasn't able to get it to crash in my testing, but I believe that it was possible if the list/buffer were left static.\n\nI believe the issue you're bringing up is #1832 where the mutex that protects the log was being destroyed before the log print functions were being called resulting in a crash on shutdown.  The fix for that was to explicitly initialize the mutex and put it on the",https://github.com/bitcoin/bitcoin/pull/6149#issuecomment-103255112,103255112,
laanwj,2015-07-02T17:42:35Z,"Needs nits addressed, should otherwise be ready for merging.\n",https://github.com/bitcoin/bitcoin/pull/6149#issuecomment-118106663,118106663,
ajweiss,2015-07-07T03:28:42Z,Nits addressed and rebased.  Waiting for Travis... (which appears to be attempting to build the whole depends tree?)\n,https://github.com/bitcoin/bitcoin/pull/6149#issuecomment-119060761,119060761,
jgarzik,2015-07-07T03:30:02Z,lightly tested ACK\n,https://github.com/bitcoin/bitcoin/pull/6149#issuecomment-119061360,119061360,
laanwj,2015-07-22T16:20:27Z,Tested ACK\n,https://github.com/bitcoin/bitcoin/pull/6149#issuecomment-123778319,123778319,
laanwj,2015-06-01T10:18:52Z,This function can be static\n,https://github.com/bitcoin/bitcoin/pull/6149#discussion_r31413929,31413929,src/util.cpp
laanwj,2015-06-01T10:19:50Z,Function can be static\n,https://github.com/bitcoin/bitcoin/pull/6149#discussion_r31413983,31413983,src/util.cpp
laanwj,2015-06-01T10:22:08Z,"Also I'd suggest to rename it to `FileWriteStr`, and pass in the `file` argument explicitly. This makes for a clearer utility function.\n",https://github.com/bitcoin/bitcoin/pull/6149#discussion_r31414090,31414090,src/util.cpp
laanwj,2015-06-01T10:23:59Z,Could delete `vMsgsBeforeOpenLog` here and set it to NULL.\n,https://github.com/bitcoin/bitcoin/pull/6149#discussion_r31414179,31414179,src/util.cpp
laanwj,2015-06-01T10:25:11Z,Just to be sure: add assertion that vMsgsBeforeOpenLog is not null\n,https://github.com/bitcoin/bitcoin/pull/6149#discussion_r31414250,31414250,src/util.cpp
laanwj,2015-06-01T10:28:59Z,"I'd suggest passing in `bool& fStartedNewLine` explicitly, so that it can be defined at the caller site. An utility function with internal state is impossible to use from different contexts (not that it matters at this point, but to avoid surprises in the future).\n",https://github.com/bitcoin/bitcoin/pull/6149#discussion_r31414428,31414428,src/util.cpp
laanwj,2015-06-01T10:30:51Z,"Any reason to use `ret +=` here, and `ret =` in the other fork of the if()?\n",https://github.com/bitcoin/bitcoin/pull/6149#discussion_r31414525,31414525,src/util.cpp
