dcousens,2015-11-26T05:54:50Z,"@gmaxwell with this change, `mruset` can be completely removed.\n",https://github.com/bitcoin/bitcoin/pull/7100#issuecomment-159812024,159812024,
pstratem,2015-11-26T10:13:25Z,@gmaxwell how large is the filter?\n,https://github.com/bitcoin/bitcoin/pull/7100#issuecomment-159867580,159867580,
sipa,2015-11-26T10:15:14Z,1.37 MIB per peer...\n,https://github.com/bitcoin/bitcoin/pull/7100#issuecomment-159867922,159867922,
pstratem,2015-11-26T10:19:56Z,@sipa in that case utACK\n,https://github.com/bitcoin/bitcoin/pull/7100#issuecomment-159868799,159868799,
gmaxwell,2015-11-26T11:07:51Z,"hm. Is it that big? My math must be wrong, I was thinking it was more like 350k.  In any case, I didn't want to make it smaller than the maximum INV size, since having a single INV blow it out would be unfortunate.\n",https://github.com/bitcoin/bitcoin/pull/7100#issuecomment-159883923,159883923,
sipa,2015-11-26T11:08:40Z,Rolling bloom filters are 4 times as large as normal ones.\n,https://github.com/bitcoin/bitcoin/pull/7100#issuecomment-159884062,159884062,
sipa,2015-11-26T15:21:15Z,"Eh, messed up my math. This should result in 700 KiB per peer.\n",https://github.com/bitcoin/bitcoin/pull/7100#issuecomment-159936897,159936897,
sipa,2015-11-26T15:33:13Z,"Confirmed with a sneaky `fprintf` call: 35 KiB for the address tables, and 702 KiB for the inventory tables.\n",https://github.com/bitcoin/bitcoin/pull/7100#issuecomment-159940071,159940071,
sipa,2015-11-26T15:40:45Z,"utACK. Also, mruset can go away indeed.\n",https://github.com/bitcoin/bitcoin/pull/7100#issuecomment-159943676,159943676,
dcousens,2015-11-27T03:14:17Z,utACK\n,https://github.com/bitcoin/bitcoin/pull/7100#issuecomment-160033403,160033403,
laanwj,2015-11-27T10:06:27Z,"700kiB per peer is quite a lot for a P2P application in itself, but more relevant is how it compares to `mruset` overhead when keeping the functionality at the same level. I suppose it's much better?\n",https://github.com/bitcoin/bitcoin/pull/7100#issuecomment-160103826,160103826,
sipa,2015-11-27T10:28:16Z,"An mruset for the same size (last 50000 entries) would be almost 4 MiB. Of\ncourse, they are only size 1000 currently...\n",https://github.com/bitcoin/bitcoin/pull/7100#issuecomment-160107490,160107490,
laanwj,2015-11-27T10:34:06Z,"Yes, that's why I mentioned ""functionally equivalent"", comparing against the current state isn't fair as it's broken.\n",https://github.com/bitcoin/bitcoin/pull/7100#issuecomment-160108449,160108449,
sipa,2015-11-27T10:39:55Z,"I do agree 700 KiB is pretty high per peer.\n\nDo we really need a 1/1000000 false positive rate? An FP will just cause us\nto not relay a particular transaction to one peer, but we'll still relay it\nto others (they have other nonces).\n\nAlso, a data structure exists that is 25% more efficient than the current\nCRollingBloomFilter.\n",https://github.com/bitcoin/bitcoin/pull/7100#issuecomment-160109697,160109697,
pstratem,2015-11-27T10:42:41Z,@sipa Care to share? :)\n,https://github.com/bitcoin/bitcoin/pull/7100#issuecomment-160110555,160110555,
laanwj,2015-11-27T14:02:56Z,"> Do we really need a 1/1000000 false positive rate? An FP will just cause us\n> to not relay a particular transaction to one peer, but we'll still relay it\n> to others (they have other nonces).\n\nIdeally what we'd want here is the opposite of a bloom filter. False positives are bad, as they cause peers to miss out on transactions, but the occasional false negative is ok, as they might get it IN",https://github.com/bitcoin/bitcoin/pull/7100#issuecomment-160145906,160145906,
sipa,2015-11-27T14:14:19Z,"Agree... unfortunately I don't know of any better way to do that than an mruset...\n\nAnyway, #7113 reduces this to 526 KiB per peer.\n",https://github.com/bitcoin/bitcoin/pull/7100#issuecomment-160148074,160148074,
jtimon,2015-11-27T16:06:56Z,utACK\n,https://github.com/bitcoin/bitcoin/pull/7100#issuecomment-160167421,160167421,
gmaxwell,2015-11-27T18:11:49Z,"@sipa I'm not really excited with having false positives at all here; mostly due to the case where you only have one peer, a FP means you may not relay your own transaction.\n\nIn a universe where software complexity had no cost, I'd give MRUsets to (or even just the first few) outbound peers, and higher FP rolling bloom filters to all the others. \n",https://github.com/bitcoin/bitcoin/pull/7100#issuecomment-160184803,160184803,
sipa,2015-11-28T13:38:25Z,utACK\n,https://github.com/bitcoin/bitcoin/pull/7100#issuecomment-160296434,160296434,
pstratem,2015-11-29T09:07:57Z,needs rename of setInventoryKnown to filterInventoryKnown\n\nwon't a false positive here break block relaying?\n,https://github.com/bitcoin/bitcoin/pull/7100#issuecomment-160392832,160392832,
sipa,2015-11-29T09:45:09Z,"Yes very good point, though I think that after #6494 we may be able to get\nrid of using inventory for blocks entirely.\n",https://github.com/bitcoin/bitcoin/pull/7100#issuecomment-160394689,160394689,
pstratem,2015-11-29T09:47:12Z,there doesn't seem to be a strong reason to filter block inv messages\n\ni say just send them without filtering\n,https://github.com/bitcoin/bitcoin/pull/7100#issuecomment-160394745,160394745,
pstratem,2015-11-29T10:23:20Z,ACK\n,https://github.com/bitcoin/bitcoin/pull/7100#issuecomment-160397406,160397406,
sipa,2015-11-29T12:25:50Z,Updated #7125 to not use setInventoryKnown for blocks anymore.\n,https://github.com/bitcoin/bitcoin/pull/7100#issuecomment-160413346,160413346,
sipa,2015-11-30T01:14:40Z,Needs rebase on top of #7129.\n,https://github.com/bitcoin/bitcoin/pull/7100#issuecomment-160492025,160492025,
sipa,2015-11-30T15:23:44Z,See #7133.\n,https://github.com/bitcoin/bitcoin/pull/7100#issuecomment-160659943,160659943,
gmaxwell,2015-12-02T00:05:11Z,replaced by #7133.\n,https://github.com/bitcoin/bitcoin/pull/7100#issuecomment-161137179,161137179,
jtimon,2015-11-27T16:06:25Z,"Won't this undo the setInventoryKnown(50000, 0.000001) initialization?\n",https://github.com/bitcoin/bitcoin/pull/7100#discussion_r46058184,46058184,src/net.cpp
sipa,2015-11-27T16:10:23Z,"No, it only wipes the set, not the parameters.\n",https://github.com/bitcoin/bitcoin/pull/7100#discussion_r46058502,46058502,src/net.cpp
sipa,2015-11-29T14:55:05Z,This test is not enough. SendMessages checks the filter again.\n,https://github.com/bitcoin/bitcoin/pull/7100#discussion_r46093158,46093158,src/net.h
