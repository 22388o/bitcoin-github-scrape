promag,2019-09-25 22:58:40,"Looks like the UI model is not updated if `fQueueNotifications`, which happens if anything is in progress:\nhttps://github.com/bitcoin/bitcoin/blob/4c4ff4911a6dbf1555fb4cfc05092cb8fe2f9eba/src/qt/transactiontablemodel.cpp#L707-L722\n\nCouldn't we trigger the crash in this case?",https://github.com/bitcoin/bitcoin/pull/16952#issuecomment-535256201,535256201,
fanquake,2019-09-26 11:27:13,"ACK addaf8af8268d918973883a304025d40af5a33c1 - tested that this fixes #16950\n\n> Couldn't we trigger the crash in this case?\n\nYes you can. Using this branch (addaf8af8268d918973883a304025d40af5a33c1), I triggered a rescan, called `removeprunedfunds` and tried opening the info dialog of the tx in the GUI:\n\n```bash\n* thread #1, name = 'bitcoin-main', queue = 'com.apple.main-thread', sto",https://github.com/bitcoin/bitcoin/pull/16952#issuecomment-535460803,535460803,
promag,2019-09-26 11:45:05,"Well maybe deletions shouldn't be queued?\n\nAgree it's unlikely. Thoughts Jonas?",https://github.com/bitcoin/bitcoin/pull/16952#issuecomment-535466178,535466178,
Sjors,2019-09-27 17:01:28,"Perhaps `removeprunedfunds` should fail if a rescan is in progress (etc), but I think that can wait for a separate PR.\n\ntACK addaf8a: tested with an unpruned wallet by calling `removeprunedfunds` on an RBF-replaced transaction. It neatly disappears from the UI.",https://github.com/bitcoin/bitcoin/pull/16952#issuecomment-536020152,536020152,
promag,2019-09-27 21:11:20,"> Perhaps `removeprunedfunds` should fail if a rescan is in progress (etc), but I think that can wait for a separate PR.\n\nJust to avoid the problem in the GUI? AFAIK there's no problem calling `removeprunedfunds` while rescanning in bitcoind.",https://github.com/bitcoin/bitcoin/pull/16952#issuecomment-536097861,536097861,
Sjors,2019-09-28 08:10:04,"Just in general so that concurrency is easier to reason about. But if it already works, don't fix it :-)",https://github.com/bitcoin/bitcoin/pull/16952#issuecomment-536164704,536164704,
