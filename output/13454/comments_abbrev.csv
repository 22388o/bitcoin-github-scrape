laanwj,2018-06-13T10:46:54Z,"Maybe export LC_ALL=C at the beginning of these scripts, to rule out unexpected locale dependency in other commands too.\n(this also avoids making the code look even more cluttered)",https://github.com/bitcoin/bitcoin/pull/13454#issuecomment-396895328,396895328,
practicalswift,2018-06-13T14:54:34Z,@laanwj Good idea. Now enforcing `export LC_ALL=C`. Please re-review :-),https://github.com/bitcoin/bitcoin/pull/13454#issuecomment-396967086,396967086,
MarcoFalke,2018-06-13T14:57:48Z,"How would shellcheck segfault on this? :face_with_head_bandage: \n\n```\ntest/lint/lint-shell.sh: line 29:  8402 Segmentation fault      (core dumped) shellcheck -e SC2001,SC2004,SC2005,SC2006,SC2016,SC2028,SC2046,SC2048,SC2066,SC2086,SC2116,SC2148,SC2162,SC2166,SC2181 $(git ls-files -- ""*.sh"" | grep -vE 'src/(secp256k1|univalue)/')",https://github.com/bitcoin/bitcoin/pull/13454#issuecomment-396968264,396968264,
practicalswift,2018-06-13T15:10:50Z,"@MarcoFalke Oh, that's weird! I'm unable to reproduce locally. Will try to find time to investigate soon!",https://github.com/bitcoin/bitcoin/pull/13454#issuecomment-396973152,396973152,
MarcoFalke,2018-06-13T18:10:48Z,Presumably caused by the non-ascii char in https://github.com/practicalswift/bitcoin/blob/0f556d2e6d19e5fd86712bb5f4b0506924740ae3/test/lint/lint-python.sh#L65,https://github.com/bitcoin/bitcoin/pull/13454#issuecomment-397033745,397033745,
practicalswift,2018-06-13T21:25:40Z,@MarcoFalke Tried removing that but same issue :-\,https://github.com/bitcoin/bitcoin/pull/13454#issuecomment-397092163,397092163,
laanwj,2018-06-14T07:08:37Z,"Seems like an upstream bug then, with the version installed by Travis, if you can't reproduce it locally?",https://github.com/bitcoin/bitcoin/pull/13454#issuecomment-397194308,397194308,
ken2812221,2018-06-14T07:29:00Z,"Looks like travis has already installed shellcheck v0.4.6, but we reinstall v0.3.3 from ubuntu repo.\n\nEdit: Tried not to downgrade shellcheck, not going to work.",https://github.com/bitcoin/bitcoin/pull/13454#issuecomment-397199200,397199200,
practicalswift,2018-06-14T10:07:42Z,"Worked around the `shellcheck` issue by adding an ""opt in to locale dependence"" mechanism which is now in used for `test/lint/lint-shell.sh`.\n\nPlease re-review :-)",https://github.com/bitcoin/bitcoin/pull/13454#issuecomment-397243130,397243130,
laanwj,2018-06-14T11:28:58Z,Still segfaults?!?,https://github.com/bitcoin/bitcoin/pull/13454#issuecomment-397262217,397262217,
practicalswift,2018-06-14T13:24:01Z,"@laanwj `LC_ALL=C` was exported by the lint script runner `test/lint/lint-all.sh` and thus inherited also by `test/lint/lint-shell.sh`. Now ""opting in to locale dependence"" also in `lint-all.sh` to allow for the linting scripts to opt in/out out of locale dependences themselves :-)",https://github.com/bitcoin/bitcoin/pull/13454#issuecomment-397294566,397294566,
laanwj,2018-06-14T14:16:37Z,"Good. We should not forget to remove this workaround when we'll be able to use a newer shellcheck, it's a bit yucky, but checking all scripts but two is much better than nothing.\nutACK 47776a958b08382d76d69b5df7beed807af168b3",https://github.com/bitcoin/bitcoin/pull/13454#issuecomment-397311958,397311958,
ken2812221,2018-06-16T16:57:08Z,utACK 47776a958b08382d76d69b5df7beed807af168b3,https://github.com/bitcoin/bitcoin/pull/13454#issuecomment-397825386,397825386,
MarcoFalke,2018-06-18T11:24:34Z,"@practicalswift This fails travis with\n\n```\ntest/lint/lint-all.sh\nMissing ""export LC_ALL=C"" (to avoid locale dependence) as first non-comment non-empty line in test/lint/lint-python-utf8-encoding.sh\n^---- failure generated from test/lint/lint-shell-locale.sh\n",https://github.com/bitcoin/bitcoin/pull/13454#issuecomment-398023052,398023052,
practicalswift,2018-06-18T12:21:25Z,"@MarcoFalke Oh, thanks! Fixed by #13494.",https://github.com/bitcoin/bitcoin/pull/13454#issuecomment-398035742,398035742,
