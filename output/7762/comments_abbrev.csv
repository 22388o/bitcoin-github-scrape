laanwj,2016-03-29T15:11:15Z,"Concept ACK, I like adding the sequence nr as an extra part. Also ok with using 32 bit sequence numbers.\n",https://github.com/bitcoin/bitcoin/pull/7762#issuecomment-202946692,202946692,
promag,2016-03-30T01:11:10Z,I thought a subscriber can't miss a message.\n\n**Edit**:\n\nBut it can: http://stackoverflow.com/a/15821036. So what can a subscriber do if it detects a missing message?\n,https://github.com/bitcoin/bitcoin/pull/7762#issuecomment-203178720,203178720,
jonasschnelli,2016-03-30T06:03:15Z,"@promag:\nI'm not sure if I would design an listening application that fully rely on getting _all_ notifications. With this PR, you could at least detect if you got all (also check if you got the first) notifications and if not, you could poll/sync your data over RPC.\n",https://github.com/bitcoin/bitcoin/pull/7762#issuecomment-203264185,203264185,
laanwj,2016-03-30T08:08:59Z,"> I thought a subscriber can't miss a message.\n\nThe way we are using ZMQ, the sender will never block. This is sensible as we don't want to hang the application due to a slow client. But this means at some point one of the send queues will fill up and new messages will be discarded.\n\n> But it can: http://stackoverflow.com/a/15821036. So what can a subscriber do if it detects a missing message?",https://github.com/bitcoin/bitcoin/pull/7762#issuecomment-203310746,203310746,
laanwj,2016-04-14T07:49:55Z,"This needs mention in `doc/release-notes.md` as well as `doc/zmq.md` (there, don't forget to specify the size and endianness of the sequence number), I think it is ready for merge otherwise.\n",https://github.com/bitcoin/bitcoin/pull/7762#issuecomment-209812661,209812661,
jonasschnelli,2016-04-15T13:10:50Z,Fixed @MarcoFalke nit.\nMentioned the change in `doc/release-notes.md` as well as in `doc/zmq.md`\n,https://github.com/bitcoin/bitcoin/pull/7762#issuecomment-210459467,210459467,
jonasschnelli,2016-04-15T14:01:37Z,@MarcoFalke: fixed nits.\n,https://github.com/bitcoin/bitcoin/pull/7762#issuecomment-210474671,210474671,
laanwj,2016-04-19T13:29:31Z,"Here's a slight simplification of the code - gets rid of some duplication, as well as the _keepalive change:\nhttps://github.com/laanwj/bitcoin/commit/fb843df8bb1848a34b3bb7275c415a0f3143114b\n",https://github.com/bitcoin/bitcoin/pull/7762#issuecomment-211923540,211923540,
jonasschnelli,2016-04-19T13:34:42Z,"@laanwj: Thanks. Much better. Stolen fb843df8bb1848a34b3bb7275c415a0f3143114b, squashed and force pushed.\n",https://github.com/bitcoin/bitcoin/pull/7762#issuecomment-211924938,211924938,
dcousens,2016-04-21T04:11:07Z,"> The way we are using ZMQ, the sender will never block. This is sensible as we don't want to hang the application due to a slow client.\n\nCould we make that parameterizable?\nIn certain cases I'd rather have message reliability than having the node to be guaranteed to be running in real time. \n",https://github.com/bitcoin/bitcoin/pull/7762#issuecomment-212731713,212731713,
sipa,2016-04-21T04:39:52Z,I don't believe ZMQ ever guarantees reliability.\n,https://github.com/bitcoin/bitcoin/pull/7762#issuecomment-212739453,212739453,
laanwj,2016-04-21T12:28:08Z,"> In certain cases I'd rather have message reliability than having the node to be guaranteed to be running in real time.\n\nWell notifications _can_ be lost, through zmq or otherwise, for example if bitcoind needs to be restarted, or a myriad of other circumstances not under your control. At least you can detect it now:\n- sequence number goes to 0 (and wasn't at 0xffffffff) -> bitcoind restarted\",https://github.com/bitcoin/bitcoin/pull/7762#issuecomment-212895281,212895281,
MarcoFalke,2016-04-15T09:40:36Z,What is the reason for using `str()` here?\n,https://github.com/bitcoin/bitcoin/pull/7762#discussion_r59850348,59850348,qa/rpc-tests/zmq_test.py
MarcoFalke,2016-04-15T13:25:05Z,"Nit: Add the `b` prefix, which is a noop in py2?\n\n``` py\nb""hashtx""\n```\n",https://github.com/bitcoin/bitcoin/pull/7762#discussion_r59872999,59872999,qa/rpc-tests/zmq_test.py
MarcoFalke,2016-04-15T13:26:15Z,Nit: Any reason to use `str()`?\n,https://github.com/bitcoin/bitcoin/pull/7762#discussion_r59873153,59873153,contrib/zmq/zmq_sub.py
MarcoFalke,2016-04-15T14:07:14Z,Thanks for fixing!\n,https://github.com/bitcoin/bitcoin/pull/7762#discussion_r59879078,59879078,qa/rpc-tests/zmq_test.py
laanwj,2016-04-19T08:36:22Z,Why the rename to `_keepalive`?\n,https://github.com/bitcoin/bitcoin/pull/7762#discussion_r60191653,60191653,src/zmq/zmqpublishnotifier.cpp
jonasschnelli,2016-04-19T08:42:29Z,"I renamed it to `_keepalive` because it does not ""close"" the multipart message. All messaged are sent with `ZMQ_SNDMORE` and I wanted to increase the awareness of that by renaming the function.\n",https://github.com/bitcoin/bitcoin/pull/7762#discussion_r60192415,60192415,src/zmq/zmqpublishnotifier.cpp
