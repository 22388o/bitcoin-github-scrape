hebasto,2021-04-28 19:57:31,Concept ACK on keeping the same compiler while migrating from gitian to guix.,https://github.com/bitcoin/bitcoin/pull/21799#issuecomment-828737251,828737251,
dongcarl,2021-04-28 20:04:21,"> Concept ACK on keeping the same compiler while migrating from gitian to guix.\n\nNote that we won't be keeping the same compiler for mingw-w64 (but I think that's okay) :-)",https://github.com/bitcoin/bitcoin/pull/21799#issuecomment-828741229,828741229,
DrahtBot,2021-04-29 05:29:16,<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.,https://github.com/bitcoin/bitcoin/pull/21799#issuecomment-828949606,828949606,
MarcoFalke,2021-04-29 07:46:32,"The switch from gitian->guix will be a major bump, so I think we don't need to use the exact same versions for all packages. However, looking at Debian (and Ubuntu) to see which packages are well-propagated among users (and thus tested) makes sense. I presume, once Debian/Ubuntu upgrade from gcc-10.2 to gcc-10.3, we could use that.\n\nConcept ACK to prefer 8 over 9 in the meantime.",https://github.com/bitcoin/bitcoin/pull/21799#issuecomment-829014409,829014409,
sipa,2021-04-29 07:48:05,I think using GCC 8 is decent choice.,https://github.com/bitcoin/bitcoin/pull/21799#issuecomment-829015318,829015318,
dongcarl,2021-05-03 18:44:31,"Pushed b5abb07d0d8051f337df2e7981d42a60e0140ee3 -> c90f6e51094a1ba4fb2aab35b78f23b6fda645d0\n- Updated to be based on `master` instead of on #21462\n- Updated commit description",https://github.com/bitcoin/bitcoin/pull/21799#issuecomment-831456480,831456480,
MarcoFalke,2021-05-03 18:46:49,"Approach ACK c90f6e51094a1ba4fb2aab35b78f23b6fda645d0, haven't reviewed",https://github.com/bitcoin/bitcoin/pull/21799#issuecomment-831457729,831457729,
laanwj,2021-05-05 08:42:51,"No strong opinion on what gcc to use, but I think the argument is fair that going with what we know is the safest choice. The change looks consistent, in any case.\nCode review ACK c90f6e51094a1ba4fb2aab35b78f23b6fda645d0",https://github.com/bitcoin/bitcoin/pull/21799#issuecomment-832519664,832519664,
hebasto,2021-05-03 19:52:45,Why this change?,https://github.com/bitcoin/bitcoin/pull/21799#discussion_r625327471,625327471,contrib/guix/libexec/build.sh
dongcarl,2021-05-03 20:03:29,"It was required to pass the `NX` check for `riscv64`, I'm guessing the default `execstack` behavior changed between gcc 8 and 9",https://github.com/bitcoin/bitcoin/pull/21799#discussion_r625333531,625333531,contrib/guix/libexec/build.sh
dongcarl,2021-05-03 20:35:07,"Found it!\n```diff\ncommit 12af29ab10fb5677cf947bcd7530c5f57c97522e\nAuthor: Jim Wilson <jimw@sifive.com>\nDate:   Sat Jul 14 20:05:39 2018 +0000\n\n    RISC-V: Fix nested function trampolines.\n    \n            gcc/\n            * config/riscv/linux.h (TARGET_ASM_FILE_END): New.\n    \n    From-SVN: r262660\n\ndiff --git a/gcc/ChangeLog b/gcc/ChangeLog\nindex 776a3c4434d..9179987e9",https://github.com/bitcoin/bitcoin/pull/21799#discussion_r625350985,625350985,contrib/guix/libexec/build.sh
laanwj,2021-05-04 14:36:58,"Correct, this used to be needed for RISC-V as well. We did have it in the gitian build. However, for the gitian build it was removed in 2ecaf214331b506ebfac4f4922241744357d652b.\n(I don't understand why it's no longer needed on Focal's g++8, maybe Ubuntu is patching it somehow?)",https://github.com/bitcoin/bitcoin/pull/21799#discussion_r625838967,625838967,contrib/guix/libexec/build.sh
fanquake,2021-05-05 07:13:21,"I've double-checked that when building RISC-V binaries using `g++-8-riscv64-linux-gnu` on Focal (20.04), the stack isn't being marked as executable. I did the following inside a new Ubuntu Focal Docker container:\n```bash\n# binutils for readelf\napt update && apt install g++-8-riscv64-linux-gnu binutils-riscv64-linux-gnu binutils\n\n# riscv64-linux-gnu-gcc-8 --version\nriscv64-linux-gnu-gcc",https://github.com/bitcoin/bitcoin/pull/21799#discussion_r626311079,626311079,contrib/guix/libexec/build.sh
laanwj,2021-05-05 08:29:45,"Thanks for checking!\n\n> So it's less that the stack is being marked as executable when building on Bionic, and more that the GNU_STACK section is just missing entirely\n\nRightâ€”not having a GNU_STACK section is effectively the same as having a GNU_STACK section with RWE, so, executable stack. Our security check takes this into account.",https://github.com/bitcoin/bitcoin/pull/21799#discussion_r626373586,626373586,contrib/guix/libexec/build.sh
