jonasschnelli,2017-08-14T10:33:22Z,General Concept ACK. I guess extending to cover `mapWallet[]` would make sense?,https://github.com/bitcoin/bitcoin/pull/11039#issuecomment-322156954,322156954,
promag,2017-08-14T10:34:16Z,Yes already on it.,https://github.com/bitcoin/bitcoin/pull/11039#issuecomment-322157138,322157138,
promag,2017-08-14T21:44:54Z,@jonasschnelli leaving `mapWallet[]` cases out because of @ryanofsky suggestion above.,https://github.com/bitcoin/bitcoin/pull/11039#issuecomment-322318454,322318454,
laanwj,2017-08-18T14:26:36Z,utACK 8f2f1e0,https://github.com/bitcoin/bitcoin/pull/11039#issuecomment-323368335,323368335,
paveljanik,2017-08-23T06:51:19Z,"This brought three new -Wshadow warnings:\n```\n  CXX      wallet/libbitcoin_wallet_a-wallet.o\nwallet/wallet.cpp:1125:14: warning: declaration shadows a local variable [-Wshadow]\n        auto it = mapWallet.find(now);\n             ^\nwallet/wallet.cpp:1112:10: note: previous declaration is here\n    auto it = mapWallet.find(hashTx);\n         ^\nwallet/wallet.cpp:1152:22: warning: decl",https://github.com/bitcoin/bitcoin/pull/11039#issuecomment-324238084,324238084,
ryanofsky,2017-08-14T18:46:18Z,"Maybe something for a followup commit, but I don't understand the txid IsNull check. If it's expected that there could be a null txid in mapWallet, there should be a comment explaining why that would happen, otherwise the check should be dropped or replaced with an assert or other error indicating that wallet state is corrupted.",https://github.com/bitcoin/bitcoin/pull/11039#discussion_r133029806,133029806,src/wallet/feebumper.cpp
ryanofsky,2017-08-14T18:47:41Z,Seems pointlessly verbose.,https://github.com/bitcoin/bitcoin/pull/11039#discussion_r133030152,133030152,src/wallet/rpcwallet.cpp
ryanofsky,2017-08-14T18:48:59Z,Also unnecessarily verbose.,https://github.com/bitcoin/bitcoin/pull/11039#discussion_r133030471,133030471,src/wallet/wallet.cpp
promag,2017-08-14T21:12:00Z,"Yeah, and there is no second lookup here so..",https://github.com/bitcoin/bitcoin/pull/11039#discussion_r133062841,133062841,src/wallet/rpcwallet.cpp
promag,2017-08-14T21:12:46Z,"Yeah, and there is no second lookup here so..",https://github.com/bitcoin/bitcoin/pull/11039#discussion_r133062985,133062985,src/wallet/wallet.cpp
promag,2017-08-14T21:42:32Z,"@ryanofsky I guess it's to prevent an unnecessary `count()` in the old code. What about:\n```cpp\nauto it = txid.IsNull() ? pWallet->mapWallet.end() : pWallet->mapWallet.find(txid);\nif (it == pWallet->mapWallet.end()) {\n```",https://github.com/bitcoin/bitcoin/pull/11039#discussion_r133069421,133069421,src/wallet/feebumper.cpp
ryanofsky,2017-08-14T21:56:11Z,"Thread https://github.com/bitcoin/bitcoin/pull/11039#discussion_r133029806\n\nGood idea. I guess if the purpose of the IsNull call was to serve as a minor optimization, the intent is at still discernible, though it's also still unclear. And your new change would match previous behavior more closely, so that's good too.\n\nI think ideally IsNull check would be dropped or actually explained, but",https://github.com/bitcoin/bitcoin/pull/11039#discussion_r133072163,133072163,src/wallet/feebumper.cpp
luke-jr,2017-08-18T14:09:46Z,IMO also use this in the other cases you're using `it->second`.,https://github.com/bitcoin/bitcoin/pull/11039#discussion_r133967907,133967907,src/wallet/rpcwallet.cpp
