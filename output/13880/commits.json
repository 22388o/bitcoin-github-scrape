[
  {
    "sha": "95d6b2ba1c76fd270c380c1940bb38f4593cf649",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo5NWQ2YjJiYTFjNzZmZDI3MGMzODBjMTk0MGJiMzhmNDU5M2NmNjQ5",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2018-08-04T22:48:09Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2019-01-14T15:29:59Z"
      },
      "message": "qt: Try shutdown also on failure",
      "tree": {
        "sha": "9f8df7e8cae8c90a4958ff4e596400b16062a964",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9f8df7e8cae8c90a4958ff4e596400b16062a964"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/95d6b2ba1c76fd270c380c1940bb38f4593cf649",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/95d6b2ba1c76fd270c380c1940bb38f4593cf649",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/95d6b2ba1c76fd270c380c1940bb38f4593cf649",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/95d6b2ba1c76fd270c380c1940bb38f4593cf649/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "76335298f427de7d7ce58ced177518a7905706cc",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/76335298f427de7d7ce58ced177518a7905706cc",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/76335298f427de7d7ce58ced177518a7905706cc"
      }
    ],
    "stats": {
      "total": 21,
      "additions": 14,
      "deletions": 7
    },
    "files": [
      {
        "sha": "5359ab674beb01c2392930b089c5f61527e8d78f",
        "filename": "src/qt/bitcoin.cpp",
        "status": "modified",
        "additions": 14,
        "deletions": 7,
        "changes": 21,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/95d6b2ba1c76fd270c380c1940bb38f4593cf649/src/qt/bitcoin.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/95d6b2ba1c76fd270c380c1940bb38f4593cf649/src/qt/bitcoin.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoin.cpp?ref=95d6b2ba1c76fd270c380c1940bb38f4593cf649",
        "patch": "@@ -144,6 +144,10 @@ BitcoinCore::BitcoinCore(interfaces::Node& node) :\n void BitcoinCore::handleRunawayException(const std::exception *e)\n {\n     PrintExceptionContinue(e, \"Runaway exception\");\n+    try {\n+        m_node.appShutdown();\n+    } catch (...) {\n+    }\n     Q_EMIT runawayException(QString::fromStdString(m_node.getWarnings(\"gui\")));\n }\n \n@@ -365,8 +369,15 @@ void BitcoinApplication::initializeResult(bool success)\n     qDebug() << __func__ << \": Initialization result: \" << success;\n     // Set exit result.\n     returnValue = success ? EXIT_SUCCESS : EXIT_FAILURE;\n-    if(success)\n-    {\n+    if (!success) {\n+        try {\n+            m_node.appShutdown();\n+        } catch (...) {\n+        }\n+        Q_EMIT splashFinished(); // Make sure splash screen doesn't stick around during shutdown\n+        return quit(); // Exit first main loop invocation\n+    }\n+\n         // Log this only after AppInitMain finishes, as then logging setup is guaranteed complete\n         qWarning() << \"Platform customization:\" << platformStyle->getName();\n #ifdef ENABLE_WALLET\n@@ -416,10 +427,6 @@ void BitcoinApplication::initializeResult(bool success)\n         }\n #endif\n         pollShutdownTimer->start(200);\n-    } else {\n-        Q_EMIT splashFinished(); // Make sure splash screen doesn't stick around during shutdown\n-        quit(); // Exit first main loop invocation\n-    }\n }\n \n void BitcoinApplication::shutdownResult()\n@@ -430,7 +437,7 @@ void BitcoinApplication::shutdownResult()\n void BitcoinApplication::handleRunawayException(const QString &message)\n {\n     QMessageBox::critical(nullptr, \"Runaway exception\", BitcoinGUI::tr(\"A fatal error occurred. Bitcoin can no longer continue safely and will quit.\") + QString(\"\\n\\n\") + message);\n-    ::exit(EXIT_FAILURE);\n+    std::exit(EXIT_FAILURE);\n }\n \n WId BitcoinApplication::getMainWinId() const"
      }
    ]
  },
  {
    "sha": "fd65a6de153601dc668ac642cffa240232f045f4",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmZDY1YTZkZTE1MzYwMWRjNjY4YWM2NDJjZmZhMjQwMjMyZjA0NWY0",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2018-08-22T19:55:48Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2019-01-14T15:29:59Z"
      },
      "message": "qt: print exception when shutdown on failure throws",
      "tree": {
        "sha": "5ec76444dedcfcd2eaabfc43cdbabe879f1b6eea",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5ec76444dedcfcd2eaabfc43cdbabe879f1b6eea"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fd65a6de153601dc668ac642cffa240232f045f4",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fd65a6de153601dc668ac642cffa240232f045f4",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fd65a6de153601dc668ac642cffa240232f045f4",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fd65a6de153601dc668ac642cffa240232f045f4/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "95d6b2ba1c76fd270c380c1940bb38f4593cf649",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/95d6b2ba1c76fd270c380c1940bb38f4593cf649",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/95d6b2ba1c76fd270c380c1940bb38f4593cf649"
      }
    ],
    "stats": {
      "total": 4,
      "additions": 4,
      "deletions": 0
    },
    "files": [
      {
        "sha": "534e86c610371273b8ec92514fd920e2bb7692fb",
        "filename": "src/qt/bitcoin.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fd65a6de153601dc668ac642cffa240232f045f4/src/qt/bitcoin.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fd65a6de153601dc668ac642cffa240232f045f4/src/qt/bitcoin.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoin.cpp?ref=fd65a6de153601dc668ac642cffa240232f045f4",
        "patch": "@@ -146,6 +146,8 @@ void BitcoinCore::handleRunawayException(const std::exception *e)\n     PrintExceptionContinue(e, \"Runaway exception\");\n     try {\n         m_node.appShutdown();\n+    } catch (const std::exception& e) {\n+        PrintExceptionContinue(&e, __func__);\n     } catch (...) {\n     }\n     Q_EMIT runawayException(QString::fromStdString(m_node.getWarnings(\"gui\")));\n@@ -372,6 +374,8 @@ void BitcoinApplication::initializeResult(bool success)\n     if (!success) {\n         try {\n             m_node.appShutdown();\n+        } catch (const std::exception& e) {\n+            PrintExceptionContinue(&e, __func__);\n         } catch (...) {\n         }\n         Q_EMIT splashFinished(); // Make sure splash screen doesn't stick around during shutdown"
      }
    ]
  }
]