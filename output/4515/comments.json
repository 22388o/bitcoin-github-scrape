[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/48822765",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/4515#issuecomment-48822765",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/4515",
    "id": 48822765,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4ODIyNzY1",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-07-12T20:12:57Z",
    "updated_at": "2014-07-13T18:08:07Z",
    "author_association": "MEMBER",
    "body": "What if the first encountered block with file N doesn't have undo data, but the second one does? You'd skip checking it.\n\nEDIT: fixed\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/48822765/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/49156885",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/4515#issuecomment-49156885",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/4515",
    "id": 49156885,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MTU2ODg1",
    "user": {
      "login": "rdponticelli",
      "id": 1192483,
      "node_id": "MDQ6VXNlcjExOTI0ODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1192483?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rdponticelli",
      "html_url": "https://github.com/rdponticelli",
      "followers_url": "https://api.github.com/users/rdponticelli/followers",
      "following_url": "https://api.github.com/users/rdponticelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/rdponticelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rdponticelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rdponticelli/subscriptions",
      "organizations_url": "https://api.github.com/users/rdponticelli/orgs",
      "repos_url": "https://api.github.com/users/rdponticelli/repos",
      "events_url": "https://api.github.com/users/rdponticelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rdponticelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-07-16T12:17:29Z",
    "updated_at": "2014-07-16T12:17:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "Closing this, as it has been rebased, refactored and pushed as part of #4481.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/49156885/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/49373835",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/4515#issuecomment-49373835",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/4515",
    "id": 49373835,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MzczODM1",
    "user": {
      "login": "rdponticelli",
      "id": 1192483,
      "node_id": "MDQ6VXNlcjExOTI0ODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1192483?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rdponticelli",
      "html_url": "https://github.com/rdponticelli",
      "followers_url": "https://api.github.com/users/rdponticelli/followers",
      "following_url": "https://api.github.com/users/rdponticelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/rdponticelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rdponticelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rdponticelli/subscriptions",
      "organizations_url": "https://api.github.com/users/rdponticelli/orgs",
      "repos_url": "https://api.github.com/users/rdponticelli/repos",
      "events_url": "https://api.github.com/users/rdponticelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rdponticelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-07-17T22:13:51Z",
    "updated_at": "2014-07-17T22:13:51Z",
    "author_association": "CONTRIBUTOR",
    "body": "I simplified this code. Reopening.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/49373835/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/51371328",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/4515#issuecomment-51371328",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/4515",
    "id": 51371328,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMzcxMzI4",
    "user": {
      "login": "rdponticelli",
      "id": 1192483,
      "node_id": "MDQ6VXNlcjExOTI0ODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1192483?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rdponticelli",
      "html_url": "https://github.com/rdponticelli",
      "followers_url": "https://api.github.com/users/rdponticelli/followers",
      "following_url": "https://api.github.com/users/rdponticelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/rdponticelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rdponticelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rdponticelli/subscriptions",
      "organizations_url": "https://api.github.com/users/rdponticelli/orgs",
      "repos_url": "https://api.github.com/users/rdponticelli/repos",
      "events_url": "https://api.github.com/users/rdponticelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rdponticelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-08-06T17:52:44Z",
    "updated_at": "2014-08-06T17:52:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "Feedback addressed, and some bugs were fixed, and some things improved along the way. Would this be mergeable?\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/51371328/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/52187772",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/4515#issuecomment-52187772",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/4515",
    "id": 52187772,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMTg3Nzcy",
    "user": {
      "login": "rdponticelli",
      "id": 1192483,
      "node_id": "MDQ6VXNlcjExOTI0ODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1192483?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rdponticelli",
      "html_url": "https://github.com/rdponticelli",
      "followers_url": "https://api.github.com/users/rdponticelli/followers",
      "following_url": "https://api.github.com/users/rdponticelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/rdponticelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rdponticelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rdponticelli/subscriptions",
      "organizations_url": "https://api.github.com/users/rdponticelli/orgs",
      "repos_url": "https://api.github.com/users/rdponticelli/repos",
      "events_url": "https://api.github.com/users/rdponticelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rdponticelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-08-14T14:10:56Z",
    "updated_at": "2014-08-14T14:10:56Z",
    "author_association": "CONTRIBUTOR",
    "body": "Code style fixed to adhere to current standards.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/52187772/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/53421080",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/4515#issuecomment-53421080",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/4515",
    "id": 53421080,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzNDIxMDgw",
    "user": {
      "login": "BitcoinPullTester",
      "id": 2110907,
      "node_id": "MDQ6VXNlcjIxMTA5MDc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2110907?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/BitcoinPullTester",
      "html_url": "https://github.com/BitcoinPullTester",
      "followers_url": "https://api.github.com/users/BitcoinPullTester/followers",
      "following_url": "https://api.github.com/users/BitcoinPullTester/following{/other_user}",
      "gists_url": "https://api.github.com/users/BitcoinPullTester/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/BitcoinPullTester/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/BitcoinPullTester/subscriptions",
      "organizations_url": "https://api.github.com/users/BitcoinPullTester/orgs",
      "repos_url": "https://api.github.com/users/BitcoinPullTester/repos",
      "events_url": "https://api.github.com/users/BitcoinPullTester/events{/privacy}",
      "received_events_url": "https://api.github.com/users/BitcoinPullTester/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-08-26T13:39:29Z",
    "updated_at": "2014-08-26T13:39:29Z",
    "author_association": "NONE",
    "body": "Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/p4515_bac3df7ed9c9627d54c9887702182adf9adf21df/ for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/current/\nContact BlueMatt on freenode if something looks broken.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/53421080/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/63808611",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/4515#issuecomment-63808611",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/4515",
    "id": 63808611,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYzODA4NjEx",
    "user": {
      "login": "rdponticelli",
      "id": 1192483,
      "node_id": "MDQ6VXNlcjExOTI0ODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1192483?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rdponticelli",
      "html_url": "https://github.com/rdponticelli",
      "followers_url": "https://api.github.com/users/rdponticelli/followers",
      "following_url": "https://api.github.com/users/rdponticelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/rdponticelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rdponticelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rdponticelli/subscriptions",
      "organizations_url": "https://api.github.com/users/rdponticelli/orgs",
      "repos_url": "https://api.github.com/users/rdponticelli/repos",
      "events_url": "https://api.github.com/users/rdponticelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rdponticelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2014-11-20T13:38:21Z",
    "updated_at": "2014-11-20T14:20:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "I guess this is too late for 0.10, but reopening this anyway as I don't expect this code to change (a lot) any further, and it feels like it would make sense merging this independently of #4701.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/63808611/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/85599214",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/4515#issuecomment-85599214",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/4515",
    "id": 85599214,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1NTk5MjE0",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2015-03-24T17:04:57Z",
    "updated_at": "2015-03-24T17:04:57Z",
    "author_association": "MEMBER",
    "body": "Looks like this is not necessary for the current autoprune (#5863), so I'm closing this. Let me know if I'm wrong.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/85599214/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/14859577",
    "pull_request_review_id": null,
    "id": 14859577,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0ODU5NTc3",
    "diff_hunk": "@@ -2984,19 +2984,30 @@ bool static LoadBlockIndexDB()\n \n     // Check presence of blk files\n     LogPrintf(\"Checking all blk files are present...\\n\");\n-    set<int> setBlkDataFiles;\n+    map<int, bool> mapBlkDataFileReadable,mapBlkUndoFileReadable;",
    "path": "src/main.cpp",
    "position": null,
    "original_position": 5,
    "commit_id": "899cbc76b229a37c5a0b412d7f0cd84692ae0a5e",
    "original_commit_id": "d000f7f0c761c94af994f42cd34b881520da693c",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Why the map and bool? Just a set for both suffices.\n",
    "created_at": "2014-07-13T18:04:21Z",
    "updated_at": "2014-11-20T13:38:36Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/4515#discussion_r14859577",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/4515",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/14859577"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/4515#discussion_r14859577"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/4515"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/14859577/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2987,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/14859594",
    "pull_request_review_id": null,
    "id": 14859594,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0ODU5NTk0",
    "diff_hunk": "@@ -2984,19 +2984,30 @@ bool static LoadBlockIndexDB()\n \n     // Check presence of blk files\n     LogPrintf(\"Checking all blk files are present...\\n\");\n-    set<int> setBlkDataFiles;\n+    map<int, bool> mapBlkDataFileReadable,mapBlkUndoFileReadable;",
    "path": "src/main.cpp",
    "position": null,
    "original_position": 5,
    "commit_id": "899cbc76b229a37c5a0b412d7f0cd84692ae0a5e",
    "original_commit_id": "d000f7f0c761c94af994f42cd34b881520da693c",
    "user": {
      "login": "rdponticelli",
      "id": 1192483,
      "node_id": "MDQ6VXNlcjExOTI0ODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1192483?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rdponticelli",
      "html_url": "https://github.com/rdponticelli",
      "followers_url": "https://api.github.com/users/rdponticelli/followers",
      "following_url": "https://api.github.com/users/rdponticelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/rdponticelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rdponticelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rdponticelli/subscriptions",
      "organizations_url": "https://api.github.com/users/rdponticelli/orgs",
      "repos_url": "https://api.github.com/users/rdponticelli/repos",
      "events_url": "https://api.github.com/users/rdponticelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rdponticelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Because if we go the #4481 route, we'll have to expand the logic to better manage the cases when the files are missing without failing.\n",
    "created_at": "2014-07-13T18:09:13Z",
    "updated_at": "2014-11-20T13:38:36Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/4515#discussion_r14859594",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/4515",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/14859594"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/4515#discussion_r14859594"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/4515"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/14859594/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2987,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/15762874",
    "pull_request_review_id": null,
    "id": 15762874,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1NzYyODc0",
    "diff_hunk": "@@ -3025,6 +3007,50 @@ bool static LoadBlockIndexDB()\n         DateTimeStrFormat(\"%Y-%m-%d %H:%M:%S\", chainActive.Tip()->GetBlockTime()),\n         Checkpoints::GuessVerificationProgress(chainActive.Tip()));\n \n+    // Check presence of essential data\n+    LogPrintf(\"Checking essential data is accesible...\\n\");",
    "path": "src/main.cpp",
    "position": null,
    "original_position": 30,
    "commit_id": "899cbc76b229a37c5a0b412d7f0cd84692ae0a5e",
    "original_commit_id": "18fe307de75a2b19d578d9c91033d753d2d4705b",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Now that this has been moved to the end of the function, consider factoring it out to a separate function (eg. `CheckForBlockFiles()`) and calling that separately. After all, this is not part of loading the block index DB.\n",
    "created_at": "2014-08-04T15:54:32Z",
    "updated_at": "2014-11-20T13:38:36Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/4515#discussion_r15762874",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/4515",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/15762874"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/4515#discussion_r15762874"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/4515"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/15762874/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 3011,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/15800207",
    "pull_request_review_id": null,
    "id": 15800207,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1ODAwMjA3",
    "diff_hunk": "@@ -2997,7 +2979,55 @@ bool static LoadBlockIndexDB()\n         chainActive.Tip()->GetBlockHash().ToString(), chainActive.Height(),\n         DateTimeStrFormat(\"%Y-%m-%d %H:%M:%S\", chainActive.Tip()->GetBlockTime()),\n         Checkpoints::GuessVerificationProgress(chainActive.Tip()));\n+    \n+    return true;\n+}\n \n+bool CheckBlockFiles()\n+{\n+    // Check presence of essential data\n+    LogPrintf(\"Checking essential data is accesible...\\n\");",
    "path": "src/main.cpp",
    "position": null,
    "original_position": 36,
    "commit_id": "899cbc76b229a37c5a0b412d7f0cd84692ae0a5e",
    "original_commit_id": "8b8d083039c68e894ad56bccffbdc128a0556f23",
    "user": {
      "login": "Diapolo",
      "id": 1419649,
      "node_id": "MDQ6VXNlcjE0MTk2NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1419649?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Diapolo",
      "html_url": "https://github.com/Diapolo",
      "followers_url": "https://api.github.com/users/Diapolo/followers",
      "following_url": "https://api.github.com/users/Diapolo/following{/other_user}",
      "gists_url": "https://api.github.com/users/Diapolo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Diapolo/subscriptions",
      "organizations_url": "https://api.github.com/users/Diapolo/orgs",
      "repos_url": "https://api.github.com/users/Diapolo/repos",
      "events_url": "https://api.github.com/users/Diapolo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Diapolo/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Idea: `Checking required block data is available...`?\n",
    "created_at": "2014-08-05T08:32:23Z",
    "updated_at": "2014-11-20T13:38:36Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/4515#discussion_r15800207",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/4515",
    "author_association": "NONE",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/15800207"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/4515#discussion_r15800207"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/4515"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/15800207/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2989,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/15800213",
    "pull_request_review_id": null,
    "id": 15800213,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1ODAwMjEz",
    "diff_hunk": "@@ -2997,7 +2979,55 @@ bool static LoadBlockIndexDB()\n         chainActive.Tip()->GetBlockHash().ToString(), chainActive.Height(),\n         DateTimeStrFormat(\"%Y-%m-%d %H:%M:%S\", chainActive.Tip()->GetBlockTime()),\n         Checkpoints::GuessVerificationProgress(chainActive.Tip()));\n+    \n+    return true;\n+}\n \n+bool CheckBlockFiles()\n+{\n+    // Check presence of essential data\n+    LogPrintf(\"Checking essential data is accesible...\\n\");\n+    LogPrintf(\"Checking active chain up to height: %i\\n\", chainActive.Height());\n+    set<int> setBlkDataFileReadable,setBlkUndoFileReadable;\n+    for(int i = 0 ; i < chainActive.Height() ; i++)\n+    {\n+        CBlockIndex* pindex = chainActive[i];\n+        CDiskBlockPos pos(pindex->nFile, 0);\n+        if (pindex->nStatus & BLOCK_HAVE_DATA )\n+        {\n+            if(!setBlkDataFileReadable.count(pindex->nFile))\n+            {\n+                if (CAutoFile(OpenBlockFile(pos, true), SER_DISK, CLIENT_VERSION))\n+                    setBlkDataFileReadable.insert(pindex->nFile);\n+                else\n+                    return false;\n+            }\n+        }\n+        else\n+        {\n+            LogPrintf(\"Missing data for block: %i\\n\", pindex->nHeight);\n+            return false;\n+        }\n+        if (pindex->nStatus & BLOCK_HAVE_UNDO )\n+        {\n+            if(!setBlkUndoFileReadable.count(pindex->nFile))\n+            {\n+                if (CAutoFile(OpenBlockFile(pos, true), SER_DISK, CLIENT_VERSION))\n+                    setBlkUndoFileReadable.insert(pindex->nFile);\n+                else\n+                    return false;\n+            }\n+        }\n+        else\n+        {\n+            // Block 0 doesn't have undo data.\n+            if (pindex->nHeight)\n+            {\n+                LogPrintf(\"Missing undo for block: %i\\n\", pindex->nHeight);",
    "path": "src/main.cpp",
    "position": null,
    "original_position": 73,
    "commit_id": "899cbc76b229a37c5a0b412d7f0cd84692ae0a5e",
    "original_commit_id": "8b8d083039c68e894ad56bccffbdc128a0556f23",
    "user": {
      "login": "Diapolo",
      "id": 1419649,
      "node_id": "MDQ6VXNlcjE0MTk2NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1419649?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Diapolo",
      "html_url": "https://github.com/Diapolo",
      "followers_url": "https://api.github.com/users/Diapolo/followers",
      "following_url": "https://api.github.com/users/Diapolo/following{/other_user}",
      "gists_url": "https://api.github.com/users/Diapolo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Diapolo/subscriptions",
      "organizations_url": "https://api.github.com/users/Diapolo/orgs",
      "repos_url": "https://api.github.com/users/Diapolo/repos",
      "events_url": "https://api.github.com/users/Diapolo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Diapolo/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I would prepend an `Error:` and also log which file exactly is missing (also a suggestion for normal block files).\n",
    "created_at": "2014-08-05T08:32:32Z",
    "updated_at": "2014-11-20T13:38:36Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/4515#discussion_r15800213",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/4515",
    "author_association": "NONE",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/15800213"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/4515#discussion_r15800213"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/4515"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/15800213/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 3026,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/15843624",
    "pull_request_review_id": null,
    "id": 15843624,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1ODQzNjI0",
    "diff_hunk": "@@ -2997,7 +2979,55 @@ bool static LoadBlockIndexDB()\n         chainActive.Tip()->GetBlockHash().ToString(), chainActive.Height(),\n         DateTimeStrFormat(\"%Y-%m-%d %H:%M:%S\", chainActive.Tip()->GetBlockTime()),\n         Checkpoints::GuessVerificationProgress(chainActive.Tip()));\n+    \n+    return true;\n+}\n \n+bool CheckBlockFiles()\n+{\n+    // Check presence of essential data\n+    LogPrintf(\"Checking essential data is accesible...\\n\");\n+    LogPrintf(\"Checking active chain up to height: %i\\n\", chainActive.Height());\n+    set<int> setBlkDataFileReadable,setBlkUndoFileReadable;\n+    for(int i = 0 ; i < chainActive.Height() ; i++)\n+    {\n+        CBlockIndex* pindex = chainActive[i];\n+        CDiskBlockPos pos(pindex->nFile, 0);\n+        if (pindex->nStatus & BLOCK_HAVE_DATA )\n+        {\n+            if(!setBlkDataFileReadable.count(pindex->nFile))\n+            {\n+                if (CAutoFile(OpenBlockFile(pos, true), SER_DISK, CLIENT_VERSION))\n+                    setBlkDataFileReadable.insert(pindex->nFile);\n+                else\n+                    return false;\n+            }\n+        }\n+        else\n+        {\n+            LogPrintf(\"Missing data for block: %i\\n\", pindex->nHeight);\n+            return false;\n+        }\n+        if (pindex->nStatus & BLOCK_HAVE_UNDO )\n+        {\n+            if(!setBlkUndoFileReadable.count(pindex->nFile))\n+            {\n+                if (CAutoFile(OpenBlockFile(pos, true), SER_DISK, CLIENT_VERSION))\n+                    setBlkUndoFileReadable.insert(pindex->nFile);\n+                else\n+                    return false;\n+            }\n+        }\n+        else\n+        {\n+            // Block 0 doesn't have undo data.\n+            if (pindex->nHeight)\n+            {\n+                LogPrintf(\"Missing undo for block: %i\\n\", pindex->nHeight);",
    "path": "src/main.cpp",
    "position": null,
    "original_position": 73,
    "commit_id": "899cbc76b229a37c5a0b412d7f0cd84692ae0a5e",
    "original_commit_id": "8b8d083039c68e894ad56bccffbdc128a0556f23",
    "user": {
      "login": "rdponticelli",
      "id": 1192483,
      "node_id": "MDQ6VXNlcjExOTI0ODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1192483?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rdponticelli",
      "html_url": "https://github.com/rdponticelli",
      "followers_url": "https://api.github.com/users/rdponticelli/followers",
      "following_url": "https://api.github.com/users/rdponticelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/rdponticelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rdponticelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rdponticelli/subscriptions",
      "organizations_url": "https://api.github.com/users/rdponticelli/orgs",
      "repos_url": "https://api.github.com/users/rdponticelli/repos",
      "events_url": "https://api.github.com/users/rdponticelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rdponticelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "\"Error:\" prepended, but notice that this condition doesn't mean a file is missing, but that we don't have the bit HAVE_UNDO set in the index for this block. If the file were missing, it would be logged by the function called in line 3015. So, there's no need to log a file name here, IMHO.\n",
    "created_at": "2014-08-05T21:37:04Z",
    "updated_at": "2014-11-20T13:38:36Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/4515#discussion_r15843624",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/4515",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/15843624"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/4515#discussion_r15843624"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/4515"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/15843624/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 3026,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/15857369",
    "pull_request_review_id": null,
    "id": 15857369,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1ODU3MzY5",
    "diff_hunk": "@@ -2997,7 +2979,55 @@ bool static LoadBlockIndexDB()\n         chainActive.Tip()->GetBlockHash().ToString(), chainActive.Height(),\n         DateTimeStrFormat(\"%Y-%m-%d %H:%M:%S\", chainActive.Tip()->GetBlockTime()),\n         Checkpoints::GuessVerificationProgress(chainActive.Tip()));\n+    \n+    return true;\n+}\n \n+bool CheckBlockFiles()\n+{\n+    // Check presence of essential data\n+    LogPrintf(\"Checking required block data is available...\\n\");\n+    LogPrintf(\"Checking active chain up to height: %i\\n\", chainActive.Height());\n+    set<int> setBlkDataFileReadable,setBlkUndoFileReadable;\n+    for(int i = 0 ; i < chainActive.Height() ; i++)\n+    {\n+        CBlockIndex* pindex = chainActive[i];\n+        CDiskBlockPos pos(pindex->nFile, 0);\n+        if (pindex->nStatus & BLOCK_HAVE_DATA )\n+        {\n+            if(!setBlkDataFileReadable.count(pindex->nFile))\n+            {\n+                if (CAutoFile(OpenBlockFile(pos, true), SER_DISK, CLIENT_VERSION))\n+                    setBlkDataFileReadable.insert(pindex->nFile);\n+                else\n+                    return false;\n+            }\n+        }\n+        else\n+        {\n+            LogPrintf(\"Error: Missing data for block: %i\\n\", pindex->nHeight);\n+            return false;\n+        }\n+        if (pindex->nStatus & BLOCK_HAVE_UNDO )\n+        {\n+            if(!setBlkUndoFileReadable.count(pindex->nFile))\n+            {\n+                if (CAutoFile(OpenBlockFile(pos, true), SER_DISK, CLIENT_VERSION))\n+                    setBlkUndoFileReadable.insert(pindex->nFile);\n+                else\n+                    return false;\n+            }\n+        }\n+        else\n+        {\n+            // Block 0 doesn't have undo data.\n+            if (pindex->nHeight)\n+            {\n+                LogPrintf(\"Error: Missing undo for block: %i\\n\", pindex->nHeight);",
    "path": "src/main.cpp",
    "position": null,
    "original_position": 73,
    "commit_id": "899cbc76b229a37c5a0b412d7f0cd84692ae0a5e",
    "original_commit_id": "43795dff473f18e4c1f7343dcfb595322c3d4f27",
    "user": {
      "login": "Diapolo",
      "id": 1419649,
      "node_id": "MDQ6VXNlcjE0MTk2NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1419649?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Diapolo",
      "html_url": "https://github.com/Diapolo",
      "followers_url": "https://api.github.com/users/Diapolo/followers",
      "following_url": "https://api.github.com/users/Diapolo/following{/other_user}",
      "gists_url": "https://api.github.com/users/Diapolo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Diapolo/subscriptions",
      "organizations_url": "https://api.github.com/users/Diapolo/orgs",
      "repos_url": "https://api.github.com/users/Diapolo/repos",
      "events_url": "https://api.github.com/users/Diapolo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Diapolo/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Nit: `undo data` also fits better in here, but no need to add, if this is going to be merged soon.\n",
    "created_at": "2014-08-06T06:06:33Z",
    "updated_at": "2014-11-20T13:38:36Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/4515#discussion_r15857369",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/4515",
    "author_association": "NONE",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/15857369"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/4515#discussion_r15857369"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/4515"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/15857369/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 3026,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/26661335",
    "pull_request_review_id": null,
    "id": 26661335,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI2NjYxMzM1",
    "diff_hunk": "@@ -2891,6 +2873,48 @@ bool static LoadBlockIndexDB()\n     return true;\n }\n \n+bool BlockFileIsOpenable(int nFile)\n+{\n+    CDiskBlockPos pos(nFile, 0);\n+    return !CAutoFile(OpenBlockFile(pos, true), SER_DISK, CLIENT_VERSION).IsNull();\n+}\n+\n+bool UndoFileIsOpenable(int nFile)\n+{\n+    CDiskBlockPos pos(nFile, 0);\n+    return !CAutoFile(OpenUndoFile(pos, true), SER_DISK, CLIENT_VERSION).IsNull();\n+}\n+\n+bool DataFilesAreOpenable(int nFile)\n+{\n+    if (BlockFileIsOpenable(nFile) && UndoFileIsOpenable(nFile))\n+        return true;\n+    return false;\n+}\n+\n+bool CheckBlockFiles()\n+{\n+    // Check presence of blk files\n+    LogPrintf(\"Checking all blk files are present...\\n\");\n+    set<int> setRequiredDataFilesAreOpenable;\n+    for (CBlockIndex* pindex = chainActive.Tip(); pindex && pindex->pprev; pindex = pindex->pprev) {\n+        if (pindex->nStatus & BLOCK_HAVE_DATA && pindex->nStatus & BLOCK_HAVE_UNDO) {\n+            if (!setRequiredDataFilesAreOpenable.count(pindex->nFile)) {",
    "path": "src/main.cpp",
    "position": 55,
    "original_position": 55,
    "commit_id": "899cbc76b229a37c5a0b412d7f0cd84692ae0a5e",
    "original_commit_id": "899cbc76b229a37c5a0b412d7f0cd84692ae0a5e",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "It's not clear to me why you switched from the two-pass solution to a single loop, but from a readability viewpoint I'd prefer something like:\n\n``` c++\nstd::map<int,uint32_t> mapBlkDataFiles;\nBOOST_FOREACH(const PAIRTYPE(uint256, CBlockIndex*)& item, mapBlockIndex)\n{\n    CBlockIndex* pindex = item.second;\n    mapBlkDataFiles[pindex->nFile] |= pindex->nStatus;\n}\nfor (std::map<int,uint32_t>::iterator it = mapBlkDataFiles.begin(); it != mapBlkDataFiles.end(); it++)\n{\n    if ((it->second & BLOCK_HAVE_DATA) && !BlockFileIsOpenable(it->first)) {\n        LogPrintf(\"Error: Required block file %i can't be opened.\\n\", it->first);\n        return false;\n    }\n    if ((it->second & BLOCK_HAVE_UNDO) && !UndoFileIsOpenable(it->first)) {\n        LogPrintf(\"Error: Required undo file %i can't be opened.\\n\", it->first);\n        return false;\n    }\n}\n```\n",
    "created_at": "2015-03-18T13:20:53Z",
    "updated_at": "2015-03-18T13:20:53Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/4515#discussion_r26661335",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/4515",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/26661335"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/4515#discussion_r26661335"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/4515"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/26661335/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2902,
    "original_line": 2902,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/26661351",
    "pull_request_review_id": null,
    "id": 26661351,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI2NjYxMzUx",
    "diff_hunk": "@@ -2891,6 +2873,48 @@ bool static LoadBlockIndexDB()\n     return true;\n }\n \n+bool BlockFileIsOpenable(int nFile)",
    "path": "src/main.cpp",
    "position": 29,
    "original_position": 29,
    "commit_id": "899cbc76b229a37c5a0b412d7f0cd84692ae0a5e",
    "original_commit_id": "899cbc76b229a37c5a0b412d7f0cd84692ae0a5e",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "These functions can be static\n",
    "created_at": "2015-03-18T13:21:04Z",
    "updated_at": "2015-03-18T13:21:04Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/4515#discussion_r26661351",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/4515",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/26661351"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/4515#discussion_r26661351"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/4515"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/26661351/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2876,
    "original_line": 2876,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/26661504",
    "pull_request_review_id": null,
    "id": 26661504,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI2NjYxNTA0",
    "diff_hunk": "@@ -173,6 +173,8 @@ bool LoadExternalBlockFile(FILE* fileIn, CDiskBlockPos *dbp = NULL);\n bool InitBlockIndex();\n /** Load the block tree and coins database from disk */\n bool LoadBlockIndex();\n+/** Check all required block files are present */",
    "path": "src/main.h",
    "position": 4,
    "original_position": 4,
    "commit_id": "899cbc76b229a37c5a0b412d7f0cd84692ae0a5e",
    "original_commit_id": "899cbc76b229a37c5a0b412d7f0cd84692ae0a5e",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "```\n/** Check all required block and undo files are present */\n```\n",
    "created_at": "2015-03-18T13:23:05Z",
    "updated_at": "2015-03-18T13:23:05Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/4515#discussion_r26661504",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/4515",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/26661504"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/4515#discussion_r26661504"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/4515"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/26661504/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 176,
    "original_line": 176,
    "side": "RIGHT"
  }
]