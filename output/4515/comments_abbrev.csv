sipa,2014-07-12T20:12:57Z,"What if the first encountered block with file N doesn't have undo data, but the second one does? You'd skip checking it.\n\nEDIT: fixed\n",https://github.com/bitcoin/bitcoin/pull/4515#issuecomment-48822765,48822765,
rdponticelli,2014-07-16T12:17:29Z,"Closing this, as it has been rebased, refactored and pushed as part of #4481.\n",https://github.com/bitcoin/bitcoin/pull/4515#issuecomment-49156885,49156885,
rdponticelli,2014-07-17T22:13:51Z,I simplified this code. Reopening.\n,https://github.com/bitcoin/bitcoin/pull/4515#issuecomment-49373835,49373835,
rdponticelli,2014-08-06T17:52:44Z,"Feedback addressed, and some bugs were fixed, and some things improved along the way. Would this be mergeable?\n",https://github.com/bitcoin/bitcoin/pull/4515#issuecomment-51371328,51371328,
rdponticelli,2014-08-14T14:10:56Z,Code style fixed to adhere to current standards.\n,https://github.com/bitcoin/bitcoin/pull/4515#issuecomment-52187772,52187772,
BitcoinPullTester,2014-08-26T13:39:29Z,"Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/p4515_bac3df7ed9c9627d54c9887702182adf9adf21df/ for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-te",https://github.com/bitcoin/bitcoin/pull/4515#issuecomment-53421080,53421080,
rdponticelli,2014-11-20T13:38:21Z,"I guess this is too late for 0.10, but reopening this anyway as I don't expect this code to change (a lot) any further, and it feels like it would make sense merging this independently of #4701.\n",https://github.com/bitcoin/bitcoin/pull/4515#issuecomment-63808611,63808611,
laanwj,2015-03-24T17:04:57Z,"Looks like this is not necessary for the current autoprune (#5863), so I'm closing this. Let me know if I'm wrong.\n",https://github.com/bitcoin/bitcoin/pull/4515#issuecomment-85599214,85599214,
sipa,2014-07-13T18:04:21Z,Why the map and bool? Just a set for both suffices.\n,https://github.com/bitcoin/bitcoin/pull/4515#discussion_r14859577,14859577,src/main.cpp
rdponticelli,2014-07-13T18:09:13Z,"Because if we go the #4481 route, we'll have to expand the logic to better manage the cases when the files are missing without failing.\n",https://github.com/bitcoin/bitcoin/pull/4515#discussion_r14859594,14859594,src/main.cpp
laanwj,2014-08-04T15:54:32Z,"Now that this has been moved to the end of the function, consider factoring it out to a separate function (eg. `CheckForBlockFiles()`) and calling that separately. After all, this is not part of loading the block index DB.\n",https://github.com/bitcoin/bitcoin/pull/4515#discussion_r15762874,15762874,src/main.cpp
Diapolo,2014-08-05T08:32:23Z,Idea: `Checking required block data is available...`?\n,https://github.com/bitcoin/bitcoin/pull/4515#discussion_r15800207,15800207,src/main.cpp
Diapolo,2014-08-05T08:32:32Z,I would prepend an `Error:` and also log which file exactly is missing (also a suggestion for normal block files).\n,https://github.com/bitcoin/bitcoin/pull/4515#discussion_r15800213,15800213,src/main.cpp
rdponticelli,2014-08-05T21:37:04Z,"""Error:"" prepended, but notice that this condition doesn't mean a file is missing, but that we don't have the bit HAVE_UNDO set in the index for this block. If the file were missing, it would be logged by the function called in line 3015. So, there's no need to log a file name here, IMHO.\n",https://github.com/bitcoin/bitcoin/pull/4515#discussion_r15843624,15843624,src/main.cpp
Diapolo,2014-08-06T06:06:33Z,"Nit: `undo data` also fits better in here, but no need to add, if this is going to be merged soon.\n",https://github.com/bitcoin/bitcoin/pull/4515#discussion_r15857369,15857369,src/main.cpp
laanwj,2015-03-18T13:20:53Z,"It's not clear to me why you switched from the two-pass solution to a single loop, but from a readability viewpoint I'd prefer something like:\n\n``` c++\nstd::map<int,uint32_t> mapBlkDataFiles;\nBOOST_FOREACH(const PAIRTYPE(uint256, CBlockIndex*)& item, mapBlockIndex)\n{\n    CBlockIndex* pindex = item.second;\n    mapBlkDataFiles[pindex->nFile] |= pindex->nStatus;\n}\nfor (std::map<int,uint32_t>",https://github.com/bitcoin/bitcoin/pull/4515#discussion_r26661335,26661335,src/main.cpp
laanwj,2015-03-18T13:21:04Z,These functions can be static\n,https://github.com/bitcoin/bitcoin/pull/4515#discussion_r26661351,26661351,src/main.cpp
laanwj,2015-03-18T13:23:05Z,```\n/** Check all required block and undo files are present */\n```\n,https://github.com/bitcoin/bitcoin/pull/4515#discussion_r26661504,26661504,src/main.h
