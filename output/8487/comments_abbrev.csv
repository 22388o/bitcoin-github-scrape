jonasschnelli,2016-08-09T07:05:09Z,"Concept ACK.\nIssue with this PR: If the user passes `-resetguisettings`, I think we should also evict the custom set data dir.\n",https://github.com/bitcoin/bitcoin/pull/8487#issuecomment-238471059,238471059,
MarcoFalke,2016-08-09T07:43:42Z,"> If the user passes -resetguisettings, I think we should also evict the custom set data dir.\n\nWhich raises the question if `-resetguisettings` should cause the intro to pop up again (force `-choosedatadir`).\n",https://github.com/bitcoin/bitcoin/pull/8487#issuecomment-238478129,238478129,
achow101,2016-08-09T13:25:21Z,"> Issue with this PR: If the user passes -resetguisettings, I think we should also evict the custom set data dir.\n\nWhy should it? The primary issue is that the user doesn't know the datadir has been reset. So then resetting the options should either keep the datadir or have the user choose the datadir again.\n",https://github.com/bitcoin/bitcoin/pull/8487#issuecomment-238551657,238551657,
laanwj,2016-08-10T13:07:55Z,"> Which raises the question if -resetguisettings should cause the intro to pop up again (force -choosedatadir).\n\nI think it should either reset the data directory _and_ reask with the dialog at start, or keep the data directory the same. The middle ground makes no sense.\n",https://github.com/bitcoin/bitcoin/pull/8487#issuecomment-238860815,238860815,
jonasschnelli,2016-08-10T13:15:46Z,"> I think it should either reset the data directory and reask with the dialog at start, or keep the data directory the same. The middle ground makes no sense.\n\nAgree and I think it should re-ask with the init dialog at start.\n",https://github.com/bitcoin/bitcoin/pull/8487#issuecomment-238862891,238862891,
achow101,2016-08-10T13:26:32Z,"Ok, I will change this PR to reask for the datadir at start.\n",https://github.com/bitcoin/bitcoin/pull/8487#issuecomment-238865732,238865732,
achow101,2016-08-10T20:43:26Z,I've updated it so that it will reask for the datadir at the start. I've also left the datadir persist stuff since it is still needed for if `-resetguisettings` is used.\n,https://github.com/bitcoin/bitcoin/pull/8487#issuecomment-238997754,238997754,
laanwj,2016-08-17T11:46:52Z,"Separate from the changes here, we have a bug in this logic. There are two user actions that can result in a settings reset:\n- A1: Start bitcoin-qt with `-resetguisettings`. This results in `app.createOptionsModel(true)`, which calls `OptionsModel::Reset()`, before going into `OptionsModel::Init`.\n- A2: Go to the options dialog and click the ""Reset options"" button. This calls `model->Reset()` an",https://github.com/bitcoin/bitcoin/pull/8487#issuecomment-240388320,240388320,
laanwj,2016-08-17T11:52:41Z,"Oh, shit, that won't work either.\n- Step 7 determines the network (testnet or mainnet)\n- And we want `-resetguisettings` to clear the options for the current network, not the mainnet ones, so doing it before step 6 would clear the wrong settings.\n\nThis initialization sequence is so damn complex because it is possible to put `testnet=1` in the `bitcoin.conf` file, as this file is in the mainnet",https://github.com/bitcoin/bitcoin/pull/8487#issuecomment-240389324,240389324,
achow101,2016-08-17T12:42:54Z,"Yeah, so to deal with A1, I left in the code that keeps the datadir. So what happens is that if the user does anything to reset the options, the choose datadir window will appear and let them choose the datadir. Then, if A1 happens, the datadir is still set and will remain the same after the options are reset.\n",https://github.com/bitcoin/bitcoin/pull/8487#issuecomment-240399276,240399276,
laanwj,2016-08-18T14:45:36Z,"Ok, makes sense.\n\nAnother question: what is the specific need for `fReset`? What makes a reset state different from just a clean slate? Both should get you into the datadir choose dialog, assuming the default datadir doesn't exist (which would be really strange if the user selected a different one).\n",https://github.com/bitcoin/bitcoin/pull/8487#issuecomment-240745702,240745702,
achow101,2016-08-18T14:51:53Z,"A reset state does not remove the datadir. A user may be using the default \ndatadir and reset the options. We want the behavior to be consistent \nregardless of the datadir.\n\nAlso, it is possible that the default datadir could already exist, perhaps \nfrom moving the datadir but not deleting it, or testnet or regtest used the \ndefault datadir but mainnet does not. This would mean that it finds",https://github.com/bitcoin/bitcoin/pull/8487#issuecomment-240747824,240747824,
jonasschnelli,2016-08-24T09:29:46Z,Tested ACK https://github.com/bitcoin/bitcoin/tree/57b85246d313ac5af94cc86ed98ae4a665e40800 modulo indentation nit.\n,https://github.com/bitcoin/bitcoin/pull/8487#issuecomment-242007263,242007263,
laanwj,2016-08-24T09:30:46Z,"@achow101 this seems ready to merge apart from the indentation nit ,can you please fix that?\n",https://github.com/bitcoin/bitcoin/pull/8487#issuecomment-242007496,242007496,
achow101,2016-08-24T13:41:24Z,Nit addressed\n,https://github.com/bitcoin/bitcoin/pull/8487#issuecomment-242067559,242067559,
jonasschnelli,2016-08-25T09:42:54Z,Tested ACK 15df3c1\n,https://github.com/bitcoin/bitcoin/pull/8487#issuecomment-242332926,242332926,
luke-jr,2016-09-10T09:07:32Z,Backport needed?\n,https://github.com/bitcoin/bitcoin/pull/8487#issuecomment-246101084,246101084,
achow101,2016-09-10T13:27:04Z,> Backport needed?\n\nIs it?\n,https://github.com/bitcoin/bitcoin/pull/8487#issuecomment-246111742,246111742,
laanwj,2016-08-18T14:52:26Z,nit: wrong indentation\n,https://github.com/bitcoin/bitcoin/pull/8487#discussion_r75323241,75323241,src/qt/intro.cpp
