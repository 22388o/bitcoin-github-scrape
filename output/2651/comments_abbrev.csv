BitcoinPullTester,2013-05-13T14:12:57Z,"Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/095a25539e9d243160a1e5ee5dec79d789ea3a27 for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/cu",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-17813956,17813956,
jonasschnelli,2013-05-24T14:55:09Z,@laanwj can you review again? Now the transaction gets prepared and the instance will be used to commit the transaction.\n,https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-18409772,18409772,
BitcoinPullTester,2013-05-24T15:43:23Z,"Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/150111c53fc08db0ecc2fb894f80e17d80e37c39 for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/cu",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-18412766,18412766,
BitcoinPullTester,2013-05-26T11:16:40Z,"Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/508caa7bc26a1b06fc193892098dbc58f183df15 for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/cu",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-18461525,18461525,
laanwj,2013-05-31T22:56:27Z,"Looks like the correct way forward!\n\nI wonder about one thing, though: As the wallet lock is released in the time between the creation of the prepared transaction and committing it (which in principle is a good thing, otherwise everything using the wallet will hang), it seems possible for another spend in the background (for example, through RPC) to spend the inputs used by the transaction. I'm ",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-18776129,18776129,
jonasschnelli,2013-06-03T07:06:36Z,"@laanwj good catch. The QMessageBox can stay open till infinity (it needs user action). So,... the missing wallet locking can be quite a problem. I do test now what happens when i keep open the message box and trigger another payment with rpc.\n",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-18824958,18824958,
jonasschnelli,2013-06-03T08:15:08Z,"Did some testing.\nWhen spending the coins (whole wallet balance) in background using RPC sendtoaddress during the open QMessageBox (asking for confirmation), i get a correct error when trying to spend the prepared transaction (`WalletModel:sendCoins`) `TransactionCommitFailed`.\nError handling is fine in my eye.\n\nI focus now on the string generation for informing the user about the fee.\n",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-18827324,18827324,
jonasschnelli,2013-06-03T08:45:41Z,squashed  and ready for ACK's :)\n,https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-18828534,18828534,
Diapolo,2013-06-03T09:25:28Z,I think the dialog boxes look a little disturbed and should be perhaps a little more tidy.\nMy idea would be to design it as a list to be more easily readable and the fee display as an addittional sentence at the end.\n\n<pre>\nAre you sure you want to send?\nXY BTC to:\n%LABEL% (%ADDRESS%)\nXY BTC to:\n%LABEL% (%ADDRESS%)\n...\n----------------------\nThis transaction requires a fee of %FEE%.\n</,https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-18830246,18830246,
BitcoinPullTester,2013-06-03T09:28:13Z,"Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/7b5936bce40141a0e838294bce37a0e1d544912e for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/cu",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-18830350,18830350,
BitcoinPullTester,2013-06-03T10:33:55Z,"Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/0e2c7f1923754159fa0f6f8d7f6430b0ef00f906 for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/cu",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-18833096,18833096,
rebroad,2013-06-03T11:31:36Z,Please bear in mind people who use high contrast themes who are visually\nimpaired. The OS needs to be able to use the correct colour in this\nsituation.\n,https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-18835314,18835314,
BitcoinPullTester,2013-06-03T11:40:24Z,"Automatic sanity-testing: FAILED MERGE, see http://jenkins.bluematt.me/pull-tester/149973ef0214d9aa2d3d83838eb2bdba8942b5ac for test log.\n\nThis pull does not merge cleanly onto current master\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is mo",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-18835699,18835699,
Diapolo,2013-06-03T11:54:45Z,"Looks very nice :), if you only could change `this transaction requires a fee of XYZ BTC` into `This transaction requires a fee of XYZ BTC.` (uppercase start and `.` to make it a sentence) ^^.\n\nI hope people don't mess with the HTML stuff when translating on Transifex...\n",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-18836226,18836226,
jonasschnelli,2013-06-03T12:11:52Z,Will fix the typo.\n@Diapolo: what do you think if we take the html stuff into separates stings. Goal: exclude html from tr stuff. It might be then a bit a string gluing battle. But prevents us from messed up transiflex sources. \n,https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-18836926,18836926,
Diapolo,2013-06-03T12:17:32Z,"Let's see what @laanwj thinks, but if possible I would prevent big HTML stuff in translatable strings if possible, like you suggest.\n",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-18837166,18837166,
laanwj,2013-06-03T12:31:24Z,"I agree, better to let people translate only the messages and keep the\nsurrounding html fixed.\n",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-18837785,18837785,
jonasschnelli,2013-06-03T12:34:55Z,okay. Let me slice the strings...\n,https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-18837965,18837965,
jonasschnelli,2013-06-03T13:16:41Z,did some string slicing. But i'm not sure if it's still readable like this and might also leads to transiflex problems. I'd prefer the previous version...\n,https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-18840114,18840114,
laanwj,2013-06-03T13:32:33Z,"IMO this is not much better, instead of html the translation messages now\ncontain lots of %%%. If you want to slice the strings, why not use\nconcatenation (+) instead of  all the interpolation?\nOr maybe we'll just have to accept a little html in the translation strings\nif it's the least worst option...\n",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-18841128,18841128,
BitcoinPullTester,2013-06-03T14:57:57Z,"Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/6a529b9312b981df9852d24ea5907a3187e3244f for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/cu",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-18846896,18846896,
wtogami,2013-06-05T19:22:59Z,"Could you please squash the commits, rebasing on top of master?\n",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-19002133,19002133,
jonasschnelli,2013-06-07T10:39:16Z,"rebased, squashed, updated.\n- Added new string recommended by @PRab \n- overhauled string gluing like @Diapolo recommended.\n\nNow it looks like:\n\nsingle no fee (std case):\n![bildschirmfoto 2013-06-07 um 12 31 40](https://f.cloud.github.com/assets/178464/623262/5ce7181e-cf5e-11e2-9fcc-5cb8fdd13f0a.png)\n\nsingle with fee:\n![bildschirmfoto 2013-06-07 um 12 32 13](https://f.cloud.github.com/ass",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-19099969,19099969,
Diapolo,2013-06-07T10:47:51Z,"Looks really nice now, just add a little `!` after fee to make it a sentence and you have my design ACK (I'm not deep enough into Tx-code to ACK that part)!\n",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-19100254,19100254,
jonasschnelli,2013-06-07T10:53:01Z,"@Diapolo agree for the ""!"". Added, commited, pushed.\n",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-19100408,19100408,
Diapolo,2013-06-07T10:55:05Z,ACK\n,https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-19100488,19100488,
sipa,2013-06-07T16:30:20Z,Looks good. Haven't checked the code or tested.\n\nOne question: what does a voluntary fee look like?\n,https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-19117789,19117789,
jonasschnelli,2013-06-07T18:04:24Z,@sipa: It does look the same (check screenshot with voluntary 0.1BTC fee):\n![bildschirmfoto 2013-06-07 um 20 03 04](https://f.cloud.github.com/assets/178464/625337/a6e8cdc0-cf9c-11e2-83fe-6ef6db740474.png)\n\nMaybe the sentence need to be changed. What do you think?\n,https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-19123165,19123165,
PRabahy,2013-06-07T18:07:06Z,"Just changing ""required"" to ""added"" makes it sound good to me.\n",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-19123315,19123315,
jonasschnelli,2013-06-07T18:07:52Z,@PRab okay. sounds good. Let me check how i can detect if vol. or req. fee.\n,https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-19123370,19123370,
wtogami,2013-06-07T18:30:22Z,"+1 to ""required"" or ""added"" depending on if it is required or voluntary.\n",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-19124726,19124726,
cozz,2013-06-07T20:01:35Z,"I am trying to merge this in coin control,\nthere seems to be a serious bug in how you handle CReserveKey keyChange.\nIf you send a transaction which creates change, the wallet gets permanently locked. Simply send 2 transactions in a row, to test this, but you must have change.\nYou can also send a transaction and then try to create a new address in the receive tab -> runtime error.\nbitcoin-qt: /",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-19129672,19129672,
laanwj,2013-06-07T23:39:52Z,"I like this.\n\nOne nit though: I think highlighting the fee in red as well as adding an exclamation mark is over the top. That's only warranted if the fee is high compared the the amount to be sent. Otherwise, just use a period, no need to scream.\n",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-19138661,19138661,
rebroad,2013-06-08T02:48:15Z,"I agree. It also potentially discriminates against visually impaired people\nif it cannot be overridden by the operating system's theme.\nOn Jun 8, 2013 6:40 AM, ""Wladimir J. van der Laan"" notifications@github.com\nwrote:\n\n> I like this.\n> \n> One nit though: I think highlighting the fee in red as well as adding an\n> exclamation mark is over the top. That's only warranted if the fee is high\n>",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-19141802,19141802,
laanwj,2013-06-08T06:52:19Z,"That's a subject for another pull request. We have quite a few hardcoded\ncolors at the moment. It would be nice to be able to override them with a\ntheme for example with a css file. But to keep the scope of this pull\nrequest limited, red will do for now.\n",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-19144191,19144191,
wtogami,2013-06-08T06:59:20Z,Although please look into the issue identified by cozz.\n,https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-19144273,19144273,
jonasschnelli,2013-06-09T11:56:29Z,"@cozz Thanks for the report. The problem might be, that the `return` of the new `prepareTransaction` method is within the `LOCK` block. I will clean this up and move the return out of the LOCK block.\n",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-19164925,19164925,
jonasschnelli,2013-06-09T12:02:15Z,"Updated. Exclamation mark is removed. Voluntary gets detected. LOCK problematic ""could"" be fixed. @cozz can you retest?\nCan somebody have a closer look into the `prepareTransaction` and `sendCoins` methods? Especially the locking, etc.?\n",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-19165001,19165001,
cozz,2013-06-11T00:20:45Z,"I still have the lock-problem. I have tested on linux and windows. I think the problem is that CReserveKey keyChange(wallet); is defined in the function.\nI can fix the problem when I define CReserveKey as a pointer, but then it may  be memory leaked I guess, if not deletes added. So you could do this or\nyou could define CReserveKey in sendcoinsdialog and pass it as a parameter. But there you can",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-19234518,19234518,
cozz,2013-06-11T02:42:03Z,"To determine whether a fee is added or required in the case where you have set a voluntary fee is not possible, createTransaction does not tell you that. It tells you how much fee has been added, but not why.\nSo to provide really accurate ""added/required"" message, we would have to add a boolean return fForcedFee to createTransaction. Or we could simply write ""added"" in all cases to make it simple",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-19237945,19237945,
sipa,2013-06-11T08:48:52Z,"I'm fine with just saying ""added"" here.\n\nAbout CReserveKey: would it help to remove its dependency on CWallet, and have the CWallet passed explicitly when needed (when getting a pubkey, or when keeping/returning)?\n",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-19249409,19249409,
jonasschnelli,2013-06-11T08:51:42Z,"@cozz: I do compare the requiresFee from createTransaction with the possible voluntary fee from the settings. If the value is the same, it must be a voluntary fee. Or not?\n",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-19249536,19249536,
laanwj,2013-06-11T09:32:46Z,"It's a possible check - but just that the value matches does not provide\ncertainty.\n\nFor now I strongly prefer always using ""added"" to prevent unneccesary\ncomplexity.\n\nSuch checking could always be added in a later pull and reviewed and tested\nseparately.\n",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-19251183,19251183,
jonasschnelli,2013-06-11T10:17:04Z,"@laanwj We could change to ""added"" in all cases. But my understanding is that the user should be happy when he set (example) a 0.001BTC vol. fee in settings and then read ""added"" (even when the tx would require 0.001BTC as fee). When the tx fee would be higher, it would then be ""required"".\n",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-19252993,19252993,
laanwj,2013-06-11T13:12:38Z,"Yes -- but mind that the fee set in configuration is per KB, so at least you'd have to do some computations as well. I'm not comfortable with the UI making guesses based on the amount. That logic doesn't belong there.\n\nOn the other hand I'm fine with a solution in which CreateTransaction returns a flag whether the fee was voluntary or not (as @cozz suggest), but it should not be in this pull req",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-19260459,19260459,
jonasschnelli,2013-06-11T13:17:18Z,"Okay. Let's move the added/required distinction to a possible upcoming pull. I will just change it to ""added"". I try now to fix the CReserveKey thing...\n",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-19260716,19260716,
BitcoinPullTester,2013-06-13T04:18:46Z,"Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/d01361332e958e880805c2a604b651248dc5eac8 for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/cu",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-19371257,19371257,
jonasschnelli,2013-06-13T07:57:15Z,"@Cozz, @sipa: i've updated the CReserveKey handling. The CReserveKey will now no longer be passed around. I decided to keep it as a instance var of walletmodel (including a new cleanup transaction method). If you could review it.. would be appreciated.\n@Cozz: if you find time: Could you do a retest (it sounds that you have a proper test-setup).\n",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-19377310,19377310,
BitcoinPullTester,2013-06-13T08:45:11Z,"Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/d2b910cc472e43dfb23fe24566c1cc020acdbd2b for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/cu",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-19379206,19379206,
laanwj,2013-06-13T09:36:59Z,"I don't like the temporary state in WalletModel. This is a similar concern\nas I have with the coin control patch (which, last time I checked, added\noutput selection state). Such state causes possible concurrency issues,\nwhat if a new transaction is created before the old one is cleaned up. At\nleast a leak.\n\nI'd prefer the transaction object returned from preparetransaction to be\nself-contai",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-19381566,19381566,
jonasschnelli,2013-06-13T09:50:30Z,"@laanwj yes. These state's are really not easy to handle. They need a very clear work to avoid leaks, etc. The problem is, that i'm going deeper than i should. :) I do not see the root cause of the CReserveKey problem as i also do not have a test setup to debug it. The WalletModelTransaction class sounds after a good idea. For now it looks a bit overheaded but it's extendable and it's a good base ",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-19382110,19382110,
laanwj,2013-06-13T11:03:06Z,"Yeah, point on overdesign taken. My initial design idea was to keep the UI\nand core as separare as possible, so all communication and usage of core\ndata structures happens through models (signmessafe was the first to break\nthis). It thus makes me a bit sad to see more and more includes of core\nheaders leaking into non-model UI files, and core data structures there\nbeing used directly.\n\nIn a",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-19385042,19385042,
cozz,2013-06-13T18:37:57Z,It works for me now.\n,https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-19414686,19414686,
jonasschnelli,2013-06-17T07:28:11Z,"Update code, moved transaction-stuff to a own class.\n@Cozz: could you please re-test one more time?\n@laanwj: code-review?\n",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-19529826,19529826,
BitcoinPullTester,2013-06-19T00:56:38Z,"Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/aff22cd76ebf4fbe7a11875d17e6b932b2b1d8e8 for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/cu",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-19654782,19654782,
cozz,2013-06-29T23:50:13Z,"tested again, seems to work, just some minor things I have noticed:\n- required/added still there\n- remove file src/walletmodeltransaction.h, it doesnt belong there, accident I guess. model and qt code should not be in src-folder anyway\n- you forgot transaction.setTransactionFee(nFeeRequired); in walletmodel.cpp line 196 before the return\n  same thing line 168 transaction.setTransactionFee(nTra",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-20239417,20239417,
jonasschnelli,2013-07-01T17:54:23Z,Thanks @cozz will have a look at it soon/tmr\n,https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-20298556,20298556,
jonasschnelli,2013-07-10T06:52:30Z,cleaned up and fixed issues reported by @cozz. Ready for some final ACKs.\n,https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-20724560,20724560,
BitcoinPullTester,2013-07-10T07:23:52Z,"Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/a027df6fa8e6ebf1cb221e3ef93977c85efddb5a for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/cu",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-20725588,20725588,
BitcoinPullTester,2013-07-20T06:07:34Z,"Automatic sanity-testing: FAILED MERGE, see http://jenkins.bluematt.me/pull-tester/aedfd8dd4892cb79b33a13c9c9db1c188be6aca9 for test log.\n\nThis pull does not merge cleanly onto current master\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is mo",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-21288897,21288897,
Diapolo,2013-08-05T09:31:07Z,@jonasschnelli What is the current state for this pull?\n,https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-22095550,22095550,
jonasschnelli,2013-08-05T10:14:50Z,Sorry. Didn't realize that my turn is missing... will check it and give response soon. @Diapolo thanks for the reminder! \n,https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-22097413,22097413,
Diapolo,2013-08-05T11:51:03Z,"No problem, I was just wondering, why that one isn't merged yet and saw there is an open feedback from @cozz and you surely need to rebase.\n",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-22101242,22101242,
laanwj,2013-08-10T08:28:50Z,"Yes, let's try to get this merged.\n",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-22436205,22436205,
jonasschnelli,2013-08-10T12:53:33Z,"Okay. Fixed the ""amount plus fee exceeds balance"" issue while setting the transaction fee in the transaction model to always 0.\n\nSome final ACK's?\n",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-22439288,22439288,
BitcoinPullTester,2013-08-10T13:20:57Z,"Automatic sanity-testing: FAILED MERGE, see http://jenkins.bluematt.me/pull-tester/bb8da7fd3ce971714ec9af34010d53b51a4d45e2 for test log.\n\nThis pull does not merge cleanly onto current master\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is mo",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-22439684,22439684,
jonasschnelli,2013-08-10T13:35:58Z,hmm... need to rebase. \n,https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-22439888,22439888,
BitcoinPullTester,2013-08-10T14:37:14Z,"Automatic sanity-testing: FAILED BUILD/TEST, see http://jenkins.bluematt.me/pull-tester/237edd014bf4017fdcb756f6f8c8001a573531c4 for binaries and test log.\n\nThis could happen for one of several reasons:\n1. It chanages paths in makefile.linux-mingw or otherwise changes build scripts in a way that made them incompatible with the automated testing scripts (please tweak those patches in contrib/tes",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-22440847,22440847,
jonasschnelli,2013-08-12T06:18:12Z,@Diapolo did cleanup the code (fixed your pointing) and also got rid of the setOptionsModel in sendCoinsDialog.\n,https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-22474957,22474957,
Diapolo,2013-08-12T06:51:46Z,"@jonasschnelli Thanks for your hard work here, I have to say sorry, but IMHO we need to check the data types for fee variables once more. In the core we use `int64 nTransactionFee`, so AFAIK we should then match this in our Qt code by using `qint64`, right? So places which you recently changed to `quint64` should be `qint64` to match core.\n",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-22475839,22475839,
jonasschnelli,2013-08-12T06:56:45Z,@Diapolo yes. I've also thought we should not use unsigned vars. I also prefer qint64. Let me change this.\n,https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-22475993,22475993,
jonasschnelli,2013-08-12T06:58:51Z,"Now i use qint64 for fee ""holders"". Should now corespondent with the non-qt code where we use int64.\n",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-22476054,22476054,
BitcoinPullTester,2013-08-12T07:10:56Z,"Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/b24cb4ceeaefce25993a27badea740a922d4090c for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/cu",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-22476394,22476394,
Diapolo,2013-08-12T07:14:53Z,"Looks good now, let's see what @laanwj thinks about the general idea now (use qint64 etc. in Qt code).\n",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-22476508,22476508,
BitcoinPullTester,2013-08-12T08:10:38Z,"Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/2cb460966a15595b8eb3c393a4ff47b7ab1011f8 for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/cu",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-22478480,22478480,
wtogami,2013-08-23T11:38:32Z,ping @laanwj \n,https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-23158321,23158321,
Diapolo,2013-08-29T13:42:51Z,"Dunno if it needs another rebase, but ping @laanwj :).\n",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-23489900,23489900,
laanwj,2013-08-29T17:53:31Z,"Looks good, ACK.\nSeems there are some minor conflicts with the payment request changes.\n",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-23509006,23509006,
jonasschnelli,2013-08-30T07:21:29Z,I'll do a rebase soon...\n,https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-23544540,23544540,
laanwj,2013-08-30T09:04:29Z,I can do it too if you want\n,https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-23548857,23548857,
jonasschnelli,2013-08-30T09:07:49Z,"If you have time, would be nice! I'm busy with other stuff right now...\n",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-23549008,23549008,
laanwj,2013-08-30T12:16:07Z,"Will give it a try, though it seems more work than expected. Some areas (such as on_sendbutton_clicked) are pretty heavily hit by both your patch and paymentrequest.\n",https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-23557143,23557143,
laanwj,2013-08-30T18:10:58Z,See #2958 for rebased version.\n,https://github.com/bitcoin/bitcoin/pull/2651#issuecomment-23579626,23579626,
Diapolo,2013-05-13T13:55:06Z,"Perhaps we should also offer a total here?\n`Are you sure you want to send %1 (%2 debit including %3 transaction fee)?`\n\nAnd while you are on, perhaps replace the BitcoinUnits::BTC via OptionsDialog::getDisplayUnit() to show the unit chosen in the settings?\n",https://github.com/bitcoin/bitcoin/pull/2651#discussion_r4193084,4193084,src/qt/sendcoinsdialog.cpp
jonasschnelli,2013-05-13T13:58:07Z,Okay. I've also thought about a total. But the alert screen as a text-only display will might not fit for a proper display. We could also think to make a extra confirmation view.\n\ngetDisplayUnit: will do that.\n,https://github.com/bitcoin/bitcoin/pull/2651#discussion_r4193146,4193146,src/qt/sendcoinsdialog.cpp
laanwj,2013-05-19T20:00:37Z,"As CreateTransaction is called twice, once to compute the fee, once to send the transaction, I wonder if the randomization inside CreateTransaction (the knapsack algorithm) won't give trouble here. It may pick a different set of inputs the second time and thus come up with a slightly different suggested fee.\n\nI'm not sure how much of a problem this is in practice.\n",https://github.com/bitcoin/bitcoin/pull/2651#discussion_r4290716,4290716,src/qt/walletmodel.cpp
jonasschnelli,2013-05-20T06:57:49Z,"Yes. I'm also not sure. But i thought it must act the same as you would do ""send coins"" -> ""cancel"" -> ""send coins"". The only difference is maybe that we won't go back to the main-runloop between ""cancel"" and the 2nd ""send coins"".\n",https://github.com/bitcoin/bitcoin/pull/2651#discussion_r4293034,4293034,src/qt/walletmodel.cpp
laanwj,2013-05-21T06:49:28Z,"This is exactly the same as clicking cancel and send coins again. Usually this gets the same fee but it's not guearanteed 100%.\n\nThis also builds the transaction twice, which for large wallets may cause some delay.\n\nThe ""perfect"" way would be to build the transaction (but not sign it), determine the fee and only then show the confirmation dialog. If confirmed, send exactly this transaction. Bu",https://github.com/bitcoin/bitcoin/pull/2651#discussion_r4311541,4311541,src/qt/walletmodel.cpp
jonasschnelli,2013-05-21T06:59:50Z,@laanwj let me analyze the code... i have some fears changing to much in core files. :)\n,https://github.com/bitcoin/bitcoin/pull/2651#discussion_r4311625,4311625,src/qt/walletmodel.cpp
laanwj,2013-05-21T07:10:30Z,@jonasschnelli You don't need to change anything in core files.  src/qt/WalletModel.cpp at most\n\nAnother thing to consider: how does this interact with encrypted wallets. Will it ask the passphrase an extra time?\n,https://github.com/bitcoin/bitcoin/pull/2651#discussion_r4311715,4311715,src/qt/walletmodel.cpp
jonasschnelli,2013-05-21T07:44:24Z,Yes. Good question. Let me also check this.\n,https://github.com/bitcoin/bitcoin/pull/2651#discussion_r4312026,4312026,src/qt/walletmodel.cpp
jonasschnelli,2013-05-24T14:55:55Z,i think we need to keep the possible keychange. don't we?\n,https://github.com/bitcoin/bitcoin/pull/2651#discussion_r4382494,4382494,src/qt/walletmodel.h
Diapolo,2013-05-24T21:43:11Z,I suggest:\n`Are you sure you want to send %1 (this transaction requires a fee of %2)?`\n,https://github.com/bitcoin/bitcoin/pull/2651#discussion_r4389663,4389663,src/qt/sendcoinsdialog.cpp
Diapolo,2013-05-24T21:43:48Z,Why a new-line at the start of the function ;)?\n,https://github.com/bitcoin/bitcoin/pull/2651#discussion_r4389674,4389674,src/qt/walletmodel.cpp
Diapolo,2013-05-24T21:45:01Z,"Also can you format this a little nicer than it was before, I think it's hard to read.\n",https://github.com/bitcoin/bitcoin/pull/2651#discussion_r4389697,4389697,src/qt/walletmodel.h
jonasschnelli,2013-05-26T10:22:27Z,For me this is now better readable.\n,https://github.com/bitcoin/bitcoin/pull/2651#discussion_r4394117,4394117,src/qt/walletmodel.h
jonasschnelli,2013-05-26T10:24:59Z,"This text needs a better formatting later. Like the case when txfee is 0 (then the text must not refer to a tx fee).\nBut i would recommend to fix the code issues, get reviews, get some ACK's (ok no okays) and move on with the text-display-layer (to save time if people don't ACK the change).\n",https://github.com/bitcoin/bitcoin/pull/2651#discussion_r4394124,4394124,src/qt/sendcoinsdialog.cpp
Diapolo,2013-05-26T11:28:47Z,"Yes it is :), thanks.\n",https://github.com/bitcoin/bitcoin/pull/2651#discussion_r4394237,4394237,src/qt/walletmodel.h
Diapolo,2013-06-03T09:20:02Z,I would rather use a fixed HTML color value like just `red` (symbolic name AFAIK) to be sure we don't mess with the users OS theme.\n,https://github.com/bitcoin/bitcoin/pull/2651#discussion_r4496220,4496220,src/qt/sendcoinsdialog.cpp
jonasschnelli,2013-06-03T09:49:30Z,But #aa0000 is not red. :)\nRed is somehow to strong and looks more like an error. #a00 is a darker red. Maybe there's a equivalent symbolic color. let me check...\n,https://github.com/bitcoin/bitcoin/pull/2651#discussion_r4496581,4496581,src/qt/sendcoinsdialog.cpp
sipa,2013-06-03T09:50:40Z,I don't see how using a color name or its hex representation would in any way impact interaction with OS themes; they're both a static color.\n,https://github.com/bitcoin/bitcoin/pull/2651#discussion_r4496600,4496600,src/qt/sendcoinsdialog.cpp
jonasschnelli,2013-06-03T10:09:09Z,"Yes. Agree.\nIn theory a color name like ""darkRed"" could be mapped to a different color hex code. But this would be against W3C.\n#aa00000 is fine for me and as far as i see there is no theme like code setup where i could place/get existing colors.\n",https://github.com/bitcoin/bitcoin/pull/2651#discussion_r4496840,4496840,src/qt/sendcoinsdialog.cpp
Diapolo,2013-06-03T13:38:58Z,"I thought of it the other way around.\n\nQString strTo = tr(""to""); and so on and use this in the .append() function and don't use tr() there.\n",https://github.com/bitcoin/bitcoin/pull/2651#discussion_r4499325,4499325,src/qt/sendcoinsdialog.cpp
jonasschnelli,2013-06-04T06:54:05Z,"Hmm.. i was also thinking that way. But as far as i remember other i18n projects, sometimes a simple ""to"" can not just be exchanged because other languages need changes at other places (like swapping words, etc.). Do you know what i mean?\nWho is now for which solution?\n1) original solution with html in tr-strings\n2) current solution with %X to avoid html in tr-strings\n3) solution from @Diapolo",https://github.com/bitcoin/bitcoin/pull/2651#discussion_r4516615,4516615,src/qt/sendcoinsdialog.cpp
Diapolo,2013-06-04T09:54:39Z,"I had a similar problem while doing the german translations one time, with `""Last received block was generated %1 ago.`, in combination with the plural of `%n day(s)`, which was solveable via chosing a similar meaning but not doing an exact translation. I can't really tell if this will work here, but I vote number 3.\n\nAlso it looks like we have 2 complete sentences and only the `to` is a little ",https://github.com/bitcoin/bitcoin/pull/2651#discussion_r4519022,4519022,src/qt/sendcoinsdialog.cpp
PRabahy,2013-06-06T20:53:49Z,"I would reword ""This transaction requires ..."" to ""123 BTC required as transaction fee"". That follows the same flow of the list of outputs (amount --> recipient).\n",https://github.com/bitcoin/bitcoin/pull/2651#discussion_r4577536,4577536,src/qt/sendcoinsdialog.cpp
cozz,2013-07-10T17:32:34Z,"nFeeRequired must be replaced with nTransactionFee here, I would remove this line and put it below before the return:\nif((total + nTransactionFee) > getBalance())\n{\n        transaction.setTransactionFee(nTransactionFee);\n        return SendCoinsReturn(AmountWithFeeExceedsBalance);\n}\n",https://github.com/bitcoin/bitcoin/pull/2651#discussion_r5121219,5121219,src/qt/walletmodel.cpp
cozz,2013-07-10T17:34:10Z,I think there is a \nfNewRecipientAllowed = true;\nmissing before this return\n,https://github.com/bitcoin/bitcoin/pull/2651#discussion_r5121274,5121274,src/qt/sendcoinsdialog.cpp
jonasschnelli,2013-07-11T07:19:29Z,Good catch! Thanks. changed.\n,https://github.com/bitcoin/bitcoin/pull/2651#discussion_r5134827,5134827,src/qt/sendcoinsdialog.cpp
jonasschnelli,2013-07-11T07:19:41Z,Okay. Your right. Changed.\n,https://github.com/bitcoin/bitcoin/pull/2651#discussion_r5134830,5134830,src/qt/walletmodel.cpp
cozz,2013-07-11T12:48:18Z,"you still say nFeeRequired, you must replace this with nTransactionFee:\ntransaction.setTransactionFee(nTransactionFee);\n",https://github.com/bitcoin/bitcoin/pull/2651#discussion_r5139351,5139351,src/qt/walletmodel.cpp
laanwj,2013-08-10T08:28:44Z,"Agreed, the ""amount plus fee exceeds balance"" check fails, yet we still set the transaction's fee to nFeeRequired which is 0 at this point.\n",https://github.com/bitcoin/bitcoin/pull/2651#discussion_r5697306,5697306,src/qt/walletmodel.cpp
Diapolo,2013-08-10T15:11:37Z,"You added this class attribute, but it seems it's not used.\nIMHO you could replace all `model->getOptionsModel()` calls with `optionsModel`.\n",https://github.com/bitcoin/bitcoin/pull/2651#discussion_r5697767,5697767,src/qt/sendcoinsdialog.cpp
Diapolo,2013-08-10T15:16:51Z,unneeded new-line\n,https://github.com/bitcoin/bitcoin/pull/2651#discussion_r5697786,5697786,src/qt/walletmodel.cpp
Diapolo,2013-08-10T15:19:52Z,Should we use qint64 and quint64 below as this is Qt code (same above int64 newFee)?\n,https://github.com/bitcoin/bitcoin/pull/2651#discussion_r5697796,5697796,src/qt/walletmodeltransaction.h
jonasschnelli,2013-08-11T20:20:49Z,Right. The optionsModal was for the (now removed) check if the fee is voluntary.\nWill remove this soon.\n,https://github.com/bitcoin/bitcoin/pull/2651#discussion_r5701002,5701002,src/qt/sendcoinsdialog.cpp
Diapolo,2013-08-12T06:40:53Z,int64 -> qint64\n,https://github.com/bitcoin/bitcoin/pull/2651#discussion_r5703506,5703506,src/qt/walletmodel.cpp
Diapolo,2013-08-12T06:42:24Z,"int64 -> quint64, as fee is a quint64\n",https://github.com/bitcoin/bitcoin/pull/2651#discussion_r5703520,5703520,src/qt/walletmodeltransaction.cpp
jonasschnelli,2013-08-12T06:42:52Z,fixed.\n,https://github.com/bitcoin/bitcoin/pull/2651#discussion_r5703525,5703525,src/qt/walletmodel.cpp
Diapolo,2013-08-12T06:43:19Z,@laanwj Perhaps even here int64 should be changed to qint64?\n,https://github.com/bitcoin/bitcoin/pull/2651#discussion_r5703532,5703532,src/qt/walletmodel.cpp
Diapolo,2013-08-12T06:47:21Z,"int64 -> quint64, to match the function definition :)\n",https://github.com/bitcoin/bitcoin/pull/2651#discussion_r5703570,5703570,src/qt/walletmodeltransaction.h
jonasschnelli,2013-08-12T06:48:28Z,fixed.! :)\n,https://github.com/bitcoin/bitcoin/pull/2651#discussion_r5703577,5703577,src/qt/walletmodeltransaction.h
