gavinandresen,2015-01-05T17:03:38Z,"Code review ACK, but there is a functional change: with this code the internal miner will never search the nonce space above 0xfff.\n\nAlso: how did you test this?\n",https://github.com/bitcoin/bitcoin/pull/5599#issuecomment-68738786,68738786,
jtimon,2015-01-05T19:30:58Z,We discussed this in #4793 . @sipa said in some outdated commit that removing `if ((nNonce & 0xffff) == 0)` was safe but I can't remember the reason why it was that if instead of the later `if ((nNonce & 0xfff) == 0)` what can be removed.\nNow that you're saying it I think it is a mistake and what can be removed is just:\n\n```\nif ((nNonce & 0xfff) == 0)\n    boost::this_thread::interruption_poin,https://github.com/bitcoin/bitcoin/pull/5599#issuecomment-68762125,68762125,
sipa,2015-01-05T23:05:33Z,"@gavinandresen I haven't tested, but it's just ScanHash that returns after 0x1000 iterations - the mining loop continues with the same nonce until 0xffff0000 is reached (which could actually become 0xfffff000 then, but who cares).\n",https://github.com/bitcoin/bitcoin/pull/5599#issuecomment-68798564,68798564,
sipa,2015-01-06T15:37:55Z,"Tested ACK: adding a `LogPrintf(""Nonce: %x\n"", nNonce);` in the loop that calls ScanHash, and running `setgenerate true` in `-testnet` mode confirms higher nonces are being tried.\n",https://github.com/bitcoin/bitcoin/pull/5599#issuecomment-68881018,68881018,
jtimon,2015-01-07T23:36:07Z,"Oh, here it was the missing piece of earlier conversation: https://github.com/jtimon/bitcoin/commit/9d12ff72a6f97ed1e53e0d106abe1a3a7e1f56f8#diff-4a59b408ad3778278c3aeffa7da33c3cR384\n",https://github.com/bitcoin/bitcoin/pull/5599#issuecomment-69112411,69112411,
laanwj,2015-01-08T12:02:22Z,"@luke-jr this is mining related, can you ACK?\n",https://github.com/bitcoin/bitcoin/pull/5599#issuecomment-69170686,69170686,
luke-jr,2015-01-08T13:16:00Z,"ACK, only tested on regtest since testnet-in-a-box style apparently refuses to mine in master... :/\n",https://github.com/bitcoin/bitcoin/pull/5599#issuecomment-69177362,69177362,
luke-jr,2015-01-08T13:20:49Z,ACK on testnet via gdb testing\n,https://github.com/bitcoin/bitcoin/pull/5599#issuecomment-69177815,69177815,
gavinandresen,2015-01-08T20:52:39Z,"Better is better... so ACK.\n\nBut after removing the hashmeter, and assuming we no longer care about performance of the CPU miner (we don't) it looks to me like the code could be simplified a lot by getting rid of ScanHash and just having the mining loop be:\n\n```\n   while true:\n       ... create block...\n       ... serialize header without nonce..\n       set nonce to zero\n       do:\n     ",https://github.com/bitcoin/bitcoin/pull/5599#issuecomment-69247130,69247130,
jtimon,2015-01-09T19:19:33Z,"Yes, more simplifications can be done later.\nThis is what I had in mind for next steps: https://github.com/jtimon/bitcoin/commit/a029a67fd29bcc04b463bd4dcf7507b5b7e0ed7f\nhttps://github.com/jtimon/bitcoin/commit/da36fb5ebb8655392ec278dd632bdf7a52531e0f\nDifferent things can be done (my preference is that we share as much code as possible with regtest, optimizing only for regtest), but most of the",https://github.com/bitcoin/bitcoin/pull/5599#issuecomment-69384041,69384041,
jaromil,2015-01-24T13:06:14Z,ut ACK.\n\nlovely to have this part of the code simplified.\n,https://github.com/bitcoin/bitcoin/pull/5599#issuecomment-71315757,71315757,
luke-jr,2015-01-08T12:32:37Z,"I think this is okay, but seems unrelated from the PR description?\n",https://github.com/bitcoin/bitcoin/pull/5599#discussion_r22649059,22649059,src/miner.cpp
jtimon,2015-01-08T18:46:28Z,@maaku suggested on #4793 when I changed this `boost::this_thread::interruption_point()` to `return false` that the change belonged to the removal of the hashmeter as it was the reason for the interruption point to be there in the first place.\n,https://github.com/bitcoin/bitcoin/pull/5599#discussion_r22671535,22671535,src/miner.cpp
