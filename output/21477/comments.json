[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/597746056",
    "pull_request_review_id": 616492051,
    "id": 597746056,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5Nzc0NjA1Ng==",
    "diff_hunk": "@@ -395,6 +395,60 @@ BOOST_AUTO_TEST_CASE(cnetaddr_basic)\n     BOOST_CHECK(!addr.SetSpecial(\"totally bogus\"));\n }\n \n+BOOST_AUTO_TEST_CASE(cnetaddr_tostring_canonical_ipv6)\n+{\n+    // Test that CNetAddr::ToString formats IPv6 addresses with zero compression as described in\n+    // RFC 5952 (\"A Recommendation for IPv6 Address Text Representation\").\n+    const std::map<std::string, std::string> canonical_representations_ipv6{\n+        {\"0000:0000:0000:0000:0000:0000:0000:0000\", \"::\"},\n+        {\"000:0000:000:00:0:00:000:0000\", \"::\"},\n+        {\"000:000:000:000:000:000:000:000\", \"::\"},\n+        {\"00:00:00:00:00:00:00:00\", \"::\"},\n+        {\"0:0:0:0:0:0:0:0\", \"::\"},\n+        {\"0:0:0:0:0:0:0:1\", \"::1\"},\n+        {\"2001:0:0:1:0:0:0:1\", \"2001:0:0:1::1\"},\n+        {\"2001:0db8:0:0:1:0:0:1\", \"2001:db8::1:0:0:1\"},",
    "path": "src/test/net_tests.cpp",
    "position": 16,
    "original_position": 16,
    "commit_id": "732c7bddeb9cd4e9fe80ebb7ee98d0f9fcc6a9d3",
    "original_commit_id": "685a661cbd7332fb3af2b38c29903a18f57a4f83",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "`2001:0db8:0:0:1:0:0:1` can be represented as `2001:db8::1:0:0:1`, but also as `2001:0db8:0:0:1::1`.\r\n\r\nAre we guaranteed that all [`getnameinfo()`](https://linux.die.net/man/3/getnameinfo) on different platforms will use the variants in this test? I think no.\r\n\r\n(similarly in some others below)",
    "created_at": "2021-03-19T14:56:33Z",
    "updated_at": "2021-03-19T21:36:32Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21477#discussion_r597746056",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21477",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/597746056"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21477#discussion_r597746056"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21477"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/597746056/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 411,
    "original_line": 411,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/597761201",
    "pull_request_review_id": 616512544,
    "id": 597761201,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5Nzc2MTIwMQ==",
    "diff_hunk": "@@ -395,6 +395,60 @@ BOOST_AUTO_TEST_CASE(cnetaddr_basic)\n     BOOST_CHECK(!addr.SetSpecial(\"totally bogus\"));\n }\n \n+BOOST_AUTO_TEST_CASE(cnetaddr_tostring_canonical_ipv6)\n+{\n+    // Test that CNetAddr::ToString formats IPv6 addresses with zero compression as described in\n+    // RFC 5952 (\"A Recommendation for IPv6 Address Text Representation\").\n+    const std::map<std::string, std::string> canonical_representations_ipv6{\n+        {\"0000:0000:0000:0000:0000:0000:0000:0000\", \"::\"},\n+        {\"000:0000:000:00:0:00:000:0000\", \"::\"},\n+        {\"000:000:000:000:000:000:000:000\", \"::\"},\n+        {\"00:00:00:00:00:00:00:00\", \"::\"},\n+        {\"0:0:0:0:0:0:0:0\", \"::\"},\n+        {\"0:0:0:0:0:0:0:1\", \"::1\"},\n+        {\"2001:0:0:1:0:0:0:1\", \"2001:0:0:1::1\"},\n+        {\"2001:0db8:0:0:1:0:0:1\", \"2001:db8::1:0:0:1\"},",
    "path": "src/test/net_tests.cpp",
    "position": 16,
    "original_position": 16,
    "commit_id": "732c7bddeb9cd4e9fe80ebb7ee98d0f9fcc6a9d3",
    "original_commit_id": "685a661cbd7332fb3af2b38c29903a18f57a4f83",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "RFC 5952 tells us that there is one (and only one) canonical representation of `2001:0db8:0:0:1:0:0:1` which is `2001:db8::1:0:0:1`.\r\n\r\nTesting `CNetAddr::ToString`'s conformance with RFC 5952 is the entire point of this PR :)",
    "created_at": "2021-03-19T15:15:44Z",
    "updated_at": "2021-03-19T21:36:32Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21477#discussion_r597761201",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21477",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/597761201"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21477#discussion_r597761201"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21477"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/597761201/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 411,
    "original_line": 411,
    "side": "RIGHT",
    "in_reply_to_id": 597746056
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/597768621",
    "pull_request_review_id": 616522106,
    "id": 597768621,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5Nzc2ODYyMQ==",
    "diff_hunk": "@@ -395,6 +395,60 @@ BOOST_AUTO_TEST_CASE(cnetaddr_basic)\n     BOOST_CHECK(!addr.SetSpecial(\"totally bogus\"));\n }\n \n+BOOST_AUTO_TEST_CASE(cnetaddr_tostring_canonical_ipv6)\n+{\n+    // Test that CNetAddr::ToString formats IPv6 addresses with zero compression as described in\n+    // RFC 5952 (\"A Recommendation for IPv6 Address Text Representation\").\n+    const std::map<std::string, std::string> canonical_representations_ipv6{\n+        {\"0000:0000:0000:0000:0000:0000:0000:0000\", \"::\"},\n+        {\"000:0000:000:00:0:00:000:0000\", \"::\"},\n+        {\"000:000:000:000:000:000:000:000\", \"::\"},\n+        {\"00:00:00:00:00:00:00:00\", \"::\"},\n+        {\"0:0:0:0:0:0:0:0\", \"::\"},\n+        {\"0:0:0:0:0:0:0:1\", \"::1\"},\n+        {\"2001:0:0:1:0:0:0:1\", \"2001:0:0:1::1\"},\n+        {\"2001:0db8:0:0:1:0:0:1\", \"2001:db8::1:0:0:1\"},",
    "path": "src/test/net_tests.cpp",
    "position": 16,
    "original_position": 16,
    "commit_id": "732c7bddeb9cd4e9fe80ebb7ee98d0f9fcc6a9d3",
    "original_commit_id": "685a661cbd7332fb3af2b38c29903a18f57a4f83",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "> RFC 5952 tells us that there is one (and only one) canonical representation\r\n\r\nWhere is that text?\r\n\r\nI see the following, which seems to be the opposite:\r\n\r\nhttps://tools.ietf.org/html/rfc5952#section-2.2\r\n\r\n> 'The \"::\" can only appear once in an address.'\r\n   This gives a choice on where in a single address to compress the\r\n   zero.\r\n      2001:db8::aaaa:0:0:1\r\n      2001:db8:0:0:aaaa::1",
    "created_at": "2021-03-19T15:25:02Z",
    "updated_at": "2021-03-19T21:36:32Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21477#discussion_r597768621",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21477",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/597768621"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21477#discussion_r597768621"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21477"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/597768621/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 411,
    "original_line": 411,
    "side": "RIGHT",
    "in_reply_to_id": 597746056
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/597789369",
    "pull_request_review_id": 616549406,
    "id": 597789369,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5Nzc4OTM2OQ==",
    "diff_hunk": "@@ -395,6 +395,60 @@ BOOST_AUTO_TEST_CASE(cnetaddr_basic)\n     BOOST_CHECK(!addr.SetSpecial(\"totally bogus\"));\n }\n \n+BOOST_AUTO_TEST_CASE(cnetaddr_tostring_canonical_ipv6)\n+{\n+    // Test that CNetAddr::ToString formats IPv6 addresses with zero compression as described in\n+    // RFC 5952 (\"A Recommendation for IPv6 Address Text Representation\").\n+    const std::map<std::string, std::string> canonical_representations_ipv6{\n+        {\"0000:0000:0000:0000:0000:0000:0000:0000\", \"::\"},\n+        {\"000:0000:000:00:0:00:000:0000\", \"::\"},\n+        {\"000:000:000:000:000:000:000:000\", \"::\"},\n+        {\"00:00:00:00:00:00:00:00\", \"::\"},\n+        {\"0:0:0:0:0:0:0:0\", \"::\"},\n+        {\"0:0:0:0:0:0:0:1\", \"::1\"},\n+        {\"2001:0:0:1:0:0:0:1\", \"2001:0:0:1::1\"},\n+        {\"2001:0db8:0:0:1:0:0:1\", \"2001:db8::1:0:0:1\"},",
    "path": "src/test/net_tests.cpp",
    "position": 16,
    "original_position": 16,
    "commit_id": "732c7bddeb9cd4e9fe80ebb7ee98d0f9fcc6a9d3",
    "original_commit_id": "685a661cbd7332fb3af2b38c29903a18f57a4f83",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "@vasild \r\n\r\nThe text you're quoting is describing the problem: the problem being that there are multiple ways to represent a given IPv6 address (in the absence of canonicalisation rules).\r\n\r\nThe RFC describes how to solve that problem using canonicalisation :)\r\n\r\nSee the first paragraph of the RFC: \"This document defines a canonical textual representation format.\"\r\n\r\nNote that \"canonical textual representation\" in this context means one (and only one) way to format a given IPv6 address.\r\n\r\nPerhaps reading https://en.wikipedia.org/wiki/IPv6_address#Representation makes the role of canonicalisation in the context IPv6 address formatting more clear? :)",
    "created_at": "2021-03-19T15:52:03Z",
    "updated_at": "2021-03-19T21:36:32Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21477#discussion_r597789369",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21477",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/597789369"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21477#discussion_r597789369"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21477"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/597789369/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 411,
    "original_line": 411,
    "side": "RIGHT",
    "in_reply_to_id": 597746056
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598273732",
    "pull_request_review_id": 617016022,
    "id": 598273732,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5ODI3MzczMg==",
    "diff_hunk": "@@ -395,6 +395,60 @@ BOOST_AUTO_TEST_CASE(cnetaddr_basic)\n     BOOST_CHECK(!addr.SetSpecial(\"totally bogus\"));\n }\n \n+BOOST_AUTO_TEST_CASE(cnetaddr_tostring_canonical_ipv6)\n+{\n+    // Test that CNetAddr::ToString formats IPv6 addresses with zero compression as described in\n+    // RFC 5952 (\"A Recommendation for IPv6 Address Text Representation\").\n+    const std::map<std::string, std::string> canonical_representations_ipv6{\n+        {\"0000:0000:0000:0000:0000:0000:0000:0000\", \"::\"},\n+        {\"000:0000:000:00:0:00:000:0000\", \"::\"},\n+        {\"000:000:000:000:000:000:000:000\", \"::\"},\n+        {\"00:00:00:00:00:00:00:00\", \"::\"},\n+        {\"0:0:0:0:0:0:0:0\", \"::\"},\n+        {\"0:0:0:0:0:0:0:1\", \"::1\"},\n+        {\"2001:0:0:1:0:0:0:1\", \"2001:0:0:1::1\"},\n+        {\"2001:0db8:0:0:1:0:0:1\", \"2001:db8::1:0:0:1\"},",
    "path": "src/test/net_tests.cpp",
    "position": 16,
    "original_position": 16,
    "commit_id": "732c7bddeb9cd4e9fe80ebb7ee98d0f9fcc6a9d3",
    "original_commit_id": "685a661cbd7332fb3af2b38c29903a18f57a4f83",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "My bad, https://tools.ietf.org/html/rfc5952#section-4.2.3 is pretty clear. Sorry for the noise.",
    "created_at": "2021-03-21T12:42:59Z",
    "updated_at": "2021-03-21T12:43:00Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21477#discussion_r598273732",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21477",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598273732"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21477#discussion_r598273732"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21477"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/598273732/reactions",
      "total_count": 2,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 411,
    "original_line": 411,
    "side": "RIGHT",
    "in_reply_to_id": 597746056
  }
]