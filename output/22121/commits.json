[
  {
    "sha": "fa4245d88409091a3a6115a96a200b70be663725",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYTQyNDVkODg0MDkwOTFhM2E2MTE1YTk2YTIwMGI3MGJlNjYzNzI1",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-04-28T07:16:48Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-06-03T11:53:31Z"
      },
      "message": "doc: Various validation doc fixups\n\n* Rename RewindBlockIndex -> NeedsRedownload (follow-up to commit\n  d831e711cab83c70bf2ded62fe33f484844e73dd)\n* Fix typos\n* Inline comments about faking chain data to avoid duplicating them",
      "tree": {
        "sha": "267f5401f91802c19825c2909371b0c99f54c1c9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/267f5401f91802c19825c2909371b0c99f54c1c9"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa4245d88409091a3a6115a96a200b70be663725",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUirqgv+OfQu8w3onrwFyYYLGsDLSMAw78g4vizuMNOtpV66fApy3UpVdZUag2Ud\ndNbpt8uCbrUBynjZH/v34gHTdOd8vJUXjVGuE3BACrSjdHubp+7gvBZG/kLht4NK\nAH1N4M1pQ6rF2GaxY43MTElzSHc5IJkhbFbn7107BaP4ccRmYTKsGNCiFxd/bs5z\nRUgttTnbSnqrWmv9YG1rgU7gQaUjvwnllm1v3pcQPnk9WoHaGIMIYNnntGTOVpIc\n2B54kPpnUa+IMOa38LYAnkS6q4sYC5jIAoO7LiXHdF2BJ5j4pfxQo0r4YrAay73r\n1XA5lWgd6w7m1hjc0RQxYQ0LSoqtlU4tUAdP2NmJozMMwcUy0gm17bSENoMgceOQ\n+QLCUvIzW7N59NQcoZT6a6bq9r3dcHjRyi/x35yNeNOzCNwFtXL3bp/3/a0ghjsN\na9zyZT5jNgQ2gduuGk89qzpVkEDWE7uZ+p14f7a7s2jrz7Nu1Pey4sMj/znQD/Wg\n3QVr8pue\n=rKnd\n-----END PGP SIGNATURE-----",
        "payload": "tree 267f5401f91802c19825c2909371b0c99f54c1c9\nparent a83bbf02c76235faf6c2759bba03dc6fd9e00bc7\nauthor MarcoFalke <falke.marco@gmail.com> 1619594208 +0200\ncommitter MarcoFalke <falke.marco@gmail.com> 1622721211 +0200\n\ndoc: Various validation doc fixups\n\n* Rename RewindBlockIndex -> NeedsRedownload (follow-up to commit\n  d831e711cab83c70bf2ded62fe33f484844e73dd)\n* Fix typos\n* Inline comments about faking chain data to avoid duplicating them\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa4245d88409091a3a6115a96a200b70be663725",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fa4245d88409091a3a6115a96a200b70be663725",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa4245d88409091a3a6115a96a200b70be663725/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "a83bbf02c76235faf6c2759bba03dc6fd9e00bc7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a83bbf02c76235faf6c2759bba03dc6fd9e00bc7",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/a83bbf02c76235faf6c2759bba03dc6fd9e00bc7"
      }
    ],
    "stats": {
      "total": 27,
      "additions": 12,
      "deletions": 15
    },
    "files": [
      {
        "sha": "84a3a4e1e75d6d1541e41a61084f0c60aacfcf25",
        "filename": "src/chain.h",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa4245d88409091a3a6115a96a200b70be663725/src/chain.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa4245d88409091a3a6115a96a200b70be663725/src/chain.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/chain.h?ref=fa4245d88409091a3a6115a96a200b70be663725",
        "patch": "@@ -182,7 +182,7 @@ class CBlockIndex\n     //!\n     //! Note: this value is modified to show BLOCK_OPT_WITNESS during UTXO snapshot\n     //! load to avoid the block index being spuriously rewound.\n-    //! @sa RewindBlockIndex\n+    //! @sa NeedsRedownload\n     //! @sa ActivateSnapshot\n     uint32_t nStatus{0};\n "
      },
      {
        "sha": "271ad62eaf6d85b840e2ff86125e89103670a18c",
        "filename": "src/validation.cpp",
        "status": "modified",
        "additions": 10,
        "deletions": 13,
        "changes": 23,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa4245d88409091a3a6115a96a200b70be663725/src/validation.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa4245d88409091a3a6115a96a200b70be663725/src/validation.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/validation.cpp?ref=fa4245d88409091a3a6115a96a200b70be663725",
        "patch": "@@ -1401,8 +1401,9 @@ void CChainState::InvalidChainFound(CBlockIndex* pindexNew)\n }\n \n // Same as InvalidChainFound, above, except not called directly from InvalidateBlock,\n-// which does its own setBlockIndexCandidates manageent.\n-void CChainState::InvalidBlockFound(CBlockIndex *pindex, const BlockValidationState &state) {\n+// which does its own setBlockIndexCandidates management.\n+void CChainState::InvalidBlockFound(CBlockIndex* pindex, const BlockValidationState& state)\n+{\n     if (state.GetResult() != BlockValidationResult::BLOCK_MUTATED) {\n         pindex->nStatus |= BLOCK_FAILED_VALID;\n         m_blockman.m_failed_blocks.insert(pindex);\n@@ -1819,8 +1820,8 @@ bool CChainState::ConnectBlock(const CBlock& block, BlockValidationState& state,\n     // may have let in a block that violates the rule prior to updating the\n     // software, and we would NOT be enforcing the rule here. Fully solving\n     // upgrade from one software version to the next after a consensus rule\n-    // change is potentially tricky and issue-specific (see RewindBlockIndex()\n-    // for one general approach that was used for BIP 141 deployment).\n+    // change is potentially tricky and issue-specific (see NeedsRedownload()\n+    // for one approach that was used for BIP 141 deployment).\n     // Also, currently the rule against blocks more than 2 hours in the future\n     // is enforced in ContextualCheckBlockHeader(); we wouldn't want to\n     // re-enforce that rule here (at least until we make it impossible for\n@@ -5079,24 +5080,20 @@ bool ChainstateManager::PopulateAndValidateSnapshot(\n     LOCK(::cs_main);\n \n     // Fake various pieces of CBlockIndex state:\n-    //\n-    //   - nChainTx: so that we accurately report IBD-to-tip progress\n-    //   - nTx: so that LoadBlockIndex() loads assumed-valid CBlockIndex entries\n-    //       (among other things)\n-    //   - nStatus & BLOCK_OPT_WITNESS: so that RewindBlockIndex() doesn't zealously\n-    //       unwind the assumed-valid chain.\n-    //\n     CBlockIndex* index = nullptr;\n     for (int i = 0; i <= snapshot_chainstate.m_chain.Height(); ++i) {\n         index = snapshot_chainstate.m_chain[i];\n \n+        // Fake nTx so that LoadBlockIndex() loads assumed-valid CBlockIndex\n+        // entries (among other things)\n         if (!index->nTx) {\n             index->nTx = 1;\n         }\n+        // Fake nChainTx so that GuessVerificationProgress reports accurately\n         index->nChainTx = index->pprev ? index->pprev->nChainTx + index->nTx : 1;\n \n-        // We need to fake this flag so that CChainState::RewindBlockIndex()\n-        // won't try to rewind the entire assumed-valid chain on startup.\n+        // Fake BLOCK_OPT_WITNESS so that CChainState::NeedsRedownload()\n+        // won't ask to rewind the entire assumed-valid chain on startup.\n         if (index->pprev && ::IsWitnessEnabled(index->pprev, ::Params().GetConsensus())) {\n             index->nStatus |= BLOCK_OPT_WITNESS;\n         }"
      },
      {
        "sha": "359a6c779f04d701739b833e6cc22b683c8063e9",
        "filename": "src/validation.h",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa4245d88409091a3a6115a96a200b70be663725/src/validation.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa4245d88409091a3a6115a96a200b70be663725/src/validation.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/validation.h?ref=fa4245d88409091a3a6115a96a200b70be663725",
        "patch": "@@ -555,7 +555,7 @@ enum class CoinsCacheSizeState\n  *\n  * Anything that is contingent on the current tip of the chain is stored here,\n  * whereas block information and metadata independent of the current tip is\n- * kept in `BlockMetadataManager`.\n+ * kept in `BlockManager`.\n  */\n class CChainState\n {"
      }
    ]
  }
]