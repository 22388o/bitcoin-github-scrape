Diapolo,2012-11-05T07:13:17Z,"@laanwj I suppose ui_interface.h - MessageBoxFlags could be cleaned up or the GUI part needs some reworking to make this options available (which seems not needed, as we only use MessageBoxFlags for displaying warnings / errors currently).\n",https://github.com/bitcoin/bitcoin/pull/1988#issuecomment-10062187,10062187,
laanwj,2012-11-05T07:32:27Z,"ACK! This needed to be done badly :)\n\nIndeed, the UI message interface has a lot of unused flags (inherited from Wx). Some of them could be implemented and used, others are completely useless and can be removed. Feel free to do so.\n",https://github.com/bitcoin/bitcoin/pull/1988#issuecomment-10062429,10062429,
Diapolo,2012-11-05T10:50:07Z,If you are fine with the code please first merge this and I'll create another cleanup-pull afterwards?\n\nEdit: I also thought about changing the message box caption for InitError() and InitWarning() to `Bitcoin - Error` and `Bitcoin - Warning`.\n,https://github.com/bitcoin/bitcoin/pull/1988#issuecomment-10066418,10066418,
Diapolo,2012-11-05T21:54:13Z,I'll update this pull tomorrow :) did a litle more work here!\n,https://github.com/bitcoin/bitcoin/pull/1988#issuecomment-10089714,10089714,
BitcoinPullTester,2012-11-06T01:53:12Z,"Automatic sanity-testing: FAILED BUILD/TEST, see http://jenkins.bluematt.me/pull-tester/75ba0be11aef6bff3abebb667564a0671533cd81 for binaries and test log.\n\nThis could happen for one of several reasons:\n1. It chanages paths in makefile.linux-mingw or otherwise changes build scripts in a way that made them incompatible with the automated testing scripts\n2. It does not build on either Linux i386",https://github.com/bitcoin/bitcoin/pull/1988#issuecomment-10096508,10096508,
Diapolo,2012-11-06T07:03:58Z,"Updated to not only fix the bug with always having an error icon, but to also extend the CClientUIInterface.\n",https://github.com/bitcoin/bitcoin/pull/1988#issuecomment-10101054,10101054,
Diapolo,2012-11-09T19:01:47Z,"@laanwj Updated to just use masks, can you please take another look. Thanks for your time :).\n",https://github.com/bitcoin/bitcoin/pull/1988#issuecomment-10240492,10240492,
Diapolo,2012-11-13T07:50:41Z,"Updated to make the MASKs part of the enums and now prepends ""Bitcoin - "" to the captions.\n",https://github.com/bitcoin/bitcoin/pull/1988#issuecomment-10318189,10318189,
laanwj,2012-11-13T08:04:23Z,"Sorry for being picky here, but I'm trying to get this ""perfect"" in one go.\n",https://github.com/bitcoin/bitcoin/pull/1988#issuecomment-10318427,10318427,
Diapolo,2012-11-13T08:07:33Z,"@laanwj I'm the one who loves to do things perfect, so I'm really fine with getting constructive feedback!\n",https://github.com/bitcoin/bitcoin/pull/1988#issuecomment-10318475,10318475,
Diapolo,2012-11-13T14:28:09Z,"Updated to allow more efficient usage of ThreadSafeMessageBox with predefined MSG_ERROR, MSG_WARNING or MSG_INFORMATION, which don't need a string for title/caption anymore.\n\nExample before and after:\n`uiInterface.ThreadSafeMessageBox(strerr, _(""Error""), CClientUIInterface::ICON_ERROR | CClientUIInterface::BTN_OK | CClientUIInterface::MODAL);`\n`uiInterface.ThreadSafeMessageBox(strerr, """", CCli",https://github.com/bitcoin/bitcoin/pull/1988#issuecomment-10327841,10327841,
Diapolo,2012-11-14T07:22:30Z,"@laanwj Would it be better (typesafe) to directly use `CClientUIInterface::MessageBoxFlags style` instead of `int style` in the modified functions? Seems like a not well thought idea, as (ICON_ERROR | BTN_OK) are not recognized as enum but as integer...\n",https://github.com/bitcoin/bitcoin/pull/1988#issuecomment-10357289,10357289,
Diapolo,2012-11-14T11:24:07Z,@laanwj I'll merge the last commit if you ACKed all changes and are fine with the pull as is now :).\n,https://github.com/bitcoin/bitcoin/pull/1988#issuecomment-10362927,10362927,
laanwj,2012-11-14T12:02:43Z,Code/design ack - still need to test\n,https://github.com/bitcoin/bitcoin/pull/1988#issuecomment-10363835,10363835,
Diapolo,2012-11-14T12:39:30Z,"Good, merged commits, no code changes.\n",https://github.com/bitcoin/bitcoin/pull/1988#issuecomment-10364671,10364671,
Diapolo,2012-11-14T16:34:16Z,Had to fix the connect() calls in bitcoingui.cpp as they still were using int instead of unsigned int.\n,https://github.com/bitcoin/bitcoin/pull/1988#issuecomment-10372889,10372889,
Diapolo,2012-11-19T21:31:56Z,"@laanwj I would love to replace all direct `notificator->notify()` with `message()` in another pull. Are you fine with using `message(tr(""foo""), tr(""foo""), false, CClientUIInterface::ICON_WARNING);` to achieve this :)?\n\nDid you have the time try to test out this pull yet?\n",https://github.com/bitcoin/bitcoin/pull/1988#issuecomment-10532022,10532022,
Diapolo,2012-11-20T07:57:09Z,Added a detailed comment for ::message() and added a missing unsigned ;).\n,https://github.com/bitcoin/bitcoin/pull/1988#issuecomment-10545571,10545571,
BitcoinPullTester,2012-11-23T13:11:50Z,"Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/60e82f82e638b9059de82e8f093f3ab45a11ed94 for binaries and test log.\n",https://github.com/bitcoin/bitcoin/pull/1988#issuecomment-10659166,10659166,
Diapolo,2012-11-25T11:17:18Z,"@laanwj I need your help getting this in, any time-window :)?\n",https://github.com/bitcoin/bitcoin/pull/1988#issuecomment-10692396,10692396,
Diapolo,2012-11-27T08:18:30Z,"@laanwj I would like to use the new interface for other pulls, so it would be great if you could prioritize the testing of this pull :).\n",https://github.com/bitcoin/bitcoin/pull/1988#issuecomment-10749455,10749455,
laanwj,2012-11-27T08:20:54Z,I intended to merge it this morning but forgot. I'll try to do it in the\nevening today.\n,https://github.com/bitcoin/bitcoin/pull/1988#issuecomment-10749506,10749506,
Diapolo,2012-11-27T08:27:29Z,"That's fine, thanks.\n",https://github.com/bitcoin/bitcoin/pull/1988#issuecomment-10749645,10749645,
BitcoinPullTester,2012-11-27T18:30:47Z,"Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/5350ea4171be69d16a94e6f40c5e7fa41e00ac13 for binaries and test log.\n",https://github.com/bitcoin/bitcoin/pull/1988#issuecomment-10770223,10770223,
Diapolo,2012-11-06T07:02:05Z,@laanwj I would love to rename that function to coreEvent() or something as error() is not suitable IMHO. What do you think?\n,https://github.com/bitcoin/bitcoin/pull/1988#discussion_r2039457,2039457,src/qt/bitcoingui.h
Diapolo,2012-11-06T07:02:59Z,That value was chosen to be greater than what is used as max. in qmessagebox.h for StandardButton!\n,https://github.com/bitcoin/bitcoin/pull/1988#discussion_r2039464,2039464,src/ui_interface.h
laanwj,2012-11-08T13:24:14Z,"Maybe just call it message() (event was dumb, I thought this referred to some other place in the source :-).\n",https://github.com/bitcoin/bitcoin/pull/1988#discussion_r2069089,2069089,src/qt/bitcoingui.h
laanwj,2012-11-08T13:31:03Z,"I really don't like using - on flags. Please use a mask with `&` if you need a subset of the bits, instead of subtracting them one by one.\n",https://github.com/bitcoin/bitcoin/pull/1988#discussion_r2069156,2069156,src/qt/bitcoin.cpp
laanwj,2012-11-08T13:34:20Z,"So what I mean is:\n\n```\nQMessageBox::StandardButton buttons = (QMessageBox::StandardButton) (style & BTN_MASK);\nif(!buttons)\n    buttons = QMessageBox::Ok;\n....\nQMessageBox mBox((QMessageBox::Icon)nMBoxIcon, title, message, (QMessageBox::StandardButton)buttons);\n```\n\nwhere BTN_MASK is defined as BTN_OK | BTN_CANCEL | ... | BTN_RESET\n\nThen you can remove all the -= lines!\n",https://github.com/bitcoin/bitcoin/pull/1988#discussion_r2069201,2069201,src/qt/bitcoingui.cpp
Diapolo,2012-11-08T18:50:04Z,"Yeah, that makes sense :).\n",https://github.com/bitcoin/bitcoin/pull/1988#discussion_r2073828,2073828,src/qt/bitcoingui.h
Diapolo,2012-11-08T18:52:48Z,"Of course a much nicer approach, thanks.\n",https://github.com/bitcoin/bitcoin/pull/1988#discussion_r2073870,2073870,src/qt/bitcoingui.cpp
Diapolo,2012-11-09T13:30:38Z,"This should work, or?\n\n`style ^= CClientUIInterface::MODAL;`\n",https://github.com/bitcoin/bitcoin/pull/1988#discussion_r2082923,2082923,src/qt/bitcoin.cpp
laanwj,2012-11-09T14:30:36Z,"It certainly works (both with - and ^), my point was that removing the\nflags one by one when set gives needlessly verbose code, when you can\nsimply select a subset of the flags with a mask.\n",https://github.com/bitcoin/bitcoin/pull/1988#discussion_r2083471,2083471,src/qt/bitcoin.cpp
Diapolo,2012-11-09T18:31:56Z,"I was not aware of that mask stuff, update for the pull is on it's way now :).\n",https://github.com/bitcoin/bitcoin/pull/1988#discussion_r2086480,2086480,src/qt/bitcoin.cpp
laanwj,2012-11-12T19:41:08Z,"If you really want to prefix `tr(""Bitcoin - "")` to all titles, why not do it in message or some other inner function? This prevents having to change all these messages, and translators from having to translate Bitcoin a zillion times :)\n",https://github.com/bitcoin/bitcoin/pull/1988#discussion_r2101427,2101427,src/qt/clientmodel.cpp
laanwj,2012-11-12T19:43:13Z,"Please add this to the enum, instead of defining a macro (same for BTN_MASK below).\n",https://github.com/bitcoin/bitcoin/pull/1988#discussion_r2101451,2101451,src/ui_interface.h
Diapolo,2012-11-13T07:25:58Z,"Didn't see that low hanging fruit, but will update :).\n",https://github.com/bitcoin/bitcoin/pull/1988#discussion_r2106708,2106708,src/qt/clientmodel.cpp
laanwj,2012-11-13T08:01:37Z,"I see another pattern here :-)\n\n```\nuiInterface.ThreadSafeMessageBox(str, _(""Error""), CClientUIInterface::ICON_ERROR | CClientUIInterface::MODAL);\nuiInterface.ThreadSafeMessageBox(str, _(""Warning""), CClientUIInterface::ICON_WARNING | CClientUIInterface::MODAL);\n....\n```\n\nWonder if we can do anything with that :)\n",https://github.com/bitcoin/bitcoin/pull/1988#discussion_r2106954,2106954,src/init.cpp
Diapolo,2012-11-13T08:05:56Z,"I don't get it? Standing on the line I guess :-D.\n\nEdit: Something like this in the enum?\n\n<pre>\n        /** Predefined combinations for certain usage cases */\n        MSG_INFORMATION = (ICON_INFORMATION | BTN_OK),\n        MSG_WARNING = (ICON_WARNING | BTN_OK | MODAL),\n        MSG_ERROR = (ICON_ERROR | BTN_OK | MODAL)\n</pre>\n",https://github.com/bitcoin/bitcoin/pull/1988#discussion_r2106987,2106987,src/init.cpp
laanwj,2012-11-13T11:49:48Z,"Messages with flag WARNING have ""Warning"" as title, same for error. If we\naren't using title to summarize the message we could leave it out entirely\nand base it on the flags too. Another simplification of the interface.\n",https://github.com/bitcoin/bitcoin/pull/1988#discussion_r2108844,2108844,src/init.cpp
Diapolo,2012-11-13T14:30:54Z,Is this intended to be non-modal?\n,https://github.com/bitcoin/bitcoin/pull/1988#discussion_r2110188,2110188,src/util.cpp
laanwj,2012-11-13T14:45:17Z,I suppose you could make it modal.\n,https://github.com/bitcoin/bitcoin/pull/1988#discussion_r2110310,2110310,src/util.cpp
Diapolo,2012-11-13T14:50:00Z,Done...\n,https://github.com/bitcoin/bitcoin/pull/1988#discussion_r2110358,2110358,src/util.cpp
laanwj,2012-11-26T06:05:09Z,It complains that this function is unused...\n,https://github.com/bitcoin/bitcoin/pull/1988#discussion_r2218509,2218509,src/init.cpp
Diapolo,2012-11-26T06:52:51Z,"Yes, because it IS unused ;). I thought it could be useful for others / later, that's why I added it.\n",https://github.com/bitcoin/bitcoin/pull/1988#discussion_r2218652,2218652,src/init.cpp
laanwj,2012-11-26T07:09:08Z,"Ok, makes sense. I don't really like the idea of introducing dead code in\nthe core though just in case it is useful later (especially as it is just a\nwrapper around the ui interface). We should try to at least use it\nsomewhere. Shouldn't be hard if there is a clear use case. I can't think of\none right now. Issues that arise during initialization are either:\n- fatal: modal dialog and exit\n- i",https://github.com/bitcoin/bitcoin/pull/1988#discussion_r2218704,2218704,src/init.cpp
Diapolo,2012-11-26T12:36:52Z,"No need to discuss in the end, I just removed if for now :).\n",https://github.com/bitcoin/bitcoin/pull/1988#discussion_r2221163,2221163,src/init.cpp
