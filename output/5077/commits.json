[
  {
    "sha": "2aa632921efd861a7c9968e8faf6c73cb3d62c4a",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyYWE2MzI5MjFlZmQ4NjFhN2M5OTY4ZThmYWY2YzczY2IzZDYyYzRh",
    "commit": {
      "author": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2014-10-10T23:55:14Z"
      },
      "committer": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2014-10-27T09:41:57Z"
      },
      "message": "Enable customising node policy for datacarrier data size with a -datacarriersize option",
      "tree": {
        "sha": "16dcffd8471a67df2fcd537f885af2c3797ce5e1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/16dcffd8471a67df2fcd537f885af2c3797ce5e1"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2aa632921efd861a7c9968e8faf6c73cb3d62c4a",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2aa632921efd861a7c9968e8faf6c73cb3d62c4a",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/2aa632921efd861a7c9968e8faf6c73cb3d62c4a",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2aa632921efd861a7c9968e8faf6c73cb3d62c4a/comments",
    "author": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "2ffdf21ce39fc3133fc028fb51d49cd7479eaa43",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2ffdf21ce39fc3133fc028fb51d49cd7479eaa43",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/2ffdf21ce39fc3133fc028fb51d49cd7479eaa43"
      }
    ],
    "stats": {
      "total": 10,
      "additions": 8,
      "deletions": 2
    },
    "files": [
      {
        "sha": "a33452aa30f9b4a3f7e4e4a72410bceb9eb4a41e",
        "filename": "src/init.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2aa632921efd861a7c9968e8faf6c73cb3d62c4a/src/init.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2aa632921efd861a7c9968e8faf6c73cb3d62c4a/src/init.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/init.cpp?ref=2aa632921efd861a7c9968e8faf6c73cb3d62c4a",
        "patch": "@@ -17,6 +17,7 @@\n #include \"miner.h\"\n #include \"net.h\"\n #include \"rpcserver.h\"\n+#include \"script/standard.h\"\n #include \"txdb.h\"\n #include \"ui_interface.h\"\n #include \"util.h\"\n@@ -345,6 +346,7 @@ std::string HelpMessage(HelpMessageMode mode)\n \n     strUsage += \"\\n\" + _(\"Node relay options:\") + \"\\n\";\n     strUsage += \"  -datacarrier           \" + strprintf(_(\"Relay and mine data carrier transactions (default: %u)\"), 1) + \"\\n\";\n+    strUsage += \"  -datacarriersize       \" + strprintf(_(\"Maximum size of data in data carrier transactions we relay and mine (default: %u)\"), MAX_OP_RETURN_RELAY) + \"\\n\";\n \n     strUsage += \"\\n\" + _(\"Block creation options:\") + \"\\n\";\n     strUsage += \"  -blockminsize=<n>      \" + strprintf(_(\"Set minimum block size in bytes (default: %u)\"), 0) + \"\\n\";\n@@ -702,6 +704,7 @@ bool AppInit2(boost::thread_group& threadGroup)\n #endif // ENABLE_WALLET\n \n     fIsBareMultisigStd = GetArg(\"-permitbaremultisig\", true) != 0;\n+    nMaxDatacarrierBytes = GetArg(\"-datacarriersize\", nMaxDatacarrierBytes);\n \n     // ********************************************************* Step 4: application initialization: dir lock, daemonize, pidfile, debug log\n "
      },
      {
        "sha": "7356e541a678f3692715953d0c4f4dcfc74983ec",
        "filename": "src/script/standard.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 2,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2aa632921efd861a7c9968e8faf6c73cb3d62c4a/src/script/standard.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2aa632921efd861a7c9968e8faf6c73cb3d62c4a/src/script/standard.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/script/standard.cpp?ref=2aa632921efd861a7c9968e8faf6c73cb3d62c4a",
        "patch": "@@ -15,6 +15,8 @@ using namespace std;\n \n typedef vector<unsigned char> valtype;\n \n+unsigned nMaxDatacarrierBytes = MAX_OP_RETURN_RELAY;\n+\n CScriptID::CScriptID(const CScript& in) : uint160(in.size() ? Hash160(in.begin(), in.end()) : 0) {}\n \n const char* GetTxnOutputType(txnouttype t)\n@@ -139,8 +141,8 @@ bool Solver(const CScript& scriptPubKey, txnouttype& typeRet, vector<vector<unsi\n             }\n             else if (opcode2 == OP_SMALLDATA)\n             {\n-                // small pushdata, <= MAX_OP_RETURN_RELAY bytes\n-                if (vch1.size() > MAX_OP_RETURN_RELAY)\n+                // small pushdata, <= nMaxDatacarrierBytes\n+                if (vch1.size() > nMaxDatacarrierBytes)\n                     break;\n             }\n             else if (opcode1 != opcode2 || vch1 != vch2)"
      },
      {
        "sha": "d795121e3cbf872410f27cfeec5e14b35b88c47e",
        "filename": "src/script/standard.h",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2aa632921efd861a7c9968e8faf6c73cb3d62c4a/src/script/standard.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2aa632921efd861a7c9968e8faf6c73cb3d62c4a/src/script/standard.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/script/standard.h?ref=2aa632921efd861a7c9968e8faf6c73cb3d62c4a",
        "patch": "@@ -26,6 +26,7 @@ class CScriptID : public uint160\n };\n \n static const unsigned int MAX_OP_RETURN_RELAY = 40;      // bytes\n+extern unsigned nMaxDatacarrierBytes;\n \n // Mandatory script verification flags that all new blocks must comply with for\n // them to be valid. (but old blocks may not comply with) Currently just P2SH,"
      }
    ]
  }
]