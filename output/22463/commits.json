[
  {
    "sha": "b75f4bda31a0309ec715e96fe8259bd67a889ee2",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiNzVmNGJkYTMxYTAzMDllYzcxNWU5NmZlODI1OWJkNjdhODg5ZWUy",
    "commit": {
      "author": {
        "name": "fyquah",
        "email": "fyquah@protonmail.com",
        "date": "2021-07-15T20:13:25Z"
      },
      "committer": {
        "name": "Kiminuo",
        "email": "kiminuo@protonmail.com",
        "date": "2021-07-15T21:05:24Z"
      },
      "message": "rpc: Replace boolean argument for tx details with enum class.\n\nCo-authored-by: Luke Dashjr <luke_github1@dashjr.org>\nCo-authored-by: 0xB10C <19157360+0xB10C@users.noreply.github.com>",
      "tree": {
        "sha": "5590171841f397915b6741a27e73e0d0c0f2872c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5590171841f397915b6741a27e73e0d0c0f2872c"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b75f4bda31a0309ec715e96fe8259bd67a889ee2",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b75f4bda31a0309ec715e96fe8259bd67a889ee2",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/b75f4bda31a0309ec715e96fe8259bd67a889ee2",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b75f4bda31a0309ec715e96fe8259bd67a889ee2/comments",
    "author": {
      "login": "fyquah",
      "id": 6006469,
      "node_id": "MDQ6VXNlcjYwMDY0Njk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6006469?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fyquah",
      "html_url": "https://github.com/fyquah",
      "followers_url": "https://api.github.com/users/fyquah/followers",
      "following_url": "https://api.github.com/users/fyquah/following{/other_user}",
      "gists_url": "https://api.github.com/users/fyquah/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fyquah/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fyquah/subscriptions",
      "organizations_url": "https://api.github.com/users/fyquah/orgs",
      "repos_url": "https://api.github.com/users/fyquah/repos",
      "events_url": "https://api.github.com/users/fyquah/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fyquah/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "kiminuo",
      "id": 58662979,
      "node_id": "MDQ6VXNlcjU4NjYyOTc5",
      "avatar_url": "https://avatars.githubusercontent.com/u/58662979?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kiminuo",
      "html_url": "https://github.com/kiminuo",
      "followers_url": "https://api.github.com/users/kiminuo/followers",
      "following_url": "https://api.github.com/users/kiminuo/following{/other_user}",
      "gists_url": "https://api.github.com/users/kiminuo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kiminuo/subscriptions",
      "organizations_url": "https://api.github.com/users/kiminuo/orgs",
      "repos_url": "https://api.github.com/users/kiminuo/repos",
      "events_url": "https://api.github.com/users/kiminuo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kiminuo/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "ddc6979b8baab048bbf0c5c2dd23345a8eb5c60e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ddc6979b8baab048bbf0c5c2dd23345a8eb5c60e",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/ddc6979b8baab048bbf0c5c2dd23345a8eb5c60e"
      }
    ],
    "stats": {
      "total": 66,
      "additions": 42,
      "deletions": 24
    },
    "files": [
      {
        "sha": "a2946761335fe80f5189312f79e7c079b3d4f577",
        "filename": "src/bench/rpc_blockchain.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b75f4bda31a0309ec715e96fe8259bd67a889ee2/src/bench/rpc_blockchain.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b75f4bda31a0309ec715e96fe8259bd67a889ee2/src/bench/rpc_blockchain.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/bench/rpc_blockchain.cpp?ref=b75f4bda31a0309ec715e96fe8259bd67a889ee2",
        "patch": "@@ -40,7 +40,7 @@ static void BlockToJsonVerbose(benchmark::Bench& bench)\n {\n     TestBlockAndIndex data;\n     bench.run([&] {\n-        auto univalue = blockToJSON(data.block, &data.blockindex, &data.blockindex, /*verbose*/ true);\n+        auto univalue = blockToJSON(data.block, &data.blockindex, &data.blockindex, TxVerbosity::SHOW_DETAILS);\n         ankerl::nanobench::doNotOptimizeAway(univalue);\n     });\n }\n@@ -50,7 +50,7 @@ BENCHMARK(BlockToJsonVerbose);\n static void BlockToJsonVerboseWrite(benchmark::Bench& bench)\n {\n     TestBlockAndIndex data;\n-    auto univalue = blockToJSON(data.block, &data.blockindex, &data.blockindex, /*verbose*/ true);\n+    auto univalue = blockToJSON(data.block, &data.blockindex, &data.blockindex, TxVerbosity::SHOW_DETAILS);\n     bench.run([&] {\n         auto str = univalue.write();\n         ankerl::nanobench::doNotOptimizeAway(str);"
      },
      {
        "sha": "653fd1dc771a9c87ae4d5b8eb508b140d0baf75d",
        "filename": "src/core_io.h",
        "status": "modified",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b75f4bda31a0309ec715e96fe8259bd67a889ee2/src/core_io.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b75f4bda31a0309ec715e96fe8259bd67a889ee2/src/core_io.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/core_io.h?ref=b75f4bda31a0309ec715e96fe8259bd67a889ee2",
        "patch": "@@ -20,6 +20,11 @@ class uint256;\n class UniValue;\n class CTxUndo;\n \n+enum class TxVerbosity {\n+    SHOW_TXID,\n+    SHOW_DETAILS\n+};\n+\n // core_read.cpp\n CScript ParseScript(const std::string& s);\n std::string ScriptToAsmStr(const CScript& script, const bool fAttemptSighashDecode = false);"
      },
      {
        "sha": "2d685e239dbc1ce8fa8a8c2fdb1a53a85a4cc6fd",
        "filename": "src/rest.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 4,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b75f4bda31a0309ec715e96fe8259bd67a889ee2/src/rest.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b75f4bda31a0309ec715e96fe8259bd67a889ee2/src/rest.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rest.cpp?ref=b75f4bda31a0309ec715e96fe8259bd67a889ee2",
        "patch": "@@ -260,7 +260,7 @@ static bool rest_headers(const std::any& context,\n static bool rest_block(const std::any& context,\n                        HTTPRequest* req,\n                        const std::string& strURIPart,\n-                       bool showTxDetails)\n+                       TxVerbosity tx_verbosity)\n {\n     if (!CheckWarmup(req))\n         return false;\n@@ -312,7 +312,7 @@ static bool rest_block(const std::any& context,\n     }\n \n     case RetFormat::JSON: {\n-        UniValue objBlock = blockToJSON(block, tip, pblockindex, showTxDetails);\n+        UniValue objBlock = blockToJSON(block, tip, pblockindex, tx_verbosity);\n         std::string strJSON = objBlock.write() + \"\\n\";\n         req->WriteHeader(\"Content-Type\", \"application/json\");\n         req->WriteReply(HTTP_OK, strJSON);\n@@ -327,12 +327,12 @@ static bool rest_block(const std::any& context,\n \n static bool rest_block_extended(const std::any& context, HTTPRequest* req, const std::string& strURIPart)\n {\n-    return rest_block(context, req, strURIPart, true);\n+    return rest_block(context, req, strURIPart, TxVerbosity::SHOW_DETAILS);\n }\n \n static bool rest_block_notxdetails(const std::any& context, HTTPRequest* req, const std::string& strURIPart)\n {\n-    return rest_block(context, req, strURIPart, false);\n+    return rest_block(context, req, strURIPart, TxVerbosity::SHOW_TXID);\n }\n \n // A bit of a hack - dependency on a function defined in rpc/blockchain.cpp"
      },
      {
        "sha": "70aed4ee68c0ae797dbb8eb7cf6206a72d35b654",
        "filename": "src/rpc/blockchain.cpp",
        "status": "modified",
        "additions": 30,
        "deletions": 17,
        "changes": 47,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b75f4bda31a0309ec715e96fe8259bd67a889ee2/src/rpc/blockchain.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b75f4bda31a0309ec715e96fe8259bd67a889ee2/src/rpc/blockchain.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/blockchain.cpp?ref=b75f4bda31a0309ec715e96fe8259bd67a889ee2",
        "patch": "@@ -199,30 +199,36 @@ UniValue blockheaderToJSON(const CBlockIndex* tip, const CBlockIndex* blockindex\n     return result;\n }\n \n-UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIndex* blockindex, bool txDetails)\n+UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIndex* blockindex, TxVerbosity verbosity)\n {\n     UniValue result = blockheaderToJSON(tip, blockindex);\n \n     result.pushKV(\"strippedsize\", (int)::GetSerializeSize(block, PROTOCOL_VERSION | SERIALIZE_TRANSACTION_NO_WITNESS));\n     result.pushKV(\"size\", (int)::GetSerializeSize(block, PROTOCOL_VERSION));\n     result.pushKV(\"weight\", (int)::GetBlockWeight(block));\n     UniValue txs(UniValue::VARR);\n-    if (txDetails) {\n-        CBlockUndo blockUndo;\n-        const bool have_undo = !IsBlockPruned(blockindex) && UndoReadFromDisk(blockUndo, blockindex);\n-        for (size_t i = 0; i < block.vtx.size(); ++i) {\n-            const CTransactionRef& tx = block.vtx.at(i);\n-            // coinbase transaction (i == 0) doesn't have undo data\n-            const CTxUndo* txundo = (have_undo && i) ? &blockUndo.vtxundo.at(i - 1) : nullptr;\n-            UniValue objTx(UniValue::VOBJ);\n-            TxToUniv(*tx, uint256(), objTx, true, RPCSerializationFlags(), txundo);\n-            txs.push_back(objTx);\n-        }\n-    } else {\n-        for (const CTransactionRef& tx : block.vtx) {\n-            txs.push_back(tx->GetHash().GetHex());\n-        }\n+\n+    switch (verbosity) {\n+        case TxVerbosity::SHOW_TXID:\n+            for (const CTransactionRef& tx : block.vtx) {\n+                txs.push_back(tx->GetHash().GetHex());\n+            }\n+            break;\n+\n+        case TxVerbosity::SHOW_DETAILS:\n+            CBlockUndo blockUndo;\n+            const bool have_undo = !IsBlockPruned(blockindex) && UndoReadFromDisk(blockUndo, blockindex);\n+\n+            for (size_t i = 0; i < block.vtx.size(); ++i) {\n+                const CTransactionRef& tx = block.vtx.at(i);\n+                // coinbase transaction (i == 0) doesn't have undo data\n+                const CTxUndo* txundo = (have_undo && i) ? &blockUndo.vtxundo.at(i - 1) : nullptr;\n+                UniValue objTx(UniValue::VOBJ);\n+                TxToUniv(*tx, uint256(), objTx, true, RPCSerializationFlags(), txundo);\n+                txs.push_back(objTx);\n+            }\n     }\n+\n     result.pushKV(\"tx\", txs);\n \n     return result;\n@@ -1017,7 +1023,14 @@ static RPCHelpMan getblock()\n         return strHex;\n     }\n \n-    return blockToJSON(block, tip, pblockindex, verbosity >= 2);\n+    TxVerbosity block_to_json_verbosity;\n+    if (verbosity <= 1) {\n+        block_to_json_verbosity = TxVerbosity::SHOW_TXID;\n+    } else {\n+        block_to_json_verbosity = TxVerbosity::SHOW_DETAILS;\n+    }\n+\n+    return blockToJSON(block, tip, pblockindex, block_to_json_verbosity);\n },\n     };\n }"
      },
      {
        "sha": "4d0362f62fe63224396b30a2cf5ec492fcb8f11e",
        "filename": "src/rpc/blockchain.h",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b75f4bda31a0309ec715e96fe8259bd67a889ee2/src/rpc/blockchain.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b75f4bda31a0309ec715e96fe8259bd67a889ee2/src/rpc/blockchain.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/blockchain.h?ref=b75f4bda31a0309ec715e96fe8259bd67a889ee2",
        "patch": "@@ -39,7 +39,7 @@ double GetDifficulty(const CBlockIndex* blockindex);\n void RPCNotifyBlockChange(const CBlockIndex*);\n \n /** Block description to JSON */\n-UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIndex* blockindex, bool txDetails = false) LOCKS_EXCLUDED(cs_main);\n+UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIndex* blockindex, TxVerbosity verbosity = TxVerbosity::SHOW_TXID) LOCKS_EXCLUDED(cs_main);\n \n /** Mempool information to JSON */\n UniValue MempoolInfoToJSON(const CTxMemPool& pool);"
      }
    ]
  },
  {
    "sha": "d743d3aff9f8fee7d8afd7676d5e6783ab795b70",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkNzQzZDNhZmY5ZjhmZWU3ZDhhZmQ3Njc2ZDVlNjc4M2FiNzk1Yjcw",
    "commit": {
      "author": {
        "name": "fyquah",
        "email": "kiminuo@protonmail.com",
        "date": "2021-07-15T20:13:33Z"
      },
      "committer": {
        "name": "Kiminuo",
        "email": "kiminuo@protonmail.com",
        "date": "2021-07-15T21:05:24Z"
      },
      "message": "rpc: Add level 3 verbosity to getblock RPC call.\n\nDisplay the prevout in transaction inputs when calling getblock level 3\nverbosity.\n\nCo-authored-by: Luke Dashjr <luke_github1@dashjr.org>\nCo-authored-by: 0xB10C <19157360+0xB10C@users.noreply.github.com>",
      "tree": {
        "sha": "4de5e61e96715aba2f5f63a8ca2c1696c27c3d59",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/4de5e61e96715aba2f5f63a8ca2c1696c27c3d59"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d743d3aff9f8fee7d8afd7676d5e6783ab795b70",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d743d3aff9f8fee7d8afd7676d5e6783ab795b70",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/d743d3aff9f8fee7d8afd7676d5e6783ab795b70",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d743d3aff9f8fee7d8afd7676d5e6783ab795b70/comments",
    "author": {
      "login": "kiminuo",
      "id": 58662979,
      "node_id": "MDQ6VXNlcjU4NjYyOTc5",
      "avatar_url": "https://avatars.githubusercontent.com/u/58662979?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kiminuo",
      "html_url": "https://github.com/kiminuo",
      "followers_url": "https://api.github.com/users/kiminuo/followers",
      "following_url": "https://api.github.com/users/kiminuo/following{/other_user}",
      "gists_url": "https://api.github.com/users/kiminuo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kiminuo/subscriptions",
      "organizations_url": "https://api.github.com/users/kiminuo/orgs",
      "repos_url": "https://api.github.com/users/kiminuo/repos",
      "events_url": "https://api.github.com/users/kiminuo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kiminuo/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "kiminuo",
      "id": 58662979,
      "node_id": "MDQ6VXNlcjU4NjYyOTc5",
      "avatar_url": "https://avatars.githubusercontent.com/u/58662979?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kiminuo",
      "html_url": "https://github.com/kiminuo",
      "followers_url": "https://api.github.com/users/kiminuo/followers",
      "following_url": "https://api.github.com/users/kiminuo/following{/other_user}",
      "gists_url": "https://api.github.com/users/kiminuo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kiminuo/subscriptions",
      "organizations_url": "https://api.github.com/users/kiminuo/orgs",
      "repos_url": "https://api.github.com/users/kiminuo/repos",
      "events_url": "https://api.github.com/users/kiminuo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kiminuo/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "b75f4bda31a0309ec715e96fe8259bd67a889ee2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b75f4bda31a0309ec715e96fe8259bd67a889ee2",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/b75f4bda31a0309ec715e96fe8259bd67a889ee2"
      }
    ],
    "stats": {
      "total": 50,
      "additions": 37,
      "deletions": 13
    },
    "files": [
      {
        "sha": "66dffa281fcc1b326f2e2cf2f8d4dcccf3587c5a",
        "filename": "src/bench/rpc_blockchain.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d743d3aff9f8fee7d8afd7676d5e6783ab795b70/src/bench/rpc_blockchain.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d743d3aff9f8fee7d8afd7676d5e6783ab795b70/src/bench/rpc_blockchain.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/bench/rpc_blockchain.cpp?ref=d743d3aff9f8fee7d8afd7676d5e6783ab795b70",
        "patch": "@@ -40,7 +40,7 @@ static void BlockToJsonVerbose(benchmark::Bench& bench)\n {\n     TestBlockAndIndex data;\n     bench.run([&] {\n-        auto univalue = blockToJSON(data.block, &data.blockindex, &data.blockindex, TxVerbosity::SHOW_DETAILS);\n+        auto univalue = blockToJSON(data.block, &data.blockindex, &data.blockindex, TxVerbosity::SHOW_DETAILS_AND_PREV_OUT);\n         ankerl::nanobench::doNotOptimizeAway(univalue);\n     });\n }\n@@ -50,7 +50,7 @@ BENCHMARK(BlockToJsonVerbose);\n static void BlockToJsonVerboseWrite(benchmark::Bench& bench)\n {\n     TestBlockAndIndex data;\n-    auto univalue = blockToJSON(data.block, &data.blockindex, &data.blockindex, TxVerbosity::SHOW_DETAILS);\n+    auto univalue = blockToJSON(data.block, &data.blockindex, &data.blockindex, TxVerbosity::SHOW_DETAILS_AND_PREV_OUT);\n     bench.run([&] {\n         auto str = univalue.write();\n         ankerl::nanobench::doNotOptimizeAway(str);"
      },
      {
        "sha": "96befc686daaad4e3fd5556597e30c28560842e7",
        "filename": "src/core_io.h",
        "status": "modified",
        "additions": 3,
        "deletions": 2,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d743d3aff9f8fee7d8afd7676d5e6783ab795b70/src/core_io.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d743d3aff9f8fee7d8afd7676d5e6783ab795b70/src/core_io.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/core_io.h?ref=d743d3aff9f8fee7d8afd7676d5e6783ab795b70",
        "patch": "@@ -22,7 +22,8 @@ class CTxUndo;\n \n enum class TxVerbosity {\n     SHOW_TXID,\n-    SHOW_DETAILS\n+    SHOW_DETAILS,\n+    SHOW_DETAILS_AND_PREV_OUT\n };\n \n // core_read.cpp\n@@ -51,6 +52,6 @@ std::string EncodeHexTx(const CTransaction& tx, const int serializeFlags = 0);\n std::string SighashToStr(unsigned char sighash_type);\n void ScriptPubKeyToUniv(const CScript& scriptPubKey, UniValue& out, bool fIncludeHex, bool include_addresses);\n void ScriptToUniv(const CScript& script, UniValue& out, bool include_address);\n-void TxToUniv(const CTransaction& tx, const uint256& hashBlock, bool include_addresses, UniValue& entry, bool include_hex = true, int serialize_flags = 0, const CTxUndo* txundo = nullptr);\n+void TxToUniv(const CTransaction& tx, const uint256& hashBlock, bool include_addresses, UniValue& entry, bool include_hex = true, int serialize_flags = 0, const CTxUndo* txundo = nullptr, TxVerbosity verbosity = TxVerbosity::SHOW_DETAILS);\n \n #endif // BITCOIN_CORE_IO_H"
      },
      {
        "sha": "715d29857fd01bc35c3a7d1f7eb8e82495db4674",
        "filename": "src/core_write.cpp",
        "status": "modified",
        "additions": 21,
        "deletions": 2,
        "changes": 23,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d743d3aff9f8fee7d8afd7676d5e6783ab795b70/src/core_write.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d743d3aff9f8fee7d8afd7676d5e6783ab795b70/src/core_write.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/core_write.cpp?ref=d743d3aff9f8fee7d8afd7676d5e6783ab795b70",
        "patch": "@@ -190,7 +190,7 @@ void ScriptPubKeyToUniv(const CScript& scriptPubKey,\n     }\n }\n \n-void TxToUniv(const CTransaction& tx, const uint256& hashBlock, bool include_addresses, UniValue& entry, bool include_hex, int serialize_flags, const CTxUndo* txundo)\n+void TxToUniv(const CTransaction& tx, const uint256& hashBlock, bool include_addresses, UniValue& entry, bool include_hex, int serialize_flags, const CTxUndo* txundo, TxVerbosity verbosity)\n {\n     entry.pushKV(\"txid\", tx.GetHash().GetHex());\n     entry.pushKV(\"hash\", tx.GetWitnessHash().GetHex());\n@@ -231,8 +231,27 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, bool include_add\n             in.pushKV(\"txinwitness\", txinwitness);\n         }\n         if (calculate_fee) {\n-            const CTxOut& prev_txout = txundo->vprevout[i].out;\n+            const Coin&   prev_coin  = txundo->vprevout[i];\n+            const CTxOut& prev_txout = prev_coin.out;\n+\n             amt_total_in += prev_txout.nValue;\n+            switch (verbosity) {\n+                case TxVerbosity::SHOW_TXID:\n+                case TxVerbosity::SHOW_DETAILS:\n+                    break;\n+\n+                case TxVerbosity::SHOW_DETAILS_AND_PREV_OUT:\n+                    UniValue p(UniValue::VOBJ);\n+                    UniValue o_script_pub_key(UniValue::VOBJ);\n+\n+                    p.pushKV(\"value\", ValueFromAmount(prev_txout.nValue));\n+                    p.pushKV(\"height\", uint64_t(prev_coin.nHeight));\n+                    p.pushKV(\"generated\", bool(prev_coin.fCoinBase));\n+                    ScriptPubKeyToUniv(prev_txout.scriptPubKey, o_script_pub_key, true, include_addresses);\n+                    p.pushKV(\"scriptPubKey\", o_script_pub_key);\n+                    in.pushKV(\"prevout\", p);\n+                    break;\n+            }\n         }\n         in.pushKV(\"sequence\", (int64_t)txin.nSequence);\n         vin.push_back(in);"
      },
      {
        "sha": "ceaaaddc3bb8dfd393db842edc058939c60251a3",
        "filename": "src/rest.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d743d3aff9f8fee7d8afd7676d5e6783ab795b70/src/rest.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d743d3aff9f8fee7d8afd7676d5e6783ab795b70/src/rest.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rest.cpp?ref=d743d3aff9f8fee7d8afd7676d5e6783ab795b70",
        "patch": "@@ -327,7 +327,7 @@ static bool rest_block(const std::any& context,\n \n static bool rest_block_extended(const std::any& context, HTTPRequest* req, const std::string& strURIPart)\n {\n-    return rest_block(context, req, strURIPart, TxVerbosity::SHOW_DETAILS);\n+    return rest_block(context, req, strURIPart, TxVerbosity::SHOW_DETAILS_AND_PREV_OUT);\n }\n \n static bool rest_block_notxdetails(const std::any& context, HTTPRequest* req, const std::string& strURIPart)"
      },
      {
        "sha": "40479432a6f2ce664f6beabccada7eee2ad18406",
        "filename": "src/rpc/blockchain.cpp",
        "status": "modified",
        "additions": 9,
        "deletions": 5,
        "changes": 14,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d743d3aff9f8fee7d8afd7676d5e6783ab795b70/src/rpc/blockchain.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d743d3aff9f8fee7d8afd7676d5e6783ab795b70/src/rpc/blockchain.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/blockchain.cpp?ref=d743d3aff9f8fee7d8afd7676d5e6783ab795b70",
        "patch": "@@ -216,6 +216,7 @@ UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIn\n             break;\n \n         case TxVerbosity::SHOW_DETAILS:\n+        case TxVerbosity::SHOW_DETAILS_AND_PREV_OUT:\n             CBlockUndo blockUndo;\n             const bool have_undo = !IsBlockPruned(blockindex) && UndoReadFromDisk(blockUndo, blockindex);\n \n@@ -224,7 +225,7 @@ UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIn\n                 // coinbase transaction (i == 0) doesn't have undo data\n                 const CTxUndo* txundo = (have_undo && i) ? &blockUndo.vtxundo.at(i - 1) : nullptr;\n                 UniValue objTx(UniValue::VOBJ);\n-                TxToUniv(*tx, uint256(), objTx, true, RPCSerializationFlags(), txundo);\n+                TxToUniv(*tx, uint256(), objTx, true, RPCSerializationFlags(), txundo, verbosity);\n                 txs.push_back(objTx);\n             }\n     }\n@@ -936,7 +937,8 @@ static RPCHelpMan getblock()\n     return RPCHelpMan{\"getblock\",\n                 \"\\nIf verbosity is 0, returns a string that is serialized, hex-encoded data for block 'hash'.\\n\"\n                 \"If verbosity is 1, returns an Object with information about block <hash>.\\n\"\n-                \"If verbosity is 2, returns an Object with information about block <hash> and information about each transaction. \\n\",\n+                \"If verbosity is 2, returns an Object with information about block <hash> and information about each transaction. \\n\"\n+                \"If verbosity is 3, returns an Object with information about block <hash> and information about each transaction, including prevout information for inputs (only for blocks in the current best chain).\\n\",\n                 {\n                     {\"blockhash\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The block hash\"},\n                     {\"verbosity|verbose\", RPCArg::Type::NUM, RPCArg::Default{1}, \"0 for hex-encoded data, 1 for a json object, and 2 for json object with transaction data\"},\n@@ -1026,8 +1028,10 @@ static RPCHelpMan getblock()\n     TxVerbosity block_to_json_verbosity;\n     if (verbosity <= 1) {\n         block_to_json_verbosity = TxVerbosity::SHOW_TXID;\n-    } else {\n+    } else if (verbosity <= 2) {\n         block_to_json_verbosity = TxVerbosity::SHOW_DETAILS;\n+    } else {\n+        block_to_json_verbosity = TxVerbosity::SHOW_DETAILS_AND_PREV_OUT;\n     }\n \n     return blockToJSON(block, tip, pblockindex, block_to_json_verbosity);\n@@ -1945,9 +1949,9 @@ void ScriptPubKeyToUniv(const CScript& scriptPubKey, UniValue& out, bool fInclud\n     ScriptPubKeyToUniv(scriptPubKey, out, fIncludeHex, IsDeprecatedRPCEnabled(\"addresses\"));\n }\n \n-void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry, bool include_hex, int serialize_flags, const CTxUndo* txundo)\n+void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry, bool include_hex, int serialize_flags, const CTxUndo* txundo, TxVerbosity verbosity)\n {\n-    TxToUniv(tx, hashBlock, IsDeprecatedRPCEnabled(\"addresses\"), entry, include_hex, serialize_flags, txundo);\n+    TxToUniv(tx, hashBlock, IsDeprecatedRPCEnabled(\"addresses\"), entry, include_hex, serialize_flags, txundo, verbosity);\n }\n \n template<typename T>"
      },
      {
        "sha": "ccf8f12f9eb2739ae7e8cc28431ab62e7149639f",
        "filename": "src/rpc/blockchain.h",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d743d3aff9f8fee7d8afd7676d5e6783ab795b70/src/rpc/blockchain.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d743d3aff9f8fee7d8afd7676d5e6783ab795b70/src/rpc/blockchain.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/blockchain.h?ref=d743d3aff9f8fee7d8afd7676d5e6783ab795b70",
        "patch": "@@ -54,7 +54,7 @@ UniValue blockheaderToJSON(const CBlockIndex* tip, const CBlockIndex* blockindex\n void CalculatePercentilesByWeight(CAmount result[NUM_GETBLOCKSTATS_PERCENTILES], std::vector<std::pair<CAmount, int64_t>>& scores, int64_t total_weight);\n \n void ScriptPubKeyToUniv(const CScript& scriptPubKey, UniValue& out, bool fIncludeHex);\n-void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry, bool include_hex = true, int serialize_flags = 0, const CTxUndo* txundo = nullptr);\n+void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry, bool include_hex = true, int serialize_flags = 0, const CTxUndo* txundo = nullptr, TxVerbosity verbosity = TxVerbosity::SHOW_DETAILS);\n \n NodeContext& EnsureAnyNodeContext(const std::any& context);\n CTxMemPool& EnsureMemPool(const NodeContext& node);"
      }
    ]
  },
  {
    "sha": "eb9da3507fa2dc7e75f90c9c9ceebdaf1365d876",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzplYjlkYTM1MDdmYTJkYzdlNzVmOTBjOWM5Y2VlYmRhZjEzNjVkODc2",
    "commit": {
      "author": {
        "name": "fyquah",
        "email": "fyquah@protonmail.com",
        "date": "2021-02-27T14:19:32Z"
      },
      "committer": {
        "name": "Kiminuo",
        "email": "kiminuo@protonmail.com",
        "date": "2021-07-15T21:05:24Z"
      },
      "message": "rpc: Add test for level 3 verbosity getblock rpc call.",
      "tree": {
        "sha": "5a50f3453695c5483ffe9e5b9ad15610bae219ab",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5a50f3453695c5483ffe9e5b9ad15610bae219ab"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/eb9da3507fa2dc7e75f90c9c9ceebdaf1365d876",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/eb9da3507fa2dc7e75f90c9c9ceebdaf1365d876",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/eb9da3507fa2dc7e75f90c9c9ceebdaf1365d876",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/eb9da3507fa2dc7e75f90c9c9ceebdaf1365d876/comments",
    "author": {
      "login": "fyquah",
      "id": 6006469,
      "node_id": "MDQ6VXNlcjYwMDY0Njk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6006469?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fyquah",
      "html_url": "https://github.com/fyquah",
      "followers_url": "https://api.github.com/users/fyquah/followers",
      "following_url": "https://api.github.com/users/fyquah/following{/other_user}",
      "gists_url": "https://api.github.com/users/fyquah/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fyquah/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fyquah/subscriptions",
      "organizations_url": "https://api.github.com/users/fyquah/orgs",
      "repos_url": "https://api.github.com/users/fyquah/repos",
      "events_url": "https://api.github.com/users/fyquah/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fyquah/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "kiminuo",
      "id": 58662979,
      "node_id": "MDQ6VXNlcjU4NjYyOTc5",
      "avatar_url": "https://avatars.githubusercontent.com/u/58662979?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kiminuo",
      "html_url": "https://github.com/kiminuo",
      "followers_url": "https://api.github.com/users/kiminuo/followers",
      "following_url": "https://api.github.com/users/kiminuo/following{/other_user}",
      "gists_url": "https://api.github.com/users/kiminuo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kiminuo/subscriptions",
      "organizations_url": "https://api.github.com/users/kiminuo/orgs",
      "repos_url": "https://api.github.com/users/kiminuo/repos",
      "events_url": "https://api.github.com/users/kiminuo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kiminuo/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "d743d3aff9f8fee7d8afd7676d5e6783ab795b70",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d743d3aff9f8fee7d8afd7676d5e6783ab795b70",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/d743d3aff9f8fee7d8afd7676d5e6783ab795b70"
      }
    ],
    "stats": {
      "total": 60,
      "additions": 50,
      "deletions": 10
    },
    "files": [
      {
        "sha": "0b1aa47e4f635027a2765940237f28a7f4ecd647",
        "filename": "test/functional/rpc_blockchain.py",
        "status": "modified",
        "additions": 50,
        "deletions": 10,
        "changes": 60,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/eb9da3507fa2dc7e75f90c9c9ceebdaf1365d876/test/functional/rpc_blockchain.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/eb9da3507fa2dc7e75f90c9c9ceebdaf1365d876/test/functional/rpc_blockchain.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/rpc_blockchain.py?ref=eb9da3507fa2dc7e75f90c9c9ceebdaf1365d876",
        "patch": "@@ -397,17 +397,55 @@ def _test_getblock(self):\n         miniwallet.send_self_transfer(fee_rate=fee_per_kb, from_node=node)\n         blockhash = node.generate(1)[0]\n \n+        def check_fee_not_in_block(verbosity):\n+            block = node.getblock(blockhash, verbosity)\n+            assert 'fee' not in block['tx'][1]\n+\n+        def check_fee_in_block(verbosity):\n+            block = node.getblock(blockhash, verbosity)\n+            tx = block['tx'][1]\n+            assert 'fee' in tx\n+            assert_equal(tx['fee'], tx['vsize'] * fee_per_byte)\n+\n+        def check_vin_contains_prevout(verbosity):\n+            block = node.getblock(blockhash, verbosity)\n+            tx = block[\"tx\"][1]\n+            total_vin = 0\n+            total_vout = 0\n+            for vin in tx[\"vin\"]:\n+                assert \"prevout\" in vin\n+                assert_equal(set(vin[\"prevout\"].keys()), set((\"value\", \"height\", \"generated\", \"scriptPubKey\")))\n+                assert_equal(vin[\"prevout\"][\"generated\"], True)\n+                total_vin += vin[\"prevout\"][\"value\"]\n+            for vout in tx[\"vout\"]:\n+                total_vout += vout[\"value\"]\n+            assert_equal(total_vin, total_vout + tx[\"fee\"])\n+\n+        def check_vin_does_not_contain_prevout(verbosity):\n+            block = node.getblock(blockhash, verbosity)\n+            tx = block[\"tx\"][1]\n+            if isinstance(tx, str):\n+                # In verbosity level 1, only the transaction hashes are written\n+                pass\n+            else:\n+                for vin in tx[\"vin\"]:\n+                    assert \"prevout\" not in vin\n+\n         self.log.info(\"Test that getblock with verbosity 1 doesn't include fee\")\n-        block = node.getblock(blockhash, 1)\n-        assert 'fee' not in block['tx'][1]\n+        check_fee_not_in_block(1)\n+\n+        self.log.info('Test that getblock with verbosity 2 and 3 includes expected fee')\n+        check_fee_in_block(2)\n+        check_fee_in_block(3)\n+\n+        self.log.info(\"Test that getblock with verbosity 1 and 2 does not include prevout\")\n+        check_vin_does_not_contain_prevout(1)\n+        check_vin_does_not_contain_prevout(2)\n \n-        self.log.info('Test that getblock with verbosity 2 includes expected fee')\n-        block = node.getblock(blockhash, 2)\n-        tx = block['tx'][1]\n-        assert 'fee' in tx\n-        assert_equal(tx['fee'], tx['vsize'] * fee_per_byte)\n+        self.log.info(\"Test that getblock with verbosity 3 includes prevout\")\n+        check_vin_contains_prevout(3)\n \n-        self.log.info(\"Test that getblock with verbosity 2 still works with pruned Undo data\")\n+        self.log.info(\"Test that getblock with verbosity 2 and 3 still works with pruned Undo data\")\n         datadir = get_datadir_path(self.options.tmpdir, 0)\n \n         self.log.info(\"Test that getblock with invalid verbosity type returns proper error message\")\n@@ -421,8 +459,10 @@ def move_block_file(old, new):\n         # Move instead of deleting so we can restore chain state afterwards\n         move_block_file('rev00000.dat', 'rev_wrong')\n \n-        block = node.getblock(blockhash, 2)\n-        assert 'fee' not in block['tx'][1]\n+        check_fee_not_in_block(2)\n+        check_fee_not_in_block(3)\n+        check_vin_does_not_contain_prevout(2)\n+        check_vin_does_not_contain_prevout(3)\n \n         # Restore chain state\n         move_block_file('rev_wrong', 'rev00000.dat')"
      }
    ]
  },
  {
    "sha": "b9042aaf3dd5b93fb77d7b3fdfb477ee6bd1e3ff",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiOTA0MmFhZjNkZDViOTNmYjc3ZDdiM2ZkZmI0NzdlZTZiZDFlM2Zm",
    "commit": {
      "author": {
        "name": "fyquah",
        "email": "fyquah@protonmail.com",
        "date": "2021-02-27T18:18:41Z"
      },
      "committer": {
        "name": "Kiminuo",
        "email": "kiminuo@protonmail.com",
        "date": "2021-07-15T21:05:24Z"
      },
      "message": "rest: Add test for prevout fields in getblock",
      "tree": {
        "sha": "7e887cd18c15f4028e28ca82950d52030ba5e918",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7e887cd18c15f4028e28ca82950d52030ba5e918"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b9042aaf3dd5b93fb77d7b3fdfb477ee6bd1e3ff",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b9042aaf3dd5b93fb77d7b3fdfb477ee6bd1e3ff",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/b9042aaf3dd5b93fb77d7b3fdfb477ee6bd1e3ff",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b9042aaf3dd5b93fb77d7b3fdfb477ee6bd1e3ff/comments",
    "author": {
      "login": "fyquah",
      "id": 6006469,
      "node_id": "MDQ6VXNlcjYwMDY0Njk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6006469?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fyquah",
      "html_url": "https://github.com/fyquah",
      "followers_url": "https://api.github.com/users/fyquah/followers",
      "following_url": "https://api.github.com/users/fyquah/following{/other_user}",
      "gists_url": "https://api.github.com/users/fyquah/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fyquah/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fyquah/subscriptions",
      "organizations_url": "https://api.github.com/users/fyquah/orgs",
      "repos_url": "https://api.github.com/users/fyquah/repos",
      "events_url": "https://api.github.com/users/fyquah/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fyquah/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "kiminuo",
      "id": 58662979,
      "node_id": "MDQ6VXNlcjU4NjYyOTc5",
      "avatar_url": "https://avatars.githubusercontent.com/u/58662979?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kiminuo",
      "html_url": "https://github.com/kiminuo",
      "followers_url": "https://api.github.com/users/kiminuo/followers",
      "following_url": "https://api.github.com/users/kiminuo/following{/other_user}",
      "gists_url": "https://api.github.com/users/kiminuo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kiminuo/subscriptions",
      "organizations_url": "https://api.github.com/users/kiminuo/orgs",
      "repos_url": "https://api.github.com/users/kiminuo/repos",
      "events_url": "https://api.github.com/users/kiminuo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kiminuo/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "eb9da3507fa2dc7e75f90c9c9ceebdaf1365d876",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/eb9da3507fa2dc7e75f90c9c9ceebdaf1365d876",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/eb9da3507fa2dc7e75f90c9c9ceebdaf1365d876"
      }
    ],
    "stats": {
      "total": 7,
      "additions": 7,
      "deletions": 0
    },
    "files": [
      {
        "sha": "cbb889af4bb1783bc7bfc11540b9d3dd7d7d54c8",
        "filename": "test/functional/interface_rest.py",
        "status": "modified",
        "additions": 7,
        "deletions": 0,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b9042aaf3dd5b93fb77d7b3fdfb477ee6bd1e3ff/test/functional/interface_rest.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b9042aaf3dd5b93fb77d7b3fdfb477ee6bd1e3ff/test/functional/interface_rest.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/interface_rest.py?ref=b9042aaf3dd5b93fb77d7b3fdfb477ee6bd1e3ff",
        "patch": "@@ -313,6 +313,13 @@ def run_test(self):\n                             if 'coinbase' not in tx['vin'][0]}\n         assert_equal(non_coinbase_txs, set(txs))\n \n+        # Verify that the non-coinbase tx has \"prevout\" field set\n+        for tx_obj in json_obj[\"tx\"]:\n+            for vin in tx_obj[\"vin\"]:\n+                if \"coinbase\" not in vin:\n+                    prevout = vin[\"prevout\"]\n+                    assert_equal(prevout[\"generated\"], False)\n+\n         # Check the same but without tx details\n         json_obj = self.test_rest_request(\"/block/notxdetails/{}\".format(newblockhash[0]))\n         for tx in txs:"
      }
    ]
  }
]