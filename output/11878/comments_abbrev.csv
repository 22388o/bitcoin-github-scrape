promag,2017-12-14T03:48:23Z,"I just want to point that sometimes the include in the header is unnecessary if a forward declaration is possible. With this check the natural fix is to remove the include from the source.\n\n@practicalswift have you checked [Iwyu](https://include-what-you-use.org/) as referenced in #10575?",https://github.com/bitcoin/bitcoin/pull/11878#issuecomment-351600719,351600719,
ryanofsky,2017-12-14T05:06:12Z,"> have you checked Iwyu as referenced in #10575?\n\nI've used iwyu with bitcoin a few times before, though not since we switched from """" to <> style includes. It makes a lot of changes, so it's best to run it manually and selectively on individual source files, rather than in some automated place like a travis script.\n\n[Steps to install](https://github.com/include-what-you-use/include-what-y",https://github.com/bitcoin/bitcoin/pull/11878#issuecomment-351610027,351610027,
practicalswift,2017-12-14T08:40:17Z,"@promag Yes, `iwyu` is nice but I'm afraid it could be too slow to run as part of a Travis session?",https://github.com/bitcoin/bitcoin/pull/11878#issuecomment-351644311,351644311,
ryanofsky,2017-12-14T12:07:43Z,"> @promag Yes, iwyu is nice but I'm afraid it could be too slow to run as part of a Travis session?\n\nEven if it were fast, output isn't really useful or stable enough to run in an automated way. IWYU is most useful as a manual tool to remove unused includes after you add a new source file or split up a existing one. In any case, as instructions above indicate it is awkward to run, and it IMO w",https://github.com/bitcoin/bitcoin/pull/11878#issuecomment-351693100,351693100,
practicalswift,2018-01-29T15:11:39Z,"Any chance of getting this reviewed? Let me know if it is a NACK and I'll close :-)\n\nFWIW, these types of duplicate includes have been recurring and this check is very quick so the costs of introducing it is hopefully near zero :-)",https://github.com/bitcoin/bitcoin/pull/11878#issuecomment-361275403,361275403,
luke-jr,2018-02-26T16:53:46Z,"What? This *contradicts* the guidelines. If warnings.h references std::string and warnings.cpp uses std::string, both of them *should* include &lt;string>",https://github.com/bitcoin/bitcoin/pull/11878#issuecomment-368569546,368569546,
practicalswift,2018-02-26T18:09:30Z,"@luke-jr From the header include guideline:\n\n> One exception is that a `.cpp` file does not need to re-include the includes already included in its corresponding `.h` file.",https://github.com/bitcoin/bitcoin/pull/11878#issuecomment-368594260,368594260,
practicalswift,2018-03-09T15:23:53Z,@MarcoFalke Would you be willing to review (context: I saw that you mentioned this PR in #11884)? :-),https://github.com/bitcoin/bitcoin/pull/11878#issuecomment-371843592,371843592,
sipa,2018-03-09T17:35:06Z,utACK. Why is this not included in Travis?,https://github.com/bitcoin/bitcoin/pull/11878#issuecomment-371884630,371884630,
practicalswift,2018-03-10T17:24:30Z,"@sipa `contrib/devtools/lint-all.sh` which is included in Travis runs `contrib/devtools/lint-*.sh`, so no need to include this script explicitly in the Travis conf :-)",https://github.com/bitcoin/bitcoin/pull/11878#issuecomment-372046790,372046790,
MarcoFalke,2018-03-11T21:10:39Z,utACK 4dbfc1a83f79e2208890501b75253b85730e56cc,https://github.com/bitcoin/bitcoin/pull/11878#issuecomment-372149528,372149528,
practicalswift,2018-03-18T17:48:06Z,@eklitzke Please re-review :-),https://github.com/bitcoin/bitcoin/pull/11878#issuecomment-374022293,374022293,
practicalswift,2018-03-19T07:36:39Z,@eklitzke Good points. Now updated. Please re-review :-),https://github.com/bitcoin/bitcoin/pull/11878#issuecomment-374124050,374124050,
eklitzke,2018-03-20T07:35:32Z,utACK 745513ecb7a825a8129104eda382cbc82d35c097,https://github.com/bitcoin/bitcoin/pull/11878#issuecomment-374502206,374502206,
MarcoFalke,2018-04-09T01:27:38Z,Needs rebase if still relevant,https://github.com/bitcoin/bitcoin/pull/11878#issuecomment-379601698,379601698,
practicalswift,2018-04-09T07:19:36Z,"Rebased and removed 5+ few recently introduced duplicate includes. Still very much relevant :-)\n\nPlease re-review :-)",https://github.com/bitcoin/bitcoin/pull/11878#issuecomment-379658191,379658191,
practicalswift,2018-04-09T12:08:46Z,@MarcoFalke Thanks for merging! :-),https://github.com/bitcoin/bitcoin/pull/11878#issuecomment-379729586,379729586,
eklitzke,2018-03-13T06:46:26Z,Why are you using redirection here?,https://github.com/bitcoin/bitcoin/pull/11878#discussion_r174029036,174029036,contrib/devtools/lint-includes.sh
eklitzke,2018-03-13T06:47:00Z,Same comment wrt redirection,https://github.com/bitcoin/bitcoin/pull/11878#discussion_r174029093,174029093,contrib/devtools/lint-includes.sh
eklitzke,2018-03-13T06:47:37Z,"You're using `''` in some places and `""""` in others",https://github.com/bitcoin/bitcoin/pull/11878#discussion_r174029185,174029185,contrib/devtools/lint-includes.sh
practicalswift,2018-03-14T06:37:08Z,"Do you mean why I'm storing the output in `DUPLICATE_INCLUDES_IN_HEADER_FILE`? :-)  That is the only redirection taking place here, right? :-)\n\nI need the output to print it below. I'm guessing that's not what you meant? :-)",https://github.com/bitcoin/bitcoin/pull/11878#discussion_r174363769,174363769,contrib/devtools/lint-includes.sh
eklitzke,2018-03-19T06:59:16Z,nit: 2018,https://github.com/bitcoin/bitcoin/pull/11878#discussion_r175343773,175343773,contrib/devtools/lint-includes.sh
eklitzke,2018-03-19T07:03:12Z,"nit: you could do this and the change below as a function, and pass in the .h or .cpp'ness in a bash function, e.g.\n\n```bash\nfilter_suffix() { git ls-files | grep -E ""^src/.*\.${1}""'$' | grep -Ev ""/(leveldb|secp256k1|univalue)/""; }\n```\n\nAnd then below would become:\n```bash\nfor HEADER_FILE in $(filter_suffix h); do\n...\n\nfor CPP_FILE in $(filter_suffix cpp); do\n...\n```",https://github.com/bitcoin/bitcoin/pull/11878#discussion_r175344279,175344279,contrib/devtools/lint-includes.sh
