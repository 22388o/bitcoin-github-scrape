fanquake,2016-10-04T03:20:28Z,Trying to compile this on OS X:\n\n```\nMaking all in src\n  CXXLD    bench/bench_bitcoin\nld: unknown option: --start-group\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nmake[2]: *** [bench/bench_bitcoin] Error 1\nmake[1]: *** [all-recursive] Error 1\nmake: *** [all-recursive] Error 1\n```\n,https://github.com/bitcoin/bitcoin/pull/8873#issuecomment-251286047,251286047,
fanquake,2016-10-04T03:26:50Z,"After removing `--start-group` I see these numbers for the new benchmarks:\n\n```\nCCoinsCaching,14336,0.000036257319152,0.000077610835433,0.000076690073391\nCCoinsCaching,14336,0.000038111116737,0.000081880833022,0.000077795902533\n\nMempoolEviction,3072,0.000186952762306,0.000422742217779,0.000384807276229\nMempoolEviction,3072,0.000204847194254,0.000402882695198,0.000387265269334\n\nVerifyScrip",https://github.com/bitcoin/bitcoin/pull/8873#issuecomment-251286773,251286773,
laanwj,2016-10-04T09:12:22Z,Awesome! Thanks for doing this.\nConcept ACK.\n,https://github.com/bitcoin/bitcoin/pull/8873#issuecomment-251335930,251335930,
sipa,2016-10-04T12:46:57Z,I can't easily look at the source code now. What exactly causes the\ncircular dependency?\n,https://github.com/bitcoin/bitcoin/pull/8873#issuecomment-251377705,251377705,
laanwj,2016-10-04T14:59:51Z,"I think the problem is not a circular dependency here, but that `LIBBITCOIN_WALLET` is added after `LIBBITCOIN_CRYPTO`, whereas wallet needs crypto so it should go before that.\n",https://github.com/bitcoin/bitcoin/pull/8873#issuecomment-251414036,251414036,
fanquake,2016-10-09T10:20:03Z,"Compiling has been fixed on OS X.\n\n```\nCCoinsCaching,10240,0.000053781084716,0.000108781736344,0.000108645693399\nCCoinsCaching,10240,0.000053551048040,0.000109656713903,0.000109049887396\nCCoinsCaching,10240,0.000053836032748,0.000108591280878,0.000108507415280\n\nMempoolEviction,1536,0.000360749661922,0.000733753666282,0.000728020289292\nMempoolEviction,1536,0.000362284481525,0.00072736665606",https://github.com/bitcoin/bitcoin/pull/8873#issuecomment-252478032,252478032,
paveljanik,2016-10-09T10:30:33Z,Concept ACK\n,https://github.com/bitcoin/bitcoin/pull/8873#issuecomment-252478499,252478499,
laanwj,2016-10-18T20:02:46Z,Applied clang-format to all the new files.\n,https://github.com/bitcoin/bitcoin/pull/8873#issuecomment-254622577,254622577,
paveljanik,2016-10-04T05:20:44Z,Do we use some circular dependencies? Or why adding linker --start-group?\n,https://github.com/bitcoin/bitcoin/pull/8873#discussion_r81688898,81688898,src/Makefile.bench.include
laanwj,2016-10-04T11:57:41Z,"He probably added it because of a weird crypter link issue:\n\n```\nlibbitcoin_wallet.a(libbitcoin_wallet_a-crypter.o): In function `CCrypter::Encrypt(std::vector<unsigned char, secure_allocator<unsigned char> > const&, std::vector<unsigned char, std::allocator<unsigned char> >&) const':\n/.../bitcoin/src/wallet/crypter.cpp:85: undefined reference to `AES256CBCEncrypt::AES256CBCEncrypt(unsigned ch",https://github.com/bitcoin/bitcoin/pull/8873#discussion_r81739766,81739766,src/Makefile.bench.include
ryanofsky,2016-10-04T12:43:48Z,"Yes, that's the issue I saw. I did try briefly to rearrange the link order and add dup library listings to work around the apparently circular dependencies, but for some reason nothing I tried worked so I resorted to --start-group. I can try again to figure find a working link order that doesn't require the flag, though.\n",https://github.com/bitcoin/bitcoin/pull/8873#discussion_r81747154,81747154,src/Makefile.bench.include
ryanofsky,2016-10-04T20:22:53Z,"At least one circular dependency exists between the wallet and server libs:\n\n```\n./src/libbitcoin_server.a:libbitcoin_server_a-main.o:000000000000c6c0 T CheckFinalTx(CTransaction const&, int)\n./src/libbitcoin_wallet.a:libbitcoin_wallet_a-wallet.o:                 U CheckFinalTx(CTransaction const&, int)\n\n./src/libbitcoin_server.a:libbitcoin_server_a-init.o:                 U RegisterWalletRP",https://github.com/bitcoin/bitcoin/pull/8873#discussion_r81844896,81844896,src/Makefile.bench.include
paveljanik,2016-10-09T10:28:24Z,Please clang-format the new code.\n,https://github.com/bitcoin/bitcoin/pull/8873#discussion_r82519619,82519619,src/bench/ccoins_caching.cpp
