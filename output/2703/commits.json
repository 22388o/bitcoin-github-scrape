[
  {
    "sha": "388ef407ca3722d050f5e16f00dfac00a2000156",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzozODhlZjQwN2NhMzcyMmQwNTBmNWUxNmYwMGRmYWMwMGEyMDAwMTU2",
    "commit": {
      "author": {
        "name": "paraboul",
        "email": "a.catel@weelya.com",
        "date": "2013-05-29T00:15:01Z"
      },
      "committer": {
        "name": "paraboul",
        "email": "a.catel@weelya.com",
        "date": "2013-05-29T00:15:01Z"
      },
      "message": "|move| command now uses [minconf] and check the balance",
      "tree": {
        "sha": "febac1ada1a789e5bbd6f05d03219d7cec7ec587",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/febac1ada1a789e5bbd6f05d03219d7cec7ec587"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/388ef407ca3722d050f5e16f00dfac00a2000156",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/388ef407ca3722d050f5e16f00dfac00a2000156",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/388ef407ca3722d050f5e16f00dfac00a2000156",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/388ef407ca3722d050f5e16f00dfac00a2000156/comments",
    "author": {
      "login": "paraboul",
      "id": 80341,
      "node_id": "MDQ6VXNlcjgwMzQx",
      "avatar_url": "https://avatars.githubusercontent.com/u/80341?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paraboul",
      "html_url": "https://github.com/paraboul",
      "followers_url": "https://api.github.com/users/paraboul/followers",
      "following_url": "https://api.github.com/users/paraboul/following{/other_user}",
      "gists_url": "https://api.github.com/users/paraboul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paraboul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paraboul/subscriptions",
      "organizations_url": "https://api.github.com/users/paraboul/orgs",
      "repos_url": "https://api.github.com/users/paraboul/repos",
      "events_url": "https://api.github.com/users/paraboul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paraboul/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "paraboul",
      "id": 80341,
      "node_id": "MDQ6VXNlcjgwMzQx",
      "avatar_url": "https://avatars.githubusercontent.com/u/80341?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paraboul",
      "html_url": "https://github.com/paraboul",
      "followers_url": "https://api.github.com/users/paraboul/followers",
      "following_url": "https://api.github.com/users/paraboul/following{/other_user}",
      "gists_url": "https://api.github.com/users/paraboul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paraboul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paraboul/subscriptions",
      "organizations_url": "https://api.github.com/users/paraboul/orgs",
      "repos_url": "https://api.github.com/users/paraboul/repos",
      "events_url": "https://api.github.com/users/paraboul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paraboul/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "09e437ba4e5cb7fcc53020c1ceb2451e0ff1606b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/09e437ba4e5cb7fcc53020c1ceb2451e0ff1606b",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/09e437ba4e5cb7fcc53020c1ceb2451e0ff1606b"
      }
    ],
    "stats": {
      "total": 8,
      "additions": 6,
      "deletions": 2
    },
    "files": [
      {
        "sha": "9d2e91faa1c11ca61dd7a4e46f17d4bd42a04972",
        "filename": "src/rpcwallet.cpp",
        "status": "modified",
        "additions": 6,
        "deletions": 2,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/388ef407ca3722d050f5e16f00dfac00a2000156/src/rpcwallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/388ef407ca3722d050f5e16f00dfac00a2000156/src/rpcwallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpcwallet.cpp?ref=388ef407ca3722d050f5e16f00dfac00a2000156",
        "patch": "@@ -563,9 +563,9 @@ Value movecmd(const Array& params, bool fHelp)\n     string strFrom = AccountFromValue(params[0]);\n     string strTo = AccountFromValue(params[1]);\n     int64 nAmount = AmountFromValue(params[2]);\n+    int nMinDepth = 1;\n     if (params.size() > 3)\n-        // unused parameter, used to be nMinDepth, keep type-checking it though\n-        (void)params[3].get_int();\n+        nMinDepth = params[3].get_int();\n     string strComment;\n     if (params.size() > 4)\n         strComment = params[4].get_str();\n@@ -574,6 +574,10 @@ Value movecmd(const Array& params, bool fHelp)\n     if (!walletdb.TxnBegin())\n         throw JSONRPCError(RPC_DATABASE_ERROR, \"database error\");\n \n+    int64 nBalance = GetAccountBalance(strFrom, nMinDepth);\n+    if (nAmount > nBalance)\n+        throw JSONRPCError(RPC_WALLET_INSUFFICIENT_FUNDS, \"Account has insufficient funds\");\n+\n     int64 nNow = GetAdjustedTime();\n \n     // Debit"
      }
    ]
  },
  {
    "sha": "c3fa3f9a1bdea9e76a535d583ce6f192730149fd",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjM2ZhM2Y5YTFiZGVhOWU3NmE1MzVkNTgzY2U2ZjE5MjczMDE0OWZk",
    "commit": {
      "author": {
        "name": "paraboul",
        "email": "a.catel@weelya.com",
        "date": "2013-05-29T12:49:30Z"
      },
      "committer": {
        "name": "paraboul",
        "email": "a.catel@weelya.com",
        "date": "2013-05-29T12:49:30Z"
      },
      "message": "move command : Old behaviour still apply when [minconf] is omitted",
      "tree": {
        "sha": "075313af3388d29a7a84d628ece0bd46415a4d38",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/075313af3388d29a7a84d628ece0bd46415a4d38"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c3fa3f9a1bdea9e76a535d583ce6f192730149fd",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c3fa3f9a1bdea9e76a535d583ce6f192730149fd",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/c3fa3f9a1bdea9e76a535d583ce6f192730149fd",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c3fa3f9a1bdea9e76a535d583ce6f192730149fd/comments",
    "author": {
      "login": "paraboul",
      "id": 80341,
      "node_id": "MDQ6VXNlcjgwMzQx",
      "avatar_url": "https://avatars.githubusercontent.com/u/80341?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paraboul",
      "html_url": "https://github.com/paraboul",
      "followers_url": "https://api.github.com/users/paraboul/followers",
      "following_url": "https://api.github.com/users/paraboul/following{/other_user}",
      "gists_url": "https://api.github.com/users/paraboul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paraboul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paraboul/subscriptions",
      "organizations_url": "https://api.github.com/users/paraboul/orgs",
      "repos_url": "https://api.github.com/users/paraboul/repos",
      "events_url": "https://api.github.com/users/paraboul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paraboul/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "paraboul",
      "id": 80341,
      "node_id": "MDQ6VXNlcjgwMzQx",
      "avatar_url": "https://avatars.githubusercontent.com/u/80341?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paraboul",
      "html_url": "https://github.com/paraboul",
      "followers_url": "https://api.github.com/users/paraboul/followers",
      "following_url": "https://api.github.com/users/paraboul/following{/other_user}",
      "gists_url": "https://api.github.com/users/paraboul/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paraboul/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paraboul/subscriptions",
      "organizations_url": "https://api.github.com/users/paraboul/orgs",
      "repos_url": "https://api.github.com/users/paraboul/repos",
      "events_url": "https://api.github.com/users/paraboul/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paraboul/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "388ef407ca3722d050f5e16f00dfac00a2000156",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/388ef407ca3722d050f5e16f00dfac00a2000156",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/388ef407ca3722d050f5e16f00dfac00a2000156"
      }
    ],
    "stats": {
      "total": 12,
      "additions": 7,
      "deletions": 5
    },
    "files": [
      {
        "sha": "2b264bf6d57f26296a6680295766025564de3ed8",
        "filename": "src/rpcwallet.cpp",
        "status": "modified",
        "additions": 7,
        "deletions": 5,
        "changes": 12,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c3fa3f9a1bdea9e76a535d583ce6f192730149fd/src/rpcwallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c3fa3f9a1bdea9e76a535d583ce6f192730149fd/src/rpcwallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpcwallet.cpp?ref=c3fa3f9a1bdea9e76a535d583ce6f192730149fd",
        "patch": "@@ -563,7 +563,7 @@ Value movecmd(const Array& params, bool fHelp)\n     string strFrom = AccountFromValue(params[0]);\n     string strTo = AccountFromValue(params[1]);\n     int64 nAmount = AmountFromValue(params[2]);\n-    int nMinDepth = 1;\n+    int nMinDepth = -1;\n     if (params.size() > 3)\n         nMinDepth = params[3].get_int();\n     string strComment;\n@@ -574,10 +574,12 @@ Value movecmd(const Array& params, bool fHelp)\n     if (!walletdb.TxnBegin())\n         throw JSONRPCError(RPC_DATABASE_ERROR, \"database error\");\n \n-    int64 nBalance = GetAccountBalance(strFrom, nMinDepth);\n-    if (nAmount > nBalance)\n-        throw JSONRPCError(RPC_WALLET_INSUFFICIENT_FUNDS, \"Account has insufficient funds\");\n-\n+    if (nMinDepth >= 0)\n+    {\n+        int64 nBalance = GetAccountBalance(strFrom, nMinDepth);\n+        if (nAmount > nBalance)\n+            throw JSONRPCError(RPC_WALLET_INSUFFICIENT_FUNDS, \"Account has insufficient funds\");\n+    }\n     int64 nNow = GetAdjustedTime();\n \n     // Debit"
      }
    ]
  }
]