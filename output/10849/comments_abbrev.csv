laanwj,2017-07-17T10:55:59Z,"Looks good to me too, utACK https://github.com/bitcoin/bitcoin/pull/10849/commits/c8115e31325312061682bf966b4475359cbc5215.",https://github.com/bitcoin/bitcoin/pull/10849#issuecomment-315724109,315724109,
ryanofsky,2017-07-17T11:37:38Z,"This has no documentation. If we think this approach is a good idea, I would like to see in what way it can be explained to users. Is there going to be a `doc/JSPON-RPC-interface.md` to complement https://github.com/bitcoin/bitcoin/blob/master/doc/REST-interface.md? Will endpoint be considered experimental (unchanging semantics but possibly temporary) or unstable (possibly changing semantics and p",https://github.com/bitcoin/bitcoin/pull/10849#issuecomment-315731689,315731689,
laanwj,2017-07-17T11:42:47Z,"> And, also from other issue I think '?wallet=filename makes more sense than /wallet/filename as more extensible and conventional way of passing options (as opposed to required arguments) in urls.\n\nDefinitely no! Let's not repeat this: JSON-RPC uses POST only, and with POST it is weird to have `?a=b` URL-encoded arguments in the URL as well. It also implies more arguments could be added later,",https://github.com/bitcoin/bitcoin/pull/10849#issuecomment-315732604,315732604,
ryanofsky,2017-07-17T11:47:59Z,"> POST it is weird to have ?a=b URL-encoded arguments in the URL as well\n\nDon't know your source for this but this is done all the time.\n\n> It also implies more arguments could be added later, which is not true.\n\nI don't know why it wouldn't be true. I can think of lots of RPC options you might want to add outside the RPC request: timeouts, completions handlers, etc.\n\n> ?a=b syntax",https://github.com/bitcoin/bitcoin/pull/10849#issuecomment-315733567,315733567,
laanwj,2017-07-17T11:49:08Z,"> I don't know why it it wouldn't be true, but ok. I can think of lots of RPC options you might want to add outside the RPC request: timeouts, completions handlers, etc.\n\nThose really shouldn't be passed in the URL. The URL *locates* something, such as the wallet in this case.\n",https://github.com/bitcoin/bitcoin/pull/10849#issuecomment-315733776,315733776,
ryanofsky,2017-07-17T11:52:33Z,"> Those really shouldn't be passed in the URL. The URL locates something, such as the wallet in this case.\n\nThey shouldn't be part of the uri-path, but you would have to explain more why they shouldn't be options in a query string...",https://github.com/bitcoin/bitcoin/pull/10849#issuecomment-315734432,315734432,
gmaxwell,2017-07-17T11:56:12Z,"ryanofsky: Among other reasons the path approach will already work with most but not all software,  e.g. you change your RPC endpoint url to be one with the path, and tada-- done, no source code modifications in some things.  I believe a query string would not achieve this, and in some cases require deep spelunking.\n\nI could see an argument that something like a timeout might make sense as a q",https://github.com/bitcoin/bitcoin/pull/10849#issuecomment-315735135,315735135,
laanwj,2017-07-17T12:15:10Z,"> Is there going to be a doc/JSPON-RPC-interface.md to complement https://github.com/bitcoin/bitcoin/blob/master/doc/REST-interface.md? \n\nAnd yes, there should be. Documentation is good.\nBut that's not a requirement for the feature freeze. This is an experimental API, it could be changed completely for next release, so not having it documented 100% on first release is not a problem.\n(we sh",https://github.com/bitcoin/bitcoin/pull/10849#issuecomment-315739032,315739032,
ryanofsky,2017-07-17T12:17:20Z,"> you change your RPC endpoint url to be one with the patch, and tada-- done\n\nThis is true for this PR but _not_ #10650 which is a big reason why I think this PR is better and less user-hostile than #10650.\n\n@laanwj, my bigger point is about extensibility . We want to add a wallet option right now. Great, so that can be as simple as adding `?wallet=filename` to the query string to provide ",https://github.com/bitcoin/bitcoin/pull/10849#issuecomment-315739484,315739484,
gmaxwell,2017-07-17T12:24:49Z,"> I'd be happier if more of the path space could be free for other applications like a web interface. If all this stuff was moved under an /rpc path\n\nIt's under /wallet/ at least, so I think it won't have any clashes with other use.\n\nAs far as usewallet-- I think we intend that argument to eventually specify all wallets that get loaded, not just specific to rpc.  e.g. it would also tell it",https://github.com/bitcoin/bitcoin/pull/10849#issuecomment-315740953,315740953,
ryanofsky,2017-07-17T12:39:59Z,"> It's under /wallet/ at least, so I think it won't have any clashes with other use.\n\nI could easily imagine a web interface wanting to handle /wallet path. The point is that if RPCs are restricted to exactly one path `/` (current case) or two paths `/` and `/rpc` then it's then it's clean and easy to do anything else with the rest of the space. If there's a bigger changing list of RPC paths, ",https://github.com/bitcoin/bitcoin/pull/10849#issuecomment-315744022,315744022,
jnewbery,2017-07-17T15:25:50Z,"It's a shame that this PR doesn't prevent individual wallet endpoints from accessing server-level RPCs. However that can be added at a later date.\n\nI have a branch here: https://github.com/jnewbery/bitcoin/tree/pr10849 that does a couple of things:\n\n- fixes https://github.com/bitcoin/bitcoin/pull/10849#discussion_r127724767 (in commit *bugfix - allow bitcoin-cli to work without -wallet par",https://github.com/bitcoin/bitcoin/pull/10849#issuecomment-315788462,315788462,
jonasschnelli,2017-07-17T15:43:54Z,"Force push fixed the endpoint issue (thanks @jnewbery). \nI think we should keep it minimal with a hope this can slip in before 0.15 freeze.\n\nFixes can be done later.",https://github.com/bitcoin/bitcoin/pull/10849#issuecomment-315793397,315793397,
jnewbery,2017-07-17T16:05:32Z,"> Fixes can be done later.\n\nAgree. Multiwallet interface should be considered unstable for v0.15.",https://github.com/bitcoin/bitcoin/pull/10849#issuecomment-315799481,315799481,
achow101,2017-07-17T18:30:23Z,"So this will remove the concept of ""default wallet"" from the RPCs? Any attempt to use a wallet RPC without specifying a wallet will fail, right?",https://github.com/bitcoin/bitcoin/pull/10849#issuecomment-315841238,315841238,
jonasschnelli,2017-07-17T18:36:03Z,@achow101: only if you call a wallet RPC and if you run with multiple wallets.,https://github.com/bitcoin/bitcoin/pull/10849#issuecomment-315842820,315842820,
achow101,2017-07-17T18:39:02Z,"@jonasschnelli Ok, cool!\n\nutACK 6b9faf747003995417d6a66fad64d2537c371092",https://github.com/bitcoin/bitcoin/pull/10849#issuecomment-315843617,315843617,
theuni,2017-07-18T00:21:09Z,Code review utACK 6b9faf747003995417d6a66fad64d2537c371092. No opinion on the endpoint discussion.,https://github.com/bitcoin/bitcoin/pull/10849#issuecomment-315922024,315922024,
meshcollider,2017-07-18T02:59:50Z,utACK https://github.com/bitcoin/bitcoin/commit/6b9faf747003995417d6a66fad64d2537c371092 looks good to me,https://github.com/bitcoin/bitcoin/pull/10849#issuecomment-315944360,315944360,
morcos,2017-07-18T13:36:29Z,"utACK 6b9faf7\n\nHowever, this badly needs documentation for the user.\n\nAlso I am not happy with the fact that passing multiple -usewallet arguments to the commandline results in the last wallet getting used, that should be an error.\n",https://github.com/bitcoin/bitcoin/pull/10849#issuecomment-316065717,316065717,
jnewbery,2017-07-18T16:07:11Z,"@morcos - does #10868 (for merge after v0.15) resolve your issue with `-usewallet`?\n\nSuggestions for where to put the documentation? I'm happy to work on that.",https://github.com/bitcoin/bitcoin/pull/10849#issuecomment-316113548,316113548,
NicolasDorier,2017-09-02T16:23:45Z,This is incompatible with RPC batching. :( (you can't batch a /wallets/ request with one which does not use it),https://github.com/bitcoin/bitcoin/pull/10849#issuecomment-326754252,326754252,
NicolasDorier,2017-09-02T17:06:38Z,"Ok disregard my comment. I thought that adding /wallet/w1 to a non wallet RPC method would fail. This is not the case, so no issue!",https://github.com/bitcoin/bitcoin/pull/10849#issuecomment-326756990,326756990,
jnewbery,2017-07-17T14:33:57Z,"bug: if no wallet is specified then the endpoint will be """" instead of ""/""\n\nresult: bitcoin-cli doesn't work without a `-usewallet` parameter:\n\n```\nâ†’ bitcoin-cli getinfo\nerror: no response from server\n```\n\nFix is:\n\n```c++\n    std::string endpoint = ""/"";\n```",https://github.com/bitcoin/bitcoin/pull/10849#discussion_r127724767,127724767,src/bitcoin-cli.cpp
theuni,2017-07-17T23:01:55Z,"Could you change one of these to just 'w' to catch possible length extension bugs? If we're asking for w2, we want to make sure that we don't get w. on accident.",https://github.com/bitcoin/bitcoin/pull/10849#discussion_r127847938,127847938,test/functional/multiwallet.py
sipa,2017-07-18T01:58:15Z,Nit: else on the same line as '}',https://github.com/bitcoin/bitcoin/pull/10849#discussion_r127867716,127867716,src/bitcoin-cli.cpp
MarcoFalke,2017-11-10T20:17:01Z,nit: w2,https://github.com/bitcoin/bitcoin/pull/10849#discussion_r150328531,150328531,test/functional/multiwallet.py
