[
  {
    "sha": "03e056edcd1a7f7197a29068c52fa33fce12f7d7",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowM2UwNTZlZGNkMWE3ZjcxOTdhMjkwNjhjNTJmYTMzZmNlMTJmN2Q3",
    "commit": {
      "author": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2020-03-07T01:12:32Z"
      },
      "committer": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2020-06-25T02:23:54Z"
      },
      "message": "depends: Patch libevent build to fix IPv6 -rpcbind on Windows\n\nlibevent uses getaddrinfo when available, and falls back to gethostbyname\nWindows has both, but gethostbyname only supports IPv4\nlibevent fails to detect Windows's getaddrinfo due to not including the right headers\nThis patches libevent's configure script to check it correctly",
      "tree": {
        "sha": "c9d3873732b4da801160344fb775e0ceeea25555",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c9d3873732b4da801160344fb775e0ceeea25555"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/03e056edcd1a7f7197a29068c52fa33fce12f7d7",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEz7FuIclQ9n+pXlWPLuufXMCVJsEFAl70CroACgkQLuufXMCV\nJsHnARAAitkr2al9t8+cnwJDIhNG7uxbo6B7oBsVKquCKmCC2Cixu6+wntgmCcev\nGtS4/6jJlaIxiGWeP/n0YouhxS7dJ11mPLHxhw7+l2Ur/IPYI+/AX71Zy5NjzjMo\nBYCB2QkuZ+iXKOKq5yvDDuc42HFluk/Uty3S7D9Uf/5jOSwcq88ptVrtOiGdnDw4\nmi+9GK9OYpmaRSSoYupn00Uj0xDN/mjSRINI4vpvGs9YJPP/9sNkQeu6svI7bOyf\nkmxYVISpHbaqrJ3fsvbdvlKX1Uc7RWsaduriyqzQAYO8k2xzRchn8S6/MBn+P0ek\nUo/Gpsi/ftEqgoKSoP6JLYD8kLhpmrlt4njk49kYfIYJTsnq5CfwtjiTQWjVRhoW\nL80FGY9Sx/hW1eZyFFb9RhLLyIqIpVfLClk2svWd1bD60uGP4q/jWpGsO61Erwna\nD0/Lhl/JFurOd5yGLjj7HOzcKrkM5gEirorP/2b8gP1SCPWKg83gWQA9qPvEj8f/\nQEwWbzsOx49Kf7jqFa0N6Br+1+3kc2yxLhM71oPPxukI69+l9JvGTx842BOp+NeY\n0V9PagLsNuisW721wCQpewwzt/hnWCWvnrbJuRYoyq0lre5hrJEEoK6ezmSeTLqV\n+U382co0YLm9vPXPdGrrpdwA/v2hO/VwSKCUgwt96QEb2vwEVDo=\n=OJuk\n-----END PGP SIGNATURE-----",
        "payload": "tree c9d3873732b4da801160344fb775e0ceeea25555\nparent 67881de0e3b1cef1d0f978582765a8aeeb09c21a\nauthor Luke Dashjr <luke-jr+git@utopios.org> 1583543552 +0000\ncommitter fanquake <fanquake@gmail.com> 1593051834 +0800\n\ndepends: Patch libevent build to fix IPv6 -rpcbind on Windows\n\nlibevent uses getaddrinfo when available, and falls back to gethostbyname\nWindows has both, but gethostbyname only supports IPv4\nlibevent fails to detect Windows's getaddrinfo due to not including the right headers\nThis patches libevent's configure script to check it correctly\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/03e056edcd1a7f7197a29068c52fa33fce12f7d7",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/03e056edcd1a7f7197a29068c52fa33fce12f7d7",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/03e056edcd1a7f7197a29068c52fa33fce12f7d7/comments",
    "author": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "67881de0e3b1cef1d0f978582765a8aeeb09c21a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/67881de0e3b1cef1d0f978582765a8aeeb09c21a",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/67881de0e3b1cef1d0f978582765a8aeeb09c21a"
      }
    ],
    "stats": {
      "total": 17,
      "additions": 17,
      "deletions": 0
    },
    "files": [
      {
        "sha": "ffdd57642704d01ebf1c1c0250344f7b80de8672",
        "filename": "depends/packages/libevent.mk",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/03e056edcd1a7f7197a29068c52fa33fce12f7d7/depends/packages/libevent.mk",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/03e056edcd1a7f7197a29068c52fa33fce12f7d7/depends/packages/libevent.mk",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/packages/libevent.mk?ref=03e056edcd1a7f7197a29068c52fa33fce12f7d7",
        "patch": "@@ -3,8 +3,10 @@ $(package)_version=2.1.11-stable\n $(package)_download_path=https://github.com/libevent/libevent/archive/\n $(package)_file_name=release-$($(package)_version).tar.gz\n $(package)_sha256_hash=229393ab2bf0dc94694f21836846b424f3532585bac3468738b7bf752c03901e\n+$(package)_patches=0001-fix-windows-getaddrinfo.patch\n \n define $(package)_preprocess_cmds\n+   patch -p1 < $($(package)_patch_dir)/0001-fix-windows-getaddrinfo.patch && \\\n   ./autogen.sh\n endef\n "
      },
      {
        "sha": "a98cd90bd58a20072443a11a9c412b447e8e98a1",
        "filename": "depends/patches/libevent/0001-fix-windows-getaddrinfo.patch",
        "status": "added",
        "additions": 15,
        "deletions": 0,
        "changes": 15,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/03e056edcd1a7f7197a29068c52fa33fce12f7d7/depends/patches/libevent/0001-fix-windows-getaddrinfo.patch",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/03e056edcd1a7f7197a29068c52fa33fce12f7d7/depends/patches/libevent/0001-fix-windows-getaddrinfo.patch",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/patches/libevent/0001-fix-windows-getaddrinfo.patch?ref=03e056edcd1a7f7197a29068c52fa33fce12f7d7",
        "patch": "@@ -0,0 +1,15 @@\n+diff -ur libevent-2.1.8-stable.orig/configure.ac libevent-2.1.8-stable/configure.ac\n+--- libevent-2.1.8-stable.orig/configure.ac\t2017-01-29 17:51:00.000000000 +0000\n++++ libevent-2.1.8-stable/configure.ac\t2020-03-07 01:11:16.311335005 +0000\n+@@ -389,6 +389,10 @@\n+ \t\t#ifdef HAVE_NETDB_H\n+ \t\t#include <netdb.h>\n+ \t\t#endif\n++#ifdef _WIN32\n++#include <winsock2.h>\n++#include <ws2tcpip.h>\n++#endif\n+ \t    ]],\n+ \t    [[\n+ \t\tgetaddrinfo;\n+Only in libevent-2.1.8-stable: configure.ac~"
      }
    ]
  },
  {
    "sha": "eb6b73540d1ee7ff5a6874dd0e35f9b30b68e3b8",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzplYjZiNzM1NDBkMWVlN2ZmNWE2ODc0ZGQwZTM1ZjliMzBiNjhlM2I4",
    "commit": {
      "author": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2020-06-25T02:25:23Z"
      },
      "committer": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2020-06-30T05:25:09Z"
      },
      "message": "build: pass _WIN32_WINNT=0x0601 when building libevent for Windows\n\nThis enables of the use of AI_* definitions in the Windows headers,\nspecifically AI_ADDRCONFIG, which fixes an issue with libevent and\nipv6 on Windows.\n\nIt also aligns with what we define in configure when building Core.",
      "tree": {
        "sha": "ed9f0a6022de84e3052ee81480df621cdee079bd",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ed9f0a6022de84e3052ee81480df621cdee079bd"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/eb6b73540d1ee7ff5a6874dd0e35f9b30b68e3b8",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEz7FuIclQ9n+pXlWPLuufXMCVJsEFAl76zLUACgkQLuufXMCV\nJsEJZxAAk1rEfZljMGxFwR+pMD8tiWMbDyw0n+XihNydYDg321WOViDpKE8qui3R\nr4QbmCqbwk0yqSyT0tGfLaX5vWIKrjMNeRFna/oY304+L4zRjYJli0XQVvq+hRlX\ng+xtaSC8lPR7jUD8Y/fn+i2ovzYVaCeF6KveK/sTY/AALcM2EvmMGtQyCZp/Tfll\n4sd68AgzJDACJWTOl0yqoiXYO89pDCmxCBoW3T4AfztXPCs3sh22rSTA9Otauudg\ntNNzqvGaXMcdst5qgGW15i6J2hXR6ZeCPcwh6iUrSnPVHTPZKUn5W+8flGORJ817\nxgqo+lz+fjzSb2AoNK7Hd2qClWop5seYkrHE6FBpZWkFUJcJBxvfz2bcpCo9oj/w\nNmTlMMFijQ+m6NjAVsB1CFyEpodbihLeOhzfkg19pa1z6nKRLicsDhseXlbLE7qJ\nhvuMxux5Gdl2iWm6GP/+o2DsWaQ+m1EgxFTlE4SsgUMYXI+MeLaweqXeX96GbklA\n1RRzSVkyUErftUJbXZuDsbV9wrgT+Q6+t4jbomTIRWm/MnSnL2GGadp/bycftFbC\n3NMFmuiHtW9iG8ZdF5Ms7OpyaDM+DoY7aOiPc8Fsz3nEyU8EEYDc2fYKijowH6nG\n64OJJaEC39WwrXvyxAfrbgzZ3EhVM8oWUej07KL6vyKXTvOx8RA=\n=P2MK\n-----END PGP SIGNATURE-----",
        "payload": "tree ed9f0a6022de84e3052ee81480df621cdee079bd\nparent 03e056edcd1a7f7197a29068c52fa33fce12f7d7\nauthor fanquake <fanquake@gmail.com> 1593051923 +0800\ncommitter fanquake <fanquake@gmail.com> 1593494709 +0800\n\nbuild: pass _WIN32_WINNT=0x0601 when building libevent for Windows\n\nThis enables of the use of AI_* definitions in the Windows headers,\nspecifically AI_ADDRCONFIG, which fixes an issue with libevent and\nipv6 on Windows.\n\nIt also aligns with what we define in configure when building Core.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/eb6b73540d1ee7ff5a6874dd0e35f9b30b68e3b8",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/eb6b73540d1ee7ff5a6874dd0e35f9b30b68e3b8",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/eb6b73540d1ee7ff5a6874dd0e35f9b30b68e3b8/comments",
    "author": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "03e056edcd1a7f7197a29068c52fa33fce12f7d7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/03e056edcd1a7f7197a29068c52fa33fce12f7d7",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/03e056edcd1a7f7197a29068c52fa33fce12f7d7"
      }
    ],
    "stats": {
      "total": 4,
      "additions": 4,
      "deletions": 0
    },
    "files": [
      {
        "sha": "1cd5a1749ac88c79f8e667aeac40d23105772219",
        "filename": "depends/packages/libevent.mk",
        "status": "modified",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/eb6b73540d1ee7ff5a6874dd0e35f9b30b68e3b8/depends/packages/libevent.mk",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/eb6b73540d1ee7ff5a6874dd0e35f9b30b68e3b8/depends/packages/libevent.mk",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/packages/libevent.mk?ref=eb6b73540d1ee7ff5a6874dd0e35f9b30b68e3b8",
        "patch": "@@ -10,12 +10,16 @@ define $(package)_preprocess_cmds\n   ./autogen.sh\n endef\n \n+# When building for Windows, we set _WIN32_WINNT to target the same Windows\n+# version as we do in configure. Due to quirks in libevents build system, this\n+# is also required to enable support for ipv6. See #19375.\n define $(package)_set_vars\n   $(package)_config_opts=--disable-shared --disable-openssl --disable-libevent-regress --disable-samples\n   $(package)_config_opts += --disable-dependency-tracking --enable-option-checking\n   $(package)_config_opts_release=--disable-debug-mode\n   $(package)_config_opts_linux=--with-pic\n   $(package)_config_opts_android=--with-pic\n+  $(package)_cppflags_mingw32=-D_WIN32_WINNT=0x0601\n endef\n \n define $(package)_config_cmds"
      }
    ]
  }
]