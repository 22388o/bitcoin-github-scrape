jgarzik,2015-07-23T19:01:21Z,Concept ACK.  Needs some sort of size limiting.\n,https://github.com/bitcoin/bitcoin/pull/6462#issuecomment-124212073,124212073,
laanwj,2015-07-24T11:33:17Z,Concept ACK.\n,https://github.com/bitcoin/bitcoin/pull/6462#issuecomment-124493225,124493225,
sipa,2015-07-24T18:00:02Z,"Concept ACK, agree with @laanwj.\n",https://github.com/bitcoin/bitcoin/pull/6462#issuecomment-124600205,124600205,
prusnak,2015-07-27T23:59:59Z,"Updated commit to reflect @laanwj request (to not have FormatSubVersion function dependent on global object).\n\n(Actually, this was my original code, but I changed it, because I did not want to duplicate the logic in two files).\n",https://github.com/bitcoin/bitcoin/pull/6462#issuecomment-125381926,125381926,
prusnak,2015-07-29T17:11:42Z,@jgarzik What is the maximum desired length of user agent string? Or should we just limit the number of comments and their length (e.g. max 5 comments of max 40 characters)?\n,https://github.com/bitcoin/bitcoin/pull/6462#issuecomment-126021799,126021799,
sipa,2015-07-29T17:46:11Z,"Bitcoin Core will reject strings longer than 256 characters for the subser string in ""version"" messages.\n",https://github.com/bitcoin/bitcoin/pull/6462#issuecomment-126032701,126032701,
laanwj,2015-07-31T14:05:59Z,"Tested ACK. Named a few nodes.\n\n```\n  ""subversion"": ""/Satoshi:0.11.99(Inanna)/"",\n...\n  ""subversion"": ""/Satoshi:0.11.99(Ishtar)/"",\n...\n  ""subversion"": ""/Satoshi:0.11.99(Ereshkigal)/"",\n```\n\nNames are returned both by `getnetworkinfo` and the `version` P2P message, which I verified with [bitcoin-submittx]():\n\n```\nrecv msg_version(nVersion=70002 nServices=1 nTime=Fri Jul 31 15:41:00 2015 ",https://github.com/bitcoin/bitcoin/pull/6462#issuecomment-126703066,126703066,
prusnak,2015-07-31T14:20:14Z,Easiest logic would be to discard all of the comments if strlen > 256.\n,https://github.com/bitcoin/bitcoin/pull/6462#issuecomment-126707136,126707136,
laanwj,2015-07-31T15:29:35Z,It's a workable solution but failing silently is unexpected behavior. I'd prefer to check this in AppInit2 and fail if the subversion string is too long.\n,https://github.com/bitcoin/bitcoin/pull/6462#issuecomment-126725202,126725202,
prusnak,2015-07-31T16:07:07Z,Added check to AppInit2 function. (No more than 4 comments and no longer than 40 characters allowed).\n,https://github.com/bitcoin/bitcoin/pull/6462#issuecomment-126736052,126736052,
jonasschnelli,2015-08-01T07:46:26Z,utACK.\n\nNit: now you can provide 4string x 40bytes. What if one likes to provide 1x50 bytes?\nWould it not make more sense to limit the combined string to 240 (or 255) bytes?\n,https://github.com/bitcoin/bitcoin/pull/6462#issuecomment-126878942,126878942,
prusnak,2015-08-01T13:34:37Z,Reworked check to check total length of all comments altogether. If it is more than 200 characters the error is issued.\n,https://github.com/bitcoin/bitcoin/pull/6462#issuecomment-126915637,126915637,
jgarzik,2015-08-01T16:59:22Z,ut ACK\n,https://github.com/bitcoin/bitcoin/pull/6462#issuecomment-126937514,126937514,
sipa,2015-08-01T18:47:58Z,utACK\n,https://github.com/bitcoin/bitcoin/pull/6462#issuecomment-126944763,126944763,
laanwj,2015-08-05T07:46:33Z,"@prusnak I slightly reworked the last commit:\n- Add a constant `MAX_SUBVERSION_LENGTH` in `net.h` and use where appropriate\n- Compute strSubVersion only once, during initialization, and check the size immediately\n- Use stored strSubVersion in PushVersion and GetNetworkInfo\n- Remove translation for the error.\n\nThis reduces the amount of code, and cuts down on magic values.\nhttps://github.com",https://github.com/bitcoin/bitcoin/pull/6462#issuecomment-127903227,127903227,
prusnak,2015-08-05T10:40:22Z,@laanwj  Updated PR to your code.\n,https://github.com/bitcoin/bitcoin/pull/6462#issuecomment-127952635,127952635,
prusnak,2015-08-05T13:51:03Z,Thanks!\n,https://github.com/bitcoin/bitcoin/pull/6462#issuecomment-128002329,128002329,
ABISprotocol,2015-08-06T01:51:34Z,I can't help but wonder if this conflicts somehow with #253 and the effort there which seemed to be to _not_ identify or associate users... what might be the long-term effects of this effort which is to associate a bitcoin address with a node?  No need to answer me here.\n,https://github.com/bitcoin/bitcoin/pull/6462#issuecomment-128207961,128207961,
laanwj,2015-08-06T16:31:30Z,"@ABISprotocol How is having this option a problem? It's not always a good idea to use it, but many people run essentially public nodes without wallet, and for those there is no need to 'hide in the crowd'.\n",https://github.com/bitcoin/bitcoin/pull/6462#issuecomment-128427901,128427901,
ABISprotocol,2015-08-10T19:13:27Z,"@laanwj Since you asked, my thinking was that there might be ancillary effects on other users, a butterfly effect if you will in the privacy context.  Though different functionally (and thus not comparable in the way one might consider it to be), the address reuse problem comes to mind (again, this is perhaps not relevant here because it is addressed in other ways, such as implementing stealth or ",https://github.com/bitcoin/bitcoin/pull/6462#issuecomment-129570322,129570322,
sipa,2015-08-10T19:20:46Z,The ability to change what software your node advertizes as is not the same\nas encouraging to put an address there (which is indeed a bad idea IMHO).\n,https://github.com/bitcoin/bitcoin/pull/6462#issuecomment-129571933,129571933,
MarcoFalke,2015-09-01T22:00:29Z,"I might be missing something but how does this implement BIP-0014? Current master happily accepts comments containing any of the ""reserved symbols"" mentioned in BIP-0014 and silently drops other characters when pushing to the network.\nE.g. `-`:\n\nMy local node:\n\n```\ngetnetworkinfo\n[...]\n""subversion"": ""/Satoshi:0.11.99(node-bob_12);:/:)()/"",\n[...]\n```\n\nSome remote node:\n\n```\ngetpeerin",https://github.com/bitcoin/bitcoin/pull/6462#issuecomment-136876780,136876780,
laanwj,2015-07-24T11:30:47Z,"Right now, FormatSubVersion is a pure utility function that doesn't use any global state. I think it should stay that way.  E.g. by adding an `const std::vector<std::string> &commentList` argument. Then pass in this data at the caller side.\n\nAlso makes it easier to test this in `util_tests`.\n",https://github.com/bitcoin/bitcoin/pull/6462#discussion_r35414594,35414594,src/clientversion.cpp
Diapolo,2015-08-06T06:49:08Z,Shouldn't that one be translatable?\n,https://github.com/bitcoin/bitcoin/pull/6462#discussion_r36385481,36385481,src/init.cpp
laanwj,2015-08-06T09:36:33Z,"No, I'd say. Apart from being a specific technical error (which we don't translate for Googlability, see `translation_strings_policy.md`) it's an extremely rare condition caused by almost-abuse of the configuration system. No need to waste translator time on that.\n",https://github.com/bitcoin/bitcoin/pull/6462#discussion_r36396631,36396631,src/init.cpp
