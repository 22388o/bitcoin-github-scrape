gmaxwell,2020-11-05 19:59:36,"I don't understand why this should be done at this point, I believe #19620 addressed the (limited) justification for backporting wtxid relay.  Am I confused?",https://github.com/bitcoin/bitcoin/pull/20317#issuecomment-722610979,722610979,
jnewbery,2020-11-05 21:36:17,"This was discussed in the IRC meeting on July 30th: http://www.erisian.com.au/meetbot/bitcoin-core-dev/2020/bitcoin-core-dev.2020-07-30-19.00.log.html#l-47\n\n> 19:25 < wumpus> so the plan is to backport  #19606 to 0.20 and #19620 to 0.19 and 0.20?\n[...]\n19:25 < jnewbery> wumpus: sounds good to me\n[...]\n19:25 < sdaftuar> sounds good\n19:26 < sipa> sounds reasonable if wtxid relay (and f",https://github.com/bitcoin/bitcoin/pull/20317#issuecomment-722659873,722659873,
fanquake,2020-11-06 07:38:02,"It's too late for #19606, however this PR is also missing the `GitHub-Pull: #` and `Rebased-From: ` metadata. See #20166 for an example.",https://github.com/bitcoin/bitcoin/pull/20317#issuecomment-722928370,722928370,
gmaxwell,2020-11-06 07:57:29,"I am confused by this discussion.\n\n> 19:16:35 <wumpus> we can make an exception to normallly not backporting p2p features as it's requirement for taproot\n\nWtxid relay is not a requirement for taproot.  Without #19620 there was a narrow justification, though I don't think too big of one, but with 19620 in place there isn't any duplicated fetching-- so there is no connection to taproot anymo",https://github.com/bitcoin/bitcoin/pull/20317#issuecomment-722935725,722935725,
jnewbery,2020-11-06 10:22:58,"> 19:16:35 we can make an exception to normallly not backporting p2p features as it's requirement for taproot\n\nThat wasn't the reason given for backporting. The reason for backporting was *not* that it was a requirement for taproot. It was discussed as being an independently useful change. wtxid relay has been wanted since segwit was introduced (#8279), the feature was developed against 0.20, ",https://github.com/bitcoin/bitcoin/pull/20317#issuecomment-723001768,723001768,
MarcoFalke,2020-11-06 11:30:40,"The crash bug has been introduced in neither of those feature prs. It has been introduced (and fixed) in the refactoring pr. If it was introduced in a pr different from one that fixed it, it would be highly alarming because our fuzzers are meaningless and can't even find the most trivial crash seed.\n\nA side effect of `AlreadyHave` was to (also) skip requesting of the tx with unknown type flags",https://github.com/bitcoin/bitcoin/pull/20317#issuecomment-723031677,723031677,
practicalswift,2020-11-06 12:07:07,"> The crash bug has been introduced in neither of those feature prs. It has been introduced (and fixed) in the refactoring pr.\n\nAs the person who identified the condition which triggers the bug and reported it to `security@bitcoincore.org` (with a working PoC)  I can tell you with certainty that the bug was introduced in #19569 and fixed in #19610 :)\n\n> If it was introduced in a pr differe",https://github.com/bitcoin/bitcoin/pull/20317#issuecomment-723046620,723046620,
jnewbery,2020-11-06 12:08:25,"> The bug has been introduced by splitting AlreadyHave (commit 42ca561) and then fixed later by adding the sanity check (commit fb56d37) in the same refactoring pr.\n\nNo, the bug was introduced in [`9efd86a` (#19569)](https://github.com/bitcoin/bitcoin/pull/19569/commits/9efd86a908cf09d9ddbadd3195f202635117d505). After that commit, if we receive an `inv` message with type `MSG_WITNESS_BLOCK`, t",https://github.com/bitcoin/bitcoin/pull/20317#issuecomment-723047111,723047111,
MarcoFalke,2020-11-06 13:29:50,"Oh, I see my bad. So in  9efd86a it works with only type `MSG_WITNESS_BLOCK` and in 42ca561 in works with any unknown type.",https://github.com/bitcoin/bitcoin/pull/20317#issuecomment-723081250,723081250,
gmaxwell,2020-11-07 16:36:51,"> I still think it's useful to have wtxid relay widely deployed \n\nWhy?  I'm not following why this bundle of features is atypically important.   Wtxid relay is a fine change overall in the long term, but part of the reason it took a long time to do is because it wasn't especially important.\n",https://github.com/bitcoin/bitcoin/pull/20317#issuecomment-723466611,723466611,
ajtowns,2020-11-09 04:59:41,"> I don't understand why this should be done at this point, I believe #19620 addressed the (limited) justification for backporting wtxid relay. Am I confused?\n\nThat matches my understanding -- the risk was that if taproot was deployed, then nodes running 0.20 and earlier would see soft-rejects txs spending taproot UTXOs, but only due to the witness being non-standard, so would re-request the t",https://github.com/bitcoin/bitcoin/pull/20317#issuecomment-723754509,723754509,
MarcoFalke,2020-11-15 17:20:08,"Due to the other bugfixes in the 0.20 branch, we should be aiming for a release soon. wtxid relay and this followup are not a regression bugfix, so if they don't receive enough review to make it in soon, or are controversial, we should drop them or postpone them to the next minor release in the 0.20 series.",https://github.com/bitcoin/bitcoin/pull/20317#issuecomment-727604800,727604800,
sipa,2020-11-15 19:39:44,"I probably contributed to the initial sentiment that wtxid relay was particularly important as a feature. Since the immediate concern about BIP340-342 deployment is addressed through #19620, that's not really the case (anymore).\n\nSo I think we should take both wtxid relay and this PR in 0.20, or neither. I believe that just wtxid relay may be a slight regression as it may hurt orphan handling on",https://github.com/bitcoin/bitcoin/pull/20317#issuecomment-727624755,727624755,
MarcoFalke,2020-11-16 06:52:16,"> If reverting wtxid relay from the 0.20 branch is easy, that's probably the best option.\n\nDone in #20399",https://github.com/bitcoin/bitcoin/pull/20317#issuecomment-727775593,727775593,
MarcoFalke,2020-11-17 17:23:29,"I am catching up on the IRC backlog: https://bitcoin.jonasschnelli.ch/ircmeetings/logs/bitcoin-core-dev/2020/bitcoin-core-dev.2020-11-17-15.00.moin.txt\n\n@jnewbery Is this still relevant or can this be closed?",https://github.com/bitcoin/bitcoin/pull/20317#issuecomment-729079031,729079031,
jnewbery,2020-11-17 17:36:14,This can be closed. We agreed at the meeting to revert 19606.,https://github.com/bitcoin/bitcoin/pull/20317#issuecomment-729086607,729086607,
