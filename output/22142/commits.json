[
  {
    "sha": "ad6ea2f088a36bf2f2546767a1d8ed5966bd785c",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzphZDZlYTJmMDg4YTM2YmYyZjI1NDY3NjdhMWQ4ZWQ1OTY2YmQ3ODVj",
    "commit": {
      "author": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2021-04-03T04:47:55Z"
      },
      "committer": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2021-06-10T02:01:53Z"
      },
      "message": "build, qt: Fix wrong cross-compiling detection on macOS",
      "tree": {
        "sha": "6daf0994e34a415da9dfede234888e6a5171b11c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6daf0994e34a415da9dfede234888e6a5171b11c"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ad6ea2f088a36bf2f2546767a1d8ed5966bd785c",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEz7FuIclQ9n+pXlWPLuufXMCVJsEFAmDBcpIACgkQLuufXMCV\nJsFCGBAApGmi4nqXP1Yo3MOTGQrn1fuHqqs/AZFpT/qaOuFvaT6ShT69GP0mBLsM\nmYLVuSvTEM8/xY2TMap2u1FKqr+BsEDLHsqmC8XJHXBCUgSvgnz02H5At+fkl88q\nHAG1gvkfyqTKnZtZpr3MDTtX/PH7ijwrfKwcGEuFZoByebrGnE69JQHSdYcgknbP\nLJeW9gICCRDIQIJ9OlJjYm2DXYAIyogiXsl8ojOuSD4ZrLKn4+uIltNE1iezK/Ko\nV78eMYYcnExEYEWY/7Ii0QQK2BLpM6iEaCqvPPgUakkMhNa2TmRBJtxySab6OENW\nNaVZsH54UE7IyWe3SmACdpiMmL/ZpUwa6WikgmJ6m1uOFdupxtLVbXBaD/10nfOe\nTrBmV58x5F2I/0xRbjAJpSBngvxf1xpIs3BpwiSqIMRcd2iamm/2rwYMoWW2azoa\nPjnhHzMtVamB9BxYsaiybrr/cbaN2DNw4JmZT+nlgK5y7V0PGRaeyTQxlNBT2tUg\nIrSdGkZhMsfmjkmpV4g2CYGM4Uxg0gElhAWKRy7H1aFKyR+2xCBc8YRXCV10epCZ\n9jZQlEK7t1MXnHN0L0Wv+RUCy7YUdFHeHllJvCUC1N1ctsWGI7Vp+mq/QyMZpF3D\n8VEIOGWIO7RofSsNJFi1lBqxujIe7RUNAP115PBkG3/1G6a3Pyk=\n=n+2W\n-----END PGP SIGNATURE-----",
        "payload": "tree 6daf0994e34a415da9dfede234888e6a5171b11c\nparent 92584d29cee307249c22d9e244eff10fce068178\nauthor Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1617425275 +0300\ncommitter fanquake <fanquake@gmail.com> 1623290513 +0800\n\nbuild, qt: Fix wrong cross-compiling detection on macOS\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ad6ea2f088a36bf2f2546767a1d8ed5966bd785c",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/ad6ea2f088a36bf2f2546767a1d8ed5966bd785c",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ad6ea2f088a36bf2f2546767a1d8ed5966bd785c/comments",
    "author": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "92584d29cee307249c22d9e244eff10fce068178",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/92584d29cee307249c22d9e244eff10fce068178",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/92584d29cee307249c22d9e244eff10fce068178"
      }
    ],
    "stats": {
      "total": 4,
      "additions": 1,
      "deletions": 3
    },
    "files": [
      {
        "sha": "e3920ed8b63bd4efcc8916d7c999e0a9a6b886b9",
        "filename": "depends/packages/qt.mk",
        "status": "modified",
        "additions": 1,
        "deletions": 2,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/ad6ea2f088a36bf2f2546767a1d8ed5966bd785c/depends/packages/qt.mk",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/ad6ea2f088a36bf2f2546767a1d8ed5966bd785c/depends/packages/qt.mk",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/packages/qt.mk?ref=ad6ea2f088a36bf2f2546767a1d8ed5966bd785c",
        "patch": "@@ -113,14 +113,13 @@ $(package)_config_opts_darwin = -no-dbus\n $(package)_config_opts_darwin += -no-opengl\n $(package)_config_opts_darwin += -pch\n $(package)_config_opts_darwin += -no-feature-corewlan\n-$(package)_config_opts_darwin += -device-option QMAKE_MACOSX_DEPLOYMENT_TARGET=$(OSX_MIN_VERSION)\n+$(package)_config_opts_darwin += QMAKE_MACOSX_DEPLOYMENT_TARGET=$(OSX_MIN_VERSION)\n \n ifneq ($(build_os),darwin)\n $(package)_config_opts_darwin += -xplatform macx-clang-linux\n $(package)_config_opts_darwin += -device-option MAC_SDK_PATH=$(OSX_SDK)\n $(package)_config_opts_darwin += -device-option MAC_SDK_VERSION=$(OSX_SDK_VERSION)\n $(package)_config_opts_darwin += -device-option CROSS_COMPILE=\"$(host)-\"\n-$(package)_config_opts_darwin += -device-option MAC_MIN_VERSION=$(OSX_MIN_VERSION)\n $(package)_config_opts_darwin += -device-option MAC_TARGET=$(host)\n $(package)_config_opts_darwin += -device-option XCODE_VERSION=$(XCODE_VERSION)\n endif"
      },
      {
        "sha": "190ab7a160e49bf135c6991e84edc4c27f6d15de",
        "filename": "depends/patches/qt/mac-qmake.conf",
        "status": "modified",
        "additions": 0,
        "deletions": 1,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/ad6ea2f088a36bf2f2546767a1d8ed5966bd785c/depends/patches/qt/mac-qmake.conf",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/ad6ea2f088a36bf2f2546767a1d8ed5966bd785c/depends/patches/qt/mac-qmake.conf",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/patches/qt/mac-qmake.conf?ref=ad6ea2f088a36bf2f2546767a1d8ed5966bd785c",
        "patch": "@@ -8,7 +8,6 @@ include(../common/clang-mac.conf)\n QMAKE_MAC_SDK_PATH=$${MAC_SDK_PATH}\n QMAKE_XCODE_VERSION = $${XCODE_VERSION}\n QMAKE_XCODE_DEVELOPER_PATH=/Developer\n-QMAKE_MACOSX_DEPLOYMENT_TARGET = $${MAC_MIN_VERSION}\n QMAKE_MAC_SDK=macosx\n QMAKE_MAC_SDK.macosx.Path = $${MAC_SDK_PATH}\n QMAKE_MAC_SDK.macosx.platform_name = macosx"
      }
    ]
  },
  {
    "sha": "ea4cdeba3a1b2824020303676e2f5322d13a588c",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzplYTRjZGViYTNhMWIyODI0MDIwMzAzNjc2ZTJmNTMyMmQxM2E1ODhj",
    "commit": {
      "author": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2021-03-30T00:10:05Z"
      },
      "committer": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2021-06-10T02:22:05Z"
      },
      "message": "build: split qt into native and host builds",
      "tree": {
        "sha": "857f67890284c09db796d1226f580ee77322076c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/857f67890284c09db796d1226f580ee77322076c"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ea4cdeba3a1b2824020303676e2f5322d13a588c",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEz7FuIclQ9n+pXlWPLuufXMCVJsEFAmDBd00ACgkQLuufXMCV\nJsGNcQ/5AfiKzmeH4tXjtjneK4ZKEaWZuikG6zd7oxOFFH9Yz+xxLfcO3v2IlArd\nDz882Cq6qfviPxn3yHWKbw0ULvW8osjNPJk3/9Tnc3uf0F2la8suxDCScVzxOGis\n1ZJ82PqLkZi61xOSBgXH6hl3viekG/eGtTaIYCeqvUwWlEwhU9qW5ligpjRKSeSW\n1t71fcvDlDujBGMqfTpPToZ8jwnNsRRT6I6TUAPpm7kDRzyWMUUxkvFFStNoshH4\nVDbZPk9m/uWVcBOegZgk19NgHoqnNj22gHGNReZ/7uYKiTLB/5iCr/6HqrpiyRkV\nNBvQGEbMPLRdYwt97fa1GsepbC0EfcQKFqEpq1oA1ISnCeS9JwfZ+ZvMPWobrSEA\nBPw6wpNillFk7jzgb73bxAU8iO9EbvJyamiNHJwOFNdSsQIEG9wojSOkK10BP6zT\nPFuibCNccqoGAcWcpIk4BOekh4fgN7y1Xr0rsSBS0vNDhWPRqQTMb3EIwQAX5wdY\n/EzTi3vUuw+g8dK8DtGHQLktAbNXOx1i1k7rwOSpEALrEJeQy+Du/2z7LSBBn3CH\ngZEe1BTqY2i7tGy2+x/fz7bZ/3fKpgcP+ovXpmD9L/jW+4ah+cU+OMHz9DxZlSC2\nA9RdNiGeaWRv2dRAwSiFEju/gTzoUBFhTn4s1X8+8SLJkt9GJTg=\n=TExj\n-----END PGP SIGNATURE-----",
        "payload": "tree 857f67890284c09db796d1226f580ee77322076c\nparent ad6ea2f088a36bf2f2546767a1d8ed5966bd785c\nauthor fanquake <fanquake@gmail.com> 1617063005 +0800\ncommitter fanquake <fanquake@gmail.com> 1623291725 +0800\n\nbuild: split qt into native and host builds\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ea4cdeba3a1b2824020303676e2f5322d13a588c",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/ea4cdeba3a1b2824020303676e2f5322d13a588c",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ea4cdeba3a1b2824020303676e2f5322d13a588c/comments",
    "author": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "ad6ea2f088a36bf2f2546767a1d8ed5966bd785c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ad6ea2f088a36bf2f2546767a1d8ed5966bd785c",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/ad6ea2f088a36bf2f2546767a1d8ed5966bd785c"
      }
    ],
    "stats": {
      "total": 452,
      "additions": 332,
      "deletions": 120
    },
    "files": [
      {
        "sha": "a19dddc61f7dbf4b1ea8f96972de385d872d1b38",
        "filename": "depends/packages/native_qtbase.mk",
        "status": "added",
        "additions": 189,
        "deletions": 0,
        "changes": 189,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/ea4cdeba3a1b2824020303676e2f5322d13a588c/depends/packages/native_qtbase.mk",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/ea4cdeba3a1b2824020303676e2f5322d13a588c/depends/packages/native_qtbase.mk",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/packages/native_qtbase.mk?ref=ea4cdeba3a1b2824020303676e2f5322d13a588c",
        "patch": "@@ -0,0 +1,189 @@\n+package=native_qtbase\n+$(package)_version=5.12.11\n+$(package)_download_path=https://download.qt.io/official_releases/qt/5.12/$($(package)_version)/submodules\n+$(package)_suffix=everywhere-src-$($(package)_version).tar.xz\n+$(package)_file_name=qtbase-$($(package)_suffix)\n+$(package)_sha256_hash=1c1b4e33137ca77881074c140d54c3c9747e845a31338cfe8680f171f0bc3a39\n+$(package)_patches=dont_hardcode_pwd.patch fix_limits_header.patch\n+\n+$(package)_qttools_file_name=qttools-$($(package)_suffix)\n+$(package)_qttools_sha256_hash=98b2aaca230458f65996f3534fd471d2ffd038dd58ac997c0589c06dc2385b4f\n+\n+$(package)_extra_sources += $($(package)_qttools_file_name)\n+\n+define $(package)_set_vars\n+$(package)_config_opts_release = -release\n+$(package)_config_opts_release += -silent\n+$(package)_config_opts_debug = -debug\n+$(package)_config_opts_debug += -optimized-tools\n+$(package)_config_opts += -bindir $(build_prefix)/bin\n+$(package)_config_opts += -c++std c++1z\n+$(package)_config_opts += -confirm-license\n+$(package)_config_opts += -hostprefix $(build_prefix)\n+$(package)_config_opts += -make tools\n+$(package)_config_opts += -no-accessibility\n+$(package)_config_opts += -no-compile-examples\n+$(package)_config_opts += -no-cups\n+$(package)_config_opts += -no-dbus\n+$(package)_config_opts += -no-direct2d\n+$(package)_config_opts += -no-directfb\n+$(package)_config_opts += -no-egl\n+$(package)_config_opts += -no-eglfs\n+$(package)_config_opts += -no-evdev\n+$(package)_config_opts += -no-feature-bearermanagement\n+$(package)_config_opts += -no-feature-colordialog\n+$(package)_config_opts += -no-feature-concurrent\n+$(package)_config_opts += -no-feature-corewlan\n+$(package)_config_opts += -no-feature-dial\n+$(package)_config_opts += -no-feature-fontcombobox\n+$(package)_config_opts += -no-feature-ftp\n+$(package)_config_opts += -no-feature-gui\n+$(package)_config_opts += -no-feature-http\n+$(package)_config_opts += -no-feature-itemmodeltester\n+$(package)_config_opts += -no-feature-image_heuristic_mask\n+$(package)_config_opts += -no-feature-keysequenceedit\n+$(package)_config_opts += -no-feature-lcdnumber\n+$(package)_config_opts += -no-feature-network\n+$(package)_config_opts += -no-feature-networkdiskcache\n+$(package)_config_opts += -no-feature-networkproxy\n+$(package)_config_opts += -no-feature-pdf\n+$(package)_config_opts += -no-feature-printdialog\n+$(package)_config_opts += -no-feature-printer\n+$(package)_config_opts += -no-feature-printpreviewdialog\n+$(package)_config_opts += -no-feature-printpreviewwidget\n+$(package)_config_opts += -no-feature-sessionmanager\n+$(package)_config_opts += -no-feature-socks5\n+$(package)_config_opts += -no-feature-sql\n+$(package)_config_opts += -no-feature-sqlmodel\n+$(package)_config_opts += -no-feature-statemachine\n+$(package)_config_opts += -no-feature-syntaxhighlighter\n+$(package)_config_opts += -no-feature-testlib\n+$(package)_config_opts += -no-feature-textbrowser\n+$(package)_config_opts += -no-feature-textodfwriter\n+$(package)_config_opts += -no-feature-topleveldomain\n+$(package)_config_opts += -no-feature-udpsocket\n+$(package)_config_opts += -no-feature-undocommand\n+$(package)_config_opts += -no-feature-undogroup\n+$(package)_config_opts += -no-feature-undostack\n+$(package)_config_opts += -no-feature-undoview\n+$(package)_config_opts += -no-feature-vnc\n+$(package)_config_opts += -no-feature-vulkan\n+$(package)_config_opts += -no-feature-widgets\n+$(package)_config_opts += -no-feature-wizard\n+$(package)_config_opts += -no-feature-xmlstreamwriter\n+$(package)_config_opts += -no-freetype\n+$(package)_config_opts += -no-gbm\n+$(package)_config_opts += -no-gif\n+$(package)_config_opts += -no-glib\n+$(package)_config_opts += -no-gui\n+$(package)_config_opts += -no-harfbuzz\n+$(package)_config_opts += -no-icu\n+$(package)_config_opts += -no-ico\n+$(package)_config_opts += -no-iconv\n+$(package)_config_opts += -no-journald\n+$(package)_config_opts += -no-kms\n+$(package)_config_opts += -no-libjpeg\n+$(package)_config_opts += -no-libpng\n+$(package)_config_opts += -no-libproxy\n+$(package)_config_opts += -no-libudev\n+$(package)_config_opts += -no-linuxfb\n+$(package)_config_opts += -no-mirclient\n+$(package)_config_opts += -no-mtdev\n+$(package)_config_opts += -no-openssl\n+$(package)_config_opts += -no-opengl\n+$(package)_config_opts += -no-openvg\n+$(package)_config_opts += -no-qpa\n+$(package)_config_opts += -no-reduce-relocations\n+$(package)_config_opts += -no-sctp\n+$(package)_config_opts += -no-securetransport\n+$(package)_config_opts += -no-sql-db2\n+$(package)_config_opts += -no-sql-ibase\n+$(package)_config_opts += -no-sql-oci\n+$(package)_config_opts += -no-sql-tds\n+$(package)_config_opts += -no-sql-mysql\n+$(package)_config_opts += -no-sql-odbc\n+$(package)_config_opts += -no-sql-psql\n+$(package)_config_opts += -no-sql-sqlite\n+$(package)_config_opts += -no-sql-sqlite2\n+$(package)_config_opts += -no-system-proxies\n+$(package)_config_opts += -no-trace\n+$(package)_config_opts += -no-tslib\n+$(package)_config_opts += -no-use-gold-linker\n+$(package)_config_opts += -no-widgets\n+$(package)_config_opts += -no-xcb\n+$(package)_config_opts += -no-xcb-xlib\n+$(package)_config_opts += -no-xkbcommon\n+$(package)_config_opts += -nomake examples\n+$(package)_config_opts += -nomake tests\n+$(package)_config_opts += -opensource\n+$(package)_config_opts += -no-pkg-config\n+$(package)_config_opts += -prefix $(host_prefix)\n+$(package)_config_opts += -qt-pcre\n+$(package)_config_opts += -qt-zlib\n+$(package)_config_opts += -reduce-exports\n+$(package)_config_opts += -static\n+$(package)_config_opts += -v\n+\n+# required for C++17 support on macOS\n+$(package)_config_opts_darwin = QMAKE_MACOSX_DEPLOYMENT_TARGET=$(OSX_MIN_VERSION)\n+\n+# for macOS on Apple Silicon (ARM) see https://bugreports.qt.io/browse/QTBUG-85279\n+$(package)_config_opts_aarch64_darwin += -device-option QMAKE_APPLE_DEVICE_ARCHS=arm64\n+endef\n+\n+define $(package)_fetch_cmds\n+$(call fetch_file,$(package),$($(package)_download_path),$($(package)_download_file),$($(package)_file_name),$($(package)_sha256_hash)) && \\\n+$(call fetch_file,$(package),$($(package)_download_path),$($(package)_qttools_file_name),$($(package)_qttools_file_name),$($(package)_qttools_sha256_hash))\n+endef\n+\n+define $(package)_extract_cmds\n+  mkdir -p $($(package)_extract_dir) && \\\n+  echo \"$($(package)_sha256_hash)  $($(package)_source)\" > $($(package)_extract_dir)/.$($(package)_file_name).hash && \\\n+  echo \"$($(package)_qttools_sha256_hash)  $($(package)_source_dir)/$($(package)_qttools_file_name)\" >> $($(package)_extract_dir)/.$($(package)_file_name).hash && \\\n+  $(build_SHA256SUM) -c $($(package)_extract_dir)/.$($(package)_file_name).hash && \\\n+  mkdir qtbase && \\\n+  tar --no-same-owner --strip-components=1 -xf $($(package)_source) -C qtbase && \\\n+  mkdir qttools && \\\n+  tar --no-same-owner --strip-components=1 -xf $($(package)_source_dir)/$($(package)_qttools_file_name) -C qttools\n+endef\n+\n+define $(package)_preprocess_cmds\n+  patch -p1 -i $($(package)_patch_dir)/dont_hardcode_pwd.patch && \\\n+  patch -p1 -i $($(package)_patch_dir)/fix_limits_header.patch\n+endef\n+\n+define $(package)_config_cmds\n+  cd qtbase && \\\n+  ./configure $($(package)_config_opts) && \\\n+  cd .. && \\\n+  $(MAKE) -C qtbase && \\\n+  qtbase/bin/qmake -o qtbase/src/tools/uic/Makefile qtbase/src/tools/uic/uic.pro && \\\n+  qtbase/bin/qmake -o qtbase/src/tools/qfloat16-tables/Makefile qtbase/src/tools/qfloat16-tables/qfloat16-tables.pro && \\\n+  qtbase/bin/qmake -o qtbase/src/tools/qvkgen/Makefile qtbase/src/tools/qvkgen/qvkgen.pro && \\\n+  qtbase/bin/qmake -o qtbase/qmake/Makefile qtbase/qmake/qmake-aux.pro && \\\n+  qtbase/bin/qmake -o qttools/src/linguist/Makefile qttools/src/linguist/linguist.pro\n+endef\n+\n+define $(package)_build_cmds\n+  $(MAKE) -C qtbase/src/tools/moc && \\\n+  $(MAKE) -C qtbase/src/tools/qfloat16-tables && \\\n+  $(MAKE) -C qtbase/src/tools/qlalr && \\\n+  $(MAKE) -C qtbase/src/tools/qvkgen && \\\n+  $(MAKE) -C qtbase/src/tools/rcc && \\\n+  $(MAKE) -C qtbase/src/tools/uic && \\\n+  $(MAKE) -C qttools/src/linguist\n+endef\n+\n+define $(package)_stage_cmds\n+  mkdir -p $($(package)_staging_prefix_dir)/bin && \\\n+  cp qtbase/bin/qmake $($(package)_staging_prefix_dir)/bin/ && \\\n+  cp qtbase/bin/qfloat16-tables $($(package)_staging_prefix_dir)/bin/ && \\\n+  $(MAKE) INSTALL_ROOT=$($(package)_staging_dir) -C qtbase/src/tools/moc install && \\\n+  $(MAKE) INSTALL_ROOT=$($(package)_staging_dir) -C qtbase/src/tools/qlalr install && \\\n+  $(MAKE) INSTALL_ROOT=$($(package)_staging_dir) -C qtbase/src/tools/qvkgen install && \\\n+  $(MAKE) INSTALL_ROOT=$($(package)_staging_dir) -C qtbase/src/tools/rcc install && \\\n+  $(MAKE) INSTALL_ROOT=$($(package)_staging_dir) -C qtbase/src/tools/uic install && \\\n+  $(MAKE) INSTALL_ROOT=$($(package)_staging_dir) -C qttools/src/linguist/lrelease install && \\\n+  $(MAKE) INSTALL_ROOT=$($(package)_staging_dir) -C qttools/src/linguist/lupdate install && \\\n+  $(MAKE) INSTALL_ROOT=$($(package)_staging_dir) -C qttools/src/linguist/lconvert install\n+endef"
      },
      {
        "sha": "fc590937a40eb7daa1cb2f518d835ed115441ae5",
        "filename": "depends/packages/packages.mk",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/ea4cdeba3a1b2824020303676e2f5322d13a588c/depends/packages/packages.mk",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/ea4cdeba3a1b2824020303676e2f5322d13a588c/depends/packages/packages.mk",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/packages/packages.mk?ref=ea4cdeba3a1b2824020303676e2f5322d13a588c",
        "patch": "@@ -21,7 +21,7 @@ multiprocess_native_packages = native_libmultiprocess native_capnp\n \n darwin_native_packages = native_ds_store native_mac_alias\n \n-$(host_arch)_$(host_os)_native_packages += native_b2\n+$(host_arch)_$(host_os)_native_packages += native_b2 native_qtbase\n \n ifneq ($(build_os),darwin)\n darwin_native_packages += native_cctools native_libtapi native_libdmg-hfsplus"
      },
      {
        "sha": "bcf67803a582948e7a7bfc5308ba41613db92a0d",
        "filename": "depends/packages/qt.mk",
        "status": "modified",
        "additions": 71,
        "deletions": 99,
        "changes": 170,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/ea4cdeba3a1b2824020303676e2f5322d13a588c/depends/packages/qt.mk",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/ea4cdeba3a1b2824020303676e2f5322d13a588c/depends/packages/qt.mk",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/packages/qt.mk?ref=ea4cdeba3a1b2824020303676e2f5322d13a588c",
        "patch": "@@ -1,39 +1,74 @@\n-PACKAGE=qt\n-$(package)_version=5.12.11\n+package=qt\n+$(package)_version=$(native_qtbase_version)\n $(package)_download_path=https://download.qt.io/official_releases/qt/5.12/$($(package)_version)/submodules\n $(package)_suffix=everywhere-src-$($(package)_version).tar.xz\n $(package)_file_name=qtbase-$($(package)_suffix)\n-$(package)_sha256_hash=1c1b4e33137ca77881074c140d54c3c9747e845a31338cfe8680f171f0bc3a39\n+$(package)_sha256_hash=$(native_qtbase_sha256_hash)\n+$(package)_dependencies=native_qtbase\n $(package)_linux_dependencies=freetype fontconfig libxcb libxkbcommon\n-$(package)_qt_libs=corelib network widgets gui plugins testlib\n+$(package)_qt_libs=corelib gui network platformsupport plugins testlib widgets\n $(package)_patches=fix_qt_pkgconfig.patch mac-qmake.conf fix_no_printer.patch no-xlib.patch\n $(package)_patches+= fix_android_qmake_conf.patch fix_android_jni_static.patch dont_hardcode_pwd.patch\n-$(package)_patches+= drop_lrelease_dependency.patch no_sdk_version_check.patch\n-$(package)_patches+= fix_lib_paths.patch fix_android_pch.patch\n+$(package)_patches+= no_sdk_version_check.patch fix_lib_paths.patch fix_android_pch.patch\n $(package)_patches+= qtbase-moc-ignore-gcc-macro.patch fix_limits_header.patch\n \n $(package)_qttranslations_file_name=qttranslations-$($(package)_suffix)\n $(package)_qttranslations_sha256_hash=577b0668a777eb2b451c61e8d026d79285371597ce9df06b6dee6c814164b7c3\n \n-$(package)_qttools_file_name=qttools-$($(package)_suffix)\n-$(package)_qttools_sha256_hash=98b2aaca230458f65996f3534fd471d2ffd038dd58ac997c0589c06dc2385b4f\n-\n $(package)_extra_sources  = $($(package)_qttranslations_file_name)\n-$(package)_extra_sources += $($(package)_qttools_file_name)\n \n define $(package)_set_vars\n $(package)_config_opts_release = -release\n $(package)_config_opts_release += -silent\n $(package)_config_opts_debug = -debug\n $(package)_config_opts_debug += -optimized-tools\n-$(package)_config_opts += -bindir $(build_prefix)/bin\n+$(package)_config_opts += -accessibility\n $(package)_config_opts += -c++std c++1z\n $(package)_config_opts += -confirm-license\n+$(package)_config_opts += -external-hostbindir $(build_prefix)/bin\n $(package)_config_opts += -hostprefix $(build_prefix)\n $(package)_config_opts += -no-compile-examples\n $(package)_config_opts += -no-cups\n+$(package)_config_opts += -no-dbus\n $(package)_config_opts += -no-egl\n $(package)_config_opts += -no-eglfs\n+$(package)_config_opts += -no-feature-bearermanagement\n+$(package)_config_opts += -no-feature-colordialog\n+$(package)_config_opts += -no-feature-commandlineparser\n+$(package)_config_opts += -no-feature-concurrent\n+$(package)_config_opts += -no-feature-dial\n+$(package)_config_opts += -no-feature-fontcombobox\n+$(package)_config_opts += -no-feature-ftp\n+$(package)_config_opts += -no-feature-http\n+$(package)_config_opts += -no-feature-itemmodeltester\n+$(package)_config_opts += -no-feature-image_heuristic_mask\n+$(package)_config_opts += -no-feature-keysequenceedit\n+$(package)_config_opts += -no-feature-lcdnumber\n+$(package)_config_opts += -no-feature-networkdiskcache\n+$(package)_config_opts += -no-feature-networkproxy\n+$(package)_config_opts += -no-feature-pdf\n+$(package)_config_opts += -no-feature-printdialog\n+$(package)_config_opts += -no-feature-printer\n+$(package)_config_opts += -no-feature-printpreviewdialog\n+$(package)_config_opts += -no-feature-printpreviewwidget\n+$(package)_config_opts += -no-feature-sessionmanager\n+$(package)_config_opts += -no-feature-socks5\n+$(package)_config_opts += -no-feature-sql\n+$(package)_config_opts += -no-feature-sqlmodel\n+$(package)_config_opts += -no-feature-statemachine\n+$(package)_config_opts += -no-feature-syntaxhighlighter\n+$(package)_config_opts += -no-feature-textbrowser\n+$(package)_config_opts += -no-feature-textodfwriter\n+$(package)_config_opts += -no-feature-topleveldomain\n+$(package)_config_opts += -no-feature-udpsocket\n+$(package)_config_opts += -no-feature-undocommand\n+$(package)_config_opts += -no-feature-undogroup\n+$(package)_config_opts += -no-feature-undostack\n+$(package)_config_opts += -no-feature-undoview\n+$(package)_config_opts += -no-feature-vnc\n+$(package)_config_opts += -no-feature-vulkan\n+$(package)_config_opts += -no-feature-wizard\n+$(package)_config_opts += -no-feature-xml\n $(package)_config_opts += -no-freetype\n $(package)_config_opts += -no-gif\n $(package)_config_opts += -no-glib\n@@ -46,6 +81,7 @@ $(package)_config_opts += -no-libjpeg\n $(package)_config_opts += -no-libproxy\n $(package)_config_opts += -no-libudev\n $(package)_config_opts += -no-mtdev\n+$(package)_config_opts += -no-opengl\n $(package)_config_opts += -no-openssl\n $(package)_config_opts += -no-openvg\n $(package)_config_opts += -no-reduce-relocations\n@@ -64,7 +100,9 @@ $(package)_config_opts += -no-system-proxies\n $(package)_config_opts += -no-use-gold-linker\n $(package)_config_opts += -nomake examples\n $(package)_config_opts += -nomake tests\n+$(package)_config_opts += -nomake tools\n $(package)_config_opts += -opensource\n+$(package)_config_opts += -pch\n $(package)_config_opts += -pkg-config\n $(package)_config_opts += -prefix $(host_prefix)\n $(package)_config_opts += -qt-libpng\n@@ -73,46 +111,8 @@ $(package)_config_opts += -qt-harfbuzz\n $(package)_config_opts += -qt-zlib\n $(package)_config_opts += -static\n $(package)_config_opts += -v\n-$(package)_config_opts += -no-feature-bearermanagement\n-$(package)_config_opts += -no-feature-colordialog\n-$(package)_config_opts += -no-feature-commandlineparser\n-$(package)_config_opts += -no-feature-concurrent\n-$(package)_config_opts += -no-feature-dial\n-$(package)_config_opts += -no-feature-fontcombobox\n-$(package)_config_opts += -no-feature-ftp\n-$(package)_config_opts += -no-feature-http\n-$(package)_config_opts += -no-feature-image_heuristic_mask\n-$(package)_config_opts += -no-feature-keysequenceedit\n-$(package)_config_opts += -no-feature-lcdnumber\n-$(package)_config_opts += -no-feature-networkdiskcache\n-$(package)_config_opts += -no-feature-networkproxy\n-$(package)_config_opts += -no-feature-pdf\n-$(package)_config_opts += -no-feature-printdialog\n-$(package)_config_opts += -no-feature-printer\n-$(package)_config_opts += -no-feature-printpreviewdialog\n-$(package)_config_opts += -no-feature-printpreviewwidget\n-$(package)_config_opts += -no-feature-sessionmanager\n-$(package)_config_opts += -no-feature-socks5\n-$(package)_config_opts += -no-feature-sql\n-$(package)_config_opts += -no-feature-sqlmodel\n-$(package)_config_opts += -no-feature-statemachine\n-$(package)_config_opts += -no-feature-syntaxhighlighter\n-$(package)_config_opts += -no-feature-textbrowser\n-$(package)_config_opts += -no-feature-textodfwriter\n-$(package)_config_opts += -no-feature-topleveldomain\n-$(package)_config_opts += -no-feature-udpsocket\n-$(package)_config_opts += -no-feature-undocommand\n-$(package)_config_opts += -no-feature-undogroup\n-$(package)_config_opts += -no-feature-undostack\n-$(package)_config_opts += -no-feature-undoview\n-$(package)_config_opts += -no-feature-vnc\n-$(package)_config_opts += -no-feature-wizard\n-$(package)_config_opts += -no-feature-xml\n \n-$(package)_config_opts_darwin = -no-dbus\n-$(package)_config_opts_darwin += -no-opengl\n-$(package)_config_opts_darwin += -pch\n-$(package)_config_opts_darwin += -no-feature-corewlan\n+$(package)_config_opts_darwin = -no-feature-corewlan\n $(package)_config_opts_darwin += QMAKE_MACOSX_DEPLOYMENT_TARGET=$(OSX_MIN_VERSION)\n \n ifneq ($(build_os),darwin)\n@@ -127,14 +127,14 @@ endif\n # for macOS on Apple Silicon (ARM) see https://bugreports.qt.io/browse/QTBUG-85279\n $(package)_config_opts_aarch64_darwin += -device-option QMAKE_APPLE_DEVICE_ARCHS=arm64\n \n-$(package)_config_opts_linux = -qt-xcb\n-$(package)_config_opts_linux += -no-xcb-xlib\n+$(package)_config_opts_linux = -dbus-runtime\n+$(package)_config_opts_linux += -fontconfig\n $(package)_config_opts_linux += -no-feature-xlib\n+$(package)_config_opts_linux += -no-pch\n+$(package)_config_opts_linux += -no-xcb-xlib\n+$(package)_config_opts_linux += -qt-xcb\n $(package)_config_opts_linux += -system-freetype\n-$(package)_config_opts_linux += -fontconfig\n-$(package)_config_opts_linux += -no-opengl\n-$(package)_config_opts_linux += -no-feature-vulkan\n-$(package)_config_opts_linux += -dbus-runtime\n+\n $(package)_config_opts_arm_linux += -platform linux-g++ -xplatform bitcoin-linux-g++\n $(package)_config_opts_i686_linux  = -xplatform linux-g++-32\n $(package)_config_opts_x86_64_linux = -xplatform linux-g++-64\n@@ -144,14 +144,8 @@ $(package)_config_opts_powerpc64le_linux = -platform linux-g++ -xplatform bitcoi\n $(package)_config_opts_riscv64_linux = -platform linux-g++ -xplatform bitcoin-linux-g++\n $(package)_config_opts_s390x_linux = -platform linux-g++ -xplatform bitcoin-linux-g++\n \n-$(package)_config_opts_mingw32 = -no-opengl\n-$(package)_config_opts_mingw32 += -no-dbus\n-$(package)_config_opts_mingw32 += -xplatform win32-g++\n-$(package)_config_opts_mingw32 += \"QMAKE_CFLAGS = '$($(package)_cflags) $($(package)_cppflags)'\"\n-$(package)_config_opts_mingw32 += \"QMAKE_CXXFLAGS = '$($(package)_cflags) $($(package)_cppflags)'\"\n-$(package)_config_opts_mingw32 += \"QMAKE_LFLAGS = '$($(package)_ldflags)'\"\n+$(package)_config_opts_mingw32 = -xplatform win32-g++\n $(package)_config_opts_mingw32 += -device-option CROSS_COMPILE=\"$(host)-\"\n-$(package)_config_opts_mingw32 += -pch\n \n $(package)_config_opts_android = -xplatform android-clang\n $(package)_config_opts_android += -android-sdk $(ANDROID_SDK)\n@@ -160,15 +154,11 @@ $(package)_config_opts_android += -android-ndk-platform android-$(ANDROID_API_LE\n $(package)_config_opts_android += -device-option CROSS_COMPILE=\"$(host)-\"\n $(package)_config_opts_android += -egl\n $(package)_config_opts_android += -qpa xcb\n-$(package)_config_opts_android += -no-eglfs\n-$(package)_config_opts_android += -no-dbus\n $(package)_config_opts_android += -opengl es2\n $(package)_config_opts_android += -qt-freetype\n $(package)_config_opts_android += -no-fontconfig\n $(package)_config_opts_android += -L $(host_prefix)/lib\n $(package)_config_opts_android += -I $(host_prefix)/include\n-$(package)_config_opts_android += -pch\n-$(package)_config_opts_android += -no-feature-vulkan\n \n $(package)_config_opts_aarch64_android += -android-arch arm64-v8a\n $(package)_config_opts_armv7a_android += -android-arch armeabi-v7a\n@@ -178,48 +168,38 @@ endef\n \n define $(package)_fetch_cmds\n $(call fetch_file,$(package),$($(package)_download_path),$($(package)_download_file),$($(package)_file_name),$($(package)_sha256_hash)) && \\\n-$(call fetch_file,$(package),$($(package)_download_path),$($(package)_qttranslations_file_name),$($(package)_qttranslations_file_name),$($(package)_qttranslations_sha256_hash)) && \\\n-$(call fetch_file,$(package),$($(package)_download_path),$($(package)_qttools_file_name),$($(package)_qttools_file_name),$($(package)_qttools_sha256_hash))\n+$(call fetch_file,$(package),$($(package)_download_path),$($(package)_qttranslations_file_name),$($(package)_qttranslations_file_name),$($(package)_qttranslations_sha256_hash))\n endef\n \n define $(package)_extract_cmds\n   mkdir -p $($(package)_extract_dir) && \\\n   echo \"$($(package)_sha256_hash)  $($(package)_source)\" > $($(package)_extract_dir)/.$($(package)_file_name).hash && \\\n   echo \"$($(package)_qttranslations_sha256_hash)  $($(package)_source_dir)/$($(package)_qttranslations_file_name)\" >> $($(package)_extract_dir)/.$($(package)_file_name).hash && \\\n-  echo \"$($(package)_qttools_sha256_hash)  $($(package)_source_dir)/$($(package)_qttools_file_name)\" >> $($(package)_extract_dir)/.$($(package)_file_name).hash && \\\n   $(build_SHA256SUM) -c $($(package)_extract_dir)/.$($(package)_file_name).hash && \\\n   mkdir qtbase && \\\n   tar --no-same-owner --strip-components=1 -xf $($(package)_source) -C qtbase && \\\n   mkdir qttranslations && \\\n-  tar --no-same-owner --strip-components=1 -xf $($(package)_source_dir)/$($(package)_qttranslations_file_name) -C qttranslations && \\\n-  mkdir qttools && \\\n-  tar --no-same-owner --strip-components=1 -xf $($(package)_source_dir)/$($(package)_qttools_file_name) -C qttools\n+  tar --no-same-owner --strip-components=1 -xf $($(package)_source_dir)/$($(package)_qttranslations_file_name) -C qttranslations\n endef\n \n # Preprocessing steps work as follows:\n #\n # 1. Apply our patches to the extracted source. See each patch for more info.\n #\n-# 2. Point to lrelease in qttools/bin/lrelease; otherwise Qt will look for it in\n-# $(host)/native/bin/lrelease and not find it.\n+# 2. Create a macOS-Clang-Linux mkspec using our mac-qmake.conf.\n #\n-# 3. Create a macOS-Clang-Linux mkspec using our mac-qmake.conf.\n-#\n-# 4. After making a copy of the mkspec for the linux-arm-gnueabi host, named\n+# 3. After making a copy of the mkspec for the linux-arm-gnueabi host, named\n # bitcoin-linux-g++, replace instances of linux-arm-gnueabi with $(host). This\n # way we can generically support hosts like riscv64-linux-gnu, which Qt doesn't\n # ship a mkspec for. See it's usage in config_opts_* above.\n #\n-# 5. Put our C, CXX and LD FLAGS into gcc-base.conf. Only used for non-host builds.\n-#\n-# 6. Do similar for the win32-g++ mkspec.\n+# 4. Put our C, CXX and LD FLAGS into gcc-base.conf. Only used for non-host builds.\n #\n-# 7. In clang.conf, swap out clang & clang++, for our compiler + flags. See #17466.\n+# 5. In clang.conf, swap out clang & clang++, for our compiler + flags. See #17466.\n #\n-# 8. Adjust a regex in toolchain.prf, to accommodate Guix's usage of\n+# 6. Adjust a regex in toolchain.prf, to accommodate Guix's usage of\n # CROSS_LIBRARY_PATH. See #15277.\n define $(package)_preprocess_cmds\n-  patch -p1 -i $($(package)_patch_dir)/drop_lrelease_dependency.patch && \\\n   patch -p1 -i $($(package)_patch_dir)/dont_hardcode_pwd.patch && \\\n   patch -p1 -i $($(package)_patch_dir)/fix_qt_pkgconfig.patch && \\\n   patch -p1 -i $($(package)_patch_dir)/fix_no_printer.patch && \\\n@@ -231,7 +211,6 @@ define $(package)_preprocess_cmds\n   patch -p1 -i $($(package)_patch_dir)/fix_lib_paths.patch && \\\n   patch -p1 -i $($(package)_patch_dir)/qtbase-moc-ignore-gcc-macro.patch && \\\n   patch -p1 -i $($(package)_patch_dir)/fix_limits_header.patch && \\\n-  sed -i.old \"s|updateqm.commands = \\$$$$\\$$$$LRELEASE|updateqm.commands = $($(package)_extract_dir)/qttools/bin/lrelease|\" qttranslations/translations/translations.pro && \\\n   mkdir -p qtbase/mkspecs/macx-clang-linux &&\\\n   cp -f qtbase/mkspecs/macx-clang/qplatformdefs.h qtbase/mkspecs/macx-clang-linux/ &&\\\n   cp -f $($(package)_patch_dir)/mac-qmake.conf qtbase/mkspecs/macx-clang-linux/qmake.conf && \\\n@@ -253,27 +232,20 @@ define $(package)_config_cmds\n   ./configure $($(package)_config_opts) && \\\n   cd .. && \\\n   $(MAKE) -C qtbase sub-src-clean && \\\n-  qtbase/bin/qmake -o qttranslations/Makefile qttranslations/qttranslations.pro && \\\n-  qtbase/bin/qmake -o qttranslations/translations/Makefile qttranslations/translations/translations.pro && \\\n-  qtbase/bin/qmake -o qttools/src/linguist/lrelease/Makefile qttools/src/linguist/lrelease/lrelease.pro && \\\n-  qtbase/bin/qmake -o qttools/src/linguist/lupdate/Makefile qttools/src/linguist/lupdate/lupdate.pro && \\\n-  qtbase/bin/qmake -o qttools/src/linguist/lconvert/Makefile qttools/src/linguist/lconvert/lconvert.pro\n+  $(foreach lib,$($(package)_qt_libs),cd $($(package)_extract_dir)/qtbase/src/$(lib) && $(build_prefix)/bin/qmake -qtconf $($(package)_extract_dir)/qtbase/bin/qt.conf -nodepend &&) true && \\\n+  cd $($(package)_extract_dir) && \\\n+  $(build_prefix)/bin/qmake -qtconf $($(package)_extract_dir)/qtbase/bin/qt.conf -nodepend -o qttranslations/Makefile qttranslations/qttranslations.pro && \\\n+  $(build_prefix)/bin/qmake -qtconf $($(package)_extract_dir)/qtbase/bin/qt.conf -nodepend -o qttranslations/translations/Makefile qttranslations/translations/translations.pro\n endef\n \n define $(package)_build_cmds\n-  $(MAKE) -C qtbase/src $(addprefix sub-,$($(package)_qt_libs)) && \\\n-  $(MAKE) -C qttools/src/linguist/lrelease && \\\n-  $(MAKE) -C qttools/src/linguist/lupdate && \\\n-  $(MAKE) -C qttools/src/linguist/lconvert && \\\n+  $(MAKE) -C qtbase/src && \\\n   $(MAKE) -C qttranslations\n endef\n \n define $(package)_stage_cmds\n-  $(MAKE) -C qtbase/src INSTALL_ROOT=$($(package)_staging_dir) $(addsuffix -install_subtargets,$(addprefix sub-,$($(package)_qt_libs))) && \\\n-  $(MAKE) -C qttools/src/linguist/lrelease INSTALL_ROOT=$($(package)_staging_dir) install_target && \\\n-  $(MAKE) -C qttools/src/linguist/lupdate INSTALL_ROOT=$($(package)_staging_dir) install_target && \\\n-  $(MAKE) -C qttools/src/linguist/lconvert INSTALL_ROOT=$($(package)_staging_dir) install_target && \\\n-  $(MAKE) -C qttranslations INSTALL_ROOT=$($(package)_staging_dir) install_subtargets\n+  $(MAKE) INSTALL_ROOT=$($(package)_staging_dir) -C qtbase/src $(addsuffix -install_subtargets,$(addprefix sub-,$($(package)_qt_libs))) && \\\n+  $(MAKE) INSTALL_ROOT=$($(package)_staging_dir) -C qttranslations install_subtargets\n endef\n \n define $(package)_postprocess_cmds"
      },
      {
        "sha": "a74e9cb09872b9abc82542e67772208413f7284e",
        "filename": "depends/patches/native_qtbase/dont_hardcode_pwd.patch",
        "status": "added",
        "additions": 27,
        "deletions": 0,
        "changes": 27,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/ea4cdeba3a1b2824020303676e2f5322d13a588c/depends/patches/native_qtbase/dont_hardcode_pwd.patch",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/ea4cdeba3a1b2824020303676e2f5322d13a588c/depends/patches/native_qtbase/dont_hardcode_pwd.patch",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/patches/native_qtbase/dont_hardcode_pwd.patch?ref=ea4cdeba3a1b2824020303676e2f5322d13a588c",
        "patch": "@@ -0,0 +1,27 @@\n+commit 0e953866fc4672486e29e1ba6d83b4207e7b2f0b\n+Author: fanquake <fanquake@gmail.com>\n+Date:   Tue Aug 18 15:09:06 2020 +0800\n+\n+    Don't hardcode pwd path\n+\n+    Let a man use his builtins if he wants to! Also, removes the unnecessary\n+    assumption that pwd lives under /bin/pwd.\n+\n+    See #15581.\n+\n+diff --git a/qtbase/configure b/qtbase/configure\n+index 08b49a8d..faea5b55 100755\n+--- a/qtbase/configure\n++++ b/qtbase/configure\n+@@ -36,9 +36,9 @@\n+ relconf=`basename $0`\n+ # the directory of this script is the \"source tree\"\n+ relpath=`dirname $0`\n+-relpath=`(cd \"$relpath\"; /bin/pwd)`\n++relpath=`(cd \"$relpath\"; pwd)`\n+ # the current directory is the \"build tree\" or \"object tree\"\n+-outpath=`/bin/pwd`\n++outpath=`pwd`\n+\n+ WHICH=\"which\"\n+"
      },
      {
        "sha": "e4313770e5a8b9c12bbebbc8bb75b8a7585a1992",
        "filename": "depends/patches/native_qtbase/fix_limits_header.patch",
        "status": "added",
        "additions": 44,
        "deletions": 0,
        "changes": 44,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/ea4cdeba3a1b2824020303676e2f5322d13a588c/depends/patches/native_qtbase/fix_limits_header.patch",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/ea4cdeba3a1b2824020303676e2f5322d13a588c/depends/patches/native_qtbase/fix_limits_header.patch",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/patches/native_qtbase/fix_limits_header.patch?ref=ea4cdeba3a1b2824020303676e2f5322d13a588c",
        "patch": "@@ -0,0 +1,44 @@\n+Fix compiling with GCC 11\n+\n+See: https://bugreports.qt.io/browse/QTBUG-90395.\n+\n+Upstream commits:\n+ - Qt 5.15 -- unavailable as open source\n+ - Qt 6.0: b2af6332ea37e45ab230a7a5d2d278f86d961b83\n+ - Qt 6.1: 9c56d4da2ff631a8c1c30475bd792f6c86bda53c\n+\n+--- old/qtbase/src/corelib/global/qendian.h\n++++ new/qtbase/src/corelib/global/qendian.h\n+@@ -44,6 +44,8 @@\n+ #include <QtCore/qfloat16.h>\n+ #include <QtCore/qglobal.h>\n+ \n++#include <limits>\n++\n+ // include stdlib.h and hope that it defines __GLIBC__ for glibc-based systems\n+ #include <stdlib.h>\n+ #include <string.h>\n+\n+--- old/qtbase/src/corelib/tools/qbytearraymatcher.h\n++++ new/qtbase/src/corelib/tools/qbytearraymatcher.h\n+@@ -42,6 +42,8 @@\n+ \n+ #include <QtCore/qbytearray.h>\n+ \n++#include <limits>\n++\n+ QT_BEGIN_NAMESPACE\n+ \n+ \n+\n+--- old/qtbase/src/tools/moc/generator.cpp\n++++ new/qtbase/src/tools/moc/generator.cpp\n+@@ -40,6 +40,8 @@\n+ #include <QtCore/qplugin.h>\n+ #include <QtCore/qstringview.h>\n+ \n++#include <limits>\n++\n+ #include <math.h>\n+ #include <stdio.h>\n+ "
      },
      {
        "sha": "9b918af77c464278eb796f20fcf7bc67d04e3dad",
        "filename": "depends/patches/qt/drop_lrelease_dependency.patch",
        "status": "removed",
        "additions": 0,
        "deletions": 20,
        "changes": 20,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/ad6ea2f088a36bf2f2546767a1d8ed5966bd785c/depends/patches/qt/drop_lrelease_dependency.patch",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/ad6ea2f088a36bf2f2546767a1d8ed5966bd785c/depends/patches/qt/drop_lrelease_dependency.patch",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/patches/qt/drop_lrelease_dependency.patch?ref=ad6ea2f088a36bf2f2546767a1d8ed5966bd785c",
        "patch": "@@ -1,20 +0,0 @@\n-commit 67b3ed7406e1d0762188dbad2c44a06824ba0778\n-Author: fanquake <fanquake@gmail.com>\n-Date:   Tue Aug 18 15:24:01 2020 +0800\n-\n-    Drop dependency on lrelease\n-\n-    Qts buildsystem insists on using the installed lrelease, but gets\n-    confused about how to find it. Since we manually control the build\n-    order, just drop the dependency.\n-\n-    See #9469\n-\n-diff --git a/qttranslations/translations/translations.pro b/qttranslations/translations/translations.pro\n-index 694544c..eff339d 100644\n---- a/qttranslations/translations/translations.pro\n-+++ b/qttranslations/translations/translations.pro\n-@@ -107,3 +107,2 @@ updateqm.commands = $$LRELEASE ${QMAKE_FILE_IN} -qm ${QMAKE_FILE_OUT}\n- silent:updateqm.commands = @echo lrelease ${QMAKE_FILE_IN} && $$updateqm.commands\n--updateqm.depends = $$LRELEASE_EXE\n- updateqm.name = LRELEASE ${QMAKE_FILE_IN}"
      }
    ]
  }
]