[
  {
    "sha": "29d45073c969e20a36ee01c1beabace331cb8245",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyOWQ0NTA3M2M5NjllMjBhMzZlZTAxYzFiZWFiYWNlMzMxY2I4MjQ1",
    "commit": {
      "author": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2014-02-15T09:38:06Z"
      },
      "committer": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2014-02-16T08:23:08Z"
      },
      "message": "qt: Add option to (not) spend unconfirmed change\n\n- Add a wallet tab to options dialog\n- Move fee setting to wallet tab\n- Add new setting to set -nospendzeroconfchange from UI",
      "tree": {
        "sha": "ef71851f867da05dca8a76dccddf03787c0c1dc3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ef71851f867da05dca8a76dccddf03787c0c1dc3"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/29d45073c969e20a36ee01c1beabace331cb8245",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/29d45073c969e20a36ee01c1beabace331cb8245",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/29d45073c969e20a36ee01c1beabace331cb8245",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/29d45073c969e20a36ee01c1beabace331cb8245/comments",
    "author": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "05d3ded072d782036c31c1d773c0441b87de843e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/05d3ded072d782036c31c1d773c0441b87de843e",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/05d3ded072d782036c31c1d773c0441b87de843e"
      }
    ],
    "stats": {
      "total": 148,
      "additions": 101,
      "deletions": 47
    },
    "files": [
      {
        "sha": "b4a9f1f5801cc8ac92d28f1e3d08695443333ef6",
        "filename": "src/qt/forms/optionsdialog.ui",
        "status": "modified",
        "additions": 83,
        "deletions": 46,
        "changes": 129,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/29d45073c969e20a36ee01c1beabace331cb8245/src/qt/forms/optionsdialog.ui",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/29d45073c969e20a36ee01c1beabace331cb8245/src/qt/forms/optionsdialog.ui",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/forms/optionsdialog.ui?ref=29d45073c969e20a36ee01c1beabace331cb8245",
        "patch": "@@ -27,52 +27,6 @@\n        <string>&amp;Main</string>\n       </attribute>\n       <layout class=\"QVBoxLayout\" name=\"verticalLayout_Main\">\n-       <item>\n-        <widget class=\"QLabel\" name=\"transactionFeeInfoLabel\">\n-         <property name=\"text\">\n-          <string>Optional transaction fee per kB that helps make sure your transactions are processed quickly. Most transactions are 1 kB.</string>\n-         </property>\n-         <property name=\"textFormat\">\n-          <enum>Qt::PlainText</enum>\n-         </property>\n-         <property name=\"wordWrap\">\n-          <bool>true</bool>\n-         </property>\n-        </widget>\n-       </item>\n-       <item>\n-        <layout class=\"QHBoxLayout\" name=\"horizontalLayout_1_Main\">\n-         <item>\n-          <widget class=\"QLabel\" name=\"transactionFeeLabel\">\n-           <property name=\"text\">\n-            <string>Pay transaction &amp;fee</string>\n-           </property>\n-           <property name=\"textFormat\">\n-            <enum>Qt::PlainText</enum>\n-           </property>\n-           <property name=\"buddy\">\n-            <cstring>transactionFee</cstring>\n-           </property>\n-          </widget>\n-         </item>\n-         <item>\n-          <widget class=\"BitcoinAmountField\" name=\"transactionFee\"/>\n-         </item>\n-         <item>\n-          <spacer name=\"horizontalSpacer_1_Main\">\n-           <property name=\"orientation\">\n-            <enum>Qt::Horizontal</enum>\n-           </property>\n-           <property name=\"sizeHint\" stdset=\"0\">\n-            <size>\n-             <width>40</width>\n-             <height>20</height>\n-            </size>\n-           </property>\n-          </spacer>\n-         </item>\n-        </layout>\n-       </item>\n        <item>\n         <widget class=\"QCheckBox\" name=\"bitcoinAtStartup\">\n          <property name=\"toolTip\">\n@@ -194,6 +148,89 @@\n        </item>\n       </layout>\n      </widget>\n+     <widget class=\"QWidget\" name=\"tabWallet\">\n+      <attribute name=\"title\">\n+       <string>W&amp;allet</string>\n+      </attribute>\n+      <layout class=\"QVBoxLayout\" name=\"verticalLayout_Network\">\n+       <item>\n+        <widget class=\"QLabel\" name=\"transactionFeeInfoLabel\">\n+         <property name=\"text\">\n+          <string>Optional transaction fee per kB that helps make sure your transactions are processed quickly. Most transactions are 1 kB.</string>\n+         </property>\n+         <property name=\"textFormat\">\n+          <enum>Qt::PlainText</enum>\n+         </property>\n+         <property name=\"wordWrap\">\n+          <bool>true</bool>\n+         </property>\n+        </widget>\n+       </item>\n+       <item>\n+        <layout class=\"QHBoxLayout\" name=\"horizontalLayout_1_Main\">\n+         <item>\n+          <widget class=\"QLabel\" name=\"transactionFeeLabel\">\n+           <property name=\"text\">\n+            <string>Pay transaction &amp;fee</string>\n+           </property>\n+           <property name=\"textFormat\">\n+            <enum>Qt::PlainText</enum>\n+           </property>\n+           <property name=\"buddy\">\n+            <cstring>transactionFee</cstring>\n+           </property>\n+          </widget>\n+         </item>\n+         <item>\n+          <widget class=\"BitcoinAmountField\" name=\"transactionFee\"/>\n+         </item>\n+         <item>\n+          <spacer name=\"horizontalSpacer_1_Main\">\n+           <property name=\"orientation\">\n+            <enum>Qt::Horizontal</enum>\n+           </property>\n+           <property name=\"sizeHint\" stdset=\"0\">\n+            <size>\n+             <width>40</width>\n+             <height>20</height>\n+            </size>\n+           </property>\n+          </spacer>\n+         </item>\n+        </layout>\n+       </item>\n+       <item>\n+        <widget class=\"QLabel\" name=\"label\">\n+         <property name=\"text\">\n+          <string>If you disable the spending of unconfirmed change, the change from a transaction cannot be used until that transaction has at least one confirmation. This also affects how your balance is computed.</string>\n+         </property>\n+         <property name=\"wordWrap\">\n+          <bool>true</bool>\n+         </property>\n+        </widget>\n+       </item>\n+       <item>\n+        <widget class=\"QCheckBox\" name=\"spendZeroConfChange\">\n+         <property name=\"text\">\n+          <string>Spend unconfirmed change  (experts only)</string>\n+         </property>\n+        </widget>\n+       </item>\n+       <item>\n+        <spacer name=\"verticalSpacer\">\n+         <property name=\"orientation\">\n+          <enum>Qt::Vertical</enum>\n+         </property>\n+         <property name=\"sizeHint\" stdset=\"0\">\n+          <size>\n+           <width>20</width>\n+           <height>40</height>\n+          </size>\n+         </property>\n+        </spacer>\n+       </item>\n+      </layout>\n+     </widget>\n      <widget class=\"QWidget\" name=\"tabNetwork\">\n       <attribute name=\"title\">\n        <string>&amp;Network</string>"
      },
      {
        "sha": "317e1db7d3f19377f13de8c29225288a271ae713",
        "filename": "src/qt/optionsdialog.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 1,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/29d45073c969e20a36ee01c1beabace331cb8245/src/qt/optionsdialog.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/29d45073c969e20a36ee01c1beabace331cb8245/src/qt/optionsdialog.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/optionsdialog.cpp?ref=29d45073c969e20a36ee01c1beabace331cb8245",
        "patch": "@@ -148,11 +148,14 @@ void OptionsDialog::setModel(OptionsModel *model)\n void OptionsDialog::setMapper()\n {\n     /* Main */\n-    mapper->addMapping(ui->transactionFee, OptionsModel::Fee);\n     mapper->addMapping(ui->bitcoinAtStartup, OptionsModel::StartAtStartup);\n     mapper->addMapping(ui->threadsScriptVerif, OptionsModel::ThreadsScriptVerif);\n     mapper->addMapping(ui->databaseCache, OptionsModel::DatabaseCache);\n \n+    /* Wallet */\n+    mapper->addMapping(ui->transactionFee, OptionsModel::Fee);\n+    mapper->addMapping(ui->spendZeroConfChange, OptionsModel::SpendZeroConfChange);\n+\n     /* Network */\n     mapper->addMapping(ui->mapPortUpnp, OptionsModel::MapPortUPnP);\n "
      },
      {
        "sha": "f8354ef5573810a15f7c693b840f731b56dcf6b7",
        "filename": "src/qt/optionsmodel.cpp",
        "status": "modified",
        "additions": 13,
        "deletions": 0,
        "changes": 13,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/29d45073c969e20a36ee01c1beabace331cb8245/src/qt/optionsmodel.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/29d45073c969e20a36ee01c1beabace331cb8245/src/qt/optionsmodel.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/optionsmodel.cpp?ref=29d45073c969e20a36ee01c1beabace331cb8245",
        "patch": "@@ -76,6 +76,11 @@ void OptionsModel::Init()\n     nTransactionFee = settings.value(\"nTransactionFee\").toLongLong(); // if -paytxfee is set, this will be overridden later in init.cpp\n     if (mapArgs.count(\"-paytxfee\"))\n         strOverriddenByCommandLine += \"-paytxfee \";\n+\n+    if (!settings.contains(\"bSpendZeroConfChange\"))\n+        settings.setValue(\"bSpendZeroConfChange\", true);\n+    if (!SoftSetBoolArg(\"-spendzeroconfchange\", settings.value(\"bSpendZeroConfChange\").toBool()))\n+        strOverriddenByCommandLine += \"-spendzeroconfchange \";\n #endif\n \n     if (!settings.contains(\"nDatabaseCache\"))\n@@ -184,6 +189,8 @@ QVariant OptionsModel::data(const QModelIndex & index, int role) const\n             // Todo: Consider to revert back to use just nTransactionFee here, if we don't want\n             // -paytxfee to update our QSettings!\n             return settings.value(\"nTransactionFee\");\n+        case SpendZeroConfChange:\n+            return settings.value(\"bSpendZeroConfChange\");\n #endif\n         case DisplayUnit:\n             return nDisplayUnit;\n@@ -274,6 +281,12 @@ bool OptionsModel::setData(const QModelIndex & index, const QVariant & value, in\n             settings.setValue(\"nTransactionFee\", (qint64)nTransactionFee);\n             emit transactionFeeChanged(nTransactionFee);\n             break;\n+        case SpendZeroConfChange:\n+            if (settings.value(\"bSpendZeroConfChange\") != value) {\n+                settings.setValue(\"bSpendZeroConfChange\", value);\n+                setRestartRequired(true);\n+            }\n+            break;\n #endif\n         case DisplayUnit:\n             nDisplayUnit = value.toInt();"
      },
      {
        "sha": "a3487ddd2e2e36476f08bace336b418532502c5f",
        "filename": "src/qt/optionsmodel.h",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/29d45073c969e20a36ee01c1beabace331cb8245/src/qt/optionsmodel.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/29d45073c969e20a36ee01c1beabace331cb8245/src/qt/optionsmodel.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/optionsmodel.h?ref=29d45073c969e20a36ee01c1beabace331cb8245",
        "patch": "@@ -40,6 +40,7 @@ class OptionsModel : public QAbstractListModel\n         CoinControlFeatures,    // bool\n         ThreadsScriptVerif,     // int\n         DatabaseCache,          // int\n+        SpendZeroConfChange,    // bool\n         OptionIDRowCount,\n     };\n "
      }
    ]
  }
]