DrahtBot,2021-01-27 07:55:51,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #21030 (refactor: move load block thread into ChainstateManager by fanquake)\n* #19064 (refactor: Cleanup thread ctor call",https://github.com/bitcoin/bitcoin/pull/21016#issuecomment-768105658,768105658,
hebasto,2021-01-27 10:57:47,"> This also removes the last use of `boost::thread_interrupted`.\n\nConcept ACK on it.",https://github.com/bitcoin/bitcoin/pull/21016#issuecomment-768205581,768205581,
laanwj,2021-01-27 14:00:26,"> This also removes the last use of boost::thread_interrupted.\n\nConcept ACK thank youuu",https://github.com/bitcoin/bitcoin/pull/21016#issuecomment-768304385,768304385,
fanquake,2021-01-29 07:05:00,"I've pushed some changes. One thing worth nothing here is that even though the `CScheduler` is sort of written / documented as if it will have multiple threads running `serviceQueue()`, the only place we actually do that is in the scheduler tests.",https://github.com/bitcoin/bitcoin/pull/21016#issuecomment-769621824,769621824,
laanwj,2021-01-29 07:39:42,"This is a straightforward change.\nCode review ACK ~~4b45d7857c06c908d001d6b792fb85066f9ea60f~~\n\nCode review re-ACK dc8be12510c2fd5a809d9a82d2c14b464b5e5a3f\n\n",https://github.com/bitcoin/bitcoin/pull/21016#issuecomment-769636692,769636692,
MarcoFalke,2021-01-29 11:05:09,"review ACK dc8be12510c2fd5a809d9a82d2c14b464b5e5a3f üîÅ\n\n<details><summary>Show signature and timestamp</summary>\n\nSignature:\n\n```\n-----BEGIN PGP SIGNED MESSAGE-----\nHash: SHA512\n\nreview ACK dc8be12510c2fd5a809d9a82d2c14b464b5e5a3f üîÅ\n-----BEGIN PGP SIGNATURE-----\n\niQGzBAEBCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUjKMQv6A8rVfG8beOl8DAx4YpJxPMaqL2eEohWtkv4k",https://github.com/bitcoin/bitcoin/pull/21016#issuecomment-769738295,769738295,
jonatack,2021-01-29 11:39:07,"Non-expert code review ACK dc8be12510c2fd5a809d9a82d2c14b464b5e5a3f, also checked range-diff since last review and that local debug build is clean with gcc 10.2.1-6 on Debian ",https://github.com/bitcoin/bitcoin/pull/21016#issuecomment-769754314,769754314,
MarcoFalke,2021-01-30 09:22:58,"(edited OP to say ""Closes #17307"")",https://github.com/bitcoin/bitcoin/pull/21016#issuecomment-770183084,770183084,
MarcoFalke,2021-01-27 07:24:52,"It doesn't really make sense to run the scheduler without a thread, so I'd prefer to move this into the scheduler (like was done in #18710)",https://github.com/bitcoin/bitcoin/pull/21016#discussion_r565079933,565079933,src/init.cpp
jonatack,2021-01-27 14:38:37,"I'm probably missing some context so feel free to ignore: can this continue to use a lambda rather than `std::function` for possibly less compile time / run time overhead? This compiles and the tests pass for me locally.\n```diff\n-    g_scheduler = std::thread(&TraceThread<std::function<void()>>, ""scheduler"", [&] { node.scheduler->serviceQueue(); });\n+    g_scheduler = std::thread([&] { Trace",https://github.com/bitcoin/bitcoin/pull/21016#discussion_r565359744,565359744,src/init.cpp
hebasto,2021-01-27 14:58:11,@jonatack also #19064,https://github.com/bitcoin/bitcoin/pull/21016#discussion_r565375776,565375776,src/init.cpp
laanwj,2021-01-29 07:34:42,I think `m_service_queue` is a bit of a weird name for a data structure that's not a queue. `m_service_thread` maybe?,https://github.com/bitcoin/bitcoin/pull/21016#discussion_r566628112,566628112,src/scheduler.h
fanquake,2021-01-29 07:44:14,Yea. I've changed this to `m_service_thread`.,https://github.com/bitcoin/bitcoin/pull/21016#discussion_r566632055,566632055,src/scheduler.h
fanquake,2021-01-29 07:44:24,This change is now included.,https://github.com/bitcoin/bitcoin/pull/21016#discussion_r566632130,566632130,src/init.cpp
fanquake,2021-01-29 07:45:33,Made some changes that should address this.,https://github.com/bitcoin/bitcoin/pull/21016#discussion_r566632660,566632660,src/init.cpp
