[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/503959202",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-503959202",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 503959202,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwMzk1OTIwMg==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-20T09:47:30Z",
    "updated_at": "2019-08-06T03:04:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#16551](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/16551.html) (test: Test that low difficulty chain fork is rejected by MarcoFalke)\n* [#16548](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/16548.html) (Make the global flag *fDiscover* an instance variable of CConnman by mmachicao)\n* [#16324](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/16324.html) (Get cs_main out of the critical path in ProcessMessages by TheBlueMatt)\n* [#16273](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/16273.html) (refactor: Remove unused includes by practicalswift)\n* [#16224](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/16224.html) (gui: Bilingual GUI error messages by hebasto)\n* [#15759](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/15759.html) ([p2p] Add 2 outbound blocks-only connections by sdaftuar)\n* [#14046](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/14046.html) (net: Refactor message parsing (CNetMessage), adds flexibility by jonasschnelli)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/503959202/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/504496948",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-504496948",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 504496948,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwNDQ5Njk0OA==",
    "user": {
      "login": "NicolasDorier",
      "id": 3020646,
      "node_id": "MDQ6VXNlcjMwMjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3020646?u=256d78207f88d303d61b62060a309657276cf6cb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NicolasDorier",
      "html_url": "https://github.com/NicolasDorier",
      "followers_url": "https://api.github.com/users/NicolasDorier/followers",
      "following_url": "https://api.github.com/users/NicolasDorier/following{/other_user}",
      "gists_url": "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
      "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
      "repos_url": "https://api.github.com/users/NicolasDorier/repos",
      "events_url": "https://api.github.com/users/NicolasDorier/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-21T16:57:49Z",
    "updated_at": "2019-06-21T16:57:49Z",
    "author_association": "CONTRIBUTOR",
    "body": "This PR is ready to be reviewed/merged.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/504496948/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/505373320",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-505373320",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 505373320,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwNTM3MzMyMA==",
    "user": {
      "login": "NicolasDorier",
      "id": 3020646,
      "node_id": "MDQ6VXNlcjMwMjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3020646?u=256d78207f88d303d61b62060a309657276cf6cb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NicolasDorier",
      "html_url": "https://github.com/NicolasDorier",
      "followers_url": "https://api.github.com/users/NicolasDorier/followers",
      "following_url": "https://api.github.com/users/NicolasDorier/following{/other_user}",
      "gists_url": "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
      "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
      "repos_url": "https://api.github.com/users/NicolasDorier/repos",
      "events_url": "https://api.github.com/users/NicolasDorier/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-25T09:52:38Z",
    "updated_at": "2019-06-25T09:52:38Z",
    "author_association": "CONTRIBUTOR",
    "body": "Because `forcerelay` should set the permission `relay` as well, I added some tests around it.\r\nI also added a test to see if the permissions get combined correctly between whitelist and whitebind.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/505373320/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/505517875",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-505517875",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 505517875,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwNTUxNzg3NQ==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-25T16:20:41Z",
    "updated_at": "2019-06-25T16:20:41Z",
    "author_association": "MEMBER",
    "body": "Looks like the gui does not compile\r\n\r\n```\r\nqt/rpcconsole.cpp:1123:51: error: \u2018const class CNodeStats\u2019 has no member named \u2018fWhitelisted\u2019",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/505517875/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/505740060",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-505740060",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 505740060,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwNTc0MDA2MA==",
    "user": {
      "login": "NicolasDorier",
      "id": 3020646,
      "node_id": "MDQ6VXNlcjMwMjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3020646?u=256d78207f88d303d61b62060a309657276cf6cb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NicolasDorier",
      "html_url": "https://github.com/NicolasDorier",
      "followers_url": "https://api.github.com/users/NicolasDorier/followers",
      "following_url": "https://api.github.com/users/NicolasDorier/following{/other_user}",
      "gists_url": "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
      "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
      "repos_url": "https://api.github.com/users/NicolasDorier/repos",
      "events_url": "https://api.github.com/users/NicolasDorier/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-26T06:34:16Z",
    "updated_at": "2019-06-26T06:35:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "@MarcoFalke thanks, fixed.\r\n\r\nTravis fails on unrelated test `wallet_encryption`, a kick-in-the-box can effectively fix it. Is it possible to run travis again?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/505740060/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/506303964",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-506303964",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 506303964,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwNjMwMzk2NA==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-27T11:14:10Z",
    "updated_at": "2019-06-27T11:14:50Z",
    "author_association": "MEMBER",
    "body": "Concept ACK, thanks for working on this. I think un-bundling \"whitelisting\" is something long needed.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/506303964/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/506366145",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-506366145",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 506366145,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwNjM2NjE0NQ==",
    "user": {
      "login": "NicolasDorier",
      "id": 3020646,
      "node_id": "MDQ6VXNlcjMwMjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3020646?u=256d78207f88d303d61b62060a309657276cf6cb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NicolasDorier",
      "html_url": "https://github.com/NicolasDorier",
      "followers_url": "https://api.github.com/users/NicolasDorier/followers",
      "following_url": "https://api.github.com/users/NicolasDorier/following{/other_user}",
      "gists_url": "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
      "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
      "repos_url": "https://api.github.com/users/NicolasDorier/repos",
      "events_url": "https://api.github.com/users/NicolasDorier/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-27T14:19:02Z",
    "updated_at": "2019-06-27T14:19:26Z",
    "author_association": "CONTRIBUTOR",
    "body": "I refactored to follow the guidelines, making things a bit more readable as @MarcoFalke suggested.\r\nI removed some bitwise magic like @ajtowns suggested.\r\n\r\nThe only point that I did not do: I use `enum` over `enum class`. \r\nThere is no easy to read way to make flags with enum class. :(",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/506366145/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/506382488",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-506382488",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 506382488,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwNjM4MjQ4OA==",
    "user": {
      "login": "NicolasDorier",
      "id": 3020646,
      "node_id": "MDQ6VXNlcjMwMjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3020646?u=256d78207f88d303d61b62060a309657276cf6cb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NicolasDorier",
      "html_url": "https://github.com/NicolasDorier",
      "followers_url": "https://api.github.com/users/NicolasDorier/followers",
      "following_url": "https://api.github.com/users/NicolasDorier/following{/other_user}",
      "gists_url": "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
      "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
      "repos_url": "https://api.github.com/users/NicolasDorier/repos",
      "events_url": "https://api.github.com/users/NicolasDorier/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-27T14:58:33Z",
    "updated_at": "2019-06-27T14:58:33Z",
    "author_association": "CONTRIBUTOR",
    "body": "Now enforcing ForceRelay => Relay at the enum level. It makes the code more obviously correct.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/506382488/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/506579339",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-506579339",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 506579339,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwNjU3OTMzOQ==",
    "user": {
      "login": "NicolasDorier",
      "id": 3020646,
      "node_id": "MDQ6VXNlcjMwMjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3020646?u=256d78207f88d303d61b62060a309657276cf6cb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NicolasDorier",
      "html_url": "https://github.com/NicolasDorier",
      "followers_url": "https://api.github.com/users/NicolasDorier/followers",
      "following_url": "https://api.github.com/users/NicolasDorier/following{/other_user}",
      "gists_url": "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
      "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
      "repos_url": "https://api.github.com/users/NicolasDorier/repos",
      "events_url": "https://api.github.com/users/NicolasDorier/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-28T02:45:37Z",
    "updated_at": "2019-06-28T02:45:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "Ok fully addressed all the nits.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/506579339/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/506921915",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-506921915",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 506921915,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwNjkyMTkxNQ==",
    "user": {
      "login": "NicolasDorier",
      "id": 3020646,
      "node_id": "MDQ6VXNlcjMwMjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3020646?u=256d78207f88d303d61b62060a309657276cf6cb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NicolasDorier",
      "html_url": "https://github.com/NicolasDorier",
      "followers_url": "https://api.github.com/users/NicolasDorier/followers",
      "following_url": "https://api.github.com/users/NicolasDorier/following{/other_user}",
      "gists_url": "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
      "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
      "repos_url": "https://api.github.com/users/NicolasDorier/repos",
      "events_url": "https://api.github.com/users/NicolasDorier/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-29T03:14:05Z",
    "updated_at": "2019-06-29T03:14:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "btw, as a follow up PR, I may add a RPC command to change the peer's permission. I often needed that. I remember @jnewbery tried to do it a while ago for whitelisting a peer.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/506921915/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/506922586",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-506922586",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 506922586,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwNjkyMjU4Ng==",
    "user": {
      "login": "NicolasDorier",
      "id": 3020646,
      "node_id": "MDQ6VXNlcjMwMjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3020646?u=256d78207f88d303d61b62060a309657276cf6cb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NicolasDorier",
      "html_url": "https://github.com/NicolasDorier",
      "followers_url": "https://api.github.com/users/NicolasDorier/followers",
      "following_url": "https://api.github.com/users/NicolasDorier/following{/other_user}",
      "gists_url": "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
      "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
      "repos_url": "https://api.github.com/users/NicolasDorier/repos",
      "events_url": "https://api.github.com/users/NicolasDorier/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-29T03:29:08Z",
    "updated_at": "2019-06-29T03:29:08Z",
    "author_association": "CONTRIBUTOR",
    "body": "Another idea for follow up PR: allowing the use of permissions for `connect`. (both at config and RPC level)\r\nin a backward compatible way.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/506922586/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/506925516",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-506925516",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 506925516,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwNjkyNTUxNg==",
    "user": {
      "login": "NicolasDorier",
      "id": 3020646,
      "node_id": "MDQ6VXNlcjMwMjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3020646?u=256d78207f88d303d61b62060a309657276cf6cb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NicolasDorier",
      "html_url": "https://github.com/NicolasDorier",
      "followers_url": "https://api.github.com/users/NicolasDorier/followers",
      "following_url": "https://api.github.com/users/NicolasDorier/following{/other_user}",
      "gists_url": "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
      "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
      "repos_url": "https://api.github.com/users/NicolasDorier/repos",
      "events_url": "https://api.github.com/users/NicolasDorier/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-06-29T04:31:20Z",
    "updated_at": "2019-06-29T07:36:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "@ajtowns I reverted the decision of having a `IsLegacyWhitelist()` method instead of passing around the old `fWhitelisted`. Instead I renamed `fWhitelisted` to `m_legacyWhitelisted` to prevent people from using it.\r\n\r\nThe previous logic was, if the permissions granted were including `noban | mempool` then `fwhitelisted` must be true, so removing `fwhitelisted` and replacing it with a single `IsLegacyWhitelist` in `NodeStats` made sense.\r\n\r\nHowever, I thought that later on, if RPC command `connect` support permission flags, and that no flags are passed, I don't want to interprete it as `noban | mempool` permissions, and even if noban and mempool are specified, I would not want the `IsLegacyWhitelist` to return `true`.\r\n\r\nReverting from `IsLegacyWhitelisted` to `m_legacyWhitelisted` means I am sure that a peer is considered whitelisted ONLY in the narrow case of:\r\n* Inbound connection\r\n* No permissions specified in either `white{list,bind}`\r\n\r\nSo now the permission parsing code does not make assumption about which permission to set if the user did not specified any flag. (`ISIMPLICIT`)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/506925516/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/507801090",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-507801090",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 507801090,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwNzgwMTA5MA==",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-02T18:50:22Z",
    "updated_at": "2019-07-02T18:50:22Z",
    "author_association": "MEMBER",
    "body": "Big concept ACK. The whitelist logic should really be unbundled and rationalized. I'm not sold on the approach though. Adding structure to the `bitcoin.conf` file for certain options requires a bunch of custom parsing code to be added and maintained, and introduces complexity for users.\r\n\r\nOne alternative approach would be to build on the work that @ryanofsky has done here: https://github.com/bitcoin/bitcoin/pull/15935 and specify the whitelist config as json, either in the settings.json file or as a separate peers.json (or similar) file. The advantages to that approach are:\r\n\r\n- no custom parsing code needs to be reviewed/maintained, since it's all contained in the univalue library that we already use.\r\n- the json format is widely used and understood, so users don't need to learn a new config format\r\n- (with #15935), bitcoind can write to json, which means very little additional code is needed for the whitelist settings to be writable at runtime and persist across restarts (as suggested here: https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-506921915)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/507801090/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/507956796",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-507956796",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 507956796,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwNzk1Njc5Ng==",
    "user": {
      "login": "NicolasDorier",
      "id": 3020646,
      "node_id": "MDQ6VXNlcjMwMjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3020646?u=256d78207f88d303d61b62060a309657276cf6cb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NicolasDorier",
      "html_url": "https://github.com/NicolasDorier",
      "followers_url": "https://api.github.com/users/NicolasDorier/followers",
      "following_url": "https://api.github.com/users/NicolasDorier/following{/other_user}",
      "gists_url": "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
      "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
      "repos_url": "https://api.github.com/users/NicolasDorier/repos",
      "events_url": "https://api.github.com/users/NicolasDorier/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-03T06:22:32Z",
    "updated_at": "2019-07-03T11:36:21Z",
    "author_association": "CONTRIBUTOR",
    "body": "The parsing logic is contained, easy to review and widely tested. (100% code coverage)\r\n\r\n> Adding structure to the bitcoin.conf file for certain options requires a bunch of custom parsing code to be added and maintained, and introduces complexity for users.\r\n\r\nI disagree, I want to use this feature myself, and just extending the parsing code of whitebind and whitelist is the easiest way for me to use it. Having separate configuration file via JSON is more difficult.\r\n\r\n> the json format is widely used and understood, so users don't need to learn a new config format\r\n\r\nWith JSON they must know JSON and the flags. With my solution, they only need to know the flags and `,`.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/507956796/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/507958226",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-507958226",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 507958226,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwNzk1ODIyNg==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-03T06:27:59Z",
    "updated_at": "2019-07-03T06:27:59Z",
    "author_association": "MEMBER",
    "body": "I haven't thought enough about the separate config file idea, and what kind of settings ought to go where to have a strong opinion.\r\n\r\nHowever, what about this: permitting individual settings (like the whitelisting ones) to have JSON values as values? (anywhere, whether specified from bitcoin.conf or the command line). That would equally avoid custom per-option parsing logic, without spreading out what gets stored where.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/507958226/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/507999665",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-507999665",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 507999665,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwNzk5OTY2NQ==",
    "user": {
      "login": "NicolasDorier",
      "id": 3020646,
      "node_id": "MDQ6VXNlcjMwMjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3020646?u=256d78207f88d303d61b62060a309657276cf6cb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NicolasDorier",
      "html_url": "https://github.com/NicolasDorier",
      "followers_url": "https://api.github.com/users/NicolasDorier/followers",
      "following_url": "https://api.github.com/users/NicolasDorier/following{/other_user}",
      "gists_url": "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
      "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
      "repos_url": "https://api.github.com/users/NicolasDorier/repos",
      "events_url": "https://api.github.com/users/NicolasDorier/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-03T08:42:07Z",
    "updated_at": "2019-07-03T09:18:06Z",
    "author_association": "CONTRIBUTOR",
    "body": "I personally prefer the parsing method. The code is simple and does not require lot's of maintenance.\r\nAlso I prefer reading `-whitebind=bloom,noban@127.0.0.1:2727` than `-whitebind={interface:\"127.0.0.1:2727\",bloom:\"true\", noban:\"true\"}`\r\n\r\nIt is overkill to use json for a comma separated list when a dumb split saves the day.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/507999665/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/508055636",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-508055636",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 508055636,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwODA1NTYzNg==",
    "user": {
      "login": "NicolasDorier",
      "id": 3020646,
      "node_id": "MDQ6VXNlcjMwMjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3020646?u=256d78207f88d303d61b62060a309657276cf6cb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NicolasDorier",
      "html_url": "https://github.com/NicolasDorier",
      "followers_url": "https://api.github.com/users/NicolasDorier/followers",
      "following_url": "https://api.github.com/users/NicolasDorier/following{/other_user}",
      "gists_url": "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
      "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
      "repos_url": "https://api.github.com/users/NicolasDorier/repos",
      "events_url": "https://api.github.com/users/NicolasDorier/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-03T11:32:59Z",
    "updated_at": "2019-07-03T11:33:26Z",
    "author_association": "CONTRIBUTOR",
    "body": "Addressed nits of @mzumsande and @practicalswift.\r\nI added some comments on the flag parsing method.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/508055636/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/508275442",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-508275442",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 508275442,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwODI3NTQ0Mg==",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-03T22:26:51Z",
    "updated_at": "2019-07-03T22:26:51Z",
    "author_association": "MEMBER",
    "body": "I still think the configuration serialization should be designed with the longer-term goal of making this config updatable at runtime and persistent across restarts. For that, the bitcoin.conf file is not suitable (since bitcoind can't write to it), so we either:\r\n\r\n- come up with our own serialization format, and write custom code that can parse and write to that format, then test, review and maintain that code and fix the bugs and corner cases that come up.\r\n- use an existing and well-supported serialization format like JSON, yaml, toml, etc. We already have support for JSON in Bitcoin Core, so it seems the path of least resistance to use that.\r\n\r\nWe _are_ going to want to make this setting updatable at runtime, so I don't think we should use a format now that can't be written to by bitcoind without writing a bunch more code.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/508275442/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/508401612",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-508401612",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 508401612,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwODQwMTYxMg==",
    "user": {
      "login": "NicolasDorier",
      "id": 3020646,
      "node_id": "MDQ6VXNlcjMwMjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3020646?u=256d78207f88d303d61b62060a309657276cf6cb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NicolasDorier",
      "html_url": "https://github.com/NicolasDorier",
      "followers_url": "https://api.github.com/users/NicolasDorier/followers",
      "following_url": "https://api.github.com/users/NicolasDorier/following{/other_user}",
      "gists_url": "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
      "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
      "repos_url": "https://api.github.com/users/NicolasDorier/repos",
      "events_url": "https://api.github.com/users/NicolasDorier/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-04T08:57:53Z",
    "updated_at": "2019-07-04T08:59:38Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jnewbery I don't believe that the goal of having a new json object conflict with this PR.\r\n\r\nAs a user, I have no use for a long term json file for configuring permissions, it will cause me more trouble than anything over this solution, so I will not work on it. (I will need change to my dockerfiles to support putting permissions files in the right folder, and build the file via bash script, instead of just adding `-whitebind=noban,mempool,bloom@127.0.0.1:8333` to my config file)\r\n\r\nThis PR does not prevent you from later having a json file if you wish, it will just need to compute the union of permissions granted by the different methods.\r\n\r\nIt is also 100% backward compatible, so people not wanting to take advantage of the syntax of this PR can just simply ignore it.\r\n\r\nThe parsing code is too simple to be of any concern of maintainability.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/508401612/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/508466519",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-508466519",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 508466519,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwODQ2NjUxOQ==",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-04T12:33:47Z",
    "updated_at": "2019-07-04T12:33:47Z",
    "author_association": "MEMBER",
    "body": "> This PR does not prevent you from later having a json file if you wish, it will just need to compute the union of permissions granted by the different methods.\r\n> \r\n> It is also 100% backward compatible, so people not wanting to take advantage of the syntax of this PR can just simply ignore it.\r\n\r\nThis seems confusing. Having multiple ways for config to be specified leads to confusing interactions. For example, if we just take the union of permissions, then I could start bitcoind with `-whitebind=noban,mempool,bloom@127.0.0.1:8333`, then decide that 127.0.0.1:8333 doesn't need bloom permissions and disable it with an RPC call. When bitcoind restarts, then the permission reappears.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/508466519/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/508479143",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-508479143",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 508479143,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwODQ3OTE0Mw==",
    "user": {
      "login": "NicolasDorier",
      "id": 3020646,
      "node_id": "MDQ6VXNlcjMwMjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3020646?u=256d78207f88d303d61b62060a309657276cf6cb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NicolasDorier",
      "html_url": "https://github.com/NicolasDorier",
      "followers_url": "https://api.github.com/users/NicolasDorier/followers",
      "following_url": "https://api.github.com/users/NicolasDorier/following{/other_user}",
      "gists_url": "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
      "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
      "repos_url": "https://api.github.com/users/NicolasDorier/repos",
      "events_url": "https://api.github.com/users/NicolasDorier/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-04T13:16:41Z",
    "updated_at": "2019-07-04T13:16:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jnewbery most likely people will not use both at the same time. This is concern for a corner case. \r\n\r\nThis can be solved by later in two ways: \r\n* Either no runtime permission can be changed if white{bind/list} of the peer have specific permissions set.\r\n* Either the permissions set at runtime should not be persisted, leaving to the client the responsability to override peer's permission when it detects it got connected.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/508479143/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/508604844",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-508604844",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 508604844,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwODYwNDg0NA==",
    "user": {
      "login": "ajtowns",
      "id": 127186,
      "node_id": "MDQ6VXNlcjEyNzE4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajtowns",
      "html_url": "https://github.com/ajtowns",
      "followers_url": "https://api.github.com/users/ajtowns/followers",
      "following_url": "https://api.github.com/users/ajtowns/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajtowns/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
      "organizations_url": "https://api.github.com/users/ajtowns/orgs",
      "repos_url": "https://api.github.com/users/ajtowns/repos",
      "events_url": "https://api.github.com/users/ajtowns/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajtowns/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-05T01:57:33Z",
    "updated_at": "2019-07-05T01:57:33Z",
    "author_association": "CONTRIBUTOR",
    "body": "It could also be resolved by having the dynamic permissions override the static config. This is something that would need to be resolved even if both bitcoin.conf and settings.json were in json format, though.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/508604844/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/508609870",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-508609870",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 508609870,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwODYwOTg3MA==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-05T02:32:42Z",
    "updated_at": "2019-07-05T02:32:42Z",
    "author_association": "MEMBER",
    "body": "@NicolasDorier Also consider that in the future we may want to extend whitelisting with more features like bandwidth limiting, or restricting to bip150-like authenticated peers. I think keeping things extensible may be hard with a custom format like this.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/508609870/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/508626741",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-508626741",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 508626741,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwODYyNjc0MQ==",
    "user": {
      "login": "NicolasDorier",
      "id": 3020646,
      "node_id": "MDQ6VXNlcjMwMjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3020646?u=256d78207f88d303d61b62060a309657276cf6cb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NicolasDorier",
      "html_url": "https://github.com/NicolasDorier",
      "followers_url": "https://api.github.com/users/NicolasDorier/followers",
      "following_url": "https://api.github.com/users/NicolasDorier/following{/other_user}",
      "gists_url": "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
      "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
      "repos_url": "https://api.github.com/users/NicolasDorier/repos",
      "events_url": "https://api.github.com/users/NicolasDorier/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-05T04:38:29Z",
    "updated_at": "2019-07-05T04:44:09Z",
    "author_association": "CONTRIBUTOR",
    "body": "@sipa I see, sadly I don't have time to work on something of this scope.\r\n\r\nI wished to do this PR because I only want one simple thing: Allow bloom filters for whitelisted peers as bloom filter will be off by default in the next release. \r\n\r\nBTCPayServer is exposing a whitebind accessible via a (confidential) Tor3 address that other wallets like Wasabi wallet, Bisq or any wallet can connect to. \r\n\r\nI need bloom filter on this interface, as bloom filter is the best way to sync your own wallet without wasting bandwidth. Without a solution in the next release, it means I need to explicitly activate bloom filter even for non whitelisted peer, and I don't want this as it exposes well known DDoS vectors.\r\n\r\n----\r\n\r\nI think that until there is a concrete proposal with the full scope of what such JSON file will cover and its format, we should not block a feature that is useful now and that is not a maintenance burden.\r\n\r\n100% of this PR is entirely compatible with any other JSON proposal. (the code verifying the permissions does not assume it comes from my custom format)\r\n\r\nIn the case later you do such proposal, it is very easy to ignore the JSON if ever my custom format is in use so we don't have non obvious interactions.\r\n\r\nThe parsing code is not a problem to maintain, look at the code, this is nothing more than a split on `@` followed by a split on `,`. The part converting flags into string is useful in any case for both proposal.\r\n\r\nIf really you are against this PR and opt for a JSON, I will close this PR as I really don't want to spend month of bike-shedding on the format of such file in the expectation it get merged in 0.21.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/508626741/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/508629480",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-508629480",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 508629480,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwODYyOTQ4MA==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-05T04:59:44Z",
    "updated_at": "2019-07-05T05:00:08Z",
    "author_association": "MEMBER",
    "body": "I'm not suggesting you doing anything around a separate json config file, nor around any of the other future features. I just suspect it'd be much easier to just use JSON in the existing whitebind config setting rather than a custom parser, especially if we suspect it will be extended later with additional options.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/508629480/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/508664097",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-508664097",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 508664097,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwODY2NDA5Nw==",
    "user": {
      "login": "NicolasDorier",
      "id": 3020646,
      "node_id": "MDQ6VXNlcjMwMjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3020646?u=256d78207f88d303d61b62060a309657276cf6cb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NicolasDorier",
      "html_url": "https://github.com/NicolasDorier",
      "followers_url": "https://api.github.com/users/NicolasDorier/followers",
      "following_url": "https://api.github.com/users/NicolasDorier/following{/other_user}",
      "gists_url": "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
      "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
      "repos_url": "https://api.github.com/users/NicolasDorier/repos",
      "events_url": "https://api.github.com/users/NicolasDorier/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-05T07:41:51Z",
    "updated_at": "2019-07-05T07:41:51Z",
    "author_association": "CONTRIBUTOR",
    "body": "@sipa so basically you mean having `--whitebind=[noban,bloom]@127.0.0.1:8333` instead of `--whitebind=noban,bloom@127.0.01:8333` ?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/508664097/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/508666621",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-508666621",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 508666621,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwODY2NjYyMQ==",
    "user": {
      "login": "NicolasDorier",
      "id": 3020646,
      "node_id": "MDQ6VXNlcjMwMjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3020646?u=256d78207f88d303d61b62060a309657276cf6cb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NicolasDorier",
      "html_url": "https://github.com/NicolasDorier",
      "followers_url": "https://api.github.com/users/NicolasDorier/followers",
      "following_url": "https://api.github.com/users/NicolasDorier/following{/other_user}",
      "gists_url": "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
      "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
      "repos_url": "https://api.github.com/users/NicolasDorier/repos",
      "events_url": "https://api.github.com/users/NicolasDorier/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-05T07:51:00Z",
    "updated_at": "2019-07-05T07:51:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "Well not against it but I don't see the point too much.\r\n\r\n1. It will not make the code simple and more compact, it just replace a couple of split by some univalue parsing. In terms of line of code this will be exactly the same.\r\n2. Later, if you want to do another format you could consider doing it by using `$` instead of `@` as separator.\r\n\r\nThough if it is really all that is needed to get ACKs, I would do.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/508666621/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/510063422",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-510063422",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 510063422,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMDA2MzQyMg==",
    "user": {
      "login": "NicolasDorier",
      "id": 3020646,
      "node_id": "MDQ6VXNlcjMwMjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3020646?u=256d78207f88d303d61b62060a309657276cf6cb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NicolasDorier",
      "html_url": "https://github.com/NicolasDorier",
      "followers_url": "https://api.github.com/users/NicolasDorier/followers",
      "following_url": "https://api.github.com/users/NicolasDorier/following{/other_user}",
      "gists_url": "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
      "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
      "repos_url": "https://api.github.com/users/NicolasDorier/repos",
      "events_url": "https://api.github.com/users/NicolasDorier/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-10T13:35:16Z",
    "updated_at": "2019-07-10T13:35:16Z",
    "author_association": "CONTRIBUTOR",
    "body": "@sipa can you tell me more specifically what you want?\r\n\r\n* `--whitebind=[\"noban\",\"bloom\"]@127.0.0.1:8333`\r\n* `--whitebind={permissions: [\"noban\",\"bloom\"], address: \"127.0.0.1:8333\"}`\r\n* `--whiterules={rule: [{permissions: [\"noban\",\"bloom\"], bind: \"127.0.0.1:8333\"}]}`\r\n\r\n?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/510063422/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/510063926",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-510063926",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 510063926,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMDA2MzkyNg==",
    "user": {
      "login": "NicolasDorier",
      "id": 3020646,
      "node_id": "MDQ6VXNlcjMwMjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3020646?u=256d78207f88d303d61b62060a309657276cf6cb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NicolasDorier",
      "html_url": "https://github.com/NicolasDorier",
      "followers_url": "https://api.github.com/users/NicolasDorier/followers",
      "following_url": "https://api.github.com/users/NicolasDorier/following{/other_user}",
      "gists_url": "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
      "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
      "repos_url": "https://api.github.com/users/NicolasDorier/repos",
      "events_url": "https://api.github.com/users/NicolasDorier/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-10T13:36:32Z",
    "updated_at": "2019-07-10T13:36:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jnewbery please anything more specific than \"we want JSON based stuff\" would help me.\r\n\r\nJSON format whatever...",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/510063926/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/510067714",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-510067714",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 510067714,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMDA2NzcxNA==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-10T13:46:08Z",
    "updated_at": "2019-07-10T13:46:08Z",
    "author_association": "MEMBER",
    "body": "Just to add to the list of options:\r\n\r\n* `-whitebind={\"127.0.0.1:8338\" : [\"noban\",\"bloom\"] ,  \"127.0.0.2\" : []}`",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/510067714/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/510378193",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-510378193",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 510378193,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMDM3ODE5Mw==",
    "user": {
      "login": "NicolasDorier",
      "id": 3020646,
      "node_id": "MDQ6VXNlcjMwMjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3020646?u=256d78207f88d303d61b62060a309657276cf6cb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NicolasDorier",
      "html_url": "https://github.com/NicolasDorier",
      "followers_url": "https://api.github.com/users/NicolasDorier/followers",
      "following_url": "https://api.github.com/users/NicolasDorier/following{/other_user}",
      "gists_url": "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
      "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
      "repos_url": "https://api.github.com/users/NicolasDorier/repos",
      "events_url": "https://api.github.com/users/NicolasDorier/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-11T08:06:52Z",
    "updated_at": "2019-07-11T08:09:04Z",
    "author_association": "CONTRIBUTOR",
    "body": "@MarcoFalke you mean as an additional way to configure it, keeping the `noban,bloom@127.0.0.1:8338` format? I wish we keep the current format really because dynamically creating json files (like adding rules) is bash is a pain in the ass.\r\n\r\nI have the case where different process can modify the bitcoin config,  all being able to add their own whitebind (like is the case currently), editing such JSON will be a major pain over just adding `--whitebind=\"noban,bloom@127.0.0.1:8338\"`",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/510378193/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/510609068",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-510609068",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 510609068,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMDYwOTA2OA==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-11T18:50:17Z",
    "updated_at": "2019-07-11T18:51:16Z",
    "author_association": "MEMBER",
    "body": "JSON on the command line? I'm not sure. That would be a first.\r\nI feel like there's a lot of scope creep going on here. I think this PR should be focused on adding this functionality (maybe we can even have it for 0.19?), not on redefining how options are parsed. That can be discussed somewhere else.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/510609068/reactions",
      "total_count": 7,
      "+1": 2,
      "-1": 0,
      "laugh": 1,
      "hooray": 1,
      "confused": 0,
      "heart": 1,
      "rocket": 1,
      "eyes": 1
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/510831024",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-510831024",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 510831024,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMDgzMTAyNA==",
    "user": {
      "login": "NicolasDorier",
      "id": 3020646,
      "node_id": "MDQ6VXNlcjMwMjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3020646?u=256d78207f88d303d61b62060a309657276cf6cb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NicolasDorier",
      "html_url": "https://github.com/NicolasDorier",
      "followers_url": "https://api.github.com/users/NicolasDorier/followers",
      "following_url": "https://api.github.com/users/NicolasDorier/following{/other_user}",
      "gists_url": "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
      "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
      "repos_url": "https://api.github.com/users/NicolasDorier/repos",
      "events_url": "https://api.github.com/users/NicolasDorier/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-12T10:06:41Z",
    "updated_at": "2019-07-12T10:06:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "I agree, but would do anything for ACKs to get that into 0.19.0, I would clean the toilet (hell, even eat veggies) to get ACKs rather than enabling bloom filter on 0.19.0 for on btcpay installs by default.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/510831024/reactions",
      "total_count": 4,
      "+1": 0,
      "-1": 0,
      "laugh": 4,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/514742270",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-514742270",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 514742270,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxNDc0MjI3MA==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-24T18:15:40Z",
    "updated_at": "2019-07-24T18:15:40Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/514742270/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/515299426",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-515299426",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 515299426,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxNTI5OTQyNg==",
    "user": {
      "login": "NicolasDorier",
      "id": 3020646,
      "node_id": "MDQ6VXNlcjMwMjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3020646?u=256d78207f88d303d61b62060a309657276cf6cb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NicolasDorier",
      "html_url": "https://github.com/NicolasDorier",
      "followers_url": "https://api.github.com/users/NicolasDorier/followers",
      "following_url": "https://api.github.com/users/NicolasDorier/following{/other_user}",
      "gists_url": "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
      "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
      "repos_url": "https://api.github.com/users/NicolasDorier/repos",
      "events_url": "https://api.github.com/users/NicolasDorier/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-26T03:56:50Z",
    "updated_at": "2019-07-26T03:56:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "rebased",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/515299426/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/515357489",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-515357489",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 515357489,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxNTM1NzQ4OQ==",
    "user": {
      "login": "NicolasDorier",
      "id": 3020646,
      "node_id": "MDQ6VXNlcjMwMjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3020646?u=256d78207f88d303d61b62060a309657276cf6cb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NicolasDorier",
      "html_url": "https://github.com/NicolasDorier",
      "followers_url": "https://api.github.com/users/NicolasDorier/followers",
      "following_url": "https://api.github.com/users/NicolasDorier/following{/other_user}",
      "gists_url": "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
      "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
      "repos_url": "https://api.github.com/users/NicolasDorier/repos",
      "events_url": "https://api.github.com/users/NicolasDorier/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-26T08:18:21Z",
    "updated_at": "2019-07-26T08:18:21Z",
    "author_association": "CONTRIBUTOR",
    "body": "Test failing, but probably unrelated to this PR.\r\n```\r\n0 stderr bitcoind: validation.cpp:4526: void CChainState::CheckBlockIndex(const Consensus::Params &): Assertion `setBlockIndexCandidates.count(pindex)' failed. \u001b[0m\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/515357489/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/515363253",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-515363253",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 515363253,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxNTM2MzI1Mw==",
    "user": {
      "login": "mzumsande",
      "id": 48763452,
      "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
      "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mzumsande",
      "html_url": "https://github.com/mzumsande",
      "followers_url": "https://api.github.com/users/mzumsande/followers",
      "following_url": "https://api.github.com/users/mzumsande/following{/other_user}",
      "gists_url": "https://api.github.com/users/mzumsande/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
      "organizations_url": "https://api.github.com/users/mzumsande/orgs",
      "repos_url": "https://api.github.com/users/mzumsande/repos",
      "events_url": "https://api.github.com/users/mzumsande/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mzumsande/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-26T08:36:55Z",
    "updated_at": "2019-07-26T08:36:55Z",
    "author_association": "CONTRIBUTOR",
    "body": "yes, it happens in other branches too, see #16444.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/515363253/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/518669324",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-518669324",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 518669324,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxODY2OTMyNA==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-06T13:28:23Z",
    "updated_at": "2019-08-06T13:28:23Z",
    "author_association": "MEMBER",
    "body": "unsigned Approach ACK 1ad7106670344735677e958c35efa81d5d04126e",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/518669324/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/518698424",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-518698424",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 518698424,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxODY5ODQyNA==",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-06T14:38:45Z",
    "updated_at": "2019-08-06T14:38:45Z",
    "author_association": "MEMBER",
    "body": "Concept ACK. Maybe tag with 0.19 given #16152?\r\n\r\nI think the simple `noban,bloom@127.0.0.1:8338` format is good enough. The ability to offer bloom filters to selected peers seems worth the extra complexity, and it reduces confusion of what `-whitelist` currently does.\r\n\r\nI suggest that we keep the `-whitelist` argument simple, and use a future RPC for more complex rules. Such an RPC call could refuse to touch entries that are in the config file, and perhaps `-whitelist` could be deprecated eventually.\r\n\r\nThe parser looks simple enough to me (and I don't write parsers for a living).\r\n\r\nI'm not a fan of an extra config file, partially because JSON is tedious to write. If you have to use some tool to produce config files, then you might as well use the RPC.\r\n\r\nGetting a bunch of compiler warnings on macOS for the tests:\r\n```\r\nIn file included from test/net_tests.cpp:13:\r\n./net.h:324:73: warning: field 'socket' will be initialized after field 'm_permissions' [-Wreorder]\r\n        ListenSocket(SOCKET socket_, NetPermissionFlags permissions_) : socket(socket_), m_permissions(permissions_) {}\r\n                                                                        ^\r\n1 warning generated.\r\n  CXX      test/test_bitcoin-txindex_tests.o\r\n  CXX      test/test_bitcoin-txvalidation_tests.o\r\ntest/netbase_tests.cpp:379:54: warning: comparison of integers of different signs: 'std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::size_type' (aka 'unsigned long') and 'int' [-Wsign-compare]\r\n    BOOST_CHECK(error.find(\"Invalid P2P permission\") != -1);\r\n                ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ^  ~~\r\n```\r\n\r\nIn QT too:\r\n\r\n```\r\nIn file included from ./qt/bantablemodel.h:8:\r\n./net.h:324:73: warning: field 'socket' will be initialized after field 'm_permissions' [-Wreorder]\r\n        ListenSocket(SOCKET socket_, NetPermissionFlags permissions_) : socket(socket_), m_permissions(permissions_) {}\r\n                                                                        ^\r\n```\r\n\r\nI get a `Mempool sync timed out` for `wallet_listtransactions.py` line 179, which suggests something did change in the default behavior. `p2p_sendheaders.py` also failed for me during the first run at Part 5. ",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/518698424/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/519027403",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-519027403",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 519027403,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxOTAyNzQwMw==",
    "user": {
      "login": "NicolasDorier",
      "id": 3020646,
      "node_id": "MDQ6VXNlcjMwMjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3020646?u=256d78207f88d303d61b62060a309657276cf6cb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NicolasDorier",
      "html_url": "https://github.com/NicolasDorier",
      "followers_url": "https://api.github.com/users/NicolasDorier/followers",
      "following_url": "https://api.github.com/users/NicolasDorier/following{/other_user}",
      "gists_url": "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
      "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
      "repos_url": "https://api.github.com/users/NicolasDorier/repos",
      "events_url": "https://api.github.com/users/NicolasDorier/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-07T09:52:47Z",
    "updated_at": "2019-08-07T09:52:47Z",
    "author_association": "CONTRIBUTOR",
    "body": "@Sjors I will rebase, this was based on a commit where test has been broken for some reason. Will fix the warnings as well.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/519027403/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/519148694",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-519148694",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 519148694,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxOTE0ODY5NA==",
    "user": {
      "login": "NicolasDorier",
      "id": 3020646,
      "node_id": "MDQ6VXNlcjMwMjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3020646?u=256d78207f88d303d61b62060a309657276cf6cb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NicolasDorier",
      "html_url": "https://github.com/NicolasDorier",
      "followers_url": "https://api.github.com/users/NicolasDorier/followers",
      "following_url": "https://api.github.com/users/NicolasDorier/following{/other_user}",
      "gists_url": "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
      "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
      "repos_url": "https://api.github.com/users/NicolasDorier/repos",
      "events_url": "https://api.github.com/users/NicolasDorier/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-07T15:29:45Z",
    "updated_at": "2019-08-07T15:31:54Z",
    "author_association": "CONTRIBUTOR",
    "body": "Rebased, tests passing @Sjors (Warnings should be fixed)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/519148694/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/519433070",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-519433070",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 519433070,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxOTQzMzA3MA==",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-08T08:59:48Z",
    "updated_at": "2019-08-08T09:00:43Z",
    "author_association": "MEMBER",
    "body": "Almost, still get this one:\r\n\r\n```\r\nnet_permissions.cpp:28:38: warning: comparison of integers of different signs: 'const int' and 'const typename basic_string<char, char_traits<char>, allocator<char> >::size_type' (aka 'const unsigned long') [-Wsign-compare]\r\n            int len = commaSeparator == std::string::npos ? permissions.length() - readen : commaSeparator - readen;\r\n                      ~~~~~~~~~~~~~~ ^  ~~~~~~~~~~~~~~~~~\r\nnet_permissions.cpp:32:32: warning: comparison of integers of different signs: 'const int' and 'const typename basic_string<char, char_traits<char>, allocator<char> >::size_type' (aka 'const unsigned long') [-Wsign-compare]\r\n            if (commaSeparator != std::string::npos) readen++; // We read \",\"\r\n                ~~~~~~~~~~~~~~ ^  ~~~~~~~~~~~~~~~~~\r\n2 warnings generated.\r\n```\r\n\r\nThe first commit is rather large. Consider introducing `TryParsePermissionFlags` in a separate commit, and testing it directly instead of, or in addition to, indirectly via NetWhite[list/bind]Permissions. And another commit where you switch to using `NetWhite[list/bind]Permissions::TryParse`, but don't process the flags yet.\r\n\r\nThere are a bunch of existing functional tests that use `-whitelist=`, exploiting various features. Maybe add a commit that switches these tests to use the minimum set of flags they need? That provides some additional assurance that these flags work as expected. In `p2p_relay.py` where `-whitelistrelay` and `-whitelistforcerelay` are tested, those tests could be duplicated to check that equivalent flag works (with global `-whitelistrelay=0`).",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/519433070/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/519479963",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-519479963",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 519479963,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxOTQ3OTk2Mw==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-08T11:29:54Z",
    "updated_at": "2019-08-08T11:29:54Z",
    "author_association": "MEMBER",
    "body": "IMO improving the tests can be done in a follow-up PR\r\nlet's get rid of the warning though",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/519479963/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/519629194",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-519629194",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 519629194,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxOTYyOTE5NA==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-08T18:11:14Z",
    "updated_at": "2019-08-08T18:11:14Z",
    "author_association": "MEMBER",
    "body": "Agree with @laanwj. Lets switch to the new logic in tests in a follow up. I am happy to do that, but I'd rather not have this pull grow even more.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/519629194/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/520194945",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-520194945",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 520194945,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMDE5NDk0NQ==",
    "user": {
      "login": "NicolasDorier",
      "id": 3020646,
      "node_id": "MDQ6VXNlcjMwMjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3020646?u=256d78207f88d303d61b62060a309657276cf6cb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NicolasDorier",
      "html_url": "https://github.com/NicolasDorier",
      "followers_url": "https://api.github.com/users/NicolasDorier/followers",
      "following_url": "https://api.github.com/users/NicolasDorier/following{/other_user}",
      "gists_url": "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
      "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
      "repos_url": "https://api.github.com/users/NicolasDorier/repos",
      "events_url": "https://api.github.com/users/NicolasDorier/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-11T02:34:07Z",
    "updated_at": "2019-08-11T02:34:26Z",
    "author_association": "CONTRIBUTOR",
    "body": "@Sjors if you look the C++ tests I am testing it very strongly with all kind of edge cases. It does not make sense to test the parse flag in isolation as it is not used in the code that way.\r\n\r\nI should have fixed the warnings now. I am unsure though because I am developing on windows and msvc says it is good.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/520194945/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/521286681",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-521286681",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 521286681,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMTI4NjY4MQ==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-14T15:06:58Z",
    "updated_at": "2019-08-14T15:06:58Z",
    "author_association": "MEMBER",
    "body": "re-ACK c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/521286681/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/521615630",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-521615630",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 521615630,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMTYxNTYzMA==",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-15T11:53:36Z",
    "updated_at": "2019-08-15T11:53:36Z",
    "author_association": "MEMBER",
    "body": "There should be a followup to document the new syntax in `bitcoind` help (`gArgs.AddArg(\"whitelist=<IP address or network>`).",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/521615630/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/521634206",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-521634206",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 521634206,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMTYzNDIwNg==",
    "user": {
      "login": "NicolasDorier",
      "id": 3020646,
      "node_id": "MDQ6VXNlcjMwMjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3020646?u=256d78207f88d303d61b62060a309657276cf6cb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NicolasDorier",
      "html_url": "https://github.com/NicolasDorier",
      "followers_url": "https://api.github.com/users/NicolasDorier/followers",
      "following_url": "https://api.github.com/users/NicolasDorier/following{/other_user}",
      "gists_url": "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
      "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
      "repos_url": "https://api.github.com/users/NicolasDorier/repos",
      "events_url": "https://api.github.com/users/NicolasDorier/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-15T13:07:53Z",
    "updated_at": "2019-08-15T13:07:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "@Sjors I can do that, though I am unsure where is the best place for me to document properly this. I think the full description might be too long for the command line?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/521634206/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/521649350",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-521649350",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 521649350,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMTY0OTM1MA==",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-15T13:54:22Z",
    "updated_at": "2019-08-15T13:54:22Z",
    "author_association": "MEMBER",
    "body": "There are other command line arguments with multi-line explanations, so I don't think that's a huge issue:\r\n<img width=\"564\" alt=\"Schermafbeelding 2019-08-15 om 15 53 49\" src=\"https://user-images.githubusercontent.com/10217/63099195-e3c59880-bf74-11e9-8996-41ddf37dd8e9.png\">\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/521649350/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/750450829",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#issuecomment-750450829",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16248",
    "id": 750450829,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1MDQ1MDgyOQ==",
    "user": {
      "login": "amitiuttarwar",
      "id": 1500952,
      "node_id": "MDQ6VXNlcjE1MDA5NTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1500952?u=f0ef8142342bcda68fe46c952d3c653456811ed4&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/amitiuttarwar",
      "html_url": "https://github.com/amitiuttarwar",
      "followers_url": "https://api.github.com/users/amitiuttarwar/followers",
      "following_url": "https://api.github.com/users/amitiuttarwar/following{/other_user}",
      "gists_url": "https://api.github.com/users/amitiuttarwar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/amitiuttarwar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/amitiuttarwar/subscriptions",
      "organizations_url": "https://api.github.com/users/amitiuttarwar/orgs",
      "repos_url": "https://api.github.com/users/amitiuttarwar/repos",
      "events_url": "https://api.github.com/users/amitiuttarwar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/amitiuttarwar/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-23T19:57:23Z",
    "updated_at": "2020-12-23T19:57:23Z",
    "author_association": "MEMBER",
    "body": "This PR introduced the field `permissions` to the `getpeerinfo` RPC, but did not add it to the `RPCHelpMan`. I've opened #20756 to make the documentation consistent :) ",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/750450829/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/296515972",
    "pull_request_review_id": 253173054,
    "id": 296515972,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5NjUxNTk3Mg==",
    "diff_hunk": "@@ -0,0 +1,76 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2015-2018 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test p2p permission message.\n+\n+Test that permissions are correctly calculated and applied\n+\"\"\"\n+\n+from test_framework.test_node import ErrorMatch\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    connect_nodes,\n+)\n+\n+class P2PPermissionsTests(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 2\n+        self.setup_clean_chain = True\n+        self.extra_args = [[],[]]\n+\n+    def run_test(self):\n+        self.checkpermission(\n+        # relay permission added\n+        [\"-whitelist=127.0.0.1\", \"-whitelistrelay\"],\n+        [\"relay\", \"noban\", \"mempool\"],\n+        True)\n+\n+        self.checkpermission(\n+        # forcerelay permission added\n+        [\"-whitelist=127.0.0.1\", \"-whitelistforcerelay\"],\n+        [\"forcerelay\", \"noban\", \"mempool\"],\n+        True)\n+\n+        self.checkpermission(\n+        # legacy whitelistrelay should be ignored\n+        [\"-whitelist=noban,mempool@127.0.0.1\", \"-whitelistrelay\"],\n+        [\"noban\", \"mempool\"],\n+        True)\n+\n+        self.checkpermission(\n+        # legacy whitelistforcerelay should be ignored\n+        [\"-whitelist=noban,mempool@127.0.0.1\", \"-whitelistforcerelay\"],\n+        [\"noban\", \"mempool\"],\n+        True)\n+\n+        self.checkpermission(\n+        # missing mempool permission to be considered legacy whitelisted\n+        [\"-whitelist=noban@127.0.0.1\"],\n+        [\"noban\"],\n+        False)\n+\n+        self.checkpermission(\n+        # all permission added\n+        [\"-whitelist=all@127.0.0.1\"],\n+        [\"forcerelay\", \"noban\", \"mempool\", \"bloomfilter\", \"relay\"],\n+        True)\n+\n+        self.nodes[1].stop()\n+        self.nodes[1].wait_until_stopped()",
    "path": "test/functional/p2p_permissions.py",
    "position": null,
    "original_position": 61,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "5e899913bb81958e7d313d5e7def8164b4c6c6b7",
    "user": {
      "login": "AkioNak",
      "id": 24285095,
      "node_id": "MDQ6VXNlcjI0Mjg1MDk1",
      "avatar_url": "https://avatars.githubusercontent.com/u/24285095?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AkioNak",
      "html_url": "https://github.com/AkioNak",
      "followers_url": "https://api.github.com/users/AkioNak/followers",
      "following_url": "https://api.github.com/users/AkioNak/following{/other_user}",
      "gists_url": "https://api.github.com/users/AkioNak/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AkioNak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AkioNak/subscriptions",
      "organizations_url": "https://api.github.com/users/AkioNak/orgs",
      "repos_url": "https://api.github.com/users/AkioNak/repos",
      "events_url": "https://api.github.com/users/AkioNak/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AkioNak/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "nit: This 2 lines can be written as ```self.stop_node(1)``` .",
    "created_at": "2019-06-24T01:51:36Z",
    "updated_at": "2019-08-11T02:34:07Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r296515972",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/296515972"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r296515972"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/296515972/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 61,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/296552372",
    "pull_request_review_id": 253199745,
    "id": 296552372,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5NjU1MjM3Mg==",
    "diff_hunk": "@@ -0,0 +1,76 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2015-2018 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test p2p permission message.\n+\n+Test that permissions are correctly calculated and applied\n+\"\"\"\n+\n+from test_framework.test_node import ErrorMatch\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    connect_nodes,\n+)\n+\n+class P2PPermissionsTests(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 2\n+        self.setup_clean_chain = True\n+        self.extra_args = [[],[]]\n+\n+    def run_test(self):\n+        self.checkpermission(\n+        # relay permission added\n+        [\"-whitelist=127.0.0.1\", \"-whitelistrelay\"],\n+        [\"relay\", \"noban\", \"mempool\"],\n+        True)\n+\n+        self.checkpermission(\n+        # forcerelay permission added\n+        [\"-whitelist=127.0.0.1\", \"-whitelistforcerelay\"],\n+        [\"forcerelay\", \"noban\", \"mempool\"],\n+        True)\n+\n+        self.checkpermission(\n+        # legacy whitelistrelay should be ignored\n+        [\"-whitelist=noban,mempool@127.0.0.1\", \"-whitelistrelay\"],\n+        [\"noban\", \"mempool\"],\n+        True)\n+\n+        self.checkpermission(\n+        # legacy whitelistforcerelay should be ignored\n+        [\"-whitelist=noban,mempool@127.0.0.1\", \"-whitelistforcerelay\"],\n+        [\"noban\", \"mempool\"],\n+        True)\n+\n+        self.checkpermission(\n+        # missing mempool permission to be considered legacy whitelisted\n+        [\"-whitelist=noban@127.0.0.1\"],\n+        [\"noban\"],\n+        False)\n+\n+        self.checkpermission(\n+        # all permission added\n+        [\"-whitelist=all@127.0.0.1\"],\n+        [\"forcerelay\", \"noban\", \"mempool\", \"bloomfilter\", \"relay\"],\n+        True)\n+\n+        self.nodes[1].stop()\n+        self.nodes[1].wait_until_stopped()",
    "path": "test/functional/p2p_permissions.py",
    "position": null,
    "original_position": 61,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "5e899913bb81958e7d313d5e7def8164b4c6c6b7",
    "user": {
      "login": "NicolasDorier",
      "id": 3020646,
      "node_id": "MDQ6VXNlcjMwMjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3020646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NicolasDorier",
      "html_url": "https://github.com/NicolasDorier",
      "followers_url": "https://api.github.com/users/NicolasDorier/followers",
      "following_url": "https://api.github.com/users/NicolasDorier/following{/other_user}",
      "gists_url": "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
      "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
      "repos_url": "https://api.github.com/users/NicolasDorier/repos",
      "events_url": "https://api.github.com/users/NicolasDorier/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "thanks! fixed.",
    "created_at": "2019-06-24T04:58:12Z",
    "updated_at": "2019-08-11T02:34:07Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r296552372",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/296552372"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r296552372"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/296552372/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 61,
    "side": "RIGHT",
    "in_reply_to_id": 296515972
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/296992349",
    "pull_request_review_id": 253753946,
    "id": 296992349,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5Njk5MjM0OQ==",
    "diff_hunk": "@@ -0,0 +1,144 @@\n+#include <net_permissions.h>",
    "path": "src/net_permissions.cpp",
    "position": 5,
    "original_position": 1,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "f96d0524a99e3d4c7ff4220f22b20688e55c4356",
    "user": {
      "login": "ajtowns",
      "id": 127186,
      "node_id": "MDQ6VXNlcjEyNzE4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajtowns",
      "html_url": "https://github.com/ajtowns",
      "followers_url": "https://api.github.com/users/ajtowns/followers",
      "following_url": "https://api.github.com/users/ajtowns/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajtowns/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
      "organizations_url": "https://api.github.com/users/ajtowns/orgs",
      "repos_url": "https://api.github.com/users/ajtowns/repos",
      "events_url": "https://api.github.com/users/ajtowns/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajtowns/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Missing copyright headers?",
    "created_at": "2019-06-25T03:26:36Z",
    "updated_at": "2019-08-11T02:34:07Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r296992349",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/296992349"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r296992349"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/296992349/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 5,
    "original_line": 5,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/296992962",
    "pull_request_review_id": 253753946,
    "id": 296992962,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5Njk5Mjk2Mg==",
    "diff_hunk": "@@ -0,0 +1,46 @@\n+#include <string>\n+#include <vector>\n+#include <netaddress.h>\n+\n+#ifndef BITCOIN_NET_PERMISSIONS_H\n+#define BITCOIN_NET_PERMISSIONS_H\n+enum CNetPermissionFlags\n+{\n+    PF_NONE = 0,\n+    // Can query bloomfilter even if -peerbloomfilters is false\n+    PF_BLOOMFILTER = (1U << 1),\n+    // Always relay transactions, even if already in mempool or rejected from policy",
    "path": "src/net_permissions.h",
    "position": null,
    "original_position": 12,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "f96d0524a99e3d4c7ff4220f22b20688e55c4356",
    "user": {
      "login": "ajtowns",
      "id": 127186,
      "node_id": "MDQ6VXNlcjEyNzE4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajtowns",
      "html_url": "https://github.com/ajtowns",
      "followers_url": "https://api.github.com/users/ajtowns/followers",
      "following_url": "https://api.github.com/users/ajtowns/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajtowns/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
      "organizations_url": "https://api.github.com/users/ajtowns/orgs",
      "repos_url": "https://api.github.com/users/ajtowns/repos",
      "events_url": "https://api.github.com/users/ajtowns/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajtowns/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "\"relay transactions from this peer\" ? (as opposed to relay them to the peer)",
    "created_at": "2019-06-25T03:31:01Z",
    "updated_at": "2019-08-11T02:34:07Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r296992962",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/296992962"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r296992962"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/296992962/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 16,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/296997399",
    "pull_request_review_id": 253753946,
    "id": 296997399,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5Njk5NzM5OQ==",
    "diff_hunk": "@@ -657,6 +659,10 @@ class CNode\n      */\n     std::string cleanSubVer GUARDED_BY(cs_SubVer){};\n     bool m_prefer_evict{false}; // This peer is preferred for eviction.\n+    CNetPermissionFlags permissionFlags{PF_NONE};",
    "path": "src/net.h",
    "position": null,
    "original_position": 78,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "f96d0524a99e3d4c7ff4220f22b20688e55c4356",
    "user": {
      "login": "ajtowns",
      "id": 127186,
      "node_id": "MDQ6VXNlcjEyNzE4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajtowns",
      "html_url": "https://github.com/ajtowns",
      "followers_url": "https://api.github.com/users/ajtowns/followers",
      "following_url": "https://api.github.com/users/ajtowns/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajtowns/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
      "organizations_url": "https://api.github.com/users/ajtowns/orgs",
      "repos_url": "https://api.github.com/users/ajtowns/repos",
      "events_url": "https://api.github.com/users/ajtowns/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajtowns/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Should `CNode::permissionFlags` be private instead of public?",
    "created_at": "2019-06-25T04:00:12Z",
    "updated_at": "2019-08-11T02:34:07Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r296997399",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/296997399"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r296997399"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/296997399/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 664,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/296997572",
    "pull_request_review_id": 253753946,
    "id": 296997572,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5Njk5NzU3Mg==",
    "diff_hunk": "@@ -62,8 +63,7 @@ static constexpr int DUMP_PEERS_INTERVAL = 15 * 60;\n enum BindFlags {\n     BF_NONE         = 0,\n     BF_EXPLICIT     = (1U << 0),\n-    BF_REPORT_ERROR = (1U << 1),\n-    BF_WHITELIST    = (1U << 2),\n+    BF_REPORT_ERROR = (1U << 1)",
    "path": "src/net.cpp",
    "position": null,
    "original_position": 14,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "f96d0524a99e3d4c7ff4220f22b20688e55c4356",
    "user": {
      "login": "ajtowns",
      "id": 127186,
      "node_id": "MDQ6VXNlcjEyNzE4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajtowns",
      "html_url": "https://github.com/ajtowns",
      "followers_url": "https://api.github.com/users/ajtowns/followers",
      "following_url": "https://api.github.com/users/ajtowns/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajtowns/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
      "organizations_url": "https://api.github.com/users/ajtowns/orgs",
      "repos_url": "https://api.github.com/users/ajtowns/repos",
      "events_url": "https://api.github.com/users/ajtowns/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajtowns/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "No need to remove the trailing comma, it's not javascript :)",
    "created_at": "2019-06-25T04:01:21Z",
    "updated_at": "2019-08-11T02:34:07Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r296997572",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/296997572"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r296997572"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/296997572/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 66,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297000948",
    "pull_request_review_id": 253753946,
    "id": 297000948,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5NzAwMDk0OA==",
    "diff_hunk": "@@ -958,9 +976,17 @@ void CConnman::AcceptConnection(const ListenSocket& hListenSocket) {\n     uint64_t nonce = GetDeterministicRandomizer(RANDOMIZER_ID_LOCALHOSTNONCE).Write(id).Finalize();\n     CAddress addr_bind = GetBindAddress(hSocket);\n \n-    CNode* pnode = new CNode(id, nLocalServices, GetBestHeight(), hSocket, addr, CalculateKeyedNetGroup(addr), nonce, addr_bind, \"\", true);\n+    ServiceFlags nodeServices = nLocalServices;\n+    if ((permissionFlags & PF_BLOOMFILTER) != 0)\n+    {\n+        nodeServices = static_cast<ServiceFlags>(nodeServices | NODE_BLOOM);\n+    }\n+    CNode* pnode = new CNode(id, nodeServices, GetBestHeight(), hSocket, addr, CalculateKeyedNetGroup(addr), nonce, addr_bind, \"\", true);\n     pnode->AddRef();\n-    pnode->fWhitelisted = whitelisted;\n+    pnode->permissionFlags = permissionFlags;\n+    // If the permission flags are a superset of the default flags, then we have the expected\n+    // behavior of the old fWhitelisted\n+    pnode->fWhitelisted = pnode->HasPermission(PF_DEFAULT);",
    "path": "src/net.cpp",
    "position": null,
    "original_position": 95,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "f96d0524a99e3d4c7ff4220f22b20688e55c4356",
    "user": {
      "login": "ajtowns",
      "id": 127186,
      "node_id": "MDQ6VXNlcjEyNzE4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajtowns",
      "html_url": "https://github.com/ajtowns",
      "followers_url": "https://api.github.com/users/ajtowns/followers",
      "following_url": "https://api.github.com/users/ajtowns/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajtowns/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
      "organizations_url": "https://api.github.com/users/ajtowns/orgs",
      "repos_url": "https://api.github.com/users/ajtowns/repos",
      "events_url": "https://api.github.com/users/ajtowns/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajtowns/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Could drop `fWhiltelisted` from `CNode` and replace it in `CNodeStats` with \r\n\r\n    bool IsWhitelisted() const { return (permissionFlags & PF_DEFAULT) == PF_DEFAULT; }\r\n\r\n",
    "created_at": "2019-06-25T04:24:53Z",
    "updated_at": "2019-08-11T02:34:07Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r297000948",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297000948"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r297000948"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297000948/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 995,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297002511",
    "pull_request_review_id": 253753946,
    "id": 297002511,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5NzAwMjUxMQ==",
    "diff_hunk": "@@ -184,6 +185,11 @@ static UniValue getpeerinfo(const JSONRPCRequest& request)\n             obj.pushKV(\"inflight\", heights);\n         }\n         obj.pushKV(\"whitelisted\", stats.fWhitelisted);\n+        UniValue permissions(UniValue::VARR);\n+        for (const auto permission : CNetPermissions::ToStrings(stats.permissionFlags)) {",
    "path": "src/rpc/net.cpp",
    "position": null,
    "original_position": 13,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "f96d0524a99e3d4c7ff4220f22b20688e55c4356",
    "user": {
      "login": "ajtowns",
      "id": 127186,
      "node_id": "MDQ6VXNlcjEyNzE4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajtowns",
      "html_url": "https://github.com/ajtowns",
      "followers_url": "https://api.github.com/users/ajtowns/followers",
      "following_url": "https://api.github.com/users/ajtowns/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajtowns/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
      "organizations_url": "https://api.github.com/users/ajtowns/orgs",
      "repos_url": "https://api.github.com/users/ajtowns/repos",
      "events_url": "https://api.github.com/users/ajtowns/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajtowns/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Should be `const auto&` (or `const std::string&`) I think",
    "created_at": "2019-06-25T04:34:30Z",
    "updated_at": "2019-08-11T02:34:07Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r297002511",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297002511"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r297002511"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297002511/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 189,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297003487",
    "pull_request_review_id": 253753946,
    "id": 297003487,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5NzAwMzQ4Nw==",
    "diff_hunk": "@@ -900,7 +904,21 @@ void CConnman::AcceptConnection(const ListenSocket& hListenSocket) {\n         }\n     }\n \n-    bool whitelisted = hListenSocket.whitelisted || IsWhitelistedRange(addr);\n+    CNetPermissionFlags permissionFlags = hListenSocket.permissions;\n+    permissionFlags = static_cast<CNetPermissionFlags>(permissionFlags | GetWhitelistPermissionFlags(addr));\n+    bool noban = (permissionFlags & CNetPermissionFlags::PF_NOBAN) != 0;\n+    bool allowLegacy = (permissionFlags & CNetPermissionFlags::PF_ISDEFAULT) != 0;",
    "path": "src/net.cpp",
    "position": null,
    "original_position": 55,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "f96d0524a99e3d4c7ff4220f22b20688e55c4356",
    "user": {
      "login": "ajtowns",
      "id": 127186,
      "node_id": "MDQ6VXNlcjEyNzE4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajtowns",
      "html_url": "https://github.com/ajtowns",
      "followers_url": "https://api.github.com/users/ajtowns/followers",
      "following_url": "https://api.github.com/users/ajtowns/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajtowns/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
      "organizations_url": "https://api.github.com/users/ajtowns/orgs",
      "repos_url": "https://api.github.com/users/ajtowns/repos",
      "events_url": "https://api.github.com/users/ajtowns/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajtowns/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Is the logic there right? `allowLegacy` is true if either `hListenSocket` has default whitelist perms **or** the addr has default whitelist perms. Shouldn't it be false if `hListenSocket` has default whitelist perms (due to whitebind) but addr has whitelist perms other than default (ie, not `PF_NONE` but not `PF_ISDEFAULT` either)?",
    "created_at": "2019-06-25T04:41:32Z",
    "updated_at": "2019-08-11T02:34:07Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r297003487",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297003487"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r297003487"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297003487/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 910,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297006775",
    "pull_request_review_id": 253753946,
    "id": 297006775,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5NzAwNjc3NQ==",
    "diff_hunk": "@@ -900,7 +904,21 @@ void CConnman::AcceptConnection(const ListenSocket& hListenSocket) {\n         }\n     }\n \n-    bool whitelisted = hListenSocket.whitelisted || IsWhitelistedRange(addr);\n+    CNetPermissionFlags permissionFlags = hListenSocket.permissions;\n+    permissionFlags = static_cast<CNetPermissionFlags>(permissionFlags | GetWhitelistPermissionFlags(addr));",
    "path": "src/net.cpp",
    "position": null,
    "original_position": 53,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "f96d0524a99e3d4c7ff4220f22b20688e55c4356",
    "user": {
      "login": "ajtowns",
      "id": 127186,
      "node_id": "MDQ6VXNlcjEyNzE4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajtowns",
      "html_url": "https://github.com/ajtowns",
      "followers_url": "https://api.github.com/users/ajtowns/followers",
      "following_url": "https://api.github.com/users/ajtowns/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajtowns/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
      "organizations_url": "https://api.github.com/users/ajtowns/orgs",
      "repos_url": "https://api.github.com/users/ajtowns/repos",
      "events_url": "https://api.github.com/users/ajtowns/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajtowns/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I think adding:\r\n\r\n    inline bool HasNetPermissionFlag(CNetPermissionFlags flags, CNetPermissionFlags f)\r\n    {\r\n        return (flags & f) == f;\r\n    }\r\n    inline void AddNetPermissionFlag(CNetPermissionFlags& flags, CNetPermissionFlags f)\r\n    {\r\n        flags = static_cast<CNetPermissionFlags>(flags | f);\r\n    }\r\n    inline void ClearNetPermissionFlag(CNetPermissionFlags& flags, CNetPermissionFlags f)\r\n    {\r\n        flags = static_cast<CNetPermissionFlags>(flags | ~f);\r\n    }\r\n\r\nmakes using the NetPermFlags a bit clearer fwiw.",
    "created_at": "2019-06-25T05:03:32Z",
    "updated_at": "2019-08-11T02:34:07Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r297006775",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297006775"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r297006775"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297006775/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 907,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297012742",
    "pull_request_review_id": 253778856,
    "id": 297012742,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5NzAxMjc0Mg==",
    "diff_hunk": "@@ -900,7 +904,21 @@ void CConnman::AcceptConnection(const ListenSocket& hListenSocket) {\n         }\n     }\n \n-    bool whitelisted = hListenSocket.whitelisted || IsWhitelistedRange(addr);\n+    CNetPermissionFlags permissionFlags = hListenSocket.permissions;\n+    permissionFlags = static_cast<CNetPermissionFlags>(permissionFlags | GetWhitelistPermissionFlags(addr));\n+    bool noban = (permissionFlags & CNetPermissionFlags::PF_NOBAN) != 0;\n+    bool allowLegacy = (permissionFlags & CNetPermissionFlags::PF_ISDEFAULT) != 0;",
    "path": "src/net.cpp",
    "position": null,
    "original_position": 55,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "f96d0524a99e3d4c7ff4220f22b20688e55c4356",
    "user": {
      "login": "NicolasDorier",
      "id": 3020646,
      "node_id": "MDQ6VXNlcjMwMjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3020646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NicolasDorier",
      "html_url": "https://github.com/NicolasDorier",
      "followers_url": "https://api.github.com/users/NicolasDorier/followers",
      "following_url": "https://api.github.com/users/NicolasDorier/following{/other_user}",
      "gists_url": "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
      "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
      "repos_url": "https://api.github.com/users/NicolasDorier/repos",
      "events_url": "https://api.github.com/users/NicolasDorier/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "So `PF_ISDEFAULT` in this case means that either `whitebind` or `whitelist` does not use `@` syntax to define specific permissions. (`PF_ISDEFAULT` does not mean that the default perm, contrary to `PF_DEFAULT`, are being used, it just mean that we want to keep legacy behavior. I think I should rename this flag, this is confusing)\r\n\r\nTo keep backward compatibility if either of them use the old syntax, you want to take into account `-whiterelay` and `-whiteforcerelay`. I think the logic is right.",
    "created_at": "2019-06-25T05:36:49Z",
    "updated_at": "2019-08-11T02:34:07Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r297012742",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297012742"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r297012742"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297012742/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 910,
    "side": "RIGHT",
    "in_reply_to_id": 297003487
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297014071",
    "pull_request_review_id": 253780411,
    "id": 297014071,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5NzAxNDA3MQ==",
    "diff_hunk": "@@ -657,6 +659,10 @@ class CNode\n      */\n     std::string cleanSubVer GUARDED_BY(cs_SubVer){};\n     bool m_prefer_evict{false}; // This peer is preferred for eviction.\n+    CNetPermissionFlags permissionFlags{PF_NONE};",
    "path": "src/net.h",
    "position": null,
    "original_position": 78,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "f96d0524a99e3d4c7ff4220f22b20688e55c4356",
    "user": {
      "login": "NicolasDorier",
      "id": 3020646,
      "node_id": "MDQ6VXNlcjMwMjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3020646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NicolasDorier",
      "html_url": "https://github.com/NicolasDorier",
      "followers_url": "https://api.github.com/users/NicolasDorier/followers",
      "following_url": "https://api.github.com/users/NicolasDorier/following{/other_user}",
      "gists_url": "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
      "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
      "repos_url": "https://api.github.com/users/NicolasDorier/repos",
      "events_url": "https://api.github.com/users/NicolasDorier/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Actually we can't because we are affecting it from outside of the function. You think we should add the flag as a parameter to the ctor?",
    "created_at": "2019-06-25T05:43:24Z",
    "updated_at": "2019-08-11T02:34:07Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r297014071",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297014071"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r297014071"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297014071/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 664,
    "side": "RIGHT",
    "in_reply_to_id": 296997399
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297016800",
    "pull_request_review_id": 253783777,
    "id": 297016800,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5NzAxNjgwMA==",
    "diff_hunk": "@@ -900,7 +904,21 @@ void CConnman::AcceptConnection(const ListenSocket& hListenSocket) {\n         }\n     }\n \n-    bool whitelisted = hListenSocket.whitelisted || IsWhitelistedRange(addr);\n+    CNetPermissionFlags permissionFlags = hListenSocket.permissions;\n+    permissionFlags = static_cast<CNetPermissionFlags>(permissionFlags | GetWhitelistPermissionFlags(addr));\n+    bool noban = (permissionFlags & CNetPermissionFlags::PF_NOBAN) != 0;\n+    bool allowLegacy = (permissionFlags & CNetPermissionFlags::PF_ISDEFAULT) != 0;",
    "path": "src/net.cpp",
    "position": null,
    "original_position": 55,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "f96d0524a99e3d4c7ff4220f22b20688e55c4356",
    "user": {
      "login": "NicolasDorier",
      "id": 3020646,
      "node_id": "MDQ6VXNlcjMwMjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3020646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NicolasDorier",
      "html_url": "https://github.com/NicolasDorier",
      "followers_url": "https://api.github.com/users/NicolasDorier/followers",
      "following_url": "https://api.github.com/users/NicolasDorier/following{/other_user}",
      "gists_url": "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
      "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
      "repos_url": "https://api.github.com/users/NicolasDorier/repos",
      "events_url": "https://api.github.com/users/NicolasDorier/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Will rename `PF_ISDEFAULT` to `PF_ISIMPLICIT`",
    "created_at": "2019-06-25T05:56:43Z",
    "updated_at": "2019-08-11T02:34:07Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r297016800",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297016800"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r297016800"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297016800/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 910,
    "side": "RIGHT",
    "in_reply_to_id": 297003487
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297018382",
    "pull_request_review_id": 253785546,
    "id": 297018382,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5NzAxODM4Mg==",
    "diff_hunk": "@@ -958,9 +976,17 @@ void CConnman::AcceptConnection(const ListenSocket& hListenSocket) {\n     uint64_t nonce = GetDeterministicRandomizer(RANDOMIZER_ID_LOCALHOSTNONCE).Write(id).Finalize();\n     CAddress addr_bind = GetBindAddress(hSocket);\n \n-    CNode* pnode = new CNode(id, nLocalServices, GetBestHeight(), hSocket, addr, CalculateKeyedNetGroup(addr), nonce, addr_bind, \"\", true);\n+    ServiceFlags nodeServices = nLocalServices;\n+    if ((permissionFlags & PF_BLOOMFILTER) != 0)\n+    {\n+        nodeServices = static_cast<ServiceFlags>(nodeServices | NODE_BLOOM);\n+    }\n+    CNode* pnode = new CNode(id, nodeServices, GetBestHeight(), hSocket, addr, CalculateKeyedNetGroup(addr), nonce, addr_bind, \"\", true);\n     pnode->AddRef();\n-    pnode->fWhitelisted = whitelisted;\n+    pnode->permissionFlags = permissionFlags;\n+    // If the permission flags are a superset of the default flags, then we have the expected\n+    // behavior of the old fWhitelisted\n+    pnode->fWhitelisted = pnode->HasPermission(PF_DEFAULT);",
    "path": "src/net.cpp",
    "position": null,
    "original_position": 95,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "f96d0524a99e3d4c7ff4220f22b20688e55c4356",
    "user": {
      "login": "NicolasDorier",
      "id": 3020646,
      "node_id": "MDQ6VXNlcjMwMjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3020646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NicolasDorier",
      "html_url": "https://github.com/NicolasDorier",
      "followers_url": "https://api.github.com/users/NicolasDorier/followers",
      "following_url": "https://api.github.com/users/NicolasDorier/following{/other_user}",
      "gists_url": "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
      "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
      "repos_url": "https://api.github.com/users/NicolasDorier/repos",
      "events_url": "https://api.github.com/users/NicolasDorier/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I don't think it should be replaced. I think it should be completely removed when we decide to not put the flag in getpeerinfo.",
    "created_at": "2019-06-25T06:03:34Z",
    "updated_at": "2019-08-11T02:34:07Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r297018382",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297018382"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r297018382"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297018382/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 995,
    "side": "RIGHT",
    "in_reply_to_id": 297000948
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297029169",
    "pull_request_review_id": 253798899,
    "id": 297029169,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5NzAyOTE2OQ==",
    "diff_hunk": "@@ -958,9 +976,17 @@ void CConnman::AcceptConnection(const ListenSocket& hListenSocket) {\n     uint64_t nonce = GetDeterministicRandomizer(RANDOMIZER_ID_LOCALHOSTNONCE).Write(id).Finalize();\n     CAddress addr_bind = GetBindAddress(hSocket);\n \n-    CNode* pnode = new CNode(id, nLocalServices, GetBestHeight(), hSocket, addr, CalculateKeyedNetGroup(addr), nonce, addr_bind, \"\", true);\n+    ServiceFlags nodeServices = nLocalServices;\n+    if ((permissionFlags & PF_BLOOMFILTER) != 0)\n+    {\n+        nodeServices = static_cast<ServiceFlags>(nodeServices | NODE_BLOOM);\n+    }\n+    CNode* pnode = new CNode(id, nodeServices, GetBestHeight(), hSocket, addr, CalculateKeyedNetGroup(addr), nonce, addr_bind, \"\", true);\n     pnode->AddRef();\n-    pnode->fWhitelisted = whitelisted;\n+    pnode->permissionFlags = permissionFlags;\n+    // If the permission flags are a superset of the default flags, then we have the expected\n+    // behavior of the old fWhitelisted\n+    pnode->fWhitelisted = pnode->HasPermission(PF_DEFAULT);",
    "path": "src/net.cpp",
    "position": null,
    "original_position": 95,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "f96d0524a99e3d4c7ff4220f22b20688e55c4356",
    "user": {
      "login": "ajtowns",
      "id": 127186,
      "node_id": "MDQ6VXNlcjEyNzE4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajtowns",
      "html_url": "https://github.com/ajtowns",
      "followers_url": "https://api.github.com/users/ajtowns/followers",
      "following_url": "https://api.github.com/users/ajtowns/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajtowns/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
      "organizations_url": "https://api.github.com/users/ajtowns/orgs",
      "repos_url": "https://api.github.com/users/ajtowns/repos",
      "events_url": "https://api.github.com/users/ajtowns/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajtowns/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Well, could just put the logic in directly in `getpeerinfo` too -- it's also in `RPCConsole::updateNodeDetail` at present. If you're redoing all the logic to not use fWhitelist, maybe it already makes sense to drop it from the getpeerinfo though?",
    "created_at": "2019-06-25T06:46:25Z",
    "updated_at": "2019-08-11T02:34:07Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r297029169",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297029169"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r297029169"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297029169/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 995,
    "side": "RIGHT",
    "in_reply_to_id": 297000948
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297029958",
    "pull_request_review_id": 253799876,
    "id": 297029958,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5NzAyOTk1OA==",
    "diff_hunk": "@@ -657,6 +659,10 @@ class CNode\n      */\n     std::string cleanSubVer GUARDED_BY(cs_SubVer){};\n     bool m_prefer_evict{false}; // This peer is preferred for eviction.\n+    CNetPermissionFlags permissionFlags{PF_NONE};",
    "path": "src/net.h",
    "position": null,
    "original_position": 78,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "f96d0524a99e3d4c7ff4220f22b20688e55c4356",
    "user": {
      "login": "ajtowns",
      "id": 127186,
      "node_id": "MDQ6VXNlcjEyNzE4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajtowns",
      "html_url": "https://github.com/ajtowns",
      "followers_url": "https://api.github.com/users/ajtowns/followers",
      "following_url": "https://api.github.com/users/ajtowns/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajtowns/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
      "organizations_url": "https://api.github.com/users/ajtowns/orgs",
      "repos_url": "https://api.github.com/users/ajtowns/repos",
      "events_url": "https://api.github.com/users/ajtowns/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajtowns/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I tried:\r\n\r\n         bool m_prefer_evict{false}; // This peer is preferred for eviction.\r\n    +private:\r\n         CNetPermissionFlags permissionFlags{PF_NONE};\r\n    +public:\r\n         bool HasPermission(CNetPermissionFlags permission) const {\r\n\r\nand it compiled fine for me? `CConnman` is a friend class already, so it's functions can still play with it.",
    "created_at": "2019-06-25T06:49:27Z",
    "updated_at": "2019-08-11T02:34:07Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r297029958",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297029958"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r297029958"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297029958/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 664,
    "side": "RIGHT",
    "in_reply_to_id": 296997399
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297035122",
    "pull_request_review_id": 253806323,
    "id": 297035122,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5NzAzNTEyMg==",
    "diff_hunk": "@@ -900,7 +904,21 @@ void CConnman::AcceptConnection(const ListenSocket& hListenSocket) {\n         }\n     }\n \n-    bool whitelisted = hListenSocket.whitelisted || IsWhitelistedRange(addr);\n+    CNetPermissionFlags permissionFlags = hListenSocket.permissions;\n+    permissionFlags = static_cast<CNetPermissionFlags>(permissionFlags | GetWhitelistPermissionFlags(addr));",
    "path": "src/net.cpp",
    "position": null,
    "original_position": 53,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "f96d0524a99e3d4c7ff4220f22b20688e55c4356",
    "user": {
      "login": "NicolasDorier",
      "id": 3020646,
      "node_id": "MDQ6VXNlcjMwMjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3020646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NicolasDorier",
      "html_url": "https://github.com/NicolasDorier",
      "followers_url": "https://api.github.com/users/NicolasDorier/followers",
      "following_url": "https://api.github.com/users/NicolasDorier/following{/other_user}",
      "gists_url": "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
      "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
      "repos_url": "https://api.github.com/users/NicolasDorier/repos",
      "events_url": "https://api.github.com/users/NicolasDorier/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Not against it, but wouldn't it better to have a templated version somewhere else?\r\n\r\nWhere could I put such utility function?",
    "created_at": "2019-06-25T07:06:15Z",
    "updated_at": "2019-08-11T02:34:07Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r297035122",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297035122"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r297035122"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297035122/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 907,
    "side": "RIGHT",
    "in_reply_to_id": 297006775
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297043433",
    "pull_request_review_id": 253816889,
    "id": 297043433,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5NzA0MzQzMw==",
    "diff_hunk": "@@ -900,7 +904,21 @@ void CConnman::AcceptConnection(const ListenSocket& hListenSocket) {\n         }\n     }\n \n-    bool whitelisted = hListenSocket.whitelisted || IsWhitelistedRange(addr);\n+    CNetPermissionFlags permissionFlags = hListenSocket.permissions;\n+    permissionFlags = static_cast<CNetPermissionFlags>(permissionFlags | GetWhitelistPermissionFlags(addr));",
    "path": "src/net.cpp",
    "position": null,
    "original_position": 53,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "f96d0524a99e3d4c7ff4220f22b20688e55c4356",
    "user": {
      "login": "ajtowns",
      "id": 127186,
      "node_id": "MDQ6VXNlcjEyNzE4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajtowns",
      "html_url": "https://github.com/ajtowns",
      "followers_url": "https://api.github.com/users/ajtowns/followers",
      "following_url": "https://api.github.com/users/ajtowns/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajtowns/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
      "organizations_url": "https://api.github.com/users/ajtowns/orgs",
      "repos_url": "https://api.github.com/users/ajtowns/repos",
      "events_url": "https://api.github.com/users/ajtowns/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajtowns/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Or template the bitwise ops directly, maybe -- http://blog.bitwigglers.org/using-enum-classes-as-type-safe-bitmasks/ ? Doesn't seem like there's an existing header file that would fit into to me.",
    "created_at": "2019-06-25T07:30:50Z",
    "updated_at": "2019-08-11T02:34:07Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r297043433",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297043433"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r297043433"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297043433/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 907,
    "side": "RIGHT",
    "in_reply_to_id": 297006775
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297102028",
    "pull_request_review_id": 253892626,
    "id": 297102028,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5NzEwMjAyOA==",
    "diff_hunk": "@@ -900,7 +904,21 @@ void CConnman::AcceptConnection(const ListenSocket& hListenSocket) {\n         }\n     }\n \n-    bool whitelisted = hListenSocket.whitelisted || IsWhitelistedRange(addr);\n+    CNetPermissionFlags permissionFlags = hListenSocket.permissions;\n+    permissionFlags = static_cast<CNetPermissionFlags>(permissionFlags | GetWhitelistPermissionFlags(addr));",
    "path": "src/net.cpp",
    "position": null,
    "original_position": 53,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "f96d0524a99e3d4c7ff4220f22b20688e55c4356",
    "user": {
      "login": "NicolasDorier",
      "id": 3020646,
      "node_id": "MDQ6VXNlcjMwMjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3020646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NicolasDorier",
      "html_url": "https://github.com/NicolasDorier",
      "followers_url": "https://api.github.com/users/NicolasDorier/followers",
      "following_url": "https://api.github.com/users/NicolasDorier/following{/other_user}",
      "gists_url": "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
      "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
      "repos_url": "https://api.github.com/users/NicolasDorier/repos",
      "events_url": "https://api.github.com/users/NicolasDorier/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "It seems to me such change should be better done globally across the project separately, this is not trivial to review.",
    "created_at": "2019-06-25T09:50:04Z",
    "updated_at": "2019-08-11T02:34:07Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r297102028",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297102028"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r297102028"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297102028/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 907,
    "side": "RIGHT",
    "in_reply_to_id": 297006775
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297106427",
    "pull_request_review_id": 253898305,
    "id": 297106427,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5NzEwNjQyNw==",
    "diff_hunk": "@@ -958,9 +976,17 @@ void CConnman::AcceptConnection(const ListenSocket& hListenSocket) {\n     uint64_t nonce = GetDeterministicRandomizer(RANDOMIZER_ID_LOCALHOSTNONCE).Write(id).Finalize();\n     CAddress addr_bind = GetBindAddress(hSocket);\n \n-    CNode* pnode = new CNode(id, nLocalServices, GetBestHeight(), hSocket, addr, CalculateKeyedNetGroup(addr), nonce, addr_bind, \"\", true);\n+    ServiceFlags nodeServices = nLocalServices;\n+    if ((permissionFlags & PF_BLOOMFILTER) != 0)\n+    {\n+        nodeServices = static_cast<ServiceFlags>(nodeServices | NODE_BLOOM);\n+    }\n+    CNode* pnode = new CNode(id, nodeServices, GetBestHeight(), hSocket, addr, CalculateKeyedNetGroup(addr), nonce, addr_bind, \"\", true);\n     pnode->AddRef();\n-    pnode->fWhitelisted = whitelisted;\n+    pnode->permissionFlags = permissionFlags;\n+    // If the permission flags are a superset of the default flags, then we have the expected\n+    // behavior of the old fWhitelisted\n+    pnode->fWhitelisted = pnode->HasPermission(PF_DEFAULT);",
    "path": "src/net.cpp",
    "position": null,
    "original_position": 95,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "f96d0524a99e3d4c7ff4220f22b20688e55c4356",
    "user": {
      "login": "NicolasDorier",
      "id": 3020646,
      "node_id": "MDQ6VXNlcjMwMjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3020646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NicolasDorier",
      "html_url": "https://github.com/NicolasDorier",
      "followers_url": "https://api.github.com/users/NicolasDorier/followers",
      "following_url": "https://api.github.com/users/NicolasDorier/following{/other_user}",
      "gists_url": "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
      "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
      "repos_url": "https://api.github.com/users/NicolasDorier/repos",
      "events_url": "https://api.github.com/users/NicolasDorier/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "@ajtowns good point. I don't know if it should be dropped, I expect lot's of people depending on it. But you are right, no need to pass around the fWhitelisted and I can move that in getpeerinfo.",
    "created_at": "2019-06-25T10:00:03Z",
    "updated_at": "2019-08-11T02:34:07Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r297106427",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297106427"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r297106427"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297106427/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 995,
    "side": "RIGHT",
    "in_reply_to_id": 297000948
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297147319",
    "pull_request_review_id": 253950954,
    "id": 297147319,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5NzE0NzMxOQ==",
    "diff_hunk": "@@ -900,7 +904,21 @@ void CConnman::AcceptConnection(const ListenSocket& hListenSocket) {\n         }\n     }\n \n-    bool whitelisted = hListenSocket.whitelisted || IsWhitelistedRange(addr);\n+    CNetPermissionFlags permissionFlags = hListenSocket.permissions;\n+    permissionFlags = static_cast<CNetPermissionFlags>(permissionFlags | GetWhitelistPermissionFlags(addr));",
    "path": "src/net.cpp",
    "position": null,
    "original_position": 53,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "f96d0524a99e3d4c7ff4220f22b20688e55c4356",
    "user": {
      "login": "ajtowns",
      "id": 127186,
      "node_id": "MDQ6VXNlcjEyNzE4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajtowns",
      "html_url": "https://github.com/ajtowns",
      "followers_url": "https://api.github.com/users/ajtowns/followers",
      "following_url": "https://api.github.com/users/ajtowns/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajtowns/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
      "organizations_url": "https://api.github.com/users/ajtowns/orgs",
      "repos_url": "https://api.github.com/users/ajtowns/repos",
      "events_url": "https://api.github.com/users/ajtowns/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajtowns/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I don't think there's much call for it elsewhere, there's just a couple of `static_cast` for SIGHASH in core_write.cpp and one for ServiceFlags in net.cpp, and some in leveldb. Going by:\r\n\r\n    $ grep 'static_cast<[^>*&]*>[(][^)]*[|&~^]' -rI | grep -v qt.*moc | grep -v paymentrequest.pb.cc | grep -v CNetPermissionFlags\r\n",
    "created_at": "2019-06-25T11:53:50Z",
    "updated_at": "2019-08-11T02:34:07Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r297147319",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297147319"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r297147319"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297147319/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 907,
    "side": "RIGHT",
    "in_reply_to_id": 297006775
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297655614",
    "pull_request_review_id": 254599506,
    "id": 297655614,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5NzY1NTYxNA==",
    "diff_hunk": "@@ -315,14 +317,14 @@ class CConnman\n private:\n     struct ListenSocket {\n         SOCKET socket;\n-        bool whitelisted;\n+        CNetPermissionFlags permissions;",
    "path": "src/net.h",
    "position": null,
    "original_position": 25,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "40bdd96e2fa2f06b179f0053f58d037e7c664c31",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "nit with regard to coding style:\r\n* Newly introduced classes don't have the `C` prefix\r\n* Members start with `m_`, `m_snake_case`\r\n* `if` statements are either in one line or the code blocks are wrapped in `{}`.\r\n\r\n```suggestion\r\n        NetPermissionFlags m_permissions;\r\n```\r\n\r\nAlso, you may use clang-format-diff and yapf-diff. https://github.com/bitcoin/bitcoin/blob/master/doc/productivity.md#writing-code",
    "created_at": "2019-06-26T13:10:27Z",
    "updated_at": "2019-08-11T02:34:07Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r297655614",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297655614"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r297655614"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/297655614/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 320,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/298154841",
    "pull_request_review_id": 255197013,
    "id": 298154841,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5ODE1NDg0MQ==",
    "diff_hunk": "@@ -900,7 +904,21 @@ void CConnman::AcceptConnection(const ListenSocket& hListenSocket) {\n         }\n     }\n \n-    bool whitelisted = hListenSocket.whitelisted || IsWhitelistedRange(addr);\n+    CNetPermissionFlags permissionFlags = hListenSocket.permissions;\n+    permissionFlags = static_cast<CNetPermissionFlags>(permissionFlags | GetWhitelistPermissionFlags(addr));",
    "path": "src/net.cpp",
    "position": null,
    "original_position": 53,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "f96d0524a99e3d4c7ff4220f22b20688e55c4356",
    "user": {
      "login": "NicolasDorier",
      "id": 3020646,
      "node_id": "MDQ6VXNlcjMwMjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3020646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NicolasDorier",
      "html_url": "https://github.com/NicolasDorier",
      "followers_url": "https://api.github.com/users/NicolasDorier/followers",
      "following_url": "https://api.github.com/users/NicolasDorier/following{/other_user}",
      "gists_url": "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
      "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
      "repos_url": "https://api.github.com/users/NicolasDorier/repos",
      "events_url": "https://api.github.com/users/NicolasDorier/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "fair enough, doing it for net_permissions then",
    "created_at": "2019-06-27T12:40:23Z",
    "updated_at": "2019-08-11T02:34:07Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r298154841",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/298154841"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r298154841"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/298154841/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 907,
    "side": "RIGHT",
    "in_reply_to_id": 297006775
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/299391072",
    "pull_request_review_id": 256774462,
    "id": 299391072,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5OTM5MTA3Mg==",
    "diff_hunk": "@@ -0,0 +1,99 @@\n+// Copyright (c) 2009-2018 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <net_permissions.h>\n+#include <util/system.h>\n+#include <netbase.h>\n+\n+bool TryParsePermissionFlags(const std::string str, NetPermissionFlags& output, size_t& readen, std::string* error)\n+{\n+    NetPermissionFlags flags = PF_NONE;\n+    const auto permissionSeparator = str.find('@');\n+    if (permissionSeparator == std::string::npos) {\n+        NetPermissions::AddFlag(flags, PF_ISIMPLICIT);\n+        readen = 0;\n+    }\n+    else {\n+        size_t offset = 0;\n+        const auto permissions = str.substr(0, permissionSeparator);\n+        while (offset < permissions.length()) {\n+            const int permissionSeparator = permissions.find(',', offset);\n+            int len = permissionSeparator == -1 ? permissions.length() - offset : permissionSeparator - offset;\n+            auto permission = permissions.substr(offset, len);\n+            offset += len;\n+            if (permissionSeparator != -1) offset += 1;\n+\n+            if (permission == \"bloomfilter\" || permission == \"bloom\") NetPermissions::AddFlag(flags, PF_BLOOMFILTER);\n+            else if (permission == \"noban\") NetPermissions::AddFlag(flags, PF_NOBAN);\n+            else if (permission == \"forcerelay\") NetPermissions::AddFlag(flags, PF_FORCERELAY);\n+            else if (permission == \"mempool\") NetPermissions::AddFlag(flags, PF_MEMPOOL);\n+            else if (permission == \"all\") NetPermissions::AddFlag(flags, PF_ALL);\n+            else if (permission == \"relay\") NetPermissions::AddFlag(flags, PF_RELAY);\n+            else if (permission.length() == 0); // Allow empty entries\n+            else {\n+                if (error != NULL) *error = strprintf(_(\"Invalid P2P permission: '%s'\"), permission);",
    "path": "src/net_permissions.cpp",
    "position": null,
    "original_position": 35,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "a4ec0818ca1876460ac19edb9c4abc7d35d36781",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Nit: Use `nullptr` instead of `NULL` (see rationale in developer notes). Applies throughout PR :-)",
    "created_at": "2019-07-02T09:32:15Z",
    "updated_at": "2019-08-11T02:34:07Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r299391072",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/299391072"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r299391072"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/299391072/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 35,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/299391471",
    "pull_request_review_id": 256774462,
    "id": 299391471,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5OTM5MTQ3MQ==",
    "diff_hunk": "@@ -0,0 +1,99 @@\n+// Copyright (c) 2009-2018 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <net_permissions.h>\n+#include <util/system.h>\n+#include <netbase.h>\n+\n+bool TryParsePermissionFlags(const std::string str, NetPermissionFlags& output, size_t& readen, std::string* error)\n+{\n+    NetPermissionFlags flags = PF_NONE;\n+    const auto permissionSeparator = str.find('@');\n+    if (permissionSeparator == std::string::npos) {\n+        NetPermissions::AddFlag(flags, PF_ISIMPLICIT);\n+        readen = 0;\n+    }\n+    else {\n+        size_t offset = 0;\n+        const auto permissions = str.substr(0, permissionSeparator);\n+        while (offset < permissions.length()) {\n+            const int permissionSeparator = permissions.find(',', offset);",
    "path": "src/net_permissions.cpp",
    "position": null,
    "original_position": 21,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "a4ec0818ca1876460ac19edb9c4abc7d35d36781",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This `permissionSeparator` shadows `permissionSeparator` in the outer context.",
    "created_at": "2019-07-02T09:33:13Z",
    "updated_at": "2019-08-11T02:34:07Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r299391471",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/299391471"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r299391471"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/299391471/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 21,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/299393081",
    "pull_request_review_id": 256774462,
    "id": 299393081,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5OTM5MzA4MQ==",
    "diff_hunk": "@@ -0,0 +1,99 @@\n+// Copyright (c) 2009-2018 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <net_permissions.h>\n+#include <util/system.h>\n+#include <netbase.h>\n+\n+bool TryParsePermissionFlags(const std::string str, NetPermissionFlags& output, size_t& readen, std::string* error)",
    "path": "src/net_permissions.cpp",
    "position": null,
    "original_position": 9,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "a4ec0818ca1876460ac19edb9c4abc7d35d36781",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Use `std::string& error` instead of `std::string* error` (see recommendation in developer notes).\r\n\r\nNit: Use another variable name to avoid shadowing `error` included from `util/system.h`.",
    "created_at": "2019-07-02T09:36:55Z",
    "updated_at": "2019-08-11T02:34:07Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r299393081",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/299393081"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r299393081"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/299393081/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 9,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/299567411",
    "pull_request_review_id": 257001614,
    "id": 299567411,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5OTU2NzQxMQ==",
    "diff_hunk": "@@ -314,15 +316,17 @@ class CConnman\n \n private:\n     struct ListenSocket {\n+    private:\n+        NetPermissionFlags m_permissions;\n+    public:\n         SOCKET socket;\n-        bool whitelisted;\n-\n-        ListenSocket(SOCKET socket_, bool whitelisted_) : socket(socket_), whitelisted(whitelisted_) {}\n+        inline void AddSocketPermissionFlags(NetPermissionFlags& flags) const { NetPermissions::AddFlag(flags, m_permissions); }\n+        ListenSocket(SOCKET socket_, NetPermissionFlags permissions_) : socket(socket_), m_permissions(permissions_) {}",
    "path": "src/net.h",
    "position": 30,
    "original_position": 32,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "b7d1b9f470db2b6fcb8a152538413cb07738d94a",
    "user": {
      "login": "mzumsande",
      "id": 48763452,
      "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
      "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mzumsande",
      "html_url": "https://github.com/mzumsande",
      "followers_url": "https://api.github.com/users/mzumsande/followers",
      "following_url": "https://api.github.com/users/mzumsande/following{/other_user}",
      "gists_url": "https://api.github.com/users/mzumsande/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
      "organizations_url": "https://api.github.com/users/mzumsande/orgs",
      "repos_url": "https://api.github.com/users/mzumsande/repos",
      "events_url": "https://api.github.com/users/mzumsande/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mzumsande/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This gives me compiler warnings (\"warning: \u2018CConnman::ListenSocket::socket\u2019 will be initialized after [-Wreorder] SOCKET socket;\"), suggest to change the order somewhere (in the constructor or in the struct).",
    "created_at": "2019-07-02T16:13:06Z",
    "updated_at": "2019-08-11T02:34:07Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r299567411",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/299567411"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r299567411"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/299567411/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 322,
    "original_line": 322,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/299567894",
    "pull_request_review_id": 257001614,
    "id": 299567894,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5OTU2Nzg5NA==",
    "diff_hunk": "@@ -321,4 +322,85 @@ BOOST_AUTO_TEST_CASE(netbase_parsenetwork)\n     BOOST_CHECK_EQUAL(ParseNetwork(\"\"), NET_UNROUTABLE);\n }\n \n+BOOST_AUTO_TEST_CASE(netpermissions_test)\n+{\n+    std::string error;\n+    NetWhitebindPermissions whitebindPermissions;\n+    NetWhitelistPermissions whitelistPermissions;\n+\n+    // Detect invalid white bind\n+    BOOST_CHECK(!NetWhitebindPermissions::TryParse(\"\", whitebindPermissions, &error));\n+    BOOST_CHECK(error.find(\"Cannot resolve -whitebind address\") != -1);",
    "path": "src/test/netbase_tests.cpp",
    "position": null,
    "original_position": 20,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "b7d1b9f470db2b6fcb8a152538413cb07738d94a",
    "user": {
      "login": "mzumsande",
      "id": 48763452,
      "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
      "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mzumsande",
      "html_url": "https://github.com/mzumsande",
      "followers_url": "https://api.github.com/users/mzumsande/followers",
      "following_url": "https://api.github.com/users/mzumsande/following{/other_user}",
      "gists_url": "https://api.github.com/users/mzumsande/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
      "organizations_url": "https://api.github.com/users/mzumsande/orgs",
      "repos_url": "https://api.github.com/users/mzumsande/repos",
      "events_url": "https://api.github.com/users/mzumsande/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mzumsande/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Suggest to use std::string::npos instead of -1 here and below (prevents \"comparison between signed and unsigned\" compiler warnings).",
    "created_at": "2019-07-02T16:14:16Z",
    "updated_at": "2019-08-11T02:34:07Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r299567894",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/299567894"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r299567894"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/299567894/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 333,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/299843060",
    "pull_request_review_id": 257342980,
    "id": 299843060,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5OTg0MzA2MA==",
    "diff_hunk": "@@ -0,0 +1,99 @@\n+// Copyright (c) 2009-2018 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <net_permissions.h>\n+#include <util/system.h>\n+#include <netbase.h>\n+\n+bool TryParsePermissionFlags(const std::string str, NetPermissionFlags& output, size_t& readen, std::string* error)",
    "path": "src/net_permissions.cpp",
    "position": null,
    "original_position": 9,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "a4ec0818ca1876460ac19edb9c4abc7d35d36781",
    "user": {
      "login": "NicolasDorier",
      "id": 3020646,
      "node_id": "MDQ6VXNlcjMwMjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3020646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NicolasDorier",
      "html_url": "https://github.com/NicolasDorier",
      "followers_url": "https://api.github.com/users/NicolasDorier/followers",
      "following_url": "https://api.github.com/users/NicolasDorier/following{/other_user}",
      "gists_url": "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
      "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
      "repos_url": "https://api.github.com/users/NicolasDorier/repos",
      "events_url": "https://api.github.com/users/NicolasDorier/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I was using pointer because I don't want to burden the user to retrieve the error. But meh... everywhere we use it we need the error so I will change to ref.",
    "created_at": "2019-07-03T08:48:00Z",
    "updated_at": "2019-08-11T02:34:07Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r299843060",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/299843060"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r299843060"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/299843060/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 9,
    "side": "RIGHT",
    "in_reply_to_id": 299393081
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314025297",
    "pull_request_review_id": 275076872,
    "id": 314025297,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxNDAyNTI5Nw==",
    "diff_hunk": "@@ -904,7 +903,20 @@ void CConnman::AcceptConnection(const ListenSocket& hListenSocket) {\n         }\n     }\n \n-    bool whitelisted = hListenSocket.whitelisted || IsWhitelistedRange(addr);\n+    NetPermissionFlags permissionFlags = NetPermissionFlags::PF_NONE;\n+    hListenSocket.AddSocketPermissionFlags(permissionFlags);\n+    AddWhitelistPermissionFlags(permissionFlags, addr);\n+    const bool noban = NetPermissions::HasFlag(permissionFlags, NetPermissionFlags::PF_NOBAN);\n+    bool legacyWhitelisted = false;\n+    if (NetPermissions::HasFlag(permissionFlags, NetPermissionFlags::PF_ISIMPLICIT)) {\n+        NetPermissions::ClearFlag(permissionFlags, PF_ISIMPLICIT);\n+        if (gArgs.GetBoolArg(\"-whitelistforcerelay\", false)) NetPermissions::AddFlag(permissionFlags, PF_FORCERELAY);\n+        if (gArgs.GetBoolArg(\"-whitelistrelay\", false)) NetPermissions::AddFlag(permissionFlags, PF_RELAY);",
    "path": "src/net.cpp",
    "position": 64,
    "original_position": 64,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Why are the fallbacks set to `false` and not the `DEFAULT_` value?",
    "created_at": "2019-08-14T18:39:46Z",
    "updated_at": "2019-08-14T18:39:47Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r314025297",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314025297"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r314025297"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314025297/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 914,
    "original_line": 914,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314026195",
    "pull_request_review_id": 275077973,
    "id": 314026195,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxNDAyNjE5NQ==",
    "diff_hunk": "@@ -904,7 +903,20 @@ void CConnman::AcceptConnection(const ListenSocket& hListenSocket) {\n         }\n     }\n \n-    bool whitelisted = hListenSocket.whitelisted || IsWhitelistedRange(addr);\n+    NetPermissionFlags permissionFlags = NetPermissionFlags::PF_NONE;\n+    hListenSocket.AddSocketPermissionFlags(permissionFlags);\n+    AddWhitelistPermissionFlags(permissionFlags, addr);\n+    const bool noban = NetPermissions::HasFlag(permissionFlags, NetPermissionFlags::PF_NOBAN);",
    "path": "src/net.cpp",
    "position": 59,
    "original_position": 59,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Why is this checked before the flag is set in line 916?",
    "created_at": "2019-08-14T18:41:46Z",
    "updated_at": "2019-08-14T19:28:02Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r314026195",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314026195"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r314026195"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314026195/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 909,
    "original_line": 909,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314035862",
    "pull_request_review_id": 275077973,
    "id": 314035862,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxNDAzNTg2Mg==",
    "diff_hunk": "@@ -0,0 +1,106 @@\n+// Copyright (c) 2009-2018 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <net_permissions.h>\n+#include <util/system.h>\n+#include <util/translation.h>\n+#include <netbase.h>\n+\n+// The parse the following format \"perm1,perm2@xxxxxx\"\n+bool TryParsePermissionFlags(const std::string str, NetPermissionFlags& output, size_t& readen, std::string& error)\n+{\n+    NetPermissionFlags flags = PF_NONE;\n+    const auto atSeparator = str.find('@');\n+\n+    // if '@' is not found (ie, \"xxxxx\"), the caller should apply implicit permissions\n+    if (atSeparator == std::string::npos) {\n+        NetPermissions::AddFlag(flags, PF_ISIMPLICIT);\n+        readen = 0;\n+    }\n+    // else (ie, \"perm1,perm2@xxxxx\"), let's enumerate the permissions by splitting by ',' and calculate the flags\n+    else {\n+        readen = 0;\n+        // permissions == perm1,perm2\n+        const auto permissions = str.substr(0, atSeparator);\n+        while (readen < permissions.length()) {\n+            const auto commaSeparator = permissions.find(',', readen);\n+            const auto len = commaSeparator == std::string::npos ? permissions.length() - readen : commaSeparator - readen;\n+            // permission == perm1\n+            const auto permission = permissions.substr(readen, len);\n+            readen += len; // We read \"perm1\"\n+            if (commaSeparator != std::string::npos) readen++; // We read \",\"\n+\n+            if (permission == \"bloomfilter\" || permission == \"bloom\") NetPermissions::AddFlag(flags, PF_BLOOMFILTER);\n+            else if (permission == \"noban\") NetPermissions::AddFlag(flags, PF_NOBAN);\n+            else if (permission == \"forcerelay\") NetPermissions::AddFlag(flags, PF_FORCERELAY);\n+            else if (permission == \"mempool\") NetPermissions::AddFlag(flags, PF_MEMPOOL);\n+            else if (permission == \"all\") NetPermissions::AddFlag(flags, PF_ALL);\n+            else if (permission == \"relay\") NetPermissions::AddFlag(flags, PF_RELAY);\n+            else if (permission.length() == 0); // Allow empty entries\n+            else {\n+                error = strprintf(_(\"Invalid P2P permission: '%s'\").translated, permission);\n+                return false;\n+            }\n+        }\n+        readen++;\n+    }\n+\n+    output = flags;\n+    error = \"\";\n+    return true;\n+}\n+\n+std::vector<std::string> NetPermissions::ToStrings(NetPermissionFlags flags)\n+{\n+    std::vector<std::string> strings;\n+    if (NetPermissions::HasFlag(flags, PF_BLOOMFILTER)) strings.push_back(\"bloomfilter\");\n+    if (NetPermissions::HasFlag(flags, PF_NOBAN)) strings.push_back(\"noban\");\n+    if (NetPermissions::HasFlag(flags, PF_FORCERELAY)) strings.push_back(\"forcerelay\");\n+    if (NetPermissions::HasFlag(flags, PF_RELAY)) strings.push_back(\"relay\");\n+    if (NetPermissions::HasFlag(flags, PF_MEMPOOL)) strings.push_back(\"mempool\");\n+    return strings;\n+}\n+\n+bool NetWhitebindPermissions::TryParse(const std::string str, NetWhitebindPermissions& output, std::string& error)\n+{\n+    NetPermissionFlags flags;\n+    size_t offset;\n+    if (!TryParsePermissionFlags(str, flags, offset, error)) return false;\n+\n+    const std::string strBind = str.substr(offset);\n+    CService addrBind;\n+    if (!Lookup(strBind.c_str(), addrBind, 0, false)) {\n+        error = strprintf(_(\"Cannot resolve -%s address: '%s'\").translated, \"whitebind\", strBind);",
    "path": "src/net_permissions.cpp",
    "position": 74,
    "original_position": 74,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Why is this not using `ResolveErrMsg` like before?",
    "created_at": "2019-08-14T19:04:15Z",
    "updated_at": "2019-08-14T19:28:02Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r314035862",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314035862"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r314035862"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314035862/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 74,
    "original_line": 74,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314040941",
    "pull_request_review_id": 275077973,
    "id": 314040941,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxNDA0MDk0MQ==",
    "diff_hunk": "@@ -3786,7 +3792,7 @@ bool PeerLogicValidation::SendMessages(CNode* pto)\n             pto->vInventoryBlockToSend.clear();\n \n             // Check whether periodic sends should happen\n-            bool fSendTrickle = pto->fWhitelisted;\n+            bool fSendTrickle = pto->HasPermission(PF_NOBAN);",
    "path": "src/net_processing.cpp",
    "position": 107,
    "original_position": 107,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Why is this `noban` and not `relay`?",
    "created_at": "2019-08-14T19:17:24Z",
    "updated_at": "2019-08-14T19:28:02Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r314040941",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314040941"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r314040941"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314040941/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 3795,
    "original_line": 3795,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314041751",
    "pull_request_review_id": 275077973,
    "id": 314041751,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxNDA0MTc1MQ==",
    "diff_hunk": "@@ -962,9 +974,15 @@ void CConnman::AcceptConnection(const ListenSocket& hListenSocket) {\n     uint64_t nonce = GetDeterministicRandomizer(RANDOMIZER_ID_LOCALHOSTNONCE).Write(id).Finalize();\n     CAddress addr_bind = GetBindAddress(hSocket);\n \n-    CNode* pnode = new CNode(id, nLocalServices, GetBestHeight(), hSocket, addr, CalculateKeyedNetGroup(addr), nonce, addr_bind, \"\", true);\n+    ServiceFlags nodeServices = nLocalServices;\n+    if (NetPermissions::HasFlag(permissionFlags, PF_BLOOMFILTER)) {\n+        nodeServices = static_cast<ServiceFlags>(nodeServices | NODE_BLOOM);",
    "path": "src/net.cpp",
    "position": 89,
    "original_position": 89,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Where is this from and why is it needed? I couldn't find it in previous code",
    "created_at": "2019-08-14T19:19:45Z",
    "updated_at": "2019-08-14T19:28:02Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r314041751",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314041751"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r314041751"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314041751/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 979,
    "original_line": 979,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314044640",
    "pull_request_review_id": 275077973,
    "id": 314044640,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxNDA0NDY0MA==",
    "diff_hunk": "@@ -0,0 +1,97 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2015-2018 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test p2p permission message.\n+\n+Test that permissions are correctly calculated and applied\n+\"\"\"\n+\n+from test_framework.test_node import ErrorMatch\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    connect_nodes,\n+    p2p_port,\n+)\n+\n+class P2PPermissionsTests(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 2\n+        self.setup_clean_chain = True\n+        self.extra_args = [[],[]]\n+\n+    def run_test(self):\n+        self.checkpermission(\n+        # relay permission added\n+        [\"-whitelist=127.0.0.1\", \"-whitelistrelay\"],\n+        [\"relay\", \"noban\", \"mempool\"],\n+        True)\n+\n+        self.checkpermission(\n+        # forcerelay and relay permission added\n+        # Legacy parameter interaction which set whitelistrelay to true\n+        # if whitelistforcerelay is true\n+        [\"-whitelist=127.0.0.1\", \"-whitelistforcerelay\"],\n+        [\"forcerelay\", \"relay\", \"noban\", \"mempool\"],\n+        True)\n+\n+        # Let's make sure permissions are merged correctly\n+        # For this, we need to use whitebind instead of bind\n+        # by modifying the configuration file.\n+        ip_port = \"127.0.0.1:{}\".format(p2p_port(1))",
    "path": "test/functional/p2p_permissions.py",
    "position": 42,
    "original_position": 42,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Doesn't p2p_port(1) return the port of node 1, so in the config of node 1 you are whitelisting itself? Dumb question, but I can't see how this test passes.",
    "created_at": "2019-08-14T19:27:32Z",
    "updated_at": "2019-08-14T19:28:02Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r314044640",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314044640"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r314044640"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314044640/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 42,
    "original_line": 42,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314197312",
    "pull_request_review_id": 275288999,
    "id": 314197312,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxNDE5NzMxMg==",
    "diff_hunk": "@@ -904,7 +903,20 @@ void CConnman::AcceptConnection(const ListenSocket& hListenSocket) {\n         }\n     }\n \n-    bool whitelisted = hListenSocket.whitelisted || IsWhitelistedRange(addr);\n+    NetPermissionFlags permissionFlags = NetPermissionFlags::PF_NONE;\n+    hListenSocket.AddSocketPermissionFlags(permissionFlags);\n+    AddWhitelistPermissionFlags(permissionFlags, addr);\n+    const bool noban = NetPermissions::HasFlag(permissionFlags, NetPermissionFlags::PF_NOBAN);\n+    bool legacyWhitelisted = false;\n+    if (NetPermissions::HasFlag(permissionFlags, NetPermissionFlags::PF_ISIMPLICIT)) {\n+        NetPermissions::ClearFlag(permissionFlags, PF_ISIMPLICIT);\n+        if (gArgs.GetBoolArg(\"-whitelistforcerelay\", false)) NetPermissions::AddFlag(permissionFlags, PF_FORCERELAY);\n+        if (gArgs.GetBoolArg(\"-whitelistrelay\", false)) NetPermissions::AddFlag(permissionFlags, PF_RELAY);",
    "path": "src/net.cpp",
    "position": 64,
    "original_position": 64,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "user": {
      "login": "NicolasDorier",
      "id": 3020646,
      "node_id": "MDQ6VXNlcjMwMjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3020646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NicolasDorier",
      "html_url": "https://github.com/NicolasDorier",
      "followers_url": "https://api.github.com/users/NicolasDorier/followers",
      "following_url": "https://api.github.com/users/NicolasDorier/following{/other_user}",
      "gists_url": "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
      "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
      "repos_url": "https://api.github.com/users/NicolasDorier/repos",
      "events_url": "https://api.github.com/users/NicolasDorier/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Because the constant is in a different file which is not in imported into the scope of this file.\r\n\r\nLooking at other `GetBoolArg` references in this file, you can notice that all of them have the same issue, none of them reference `DEFAULT_`",
    "created_at": "2019-08-15T07:14:30Z",
    "updated_at": "2019-08-15T07:14:49Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r314197312",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314197312"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r314197312"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314197312/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 914,
    "original_line": 914,
    "side": "RIGHT",
    "in_reply_to_id": 314025297
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314198250",
    "pull_request_review_id": 275290125,
    "id": 314198250,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxNDE5ODI1MA==",
    "diff_hunk": "@@ -904,7 +903,20 @@ void CConnman::AcceptConnection(const ListenSocket& hListenSocket) {\n         }\n     }\n \n-    bool whitelisted = hListenSocket.whitelisted || IsWhitelistedRange(addr);\n+    NetPermissionFlags permissionFlags = NetPermissionFlags::PF_NONE;\n+    hListenSocket.AddSocketPermissionFlags(permissionFlags);\n+    AddWhitelistPermissionFlags(permissionFlags, addr);\n+    const bool noban = NetPermissions::HasFlag(permissionFlags, NetPermissionFlags::PF_NOBAN);",
    "path": "src/net.cpp",
    "position": 59,
    "original_position": 59,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "user": {
      "login": "NicolasDorier",
      "id": 3020646,
      "node_id": "MDQ6VXNlcjMwMjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3020646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NicolasDorier",
      "html_url": "https://github.com/NicolasDorier",
      "followers_url": "https://api.github.com/users/NicolasDorier/followers",
      "following_url": "https://api.github.com/users/NicolasDorier/following{/other_user}",
      "gists_url": "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
      "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
      "repos_url": "https://api.github.com/users/NicolasDorier/repos",
      "events_url": "https://api.github.com/users/NicolasDorier/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Thanks to report this, I will make a PR fixing it.",
    "created_at": "2019-08-15T07:18:04Z",
    "updated_at": "2019-08-15T07:18:04Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r314198250",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314198250"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r314198250"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314198250/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 909,
    "original_line": 909,
    "side": "RIGHT",
    "in_reply_to_id": 314026195
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314198817",
    "pull_request_review_id": 275290827,
    "id": 314198817,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxNDE5ODgxNw==",
    "diff_hunk": "@@ -962,9 +974,15 @@ void CConnman::AcceptConnection(const ListenSocket& hListenSocket) {\n     uint64_t nonce = GetDeterministicRandomizer(RANDOMIZER_ID_LOCALHOSTNONCE).Write(id).Finalize();\n     CAddress addr_bind = GetBindAddress(hSocket);\n \n-    CNode* pnode = new CNode(id, nLocalServices, GetBestHeight(), hSocket, addr, CalculateKeyedNetGroup(addr), nonce, addr_bind, \"\", true);\n+    ServiceFlags nodeServices = nLocalServices;\n+    if (NetPermissions::HasFlag(permissionFlags, PF_BLOOMFILTER)) {\n+        nodeServices = static_cast<ServiceFlags>(nodeServices | NODE_BLOOM);",
    "path": "src/net.cpp",
    "position": 89,
    "original_position": 89,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "user": {
      "login": "NicolasDorier",
      "id": 3020646,
      "node_id": "MDQ6VXNlcjMwMjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3020646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NicolasDorier",
      "html_url": "https://github.com/NicolasDorier",
      "followers_url": "https://api.github.com/users/NicolasDorier/followers",
      "following_url": "https://api.github.com/users/NicolasDorier/following{/other_user}",
      "gists_url": "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
      "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
      "repos_url": "https://api.github.com/users/NicolasDorier/repos",
      "events_url": "https://api.github.com/users/NicolasDorier/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "The initial problem I wanted to solve is that, because in 0.19 we remove BLOOM_FILTER by default, I wanted the ability to keep it only for whitelisted peer.  Because this was a simple change, I decided to add it here instead of separate PR.",
    "created_at": "2019-08-15T07:20:38Z",
    "updated_at": "2019-08-15T07:20:39Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r314198817",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314198817"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r314198817"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314198817/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 979,
    "original_line": 979,
    "side": "RIGHT",
    "in_reply_to_id": 314041751
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314198985",
    "pull_request_review_id": 275291054,
    "id": 314198985,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxNDE5ODk4NQ==",
    "diff_hunk": "@@ -0,0 +1,106 @@\n+// Copyright (c) 2009-2018 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <net_permissions.h>\n+#include <util/system.h>\n+#include <util/translation.h>\n+#include <netbase.h>\n+\n+// The parse the following format \"perm1,perm2@xxxxxx\"\n+bool TryParsePermissionFlags(const std::string str, NetPermissionFlags& output, size_t& readen, std::string& error)\n+{\n+    NetPermissionFlags flags = PF_NONE;\n+    const auto atSeparator = str.find('@');\n+\n+    // if '@' is not found (ie, \"xxxxx\"), the caller should apply implicit permissions\n+    if (atSeparator == std::string::npos) {\n+        NetPermissions::AddFlag(flags, PF_ISIMPLICIT);\n+        readen = 0;\n+    }\n+    // else (ie, \"perm1,perm2@xxxxx\"), let's enumerate the permissions by splitting by ',' and calculate the flags\n+    else {\n+        readen = 0;\n+        // permissions == perm1,perm2\n+        const auto permissions = str.substr(0, atSeparator);\n+        while (readen < permissions.length()) {\n+            const auto commaSeparator = permissions.find(',', readen);\n+            const auto len = commaSeparator == std::string::npos ? permissions.length() - readen : commaSeparator - readen;\n+            // permission == perm1\n+            const auto permission = permissions.substr(readen, len);\n+            readen += len; // We read \"perm1\"\n+            if (commaSeparator != std::string::npos) readen++; // We read \",\"\n+\n+            if (permission == \"bloomfilter\" || permission == \"bloom\") NetPermissions::AddFlag(flags, PF_BLOOMFILTER);\n+            else if (permission == \"noban\") NetPermissions::AddFlag(flags, PF_NOBAN);\n+            else if (permission == \"forcerelay\") NetPermissions::AddFlag(flags, PF_FORCERELAY);\n+            else if (permission == \"mempool\") NetPermissions::AddFlag(flags, PF_MEMPOOL);\n+            else if (permission == \"all\") NetPermissions::AddFlag(flags, PF_ALL);\n+            else if (permission == \"relay\") NetPermissions::AddFlag(flags, PF_RELAY);\n+            else if (permission.length() == 0); // Allow empty entries\n+            else {\n+                error = strprintf(_(\"Invalid P2P permission: '%s'\").translated, permission);\n+                return false;\n+            }\n+        }\n+        readen++;\n+    }\n+\n+    output = flags;\n+    error = \"\";\n+    return true;\n+}\n+\n+std::vector<std::string> NetPermissions::ToStrings(NetPermissionFlags flags)\n+{\n+    std::vector<std::string> strings;\n+    if (NetPermissions::HasFlag(flags, PF_BLOOMFILTER)) strings.push_back(\"bloomfilter\");\n+    if (NetPermissions::HasFlag(flags, PF_NOBAN)) strings.push_back(\"noban\");\n+    if (NetPermissions::HasFlag(flags, PF_FORCERELAY)) strings.push_back(\"forcerelay\");\n+    if (NetPermissions::HasFlag(flags, PF_RELAY)) strings.push_back(\"relay\");\n+    if (NetPermissions::HasFlag(flags, PF_MEMPOOL)) strings.push_back(\"mempool\");\n+    return strings;\n+}\n+\n+bool NetWhitebindPermissions::TryParse(const std::string str, NetWhitebindPermissions& output, std::string& error)\n+{\n+    NetPermissionFlags flags;\n+    size_t offset;\n+    if (!TryParsePermissionFlags(str, flags, offset, error)) return false;\n+\n+    const std::string strBind = str.substr(offset);\n+    CService addrBind;\n+    if (!Lookup(strBind.c_str(), addrBind, 0, false)) {\n+        error = strprintf(_(\"Cannot resolve -%s address: '%s'\").translated, \"whitebind\", strBind);",
    "path": "src/net_permissions.cpp",
    "position": 74,
    "original_position": 74,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "user": {
      "login": "NicolasDorier",
      "id": 3020646,
      "node_id": "MDQ6VXNlcjMwMjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3020646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NicolasDorier",
      "html_url": "https://github.com/NicolasDorier",
      "followers_url": "https://api.github.com/users/NicolasDorier/followers",
      "following_url": "https://api.github.com/users/NicolasDorier/following{/other_user}",
      "gists_url": "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
      "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
      "repos_url": "https://api.github.com/users/NicolasDorier/repos",
      "events_url": "https://api.github.com/users/NicolasDorier/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Because it is defined in `init.cpp`",
    "created_at": "2019-08-15T07:21:24Z",
    "updated_at": "2019-08-15T07:21:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r314198985",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314198985"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r314198985"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314198985/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 74,
    "original_line": 74,
    "side": "RIGHT",
    "in_reply_to_id": 314035862
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314199540",
    "pull_request_review_id": 275291717,
    "id": 314199540,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxNDE5OTU0MA==",
    "diff_hunk": "@@ -3786,7 +3792,7 @@ bool PeerLogicValidation::SendMessages(CNode* pto)\n             pto->vInventoryBlockToSend.clear();\n \n             // Check whether periodic sends should happen\n-            bool fSendTrickle = pto->fWhitelisted;\n+            bool fSendTrickle = pto->HasPermission(PF_NOBAN);",
    "path": "src/net_processing.cpp",
    "position": 107,
    "original_position": 107,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "user": {
      "login": "NicolasDorier",
      "id": 3020646,
      "node_id": "MDQ6VXNlcjMwMjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3020646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NicolasDorier",
      "html_url": "https://github.com/NicolasDorier",
      "followers_url": "https://api.github.com/users/NicolasDorier/followers",
      "following_url": "https://api.github.com/users/NicolasDorier/following{/other_user}",
      "gists_url": "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
      "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
      "repos_url": "https://api.github.com/users/NicolasDorier/repos",
      "events_url": "https://api.github.com/users/NicolasDorier/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "To keep backward compatibility. \r\n\r\nBefore, if the peer was whitelisted, it did not matter whether he was also in `whitelistrelay`, this would be still be `true` in all cases.",
    "created_at": "2019-08-15T07:23:48Z",
    "updated_at": "2019-08-15T07:24:11Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r314199540",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314199540"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r314199540"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314199540/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 3795,
    "original_line": 3795,
    "side": "RIGHT",
    "in_reply_to_id": 314040941
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314200996",
    "pull_request_review_id": 275293466,
    "id": 314200996,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxNDIwMDk5Ng==",
    "diff_hunk": "@@ -0,0 +1,97 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2015-2018 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test p2p permission message.\n+\n+Test that permissions are correctly calculated and applied\n+\"\"\"\n+\n+from test_framework.test_node import ErrorMatch\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    connect_nodes,\n+    p2p_port,\n+)\n+\n+class P2PPermissionsTests(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 2\n+        self.setup_clean_chain = True\n+        self.extra_args = [[],[]]\n+\n+    def run_test(self):\n+        self.checkpermission(\n+        # relay permission added\n+        [\"-whitelist=127.0.0.1\", \"-whitelistrelay\"],\n+        [\"relay\", \"noban\", \"mempool\"],\n+        True)\n+\n+        self.checkpermission(\n+        # forcerelay and relay permission added\n+        # Legacy parameter interaction which set whitelistrelay to true\n+        # if whitelistforcerelay is true\n+        [\"-whitelist=127.0.0.1\", \"-whitelistforcerelay\"],\n+        [\"forcerelay\", \"relay\", \"noban\", \"mempool\"],\n+        True)\n+\n+        # Let's make sure permissions are merged correctly\n+        # For this, we need to use whitebind instead of bind\n+        # by modifying the configuration file.\n+        ip_port = \"127.0.0.1:{}\".format(p2p_port(1))",
    "path": "test/functional/p2p_permissions.py",
    "position": 42,
    "original_position": 42,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "user": {
      "login": "NicolasDorier",
      "id": 3020646,
      "node_id": "MDQ6VXNlcjMwMjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3020646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NicolasDorier",
      "html_url": "https://github.com/NicolasDorier",
      "followers_url": "https://api.github.com/users/NicolasDorier/followers",
      "following_url": "https://api.github.com/users/NicolasDorier/following{/other_user}",
      "gists_url": "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
      "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
      "repos_url": "https://api.github.com/users/NicolasDorier/repos",
      "events_url": "https://api.github.com/users/NicolasDorier/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Because we are using `whitebind`. This basically mean: Consider anybody connecting to this port as \"whitelisted\".\r\n\r\nBecause node 0 connect to node 1, this is the right port.",
    "created_at": "2019-08-15T07:29:46Z",
    "updated_at": "2019-08-15T07:29:46Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r314200996",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314200996"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r314200996"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314200996/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 42,
    "original_line": 42,
    "side": "RIGHT",
    "in_reply_to_id": 314044640
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314202951",
    "pull_request_review_id": 275295975,
    "id": 314202951,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxNDIwMjk1MQ==",
    "diff_hunk": "@@ -904,7 +903,20 @@ void CConnman::AcceptConnection(const ListenSocket& hListenSocket) {\n         }\n     }\n \n-    bool whitelisted = hListenSocket.whitelisted || IsWhitelistedRange(addr);\n+    NetPermissionFlags permissionFlags = NetPermissionFlags::PF_NONE;\n+    hListenSocket.AddSocketPermissionFlags(permissionFlags);\n+    AddWhitelistPermissionFlags(permissionFlags, addr);\n+    const bool noban = NetPermissions::HasFlag(permissionFlags, NetPermissionFlags::PF_NOBAN);",
    "path": "src/net.cpp",
    "position": 59,
    "original_position": 59,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "user": {
      "login": "NicolasDorier",
      "id": 3020646,
      "node_id": "MDQ6VXNlcjMwMjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3020646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NicolasDorier",
      "html_url": "https://github.com/NicolasDorier",
      "followers_url": "https://api.github.com/users/NicolasDorier/followers",
      "following_url": "https://api.github.com/users/NicolasDorier/following{/other_user}",
      "gists_url": "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
      "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
      "repos_url": "https://api.github.com/users/NicolasDorier/repos",
      "events_url": "https://api.github.com/users/NicolasDorier/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "https://github.com/bitcoin/bitcoin/pull/16618",
    "created_at": "2019-08-15T07:37:56Z",
    "updated_at": "2019-08-15T07:37:56Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r314202951",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314202951"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r314202951"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314202951/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 909,
    "original_line": 909,
    "side": "RIGHT",
    "in_reply_to_id": 314026195
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314317824",
    "pull_request_review_id": 275441183,
    "id": 314317824,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxNDMxNzgyNA==",
    "diff_hunk": "@@ -0,0 +1,97 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2015-2018 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test p2p permission message.\n+\n+Test that permissions are correctly calculated and applied\n+\"\"\"\n+\n+from test_framework.test_node import ErrorMatch\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    connect_nodes,\n+    p2p_port,\n+)\n+\n+class P2PPermissionsTests(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 2\n+        self.setup_clean_chain = True\n+        self.extra_args = [[],[]]\n+\n+    def run_test(self):\n+        self.checkpermission(\n+        # relay permission added\n+        [\"-whitelist=127.0.0.1\", \"-whitelistrelay\"],\n+        [\"relay\", \"noban\", \"mempool\"],\n+        True)\n+\n+        self.checkpermission(\n+        # forcerelay and relay permission added\n+        # Legacy parameter interaction which set whitelistrelay to true\n+        # if whitelistforcerelay is true\n+        [\"-whitelist=127.0.0.1\", \"-whitelistforcerelay\"],\n+        [\"forcerelay\", \"relay\", \"noban\", \"mempool\"],\n+        True)\n+\n+        # Let's make sure permissions are merged correctly\n+        # For this, we need to use whitebind instead of bind\n+        # by modifying the configuration file.\n+        ip_port = \"127.0.0.1:{}\".format(p2p_port(1))",
    "path": "test/functional/p2p_permissions.py",
    "position": 42,
    "original_position": 42,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Thanks, makes sense.",
    "created_at": "2019-08-15T13:55:04Z",
    "updated_at": "2019-08-15T13:55:05Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r314317824",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314317824"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r314317824"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314317824/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 42,
    "original_line": 42,
    "side": "RIGHT",
    "in_reply_to_id": 314044640
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314318229",
    "pull_request_review_id": 275441698,
    "id": 314318229,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxNDMxODIyOQ==",
    "diff_hunk": "@@ -962,9 +974,15 @@ void CConnman::AcceptConnection(const ListenSocket& hListenSocket) {\n     uint64_t nonce = GetDeterministicRandomizer(RANDOMIZER_ID_LOCALHOSTNONCE).Write(id).Finalize();\n     CAddress addr_bind = GetBindAddress(hSocket);\n \n-    CNode* pnode = new CNode(id, nLocalServices, GetBestHeight(), hSocket, addr, CalculateKeyedNetGroup(addr), nonce, addr_bind, \"\", true);\n+    ServiceFlags nodeServices = nLocalServices;\n+    if (NetPermissions::HasFlag(permissionFlags, PF_BLOOMFILTER)) {\n+        nodeServices = static_cast<ServiceFlags>(nodeServices | NODE_BLOOM);",
    "path": "src/net.cpp",
    "position": 89,
    "original_position": 89,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Ah, I figured. Was a bit weird to see this behavior change in a \"refactoring\" commit",
    "created_at": "2019-08-15T13:55:54Z",
    "updated_at": "2019-08-15T13:55:55Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r314318229",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314318229"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r314318229"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314318229/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 979,
    "original_line": 979,
    "side": "RIGHT",
    "in_reply_to_id": 314041751
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314318524",
    "pull_request_review_id": 275442069,
    "id": 314318524,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxNDMxODUyNA==",
    "diff_hunk": "@@ -3786,7 +3792,7 @@ bool PeerLogicValidation::SendMessages(CNode* pto)\n             pto->vInventoryBlockToSend.clear();\n \n             // Check whether periodic sends should happen\n-            bool fSendTrickle = pto->fWhitelisted;\n+            bool fSendTrickle = pto->HasPermission(PF_NOBAN);",
    "path": "src/net_processing.cpp",
    "position": 107,
    "original_position": 107,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "But `relay` is also set to true for backward compatibility, no?",
    "created_at": "2019-08-15T13:56:30Z",
    "updated_at": "2019-08-15T13:56:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r314318524",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314318524"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r314318524"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314318524/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 3795,
    "original_line": 3795,
    "side": "RIGHT",
    "in_reply_to_id": 314040941
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314324939",
    "pull_request_review_id": 275450253,
    "id": 314324939,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxNDMyNDkzOQ==",
    "diff_hunk": "@@ -0,0 +1,106 @@\n+// Copyright (c) 2009-2018 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <net_permissions.h>\n+#include <util/system.h>\n+#include <util/translation.h>\n+#include <netbase.h>\n+\n+// The parse the following format \"perm1,perm2@xxxxxx\"\n+bool TryParsePermissionFlags(const std::string str, NetPermissionFlags& output, size_t& readen, std::string& error)\n+{\n+    NetPermissionFlags flags = PF_NONE;\n+    const auto atSeparator = str.find('@');\n+\n+    // if '@' is not found (ie, \"xxxxx\"), the caller should apply implicit permissions\n+    if (atSeparator == std::string::npos) {\n+        NetPermissions::AddFlag(flags, PF_ISIMPLICIT);\n+        readen = 0;\n+    }\n+    // else (ie, \"perm1,perm2@xxxxx\"), let's enumerate the permissions by splitting by ',' and calculate the flags\n+    else {\n+        readen = 0;\n+        // permissions == perm1,perm2\n+        const auto permissions = str.substr(0, atSeparator);\n+        while (readen < permissions.length()) {\n+            const auto commaSeparator = permissions.find(',', readen);\n+            const auto len = commaSeparator == std::string::npos ? permissions.length() - readen : commaSeparator - readen;\n+            // permission == perm1\n+            const auto permission = permissions.substr(readen, len);\n+            readen += len; // We read \"perm1\"\n+            if (commaSeparator != std::string::npos) readen++; // We read \",\"\n+\n+            if (permission == \"bloomfilter\" || permission == \"bloom\") NetPermissions::AddFlag(flags, PF_BLOOMFILTER);\n+            else if (permission == \"noban\") NetPermissions::AddFlag(flags, PF_NOBAN);\n+            else if (permission == \"forcerelay\") NetPermissions::AddFlag(flags, PF_FORCERELAY);\n+            else if (permission == \"mempool\") NetPermissions::AddFlag(flags, PF_MEMPOOL);\n+            else if (permission == \"all\") NetPermissions::AddFlag(flags, PF_ALL);\n+            else if (permission == \"relay\") NetPermissions::AddFlag(flags, PF_RELAY);\n+            else if (permission.length() == 0); // Allow empty entries\n+            else {\n+                error = strprintf(_(\"Invalid P2P permission: '%s'\").translated, permission);\n+                return false;\n+            }\n+        }\n+        readen++;\n+    }\n+\n+    output = flags;\n+    error = \"\";\n+    return true;\n+}\n+\n+std::vector<std::string> NetPermissions::ToStrings(NetPermissionFlags flags)\n+{\n+    std::vector<std::string> strings;\n+    if (NetPermissions::HasFlag(flags, PF_BLOOMFILTER)) strings.push_back(\"bloomfilter\");\n+    if (NetPermissions::HasFlag(flags, PF_NOBAN)) strings.push_back(\"noban\");\n+    if (NetPermissions::HasFlag(flags, PF_FORCERELAY)) strings.push_back(\"forcerelay\");\n+    if (NetPermissions::HasFlag(flags, PF_RELAY)) strings.push_back(\"relay\");\n+    if (NetPermissions::HasFlag(flags, PF_MEMPOOL)) strings.push_back(\"mempool\");\n+    return strings;\n+}\n+\n+bool NetWhitebindPermissions::TryParse(const std::string str, NetWhitebindPermissions& output, std::string& error)\n+{\n+    NetPermissionFlags flags;\n+    size_t offset;\n+    if (!TryParsePermissionFlags(str, flags, offset, error)) return false;\n+\n+    const std::string strBind = str.substr(offset);\n+    CService addrBind;\n+    if (!Lookup(strBind.c_str(), addrBind, 0, false)) {\n+        error = strprintf(_(\"Cannot resolve -%s address: '%s'\").translated, \"whitebind\", strBind);",
    "path": "src/net_permissions.cpp",
    "position": 74,
    "original_position": 74,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Fixed in #16620",
    "created_at": "2019-08-15T14:10:26Z",
    "updated_at": "2019-08-15T14:10:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r314324939",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314324939"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r314324939"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314324939/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 74,
    "original_line": 74,
    "side": "RIGHT",
    "in_reply_to_id": 314035862
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314327596",
    "pull_request_review_id": 275453712,
    "id": 314327596,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxNDMyNzU5Ng==",
    "diff_hunk": "@@ -904,7 +903,20 @@ void CConnman::AcceptConnection(const ListenSocket& hListenSocket) {\n         }\n     }\n \n-    bool whitelisted = hListenSocket.whitelisted || IsWhitelistedRange(addr);\n+    NetPermissionFlags permissionFlags = NetPermissionFlags::PF_NONE;\n+    hListenSocket.AddSocketPermissionFlags(permissionFlags);\n+    AddWhitelistPermissionFlags(permissionFlags, addr);\n+    const bool noban = NetPermissions::HasFlag(permissionFlags, NetPermissionFlags::PF_NOBAN);\n+    bool legacyWhitelisted = false;\n+    if (NetPermissions::HasFlag(permissionFlags, NetPermissionFlags::PF_ISIMPLICIT)) {\n+        NetPermissions::ClearFlag(permissionFlags, PF_ISIMPLICIT);\n+        if (gArgs.GetBoolArg(\"-whitelistforcerelay\", false)) NetPermissions::AddFlag(permissionFlags, PF_FORCERELAY);\n+        if (gArgs.GetBoolArg(\"-whitelistrelay\", false)) NetPermissions::AddFlag(permissionFlags, PF_RELAY);",
    "path": "src/net.cpp",
    "position": 64,
    "original_position": 64,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "So is it safe to do that? Under what circumstances would it lead to bugs?",
    "created_at": "2019-08-15T14:16:23Z",
    "updated_at": "2019-08-15T14:16:23Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r314327596",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314327596"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r314327596"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314327596/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 914,
    "original_line": 914,
    "side": "RIGHT",
    "in_reply_to_id": 314025297
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314579122",
    "pull_request_review_id": 275769831,
    "id": 314579122,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxNDU3OTEyMg==",
    "diff_hunk": "@@ -3786,7 +3792,7 @@ bool PeerLogicValidation::SendMessages(CNode* pto)\n             pto->vInventoryBlockToSend.clear();\n \n             // Check whether periodic sends should happen\n-            bool fSendTrickle = pto->fWhitelisted;\n+            bool fSendTrickle = pto->HasPermission(PF_NOBAN);",
    "path": "src/net_processing.cpp",
    "position": 107,
    "original_position": 107,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "user": {
      "login": "NicolasDorier",
      "id": 3020646,
      "node_id": "MDQ6VXNlcjMwMjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3020646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NicolasDorier",
      "html_url": "https://github.com/NicolasDorier",
      "followers_url": "https://api.github.com/users/NicolasDorier/followers",
      "following_url": "https://api.github.com/users/NicolasDorier/following{/other_user}",
      "gists_url": "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
      "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
      "repos_url": "https://api.github.com/users/NicolasDorier/repos",
      "events_url": "https://api.github.com/users/NicolasDorier/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "only if the peer is also in `-whitelistrelay` , else it is not.",
    "created_at": "2019-08-16T04:25:34Z",
    "updated_at": "2019-08-16T04:25:45Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r314579122",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314579122"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r314579122"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314579122/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 3795,
    "original_line": 3795,
    "side": "RIGHT",
    "in_reply_to_id": 314040941
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314715783",
    "pull_request_review_id": 275944142,
    "id": 314715783,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxNDcxNTc4Mw==",
    "diff_hunk": "@@ -3786,7 +3792,7 @@ bool PeerLogicValidation::SendMessages(CNode* pto)\n             pto->vInventoryBlockToSend.clear();\n \n             // Check whether periodic sends should happen\n-            bool fSendTrickle = pto->fWhitelisted;\n+            bool fSendTrickle = pto->HasPermission(PF_NOBAN);",
    "path": "src/net_processing.cpp",
    "position": 107,
    "original_position": 107,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Which is enabled by default for exactly that reason, no?",
    "created_at": "2019-08-16T13:18:54Z",
    "updated_at": "2019-08-16T13:18:55Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r314715783",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314715783"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r314715783"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314715783/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 3795,
    "original_line": 3795,
    "side": "RIGHT",
    "in_reply_to_id": 314040941
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314724948",
    "pull_request_review_id": 275956386,
    "id": 314724948,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxNDcyNDk0OA==",
    "diff_hunk": "@@ -904,7 +903,20 @@ void CConnman::AcceptConnection(const ListenSocket& hListenSocket) {\n         }\n     }\n \n-    bool whitelisted = hListenSocket.whitelisted || IsWhitelistedRange(addr);\n+    NetPermissionFlags permissionFlags = NetPermissionFlags::PF_NONE;\n+    hListenSocket.AddSocketPermissionFlags(permissionFlags);\n+    AddWhitelistPermissionFlags(permissionFlags, addr);\n+    const bool noban = NetPermissions::HasFlag(permissionFlags, NetPermissionFlags::PF_NOBAN);\n+    bool legacyWhitelisted = false;\n+    if (NetPermissions::HasFlag(permissionFlags, NetPermissionFlags::PF_ISIMPLICIT)) {\n+        NetPermissions::ClearFlag(permissionFlags, PF_ISIMPLICIT);\n+        if (gArgs.GetBoolArg(\"-whitelistforcerelay\", false)) NetPermissions::AddFlag(permissionFlags, PF_FORCERELAY);\n+        if (gArgs.GetBoolArg(\"-whitelistrelay\", false)) NetPermissions::AddFlag(permissionFlags, PF_RELAY);",
    "path": "src/net.cpp",
    "position": 64,
    "original_position": 64,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I guess you are fixing it in #16631?",
    "created_at": "2019-08-16T13:42:18Z",
    "updated_at": "2019-08-16T13:42:18Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r314724948",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314724948"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r314724948"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314724948/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 914,
    "original_line": 914,
    "side": "RIGHT",
    "in_reply_to_id": 314025297
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314725780",
    "pull_request_review_id": 275957522,
    "id": 314725780,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxNDcyNTc4MA==",
    "diff_hunk": "@@ -904,7 +903,20 @@ void CConnman::AcceptConnection(const ListenSocket& hListenSocket) {\n         }\n     }\n \n-    bool whitelisted = hListenSocket.whitelisted || IsWhitelistedRange(addr);\n+    NetPermissionFlags permissionFlags = NetPermissionFlags::PF_NONE;\n+    hListenSocket.AddSocketPermissionFlags(permissionFlags);\n+    AddWhitelistPermissionFlags(permissionFlags, addr);\n+    const bool noban = NetPermissions::HasFlag(permissionFlags, NetPermissionFlags::PF_NOBAN);\n+    bool legacyWhitelisted = false;\n+    if (NetPermissions::HasFlag(permissionFlags, NetPermissionFlags::PF_ISIMPLICIT)) {\n+        NetPermissions::ClearFlag(permissionFlags, PF_ISIMPLICIT);\n+        if (gArgs.GetBoolArg(\"-whitelistforcerelay\", false)) NetPermissions::AddFlag(permissionFlags, PF_FORCERELAY);\n+        if (gArgs.GetBoolArg(\"-whitelistrelay\", false)) NetPermissions::AddFlag(permissionFlags, PF_RELAY);",
    "path": "src/net.cpp",
    "position": 64,
    "original_position": 64,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "user": {
      "login": "NicolasDorier",
      "id": 3020646,
      "node_id": "MDQ6VXNlcjMwMjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3020646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NicolasDorier",
      "html_url": "https://github.com/NicolasDorier",
      "followers_url": "https://api.github.com/users/NicolasDorier/followers",
      "following_url": "https://api.github.com/users/NicolasDorier/following{/other_user}",
      "gists_url": "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
      "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
      "repos_url": "https://api.github.com/users/NicolasDorier/repos",
      "events_url": "https://api.github.com/users/NicolasDorier/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "@MarcoFalke yes, I misunderstood your question. I thought you were asking me to use the `DEFAULT_` const instead of hard coding the value. But you were saying that the `DEFAULT_` is not the same as what I hardcoded.",
    "created_at": "2019-08-16T13:44:21Z",
    "updated_at": "2019-08-16T13:44:21Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r314725780",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314725780"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r314725780"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314725780/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 914,
    "original_line": 914,
    "side": "RIGHT",
    "in_reply_to_id": 314025297
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314745834",
    "pull_request_review_id": 275983639,
    "id": 314745834,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxNDc0NTgzNA==",
    "diff_hunk": "@@ -3786,7 +3792,7 @@ bool PeerLogicValidation::SendMessages(CNode* pto)\n             pto->vInventoryBlockToSend.clear();\n \n             // Check whether periodic sends should happen\n-            bool fSendTrickle = pto->fWhitelisted;\n+            bool fSendTrickle = pto->HasPermission(PF_NOBAN);",
    "path": "src/net_processing.cpp",
    "position": 107,
    "original_position": 107,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "user": {
      "login": "NicolasDorier",
      "id": 3020646,
      "node_id": "MDQ6VXNlcjMwMjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3020646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NicolasDorier",
      "html_url": "https://github.com/NicolasDorier",
      "followers_url": "https://api.github.com/users/NicolasDorier/followers",
      "following_url": "https://api.github.com/users/NicolasDorier/following{/other_user}",
      "gists_url": "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
      "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
      "repos_url": "https://api.github.com/users/NicolasDorier/repos",
      "events_url": "https://api.github.com/users/NicolasDorier/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Well, regardless, the old code does not look `-whitelistrelay` is 1 or 0 to determine `fSendTrickle`. \r\n\r\nThis would be a breaking change to make it depends on it.\r\nI am quite neutral to that, I am unsure what `fSendTrickle` is doing, but I think for this PR it should preserve the old behavior.\r\n\r\nAnother alternative is to have a specific permission just for that and turn it on if no specific permission are set regardless of `-whitelistrelay`",
    "created_at": "2019-08-16T14:31:10Z",
    "updated_at": "2019-08-16T14:31:11Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r314745834",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314745834"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r314745834"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/314745834/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 3795,
    "original_line": 3795,
    "side": "RIGHT",
    "in_reply_to_id": 314040941
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/337584665",
    "pull_request_review_id": 305295534,
    "id": 337584665,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNzU4NDY2NQ==",
    "diff_hunk": "@@ -3786,7 +3792,7 @@ bool PeerLogicValidation::SendMessages(CNode* pto)\n             pto->vInventoryBlockToSend.clear();\n \n             // Check whether periodic sends should happen\n-            bool fSendTrickle = pto->fWhitelisted;\n+            bool fSendTrickle = pto->HasPermission(PF_NOBAN);",
    "path": "src/net_processing.cpp",
    "position": 107,
    "original_position": 107,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "user": {
      "login": "sdaftuar",
      "id": 7463573,
      "node_id": "MDQ6VXNlcjc0NjM1NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sdaftuar",
      "html_url": "https://github.com/sdaftuar",
      "followers_url": "https://api.github.com/users/sdaftuar/followers",
      "following_url": "https://api.github.com/users/sdaftuar/following{/other_user}",
      "gists_url": "https://api.github.com/users/sdaftuar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
      "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
      "repos_url": "https://api.github.com/users/sdaftuar/repos",
      "events_url": "https://api.github.com/users/sdaftuar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I just encountered this piece of code and found this to be pretty confusing.  It seems to me that the behavior of relaying transactions immediately without waiting for our poisson timers to fire should be its own \"net permission\", and not piggy-backed onto NOBAN.",
    "created_at": "2019-10-22T15:20:50Z",
    "updated_at": "2019-10-22T15:20:50Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r337584665",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/337584665"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r337584665"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/337584665/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 3795,
    "original_line": 3795,
    "side": "RIGHT",
    "in_reply_to_id": 314040941
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/337595106",
    "pull_request_review_id": 305309405,
    "id": 337595106,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNzU5NTEwNg==",
    "diff_hunk": "@@ -3786,7 +3792,7 @@ bool PeerLogicValidation::SendMessages(CNode* pto)\n             pto->vInventoryBlockToSend.clear();\n \n             // Check whether periodic sends should happen\n-            bool fSendTrickle = pto->fWhitelisted;\n+            bool fSendTrickle = pto->HasPermission(PF_NOBAN);",
    "path": "src/net_processing.cpp",
    "position": 107,
    "original_position": 107,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "According to @NicolasDorier it is needed for backward compatibility. However, it should still be possible to split up into its own permission while retaining backward compatibility.",
    "created_at": "2019-10-22T15:38:52Z",
    "updated_at": "2019-10-22T15:38:53Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r337595106",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/337595106"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r337595106"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/337595106/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 3795,
    "original_line": 3795,
    "side": "RIGHT",
    "in_reply_to_id": 314040941
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/337616697",
    "pull_request_review_id": 305336904,
    "id": 337616697,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNzYxNjY5Nw==",
    "diff_hunk": "@@ -3786,7 +3792,7 @@ bool PeerLogicValidation::SendMessages(CNode* pto)\n             pto->vInventoryBlockToSend.clear();\n \n             // Check whether periodic sends should happen\n-            bool fSendTrickle = pto->fWhitelisted;\n+            bool fSendTrickle = pto->HasPermission(PF_NOBAN);",
    "path": "src/net_processing.cpp",
    "position": 107,
    "original_position": 107,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "If we want to spilt this permission, it's best to do that before 0.19 is final.",
    "created_at": "2019-10-22T16:17:51Z",
    "updated_at": "2019-10-22T16:17:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r337616697",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/337616697"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r337616697"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/337616697/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 3795,
    "original_line": 3795,
    "side": "RIGHT",
    "in_reply_to_id": 314040941
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/337629606",
    "pull_request_review_id": 305353101,
    "id": 337629606,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNzYyOTYwNg==",
    "diff_hunk": "@@ -3786,7 +3792,7 @@ bool PeerLogicValidation::SendMessages(CNode* pto)\n             pto->vInventoryBlockToSend.clear();\n \n             // Check whether periodic sends should happen\n-            bool fSendTrickle = pto->fWhitelisted;\n+            bool fSendTrickle = pto->HasPermission(PF_NOBAN);",
    "path": "src/net_processing.cpp",
    "position": 107,
    "original_position": 107,
    "commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "original_commit_id": "c5b404e8f1973afe071a07c63ba1038eefe13f0f",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Splitting it would be a new feature, so it might be a bit late for 0.19",
    "created_at": "2019-10-22T16:43:39Z",
    "updated_at": "2019-10-22T16:43:39Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r337629606",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/337629606"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16248#discussion_r337629606"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16248"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/337629606/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 3795,
    "original_line": 3795,
    "side": "RIGHT",
    "in_reply_to_id": 314040941
  }
]