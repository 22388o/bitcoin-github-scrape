[
  {
    "sha": "1a27af1d7b5ec18b4248ead1eaf0f381047b4b24",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoxYTI3YWYxZDdiNWVjMThiNDI0OGVhZDFlYWYwZjM4MTA0N2I0YjI0",
    "commit": {
      "author": {
        "name": "Fabian Jahr",
        "email": "fjahr@protonmail.com",
        "date": "2020-08-22T18:25:23Z"
      },
      "committer": {
        "name": "Fabian Jahr",
        "email": "fjahr@protonmail.com",
        "date": "2021-03-23T19:32:47Z"
      },
      "message": "rpc: Improve gettxoutsetinfo help",
      "tree": {
        "sha": "e808644730e02cd69a244624b50edc8cf3d500be",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e808644730e02cd69a244624b50edc8cf3d500be"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1a27af1d7b5ec18b4248ead1eaf0f381047b4b24",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\nComment: GPGTools - https://gpgtools.org\n\niQJJBAABCgAzFiEEtFq20ghhrCHSdrgm8T0enYkHmM0FAmBaQmIVHGZqYWhyQHBy\nb3Rvbm1haWwuY29tAAoJEPE9Hp2JB5jNLqoP/AjK5Pr191ZgL5rdC7yW1v9uthIs\nDpHkfoyct77Qj4AW+MfmPHplw1A5eNbJbaeyCV+VQ3U0qaDNDu1K1lxTsYM45EF9\nC5jXYdoHkuDA41HhVh3ZSHtpN1a7SlMLGxph7MUG3QSMp1HrYIEIvUFZgzNzN6Da\nbpaf83ZYlJLf0WpPsg+iE4WetUEYwMhYTG+cV5DXoFy/4niYrjByVY7BOsM+f3dq\nHiF/9vdTa2djJRkT+Q1gGPlIwGsaCyWVmY1QXeYumpEhXw0WnU4kbxbDdE5o5GE4\nvOWIunIaIJ5VMI4UIv7iUxHQMK+8LWbrgebx8zIBKJiLJl2OQ6Qa985mkVaQUG3g\nWJcNVfBPAX+wfILCh1LaSMUhD/2Fqdjv6ig9YmXOOGez3i9ZOZfCCXAc1/YjQUpu\nkDhrNbhlczKnyBGGSMUrQmVdcTjTO/bmXvySsme+VRoo0nUtWA0Dskwu+vaDR6vv\neFmVxeetnAmtA32P+u3nT/VHfqHHQXx8jn8hZF60D7sU3mAbXht2CqfNIfLT657M\nmca9Wdo28eX4wadWV5IYwv1uoDVetm8lr3cQpm+8+df5MBYu5/8dlq6qsRpHcOnG\nPvsjJRFkR/+LdAr7t8+6eWM5b83i9e2ul6BZ538UQGkX+OlcNswyaX06fm9xs3oI\n6dBpOo/iN32VQA2V\n=LPED\n-----END PGP SIGNATURE-----",
        "payload": "tree e808644730e02cd69a244624b50edc8cf3d500be\nparent 92cf3a22e3c79ce28c5cc9dcbc18348c43cbe4d9\nauthor Fabian Jahr <fjahr@protonmail.com> 1598120723 +0200\ncommitter Fabian Jahr <fjahr@protonmail.com> 1616527967 +0100\n\nrpc: Improve gettxoutsetinfo help\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1a27af1d7b5ec18b4248ead1eaf0f381047b4b24",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/1a27af1d7b5ec18b4248ead1eaf0f381047b4b24",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1a27af1d7b5ec18b4248ead1eaf0f381047b4b24/comments",
    "author": {
      "login": "fjahr",
      "id": 1322187,
      "node_id": "MDQ6VXNlcjEzMjIxODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjahr",
      "html_url": "https://github.com/fjahr",
      "followers_url": "https://api.github.com/users/fjahr/followers",
      "following_url": "https://api.github.com/users/fjahr/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjahr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
      "organizations_url": "https://api.github.com/users/fjahr/orgs",
      "repos_url": "https://api.github.com/users/fjahr/repos",
      "events_url": "https://api.github.com/users/fjahr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjahr/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "fjahr",
      "id": 1322187,
      "node_id": "MDQ6VXNlcjEzMjIxODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjahr",
      "html_url": "https://github.com/fjahr",
      "followers_url": "https://api.github.com/users/fjahr/followers",
      "following_url": "https://api.github.com/users/fjahr/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjahr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
      "organizations_url": "https://api.github.com/users/fjahr/orgs",
      "repos_url": "https://api.github.com/users/fjahr/repos",
      "events_url": "https://api.github.com/users/fjahr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjahr/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "92cf3a22e3c79ce28c5cc9dcbc18348c43cbe4d9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/92cf3a22e3c79ce28c5cc9dcbc18348c43cbe4d9",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/92cf3a22e3c79ce28c5cc9dcbc18348c43cbe4d9"
      }
    ],
    "stats": {
      "total": 7,
      "additions": 4,
      "deletions": 3
    },
    "files": [
      {
        "sha": "268580c6e60d8527c1c1dfbe4b079e508d14dea7",
        "filename": "src/node/coinstats.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/1a27af1d7b5ec18b4248ead1eaf0f381047b4b24/src/node/coinstats.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/1a27af1d7b5ec18b4248ead1eaf0f381047b4b24/src/node/coinstats.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/node/coinstats.cpp?ref=1a27af1d7b5ec18b4248ead1eaf0f381047b4b24",
        "patch": "@@ -15,6 +15,7 @@\n \n #include <map>\n \n+// Database-independent metric indicating the UTXO set size\n static uint64_t GetBogoSize(const CScript& scriptPubKey)\n {\n     return 32 /* txid */ +"
      },
      {
        "sha": "de0300ac0b6242756e04a1b418c205e1fa61d196",
        "filename": "src/rpc/blockchain.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/1a27af1d7b5ec18b4248ead1eaf0f381047b4b24/src/rpc/blockchain.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/1a27af1d7b5ec18b4248ead1eaf0f381047b4b24/src/rpc/blockchain.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/blockchain.cpp?ref=1a27af1d7b5ec18b4248ead1eaf0f381047b4b24",
        "patch": "@@ -1050,15 +1050,15 @@ static RPCHelpMan gettxoutsetinfo()\n                 RPCResult{\n                     RPCResult::Type::OBJ, \"\", \"\",\n                     {\n-                        {RPCResult::Type::NUM, \"height\", \"The current block height (index)\"},\n-                        {RPCResult::Type::STR_HEX, \"bestblock\", \"The hash of the block at the tip of the chain\"},\n+                        {RPCResult::Type::NUM, \"height\", \"The block height (index) of the returned statistics\"},\n+                        {RPCResult::Type::STR_HEX, \"bestblock\", \"The hash of the block at which these statistics are calculated\"},\n                         {RPCResult::Type::NUM, \"transactions\", \"The number of transactions with unspent outputs\"},\n                         {RPCResult::Type::NUM, \"txouts\", \"The number of unspent transaction outputs\"},\n                         {RPCResult::Type::NUM, \"bogosize\", \"A meaningless metric for UTXO set size\"},\n                         {RPCResult::Type::STR_HEX, \"hash_serialized_2\", /* optional */ true, \"The serialized hash (only present if 'hash_serialized_2' hash_type is chosen)\"},\n                         {RPCResult::Type::STR_HEX, \"muhash\", /* optional */ true, \"The serialized hash (only present if 'muhash' hash_type is chosen)\"},\n                         {RPCResult::Type::NUM, \"disk_size\", \"The estimated size of the chainstate on disk\"},\n-                        {RPCResult::Type::STR_AMOUNT, \"total_amount\", \"The total amount\"},\n+                        {RPCResult::Type::STR_AMOUNT, \"total_amount\", \"The total amount of coins in the UTXO set\"},\n                     }},\n                 RPCExamples{\n                     HelpExampleCli(\"gettxoutsetinfo\", \"\")"
      }
    ]
  },
  {
    "sha": "4973c5175c5fd1f4791ea26e8ddefd6fb11ac1c3",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo0OTczYzUxNzVjNWZkMWY0NzkxZWEyNmU4ZGRlZmQ2ZmIxMWFjMWMz",
    "commit": {
      "author": {
        "name": "Fabian Jahr",
        "email": "fjahr@protonmail.com",
        "date": "2021-02-22T23:16:50Z"
      },
      "committer": {
        "name": "Fabian Jahr",
        "email": "fjahr@protonmail.com",
        "date": "2021-03-23T19:32:50Z"
      },
      "message": "test: Remove wallet dependency of utxo set hash test",
      "tree": {
        "sha": "bd6f5e2251c46d7f4d3c0194b7e0f7c8cafeda07",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/bd6f5e2251c46d7f4d3c0194b7e0f7c8cafeda07"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4973c5175c5fd1f4791ea26e8ddefd6fb11ac1c3",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\nComment: GPGTools - https://gpgtools.org\n\niQJJBAABCgAzFiEEtFq20ghhrCHSdrgm8T0enYkHmM0FAmBaQmIVHGZqYWhyQHBy\nb3Rvbm1haWwuY29tAAoJEPE9Hp2JB5jND78P/2zc3tphqeiWvJHVYaUkqZIu1BKt\n75AC//ND8knyWhnsnRwo7jr0/EXYOVIZkcNertckFzI0VVb22+NTXCMkY2k8DVO1\npr/yuiwjG6ELS4d1slb2MW0LZQaOnH0t/I7DQLyVFUcGZcuw2dBSaaWNtULPXS/m\njKeNJXyAK5rzx4HIQk987JvTGOwabvWnCaJ1sM5jC0WYyV2A+9GVIgyK7V0o1kMc\nF5528ln6S5SpupNabeZFTZYAfL63bVfW40D7F6FM6bzLB3nR2hR10uLP46Wcrwzl\njWg+oGvQHnkuTtMTCDI1OcmOA0+ClzUhmTxFrBix9DWvRhC/AQ6Ul88OkMmDxCh0\np/FeeNancrpuQQ4BwAWu5ZuCczlnA5k2vEsPGx8ZzMH7iHrSSjZBmzRoiXjDJxjy\ni0WwdWlz8uSi0EgcIRN3XblbnyKwyVZcnIxlwucq9cxKUzJ+cEr27xlohqOttPk3\ngSaxrVsmIHEW9gcRMEf1jfeMtjoLMpqjTFubihwhQ78oIyCcEhitMWn6MYYvcbFZ\nfuiCdZ6o4fgKT3k0xo0nbgi5u0D5O9snQhrDUFryNyER6WDwFhGoy2iz8+stKYrP\nBAYkLR5ZkUR6EpFRwZZ34jIIjCnkQc51V21mAPG+xIDc8seRp/3IUGzJKc66/v65\neDcD+fHLpZRmymBd\n=Ujcf\n-----END PGP SIGNATURE-----",
        "payload": "tree bd6f5e2251c46d7f4d3c0194b7e0f7c8cafeda07\nparent 1a27af1d7b5ec18b4248ead1eaf0f381047b4b24\nauthor Fabian Jahr <fjahr@protonmail.com> 1614035810 +0100\ncommitter Fabian Jahr <fjahr@protonmail.com> 1616527970 +0100\n\ntest: Remove wallet dependency of utxo set hash test\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4973c5175c5fd1f4791ea26e8ddefd6fb11ac1c3",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/4973c5175c5fd1f4791ea26e8ddefd6fb11ac1c3",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4973c5175c5fd1f4791ea26e8ddefd6fb11ac1c3/comments",
    "author": {
      "login": "fjahr",
      "id": 1322187,
      "node_id": "MDQ6VXNlcjEzMjIxODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjahr",
      "html_url": "https://github.com/fjahr",
      "followers_url": "https://api.github.com/users/fjahr/followers",
      "following_url": "https://api.github.com/users/fjahr/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjahr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
      "organizations_url": "https://api.github.com/users/fjahr/orgs",
      "repos_url": "https://api.github.com/users/fjahr/repos",
      "events_url": "https://api.github.com/users/fjahr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjahr/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "fjahr",
      "id": 1322187,
      "node_id": "MDQ6VXNlcjEzMjIxODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjahr",
      "html_url": "https://github.com/fjahr",
      "followers_url": "https://api.github.com/users/fjahr/followers",
      "following_url": "https://api.github.com/users/fjahr/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjahr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
      "organizations_url": "https://api.github.com/users/fjahr/orgs",
      "repos_url": "https://api.github.com/users/fjahr/repos",
      "events_url": "https://api.github.com/users/fjahr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjahr/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "1a27af1d7b5ec18b4248ead1eaf0f381047b4b24",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1a27af1d7b5ec18b4248ead1eaf0f381047b4b24",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/1a27af1d7b5ec18b4248ead1eaf0f381047b4b24"
      }
    ],
    "stats": {
      "total": 19,
      "additions": 9,
      "deletions": 10
    },
    "files": [
      {
        "sha": "214dea40c4c69bcdda1655357f200b166e2ed3a8",
        "filename": "test/functional/feature_utxo_set_hash.py",
        "status": "modified",
        "additions": 6,
        "deletions": 10,
        "changes": 16,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/4973c5175c5fd1f4791ea26e8ddefd6fb11ac1c3/test/functional/feature_utxo_set_hash.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/4973c5175c5fd1f4791ea26e8ddefd6fb11ac1c3/test/functional/feature_utxo_set_hash.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/feature_utxo_set_hash.py?ref=4973c5175c5fd1f4791ea26e8ddefd6fb11ac1c3",
        "patch": "@@ -6,7 +6,6 @@\n \n import struct\n \n-from test_framework.blocktools import create_transaction\n from test_framework.messages import (\n     CBlock,\n     COutPoint,\n@@ -15,15 +14,13 @@\n from test_framework.muhash import MuHash3072\n from test_framework.test_framework import BitcoinTestFramework\n from test_framework.util import assert_equal\n+from test_framework.wallet import MiniWallet\n \n class UTXOSetHashTest(BitcoinTestFramework):\n     def set_test_params(self):\n         self.num_nodes = 1\n         self.setup_clean_chain = True\n \n-    def skip_test_if_missing_module(self):\n-        self.skip_if_no_wallet()\n-\n     def test_deterministic_hash_results(self):\n         self.log.info(\"Test deterministic UTXO set hash results\")\n \n@@ -35,18 +32,17 @@ def test_muhash_implementation(self):\n         self.log.info(\"Test MuHash implementation consistency\")\n \n         node = self.nodes[0]\n+        wallet = MiniWallet(node)\n \n         # Generate 100 blocks and remove the first since we plan to spend its\n         # coinbase\n-        block_hashes = node.generate(100)\n+        block_hashes = wallet.generate(1) + node.generate(99)\n         blocks = list(map(lambda block: FromHex(CBlock(), node.getblock(block, False)), block_hashes))\n-        spending = blocks.pop(0)\n+        blocks.pop(0)\n \n         # Create a spending transaction and mine a block which includes it\n-        tx = create_transaction(node, spending.vtx[0].rehash(), node.getnewaddress(), amount=49)\n-        txid = node.sendrawtransaction(hexstring=tx.serialize_with_witness().hex(), maxfeerate=0)\n-\n-        tx_block = node.generateblock(output=node.getnewaddress(), transactions=[txid])\n+        txid = wallet.send_self_transfer(from_node=node)['txid']\n+        tx_block = node.generateblock(output=wallet.get_address(), transactions=[txid])\n         blocks.append(FromHex(CBlock(), node.getblock(tx_block['hash'], False)))\n \n         # Serialize the outputs that should be in the UTXO set and add them to"
      },
      {
        "sha": "a906a21dd01280a582e62a2d4e8c0416ec9e1ff6",
        "filename": "test/functional/test_framework/wallet.py",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/4973c5175c5fd1f4791ea26e8ddefd6fb11ac1c3/test/functional/test_framework/wallet.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/4973c5175c5fd1f4791ea26e8ddefd6fb11ac1c3/test/functional/test_framework/wallet.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/test_framework/wallet.py?ref=4973c5175c5fd1f4791ea26e8ddefd6fb11ac1c3",
        "patch": "@@ -49,6 +49,9 @@ def generate(self, num_blocks):\n             self._utxos.append({'txid': cb_tx['txid'], 'vout': 0, 'value': cb_tx['vout'][0]['value']})\n         return blocks\n \n+    def get_address(self):\n+        return self._address\n+\n     def get_utxo(self, *, txid=''):\n         \"\"\"\n         Returns a utxo and marks it as spent (pops it from the internal list)"
      }
    ]
  },
  {
    "sha": "4f2653a89018fa4d24bd2a551832a7410b682600",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo0ZjI2NTNhODkwMThmYTRkMjRiZDJhNTUxODMyYTc0MTBiNjgyNjAw",
    "commit": {
      "author": {
        "name": "Fabian Jahr",
        "email": "fjahr@protonmail.com",
        "date": "2021-02-22T23:41:39Z"
      },
      "committer": {
        "name": "Fabian Jahr",
        "email": "fjahr@protonmail.com",
        "date": "2021-03-23T19:47:24Z"
      },
      "message": "test: Use deterministic chain in utxo set hash test\n\nAlso melts the previously separated test cases into one.",
      "tree": {
        "sha": "648c4cc3ec812f83a20625fbe0a9622f499e7619",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/648c4cc3ec812f83a20625fbe0a9622f499e7619"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4f2653a89018fa4d24bd2a551832a7410b682600",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\nComment: GPGTools - https://gpgtools.org\n\niQJJBAABCgAzFiEEtFq20ghhrCHSdrgm8T0enYkHmM0FAmBaRfUVHGZqYWhyQHBy\nb3Rvbm1haWwuY29tAAoJEPE9Hp2JB5jNaT4P/3DoUJQaUtDy3DQe904OmiSomkKX\nZdKQS6jppxkc8ZM2EQyyQLXpUSDZAyMZYFz8AWc3uZdJv7ph1sTS+25Xqu5S6hYQ\nFz2IxWI3YDnFW+OC1KLbiRlt6yIz+3Jct184ZgD/jQRQNwQvpNWGNGvdYbqA95Xe\nMwt4HrJPEp//ueISfwafGNFZLJgTs032c4SK50nwBhPikTU1d11GjZsucn5JcV6N\nRSWXXkDzuUh1x62PIE3/EZF/lueI77V56HgMo0kiYOj6Iq1k452R/FgOeWU8lNmz\nsdotwUl1gH3p9FBPHyUhbnHF8e6imhgk8UM5w1PYX+obyka4gRk1hsaYzmbDcJOX\nJOyERSOxH11MNK2GMENY67WqksdFNwzjNI1tZm8c+zM66N38wkJgSBB0L/oRcQa0\nNyqoZH1kfnudrhDfFlrNtpx6mJmIBUWRaa7xmsUElhKgVce10GRQ4aGv2YGvwrWD\n2ClRRVHxIxIejBy1PIgrpUBfEFmO8VIxLQF5a+Z5+8k0gOUbdOxlVXglHgPUZUf5\nyjH9D89XbysBggi/+Sxs5m4GP9cl+5M+SRRgPoxit+hpybPWXraiSTALgouPOIBQ\nYPMqRsAOygSUeEafdAD+/I67njsO/VlVNuZQ7quhx+Qnj+KY3Sa7+U8kFa7hhbdq\nBwKdd1YJ3JTYtUNa\n=Y5qw\n-----END PGP SIGNATURE-----",
        "payload": "tree 648c4cc3ec812f83a20625fbe0a9622f499e7619\nparent 4973c5175c5fd1f4791ea26e8ddefd6fb11ac1c3\nauthor Fabian Jahr <fjahr@protonmail.com> 1614037299 +0100\ncommitter Fabian Jahr <fjahr@protonmail.com> 1616528844 +0100\n\ntest: Use deterministic chain in utxo set hash test\n\nAlso melts the previously separated test cases into one.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4f2653a89018fa4d24bd2a551832a7410b682600",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/4f2653a89018fa4d24bd2a551832a7410b682600",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4f2653a89018fa4d24bd2a551832a7410b682600/comments",
    "author": {
      "login": "fjahr",
      "id": 1322187,
      "node_id": "MDQ6VXNlcjEzMjIxODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjahr",
      "html_url": "https://github.com/fjahr",
      "followers_url": "https://api.github.com/users/fjahr/followers",
      "following_url": "https://api.github.com/users/fjahr/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjahr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
      "organizations_url": "https://api.github.com/users/fjahr/orgs",
      "repos_url": "https://api.github.com/users/fjahr/repos",
      "events_url": "https://api.github.com/users/fjahr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjahr/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "fjahr",
      "id": 1322187,
      "node_id": "MDQ6VXNlcjEzMjIxODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjahr",
      "html_url": "https://github.com/fjahr",
      "followers_url": "https://api.github.com/users/fjahr/followers",
      "following_url": "https://api.github.com/users/fjahr/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjahr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
      "organizations_url": "https://api.github.com/users/fjahr/orgs",
      "repos_url": "https://api.github.com/users/fjahr/repos",
      "events_url": "https://api.github.com/users/fjahr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjahr/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "4973c5175c5fd1f4791ea26e8ddefd6fb11ac1c3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4973c5175c5fd1f4791ea26e8ddefd6fb11ac1c3",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/4973c5175c5fd1f4791ea26e8ddefd6fb11ac1c3"
      }
    ],
    "stats": {
      "total": 14,
      "additions": 6,
      "deletions": 8
    },
    "files": [
      {
        "sha": "ce00faffee09e3a0c4c6df5e33d3a3083fd1c248",
        "filename": "test/functional/feature_utxo_set_hash.py",
        "status": "modified",
        "additions": 6,
        "deletions": 8,
        "changes": 14,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/4f2653a89018fa4d24bd2a551832a7410b682600/test/functional/feature_utxo_set_hash.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/4f2653a89018fa4d24bd2a551832a7410b682600/test/functional/feature_utxo_set_hash.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/feature_utxo_set_hash.py?ref=4f2653a89018fa4d24bd2a551832a7410b682600",
        "patch": "@@ -21,18 +21,13 @@ def set_test_params(self):\n         self.num_nodes = 1\n         self.setup_clean_chain = True\n \n-    def test_deterministic_hash_results(self):\n-        self.log.info(\"Test deterministic UTXO set hash results\")\n-\n-        # These depend on the setup_clean_chain option, the chain loaded from the cache\n-        assert_equal(self.nodes[0].gettxoutsetinfo()['hash_serialized_2'], \"b32ec1dda5a53cd025b95387aad344a801825fe46a60ff952ce26528f01d3be8\")\n-        assert_equal(self.nodes[0].gettxoutsetinfo(\"muhash\")['muhash'], \"dd5ad2a105c2d29495f577245c357409002329b9f4d6182c0af3dc2f462555c8\")\n-\n     def test_muhash_implementation(self):\n         self.log.info(\"Test MuHash implementation consistency\")\n \n         node = self.nodes[0]\n         wallet = MiniWallet(node)\n+        mocktime = node.getblockheader(node.getblockhash(0))['time'] + 1\n+        node.setmocktime(mocktime)\n \n         # Generate 100 blocks and remove the first since we plan to spend its\n         # coinbase\n@@ -73,8 +68,11 @@ def test_muhash_implementation(self):\n \n         assert_equal(finalized[::-1].hex(), node_muhash)\n \n+        self.log.info(\"Test deterministic UTXO set hash results\")\n+        assert_equal(node.gettxoutsetinfo()['hash_serialized_2'], \"5b1b44097406226c0eb8e1362cd17a1f346522cf9390a8175a57a5262cb1963f\")\n+        assert_equal(node.gettxoutsetinfo(\"muhash\")['muhash'], \"4b8803075d7151d06fad3e88b68ba726886794873fbfa841d12aefb2cc2b881b\")\n+\n     def run_test(self):\n-        self.test_deterministic_hash_results()\n         self.test_muhash_implementation()\n \n "
      }
    ]
  }
]