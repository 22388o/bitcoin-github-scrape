Saibato,2021-08-23 17:19:48,"While testing the GUI I noticed that after reloading a blank HD wallet or a key less wallet the icons\nare displayed not blanked 50%, and also not the correct strike thru HD icon.\n\nWhen we create the wallet that is handled correct since we init IsHDEnabled there with 0. (false)",https://github.com/bitcoin/bitcoin/pull/22781#issuecomment-903963942,903963942,
hebasto,2021-08-23 20:24:49,"Concept ACK.\n\n@jarolrod and me were discussing the same issue with `CWallet::IsHDEnabled` while working on https://github.com/bitcoin-core/gui/pull/403.",https://github.com/bitcoin/bitcoin/pull/22781#issuecomment-904096624,904096624,
theStack,2021-08-24 07:40:50,Concept ACK,https://github.com/bitcoin/bitcoin/pull/22781#issuecomment-904401880,904401880,
hebasto,2021-08-24 07:58:26,"Tested e6cae38dad49b196e91e24fef34591b1555f1390, works flawlessly.\n\nLoading of a blank wallet:\n| master (dbcb5742c48fd26f77e500291d7083e12eec741b) | this PR |\n|---|---|\n| ![Screenshot from 2021-08-24 10-54-33](https://user-images.githubusercontent.com/32963518/130579060-bafa6766-6b54-4a31-bf59-ce1c771c3e20.png) | ![Screenshot from 2021-08-24 10-53-39](https://user-images.githubuserconten",https://github.com/bitcoin/bitcoin/pull/22781#issuecomment-904412878,904412878,
Saibato,2021-08-24 09:18:19,"thx for fast confirm that it works, as intended.\n:+1:  squashed and rebased.",https://github.com/bitcoin/bitcoin/pull/22781#issuecomment-904472492,904472492,
achow101,2021-08-24 19:31:49,ACK 8733a8e84c4b2e484f6ed6159fcf5f29a360d42e,https://github.com/bitcoin/bitcoin/pull/22781#issuecomment-904917159,904917159,
hebasto,2021-08-23 20:28:33,"```suggestion\n        if (!spk_man->IsHDEnabled()) return false;\n        result = true;\n```",https://github.com/bitcoin/bitcoin/pull/22781#discussion_r694285906,694285906,src/wallet/wallet.cpp
hebasto,2021-08-23 20:32:54,"Or, even better:\n```diff\n--- a/src/wallet/wallet.cpp\n+++ b/src/wallet/wallet.cpp\n@@ -1364,11 +1364,11 @@ CAmount CWallet::GetDebit(const CTransaction& tx, const isminefilter& filter) co\n bool CWallet::IsHDEnabled() const\n {\n     // All Active ScriptPubKeyMans must be HD for this to be true\n-    bool result = true;\n+    if (GetActiveScriptPubKeyMans().empty()) return false;\n    ",https://github.com/bitcoin/bitcoin/pull/22781#discussion_r694288443,694288443,src/wallet/wallet.cpp
Saibato,2021-08-24 07:21:53,"I thought too about using a check if keys are empty, but then was not sure if empty will work correctly.\nSo the second suggestion ***might*** work, the first not, since we will never enter the loop when wallet is empty, and subsequently return true, when indeed false would be correct.\n\nI saw btw the discussion https://github.com/bitcoin-core/gui/pull/403 and found that a review statement the",https://github.com/bitcoin/bitcoin/pull/22781#discussion_r694571021,694571021,src/wallet/wallet.cpp
hebasto,2021-08-24 07:27:25,"> ... the first not, since we will never enter the loop when wallet is empty, and subsequently return true, when indeed false would be correct.\n\nI don't think this is correct description of the suggested change. Both lines are within a loop body, and there is no `return true;` statement at all.",https://github.com/bitcoin/bitcoin/pull/22781#discussion_r694574788,694574788,src/wallet/wallet.cpp
Saibato,2021-08-24 07:37:17,"yup :+1: , my fault , the init value is still false from the initial change in this pr, your suggestion is shorter and better...  ",https://github.com/bitcoin/bitcoin/pull/22781#discussion_r694581651,694581651,src/wallet/wallet.cpp
