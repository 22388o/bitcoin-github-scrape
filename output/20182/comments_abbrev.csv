DrahtBot,2020-10-19 07:07:57,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #20544 (build: Do not repeat warning names in -Werror=... options by hebasto)\n* #17227 (Qt: Add Android packaging support",https://github.com/bitcoin/bitcoin/pull/20182#issuecomment-711717245,711717245,
practicalswift,2020-10-20 07:37:09,Concept ACK: deduplication is good,https://github.com/bitcoin/bitcoin/pull/20182#issuecomment-712657660,712657660,
MarcoFalke,2020-10-21 09:07:15,The build system changes should go separate from the test/ci changes. Are they required or orthogonal?,https://github.com/bitcoin/bitcoin/pull/20182#issuecomment-713425454,713425454,
vasild,2020-10-21 09:14:05,"[@hebasto, correct me if I am wrong]\n\n@MarcoFalke, if they are going to go as separate PRs, then I think the CI change must go first and after that the `configure.ac` change. Otherwise we will get CI trying to compile with full `-Werror` and without `--enable-suppress-external-warnings` which will likely cause build failures.",https://github.com/bitcoin/bitcoin/pull/20182#issuecomment-713429491,713429491,
hebasto,2020-10-21 09:16:07,"> The build system changes should go separate from the test/ci changes. Are they required or orthogonal?\n\nCI changes require build system changes.\n",https://github.com/bitcoin/bitcoin/pull/20182#issuecomment-713430682,713430682,
vasild,2020-11-05 15:44:13,ACK 3a409f6,https://github.com/bitcoin/bitcoin/pull/20182#issuecomment-722459450,722459450,
hebasto,2020-11-26 20:16:05,"@fanquake @practicalswift @vasild @MarcoFalke \n\nMind (re)reviewing this PR (at the early stage of 22.0 cycle)?",https://github.com/bitcoin/bitcoin/pull/20182#issuecomment-734465216,734465216,
practicalswift,2020-11-26 21:29:41,cr ACK 2ca5156ab4309a0a1dd3e17e07a1f86a411589dd: patch looks correct!,https://github.com/bitcoin/bitcoin/pull/20182#issuecomment-734483889,734483889,
vasild,2020-11-27 12:43:45,"The non-QT changes look good. We now use `Werror` also on CentOS after ditching gcc 4, good!\n\nI don't feel confident enough to ACK the QT changes.",https://github.com/bitcoin/bitcoin/pull/20182#issuecomment-734817957,734817957,
hebasto,2020-11-27 12:52:51,"> I don't feel confident enough to ACK the QT changes.\n\nQt changes split into https://github.com/bitcoin-core/gui/pull/137 as [requested](https://github.com/bitcoin/bitcoin/pull/20182#discussion_r531428490) by @MarcoFalke.",https://github.com/bitcoin/bitcoin/pull/20182#issuecomment-734821357,734821357,
vasild,2020-11-27 13:02:33,QT changes are still in this PR.,https://github.com/bitcoin/bitcoin/pull/20182#issuecomment-734825116,734825116,
hebasto,2020-11-27 13:23:39,"> QT changes are still in this PR.\n\nYes, as this PR is based on https://github.com/bitcoin-core/gui/pull/137 (OP has been updated accordingly).",https://github.com/bitcoin/bitcoin/pull/20182#issuecomment-734833245,734833245,
hebasto,2020-12-01 20:23:24,"Rebased 2ca5156ab4309a0a1dd3e17e07a1f86a411589dd -> a00dd1e1824f9cb38551e5be4bd1c7be10c9db16 ([pr20182.07](https://github.com/hebasto/bitcoin/commits/pr20182.07) -> [pr20182.08](https://github.com/hebasto/bitcoin/commits/pr20182.08)) on top of the merged https://github.com/bitcoin-core/gui/pull/137.\n\nNow this PR contains non-Qt changes only.",https://github.com/bitcoin/bitcoin/pull/20182#issuecomment-736797168,736797168,
hebasto,2020-12-02 08:52:45,"> The build system changes should go separate from the test/ci changes.\n\nBuild system changes. i.e. the first commit, has been split out into a separated pr #20544.",https://github.com/bitcoin/bitcoin/pull/20182#issuecomment-737087084,737087084,
vasild,2020-12-03 06:36:29,"To resolve the dependency tangle with #20544 I think that:\n\n* This PR should drop its first commit (the `configure.ac` changes, contained in #20544). However the changes to `ci/test/06_script_a.sh` which are now part of that first commit should be moved to the second commit (ci changes).\n* This PR merged (it will not cause any ci breakage).\n* #20544 should remove the changes to `ci/test/06",https://github.com/bitcoin/bitcoin/pull/20182#issuecomment-737699237,737699237,
hebasto,2020-12-03 09:00:56,"> To resolve the dependency tangle with #20544 I think that:\n> \n>  * This PR should drop its first commit (the `configure.ac` changes, contained in #20544). However the changes to `ci/test/06_script_a.sh` which are now part of that first commit should be moved to the second commit (ci changes).\n> \n>  * This PR merged (it will not cause any ci breakage).\n> \n>  * #20544 should remove the",https://github.com/bitcoin/bitcoin/pull/20182#issuecomment-737763820,737763820,
hebasto,2020-12-03 09:05:24,"@MarcoFalke the assigned label could be switched from ""Build system"" to ""Tests"" now, right?",https://github.com/bitcoin/bitcoin/pull/20182#issuecomment-737766388,737766388,
hebasto,2020-12-03 14:19:38,"Updated cbb234c0da2e98aa9fec06896a78d2ffb66ad6b7 -> 0e2d9ef54cdf21fddcfec1d8188633fb159ea993 ([pr20182.10](https://github.com/hebasto/bitcoin/commits/pr20182.10) -> [pr20182.11](https://github.com/hebasto/bitcoin/commits/pr20182.11)):\n- removed unrelated changes\n- rebased on top of the recent CI changes\n",https://github.com/bitcoin/bitcoin/pull/20182#issuecomment-738023008,738023008,
MarcoFalke,2020-12-03 17:34:41,"ACK 0e2d9ef54cdf21fddcfec1d8188633fb159ea993 üëà\n\n<details><summary>Show signature and timestamp</summary>\n\nSignature:\n\n```\n-----BEGIN PGP SIGNED MESSAGE-----\nHash: SHA512\n\nACK 0e2d9ef54cdf21fddcfec1d8188633fb159ea993 üëà\n-----BEGIN PGP SIGNATURE-----\n\niQGzBAEBCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUjnwQv/f0RCPeajlgbPOL9U/Wqu/v50H3e8UfBTrKadvu4rz560W2Lhco",https://github.com/bitcoin/bitcoin/pull/20182#issuecomment-738166376,738166376,
hebasto,2020-12-03 18:56:05,"Updated 0e2d9ef54cdf21fddcfec1d8188633fb159ea993 -> 2f6fe4e4e9e9e35e713c0a20cf891b023592110a ([pr20182.11](https://github.com/hebasto/bitcoin/commits/pr20182.11) -> [pr20182.12](https://github.com/hebasto/bitcoin/commits/pr20182.12), [diff](https://github.com/hebasto/bitcoin/compare/pr20182.11..pr20182.12)):\n\n- addressed @MarcoFalke's [comment](https://github.com/bitcoin/bitcoin/pull/20182#dis",https://github.com/bitcoin/bitcoin/pull/20182#issuecomment-738218817,738218817,
practicalswift,2020-12-03 21:21:29,cr ACK 2f6fe4e4e9e9e35e713c0a20cf891b023592110a: patch looks correct,https://github.com/bitcoin/bitcoin/pull/20182#issuecomment-738326383,738326383,
MarcoFalke,2020-12-04 06:23:39,"re-ACK 2f6fe4e4e9 üèè\n\n<details><summary>Show signature and timestamp</summary>\n\nSignature:\n\n```\n-----BEGIN PGP SIGNED MESSAGE-----\nHash: SHA512\n\nre-ACK 2f6fe4e4e9 üèè\n-----BEGIN PGP SIGNATURE-----\n\niQGzBAEBCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUhqegv7Bn3eV9QYxtVtRWO0JksQf+6awouqP9K4uHCR4Wkq/xG1yFw6+fMlm9yw\nS/Zzv8tTdBfu3uwsqLGamAEd7lMrsN+nvqcnrl0gTOyao",https://github.com/bitcoin/bitcoin/pull/20182#issuecomment-738592519,738592519,
fanquake,2020-10-19 02:41:58,I'd rather wait until the next branch off so that we don't have to worry about compilers we are going to drop support for anyways.,https://github.com/bitcoin/bitcoin/pull/20182#discussion_r507380194,507380194,ci/test/00_setup_env_i686_centos.sh
hebasto,2020-10-19 08:12:08,That's why this is a draft for now :),https://github.com/bitcoin/bitcoin/pull/20182#discussion_r507553690,507553690,ci/test/00_setup_env_i686_centos.sh
practicalswift,2020-10-19 18:55:04,"I see `-Werror` being removed here, but where is it re-added? :)",https://github.com/bitcoin/bitcoin/pull/20182#discussion_r507989533,507989533,configure.ac
hebasto,2020-10-19 22:19:49,Here: https://github.com/bitcoin/bitcoin/blob/0179abea02576b4e4291d36d14a2915d3d3c477d/configure.ac#L385,https://github.com/bitcoin/bitcoin/pull/20182#discussion_r508095793,508095793,configure.ac
practicalswift,2020-10-20 07:36:32,"Heh, thanks! Literally on the same line :) Sorry.",https://github.com/bitcoin/bitcoin/pull/20182#discussion_r508274256,508274256,configure.ac
vasild,2020-10-21 08:37:26,Where does `WERROR_CONFIG` come from?,https://github.com/bitcoin/bitcoin/pull/20182#discussion_r509094004,509094004,ci/test/06_script_a.sh
vasild,2020-10-21 08:39:45,"Shouldn't this be done if the compiler is clang, rather than if the OS is macos?",https://github.com/bitcoin/bitcoin/pull/20182#discussion_r509095574,509095574,configure.ac
hebasto,2020-10-21 09:18:56,"> Where does `WERROR_CONFIG` come from?\n\nIt's from an previous version of this pull. Going to remove. Thanks!",https://github.com/bitcoin/bitcoin/pull/20182#discussion_r509122871,509122871,ci/test/06_script_a.sh
hebasto,2020-10-21 09:27:14,"Yes, `-Wunused-command-line-argument` is clang specific. So the `if test...` is not required at all, right?",https://github.com/bitcoin/bitcoin/pull/20182#discussion_r509128643,509128643,configure.ac
vasild,2020-10-21 09:51:50,Right!,https://github.com/bitcoin/bitcoin/pull/20182#discussion_r509144721,509144721,configure.ac
vasild,2020-10-21 10:02:36,"When can this workaround be removed? It is not clear from the linked comment.\n\nI think whenever `-Wno-foo` is added (silencing a class of warnings in Bitcoin Core code) that should link a PR that fixes those warnings or at least some concrete plan to ensure that the added `-Wno-foo` will not be forgotten and remain forever in `configure.ac`.",https://github.com/bitcoin/bitcoin/pull/20182#discussion_r509151537,509151537,configure.ac
hebasto,2020-10-21 10:08:22,"Right, but we have no a PR with a fix now ((",https://github.com/bitcoin/bitcoin/pull/20182#discussion_r509155134,509155134,configure.ac
MarcoFalke,2020-11-27 07:43:36,"this is not a `ci` change, but a gui refactor change? Should probably be separate",https://github.com/bitcoin/bitcoin/pull/20182#discussion_r531428490,531428490,src/qt/guiutil.cpp
hebasto,2020-11-27 08:13:55,Done in https://github.com/bitcoin-core/gui/pull/137,https://github.com/bitcoin/bitcoin/pull/20182#discussion_r531441249,531441249,src/qt/guiutil.cpp
hebasto,2020-12-01 20:24:10,^ merged :),https://github.com/bitcoin/bitcoin/pull/20182#discussion_r533698307,533698307,src/qt/guiutil.cpp
MarcoFalke,2020-12-02 08:12:55,should the diff in this line (9) be part of the first commit?,https://github.com/bitcoin/bitcoin/pull/20182#discussion_r533969645,533969645,ci/test/06_script_a.sh
hebasto,2020-12-02 08:31:40,"Why do you think so? The first commit seems complete to me, and it shouldn't fire any error on CI, no?",https://github.com/bitcoin/bitcoin/pull/20182#discussion_r533980398,533980398,ci/test/06_script_a.sh
MarcoFalke,2020-12-02 08:34:03,"Ok, then I think they should be a separate pull request: https://github.com/bitcoin/bitcoin/pull/20182#issuecomment-713425454\n\nDoing build system changes under the `ci: ` prefix seems confusing.",https://github.com/bitcoin/bitcoin/pull/20182#discussion_r533981863,533981863,ci/test/06_script_a.sh
hebasto,2020-12-02 08:51:46,Done in #20544.,https://github.com/bitcoin/bitcoin/pull/20182#discussion_r533992454,533992454,ci/test/06_script_a.sh
MarcoFalke,2020-12-02 09:14:12,"20544 fails without `--enable-suppress-external-warnings`:\n\n```\n/tmp/cirrus-ci-build/depends/arm-linux-gnueabihf/include/boost/asio/impl/error.ipp:102:15: error:   by ‚Äòvirtual std::__cxx11::string boost::asio::error::detail::misc_category::message(int) const‚Äô [-Werror=overloaded-virtual]\n   std::string message(int value) const\n               ^~~~~~~",https://github.com/bitcoin/bitcoin/pull/20182#discussion_r534006949,534006949,ci/test/06_script_a.sh
hebasto,2020-12-02 09:45:09,"> should the diff in this line (9) be part of the first commit?\n\nYou're right. Some jobs already have `--enable-werror` :man_facepalming: ",https://github.com/bitcoin/bitcoin/pull/20182#discussion_r534028493,534028493,ci/test/06_script_a.sh
MarcoFalke,2020-12-03 10:41:45,why? compiles fine for me,https://github.com/bitcoin/bitcoin/pull/20182#discussion_r535084164,535084164,ci/test/00_setup_env_s390x.sh
MarcoFalke,2020-12-03 11:20:57,I can't reproduce locally,https://github.com/bitcoin/bitcoin/pull/20182#discussion_r535125152,535125152,ci/test/00_setup_env_native_nowallet.sh
hebasto,2020-12-03 14:20:06,Thanks! [Updated](https://github.com/bitcoin/bitcoin/pull/20182#issuecomment-738023008).,https://github.com/bitcoin/bitcoin/pull/20182#discussion_r535264533,535264533,ci/test/00_setup_env_s390x.sh
hebasto,2020-12-03 14:20:19,[Updated](https://github.com/bitcoin/bitcoin/pull/20182#issuecomment-738023008).,https://github.com/bitcoin/bitcoin/pull/20182#discussion_r535264724,535264724,ci/test/00_setup_env_native_nowallet.sh
MarcoFalke,2020-12-03 16:50:55,I haven't tried this one yet. What is the error here?,https://github.com/bitcoin/bitcoin/pull/20182#discussion_r535404854,535404854,ci/test/00_setup_env_win64.sh
hebasto,2020-12-03 17:04:07,"https://cirrus-ci.com/task/6268532532969472\n```\nscript/interpreter.cpp: In function ‚Äòbool EvalChecksig(const valtype&, const valtype&, prevector<28, unsigned char>::const_iterator, prevector<28, unsigned char>::const_iterator, ScriptExecutionData&, unsigned int, const BaseSignatureChecker&, SigVersion, ScriptError*, bool&)‚Äô:\nscript/interpreter.cpp:429:1: error: control reaches end of non-voi",https://github.com/bitcoin/bitcoin/pull/20182#discussion_r535417826,535417826,ci/test/00_setup_env_win64.sh
MarcoFalke,2020-12-03 17:30:34,"Thanks. Can confirm locally:\n\n![Screenshot from 2020-12-03 18-29-59](https://user-images.githubusercontent.com/6399679/101065576-9a4bf300-3595-11eb-9a32-ea1d10c51c11.png)\n",https://github.com/bitcoin/bitcoin/pull/20182#discussion_r535438270,535438270,ci/test/00_setup_env_win64.sh
MarcoFalke,2020-12-03 17:34:36,Could mention with a comment?,https://github.com/bitcoin/bitcoin/pull/20182#discussion_r535441027,535441027,ci/test/00_setup_env_win64.sh
