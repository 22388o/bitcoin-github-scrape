btcdrak,2015-10-19T16:50:47Z,"Yes, I agree on the versioning. It would be good to mark the old API as deprecated and we can eventually remove it several releases later.\n",https://github.com/bitcoin/bitcoin/pull/6855#issuecomment-149278146,149278146,
MarcoFalke,2015-10-20T07:34:51Z,Concept ACK\n,https://github.com/bitcoin/bitcoin/pull/6855#issuecomment-149463204,149463204,
dcousens,2015-10-20T09:08:28Z,utACK/Concept ACK [if the REST interface is to continue being part of core]\nIt seems more and more out of scope though.\n,https://github.com/bitcoin/bitcoin/pull/6855#issuecomment-149486440,149486440,
laanwj,2015-10-20T10:13:07Z,"Concept ACK.\n\n> utACK/Concept ACK [if the REST interface is to continue being part of core]\n> It seems more and more out of scope though.\n\nYes, I definitely think REST should move out of core, and be a wrapper that accesses core through RPC. This is increasingly out of scope.\n",https://github.com/bitcoin/bitcoin/pull/6855#issuecomment-149510599,149510599,
lclc,2015-10-20T11:20:08Z,"The discussion regarding REST being in core or not was already back then in the initial PR: https://github.com/bitcoin/bitcoin/pull/2844\n\nQuoting @jgarzik (https://github.com/bitcoin/bitcoin/pull/2844#issuecomment-22459961):\n\n> - Dramatically easier interface for developers and general queries\n> - Out of the box SSL support, already built into bitcoind\n> - This pull adds functionality not av",https://github.com/bitcoin/bitcoin/pull/6855#issuecomment-149531407,149531407,
jonasschnelli,2015-10-20T11:37:07Z,"> [...] I definitely think REST should move out of core [...]\n\nAgree with @laanwj.\n\n> [...] and be a wrapper that accesses core through RPC. This is increasingly out of scope.\n\nDisagree to use RPC. Current RPC implementation is inefficiency. If we tend going towards the ""wrapper-approach"" and supporting one core interface, we should use something more efficient like ZMQ/TCP (with package tra",https://github.com/bitcoin/bitcoin/pull/6855#issuecomment-149534519,149534519,
dcousens,2015-10-20T11:39:57Z,"@jonasschnelli I think the end result is that there should only be 1 communication channel (other than the network protocol itself) to communicate with bitcoind.\nA REST interface would at least have clear semantics and easy plug and play, but its existence along with the RPC server _as well_ is IMHO out of scope.\n",https://github.com/bitcoin/bitcoin/pull/6855#issuecomment-149535160,149535160,
jonasschnelli,2015-10-20T11:45:57Z,"@dcousens Agree. Currently we support three protocol: ZMQ, JSON RPC, REST. I personally tend to support the most core-ish one, which would be ZMQ. But I think the JSON RPC server is fundamental for the current bitcoin-core user-base. Splitting off the server would therefore be relatively hard to achieve.\n",https://github.com/bitcoin/bitcoin/pull/6855#issuecomment-149536306,149536306,
dcousens,2015-10-20T11:56:23Z,"IMHO,  REST > RPC > ZMQ.  Simply because the amount of dependencies (and therefore, underlying code) required grows with each interface:\n- REST - HTTP\n- RPC - HTTP, RPC protocol\n- ZMQ - native ZMQ bindings\n\nAs mentioned, the RPC interface is also inefficient due to its reliance on using JSON solely,  whereas a REST interface could support whatever is needed.\nIMHO it should be binary only (di",https://github.com/bitcoin/bitcoin/pull/6855#issuecomment-149539857,149539857,
laanwj,2015-10-20T12:00:28Z,">   Disagree to use RPC. Current RPC implementation is inefficiency. If we tend going towards the ""wrapper-approach"" and supporting one core interface, we should use something more efficient like ZMQ/TCP (with package transmission guarantee). \n\nThis discussion is tangential, but you're confounding a few things:\n- IP network protocol (TCP, UDP)\n- Transport protocol (HTTP, ZMQ)\n- Request protoc",https://github.com/bitcoin/bitcoin/pull/6855#issuecomment-149541752,149541752,
jgarzik,2015-10-20T12:31:16Z,"Weak NAK - this was always considered and discussed - proposed direction from IRC at the time was to add ""/v2/"" should any v2 API version appear.\n",https://github.com/bitcoin/bitcoin/pull/6855#issuecomment-149550545,149550545,
sipa,2015-10-20T12:41:40Z,"@laanwj I'm not sure I agree. Assuming the wallet moves to a separate\nprocess, I think I'd rather keep REST and drop authenticated RPC. The only\nthing a pure router should need as authenticated interface is things like\nrestart and reload config, for which there are fine other solutions\n(signals, ...).\n",https://github.com/bitcoin/bitcoin/pull/6855#issuecomment-149552735,149552735,
laanwj,2015-10-20T12:50:54Z,"@sipa I agree that given that the whole API could be redesigned from scratch, that would have been a better choice.\nBut realistically I don't see JSON RPC going away any time soon, though. The RPC interface is all bitcoind has as a stable interface. Even if the wallet is to move to a separate process (which has been said many times before, but there are no concrete plans by anyone to work on this",https://github.com/bitcoin/bitcoin/pull/6855#issuecomment-149556429,149556429,
lclc,2015-10-20T13:24:57Z,@jgarzik I saw it in the PR. The difference is that if we add later later it would be:\n/rest/tx      is v1\n/rest/v2/tx is v2\n..\n\nWith this PR it would be:\n/rest/tx      being always the latest (v1 atm)\n/rest/v1/tx is v1\n/rest/v2/tx is v2\n..\n\nSo there is no way to always use the latest API and have consistent REST URIs with the current implementation. More details in the linked Stackover,https://github.com/bitcoin/bitcoin/pull/6855#issuecomment-149567559,149567559,
btcdrak,2015-10-20T13:46:16Z,"> /rest/tx being always the latest (v1 atm)\n\nAbsolute NACK on that, you cant have APIs upgrading themselves to new versions. Consumers explicitly address the version they need. `/rest/tx` can only become a legacy path to be deprecated, or remain forever an alias for `/rest/v1/tx`.\n",https://github.com/bitcoin/bitcoin/pull/6855#issuecomment-149572894,149572894,
jgarzik,2015-10-20T13:49:07Z,"Right @btcdrak \n\n/rest/tx is always by definition v1 and that should not auto-upgrade for users - that just means future breakage for users.\n\nThus ""weak NAK"" - if people really want the duplicative /v1/ that's fine - but within API versioning needs the current works as long as future versions change the URL.\n",https://github.com/bitcoin/bitcoin/pull/6855#issuecomment-149573533,149573533,
laanwj,2015-10-20T13:52:46Z,Do tend to agree with @jgarzik and @btcdrak here . I don't think adding an alias for v1 is desirable. It's kind of too late to change the URL for v1: having people migrate now is a waste of time. And when there is a v2 it's straightforward to add a /v2/ for that.\n,https://github.com/bitcoin/bitcoin/pull/6855#issuecomment-149574560,149574560,
sipa,2015-10-20T13:56:52Z,"Agree about that. The current URL should always refer to v1. If we need a\nv2, a new URL style can be included.\n",https://github.com/bitcoin/bitcoin/pull/6855#issuecomment-149575754,149575754,
laanwj,2015-10-20T13:58:05Z,"Ok, closing this then\n",https://github.com/bitcoin/bitcoin/pull/6855#issuecomment-149576108,149576108,
lclc,2015-10-20T14:10:08Z,"I saw it as giving people a choice, like I wrote in the PR.\nTo have both, consistent URIs and versioning (as described in the link).\n\nSince we talk about developers using this API I'd expect that they know what they decide for.\n",https://github.com/bitcoin/bitcoin/pull/6855#issuecomment-149579720,149579720,
sipa,2015-10-20T14:17:18Z,"I'm generally opposed to have multiple interfaces to get the same\ninformation, as it creates unclear expectations.\n\nIf both / and /v1/ exist, I think it's much less clear what the future for\n/ is.\n\nFor now, only one API exists, and there is no reason to assume we'll need a\nsecond. If we do need one, we can introduce it as v2, and those who don't\nknow about it can keep using all existing UR",https://github.com/bitcoin/bitcoin/pull/6855#issuecomment-149581411,149581411,
dcousens,2015-10-21T01:00:28Z,"If the wallet were ever to be separated from `bitcoind`,  I think switching to the REST only interface would make sense.\nUntil then,  I guess we're left supporting both?\n",https://github.com/bitcoin/bitcoin/pull/6855#issuecomment-149749008,149749008,
jgarzik,2015-10-21T02:52:07Z,"The wallet _can_ be separated from bitcoind (--disable-wallet).  I call this ""router mode"", and is the long term direction of bitcoind.\n",https://github.com/bitcoin/bitcoin/pull/6855#issuecomment-149767228,149767228,
dcousens,2015-10-21T03:29:16Z,"@jgarzik I meant in terms of the underlying implementation, not the command line flag.\n",https://github.com/bitcoin/bitcoin/pull/6855#issuecomment-149770943,149770943,
