[
  {
    "sha": "fa3cc0bfc4c4fc13a384fc291403c9fd41082f18",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYTNjYzBiZmM0YzRmYzEzYTM4NGZjMjkxNDAzYzlmZDQxMDgyZjE4",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2020-03-30T17:59:13Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2020-03-30T19:18:42Z"
      },
      "message": "test: Remove unsafe BOOST_TEST_MESSAGE",
      "tree": {
        "sha": "a28305955fc23be7669f3e7eb83ca68900a3aa69",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a28305955fc23be7669f3e7eb83ca68900a3aa69"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa3cc0bfc4c4fc13a384fc291403c9fd41082f18",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUgq9gv/X6dNirGioj0hlLJ5/ApsPksqPqGq75yJtGPPZtg3kKk+dHyFSimY0QHj\nxGHV1SgALZyFtt4KZAVvnImoXhwet3+QH9RnFAB5IIZhnWvPjjsCyy6/w9JF+Rww\n+Vx7qiIarT+YHqfT4u+PUjSdge+teNAMtrXkI1NCJLjUArdkv/yz/TsJ/GaRvYPR\nmxQL49fNM35y3dPeDAu+J6p39Wjgo4aKExLLZv4G3Ad0Ixa/3578/keH+SFosIFp\n8aPofQcXfbzNaOGZSMc7FbIZdCEwqx8X8DVaSUJvtfdXa3eYLwqYY2YWsBXfubpu\n+MJd6sq9NkQjXswdr8qI8Zq2Ax2erGGkcbeAai4RxAzZDuRWVCm8D9ip0OxDn2W/\nS/QTCi6J1n55sjcPSWVD6BpeyDKejjdqI9J74nEyAXo32x1Mpd2LIX4DsCScvXoc\nS/52akPHhqjqVHKiPzeDQARMyjRIFyJzVI89f42/7wcImTKnRKFTJegV3B9W83r9\nj5I3SJrd\n=hbHN\n-----END PGP SIGNATURE-----",
        "payload": "tree a28305955fc23be7669f3e7eb83ca68900a3aa69\nparent 5f9cd62f33fb4d440173b9c376cadf4887e81e9d\nauthor MarcoFalke <falke.marco@gmail.com> 1585591153 -0400\ncommitter MarcoFalke <falke.marco@gmail.com> 1585595922 -0400\n\ntest: Remove unsafe BOOST_TEST_MESSAGE\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa3cc0bfc4c4fc13a384fc291403c9fd41082f18",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fa3cc0bfc4c4fc13a384fc291403c9fd41082f18",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa3cc0bfc4c4fc13a384fc291403c9fd41082f18/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "5f9cd62f33fb4d440173b9c376cadf4887e81e9d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5f9cd62f33fb4d440173b9c376cadf4887e81e9d",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/5f9cd62f33fb4d440173b9c376cadf4887e81e9d"
      }
    ],
    "stats": {
      "total": 28,
      "additions": 12,
      "deletions": 16
    },
    "files": [
      {
        "sha": "93c5973a215052fa2011076c2c6e06bb02c5e15b",
        "filename": "src/Makefile.test.include",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa3cc0bfc4c4fc13a384fc291403c9fd41082f18/src/Makefile.test.include",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa3cc0bfc4c4fc13a384fc291403c9fd41082f18/src/Makefile.test.include",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/Makefile.test.include?ref=fa3cc0bfc4c4fc13a384fc291403c9fd41082f18",
        "patch": "@@ -1011,7 +1011,7 @@ endif\n \n %.cpp.test: %.cpp\n \t@echo Running tests: `cat $< | grep -E \"(BOOST_FIXTURE_TEST_SUITE\\\\(|BOOST_AUTO_TEST_SUITE\\\\()\" | cut -d '(' -f 2 | cut -d ',' -f 1 | cut -d ')' -f 1` from $<\n-\t$(AM_V_at)$(TEST_BINARY) --catch_system_errors=no -l test_suite -t \"`cat $< | grep -E \"(BOOST_FIXTURE_TEST_SUITE\\\\(|BOOST_AUTO_TEST_SUITE\\\\()\" | cut -d '(' -f 2 | cut -d ',' -f 1 | cut -d ')' -f 1`\" > $<.log 2>&1 || (cat $<.log && false)\n+\t$(AM_V_at)$(TEST_BINARY) --catch_system_errors=no -l test_suite -t \"`cat $< | grep -E \"(BOOST_FIXTURE_TEST_SUITE\\\\(|BOOST_AUTO_TEST_SUITE\\\\()\" | cut -d '(' -f 2 | cut -d ',' -f 1 | cut -d ')' -f 1`\" -- DEBUG_LOG_OUT > $<.log 2>&1 || (cat $<.log && false)\n \n %.json.h: %.json\n \t@$(MKDIR_P) $(@D)"
      },
      {
        "sha": "f32243d1d3a0fe9db6698a1ed73b9341bbdd4b8f",
        "filename": "src/test/main.cpp",
        "status": "modified",
        "additions": 11,
        "deletions": 7,
        "changes": 18,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa3cc0bfc4c4fc13a384fc291403c9fd41082f18/src/test/main.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa3cc0bfc4c4fc13a384fc291403c9fd41082f18/src/test/main.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/main.cpp?ref=fa3cc0bfc4c4fc13a384fc291403c9fd41082f18",
        "patch": "@@ -11,12 +11,16 @@\n \n #include <test/util/setup_common.h>\n \n-/** Redirect debug log to boost log */\n+#include <iostream>\n+\n+/** Redirect debug log to unit_test.log files */\n const std::function<void(const std::string&)> G_TEST_LOG_FUN = [](const std::string& s) {\n-    if (s.back() == '\\n') {\n-        // boost will insert the new line\n-        BOOST_TEST_MESSAGE(s.substr(0, s.size() - 1));\n-    } else {\n-        BOOST_TEST_MESSAGE(s);\n-    }\n+    static const bool should_log{std::any_of(\n+        &boost::unit_test::framework::master_test_suite().argv[1],\n+        &boost::unit_test::framework::master_test_suite().argv[boost::unit_test::framework::master_test_suite().argc],\n+        [](const char* arg) {\n+            return std::string{\"DEBUG_LOG_OUT\"} == arg;\n+        })};\n+    if (!should_log) return;\n+    std::cout << s;\n };"
      },
      {
        "sha": "70eea343633aedfa0a7eb6e415cd38279e929f8f",
        "filename": "test/sanitizer_suppressions/tsan",
        "status": "modified",
        "additions": 0,
        "deletions": 8,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa3cc0bfc4c4fc13a384fc291403c9fd41082f18/test/sanitizer_suppressions/tsan",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa3cc0bfc4c4fc13a384fc291403c9fd41082f18/test/sanitizer_suppressions/tsan",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/sanitizer_suppressions/tsan?ref=fa3cc0bfc4c4fc13a384fc291403c9fd41082f18",
        "patch": "@@ -7,14 +7,6 @@ deadlock:WalletBatch\n # Intentional deadlock in tests\n deadlock:TestPotentialDeadLockDetected\n \n-# Race due to unprotected calls to thread-unsafe BOOST_TEST_MESSAGE from different threads:\n-# * G_TEST_LOG_FUN in the index thread\n-# * boost test case invoker (entering a test case) in the main thread\n-# TODO: get rid of BOOST_ macros, see also https://github.com/bitcoin/bitcoin/issues/8670\n-race:blockfilter_index_initial_sync_invoker\n-race:txindex_initial_sync_invoker\n-race:validation_block_tests::TestSubscriber\n-\n # Wildcard for all gui tests, should be replaced with non-wildcard suppressions\n race:src/qt/test/*\n deadlock:src/qt/test/*"
      }
    ]
  }
]