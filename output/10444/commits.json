[
  {
    "sha": "e4b207fc36075e8ee13c5d3310d340d01b78a286",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzplNGIyMDdmYzM2MDc1ZThlZTEzYzVkMzMxMGQzNDBkMDFiNzhhMjg2",
    "commit": {
      "author": {
        "name": "shaolinfry",
        "email": "shaolinfry@protonmail.ch",
        "date": "2017-05-08T18:06:24Z"
      },
      "committer": {
        "name": "James Hilliard",
        "email": "james.hilliard1@gmail.com",
        "date": "2017-05-22T03:30:21Z"
      },
      "message": "Reduced threshold MASF to require segwit signalling\n\nThis is a BIP9 deployment at 65% that requires signalling\nof segwit upon activation if segwit is not already\nlocked-in or activated. Signalling requirement stop at\nsegwit expiry, or activation.",
      "tree": {
        "sha": "7a50eb1a606aa1609278fa0c4397eebbaa9950e8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7a50eb1a606aa1609278fa0c4397eebbaa9950e8"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e4b207fc36075e8ee13c5d3310d340d01b78a286",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e4b207fc36075e8ee13c5d3310d340d01b78a286",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/e4b207fc36075e8ee13c5d3310d340d01b78a286",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e4b207fc36075e8ee13c5d3310d340d01b78a286/comments",
    "author": {
      "login": "shaolinfry",
      "id": 19836615,
      "node_id": "MDQ6VXNlcjE5ODM2NjE1",
      "avatar_url": "https://avatars.githubusercontent.com/u/19836615?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/shaolinfry",
      "html_url": "https://github.com/shaolinfry",
      "followers_url": "https://api.github.com/users/shaolinfry/followers",
      "following_url": "https://api.github.com/users/shaolinfry/following{/other_user}",
      "gists_url": "https://api.github.com/users/shaolinfry/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/shaolinfry/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/shaolinfry/subscriptions",
      "organizations_url": "https://api.github.com/users/shaolinfry/orgs",
      "repos_url": "https://api.github.com/users/shaolinfry/repos",
      "events_url": "https://api.github.com/users/shaolinfry/events{/privacy}",
      "received_events_url": "https://api.github.com/users/shaolinfry/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jameshilliard",
      "id": 3298484,
      "node_id": "MDQ6VXNlcjMyOTg0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3298484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jameshilliard",
      "html_url": "https://github.com/jameshilliard",
      "followers_url": "https://api.github.com/users/jameshilliard/followers",
      "following_url": "https://api.github.com/users/jameshilliard/following{/other_user}",
      "gists_url": "https://api.github.com/users/jameshilliard/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jameshilliard/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jameshilliard/subscriptions",
      "organizations_url": "https://api.github.com/users/jameshilliard/orgs",
      "repos_url": "https://api.github.com/users/jameshilliard/repos",
      "events_url": "https://api.github.com/users/jameshilliard/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jameshilliard/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "964a185cc83af34587194a6ecda3ed9cf6b49263",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/964a185cc83af34587194a6ecda3ed9cf6b49263",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/964a185cc83af34587194a6ecda3ed9cf6b49263"
      }
    ],
    "stats": {
      "total": 40,
      "additions": 39,
      "deletions": 1
    },
    "files": [
      {
        "sha": "55ae45a1685fb3738bbd7ee1856ef5732f5e81d4",
        "filename": "src/chainparams.cpp",
        "status": "modified",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e4b207fc36075e8ee13c5d3310d340d01b78a286/src/chainparams.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e4b207fc36075e8ee13c5d3310d340d01b78a286/src/chainparams.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/chainparams.cpp?ref=e4b207fc36075e8ee13c5d3310d340d01b78a286",
        "patch": "@@ -96,6 +96,11 @@ class CMainParams : public CChainParams {\n         consensus.vDeployments[Consensus::DEPLOYMENT_SEGWIT].nStartTime = 1479168000; // November 15th, 2016.\n         consensus.vDeployments[Consensus::DEPLOYMENT_SEGWIT].nTimeout = 1510704000; // November 15th, 2017.\n \n+        // Deployment of SEGSIGNAL\n+        consensus.vDeployments[Consensus::DEPLOYMENT_SEGSIGNAL].bit = 2;\n+        consensus.vDeployments[Consensus::DEPLOYMENT_SEGSIGNAL].nStartTime = 1496275200; // June 1st, 2017.\n+        consensus.vDeployments[Consensus::DEPLOYMENT_SEGSIGNAL].nTimeout = 1510704000; // November 15th, 2017.\n+\n         // The best chain should have at least this much work.\n         consensus.nMinimumChainWork = uint256S(\"0x0000000000000000000000000000000000000000003f94d1ad391682fe038bf5\");\n "
      },
      {
        "sha": "8f8166985038cc7e855b1d68012127c3addb4a32",
        "filename": "src/consensus/params.h",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e4b207fc36075e8ee13c5d3310d340d01b78a286/src/consensus/params.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e4b207fc36075e8ee13c5d3310d340d01b78a286/src/consensus/params.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/consensus/params.h?ref=e4b207fc36075e8ee13c5d3310d340d01b78a286",
        "patch": "@@ -17,6 +17,7 @@ enum DeploymentPos\n     DEPLOYMENT_TESTDUMMY,\n     DEPLOYMENT_CSV, // Deployment of BIP68, BIP112, and BIP113.\n     DEPLOYMENT_SEGWIT, // Deployment of BIP141, BIP143, and BIP147.\n+    DEPLOYMENT_SEGSIGNAL, // Deployment of SEGSIGNAL\n     // NOTE: Also add new deployments to VersionBitsDeploymentInfo in versionbits.cpp\n     MAX_VERSION_BITS_DEPLOYMENTS\n };"
      },
      {
        "sha": "78b57f5d00fd71760167fd03bb51e1155b58563c",
        "filename": "src/validation.cpp",
        "status": "modified",
        "additions": 19,
        "deletions": 0,
        "changes": 19,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e4b207fc36075e8ee13c5d3310d340d01b78a286/src/validation.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e4b207fc36075e8ee13c5d3310d340d01b78a286/src/validation.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/validation.cpp?ref=e4b207fc36075e8ee13c5d3310d340d01b78a286",
        "patch": "@@ -1851,6 +1851,18 @@ bool ConnectBlock(const CBlock& block, CValidationState& state, CBlockIndex* pin\n         flags |= SCRIPT_VERIFY_NULLDUMMY;\n     }\n \n+    // SEGSIGNAL mandatory segwit signalling.\n+    if ( VersionBitsState(pindex->pprev, chainparams.GetConsensus(), Consensus::DEPLOYMENT_SEGSIGNAL, versionbitscache) == THRESHOLD_ACTIVE &&\n+         !IsWitnessLockedIn(pindex->pprev, chainparams.GetConsensus()) &&  // Segwit is not locked in\n+         !IsWitnessEnabled(pindex->pprev, chainparams.GetConsensus()) ) // and is not active.\n+    {\n+        bool fVersionBits = (pindex->nVersion & VERSIONBITS_TOP_MASK) == VERSIONBITS_TOP_BITS;\n+        bool fSegbit = (pindex->nVersion & VersionBitsMask(chainparams.GetConsensus(), Consensus::DEPLOYMENT_SEGWIT)) != 0;\n+        if (!(fVersionBits && fSegbit)) {\n+            return state.DoS(0, error(\"ConnectBlock(): relayed block must signal for segwit, please upgrade\"), REJECT_INVALID, \"bad-no-segwit\");\n+        }\n+    }\n+\n     int64_t nTime2 = GetTimeMicros(); nTimeForks += nTime2 - nTime1;\n     LogPrint(\"bench\", \"    - Fork checks: %.2fms [%.2fs]\\n\", 0.001 * (nTime2 - nTime1), nTimeForks * 0.000001);\n \n@@ -2918,6 +2930,13 @@ bool IsWitnessEnabled(const CBlockIndex* pindexPrev, const Consensus::Params& pa\n     return (VersionBitsState(pindexPrev, params, Consensus::DEPLOYMENT_SEGWIT, versionbitscache) == THRESHOLD_ACTIVE);\n }\n \n+// Check if Segregated Witness is Locked In\n+bool IsWitnessLockedIn(const CBlockIndex* pindexPrev, const Consensus::Params& params)\n+{\n+    LOCK(cs_main);\n+    return (VersionBitsState(pindexPrev, params, Consensus::DEPLOYMENT_SEGWIT, versionbitscache) == THRESHOLD_LOCKED_IN);\n+}\n+\n // Compute at which vout of the block's coinbase transaction the witness\n // commitment occurs, or -1 if not found.\n static int GetWitnessCommitmentIndex(const CBlock& block)"
      },
      {
        "sha": "f40baeed4cc4b06e6a04b1d30b794f789c032bcd",
        "filename": "src/validation.h",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e4b207fc36075e8ee13c5d3310d340d01b78a286/src/validation.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e4b207fc36075e8ee13c5d3310d340d01b78a286/src/validation.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/validation.h?ref=e4b207fc36075e8ee13c5d3310d340d01b78a286",
        "patch": "@@ -503,6 +503,9 @@ bool TestBlockValidity(CValidationState& state, const CChainParams& chainparams,\n /** Check whether witness commitments are required for block. */\n bool IsWitnessEnabled(const CBlockIndex* pindexPrev, const Consensus::Params& params);\n \n+/** Check whether witness commitments are required for block. */\n+bool IsWitnessLockedIn(const CBlockIndex* pindexPrev, const Consensus::Params& params);\n+\n /** When there are blocks in the active chain with missing data, rewind the chainstate and remove them from the block index */\n bool RewindBlockIndex(const CChainParams& params);\n "
      },
      {
        "sha": "23a0f0236f2e1311a672a7b833d4cfbffc57d6df",
        "filename": "src/versionbits.cpp",
        "status": "modified",
        "additions": 11,
        "deletions": 1,
        "changes": 12,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e4b207fc36075e8ee13c5d3310d340d01b78a286/src/versionbits.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e4b207fc36075e8ee13c5d3310d340d01b78a286/src/versionbits.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/versionbits.cpp?ref=e4b207fc36075e8ee13c5d3310d340d01b78a286",
        "patch": "@@ -18,6 +18,10 @@ const struct BIP9DeploymentInfo VersionBitsDeploymentInfo[Consensus::MAX_VERSION\n     {\n         /*.name =*/ \"segwit\",\n         /*.gbt_force =*/ true,\n+    },\n+    {\n+        /*.name =*/ \"segsignal\",\n+        /*.gbt_force =*/ true,\n     }\n };\n \n@@ -148,7 +152,13 @@ class VersionBitsConditionChecker : public AbstractThresholdConditionChecker {\n     int64_t BeginTime(const Consensus::Params& params) const { return params.vDeployments[id].nStartTime; }\n     int64_t EndTime(const Consensus::Params& params) const { return params.vDeployments[id].nTimeout; }\n     int Period(const Consensus::Params& params) const { return params.nMinerConfirmationWindow; }\n-    int Threshold(const Consensus::Params& params) const { return params.nRuleChangeActivationThreshold; }\n+    int Threshold(const Consensus::Params& params) const {\n+        if (params.vDeployments[id].bit == params.vDeployments[Consensus::DEPLOYMENT_SEGSIGNAL].bit &&\n+            params.vDeployments[id].nStartTime == params.vDeployments[Consensus::DEPLOYMENT_SEGSIGNAL].nStartTime) {\n+            return 1311; // 65% threshold for SEGSIGNAL only\n+        }\n+        return params.nRuleChangeActivationThreshold;\n+    }\n \n     bool Condition(const CBlockIndex* pindex, const Consensus::Params& params) const\n     {"
      }
    ]
  },
  {
    "sha": "d5779e474f4e6d00fc2e5a2c0816404834705dce",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkNTc3OWU0NzRmNGU2ZDAwZmMyZTVhMmMwODE2NDA0ODM0NzA1ZGNl",
    "commit": {
      "author": {
        "name": "James Hilliard",
        "email": "james.hilliard1@gmail.com",
        "date": "2017-05-22T03:34:05Z"
      },
      "committer": {
        "name": "James Hilliard",
        "email": "james.hilliard1@gmail.com",
        "date": "2017-05-22T03:34:05Z"
      },
      "message": "Use version bit 4 with an 80% threshold for activation",
      "tree": {
        "sha": "281cbc5359f892e8c03a9859ffe0a1e90a54a698",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/281cbc5359f892e8c03a9859ffe0a1e90a54a698"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d5779e474f4e6d00fc2e5a2c0816404834705dce",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d5779e474f4e6d00fc2e5a2c0816404834705dce",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/d5779e474f4e6d00fc2e5a2c0816404834705dce",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d5779e474f4e6d00fc2e5a2c0816404834705dce/comments",
    "author": {
      "login": "jameshilliard",
      "id": 3298484,
      "node_id": "MDQ6VXNlcjMyOTg0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3298484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jameshilliard",
      "html_url": "https://github.com/jameshilliard",
      "followers_url": "https://api.github.com/users/jameshilliard/followers",
      "following_url": "https://api.github.com/users/jameshilliard/following{/other_user}",
      "gists_url": "https://api.github.com/users/jameshilliard/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jameshilliard/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jameshilliard/subscriptions",
      "organizations_url": "https://api.github.com/users/jameshilliard/orgs",
      "repos_url": "https://api.github.com/users/jameshilliard/repos",
      "events_url": "https://api.github.com/users/jameshilliard/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jameshilliard/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jameshilliard",
      "id": 3298484,
      "node_id": "MDQ6VXNlcjMyOTg0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3298484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jameshilliard",
      "html_url": "https://github.com/jameshilliard",
      "followers_url": "https://api.github.com/users/jameshilliard/followers",
      "following_url": "https://api.github.com/users/jameshilliard/following{/other_user}",
      "gists_url": "https://api.github.com/users/jameshilliard/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jameshilliard/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jameshilliard/subscriptions",
      "organizations_url": "https://api.github.com/users/jameshilliard/orgs",
      "repos_url": "https://api.github.com/users/jameshilliard/repos",
      "events_url": "https://api.github.com/users/jameshilliard/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jameshilliard/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "e4b207fc36075e8ee13c5d3310d340d01b78a286",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e4b207fc36075e8ee13c5d3310d340d01b78a286",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/e4b207fc36075e8ee13c5d3310d340d01b78a286"
      }
    ],
    "stats": {
      "total": 4,
      "additions": 2,
      "deletions": 2
    },
    "files": [
      {
        "sha": "0f0915cd7ea8fcff0e6df88a1874c3a0fffbd02c",
        "filename": "src/chainparams.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d5779e474f4e6d00fc2e5a2c0816404834705dce/src/chainparams.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d5779e474f4e6d00fc2e5a2c0816404834705dce/src/chainparams.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/chainparams.cpp?ref=d5779e474f4e6d00fc2e5a2c0816404834705dce",
        "patch": "@@ -97,7 +97,7 @@ class CMainParams : public CChainParams {\n         consensus.vDeployments[Consensus::DEPLOYMENT_SEGWIT].nTimeout = 1510704000; // November 15th, 2017.\n \n         // Deployment of SEGSIGNAL\n-        consensus.vDeployments[Consensus::DEPLOYMENT_SEGSIGNAL].bit = 2;\n+        consensus.vDeployments[Consensus::DEPLOYMENT_SEGSIGNAL].bit = 4;\n         consensus.vDeployments[Consensus::DEPLOYMENT_SEGSIGNAL].nStartTime = 1496275200; // June 1st, 2017.\n         consensus.vDeployments[Consensus::DEPLOYMENT_SEGSIGNAL].nTimeout = 1510704000; // November 15th, 2017.\n "
      },
      {
        "sha": "09463d23c61347ddb05f87870f34e310187c6d86",
        "filename": "src/versionbits.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d5779e474f4e6d00fc2e5a2c0816404834705dce/src/versionbits.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d5779e474f4e6d00fc2e5a2c0816404834705dce/src/versionbits.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/versionbits.cpp?ref=d5779e474f4e6d00fc2e5a2c0816404834705dce",
        "patch": "@@ -155,7 +155,7 @@ class VersionBitsConditionChecker : public AbstractThresholdConditionChecker {\n     int Threshold(const Consensus::Params& params) const {\n         if (params.vDeployments[id].bit == params.vDeployments[Consensus::DEPLOYMENT_SEGSIGNAL].bit &&\n             params.vDeployments[id].nStartTime == params.vDeployments[Consensus::DEPLOYMENT_SEGSIGNAL].nStartTime) {\n-            return 1311; // 65% threshold for SEGSIGNAL only\n+            return 1612; // 80% threshold for SEGSIGNAL only\n         }\n         return params.nRuleChangeActivationThreshold;\n     }"
      }
    ]
  },
  {
    "sha": "ddf0fce6825a916a715efc0793ecec092f7aad6f",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkZGYwZmNlNjgyNWE5MTZhNzE1ZWZjMDc5M2VjZWMwOTJmN2FhZDZm",
    "commit": {
      "author": {
        "name": "James Hilliard",
        "email": "james.hilliard1@gmail.com",
        "date": "2017-05-24T16:08:06Z"
      },
      "committer": {
        "name": "James Hilliard",
        "email": "james.hilliard1@gmail.com",
        "date": "2017-05-24T16:08:06Z"
      },
      "message": "Add segsignal to getblockchaininfo",
      "tree": {
        "sha": "278e320898f2ab5c053343b1af70802dde0bd832",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/278e320898f2ab5c053343b1af70802dde0bd832"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ddf0fce6825a916a715efc0793ecec092f7aad6f",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ddf0fce6825a916a715efc0793ecec092f7aad6f",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/ddf0fce6825a916a715efc0793ecec092f7aad6f",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ddf0fce6825a916a715efc0793ecec092f7aad6f/comments",
    "author": {
      "login": "jameshilliard",
      "id": 3298484,
      "node_id": "MDQ6VXNlcjMyOTg0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3298484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jameshilliard",
      "html_url": "https://github.com/jameshilliard",
      "followers_url": "https://api.github.com/users/jameshilliard/followers",
      "following_url": "https://api.github.com/users/jameshilliard/following{/other_user}",
      "gists_url": "https://api.github.com/users/jameshilliard/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jameshilliard/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jameshilliard/subscriptions",
      "organizations_url": "https://api.github.com/users/jameshilliard/orgs",
      "repos_url": "https://api.github.com/users/jameshilliard/repos",
      "events_url": "https://api.github.com/users/jameshilliard/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jameshilliard/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jameshilliard",
      "id": 3298484,
      "node_id": "MDQ6VXNlcjMyOTg0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3298484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jameshilliard",
      "html_url": "https://github.com/jameshilliard",
      "followers_url": "https://api.github.com/users/jameshilliard/followers",
      "following_url": "https://api.github.com/users/jameshilliard/following{/other_user}",
      "gists_url": "https://api.github.com/users/jameshilliard/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jameshilliard/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jameshilliard/subscriptions",
      "organizations_url": "https://api.github.com/users/jameshilliard/orgs",
      "repos_url": "https://api.github.com/users/jameshilliard/repos",
      "events_url": "https://api.github.com/users/jameshilliard/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jameshilliard/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "d5779e474f4e6d00fc2e5a2c0816404834705dce",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d5779e474f4e6d00fc2e5a2c0816404834705dce",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/d5779e474f4e6d00fc2e5a2c0816404834705dce"
      }
    ],
    "stats": {
      "total": 1,
      "additions": 1,
      "deletions": 0
    },
    "files": [
      {
        "sha": "c236f35215c1af0b99d94425ce1953d7181dd9e4",
        "filename": "src/rpc/blockchain.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/ddf0fce6825a916a715efc0793ecec092f7aad6f/src/rpc/blockchain.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/ddf0fce6825a916a715efc0793ecec092f7aad6f/src/rpc/blockchain.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/blockchain.cpp?ref=ddf0fce6825a916a715efc0793ecec092f7aad6f",
        "patch": "@@ -1135,6 +1135,7 @@ UniValue getblockchaininfo(const JSONRPCRequest& request)\n     softforks.push_back(SoftForkDesc(\"bip65\", 4, tip, consensusParams));\n     BIP9SoftForkDescPushBack(bip9_softforks, \"csv\", consensusParams, Consensus::DEPLOYMENT_CSV);\n     BIP9SoftForkDescPushBack(bip9_softforks, \"segwit\", consensusParams, Consensus::DEPLOYMENT_SEGWIT);\n+    BIP9SoftForkDescPushBack(bip9_softforks, \"segsignal\", consensusParams, Consensus::DEPLOYMENT_SEGSIGNAL);\n     obj.push_back(Pair(\"softforks\",             softforks));\n     obj.push_back(Pair(\"bip9_softforks\", bip9_softforks));\n "
      }
    ]
  },
  {
    "sha": "6a3cfb4d2c6cfe0b8eeee92ece8f42c1a7ab4101",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo2YTNjZmI0ZDJjNmNmZTBiOGVlZWU5MmVjZThmNDJjMWE3YWI0MTAx",
    "commit": {
      "author": {
        "name": "James Hilliard",
        "email": "james.hilliard1@gmail.com",
        "date": "2017-05-24T16:33:57Z"
      },
      "committer": {
        "name": "James Hilliard",
        "email": "james.hilliard1@gmail.com",
        "date": "2017-05-24T16:33:57Z"
      },
      "message": "Use BIP91 activation threshold only on networks with a 95% BIP9 activation threshold.",
      "tree": {
        "sha": "31ec2ffd8c060709c63698a56244ad7c1c1efb6a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/31ec2ffd8c060709c63698a56244ad7c1c1efb6a"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6a3cfb4d2c6cfe0b8eeee92ece8f42c1a7ab4101",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6a3cfb4d2c6cfe0b8eeee92ece8f42c1a7ab4101",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/6a3cfb4d2c6cfe0b8eeee92ece8f42c1a7ab4101",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6a3cfb4d2c6cfe0b8eeee92ece8f42c1a7ab4101/comments",
    "author": {
      "login": "jameshilliard",
      "id": 3298484,
      "node_id": "MDQ6VXNlcjMyOTg0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3298484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jameshilliard",
      "html_url": "https://github.com/jameshilliard",
      "followers_url": "https://api.github.com/users/jameshilliard/followers",
      "following_url": "https://api.github.com/users/jameshilliard/following{/other_user}",
      "gists_url": "https://api.github.com/users/jameshilliard/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jameshilliard/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jameshilliard/subscriptions",
      "organizations_url": "https://api.github.com/users/jameshilliard/orgs",
      "repos_url": "https://api.github.com/users/jameshilliard/repos",
      "events_url": "https://api.github.com/users/jameshilliard/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jameshilliard/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jameshilliard",
      "id": 3298484,
      "node_id": "MDQ6VXNlcjMyOTg0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3298484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jameshilliard",
      "html_url": "https://github.com/jameshilliard",
      "followers_url": "https://api.github.com/users/jameshilliard/followers",
      "following_url": "https://api.github.com/users/jameshilliard/following{/other_user}",
      "gists_url": "https://api.github.com/users/jameshilliard/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jameshilliard/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jameshilliard/subscriptions",
      "organizations_url": "https://api.github.com/users/jameshilliard/orgs",
      "repos_url": "https://api.github.com/users/jameshilliard/repos",
      "events_url": "https://api.github.com/users/jameshilliard/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jameshilliard/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "ddf0fce6825a916a715efc0793ecec092f7aad6f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ddf0fce6825a916a715efc0793ecec092f7aad6f",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/ddf0fce6825a916a715efc0793ecec092f7aad6f"
      }
    ],
    "stats": {
      "total": 3,
      "additions": 2,
      "deletions": 1
    },
    "files": [
      {
        "sha": "2afcbc27bc05394dd2eddd7c642a09d764898880",
        "filename": "src/versionbits.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 1,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6a3cfb4d2c6cfe0b8eeee92ece8f42c1a7ab4101/src/versionbits.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6a3cfb4d2c6cfe0b8eeee92ece8f42c1a7ab4101/src/versionbits.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/versionbits.cpp?ref=6a3cfb4d2c6cfe0b8eeee92ece8f42c1a7ab4101",
        "patch": "@@ -153,7 +153,8 @@ class VersionBitsConditionChecker : public AbstractThresholdConditionChecker {\n     int64_t EndTime(const Consensus::Params& params) const { return params.vDeployments[id].nTimeout; }\n     int Period(const Consensus::Params& params) const { return params.nMinerConfirmationWindow; }\n     int Threshold(const Consensus::Params& params) const {\n-        if (params.vDeployments[id].bit == params.vDeployments[Consensus::DEPLOYMENT_SEGSIGNAL].bit &&\n+        if (params.nRuleChangeActivationThreshold == 1916 && params.nMinerConfirmationWindow == 2016 &&\n+            params.vDeployments[id].bit == params.vDeployments[Consensus::DEPLOYMENT_SEGSIGNAL].bit &&\n             params.vDeployments[id].nStartTime == params.vDeployments[Consensus::DEPLOYMENT_SEGSIGNAL].nStartTime) {\n             return 1612; // 80% threshold for SEGSIGNAL only\n         }"
      }
    ]
  },
  {
    "sha": "d5d9460f68dae39486d895269f1c16b015bfe44c",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkNWQ5NDYwZjY4ZGFlMzk0ODZkODk1MjY5ZjFjMTZiMDE1YmZlNDRj",
    "commit": {
      "author": {
        "name": "Johnson Lau",
        "email": "jl2012@xbt.hk",
        "date": "2017-06-14T18:33:04Z"
      },
      "committer": {
        "name": "Johnson Lau",
        "email": "jl2012@xbt.hk",
        "date": "2017-06-14T18:33:04Z"
      },
      "message": "Override default confirmation window and threshold for SEGSIGNAL",
      "tree": {
        "sha": "4b0f359dc69dd349a5976f23065fbd97f1054005",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/4b0f359dc69dd349a5976f23065fbd97f1054005"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d5d9460f68dae39486d895269f1c16b015bfe44c",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d5d9460f68dae39486d895269f1c16b015bfe44c",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/d5d9460f68dae39486d895269f1c16b015bfe44c",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d5d9460f68dae39486d895269f1c16b015bfe44c/comments",
    "author": {
      "login": "jl2012",
      "id": 8403418,
      "node_id": "MDQ6VXNlcjg0MDM0MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8403418?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jl2012",
      "html_url": "https://github.com/jl2012",
      "followers_url": "https://api.github.com/users/jl2012/followers",
      "following_url": "https://api.github.com/users/jl2012/following{/other_user}",
      "gists_url": "https://api.github.com/users/jl2012/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jl2012/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jl2012/subscriptions",
      "organizations_url": "https://api.github.com/users/jl2012/orgs",
      "repos_url": "https://api.github.com/users/jl2012/repos",
      "events_url": "https://api.github.com/users/jl2012/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jl2012/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jl2012",
      "id": 8403418,
      "node_id": "MDQ6VXNlcjg0MDM0MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8403418?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jl2012",
      "html_url": "https://github.com/jl2012",
      "followers_url": "https://api.github.com/users/jl2012/followers",
      "following_url": "https://api.github.com/users/jl2012/following{/other_user}",
      "gists_url": "https://api.github.com/users/jl2012/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jl2012/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jl2012/subscriptions",
      "organizations_url": "https://api.github.com/users/jl2012/orgs",
      "repos_url": "https://api.github.com/users/jl2012/repos",
      "events_url": "https://api.github.com/users/jl2012/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jl2012/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "6a3cfb4d2c6cfe0b8eeee92ece8f42c1a7ab4101",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6a3cfb4d2c6cfe0b8eeee92ece8f42c1a7ab4101",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/6a3cfb4d2c6cfe0b8eeee92ece8f42c1a7ab4101"
      }
    ],
    "stats": {
      "total": 19,
      "additions": 13,
      "deletions": 6
    },
    "files": [
      {
        "sha": "c077f3d9939f0ea9f472b8db2a9d9ee9e4dbf406",
        "filename": "src/chainparams.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d5d9460f68dae39486d895269f1c16b015bfe44c/src/chainparams.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d5d9460f68dae39486d895269f1c16b015bfe44c/src/chainparams.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/chainparams.cpp?ref=d5d9460f68dae39486d895269f1c16b015bfe44c",
        "patch": "@@ -100,6 +100,8 @@ class CMainParams : public CChainParams {\n         consensus.vDeployments[Consensus::DEPLOYMENT_SEGSIGNAL].bit = 4;\n         consensus.vDeployments[Consensus::DEPLOYMENT_SEGSIGNAL].nStartTime = 1496275200; // June 1st, 2017.\n         consensus.vDeployments[Consensus::DEPLOYMENT_SEGSIGNAL].nTimeout = 1510704000; // November 15th, 2017.\n+        consensus.vDeployments[Consensus::DEPLOYMENT_SEGSIGNAL].nOverrideMinerConfirmationWindow = 672; // ~4.67 days\n+        consensus.vDeployments[Consensus::DEPLOYMENT_SEGSIGNAL].nOverrideRuleChangeActivationThreshold = 538; // 80%\n \n         // The best chain should have at least this much work.\n         consensus.nMinimumChainWork = uint256S(\"0x0000000000000000000000000000000000000000003f94d1ad391682fe038bf5\");"
      },
      {
        "sha": "8442d23183eb32cfa5faf575517095936e77c18e",
        "filename": "src/consensus/params.h",
        "status": "modified",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d5d9460f68dae39486d895269f1c16b015bfe44c/src/consensus/params.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d5d9460f68dae39486d895269f1c16b015bfe44c/src/consensus/params.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/consensus/params.h?ref=d5d9460f68dae39486d895269f1c16b015bfe44c",
        "patch": "@@ -32,6 +32,10 @@ struct BIP9Deployment {\n     int64_t nStartTime;\n     /** Timeout/expiry MedianTime for the deployment attempt. */\n     int64_t nTimeout;\n+    /** Overriding the default threshold if not zero. */\n+    uint32_t nOverrideRuleChangeActivationThreshold = 0;\n+    /** Overriding the default confirmation window if not zero . */\n+    uint32_t nOverrideMinerConfirmationWindow = 0;\n };\n \n /**"
      },
      {
        "sha": "c6c3b0faa7e017460dd5818bfa24101239c09a64",
        "filename": "src/versionbits.cpp",
        "status": "modified",
        "additions": 7,
        "deletions": 6,
        "changes": 13,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d5d9460f68dae39486d895269f1c16b015bfe44c/src/versionbits.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d5d9460f68dae39486d895269f1c16b015bfe44c/src/versionbits.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/versionbits.cpp?ref=d5d9460f68dae39486d895269f1c16b015bfe44c",
        "patch": "@@ -151,13 +151,14 @@ class VersionBitsConditionChecker : public AbstractThresholdConditionChecker {\n protected:\n     int64_t BeginTime(const Consensus::Params& params) const { return params.vDeployments[id].nStartTime; }\n     int64_t EndTime(const Consensus::Params& params) const { return params.vDeployments[id].nTimeout; }\n-    int Period(const Consensus::Params& params) const { return params.nMinerConfirmationWindow; }\n+    int Period(const Consensus::Params& params) const {\n+        if (params.vDeployments[id].nOverrideMinerConfirmationWindow > 0)\n+            return params.vDeployments[id].nOverrideMinerConfirmationWindow;\n+        return params.nMinerConfirmationWindow;\n+    }\n     int Threshold(const Consensus::Params& params) const {\n-        if (params.nRuleChangeActivationThreshold == 1916 && params.nMinerConfirmationWindow == 2016 &&\n-            params.vDeployments[id].bit == params.vDeployments[Consensus::DEPLOYMENT_SEGSIGNAL].bit &&\n-            params.vDeployments[id].nStartTime == params.vDeployments[Consensus::DEPLOYMENT_SEGSIGNAL].nStartTime) {\n-            return 1612; // 80% threshold for SEGSIGNAL only\n-        }\n+        if (params.vDeployments[id].nOverrideRuleChangeActivationThreshold > 0)\n+            return params.vDeployments[id].nOverrideRuleChangeActivationThreshold;\n         return params.nRuleChangeActivationThreshold;\n     }\n "
      }
    ]
  },
  {
    "sha": "e0a9003fee397ba98b968a5e44830cc2a47ff0d1",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzplMGE5MDAzZmVlMzk3YmE5OGI5NjhhNWU0NDgzMGNjMmE0N2ZmMGQx",
    "commit": {
      "author": {
        "name": "James Hilliard",
        "email": "james.hilliard1@gmail.com",
        "date": "2017-06-14T23:05:21Z"
      },
      "committer": {
        "name": "James Hilliard",
        "email": "james.hilliard1@gmail.com",
        "date": "2017-06-14T23:05:21Z"
      },
      "message": "Enforce BIP91 when locked in",
      "tree": {
        "sha": "e47f3b5d790887b8f146b43b974756f77871868a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e47f3b5d790887b8f146b43b974756f77871868a"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e0a9003fee397ba98b968a5e44830cc2a47ff0d1",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e0a9003fee397ba98b968a5e44830cc2a47ff0d1",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/e0a9003fee397ba98b968a5e44830cc2a47ff0d1",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e0a9003fee397ba98b968a5e44830cc2a47ff0d1/comments",
    "author": {
      "login": "jameshilliard",
      "id": 3298484,
      "node_id": "MDQ6VXNlcjMyOTg0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3298484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jameshilliard",
      "html_url": "https://github.com/jameshilliard",
      "followers_url": "https://api.github.com/users/jameshilliard/followers",
      "following_url": "https://api.github.com/users/jameshilliard/following{/other_user}",
      "gists_url": "https://api.github.com/users/jameshilliard/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jameshilliard/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jameshilliard/subscriptions",
      "organizations_url": "https://api.github.com/users/jameshilliard/orgs",
      "repos_url": "https://api.github.com/users/jameshilliard/repos",
      "events_url": "https://api.github.com/users/jameshilliard/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jameshilliard/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jameshilliard",
      "id": 3298484,
      "node_id": "MDQ6VXNlcjMyOTg0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3298484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jameshilliard",
      "html_url": "https://github.com/jameshilliard",
      "followers_url": "https://api.github.com/users/jameshilliard/followers",
      "following_url": "https://api.github.com/users/jameshilliard/following{/other_user}",
      "gists_url": "https://api.github.com/users/jameshilliard/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jameshilliard/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jameshilliard/subscriptions",
      "organizations_url": "https://api.github.com/users/jameshilliard/orgs",
      "repos_url": "https://api.github.com/users/jameshilliard/repos",
      "events_url": "https://api.github.com/users/jameshilliard/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jameshilliard/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "d5d9460f68dae39486d895269f1c16b015bfe44c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d5d9460f68dae39486d895269f1c16b015bfe44c",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/d5d9460f68dae39486d895269f1c16b015bfe44c"
      }
    ],
    "stats": {
      "total": 3,
      "additions": 2,
      "deletions": 1
    },
    "files": [
      {
        "sha": "268f308f211b50a96e2db0cadd59f60e1bf048a0",
        "filename": "src/validation.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 1,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e0a9003fee397ba98b968a5e44830cc2a47ff0d1/src/validation.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e0a9003fee397ba98b968a5e44830cc2a47ff0d1/src/validation.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/validation.cpp?ref=e0a9003fee397ba98b968a5e44830cc2a47ff0d1",
        "patch": "@@ -1852,7 +1852,8 @@ bool ConnectBlock(const CBlock& block, CValidationState& state, CBlockIndex* pin\n     }\n \n     // SEGSIGNAL mandatory segwit signalling.\n-    if ( VersionBitsState(pindex->pprev, chainparams.GetConsensus(), Consensus::DEPLOYMENT_SEGSIGNAL, versionbitscache) == THRESHOLD_ACTIVE &&\n+    if ((VersionBitsState(pindex->pprev, chainparams.GetConsensus(), Consensus::DEPLOYMENT_SEGSIGNAL, versionbitscache) == THRESHOLD_ACTIVE ||\n+         VersionBitsState(pindex->pprev, chainparams.GetConsensus(), Consensus::DEPLOYMENT_SEGSIGNAL, versionbitscache) == THRESHOLD_LOCKED_IN) &&\n          !IsWitnessLockedIn(pindex->pprev, chainparams.GetConsensus()) &&  // Segwit is not locked in\n          !IsWitnessEnabled(pindex->pprev, chainparams.GetConsensus()) ) // and is not active.\n     {"
      }
    ]
  },
  {
    "sha": "78e37a40dd39768f97fa861e8a117cfb2ae5f20e",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo3OGUzN2E0MGRkMzk3NjhmOTdmYTg2MWU4YTExN2NmYjJhZTVmMjBl",
    "commit": {
      "author": {
        "name": "Johnson Lau",
        "email": "jl2012@xbt.hk",
        "date": "2017-06-15T16:34:37Z"
      },
      "committer": {
        "name": "Johnson Lau",
        "email": "jl2012@xbt.hk",
        "date": "2017-06-15T16:39:20Z"
      },
      "message": "Add regtest parameters for SEGSIGNAL",
      "tree": {
        "sha": "53e6663f40f034b0c7e7666d2b2f84ea236c9722",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/53e6663f40f034b0c7e7666d2b2f84ea236c9722"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/78e37a40dd39768f97fa861e8a117cfb2ae5f20e",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/78e37a40dd39768f97fa861e8a117cfb2ae5f20e",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/78e37a40dd39768f97fa861e8a117cfb2ae5f20e",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/78e37a40dd39768f97fa861e8a117cfb2ae5f20e/comments",
    "author": {
      "login": "jl2012",
      "id": 8403418,
      "node_id": "MDQ6VXNlcjg0MDM0MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8403418?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jl2012",
      "html_url": "https://github.com/jl2012",
      "followers_url": "https://api.github.com/users/jl2012/followers",
      "following_url": "https://api.github.com/users/jl2012/following{/other_user}",
      "gists_url": "https://api.github.com/users/jl2012/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jl2012/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jl2012/subscriptions",
      "organizations_url": "https://api.github.com/users/jl2012/orgs",
      "repos_url": "https://api.github.com/users/jl2012/repos",
      "events_url": "https://api.github.com/users/jl2012/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jl2012/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jl2012",
      "id": 8403418,
      "node_id": "MDQ6VXNlcjg0MDM0MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8403418?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jl2012",
      "html_url": "https://github.com/jl2012",
      "followers_url": "https://api.github.com/users/jl2012/followers",
      "following_url": "https://api.github.com/users/jl2012/following{/other_user}",
      "gists_url": "https://api.github.com/users/jl2012/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jl2012/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jl2012/subscriptions",
      "organizations_url": "https://api.github.com/users/jl2012/orgs",
      "repos_url": "https://api.github.com/users/jl2012/repos",
      "events_url": "https://api.github.com/users/jl2012/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jl2012/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "e0a9003fee397ba98b968a5e44830cc2a47ff0d1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e0a9003fee397ba98b968a5e44830cc2a47ff0d1",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/e0a9003fee397ba98b968a5e44830cc2a47ff0d1"
      }
    ],
    "stats": {
      "total": 5,
      "additions": 5,
      "deletions": 0
    },
    "files": [
      {
        "sha": "eb8a469d25fac200673382e93f244233e4dc197d",
        "filename": "src/chainparams.cpp",
        "status": "modified",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/78e37a40dd39768f97fa861e8a117cfb2ae5f20e/src/chainparams.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/78e37a40dd39768f97fa861e8a117cfb2ae5f20e/src/chainparams.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/chainparams.cpp?ref=78e37a40dd39768f97fa861e8a117cfb2ae5f20e",
        "patch": "@@ -291,6 +291,11 @@ class CRegTestParams : public CChainParams {\n         consensus.vDeployments[Consensus::DEPLOYMENT_SEGWIT].bit = 1;\n         consensus.vDeployments[Consensus::DEPLOYMENT_SEGWIT].nStartTime = 0;\n         consensus.vDeployments[Consensus::DEPLOYMENT_SEGWIT].nTimeout = 999999999999ULL;\n+        consensus.vDeployments[Consensus::DEPLOYMENT_SEGSIGNAL].bit = 4;\n+        consensus.vDeployments[Consensus::DEPLOYMENT_SEGSIGNAL].nStartTime = 0;\n+        consensus.vDeployments[Consensus::DEPLOYMENT_SEGSIGNAL].nTimeout = 999999999999ULL;\n+        consensus.vDeployments[Consensus::DEPLOYMENT_SEGSIGNAL].nOverrideMinerConfirmationWindow = 48;\n+        consensus.vDeployments[Consensus::DEPLOYMENT_SEGSIGNAL].nOverrideRuleChangeActivationThreshold = 29; // 60%\n \n         // The best chain should have at least this much work.\n         consensus.nMinimumChainWork = uint256S(\"0x00\");"
      }
    ]
  },
  {
    "sha": "19a97987ed4c993b80d79616969ef5da97d7a33d",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoxOWE5Nzk4N2VkNGM5OTNiODBkNzk2MTY5NjllZjVkYTk3ZDdhMzNk",
    "commit": {
      "author": {
        "name": "Johnson Lau",
        "email": "jl2012@xbt.hk",
        "date": "2017-06-15T16:38:37Z"
      },
      "committer": {
        "name": "Johnson Lau",
        "email": "jl2012@xbt.hk",
        "date": "2017-06-15T16:39:38Z"
      },
      "message": "Enforce SEGSIGNAL only when SEGWIT is in STARTED state\n\nbit 1 signaling is not required (and has no meaning) unless the state is STARTED",
      "tree": {
        "sha": "1a0d6dea37282d71d04ad8cd1d645f64ebd1ccaa",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/1a0d6dea37282d71d04ad8cd1d645f64ebd1ccaa"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/19a97987ed4c993b80d79616969ef5da97d7a33d",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/19a97987ed4c993b80d79616969ef5da97d7a33d",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/19a97987ed4c993b80d79616969ef5da97d7a33d",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/19a97987ed4c993b80d79616969ef5da97d7a33d/comments",
    "author": {
      "login": "jl2012",
      "id": 8403418,
      "node_id": "MDQ6VXNlcjg0MDM0MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8403418?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jl2012",
      "html_url": "https://github.com/jl2012",
      "followers_url": "https://api.github.com/users/jl2012/followers",
      "following_url": "https://api.github.com/users/jl2012/following{/other_user}",
      "gists_url": "https://api.github.com/users/jl2012/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jl2012/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jl2012/subscriptions",
      "organizations_url": "https://api.github.com/users/jl2012/orgs",
      "repos_url": "https://api.github.com/users/jl2012/repos",
      "events_url": "https://api.github.com/users/jl2012/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jl2012/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jl2012",
      "id": 8403418,
      "node_id": "MDQ6VXNlcjg0MDM0MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8403418?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jl2012",
      "html_url": "https://github.com/jl2012",
      "followers_url": "https://api.github.com/users/jl2012/followers",
      "following_url": "https://api.github.com/users/jl2012/following{/other_user}",
      "gists_url": "https://api.github.com/users/jl2012/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jl2012/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jl2012/subscriptions",
      "organizations_url": "https://api.github.com/users/jl2012/orgs",
      "repos_url": "https://api.github.com/users/jl2012/repos",
      "events_url": "https://api.github.com/users/jl2012/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jl2012/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "78e37a40dd39768f97fa861e8a117cfb2ae5f20e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/78e37a40dd39768f97fa861e8a117cfb2ae5f20e",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/78e37a40dd39768f97fa861e8a117cfb2ae5f20e"
      }
    ],
    "stats": {
      "total": 12,
      "additions": 1,
      "deletions": 11
    },
    "files": [
      {
        "sha": "335b1ec21421d7ec28c67b8b43ddd4f559504f96",
        "filename": "src/validation.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 8,
        "changes": 9,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/19a97987ed4c993b80d79616969ef5da97d7a33d/src/validation.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/19a97987ed4c993b80d79616969ef5da97d7a33d/src/validation.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/validation.cpp?ref=19a97987ed4c993b80d79616969ef5da97d7a33d",
        "patch": "@@ -1854,8 +1854,7 @@ bool ConnectBlock(const CBlock& block, CValidationState& state, CBlockIndex* pin\n     // SEGSIGNAL mandatory segwit signalling.\n     if ((VersionBitsState(pindex->pprev, chainparams.GetConsensus(), Consensus::DEPLOYMENT_SEGSIGNAL, versionbitscache) == THRESHOLD_ACTIVE ||\n          VersionBitsState(pindex->pprev, chainparams.GetConsensus(), Consensus::DEPLOYMENT_SEGSIGNAL, versionbitscache) == THRESHOLD_LOCKED_IN) &&\n-         !IsWitnessLockedIn(pindex->pprev, chainparams.GetConsensus()) &&  // Segwit is not locked in\n-         !IsWitnessEnabled(pindex->pprev, chainparams.GetConsensus()) ) // and is not active.\n+         VersionBitsState(pindex->pprev, chainparams.GetConsensus(), Consensus::DEPLOYMENT_SEGWIT, versionbitscache) == THRESHOLD_STARTED)\n     {\n         bool fVersionBits = (pindex->nVersion & VERSIONBITS_TOP_MASK) == VERSIONBITS_TOP_BITS;\n         bool fSegbit = (pindex->nVersion & VersionBitsMask(chainparams.GetConsensus(), Consensus::DEPLOYMENT_SEGWIT)) != 0;\n@@ -2931,12 +2930,6 @@ bool IsWitnessEnabled(const CBlockIndex* pindexPrev, const Consensus::Params& pa\n     return (VersionBitsState(pindexPrev, params, Consensus::DEPLOYMENT_SEGWIT, versionbitscache) == THRESHOLD_ACTIVE);\n }\n \n-// Check if Segregated Witness is Locked In\n-bool IsWitnessLockedIn(const CBlockIndex* pindexPrev, const Consensus::Params& params)\n-{\n-    LOCK(cs_main);\n-    return (VersionBitsState(pindexPrev, params, Consensus::DEPLOYMENT_SEGWIT, versionbitscache) == THRESHOLD_LOCKED_IN);\n-}\n \n // Compute at which vout of the block's coinbase transaction the witness\n // commitment occurs, or -1 if not found."
      },
      {
        "sha": "9c606f2419409f7ec35bd50544bdd3d006e16e27",
        "filename": "src/validation.h",
        "status": "modified",
        "additions": 0,
        "deletions": 3,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/19a97987ed4c993b80d79616969ef5da97d7a33d/src/validation.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/19a97987ed4c993b80d79616969ef5da97d7a33d/src/validation.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/validation.h?ref=19a97987ed4c993b80d79616969ef5da97d7a33d",
        "patch": "@@ -503,9 +503,6 @@ bool TestBlockValidity(CValidationState& state, const CChainParams& chainparams,\n /** Check whether witness commitments are required for block. */\n bool IsWitnessEnabled(const CBlockIndex* pindexPrev, const Consensus::Params& params);\n \n-/** Check whether witness commitments are required for block. */\n-bool IsWitnessLockedIn(const CBlockIndex* pindexPrev, const Consensus::Params& params);\n-\n /** When there are blocks in the active chain with missing data, rewind the chainstate and remove them from the block index */\n bool RewindBlockIndex(const CChainParams& params);\n "
      }
    ]
  },
  {
    "sha": "4f23724fa6bcd19f5a874e48516ca76c2458306d",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo0ZjIzNzI0ZmE2YmNkMTlmNWE4NzRlNDg1MTZjYTc2YzI0NTgzMDZk",
    "commit": {
      "author": {
        "name": "Johnson Lau",
        "email": "jl2012@xbt.hk",
        "date": "2017-06-15T16:38:57Z"
      },
      "committer": {
        "name": "Johnson Lau",
        "email": "jl2012@xbt.hk",
        "date": "2017-06-15T17:07:59Z"
      },
      "message": "[qa] Add RPC test for SEGSIGNAL",
      "tree": {
        "sha": "8ba7634a0be3d300501b1311aa4d595bcb8a8bfa",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/8ba7634a0be3d300501b1311aa4d595bcb8a8bfa"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4f23724fa6bcd19f5a874e48516ca76c2458306d",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4f23724fa6bcd19f5a874e48516ca76c2458306d",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/4f23724fa6bcd19f5a874e48516ca76c2458306d",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4f23724fa6bcd19f5a874e48516ca76c2458306d/comments",
    "author": {
      "login": "jl2012",
      "id": 8403418,
      "node_id": "MDQ6VXNlcjg0MDM0MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8403418?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jl2012",
      "html_url": "https://github.com/jl2012",
      "followers_url": "https://api.github.com/users/jl2012/followers",
      "following_url": "https://api.github.com/users/jl2012/following{/other_user}",
      "gists_url": "https://api.github.com/users/jl2012/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jl2012/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jl2012/subscriptions",
      "organizations_url": "https://api.github.com/users/jl2012/orgs",
      "repos_url": "https://api.github.com/users/jl2012/repos",
      "events_url": "https://api.github.com/users/jl2012/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jl2012/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jl2012",
      "id": 8403418,
      "node_id": "MDQ6VXNlcjg0MDM0MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8403418?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jl2012",
      "html_url": "https://github.com/jl2012",
      "followers_url": "https://api.github.com/users/jl2012/followers",
      "following_url": "https://api.github.com/users/jl2012/following{/other_user}",
      "gists_url": "https://api.github.com/users/jl2012/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jl2012/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jl2012/subscriptions",
      "organizations_url": "https://api.github.com/users/jl2012/orgs",
      "repos_url": "https://api.github.com/users/jl2012/repos",
      "events_url": "https://api.github.com/users/jl2012/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jl2012/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "19a97987ed4c993b80d79616969ef5da97d7a33d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/19a97987ed4c993b80d79616969ef5da97d7a33d",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/19a97987ed4c993b80d79616969ef5da97d7a33d"
      }
    ],
    "stats": {
      "total": 176,
      "additions": 176,
      "deletions": 0
    },
    "files": [
      {
        "sha": "9041b15e1fb2ab43742b86d9b15bfb6a6ab84c58",
        "filename": "qa/rpc-tests/bip91.py",
        "status": "added",
        "additions": 176,
        "deletions": 0,
        "changes": 176,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/4f23724fa6bcd19f5a874e48516ca76c2458306d/qa/rpc-tests/bip91.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/4f23724fa6bcd19f5a874e48516ca76c2458306d/qa/rpc-tests/bip91.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/qa/rpc-tests/bip91.py?ref=4f23724fa6bcd19f5a874e48516ca76c2458306d",
        "patch": "@@ -0,0 +1,176 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2015-2016 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import *\n+from test_framework.mininode import NetworkThread\n+from test_framework.blocktools import create_coinbase, create_block\n+import time\n+\n+'''\n+This test is meant to exercise BIP91\n+regtest lock-in with 108/144 for BIP141 and 29/48 for BIP91\n+mine 143 blocks to transition from DEFINED to STARTED\n+mine 28 blocks signalling readiness and 20 not in order to fail to change state this period for BIP91\n+mine 29 blocks signalling readiness and 19 blocks not signalling readiness for BIP91 (STARTED->LOCKED_IN)\n+bit 1 is mandatory for the following 192 blocks until BIP141 is locked_in\n+bit 1 is optional after BIP141 is locked_in\n+'''\n+\n+class BIP91Test(BitcoinTestFramework):\n+\n+    def __init__(self):\n+        super().__init__()\n+        self.num_nodes = 2\n+        self.setup_clean_chain = True\n+\n+    def setup_network(self):\n+        self.nodes = []\n+        self.nodes.append(start_node(0, self.options.tmpdir, [\"-debug\", \"-whitelist=127.0.0.1\"]))\n+        self.nodes.append(start_node(1, self.options.tmpdir, [\"-debug\", \"-whitelist=127.0.0.1\"])) # connect to a dummy node to allow getblocktemplate\n+        connect_nodes(self.nodes[0], 1)\n+\n+    def run_test(self):\n+        NetworkThread().start() # Start up network handling in another thread\n+        self.tip = int(\"0x\" + self.nodes[0].getbestblockhash(), 0)\n+        self.height = 1  # height of the next block to build\n+        self.last_block_time = int(time.time())\n+\n+        assert_equal(self.get_bip9_status('segsignal')['status'], 'defined')\n+        assert_equal(self.get_bip9_status('segsignal')['since'], 0)\n+        assert_equal(self.get_bip9_status('segwit')['status'], 'defined')\n+        assert_equal(self.get_bip9_status('segwit')['since'], 0)\n+\n+\n+        # Test 1\n+        # Advance from DEFINED to STARTED\n+        self.generate_blocks(1,4)\n+        tmpl = self.nodes[0].getblocktemplate({})\n+        assert_equal(tmpl['version'], 0x20000000)\n+\n+        self.generate_blocks(142, 4)\n+        assert_equal(self.get_bip9_status('segsignal')['status'], 'started')\n+        assert_equal(self.get_bip9_status('segsignal')['since'], 48)\n+        assert_equal(self.get_bip9_status('segwit')['status'], 'started')\n+        assert_equal(self.get_bip9_status('segwit')['since'], 144)\n+        tmpl = self.nodes[0].getblocktemplate({})\n+        assert_equal(tmpl['version'], 0x10000001|0x20000012) # 0x10000001 are TESTDUMMY and CSV\n+\n+        # Test 2\n+        # Fail to achieve LOCKED_IN 28 out of 48 signal bit 4\n+        self.generate_blocks(20, 0x20000010) # signalling bit 4\n+        self.generate_blocks(8, 0x20000012) # signalling bit 1 and 4\n+        self.generate_blocks(10, 0x20000002) # signalling bit 1\n+        self.generate_blocks(10, 4) # not signalling\n+        assert_equal(self.get_bip9_status('segsignal')['status'], 'started')\n+        assert_equal(self.get_bip9_status('segsignal')['since'], 48)\n+        assert_equal(self.get_bip9_status('segwit')['status'], 'started')\n+        assert_equal(self.get_bip9_status('segwit')['since'], 144)\n+        tmpl = self.nodes[0].getblocktemplate({})\n+        assert_equal(tmpl['version'], 0x10000001|0x20000012)\n+\n+\n+        # Test 3\n+        # 28 out of 48 signal bit 4 to achieve LOCKED_IN\n+        self.generate_blocks(20, 0x20000010) # signalling bit 4\n+        self.generate_blocks(9, 0x20000012) # signalling bit 1 and 4\n+        self.generate_blocks(10, 0x20000002) # signalling bit 1\n+        self.generate_blocks(9, 4) # not signalling\n+        assert_equal(self.get_bip9_status('segsignal')['status'], 'locked_in')\n+        assert_equal(self.get_bip9_status('segsignal')['since'], 240)\n+        assert_equal(self.get_bip9_status('segwit')['status'], 'started')\n+        assert_equal(self.get_bip9_status('segwit')['since'], 144)\n+        tmpl = self.nodes[0].getblocktemplate({})\n+        assert_equal(tmpl['version'], 0x10000001|0x20000012)\n+\n+        # Test 4\n+        # bit 1 signalling becomes mandatory after bit 4 locked_in\n+        self.generate_blocks(1, 4, 'bad-no-segwit')\n+        self.generate_blocks(1, 0x20000000, 'bad-no-segwit')\n+        self.generate_blocks(1, 0x20000010, 'bad-no-segwit')\n+        self.generate_blocks(1, 0x40000002, 'bad-no-segwit')\n+        self.generate_blocks(1, 0x60000002, 'bad-no-segwit')\n+        self.generate_blocks(1, 0x12, 'bad-no-segwit')\n+        self.generate_blocks(35, 0x20000002)\n+        self.generate_blocks(35, 0x20000012)\n+        self.generate_blocks(121, 0x20000102)\n+\n+        assert_equal(self.get_bip9_status('segsignal')['status'], 'active')\n+        assert_equal(self.get_bip9_status('segsignal')['since'], 288)\n+        assert_equal(self.get_bip9_status('segwit')['status'], 'started')\n+        assert_equal(self.get_bip9_status('segwit')['since'], 144)\n+        tmpl = self.nodes[0].getblocktemplate({})\n+        assert_equal(tmpl['version'], 0x10000001|0x20000002)\n+\n+        self.generate_blocks(1, 4, 'bad-no-segwit')\n+        self.generate_blocks(1, 0x20000000, 'bad-no-segwit')\n+        self.generate_blocks(1, 0x20000010, 'bad-no-segwit')\n+        self.generate_blocks(1, 0x40000002, 'bad-no-segwit')\n+        self.generate_blocks(1, 0x60000002, 'bad-no-segwit')\n+        self.generate_blocks(1, 0x12, 'bad-no-segwit')\n+        self.generate_blocks(1, 0x20000002)\n+\n+        # Test 4\n+        # bit 1 signalling becomes optional after bit 1 locked_in\n+\n+        assert_equal(self.get_bip9_status('segsignal')['status'], 'active')\n+        assert_equal(self.get_bip9_status('segsignal')['since'], 288)\n+        assert_equal(self.get_bip9_status('segwit')['status'], 'locked_in')\n+        assert_equal(self.get_bip9_status('segwit')['since'], 432)\n+        tmpl = self.nodes[0].getblocktemplate({})\n+        assert_equal(tmpl['version'], 0x10000001|0x20000002)\n+\n+        self.generate_blocks(20, 0x20000002)\n+        self.generate_blocks(20, 0x20000012)\n+        self.generate_blocks(20, 0x20000102)\n+        self.generate_blocks(20, 0x20000000)\n+        self.generate_blocks(20, 0x20000010)\n+        self.generate_blocks(20, 0x40000002)\n+        self.generate_blocks(23, 0x60000002)\n+\n+\n+        assert_equal(self.get_bip9_status('segsignal')['status'], 'active')\n+        assert_equal(self.get_bip9_status('segsignal')['since'], 288)\n+        assert_equal(self.get_bip9_status('segwit')['status'], 'locked_in')\n+        assert_equal(self.get_bip9_status('segwit')['since'], 432)\n+\n+        self.generate_blocks(1, 4)\n+\n+\n+        assert_equal(self.get_bip9_status('segsignal')['status'], 'active')\n+        assert_equal(self.get_bip9_status('segsignal')['since'], 288)\n+        assert_equal(self.get_bip9_status('segwit')['status'], 'active')\n+        assert_equal(self.get_bip9_status('segwit')['since'], 576)\n+        tmpl = self.nodes[0].getblocktemplate({})\n+        assert_equal(tmpl['version'], 0x10000001|0x20000000)\n+\n+        self.generate_blocks(1, 0x20000002)\n+        self.generate_blocks(1, 0x20000012)\n+        self.generate_blocks(1, 0x20000102)\n+        self.generate_blocks(1, 0x20000000)\n+        self.generate_blocks(1, 0x20000010)\n+        self.generate_blocks(1, 0x40000002)\n+        self.generate_blocks(1, 0x60000002)\n+        self.generate_blocks(1, 4)\n+\n+    def generate_blocks(self, number, version, error = None):\n+        for i in range(number):\n+            block = create_block(self.tip, create_coinbase(self.height), self.last_block_time + 1)\n+            block.nVersion = version\n+            block.rehash()\n+            block.solve()\n+            assert_equal(self.nodes[0].submitblock(bytes_to_hex_str(block.serialize())), error)\n+            if (error == None):\n+                self.last_block_time += 1\n+                self.tip = block.sha256\n+                self.height += 1\n+\n+    def get_bip9_status(self, key):\n+        info = self.nodes[0].getblockchaininfo()\n+        return info['bip9_softforks'][key]\n+\n+\n+if __name__ == '__main__':\n+    BIP91Test().main()"
      }
    ]
  },
  {
    "sha": "de82047244a5cea3856253169b71e1f50d69cb34",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkZTgyMDQ3MjQ0YTVjZWEzODU2MjUzMTY5YjcxZTFmNTBkNjljYjM0",
    "commit": {
      "author": {
        "name": "Johnson Lau",
        "email": "jl2012@xbt.hk",
        "date": "2017-06-16T04:48:12Z"
      },
      "committer": {
        "name": "Johnson Lau",
        "email": "jl2012@xbt.hk",
        "date": "2017-06-16T04:48:12Z"
      },
      "message": "[qa] Fix tests under SEGSIGNAL",
      "tree": {
        "sha": "e827eceebc2edf78fcdb37e9c9f252b3b55fded8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e827eceebc2edf78fcdb37e9c9f252b3b55fded8"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/de82047244a5cea3856253169b71e1f50d69cb34",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/de82047244a5cea3856253169b71e1f50d69cb34",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/de82047244a5cea3856253169b71e1f50d69cb34",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/de82047244a5cea3856253169b71e1f50d69cb34/comments",
    "author": {
      "login": "jl2012",
      "id": 8403418,
      "node_id": "MDQ6VXNlcjg0MDM0MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8403418?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jl2012",
      "html_url": "https://github.com/jl2012",
      "followers_url": "https://api.github.com/users/jl2012/followers",
      "following_url": "https://api.github.com/users/jl2012/following{/other_user}",
      "gists_url": "https://api.github.com/users/jl2012/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jl2012/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jl2012/subscriptions",
      "organizations_url": "https://api.github.com/users/jl2012/orgs",
      "repos_url": "https://api.github.com/users/jl2012/repos",
      "events_url": "https://api.github.com/users/jl2012/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jl2012/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jl2012",
      "id": 8403418,
      "node_id": "MDQ6VXNlcjg0MDM0MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8403418?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jl2012",
      "html_url": "https://github.com/jl2012",
      "followers_url": "https://api.github.com/users/jl2012/followers",
      "following_url": "https://api.github.com/users/jl2012/following{/other_user}",
      "gists_url": "https://api.github.com/users/jl2012/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jl2012/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jl2012/subscriptions",
      "organizations_url": "https://api.github.com/users/jl2012/orgs",
      "repos_url": "https://api.github.com/users/jl2012/repos",
      "events_url": "https://api.github.com/users/jl2012/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jl2012/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "4f23724fa6bcd19f5a874e48516ca76c2458306d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4f23724fa6bcd19f5a874e48516ca76c2458306d",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/4f23724fa6bcd19f5a874e48516ca76c2458306d"
      }
    ],
    "stats": {
      "total": 7,
      "additions": 5,
      "deletions": 2
    },
    "files": [
      {
        "sha": "dfc15be2c208dc5113f298eed4e253134d291254",
        "filename": "qa/rpc-tests/p2p-compactblocks.py",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/de82047244a5cea3856253169b71e1f50d69cb34/qa/rpc-tests/p2p-compactblocks.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/de82047244a5cea3856253169b71e1f50d69cb34/qa/rpc-tests/p2p-compactblocks.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/qa/rpc-tests/p2p-compactblocks.py?ref=de82047244a5cea3856253169b71e1f50d69cb34",
        "patch": "@@ -123,7 +123,7 @@ def setup_network(self):\n \n         # Start up node0 to be a version 1, pre-segwit node.\n         self.nodes = start_nodes(self.num_nodes, self.options.tmpdir, \n-                [[\"-debug\", \"-logtimemicros=1\", \"-bip9params=segwit:0:0\"], \n+                [[\"-debug\", \"-logtimemicros=1\", \"-bip9params=segwit:0:0\", \"-blockversion=536870915\"], # signal segwit and csv\n                  [\"-debug\", \"-logtimemicros\", \"-txindex\"]])\n         connect_nodes(self.nodes[0], 1)\n "
      },
      {
        "sha": "dbf8367926644af99e9ccb9634efdce9dc2a8849",
        "filename": "qa/rpc-tests/p2p-versionbits-warning.py",
        "status": "modified",
        "additions": 2,
        "deletions": 1,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/de82047244a5cea3856253169b71e1f50d69cb34/qa/rpc-tests/p2p-versionbits-warning.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/de82047244a5cea3856253169b71e1f50d69cb34/qa/rpc-tests/p2p-versionbits-warning.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/qa/rpc-tests/p2p-versionbits-warning.py?ref=de82047244a5cea3856253169b71e1f50d69cb34",
        "patch": "@@ -74,7 +74,8 @@ def setup_network(self):\n         # Open and close to create zero-length file\n         with open(self.alert_filename, 'w', encoding='utf8') as _:\n             pass\n-        self.extra_args = [[\"-debug\", \"-logtimemicros=1\", \"-alertnotify=echo %s >> \\\"\" + self.alert_filename + \"\\\"\"]]\n+        self.extra_args = [[\"-blockversion=4\", \"-debug\", \"-logtimemicros=1\", \"-alertnotify=echo %s >> \\\"\" + self.alert_filename + \"\\\"\"]]\n+        # Have to use version 4 as the default version will trigger BIP91 and make the subsequent tests fail\n         self.nodes = start_nodes(self.num_nodes, self.options.tmpdir, self.extra_args)\n \n     # Send numblocks blocks via peer with nVersionToUse set."
      },
      {
        "sha": "2f82279fa3c5eb4efd29f74134c20cea0153f7d2",
        "filename": "qa/rpc-tests/sendheaders.py",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/de82047244a5cea3856253169b71e1f50d69cb34/qa/rpc-tests/sendheaders.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/de82047244a5cea3856253169b71e1f50d69cb34/qa/rpc-tests/sendheaders.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/qa/rpc-tests/sendheaders.py?ref=de82047244a5cea3856253169b71e1f50d69cb34",
        "patch": "@@ -492,6 +492,7 @@ def run_test(self):\n         # Create extra blocks for later\n         for b in range(20):\n             blocks.append(create_block(tip, create_coinbase(height), block_time))\n+            blocks[-1].nVersion = 0x20000002\n             blocks[-1].solve()\n             tip = blocks[-1].sha256\n             block_time += 1\n@@ -538,6 +539,7 @@ def run_test(self):\n             # Create two more blocks.\n             for j in range(2):\n                 blocks.append(create_block(tip, create_coinbase(height), block_time))\n+                blocks[-1].nVersion = 0x20000002\n                 blocks[-1].solve()\n                 tip = blocks[-1].sha256\n                 block_time += 1"
      }
    ]
  },
  {
    "sha": "55caca1ca80aaed1f59d691f8e5e12069ea76aad",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo1NWNhY2ExY2E4MGFhZWQxZjU5ZDY5MWY4ZTVlMTIwNjllYTc2YWFk",
    "commit": {
      "author": {
        "name": "Johnson Lau",
        "email": "jl2012@xbt.hk",
        "date": "2017-06-16T05:17:24Z"
      },
      "committer": {
        "name": "Johnson Lau",
        "email": "jl2012@xbt.hk",
        "date": "2017-06-16T05:17:24Z"
      },
      "message": "Reduce the SEGSIGNAL signalling window to 336 blocks and enforce only when ACTIVE",
      "tree": {
        "sha": "43778cf51b3bcd94eacf28a7cf8cfe6e0005ed07",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/43778cf51b3bcd94eacf28a7cf8cfe6e0005ed07"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/55caca1ca80aaed1f59d691f8e5e12069ea76aad",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/55caca1ca80aaed1f59d691f8e5e12069ea76aad",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/55caca1ca80aaed1f59d691f8e5e12069ea76aad",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/55caca1ca80aaed1f59d691f8e5e12069ea76aad/comments",
    "author": {
      "login": "jl2012",
      "id": 8403418,
      "node_id": "MDQ6VXNlcjg0MDM0MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8403418?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jl2012",
      "html_url": "https://github.com/jl2012",
      "followers_url": "https://api.github.com/users/jl2012/followers",
      "following_url": "https://api.github.com/users/jl2012/following{/other_user}",
      "gists_url": "https://api.github.com/users/jl2012/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jl2012/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jl2012/subscriptions",
      "organizations_url": "https://api.github.com/users/jl2012/orgs",
      "repos_url": "https://api.github.com/users/jl2012/repos",
      "events_url": "https://api.github.com/users/jl2012/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jl2012/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jl2012",
      "id": 8403418,
      "node_id": "MDQ6VXNlcjg0MDM0MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8403418?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jl2012",
      "html_url": "https://github.com/jl2012",
      "followers_url": "https://api.github.com/users/jl2012/followers",
      "following_url": "https://api.github.com/users/jl2012/following{/other_user}",
      "gists_url": "https://api.github.com/users/jl2012/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jl2012/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jl2012/subscriptions",
      "organizations_url": "https://api.github.com/users/jl2012/orgs",
      "repos_url": "https://api.github.com/users/jl2012/repos",
      "events_url": "https://api.github.com/users/jl2012/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jl2012/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "de82047244a5cea3856253169b71e1f50d69cb34",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/de82047244a5cea3856253169b71e1f50d69cb34",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/de82047244a5cea3856253169b71e1f50d69cb34"
      }
    ],
    "stats": {
      "total": 9,
      "additions": 4,
      "deletions": 5
    },
    "files": [
      {
        "sha": "c9ceb49c4d1fb62ed3de2c09327df7c4112d3953",
        "filename": "src/chainparams.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/55caca1ca80aaed1f59d691f8e5e12069ea76aad/src/chainparams.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/55caca1ca80aaed1f59d691f8e5e12069ea76aad/src/chainparams.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/chainparams.cpp?ref=55caca1ca80aaed1f59d691f8e5e12069ea76aad",
        "patch": "@@ -100,8 +100,8 @@ class CMainParams : public CChainParams {\n         consensus.vDeployments[Consensus::DEPLOYMENT_SEGSIGNAL].bit = 4;\n         consensus.vDeployments[Consensus::DEPLOYMENT_SEGSIGNAL].nStartTime = 1496275200; // June 1st, 2017.\n         consensus.vDeployments[Consensus::DEPLOYMENT_SEGSIGNAL].nTimeout = 1510704000; // November 15th, 2017.\n-        consensus.vDeployments[Consensus::DEPLOYMENT_SEGSIGNAL].nOverrideMinerConfirmationWindow = 672; // ~4.67 days\n-        consensus.vDeployments[Consensus::DEPLOYMENT_SEGSIGNAL].nOverrideRuleChangeActivationThreshold = 538; // 80%\n+        consensus.vDeployments[Consensus::DEPLOYMENT_SEGSIGNAL].nOverrideMinerConfirmationWindow = 336; // ~2.33 days\n+        consensus.vDeployments[Consensus::DEPLOYMENT_SEGSIGNAL].nOverrideRuleChangeActivationThreshold = 269; // 80%\n \n         // The best chain should have at least this much work.\n         consensus.nMinimumChainWork = uint256S(\"0x0000000000000000000000000000000000000000003f94d1ad391682fe038bf5\");"
      },
      {
        "sha": "7cff31237d47ca8d763787a594e06e0af933b4a3",
        "filename": "src/validation.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 3,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/55caca1ca80aaed1f59d691f8e5e12069ea76aad/src/validation.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/55caca1ca80aaed1f59d691f8e5e12069ea76aad/src/validation.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/validation.cpp?ref=55caca1ca80aaed1f59d691f8e5e12069ea76aad",
        "patch": "@@ -1852,9 +1852,8 @@ bool ConnectBlock(const CBlock& block, CValidationState& state, CBlockIndex* pin\n     }\n \n     // SEGSIGNAL mandatory segwit signalling.\n-    if ((VersionBitsState(pindex->pprev, chainparams.GetConsensus(), Consensus::DEPLOYMENT_SEGSIGNAL, versionbitscache) == THRESHOLD_ACTIVE ||\n-         VersionBitsState(pindex->pprev, chainparams.GetConsensus(), Consensus::DEPLOYMENT_SEGSIGNAL, versionbitscache) == THRESHOLD_LOCKED_IN) &&\n-         VersionBitsState(pindex->pprev, chainparams.GetConsensus(), Consensus::DEPLOYMENT_SEGWIT, versionbitscache) == THRESHOLD_STARTED)\n+    if (VersionBitsState(pindex->pprev, chainparams.GetConsensus(), Consensus::DEPLOYMENT_SEGSIGNAL, versionbitscache) == THRESHOLD_ACTIVE &&\n+        VersionBitsState(pindex->pprev, chainparams.GetConsensus(), Consensus::DEPLOYMENT_SEGWIT,    versionbitscache) == THRESHOLD_STARTED)\n     {\n         bool fVersionBits = (pindex->nVersion & VERSIONBITS_TOP_MASK) == VERSIONBITS_TOP_BITS;\n         bool fSegbit = (pindex->nVersion & VersionBitsMask(chainparams.GetConsensus(), Consensus::DEPLOYMENT_SEGWIT)) != 0;"
      }
    ]
  },
  {
    "sha": "200aedd26f151a832fc1ce77b572e8f324d759a3",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyMDBhZWRkMjZmMTUxYTgzMmZjMWNlNzdiNTcyZThmMzI0ZDc1OWEz",
    "commit": {
      "author": {
        "name": "Johnson Lau",
        "email": "jl2012@xbt.hk",
        "date": "2017-06-16T05:20:25Z"
      },
      "committer": {
        "name": "Johnson Lau",
        "email": "jl2012@xbt.hk",
        "date": "2017-06-16T05:23:22Z"
      },
      "message": "[qa] fix tests for SEGSIGNAL LOCKED_IN",
      "tree": {
        "sha": "e9f4558a39f46be8c86367561522973b31b9e8cf",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e9f4558a39f46be8c86367561522973b31b9e8cf"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/200aedd26f151a832fc1ce77b572e8f324d759a3",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/200aedd26f151a832fc1ce77b572e8f324d759a3",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/200aedd26f151a832fc1ce77b572e8f324d759a3",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/200aedd26f151a832fc1ce77b572e8f324d759a3/comments",
    "author": {
      "login": "jl2012",
      "id": 8403418,
      "node_id": "MDQ6VXNlcjg0MDM0MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8403418?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jl2012",
      "html_url": "https://github.com/jl2012",
      "followers_url": "https://api.github.com/users/jl2012/followers",
      "following_url": "https://api.github.com/users/jl2012/following{/other_user}",
      "gists_url": "https://api.github.com/users/jl2012/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jl2012/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jl2012/subscriptions",
      "organizations_url": "https://api.github.com/users/jl2012/orgs",
      "repos_url": "https://api.github.com/users/jl2012/repos",
      "events_url": "https://api.github.com/users/jl2012/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jl2012/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jl2012",
      "id": 8403418,
      "node_id": "MDQ6VXNlcjg0MDM0MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8403418?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jl2012",
      "html_url": "https://github.com/jl2012",
      "followers_url": "https://api.github.com/users/jl2012/followers",
      "following_url": "https://api.github.com/users/jl2012/following{/other_user}",
      "gists_url": "https://api.github.com/users/jl2012/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jl2012/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jl2012/subscriptions",
      "organizations_url": "https://api.github.com/users/jl2012/orgs",
      "repos_url": "https://api.github.com/users/jl2012/repos",
      "events_url": "https://api.github.com/users/jl2012/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jl2012/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "55caca1ca80aaed1f59d691f8e5e12069ea76aad",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/55caca1ca80aaed1f59d691f8e5e12069ea76aad",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/55caca1ca80aaed1f59d691f8e5e12069ea76aad"
      }
    ],
    "stats": {
      "total": 30,
      "additions": 24,
      "deletions": 6
    },
    "files": [
      {
        "sha": "38b635bde852a90796d061422624722fed35faa0",
        "filename": "qa/pull-tester/rpc-tests.py",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/200aedd26f151a832fc1ce77b572e8f324d759a3/qa/pull-tester/rpc-tests.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/200aedd26f151a832fc1ce77b572e8f324d759a3/qa/pull-tester/rpc-tests.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/qa/pull-tester/rpc-tests.py?ref=200aedd26f151a832fc1ce77b572e8f324d759a3",
        "patch": "@@ -155,6 +155,7 @@\n     'rpcnamedargs.py',\n     'listsinceblock.py',\n     'p2p-leaktests.py',\n+    'bip91.py',\n ]\n if ENABLE_ZMQ:\n     testScripts.append('zmq_test.py')"
      },
      {
        "sha": "e9c8bd7d8271ae81b39083a766a9f80d48594d5b",
        "filename": "qa/rpc-tests/bip91.py",
        "status": "modified",
        "additions": 23,
        "deletions": 4,
        "changes": 27,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/200aedd26f151a832fc1ce77b572e8f324d759a3/qa/rpc-tests/bip91.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/200aedd26f151a832fc1ce77b572e8f324d759a3/qa/rpc-tests/bip91.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/qa/rpc-tests/bip91.py?ref=200aedd26f151a832fc1ce77b572e8f324d759a3",
        "patch": "@@ -15,7 +15,8 @@\n mine 143 blocks to transition from DEFINED to STARTED\n mine 28 blocks signalling readiness and 20 not in order to fail to change state this period for BIP91\n mine 29 blocks signalling readiness and 19 blocks not signalling readiness for BIP91 (STARTED->LOCKED_IN)\n-bit 1 is mandatory for the following 192 blocks until BIP141 is locked_in\n+bit 1 is optional for the following 48 blocks when BIP91 is LOCKED_IN (LOCKED_IN->ACTIVE)\n+bit 1 is mandatory for the following 144 blocks until BIP141 is locked_in\n bit 1 is optional after BIP141 is locked_in\n '''\n \n@@ -86,7 +87,25 @@ def run_test(self):\n         assert_equal(tmpl['version'], 0x10000001|0x20000012)\n \n         # Test 4\n-        # bit 1 signalling becomes mandatory after bit 4 locked_in\n+        # No restriction when bit 4 is LOCKED_IN\n+        self.generate_blocks(5, 4)\n+        self.generate_blocks(5, 0x20000000)\n+        self.generate_blocks(5, 0x20000010)\n+        self.generate_blocks(5, 0x40000002)\n+        self.generate_blocks(5, 0x60000002)\n+        self.generate_blocks(5, 0x12)\n+        self.generate_blocks(5, 0x20000002)\n+        self.generate_blocks(5, 0x20000012)\n+        self.generate_blocks(8, 0x20000102)\n+        assert_equal(self.get_bip9_status('segsignal')['status'], 'active')\n+        assert_equal(self.get_bip9_status('segsignal')['since'], 288)\n+        assert_equal(self.get_bip9_status('segwit')['status'], 'started')\n+        assert_equal(self.get_bip9_status('segwit')['since'], 144)\n+        tmpl = self.nodes[0].getblocktemplate({})\n+        assert_equal(tmpl['version'], 0x10000001|0x20000002)\n+\n+        # Test 5\n+        # bit 1 signalling becomes mandatory after bit 4 is ACTIVE\n         self.generate_blocks(1, 4, 'bad-no-segwit')\n         self.generate_blocks(1, 0x20000000, 'bad-no-segwit')\n         self.generate_blocks(1, 0x20000010, 'bad-no-segwit')\n@@ -95,7 +114,7 @@ def run_test(self):\n         self.generate_blocks(1, 0x12, 'bad-no-segwit')\n         self.generate_blocks(35, 0x20000002)\n         self.generate_blocks(35, 0x20000012)\n-        self.generate_blocks(121, 0x20000102)\n+        self.generate_blocks(73, 0x20000102)\n \n         assert_equal(self.get_bip9_status('segsignal')['status'], 'active')\n         assert_equal(self.get_bip9_status('segsignal')['since'], 288)\n@@ -112,7 +131,7 @@ def run_test(self):\n         self.generate_blocks(1, 0x12, 'bad-no-segwit')\n         self.generate_blocks(1, 0x20000002)\n \n-        # Test 4\n+        # Test 6\n         # bit 1 signalling becomes optional after bit 1 locked_in\n \n         assert_equal(self.get_bip9_status('segsignal')['status'], 'active')"
      },
      {
        "sha": "37b98c576e8371a9711bf2423c9fbd2d95bde72b",
        "filename": "qa/rpc-tests/sendheaders.py",
        "status": "modified",
        "additions": 0,
        "deletions": 2,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/200aedd26f151a832fc1ce77b572e8f324d759a3/qa/rpc-tests/sendheaders.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/200aedd26f151a832fc1ce77b572e8f324d759a3/qa/rpc-tests/sendheaders.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/qa/rpc-tests/sendheaders.py?ref=200aedd26f151a832fc1ce77b572e8f324d759a3",
        "patch": "@@ -492,7 +492,6 @@ def run_test(self):\n         # Create extra blocks for later\n         for b in range(20):\n             blocks.append(create_block(tip, create_coinbase(height), block_time))\n-            blocks[-1].nVersion = 0x20000002\n             blocks[-1].solve()\n             tip = blocks[-1].sha256\n             block_time += 1\n@@ -539,7 +538,6 @@ def run_test(self):\n             # Create two more blocks.\n             for j in range(2):\n                 blocks.append(create_block(tip, create_coinbase(height), block_time))\n-                blocks[-1].nVersion = 0x20000002\n                 blocks[-1].solve()\n                 tip = blocks[-1].sha256\n                 block_time += 1"
      }
    ]
  }
]