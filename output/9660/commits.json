[
  {
    "sha": "6ee6532bb9a31a8f99fb2d4309a913495d7cc3e5",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo2ZWU2NTMyYmI5YTMxYThmOTlmYjJkNDMwOWE5MTM0OTVkN2NjM2U1",
    "commit": {
      "author": {
        "name": "Douglas Roark",
        "email": "doug@bloq.com",
        "date": "2017-02-01T00:19:38Z"
      },
      "committer": {
        "name": "Douglas Roark",
        "email": "doug@bloq.com",
        "date": "2017-02-01T00:19:38Z"
      },
      "message": "Backport \u201cFix: OSX QT compile: use built-in swap if available, or defer\u201d\n\nMacs with Protobuf 3 can\u2019t compile the 0.13 branch. Backport the fix from master.",
      "tree": {
        "sha": "d2ac3ca86c0b30193f591d898f4e2df6d8b00ae9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d2ac3ca86c0b30193f591d898f4e2df6d8b00ae9"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6ee6532bb9a31a8f99fb2d4309a913495d7cc3e5",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "no_user",
        "signature": "-----BEGIN PGP SIGNATURE-----\nComment: GPGTools - https://gpgtools.org\n\niQIcBAABCgAGBQJYkSmiAAoJEJnsGxxJbQG9/TwQAJd44mXclU6kGYX2KsrYPyMR\n5aq8Fgc+e7t0wd4I8S0l0U74E2dyOBT5KlvOMSz/WUPg5O968sP0x85WJyaaz7uV\nqrVb7TpbBNiXRj+MbKXnsYTOIEISKKzzaoWk6JCHy25VRCcHKJthtEj8nV2vacAW\nRuB1mUKP8OALbxHCtvmtJNRtnnOnQUFzGIO/Ycn6F3xHTXJKQSHQ5cTNbRl5JJ90\nIyznkARk3Blg+Cfl8k++st2/e210fgo9mR1WyZTPGl+dd5u9NEbeMpPApP+45W8N\nfgdO3YiCid+CAofIs3RZP9rMd84+degu6Fpe95rFbVAwkn5yMje8iSlzndlPLth5\nE6vYsbykfb6/e1zy6pw1MUuAXc5k8srz3hclDQrRuCNdQkB31UVmF6TPS41yF/UT\nXcgTH3dli42SbuHNWnMEznau8ABoB/c7O0gyE84VcclXaLfwZ2TWmNx+dot7Ku1t\nq9ccIQAxnafoP43E87gDXu7Nb56nJhqfkV5uni4AZfXgjfFQ/9Pm3AU2Hd09pC3x\nevWf8zAaiB0qz3IR5cBeMJjIg63e+GmBiEQLdU//51QkswzXrh4nu2UHA6TZ4TpF\nSbQirFFneKtPlx2JqzA0uADSwvDOd5EthU02T7MBw1j+fSZIh6v5UUFmRRUFXzQW\n20YUWHaFHp365wNqPnhu\n=UM67\n-----END PGP SIGNATURE-----",
        "payload": "tree d2ac3ca86c0b30193f591d898f4e2df6d8b00ae9\nparent 77eaadb6c9619370b09513fecba13cfe656d63d6\nauthor Douglas Roark <doug@bloq.com> 1485908378 -0800\ncommitter Douglas Roark <doug@bloq.com> 1485908378 -0800\n\nBackport \u201cFix: OSX QT compile: use built-in swap if available, or defer\u201d\n\nMacs with Protobuf 3 can\u2019t compile the 0.13 branch. Backport the fix from master.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6ee6532bb9a31a8f99fb2d4309a913495d7cc3e5",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/6ee6532bb9a31a8f99fb2d4309a913495d7cc3e5",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6ee6532bb9a31a8f99fb2d4309a913495d7cc3e5/comments",
    "author": null,
    "committer": null,
    "parents": [
      {
        "sha": "77eaadb6c9619370b09513fecba13cfe656d63d6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/77eaadb6c9619370b09513fecba13cfe656d63d6",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/77eaadb6c9619370b09513fecba13cfe656d63d6"
      }
    ],
    "stats": {
      "total": 101,
      "additions": 98,
      "deletions": 3
    },
    "files": [
      {
        "sha": "22c5f6a0b3d1d56b8ac63274f81b88786560c65e",
        "filename": "src/Makefile.qttest.include",
        "status": "modified",
        "additions": 5,
        "deletions": 1,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6ee6532bb9a31a8f99fb2d4309a913495d7cc3e5/src/Makefile.qttest.include",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6ee6532bb9a31a8f99fb2d4309a913495d7cc3e5/src/Makefile.qttest.include",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/Makefile.qttest.include?ref=6ee6532bb9a31a8f99fb2d4309a913495d7cc3e5",
        "patch": "@@ -5,13 +5,16 @@\n bin_PROGRAMS += qt/test/test_bitcoin-qt\n TESTS += qt/test/test_bitcoin-qt\n \n-TEST_QT_MOC_CPP = qt/test/moc_uritests.cpp\n+TEST_QT_MOC_CPP = \\\n+  qt/test/moc_compattests.cpp \\\n+  qt/test/moc_uritests.cpp\n \n if ENABLE_WALLET\n TEST_QT_MOC_CPP += qt/test/moc_paymentservertests.cpp\n endif\n \n TEST_QT_H = \\\n+  qt/test/compattests.h \\\n   qt/test/uritests.h \\\n   qt/test/paymentrequestdata.h \\\n   qt/test/paymentservertests.h\n@@ -20,6 +23,7 @@ qt_test_test_bitcoin_qt_CPPFLAGS = $(AM_CPPFLAGS) $(BITCOIN_INCLUDES) $(BITCOIN_\n   $(QT_INCLUDES) $(QT_TEST_INCLUDES) $(PROTOBUF_CFLAGS)\n \n qt_test_test_bitcoin_qt_SOURCES = \\\n+  qt/test/compattests.cpp \\\n   qt/test/test_main.cpp \\\n   qt/test/uritests.cpp \\\n   $(TEST_QT_H)"
      },
      {
        "sha": "2565633322918e88c5af63f6fc844751f95bf1b5",
        "filename": "src/Makefile.test.include",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6ee6532bb9a31a8f99fb2d4309a913495d7cc3e5/src/Makefile.test.include",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6ee6532bb9a31a8f99fb2d4309a913495d7cc3e5/src/Makefile.test.include",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/Makefile.test.include?ref=6ee6532bb9a31a8f99fb2d4309a913495d7cc3e5",
        "patch": "@@ -50,6 +50,7 @@ BITCOIN_TESTS =\\\n   test/bip32_tests.cpp \\\n   test/blockencodings_tests.cpp \\\n   test/bloom_tests.cpp \\\n+  test/bswap_tests.cpp \\\n   test/coins_tests.cpp \\\n   test/compress_tests.cpp \\\n   test/crypto_tests.cpp \\"
      },
      {
        "sha": "56f4240e49d8d68589c9a2e7111d44e0ee4f978e",
        "filename": "src/compat/byteswap.h",
        "status": "modified",
        "additions": 20,
        "deletions": 1,
        "changes": 21,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6ee6532bb9a31a8f99fb2d4309a913495d7cc3e5/src/compat/byteswap.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6ee6532bb9a31a8f99fb2d4309a913495d7cc3e5/src/compat/byteswap.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/compat/byteswap.h?ref=6ee6532bb9a31a8f99fb2d4309a913495d7cc3e5",
        "patch": "@@ -1,4 +1,4 @@\n-// Copyright (c) 2014 The Bitcoin developers\n+// Copyright (c) 2014 The Bitcoin Core developers\n // Distributed under the MIT software license, see the accompanying\n // file COPYING or http://www.opensource.org/licenses/mit-license.php.\n \n@@ -15,6 +15,23 @@\n #include <byteswap.h>\n #endif\n \n+#if defined(__APPLE__)\n+\n+#if !defined(bswap_16)\n+\n+// Mac OS X / Darwin features; we include a check for bswap_16 because if it is already defined, protobuf has\n+// defined these macros for us already; if it isn't, we do it ourselves. In either case, we get the exact same\n+// result regardless which path was taken\n+#include <libkern/OSByteOrder.h>\n+#define bswap_16(x) OSSwapInt16(x)\n+#define bswap_32(x) OSSwapInt32(x)\n+#define bswap_64(x) OSSwapInt64(x)\n+\n+#endif // !defined(bswap_16)\n+\n+#else\n+// Non-Mac OS X / non-Darwin\n+\n #if HAVE_DECL_BSWAP_16 == 0\n inline uint16_t bswap_16(uint16_t x)\n {\n@@ -44,4 +61,6 @@ inline uint64_t bswap_64(uint64_t x)\n }\n #endif // HAVE_DECL_BSWAP64\n \n+#endif // defined(__APPLE__)\n+\n #endif // BITCOIN_COMPAT_BYTESWAP_H"
      },
      {
        "sha": "2a7284b5b2262834c4b537091e62d5848b09e44c",
        "filename": "src/qt/test/compattests.cpp",
        "status": "added",
        "additions": 23,
        "deletions": 0,
        "changes": 23,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6ee6532bb9a31a8f99fb2d4309a913495d7cc3e5/src/qt/test/compattests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6ee6532bb9a31a8f99fb2d4309a913495d7cc3e5/src/qt/test/compattests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/test/compattests.cpp?ref=6ee6532bb9a31a8f99fb2d4309a913495d7cc3e5",
        "patch": "@@ -0,0 +1,23 @@\n+// Copyright (c) 2016 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"paymentrequestplus.h\" // this includes protobuf's port.h which defines its own bswap macos\n+\n+#include \"compattests.h\"\n+\n+#include \"compat/byteswap.h\"\n+\n+void CompatTests::bswapTests()\n+{\n+\t// Sibling in bitcoin/src/test/bswap_tests.cpp\n+\tuint16_t u1 = 0x1234;\n+\tuint32_t u2 = 0x56789abc;\n+\tuint64_t u3 = 0xdef0123456789abc;\n+\tuint16_t e1 = 0x3412;\n+\tuint32_t e2 = 0xbc9a7856;\n+\tuint64_t e3 = 0xbc9a78563412f0de;\n+\tQVERIFY(bswap_16(u1) == e1);\n+\tQVERIFY(bswap_32(u2) == e2);\n+\tQVERIFY(bswap_64(u3) == e3);\n+}"
      },
      {
        "sha": "35dede774344cd4ddda861d0d46855421f36e22e",
        "filename": "src/qt/test/compattests.h",
        "status": "added",
        "additions": 19,
        "deletions": 0,
        "changes": 19,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6ee6532bb9a31a8f99fb2d4309a913495d7cc3e5/src/qt/test/compattests.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6ee6532bb9a31a8f99fb2d4309a913495d7cc3e5/src/qt/test/compattests.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/test/compattests.h?ref=6ee6532bb9a31a8f99fb2d4309a913495d7cc3e5",
        "patch": "@@ -0,0 +1,19 @@\n+// Copyright (c) 2009-2015 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_QT_TEST_COMPATTESTS_H\n+#define BITCOIN_QT_TEST_COMPATTESTS_H\n+\n+#include <QObject>\n+#include <QTest>\n+\n+class CompatTests : public QObject\n+{\n+    Q_OBJECT\n+\n+private Q_SLOTS:\n+    void bswapTests();\n+};\n+\n+#endif // BITCOIN_QT_TEST_COMPATTESTS_H"
      },
      {
        "sha": "1475319bad53ad5c0c929ab33908b6a7234dd187",
        "filename": "src/qt/test/test_main.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 1,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6ee6532bb9a31a8f99fb2d4309a913495d7cc3e5/src/qt/test/test_main.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6ee6532bb9a31a8f99fb2d4309a913495d7cc3e5/src/qt/test/test_main.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/test/test_main.cpp?ref=6ee6532bb9a31a8f99fb2d4309a913495d7cc3e5",
        "patch": "@@ -8,6 +8,7 @@\n \n #include \"util.h\"\n #include \"uritests.h\"\n+#include \"compattests.h\"\n \n #ifdef ENABLE_WALLET\n #include \"paymentservertests.h\"\n@@ -48,6 +49,8 @@ int main(int argc, char *argv[])\n     if (QTest::qExec(&test2) != 0)\n         fInvalid = true;\n #endif\n-\n+    CompatTests test3;\n+    if (QTest::qExec(&test3) != 0)\n+        fInvalid = true;\n     return fInvalid;\n }"
      },
      {
        "sha": "7b3134d327d9b28af9e3f677d7f525baa3d62feb",
        "filename": "src/test/bswap_tests.cpp",
        "status": "added",
        "additions": 26,
        "deletions": 0,
        "changes": 26,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6ee6532bb9a31a8f99fb2d4309a913495d7cc3e5/src/test/bswap_tests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6ee6532bb9a31a8f99fb2d4309a913495d7cc3e5/src/test/bswap_tests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/bswap_tests.cpp?ref=6ee6532bb9a31a8f99fb2d4309a913495d7cc3e5",
        "patch": "@@ -0,0 +1,26 @@\n+// Copyright (c) 2016 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"compat/byteswap.h\"\n+#include \"test/test_bitcoin.h\"\n+\n+#include <boost/test/unit_test.hpp>\n+\n+BOOST_FIXTURE_TEST_SUITE(bswap_tests, BasicTestingSetup)\n+\n+BOOST_AUTO_TEST_CASE(bswap_tests)\n+{\n+\t// Sibling in bitcoin/src/qt/test/compattests.cpp\n+\tuint16_t u1 = 0x1234;\n+\tuint32_t u2 = 0x56789abc;\n+\tuint64_t u3 = 0xdef0123456789abc;\n+\tuint16_t e1 = 0x3412;\n+\tuint32_t e2 = 0xbc9a7856;\n+\tuint64_t e3 = 0xbc9a78563412f0de;\n+\tBOOST_CHECK(bswap_16(u1) == e1);\n+\tBOOST_CHECK(bswap_32(u2) == e2);\n+\tBOOST_CHECK(bswap_64(u3) == e3);\n+}\n+\n+BOOST_AUTO_TEST_SUITE_END()"
      }
    ]
  }
]