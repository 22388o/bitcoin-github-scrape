[
  {
    "sha": "0afed534f911a2a7ed34ff1fe1857be749d077ec",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowYWZlZDUzNGY5MTFhMmE3ZWQzNGZmMWZlMTg1N2JlNzQ5ZDA3N2Vj",
    "commit": {
      "author": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2020-02-15T12:38:18Z"
      },
      "committer": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2020-02-15T12:38:18Z"
      },
      "message": "build: [WIP] replace libdmg and genisoimage with xorriso",
      "tree": {
        "sha": "054e9648266f4cea2e75d8002dc0122448e43545",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/054e9648266f4cea2e75d8002dc0122448e43545"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0afed534f911a2a7ed34ff1fe1857be749d077ec",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEz7FuIclQ9n+pXlWPLuufXMCVJsEFAl5H5joACgkQLuufXMCV\nJsHm/RAAmtdvJ5TaCb3MpO3yKeYbXzlzJ2LXev11Hd3J8R+xzkFYrp0n/D6ds/Pm\nAVsCixzagt5h+n4HBA1VrP4p5r0Lh4pz+GxBgw8bc3syt7kQt9Uzao8qq8/FTfNd\nHe98360CcuU69G1Ft6YFZZYv4aSs1EXbfrMccf3sRZqB6D9/ypKRPvED8reapT1b\nJdwS9TwSVw8mlMbDWthGdW4itBJGJh/FkF/xUOqz8cZHLCCUjO9Jxau+LE3wFWaF\nDEUxQXgQVnQvbJOjjXbMTOC0wrobDVFpAbAMvKm69fybfmQMdoGkip3QNW7oMwMG\nwXiEWn9Ts8wnPFQRIUPHxOkxbmzL/PilKljHyMBvHzZi1vwUBlbNclgMvorrkaZL\ngucxkyWAm+Di6UKuH9zgnxjVKamo8/GKEXnP7cVHKcv1gMW22J3jluCY50tkH1DI\nESPsANl6Cj34nCA4DwMWKdo76H4+T+nOAyGiRNoj/CRCCzytrxz/VmdoaK64VI3X\nz1UjyEn+G68Ijfd5uCXSRtwU64/kPT65cK6QtS1XYjfDgjHB3RmJFe5jYP4/VYzs\nh6JxaZDoV+LjHEQnKuakEGxlnzKai02Mb6QlmQDhpvqglVOJ0aeTsAMoOTGuUGtt\nDYpzPMUg5pFqXING4bbjlaIqXE0WR/yRLj3ejYF7Q6Evhfytlmg=\n=N8M5\n-----END PGP SIGNATURE-----",
        "payload": "tree 054e9648266f4cea2e75d8002dc0122448e43545\nparent 470664f2b788e2cce9202991d11476a6fef00ef4\nauthor fanquake <fanquake@gmail.com> 1581770298 +0800\ncommitter fanquake <fanquake@gmail.com> 1581770298 +0800\n\nbuild: [WIP] replace libdmg and genisoimage with xorriso\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0afed534f911a2a7ed34ff1fe1857be749d077ec",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/0afed534f911a2a7ed34ff1fe1857be749d077ec",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0afed534f911a2a7ed34ff1fe1857be749d077ec/comments",
    "author": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "470664f2b788e2cce9202991d11476a6fef00ef4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/470664f2b788e2cce9202991d11476a6fef00ef4",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/470664f2b788e2cce9202991d11476a6fef00ef4"
      }
    ],
    "stats": {
      "total": 39,
      "additions": 13,
      "deletions": 26
    },
    "files": [
      {
        "sha": "4a1efeb77157b9b684c3a0ad598a9c97ca59c66e",
        "filename": "Makefile.am",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0afed534f911a2a7ed34ff1fe1857be749d077ec/Makefile.am",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0afed534f911a2a7ed34ff1fe1857be749d077ec/Makefile.am",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/Makefile.am?ref=0afed534f911a2a7ed34ff1fe1857be749d077ec",
        "patch": "@@ -147,7 +147,7 @@ $(APP_DIST_DIR)/Applications:\n $(APP_DIST_EXTRAS): $(APP_DIST_DIR)/$(OSX_APP)/Contents/MacOS/Bitcoin-Qt\n \n $(OSX_DMG): $(APP_DIST_EXTRAS)\n-\t$(GENISOIMAGE) -no-cache-inodes -D -l -probe -V \"$(OSX_VOLNAME)\" -no-pad -r -dir-mode 0755 -apple -o $@ dist\n+\t$(XORRISOFS) -D -l -V \"$(OSX_VOLNAME)\" -no-pad -r -dir-mode 0755 -o $@ dist\n \n dpi%.$(OSX_BACKGROUND_IMAGE): contrib/macdeploy/$(OSX_BACKGROUND_SVG)\n \tsed 's/PACKAGE_NAME/$(PACKAGE_NAME)/' < \"$<\" | $(RSVG_CONVERT) -f png -d $* -p $* | $(IMAGEMAGICK_CONVERT) - $@"
      },
      {
        "sha": "843776e8a632c89239aa19025d6721b30b4fc3e6",
        "filename": "configure.ac",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0afed534f911a2a7ed34ff1fe1857be749d077ec/configure.ac",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0afed534f911a2a7ed34ff1fe1857be749d077ec/configure.ac",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/configure.ac?ref=0afed534f911a2a7ed34ff1fe1857be749d077ec",
        "patch": "@@ -582,7 +582,7 @@ case $host in\n          *)\n            AC_PATH_TOOL([INSTALLNAMETOOL], [install_name_tool], install_name_tool)\n            AC_PATH_TOOL([OTOOL], [otool], otool)\n-           AC_PATH_PROGS([GENISOIMAGE], [genisoimage mkisofs],genisoimage)\n+           AC_PATH_PROGS([XORRISOFS], [xorrisofs],xorrisofs)\n            AC_PATH_PROGS([RSVG_CONVERT], [rsvg-convert rsvg],rsvg-convert)\n            AC_PATH_PROGS([IMAGEMAGICK_CONVERT], [convert],convert)\n            AC_PATH_PROGS([TIFFCP], [tiffcp],tiffcp)"
      },
      {
        "sha": "1d6bbda3db7003cb5c04b39df01dff8b95b466b3",
        "filename": "contrib/gitian-descriptors/gitian-osx-signer.yml",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0afed534f911a2a7ed34ff1fe1857be749d077ec/contrib/gitian-descriptors/gitian-osx-signer.yml",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0afed534f911a2a7ed34ff1fe1857be749d077ec/contrib/gitian-descriptors/gitian-osx-signer.yml",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/gitian-descriptors/gitian-osx-signer.yml?ref=0afed534f911a2a7ed34ff1fe1857be749d077ec",
        "patch": "@@ -7,6 +7,7 @@ architectures:\n - \"amd64\"\n packages:\n - \"faketime\"\n+- \"xorriso\"\n remotes:\n - \"url\": \"https://github.com/bitcoin-core/bitcoin-detached-sigs.git\"\n   \"dir\": \"signature\"\n@@ -18,7 +19,7 @@ script: |\n   WRAP_DIR=$HOME/wrapped\n   mkdir -p ${WRAP_DIR}\n   export PATH=\"$PWD\":$PATH\n-  FAKETIME_PROGS=\"dmg genisoimage\"\n+  FAKETIME_PROGS=\"xorrisofs\"\n \n   # Create global faketime wrappers\n   for prog in ${FAKETIME_PROGS}; do\n@@ -36,5 +37,4 @@ script: |\n   tar -xf ${UNSIGNED}\n   OSX_VOLNAME=\"$(cat osx_volname)\"\n   ./detached-sig-apply.sh ${UNSIGNED} signature/osx\n-  ${WRAP_DIR}/genisoimage -no-cache-inodes -D -l -probe -V \"${OSX_VOLNAME}\" -no-pad -r -dir-mode 0755 -apple -o uncompressed.dmg signed-app\n-  ${WRAP_DIR}/dmg dmg uncompressed.dmg ${OUTDIR}/${SIGNED}\n+  xorrisofs -D -l -V \"${OSX_VOLNAME}\" -no-pad -r -dir-mode 0755 -o ${OUTDIR}/${SIGNED} signed-app"
      },
      {
        "sha": "98f6acb6f3e9c9437608a43e62385e12189af08a",
        "filename": "contrib/gitian-descriptors/gitian-osx.yml",
        "status": "modified",
        "additions": 4,
        "deletions": 4,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0afed534f911a2a7ed34ff1fe1857be749d077ec/contrib/gitian-descriptors/gitian-osx.yml",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0afed534f911a2a7ed34ff1fe1857be749d077ec/contrib/gitian-descriptors/gitian-osx.yml",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/gitian-descriptors/gitian-osx.yml?ref=0afed534f911a2a7ed34ff1fe1857be749d077ec",
        "patch": "@@ -28,6 +28,7 @@ packages:\n - \"python3-dev\"\n - \"python3-setuptools\"\n - \"fonts-tuffy\"\n+- \"xorriso\"\n remotes:\n - \"url\": \"https://github.com/bitcoin/bitcoin.git\"\n   \"dir\": \"bitcoin\"\n@@ -38,9 +39,9 @@ script: |\n \n   WRAP_DIR=$HOME/wrapped\n   HOSTS=\"x86_64-apple-darwin16\"\n-  CONFIGFLAGS=\"--enable-reduce-exports --disable-bench --disable-gui-tests GENISOIMAGE=$WRAP_DIR/genisoimage\"\n+  CONFIGFLAGS=\"--enable-reduce-exports --disable-bench --disable-gui-tests\"\n   FAKETIME_HOST_PROGS=\"\"\n-  FAKETIME_PROGS=\"ar ranlib date dmg genisoimage\"\n+  FAKETIME_PROGS=\"ar ranlib date xorrisofs\"\n \n   export QT_RCC_TEST=1\n   export QT_RCC_SOURCE_DATE_OVERRIDE=1\n@@ -148,7 +149,6 @@ script: |\n     cp osx_volname unsigned-app-${i}/\n     cp contrib/macdeploy/detached-sig-apply.sh unsigned-app-${i}\n     cp contrib/macdeploy/detached-sig-create.sh unsigned-app-${i}\n-    cp ${BASEPREFIX}/${i}/native/bin/dmg ${BASEPREFIX}/${i}/native/bin/genisoimage unsigned-app-${i}\n     cp ${BASEPREFIX}/${i}/native/bin/${i}-codesign_allocate unsigned-app-${i}/codesign_allocate\n     cp ${BASEPREFIX}/${i}/native/bin/${i}-pagestuff unsigned-app-${i}/pagestuff\n     mv dist unsigned-app-${i}\n@@ -157,7 +157,7 @@ script: |\n     popd\n \n     make deploy\n-    ${WRAP_DIR}/dmg dmg \"${OSX_VOLNAME}.dmg\" ${OUTDIR}/${DISTNAME}-osx-unsigned.dmg\n+    mv \"${OSX_VOLNAME}.dmg\" ${OUTDIR}/${DISTNAME}-osx-unsigned.dmg\n \n     cd installed\n     find . -name \"lib*.la\" -delete"
      },
      {
        "sha": "1793844d67a8563874030c41d5bfde9511d56cf5",
        "filename": "contrib/macdeploy/README.md",
        "status": "modified",
        "additions": 4,
        "deletions": 17,
        "changes": 21,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0afed534f911a2a7ed34ff1fe1857be749d077ec/contrib/macdeploy/README.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0afed534f911a2a7ed34ff1fe1857be749d077ec/contrib/macdeploy/README.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/macdeploy/README.md?ref=0afed534f911a2a7ed34ff1fe1857be749d077ec",
        "patch": "@@ -103,19 +103,7 @@ created using these tools. The build process has been designed to avoid includin\n SDK's files in Gitian's outputs. All interim tarballs are fully deterministic and may be freely\n redistributed.\n \n-`genisoimage` is used to create the initial DMG. It is not deterministic as-is, so it has been\n-patched. A system `genisoimage` will work fine, but it will not be deterministic because\n-the file-order will change between invocations. The patch can be seen here: [cdrkit-deterministic.patch](https://github.com/bitcoin/bitcoin/blob/master/depends/patches/native_cdrkit/cdrkit-deterministic.patch).\n-No effort was made to fix this cleanly, so it likely leaks memory badly, however it's only used for\n-a single invocation, so that's no real concern.\n-\n-`genisoimage` cannot compress DMGs, so afterwards, the DMG tool from the\n-`libdmg-hfsplus` project is used to compress it. There are several bugs in this tool and its\n-maintainer has seemingly abandoned the project.\n-\n-The DMG tool has the ability to create DMGs from scratch as well, but this functionality is\n-broken. Only the compression feature is currently used. Ideally, the creation could be fixed\n-and `genisoimage` would no longer be necessary.\n+[`xorrisofs`](https://www.gnu.org/software/xorriso/) is used to create the DMG.\n \n Background images and other features can be added to DMG files by inserting a\n `.DS_Store` before creation. This is generated by the script `contrib/macdeploy/custom_dsstore.py`.\n@@ -127,9 +115,8 @@ deterministic. Here's how it works:\n \n - Builders use Gitian to create an unsigned release. This outputs an unsigned DMG which\n   users may choose to bless and run. It also outputs an unsigned app structure in the form\n-  of a tarball, which also contains all of the tools that have been previously (deterministically)\n-  built in order to create a final DMG.\n+  of a tarball.\n - The Apple keyholder uses this unsigned app to create a detached signature, using the\n   script that is also included there. Detached signatures are available from this [repository](https://github.com/bitcoin-core/bitcoin-detached-sigs).\n-- Builders feed the unsigned app + detached signature back into Gitian. It uses the\n-  pre-built tools to recombine the pieces into a deterministic DMG.\n+- Builders feed the unsigned app + detached signature back into Gitian. It then\n+  recombines all the pieces into a final, deterministic DMG."
      }
    ]
  },
  {
    "sha": "b3d8d628da4a35964a4d6007ced340266ef6f1f8",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiM2Q4ZDYyOGRhNGEzNTk2NGE0ZDYwMDdjZWQzNDAyNjZlZjZmMWY4",
    "commit": {
      "author": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2020-02-15T12:40:44Z"
      },
      "committer": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2020-02-15T12:40:44Z"
      },
      "message": "build: remove libdmg-hfsplus package from depends",
      "tree": {
        "sha": "ba5628ecede04c267bdb066e1feaf7191452a71d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ba5628ecede04c267bdb066e1feaf7191452a71d"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b3d8d628da4a35964a4d6007ced340266ef6f1f8",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEz7FuIclQ9n+pXlWPLuufXMCVJsEFAl5H5swACgkQLuufXMCV\nJsHCJQ/+KWXASX1Vil0UQVQAfoJNp9+JMwhyZADxYkR586RekUMDAM8NNvOBy4dO\nT/i1IJNSip81RfVaom+gR4KJWDlnBCFzu14Ltzafz1J7caD37tUWEwmkT1wyTF+b\ndqY9CRAMm9hGVj2IrRer5xE8Uk33IdF9d+eKwYcUJWg8QD9KDpnr0bfrYJqEifmF\neFCxdKXJsDRZY+yFzWjKJXXhR0hnCiI6/VugbB6z0hyKXAoWPv3v1XiNhFJ9BVin\njq2HXQVZWnHJ4REWpJY7ySxSM4uflTG/CZt95oA9SSYUtr5vcmwfIha2igyq8zln\nMyBlQBR66qaCaO4akt6S5zqiF29dJrnAhH0idkYOEwFTN4/LIHySFjYHyzopBjLe\ncofKrd3VoSsR7P4+RJ9WmtaTmYEhcgsCvdYpzj4LMFNWbc+6v9Lj9CaW61IPNfdX\nikbF73lvSHbTlXU4p2+x39IelS7cOklu/T61rfeDDwEg0rS5NWtj+hsdyktHnWmV\n0+boptLgimkYOH+gXlyQbZL50+ip57ynC3bnVGrQGNOFPh0/GR8y7BdIOHJv5ylp\njbGb1/5paIk7JtuKF5U/SI0p04XFYdOPVyuP/CBb/9P81LD8DCXLsHFArdDYFFZb\nC4koauYjU9exjaU83rJomwLi3gYobbbUf/hygFdxgZqXscoIe+I=\n=kJmn\n-----END PGP SIGNATURE-----",
        "payload": "tree ba5628ecede04c267bdb066e1feaf7191452a71d\nparent 0afed534f911a2a7ed34ff1fe1857be749d077ec\nauthor fanquake <fanquake@gmail.com> 1581770444 +0800\ncommitter fanquake <fanquake@gmail.com> 1581770444 +0800\n\nbuild: remove libdmg-hfsplus package from depends\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b3d8d628da4a35964a4d6007ced340266ef6f1f8",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/b3d8d628da4a35964a4d6007ced340266ef6f1f8",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b3d8d628da4a35964a4d6007ced340266ef6f1f8/comments",
    "author": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "0afed534f911a2a7ed34ff1fe1857be749d077ec",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0afed534f911a2a7ed34ff1fe1857be749d077ec",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/0afed534f911a2a7ed34ff1fe1857be749d077ec"
      }
    ],
    "stats": {
      "total": 71,
      "additions": 1,
      "deletions": 70
    },
    "files": [
      {
        "sha": "c0f0ce74de8b64efac6e15e4c9082f13073a2951",
        "filename": "depends/packages/native_libdmg-hfsplus.mk",
        "status": "removed",
        "additions": 0,
        "deletions": 24,
        "changes": 24,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0afed534f911a2a7ed34ff1fe1857be749d077ec/depends/packages/native_libdmg-hfsplus.mk",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0afed534f911a2a7ed34ff1fe1857be749d077ec/depends/packages/native_libdmg-hfsplus.mk",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/packages/native_libdmg-hfsplus.mk?ref=0afed534f911a2a7ed34ff1fe1857be749d077ec",
        "patch": "@@ -1,24 +0,0 @@\n-package=native_libdmg-hfsplus\n-$(package)_version=7ac55ec64c96f7800d9818ce64c79670e7f02b67\n-$(package)_download_path=https://github.com/planetbeing/libdmg-hfsplus/archive\n-$(package)_file_name=$($(package)_version).tar.gz\n-$(package)_sha256_hash=56fbdc48ec110966342f0ecddd6f8f89202f4143ed2a3336e42bbf88f940850c\n-$(package)_build_subdir=build\n-$(package)_patches=remove-libcrypto-dependency.patch\n-\n-define $(package)_preprocess_cmds\n-  patch -p1 < $($(package)_patch_dir)/remove-libcrypto-dependency.patch && \\\n-  mkdir build\n-endef\n-\n-define $(package)_config_cmds\n-  cmake -DCMAKE_INSTALL_PREFIX:PATH=$(build_prefix) -DCMAKE_C_FLAGS=\"-Wl,--build-id=none\" ..\n-endef\n-\n-define $(package)_build_cmds\n-  $(MAKE) -C dmg\n-endef\n-\n-define $(package)_stage_cmds\n-  $(MAKE) DESTDIR=$($(package)_staging_dir) -C dmg install\n-endef"
      },
      {
        "sha": "525d929e02b3017941a7bc11764e4df755d15164",
        "filename": "depends/packages/packages.mk",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b3d8d628da4a35964a4d6007ced340266ef6f1f8/depends/packages/packages.mk",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b3d8d628da4a35964a4d6007ced340266ef6f1f8/depends/packages/packages.mk",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/packages/packages.mk?ref=b3d8d628da4a35964a4d6007ced340266ef6f1f8",
        "patch": "@@ -21,5 +21,5 @@ upnp_packages=miniupnpc\n darwin_native_packages = native_biplist native_ds_store native_mac_alias\n \n ifneq ($(build_os),darwin)\n-darwin_native_packages += native_cctools native_cdrkit native_libdmg-hfsplus\n+darwin_native_packages += native_cctools native_cdrkit\n endif"
      },
      {
        "sha": "f346c8f2cff8b040cc534c32402ccf92229d8c05",
        "filename": "depends/patches/native_libdmg-hfsplus/remove-libcrypto-dependency.patch",
        "status": "removed",
        "additions": 0,
        "deletions": 45,
        "changes": 45,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0afed534f911a2a7ed34ff1fe1857be749d077ec/depends/patches/native_libdmg-hfsplus/remove-libcrypto-dependency.patch",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0afed534f911a2a7ed34ff1fe1857be749d077ec/depends/patches/native_libdmg-hfsplus/remove-libcrypto-dependency.patch",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/patches/native_libdmg-hfsplus/remove-libcrypto-dependency.patch?ref=0afed534f911a2a7ed34ff1fe1857be749d077ec",
        "patch": "@@ -1,45 +0,0 @@\n-From 3e5fd3fb56bc9ff03beb535979e33dcf83fe1f70 Mon Sep 17 00:00:00 2001\n-From: Cory Fields <cory-nospam-@coryfields.com>\n-Date: Thu, 8 May 2014 12:39:42 -0400\n-Subject: [PATCH] dmg: remove libcrypto dependency\n-\n----\n- dmg/CMakeLists.txt | 16 ----------------\n- 1 file changed, 16 deletions(-)\n-\n-diff --git a/dmg/CMakeLists.txt b/dmg/CMakeLists.txt\n-index eec62d6..3969f64 100644\n---- a/dmg/CMakeLists.txt\n-+++ b/dmg/CMakeLists.txt\n-@@ -1,12 +1,5 @@\n--INCLUDE(FindOpenSSL)\n- INCLUDE(FindZLIB)\n- \n--FIND_LIBRARY(CRYPTO_LIBRARIES crypto\n--      PATHS\n--      /usr/lib\n--      /usr/local/lib\n--   )\n--\n- IF(NOT ZLIB_FOUND)\n- \tmessage(FATAL_ERROR \"zlib is required for dmg!\")\n- ENDIF(NOT ZLIB_FOUND)\n-@@ -18,15 +11,6 @@ link_directories(${PROJECT_BINARY_DIR}/common ${PROJECT_BINARY_DIR}/hfs)\n- \n- add_library(dmg adc.c base64.c checksum.c dmgfile.c dmglib.c filevault.c io.c partition.c resources.c udif.c)\n- \n--IF(OPENSSL_FOUND)\n--\tadd_definitions(-DHAVE_CRYPT)\n--\tinclude_directories(${OPENSSL_INCLUDE_DIR})\n--\ttarget_link_libraries(dmg ${CRYPTO_LIBRARIES})\n--\tIF(WIN32)\n--\t\tTARGET_LINK_LIBRARIES(dmg gdi32)\n--\tENDIF(WIN32)\n--ENDIF(OPENSSL_FOUND)\n--\n- target_link_libraries(dmg common hfs z)\n- \n- add_executable(dmg-bin dmg.c)\n--- \n-2.22.0\n-"
      }
    ]
  },
  {
    "sha": "581d0e245cb7c93f2f43f5abbf57171c1ea41c86",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo1ODFkMGUyNDVjYjdjOTNmMmY0M2Y1YWJiZjU3MTcxYzFlYTQxYzg2",
    "commit": {
      "author": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2020-02-15T12:41:14Z"
      },
      "committer": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2020-02-15T12:41:14Z"
      },
      "message": "build: remove cdrkit package from depends",
      "tree": {
        "sha": "cb36a2f73a7a333b19febfa58c2224c8957430e6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/cb36a2f73a7a333b19febfa58c2224c8957430e6"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/581d0e245cb7c93f2f43f5abbf57171c1ea41c86",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEz7FuIclQ9n+pXlWPLuufXMCVJsEFAl5H5uoACgkQLuufXMCV\nJsEe8Q//TQlJ7N8krtXamzqf9db6GJjLSfhfCOt3VoeFu/AsQMaolf39pN7aB/8c\nsxCFjBEMJbtuKATNawQIm6G/n0FFe6WRsryKlFu0B7t1X7Z+sR9j5ROs00gUnkkf\nUDVcEmI58uxcS6/5FERdbMPzkAdogdG48+KIFQftb+NGlDD5B8cH5Wk1GUbWpy9V\nuWy5G3ugyljm4FKpMbslGe7s1ZgK3AFxgyjEmOfcS3r2KpzqZ1pbx3H5Mz3QNwmR\nI3urwvzYIHl162lA9L4MGXUhCg2aoQHsmEEtLvWMc1YGHIK39gpNiKlU/BD0DyKV\nczm+KjHU/jjB2ZtotjG/sWJLO6hK3HorIjCDA9ZF06oREWPh+veIisxOLTVHT4FJ\nFICT8X0Q8lVBrFQIV+ASdxfKd3iQpJMvi7u2NFLqwBobo9X8jJ5Zljw2rnzJdtia\na/bfUB/AXMBQr5U3WeWyVculM9T3p53RcNb8toNkMrXC/ZE1zBzV/LqK11BtmZNG\n3bHIs/WqsDbqV1S7TUmXTvMrTIPNANbtpoHUKnVlt4A2yDZ0uS9UT8dGDWEO79LT\n/WPRjOJYYVrpRMhGumG9we7v1v7xZVkoDyKwIHOSSUaQoaxRAkgsF2AeuZQCBg6s\n+2kdFqZhnFR3o4ZRGiCNB70Lezjpzv/U5+n+9fzzgf2pK1v5PxA=\n=a4vs\n-----END PGP SIGNATURE-----",
        "payload": "tree cb36a2f73a7a333b19febfa58c2224c8957430e6\nparent b3d8d628da4a35964a4d6007ced340266ef6f1f8\nauthor fanquake <fanquake@gmail.com> 1581770474 +0800\ncommitter fanquake <fanquake@gmail.com> 1581770474 +0800\n\nbuild: remove cdrkit package from depends\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/581d0e245cb7c93f2f43f5abbf57171c1ea41c86",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/581d0e245cb7c93f2f43f5abbf57171c1ea41c86",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/581d0e245cb7c93f2f43f5abbf57171c1ea41c86/comments",
    "author": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "b3d8d628da4a35964a4d6007ced340266ef6f1f8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b3d8d628da4a35964a4d6007ced340266ef6f1f8",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/b3d8d628da4a35964a4d6007ced340266ef6f1f8"
      }
    ],
    "stats": {
      "total": 114,
      "additions": 1,
      "deletions": 113
    },
    "files": [
      {
        "sha": "8243458ec858ed045ff16219b36ff9f64512e099",
        "filename": "depends/packages/native_cdrkit.mk",
        "status": "removed",
        "additions": 0,
        "deletions": 26,
        "changes": 26,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b3d8d628da4a35964a4d6007ced340266ef6f1f8/depends/packages/native_cdrkit.mk",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b3d8d628da4a35964a4d6007ced340266ef6f1f8/depends/packages/native_cdrkit.mk",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/packages/native_cdrkit.mk?ref=b3d8d628da4a35964a4d6007ced340266ef6f1f8",
        "patch": "@@ -1,26 +0,0 @@\n-package=native_cdrkit\n-$(package)_version=1.1.11\n-$(package)_download_path=https://distro.ibiblio.org/fatdog/source/600/c\n-$(package)_file_name=cdrkit-$($(package)_version).tar.bz2\n-$(package)_sha256_hash=b50d64c214a65b1a79afe3a964c691931a4233e2ba605d793eb85d0ac3652564\n-$(package)_patches=cdrkit-deterministic.patch\n-\n-define $(package)_preprocess_cmds\n-  patch -p1 < $($(package)_patch_dir)/cdrkit-deterministic.patch\n-endef\n-\n-define $(package)_config_cmds\n-  cmake -DCMAKE_INSTALL_PREFIX=$(build_prefix)\n-endef\n-\n-define $(package)_build_cmds\n-  $(MAKE) genisoimage\n-endef\n-\n-define $(package)_stage_cmds\n-  $(MAKE) DESTDIR=$($(package)_staging_dir) -C genisoimage install\n-endef\n-\n-define $(package)_postprocess_cmds\n-  rm bin/isovfy bin/isoinfo bin/isodump bin/isodebug bin/devdump\n-endef"
      },
      {
        "sha": "52f547b75d6a23f2dbdf48e2ec27358a92ab06c9",
        "filename": "depends/packages/packages.mk",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/581d0e245cb7c93f2f43f5abbf57171c1ea41c86/depends/packages/packages.mk",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/581d0e245cb7c93f2f43f5abbf57171c1ea41c86/depends/packages/packages.mk",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/packages/packages.mk?ref=581d0e245cb7c93f2f43f5abbf57171c1ea41c86",
        "patch": "@@ -21,5 +21,5 @@ upnp_packages=miniupnpc\n darwin_native_packages = native_biplist native_ds_store native_mac_alias\n \n ifneq ($(build_os),darwin)\n-darwin_native_packages += native_cctools native_cdrkit\n+darwin_native_packages += native_cctools\n endif"
      },
      {
        "sha": "8ab0993dc4de142ab7766a500640be92540fe80f",
        "filename": "depends/patches/native_cdrkit/cdrkit-deterministic.patch",
        "status": "removed",
        "additions": 0,
        "deletions": 86,
        "changes": 86,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b3d8d628da4a35964a4d6007ced340266ef6f1f8/depends/patches/native_cdrkit/cdrkit-deterministic.patch",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b3d8d628da4a35964a4d6007ced340266ef6f1f8/depends/patches/native_cdrkit/cdrkit-deterministic.patch",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/patches/native_cdrkit/cdrkit-deterministic.patch?ref=b3d8d628da4a35964a4d6007ced340266ef6f1f8",
        "patch": "@@ -1,86 +0,0 @@\n---- cdrkit-1.1.11.old/genisoimage/tree.c\t2008-10-21 19:57:47.000000000 -0400\n-+++ cdrkit-1.1.11/genisoimage/tree.c\t2013-12-06 00:23:18.489622668 -0500\n-@@ -1139,8 +1139,9 @@\n- scan_directory_tree(struct directory *this_dir, char *path, \n- \t\t\t\t\t\t  struct directory_entry *de)\n- {\n--\tDIR\t\t*current_dir;\n-+        int             current_file;\n- \tchar\t\twhole_path[PATH_MAX];\n-+        struct dirent  **d_list;\n- \tstruct dirent\t*d_entry;\n- \tstruct directory *parent;\n- \tint\t\tdflag;\n-@@ -1164,7 +1165,8 @@\n- \tthis_dir->dir_flags |= DIR_WAS_SCANNED;\n- \n- \terrno = 0;\t/* Paranoia */\n--\tcurrent_dir = opendir(path);\n-+\t//current_dir = opendir(path);\n-+        current_file = scandir(path, &d_list, NULL, alphasort);\n- \td_entry = NULL;\n- \n- \t/*\n-@@ -1173,12 +1175,12 @@\n- \t */\n- \told_path = path;\n- \n--\tif (current_dir) {\n-+\tif (current_file >= 0) {\n- \t\terrno = 0;\n--\t\td_entry = readdir(current_dir);\n-+\t\td_entry = d_list[0];\n- \t}\n- \n--\tif (!current_dir || !d_entry) {\n-+\tif (current_file < 0 || !d_entry) {\n- \t\tint\tret = 1;\n- \n- #ifdef\tUSE_LIBSCHILY\n-@@ -1191,8 +1193,8 @@\n- \t\t\tde->isorec.flags[0] &= ~ISO_DIRECTORY;\n- \t\t\tret = 0;\n- \t\t}\n--\t\tif (current_dir)\n--\t\t\tclosedir(current_dir);\n-+\t\tif(d_list)\n-+\t\t\tfree(d_list);\n- \t\treturn (ret);\n- \t}\n- #ifdef\tABORT_DEEP_ISO_ONLY\n-@@ -1208,7 +1210,7 @@\n- \t\t\terrmsgno(EX_BAD, \"use Rock Ridge extensions via -R or -r,\\n\");\n- \t\t\terrmsgno(EX_BAD, \"or allow deep ISO9660 directory nesting via -D.\\n\");\n- \t\t}\n--\t\tclosedir(current_dir);\n-+\t\tfree(d_list);\n- \t\treturn (1);\n- \t}\n- #endif\n-@@ -1250,13 +1252,13 @@\n- \t\t * The first time through, skip this, since we already asked\n- \t\t * for the first entry when we opened the directory.\n- \t\t */\n--\t\tif (dflag)\n--\t\t\td_entry = readdir(current_dir);\n-+\t\tif (dflag && current_file >= 0)\n-+\t\t\td_entry = d_list[current_file];\n- \t\tdflag++;\n- \n--\t\tif (!d_entry)\n-+\t\tif (current_file < 0)\n- \t\t\tbreak;\n--\n-+                current_file--;\n- \t\t/* OK, got a valid entry */\n- \n- \t\t/* If we do not want all files, then pitch the backups. */\n-@@ -1348,7 +1350,7 @@\n- \t\tinsert_file_entry(this_dir, whole_path, d_entry->d_name);\n- #endif\t/* APPLE_HYB */\n- \t}\n--\tclosedir(current_dir);\n-+\tfree(d_list);\n- \n- #ifdef APPLE_HYB\n- \t/*"
      }
    ]
  }
]