[
  {
    "sha": "db4d2c282afd46709792aaf2d36ffbfc1745b776",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkYjRkMmMyODJhZmQ0NjcwOTc5MmFhZjJkMzZmZmJmYzE3NDViNzc2",
    "commit": {
      "author": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2021-04-01T08:46:20Z"
      },
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2021-04-09T07:02:04Z"
      },
      "message": "cli: create AddrinfoRequestHandler class",
      "tree": {
        "sha": "a9aa45eccd51bc0c66775f5918c4c8c43f8b8a63",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a9aa45eccd51bc0c66775f5918c4c8c43f8b8a63"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/db4d2c282afd46709792aaf2d36ffbfc1745b776",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEd6u7+MhX7zEv6RP5T1chs9Djkh0FAmBv++wACgkQT1chs9Dj\nkh3yqw/9GIgkuaYbA9HYsjnXFsSMusB7/1bbdTFl40fYpOQC978KCW5X9Tm5PmiA\n6YupoFU2vfhHphJDmLiy05uh/A6+7GVqKsQvhbEkaaYOCE0SUWph0QS+CJB+pj5x\nz3McV9XWgBeOcr7lb/Ayy4pewi6lUBCJAbfxGBbQIwiwRxaUo1pqufiun3+79675\nRB68pLF+9czn1wb/+xWiZ5eHn2FdSb4hyq5kNLsDZsGAvtwyIrSqp5aKJKO6/PvG\nOXUVXda+tA6pHEak1KEvDPpzNueK21sKf8p7PW486jqFxvPvJxlXyESzPcJgRunp\n+6FjFrBaZfQA31m0+ErDRBBz5zGbl0Aw+ZwNmTum+FSuq7X2o0L96twvcdbuZwSu\nXx5J/vqVEctE4sTp7+SOm7kx+5cINaDlZYH8RPnkb2DV3y7ehxK95ZDJ8BWZ5vcx\n73ozBJkCoy3eI0rjvJJXNtm0pWUnvyb8EaTERNXiYt5aGEZBRqm6XarxZMPNab/7\nezEjVfLmALdzkmfgv5cIQJuap9v63mt5crQFn5zr/qOJG3jjhRcfMF9vJcSUQprQ\nq/vY57vbah8taQ6IuAz5SHkmDlX4DP/LBG0DzB7Ya+7vdKwRNZETztu5YN0yo8KO\n8wnnFWiEm1E07Zg3CJmQKaBZvuvWdy65nZfwHzrcuC34ilmltAE=\n=/tmx\n-----END PGP SIGNATURE-----\n-----BEGIN OPENTIMESTAMPS GIT TIMESTAMP-----\n\nAQHwIIA2DZAagiGdEjlbGAR2fexMwDQlDg6+DVfP9y4wOxQnCP/wEBO32PXSC1PD\nOyNgzpYMTUkI8QRgb/vu8AgsocABzOag1ACD3+MNLvkMjiwraHR0cHM6Ly9ib2Iu\nYnRjLmNhbGVuZGFyLm9wZW50aW1lc3RhbXBzLm9yZ//wEBw4R+h0/8fQwt4sMPSL\n85YI8SCgw514nxwxk68Jz8lqP9Bqv4BJUxqS+5t6jKGiZbFQngjxBGBv++3wCDl1\n3QBMxPGWAIPf4w0u+QyOLi1odHRwczovL2FsaWNlLmJ0Yy5jYWxlbmRhci5vcGVu\ndGltZXN0YW1wcy5vcmf/8BD26r4bWjyAkR5j0Z/oWHHHCPAgHqr9+DGO8McICdOx\nuLEDFGhw3umwvUH670JlzJLu7UEI8CBmRgUxq0NO+t0mUA6OU2OgJQ9jha8ITFCx\nLpJfADNVPAjxBGBv7hbwCGsoWukAT3lzAIPf4w0u+QyOKShodHRwczovL2Zpbm5l\neS5jYWxlbmRhci5ldGVybml0eXdhbGwuY29t8BD6c9R1DMpU7VuYnIaZrzBHCPEE\nYG/77vAIkA61ZSr9f9sAg9/jDS75DI4jImh0dHBzOi8vYnRjLmNhbGVuZGFyLmNh\ndGFsbGF4eS5jb20=\n-----END OPENTIMESTAMPS GIT TIMESTAMP-----",
        "payload": "tree a9aa45eccd51bc0c66775f5918c4c8c43f8b8a63\nparent 4ad83a9597e4f5340742d080e26437c5d8d203ba\nauthor Jon Atack <jon@atack.com> 1617266780 +0200\ncommitter Jon Atack <jon@atack.com> 1617951724 +0200\n\ncli: create AddrinfoRequestHandler class\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/db4d2c282afd46709792aaf2d36ffbfc1745b776",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/db4d2c282afd46709792aaf2d36ffbfc1745b776",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/db4d2c282afd46709792aaf2d36ffbfc1745b776/comments",
    "author": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "4ad83a9597e4f5340742d080e26437c5d8d203ba",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4ad83a9597e4f5340742d080e26437c5d8d203ba",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/4ad83a9597e4f5340742d080e26437c5d8d203ba"
      }
    ],
    "stats": {
      "total": 52,
      "additions": 51,
      "deletions": 1
    },
    "files": [
      {
        "sha": "3b0caef39ade14450a8b42abbdb9df0a7ce509e8",
        "filename": "src/bitcoin-cli.cpp",
        "status": "modified",
        "additions": 51,
        "deletions": 1,
        "changes": 52,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/db4d2c282afd46709792aaf2d36ffbfc1745b776/src/bitcoin-cli.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/db4d2c282afd46709792aaf2d36ffbfc1745b776/src/bitcoin-cli.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/bitcoin-cli.cpp?ref=db4d2c282afd46709792aaf2d36ffbfc1745b776",
        "patch": "@@ -42,6 +42,7 @@ static const char DEFAULT_RPCCONNECT[] = \"127.0.0.1\";\n static const int DEFAULT_HTTP_CLIENT_TIMEOUT=900;\n static const bool DEFAULT_NAMED=false;\n static const int CONTINUE_EXECUTION=-1;\n+static constexpr int8_t UNKNOWN_NETWORK{-1};\n \n /** Default number of blocks to generate for RPC generatetoaddress. */\n static const std::string DEFAULT_NBLOCKS = \"1\";\n@@ -228,6 +229,56 @@ class BaseRequestHandler\n     virtual UniValue ProcessReply(const UniValue &batch_in) = 0;\n };\n \n+/** Process addrinfo requests */\n+class AddrinfoRequestHandler : public BaseRequestHandler\n+{\n+private:\n+    static constexpr uint8_t m_networks_size{5};\n+    const std::array<std::string, m_networks_size> m_networks{{\"ipv4\", \"ipv6\", \"torv2\", \"torv3\", \"i2p\"}};\n+    int8_t NetworkStringToId(const std::string& str) const\n+    {\n+        for (uint8_t i = 0; i < m_networks_size; ++i) {\n+            if (str == m_networks.at(i)) return i;\n+        }\n+        return UNKNOWN_NETWORK;\n+    }\n+\n+public:\n+    UniValue PrepareRequest(const std::string& method, const std::vector<std::string>& args) override\n+    {\n+        if (!args.empty()) {\n+            throw std::runtime_error(\"-addrinfo takes no arguments\");\n+        }\n+        UniValue params{RPCConvertValues(\"getnodeaddresses\", std::vector<std::string>{{\"0\"}})};\n+        return JSONRPCRequestObj(\"getnodeaddresses\", params, 1);\n+    }\n+\n+    UniValue ProcessReply(const UniValue& reply) override\n+    {\n+        // Count the number of peers we know by network, including torv2 versus torv3.\n+        std::array<uint64_t, m_networks_size> counts{{}};\n+        for (const UniValue& node : reply[\"result\"].getValues()) {\n+            std::string network_name{node[\"network\"].get_str()};\n+            if (network_name == \"onion\") {\n+                network_name = node[\"address\"].get_str().size() > 22 ? \"torv3\" : \"torv2\";\n+            }\n+            const int8_t network_id{NetworkStringToId(network_name)};\n+            if (network_id == UNKNOWN_NETWORK) continue;\n+            ++counts.at(network_id);\n+        }\n+        // Prepare result to return to user.\n+        UniValue result{UniValue::VOBJ}, addresses{UniValue::VOBJ};\n+        uint64_t total{0}; // Total address count\n+        for (uint8_t i = 0; i < m_networks_size; ++i) {\n+            addresses.pushKV(m_networks.at(i), counts.at(i));\n+            total += counts.at(i);\n+        }\n+        addresses.pushKV(\"total\", total);\n+        result.pushKV(\"addresses_known\", addresses);\n+        return JSONRPCReplyObj(result, NullUniValue, 1);\n+    }\n+};\n+\n /** Process getinfo requests */\n class GetinfoRequestHandler: public BaseRequestHandler\n {\n@@ -299,7 +350,6 @@ class GetinfoRequestHandler: public BaseRequestHandler\n class NetinfoRequestHandler : public BaseRequestHandler\n {\n private:\n-    static constexpr int8_t UNKNOWN_NETWORK{-1};\n     static constexpr uint8_t m_networks_size{4};\n     static constexpr uint8_t MAX_DETAIL_LEVEL{4};\n     const std::array<std::string, m_networks_size> m_networks{{\"ipv4\", \"ipv6\", \"onion\", \"i2p\"}};"
      }
    ]
  },
  {
    "sha": "5056a37624b64588b277419f7ed8c325477a8ec7",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo1MDU2YTM3NjI0YjY0NTg4YjI3NzQxOWY3ZWQ4YzMyNTQ3N2E4ZWM3",
    "commit": {
      "author": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2021-04-04T14:20:47Z"
      },
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2021-04-09T07:02:07Z"
      },
      "message": "cli: add -addrinfo command",
      "tree": {
        "sha": "a0e87ea057a6addf87dcb0782c2f6f4d0c298c63",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a0e87ea057a6addf87dcb0782c2f6f4d0c298c63"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5056a37624b64588b277419f7ed8c325477a8ec7",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEd6u7+MhX7zEv6RP5T1chs9Djkh0FAmBv++8ACgkQT1chs9Dj\nkh3ZfhAAg/aKYA/TkNDnOtgD/kcTI815V7qEgW5vTDBMBTWb/ASjwVXKv20Fyc1n\nV9I3Maa51Go+cUhPS06BHRiJPzaJuTIM6ytN1bEilAuCN+/5kjmismyglAso1FDU\nsqGSVYMYyu6l21wTUZ1lWXQZ0sM4hViHutCI7q2zGTVffA2bVHPgFKDhYGlJ/03f\nSXanW6uvCuzAWOcWqHbz8NTVVCY5BhPESiydwf20bVcIC1NElEGRZKvHEBpzwUru\njh/ttXCtgRdtwizOXVYfdBIFjNgdzKbYnGHjPDHIVHt33ZCen0wk3dmccUyUP7j8\nyEaE/qXOZ8Dk64SsFD0vzowfY7j43h2YQBg9KpYAZGnM7OYbfEEkqSnZ/hySqVzl\nKGWA3s9PfOgMGY4XDXaJKaD/K/a3zZxHXMF1JCaxIGaqpTLWt3zU7+UdAzUyyxDF\n8MbpFQaAIp5/9aTqtbNG7TZvt7S38XQrvz6lsHynigXGPr40yQ9Q1m5pPdGQwtG4\nq+jgtJU4NtccWdjhDNQ/LeQvfbNw3V3cVJJvsBuBrXttKNaIcBGbcGoeLAq9WZPy\nJApc+5BCsoSPiPjA7JgnQSLVu0919btLSFBLhgthrLAdXcNdIygVwW8fGy+f+9Tx\nXTmSALCbVeD43QQer24YJKAUS+0iozVzweqtYr20Xf8iA4ARPv0=\n=M9Y6\n-----END PGP SIGNATURE-----\n-----BEGIN OPENTIMESTAMPS GIT TIMESTAMP-----\n\nAQHwIEd3elBxSG8DThuXyUIMKLX9FL/P5Aw+Uuw0JNkC+CvnCP/wEHHxrJO2UHNV\nHdHaTlDqfYEI8QRgb+4Y8Agg090vdA/wdgCD3+MNLvkMjikoaHR0cHM6Ly9maW5u\nZXkuY2FsZW5kYXIuZXRlcm5pdHl3YWxsLmNvbf/wEINlMrFTQQmVHAnMD6voGYoI\n8QRgb/vw8Ai3Mh77n/SVKwCD3+MNLvkMji4taHR0cHM6Ly9hbGljZS5idGMuY2Fs\nZW5kYXIub3BlbnRpbWVzdGFtcHMub3Jn//AQ2TJM8hHB17wvo/KuHclLgAjxBGBv\n+/HwCImnA286uzGwAIPf4w0u+QyOIyJodHRwczovL2J0Yy5jYWxlbmRhci5jYXRh\nbGxheHkuY29t8BD7ULmIgMxXJ2ZD9PWMGfeLCPAgQ2BTb1dbv4kdFjAfw3yu6XV3\nbbRgzpdZg9mkUdl4NAAI8CDsFvD6LZvKYCy8PM0NyLnxuKkwCa5gm+GRtpJVwqvL\njAjxBGBv+/HwCMxeufJWgL/OAIPf4w0u+QyOLCtodHRwczovL2JvYi5idGMuY2Fs\nZW5kYXIub3BlbnRpbWVzdGFtcHMub3Jn\n-----END OPENTIMESTAMPS GIT TIMESTAMP-----",
        "payload": "tree a0e87ea057a6addf87dcb0782c2f6f4d0c298c63\nparent db4d2c282afd46709792aaf2d36ffbfc1745b776\nauthor Jon Atack <jon@atack.com> 1617546047 +0200\ncommitter Jon Atack <jon@atack.com> 1617951727 +0200\n\ncli: add -addrinfo command\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5056a37624b64588b277419f7ed8c325477a8ec7",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/5056a37624b64588b277419f7ed8c325477a8ec7",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5056a37624b64588b277419f7ed8c325477a8ec7/comments",
    "author": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "db4d2c282afd46709792aaf2d36ffbfc1745b776",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/db4d2c282afd46709792aaf2d36ffbfc1745b776",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/db4d2c282afd46709792aaf2d36ffbfc1745b776"
      }
    ],
    "stats": {
      "total": 3,
      "additions": 3,
      "deletions": 0
    },
    "files": [
      {
        "sha": "2f7e49eccbbe9b975ab912894b34be95f6c0958f",
        "filename": "src/bitcoin-cli.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5056a37624b64588b277419f7ed8c325477a8ec7/src/bitcoin-cli.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5056a37624b64588b277419f7ed8c325477a8ec7/src/bitcoin-cli.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/bitcoin-cli.cpp?ref=5056a37624b64588b277419f7ed8c325477a8ec7",
        "patch": "@@ -60,6 +60,7 @@ static void SetupCliArgs(ArgsManager& argsman)\n     argsman.AddArg(\"-conf=<file>\", strprintf(\"Specify configuration file. Relative paths will be prefixed by datadir location. (default: %s)\", BITCOIN_CONF_FILENAME), ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS);\n     argsman.AddArg(\"-datadir=<dir>\", \"Specify data directory\", ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS);\n     argsman.AddArg(\"-generate\", strprintf(\"Generate blocks immediately, equivalent to RPC getnewaddress followed by RPC generatetoaddress. Optional positional integer arguments are number of blocks to generate (default: %s) and maximum iterations to try (default: %s), equivalent to RPC generatetoaddress nblocks and maxtries arguments. Example: bitcoin-cli -generate 4 1000\", DEFAULT_NBLOCKS, DEFAULT_MAX_TRIES), ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS);\n+    argsman.AddArg(\"-addrinfo\", \"Get the number of addresses known to the node, per network and total.\", ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS);\n     argsman.AddArg(\"-getinfo\", \"Get general information from the remote server. Note that unlike server-side RPC calls, the results of -getinfo is the result of multiple non-atomic requests. Some entries in the result may represent results from different states (e.g. wallet balance may be as of a different block from the chain state reported)\", ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS);\n     argsman.AddArg(\"-netinfo\", \"Get network peer connection information from the remote server. An optional integer argument from 0 to 4 can be passed for different peers listings (default: 0). Pass \\\"help\\\" for detailed help documentation.\", ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS);\n \n@@ -964,6 +965,8 @@ static int CommandLineRPC(int argc, char *argv[])\n             } else {\n                 ParseError(error, strPrint, nRet);\n             }\n+        } else if (gArgs.GetBoolArg(\"-addrinfo\", false)) {\n+            rh.reset(new AddrinfoRequestHandler());\n         } else {\n             rh.reset(new DefaultRequestHandler());\n             if (args.size() < 1) {"
      }
    ]
  },
  {
    "sha": "bb85cbc4f7638a85049658ed951a0e06e7959cd4",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiYjg1Y2JjNGY3NjM4YTg1MDQ5NjU4ZWQ5NTFhMGUwNmU3OTU5Y2Q0",
    "commit": {
      "author": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2021-04-04T16:02:44Z"
      },
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2021-04-09T07:02:09Z"
      },
      "message": "doc: add cli -addrinfo release note",
      "tree": {
        "sha": "478c970d4de3a94e955308e5d7557367dc9a5014",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/478c970d4de3a94e955308e5d7557367dc9a5014"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/bb85cbc4f7638a85049658ed951a0e06e7959cd4",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEd6u7+MhX7zEv6RP5T1chs9Djkh0FAmBv+/IACgkQT1chs9Dj\nkh0Y9g//RYV7MsIKLLWOlK3OBPA9E8yGPQU1tyysfjSJo/S7f2LOmSK4419xdspe\ntJfh6mPXkCdHi0Ztkiyy+00eONXMzt+oRohcrV3ZNjkTdMjwsAmktJs5+/iV2eTn\nk5oJ12IM3IyCyerrwntFF3Hi6Dp6dkv7XHWDNann5R3eXHJLnYCkX5JhJ0M5BhpM\nNRaEMBc/Kw+a7TscxApbw1YuE8MWKq+z0ULs0f5IaV/BAbAS/iutU3Kk/GAbga09\noGxBZLG05EwRkrMbGkaEfzCLbJ4clR/fJuifMFqT1Uxr2FMI+pflHYzEBguXpLJR\nT6NVC9MlBHi9pQsNDcHBfnIhQ3cUVHSvn3sUQ7/H7/MvMA1G3r9A8klxIFiYN7O9\nGf9j8vkzQaYdih2qQsJCteZUVtztj8j3TgloNZYGjabICyilcpXNo+jzNjHE9lxr\nf5qJ1bNSvLnjoR/9s0aNhPA6GJWWSWYXCxj90L1RtbiBPFTxkFKNBZxmzKA9kmXo\nbXtdGY7NUaePDaBjn5+8AZ6B3ROBDJQP+eKLAYrDrQsCMnhY28pQ9pB1Bv3tl1sv\nwaIQwU79hFhINNzmxFO9m9inRrHyfYMiUu+xSRyYed+3e4aVj52kGKE3F/xpJk4b\n79lZ2Ct6fD6ghH2shehhgVrGxqqquOiZO8GYhXmfofFX7FSL7i4=\n=MKNB\n-----END PGP SIGNATURE-----\n-----BEGIN OPENTIMESTAMPS GIT TIMESTAMP-----\n\nAQHwINK36/QRW/7fanomG7CJW7705/UYAccbFDZFt5xm53Q1CP/wEBU32mRNzazR\nv4w2nfFdGkQI8QRgb/vz8AjSo5rEa7BVswCD3+MNLvkMjiMiaHR0cHM6Ly9idGMu\nY2FsZW5kYXIuY2F0YWxsYXh5LmNvbf/wECitZk/2eOW558lb5chpt+YI8SCoPuSM\nXgFM0xYFUvlfUtMSHn81MRjqTuSkawJmYDqNxgjxBGBv7hrwCKExd6piiY7PAIPf\n4w0u+QyOKShodHRwczovL2Zpbm5leS5jYWxlbmRhci5ldGVybml0eXdhbGwuY29t\n//AQXczJLw2FrUu7qzJbP4KzuQjxIERvRam7NVhhns0sMClSODLEkhUALk2e0ceG\nk46JPsIiCPAgUISn6oyiH4LwnpaqptftQdcK2NWSzg7YF9Q5DltUiWQI8QRgb/vz\n8AjTmFX2VRV/lgCD3+MNLvkMjiwraHR0cHM6Ly9ib2IuYnRjLmNhbGVuZGFyLm9w\nZW50aW1lc3RhbXBzLm9yZ/AQZ+XAM6Hr7oN0PXY7lVjqwgjxICzmtYL53EuU3pVo\nIPBhj1HJjIASgGiKq1yE+zcLXZe0CPEgzQWXPZNdEwscUf5LSDucumRcHqAkM+jL\n1/+0/Hrq7EAI8QRgb/vy8AgfLmag7+qXwgCD3+MNLvkMji4taHR0cHM6Ly9hbGlj\nZS5idGMuY2FsZW5kYXIub3BlbnRpbWVzdGFtcHMub3Jn\n-----END OPENTIMESTAMPS GIT TIMESTAMP-----",
        "payload": "tree 478c970d4de3a94e955308e5d7557367dc9a5014\nparent 5056a37624b64588b277419f7ed8c325477a8ec7\nauthor Jon Atack <jon@atack.com> 1617552164 +0200\ncommitter Jon Atack <jon@atack.com> 1617951729 +0200\n\ndoc: add cli -addrinfo release note\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/bb85cbc4f7638a85049658ed951a0e06e7959cd4",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/bb85cbc4f7638a85049658ed951a0e06e7959cd4",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/bb85cbc4f7638a85049658ed951a0e06e7959cd4/comments",
    "author": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "5056a37624b64588b277419f7ed8c325477a8ec7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5056a37624b64588b277419f7ed8c325477a8ec7",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/5056a37624b64588b277419f7ed8c325477a8ec7"
      }
    ],
    "stats": {
      "total": 6,
      "additions": 6,
      "deletions": 0
    },
    "files": [
      {
        "sha": "f4d2794d31a80e7133cd4d0b0456a01383eb8440",
        "filename": "doc/release-notes.md",
        "status": "modified",
        "additions": 6,
        "deletions": 0,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/bb85cbc4f7638a85049658ed951a0e06e7959cd4/doc/release-notes.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/bb85cbc4f7638a85049658ed951a0e06e7959cd4/doc/release-notes.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/doc/release-notes.md?ref=bb85cbc4f7638a85049658ed951a0e06e7959cd4",
        "patch": "@@ -132,6 +132,12 @@ Changes to Wallet or GUI related settings can be found in the GUI or Wallet sect\n Tools and Utilities\n -------------------\n \n+- A new CLI `-addrinfo` command returns the number of addresses known to the\n+  node per network type (including Tor v2 versus v3) and total. This can be\n+  useful to see if the node knows enough addresses in a network to use options\n+  like `-onlynet=<network>` or to upgrade to current and future Tor releases\n+  that support Tor v3 addresses only.  (#21595)\n+\n Wallet\n ------\n "
      }
    ]
  },
  {
    "sha": "edf3167151f7a6d08cf733b4e230e2d745819ac8",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzplZGYzMTY3MTUxZjdhNmQwOGNmNzMzYjRlMjMwZTJkNzQ1ODE5YWM4",
    "commit": {
      "author": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2021-04-09T07:40:57Z"
      },
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2021-04-12T20:12:41Z"
      },
      "message": "addrinfo: raise helpfully on server error or incompatible server version",
      "tree": {
        "sha": "fa3458d87400c7d471c975e7d53ea5454d33af7e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/fa3458d87400c7d471c975e7d53ea5454d33af7e"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/edf3167151f7a6d08cf733b4e230e2d745819ac8",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEd6u7+MhX7zEv6RP5T1chs9Djkh0FAmB0qeIACgkQT1chs9Dj\nkh0YrRAAsnCD8F0drDRPF5otUvfaxHRMfJ2YyWBssvlz3WPWSe40DPkyMYSLVL9N\n6H1bX12bEOeJ3fKh3umQ+KvqBwcQAN2cBCTOiNBtngbglCX6LVkupHWoIkqNFbUj\n84B0T9JvVSiZv174HP4/7i2Xt2VBLI4s83oFWjtf+fsZONNTrw07VJCut3V9i+9d\n4dBpLL4Q4dDjXMZTjb5FrwfhB9W9DKYuSwh8Gjs/PIKwWw5bJ4iOYJ2b+jkUcW2n\nej9cI1m39kPOaq4oL6S/ZHFYJwbweYvVPBAr5CW+9Xy11fmz7tCd+H1OdNfGgudh\nZ3GZ3P9+XPf6nyvnUGWvi2+uTYyevRVhWT07eHhirVKG98zNRHtrS9iYe/MaTTuW\nkgvn82ZTw+nr4JBOtfYu9EBjiqZWTaKVxYb1nS6i+eej2Ro5crDtD7OYB1y9Eq+c\ndC0IwaY6geluaxi0ygu7bietQNSVVKEFf/BB4SU5S5Gwyah74fTjPE5asc/v/ada\nrqqiKSaU1+2Mkvup76VjtaZX3wOgFgvhm3c6EcRQpxqJMQUS8YtC+V5sqn3JcNj+\nFeow7XdWrgRgEK1aoxSDUR+CidgUR4+2KS14OF2xfjWEJYDuBOzKIQXHDjlCRyYm\nBHQWxOpoYzeLXG5s79qoJkF9OV4MGytg2C+QTgrgZBXQxx98yLc=\n=YebB\n-----END PGP SIGNATURE-----\n-----BEGIN OPENTIMESTAMPS GIT TIMESTAMP-----\n\nAQHwIB6hN9/82nRJhBfbX8TS8Y7WlF8MYVatJHPQ0M328MFWCP/wEDUHDC6txhNm\nIQPOWgHhKiYI8SAJhUu8u+/WCuFyNWREjIYLE/414+IZ6cL2fueXG1hAtQjxBGB0\nqeLwCHEMV3+taT5vAIPf4w0u+QyOLi1odHRwczovL2FsaWNlLmJ0Yy5jYWxlbmRh\nci5vcGVudGltZXN0YW1wcy5vcmf/8BBFaf0QvjQHjBbSKGtQZyX3CPEEYHSp4/AI\neEBpGkLz9f4Ag9/jDS75DI4sK2h0dHBzOi8vYm9iLmJ0Yy5jYWxlbmRhci5vcGVu\ndGltZXN0YW1wcy5vcmf/8BCkQ0YSPVUmdBUely8oV/5sCPEEYHScCvAIMVIM5QCj\nAjMAg9/jDS75DI4pKGh0dHBzOi8vZmlubmV5LmNhbGVuZGFyLmV0ZXJuaXR5d2Fs\nbC5jb23wEMOq9W55ZbYP6xYF72VE8mYI8QRgdKnj8AiKgI9f4BMJnQCD3+MNLvkM\njiMiaHR0cHM6Ly9idGMuY2FsZW5kYXIuY2F0YWxsYXh5LmNvbQ==\n-----END OPENTIMESTAMPS GIT TIMESTAMP-----",
        "payload": "tree fa3458d87400c7d471c975e7d53ea5454d33af7e\nparent bb85cbc4f7638a85049658ed951a0e06e7959cd4\nauthor Jon Atack <jon@atack.com> 1617954057 +0200\ncommitter Jon Atack <jon@atack.com> 1618258361 +0200\n\naddrinfo: raise helpfully on server error or incompatible server version\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/edf3167151f7a6d08cf733b4e230e2d745819ac8",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/edf3167151f7a6d08cf733b4e230e2d745819ac8",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/edf3167151f7a6d08cf733b4e230e2d745819ac8/comments",
    "author": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "bb85cbc4f7638a85049658ed951a0e06e7959cd4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/bb85cbc4f7638a85049658ed951a0e06e7959cd4",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/bb85cbc4f7638a85049658ed951a0e06e7959cd4"
      }
    ],
    "stats": {
      "total": 7,
      "additions": 6,
      "deletions": 1
    },
    "files": [
      {
        "sha": "2b541be83e26e5c45bc1dfaae58900439288bcfd",
        "filename": "src/bitcoin-cli.cpp",
        "status": "modified",
        "additions": 6,
        "deletions": 1,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/edf3167151f7a6d08cf733b4e230e2d745819ac8/src/bitcoin-cli.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/edf3167151f7a6d08cf733b4e230e2d745819ac8/src/bitcoin-cli.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/bitcoin-cli.cpp?ref=edf3167151f7a6d08cf733b4e230e2d745819ac8",
        "patch": "@@ -256,9 +256,14 @@ class AddrinfoRequestHandler : public BaseRequestHandler\n \n     UniValue ProcessReply(const UniValue& reply) override\n     {\n+        if (!reply[\"error\"].isNull()) return reply;\n+        const std::vector<UniValue>& nodes{reply[\"result\"].getValues()};\n+        if (!nodes.empty() && nodes.at(0)[\"network\"].isNull()) {\n+            throw std::runtime_error(\"-addrinfo requires bitcoind server to be running v22.0 and up\");\n+        }\n         // Count the number of peers we know by network, including torv2 versus torv3.\n         std::array<uint64_t, m_networks_size> counts{{}};\n-        for (const UniValue& node : reply[\"result\"].getValues()) {\n+        for (const UniValue& node : nodes) {\n             std::string network_name{node[\"network\"].get_str()};\n             if (network_name == \"onion\") {\n                 network_name = node[\"address\"].get_str().size() > 22 ? \"torv3\" : \"torv2\";"
      }
    ]
  },
  {
    "sha": "06c43201a714b0426cc68b2fd5c681e5df10af99",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowNmM0MzIwMWE3MTRiMDQyNmNjNjhiMmZkNWM2ODFlNWRmMTBhZjk5",
    "commit": {
      "author": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2021-04-20T08:19:31Z"
      },
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2021-04-20T08:35:53Z"
      },
      "message": "cli: use C++17 std::array class template argument deduction (CTAD)\n\nCredit to Jo\u00e3o Barbosa (promag) for the suggestions.\n\nCo-authored-by: Jo\u00e3o Barbosa <joao.paulo.barbosa@gmail.com>",
      "tree": {
        "sha": "8d3be7f1ad89d735a7ae48a5c5d7a05c6787e439",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/8d3be7f1ad89d735a7ae48a5c5d7a05c6787e439"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/06c43201a714b0426cc68b2fd5c681e5df10af99",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEd6u7+MhX7zEv6RP5T1chs9Djkh0FAmB+kpYACgkQT1chs9Dj\nkh2JlRAAsZyVc3nMLfYR3fynTiRmxG4wWYJO1cUavzorlvDlbfcAQHBWLFylyUnA\nAE+iaxyVs5/ex213c0OOqsb0oLwKLq/GrEHoijfRVVwYgPORKpSDw3Gh/pp1a8vn\nQ80xVJmAO0xFL3+6HsFBuN+H5QR622LaOnPRxW9OpEejbhxuuYWC16OFqd1piD6B\nWUFspQD5wUIQoMIbXTwnqez3siYn1QWuYN3ixMZcy7DcRxZz3FwTHZwBr5nnfomn\nPjtF7ZWQ42h9Klwlbh1iBeSbyn7GBMxbOxmRg/qSmC5ntCpI/Md87Yak4tE5pCUU\nFfgv2qHu9IvsRlUWH5y9qQSF7MHH0lPe0bR+ftQpvDe/l1jve0yFtDd4p4wytHJd\nJS09ZScBVxfpoWFBrpYBTm9OZP2uKCGV/qiid5WBzFq86EsKQA1xBCEi4OsUqV+U\n2NWcV5v+sFuC2eut6ov9GJUvcMQQrQq9m90uRQXalUtOYHVbbedTCH0VLmOHq3ZH\nyRQRedgLQ91NgP2iBoUq4aCAj4mFgV10kfUg1i1Ihn6znl8vnZoggY2w3KDh19JU\nYTLYk36wWmo/D5bQxo2DUSFt4D5kQKmGh47XnlWqrJNx09Q/EM7D+FR39xlEkXJb\nHedvfYidlPIwQHC2aTUQavSvZbBKjEMjiqL/M10e36SGFp43BjU=\n=Gkte\n-----END PGP SIGNATURE-----\n-----BEGIN OPENTIMESTAMPS GIT TIMESTAMP-----\n\nAQHwIK6CL7CGFbRb8k5hfnlEMr9TO3e9Ca42djKll+HF0EYbCP/wEH0fntbPpffi\nPZh/BZBn30gI8QRgfpKY8AiR1AQ7ch4/8gCD3+MNLvkMji4taHR0cHM6Ly9hbGlj\nZS5idGMuY2FsZW5kYXIub3BlbnRpbWVzdGFtcHMub3Jn//AQgo4ObFyDj0ue5d0t\nIPFkFgjxBGB+kpjwCCEdUEXKA8THAIPf4w0u+QyOLCtodHRwczovL2JvYi5idGMu\nY2FsZW5kYXIub3BlbnRpbWVzdGFtcHMub3Jn//AQywlHHY4mWLiaxXGbJvdA1gjx\nBGB+kpjwCCwiWbt2HL1qAIPf4w0u+QyOIyJodHRwczovL2J0Yy5jYWxlbmRhci5j\nYXRhbGxheHkuY29t8BDpwuo/RLSZ/pyW8Y2wbUu+CPEgrEAx3mRVvhaJ/piGTIZe\ndAYZvi0zZwwMMAlsWizv4cEI8QRgfoS88AgXNmcXXl+rjgCD3+MNLvkMjikoaHR0\ncHM6Ly9maW5uZXkuY2FsZW5kYXIuZXRlcm5pdHl3YWxsLmNvbQ==\n-----END OPENTIMESTAMPS GIT TIMESTAMP-----",
        "payload": "tree 8d3be7f1ad89d735a7ae48a5c5d7a05c6787e439\nparent edf3167151f7a6d08cf733b4e230e2d745819ac8\nauthor Jon Atack <jon@atack.com> 1618906771 +0200\ncommitter Jon Atack <jon@atack.com> 1618907753 +0200\n\ncli: use C++17 std::array class template argument deduction (CTAD)\n\nCredit to Jo\u00e3o Barbosa (promag) for the suggestions.\n\nCo-authored-by: Jo\u00e3o Barbosa <joao.paulo.barbosa@gmail.com>\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/06c43201a714b0426cc68b2fd5c681e5df10af99",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/06c43201a714b0426cc68b2fd5c681e5df10af99",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/06c43201a714b0426cc68b2fd5c681e5df10af99/comments",
    "author": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "edf3167151f7a6d08cf733b4e230e2d745819ac8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/edf3167151f7a6d08cf733b4e230e2d745819ac8",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/edf3167151f7a6d08cf733b4e230e2d745819ac8"
      }
    ],
    "stats": {
      "total": 28,
      "additions": 13,
      "deletions": 15
    },
    "files": [
      {
        "sha": "4a4710ea3afcfdb2299b4af93a0a1d46a54fe103",
        "filename": "src/bitcoin-cli.cpp",
        "status": "modified",
        "additions": 13,
        "deletions": 15,
        "changes": 28,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/06c43201a714b0426cc68b2fd5c681e5df10af99/src/bitcoin-cli.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/06c43201a714b0426cc68b2fd5c681e5df10af99/src/bitcoin-cli.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/bitcoin-cli.cpp?ref=06c43201a714b0426cc68b2fd5c681e5df10af99",
        "patch": "@@ -234,11 +234,10 @@ class BaseRequestHandler\n class AddrinfoRequestHandler : public BaseRequestHandler\n {\n private:\n-    static constexpr uint8_t m_networks_size{5};\n-    const std::array<std::string, m_networks_size> m_networks{{\"ipv4\", \"ipv6\", \"torv2\", \"torv3\", \"i2p\"}};\n+    static constexpr std::array m_networks{\"ipv4\", \"ipv6\", \"torv2\", \"torv3\", \"i2p\"};\n     int8_t NetworkStringToId(const std::string& str) const\n     {\n-        for (uint8_t i = 0; i < m_networks_size; ++i) {\n+        for (size_t i = 0; i < m_networks.size(); ++i) {\n             if (str == m_networks.at(i)) return i;\n         }\n         return UNKNOWN_NETWORK;\n@@ -262,7 +261,7 @@ class AddrinfoRequestHandler : public BaseRequestHandler\n             throw std::runtime_error(\"-addrinfo requires bitcoind server to be running v22.0 and up\");\n         }\n         // Count the number of peers we know by network, including torv2 versus torv3.\n-        std::array<uint64_t, m_networks_size> counts{{}};\n+        std::array<uint64_t, m_networks.size()> counts{{}};\n         for (const UniValue& node : nodes) {\n             std::string network_name{node[\"network\"].get_str()};\n             if (network_name == \"onion\") {\n@@ -275,7 +274,7 @@ class AddrinfoRequestHandler : public BaseRequestHandler\n         // Prepare result to return to user.\n         UniValue result{UniValue::VOBJ}, addresses{UniValue::VOBJ};\n         uint64_t total{0}; // Total address count\n-        for (uint8_t i = 0; i < m_networks_size; ++i) {\n+        for (size_t i = 0; i < m_networks.size(); ++i) {\n             addresses.pushKV(m_networks.at(i), counts.at(i));\n             total += counts.at(i);\n         }\n@@ -356,15 +355,14 @@ class GetinfoRequestHandler: public BaseRequestHandler\n class NetinfoRequestHandler : public BaseRequestHandler\n {\n private:\n-    static constexpr uint8_t m_networks_size{4};\n     static constexpr uint8_t MAX_DETAIL_LEVEL{4};\n-    const std::array<std::string, m_networks_size> m_networks{{\"ipv4\", \"ipv6\", \"onion\", \"i2p\"}};\n-    std::array<std::array<uint16_t, m_networks_size + 1>, 3> m_counts{{{}}}; //!< Peer counts by (in/out/total, networks/total)\n+    static constexpr std::array m_networks{\"ipv4\", \"ipv6\", \"onion\", \"i2p\"};\n+    std::array<std::array<uint16_t, m_networks.size() + 1>, 3> m_counts{{{}}}; //!< Peer counts by (in/out/total, networks/total)\n     uint8_t m_block_relay_peers_count{0};\n     uint8_t m_manual_peers_count{0};\n     int8_t NetworkStringToId(const std::string& str) const\n     {\n-        for (uint8_t i = 0; i < m_networks_size; ++i) {\n+        for (size_t i = 0; i < m_networks.size(); ++i) {\n             if (str == m_networks.at(i)) return i;\n         }\n         return UNKNOWN_NETWORK;\n@@ -461,10 +459,10 @@ class NetinfoRequestHandler : public BaseRequestHandler\n             const bool is_outbound{!peer[\"inbound\"].get_bool()};\n             const bool is_block_relay{!peer[\"relaytxes\"].get_bool()};\n             const std::string conn_type{peer[\"connection_type\"].get_str()};\n-            ++m_counts.at(is_outbound).at(network_id);      // in/out by network\n-            ++m_counts.at(is_outbound).at(m_networks_size); // in/out overall\n-            ++m_counts.at(2).at(network_id);                // total by network\n-            ++m_counts.at(2).at(m_networks_size);           // total overall\n+            ++m_counts.at(is_outbound).at(network_id);        // in/out by network\n+            ++m_counts.at(is_outbound).at(m_networks.size()); // in/out overall\n+            ++m_counts.at(2).at(network_id);                  // total by network\n+            ++m_counts.at(2).at(m_networks.size());           // total overall\n             if (conn_type == \"block-relay-only\") ++m_block_relay_peers_count;\n             if (conn_type == \"manual\") ++m_manual_peers_count;\n             if (DetailsRequested()) {\n@@ -534,11 +532,11 @@ class NetinfoRequestHandler : public BaseRequestHandler\n         if (any_i2p_peers) result += \"     i2p\";\n         result += \"   total   block\";\n         if (m_manual_peers_count) result += \"  manual\";\n-        const std::array<std::string, 3> rows{{\"in\", \"out\", \"total\"}};\n+        const std::array rows{\"in\", \"out\", \"total\"};\n         for (uint8_t i = 0; i < 3; ++i) {\n             result += strprintf(\"\\n%-5s  %5i   %5i   %5i\", rows.at(i), m_counts.at(i).at(0), m_counts.at(i).at(1), m_counts.at(i).at(2)); // ipv4/ipv6/onion peers counts\n             if (any_i2p_peers) result += strprintf(\"   %5i\", m_counts.at(i).at(3)); // i2p peers count\n-            result += strprintf(\"   %5i\", m_counts.at(i).at(m_networks_size)); // total peers count\n+            result += strprintf(\"   %5i\", m_counts.at(i).at(m_networks.size())); // total peers count\n             if (i == 1) { // the outbound row has two extra columns for block relay and manual peer counts\n                 result += strprintf(\"   %5i\", m_block_relay_peers_count);\n                 if (m_manual_peers_count) result += strprintf(\"   %5i\", m_manual_peers_count);"
      }
    ]
  }
]