promag,2020-09-05 19:52:02,ACK,https://github.com/bitcoin/bitcoin/pull/19887#issuecomment-687655054,687655054,
MarcoFalke,2020-09-06 05:46:21,"Can you explain what is going on here?\n\n* Does the wallet submit txs to the mempool, which do not get marked as in the mempool? This seems like a bug, as the wallet should mark them as soon as they are submitted.\n\n* Or, it seems the issue is that the wallet waits for the mempool to be loaded, in which case the txs in the wallet are only marked as in-mempool when they went through the valid",https://github.com/bitcoin/bitcoin/pull/19887#issuecomment-687705546,687705546,
MarcoFalke,2020-09-06 07:32:48,"Maybe it is a race where either the wallet or the (load)mempool may add the tx?\n\nThe `syncwithvalidationinterfacequeue` seems like a nice temporary workaround, but ideally the wallet would properly start up/block before responding to RPCs. Maybe the `BlockUntilSynced...` should also block until the wallet has imported all mempool txs on start-up/loadwallet?",https://github.com/bitcoin/bitcoin/pull/19887#issuecomment-687716546,687716546,
fjahr,2020-09-06 10:56:09,"@MarcoFalke Thanks for these hints! I am still working on fixing the actual issue in #19876. But since it's taking a bit longer to investigate and it's in dispute if this actually needs fixing, I decided to open this fix to the intermittent CI failures since they seem to occur pretty frequently. If the fix for the underlying issue is showing a better error this line will be needed anyway, if the f",https://github.com/bitcoin/bitcoin/pull/19887#issuecomment-687756060,687756060,
MarcoFalke,2020-09-06 11:02:13,"Having a balance, then restarting bitcoin core and having a different balance would be a bug that needs proper fixing.\n\nACK either way on the temporary test workaround, but maybe it could say that it is only temporary?",https://github.com/bitcoin/bitcoin/pull/19887#issuecomment-687757268,687757268,
promag,2020-09-06 15:04:37,"> Having a balance, then restarting bitcoin core and having a different balance would be a bug\n\nIs this what's going on?",https://github.com/bitcoin/bitcoin/pull/19887#issuecomment-687813816,687813816,
MarcoFalke,2020-09-06 15:15:41,"Yes, I believe so. At least the balance is less than it should be otherwise the amount wouldn't be out of range (i.e. negative) later on, no?",https://github.com/bitcoin/bitcoin/pull/19887#issuecomment-687816565,687816565,
promag,2020-09-17 15:51:11,"@MarcoFalke missed this comment. I'll \n![image](https://user-images.githubusercontent.com/3534524/93495374-f5ab0500-f905-11ea-8740-7f813b43fa06.png)\n",https://github.com/bitcoin/bitcoin/pull/19887#issuecomment-694326515,694326515,
