flack,2019-02-01T17:45:13Z,"maybe that's a stupid question, but is there any reason not to make a function which opens the dialog? Because to me it looks like it's basically three times the same block of code in the same file with only a different first argument in `AskPassphraseDialog` (ok, and the second `connect` call in the first code block, but that could also be in an `if` I guess)\n\n(Disclaimer: Not a C++ expert)",https://github.com/bitcoin/bitcoin/pull/15313#issuecomment-459806190,459806190,
jonasschnelli,2019-02-01T23:24:45Z,@flack: you are right. As there are many other places to refactor further. The intention of this PR is to fix a bug and not to refactor code and I propose to do refactoring later.,https://github.com/bitcoin/bitcoin/pull/15313#issuecomment-459902628,459902628,
jonasschnelli,2019-02-01T23:45:20Z,"Followed @promag advice and changed...\n... from `unique_ptr` to usage of QT's `deleteLater` which I think is the superior solution (the only advantage of a `unique_ptr` would be that even if `QDialog::finished` will never gets fired [bug in QT] it would deallocate the instance correctly on opening of a new dialog or unloading a `walletView`,.... also, I think the `deleteLater` approach will conf",https://github.com/bitcoin/bitcoin/pull/15313#issuecomment-459906581,459906581,
jonasschnelli,2019-02-07T07:01:59Z,"Thanks for the further optimisation @promag!\nImplemented your suggestion.",https://github.com/bitcoin/bitcoin/pull/15313#issuecomment-461309000,461309000,
laanwj,2019-02-12T13:38:29Z,Concept ACK,https://github.com/bitcoin/bitcoin/pull/15313#issuecomment-462762093,462762093,
laanwj,2019-02-18T07:32:53Z,LGTM now utACK https://github.com/bitcoin/bitcoin/pull/15313/commits/5e8dadbcec674a09f6836075bad531395c294399,https://github.com/bitcoin/bitcoin/pull/15313#issuecomment-464617749,464617749,
jonasschnelli,2019-03-18T08:00:08Z,"As said:\n\n> If this is an acceptable approach then this shall be adapted (eventually in this PR) to other areas where we use QDialog.exec().\n\nThere are still a couple of places where dialogs are ""synchronous"" and this needs to be fixed... but I agree with @promag that the one around encryption should be fixes to cover the complete issue. I'll have a look soon.",https://github.com/bitcoin/bitcoin/pull/15313#issuecomment-473806727,473806727,
jonasschnelli,2019-03-18T10:46:31Z,Combined this with #15614 to gain a safe unloading-wallet behaviour in the GUI,https://github.com/bitcoin/bitcoin/pull/15313#issuecomment-473859891,473859891,
DrahtBot,2019-03-18T13:23:07Z,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#15204](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/15204.html) (gui: Add Open External Wallet action by pro",https://github.com/bitcoin/bitcoin/pull/15313#issuecomment-473907547,473907547,
jonasschnelli,2019-03-21T19:09:41Z,Closing for now in favour of #15614,https://github.com/bitcoin/bitcoin/pull/15313#issuecomment-475364850,475364850,
promag,2019-02-05T01:31:06Z,Can also `setAttribute(Qt::WA_DeleteOnClose)` and ditch connections to `deleteLater`?,https://github.com/bitcoin/bitcoin/pull/15313#discussion_r253711302,253711302,src/qt/askpassphrasedialog.cpp
laanwj,2019-02-12T13:38:18Z,I don't think this should be set in the constructor. It is not the dialog's responsibility to know about its own object lifetime. So I think it's more clear to do so at the call site.,https://github.com/bitcoin/bitcoin/pull/15313#discussion_r255954955,255954955,src/qt/askpassphrasedialog.cpp
promag,2019-02-15T15:39:14Z,This was suggested by me in https://github.com/bitcoin/bitcoin/pull/15313#discussion_r253711302 and now I agree with you. @jonasschnelli sorry ☺️  ,https://github.com/bitcoin/bitcoin/pull/15313#discussion_r257282582,257282582,src/qt/askpassphrasedialog.cpp
jonasschnelli,2019-02-17T19:07:44Z,Yes. I agree with @laanwj. Fixed.,https://github.com/bitcoin/bitcoin/pull/15313#discussion_r257518449,257518449,src/qt/askpassphrasedialog.cpp
promag,2019-03-17T22:24:52Z,"nit, here and below: `AskPassphraseDialog* dlg`.",https://github.com/bitcoin/bitcoin/pull/15313#discussion_r266262812,266262812,src/qt/walletview.cpp
