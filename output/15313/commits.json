[
  {
    "sha": "b6c360957f7b661d3b2153410c6bf540ce9f7d11",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiNmMzNjA5NTdmN2I2NjFkM2IyMTUzNDEwYzZiZjU0MGNlOWY3ZDEx",
    "commit": {
      "author": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2019-02-01T08:21:53Z"
      },
      "committer": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2019-03-18T10:20:59Z"
      },
      "message": "Qt: avoid AskPassphraseDialog synchronous QDialog.exec() calls",
      "tree": {
        "sha": "69103e7f34d19283edde12794261b392f2f303fa",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/69103e7f34d19283edde12794261b392f2f303fa"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b6c360957f7b661d3b2153410c6bf540ce9f7d11",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEyhopCNzi8TB0xizeHrd2uwPHki0FAlyPcQsACgkQHrd2uwPH\nki2w3hAAw6vx+QTMsdRFAvpLLn4zyAfQyJEim67Zwn+MWg+kasmmLnbzfegpoiqH\nJxvejaKlNvOmUdAlXJy+q9hI6KU1nPEPeaf1JmseASYIblzxUNPDCXa+ljjPI/qb\nV+58J1NRZ4JWva7+kSWRrJkRjMU0z9LvN7CP9sV+Oza5aQiFtysoV1+dfSs6TKbl\n1sKoJsNNDQGOSWozW5A5gS8V9PMf9BxbvKvtSOBO6rtZL4b3VkRTAH04CZG/4jdu\nBLCjxQGxGzgOn42rhgACAH+P5E0XgoTs6sIdHx0AN8c3GWOnenFNc2LRMQxxRGuS\n78RBk6E7tpFQNlaPwYxeHaWDyf+FcU3N5fqm56wXHP7BYwj/rAYVQ2Q6s7gElIJu\nqRsl0LC/Qk2rt7yvr3Tjl0fTTsgNLIs6UWyaotyvDyuF4seAiygsZVV/vVp82Uvl\nl+CG/k0SqxTnD6+8BQ0IkI30xufZPRxS1xaHOVje1646a1IElRzeGa3eaJCw6RCr\ncbP4A0myJ5kuY1k/2Buz2DgXQM+ZJgN1ny7XMLFaA7Y5VSe1Ajae9SDC3FUIFJA5\n4mKMFZ9mAkUIijDCGMQinJVsSywzhGi/TOTScwI/8SCYW0QPP4GuDHEvqfSBNOi5\nIDNmicvvru5D2jk9dzZBVln/ZYWBg3GYTJjhvbyw4Ka3rRIhwsA=\n=/Qfw\n-----END PGP SIGNATURE-----",
        "payload": "tree 69103e7f34d19283edde12794261b392f2f303fa\nparent 7ec7aea442815eef38068b3f16527129c341b000\nauthor Jonas Schnelli <dev@jonasschnelli.ch> 1549009313 -1000\ncommitter Jonas Schnelli <dev@jonasschnelli.ch> 1552904459 +0100\n\nQt: avoid AskPassphraseDialog synchronous QDialog.exec() calls\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b6c360957f7b661d3b2153410c6bf540ce9f7d11",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/b6c360957f7b661d3b2153410c6bf540ce9f7d11",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b6c360957f7b661d3b2153410c6bf540ce9f7d11/comments",
    "author": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "7ec7aea442815eef38068b3f16527129c341b000",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7ec7aea442815eef38068b3f16527129c341b000",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/7ec7aea442815eef38068b3f16527129c341b000"
      }
    ],
    "stats": {
      "total": 27,
      "additions": 16,
      "deletions": 11
    },
    "files": [
      {
        "sha": "e8e183e4beab18a99190b73723ec6f6d3ba6478b",
        "filename": "src/qt/askpassphrasedialog.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b6c360957f7b661d3b2153410c6bf540ce9f7d11/src/qt/askpassphrasedialog.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b6c360957f7b661d3b2153410c6bf540ce9f7d11/src/qt/askpassphrasedialog.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/askpassphrasedialog.cpp?ref=b6c360957f7b661d3b2153410c6bf540ce9f7d11",
        "patch": "@@ -74,6 +74,9 @@ AskPassphraseDialog::AskPassphraseDialog(Mode _mode, QWidget *parent) :\n     connect(ui->passEdit1, &QLineEdit::textChanged, this, &AskPassphraseDialog::textChanged);\n     connect(ui->passEdit2, &QLineEdit::textChanged, this, &AskPassphraseDialog::textChanged);\n     connect(ui->passEdit3, &QLineEdit::textChanged, this, &AskPassphraseDialog::textChanged);\n+\n+    // always use modal userflow blocking\n+    setModal(true);\n }\n \n AskPassphraseDialog::~AskPassphraseDialog()"
      },
      {
        "sha": "1f52ed571436f8bcfaf3149219b24d9ef82c4054",
        "filename": "src/qt/walletview.cpp",
        "status": "modified",
        "additions": 13,
        "deletions": 11,
        "changes": 24,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b6c360957f7b661d3b2153410c6bf540ce9f7d11/src/qt/walletview.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b6c360957f7b661d3b2153410c6bf540ce9f7d11/src/qt/walletview.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/walletview.cpp?ref=b6c360957f7b661d3b2153410c6bf540ce9f7d11",
        "patch": "@@ -241,11 +241,11 @@ void WalletView::encryptWallet(bool status)\n {\n     if(!walletModel)\n         return;\n-    AskPassphraseDialog dlg(status ? AskPassphraseDialog::Encrypt : AskPassphraseDialog::Decrypt, this);\n-    dlg.setModel(walletModel);\n-    dlg.exec();\n-\n-    updateEncryptionStatus();\n+    AskPassphraseDialog *dlg = new AskPassphraseDialog(status ? AskPassphraseDialog::Encrypt : AskPassphraseDialog::Decrypt, this);\n+    dlg->setModel(walletModel);\n+    dlg->setAttribute(Qt::WA_DeleteOnClose);\n+    connect(dlg, &QDialog::finished, this, &WalletView::updateEncryptionStatus);\n+    dlg->open();\n }\n \n void WalletView::backupWallet()\n@@ -269,9 +269,10 @@ void WalletView::backupWallet()\n \n void WalletView::changePassphrase()\n {\n-    AskPassphraseDialog dlg(AskPassphraseDialog::ChangePass, this);\n-    dlg.setModel(walletModel);\n-    dlg.exec();\n+    AskPassphraseDialog *dlg = new AskPassphraseDialog(AskPassphraseDialog::ChangePass, this);\n+    dlg->setModel(walletModel);\n+    dlg->setAttribute(Qt::WA_DeleteOnClose);\n+    dlg->open();\n }\n \n void WalletView::unlockWallet()\n@@ -281,9 +282,10 @@ void WalletView::unlockWallet()\n     // Unlock wallet when requested by wallet model\n     if (walletModel->getEncryptionStatus() == WalletModel::Locked)\n     {\n-        AskPassphraseDialog dlg(AskPassphraseDialog::Unlock, this);\n-        dlg.setModel(walletModel);\n-        dlg.exec();\n+        AskPassphraseDialog *dlg = new AskPassphraseDialog(AskPassphraseDialog::Unlock, this);\n+        dlg->setModel(walletModel);\n+        dlg->setAttribute(Qt::WA_DeleteOnClose);\n+        dlg->open();\n     }\n }\n "
      }
    ]
  },
  {
    "sha": "79c45b388759f1c54bdac91c51aed79d053c30da",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo3OWM0NWIzODg3NTlmMWM1NGJkYWM5MWM1MWFlZDc5ZDA1M2MzMGRh",
    "commit": {
      "author": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2019-03-17T17:54:35Z"
      },
      "committer": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2019-03-18T10:20:59Z"
      },
      "message": "gui: Defer removeAndDeleteWallet when no modal widget is active",
      "tree": {
        "sha": "23dc8760871a52cce8f46abe8c666c29c30fac31",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/23dc8760871a52cce8f46abe8c666c29c30fac31"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/79c45b388759f1c54bdac91c51aed79d053c30da",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEyhopCNzi8TB0xizeHrd2uwPHki0FAlyPcQ0ACgkQHrd2uwPH\nki29uw//XWu8dPDvvxXcbiTXSrJwi1HN7VglulicKmFlO1M6gtfqyIBDLQW+q954\n5nAikdFTWRVbQAWKLGwJmPzpmMLH26OHCEhcf9LByaki/Cf4dU/7G+8sq0UDemoI\nwBVTyT1DGApaJuQxaXacd9BRpzvHyweeydtmOaQMio7Lha8M2MFPZo0S7nWFMOdI\npYwjrkTjRPFiSulhmp+wEuezX4efuqu7VNuWkeH6Z4vdWq8nsBkQmW/w+MblDRjR\n9uPP+/2bmBwMn0D2YH8zv3kQDMBYDEsHX7/1sNIaSsckMA23+oBKGC643lWyd+x+\njR3beCIYSCdPmuebV5jQLU/WpAdmoTk9Qi0mJ2akOrCigaC5s5f0Pgq1gxnVT0ju\nAj28ohFAauY8gwZzl9o83NeIU/lvofb87cl6eMyG3PwEc4SUUjl9sJbMuRxINi1G\noGTMy+rCWncPWxfapeUTBDhGOdLqF18L95Cp3xmGPajPJmzyccMbauze09r0NLFx\nyYxd0ucxAvljx2RSV4muMHydG6NV+E0KgxJqbxxAEDbtbO9oWGMRJmg+RUwAxXRn\nmuIh7SaO/Y4Cb8WWqY66nVrVHVyvJVBtFlollgr+2lp8UCIuM0Tp5xiRpyvmBPYP\nvB6oHrnRvuLIqVMvsrux7+SQ95jTMGz/WtQlDKPwkJIzh3WGHZU=\n=QNSe\n-----END PGP SIGNATURE-----",
        "payload": "tree 23dc8760871a52cce8f46abe8c666c29c30fac31\nparent b6c360957f7b661d3b2153410c6bf540ce9f7d11\nauthor Jo\u00e3o Barbosa <joao.paulo.barbosa@gmail.com> 1552845275 +0000\ncommitter Jonas Schnelli <dev@jonasschnelli.ch> 1552904459 +0100\n\ngui: Defer removeAndDeleteWallet when no modal widget is active\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/79c45b388759f1c54bdac91c51aed79d053c30da",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/79c45b388759f1c54bdac91c51aed79d053c30da",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/79c45b388759f1c54bdac91c51aed79d053c30da/comments",
    "author": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "b6c360957f7b661d3b2153410c6bf540ce9f7d11",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b6c360957f7b661d3b2153410c6bf540ce9f7d11",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/b6c360957f7b661d3b2153410c6bf540ce9f7d11"
      }
    ],
    "stats": {
      "total": 12,
      "additions": 11,
      "deletions": 1
    },
    "files": [
      {
        "sha": "352f9ba3c0c92df20cbadd540f151b82f8a5bd9d",
        "filename": "src/qt/walletcontroller.cpp",
        "status": "modified",
        "additions": 11,
        "deletions": 1,
        "changes": 12,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/79c45b388759f1c54bdac91c51aed79d053c30da/src/qt/walletcontroller.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/79c45b388759f1c54bdac91c51aed79d053c30da/src/qt/walletcontroller.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/walletcontroller.cpp?ref=79c45b388759f1c54bdac91c51aed79d053c30da",
        "patch": "@@ -9,6 +9,7 @@\n \n #include <algorithm>\n \n+#include <QApplication>\n #include <QMessageBox>\n #include <QMutexLocker>\n #include <QThread>\n@@ -97,7 +98,16 @@ WalletModel* WalletController::getOrCreateWallet(std::unique_ptr<interfaces::Wal\n     m_wallets.push_back(wallet_model);\n \n     connect(wallet_model, &WalletModel::unload, [this, wallet_model] {\n-        removeAndDeleteWallet(wallet_model);\n+        // Defer removeAndDeleteWallet when no modal widget is active.\n+        if (QApplication::activeModalWidget()) {\n+            connect(qApp, &QApplication::focusChanged, wallet_model, [this, wallet_model]() {\n+                if (!QApplication::activeModalWidget()) {\n+                    removeAndDeleteWallet(wallet_model);\n+                }\n+            }, Qt::QueuedConnection);\n+        } else {\n+            removeAndDeleteWallet(wallet_model);\n+        }\n     });\n \n     // Re-emit coinsSent signal from wallet model."
      }
    ]
  },
  {
    "sha": "886bd1fde53f767ee7446268f24be70fd57a0211",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo4ODZiZDFmZGU1M2Y3NjdlZTc0NDYyNjhmMjRiZTcwZmQ1N2EwMjEx",
    "commit": {
      "author": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2019-03-18T09:41:30Z"
      },
      "committer": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2019-03-18T10:20:59Z"
      },
      "message": "Only delay walletmodel removal when modal dialogs are synchronous",
      "tree": {
        "sha": "b3fbb2be48b821bcd90d35d399519c88f8d9aa67",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b3fbb2be48b821bcd90d35d399519c88f8d9aa67"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/886bd1fde53f767ee7446268f24be70fd57a0211",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEyhopCNzi8TB0xizeHrd2uwPHki0FAlyPcQ0ACgkQHrd2uwPH\nki0yhw/8C9fXHiMj91yRVY9rsXgfUxcjZInstvrjcr6YXCGp26TUmcbjUtqrOiNk\nv8ah+98kJtQf5WCSZP9GDDqhKVVvSB4m/ABVRadip86IjyZ5qA7ncR2KlusbX8Wd\nsnNDmjLtk9eRnQ9f02Ot+N3TmtyrVaIznmNGenN665Y9E+rr/Dl4iIXI4CJWmc5D\nH+WarTGxPmA36cJ0QDGVXTHiiyKiLImIlX6eiNORWqlbWarExQDmbO8Jq7WcnVf8\nTQmozKpBunuKMJzjeM1bWKxEDLanZsmZneqU9GyqIF6Zlhi017YPvorcCHnYiVzA\nGerS5tqHJy8M0s11dE1WcgE+EZOafkQz6lJ/2OCrr8fkjLGeFHc1iWnWLrG6FPru\nhIYggCjY9uBS0MDAjdjwW7UM1k5xKcIQvnw3zl2SMmuYZz5SXrAiJ/Yc16Zwz3I4\n58BOTRD8ojZsuUNCQVs1uG9FuEW3aQ8c7/lucfk5cNiT0nCpv+pRBJavD8HRNRhY\nyGs1tZ1kakMGkvSPFZFd2d/iawhjOtMe5ffc0kr7Vc7v9xDOynnuXPv48yZrmeHp\nkVoZC7I2TcOM0P4jz2G0IK+wqXzaBgTwo+4M4xRZALsll0D1Ck3M5Z1CX98n15PU\nMvDuEQODYmm1wQZy7ECEgNeDhTk+nImcyFLKbkNT4zE2uxeYgg0=\n=fEvy\n-----END PGP SIGNATURE-----",
        "payload": "tree b3fbb2be48b821bcd90d35d399519c88f8d9aa67\nparent 79c45b388759f1c54bdac91c51aed79d053c30da\nauthor Jonas Schnelli <dev@jonasschnelli.ch> 1552902090 +0100\ncommitter Jonas Schnelli <dev@jonasschnelli.ch> 1552904459 +0100\n\nOnly delay walletmodel removal when modal dialogs are synchronous\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/886bd1fde53f767ee7446268f24be70fd57a0211",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/886bd1fde53f767ee7446268f24be70fd57a0211",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/886bd1fde53f767ee7446268f24be70fd57a0211/comments",
    "author": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "79c45b388759f1c54bdac91c51aed79d053c30da",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/79c45b388759f1c54bdac91c51aed79d053c30da",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/79c45b388759f1c54bdac91c51aed79d053c30da"
      }
    ],
    "stats": {
      "total": 9,
      "additions": 6,
      "deletions": 3
    },
    "files": [
      {
        "sha": "4dc0b6df828f6c01b88cb4f04af56273eaacbade",
        "filename": "src/qt/walletcontroller.cpp",
        "status": "modified",
        "additions": 6,
        "deletions": 3,
        "changes": 9,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/886bd1fde53f767ee7446268f24be70fd57a0211/src/qt/walletcontroller.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/886bd1fde53f767ee7446268f24be70fd57a0211/src/qt/walletcontroller.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/walletcontroller.cpp?ref=886bd1fde53f767ee7446268f24be70fd57a0211",
        "patch": "@@ -4,6 +4,8 @@\n \n #include <qt/walletcontroller.h>\n \n+#include <qt/askpassphrasedialog.h>\n+\n #include <interfaces/handler.h>\n #include <interfaces/node.h>\n \n@@ -98,10 +100,11 @@ WalletModel* WalletController::getOrCreateWallet(std::unique_ptr<interfaces::Wal\n     m_wallets.push_back(wallet_model);\n \n     connect(wallet_model, &WalletModel::unload, [this, wallet_model] {\n-        // Defer removeAndDeleteWallet when no modal widget is active.\n-        if (QApplication::activeModalWidget()) {\n+        // Remove wallet when there are no non-closable modal interaction\n+        if (QApplication::activeModalWidget() && qobject_cast<AskPassphraseDialog*>(QApplication::activeModalWidget()) == nullptr) {\n             connect(qApp, &QApplication::focusChanged, wallet_model, [this, wallet_model]() {\n-                if (!QApplication::activeModalWidget()) {\n+                // If user closed a dialog, check if we can safely remove the walletmodel\n+                if (!QApplication::activeModalWidget() || qobject_cast<AskPassphraseDialog*>(QApplication::activeModalWidget()) != nullptr) {\n                     removeAndDeleteWallet(wallet_model);\n                 }\n             }, Qt::QueuedConnection);"
      }
    ]
  }
]