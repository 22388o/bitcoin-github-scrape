[
  {
    "sha": "b96adcbfae90b3e041754f11624cac04c1999e8c",
    "node_id": "C_kwDOABII59oAKGI5NmFkY2JmYWU5MGIzZTA0MTc1NGYxMTYyNGNhYzA0YzE5OTllOGM",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-09-28T00:26:08Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-10-13T12:38:40Z"
      },
      "message": "guix: Fix powerpc64(le) dynamic linker name\n\nI used Guix's values for the powerpc64(le) dynamic linkers, and the\n/lib-prefix seems to be a Guix-ism rather than standard. The standard\npath for the linker-loaders start with /lib64.\n\nI've taken the new loader values from SYSDEP_KNOWN_INTERPRETER_NAMES in\nglibc's sysdeps/unix/sysv/linux/powerpc/ldconfig.h file.\n\nFor future reference, loader path values can also be found on glibc's\nwebsite: https://sourceware.org/glibc/wiki/ABIList?action=recall&rev=16",
      "tree": {
        "sha": "13282c428e331cfe2bd9e6a6901222d078a4f927",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/13282c428e331cfe2bd9e6a6901222d078a4f927"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b96adcbfae90b3e041754f11624cac04c1999e8c",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b96adcbfae90b3e041754f11624cac04c1999e8c",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/b96adcbfae90b3e041754f11624cac04c1999e8c",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b96adcbfae90b3e041754f11624cac04c1999e8c/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "da13c7b18afca274aedddc64e211241becc4b38e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/da13c7b18afca274aedddc64e211241becc4b38e",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/da13c7b18afca274aedddc64e211241becc4b38e"
      }
    ],
    "stats": {
      "total": 4,
      "additions": 2,
      "deletions": 2
    },
    "files": [
      {
        "sha": "93476d5f309de65491714d8079c0fbb2c4f18c8b",
        "filename": "contrib/guix/libexec/build.sh",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b96adcbfae90b3e041754f11624cac04c1999e8c/contrib/guix/libexec/build.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b96adcbfae90b3e041754f11624cac04c1999e8c/contrib/guix/libexec/build.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/libexec/build.sh?ref=b96adcbfae90b3e041754f11624cac04c1999e8c",
        "patch": "@@ -169,8 +169,8 @@ case \"$HOST\" in\n                 arm-linux-gnueabihf)   echo /lib/ld-linux-armhf.so.3 ;;\n                 aarch64-linux-gnu)     echo /lib/ld-linux-aarch64.so.1 ;;\n                 riscv64-linux-gnu)     echo /lib/ld-linux-riscv64-lp64d.so.1 ;;\n-                powerpc64-linux-gnu)   echo /lib/ld64.so.1;;\n-                powerpc64le-linux-gnu) echo /lib/ld64.so.2;;\n+                powerpc64-linux-gnu)   echo /lib64/ld64.so.1;;\n+                powerpc64le-linux-gnu) echo /lib64/ld64.so.2;;\n                 *)                     exit 1 ;;\n             esac\n         )"
      }
    ]
  },
  {
    "sha": "1527b7e8a1339705a48d4d1ed108230fc4953c18",
    "node_id": "C_kwDOABII59oAKDE1MjdiN2U4YTEzMzk3MDVhNDhkNGQxZWQxMDgyMzBmYzQ5NTNjMTg",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-10-01T00:18:28Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-10-13T12:39:48Z"
      },
      "message": "symbol-check: Check requested ELF interpreter\n\nIt is important that binaries request a standard interpreter location\nwhere most distros would place the linker-loader. Otherwise, the user\nwould be met with a very confusing message:\n\n    bash: <path>/<to>/bitcoind: No such file or directory\n\nWhen really it's the interpreter that's not found.",
      "tree": {
        "sha": "4e552eefddd56f2a0a6ef5c8725f2e99223dccb3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/4e552eefddd56f2a0a6ef5c8725f2e99223dccb3"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1527b7e8a1339705a48d4d1ed108230fc4953c18",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1527b7e8a1339705a48d4d1ed108230fc4953c18",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/1527b7e8a1339705a48d4d1ed108230fc4953c18",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1527b7e8a1339705a48d4d1ed108230fc4953c18/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "b96adcbfae90b3e041754f11624cac04c1999e8c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b96adcbfae90b3e041754f11624cac04c1999e8c",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/b96adcbfae90b3e041754f11624cac04c1999e8c"
      }
    ],
    "stats": {
      "total": 34,
      "additions": 32,
      "deletions": 2
    },
    "files": [
      {
        "sha": "158b6fa0ffc9b3fbd70183c540356fa3ded478b4",
        "filename": "contrib/devtools/symbol-check.py",
        "status": "modified",
        "additions": 32,
        "deletions": 2,
        "changes": 34,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/1527b7e8a1339705a48d4d1ed108230fc4953c18/contrib/devtools/symbol-check.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/1527b7e8a1339705a48d4d1ed108230fc4953c18/contrib/devtools/symbol-check.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/devtools/symbol-check.py?ref=1527b7e8a1339705a48d4d1ed108230fc4953c18",
        "patch": "@@ -11,7 +11,7 @@\n     find ../path/to/binaries -type f -executable | xargs python3 contrib/devtools/symbol-check.py\n '''\n import sys\n-from typing import List\n+from typing import List, Dict\n \n import lief\n \n@@ -63,6 +63,30 @@\n 'environ', '_environ', '__environ',\n }\n \n+# Expected linker-loader names can be found here:\n+# https://sourceware.org/glibc/wiki/ABIList?action=recall&rev=16\n+ELF_INTERPRETER_NAMES: Dict[lief.ELF.ARCH, Dict[lief.ENDIANNESS, str]] = {\n+    lief.ELF.ARCH.i386:    {\n+        lief.ENDIANNESS.LITTLE: \"/lib/ld-linux.so.2\",\n+    },\n+    lief.ELF.ARCH.x86_64:  {\n+        lief.ENDIANNESS.LITTLE: \"/lib64/ld-linux-x86-64.so.2\",\n+    },\n+    lief.ELF.ARCH.ARM:     {\n+        lief.ENDIANNESS.LITTLE: \"/lib/ld-linux-armhf.so.3\",\n+    },\n+    lief.ELF.ARCH.AARCH64: {\n+        lief.ENDIANNESS.LITTLE: \"/lib/ld-linux-aarch64.so.1\",\n+    },\n+    lief.ELF.ARCH.PPC64:   {\n+        lief.ENDIANNESS.BIG: \"/lib64/ld64.so.1\",\n+        lief.ENDIANNESS.LITTLE: \"/lib64/ld64.so.2\",\n+    },\n+    LIEF_ELF_ARCH_RISCV:    {\n+        lief.ENDIANNESS.LITTLE: \"/lib/ld-linux-riscv64-lp64d.so.1\",\n+    },\n+}\n+\n # Allowed NEEDED libraries\n ELF_ALLOWED_LIBRARIES = {\n # bitcoind and bitcoin-qt\n@@ -215,11 +239,17 @@ def check_PE_subsystem_version(binary) -> bool:\n         return True\n     return False\n \n+def check_ELF_interpreter(binary) -> bool:\n+    expected_interpreter = ELF_INTERPRETER_NAMES[binary.header.machine_type][binary.abstract.header.endianness]\n+\n+    return binary.concrete.interpreter == expected_interpreter\n+\n CHECKS = {\n 'ELF': [\n     ('IMPORTED_SYMBOLS', check_imported_symbols),\n     ('EXPORTED_SYMBOLS', check_exported_symbols),\n-    ('LIBRARY_DEPENDENCIES', check_ELF_libraries)\n+    ('LIBRARY_DEPENDENCIES', check_ELF_libraries),\n+    ('INTERPRETER_NAME', check_ELF_interpreter),\n ],\n 'MACHO': [\n     ('DYNAMIC_LIBRARIES', check_MACHO_libraries),"
      }
    ]
  }
]