[
  {
    "sha": "fab91070d38aa248a852e04c56dcb73e4022872d",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYWI5MTA3MGQzOGFhMjQ4YTg1MmUwNGM1NmRjYjczZTQwMjI4NzJk",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2016-09-19T14:09:38Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2016-09-20T15:32:05Z"
      },
      "message": "init: Get rid of fDisableWallet",
      "tree": {
        "sha": "7803823646f7ade7f419853296ab8edb121e8e59",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7803823646f7ade7f419853296ab8edb121e8e59"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fab91070d38aa248a852e04c56dcb73e4022872d",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fab91070d38aa248a852e04c56dcb73e4022872d",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fab91070d38aa248a852e04c56dcb73e4022872d",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fab91070d38aa248a852e04c56dcb73e4022872d/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "1c24d5f637201b46a621f6e8e0247bc8bdc52f6a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1c24d5f637201b46a621f6e8e0247bc8bdc52f6a",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/1c24d5f637201b46a621f6e8e0247bc8bdc52f6a"
      }
    ],
    "stats": {
      "total": 45,
      "additions": 25,
      "deletions": 20
    },
    "files": [
      {
        "sha": "75182345ee9f0d81c262b0dd3471a3fa309695cd",
        "filename": "src/init.cpp",
        "status": "modified",
        "additions": 10,
        "deletions": 20,
        "changes": 30,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fab91070d38aa248a852e04c56dcb73e4022872d/src/init.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fab91070d38aa248a852e04c56dcb73e4022872d/src/init.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/init.cpp?ref=fab91070d38aa248a852e04c56dcb73e4022872d",
        "patch": "@@ -935,9 +935,7 @@ bool AppInit2(boost::thread_group& threadGroup, CScheduler& scheduler)\n \n     RegisterAllCoreRPCCommands(tableRPC);\n #ifdef ENABLE_WALLET\n-    bool fDisableWallet = GetBoolArg(\"-disablewallet\", false);\n-    if (!fDisableWallet)\n-        RegisterWalletRPCCommands(tableRPC);\n+    RegisterWalletRPCCommands(tableRPC);\n #endif\n \n     nConnectTimeout = GetArg(\"-timeout\", DEFAULT_CONNECT_TIMEOUT);\n@@ -965,9 +963,9 @@ bool AppInit2(boost::thread_group& threadGroup, CScheduler& scheduler)\n     nBytesPerSigOp = GetArg(\"-bytespersigop\", nBytesPerSigOp);\n \n #ifdef ENABLE_WALLET\n-    if (!fDisableWallet && !CWallet::ParameterInteraction())\n+    if (!CWallet::ParameterInteraction())\n         return false;\n-#endif // ENABLE_WALLET\n+#endif\n \n     fIsBareMultisigStd = GetBoolArg(\"-permitbaremultisig\", DEFAULT_PERMIT_BAREMULTISIG);\n     fAcceptDatacarrier = GetBoolArg(\"-datacarrier\", DEFAULT_ACCEPT_DATACARRIER);\n@@ -1095,11 +1093,9 @@ bool AppInit2(boost::thread_group& threadGroup, CScheduler& scheduler)\n \n     // ********************************************************* Step 5: verify wallet database integrity\n #ifdef ENABLE_WALLET\n-    if (!fDisableWallet) {\n-        if (!CWallet::Verify())\n-            return false;\n-    } // (!fDisableWallet)\n-#endif // ENABLE_WALLET\n+    if (!CWallet::Verify())\n+        return false;\n+#endif\n     // ********************************************************* Step 6: network initialization\n \n     assert(!g_connman);\n@@ -1427,17 +1423,11 @@ bool AppInit2(boost::thread_group& threadGroup, CScheduler& scheduler)\n \n     // ********************************************************* Step 8: load wallet\n #ifdef ENABLE_WALLET\n-    if (fDisableWallet) {\n-        pwalletMain = NULL;\n-        LogPrintf(\"Wallet disabled!\\n\");\n-    } else {\n-        CWallet::InitLoadWallet();\n-        if (!pwalletMain)\n-            return false;\n-    }\n-#else // ENABLE_WALLET\n+    if (!CWallet::InitLoadWallet())\n+        return false;\n+#else\n     LogPrintf(\"No wallet support compiled in!\\n\");\n-#endif // !ENABLE_WALLET\n+#endif\n \n     // ********************************************************* Step 9: data directory maintenance\n "
      },
      {
        "sha": "3eb7e5d9ba885f6f8a0421ba5bb5d18d49a18c82",
        "filename": "src/wallet/rpcwallet.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fab91070d38aa248a852e04c56dcb73e4022872d/src/wallet/rpcwallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fab91070d38aa248a852e04c56dcb73e4022872d/src/wallet/rpcwallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/rpcwallet.cpp?ref=fab91070d38aa248a852e04c56dcb73e4022872d",
        "patch": "@@ -2630,6 +2630,9 @@ static const CRPCCommand commands[] =\n \n void RegisterWalletRPCCommands(CRPCTable &t)\n {\n+    if (GetBoolArg(\"-disablewallet\", false))\n+        return;\n+\n     for (unsigned int vcidx = 0; vcidx < ARRAYLEN(commands); vcidx++)\n         t.appendCommand(commands[vcidx].name, &commands[vcidx]);\n }"
      },
      {
        "sha": "27dd4c0a95b4793906d21e6af521edef0789f3a6",
        "filename": "src/wallet/wallet.cpp",
        "status": "modified",
        "additions": 12,
        "deletions": 0,
        "changes": 12,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fab91070d38aa248a852e04c56dcb73e4022872d/src/wallet/wallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fab91070d38aa248a852e04c56dcb73e4022872d/src/wallet/wallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.cpp?ref=fab91070d38aa248a852e04c56dcb73e4022872d",
        "patch": "@@ -414,6 +414,9 @@ void CWallet::Flush(bool shutdown)\n \n bool CWallet::Verify()\n {\n+    if (GetBoolArg(\"-disablewallet\", false))\n+        return true;\n+\n     LogPrintf(\"Using BerkeleyDB version %s\\n\", DbEnv::version(0, 0, 0));\n     std::string walletFile = GetArg(\"-wallet\", DEFAULT_WALLET_DAT);\n \n@@ -3293,6 +3296,12 @@ std::string CWallet::GetWalletHelpString(bool showDebug)\n \n bool CWallet::InitLoadWallet()\n {\n+    if (GetBoolArg(\"-disablewallet\", false)) {\n+        pwalletMain = NULL;\n+        LogPrintf(\"Wallet disabled!\\n\");\n+        return true;\n+    }\n+\n     std::string walletFile = GetArg(\"-wallet\", DEFAULT_WALLET_DAT);\n \n     // needed to restore wallet transaction meta data after -zapwallettxes\n@@ -3464,6 +3473,9 @@ bool CWallet::InitLoadWallet()\n \n bool CWallet::ParameterInteraction()\n {\n+    if (GetBoolArg(\"-disablewallet\", false))\n+        return true;\n+\n     if (GetBoolArg(\"-blocksonly\", DEFAULT_BLOCKSONLY) && SoftSetBoolArg(\"-walletbroadcast\", false)) {\n         LogPrintf(\"%s: parameter interaction: -blocksonly=1 -> setting -walletbroadcast=0\\n\", __func__);\n     }"
      }
    ]
  },
  {
    "sha": "fa58edbffe929da45004d4406d7d1ffc7d14dc98",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYTU4ZWRiZmZlOTI5ZGE0NTAwNGQ0NDA2ZDdkMWZmYzdkMTRkYzk4",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2016-09-21T10:15:18Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2016-09-21T10:06:58Z"
      },
      "message": "[wallet] Introduce DEFAULT_DISABLE_WALLET",
      "tree": {
        "sha": "0c35b5706ba8c32c607ea42f3af5dc8a0e683998",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/0c35b5706ba8c32c607ea42f3af5dc8a0e683998"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa58edbffe929da45004d4406d7d1ffc7d14dc98",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa58edbffe929da45004d4406d7d1ffc7d14dc98",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fa58edbffe929da45004d4406d7d1ffc7d14dc98",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa58edbffe929da45004d4406d7d1ffc7d14dc98/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "fab91070d38aa248a852e04c56dcb73e4022872d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fab91070d38aa248a852e04c56dcb73e4022872d",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/fab91070d38aa248a852e04c56dcb73e4022872d"
      }
    ],
    "stats": {
      "total": 10,
      "additions": 5,
      "deletions": 5
    },
    "files": [
      {
        "sha": "dcd3f155b9281a32aa07b29a705510d82ff31d0d",
        "filename": "src/qt/bitcoingui.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa58edbffe929da45004d4406d7d1ffc7d14dc98/src/qt/bitcoingui.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa58edbffe929da45004d4406d7d1ffc7d14dc98/src/qt/bitcoingui.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoingui.cpp?ref=fa58edbffe929da45004d4406d7d1ffc7d14dc98",
        "patch": "@@ -123,7 +123,7 @@ BitcoinGUI::BitcoinGUI(const PlatformStyle *platformStyle, const NetworkStyle *n\n     QString windowTitle = tr(PACKAGE_NAME) + \" - \";\n #ifdef ENABLE_WALLET\n     /* if compiled with wallet support, -disablewallet can still disable the wallet */\n-    enableWallet = !GetBoolArg(\"-disablewallet\", false);\n+    enableWallet = !GetBoolArg(\"-disablewallet\", DEFAULT_DISABLE_WALLET);\n #else\n     enableWallet = false;\n #endif // ENABLE_WALLET"
      },
      {
        "sha": "abb1ea7e76e864f04acecaafee00443b1e9bce17",
        "filename": "src/wallet/wallet.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa58edbffe929da45004d4406d7d1ffc7d14dc98/src/wallet/wallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa58edbffe929da45004d4406d7d1ffc7d14dc98/src/wallet/wallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.cpp?ref=fa58edbffe929da45004d4406d7d1ffc7d14dc98",
        "patch": "@@ -414,7 +414,7 @@ void CWallet::Flush(bool shutdown)\n \n bool CWallet::Verify()\n {\n-    if (GetBoolArg(\"-disablewallet\", false))\n+    if (GetBoolArg(\"-disablewallet\", DEFAULT_DISABLE_WALLET))\n         return true;\n \n     LogPrintf(\"Using BerkeleyDB version %s\\n\", DbEnv::version(0, 0, 0));\n@@ -3296,7 +3296,7 @@ std::string CWallet::GetWalletHelpString(bool showDebug)\n \n bool CWallet::InitLoadWallet()\n {\n-    if (GetBoolArg(\"-disablewallet\", false)) {\n+    if (GetBoolArg(\"-disablewallet\", DEFAULT_DISABLE_WALLET)) {\n         pwalletMain = NULL;\n         LogPrintf(\"Wallet disabled!\\n\");\n         return true;\n@@ -3473,7 +3473,7 @@ bool CWallet::InitLoadWallet()\n \n bool CWallet::ParameterInteraction()\n {\n-    if (GetBoolArg(\"-disablewallet\", false))\n+    if (GetBoolArg(\"-disablewallet\", DEFAULT_DISABLE_WALLET))\n         return true;\n \n     if (GetBoolArg(\"-blocksonly\", DEFAULT_BLOCKSONLY) && SoftSetBoolArg(\"-walletbroadcast\", false)) {"
      },
      {
        "sha": "f6c658928f64c61ab869e6289238e2629f85fada",
        "filename": "src/wallet/wallet.h",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa58edbffe929da45004d4406d7d1ffc7d14dc98/src/wallet/wallet.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa58edbffe929da45004d4406d7d1ffc7d14dc98/src/wallet/wallet.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.h?ref=fa58edbffe929da45004d4406d7d1ffc7d14dc98",
        "patch": "@@ -59,7 +59,7 @@ static const bool DEFAULT_WALLET_RBF = false;\n //! Largest (in bytes) free transaction we're willing to create\n static const unsigned int MAX_FREE_TRANSACTION_CREATE_SIZE = 1000;\n static const bool DEFAULT_WALLETBROADCAST = true;\n-\n+static const bool DEFAULT_DISABLE_WALLET = false;\n //! if set, all keys will be derived by using BIP32\n static const bool DEFAULT_USE_HD_WALLET = true;\n "
      }
    ]
  }
]