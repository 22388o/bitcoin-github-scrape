gmaxwell,2012-10-24T06:01:22Z,"Tested by reproducing both issues while syncing testnet under valgrind, and by mining on testnet.\n",https://github.com/bitcoin/bitcoin/pull/1953#issuecomment-9728759,9728759,
Diapolo,2012-10-24T06:02:49Z,@gmaxwell The part with the LOCK is also described in #1946. I can confirm this fixes the assertion I observed a few times while doing some testnet tests.\n,https://github.com/bitcoin/bitcoin/pull/1953#issuecomment-9728780,9728780,
laanwj,2012-10-24T06:16:00Z,ACK\n,https://github.com/bitcoin/bitcoin/pull/1953#issuecomment-9728976,9728976,
gmaxwell,2012-10-24T06:17:25Z,"@Diapolo Duh, I should have paid attention to the issues, it would have saved me a few minutes. :P\n",https://github.com/bitcoin/bitcoin/pull/1953#issuecomment-9729005,9729005,
Diapolo,2012-10-24T06:19:00Z,"Perhaps it sunk in my pull-request spam :-D, but nice it gets fixed.\n",https://github.com/bitcoin/bitcoin/pull/1953#issuecomment-9729027,9729027,
gavinandresen,2012-10-24T14:17:56Z,ACK\n,https://github.com/bitcoin/bitcoin/pull/1953#issuecomment-9740949,9740949,
sipa,2012-10-24T09:14:24Z,I don't really like the fact that the hash in CBlockIndex::phashBlock is optional. We have a GetBlockHash()... why doesn't it just calculate the hash if it's not available?\n,https://github.com/bitcoin/bitcoin/pull/1953#discussion_r1926227,1926227,src/main.cpp
gmaxwell,2012-10-24T13:10:11Z,Hm. In the case of a CreateNewBlock JustCheck it would just be pointless computation on an operation which is supposed to be fast. Effectively in this case we don't know— and can't know— the hash yet. Perhaps generally GetBlockHash should do that though. At least in this case it only gets called for those two heights.\n,https://github.com/bitcoin/bitcoin/pull/1953#discussion_r1928021,1928021,src/main.cpp
sipa,2012-10-24T13:36:53Z,"Agree, in this case, it's an optimization not needing to calculate the hash.\n",https://github.com/bitcoin/bitcoin/pull/1953#discussion_r1928306,1928306,src/main.cpp
