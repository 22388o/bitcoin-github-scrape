[
  {
    "sha": "9e2c623be50ee7e586a411923b9ed136acfa2b3f",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo5ZTJjNjIzYmU1MGVlN2U1ODZhNDExOTIzYjllZDEzNmFjZmEyYjNm",
    "commit": {
      "author": {
        "name": "Elichai Turkel",
        "email": "elichai.turkel@gmail.com",
        "date": "2019-10-26T18:10:44Z"
      },
      "committer": {
        "name": "Elichai Turkel",
        "email": "elichai.turkel@gmail.com",
        "date": "2019-10-26T22:00:05Z"
      },
      "message": "Rename DecodeDumpTime to ParseISO8601DateTime and move to time.cpp",
      "tree": {
        "sha": "811ee6b1a86b8ace053c83b84d2004cab0251e20",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/811ee6b1a86b8ace053c83b84d2004cab0251e20"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9e2c623be50ee7e586a411923b9ed136acfa2b3f",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQJNBAABCAA3FiEEC5PUstyhDoo+NyfXk4PN6ejman8FAl20weYZHGVsaWNoYWku\ndHVya2VsQGdtYWlsLmNvbQAKCRCTg83p6OZqfzg5D/0SoNOi7kFH1hUrHW17GypL\nlpvmLokfi1WY4hLHKDeZeaBG05a0hIktT83/E+oWeK8SVIiSX5USBS2rLRo9xVTG\n1BzGNVHauqiPhfhzcEw+8Zruy6q1f90EadnD+BEism6tWpV4xArtSsgW6ECXlDy3\nyMLuVaScJj7U4EvbaUC+3xbtMSn4tTyzrDrkJaEEWUgrmGAvK8b7/WX7coq+cC1U\nSAaD4+Hs97kk7WwFbXFVgu29tIMhE1Nlay5tlfH3RYENjY+vRgsAUK/OA4NiXu8Y\nPHW0eaik0+TWMMEyuGO1rqO69jeSMEyljS15nssJsU4ETeghPTnILyPqKcw8FlBs\ndY/oSrIbRG8CvmE0E1LksKYrGW7SUHfWgwpmtGU5wdajfu3K7JVnVRMe8cPRcXmP\nrezkVnQgSKfUpJqh4tmCJZ6mVLpSiVVwovm8eQxUDJWDPqR7MNiHleLUeifz9U/y\noDBdDyggd5WhIEvsDJkqixWemkziyTYIJoGllFI26m8PQOk5tRx8ReqcHU5EgRTs\nAMcuRA+XGwBIthezNAO7SGM917G0w7IppLoxeZFgTy9iD/CMeo0WULWjzgD1G1Nl\n/kRsDJYWd1tprg/QkQGYIc264+7rMDj1gkjvbhAqo3moGXs3vAylLx0koowAyrZN\nSJThonWeTgOyhQ4qriAXgw==\n=cD2S\n-----END PGP SIGNATURE-----",
        "payload": "tree 811ee6b1a86b8ace053c83b84d2004cab0251e20\nparent be50469217bd775c4305938634c32e5932f47841\nauthor Elichai Turkel <elichai.turkel@gmail.com> 1572113444 +0300\ncommitter Elichai Turkel <elichai.turkel@gmail.com> 1572127205 +0300\n\nRename DecodeDumpTime to ParseISO8601DateTime and move to time.cpp\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9e2c623be50ee7e586a411923b9ed136acfa2b3f",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/9e2c623be50ee7e586a411923b9ed136acfa2b3f",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9e2c623be50ee7e586a411923b9ed136acfa2b3f/comments",
    "author": {
      "login": "elichai",
      "id": 2167860,
      "node_id": "MDQ6VXNlcjIxNjc4NjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2167860?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/elichai",
      "html_url": "https://github.com/elichai",
      "followers_url": "https://api.github.com/users/elichai/followers",
      "following_url": "https://api.github.com/users/elichai/following{/other_user}",
      "gists_url": "https://api.github.com/users/elichai/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/elichai/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/elichai/subscriptions",
      "organizations_url": "https://api.github.com/users/elichai/orgs",
      "repos_url": "https://api.github.com/users/elichai/repos",
      "events_url": "https://api.github.com/users/elichai/events{/privacy}",
      "received_events_url": "https://api.github.com/users/elichai/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "elichai",
      "id": 2167860,
      "node_id": "MDQ6VXNlcjIxNjc4NjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2167860?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/elichai",
      "html_url": "https://github.com/elichai",
      "followers_url": "https://api.github.com/users/elichai/followers",
      "following_url": "https://api.github.com/users/elichai/following{/other_user}",
      "gists_url": "https://api.github.com/users/elichai/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/elichai/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/elichai/subscriptions",
      "organizations_url": "https://api.github.com/users/elichai/orgs",
      "repos_url": "https://api.github.com/users/elichai/repos",
      "events_url": "https://api.github.com/users/elichai/events{/privacy}",
      "received_events_url": "https://api.github.com/users/elichai/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "be50469217bd775c4305938634c32e5932f47841",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/be50469217bd775c4305938634c32e5932f47841",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/be50469217bd775c4305938634c32e5932f47841"
      }
    ],
    "stats": {
      "total": 32,
      "additions": 17,
      "deletions": 15
    },
    "files": [
      {
        "sha": "2afff2626b61048dfc743b12a8aca62d411117c7",
        "filename": "src/util/time.cpp",
        "status": "modified",
        "additions": 14,
        "deletions": 0,
        "changes": 14,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/9e2c623be50ee7e586a411923b9ed136acfa2b3f/src/util/time.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/9e2c623be50ee7e586a411923b9ed136acfa2b3f/src/util/time.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/util/time.cpp?ref=9e2c623be50ee7e586a411923b9ed136acfa2b3f",
        "patch": "@@ -111,3 +111,17 @@ std::string FormatISO8601Date(int64_t nTime) {\n #endif\n     return strprintf(\"%04i-%02i-%02i\", ts.tm_year + 1900, ts.tm_mon + 1, ts.tm_mday);\n }\n+\n+int64_t ParseISO8601DateTime(const std::string& str)\n+{\n+    static const boost::posix_time::ptime epoch = boost::posix_time::from_time_t(0);\n+    static const std::locale loc(std::locale::classic(),\n+        new boost::posix_time::time_input_facet(\"%Y-%m-%dT%H:%M:%SZ\"));\n+    std::istringstream iss(str);\n+    iss.imbue(loc);\n+    boost::posix_time::ptime ptime(boost::date_time::not_a_date_time);\n+    iss >> ptime;\n+    if (ptime.is_not_a_date_time() || epoch > ptime)\n+        return 0;\n+    return (ptime - epoch).total_seconds();\n+}\n\\ No newline at end of file"
      },
      {
        "sha": "af4390aa1c18c7c1e983b79c82dca68a358aad02",
        "filename": "src/util/time.h",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/9e2c623be50ee7e586a411923b9ed136acfa2b3f/src/util/time.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/9e2c623be50ee7e586a411923b9ed136acfa2b3f/src/util/time.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/util/time.h?ref=9e2c623be50ee7e586a411923b9ed136acfa2b3f",
        "patch": "@@ -48,5 +48,6 @@ T GetTime();\n  */\n std::string FormatISO8601DateTime(int64_t nTime);\n std::string FormatISO8601Date(int64_t nTime);\n+int64_t ParseISO8601DateTime(const std::string& str);\n \n #endif // BITCOIN_UTIL_TIME_H"
      },
      {
        "sha": "9af567fe0d956a0764930bf359660f03628be5ef",
        "filename": "src/wallet/rpcdump.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 15,
        "changes": 17,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/9e2c623be50ee7e586a411923b9ed136acfa2b3f/src/wallet/rpcdump.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/9e2c623be50ee7e586a411923b9ed136acfa2b3f/src/wallet/rpcdump.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/rpcdump.cpp?ref=9e2c623be50ee7e586a411923b9ed136acfa2b3f",
        "patch": "@@ -23,23 +23,10 @@\n #include <tuple>\n \n #include <boost/algorithm/string.hpp>\n-#include <boost/date_time/posix_time/posix_time.hpp>\n \n #include <univalue.h>\n \n \n-int64_t static DecodeDumpTime(const std::string &str) {\n-    static const boost::posix_time::ptime epoch = boost::posix_time::from_time_t(0);\n-    static const std::locale loc(std::locale::classic(),\n-        new boost::posix_time::time_input_facet(\"%Y-%m-%dT%H:%M:%SZ\"));\n-    std::istringstream iss(str);\n-    iss.imbue(loc);\n-    boost::posix_time::ptime ptime(boost::date_time::not_a_date_time);\n-    iss >> ptime;\n-    if (ptime.is_not_a_date_time())\n-        return 0;\n-    return (ptime - epoch).total_seconds();\n-}\n \n std::string static EncodeDumpString(const std::string &str) {\n     std::stringstream ret;\n@@ -598,7 +585,7 @@ UniValue importwallet(const JSONRPCRequest& request)\n                 continue;\n             CKey key = DecodeSecret(vstr[0]);\n             if (key.IsValid()) {\n-                int64_t nTime = DecodeDumpTime(vstr[1]);\n+                int64_t nTime = ParseISO8601DateTime(vstr[1]);\n                 std::string strLabel;\n                 bool fLabel = true;\n                 for (unsigned int nStr = 2; nStr < vstr.size(); nStr++) {\n@@ -617,7 +604,7 @@ UniValue importwallet(const JSONRPCRequest& request)\n             } else if(IsHex(vstr[0])) {\n                 std::vector<unsigned char> vData(ParseHex(vstr[0]));\n                 CScript script = CScript(vData.begin(), vData.end());\n-                int64_t birth_time = DecodeDumpTime(vstr[1]);\n+                int64_t birth_time = ParseISO8601DateTime(vstr[1]);\n                 scripts.push_back(std::pair<CScript, int64_t>(script, birth_time));\n             }\n         }"
      }
    ]
  },
  {
    "sha": "e7b02b54ccfb6b2e119a67799220f8d8d8b5cccd",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzplN2IwMmI1NGNjZmI2YjJlMTE5YTY3Nzk5MjIwZjhkOGQ4YjVjY2Nk",
    "commit": {
      "author": {
        "name": "Elichai Turkel",
        "email": "elichai.turkel@gmail.com",
        "date": "2019-10-26T18:11:11Z"
      },
      "committer": {
        "name": "Elichai Turkel",
        "email": "elichai.turkel@gmail.com",
        "date": "2019-10-26T22:00:13Z"
      },
      "message": "Add roundtrip and more tests to ParseISO8601DateTime and FormatISO8601DateTime",
      "tree": {
        "sha": "bff0cf2db9cf42a89e29dfe19850381179261ee7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/bff0cf2db9cf42a89e29dfe19850381179261ee7"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e7b02b54ccfb6b2e119a67799220f8d8d8b5cccd",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQJNBAABCAA3FiEEC5PUstyhDoo+NyfXk4PN6ejman8FAl20we4ZHGVsaWNoYWku\ndHVya2VsQGdtYWlsLmNvbQAKCRCTg83p6OZqf1GDEADOhh00snPnk8MCIgTLqink\nI3tje1b96wfJEmPNaA4RKxNQTRWWozhWBYBUu/4/YyKs0wmdu2guJebA0i//PIuW\nzjE6A3+65rPjW8ZgXpiILa8WFwasEhq1LPsFkqSXIasmnWt54QziZiSyUj0z2wQ2\nMzQ/CA5EbGyF9fkvWO/lu2zshUaHLZ70goZ95bE863vSFnVrA8zJ268L9MIDWHoi\nD6IEmQVfNcrRh7jfJT2olUrpHFjYBvhs+NM2OqT3J+dkhIlCDimWCG/C6OH1BgBp\nv3KnfKgLh5xkYmI73FoqVNgQ7abc+INgGoR149ilfQACxRKMV7zozwM5/UhvU74N\n9dLLFP6AIjGmBNZzTsZnXQ+k0mrJnQRvaxpx4HITCh7Z5raB6A07cwnJSny4PBfO\neQLIKQAXyEa/SQMzj+59nKYH56jeWXN6OWOfaUu1uCiCA1gcVf6BvMIOWHmHzH2e\nS4hGhwKjs63JTK9EJb+v+c2IuuKMCU6UzX1DRcfBYRVJ7nn96z7cXtLKsvmISaUF\n1NgC9is4J0445/3GD4N9/2hoPCZaqS6bQmLQ95hwmuPKgfoLk8wftiVIJwLovLbv\nZ5ycr27TaflJqrQj90a4031e0F0BqeCVKB/avR8ySLnZeu37ACcuIBVTtEA19vsu\nCEzKlERcsMfo5gfk30k6YA==\n=9NjN\n-----END PGP SIGNATURE-----",
        "payload": "tree bff0cf2db9cf42a89e29dfe19850381179261ee7\nparent 9e2c623be50ee7e586a411923b9ed136acfa2b3f\nauthor Elichai Turkel <elichai.turkel@gmail.com> 1572113471 +0300\ncommitter Elichai Turkel <elichai.turkel@gmail.com> 1572127213 +0300\n\nAdd roundtrip and more tests to ParseISO8601DateTime and FormatISO8601DateTime\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e7b02b54ccfb6b2e119a67799220f8d8d8b5cccd",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/e7b02b54ccfb6b2e119a67799220f8d8d8b5cccd",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e7b02b54ccfb6b2e119a67799220f8d8d8b5cccd/comments",
    "author": {
      "login": "elichai",
      "id": 2167860,
      "node_id": "MDQ6VXNlcjIxNjc4NjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2167860?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/elichai",
      "html_url": "https://github.com/elichai",
      "followers_url": "https://api.github.com/users/elichai/followers",
      "following_url": "https://api.github.com/users/elichai/following{/other_user}",
      "gists_url": "https://api.github.com/users/elichai/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/elichai/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/elichai/subscriptions",
      "organizations_url": "https://api.github.com/users/elichai/orgs",
      "repos_url": "https://api.github.com/users/elichai/repos",
      "events_url": "https://api.github.com/users/elichai/events{/privacy}",
      "received_events_url": "https://api.github.com/users/elichai/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "elichai",
      "id": 2167860,
      "node_id": "MDQ6VXNlcjIxNjc4NjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2167860?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/elichai",
      "html_url": "https://github.com/elichai",
      "followers_url": "https://api.github.com/users/elichai/followers",
      "following_url": "https://api.github.com/users/elichai/following{/other_user}",
      "gists_url": "https://api.github.com/users/elichai/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/elichai/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/elichai/subscriptions",
      "organizations_url": "https://api.github.com/users/elichai/orgs",
      "repos_url": "https://api.github.com/users/elichai/repos",
      "events_url": "https://api.github.com/users/elichai/events{/privacy}",
      "received_events_url": "https://api.github.com/users/elichai/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "9e2c623be50ee7e586a411923b9ed136acfa2b3f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9e2c623be50ee7e586a411923b9ed136acfa2b3f",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/9e2c623be50ee7e586a411923b9ed136acfa2b3f"
      }
    ],
    "stats": {
      "total": 10,
      "additions": 9,
      "deletions": 1
    },
    "files": [
      {
        "sha": "569ce530929a7f4975203381b3c90527e00c838a",
        "filename": "src/test/util_tests.cpp",
        "status": "modified",
        "additions": 9,
        "deletions": 1,
        "changes": 10,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e7b02b54ccfb6b2e119a67799220f8d8d8b5cccd/src/test/util_tests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e7b02b54ccfb6b2e119a67799220f8d8d8b5cccd/src/test/util_tests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/util_tests.cpp?ref=e7b02b54ccfb6b2e119a67799220f8d8d8b5cccd",
        "patch": "@@ -145,9 +145,17 @@ BOOST_AUTO_TEST_CASE(util_Join)\n     BOOST_CHECK_EQUAL(Join<std::string>({\"foo\", \"bar\"}, \", \", op_upper), \"FOO, BAR\");\n }\n \n-BOOST_AUTO_TEST_CASE(util_FormatISO8601DateTime)\n+BOOST_AUTO_TEST_CASE(util_FormatParseISO8601DateTime)\n {\n     BOOST_CHECK_EQUAL(FormatISO8601DateTime(1317425777), \"2011-09-30T23:36:17Z\");\n+    BOOST_CHECK_EQUAL(FormatISO8601DateTime(0), \"1970-01-01T00:00:00Z\");\n+\n+    BOOST_CHECK_EQUAL(ParseISO8601DateTime(\"1970-01-01T00:00:00Z\"), 0);\n+    BOOST_CHECK_EQUAL(ParseISO8601DateTime(\"1960-01-01T00:00:00Z\"), 0);\n+    BOOST_CHECK_EQUAL(ParseISO8601DateTime(\"2011-09-30T23:36:17Z\"), 1317425777);\n+\n+    auto time = GetSystemTimeInSeconds();\n+    BOOST_CHECK_EQUAL(ParseISO8601DateTime(FormatISO8601DateTime(time)), time);\n }\n \n BOOST_AUTO_TEST_CASE(util_FormatISO8601Date)"
      }
    ]
  }
]