DrahtBot,2019-10-23 20:26:25,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#17071](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/17071.html) (tests: Add fuzzing harness for CheckBlock(.",https://github.com/bitcoin/bitcoin/pull/17229#issuecomment-545621176,545621176,
practicalswift,2019-12-06 09:21:36,Rebased! :),https://github.com/bitcoin/bitcoin/pull/17229#issuecomment-562497166,562497166,
practicalswift,2019-12-09 20:30:46,Rebased! :),https://github.com/bitcoin/bitcoin/pull/17229#issuecomment-563424034,563424034,
MarcoFalke,2019-12-17 00:10:17,"ACK c18405732e38eadb2c47533c3f982f4605fbfd9a üîÅ\n\n<details><summary>Show signature and timestamp</summary>\n\nSignature:\n\n```\n-----BEGIN PGP SIGNED MESSAGE-----\nHash: SHA512\n\nACK c18405732e38eadb2c47533c3f982f4605fbfd9a üîÅ\n-----BEGIN PGP SIGNATURE-----\n\niQGzBAEBCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUiRkQwAzifZDinuiY69gCNY7zItA/6qtOrQCr5xI9XT/cXhnmxujZ3kUO",https://github.com/bitcoin/bitcoin/pull/17229#issuecomment-566309149,566309149,
MarcoFalke,2019-12-09 20:16:55,All this does is strip the whitespace? Seems overkill to extend the generic helper `SanitizeString` for this use case.,https://github.com/bitcoin/bitcoin/pull/17229#discussion_r355662189,355662189,src/test/fuzz/base_encode_decode.cpp
practicalswift,2019-12-10 16:33:17,"No, `random_encoded_string` can contain all kinds of crap and still pass `DecodeBase58` so it is not only for whitespace removal. To properly fuzz test this then knowledge of `SAFE_CHARS_BASE58` is needed, but if you want I can make the sanitation machinery local to the this file?",https://github.com/bitcoin/bitcoin/pull/17229#discussion_r356144548,356144548,src/test/fuzz/base_encode_decode.cpp
MarcoFalke,2019-12-10 16:39:28,Can you explain what kind of crap makes it pass? And does that sound like a bug where it should return false instead?,https://github.com/bitcoin/bitcoin/pull/17229#discussion_r356148237,356148237,src/test/fuzz/base_encode_decode.cpp
practicalswift,2019-12-10 16:44:48,"@MarcoFalke ~~Oh, I don't think it is an indication of a bug --~~ sorry for using sloppy language :)  With ""all kinds of crap"" I simply meant characters outside of `SAFE_CHARS_BASE58`. I'll get back with a more specific code example :)",https://github.com/bitcoin/bitcoin/pull/17229#discussion_r356151479,356151479,src/test/fuzz/base_encode_decode.cpp
practicalswift,2019-12-10 23:10:39,"Consider these cases:\n* `str` contains `good` ‚Üí `DecodeBase58(const std::string& str, ‚Ä¶) == true` (as expected)\n* `str` contains `bad0IOl` ‚Üí `DecodeBase58(const std::string& str, ‚Ä¶) == false` (as expected)\n* `str` contains `good\x00bad0IOl` ‚Üí `DecodeBase58(const std::string& str, ‚Ä¶) == true`(!)\n\nThe reason is that `DecodeBase58(const std::string& str, ‚Ä¶)` calls `DecodeBase58(const char* ",https://github.com/bitcoin/bitcoin/pull/17229#discussion_r356328157,356328157,src/test/fuzz/base_encode_decode.cpp
MarcoFalke,2019-12-10 23:26:23,"So instead of `SanitizeString`, the string could be shortened and trimmed of whitespace in the fuzzer?",https://github.com/bitcoin/bitcoin/pull/17229#discussion_r356333037,356333037,src/test/fuzz/base_encode_decode.cpp
practicalswift,2019-12-10 23:32:48,"I'm not sure that is the way to go: `\x00` is not whitespace :)\n\nWDYT: shouldn't `DecodeBase58(const std::string& str, ‚Ä¶)` return `false` when passed a `str` which contains at least one character that is not any of the base58 characters (all alphanumeric characters except for ""0"", ""I"", ""O"", and ""l"") or the whitespace characters?\n\n",https://github.com/bitcoin/bitcoin/pull/17229#discussion_r356335012,356335012,src/test/fuzz/base_encode_decode.cpp
practicalswift,2019-12-11 15:14:30,Now adjusted fuzz tested code to make the invariant more sane :),https://github.com/bitcoin/bitcoin/pull/17229#discussion_r356655646,356655646,src/test/fuzz/base_encode_decode.cpp
