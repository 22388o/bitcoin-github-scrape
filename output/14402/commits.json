[
  {
    "sha": "f864e415ff7aecf12a8e7f05a59a65037f2e906e",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmODY0ZTQxNWZmN2FlY2YxMmE4ZTdmMDVhNTlhNjUwMzdmMmU5MDZl",
    "commit": {
      "author": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2018-10-05T08:17:14Z"
      },
      "committer": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2018-10-05T08:17:14Z"
      },
      "message": "Fix crash in fundrawtransaction when using non-solvable scripts",
      "tree": {
        "sha": "90b9ab3b0032db8cd55a34fdef94547ce7410ccf",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/90b9ab3b0032db8cd55a34fdef94547ce7410ccf"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f864e415ff7aecf12a8e7f05a59a65037f2e906e",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEyhopCNzi8TB0xizeHrd2uwPHki0FAlu3HjEACgkQHrd2uwPH\nki0iug/8CulnUBSpP1Au/TG7Yl/+Alw++q+QObmuWRLEWWSQEinj+cxMzkB9hEzU\nKlsikSrQJUmG+h9Gruur5HhC2cDsofhjNNwipHpHtH4qScgtBKBfy/U6KmLOzAN1\nbAeV4BwlOQ348v+Ru0pKchgI/Mh0ZVDWelZ6fJUQkYQdaiw3zmuoqllFJC8UMKHl\n64LUG8kUAR5VRLVFVcMuxDZmiT8JkdTZ4C49kMSioWCi1ZH1kzmWF7rqeqQyFeuP\nvXrDsSId9l69bZXxNWWoju1+lMaS5fyQf97+ko/QuXWiygneKpY5W3uauyPegzE1\naHD/ucM19JoeRVpLur1mHkoCzNVhFXUHzIWtQbGCXMElVfzagLzjAp6Rqbqi+tdS\nIHW0RxK7K+xZXwQPjgDx2w1En3oC0rhJuCb6gcLMNpOjLmdlzTMz8jTIDK7Nk9dN\n40OKNbIboxa5xKwwbush10Y0/hrlJpaQWaKRdwUs+GWML2ejNKIOGLXxZw31/2wQ\n+BI03euXSDFfOmt2fZH+WiFLpIjCTB0PF+C9GDJJaFKUdnNiaiJu6GNeL9hEodb9\nXWwbKzEv3fT8VgBP8HRU5MUgKPZ4ZmhIt4TctR7tff3y9CO4cGcaR66tfrV7ywj3\n1uiOVlWgdBXeVK/u6MYjzpB1WTgVYc9BswyYYoTs3bsVSRyi6FE=\n=Gz7w\n-----END PGP SIGNATURE-----",
        "payload": "tree 90b9ab3b0032db8cd55a34fdef94547ce7410ccf\nparent 1e8f88e071019907785b260477bd359bef6f9a8f\nauthor Jonas Schnelli <dev@jonasschnelli.ch> 1538727434 +0200\ncommitter Jonas Schnelli <dev@jonasschnelli.ch> 1538727434 +0200\n\nFix crash in fundrawtransaction when using non-solvable scripts\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f864e415ff7aecf12a8e7f05a59a65037f2e906e",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/f864e415ff7aecf12a8e7f05a59a65037f2e906e",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f864e415ff7aecf12a8e7f05a59a65037f2e906e/comments",
    "author": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "1e8f88e071019907785b260477bd359bef6f9a8f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1e8f88e071019907785b260477bd359bef6f9a8f",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/1e8f88e071019907785b260477bd359bef6f9a8f"
      }
    ],
    "stats": {
      "total": 7,
      "additions": 6,
      "deletions": 1
    },
    "files": [
      {
        "sha": "4906dbffbb7ae107db3a3db32c6f5ba447736ed3",
        "filename": "src/wallet/wallet.cpp",
        "status": "modified",
        "additions": 6,
        "deletions": 1,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/f864e415ff7aecf12a8e7f05a59a65037f2e906e/src/wallet/wallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/f864e415ff7aecf12a8e7f05a59a65037f2e906e/src/wallet/wallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.cpp?ref=f864e415ff7aecf12a8e7f05a59a65037f2e906e",
        "patch": "@@ -2729,7 +2729,12 @@ bool CWallet::CreateTransaction(const std::vector<CRecipient>& vecSend, CTransac\n                 if (pick_new_inputs) {\n                     nValueIn = 0;\n                     setCoins.clear();\n-                    coin_selection_params.change_spend_size = CalculateMaximumSignedInputSize(change_prototype_txout, this);\n+                    int max_signed_input_size = CalculateMaximumSignedInputSize(change_prototype_txout, this);\n+                    if (max_signed_input_size < 0) {\n+                        strFailReason = _(\"Fee calculation failed\");\n+                        return false;\n+                    }\n+                    coin_selection_params.change_spend_size = max_signed_input_size;\n                     coin_selection_params.effective_fee = nFeeRateNeeded;\n                     if (!SelectCoins(vAvailableCoins, nValueToSelect, setCoins, nValueIn, coin_control, coin_selection_params, bnb_used))\n                     {"
      }
    ]
  }
]