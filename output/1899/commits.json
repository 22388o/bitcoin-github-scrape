[
  {
    "sha": "5e5c102f2f901a19fda6ff877ab4195a88e4b703",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo1ZTVjMTAyZjJmOTAxYTE5ZmRhNmZmODc3YWI0MTk1YTg4ZTRiNzAz",
    "commit": {
      "author": {
        "name": "Philip Kaufmann",
        "email": "phil.kaufmann@t-online.de",
        "date": "2012-10-02T11:30:44Z"
      },
      "committer": {
        "name": "Philip Kaufmann",
        "email": "phil.kaufmann@t-online.de",
        "date": "2012-10-07T15:59:41Z"
      },
      "message": "make optionsmodel query real proxy state for ::data()\n\n- don't rely on the QSettings for cases ProxyUse and ProxySocksVersion and\n  query the real values via the GetProxy() call\n- add a missing \"succesful =\" for case ProxyUse in ::setData()",
      "tree": {
        "sha": "f56cdcdaf86c81e67a5231b3fec7d556cbf201b4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f56cdcdaf86c81e67a5231b3fec7d556cbf201b4"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5e5c102f2f901a19fda6ff877ab4195a88e4b703",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5e5c102f2f901a19fda6ff877ab4195a88e4b703",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/5e5c102f2f901a19fda6ff877ab4195a88e4b703",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5e5c102f2f901a19fda6ff877ab4195a88e4b703/comments",
    "author": null,
    "committer": null,
    "parents": [
      {
        "sha": "43de64949c96b6d708b7d8a82c3dba0f6ddf059e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/43de64949c96b6d708b7d8a82c3dba0f6ddf059e",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/43de64949c96b6d708b7d8a82c3dba0f6ddf059e"
      }
    ],
    "stats": {
      "total": 17,
      "additions": 12,
      "deletions": 5
    },
    "files": [
      {
        "sha": "12dfd4b3c8bf613cf803e7f4888bfe147755cf75",
        "filename": "src/qt/optionsmodel.cpp",
        "status": "modified",
        "additions": 12,
        "deletions": 5,
        "changes": 17,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5e5c102f2f901a19fda6ff877ab4195a88e4b703/src/qt/optionsmodel.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5e5c102f2f901a19fda6ff877ab4195a88e4b703/src/qt/optionsmodel.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/optionsmodel.cpp?ref=5e5c102f2f901a19fda6ff877ab4195a88e4b703",
        "patch": "@@ -142,8 +142,10 @@ QVariant OptionsModel::data(const QModelIndex & index, int role) const\n             return settings.value(\"fUseUPnP\", GetBoolArg(\"-upnp\", true));\n         case MinimizeOnClose:\n             return QVariant(fMinimizeOnClose);\n-        case ProxyUse:\n-            return settings.value(\"fUseProxy\", false);\n+        case ProxyUse: {\n+            proxyType proxy;\n+            return QVariant(GetProxy(NET_IPV4, proxy));\n+        }\n         case ProxyIP: {\n             proxyType proxy;\n             if (GetProxy(NET_IPV4, proxy))\n@@ -158,8 +160,13 @@ QVariant OptionsModel::data(const QModelIndex & index, int role) const\n             else\n                 return QVariant(9050);\n         }\n-        case ProxySocksVersion:\n-            return settings.value(\"nSocksVersion\", 5);\n+        case ProxySocksVersion: {\n+            proxyType proxy;\n+            if (GetProxy(NET_IPV4, proxy))\n+                return QVariant(proxy.second);\n+            else\n+                return QVariant(5);\n+        }\n         case Fee:\n             return QVariant(nTransactionFee);\n         case DisplayUnit:\n@@ -203,7 +210,7 @@ bool OptionsModel::setData(const QModelIndex & index, const QVariant & value, in\n             break;\n         case ProxyUse:\n             settings.setValue(\"fUseProxy\", value.toBool());\n-            ApplyProxySettings();\n+            successful = ApplyProxySettings();\n             break;\n         case ProxyIP: {\n             proxyType proxy;"
      }
    ]
  }
]