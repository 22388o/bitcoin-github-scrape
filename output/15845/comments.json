[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/484636149",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#issuecomment-484636149",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15845",
    "id": 484636149,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NDYzNjE0OQ==",
    "user": {
      "login": "gmaxwell",
      "id": 858454,
      "node_id": "MDQ6VXNlcjg1ODQ1NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/858454?u=63e5c438c242094837a9deeda775d77988b508bf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gmaxwell",
      "html_url": "https://github.com/gmaxwell",
      "followers_url": "https://api.github.com/users/gmaxwell/followers",
      "following_url": "https://api.github.com/users/gmaxwell/following{/other_user}",
      "gists_url": "https://api.github.com/users/gmaxwell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
      "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
      "repos_url": "https://api.github.com/users/gmaxwell/repos",
      "events_url": "https://api.github.com/users/gmaxwell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-18T18:44:57Z",
    "updated_at": "2019-04-18T18:44:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "Concept ACK",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/484636149/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/484640077",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#issuecomment-484640077",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15845",
    "id": 484640077,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NDY0MDA3Nw==",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-18T18:53:46Z",
    "updated_at": "2019-04-18T18:53:46Z",
    "author_association": "MEMBER",
    "body": "Concept ACK",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/484640077/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/484642339",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#issuecomment-484642339",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15845",
    "id": 484642339,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NDY0MjMzOQ==",
    "user": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?u=eab5d0cdbb6cc25087cb61d4ca4a6f85255f42a7&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-18T18:58:49Z",
    "updated_at": "2019-04-18T18:58:49Z",
    "author_association": "CONTRIBUTOR",
    "body": "Nice! That was quick.\r\nConcept ACK",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/484642339/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/484672833",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#issuecomment-484672833",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15845",
    "id": 484672833,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NDY3MjgzMw==",
    "user": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?u=eab5d0cdbb6cc25087cb61d4ca4a6f85255f42a7&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-18T20:14:06Z",
    "updated_at": "2019-04-18T20:14:06Z",
    "author_association": "CONTRIBUTOR",
    "body": "Some rough benchmarks\r\n\r\n{\r\n  \"start_height\": 0,\r\n  \"stop_height\": 572152\r\n}\r\n\r\nreal\t4m23.596s\r\n\r\n\r\nA simple wallet,... filtered out roughly 2900 blocks and scanned them.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/484672833/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/485027756",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#issuecomment-485027756",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15845",
    "id": 485027756,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NTAyNzc1Ng==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-19T22:20:20Z",
    "updated_at": "2019-11-07T04:50:05Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#17384](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/17384.html) (test: Create new test library by MarcoFalke)\n* [#16528](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/16528.html) ([WIP] Native Descriptor Wallets (take 2) by achow101)\n* [#16442](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/16442.html) (Serve BIP 157 compact filters by jimpo)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.<!--2502f1a698b3751726fa55edcda76cd3-->\n\n### Coverage\n\n| Coverage  | Change ([pull 15845](https://drahtbot.github.io/reports/coverage/bitcoin/bitcoin/15845/total.coverage/index.html), 77e593bc79216175fa4c2fd05278bf1b7e4c7146) | Reference ([master](https://drahtbot.github.io/reports/coverage/bitcoin/bitcoin/master/total.coverage/index.html), 56376f336548b53cf31e98a58dfb4db22cede6e5)   |\n|-----------|-------------------------|--------------------|\n| Lines     | +0.0064 %            | 87.5552 %        |\n| Functions | -0.0143 %            | 84.6451 %        |\n| Branches  | +0.0017 %            | 51.5534 %        |\n\n<sup>Updated at: 2019-04-19T22:20:19.826705.</sup>\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/485027756/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/485151790",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#issuecomment-485151790",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15845",
    "id": 485151790,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NTE1MTc5MA==",
    "user": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-20T19:06:54Z",
    "updated_at": "2019-04-20T19:06:54Z",
    "author_association": "MEMBER",
    "body": "@jimpo  \r\n\r\n> Why is the default keypool size so large?\r\n\r\nIIRC this makes it much less likely typical usage will hit a case when an encrypted wallet runs out of viable keys and starts to miss funds during a sync(since it currently doesn't pause a sync and ask the user for password).",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/485151790/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/485151846",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#issuecomment-485151846",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15845",
    "id": 485151846,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NTE1MTg0Ng==",
    "user": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-20T19:07:19Z",
    "updated_at": "2019-04-20T19:07:19Z",
    "author_association": "MEMBER",
    "body": "and the obligatory concept ACK!",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/485151846/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/485160938",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#issuecomment-485160938",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15845",
    "id": 485160938,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NTE2MDkzOA==",
    "user": {
      "login": "gmaxwell",
      "id": 858454,
      "node_id": "MDQ6VXNlcjg1ODQ1NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/858454?u=63e5c438c242094837a9deeda775d77988b508bf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gmaxwell",
      "html_url": "https://github.com/gmaxwell",
      "followers_url": "https://api.github.com/users/gmaxwell/followers",
      "following_url": "https://api.github.com/users/gmaxwell/following{/other_user}",
      "gists_url": "https://api.github.com/users/gmaxwell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
      "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
      "repos_url": "https://api.github.com/users/gmaxwell/repos",
      "events_url": "https://api.github.com/users/gmaxwell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-20T20:00:30Z",
    "updated_at": "2019-04-20T20:00:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Why is the default keypool size so large?\r\n\r\nIt isn't. It's small... the whole concept of 'gap' scanning is fairly broken and easily results in funds loss... e.g. when a user hands out multiple addresses to people who haven't used them yet.  The brokenness can be largely addressed by setting the lookahead pretty far.\r\n\r\nIn some prelim testing this appears to be slower than just rescanning the block files directly with a specialized parser. :(",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/485160938/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/485166805",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#issuecomment-485166805",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15845",
    "id": 485166805,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NTE2NjgwNQ==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-20T20:36:16Z",
    "updated_at": "2019-04-20T20:36:16Z",
    "author_association": "MEMBER",
    "body": "@gmaxwell What specialized parser are you comparing to? Does it include the time to match all outputs/inputs to a set of 6000 sPKs?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/485166805/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/485167872",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#issuecomment-485167872",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15845",
    "id": 485167872,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NTE2Nzg3Mg==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-20T20:42:21Z",
    "updated_at": "2019-04-20T20:42:53Z",
    "author_association": "MEMBER",
    "body": "@jimpo 2 keypools (external and change), each 1000 keys, each key 3 sPKs (p2pkh, p2sh-p2wpkh, native p2wpkh), so I expect 6000 entries to match against.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/485167872/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/491539541",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#issuecomment-491539541",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15845",
    "id": 491539541,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MTUzOTU0MQ==",
    "user": {
      "login": "gmaxwell",
      "id": 858454,
      "node_id": "MDQ6VXNlcjg1ODQ1NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/858454?u=63e5c438c242094837a9deeda775d77988b508bf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gmaxwell",
      "html_url": "https://github.com/gmaxwell",
      "followers_url": "https://api.github.com/users/gmaxwell/followers",
      "following_url": "https://api.github.com/users/gmaxwell/following{/other_user}",
      "gists_url": "https://api.github.com/users/gmaxwell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
      "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
      "repos_url": "https://api.github.com/users/gmaxwell/repos",
      "events_url": "https://api.github.com/users/gmaxwell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-05-11T19:56:09Z",
    "updated_at": "2019-05-11T19:56:09Z",
    "author_association": "CONTRIBUTOR",
    "body": "@gmaxwell  modified copy of the old scanner from bitcoin talk, doesn't check the inputs.   I think the main issue is that rehashing all addresses for each block sequentially is pegging a single core and limiting the speed.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/491539541/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/511130840",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#issuecomment-511130840",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15845",
    "id": 511130840,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMTEzMDg0MA==",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-13T15:31:17Z",
    "updated_at": "2019-07-13T15:31:17Z",
    "author_association": "MEMBER",
    "body": "Concept ACK. @achow101 how much does this get in the way of #16341?\r\n\r\n`scantxoutset` could be a more light-touch place to try this. ",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/511130840/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/511136177",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#issuecomment-511136177",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15845",
    "id": 511136177,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMTEzNjE3Nw==",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?u=9791e96cd4268d48e3517bac41eaf2b1d09759fd&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-13T16:39:35Z",
    "updated_at": "2019-07-13T16:39:35Z",
    "author_association": "MEMBER",
    "body": "> Concept ACK. @achow101 how much does this get in the way of #16341?\r\n\r\nI don't think it really will. The only wallet change looks to be easily portable to the SPKManager model.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/511136177/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/518701691",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#issuecomment-518701691",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15845",
    "id": 518701691,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxODcwMTY5MQ==",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-06T14:46:15Z",
    "updated_at": "2019-08-06T14:46:15Z",
    "author_association": "MEMBER",
    "body": "I'm unable to compile on macOS:\r\n\r\n```\r\ninterfaces/chain.cpp:258:48: error: constexpr variable 'NO_FILTER' must be initialized by a constant expression\r\n        constexpr static std::pair<bool, bool> NO_FILTER{/* exists */ false, /* matches */ true};\r\n                                               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\ninterfaces/chain.cpp:258:48: note: non-constexpr constructor 'pair<bool, bool, false>' cannot be used in a constant expression\r\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1/utility:446:5: note: declared here\r\n    pair(_U1&& __u1, _U2&& __u2)\r\n    ^\r\n1 error generated.\r\nmake[2]: *** [interfaces/libbitcoin_server_a-chain.o] Error 1\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/518701691/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/518766547",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#issuecomment-518766547",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15845",
    "id": 518766547,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxODc2NjU0Nw==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-06T17:27:48Z",
    "updated_at": "2019-08-06T17:27:48Z",
    "author_association": "MEMBER",
    "body": "I have pulled out the test changes to #16465, so you might want to review that first.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/518766547/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/534618388",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#issuecomment-534618388",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15845",
    "id": 534618388,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzNDYxODM4OA==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-09-24T15:41:40Z",
    "updated_at": "2019-09-24T15:41:40Z",
    "author_association": "MEMBER",
    "body": "I wrote some more dev doc and unit tests, but they require #16956, so please review that first.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/534618388/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/536085544",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#issuecomment-536085544",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15845",
    "id": 536085544,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzNjA4NTU0NA==",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-09-27T20:27:58Z",
    "updated_at": "2019-09-27T21:02:06Z",
    "author_association": "MEMBER",
    "body": "Can you make the log mention that it's using the filters? I rescanned a mainnet wallet from genesis. On a 2019 MacBook Pro running macOS 10.14.6, configured without debug, using QT:\r\n* before: 38 minutes\r\n* after: 8 minutes 20 seconds\r\n\r\nIn case you want to tweak the progress bar, it seems a bit pessimistic in the beginning:\r\n```\r\n2019-09-27T19:36:19Z [TestRescan] Rescan started from block 000000000019d6689c085ae165831e934ff763ae46a2a6c172b3f1b60a8ce26f...\r\n2019-09-27T19:37:19Z [TestRescan] Still rescanning. At block 103799. Progress=0.000526\r\n2019-09-27T19:38:19Z [TestRescan] Still rescanning. At block 186382. Progress=0.009899\r\n2019-09-27T19:39:19Z [TestRescan] Still rescanning. At block 276838. Progress=0.065700\r\n2019-09-27T19:40:19Z [TestRescan] Still rescanning. At block 356644. Progress=0.151432\r\n2019-09-27T19:41:19Z [TestRescan] Still rescanning. At block 421003. Progress=0.314152\r\n2019-09-27T19:42:19Z [TestRescan] Still rescanning. At block 476729. Progress=0.529299\r\n2019-09-27T19:43:19Z [TestRescan] Still rescanning. At block 529573. Progress=0.714625\r\n2019-09-27T19:44:19Z [TestRescan] Still rescanning. At block 579080. Progress=0.919178\r\n2019-09-27T19:44:40Z [TestRescan] Rescan completed in          500403ms\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/536085544/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/541211630",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#issuecomment-541211630",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15845",
    "id": 541211630,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0MTIxMTYzMA==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-10-11T20:24:48Z",
    "updated_at": "2019-10-11T20:24:48Z",
    "author_association": "MEMBER",
    "body": "Thanks, force pushed to add logging",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/541211630/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/549827788",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#issuecomment-549827788",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15845",
    "id": 549827788,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0OTgyNzc4OA==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-05T13:43:25Z",
    "updated_at": "2019-11-05T13:43:25Z",
    "author_association": "MEMBER",
    "body": "Thanks for the review @mzumsande , @luke-jr , @jkczyz . Addressed all your feedback in the latest push",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/549827788/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/550450154",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#issuecomment-550450154",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15845",
    "id": 550450154,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MDQ1MDE1NA==",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-06T18:53:45Z",
    "updated_at": "2019-11-06T18:53:45Z",
    "author_association": "MEMBER",
    "body": "I think as well as fixing the bug here: https://github.com/bitcoin/bitcoin/pull/15845#discussion_r343265997, it'd be useful to add a test that would catch cases like this, where a rescan exhausts the keypool.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/550450154/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/551102346",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#issuecomment-551102346",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15845",
    "id": 551102346,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MTEwMjM0Ng==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-07T14:28:10Z",
    "updated_at": "2019-11-07T14:28:10Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/551102346/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/625572805",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#issuecomment-625572805",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15845",
    "id": 625572805,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyNTU3MjgwNQ==",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-08T01:04:02Z",
    "updated_at": "2020-05-08T01:04:02Z",
    "author_association": "MEMBER",
    "body": "@MarcoFalke - do you mind documenting the problems with this approach, so people who find this PR in future know why you closed it?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/625572805/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/625768563",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#issuecomment-625768563",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15845",
    "id": 625768563,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyNTc2ODU2Mw==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-08T11:20:02Z",
    "updated_at": "2020-05-08T11:20:02Z",
    "author_association": "MEMBER",
    "body": "I don't think there are any problems with this approach, once [this](https://github.com/bitcoin/bitcoin/pull/15845#discussion_r343265997) and [this](https://github.com/bitcoin/bitcoin/pull/15845#discussion_r344843159) is addressed.\r\n\r\nAs pointed out [here](https://github.com/bitcoin/bitcoin/pull/15845#discussion_r346321905) multisig should work just fine, but I haven't had the time or interest to look into this, so I closed it.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/625768563/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/276791064",
    "pull_request_review_id": 228451408,
    "id": 276791064,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI3Njc5MTA2NA==",
    "diff_hunk": "@@ -1748,6 +1748,21 @@ int64_t CWallet::RescanFromTime(int64_t startTime, const WalletRescanReserver& r\n     return startTime;\n }\n \n+GCSFilter::ElementSet CWallet::GetScriptPubKeysForBlockFilter()\n+{\n+    GCSFilter::ElementSet ret;\n+    for (const auto& i : CBasicKeyStore::GetAllWatchedScriptPubKeys()) {\n+        ret.emplace(i.begin(), i.end());",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 8,
    "commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "original_commit_id": "ffff46a547fc03dec3157e56a5953f4b3a8e9937",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This will miss P2PKH outputs I think.",
    "created_at": "2019-04-18T18:53:17Z",
    "updated_at": "2019-11-05T13:40:40Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r276791064",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/276791064"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r276791064"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/276791064/reactions",
      "total_count": 2,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1755,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/276791373",
    "pull_request_review_id": 228451798,
    "id": 276791373,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI3Njc5MTM3Mw==",
    "diff_hunk": "@@ -1748,6 +1748,21 @@ int64_t CWallet::RescanFromTime(int64_t startTime, const WalletRescanReserver& r\n     return startTime;\n }\n \n+GCSFilter::ElementSet CWallet::GetScriptPubKeysForBlockFilter()\n+{\n+    GCSFilter::ElementSet ret;\n+    for (const auto& i : CBasicKeyStore::GetAllWatchedScriptPubKeys()) {\n+        ret.emplace(i.begin(), i.end());\n+    }\n+    for (const auto& bs : CBasicKeyStore::GetAllBareScripts()) {",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 10,
    "commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "original_commit_id": "ffff46a547fc03dec3157e56a5953f4b3a8e9937",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Just because we know about a script does not imply we're watching it I believe.",
    "created_at": "2019-04-18T18:54:04Z",
    "updated_at": "2019-11-05T13:40:40Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r276791373",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/276791373"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r276791373"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/276791373/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1757,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/276792123",
    "pull_request_review_id": 228452738,
    "id": 276792123,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI3Njc5MjEyMw==",
    "diff_hunk": "@@ -1748,6 +1748,21 @@ int64_t CWallet::RescanFromTime(int64_t startTime, const WalletRescanReserver& r\n     return startTime;\n }\n \n+GCSFilter::ElementSet CWallet::GetScriptPubKeysForBlockFilter()\n+{\n+    GCSFilter::ElementSet ret;\n+    for (const auto& i : CBasicKeyStore::GetAllWatchedScriptPubKeys()) {\n+        ret.emplace(i.begin(), i.end());\n+    }\n+    for (const auto& bs : CBasicKeyStore::GetAllBareScripts()) {",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 10,
    "commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "original_commit_id": "ffff46a547fc03dec3157e56a5953f4b3a8e9937",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Sure, but I'd rather err on the safe side of scanning a block too much than missing a block (and thus lose coins)",
    "created_at": "2019-04-18T18:56:01Z",
    "updated_at": "2019-11-05T13:40:40Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r276792123",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/276792123"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r276792123"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/276792123/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1757,
    "side": "RIGHT",
    "in_reply_to_id": 276791373
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/276793224",
    "pull_request_review_id": 228454101,
    "id": 276793224,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI3Njc5MzIyNA==",
    "diff_hunk": "@@ -1748,6 +1748,21 @@ int64_t CWallet::RescanFromTime(int64_t startTime, const WalletRescanReserver& r\n     return startTime;\n }\n \n+GCSFilter::ElementSet CWallet::GetScriptPubKeysForBlockFilter()\n+{\n+    GCSFilter::ElementSet ret;\n+    for (const auto& i : CBasicKeyStore::GetAllWatchedScriptPubKeys()) {\n+        ret.emplace(i.begin(), i.end());",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 8,
    "commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "original_commit_id": "ffff46a547fc03dec3157e56a5953f4b3a8e9937",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Could you please elaborate in which code path we import a P2PKH address or a public key without adding it to `setWatchOnly`?",
    "created_at": "2019-04-18T18:58:56Z",
    "updated_at": "2019-11-05T13:40:40Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r276793224",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/276793224"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r276793224"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/276793224/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1755,
    "side": "RIGHT",
    "in_reply_to_id": 276791064
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/277109313",
    "pull_request_review_id": 228848610,
    "id": 277109313,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI3NzEwOTMxMw==",
    "diff_hunk": "@@ -1806,6 +1820,8 @@ CWallet::ScanResult CWallet::ScanForWalletTransactions(const uint256& start_bloc\n                 WalletLogPrintf(\"Still rescanning. At block %d. Progress=%f\\n\", *block_height, progress_current);\n             }\n \n+            if (chain().filterMatchesAny(block_hash, filter_set)) {",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 43,
    "commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "original_commit_id": "2a884d347eec442e81ce0b9fde7b728caed9d6da",
    "user": {
      "login": "jimpo",
      "id": 881253,
      "node_id": "MDQ6VXNlcjg4MTI1Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jimpo",
      "html_url": "https://github.com/jimpo",
      "followers_url": "https://api.github.com/users/jimpo/followers",
      "following_url": "https://api.github.com/users/jimpo/following{/other_user}",
      "gists_url": "https://api.github.com/users/jimpo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jimpo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
      "organizations_url": "https://api.github.com/users/jimpo/orgs",
      "repos_url": "https://api.github.com/users/jimpo/repos",
      "events_url": "https://api.github.com/users/jimpo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jimpo/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "`result.last_scanned_block` and `result.last_scanned_height` should both be updated even if the filter doesn't match.",
    "created_at": "2019-04-19T23:03:45Z",
    "updated_at": "2019-11-05T13:40:40Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r277109313",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/277109313"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r277109313"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/277109313/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1823,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/277110073",
    "pull_request_review_id": 228848610,
    "id": 277110073,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI3NzExMDA3Mw==",
    "diff_hunk": "@@ -268,10 +268,13 @@ class ChainImpl : public Chain\n     {\n         const BlockFilterIndex* block_filter_index = GetBlockFilterIndex(BlockFilterType::BASIC);\n         if (!block_filter_index) return true;\n-        const CBlockIndex* index = LookupBlockIndex(hash);\n-        if (!index) return true;\n         BlockFilter filter;\n-        if (!block_filter_index->LookupFilter(index, filter)) return true;\n+        {\n+            LOCK(cs_main);\n+            const CBlockIndex* index = LookupBlockIndex(hash);\n+            if (!index) return true;\n+            if (!block_filter_index->LookupFilter(index, filter)) return true;",
    "path": "src/interfaces/chain.cpp",
    "position": null,
    "original_position": 12,
    "commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "original_commit_id": "106e7c9ab68301c80870a5166d4f5cfb27287679",
    "user": {
      "login": "jimpo",
      "id": 881253,
      "node_id": "MDQ6VXNlcjg4MTI1Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jimpo",
      "html_url": "https://github.com/jimpo",
      "followers_url": "https://api.github.com/users/jimpo/followers",
      "following_url": "https://api.github.com/users/jimpo/following{/other_user}",
      "gists_url": "https://api.github.com/users/jimpo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jimpo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
      "organizations_url": "https://api.github.com/users/jimpo/orgs",
      "repos_url": "https://api.github.com/users/jimpo/repos",
      "events_url": "https://api.github.com/users/jimpo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jimpo/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "You don't need the lock for the filter lookup, just the block index lookup.",
    "created_at": "2019-04-19T23:10:14Z",
    "updated_at": "2019-11-05T13:40:40Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r277110073",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/277110073"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r277110073"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/277110073/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 276,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/277110229",
    "pull_request_review_id": 228848610,
    "id": 277110229,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI3NzExMDIyOQ==",
    "diff_hunk": "@@ -263,6 +264,19 @@ class ChainImpl : public Chain\n         return std::move(result);\n     }\n     std::unique_ptr<Chain::Lock> assumeLocked() override { return MakeUnique<LockImpl>(); }\n+    bool filterMatchesAny(const uint256& hash, const GCSFilter::ElementSet& filter_set) override",
    "path": "src/interfaces/chain.cpp",
    "position": null,
    "original_position": 12,
    "commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "original_commit_id": "106e7c9ab68301c80870a5166d4f5cfb27287679",
    "user": {
      "login": "jimpo",
      "id": 881253,
      "node_id": "MDQ6VXNlcjg4MTI1Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jimpo",
      "html_url": "https://github.com/jimpo",
      "followers_url": "https://api.github.com/users/jimpo/followers",
      "following_url": "https://api.github.com/users/jimpo/following{/other_user}",
      "gists_url": "https://api.github.com/users/jimpo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jimpo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
      "organizations_url": "https://api.github.com/users/jimpo/orgs",
      "repos_url": "https://api.github.com/users/jimpo/repos",
      "events_url": "https://api.github.com/users/jimpo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jimpo/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Maybe make the BlockFilterType a parameter here?",
    "created_at": "2019-04-19T23:11:46Z",
    "updated_at": "2019-11-05T13:40:40Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r277110229",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/277110229"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r277110229"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/277110229/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 267,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/277110327",
    "pull_request_review_id": 228848610,
    "id": 277110327,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI3NzExMDMyNw==",
    "diff_hunk": "@@ -677,6 +678,9 @@ class CWallet final : public CCryptoKeyStore, private interfaces::Chain::Notific\n      * Should be called with non-zero block_hash and posInBlock if this is for a transaction that is included in a block. */\n     void SyncTransaction(const CTransactionRef& tx, const uint256& block_hash, int posInBlock = 0, bool update_tx = true) EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n \n+    /** Return all scriptPubKeys to be used in a BIP 157 block filter */",
    "path": "src/wallet/wallet.h",
    "position": null,
    "original_position": 12,
    "commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "original_commit_id": "106e7c9ab68301c80870a5166d4f5cfb27287679",
    "user": {
      "login": "jimpo",
      "id": 881253,
      "node_id": "MDQ6VXNlcjg4MTI1Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jimpo",
      "html_url": "https://github.com/jimpo",
      "followers_url": "https://api.github.com/users/jimpo/followers",
      "following_url": "https://api.github.com/users/jimpo/following{/other_user}",
      "gists_url": "https://api.github.com/users/jimpo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jimpo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
      "organizations_url": "https://api.github.com/users/jimpo/orgs",
      "repos_url": "https://api.github.com/users/jimpo/repos",
      "events_url": "https://api.github.com/users/jimpo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jimpo/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I'd note in the comment that it's a basic (type) block filter (in cases an other types are added).",
    "created_at": "2019-04-19T23:12:47Z",
    "updated_at": "2019-11-05T13:40:40Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r277110327",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/277110327"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r277110327"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/277110327/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 681,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/277111477",
    "pull_request_review_id": 228848610,
    "id": 277111477,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI3NzExMTQ3Nw==",
    "diff_hunk": "@@ -986,9 +986,6 @@ bool AppInitParameterInteraction()\n     if (gArgs.GetArg(\"-prune\", 0)) {\n         if (gArgs.GetBoolArg(\"-txindex\", DEFAULT_TXINDEX))\n             return InitError(_(\"Prune mode is incompatible with -txindex.\"));\n-        if (!g_enabled_filter_types.empty()) {",
    "path": "src/init.cpp",
    "position": null,
    "original_position": 4,
    "commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "original_commit_id": "106e7c9ab68301c80870a5166d4f5cfb27287679",
    "user": {
      "login": "jimpo",
      "id": 881253,
      "node_id": "MDQ6VXNlcjg4MTI1Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jimpo",
      "html_url": "https://github.com/jimpo",
      "followers_url": "https://api.github.com/users/jimpo/followers",
      "following_url": "https://api.github.com/users/jimpo/following{/other_user}",
      "gists_url": "https://api.github.com/users/jimpo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jimpo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
      "organizations_url": "https://api.github.com/users/jimpo/orgs",
      "repos_url": "https://api.github.com/users/jimpo/repos",
      "events_url": "https://api.github.com/users/jimpo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jimpo/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This is problematic for a few reasons.\r\n\r\n1) You can turn on the filter index and it will build in the background using the blocks on disk. This wouldn't work in pruned mode. It might be safe though to allow pruning if the block filter index tip is already within chain tip height - MIN_BLOCKS_TO_KEEP. But then we couldn't prune until the block filter index is in sync (it has its own sort of initial sync logic). Not prohibitively difficult though.\r\n2) There still needs to be logic to fetch blocks from the network if the filters match, which I don't see here. Doing that in a blocking way would probably still be quite slow, especially with the default keypool size as large as it is.",
    "created_at": "2019-04-19T23:24:23Z",
    "updated_at": "2019-11-05T13:40:40Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r277111477",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/277111477"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r277111477"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/277111477/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 967,
    "side": "LEFT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/277112226",
    "pull_request_review_id": 228852099,
    "id": 277112226,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI3NzExMjIyNg==",
    "diff_hunk": "@@ -1806,6 +1820,8 @@ CWallet::ScanResult CWallet::ScanForWalletTransactions(const uint256& start_bloc\n                 WalletLogPrintf(\"Still rescanning. At block %d. Progress=%f\\n\", *block_height, progress_current);\n             }\n \n+            if (chain().filterMatchesAny(block_hash, filter_set)) {",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 43,
    "commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "original_commit_id": "2a884d347eec442e81ce0b9fde7b728caed9d6da",
    "user": {
      "login": "jimpo",
      "id": 881253,
      "node_id": "MDQ6VXNlcjg4MTI1Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jimpo",
      "html_url": "https://github.com/jimpo",
      "followers_url": "https://api.github.com/users/jimpo/followers",
      "following_url": "https://api.github.com/users/jimpo/following{/other_user}",
      "gists_url": "https://api.github.com/users/jimpo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jimpo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
      "organizations_url": "https://api.github.com/users/jimpo/orgs",
      "repos_url": "https://api.github.com/users/jimpo/repos",
      "events_url": "https://api.github.com/users/jimpo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jimpo/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Oh, there's another optimization possible, which is to not call `filterMatchesAny` if the filter index doesn't exist or doesn't contain any entry for any of the previously queried block hashes. If `filterMatchesAny` indicates whether the filter was found in addition to whether it matches, it would be pretty easy to check this.",
    "created_at": "2019-04-19T23:31:28Z",
    "updated_at": "2019-11-05T13:40:40Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r277112226",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/277112226"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r277112226"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/277112226/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1823,
    "side": "RIGHT",
    "in_reply_to_id": 277109313
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/277298317",
    "pull_request_review_id": 229072200,
    "id": 277298317,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI3NzI5ODMxNw==",
    "diff_hunk": "@@ -268,10 +268,13 @@ class ChainImpl : public Chain\n     {\n         const BlockFilterIndex* block_filter_index = GetBlockFilterIndex(BlockFilterType::BASIC);\n         if (!block_filter_index) return true;\n-        const CBlockIndex* index = LookupBlockIndex(hash);\n-        if (!index) return true;\n         BlockFilter filter;\n-        if (!block_filter_index->LookupFilter(index, filter)) return true;\n+        {\n+            LOCK(cs_main);\n+            const CBlockIndex* index = LookupBlockIndex(hash);\n+            if (!index) return true;\n+            if (!block_filter_index->LookupFilter(index, filter)) return true;",
    "path": "src/interfaces/chain.cpp",
    "position": null,
    "original_position": 12,
    "commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "original_commit_id": "106e7c9ab68301c80870a5166d4f5cfb27287679",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "CBlockIndex::nDataPos is protected by cs_main, but we never read that in LookupFilter, so yeah, don't need the lock",
    "created_at": "2019-04-22T14:00:01Z",
    "updated_at": "2019-11-05T13:40:40Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r277298317",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/277298317"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r277298317"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/277298317/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 276,
    "side": "RIGHT",
    "in_reply_to_id": 277110073
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/277298459",
    "pull_request_review_id": 229072386,
    "id": 277298459,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI3NzI5ODQ1OQ==",
    "diff_hunk": "@@ -1806,6 +1820,8 @@ CWallet::ScanResult CWallet::ScanForWalletTransactions(const uint256& start_bloc\n                 WalletLogPrintf(\"Still rescanning. At block %d. Progress=%f\\n\", *block_height, progress_current);\n             }\n \n+            if (chain().filterMatchesAny(block_hash, filter_set)) {",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 43,
    "commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "original_commit_id": "2a884d347eec442e81ce0b9fde7b728caed9d6da",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Indeed, last_scanned_height is reported by rpc as the stop_height, so should be updated.",
    "created_at": "2019-04-22T14:00:31Z",
    "updated_at": "2019-11-05T13:40:40Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r277298459",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/277298459"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r277298459"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/277298459/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1823,
    "side": "RIGHT",
    "in_reply_to_id": 277109313
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/277298780",
    "pull_request_review_id": 229072727,
    "id": 277298780,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI3NzI5ODc4MA==",
    "diff_hunk": "@@ -263,6 +264,19 @@ class ChainImpl : public Chain\n         return std::move(result);\n     }\n     std::unique_ptr<Chain::Lock> assumeLocked() override { return MakeUnique<LockImpl>(); }\n+    bool filterMatchesAny(const uint256& hash, const GCSFilter::ElementSet& filter_set) override",
    "path": "src/interfaces/chain.cpp",
    "position": null,
    "original_position": 12,
    "commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "original_commit_id": "106e7c9ab68301c80870a5166d4f5cfb27287679",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Will there ever be a filter different from the basic filter?",
    "created_at": "2019-04-22T14:01:27Z",
    "updated_at": "2019-11-05T13:40:40Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r277298780",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/277298780"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r277298780"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/277298780/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 267,
    "side": "RIGHT",
    "in_reply_to_id": 277110229
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/277299161",
    "pull_request_review_id": 229073229,
    "id": 277299161,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI3NzI5OTE2MQ==",
    "diff_hunk": "@@ -677,6 +678,9 @@ class CWallet final : public CCryptoKeyStore, private interfaces::Chain::Notific\n      * Should be called with non-zero block_hash and posInBlock if this is for a transaction that is included in a block. */\n     void SyncTransaction(const CTransactionRef& tx, const uint256& block_hash, int posInBlock = 0, bool update_tx = true) EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n \n+    /** Return all scriptPubKeys to be used in a BIP 157 block filter */",
    "path": "src/wallet/wallet.h",
    "position": null,
    "original_position": 12,
    "commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "original_commit_id": "106e7c9ab68301c80870a5166d4f5cfb27287679",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Mentioned \"basic\"",
    "created_at": "2019-04-22T14:02:47Z",
    "updated_at": "2019-11-05T13:40:40Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r277299161",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/277299161"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r277299161"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/277299161/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 681,
    "side": "RIGHT",
    "in_reply_to_id": 277110327
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/277299318",
    "pull_request_review_id": 229073407,
    "id": 277299318,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI3NzI5OTMxOA==",
    "diff_hunk": "@@ -986,9 +986,6 @@ bool AppInitParameterInteraction()\n     if (gArgs.GetArg(\"-prune\", 0)) {\n         if (gArgs.GetBoolArg(\"-txindex\", DEFAULT_TXINDEX))\n             return InitError(_(\"Prune mode is incompatible with -txindex.\"));\n-        if (!g_enabled_filter_types.empty()) {",
    "path": "src/init.cpp",
    "position": null,
    "original_position": 4,
    "commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "original_commit_id": "106e7c9ab68301c80870a5166d4f5cfb27287679",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Hmm, right",
    "created_at": "2019-04-22T14:03:13Z",
    "updated_at": "2019-11-05T13:40:40Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r277299318",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/277299318"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r277299318"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/277299318/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 967,
    "side": "LEFT",
    "in_reply_to_id": 277111477
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/328105296",
    "pull_request_review_id": 293054033,
    "id": 328105296,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMyODEwNTI5Ng==",
    "diff_hunk": "@@ -1748,6 +1748,21 @@ int64_t CWallet::RescanFromTime(int64_t startTime, const WalletRescanReserver& r\n     return startTime;\n }\n \n+GCSFilter::ElementSet CWallet::GetScriptPubKeysForBlockFilter()\n+{\n+    GCSFilter::ElementSet ret;\n+    for (const auto& i : CBasicKeyStore::GetAllWatchedScriptPubKeys()) {\n+        ret.emplace(i.begin(), i.end());",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 8,
    "commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "original_commit_id": "ffff46a547fc03dec3157e56a5953f4b3a8e9937",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I was wrong. Fixed.",
    "created_at": "2019-09-25T12:56:59Z",
    "updated_at": "2019-11-05T13:40:40Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r328105296",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/328105296"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r328105296"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/328105296/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1755,
    "side": "RIGHT",
    "in_reply_to_id": 276791064
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341883162",
    "pull_request_review_id": 310852164,
    "id": 341883162,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MTg4MzE2Mg==",
    "diff_hunk": "@@ -55,6 +55,23 @@ CTxIn generatetoaddress(const std::string& address)\n CTxIn MineBlock(const CScript& coinbase_scriptPubKey)\n {\n     auto block = PrepareBlock(coinbase_scriptPubKey);\n+    return *MineBlock(block);\n+}\n+\n+int GetWitnessCommitmentIndex(const CBlock& block);",
    "path": "src/test/util.cpp",
    "position": null,
    "original_position": 7,
    "commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "original_commit_id": "faff768d67d98183ac3cc3f54826486a99947295",
    "user": {
      "login": "mzumsande",
      "id": 48763452,
      "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
      "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mzumsande",
      "html_url": "https://github.com/mzumsande",
      "followers_url": "https://api.github.com/users/mzumsande/followers",
      "following_url": "https://api.github.com/users/mzumsande/following{/other_user}",
      "gists_url": "https://api.github.com/users/mzumsande/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
      "organizations_url": "https://api.github.com/users/mzumsande/orgs",
      "repos_url": "https://api.github.com/users/mzumsande/repos",
      "events_url": "https://api.github.com/users/mzumsande/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mzumsande/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This gives me a \"redundant redeclaration\" compiler warning.",
    "created_at": "2019-11-04T00:29:32Z",
    "updated_at": "2019-11-05T13:40:40Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r341883162",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341883162"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r341883162"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341883162/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 63,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341883239",
    "pull_request_review_id": 310852164,
    "id": 341883239,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MTg4MzIzOQ==",
    "diff_hunk": "@@ -0,0 +1,214 @@\n+// Copyright (c) 2019 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <rpc/rawtransaction_util.h>\n+#include <test/lib/blockfilter.h>\n+#include <test/setup_common.h>\n+#include <test/util.h>\n+#include <univalue.h>\n+#include <validation.h>\n+#include <wallet/wallet.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+\n+void SignTx(const CWallet& keystore, CMutableTransaction& mtx)\n+{\n+    // Fetch previous transactions (inputs):\n+    std::map<COutPoint, Coin> coins;\n+    for (const CTxIn& txin : mtx.vin) {\n+        coins[txin.prevout]; // Create empty map entry keyed by prevout.\n+    }\n+    keystore.chain().findCoins(coins);\n+\n+    // sign tx\n+    SignTransaction(mtx, /**/ &keystore, coins, UniValue{});\n+}\n+\n+BOOST_FIXTURE_TEST_SUITE(wallet_blockfilter_tests, RegTestingSetup)\n+\n+BOOST_AUTO_TEST_CASE(element_set_matches)\n+{\n+    LogInstance().m_print_to_console = 1; // DEBUG TODO",
    "path": "src/wallet/test/wallet_blockfilter_tests.cpp",
    "position": null,
    "original_position": 33,
    "commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "original_commit_id": "faff768d67d98183ac3cc3f54826486a99947295",
    "user": {
      "login": "mzumsande",
      "id": 48763452,
      "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
      "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mzumsande",
      "html_url": "https://github.com/mzumsande",
      "followers_url": "https://api.github.com/users/mzumsande/followers",
      "following_url": "https://api.github.com/users/mzumsande/following{/other_user}",
      "gists_url": "https://api.github.com/users/mzumsande/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
      "organizations_url": "https://api.github.com/users/mzumsande/orgs",
      "repos_url": "https://api.github.com/users/mzumsande/repos",
      "events_url": "https://api.github.com/users/mzumsande/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mzumsande/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "just a reminder to remove at some point",
    "created_at": "2019-11-04T00:30:53Z",
    "updated_at": "2019-11-05T13:40:40Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r341883239",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341883239"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r341883239"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/341883239/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 33,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342038112",
    "pull_request_review_id": 311053726,
    "id": 342038112,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MjAzODExMg==",
    "diff_hunk": "@@ -129,6 +130,12 @@ class Chain\n     //! unlocked when the returned interface is freed.\n     virtual std::unique_ptr<Lock> lock(bool try_lock = false) = 0;\n \n+    //! Returns a pair:\n+    //!  * first : whether the block filter for this block could be found.\n+    //!  * second: whether any of the elements match the block via a BIP 157\n+    //!            block filter.\n+    virtual std::pair<bool, bool> filterMatchesAny(const uint256& hash, const GCSFilter::ElementSet& filter_set) = 0;",
    "path": "src/interfaces/chain.h",
    "position": null,
    "original_position": 16,
    "commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "original_commit_id": "faff768d67d98183ac3cc3f54826486a99947295",
    "user": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "`Optional<bool>` might make more sense?",
    "created_at": "2019-11-04T13:04:42Z",
    "updated_at": "2019-11-05T13:40:40Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r342038112",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342038112"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r342038112"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342038112/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 137,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342039361",
    "pull_request_review_id": 311055349,
    "id": 342039361,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MjAzOTM2MQ==",
    "diff_hunk": "@@ -2054,11 +2079,22 @@ CWallet::ScanResult CWallet::ScanForWalletTransactions(const uint256& start_bloc\n         }\n         if (GetTime() >= nNow + 60) {\n             nNow = GetTime();\n-            WalletLogPrintf(\"Still rescanning. At block %d. Progress=%f\\n\", *block_height, progress_current);\n+            const std::string using_blockfilters{filter_result.first /* exists */ ? \" via blockfilters\" : \"\"};\n+            WalletLogPrintf(\"Still rescanning%s. At block %d. Progress=%f\\n\",\n+                using_blockfilters, *block_height, progress_current);\n         }\n \n+        // Only query the filter index if it exists\n+        if (filter_result.first /* exists */) filter_result = chain().filterMatchesAny(block_hash, filter_set);\n+\n         CBlock block;\n-        if (chain().findBlock(block_hash, &block) && !block.IsNull()) {\n+        if (!filter_result.second /* matches */) {",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 65,
    "commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "original_commit_id": "faff768d67d98183ac3cc3f54826486a99947295",
    "user": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This doesn't check `filter_result.first`",
    "created_at": "2019-11-04T13:07:55Z",
    "updated_at": "2019-11-05T13:40:40Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r342039361",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342039361"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r342039361"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342039361/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1618,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342328744",
    "pull_request_review_id": 311434350,
    "id": 342328744,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MjMyODc0NA==",
    "diff_hunk": "@@ -57,6 +57,23 @@ CTxIn generatetoaddress(const std::string& address)\n CTxIn MineBlock(const CScript& coinbase_scriptPubKey)\n {\n     auto block = PrepareBlock(coinbase_scriptPubKey);\n+    return *MineBlock(block);\n+}\n+\n+int GetWitnessCommitmentIndex(const CBlock& block);\n+\n+Optional<CTxIn> MineBlock(std::shared_ptr<CBlock>& block)",
    "path": "src/test/util.cpp",
    "position": 7,
    "original_position": 9,
    "commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "original_commit_id": "04e729eef2a0e8be6816181a0255d4f89b957ce0",
    "user": {
      "login": "jkczyz",
      "id": 4015903,
      "node_id": "MDQ6VXNlcjQwMTU5MDM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4015903?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jkczyz",
      "html_url": "https://github.com/jkczyz",
      "followers_url": "https://api.github.com/users/jkczyz/followers",
      "following_url": "https://api.github.com/users/jkczyz/following{/other_user}",
      "gists_url": "https://api.github.com/users/jkczyz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jkczyz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jkczyz/subscriptions",
      "organizations_url": "https://api.github.com/users/jkczyz/orgs",
      "repos_url": "https://api.github.com/users/jkczyz/repos",
      "events_url": "https://api.github.com/users/jkczyz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jkczyz/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Is `Optional` needed? This function always returns a block.",
    "created_at": "2019-11-04T23:59:24Z",
    "updated_at": "2019-11-05T13:40:40Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r342328744",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342328744"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r342328744"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342328744/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 63,
    "original_line": 63,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342328887",
    "pull_request_review_id": 311434350,
    "id": 342328887,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MjMyODg4Nw==",
    "diff_hunk": "@@ -57,6 +57,23 @@ CTxIn generatetoaddress(const std::string& address)\n CTxIn MineBlock(const CScript& coinbase_scriptPubKey)\n {\n     auto block = PrepareBlock(coinbase_scriptPubKey);\n+    return *MineBlock(block);\n+}\n+\n+int GetWitnessCommitmentIndex(const CBlock& block);\n+\n+Optional<CTxIn> MineBlock(std::shared_ptr<CBlock>& block)\n+{\n+    const auto idx = GetWitnessCommitmentIndex(*block);\n+    if (idx != -1) {\n+        // Refresh, just in case",
    "path": "src/test/util.cpp",
    "position": null,
    "original_position": 13,
    "commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "original_commit_id": "04e729eef2a0e8be6816181a0255d4f89b957ce0",
    "user": {
      "login": "jkczyz",
      "id": 4015903,
      "node_id": "MDQ6VXNlcjQwMTU5MDM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4015903?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jkczyz",
      "html_url": "https://github.com/jkczyz",
      "followers_url": "https://api.github.com/users/jkczyz/followers",
      "following_url": "https://api.github.com/users/jkczyz/following{/other_user}",
      "gists_url": "https://api.github.com/users/jkczyz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jkczyz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jkczyz/subscriptions",
      "organizations_url": "https://api.github.com/users/jkczyz/orgs",
      "repos_url": "https://api.github.com/users/jkczyz/repos",
      "events_url": "https://api.github.com/users/jkczyz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jkczyz/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Could you clarify this comment a bit. In case what?",
    "created_at": "2019-11-04T23:59:56Z",
    "updated_at": "2019-11-05T13:40:40Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r342328887",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342328887"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r342328887"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342328887/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 67,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342329664",
    "pull_request_review_id": 311434350,
    "id": 342329664,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MjMyOTY2NA==",
    "diff_hunk": "@@ -57,6 +57,23 @@ CTxIn generatetoaddress(const std::string& address)\n CTxIn MineBlock(const CScript& coinbase_scriptPubKey)\n {\n     auto block = PrepareBlock(coinbase_scriptPubKey);\n+    return *MineBlock(block);\n+}\n+\n+int GetWitnessCommitmentIndex(const CBlock& block);\n+\n+Optional<CTxIn> MineBlock(std::shared_ptr<CBlock>& block)\n+{\n+    const auto idx = GetWitnessCommitmentIndex(*block);\n+    if (idx != -1) {\n+        // Refresh, just in case\n+        CMutableTransaction tx_cb{*block->vtx[0]};\n+        tx_cb.vout.erase(tx_cb.vout.begin() + idx);\n+        block->vtx[0] = MakeTransactionRef(std::move(tx_cb));\n+        LOCK(cs_main);\n+        GenerateCoinbaseCommitment(*block, ChainActive().Tip()->pprev, Params().GetConsensus());\n+    }\n+    block->hashMerkleRoot = BlockMerkleRoot(*block);",
    "path": "src/test/util.cpp",
    "position": null,
    "original_position": 20,
    "commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "original_commit_id": "04e729eef2a0e8be6816181a0255d4f89b957ce0",
    "user": {
      "login": "jkczyz",
      "id": 4015903,
      "node_id": "MDQ6VXNlcjQwMTU5MDM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4015903?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jkczyz",
      "html_url": "https://github.com/jkczyz",
      "followers_url": "https://api.github.com/users/jkczyz/followers",
      "following_url": "https://api.github.com/users/jkczyz/following{/other_user}",
      "gists_url": "https://api.github.com/users/jkczyz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jkczyz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jkczyz/subscriptions",
      "organizations_url": "https://api.github.com/users/jkczyz/orgs",
      "repos_url": "https://api.github.com/users/jkczyz/repos",
      "events_url": "https://api.github.com/users/jkczyz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jkczyz/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Could you update the commit message to explain this change?",
    "created_at": "2019-11-05T00:03:10Z",
    "updated_at": "2019-11-05T13:40:40Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r342329664",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342329664"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r342329664"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342329664/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": 67,
    "start_side": "RIGHT",
    "line": null,
    "original_line": 75,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342330912",
    "pull_request_review_id": 311434350,
    "id": 342330912,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MjMzMDkxMg==",
    "diff_hunk": "@@ -15,7 +15,7 @@\n  * blocks by height. An index is constructed for each supported filter type with its own database\n  * (ie. filter data for different types are stored in separate databases).\n  *\n- * This index is used to serve BIP 157 net requests.\n+ * This index can be used to serve BIP 157 net requests or a more efficient wallet rescan.",
    "path": "src/index/blockfilterindex.h",
    "position": null,
    "original_position": 5,
    "commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "original_commit_id": "2499fd09a5a23e42bc3f2593b0d1c003fa7a6372",
    "user": {
      "login": "jkczyz",
      "id": 4015903,
      "node_id": "MDQ6VXNlcjQwMTU5MDM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4015903?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jkczyz",
      "html_url": "https://github.com/jkczyz",
      "followers_url": "https://api.github.com/users/jkczyz/followers",
      "following_url": "https://api.github.com/users/jkczyz/following{/other_user}",
      "gists_url": "https://api.github.com/users/jkczyz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jkczyz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jkczyz/subscriptions",
      "organizations_url": "https://api.github.com/users/jkczyz/orgs",
      "repos_url": "https://api.github.com/users/jkczyz/repos",
      "events_url": "https://api.github.com/users/jkczyz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jkczyz/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "grammar nit: s/or a more efficient/or for a more efficient",
    "created_at": "2019-11-05T00:08:27Z",
    "updated_at": "2019-11-05T13:40:40Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r342330912",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342330912"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r342330912"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342330912/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 18,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342355120",
    "pull_request_review_id": 311434350,
    "id": 342355120,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MjM1NTEyMA==",
    "diff_hunk": "@@ -129,6 +130,12 @@ class Chain\n     //! unlocked when the returned interface is freed.\n     virtual std::unique_ptr<Lock> lock(bool try_lock = false) = 0;\n \n+    //! Returns a pair:\n+    //!  * first : whether the block filter for this block could be found.\n+    //!  * second: whether any of the elements match the block via a BIP 157\n+    //!            block filter.\n+    virtual std::pair<bool, bool> filterMatchesAny(const uint256& hash, const GCSFilter::ElementSet& filter_set) = 0;",
    "path": "src/interfaces/chain.h",
    "position": null,
    "original_position": 16,
    "commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "original_commit_id": "8edf3c6e2155e37740a7c2ec36e40600d8c4d19c",
    "user": {
      "login": "jkczyz",
      "id": 4015903,
      "node_id": "MDQ6VXNlcjQwMTU5MDM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4015903?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jkczyz",
      "html_url": "https://github.com/jkczyz",
      "followers_url": "https://api.github.com/users/jkczyz/followers",
      "following_url": "https://api.github.com/users/jkczyz/following{/other_user}",
      "gists_url": "https://api.github.com/users/jkczyz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jkczyz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jkczyz/subscriptions",
      "organizations_url": "https://api.github.com/users/jkczyz/orgs",
      "repos_url": "https://api.github.com/users/jkczyz/repos",
      "events_url": "https://api.github.com/users/jkczyz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jkczyz/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This is quite a complicated interface which asks a lot from the caller. This is an indication that the calling code should be refactored to use better abstractions.\r\n\r\nFor instance, a `BlockScanner` abstraction could be used to return blocks and whose implementation may vary depending on whether block filters exist. The logic around filters could be encapsulated there rather than having the details exposed in the wallet. I think this would benefit long-term code health.",
    "created_at": "2019-11-05T02:05:06Z",
    "updated_at": "2019-11-05T13:40:40Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r342355120",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342355120"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r342355120"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342355120/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 137,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342552448",
    "pull_request_review_id": 311719166,
    "id": 342552448,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MjU1MjQ0OA==",
    "diff_hunk": "@@ -55,6 +55,23 @@ CTxIn generatetoaddress(const std::string& address)\n CTxIn MineBlock(const CScript& coinbase_scriptPubKey)\n {\n     auto block = PrepareBlock(coinbase_scriptPubKey);\n+    return *MineBlock(block);\n+}\n+\n+int GetWitnessCommitmentIndex(const CBlock& block);",
    "path": "src/test/util.cpp",
    "position": null,
    "original_position": 7,
    "commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "original_commit_id": "faff768d67d98183ac3cc3f54826486a99947295",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Thanks. Not sure how that got there. Removed",
    "created_at": "2019-11-05T13:08:51Z",
    "updated_at": "2019-11-05T13:40:40Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r342552448",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342552448"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r342552448"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342552448/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 63,
    "side": "RIGHT",
    "in_reply_to_id": 341883162
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342552519",
    "pull_request_review_id": 311719263,
    "id": 342552519,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MjU1MjUxOQ==",
    "diff_hunk": "@@ -0,0 +1,214 @@\n+// Copyright (c) 2019 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <rpc/rawtransaction_util.h>\n+#include <test/lib/blockfilter.h>\n+#include <test/setup_common.h>\n+#include <test/util.h>\n+#include <univalue.h>\n+#include <validation.h>\n+#include <wallet/wallet.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+\n+void SignTx(const CWallet& keystore, CMutableTransaction& mtx)\n+{\n+    // Fetch previous transactions (inputs):\n+    std::map<COutPoint, Coin> coins;\n+    for (const CTxIn& txin : mtx.vin) {\n+        coins[txin.prevout]; // Create empty map entry keyed by prevout.\n+    }\n+    keystore.chain().findCoins(coins);\n+\n+    // sign tx\n+    SignTransaction(mtx, /**/ &keystore, coins, UniValue{});\n+}\n+\n+BOOST_FIXTURE_TEST_SUITE(wallet_blockfilter_tests, RegTestingSetup)\n+\n+BOOST_AUTO_TEST_CASE(element_set_matches)\n+{\n+    LogInstance().m_print_to_console = 1; // DEBUG TODO",
    "path": "src/wallet/test/wallet_blockfilter_tests.cpp",
    "position": null,
    "original_position": 33,
    "commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "original_commit_id": "faff768d67d98183ac3cc3f54826486a99947295",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Removed",
    "created_at": "2019-11-05T13:09:03Z",
    "updated_at": "2019-11-05T13:40:40Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r342552519",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342552519"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r342552519"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342552519/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 33,
    "side": "RIGHT",
    "in_reply_to_id": 341883239
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342557326",
    "pull_request_review_id": 311725321,
    "id": 342557326,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MjU1NzMyNg==",
    "diff_hunk": "@@ -57,6 +57,23 @@ CTxIn generatetoaddress(const std::string& address)\n CTxIn MineBlock(const CScript& coinbase_scriptPubKey)\n {\n     auto block = PrepareBlock(coinbase_scriptPubKey);\n+    return *MineBlock(block);\n+}\n+\n+int GetWitnessCommitmentIndex(const CBlock& block);\n+\n+Optional<CTxIn> MineBlock(std::shared_ptr<CBlock>& block)",
    "path": "src/test/util.cpp",
    "position": 7,
    "original_position": 9,
    "commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "original_commit_id": "04e729eef2a0e8be6816181a0255d4f89b957ce0",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Added docs",
    "created_at": "2019-11-05T13:19:28Z",
    "updated_at": "2019-11-05T13:40:40Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r342557326",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342557326"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r342557326"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342557326/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 63,
    "original_line": 63,
    "side": "RIGHT",
    "in_reply_to_id": 342328744
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342557421",
    "pull_request_review_id": 311725437,
    "id": 342557421,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MjU1NzQyMQ==",
    "diff_hunk": "@@ -57,6 +57,23 @@ CTxIn generatetoaddress(const std::string& address)\n CTxIn MineBlock(const CScript& coinbase_scriptPubKey)\n {\n     auto block = PrepareBlock(coinbase_scriptPubKey);\n+    return *MineBlock(block);\n+}\n+\n+int GetWitnessCommitmentIndex(const CBlock& block);\n+\n+Optional<CTxIn> MineBlock(std::shared_ptr<CBlock>& block)\n+{\n+    const auto idx = GetWitnessCommitmentIndex(*block);\n+    if (idx != -1) {\n+        // Refresh, just in case",
    "path": "src/test/util.cpp",
    "position": null,
    "original_position": 13,
    "commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "original_commit_id": "04e729eef2a0e8be6816181a0255d4f89b957ce0",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Added docs. Thx",
    "created_at": "2019-11-05T13:19:41Z",
    "updated_at": "2019-11-05T13:40:40Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r342557421",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342557421"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r342557421"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342557421/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 67,
    "side": "RIGHT",
    "in_reply_to_id": 342328887
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342557498",
    "pull_request_review_id": 311725531,
    "id": 342557498,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MjU1NzQ5OA==",
    "diff_hunk": "@@ -57,6 +57,23 @@ CTxIn generatetoaddress(const std::string& address)\n CTxIn MineBlock(const CScript& coinbase_scriptPubKey)\n {\n     auto block = PrepareBlock(coinbase_scriptPubKey);\n+    return *MineBlock(block);\n+}\n+\n+int GetWitnessCommitmentIndex(const CBlock& block);\n+\n+Optional<CTxIn> MineBlock(std::shared_ptr<CBlock>& block)\n+{\n+    const auto idx = GetWitnessCommitmentIndex(*block);\n+    if (idx != -1) {\n+        // Refresh, just in case\n+        CMutableTransaction tx_cb{*block->vtx[0]};\n+        tx_cb.vout.erase(tx_cb.vout.begin() + idx);\n+        block->vtx[0] = MakeTransactionRef(std::move(tx_cb));\n+        LOCK(cs_main);\n+        GenerateCoinbaseCommitment(*block, ChainActive().Tip()->pprev, Params().GetConsensus());\n+    }\n+    block->hashMerkleRoot = BlockMerkleRoot(*block);",
    "path": "src/test/util.cpp",
    "position": null,
    "original_position": 20,
    "commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "original_commit_id": "04e729eef2a0e8be6816181a0255d4f89b957ce0",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Added docs",
    "created_at": "2019-11-05T13:19:51Z",
    "updated_at": "2019-11-05T13:40:40Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r342557498",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342557498"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r342557498"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342557498/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": 67,
    "start_side": "RIGHT",
    "line": null,
    "original_line": 75,
    "side": "RIGHT",
    "in_reply_to_id": 342329664
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342567525",
    "pull_request_review_id": 311738852,
    "id": 342567525,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MjU2NzUyNQ==",
    "diff_hunk": "@@ -15,7 +15,7 @@\n  * blocks by height. An index is constructed for each supported filter type with its own database\n  * (ie. filter data for different types are stored in separate databases).\n  *\n- * This index is used to serve BIP 157 net requests.\n+ * This index can be used to serve BIP 157 net requests or a more efficient wallet rescan.",
    "path": "src/index/blockfilterindex.h",
    "position": null,
    "original_position": 5,
    "commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "original_commit_id": "2499fd09a5a23e42bc3f2593b0d1c003fa7a6372",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Reworded",
    "created_at": "2019-11-05T13:41:10Z",
    "updated_at": "2019-11-05T13:41:11Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r342567525",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342567525"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r342567525"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342567525/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 18,
    "side": "RIGHT",
    "in_reply_to_id": 342330912
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342567768",
    "pull_request_review_id": 311739170,
    "id": 342567768,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MjU2Nzc2OA==",
    "diff_hunk": "@@ -129,6 +130,12 @@ class Chain\n     //! unlocked when the returned interface is freed.\n     virtual std::unique_ptr<Lock> lock(bool try_lock = false) = 0;\n \n+    //! Returns a pair:\n+    //!  * first : whether the block filter for this block could be found.\n+    //!  * second: whether any of the elements match the block via a BIP 157\n+    //!            block filter.\n+    virtual std::pair<bool, bool> filterMatchesAny(const uint256& hash, const GCSFilter::ElementSet& filter_set) = 0;",
    "path": "src/interfaces/chain.h",
    "position": null,
    "original_position": 16,
    "commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "original_commit_id": "faff768d67d98183ac3cc3f54826486a99947295",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Thanks, switched to `Optional<>`",
    "created_at": "2019-11-05T13:41:39Z",
    "updated_at": "2019-11-05T13:41:40Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r342567768",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342567768"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r342567768"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342567768/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 137,
    "side": "RIGHT",
    "in_reply_to_id": 342038112
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342567849",
    "pull_request_review_id": 311739286,
    "id": 342567849,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MjU2Nzg0OQ==",
    "diff_hunk": "@@ -2054,11 +2079,22 @@ CWallet::ScanResult CWallet::ScanForWalletTransactions(const uint256& start_bloc\n         }\n         if (GetTime() >= nNow + 60) {\n             nNow = GetTime();\n-            WalletLogPrintf(\"Still rescanning. At block %d. Progress=%f\\n\", *block_height, progress_current);\n+            const std::string using_blockfilters{filter_result.first /* exists */ ? \" via blockfilters\" : \"\"};\n+            WalletLogPrintf(\"Still rescanning%s. At block %d. Progress=%f\\n\",\n+                using_blockfilters, *block_height, progress_current);\n         }\n \n+        // Only query the filter index if it exists\n+        if (filter_result.first /* exists */) filter_result = chain().filterMatchesAny(block_hash, filter_set);\n+\n         CBlock block;\n-        if (chain().findBlock(block_hash, &block) && !block.IsNull()) {\n+        if (!filter_result.second /* matches */) {",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 65,
    "commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "original_commit_id": "faff768d67d98183ac3cc3f54826486a99947295",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "fixed",
    "created_at": "2019-11-05T13:41:49Z",
    "updated_at": "2019-11-05T13:41:49Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r342567849",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342567849"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r342567849"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342567849/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1618,
    "side": "RIGHT",
    "in_reply_to_id": 342039361
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342568179",
    "pull_request_review_id": 311739759,
    "id": 342568179,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MjU2ODE3OQ==",
    "diff_hunk": "@@ -129,6 +130,12 @@ class Chain\n     //! unlocked when the returned interface is freed.\n     virtual std::unique_ptr<Lock> lock(bool try_lock = false) = 0;\n \n+    //! Returns a pair:\n+    //!  * first : whether the block filter for this block could be found.\n+    //!  * second: whether any of the elements match the block via a BIP 157\n+    //!            block filter.\n+    virtual std::pair<bool, bool> filterMatchesAny(const uint256& hash, const GCSFilter::ElementSet& filter_set) = 0;",
    "path": "src/interfaces/chain.h",
    "position": null,
    "original_position": 16,
    "commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "original_commit_id": "8edf3c6e2155e37740a7c2ec36e40600d8c4d19c",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I think this can be done as a follow-up",
    "created_at": "2019-11-05T13:42:31Z",
    "updated_at": "2019-11-05T13:42:32Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r342568179",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342568179"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r342568179"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342568179/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 137,
    "side": "RIGHT",
    "in_reply_to_id": 342355120
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343201200",
    "pull_request_review_id": 312576716,
    "id": 343201200,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MzIwMTIwMA==",
    "diff_hunk": "@@ -57,6 +57,23 @@ CTxIn generatetoaddress(const std::string& address)\n CTxIn MineBlock(const CScript& coinbase_scriptPubKey)\n {\n     auto block = PrepareBlock(coinbase_scriptPubKey);\n+    return *MineBlock(block);\n+}\n+\n+int GetWitnessCommitmentIndex(const CBlock& block);\n+\n+Optional<CTxIn> MineBlock(std::shared_ptr<CBlock>& block)",
    "path": "src/test/util.cpp",
    "position": 7,
    "original_position": 9,
    "commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "original_commit_id": "04e729eef2a0e8be6816181a0255d4f89b957ce0",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Which docs? I still don't understand why you're using an optional here. The TODO implies that you plan to implement something in a later PR. Can you just return a `CTxIn` until then?",
    "created_at": "2019-11-06T16:37:14Z",
    "updated_at": "2019-11-06T18:51:07Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r343201200",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343201200"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r343201200"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343201200/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 63,
    "original_line": 63,
    "side": "RIGHT",
    "in_reply_to_id": 342328744
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343201892",
    "pull_request_review_id": 312576716,
    "id": 343201892,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MzIwMTg5Mg==",
    "diff_hunk": "@@ -19,8 +21,10 @@ extern const std::string ADDRESS_BCRT1_UNSPENDABLE;\n \n // Lower-level utils //\n \n-/** Returns the generated coin */\n+/** Returns the generated coin (output at index 0 in the coinbase tx) */\n CTxIn MineBlock(const CScript& coinbase_scriptPubKey);\n+/** Returns the generated coins (output at index 0 in the coinbase tx), or nothing if the block was invalid */",
    "path": "src/test/util.h",
    "position": 16,
    "original_position": 16,
    "commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "original_commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "s/coins/coin/\r\n\r\nI also don't like the (mis)use of the word coin here, which is generally understood to mean a utxo. These functions return a CTxIn that points to the first coinbase output.",
    "created_at": "2019-11-06T16:38:22Z",
    "updated_at": "2019-11-06T18:51:07Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r343201892",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343201892"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r343201892"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343201892/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 26,
    "original_line": 26,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343230189",
    "pull_request_review_id": 312615430,
    "id": 343230189,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MzIzMDE4OQ==",
    "diff_hunk": "@@ -248,6 +249,20 @@ class ChainImpl : public Chain\n         // LockImpl to Lock pointer\n         return std::move(result);\n     }\n+    Optional<bool> filterMatchesAny(const uint256& hash, const GCSFilter::ElementSet& filter_set) override\n+    {\n+        const BlockFilterIndex* block_filter_index = GetBlockFilterIndex(BlockFilterType::BASIC);\n+        if (!block_filter_index) return {};\n+        BlockFilter filter;\n+        const CBlockIndex* index;",
    "path": "src/interfaces/chain.cpp",
    "position": 17,
    "original_position": 17,
    "commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "original_commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "user": {
      "login": "Talkless",
      "id": 292191,
      "node_id": "MDQ6VXNlcjI5MjE5MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/292191?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Talkless",
      "html_url": "https://github.com/Talkless",
      "followers_url": "https://api.github.com/users/Talkless/followers",
      "following_url": "https://api.github.com/users/Talkless/following{/other_user}",
      "gists_url": "https://api.github.com/users/Talkless/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Talkless/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Talkless/subscriptions",
      "organizations_url": "https://api.github.com/users/Talkless/orgs",
      "repos_url": "https://api.github.com/users/Talkless/repos",
      "events_url": "https://api.github.com/users/Talkless/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Talkless/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This could lock even smaller block of code:\r\n```\r\n        {\r\n            LOCK(cs_main);\r\n            index = LookupBlockIndex(hash);\r\n        }\r\n        if (!index) return {};\r\n```\r\n\r\nOr maybe you would care to use `ES.28: Use lambdas for complex initialization, especially of const variables` guideline (note `const` for `index` pointer itself):\r\n```\r\nconst CBlockIndex* const index = [&]{ \r\n    LOCK(cs_main);\r\n    return LookupBlockIndex(hash);\r\n}();\r\nif (!index) return {};\r\n```\r\n```",
    "created_at": "2019-11-06T17:32:41Z",
    "updated_at": "2019-11-06T17:40:58Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r343230189",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845",
    "author_association": "NONE",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343230189"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r343230189"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343230189/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 257,
    "original_line": 257,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343230849",
    "pull_request_review_id": 312615430,
    "id": 343230849,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MzIzMDg0OQ==",
    "diff_hunk": "@@ -248,6 +249,20 @@ class ChainImpl : public Chain\n         // LockImpl to Lock pointer\n         return std::move(result);\n     }\n+    Optional<bool> filterMatchesAny(const uint256& hash, const GCSFilter::ElementSet& filter_set) override\n+    {\n+        const BlockFilterIndex* block_filter_index = GetBlockFilterIndex(BlockFilterType::BASIC);",
    "path": "src/interfaces/chain.cpp",
    "position": 14,
    "original_position": 14,
    "commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "original_commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "user": {
      "login": "Talkless",
      "id": 292191,
      "node_id": "MDQ6VXNlcjI5MjE5MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/292191?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Talkless",
      "html_url": "https://github.com/Talkless",
      "followers_url": "https://api.github.com/users/Talkless/followers",
      "following_url": "https://api.github.com/users/Talkless/following{/other_user}",
      "gists_url": "https://api.github.com/users/Talkless/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Talkless/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Talkless/subscriptions",
      "organizations_url": "https://api.github.com/users/Talkless/orgs",
      "repos_url": "https://api.github.com/users/Talkless/repos",
      "events_url": "https://api.github.com/users/Talkless/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Talkless/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Looks like the pointer itself could be even const too: \r\nconst BlockFilterIndex* **const** block_filter_index = ...",
    "created_at": "2019-11-06T17:34:05Z",
    "updated_at": "2019-11-06T17:40:58Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r343230849",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845",
    "author_association": "NONE",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343230849"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r343230849"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343230849/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 254,
    "original_line": 254,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343265997",
    "pull_request_review_id": 312576716,
    "id": 343265997,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MzI2NTk5Nw==",
    "diff_hunk": "@@ -1574,14 +1574,14 @@ CWallet::ScanResult CWallet::ScanForWalletTransactions(const uint256& start_bloc\n {\n     int64_t nNow = GetTime();\n     int64_t start_time = GetTimeMillis();\n-\n     assert(reserver.isReserved());\n-\n-    uint256 block_hash = start_block;\n     ScanResult result;\n \n     WalletLogPrintf(\"Rescan started from block %s...\\n\", start_block.ToString());\n \n+    uint256 block_hash = start_block;\n+    const auto filter_set = GetLegacyScriptPubKeyMan()->GetAllRelevantScriptPubKeys();",
    "path": "src/wallet/wallet.cpp",
    "position": 13,
    "original_position": 13,
    "commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "original_commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Setting the filter_set outside the rescan loop means that this doesn't get updated when the keypool is topped up. That means that any payments to an address beyond the first 1000 will be missed on rescan.",
    "created_at": "2019-11-06T18:50:06Z",
    "updated_at": "2019-11-06T18:51:07Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r343265997",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343265997"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r343265997"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343265997/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1583,
    "original_line": 1583,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/344788060",
    "pull_request_review_id": 315000340,
    "id": 344788060,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NDc4ODA2MA==",
    "diff_hunk": "@@ -820,6 +820,31 @@ bool LegacyScriptPubKeyMan::GetPubKey(const CKeyID &address, CPubKey& vchPubKeyO\n     return GetWatchPubKey(address, vchPubKeyOut);\n }\n \n+GCSFilter::ElementSet LegacyScriptPubKeyMan::GetAllRelevantScriptPubKeys() const\n+{\n+    LOCK(cs_KeyStore);\n+    GCSFilter::ElementSet ret;\n+    for (const auto& k : mapKeys) {",
    "path": "src/wallet/scriptpubkeyman.cpp",
    "position": 8,
    "original_position": 8,
    "commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "original_commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "user": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "What about `mapCryptedKeys`? I don't think `mapKeys` is used on encrypted wallets?",
    "created_at": "2019-11-11T16:13:45Z",
    "updated_at": "2019-11-11T16:13:45Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r344788060",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/344788060"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r344788060"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/344788060/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 827,
    "original_line": 827,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/344843159",
    "pull_request_review_id": 315070888,
    "id": 344843159,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NDg0MzE1OQ==",
    "diff_hunk": "@@ -820,6 +820,31 @@ bool LegacyScriptPubKeyMan::GetPubKey(const CKeyID &address, CPubKey& vchPubKeyO\n     return GetWatchPubKey(address, vchPubKeyOut);\n }\n \n+GCSFilter::ElementSet LegacyScriptPubKeyMan::GetAllRelevantScriptPubKeys() const\n+{\n+    LOCK(cs_KeyStore);\n+    GCSFilter::ElementSet ret;\n+    for (const auto& k : mapKeys) {",
    "path": "src/wallet/scriptpubkeyman.cpp",
    "position": 8,
    "original_position": 8,
    "commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "original_commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "> What about `mapCryptedKeys`? I don't think `mapKeys` is used on encrypted wallets?\r\n\r\nYes, this should just loop over `mapCryptedKeys` as well. `mapKeys` should be empty in encryped wallets.",
    "created_at": "2019-11-11T18:18:05Z",
    "updated_at": "2019-11-11T18:18:05Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r344843159",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/344843159"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r344843159"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/344843159/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 827,
    "original_line": 827,
    "side": "RIGHT",
    "in_reply_to_id": 344788060
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/344994878",
    "pull_request_review_id": 315265859,
    "id": 344994878,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NDk5NDg3OA==",
    "diff_hunk": "@@ -820,6 +820,31 @@ bool LegacyScriptPubKeyMan::GetPubKey(const CKeyID &address, CPubKey& vchPubKeyO\n     return GetWatchPubKey(address, vchPubKeyOut);\n }\n \n+GCSFilter::ElementSet LegacyScriptPubKeyMan::GetAllRelevantScriptPubKeys() const\n+{\n+    LOCK(cs_KeyStore);\n+    GCSFilter::ElementSet ret;\n+    for (const auto& k : mapKeys) {",
    "path": "src/wallet/scriptpubkeyman.cpp",
    "position": 8,
    "original_position": 8,
    "commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "original_commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This function in general does not match everything that `IsMine` would match.In particular it doesn't enumerate all possible combinations of multisig policies with all combinations of pubkeys or all of the weird nested scripts that are possible. There probably needs to be a release note that if you have some weird and non-standard script stuff, the fast rescan won't see those things.",
    "created_at": "2019-11-12T02:38:56Z",
    "updated_at": "2019-11-12T02:38:56Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r344994878",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/344994878"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r344994878"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/344994878/reactions",
      "total_count": 3,
      "+1": 3,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 827,
    "original_line": 827,
    "side": "RIGHT",
    "in_reply_to_id": 344788060
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346270124",
    "pull_request_review_id": 316897708,
    "id": 346270124,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NjI3MDEyNA==",
    "diff_hunk": "@@ -820,6 +820,31 @@ bool LegacyScriptPubKeyMan::GetPubKey(const CKeyID &address, CPubKey& vchPubKeyO\n     return GetWatchPubKey(address, vchPubKeyOut);\n }\n \n+GCSFilter::ElementSet LegacyScriptPubKeyMan::GetAllRelevantScriptPubKeys() const\n+{\n+    LOCK(cs_KeyStore);\n+    GCSFilter::ElementSet ret;\n+    for (const auto& k : mapKeys) {",
    "path": "src/wallet/scriptpubkeyman.cpp",
    "position": 8,
    "original_position": 8,
    "commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "original_commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Such a warning makes sense; people with such wallets will presumably understand. And descriptor wallets won't have this problem.",
    "created_at": "2019-11-14T11:52:14Z",
    "updated_at": "2019-11-14T11:52:14Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r346270124",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346270124"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r346270124"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346270124/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 827,
    "original_line": 827,
    "side": "RIGHT",
    "in_reply_to_id": 344788060
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346321905",
    "pull_request_review_id": 316966197,
    "id": 346321905,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NjMyMTkwNQ==",
    "diff_hunk": "@@ -820,6 +820,31 @@ bool LegacyScriptPubKeyMan::GetPubKey(const CKeyID &address, CPubKey& vchPubKeyO\n     return GetWatchPubKey(address, vchPubKeyOut);\n }\n \n+GCSFilter::ElementSet LegacyScriptPubKeyMan::GetAllRelevantScriptPubKeys() const\n+{\n+    LOCK(cs_KeyStore);\n+    GCSFilter::ElementSet ret;\n+    for (const auto& k : mapKeys) {",
    "path": "src/wallet/scriptpubkeyman.cpp",
    "position": 8,
    "original_position": 8,
    "commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "original_commit_id": "faee7b6581ff5e9fa775e1e9cbe7491b60f0e73b",
    "user": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "`IsMine` itself won't test weird combinations. I don't see why fast rescan shouldn't be able to check for everything `IsMine` does... users shouldn't be exposed to internal implementation details like this.",
    "created_at": "2019-11-14T13:52:28Z",
    "updated_at": "2019-11-14T13:52:28Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r346321905",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346321905"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15845#discussion_r346321905"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15845"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/346321905/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 827,
    "original_line": 827,
    "side": "RIGHT",
    "in_reply_to_id": 344788060
  }
]