jonatack,2021-10-07 21:41:22,"This is the resulting log file with this pull. It is the same modulo no contention logging.\n\n<details><summary>log</summary><p>\n\n```\nRunning 1 test case...\n2021-10-07T21:34:20Z Seed: Setting random seed for current tests to RANDOM_CTX_SEED=af952f85f519906580f814500cbea272d0337c9f6a57e4565b1449a7191939cb\n2021-10-07T21:34:20.979238Z [test] [init/common.cpp:165] [LogPackageVersion] Bitc",https://github.com/bitcoin/bitcoin/pull/23223#issuecomment-938175991,938175991,
fanquake,2021-10-08 01:03:23,"> The addition of lock contention logging to the test suite\n\nYou've always been able to run with logging? #22736 & #22904 just changed the logging to be unconditional, rather than needing to compile with `-DDEBUG_LOCKCONTENTION`.\n\n> This alleviates #23167 until the test or code can be refactored, if possible and applicable, to reduce the number of contentions.\n\nConcept NACK. Wouldn't i",https://github.com/bitcoin/bitcoin/pull/23223#issuecomment-938258857,938258857,
JeremyRubin,2021-10-08 01:44:59,"the checkqueue tests are designed to be hevily contested, since we're hoping to trigger any race conditions or other issues, I don't think that if we're logging normal operation contentions we can really 'fix' the tests without making the tests less likely to uncover bugs.\n\nmaybe we can move checkqueue tests to fuzzing since it's a bit more fuzz like?",https://github.com/bitcoin/bitcoin/pull/23223#issuecomment-938273050,938273050,
jonatack,2021-10-08 05:44:54,"> the checkqueue tests are designed to be hevily contested\n\nRight, in which case it didn't make sense to log contentions in the checkqueue tests before, either. Logging contentions by default in the tests only revealed the issue, which was the goal.",https://github.com/bitcoin/bitcoin/pull/23223#issuecomment-938361580,938361580,
jonatack,2021-10-08 07:33:48,"Just finished running these steps:\n\n- git log 7e69873\n- git checkout bb9f76a7 (last commit before)\n- rebuild with `DEBUG_LOCKCONTENTION` (debian clang 13)\n- `./src/test/test_bitcoin -t checkqueue_tests/test_CheckQueue_Correct_Random -- DEBUG_LOG_OUT > out.txt`\n\nThey show that (for me) the issue was pre-existing.\n\n```\n-rw-r--r--  1 jon     5093 Oct  7 23:35 out-with-this-pull.tx",https://github.com/bitcoin/bitcoin/pull/23223#issuecomment-938414139,938414139,
jonatack,2021-10-08 11:10:48,"Added v22.0 to the results, and re-ran each result twice at the same CPU speed.\n\n![Screenshot from 2021-10-08 13-07-06](https://user-images.githubusercontent.com/2415484/136546492-b4ffe68d-d4b8-4a70-849d-ee74ec575756.png)\n",https://github.com/bitcoin/bitcoin/pull/23223#issuecomment-938556102,938556102,
jonatack,2021-10-08 11:43:52,Updated per @MarcoFalke's suggestion.,https://github.com/bitcoin/bitcoin/pull/23223#issuecomment-938575629,938575629,
MarcoFalke,2021-10-08 07:28:01,"if there is no other test using this, you can move it to the only translation unit that needs it",https://github.com/bitcoin/bitcoin/pull/23223#discussion_r724766422,724766422,src/test/util/setup_common.h
jonatack,2021-10-08 11:32:23,done,https://github.com/bitcoin/bitcoin/pull/23223#discussion_r724932300,724932300,src/test/util/setup_common.h
