[
  {
    "sha": "6ae9f1cf9604227e9dfda1f6c91fc711d154362e",
    "node_id": "C_kwDOABII59oAKDZhZTlmMWNmOTYwNDIyN2U5ZGZkYTFmNmM5MWZjNzExZDE1NDM2MmU",
    "commit": {
      "author": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2021-10-07T18:07:58Z"
      },
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2021-10-08T11:19:19Z"
      },
      "message": "Disable lock contention logging in checkqueue_tests\n\nas some of these tests are designed to be heavily contested to trigger race\nconditions or other issues. This created very large log files when run with\nDEBUG_LOCKCONTENTION defined (up to v22) or with lock logging enabled by default\nin current master.\n\nExamples running the following command:\n\n./src/test/test_bitcoin -t checkqueue_tests/test_CheckQueue_Correct_Random -- DEBUG_LOG_OUT > testlog.txt\n\n-rw-r--r--   87042178 Oct  8 12:41 testlog-with-DEBUG_LOCKCONTENTION-at-v22-run1.txt\n-rw-r--r--   73879896 Oct  8 12:42 testlog-with-DEBUG_LOCKCONTENTION-at-v22-run2.txt\n-rw-r--r--   65150518 Oct  8 12:51 testlog-with-DEBUG_LOCKCONTENTION-at-bb9f76a-run1.txt\n-rw-r--r--   65774554 Oct  8 12:52 testlog-with-DEBUG_LOCKCONTENTION-at-bb9f76a-run2.txt\n-rw-r--r--   73493309 Oct  8 13:00 testlog-current-master-at-991753e-run1.txt\n-rw-r--r--   65616977 Oct  8 13:01 testlog-current-master-at-991753e-run2.txt\n-rw-r--r--       5093 Oct  8 13:04 testlog-with-this-commit-run1.txt\n-rw-r--r--       5093 Oct  8 13:05 testlog-with-this-commit-run2.txt",
      "tree": {
        "sha": "b3e9aa6c5787b46e9b6ac9009ab85b76735daa03",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b3e9aa6c5787b46e9b6ac9009ab85b76735daa03"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6ae9f1cf9604227e9dfda1f6c91fc711d154362e",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEd6u7+MhX7zEv6RP5T1chs9Djkh0FAmFgK10ACgkQT1chs9Dj\nkh0tOhAApuqaQsVoVMFtB7s60Rgxft4bRc505DWaGT8TMiYdQej5/NJKb6JcgPSH\ntgidKkOXRJ5vUbGMEWuj9gIGTVvyKHKcEqgv72OF+21c/rineQJ4EOHHWy4/j8IX\nOX5mUNWL6PbWRJ/RSDfF//vGhs+8T8F+CSnsbk0Dsz+jGzAOlis9DdF9KV/NFSD0\nBCExBz8p/fqNQOTw6W7cQmsFNdVX7RjE5EU6E0eeZ2Dd9682gpHcnB5zNVIa0nlV\nhD02lvrjZU0ITE7uj54miVXVHnKJBGjBFaDShPS3uLn1wCrmwlmD4LQ2wJaSmwHN\nhrUA5Cf3XeCGFCFL9Edb8WJ91crTF1uJo8CEXVYB3iiDOgzdtOXKrG49kHYGl0ij\nWwiGj1gpVz3GW6OuX44YQhQTPZiWakvOfgay5Wbzq/reKIVpUdAM7E9hT+qSiWSi\naLX1jZ31X91DAk7EbBsgw5zQ/6eMYN98/jcy5gXgtt5BPxBkkJlixxppRNogjaY2\nQHkOvysGoN7h7QNTvJeJiQZRBKrKEqi3hBiWrnIqNbGvLIJC4Q9cENk9Tz+8uBGC\neK3MJnW05R9IBN6rwo9B1IfF67Q/yfrr6wfQHeudfLtaGZX4y1WUC1VIljjMl6nH\niztVYF9jQWUnpeHaHUkwyV0i+N+VOq1c3ohjjlbltKDhsRgz3G0=\n=Aht/\n-----END PGP SIGNATURE-----\n-----BEGIN OPENTIMESTAMPS GIT TIMESTAMP-----\n\nAQHwIISbGi/YFPUee2hD/6DDqs1PtUvNsZuo9hqTZDWVPxppCP/wEGnJqOETDSgJ\n9Tse/L/SWVEI8QRhYCtf8AgVnq8xgibW8wCD3+MNLvkMjiMiaHR0cHM6Ly9idGMu\nY2FsZW5kYXIuY2F0YWxsYXh5LmNvbf/wEJ1gDSP3SQCdxCN7WlHYzpQI8SCz79Au\nrBYF5r6c4SPgT/0Fx81YOuRUD+Rkw7gD/deDqAjxIDx3s1yTr6yrthpvUpqJ6S3I\nYFOQF7jaVMq/NbdGD7sBCPEEYWArX/AIR3k2dsck+qwAg9/jDS75DI4pKGh0dHBz\nOi8vZmlubmV5LmNhbGVuZGFyLmV0ZXJuaXR5d2FsbC5jb23wEP3zqRJJ6QgP24Bc\n83U6r8oI8QRhYCtf8AjhJ2fNhg3JtQCD3+MNLvkMjiwraHR0cHM6Ly9ib2IuYnRj\nLmNhbGVuZGFyLm9wZW50aW1lc3RhbXBzLm9yZw==\n-----END OPENTIMESTAMPS GIT TIMESTAMP-----",
        "payload": "tree b3e9aa6c5787b46e9b6ac9009ab85b76735daa03\nparent 991753e4d50ea5c973f4d3330e5afba797b1b1e7\nauthor Jon Atack <jon@atack.com> 1633630078 +0200\ncommitter Jon Atack <jon@atack.com> 1633691959 +0200\n\nDisable lock contention logging in checkqueue_tests\n\nas some of these tests are designed to be heavily contested to trigger race\nconditions or other issues. This created very large log files when run with\nDEBUG_LOCKCONTENTION defined (up to v22) or with lock logging enabled by default\nin current master.\n\nExamples running the following command:\n\n./src/test/test_bitcoin -t checkqueue_tests/test_CheckQueue_Correct_Random -- DEBUG_LOG_OUT > testlog.txt\n\n-rw-r--r--   87042178 Oct  8 12:41 testlog-with-DEBUG_LOCKCONTENTION-at-v22-run1.txt\n-rw-r--r--   73879896 Oct  8 12:42 testlog-with-DEBUG_LOCKCONTENTION-at-v22-run2.txt\n-rw-r--r--   65150518 Oct  8 12:51 testlog-with-DEBUG_LOCKCONTENTION-at-bb9f76a-run1.txt\n-rw-r--r--   65774554 Oct  8 12:52 testlog-with-DEBUG_LOCKCONTENTION-at-bb9f76a-run2.txt\n-rw-r--r--   73493309 Oct  8 13:00 testlog-current-master-at-991753e-run1.txt\n-rw-r--r--   65616977 Oct  8 13:01 testlog-current-master-at-991753e-run2.txt\n-rw-r--r--       5093 Oct  8 13:04 testlog-with-this-commit-run1.txt\n-rw-r--r--       5093 Oct  8 13:05 testlog-with-this-commit-run2.txt\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6ae9f1cf9604227e9dfda1f6c91fc711d154362e",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/6ae9f1cf9604227e9dfda1f6c91fc711d154362e",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6ae9f1cf9604227e9dfda1f6c91fc711d154362e/comments",
    "author": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "991753e4d50ea5c973f4d3330e5afba797b1b1e7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/991753e4d50ea5c973f4d3330e5afba797b1b1e7",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/991753e4d50ea5c973f4d3330e5afba797b1b1e7"
      }
    ],
    "stats": {
      "total": 12,
      "additions": 11,
      "deletions": 1
    },
    "files": [
      {
        "sha": "4d34407ca84d69b01342125bf7323edbcc11a250",
        "filename": "src/test/checkqueue_tests.cpp",
        "status": "modified",
        "additions": 11,
        "deletions": 1,
        "changes": 12,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6ae9f1cf9604227e9dfda1f6c91fc711d154362e/src/test/checkqueue_tests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6ae9f1cf9604227e9dfda1f6c91fc711d154362e/src/test/checkqueue_tests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/checkqueue_tests.cpp?ref=6ae9f1cf9604227e9dfda1f6c91fc711d154362e",
        "patch": "@@ -18,7 +18,17 @@\n #include <utility>\n #include <vector>\n \n-BOOST_FIXTURE_TEST_SUITE(checkqueue_tests, TestingSetup)\n+/**\n+ * Identical to TestingSetup but excludes lock contention logging, as some of\n+ * these tests are designed to be heavily contested to trigger race conditions\n+ * or other issues.\n+ */\n+struct NoLockLoggingTestingSetup : public TestingSetup {\n+    NoLockLoggingTestingSetup()\n+        : TestingSetup{CBaseChainParams::MAIN, /*extra_args=*/{\"-debugexclude=lock\"}} {}\n+};\n+\n+BOOST_FIXTURE_TEST_SUITE(checkqueue_tests, NoLockLoggingTestingSetup)\n \n static const unsigned int QUEUE_BATCH_SIZE = 128;\n static const int SCRIPT_CHECK_THREADS = 3;"
      }
    ]
  }
]