[
  {
    "sha": "3ea6a91f16c076e2774700c0364dfc1e7aca5b2a",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzozZWE2YTkxZjE2YzA3NmUyNzc0NzAwYzAzNjRkZmMxZTdhY2E1YjJh",
    "commit": {
      "author": {
        "name": "Ben Woosley",
        "email": "ben.woosley@gmail.com",
        "date": "2018-03-28T08:03:11Z"
      },
      "committer": {
        "name": "Ben Woosley",
        "email": "ben.woosley@gmail.com",
        "date": "2018-03-30T00:59:43Z"
      },
      "message": "Test ReadConfigFile",
      "tree": {
        "sha": "c7edafd8f86a013d2d55c0be4122dadecc78983d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c7edafd8f86a013d2d55c0be4122dadecc78983d"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3ea6a91f16c076e2774700c0364dfc1e7aca5b2a",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE+XLHXoy4Dim7e8hvTYykuhgECQYFAlq9i/8ACgkQTYykuhgE\nCQa5Kw/+PWy69xp/FBux13pNM9CSyFZymBKtjgylMFMQVAb2w6EW87MAOBRZ8PuP\nppwd0XQWSDmYAYxMt1X++mP4MNH9lG1hWF6Ml27kFtWjbPMKPNjvuuNki7xB9kng\nazddEquraL1RvYvmMe880PfOU+52Gn5fmylp88YBxWWMlo+9RxhPjPJIoVLL0hgB\njNJk9Ut6EGpfOecQZRUIfWJ5mxJQCzFx8flT5pjay7XiFDCiGzB+OeeTWahgO6bz\n1YAe/LVR54o82/N4cu1qsBsdTZZLx+3fFA+x8shiywTz6UZJHc4Bdo44lok8BmGs\n+49VHNgpXM+yxKauebnmMOoMGeV+70Z4O0cB0RdBKhkOiO/glpJH4+C4Hg3RRzZK\ntiD9Wp7hjgHmmw+wVn0uTSLYJ/2ijp9oip/CgDdGHDJ+h+6wsI3P+F6SXbDM/cDA\nMjsr2zaWuN8OuIZbLQdP76FKJ6MTZLFE1RckMDtrhFPDKIK5wi0kub7qUQ54oRwX\nNfXaybpL3fWYxfvCieJuIhf1WyqmzoVJ1p1bV1kgytlIr8yRtZuQ6gkxjPbz3cDS\npGA5HJERGNkt/kVs821GcxTfkoFixEeB8Q4gY4YSfTM61jBVaOZ5LEFeir1ebC2D\njPbqCXYFfwWEkoiqHmZGM/04dYaRB6HaBCTPYkrUzaR24OhIeT0=\n=OQJ/\n-----END PGP SIGNATURE-----",
        "payload": "tree c7edafd8f86a013d2d55c0be4122dadecc78983d\nparent 3b62a913865777426c11992bae622fb48aa72a40\nauthor Ben Woosley <ben.woosley@gmail.com> 1522224191 -0700\ncommitter Ben Woosley <ben.woosley@gmail.com> 1522371583 -0700\n\nTest ReadConfigFile\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3ea6a91f16c076e2774700c0364dfc1e7aca5b2a",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/3ea6a91f16c076e2774700c0364dfc1e7aca5b2a",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3ea6a91f16c076e2774700c0364dfc1e7aca5b2a/comments",
    "author": {
      "login": "Empact",
      "id": 5470,
      "node_id": "MDQ6VXNlcjU0NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Empact",
      "html_url": "https://github.com/Empact",
      "followers_url": "https://api.github.com/users/Empact/followers",
      "following_url": "https://api.github.com/users/Empact/following{/other_user}",
      "gists_url": "https://api.github.com/users/Empact/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Empact/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
      "organizations_url": "https://api.github.com/users/Empact/orgs",
      "repos_url": "https://api.github.com/users/Empact/repos",
      "events_url": "https://api.github.com/users/Empact/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Empact/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "Empact",
      "id": 5470,
      "node_id": "MDQ6VXNlcjU0NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Empact",
      "html_url": "https://github.com/Empact",
      "followers_url": "https://api.github.com/users/Empact/followers",
      "following_url": "https://api.github.com/users/Empact/following{/other_user}",
      "gists_url": "https://api.github.com/users/Empact/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Empact/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
      "organizations_url": "https://api.github.com/users/Empact/orgs",
      "repos_url": "https://api.github.com/users/Empact/repos",
      "events_url": "https://api.github.com/users/Empact/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Empact/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "3b62a913865777426c11992bae622fb48aa72a40",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3b62a913865777426c11992bae622fb48aa72a40",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/3b62a913865777426c11992bae622fb48aa72a40"
      }
    ],
    "stats": {
      "total": 57,
      "additions": 56,
      "deletions": 1
    },
    "files": [
      {
        "sha": "6e0432209bc6d8cca5b519b8c01b1c4d4eff7810",
        "filename": "src/Makefile.test.include",
        "status": "modified",
        "additions": 2,
        "deletions": 1,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/3ea6a91f16c076e2774700c0364dfc1e7aca5b2a/src/Makefile.test.include",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/3ea6a91f16c076e2774700c0364dfc1e7aca5b2a/src/Makefile.test.include",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/Makefile.test.include?ref=3ea6a91f16c076e2774700c0364dfc1e7aca5b2a",
        "patch": "@@ -17,7 +17,8 @@ JSON_TEST_FILES = \\\n   test/data/tx_invalid.json \\\n   test/data/tx_valid.json\n \n-RAW_TEST_FILES =\n+RAW_TEST_FILES = \\\n+  test/data/bitcoin.conf\n \n GENERATED_TEST_FILES = $(JSON_TEST_FILES:.json=.json.h) $(RAW_TEST_FILES:.raw=.raw.h)\n "
      },
      {
        "sha": "59c4758a9bfc7181539c4b808b86ae08d67c87ff",
        "filename": "src/test/data/bitcoin.conf",
        "status": "added",
        "additions": 10,
        "deletions": 0,
        "changes": 10,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/3ea6a91f16c076e2774700c0364dfc1e7aca5b2a/src/test/data/bitcoin.conf",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/3ea6a91f16c076e2774700c0364dfc1e7aca5b2a/src/test/data/bitcoin.conf",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/data/bitcoin.conf?ref=3ea6a91f16c076e2774700c0364dfc1e7aca5b2a",
        "patch": "@@ -0,0 +1,10 @@\n+##\n+## bitcoin.conf test configuration file. Lines beginning with # are comments.\n+##\n+\n+foo=\n+bar=false\n+baz=11\n+qux=eleven\n+noquux=\n+quux="
      },
      {
        "sha": "6e23a8c4086c765db0c099d38692221557051c85",
        "filename": "src/test/getarg_tests.cpp",
        "status": "modified",
        "additions": 44,
        "deletions": 0,
        "changes": 44,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/3ea6a91f16c076e2774700c0364dfc1e7aca5b2a/src/test/getarg_tests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/3ea6a91f16c076e2774700c0364dfc1e7aca5b2a/src/test/getarg_tests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/getarg_tests.cpp?ref=3ea6a91f16c076e2774700c0364dfc1e7aca5b2a",
        "patch": "@@ -30,6 +30,50 @@ static void ResetArgs(const std::string& strArg)\n     gArgs.ParseParameters(vecChar.size(), vecChar.data());\n }\n \n+BOOST_AUTO_TEST_CASE(configfile)\n+{\n+  fs::path expectedConfigPath(fs::system_complete(\"test/data/bitcoin.conf\"));\n+  ClearDatadirCache();\n+  ResetArgs(strprintf(\"-datadir=%s\", (fs::path(\"test\") / \"data\").string()));\n+  BOOST_CHECK(fs::exists(GetConfigFile(\"bitcoin.conf\")));\n+  BOOST_CHECK_EQUAL(GetConfigFile(\"bitcoin.conf\"), expectedConfigPath);\n+  gArgs.ReadConfigFile(\"bitcoin.conf\");\n+\n+  // boolarg\n+  BOOST_CHECK(gArgs.GetBoolArg(\"-foo\", false));\n+  BOOST_CHECK(gArgs.GetBoolArg(\"-foo\", true));\n+\n+  BOOST_CHECK(!gArgs.GetBoolArg(\"-bar\", false));\n+  BOOST_CHECK(!gArgs.GetBoolArg(\"-bar\", true));\n+\n+  // stringarg\n+  BOOST_CHECK_EQUAL(gArgs.GetArg(\"-baz\", \"\"), \"11\");\n+  BOOST_CHECK_EQUAL(gArgs.GetArg(\"-baz\", \"eleven\"), \"11\");\n+\n+  BOOST_CHECK_EQUAL(gArgs.GetArg(\"-qux\", \"\"), \"eleven\");\n+  BOOST_CHECK_EQUAL(gArgs.GetArg(\"-qux\", \"eleven\"), \"eleven\");\n+\n+  // intarg\n+  BOOST_CHECK_EQUAL(gArgs.GetArg(\"-baz\", 0), 11);\n+  BOOST_CHECK_EQUAL(gArgs.GetArg(\"-qux\", 11), 0);\n+\n+  // boolargno\n+  // also, prefers the first over later settings\n+  BOOST_CHECK(!gArgs.GetBoolArg(\"-quux\", true));\n+  BOOST_CHECK(!gArgs.GetBoolArg(\"-quux\", false));\n+\n+  // command line settings override bitcoin.conf\n+  ResetArgs(strprintf(\"-nofoo -datadir=%s\", (fs::path(\"test\") / \"data\").string()));\n+  gArgs.ReadConfigFile(\"bitcoin.conf\");\n+\n+  BOOST_CHECK(!gArgs.GetBoolArg(\"-foo\", false));\n+  BOOST_CHECK(!gArgs.GetBoolArg(\"-foo\", true));\n+\n+  // throws for missing datadir\n+  ResetArgs(strprintf(\"-datadir=%s\", (fs::path(\"test\") / \"nonexistent\").string()));\n+  BOOST_CHECK_THROW(gArgs.ReadConfigFile(\"bitcoin.conf\"), std::runtime_error);\n+}\n+\n BOOST_AUTO_TEST_CASE(boolarg)\n {\n     ResetArgs(\"-foo\");"
      }
    ]
  }
]