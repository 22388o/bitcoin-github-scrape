[
  {
    "sha": "6285a318d77dbfdf50f893963ebfb2973746f757",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo2Mjg1YTMxOGQ3N2RiZmRmNTBmODkzOTYzZWJmYjI5NzM3NDZmNzU3",
    "commit": {
      "author": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2019-07-09T13:25:55Z"
      },
      "committer": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2019-07-09T13:30:56Z"
      },
      "message": "Remove redundant WalletController::addWallet slot",
      "tree": {
        "sha": "74c756a24f28fd4d9d6b558ed7f49a9ec8a49884",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/74c756a24f28fd4d9d6b558ed7f49a9ec8a49884"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6285a318d77dbfdf50f893963ebfb2973746f757",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE0dvyxLlvLev0wWZUQQEIES5+qB8FAl0kly0ACgkQQQEIES5+\nqB8LCA//aSKUBD8AwpxYq/3MG2WbmnY/sGc9L0T6rf1/O69+W2fWjTVmbnqi2OaR\ncS3SVwLgfiR62w4yTZ47HRw0ly3b1Z7IcniZKuqOBh2VsRXgnVie8cJfU0MloDPl\nNvjW5SiEUfcX54zZ4wcdoSyDTeJC/p2iMpOK2wNtd+vrrVg5nvyPSPoUyiur5VRu\nd5dm2fh2n/LeBGoHA1VxgJaQ5oaXwybgYE7FNxmFC6XBTY89h6vayKqxo1xGpiXo\n8zLrg70Wer0M5C06e+TLsxaieBojXFYqWNwrmZN0qd0DlcQhTMOq0McZ+wYzWcQ2\nx6iAiX5+5DsXit8Z+VNa9+6yax+ZQIYthONERFPY8SdY1xToFZk7bP4wuLz9TWac\n2ClRENKdLG9G3dD00fhNvVnpObJRalTkdBnr9a1sD4kd6dkbASsVMN6jbeYtvNVg\nM44ln41p+iKIUjQaSy/qcTndQX0x1mqvcuBoG1sQjrUgGtEu2Q+3SFw8jhVzsvz+\nw65H/5Ow2W9RUe4tkBnjHEmfHWyCv8vK5NewLQhtD/G9yMdlxCQpeifcjVcdp3We\n2brp/ka2qLnrkixs2bB/Chy8DzOw1u9CTd00Tp6HGstcXYD1McOzR1TITVYgddI5\nybFgkkpQ4kulTx9/iaQkZMLn3mMHv5aNaUhlxXwGtFzqEHHNlwg=\n=fSc/\n-----END PGP SIGNATURE-----",
        "payload": "tree 74c756a24f28fd4d9d6b558ed7f49a9ec8a49884\nparent 8046a3e0befeea641b6309bc0c742b7481e681d9\nauthor Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1562678755 +0300\ncommitter Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1562679056 +0300\n\nRemove redundant WalletController::addWallet slot\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6285a318d77dbfdf50f893963ebfb2973746f757",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/6285a318d77dbfdf50f893963ebfb2973746f757",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6285a318d77dbfdf50f893963ebfb2973746f757/comments",
    "author": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "8046a3e0befeea641b6309bc0c742b7481e681d9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8046a3e0befeea641b6309bc0c742b7481e681d9",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/8046a3e0befeea641b6309bc0c742b7481e681d9"
      }
    ],
    "stats": {
      "total": 22,
      "additions": 4,
      "deletions": 18
    },
    "files": [
      {
        "sha": "a8e7bce6b591a93c08ce8f7c6e9584539f2d8e5f",
        "filename": "src/qt/walletcontroller.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 15,
        "changes": 19,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6285a318d77dbfdf50f893963ebfb2973746f757/src/qt/walletcontroller.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6285a318d77dbfdf50f893963ebfb2973746f757/src/qt/walletcontroller.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/walletcontroller.cpp?ref=6285a318d77dbfdf50f893963ebfb2973746f757",
        "patch": "@@ -99,6 +99,9 @@ WalletModel* WalletController::getOrCreateWallet(std::unique_ptr<interfaces::Wal\n \n     // Instantiate model and register it.\n     WalletModel* wallet_model = new WalletModel(std::move(wallet), m_node, m_platform_style, m_options_model, nullptr);\n+    // Handler callback runs in a different thread so fix wallet model thread affinity.\n+    wallet_model->moveToThread(thread());\n+    wallet_model->setParent(this);\n     m_wallets.push_back(wallet_model);\n \n     connect(wallet_model, &WalletModel::unload, [this, wallet_model] {\n@@ -119,25 +122,11 @@ WalletModel* WalletController::getOrCreateWallet(std::unique_ptr<interfaces::Wal\n     connect(wallet_model, &WalletModel::coinsSent, this, &WalletController::coinsSent);\n \n     // Notify walletAdded signal on the GUI thread.\n-    if (QThread::currentThread() == thread()) {\n-        addWallet(wallet_model);\n-    } else {\n-        // Handler callback runs in a different thread so fix wallet model thread affinity.\n-        wallet_model->moveToThread(thread());\n-        bool invoked = QMetaObject::invokeMethod(this, \"addWallet\", Qt::QueuedConnection, Q_ARG(WalletModel*, wallet_model));\n-        assert(invoked);\n-    }\n+    Q_EMIT walletAdded(wallet_model);\n \n     return wallet_model;\n }\n \n-void WalletController::addWallet(WalletModel* wallet_model)\n-{\n-    // Take ownership of the wallet model and register it.\n-    wallet_model->setParent(this);\n-    Q_EMIT walletAdded(wallet_model);\n-}\n-\n void WalletController::removeAndDeleteWallet(WalletModel* wallet_model)\n {\n     // Unregister wallet model."
      },
      {
        "sha": "be1c28291991d502c0efda20ffed27888fe04279",
        "filename": "src/qt/walletcontroller.h",
        "status": "modified",
        "additions": 0,
        "deletions": 3,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6285a318d77dbfdf50f893963ebfb2973746f757/src/qt/walletcontroller.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6285a318d77dbfdf50f893963ebfb2973746f757/src/qt/walletcontroller.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/walletcontroller.h?ref=6285a318d77dbfdf50f893963ebfb2973746f757",
        "patch": "@@ -50,9 +50,6 @@ class WalletController : public QObject\n     OpenWalletActivity* openWallet(const std::string& name, QWidget* parent = nullptr);\n     void closeWallet(WalletModel* wallet_model, QWidget* parent = nullptr);\n \n-private Q_SLOTS:\n-    void addWallet(WalletModel* wallet_model);\n-\n Q_SIGNALS:\n     void walletAdded(WalletModel* wallet_model);\n     void walletRemoved(WalletModel* wallet_model);"
      }
    ]
  }
]