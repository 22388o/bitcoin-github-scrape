[
  {
    "sha": "4c6035860448656c67fa60fef6b020aafbb2e208",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo0YzYwMzU4NjA0NDg2NTZjNjdmYTYwZmVmNmIwMjBhYWZiYjJlMjA4",
    "commit": {
      "author": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2013-11-06T14:08:56Z"
      },
      "committer": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2013-11-11T13:29:49Z"
      },
      "message": "qt: add Open URI dialog",
      "tree": {
        "sha": "d293e815b23f69b3f9555840af61ddf1d6c8fe79",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d293e815b23f69b3f9555840af61ddf1d6c8fe79"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4c6035860448656c67fa60fef6b020aafbb2e208",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4c6035860448656c67fa60fef6b020aafbb2e208",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/4c6035860448656c67fa60fef6b020aafbb2e208",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4c6035860448656c67fa60fef6b020aafbb2e208/comments",
    "author": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "3a8915d9a85b37f6c58a512fc11457eaa3d3570e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3a8915d9a85b37f6c58a512fc11457eaa3d3570e",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/3a8915d9a85b37f6c58a512fc11457eaa3d3570e"
      }
    ],
    "stats": {
      "total": 308,
      "additions": 289,
      "deletions": 19
    },
    "files": [
      {
        "sha": "6e31c2ed81e92ec43274739aa726fc640afb836b",
        "filename": "contrib/bitcoin-qt.pro",
        "status": "modified",
        "additions": 2,
        "deletions": 1,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/4c6035860448656c67fa60fef6b020aafbb2e208/contrib/bitcoin-qt.pro",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/4c6035860448656c67fa60fef6b020aafbb2e208/contrib/bitcoin-qt.pro",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/bitcoin-qt.pro?ref=4c6035860448656c67fa60fef6b020aafbb2e208",
        "patch": "@@ -12,7 +12,8 @@ FORMS += \\\n     ../src/qt/forms/addressbookpage.ui \\\n     ../src/qt/forms/aboutdialog.ui \\\n     ../src/qt/forms/receivecoinsdialog.ui \\\n-    ../src/qt/forms/receiverequestdialog.ui\n+    ../src/qt/forms/receiverequestdialog.ui \\\n+    ../src/qt/forms/openuridialog.ui\n \n RESOURCES += \\\n     ../src/qt/bitcoin.qrc"
      },
      {
        "sha": "a19cdc25a57d17216f78a6765ad51299d9518a6b",
        "filename": "src/qt/Makefile.am",
        "status": "modified",
        "additions": 8,
        "deletions": 2,
        "changes": 10,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/4c6035860448656c67fa60fef6b020aafbb2e208/src/qt/Makefile.am",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/4c6035860448656c67fa60fef6b020aafbb2e208/src/qt/Makefile.am",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/Makefile.am?ref=4c6035860448656c67fa60fef6b020aafbb2e208",
        "patch": "@@ -33,6 +33,7 @@ QT_TS = locale/bitcoin_ach.ts locale/bitcoin_af_ZA.ts locale/bitcoin_ar.ts \\\n \n QT_FORMS_UI = forms/aboutdialog.ui forms/addressbookpage.ui \\\n   forms/askpassphrasedialog.ui forms/editaddressdialog.ui forms/intro.ui \\\n+  forms/openuridialog.ui \\\n   forms/optionsdialog.ui forms/overviewpage.ui forms/receiverequestdialog.ui \\\n   forms/receivecoinsdialog.ui \\\n   forms/rpcconsole.ui forms/sendcoinsdialog.ui forms/sendcoinsentry.ui \\\n@@ -44,7 +45,9 @@ QT_MOC_CPP = moc_aboutdialog.cpp moc_addressbookpage.cpp \\\n   moc_bitcoingui.cpp moc_bitcoinunits.cpp moc_clientmodel.cpp \\\n   moc_csvmodelwriter.cpp moc_editaddressdialog.cpp moc_guiutil.cpp \\\n   moc_intro.cpp moc_macdockiconhandler.cpp moc_macnotificationhandler.cpp \\\n-  moc_monitoreddatamapper.cpp moc_notificator.cpp moc_optionsdialog.cpp \\\n+  moc_monitoreddatamapper.cpp moc_notificator.cpp \\\n+  moc_openuridialog.cpp \\\n+  moc_optionsdialog.cpp \\\n   moc_optionsmodel.cpp moc_overviewpage.cpp moc_paymentserver.cpp \\\n   moc_receiverequestdialog.cpp moc_qvalidatedlineedit.cpp moc_qvaluecombobox.cpp \\\n   moc_receivecoinsdialog.cpp \\\n@@ -69,7 +72,9 @@ BITCOIN_QT_H  = aboutdialog.h addressbookpage.h addresstablemodel.h \\\n   askpassphrasedialog.h bitcoinaddressvalidator.h bitcoinamountfield.h \\\n   bitcoingui.h bitcoinunits.h clientmodel.h csvmodelwriter.h \\\n   editaddressdialog.h guiconstants.h guiutil.h intro.h macdockiconhandler.h \\\n-  macnotificationhandler.h monitoreddatamapper.h notificator.h optionsdialog.h \\\n+  macnotificationhandler.h monitoreddatamapper.h notificator.h \\\n+  openuridialog.h \\\n+  optionsdialog.h \\\n   optionsmodel.h overviewpage.h paymentrequestplus.h paymentserver.h \\\n   receivecoinsdialog.h \\\n   receiverequestdialog.h qvalidatedlineedit.h qvaluecombobox.h rpcconsole.h \\\n@@ -100,6 +105,7 @@ BITCOIN_QT_CPP = aboutdialog.cpp addressbookpage.cpp \\\n   bitcoinamountfield.cpp bitcoin.cpp bitcoingui.cpp \\\n   bitcoinunits.cpp clientmodel.cpp csvmodelwriter.cpp editaddressdialog.cpp \\\n   guiutil.cpp intro.cpp monitoreddatamapper.cpp notificator.cpp \\\n+  openuridialog.cpp \\\n   optionsdialog.cpp optionsmodel.cpp overviewpage.cpp paymentrequestplus.cpp \\\n   paymentserver.cpp qvalidatedlineedit.cpp qvaluecombobox.cpp \\\n   receivecoinsdialog.cpp receiverequestdialog.cpp \\"
      },
      {
        "sha": "5eb0cfed370125ed7d4fcd6dcecd58f13c3b516a",
        "filename": "src/qt/bitcoin.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/4c6035860448656c67fa60fef6b020aafbb2e208/src/qt/bitcoin.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/4c6035860448656c67fa60fef6b020aafbb2e208/src/qt/bitcoin.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoin.cpp?ref=4c6035860448656c67fa60fef6b020aafbb2e208",
        "patch": "@@ -334,6 +334,8 @@ int main(int argc, char *argv[])\n                 // bitcoin: URIs or payment requests:\n                 QObject::connect(paymentServer, SIGNAL(receivedPaymentRequest(SendCoinsRecipient)),\n                                  &window, SLOT(handlePaymentRequest(SendCoinsRecipient)));\n+                QObject::connect(&window, SIGNAL(receivedURI(QString)),\n+                                 paymentServer, SLOT(handleURIOrFile(QString)));\n                 QObject::connect(&walletModel, SIGNAL(coinsSent(CWallet*,SendCoinsRecipient,QByteArray)),\n                                  paymentServer, SLOT(fetchPaymentACK(CWallet*,const SendCoinsRecipient&,QByteArray)));\n                 QObject::connect(paymentServer, SIGNAL(message(QString,QString,unsigned int)),"
      },
      {
        "sha": "8b0aba1b5b6153cf87963b7da0cef9dfa979b0f9",
        "filename": "src/qt/bitcoingui.cpp",
        "status": "modified",
        "additions": 17,
        "deletions": 14,
        "changes": 31,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/4c6035860448656c67fa60fef6b020aafbb2e208/src/qt/bitcoingui.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/4c6035860448656c67fa60fef6b020aafbb2e208/src/qt/bitcoingui.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoingui.cpp?ref=4c6035860448656c67fa60fef6b020aafbb2e208",
        "patch": "@@ -15,6 +15,7 @@\n #include \"rpcconsole.h\"\n #include \"walletframe.h\"\n #include \"walletmodel.h\"\n+#include \"openuridialog.h\"\n \n #ifdef Q_OS_MAC\n #include \"macdockiconhandler.h\"\n@@ -262,6 +263,9 @@ void BitcoinGUI::createActions(bool fIsTestnet)\n     usedReceivingAddressesAction = new QAction(QIcon(\":/icons/address-book\"), tr(\"Used &receiving addresses...\"), this);\n     usedReceivingAddressesAction->setStatusTip(tr(\"Show the list of used receiving addresses and labels\"));\n \n+    openAction = new QAction(QApplication::style()->standardIcon(QStyle::SP_FileIcon), tr(\"Open URI...\"), this);\n+    openAction->setStatusTip(tr(\"Open a bitcoin: URI or payment request\"));\n+\n     connect(quitAction, SIGNAL(triggered()), qApp, SLOT(quit()));\n     connect(aboutAction, SIGNAL(triggered()), this, SLOT(aboutClicked()));\n     connect(aboutQtAction, SIGNAL(triggered()), qApp, SLOT(aboutQt()));\n@@ -274,6 +278,7 @@ void BitcoinGUI::createActions(bool fIsTestnet)\n     connect(verifyMessageAction, SIGNAL(triggered()), this, SLOT(gotoVerifyMessageTab()));\n     connect(usedSendingAddressesAction, SIGNAL(triggered()), walletFrame, SLOT(usedSendingAddresses()));\n     connect(usedReceivingAddressesAction, SIGNAL(triggered()), walletFrame, SLOT(usedReceivingAddresses()));\n+    connect(openAction, SIGNAL(triggered()), this, SLOT(openClicked()));\n }\n \n void BitcoinGUI::createMenuBar()\n@@ -288,6 +293,7 @@ void BitcoinGUI::createMenuBar()\n \n     // Configure the menus\n     QMenu *file = appMenuBar->addMenu(tr(\"&File\"));\n+    file->addAction(openAction);\n     file->addAction(backupWalletAction);\n     file->addAction(signMessageAction);\n     file->addAction(verifyMessageAction);\n@@ -445,6 +451,15 @@ void BitcoinGUI::aboutClicked()\n     dlg.exec();\n }\n \n+void BitcoinGUI::openClicked()\n+{\n+    OpenURIDialog dlg;\n+    if(dlg.exec())\n+    {\n+        emit receivedURI(dlg.getURI());\n+    }\n+}\n+\n void BitcoinGUI::gotoOverviewPage()\n {\n     overviewAction->setChecked(true);\n@@ -720,23 +735,11 @@ void BitcoinGUI::dropEvent(QDropEvent *event)\n {\n     if(event->mimeData()->hasUrls())\n     {\n-        int nValidUrisFound = 0;\n-        QList<QUrl> uris = event->mimeData()->urls();\n-        foreach(const QUrl &uri, uris)\n+        foreach(const QUrl &uri, event->mimeData()->urls())\n         {\n-            SendCoinsRecipient r;\n-            if (GUIUtil::parseBitcoinURI(uri, &r) && walletFrame->handlePaymentRequest(r))\n-                nValidUrisFound++;\n+            emit receivedURI(uri.toString());\n         }\n-\n-        // if valid URIs were found\n-        if (nValidUrisFound)\n-            walletFrame->gotoSendCoinsPage();\n-        else\n-            message(tr(\"URI handling\"), tr(\"URI can not be parsed! This can be caused by an invalid Bitcoin address or malformed URI parameters.\"),\n-                CClientUIInterface::ICON_WARNING);\n     }\n-\n     event->acceptProposedAction();\n }\n "
      },
      {
        "sha": "acbc38c894903f2572b5449f7f0588038dc376b8",
        "filename": "src/qt/bitcoingui.h",
        "status": "modified",
        "additions": 7,
        "deletions": 0,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/4c6035860448656c67fa60fef6b020aafbb2e208/src/qt/bitcoingui.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/4c6035860448656c67fa60fef6b020aafbb2e208/src/qt/bitcoingui.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoingui.h?ref=4c6035860448656c67fa60fef6b020aafbb2e208",
        "patch": "@@ -87,6 +87,7 @@ class BitcoinGUI : public QMainWindow\n     QAction *changePassphraseAction;\n     QAction *aboutQtAction;\n     QAction *openRPCConsoleAction;\n+    QAction *openAction;\n \n     QSystemTrayIcon *trayIcon;\n     Notificator *notificator;\n@@ -107,6 +108,10 @@ class BitcoinGUI : public QMainWindow\n     /** Create system tray menu (or setup the dock menu) */\n     void createTrayIconMenu();\n \n+signals:\n+    /** Signal raised when a URI was entered or dragged to the GUI */\n+    void receivedURI(const QString &uri);\n+\n public slots:\n     /** Set number of connections shown in the UI */\n     void setNumConnections(int count);\n@@ -165,6 +170,8 @@ private slots:\n     /** Handle tray icon clicked */\n     void trayIconActivated(QSystemTrayIcon::ActivationReason reason);\n #endif\n+    /** Show open dialog */\n+    void openClicked();\n \n     /** Show window if hidden, unminimize when minimized, rise when obscured or show if hidden and fToggleHidden is true */\n     void showNormalIfMinimized(bool fToggleHidden = false);"
      },
      {
        "sha": "cd09ed02465b391e6b8f1a6c60e7bf914a3752bb",
        "filename": "src/qt/forms/openuridialog.ui",
        "status": "added",
        "additions": 116,
        "deletions": 0,
        "changes": 116,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/4c6035860448656c67fa60fef6b020aafbb2e208/src/qt/forms/openuridialog.ui",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/4c6035860448656c67fa60fef6b020aafbb2e208/src/qt/forms/openuridialog.ui",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/forms/openuridialog.ui?ref=4c6035860448656c67fa60fef6b020aafbb2e208",
        "patch": "@@ -0,0 +1,116 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<ui version=\"4.0\">\n+ <class>OpenURIDialog</class>\n+ <widget class=\"QDialog\" name=\"OpenURIDialog\">\n+  <property name=\"geometry\">\n+   <rect>\n+    <x>0</x>\n+    <y>0</y>\n+    <width>564</width>\n+    <height>109</height>\n+   </rect>\n+  </property>\n+  <property name=\"windowTitle\">\n+   <string>Open URI</string>\n+  </property>\n+  <layout class=\"QVBoxLayout\" name=\"verticalLayout\">\n+   <item>\n+    <widget class=\"QLabel\" name=\"label_2\">\n+     <property name=\"text\">\n+      <string>Open payment request from URI or file</string>\n+     </property>\n+    </widget>\n+   </item>\n+   <item>\n+    <layout class=\"QHBoxLayout\" name=\"horizontalLayout\">\n+     <item>\n+      <widget class=\"QLabel\" name=\"label\">\n+       <property name=\"text\">\n+        <string>URI:</string>\n+       </property>\n+      </widget>\n+     </item>\n+     <item>\n+      <widget class=\"QValidatedLineEdit\" name=\"uriEdit\">\n+      </widget>\n+     </item>\n+     <item>\n+      <widget class=\"QPushButton\" name=\"selectFileButton\">\n+       <property name=\"toolTip\">\n+        <string>Select payment request file</string>\n+       </property>\n+       <property name=\"text\">\n+        <string notr=\"true\">\u2026</string>\n+       </property>\n+      </widget>\n+     </item>\n+    </layout>\n+   </item>\n+   <item>\n+    <spacer name=\"verticalSpacer\">\n+     <property name=\"orientation\">\n+      <enum>Qt::Vertical</enum>\n+     </property>\n+     <property name=\"sizeHint\" stdset=\"0\">\n+      <size>\n+       <width>20</width>\n+       <height>40</height>\n+      </size>\n+     </property>\n+    </spacer>\n+   </item>\n+   <item>\n+    <widget class=\"QDialogButtonBox\" name=\"buttonBox\">\n+     <property name=\"orientation\">\n+      <enum>Qt::Horizontal</enum>\n+     </property>\n+     <property name=\"standardButtons\">\n+      <set>QDialogButtonBox::Cancel|QDialogButtonBox::Ok</set>\n+     </property>\n+    </widget>\n+   </item>\n+  </layout>\n+ </widget>\n+ <customwidgets>\n+  <customwidget>\n+   <class>QValidatedLineEdit</class>\n+   <extends>QLineEdit</extends>\n+   <header>qvalidatedlineedit.h</header>\n+  </customwidget>\n+ </customwidgets>\n+ <resources/>\n+ <connections>\n+  <connection>\n+   <sender>buttonBox</sender>\n+   <signal>accepted()</signal>\n+   <receiver>OpenURIDialog</receiver>\n+   <slot>accept()</slot>\n+   <hints>\n+    <hint type=\"sourcelabel\">\n+     <x>248</x>\n+     <y>254</y>\n+    </hint>\n+    <hint type=\"destinationlabel\">\n+     <x>157</x>\n+     <y>274</y>\n+    </hint>\n+   </hints>\n+  </connection>\n+  <connection>\n+   <sender>buttonBox</sender>\n+   <signal>rejected()</signal>\n+   <receiver>OpenURIDialog</receiver>\n+   <slot>reject()</slot>\n+   <hints>\n+    <hint type=\"sourcelabel\">\n+     <x>316</x>\n+     <y>260</y>\n+    </hint>\n+    <hint type=\"destinationlabel\">\n+     <x>286</x>\n+     <y>274</y>\n+    </hint>\n+   </hints>\n+  </connection>\n+ </connections>\n+</ui>"
      },
      {
        "sha": "85eeab2cbc05e718745e0360b9a4d651fdcfbc4e",
        "filename": "src/qt/guiutil.cpp",
        "status": "modified",
        "additions": 35,
        "deletions": 0,
        "changes": 35,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/4c6035860448656c67fa60fef6b020aafbb2e208/src/qt/guiutil.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/4c6035860448656c67fa60fef6b020aafbb2e208/src/qt/guiutil.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/guiutil.cpp?ref=4c6035860448656c67fa60fef6b020aafbb2e208",
        "patch": "@@ -278,6 +278,41 @@ QString getSaveFileName(QWidget *parent, const QString &caption, const QString &\n     return result;\n }\n \n+QString getOpenFileName(QWidget *parent, const QString &caption, const QString &dir,\n+    const QString &filter,\n+    QString *selectedSuffixOut)\n+{\n+    QString selectedFilter;\n+    QString myDir;\n+    if(dir.isEmpty()) // Default to user documents location\n+    {\n+#if QT_VERSION < 0x050000\n+        myDir = QDesktopServices::storageLocation(QDesktopServices::DocumentsLocation);\n+#else\n+        myDir = QStandardPaths::writableLocation(QStandardPaths::DocumentsLocation);\n+#endif\n+    }\n+    else\n+    {\n+        myDir = dir;\n+    }\n+    /* Directly convert path to native OS path separators */\n+    QString result = QDir::toNativeSeparators(QFileDialog::getOpenFileName(parent, caption, myDir, filter, &selectedFilter));\n+\n+    if(selectedSuffixOut)\n+    {\n+        /* Extract first suffix from filter pattern \"Description (*.foo)\" or \"Description (*.foo *.bar ...) */\n+        QRegExp filter_re(\".* \\\\(\\\\*\\\\.(.*)[ \\\\)]\");\n+        QString selectedSuffix;\n+        if(filter_re.exactMatch(selectedFilter))\n+        {\n+            selectedSuffix = filter_re.cap(1);\n+        }\n+        *selectedSuffixOut = selectedSuffix;\n+    }\n+    return result;\n+}\n+\n Qt::ConnectionType blockingGUIThreadConnection()\n {\n     if(QThread::currentThread() != qApp->thread())"
      },
      {
        "sha": "ddff2de4c4051dec2f627060a7050f4395101b00",
        "filename": "src/qt/guiutil.h",
        "status": "modified",
        "additions": 13,
        "deletions": 1,
        "changes": 14,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/4c6035860448656c67fa60fef6b020aafbb2e208/src/qt/guiutil.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/4c6035860448656c67fa60fef6b020aafbb2e208/src/qt/guiutil.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/guiutil.h?ref=4c6035860448656c67fa60fef6b020aafbb2e208",
        "patch": "@@ -36,7 +36,6 @@ namespace GUIUtil\n     void setupAmountWidget(QLineEdit *widget, QWidget *parent);\n \n     // Parse \"bitcoin:\" URI into recipient object, return true on successful parsing\n-    // See Bitcoin URI definition discussion here: https://bitcointalk.org/index.php?topic=33490.0\n     bool parseBitcoinURI(const QUrl &uri, SendCoinsRecipient *out);\n     bool parseBitcoinURI(QString uri, SendCoinsRecipient *out);\n     QString formatBitcoinURI(const SendCoinsRecipient &info);\n@@ -70,6 +69,19 @@ namespace GUIUtil\n                                    const QString &dir=QString(), const QString &filter=QString(),\n                                    QString *selectedSuffixOut=0);\n \n+    /** Get open filename, convenience wrapper for QFileDialog::getOpenFileName.\n+\n+      @param[in] parent  Parent window (or 0)\n+      @param[in] caption Window caption (or empty, for default)\n+      @param[in] dir     Starting directory (or empty, to default to documents directory)\n+      @param[in] filter  Filter specification such as \"Comma Separated Files (*.csv)\"\n+      @param[out] selectedSuffixOut  Pointer to return the suffix (file type) that was selected (or 0).\n+                  Can be useful when choosing the save file format based on suffix.\n+     */\n+    QString getOpenFileName(QWidget *parent, const QString &caption, const QString &dir,\n+        const QString &filter,\n+        QString *selectedSuffixOut);\n+\n     /** Get connection type to call object slot in GUI thread with invokeMethod. The call will be blocking.\n \n        @returns If called from the GUI thread, return a Qt::DirectConnection."
      },
      {
        "sha": "803a3c9ddbfd21464292cf2a3107a4bf2b0fdb5c",
        "filename": "src/qt/openuridialog.cpp",
        "status": "added",
        "additions": 52,
        "deletions": 0,
        "changes": 52,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/4c6035860448656c67fa60fef6b020aafbb2e208/src/qt/openuridialog.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/4c6035860448656c67fa60fef6b020aafbb2e208/src/qt/openuridialog.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/openuridialog.cpp?ref=4c6035860448656c67fa60fef6b020aafbb2e208",
        "patch": "@@ -0,0 +1,52 @@\n+// Copyright (c) 2011-2013 The Bitcoin developers\n+// Distributed under the MIT/X11 software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"openuridialog.h\"\n+#include \"ui_openuridialog.h\"\n+\n+#include \"guiutil.h\"\n+#include \"walletmodel.h\"\n+\n+#include <QUrl>\n+\n+OpenURIDialog::OpenURIDialog(QWidget *parent) :\n+    QDialog(parent),\n+    ui(new Ui::OpenURIDialog)\n+{\n+    ui->setupUi(this);\n+#if QT_VERSION >= 0x040700\n+    ui->uriEdit->setPlaceholderText(\"bitcoin:\");\n+#endif\n+}\n+\n+OpenURIDialog::~OpenURIDialog()\n+{\n+    delete ui;\n+}\n+\n+QString OpenURIDialog::getURI()\n+{\n+    return ui->uriEdit->text();\n+}\n+\n+void OpenURIDialog::accept()\n+{\n+    SendCoinsRecipient rcp;\n+    if(GUIUtil::parseBitcoinURI(getURI(), &rcp))\n+    {\n+        /* Only accept value URIs */\n+        QDialog::accept();\n+    } else {\n+        ui->uriEdit->setValid(false);\n+    }\n+}\n+\n+void OpenURIDialog::on_selectFileButton_clicked()\n+{\n+    QString filename = GUIUtil::getOpenFileName(this, tr(\"Select payment request file to open\"), \"\", \"\", NULL);\n+    if(filename.isEmpty())\n+        return;\n+    QUrl fileUri = QUrl::fromLocalFile(filename);\n+    ui->uriEdit->setText(\"bitcoin:?request=\" + QUrl::toPercentEncoding(fileUri.toString()));\n+}"
      },
      {
        "sha": "3b9ff0a8e107ca548507e5b821403c51f728cc7c",
        "filename": "src/qt/openuridialog.h",
        "status": "added",
        "additions": 34,
        "deletions": 0,
        "changes": 34,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/4c6035860448656c67fa60fef6b020aafbb2e208/src/qt/openuridialog.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/4c6035860448656c67fa60fef6b020aafbb2e208/src/qt/openuridialog.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/openuridialog.h?ref=4c6035860448656c67fa60fef6b020aafbb2e208",
        "patch": "@@ -0,0 +1,34 @@\n+// Copyright (c) 2011-2013 The Bitcoin developers\n+// Distributed under the MIT/X11 software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef OPENURIDIALOG_H\n+#define OPENURIDIALOG_H\n+\n+#include <QDialog>\n+\n+namespace Ui {\n+class OpenURIDialog;\n+}\n+\n+class OpenURIDialog : public QDialog\n+{\n+    Q_OBJECT\n+\n+public:\n+    explicit OpenURIDialog(QWidget *parent = 0);\n+    ~OpenURIDialog();\n+\n+    QString getURI();\n+\n+protected slots:\n+    void accept();\n+\n+private slots:\n+    void on_selectFileButton_clicked();\n+\n+private:\n+    Ui::OpenURIDialog *ui;\n+};\n+\n+#endif // OPENURIDIALOG_H"
      },
      {
        "sha": "febcbad62808b0a54942c2ec183fc395e569f7e9",
        "filename": "src/qt/paymentserver.h",
        "status": "modified",
        "additions": 3,
        "deletions": 1,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/4c6035860448656c67fa60fef6b020aafbb2e208/src/qt/paymentserver.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/4c6035860448656c67fa60fef6b020aafbb2e208/src/qt/paymentserver.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/paymentserver.h?ref=4c6035860448656c67fa60fef6b020aafbb2e208",
        "patch": "@@ -105,6 +105,9 @@ public slots:\n     // Submit Payment message to a merchant, get back PaymentACK:\n     void fetchPaymentACK(CWallet* wallet, SendCoinsRecipient recipient, QByteArray transaction);\n \n+    // Handle an incoming URI or file\n+    void handleURIOrFile(const QString& s);\n+\n private slots:\n     void handleURIConnection();\n     void netRequestFinished(QNetworkReply*);\n@@ -114,7 +117,6 @@ private slots:\n private:\n     static bool readPaymentRequest(const QString& filename, PaymentRequestPlus& request);\n     bool processPaymentRequest(PaymentRequestPlus& request, SendCoinsRecipient& recipient);\n-    void handleURIOrFile(const QString& s);\n     void fetchRequest(const QUrl& url);\n \n     bool saveURIs;                      // true during startup"
      }
    ]
  }
]