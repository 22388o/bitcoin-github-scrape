elichai,2020-05-07 19:13:36,"Could you expand on which fuzzer hit that? is it fuzz/system.cpp?\n\nI Believe the problem is actually with the fuzzer, I think `ConsumeRandomLengthStringVector` can generate an empty string, which then `c_str()` returns NULL. \nbut the C++ standard[1] says that argv contain only valid non null pointers up to argc-1. \nSo I believe the fuzzer should actually be fixed, not the code here.\n\n[",https://github.com/bitcoin/bitcoin/pull/18908#issuecomment-625444947,625444947,
brakmic,2020-05-07 19:15:02,"> Could you expand on which fuzzer hit that? is it fuzz/system.cpp?\n\nIt is the system.cpp fuzzer.\n\n```shell\nRun system with args ['/home/travis/build/bitcoin/bitcoin/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/src/test/fuzz/system', '-runs=1', '/home/travis/build/bitcoin/bitcoin/ci/scratch/qa-assets/fuzz_seed_corpus/system']INFO: Seed: 3656541697\nINFO: Loaded 1 modules   (407748 inlin",https://github.com/bitcoin/bitcoin/pull/18908#issuecomment-625445629,625445629,
brakmic,2020-05-07 19:16:43,"@elichai \n\nAnd now it throws no UB error anymore. Not sure if the fuzzer is the problem.\n\n```shell\nRun system with args ['/home/travis/build/bitcoin/bitcoin/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/src/test/fuzz/system', '-runs=1', '/home/travis/build/bitcoin/bitcoin/ci/scratch/qa-assets/fuzz_seed_corpus/system']INFO: Seed: 2965575158\nINFO: Loaded 1 modules   (406999 inline 8-bit c",https://github.com/bitcoin/bitcoin/pull/18908#issuecomment-625446458,625446458,
MarcoFalke,2020-05-08 17:58:47,"Can you please fix the fuzz code as pointed out in https://github.com/bitcoin/bitcoin/pull/18908#pullrequestreview-407905781\n\nInteresting that the issue is only hit when compiling with C++17\n\nAlso cc @practicalswift ",https://github.com/bitcoin/bitcoin/pull/18908#issuecomment-625941010,625941010,
brakmic,2020-05-08 18:06:40,"> Can you please fix the fuzz code as pointed out in [#18908 (review)](https://github.com/bitcoin/bitcoin/pull/18908#pullrequestreview-407905781)\n\nSure, will look into it an open a new PR regarding system.cpp fuzzer.\n\n",https://github.com/bitcoin/bitcoin/pull/18908#issuecomment-625944418,625944418,
brakmic,2020-05-08 18:26:13,"@MarcoFalke \n\nDone, https://github.com/bitcoin/bitcoin/pull/18917",https://github.com/bitcoin/bitcoin/pull/18908#issuecomment-625952644,625952644,
practicalswift,2020-05-08 19:59:14,"Thanks for bringing this issue to my attention @brakmic.\n\nWith the fix in #18917 I think this PR can be closed?",https://github.com/bitcoin/bitcoin/pull/18908#issuecomment-625992548,625992548,
brakmic,2020-05-08 20:07:32,"> Thanks for bringing this issue to attention @brakmic.\n> \n> With the fix in #18917 I think this PR can be closed?\n\nYes, I think we can close it now. :)",https://github.com/bitcoin/bitcoin/pull/18908#issuecomment-625996037,625996037,
sipa,2020-05-07 23:35:03,This does not require release notes. It's not a user-visible change.,https://github.com/bitcoin/bitcoin/pull/18908#discussion_r421853051,421853051,doc/release-notes-18908.md
sipa,2020-05-07 23:43:57,"I think this is the wrong place to fix things. In production this condition cannot occur, so this should be treated as a code error (which warrants documenting assumptions, or perhaps an assertion), not a user error (which warrants a runtime error message like this).",https://github.com/bitcoin/bitcoin/pull/18908#discussion_r421855839,421855839,src/util/system.cpp
brakmic,2020-05-08 08:38:42,Have removed the document.,https://github.com/bitcoin/bitcoin/pull/18908#discussion_r422021106,422021106,doc/release-notes-18908.md
brakmic,2020-05-08 08:40:21,"An `assert` leaves the fuzzer with ""deadly signal"" which also breaks the build. Am not sure how to make it: \n\n* pass the fuzzer\n* but without introducing any user-error checking logic",https://github.com/bitcoin/bitcoin/pull/18908#discussion_r422021863,422021863,src/util/system.cpp
sipa,2020-05-08 17:41:47,"And the fuzzer *should* get a deadly signal, because something in the code is wrong. It is correctly reporting an issue.",https://github.com/bitcoin/bitcoin/pull/18908#discussion_r422277302,422277302,src/util/system.cpp
brakmic,2020-05-08 17:44:57,"Ok, then all is fine. \n\nHowever, the problem happened in an unrelated PR or mine (and will presumably happen in other people's PR's too). This was my actual motivation: how to get a clean build on all available travis platforms? :)\n\nBut, if it's acceptable to have a deadly signal, it's OK for me too. ",https://github.com/bitcoin/bitcoin/pull/18908#discussion_r422278890,422278890,src/util/system.cpp
sipa,2020-05-08 17:49:58,"Well, if the fuzzer finds a bug, the bug should be fixed!",https://github.com/bitcoin/bitcoin/pull/18908#discussion_r422281371,422281371,src/util/system.cpp
brakmic,2020-05-08 17:51:29,"Yes, that's true. Have updated the title of this PR and its description. \n\nThanks to you and @elichai ",https://github.com/bitcoin/bitcoin/pull/18908#discussion_r422282108,422282108,src/util/system.cpp
