[
  {
    "sha": "dfbf9f5665a5d2edf68d067d643f61410eb2a829",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkZmJmOWY1NjY1YTVkMmVkZjY4ZDA2N2Q2NDNmNjE0MTBlYjJhODI5",
    "commit": {
      "author": {
        "name": "instagibbs",
        "email": "gsanders87@gmail.com",
        "date": "2016-11-07T16:37:36Z"
      },
      "committer": {
        "name": "instagibbs",
        "email": "gsanders87@gmail.com",
        "date": "2016-11-07T17:25:32Z"
      },
      "message": "Add function to retrieve nested p2sh witness program keyhash from keystore",
      "tree": {
        "sha": "d1a6d1abc4306af4e9332c8c0974265bd2fc2f50",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d1a6d1abc4306af4e9332c8c0974265bd2fc2f50"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/dfbf9f5665a5d2edf68d067d643f61410eb2a829",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/dfbf9f5665a5d2edf68d067d643f61410eb2a829",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/dfbf9f5665a5d2edf68d067d643f61410eb2a829",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/dfbf9f5665a5d2edf68d067d643f61410eb2a829/comments",
    "author": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "ed64bcec2dde1f4255f3bd5b0c2f01e4dfe260d3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ed64bcec2dde1f4255f3bd5b0c2f01e4dfe260d3",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/ed64bcec2dde1f4255f3bd5b0c2f01e4dfe260d3"
      }
    ],
    "stats": {
      "total": 17,
      "additions": 17,
      "deletions": 0
    },
    "files": [
      {
        "sha": "f4320f9779727150c431ce59a6c70697940f0e6e",
        "filename": "src/wallet/wallet.cpp",
        "status": "modified",
        "additions": 14,
        "deletions": 0,
        "changes": 14,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/dfbf9f5665a5d2edf68d067d643f61410eb2a829/src/wallet/wallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/dfbf9f5665a5d2edf68d067d643f61410eb2a829/src/wallet/wallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.cpp?ref=dfbf9f5665a5d2edf68d067d643f61410eb2a829",
        "patch": "@@ -3740,3 +3740,17 @@ bool CMerkleTx::AcceptToMemoryPool(const CAmount& nAbsurdFee, CValidationState&\n {\n     return ::AcceptToMemoryPool(mempool, state, *this, true, NULL, false, nAbsurdFee);\n }\n+\n+bool GetWitnessKeyID(const CKeyStore* store, const CScriptID &scriptID, CKeyID &keyID)\n+{\n+    CScript subscript;\n+    int witnessVer = 0;\n+    std::vector<unsigned char> witnessProgram;\n+    if (!store->GetCScript(scriptID, subscript) ||\n+        !subscript.IsWitnessProgram(witnessVer, witnessProgram) ||\n+        witnessProgram.size() != 20) {\n+        return false;\n+    }\n+    keyID = CKeyID(uint160(witnessProgram));\n+    return true;\n+}"
      },
      {
        "sha": "f2b75ca995bc3cae4a400f2b5e9cddc988fd49b8",
        "filename": "src/wallet/wallet.h",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/dfbf9f5665a5d2edf68d067d643f61410eb2a829/src/wallet/wallet.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/dfbf9f5665a5d2edf68d067d643f61410eb2a829/src/wallet/wallet.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.h?ref=dfbf9f5665a5d2edf68d067d643f61410eb2a829",
        "patch": "@@ -993,4 +993,7 @@ class CAccount\n     }\n };\n \n+// Retrieves the witness program keyhash from p2sh scriptID with help of keystore\n+bool GetWitnessKeyID(const CKeyStore* store, const CScriptID &scriptID, CKeyID &keyID);\n+\n #endif // BITCOIN_WALLET_WALLET_H"
      }
    ]
  },
  {
    "sha": "e6a435fce2ebb7186c1e67e44d13b823e4ed330c",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzplNmE0MzVmY2UyZWJiNzE4NmMxZTY3ZTQ0ZDEzYjgyM2U0ZWQzMzBj",
    "commit": {
      "author": {
        "name": "instagibbs",
        "email": "gsanders87@gmail.com",
        "date": "2016-10-21T19:22:14Z"
      },
      "committer": {
        "name": "instagibbs",
        "email": "gsanders87@gmail.com",
        "date": "2016-11-07T17:25:35Z"
      },
      "message": "Enable pubkey lookup for p2sh-p2wpkh in validateaddress",
      "tree": {
        "sha": "89040061c23b8fc6f00c0001e2abd86827017164",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/89040061c23b8fc6f00c0001e2abd86827017164"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e6a435fce2ebb7186c1e67e44d13b823e4ed330c",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e6a435fce2ebb7186c1e67e44d13b823e4ed330c",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/e6a435fce2ebb7186c1e67e44d13b823e4ed330c",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e6a435fce2ebb7186c1e67e44d13b823e4ed330c/comments",
    "author": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "dfbf9f5665a5d2edf68d067d643f61410eb2a829",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/dfbf9f5665a5d2edf68d067d643f61410eb2a829",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/dfbf9f5665a5d2edf68d067d643f61410eb2a829"
      }
    ],
    "stats": {
      "total": 11,
      "additions": 10,
      "deletions": 1
    },
    "files": [
      {
        "sha": "a3f68725925d05eaca02a4f05260b047f32bddc8",
        "filename": "src/rpc/misc.cpp",
        "status": "modified",
        "additions": 10,
        "deletions": 1,
        "changes": 11,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e6a435fce2ebb7186c1e67e44d13b823e4ed330c/src/rpc/misc.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e6a435fce2ebb7186c1e67e44d13b823e4ed330c/src/rpc/misc.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/misc.cpp?ref=e6a435fce2ebb7186c1e67e44d13b823e4ed330c",
        "patch": "@@ -135,6 +135,14 @@ class DescribeAddressVisitor : public boost::static_visitor<UniValue>\n             int nRequired;\n             ExtractDestinations(subscript, whichType, addresses, nRequired);\n             obj.push_back(Pair(\"script\", GetTxnOutputType(whichType)));\n+            CKeyID keyID;\n+            CPubKey pubkey;\n+            if (GetWitnessKeyID(pwalletMain, scriptID, keyID) &&\n+                pwalletMain->GetPubKey(keyID, pubkey)) {\n+                // Wallet should only have compressed pubkeys for segwit\n+                assert(pubkey.IsCompressed());\n+                obj.push_back(Pair(\"pubkey\", HexStr(pubkey)));\n+            }\n             obj.push_back(Pair(\"hex\", HexStr(subscript.begin(), subscript.end())));\n             UniValue a(UniValue::VARR);\n             BOOST_FOREACH(const CTxDestination& addr, addresses)\n@@ -204,7 +212,8 @@ UniValue validateaddress(const JSONRPCRequest& request)\n         if (pwalletMain && pwalletMain->mapAddressBook.count(dest))\n             ret.push_back(Pair(\"account\", pwalletMain->mapAddressBook[dest].name));\n         CKeyID keyID;\n-        if (pwalletMain && address.GetKeyID(keyID) && pwalletMain->mapKeyMetadata.count(keyID) && !pwalletMain->mapKeyMetadata[keyID].hdKeypath.empty())\n+        CScriptID scriptID;\n+        if (pwalletMain && (address.GetKeyID(keyID) || (address.GetScriptID(scriptID) && GetWitnessKeyID(pwalletMain, scriptID, keyID))) && pwalletMain->mapKeyMetadata.count(keyID) && !pwalletMain->mapKeyMetadata[keyID].hdKeypath.empty())\n         {\n             ret.push_back(Pair(\"hdkeypath\", pwalletMain->mapKeyMetadata[keyID].hdKeypath));\n             ret.push_back(Pair(\"hdmasterkeyid\", pwalletMain->mapKeyMetadata[keyID].hdMasterKeyID.GetHex()));"
      }
    ]
  },
  {
    "sha": "4591f139954da81741f28092ee339f4019ebb7f1",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo0NTkxZjEzOTk1NGRhODE3NDFmMjgwOTJlZTMzOWY0MDE5ZWJiN2Yx",
    "commit": {
      "author": {
        "name": "instagibbs",
        "email": "gsanders87@gmail.com",
        "date": "2016-11-04T15:40:30Z"
      },
      "committer": {
        "name": "instagibbs",
        "email": "gsanders87@gmail.com",
        "date": "2016-11-07T17:25:38Z"
      },
      "message": "Simplify GetKeyID",
      "tree": {
        "sha": "efe02d3231a40e5a1715d120d77fd9cdfdee7daa",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/efe02d3231a40e5a1715d120d77fd9cdfdee7daa"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4591f139954da81741f28092ee339f4019ebb7f1",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4591f139954da81741f28092ee339f4019ebb7f1",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/4591f139954da81741f28092ee339f4019ebb7f1",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4591f139954da81741f28092ee339f4019ebb7f1/comments",
    "author": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "e6a435fce2ebb7186c1e67e44d13b823e4ed330c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e6a435fce2ebb7186c1e67e44d13b823e4ed330c",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/e6a435fce2ebb7186c1e67e44d13b823e4ed330c"
      }
    ],
    "stats": {
      "total": 4,
      "additions": 1,
      "deletions": 3
    },
    "files": [
      {
        "sha": "0707c90f9d8a31c8cd03b38790649e33ae6d8b65",
        "filename": "src/base58.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 3,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/4591f139954da81741f28092ee339f4019ebb7f1/src/base58.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/4591f139954da81741f28092ee339f4019ebb7f1/src/base58.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/base58.cpp?ref=4591f139954da81741f28092ee339f4019ebb7f1",
        "patch": "@@ -271,9 +271,7 @@ bool CBitcoinAddress::GetKeyID(CKeyID& keyID) const\n {\n     if (!IsValid() || vchVersion != Params().Base58Prefix(CChainParams::PUBKEY_ADDRESS))\n         return false;\n-    uint160 id;\n-    memcpy(&id, &vchData[0], 20);\n-    keyID = CKeyID(id);\n+    memcpy(keyID.begin(), &vchData[0], 20);\n     return true;\n }\n "
      }
    ]
  },
  {
    "sha": "57b25a73996c1bd9575124694996e25f8c0a1918",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo1N2IyNWE3Mzk5NmMxYmQ5NTc1MTI0Njk0OTk2ZTI1ZjhjMGExOTE4",
    "commit": {
      "author": {
        "name": "instagibbs",
        "email": "gsanders87@gmail.com",
        "date": "2016-11-04T14:36:10Z"
      },
      "committer": {
        "name": "instagibbs",
        "email": "gsanders87@gmail.com",
        "date": "2016-11-07T17:25:38Z"
      },
      "message": "Add CBitcoinAddress::GetScriptID",
      "tree": {
        "sha": "6dc22d03ebafca0b8c34dd3194917ae03581100b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6dc22d03ebafca0b8c34dd3194917ae03581100b"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/57b25a73996c1bd9575124694996e25f8c0a1918",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/57b25a73996c1bd9575124694996e25f8c0a1918",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/57b25a73996c1bd9575124694996e25f8c0a1918",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/57b25a73996c1bd9575124694996e25f8c0a1918/comments",
    "author": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "4591f139954da81741f28092ee339f4019ebb7f1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4591f139954da81741f28092ee339f4019ebb7f1",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/4591f139954da81741f28092ee339f4019ebb7f1"
      }
    ],
    "stats": {
      "total": 9,
      "additions": 9,
      "deletions": 0
    },
    "files": [
      {
        "sha": "4abe056b3c760248c0cb7d8d801d3210a5fbee83",
        "filename": "src/base58.cpp",
        "status": "modified",
        "additions": 8,
        "deletions": 0,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/57b25a73996c1bd9575124694996e25f8c0a1918/src/base58.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/57b25a73996c1bd9575124694996e25f8c0a1918/src/base58.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/base58.cpp?ref=57b25a73996c1bd9575124694996e25f8c0a1918",
        "patch": "@@ -275,6 +275,14 @@ bool CBitcoinAddress::GetKeyID(CKeyID& keyID) const\n     return true;\n }\n \n+bool CBitcoinAddress::GetScriptID(CScriptID& scriptID) const\n+{\n+    if (!IsValid() || vchVersion != Params().Base58Prefix(CChainParams::SCRIPT_ADDRESS))\n+        return false;\n+    memcpy(scriptID.begin(), &vchData[0], 20);\n+    return true;\n+}\n+\n bool CBitcoinAddress::IsScript() const\n {\n     return IsValid() && vchVersion == Params().Base58Prefix(CChainParams::SCRIPT_ADDRESS);"
      },
      {
        "sha": "3047427a8a72258393acfc9fdc5946951b6db0ef",
        "filename": "src/base58.h",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/57b25a73996c1bd9575124694996e25f8c0a1918/src/base58.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/57b25a73996c1bd9575124694996e25f8c0a1918/src/base58.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/base58.h?ref=57b25a73996c1bd9575124694996e25f8c0a1918",
        "patch": "@@ -116,6 +116,7 @@ class CBitcoinAddress : public CBase58Data {\n \n     CTxDestination Get() const;\n     bool GetKeyID(CKeyID &keyID) const;\n+    bool GetScriptID(CScriptID &scriptID) const;\n     bool IsScript() const;\n };\n "
      }
    ]
  },
  {
    "sha": "b62b8f38ffeceec92775672c37cec99da9053420",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiNjJiOGYzOGZmZWNlZWM5Mjc3NTY3MmMzN2NlYzk5ZGE5MDUzNDIw",
    "commit": {
      "author": {
        "name": "instagibbs",
        "email": "gsanders87@gmail.com",
        "date": "2016-11-04T14:36:38Z"
      },
      "committer": {
        "name": "instagibbs",
        "email": "gsanders87@gmail.com",
        "date": "2016-11-07T17:25:39Z"
      },
      "message": "Enable dumpprivkey for p2sh-p2wpkh",
      "tree": {
        "sha": "a414521c2492574b3c4dc4665836d7616bddda53",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a414521c2492574b3c4dc4665836d7616bddda53"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b62b8f38ffeceec92775672c37cec99da9053420",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b62b8f38ffeceec92775672c37cec99da9053420",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/b62b8f38ffeceec92775672c37cec99da9053420",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b62b8f38ffeceec92775672c37cec99da9053420/comments",
    "author": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "57b25a73996c1bd9575124694996e25f8c0a1918",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/57b25a73996c1bd9575124694996e25f8c0a1918",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/57b25a73996c1bd9575124694996e25f8c0a1918"
      }
    ],
    "stats": {
      "total": 5,
      "additions": 4,
      "deletions": 1
    },
    "files": [
      {
        "sha": "c968d55beb21684df8ff9b9336603d766cf8389d",
        "filename": "src/wallet/rpcdump.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 1,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b62b8f38ffeceec92775672c37cec99da9053420/src/wallet/rpcdump.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b62b8f38ffeceec92775672c37cec99da9053420/src/wallet/rpcdump.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/rpcdump.cpp?ref=b62b8f38ffeceec92775672c37cec99da9053420",
        "patch": "@@ -542,8 +542,11 @@ UniValue dumpprivkey(const JSONRPCRequest& request)\n     if (!address.SetString(strAddress))\n         throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid Bitcoin address\");\n     CKeyID keyID;\n-    if (!address.GetKeyID(keyID))\n+    CScriptID scriptID;\n+    if ((!address.GetScriptID(scriptID) || !GetWitnessKeyID(pwalletMain, scriptID, keyID)) &&\n+        !address.GetKeyID(keyID)) {\n         throw JSONRPCError(RPC_TYPE_ERROR, \"Address does not refer to a key\");\n+    }\n     CKey vchSecret;\n     if (!pwalletMain->GetKey(keyID, vchSecret))\n         throw JSONRPCError(RPC_WALLET_ERROR, \"Private key for address \" + strAddress + \" is not known\");"
      }
    ]
  },
  {
    "sha": "a3d682803f04e2d9fbc1e2d2637b228117e2e9ff",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzphM2Q2ODI4MDNmMDRlMmQ5ZmJjMWUyZDI2MzdiMjI4MTE3ZTJlOWZm",
    "commit": {
      "author": {
        "name": "instagibbs",
        "email": "gsanders87@gmail.com",
        "date": "2016-10-25T14:53:40Z"
      },
      "committer": {
        "name": "instagibbs",
        "email": "gsanders87@gmail.com",
        "date": "2016-11-07T17:25:42Z"
      },
      "message": "{sign, verify}message support for p2sh-p2wpkh",
      "tree": {
        "sha": "5edb244bdb72307cdc223d263603bac349c0a934",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5edb244bdb72307cdc223d263603bac349c0a934"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a3d682803f04e2d9fbc1e2d2637b228117e2e9ff",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a3d682803f04e2d9fbc1e2d2637b228117e2e9ff",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/a3d682803f04e2d9fbc1e2d2637b228117e2e9ff",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a3d682803f04e2d9fbc1e2d2637b228117e2e9ff/comments",
    "author": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "b62b8f38ffeceec92775672c37cec99da9053420",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b62b8f38ffeceec92775672c37cec99da9053420",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/b62b8f38ffeceec92775672c37cec99da9053420"
      }
    ],
    "stats": {
      "total": 15,
      "additions": 13,
      "deletions": 2
    },
    "files": [
      {
        "sha": "6ec4c86856e2031fabb4b0794fd1a51d0b3bed81",
        "filename": "src/rpc/misc.cpp",
        "status": "modified",
        "additions": 11,
        "deletions": 1,
        "changes": 12,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a3d682803f04e2d9fbc1e2d2637b228117e2e9ff/src/rpc/misc.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a3d682803f04e2d9fbc1e2d2637b228117e2e9ff/src/rpc/misc.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/misc.cpp?ref=a3d682803f04e2d9fbc1e2d2637b228117e2e9ff",
        "patch": "@@ -364,7 +364,8 @@ UniValue verifymessage(const JSONRPCRequest& request)\n         throw JSONRPCError(RPC_TYPE_ERROR, \"Invalid address\");\n \n     CKeyID keyID;\n-    if (!addr.GetKeyID(keyID))\n+    CScriptID scriptID;\n+    if (!addr.GetKeyID(keyID) && !addr.GetScriptID(scriptID))\n         throw JSONRPCError(RPC_TYPE_ERROR, \"Address does not refer to key\");\n \n     bool fInvalid = false;\n@@ -381,6 +382,15 @@ UniValue verifymessage(const JSONRPCRequest& request)\n     if (!pubkey.RecoverCompact(ss.GetHash(), vchSig))\n         return false;\n \n+    //Possibly p2sh-p2wpkh\n+    if (scriptID != CScriptID()) {\n+        CScriptID nestedScriptID = CScriptID(CScript() << OP_0 << ToByteVector(pubkey.GetID()));\n+        //Failure here could mean address is any other type of p2sh\n+        if (scriptID != nestedScriptID) {\n+            throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Given P2SH address does not match the signature.\");\n+        }\n+    }\n+\n     return (pubkey.GetID() == keyID);\n }\n "
      },
      {
        "sha": "c8d81ce87ec3d1e4be2b5ca65f4c641217bcf766",
        "filename": "src/wallet/rpcwallet.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 1,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a3d682803f04e2d9fbc1e2d2637b228117e2e9ff/src/wallet/rpcwallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a3d682803f04e2d9fbc1e2d2637b228117e2e9ff/src/wallet/rpcwallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/rpcwallet.cpp?ref=a3d682803f04e2d9fbc1e2d2637b228117e2e9ff",
        "patch": "@@ -520,7 +520,8 @@ UniValue signmessage(const JSONRPCRequest& request)\n         throw JSONRPCError(RPC_TYPE_ERROR, \"Invalid address\");\n \n     CKeyID keyID;\n-    if (!addr.GetKeyID(keyID))\n+    CScriptID scriptID;\n+    if (!addr.GetKeyID(keyID) && (!addr.GetScriptID(scriptID) || !GetWitnessKeyID(pwalletMain, scriptID, keyID)))\n         throw JSONRPCError(RPC_TYPE_ERROR, \"Address does not refer to key\");\n \n     CKey key;"
      }
    ]
  },
  {
    "sha": "6a670008eda4fa02824e4e522558c1eabe8b9f78",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo2YTY3MDAwOGVkYTRmYTAyODI0ZTRlNTIyNTU4YzFlYWJlOGI5Zjc4",
    "commit": {
      "author": {
        "name": "instagibbs",
        "email": "gsanders87@gmail.com",
        "date": "2016-10-25T19:14:40Z"
      },
      "committer": {
        "name": "instagibbs",
        "email": "gsanders87@gmail.com",
        "date": "2016-11-07T17:25:45Z"
      },
      "message": "Accept p2sh-p2wpkh addr in createmultisig_redeemScript",
      "tree": {
        "sha": "e932b47b2325a554e24dfeb14b299f0d38d5161b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e932b47b2325a554e24dfeb14b299f0d38d5161b"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6a670008eda4fa02824e4e522558c1eabe8b9f78",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6a670008eda4fa02824e4e522558c1eabe8b9f78",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/6a670008eda4fa02824e4e522558c1eabe8b9f78",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6a670008eda4fa02824e4e522558c1eabe8b9f78/comments",
    "author": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "a3d682803f04e2d9fbc1e2d2637b228117e2e9ff",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a3d682803f04e2d9fbc1e2d2637b228117e2e9ff",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/a3d682803f04e2d9fbc1e2d2637b228117e2e9ff"
      }
    ],
    "stats": {
      "total": 3,
      "additions": 2,
      "deletions": 1
    },
    "files": [
      {
        "sha": "8510ed033ea0e0a763c1102a3f0438c3621fab7c",
        "filename": "src/rpc/misc.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 1,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6a670008eda4fa02824e4e522558c1eabe8b9f78/src/rpc/misc.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6a670008eda4fa02824e4e522558c1eabe8b9f78/src/rpc/misc.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/misc.cpp?ref=6a670008eda4fa02824e4e522558c1eabe8b9f78",
        "patch": "@@ -251,7 +251,8 @@ CScript _createmultisig_redeemScript(const UniValue& params)\n         if (pwalletMain && address.IsValid())\n         {\n             CKeyID keyID;\n-            if (!address.GetKeyID(keyID))\n+            CScriptID scriptID;\n+            if (!address.GetKeyID(keyID) && (!address.GetScriptID(scriptID) || !GetWitnessKeyID(pwalletMain, scriptID, keyID)))\n                 throw runtime_error(\n                     strprintf(\"%s does not refer to a key\",ks));\n             CPubKey vchPubKey;"
      }
    ]
  }
]