[
  {
    "sha": "a88640e123ca0c00d81719f9a009699c26e85b90",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzphODg2NDBlMTIzY2EwYzAwZDgxNzE5ZjlhMDA5Njk5YzI2ZTg1Yjkw",
    "commit": {
      "author": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2018-10-28T13:48:05Z"
      },
      "committer": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2019-01-04T18:01:20Z"
      },
      "message": "Fix minimized window bug on Linux\n\nOn some Linux systems the minimized to the taskbar (iconified) main\nwindow cannot be restored properly using actions from the systray icon\nmenu when QSystemTrayIcon::contextMenu() is a child of the main window.",
      "tree": {
        "sha": "5baf4c85696b71c6409d25e5c82c5e200d92e114",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5baf4c85696b71c6409d25e5c82c5e200d92e114"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a88640e123ca0c00d81719f9a009699c26e85b90",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE0dvyxLlvLev0wWZUQQEIES5+qB8FAlwvn3AACgkQQQEIES5+\nqB+Qbw//Z+aAFuLT5SMlciJXgbK2RCZTXo4sxnHzPJfQgrxoSi7LyeY+dSOHYnie\n2yMtoWsqeqrBkkFz4TRrHBscRatx9nV/a99Lt/orE5T/ZkGI79WfkEjz2BQBdt1V\nCaxpwlzKKs52Hut2GyH5Kd4BF850ee6W+rSCbHROAew9lorXu4Fzb15gh/K4ANvK\nJa+0rEye/A0c07Q1OUd+bRH4nu0zBHZe/DTBV9wEizyEGTpHT1+TOxMt3uBzqKwY\nBOEqjDVjRuczNgLtiv7uOPBBgxHmH6i/wwduGY/tsIhuPqC6e97Iv0AijqA4AJR1\nGaLtUaysc1U6G45XeU6/vw12gfMTJCYpCa2V0AzNQA1/zds/L13b2rIlM7v1Jntz\nTvClZC0AhoYfXcOBSzBlwTKc69Ute/o9/SXRPZ1L49WXS69dCHzF1sncDNtj2Bif\nNKbZEPIWKjD4zsHc0HTcYcweYLlN4DSsf1LiTAT1SJLnBKGik/yOEfT+rVNOKtPS\n+91n1R7zgPLGD+szuUDBK361at9Oc6BPEf2vTffigx6MqcL+au4KK98qTpilmd66\n/fXhSlBDjsLc8jUVund7fy6Tm8yXboUdjomg70NyHwdPyjzFR2NqXRu/RO6qh94A\nZxk0tpMZSqTtb+BFK2bU1v8/hHrYdBHNVVJLTaWIh+hkcjG22ZY=\n=sKCU\n-----END PGP SIGNATURE-----",
        "payload": "tree 5baf4c85696b71c6409d25e5c82c5e200d92e114\nparent c651265c934c84c683aa054f2a456b12acc41590\nauthor Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1540734485 +0200\ncommitter Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1546624880 +0200\n\nFix minimized window bug on Linux\n\nOn some Linux systems the minimized to the taskbar (iconified) main\nwindow cannot be restored properly using actions from the systray icon\nmenu when QSystemTrayIcon::contextMenu() is a child of the main window.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a88640e123ca0c00d81719f9a009699c26e85b90",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/a88640e123ca0c00d81719f9a009699c26e85b90",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a88640e123ca0c00d81719f9a009699c26e85b90/comments",
    "author": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "c651265c934c84c683aa054f2a456b12acc41590",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c651265c934c84c683aa054f2a456b12acc41590",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/c651265c934c84c683aa054f2a456b12acc41590"
      }
    ],
    "stats": {
      "total": 14,
      "additions": 7,
      "deletions": 7
    },
    "files": [
      {
        "sha": "d7e8d810cc597a6eaede8ac168fb16546441f40a",
        "filename": "src/qt/bitcoingui.cpp",
        "status": "modified",
        "additions": 5,
        "deletions": 5,
        "changes": 10,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a88640e123ca0c00d81719f9a009699c26e85b90/src/qt/bitcoingui.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a88640e123ca0c00d81719f9a009699c26e85b90/src/qt/bitcoingui.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoingui.cpp?ref=a88640e123ca0c00d81719f9a009699c26e85b90",
        "patch": "@@ -36,6 +36,7 @@\n #include <util/system.h>\n \n #include <iostream>\n+#include <memory>\n \n #include <QAction>\n #include <QApplication>\n@@ -44,6 +45,7 @@\n #include <QDesktopWidget>\n #include <QDragEnterEvent>\n #include <QListWidget>\n+#include <QMenu>\n #include <QMenuBar>\n #include <QMessageBox>\n #include <QMimeData>\n@@ -53,6 +55,7 @@\n #include <QStackedWidget>\n #include <QStatusBar>\n #include <QStyle>\n+#include <QSystemTrayIcon>\n #include <QTimer>\n #include <QToolBar>\n #include <QUrlQuery>\n@@ -73,6 +76,7 @@ const std::string BitcoinGUI::DEFAULT_UIPLATFORM =\n BitcoinGUI::BitcoinGUI(interfaces::Node& node, const PlatformStyle *_platformStyle, const NetworkStyle *networkStyle, QWidget *parent) :\n     QMainWindow(parent),\n     m_node(node),\n+    trayIconMenu{new QMenu()},\n     platformStyle(_platformStyle)\n {\n     QSettings settings;\n@@ -610,16 +614,12 @@ void BitcoinGUI::createTrayIconMenu()\n     if (!trayIcon)\n         return;\n \n-    trayIconMenu = new QMenu(this);\n-    trayIcon->setContextMenu(trayIconMenu);\n-\n+    trayIcon->setContextMenu(trayIconMenu.get());\n     connect(trayIcon, &QSystemTrayIcon::activated, this, &BitcoinGUI::trayIconActivated);\n #else\n     // Note: On macOS, the Dock icon is used to provide the tray's functionality.\n     MacDockIconHandler *dockIconHandler = MacDockIconHandler::instance();\n     connect(dockIconHandler, &MacDockIconHandler::dockIconClicked, this, &BitcoinGUI::macosDockIconActivated);\n-\n-    trayIconMenu = new QMenu(this);\n     trayIconMenu->setAsDockMenu();\n #endif\n "
      },
      {
        "sha": "813bbe278807b54d2495ce5b27f55fbb58cb654f",
        "filename": "src/qt/bitcoingui.h",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a88640e123ca0c00d81719f9a009699c26e85b90/src/qt/bitcoingui.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a88640e123ca0c00d81719f9a009699c26e85b90/src/qt/bitcoingui.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoingui.h?ref=a88640e123ca0c00d81719f9a009699c26e85b90",
        "patch": "@@ -16,7 +16,6 @@\n #include <QLabel>\n #include <QMainWindow>\n #include <QMap>\n-#include <QMenu>\n #include <QPoint>\n #include <QSystemTrayIcon>\n \n@@ -47,6 +46,7 @@ class Node;\n QT_BEGIN_NAMESPACE\n class QAction;\n class QComboBox;\n+class QMenu;\n class QProgressBar;\n class QProgressDialog;\n QT_END_NAMESPACE\n@@ -141,7 +141,7 @@ class BitcoinGUI : public QMainWindow\n     QComboBox* m_wallet_selector = nullptr;\n \n     QSystemTrayIcon* trayIcon = nullptr;\n-    QMenu* trayIconMenu = nullptr;\n+    const std::unique_ptr<QMenu> trayIconMenu;\n     Notificator* notificator = nullptr;\n     RPCConsole* rpcConsole = nullptr;\n     HelpMessageDialog* helpMessageDialog = nullptr;"
      }
    ]
  }
]