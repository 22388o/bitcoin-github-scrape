luke-jr,2012-12-13T00:45:11Z,"Looks good to me. Note, however, that ultraprune currently has problems in some cases with hard linked files. IMO those should be fixed regardless, so not a blocker for this.\n",https://github.com/bitcoin/bitcoin/pull/2099#issuecomment-11317348,11317348,
sipa,2012-12-13T00:53:43Z,@luke-jr I only know of problems with read-only files. Whether a file is hard-linked shouldn't be even be observable by applications (except for the output of stat()).\n,https://github.com/bitcoin/bitcoin/pull/2099#issuecomment-11317554,11317554,
sipa,2012-12-13T22:37:13Z,"This is definitely the easiest solution imaginable, assuming it works for Windows users.\n\nImporting instead of reindexing is probably sometimes a better choice (it helps with heavily fragmented block files, for example, and results in the intended smaller files), but I suppose those cases can be handled manually.\n",https://github.com/bitcoin/bitcoin/pull/2099#issuecomment-11356830,11356830,
BitcoinPullTester,2012-12-16T03:03:55Z,"Automatic sanity-testing: FAILED BUILD/TEST, see http://jenkins.bluematt.me/pull-tester/662bdaa9c36c0b0da29edd82fa9bebbee9a1ecaa for binaries and test log.\n\nThis could happen for one of several reasons:\n1. It chanages paths in makefile.linux-mingw or otherwise changes build scripts in a way that made them incompatible with the automated testing scripts\n2. It does not build on either Linux i386",https://github.com/bitcoin/bitcoin/pull/2099#issuecomment-11413599,11413599,
gavinandresen,2012-12-16T17:24:30Z,Thanks @sipa -- updated to use string().c_str() and rebased.\n,https://github.com/bitcoin/bitcoin/pull/2099#issuecomment-11420113,11420113,
BitcoinPullTester,2012-12-16T17:43:10Z,"Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/f4445f9982a760869c430f3d4b1302f7eb509bd8 for binaries and test log.\n",https://github.com/bitcoin/bitcoin/pull/2099#issuecomment-11420314,11420314,
rebroad,2012-12-23T14:53:50Z,"If the linking fails, can it copy or move the file instead rather than download from the genesis block?\n",https://github.com/bitcoin/bitcoin/pull/2099#issuecomment-11646785,11646785,
luke-jr,2012-12-23T22:18:45Z,I wonder how difficult it would be to have the code just use the old blk000?.dat files directly when they exist.\n,https://github.com/bitcoin/bitcoin/pull/2099#issuecomment-11651295,11651295,
sipa,2012-12-24T00:02:56Z,"The reason to move to a new naming scheme was:\n- to have them in a separate directory, so they can be moved more easily to a different volume\n- to make pruning easier eventually (as only being able to choose storage with 2 GiB accuracy is a bit crude).\n\nHardlinking removes that second advantage, but by the time we're actually going to support pruning, I suppose many setups will not be using an",https://github.com/bitcoin/bitcoin/pull/2099#issuecomment-11652244,11652244,
luke-jr,2012-12-24T00:33:40Z,"I was thinking more like ""if blk000?.dat exist, start new files with the next number. when reading, if the blk0000?.dat is missing, check blk000?.dat"" so the files would be stored as the same filenum :)\n",https://github.com/bitcoin/bitcoin/pull/2099#issuecomment-11652478,11652478,
sipa,2012-12-25T17:39:30Z,"In case hardlinking fails, I don't think there's any harm in adding the found source files automatically to the list of files to be -loadblock='ed. They will be downloaded anyway otherwise, and loadblock happens in a background thread anyway, so it can only speed things up.\n",https://github.com/bitcoin/bitcoin/pull/2099#issuecomment-11674879,11674879,
gavinandresen,2013-01-08T14:18:22Z,"RE: doing something smart if the hardlink fails:\n\nI'm not planning on testing that, and I don't believe in adding untested code even if it should OBVIOUSLY work.\n\nIf somebody wants to implement and test that as a separate pull, great, but it is not on my priority list because it would benefit so few (maybe zero) people.\n",https://github.com/bitcoin/bitcoin/pull/2099#issuecomment-11998550,11998550,
gavinandresen,2013-01-09T19:07:39Z,Test plan with testing bounties:\n  https://github.com/gavinandresen/QA/blob/master/HardLinksUpgrade.md\n\nFirst bounty claimed.\n,https://github.com/bitcoin/bitcoin/pull/2099#issuecomment-12061200,12061200,
schildbach,2013-01-09T19:45:12Z,"@gavinandresen Can you explain in the ""build binaries yourself"" case which branch we need to build? The main ""bitcoin"" repository does not appear to contain 0.8 related stuff.\n",https://github.com/bitcoin/bitcoin/pull/2099#issuecomment-12062998,12062998,
sipa,2013-01-09T20:12:42Z,"@Goonie from the branch this pull request refers to. bitcoin/bitcoin.git master does in fact contain the code that will become 0.8 (it's marked ""0.7.99"" now).\n",https://github.com/bitcoin/bitcoin/pull/2099#issuecomment-12064286,12064286,
schildbach,2013-01-11T09:36:17Z,"The hard-linking does not appear to work on my system (Ubuntu 12.10 64bit). In two different cases, my .bitcoin directory grew from 6.3 GB to nearly 12 GB and my df (disk free) significant reduced. The files in blocks are of different size than the blk*.dat files and have different inode numbers.\n\nThe whole process tool several hours.\n",https://github.com/bitcoin/bitcoin/pull/2099#issuecomment-12137312,12137312,
sipa,2013-01-11T12:14:23Z,"@Goonie Very strange. Which commit did you use (bitcoin reports this in the version string, see the first debug.log line printed)\n",https://github.com/bitcoin/bitcoin/pull/2099#issuecomment-12141832,12141832,
schildbach,2013-01-11T12:33:13Z,@sipa 2013-01-10 22:20:55 Bitcoin version v0.7.1-297-g429915b-beta (2013-01-06 07:26:43 -0800)\n\nMaybe I should mention that I was using the Ubuntu package (0.7.2-quantal2) before. which is a little bit different to the official build in its dependencies.\n,https://github.com/bitcoin/bitcoin/pull/2099#issuecomment-12142385,12142385,
sipa,2013-01-11T12:57:39Z,"@Goonie I'm afraid I confused you. You built from git head, it seems. This page is a pull request: a change requested to be merged in git head, but not yet there. The branch to pull from is in gavin's repository (https://github.com/gavinandresen/bitcoin-git.git), in branch blkfile_upgrade.\n\nIt's also included in my 'turbo' branch (https://github.com/sipa/bitcoin.git, branch turbo), together with",https://github.com/bitcoin/bitcoin/pull/2099#issuecomment-12143160,12143160,
schildbach,2013-01-11T14:55:07Z,"@sipa Ok, this time I'm using v0.7.1-269-gf4445f9-beta. It looks like its using hard links in the blocks directory. It managed to reindex about 211700 blocks in 80 minutes. Then suddenly the status bar text disappeared. From the icons on the lower right and from debug.log I can tell its still accepting blocks, but at a relatively low rate of 1 block per second (still better than before).\n",https://github.com/bitcoin/bitcoin/pull/2099#issuecomment-12147250,12147250,
schildbach,2013-01-11T16:19:28Z,"@sipa Another issue: the ""Show QR code"" context menu option silently fails. I remember it was working before because I was using QR codes to scan with Bitcoin Wallet.\n",https://github.com/bitcoin/bitcoin/pull/2099#issuecomment-12151231,12151231,
gavinandresen,2013-01-11T16:26:25Z,@Goonie : context menu breaking wouldn't be a @sipa bug-- can you open a new issue about that?\n,https://github.com/bitcoin/bitcoin/pull/2099#issuecomment-12151573,12151573,
Diapolo,2013-01-11T19:24:25Z,"@Goonie The GUI is using an estimated block count, which it get's from the connected nodes and the last checkpoint, to be able to compute a ""Blocks left"" number and to display the progressbar. If you have more blocks than the estimated block count there is nothing to predict anymore and so the progressbar get's hidden.\n",https://github.com/bitcoin/bitcoin/pull/2099#issuecomment-12159432,12159432,
sipa,2013-01-13T18:37:01Z,ACK\n,https://github.com/bitcoin/bitcoin/pull/2099#issuecomment-12197801,12197801,
Diapolo,2012-12-13T06:10:09Z,IMHO this could be an InitWarning() and the message should be a little more user friendly and translatable.\n,https://github.com/bitcoin/bitcoin/pull/2099#discussion_r2404063,2404063,src/init.cpp
gavinandresen,2012-12-13T19:48:41Z,"I don't want users to be told that hardlinking failed-- most end-users won't know what a hard-link is, and if it DOES fail I don't expect them to do anything (they'll just fall-back to downloading the whole chain again).\n",https://github.com/bitcoin/bitcoin/pull/2099#discussion_r2412507,2412507,src/init.cpp
sipa,2012-12-16T14:40:25Z,"source.string().c_str(), etc. if you want to be compatible with older filesystem boost lib.\n",https://github.com/bitcoin/bitcoin/pull/2099#discussion_r2430015,2430015,src/init.cpp
