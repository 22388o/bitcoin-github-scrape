laanwj,2017-05-03T14:17:13Z,"> Forces GUI to Qt4 to fix various issues people have been seeing\non Ubuntu and elsewhere with Qt5.\n\nWhich issues have you seen with Qt5 apart from the Unity tray icon problem?\n\n> Reverts 70899d7 (Bitcoin does not enable ""instant payments"",\nnot is transaction management ""carried out collectively by the\nnetwork"", for whatever ""transaction management"" means, finally\nBitcoin Core is n",https://github.com/bitcoin/bitcoin/pull/10328#issuecomment-298924225,298924225,
TheBlueMatt,2017-05-03T14:21:19Z,"Hm, I was under the impression there were tray icon issues outside of Ubuntu, but that may be out-of-date (or a static-linking issue?)",https://github.com/bitcoin/bitcoin/pull/10328#issuecomment-298925399,298925399,
parazyd,2017-05-03T14:29:23Z,"@TheBlueMatt There are no Qt5 issues besides Ubuntu. I've tested the build on Devuan's KDE5 (Plasma), which is in turn the exact same environment provided in Debian. So Ubuntu is your only problem. If you want to block all other distros from using current software because of one distro's bug, that's your choice, but it is not a sane one. Build it with Qt5 and then fix it in Ubuntu.",https://github.com/bitcoin/bitcoin/pull/10328#issuecomment-298927699,298927699,
TheBlueMatt,2017-05-03T15:47:44Z,"@parazyd up until today the *only* user of contrib/debian I was aware of was the PPA, and there are very few issues (aside from some cosmetic ones) with building with Qt4 instead of 5 (though that may be different on KDE5, apparently). I'm happy to keep on maintaining a fork of contrib/debain instead if you want to maintain contrib/debian, but at that point we might as well just delete the folder ",https://github.com/bitcoin/bitcoin/pull/10328#issuecomment-298952104,298952104,
luke-jr,2017-05-03T19:48:44Z,"I don't see how *optional* UPnP support is a bad thing. Even when built with it, it's still disabled by default.\n\nOther than that, utACK.",https://github.com/bitcoin/bitcoin/pull/10328#issuecomment-299015948,299015948,
parazyd,2017-05-03T20:06:20Z,ACK. Agreed with @luke-jr,https://github.com/bitcoin/bitcoin/pull/10328#issuecomment-299020177,299020177,
TheBlueMatt,2017-05-03T20:09:40Z,"@luke I believe its enabled by default in Qt, no?",https://github.com/bitcoin/bitcoin/pull/10328#issuecomment-299021006,299021006,
luke-jr,2017-05-03T20:11:37Z,"@TheBlueMatt Not since the last exploit IIRC.\n\nThis fails for precise:\n```\nThe following packages have unmet dependencies:\n sbuild-build-depends-bitcoin-dummy : Depends: libzmq3-dev but it is not installable\n```",https://github.com/bitcoin/bitcoin/pull/10328#issuecomment-299021492,299021492,
TheBlueMatt,2017-05-03T20:16:46Z,"Ah, ok, I suppose we could re-add UPnP to the builds. Not sure it matters much, but ok.\n\nWe can no longer build on precise period due to https://svn.boost.org/trac/boost/ticket/6198.\n\nOn May 3, 2017 4:11:46 PM EDT, Luke Dashjr <notifications@github.com> wrote:\n>@TheBlueMatt Not since the last exploit IIRC.\n>\n>This fails for precise:\n>```\n>The following packages have unmet dependencies:\n>",https://github.com/bitcoin/bitcoin/pull/10328#issuecomment-299022782,299022782,
luke-jr,2017-05-03T23:24:40Z,Ah. I guess precise doesn't matter anymore anyway (supposedly support for it ended last month).,https://github.com/bitcoin/bitcoin/pull/10328#issuecomment-299063041,299063041,
jaromil,2017-05-04T06:37:33Z,"You need a neew maintainer for Debian builds, not a new PR rushed by the old neglecting maintainer when a new contribution comes in, IMHO. This turf-war attitude calls for burn out. At Dyne we are actively testing the builds proposed and can well deal with guidelines and complexities of gnu/linux packaging, so @bluematt once again (like at the time of autoconf) you are missing an occasion for havi",https://github.com/bitcoin/bitcoin/pull/10328#issuecomment-299107311,299107311,
TheBlueMatt,2017-05-04T14:45:11Z,"@jaromil are y'all using contrib/debian for anything? If it gets use I'm happy to start maintaining it again (or @parazyd can). The PPA never falls behind, just this dir which I've neglected updating (but I assume not many people used it given it was missing the libevent dep for a long time).\n\nUnrelatedly, would be nice if we have a way to switch to Qt5 when building on non-ubuntu, @parazyd an",https://github.com/bitcoin/bitcoin/pull/10328#issuecomment-299206814,299206814,
parazyd,2017-05-04T15:22:08Z,"@TheBlueMatt Well, the `debian/rules` file is a Makefile. We could use environment flags to differ between Ubuntu and Debian I guess.\n\nThe contrib/debian is being used by at least three distributions at this moment: Ubuntu, Devuan, and heads.",https://github.com/bitcoin/bitcoin/pull/10328#issuecomment-299218717,299218717,
luke-jr,2017-05-04T15:25:26Z,But the qt4/5 dep is in `debian/control` - can that have conditionals?,https://github.com/bitcoin/bitcoin/pull/10328#issuecomment-299219704,299219704,
parazyd,2017-05-04T15:32:30Z,"@luke-jr I'll try to find out. If possible, then it is the best solution, since the configure script will then prefer what's found. And as long as it's built in some sort of CI, the environment is clean.\n\nEDIT:\nIndeed we have a thing like the following:\nhttps://raphaelhertzog.com/2010/09/27/different-dependencies-between-debian-and-ubuntu-but-common-source-package/",https://github.com/bitcoin/bitcoin/pull/10328#issuecomment-299221872,299221872,
TheBlueMatt,2017-05-04T15:44:47Z,"@luke-jr the deps of the built package are auto-guessed from library deps, I believe, so it may be sufficient to just change which libraries configure links against, even if buildeps requires both qt4 and qt5 (though I havent tested this).",https://github.com/bitcoin/bitcoin/pull/10328#issuecomment-299225523,299225523,
jaromil,2017-05-04T19:12:12Z,"@TheBlueMatt there are the distro efforts @parazyd mentions and we are planning for more hardened gnu/linux based VM environments (so to say containers) and what not, some fancy distro tricks for isolated environments. Within the sphere of Debian&co the backporting libdb4.8 to Jessie was a long due liberation step finally taken and you know well the berkeleydb mess we are talking about. So yea, th",https://github.com/bitcoin/bitcoin/pull/10328#issuecomment-299281393,299281393,
TheBlueMatt,2017-05-04T21:16:28Z,"@parazyd I pushed a version that should use Qt5 automagically on Debian-based distros, but dont have a machine handy to test on, care to give it a whirl?",https://github.com/bitcoin/bitcoin/pull/10328#issuecomment-299311565,299311565,
TheBlueMatt,2017-05-05T17:31:00Z,Fixed Qt version auto-detection and re-enabled UPnP.,https://github.com/bitcoin/bitcoin/pull/10328#issuecomment-299526707,299526707,
theuni,2017-05-04T18:11:03Z,Minimum boost for 0.14 is 1.47.,https://github.com/bitcoin/bitcoin/pull/10328#discussion_r114850116,114850116,contrib/debian/control
TheBlueMatt,2017-05-04T21:15:38Z,Fixed.,https://github.com/bitcoin/bitcoin/pull/10328#discussion_r114889631,114889631,contrib/debian/control
luke-jr,2017-05-04T21:30:23Z,"Don't forget to drop `--without-miniupnpc`?\n\n(and restore `libminiupnpc8-dev | libminiupnpc-dev (>> 1.6),` in build deps)",https://github.com/bitcoin/bitcoin/pull/10328#discussion_r114892421,114892421,contrib/debian/rules
luke-jr,2017-05-04T21:45:03Z,"```\nQT=$(shell dpkg-vendor --derives-from Ubuntu && echo qt4 || echo qt5)\n```\n\nor better yet (to enable Qt5 on Ubuntu 17.10+ which is GNOME instead of Unity):\n\n```\nQT=$(shell { [ $(lsb_release -s -i) = Ubuntu ] && { [ $(lsb_release -s -r | cut -d. -f1) -lt 17 ] || [ $(lsb_release -s -r) = 17.04 ]; } } && echo qt4 || echo qt5)\n```",https://github.com/bitcoin/bitcoin/pull/10328#discussion_r114895126,114895126,contrib/debian/rules
TheBlueMatt,2017-05-04T21:52:38Z,Maybe lets wait until 10.17 before we lock in using qt5 in 17.10 in case they slip to the next release or so?,https://github.com/bitcoin/bitcoin/pull/10328#discussion_r114896530,114896530,contrib/debian/rules
luke-jr,2017-05-04T21:56:32Z,k,https://github.com/bitcoin/bitcoin/pull/10328#discussion_r114897211,114897211,contrib/debian/rules
parazyd,2017-05-04T21:56:40Z,"@TheBlueMatt Your if clause doesn't pass $QT correctly, on my Devuan build it stays empty. @luke-jr 's lsb_release oneliner works.",https://github.com/bitcoin/bitcoin/pull/10328#discussion_r114897235,114897235,contrib/debian/rules
TheBlueMatt,2017-05-04T21:57:19Z,"Wait, the dpkg-vendor version doesn't work, or the if doesnt hold the variable outside of the scope?",https://github.com/bitcoin/bitcoin/pull/10328#discussion_r114897340,114897340,contrib/debian/rules
parazyd,2017-05-04T21:59:47Z,Is there a reason for introducing these typos?,https://github.com/bitcoin/bitcoin/pull/10328#discussion_r114897741,114897741,contrib/debian/changelog
parazyd,2017-05-04T22:15:59Z,$(QT) is empty on the ./configure call,https://github.com/bitcoin/bitcoin/pull/10328#discussion_r114900168,114900168,contrib/debian/rules
luke-jr,2017-05-04T22:17:48Z,"Yes, read the OP...\n\n> Partially reverts 9f68ed6 (which fixed spelling in a changelog,\nthough generally changelogs should be append-only).",https://github.com/bitcoin/bitcoin/pull/10328#discussion_r114900445,114900445,contrib/debian/changelog
luke-jr,2017-05-04T22:18:20Z,"That's odd, I would expect both to *work*... :/",https://github.com/bitcoin/bitcoin/pull/10328#discussion_r114900523,114900523,contrib/debian/rules
parazyd,2017-05-04T22:20:45Z,"OK, it seems if you don't indent the QT= assigns, it works.",https://github.com/bitcoin/bitcoin/pull/10328#discussion_r114900924,114900924,contrib/debian/rules
parazyd,2017-05-04T22:30:06Z,I fail to understand the reasoning.,https://github.com/bitcoin/bitcoin/pull/10328#discussion_r114902323,114902323,contrib/debian/changelog
