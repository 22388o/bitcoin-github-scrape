[
  {
    "sha": "0c928cb13cc9146bb2c0f39d1d3b6e1e660a375d",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowYzkyOGNiMTNjYzkxNDZiYjJjMGYzOWQxZDNiNmUxZTY2MGEzNzVk",
    "commit": {
      "author": {
        "name": "Cory Fields",
        "email": "cory-nospam-@coryfields.com",
        "date": "2016-07-07T17:46:59Z"
      },
      "committer": {
        "name": "Cory Fields",
        "email": "cory-nospam-@coryfields.com",
        "date": "2016-07-07T18:15:17Z"
      },
      "message": "build: Fix Qt5PlatformSupport check without pkg-config\n\nThe non-pkg-config case can't use pkg-config to check the version.\n\nAlso, make sure that the check is properly guarded in the case of missing\npkg-config macros.",
      "tree": {
        "sha": "f45d6062b7d84f68960fc20524ab9817e34e85d3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f45d6062b7d84f68960fc20524ab9817e34e85d3"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0c928cb13cc9146bb2c0f39d1d3b6e1e660a375d",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0c928cb13cc9146bb2c0f39d1d3b6e1e660a375d",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/0c928cb13cc9146bb2c0f39d1d3b6e1e660a375d",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0c928cb13cc9146bb2c0f39d1d3b6e1e660a375d/comments",
    "author": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "91abb77970f47b1f6166e564bc695ed30c75bb63",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/91abb77970f47b1f6166e564bc695ed30c75bb63",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/91abb77970f47b1f6166e564bc695ed30c75bb63"
      }
    ],
    "stats": {
      "total": 20,
      "additions": 16,
      "deletions": 4
    },
    "files": [
      {
        "sha": "d26136cbe9a45fbc484d85e67105710dc0e92c66",
        "filename": "build-aux/m4/bitcoin_qt.m4",
        "status": "modified",
        "additions": 16,
        "deletions": 4,
        "changes": 20,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0c928cb13cc9146bb2c0f39d1d3b6e1e660a375d/build-aux/m4/bitcoin_qt.m4",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0c928cb13cc9146bb2c0f39d1d3b6e1e660a375d/build-aux/m4/bitcoin_qt.m4",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/build-aux/m4/bitcoin_qt.m4?ref=0c928cb13cc9146bb2c0f39d1d3b6e1e660a375d",
        "patch": "@@ -331,8 +331,9 @@ AC_DEFUN([_BITCOIN_QT_FIND_STATIC_PLUGINS],[\n           QT_LIBS=\"$QT_LIBS -L$qt_plugin_path/accessible\"\n         fi\n       fi\n-     m4_ifdef([PKG_CHECK_MODULES],[\n      if test x$use_pkgconfig = xyes; then\n+     : dnl\n+     m4_ifdef([PKG_CHECK_MODULES],[\n        PKG_CHECK_MODULES([QTPLATFORM], [Qt5PlatformSupport], [QT_LIBS=\"$QTPLATFORM_LIBS $QT_LIBS\"])\n        if test x$TARGET_OS = xlinux; then\n          PKG_CHECK_MODULES([X11XCB], [x11-xcb], [QT_LIBS=\"$X11XCB_LIBS $QT_LIBS\"])\n@@ -342,12 +343,23 @@ AC_DEFUN([_BITCOIN_QT_FIND_STATIC_PLUGINS],[\n        elif test x$TARGET_OS = xdarwin; then\n          PKG_CHECK_MODULES([QTPRINT], [Qt5PrintSupport], [QT_LIBS=\"$QTPRINT_LIBS $QT_LIBS\"])\n        fi\n+     ])\n      else\n-       if ${PKG_CONFIG} --exists \"Qt5Core >= 5.6\" 2>/dev/null; then\n-         QT_LIBS=\"-lQt5PlatformSupport $QT_LIBS\"\n+       if test x$TARGET_OS = xwindows; then\n+         AC_CACHE_CHECK(for Qt >= 5.6, bitcoin_cv_need_platformsupport,[AC_COMPILE_IFELSE([AC_LANG_PROGRAM(\n+             [[#include <QtCore>]],[[\n+             #if QT_VERSION < 0x050600\n+             choke;\n+             #endif\n+             ]])],\n+           [bitcoin_cv_need_platformsupport=yes],\n+           [bitcoin_cv_need_platformsupport=no])\n+         ])\n+         if test x$bitcoin_cv_need_platformsupport = xyes; then\n+           BITCOIN_QT_CHECK(AC_CHECK_LIB([${QT_LIB_PREFIX}PlatformSupport],[main],,BITCOIN_QT_FAIL(lib$QT_LIB_PREFIXPlatformSupport not found)))\n+         fi\n        fi\n      fi\n-     ])\n   else\n     if test x$qt_plugin_path != x; then\n       QT_LIBS=\"$QT_LIBS -L$qt_plugin_path/accessible\""
      }
    ]
  },
  {
    "sha": "b556beda264308e040f8d88aca4f2f386a0183d9",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiNTU2YmVkYTI2NDMwOGUwNDBmOGQ4OGFjYTRmMmYzODZhMDE4M2Q5",
    "commit": {
      "author": {
        "name": "Cory Fields",
        "email": "cory-nospam-@coryfields.com",
        "date": "2016-07-07T17:47:54Z"
      },
      "committer": {
        "name": "Cory Fields",
        "email": "cory-nospam-@coryfields.com",
        "date": "2016-07-07T18:18:12Z"
      },
      "message": "build: fix Windows builds without pkg-config\n\n- guard PKG_PROG_PKG_CONFIG with an m4_ifdef. If not building for windows,\n  require it\n- add nops as necessary in case the ifdef reduces the if/then to nothing\n- AC_SUBST some missing _LIBS. These were split out over time, but not all were\n  properly substituted. They continued to work if pkg-config is installed\n  because it does the AC_SUBST itself",
      "tree": {
        "sha": "a2fea222cc5bc3afabaf5278d7c66a2b1740e44a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a2fea222cc5bc3afabaf5278d7c66a2b1740e44a"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b556beda264308e040f8d88aca4f2f386a0183d9",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b556beda264308e040f8d88aca4f2f386a0183d9",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/b556beda264308e040f8d88aca4f2f386a0183d9",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b556beda264308e040f8d88aca4f2f386a0183d9/comments",
    "author": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "0c928cb13cc9146bb2c0f39d1d3b6e1e660a375d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0c928cb13cc9146bb2c0f39d1d3b6e1e660a375d",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/0c928cb13cc9146bb2c0f39d1d3b6e1e660a375d"
      }
    ],
    "stats": {
      "total": 27,
      "additions": 18,
      "deletions": 9
    },
    "files": [
      {
        "sha": "ae09722623f7ab03cd59c15f9b00d3de4cf1bbdd",
        "filename": "configure.ac",
        "status": "modified",
        "additions": 18,
        "deletions": 9,
        "changes": 27,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b556beda264308e040f8d88aca4f2f386a0183d9/configure.ac",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b556beda264308e040f8d88aca4f2f386a0183d9/configure.ac",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/configure.ac?ref=b556beda264308e040f8d88aca4f2f386a0183d9",
        "patch": "@@ -79,9 +79,6 @@ AC_PATH_TOOL(OBJCOPY, objcopy)\n \n AC_ARG_VAR(PYTHONPATH, Augments the default search path for python module files)\n \n-dnl pkg-config check.\n-PKG_PROG_PKG_CONFIG\n-\n # Enable wallet\n AC_ARG_ENABLE([wallet],\n   [AS_HELP_STRING([--disable-wallet],\n@@ -375,6 +372,16 @@ case $host in\n      ;;\n esac\n \n+if test x$use_pkgconfig = xyes; then\n+  m4_ifndef([PKG_PROG_PKG_CONFIG], [AC_MSG_ERROR(PKG_PROG_PKG_CONFIG macro not found. Please install pkg-config and re-run autogen.sh.)])\n+  m4_ifdef([PKG_PROG_PKG_CONFIG], [\n+  PKG_PROG_PKG_CONFIG\n+  if test x\"$PKG_CONFIG\" = \"x\"; then\n+    AC_MSG_ERROR(pkg-config not found.)\n+  fi\n+  ])\n+fi\n+\n if test x$use_comparison_tool != xno; then\n   AC_SUBST(JAVA_COMPARISON_TOOL, $use_comparison_tool)\n fi\n@@ -752,12 +759,7 @@ fi\n fi\n \n if test x$use_pkgconfig = xyes; then\n-\n-  if test x\"$PKG_CONFIG\" = \"x\"; then\n-    AC_MSG_ERROR(pkg-config not found.)\n-  fi\n-\n-  : #NOP\n+  : dnl\n   m4_ifdef(\n     [PKG_CHECK_MODULES],\n     [\n@@ -1058,6 +1060,13 @@ AC_SUBST(TESTDEFS)\n AC_SUBST(LEVELDB_TARGET_FLAGS)\n AC_SUBST(MINIUPNPC_CPPFLAGS)\n AC_SUBST(MINIUPNPC_LIBS)\n+AC_SUBST(CRYPTO_LIBS)\n+AC_SUBST(SSL_LIBS)\n+AC_SUBST(EVENT_LIBS)\n+AC_SUBST(EVENT_PTHREADS_LIBS)\n+AC_SUBST(ZMQ_LIBS)\n+AC_SUBST(PROTOBUF_LIBS)\n+AC_SUBST(QR_LIBS)\n AC_CONFIG_FILES([Makefile src/Makefile share/setup.nsi share/qt/Info.plist src/test/buildenv.py])\n AC_CONFIG_FILES([qa/pull-tester/run-bitcoind-for-test.sh],[chmod +x qa/pull-tester/run-bitcoind-for-test.sh])\n AC_CONFIG_FILES([qa/pull-tester/tests_config.py],[chmod +x qa/pull-tester/tests_config.py])"
      }
    ]
  }
]