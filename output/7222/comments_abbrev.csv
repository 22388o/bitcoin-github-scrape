jonasschnelli,2015-12-16T20:49:30Z,"Concept ACK\n\n> Which RPC calls should return this information?\n\nI think at least `listtransaction`, `gettransaction` (wallet functions) should also support this.\n\n> Would it be helpful to distinguish between a transaction signaling RBF itself [...], versus inheriting the signal from some unconfirmed parent?\n\nYes. This would be useful IMO.\n\n> The answer can only be definitive for transact",https://github.com/bitcoin/bitcoin/pull/7222#issuecomment-165240133,165240133,
luke-jr,2015-12-17T01:38:47Z,"> I'm not sure how users of bitcoind are expected to figure out which transactions could be replaced via opt-in RBF,\n\nI don't see any use case for exposing this information.\n",https://github.com/bitcoin/bitcoin/pull/7222#issuecomment-165310177,165310177,
petertodd,2015-12-17T07:39:58Z,NACK\n\nVery high risk of naive users attempting to use this to do risk mitigation and accepting zeroconf txs in cases where they're risking losses; if you care about whether a tx can be replaced you're in a position where you should be using specialist services.\n\nNote how easy it is to send replacable in practice txs by just having an ancestor tx have a low fee.\n,https://github.com/bitcoin/bitcoin/pull/7222#issuecomment-165373923,165373923,
jonasschnelli,2015-12-17T08:43:34Z,"@petertodd: for wallet users (`listtransaction`, `gettransaction`): I think there is a use case for self created wtxs where a user likes to know whether he did enable RBF or not.\n",https://github.com/bitcoin/bitcoin/pull/7222#issuecomment-165384916,165384916,
petertodd,2015-12-17T09:13:33Z,"True, but for those users knowing if a tx is RBF is already trivial - just check nSequence. Equally, we haven't even merged my obvious set RBF flag option, so what's the usecase?\n\nOn 17 December 2015 00:44:28 GMT-08:00, Jonas Schnelli notifications@github.com wrote:\n\n> @petertodd: for wallet users (`listtransaction`, `gettransaction`): I\n> think there is a use case for self created wtxs where",https://github.com/bitcoin/bitcoin/pull/7222#issuecomment-165390499,165390499,
jonasschnelli,2015-12-17T09:22:10Z,"> Equally, we haven't even merged my obvious set RBF flag option, so what's the use case?\n\nRight. This (an option to set the RBF flag when creating a wtx) would be required first. Either your overall-setting PR (#7132) or the one that supports rawtx (#7159). GUI option might follow soon.\n\n>  [...] just check nSequence\n\nIMO this is basically what this PR does.\n",https://github.com/bitcoin/bitcoin/pull/7222#issuecomment-165391951,165391951,
petertodd,2015-12-17T12:21:39Z,"No, this pull-req checks ancestors too, a critical difference thats applicable to ""risk-scoring"" BS but has little applicibility to your own transactions.\n",https://github.com/bitcoin/bitcoin/pull/7222#issuecomment-165438828,165438828,
sdaftuar,2015-12-17T14:45:17Z,"@petertodd  I don't agree, but I can understand your concern about offering a feature that could mislead users.  So rather than change existing RPC calls as I initially proposed, what about just adding two new RPC calls, one that would return the txid's of unconfirmed parents of a transaction and one that would return txid's of in-mempool descendants?  That seems to me to be more broadly useful an",https://github.com/bitcoin/bitcoin/pull/7222#issuecomment-165469929,165469929,
sdaftuar,2015-12-17T14:46:31Z,"I should add -- I think exposing mempool ancestors/descendants is also useful for code that would seek to use RBF efficiently (I'm not sure how else you'd figure out what fee to use, or whether you'll get rejected because you're replacing too many transactions, etc).\n",https://github.com/bitcoin/bitcoin/pull/7222#issuecomment-165470231,165470231,
petertodd,2015-12-17T23:55:22Z,"Is efficiency in that case actually a concern? I'd rather see that version proposed in conjunction with code that actually needs it, and benchmarks showing how badly it's needed.\n",https://github.com/bitcoin/bitcoin/pull/7222#issuecomment-165618930,165618930,
sdaftuar,2015-12-18T00:44:34Z,"How would an application even calculate what fee to use to rbf two transactions down to one? The only thing I can think of would be to call getrawmempool and recursively search for transactions which depend on the given transactions. Dumping a 300mb mempool over rpc sounds like a losing proposition to begin with, never mind reimplementing the logic bitcoind already has for iterating. \n\nIs there ",https://github.com/bitcoin/bitcoin/pull/7222#issuecomment-165625968,165625968,
dgenr8,2015-12-20T21:45:00Z,"Concept ACK.  The arguments against making this (or any basic tx attribute information) available to a user who is explicitly looking for it are beyond unconvincing.  As users, we want to see what we just did. And we want to see details about the tx that just arrived that pays us.  RPC's to return ancestors and descendants would be extremely useful too.\n\nRe: throwing a runtime error in `IsRBFOpt",https://github.com/bitcoin/bitcoin/pull/7222#issuecomment-166156831,166156831,
btcdrak,2016-01-03T20:10:11Z,needs rebase.\n,https://github.com/bitcoin/bitcoin/pull/7222#issuecomment-168536852,168536852,
sdaftuar,2016-01-04T21:12:37Z,Closing in favor of #7292.\n,https://github.com/bitcoin/bitcoin/pull/7222#issuecomment-168810318,168810318,
gmaxwell,2016-01-18T15:59:40Z,"Pardon my tardy response. With due respect to the prior arguments, they're more strongly an argument against showing unconfirmed transactions at all by default. Not against this.\n\nAn indicator for BIP125 (in particular, in listtransactions) would be both labor saving for users, and also make it more likely that parties looking at it get it right (and, for example, don't consider confirmed transa",https://github.com/bitcoin/bitcoin/pull/7222#issuecomment-172569693,172569693,
laanwj,2016-01-18T16:05:45Z,Needs rebase\n,https://github.com/bitcoin/bitcoin/pull/7222#issuecomment-172571126,172571126,
sdaftuar,2016-01-18T20:21:59Z,Rebased and updated to extend this information to `listtransactions` and `gettransaction`.  I also updated the `listtransactions.py` rpc test to exercise this code.\n\nThis appears to merge cleanly into 0.12 as well.\n,https://github.com/bitcoin/bitcoin/pull/7222#issuecomment-172644538,172644538,
sdaftuar,2016-01-19T03:17:22Z,On further thought I've removed the opt-in RBF signaling information in `getrawmempool`. I  timed that RPC call -- without this change -- on a node with a large mempool and it took over 6seconds.   Potentially multiplying that by the average chain length (limit of 25 by default) seems like a bad performance hit to suddenly introduce.\n\nI had an issue with the build not working after pulling the c,https://github.com/bitcoin/bitcoin/pull/7222#issuecomment-172726021,172726021,
sdaftuar,2016-01-19T11:39:51Z,"Sorry for the churn -- changed the name of the field in the RPC output to be ""bip125-replaceable"", and fixed the handling of confirmed transactions.\n",https://github.com/bitcoin/bitcoin/pull/7222#issuecomment-172825355,172825355,
MarcoFalke,2016-01-19T13:15:02Z,Needs rebase\n,https://github.com/bitcoin/bitcoin/pull/7222#issuecomment-172848851,172848851,
sdaftuar,2016-01-19T13:39:31Z,"Rebased (trivial conflict with #7164 in `listtransactions.py`).  Also squashed down to one commit, and verified this still merges cleanly into 0.12.\n",https://github.com/bitcoin/bitcoin/pull/7222#issuecomment-172857126,172857126,
laanwj,2016-01-20T12:40:44Z,utACK eaa8d27\n,https://github.com/bitcoin/bitcoin/pull/7222#issuecomment-173192908,173192908,
