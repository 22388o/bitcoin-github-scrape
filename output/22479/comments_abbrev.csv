DrahtBot,2021-07-19 00:11:35,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#20233](https://github.com/bitcoin/bitcoin/pull/20233) (addrman: Make consistency checks a runtime option by jnewbery)\n\",https://github.com/bitcoin/bitcoin/pull/22479#issuecomment-882139531,882139531,
jonatack,2021-07-19 05:36:03,Thanks @jarolrod for testing. I've not seen this check fail before; could you describe your config? It's hitting `src/addrman.cpp::L524`. How many tor and i2p addresses are returned if you run -addrinfo?,https://github.com/bitcoin/bitcoin/pull/22479#issuecomment-882252454,882252454,
theStack,2021-07-19 11:30:04,Concept ACK,https://github.com/bitcoin/bitcoin/pull/22479#issuecomment-882474335,882474335,
practicalswift,2021-07-24 19:59:11,"cr ACK 68ebaa03f42732e70ab6922def36b3eaaeee8b50\n\nMaking this more clear makes sense since one might incorrectly assume that `--enable-debug` would define `DEBUG_ADDRMAN`.",https://github.com/bitcoin/bitcoin/pull/22479#issuecomment-886104605,886104605,
mzumsande,2021-07-25 21:30:28,"ACK 68ebaa03f42732e70ab6922def36b3eaaeee8b50\n\nI remember enabling `DEBUG_ADDRMAN` once as described, but asking myself if I was really supposed to do it this way.",https://github.com/bitcoin/bitcoin/pull/22479#issuecomment-886260382,886260382,
jonatack,2021-07-31 15:34:01,Updated with @fanquake's suggestion per `git range-diff 6499928 68ebaa0 baac29c`,https://github.com/bitcoin/bitcoin/pull/22479#issuecomment-890365392,890365392,
practicalswift,2021-07-31 16:08:20,ACK baac29c74e475a1e7239355e710f2c6ad0cd19e0,https://github.com/bitcoin/bitcoin/pull/22479#issuecomment-890369676,890369676,
mzumsande,2021-08-01 18:16:52,ACK baac29c74e475a1e7239355e710f2c6ad0cd19e0,https://github.com/bitcoin/bitcoin/pull/22479#issuecomment-890564798,890564798,
fanquake,2021-08-05 09:45:51,"Given it's likely that #20233 is going to be merged shortly, which just removes `DEBUG_ADDRMAN`, I'm going to close this PR in favour of that change.",https://github.com/bitcoin/bitcoin/pull/22479#issuecomment-893319961,893319961,
jonatack,2021-08-05 10:11:30,"Oh, I didn't see the two changes as mutually exclusive. I think the logging is still pertinent and was planning to rebase and drop the doc commit if that PR is merged, and perhaps add some follow-ups.",https://github.com/bitcoin/bitcoin/pull/22479#issuecomment-893337196,893337196,
jonatack,2021-08-13 09:24:56,"Hm, seems I don't have the privileges required to re-open my PR for the logging. Will open a new one, I guess.",https://github.com/bitcoin/bitcoin/pull/22479#issuecomment-898316839,898316839,
jonatack,2021-08-13 09:40:43,Thanks for the reviews everyone.  Feel free to re-ACK in #22696 if you think it is helpful.,https://github.com/bitcoin/bitcoin/pull/22479#issuecomment-898331561,898331561,
jarolrod,2021-07-19 04:51:45,"is `src/addrman.h` the only file we could define this in? Are there other files we could do this in. If there are I feel as though we could improve the note here. Otherwise, we could remove `e.g`.",https://github.com/bitcoin/bitcoin/pull/22479#discussion_r671985077,671985077,doc/developer-notes.md
jonatack,2021-07-19 10:19:34,"Good point. Improved as follows:\n\n```diff\n Defining `DEBUG_ADDRMAN` performs frequent (and expensive) consistency checks on\n-the entire addrman data structure. Add this line to enable it, e.g. in\n-`src/addrman.h`\n+the entire addrman data structure. To enable it, add this line in `src/addrman.h`\n+before `void Check()`\n```\n",https://github.com/bitcoin/bitcoin/pull/22479#discussion_r672174031,672174031,doc/developer-notes.md
RiccardoMasutti,2021-07-21 17:50:14,"```suggestion\nthen build (`make`) and run bitcoind. You can use the `-debug=addrman`\n```",https://github.com/bitcoin/bitcoin/pull/22479#discussion_r674204864,674204864,doc/developer-notes.md
fanquake,2021-07-29 01:03:55,"You can also just add `-DDEBUG_ADDRMAN` to your CPPFLAGS, rather than modifying the source.",https://github.com/bitcoin/bitcoin/pull/22479#discussion_r678749224,678749224,doc/developer-notes.md
jonatack,2021-07-31 15:30:57,"Thanks, added.",https://github.com/bitcoin/bitcoin/pull/22479#discussion_r680372734,680372734,doc/developer-notes.md
