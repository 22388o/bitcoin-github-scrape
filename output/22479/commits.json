[
  {
    "sha": "74216f0b5896099b485bf6c5436606b65ccd71be",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo3NDIxNmYwYjU4OTYwOTliNDg1YmY2YzU0MzY2MDZiNjVjY2Q3MWJl",
    "commit": {
      "author": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2021-07-17T14:43:41Z"
      },
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2021-07-31T13:36:48Z"
      },
      "message": "p2p: log DEBUG_ADDRMAN consistency checks",
      "tree": {
        "sha": "8b4d63d72a392b25ca6d83f5f543c1edb5a4f722",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/8b4d63d72a392b25ca6d83f5f543c1edb5a4f722"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/74216f0b5896099b485bf6c5436606b65ccd71be",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEd6u7+MhX7zEv6RP5T1chs9Djkh0FAmEFUfAACgkQT1chs9Dj\nkh2KSA/+PsI/p1fYFLYmJXuJ3s4x26vT+rDo75LkfdFFDsUhBrA6e85p5T6sLIj5\n5nbiCszAoQCO83oeQ8eCPXZKiSqYnTrGWpQhgCwrusCwhXmd6bi+1qvrZArQhPj+\nUM7RsMrmIn3F0uM9LcJo0hTTVot++QPh7b9KPhLMwEvh8HeDzPLywZSrjLMryxqH\nS2OjPSuGuPekO3rNy3YtjLpxDO541qA4/B0LiKA9dcpxIVbaBG4j9sncQekj0ZeO\nOoDutKbAfE6TiSO5hfWddBV+FoZJB40m1rrplUOxzKBnQdWvDDREdfU/uyLpCul1\nQ5L/iEEUoq5udXX5NXXPtk4vwSe67ATVMjGbo5IkZ8f16k0F/tRNViQheByNjKQ9\nD2N8mQevPv+dTKuJ6WNBiLlIaSAbfZ82KvKdaiEefD1Ym70nlt+x9snX3KENv4xS\ne1XQefpVX4js8sKaBvSf72bCPZRosHcHznNDkMAebueDIP54GbAVebiOawWGPS9f\nb5EK3TudDWK3y4e00dNoas9We87GtazafEi96UqfCu442gbw/3s5lX+1jBOu+LL4\nw5hu2fuYuPprDKSQ2ssYPLqkKlbbC7Hk0WLTJdF8VriZEzpAxxU1aIziIeS5W79X\n7P5orbPuMsros5mlDEZu20jWZqAXhUQBA4DEd0McLVoZl9CCVnE=\n=FSvK\n-----END PGP SIGNATURE-----\n-----BEGIN OPENTIMESTAMPS GIT TIMESTAMP-----\n\nAQHwIBC1OBJD0vofKqzj+nT3R4XEhGhVGOONlxOcvrxtOTsCCP/wEAKuJnVoIpgy\niM0w/2Ct7iQI8QRhBVHz8AgEqWk8ofjPkgCD3+MNLvkMjikoaHR0cHM6Ly9maW5u\nZXkuY2FsZW5kYXIuZXRlcm5pdHl3YWxsLmNvbf/wEGO+DMKmoiePIjOI/nXj/xoI\n8QRhBVHy8AhLA3/zYR2EagCD3+MNLvkMjiMiaHR0cHM6Ly9idGMuY2FsZW5kYXIu\nY2F0YWxsYXh5LmNvbf/wEKlpoX87GcnEMHtoh3pmmmYI8CBsyl+n8w4K8/8RqK/Y\nNY7CxJjHsd0wCMvkNP+6xC+LGQjwIFePPyPLg4D2jXpYCiAv9YzZXMejyxeum/lG\nCK8TalbmCPEEYQVR8vAI+nVWywNTJycAg9/jDS75DI4uLWh0dHBzOi8vYWxpY2Uu\nYnRjLmNhbGVuZGFyLm9wZW50aW1lc3RhbXBzLm9yZ/AQ940oMKhn6ub9ruKbzVA+\nWAjxBGEFUfPwCI6nbLNI9DDQAIPf4w0u+QyOLCtodHRwczovL2JvYi5idGMuY2Fs\nZW5kYXIub3BlbnRpbWVzdGFtcHMub3Jn\n-----END OPENTIMESTAMPS GIT TIMESTAMP-----",
        "payload": "tree 8b4d63d72a392b25ca6d83f5f543c1edb5a4f722\nparent da1c0c64fd094880712d1c4167ad9eb3bb6ffcc6\nauthor Jon Atack <jon@atack.com> 1626533021 +0200\ncommitter Jon Atack <jon@atack.com> 1627738608 +0200\n\np2p: log DEBUG_ADDRMAN consistency checks\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/74216f0b5896099b485bf6c5436606b65ccd71be",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/74216f0b5896099b485bf6c5436606b65ccd71be",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/74216f0b5896099b485bf6c5436606b65ccd71be/comments",
    "author": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "da1c0c64fd094880712d1c4167ad9eb3bb6ffcc6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/da1c0c64fd094880712d1c4167ad9eb3bb6ffcc6",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/da1c0c64fd094880712d1c4167ad9eb3bb6ffcc6"
      }
    ],
    "stats": {
      "total": 1,
      "additions": 1,
      "deletions": 0
    },
    "files": [
      {
        "sha": "4ba3bf7afe0a094b77cc2979d7a692780281f5f4",
        "filename": "src/addrman.h",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/74216f0b5896099b485bf6c5436606b65ccd71be/src/addrman.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/74216f0b5896099b485bf6c5436606b65ccd71be/src/addrman.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/addrman.h?ref=74216f0b5896099b485bf6c5436606b65ccd71be",
        "patch": "@@ -732,6 +732,7 @@ class CAddrMan\n     {\n #ifdef DEBUG_ADDRMAN\n         AssertLockHeld(cs);\n+        LogPrint(BCLog::ADDRMAN, \"Check addrman\\n\");\n         const int err = Check_();\n         if (err) {\n             LogPrintf(\"ADDRMAN CONSISTENCY CHECK FAILED!!! err=%i\\n\", err);"
      }
    ]
  },
  {
    "sha": "baac29c74e475a1e7239355e710f2c6ad0cd19e0",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiYWFjMjljNzRlNDc1YTFlNzIzOTM1NWU3MTBmMmM2YWQwY2QxOWUw",
    "commit": {
      "author": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2021-07-17T15:01:03Z"
      },
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2021-07-31T15:22:55Z"
      },
      "message": "doc: add DEBUG_ADDRMAN info to the developer notes",
      "tree": {
        "sha": "ca9a0e56bfe6533ddc8b8c537b2f31ee9c67d8fb",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ca9a0e56bfe6533ddc8b8c537b2f31ee9c67d8fb"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/baac29c74e475a1e7239355e710f2c6ad0cd19e0",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEd6u7+MhX7zEv6RP5T1chs9Djkh0FAmEFatoACgkQT1chs9Dj\nkh1ZzxAAgSvryicsQdvLDa2sj86hKQDrH7FToaz3BcvbAmfAEtbOw/D/IPnpTTfz\nPCwDhdNNgPK0fC8w44yTgeVip8HoKm3E4AIoFF2PV1/fxzyWeEWXZcB5FhiS3ayB\ncsdEDcHGrOIvNLcCYfH+zSNQffSz1SXaPxq4Zkav3EtK8MtdpsOaVXfNw/qd/E4t\nDuDev2U11Ey3jIB1EsOv20CvaraIBBe0MlPD/+ds7DAwdVHjcpfcDeybmhRfd1NG\nKcVB6pgf35HyV9KTdUb4XE9ScIA4Xq0T8ySz7ELFiLMm+bLEtzdGiOW5bE+zgXHS\n+z1N4Ps6zqErNiRZmjU74pD5oHv0uaNX5TWqT8NGAxeNicTalJxoywDl6FQ8+wKC\nSM9Y0kf4CE9V+MPuJvEsa5cnnlR+63RDSK/xnwO9A3TsRQneHihCwxf5zvKpOAGw\nsqzCZfT785HJ5A5n1AxEnWp4mjOE+J5poduyrhHDtMjmbt+FSBArCsysvnwceXGv\n6/3A4liahTJECLzLjeEfJ4pNRulth3SnH+KlJj1MGh4zL9FKSaTfhlcBWWj3uAWD\nc0qU6PtF4vZBp34CudOsXE/nko2EXzFIcS1fVeTtfetot9qmkqamZAQ/sQx4dx8O\nH0GnTI+VLOhv4CK+MixjAcRes6BN+5XC7o9MWLE2/eeK9EhP8Bk=\n=flvo\n-----END PGP SIGNATURE-----\n-----BEGIN OPENTIMESTAMPS GIT TIMESTAMP-----\n\nAQHwINtbSD53mgXG4cPthbOombcZGzFkJiVP+tUVgwUxf1tRCP/wEEfWDRUSjQxK\nHX+hHccBPo4I8SCHz+OPkDx+JxvavmF8mBN949pEz954MoRcLFV4FT02jgjxBGEF\natzwCE0PLmqgmPpwAIPf4w0u+QyOLCtodHRwczovL2JvYi5idGMuY2FsZW5kYXIu\nb3BlbnRpbWVzdGFtcHMub3Jn//AQXzR3yEBtdGPtT/yB2AtH8gjxBGEFatvwCA10\nwvwZ4VN+AIPf4w0u+QyOLi1odHRwczovL2FsaWNlLmJ0Yy5jYWxlbmRhci5vcGVu\ndGltZXN0YW1wcy5vcmf/8BBqvZuAvsFoK5UyuKurUG+VCPEEYQVq3PAIvckHrueQ\nRTIAg9/jDS75DI4jImh0dHBzOi8vYnRjLmNhbGVuZGFyLmNhdGFsbGF4eS5jb23w\nEIOqzKpAcpU+WzooenzBwSYI8QRhBWrc8AhGDWj01KQs8ACD3+MNLvkMjikoaHR0\ncHM6Ly9maW5uZXkuY2FsZW5kYXIuZXRlcm5pdHl3YWxsLmNvbQ==\n-----END OPENTIMESTAMPS GIT TIMESTAMP-----",
        "payload": "tree ca9a0e56bfe6533ddc8b8c537b2f31ee9c67d8fb\nparent 74216f0b5896099b485bf6c5436606b65ccd71be\nauthor Jon Atack <jon@atack.com> 1626534063 +0200\ncommitter Jon Atack <jon@atack.com> 1627744975 +0200\n\ndoc: add DEBUG_ADDRMAN info to the developer notes\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/baac29c74e475a1e7239355e710f2c6ad0cd19e0",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/baac29c74e475a1e7239355e710f2c6ad0cd19e0",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/baac29c74e475a1e7239355e710f2c6ad0cd19e0/comments",
    "author": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "74216f0b5896099b485bf6c5436606b65ccd71be",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/74216f0b5896099b485bf6c5436606b65ccd71be",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/74216f0b5896099b485bf6c5436606b65ccd71be"
      }
    ],
    "stats": {
      "total": 16,
      "additions": 16,
      "deletions": 0
    },
    "files": [
      {
        "sha": "df3f2d30a0288300aeaf1a70962e62f645041fe3",
        "filename": "doc/developer-notes.md",
        "status": "modified",
        "additions": 16,
        "deletions": 0,
        "changes": 16,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/baac29c74e475a1e7239355e710f2c6ad0cd19e0/doc/developer-notes.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/baac29c74e475a1e7239355e710f2c6ad0cd19e0/doc/developer-notes.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/doc/developer-notes.md?ref=baac29c74e475a1e7239355e710f2c6ad0cd19e0",
        "patch": "@@ -16,6 +16,7 @@ Developer Notes\n         - [`debug.log`](#debuglog)\n         - [Signet, testnet, and regtest modes](#signet-testnet-and-regtest-modes)\n         - [DEBUG_LOCKORDER](#debug_lockorder)\n+        - [DEBUG_ADDRMAN](#debug_addrman)\n         - [Valgrind suppressions file](#valgrind-suppressions-file)\n         - [Compiling for test coverage](#compiling-for-test-coverage)\n         - [Performance profiling with perf](#performance-profiling-with-perf)\n@@ -282,6 +283,21 @@ configure option adds `-DDEBUG_LOCKORDER` to the compiler flags. This inserts\n run-time checks to keep track of which locks are held and adds warnings to the\n `debug.log` file if inconsistencies are detected.\n \n+### DEBUG_ADDRMAN\n+\n+Defining `DEBUG_ADDRMAN` performs frequent (and expensive) consistency checks on\n+the entire addrman data structure. To enable it, either run configure with\n+`-DDEBUG_ADDRMAN` added to your CPPFLAGS, e.g. `CPPFLAGS=\"-DDEBUG_ADDRMAN\"`, or\n+add this line in `src/addrman.h` before `void Check()`\n+\n+```cpp\n+#define DEBUG_ADDRMAN\n+```\n+\n+and then in both cases build and run bitcoind. You can use the `-debug=addrman`\n+configuration option or `bitcoin-cli logging '[\"addrman\"]'` to see the\n+consistency checks in the debug log.\n+\n ### Assertions and Checks\n \n The util file `src/util/check.h` offers helpers to protect against coding and"
      }
    ]
  }
]