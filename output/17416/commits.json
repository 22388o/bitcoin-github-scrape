[
  {
    "sha": "29eb039252f35a3bb58b0027f172cfe3d0c79867",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyOWViMDM5MjUyZjM1YTNiYjU4YjAwMjdmMTcyY2ZlM2QwYzc5ODY3",
    "commit": {
      "author": {
        "name": "Aaron Clauson",
        "email": "aaron@sipsorcery.com",
        "date": "2019-11-10T13:49:28Z"
      },
      "committer": {
        "name": "Aaron Clauson",
        "email": "aaron@sipsorcery.com",
        "date": "2019-11-10T13:49:28Z"
      },
      "message": "Moves vcpkg list to a text file and updates the appveyor job and readme to use it.",
      "tree": {
        "sha": "65ee498baeed57b355f6d231a3b01652bf12f057",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/65ee498baeed57b355f6d231a3b01652bf12f057"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/29eb039252f35a3bb58b0027f172cfe3d0c79867",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEnTzIanL4SUNC6l/RCkG9w/T6/xwFAl3IFWgACgkQCkG9w/T6\n/xxYUw//erU8VtykIwcmCqW8Qp+skTt4ZpZjHOB4XTTbo9aI/+7cuUxPG9zoHWI2\nQCfAY4I2bkPbtGES/LYADZshqYMtuqs5+tBnL/SqTiu3JTDZprBU6SHAOSUeBic2\nj80nKRiEZZ98NDjcI7RIoV7gV7udbXB9jswEd2gqOWNb/ESOjYpd/0qnAaq5frYq\n4aC2GlTQ8Wa3tUDT6jux1wNGtpWJXIHd/ijIqIrN/hSbvZiUT6UZ7SEnwlAsYW0H\nifw9QMJ1m1znhrp/RzXzKmihbk96DABcXkGgG8uXqOxUS2w+P3DiwPqteBpsya/s\nBLwu5cssqoEWrkLQ0A8tD52yxYVM/ahJghys3pHfONT/n98GMhyZS/BkTQMYlbwL\nWZIq0q8bsvzRIO3WxclFU0fMIj8TLpYN3wS12kZflS2dOukZVjywYILwgQEGtRZq\nQ1FhR2zEMBXV0NYSjPS1CPmNGDj9mIbFyJcywh3A1IBlVfUxjEeSZOo+h99nMqAY\n4YfczeErgHhGgh8pjoSuUic+aQZ6DOtNtEqkc2vCA1ZH/BDxKcmhwVXa1SvXhebd\nQahtlpUda/ZR3aAkcXXS9yX54BLRzMwpDP1RvOajOaBobe8taVwn5299j7qrcgow\nQIIqc0DBmBl26F0xugWqiBzLiMIa35xC4QGmvogzu2uqnK1BFx0=\n=OpWv\n-----END PGP SIGNATURE-----",
        "payload": "tree 65ee498baeed57b355f6d231a3b01652bf12f057\nparent 2fb6140d585fa05547415a6c440dc43b561e2439\nauthor Aaron Clauson <aaron@sipsorcery.com> 1573393768 +0000\ncommitter Aaron Clauson <aaron@sipsorcery.com> 1573393768 +0000\n\nMoves vcpkg list to a text file and updates the appveyor job and readme to use it.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/29eb039252f35a3bb58b0027f172cfe3d0c79867",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/29eb039252f35a3bb58b0027f172cfe3d0c79867",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/29eb039252f35a3bb58b0027f172cfe3d0c79867/comments",
    "author": {
      "login": "sipsorcery",
      "id": 197660,
      "node_id": "MDQ6VXNlcjE5NzY2MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/197660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipsorcery",
      "html_url": "https://github.com/sipsorcery",
      "followers_url": "https://api.github.com/users/sipsorcery/followers",
      "following_url": "https://api.github.com/users/sipsorcery/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipsorcery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipsorcery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipsorcery/subscriptions",
      "organizations_url": "https://api.github.com/users/sipsorcery/orgs",
      "repos_url": "https://api.github.com/users/sipsorcery/repos",
      "events_url": "https://api.github.com/users/sipsorcery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipsorcery/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "sipsorcery",
      "id": 197660,
      "node_id": "MDQ6VXNlcjE5NzY2MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/197660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipsorcery",
      "html_url": "https://github.com/sipsorcery",
      "followers_url": "https://api.github.com/users/sipsorcery/followers",
      "following_url": "https://api.github.com/users/sipsorcery/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipsorcery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipsorcery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipsorcery/subscriptions",
      "organizations_url": "https://api.github.com/users/sipsorcery/orgs",
      "repos_url": "https://api.github.com/users/sipsorcery/repos",
      "events_url": "https://api.github.com/users/sipsorcery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipsorcery/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "2fb6140d585fa05547415a6c440dc43b561e2439",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2fb6140d585fa05547415a6c440dc43b561e2439",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/2fb6140d585fa05547415a6c440dc43b561e2439"
      }
    ],
    "stats": {
      "total": 32,
      "additions": 17,
      "deletions": 15
    },
    "files": [
      {
        "sha": "b4850d49c818264145cddc4c76da47f05a40b996",
        "filename": ".appveyor.yml",
        "status": "modified",
        "additions": 12,
        "deletions": 11,
        "changes": 23,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/29eb039252f35a3bb58b0027f172cfe3d0c79867/.appveyor.yml",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/29eb039252f35a3bb58b0027f172cfe3d0c79867/.appveyor.yml",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/.appveyor.yml?ref=29eb039252f35a3bb58b0027f172cfe3d0c79867",
        "patch": "@@ -7,41 +7,42 @@ clone_depth: 5\n environment:\n   APPVEYOR_SAVE_CACHE_ON_ERROR: true\n   CLCACHE_SERVER: 1\n-  PACKAGES: berkeleydb boost-filesystem boost-multi-index boost-signals2 boost-test boost-thread libevent openssl rapidcheck zeromq double-conversion\n   PATH: 'C:\\Python37-x64;C:\\Python37-x64\\Scripts;%PATH%'\n   PYTHONUTF8: 1\n   QT_DOWNLOAD_URL: 'https://github.com/sipsorcery/qt_win_binary/releases/download/v1.4/Qt5.9.8_x64_static_vs2019.zip'\n   QT_DOWNLOAD_HASH: 'f285cbb02bec3b3f3cc2621e3fa7d5edf0d6a66fa30c57859e583acda954ea80'\n   QT_LOCAL_PATH: 'C:\\Qt5.9.8_x64_static_vs2019'\n   VCPKG_INSTALL_PATH: 'C:\\tools\\vcpkg\\installed'\n cache:\n-- C:\\tools\\vcpkg\\installed\n+- C:\\tools\\vcpkg\\installed -> build_msvc\\vcpkg-packages.txt\n - C:\\Users\\appveyor\\clcache -> .appveyor.yml, build_msvc\\**, **\\Makefile.am, **\\*.vcxproj.in\n - C:\\Qt5.9.8_x64_static_vs2019\n install:\n - cmd: pip install --quiet git+https://github.com/frerich/clcache.git@v4.2.0\n # Disable zmq test for now since python zmq library on Windows would cause Access violation sometimes.\n # - cmd: pip install zmq\n # Powershell block below is to install the c++ dependencies via vcpkg. The pseudo code is:\n-# 1. If the vcpkg install directory exists assume dependencies are installed and do nothing. To\n-#    force a fresh install of the packages delete the job's appveyor cache.\n-# 2. Otherwise:\n+# 1. Check whether the vcpkg install directory exists (note that updating the vcpkg-packages.txt file\n+#    will cause the appveyor cache rules to invalidate the directory)\n+# 2. If the directory is missing:\n #    a. Update the vcpkg source (including port files) and build the vcpkg binary,\n-#    b. Install the required packages.\n+#    b. Install the missing packages.\n - ps: |\n-      cd c:\\tools\\vcpkg\n+      $env:PACKAGES = Get-Content -Path build_msvc\\vcpkg-packages.txt\n+      Write-Host \"vcpkg list: $env:PACKAGES\"\n       if(!(Test-Path -Path ($env:VCPKG_INSTALL_PATH))) {\n+          cd c:\\tools\\vcpkg\n           $env:GIT_REDIRECT_STDERR = '2>&1' # git is writing non-errors to STDERR when doing git pull. Send to STDOUT instead.\n-          Add-Content \"C:\\tools\\vcpkg\\triplets\\$env:PLATFORM-windows-static.cmake\" \"set(VCPKG_BUILD_TYPE release)\"\n           git pull origin master\n           .\\bootstrap-vcpkg.bat\n+          Add-Content \"C:\\tools\\vcpkg\\triplets\\$env:PLATFORM-windows-static.cmake\" \"set(VCPKG_BUILD_TYPE release)\"\n           .\\vcpkg install --triplet $env:PLATFORM-windows-static $env:PACKAGES.split() > $null\n+          cd \"$env:APPVEYOR_BUILD_FOLDER\"\n       }\n       else {\n-        Write-Host \"vcpkg packages already installed (to reinstall purge appveyor job's cache).\"\n+        Write-Host \"required vcpkg packages already installed.\"\n       }\n-      .\\vcpkg integrate install\n-      cd \"$env:APPVEYOR_BUILD_FOLDER\"\n+      c:\\tools\\vcpkg\\vcpkg integrate install\n before_build:\n - ps:  clcache -M 536870912\n # Powershell block below is to download and extract the Qt static libraries. The pseudo code is:"
      },
      {
        "sha": "59be5298adacc04747c845cffbc77d34a97eb1d2",
        "filename": "build_msvc/README.md",
        "status": "modified",
        "additions": 4,
        "deletions": 4,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/29eb039252f35a3bb58b0027f172cfe3d0c79867/build_msvc/README.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/29eb039252f35a3bb58b0027f172cfe3d0c79867/build_msvc/README.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/build_msvc/README.md?ref=29eb039252f35a3bb58b0027f172cfe3d0c79867",
        "patch": "@@ -51,10 +51,10 @@ Building\n The instructions below use `vcpkg` to install the dependencies.\n \n - Install [`vcpkg`](https://github.com/Microsoft/vcpkg).\n-- Install the required packages (replace x64 with x86 as required):\n+- Install the required packages (replace x64 with x86 as required). The list of required packages can be found in the `build_msvc\\vcpkg-packages.txt` file. The PowerShell command below will work if run from the repository root directory and `vcpkg` is in the path. Alternatively the contents of the packages text file can be pasted in place of the `Get-Content` cmdlet.\n \n ```\n-PS >.\\vcpkg install --triplet x64-windows-static boost-filesystem boost-multi-index boost-signals2 boost-test boost-thread libevent openssl zeromq berkeleydb rapidcheck double-conversion\n+PS >.\\vcpkg install --triplet x64-windows-static $(Get-Content -Path build_msvc\\vcpkg-packages.txt).split()\n ```\n \n - Use Python to generate `*.vcxproj` from Makefile\n@@ -68,13 +68,13 @@ PS >py -3 msvc-autogen.py\n - Build with Visual Studio 2017 or msbuild.\n \n ```\n-msbuild /m bitcoin.sln /p:Platform=x64 /p:Configuration=Release /t:build\n+msbuild /m bitcoin.sln /p:Platform=x64 /p:Configuration=Release /p:PlatformToolset=v141 /t:build\n ```\n \n - Build with Visual Studio 2019 or msbuild.\n \n ```\n-msbuild /m bitcoin.sln /p:Platform=x64 /p:Configuration=Release /p:PlatformToolset=v142 /t:build\n+msbuild /m bitcoin.sln /p:Platform=x64 /p:Configuration=Release /t:build\n ```\n \n AppVeyor"
      },
      {
        "sha": "082a13f1cf416a86289811eddba2ffdc124de308",
        "filename": "build_msvc/vcpkg-packages.txt",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/29eb039252f35a3bb58b0027f172cfe3d0c79867/build_msvc/vcpkg-packages.txt",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/29eb039252f35a3bb58b0027f172cfe3d0c79867/build_msvc/vcpkg-packages.txt",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/build_msvc/vcpkg-packages.txt?ref=29eb039252f35a3bb58b0027f172cfe3d0c79867",
        "patch": "@@ -0,0 +1 @@\n+berkeleydb boost-filesystem boost-multi-index boost-signals2 boost-test boost-thread libevent openssl rapidcheck zeromq double-conversion\n\\ No newline at end of file"
      }
    ]
  }
]