[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/645058378",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19213#issuecomment-645058378",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19213",
    "id": 645058378,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NTA1ODM3OA==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-16T23:16:14Z",
    "updated_at": "2021-04-07T06:07:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #21244 (Move GetDataDir to ArgsManager by kiminuo)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/645058378/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/723664565",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19213#issuecomment-723664565",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19213",
    "id": 723664565,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyMzY2NDU2NQ==",
    "user": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?u=7297e8aaf9188c0cb98bc549a8a02a1dc8d59e4c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-08T20:56:13Z",
    "updated_at": "2020-11-08T20:56:13Z",
    "author_association": "MEMBER",
    "body": "Reworked without introducing a new helper function.\r\n\r\nping @vasild @promag @MarcoFalke ",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/723664565/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/723949427",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19213#issuecomment-723949427",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19213",
    "id": 723949427,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyMzk0OTQyNw==",
    "user": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?u=7297e8aaf9188c0cb98bc549a8a02a1dc8d59e4c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-09T11:19:01Z",
    "updated_at": "2020-11-09T11:19:01Z",
    "author_association": "MEMBER",
    "body": "Updated 0173e6884568bf9f03d08b80ffc0b80729378e44 -> 7b90f77146d36ef21760f2ce3704e2f2f463b3a2 ([pr19213.02](https://github.com/hebasto/bitcoin/commits/pr19213.02) -> [pr19213.03](https://github.com/hebasto/bitcoin/commits/pr19213.03), [diff](https://github.com/hebasto/bitcoin/compare/pr19213.02..pr19213.03)):\r\n\r\n- addressed @vasild's [comment](https://github.com/bitcoin/bitcoin/pull/19213#pullrequestreview-526095156):\r\n> Looks good.\r\n> \r\n> The commit message reads just\r\n> \r\n> > util: Get rid of RecursiveMutex in Get{Blocks,Data}Dir\r\n> \r\n> maybe it would be good to explain that we remove the recursive mutex by splitting it to two mutexes and ensuring they are always acquired in the same order.\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/723949427/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/822927307",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19213#issuecomment-822927307",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19213",
    "id": 822927307,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyMjkyNzMwNw==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-20T02:33:57Z",
    "updated_at": "2021-04-20T02:33:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--cf906140f33d8803c4a75a2196329ecb-->\n\ud83d\udc19 This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/822927307/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/823279663",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19213#issuecomment-823279663",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19213",
    "id": 823279663,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyMzI3OTY2Mw==",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?u=d06d2903ce6ad8b9d0c66ef9225fa21adfe22c7f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-20T13:35:40Z",
    "updated_at": "2021-04-20T13:35:40Z",
    "author_association": "CONTRIBUTOR",
    "body": "Why close?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/823279663/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/823303022",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19213#issuecomment-823303022",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19213",
    "id": 823303022,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyMzMwMzAyMg==",
    "user": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?u=7297e8aaf9188c0cb98bc549a8a02a1dc8d59e4c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-20T14:06:29Z",
    "updated_at": "2021-04-20T14:06:29Z",
    "author_association": "MEMBER",
    "body": "> Why close?\r\n\r\nIt is incompatible with #21244.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/823303022/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/436945160",
    "pull_request_review_id": 426549144,
    "id": 436945160,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjk0NTE2MA==",
    "diff_hunk": "@@ -578,75 +577,82 @@ fs::path GetDefaultDataDir()\n     else\n         pathRet = fs::path(pszHome);\n #ifdef MAC_OSX\n-    // Mac\n+    // macOS\n     return pathRet / \"Library/Application Support/Bitcoin\";\n #else\n-    // Unix\n+    // Unix-like\n     return pathRet / \".bitcoin\";\n #endif\n #endif\n }\n \n-static fs::path g_blocks_path_cache_net_specific;\n-static fs::path pathCached;\n-static fs::path pathCachedNetSpecific;\n-static RecursiveMutex csPathCached;\n+static Mutex g_path_cache_mutex;\n+static fs::path g_blocks_path_cache_net_specific GUARDED_BY(g_path_cache_mutex);\n+static fs::path pathCached GUARDED_BY(g_path_cache_mutex);\n+static fs::path pathCachedNetSpecific GUARDED_BY(g_path_cache_mutex);\n \n-const fs::path &GetBlocksDir()\n+namespace {",
    "path": "src/util/system.cpp",
    "position": null,
    "original_position": 39,
    "commit_id": "7b90f77146d36ef21760f2ce3704e2f2f463b3a2",
    "original_commit_id": "f7f41a0810f43d587c8a5fb1cfbf8f3206992e52",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Why is this `namespace` required?",
    "created_at": "2020-06-08T19:19:53Z",
    "updated_at": "2020-11-09T11:07:52Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19213#discussion_r436945160",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19213",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/436945160"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19213#discussion_r436945160"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19213"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/436945160/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 676,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/437135032",
    "pull_request_review_id": 426785346,
    "id": 437135032,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzEzNTAzMg==",
    "diff_hunk": "@@ -578,75 +577,82 @@ fs::path GetDefaultDataDir()\n     else\n         pathRet = fs::path(pszHome);\n #ifdef MAC_OSX\n-    // Mac\n+    // macOS\n     return pathRet / \"Library/Application Support/Bitcoin\";\n #else\n-    // Unix\n+    // Unix-like\n     return pathRet / \".bitcoin\";\n #endif\n #endif\n }\n \n-static fs::path g_blocks_path_cache_net_specific;\n-static fs::path pathCached;\n-static fs::path pathCachedNetSpecific;\n-static RecursiveMutex csPathCached;\n+static Mutex g_path_cache_mutex;\n+static fs::path g_blocks_path_cache_net_specific GUARDED_BY(g_path_cache_mutex);\n+static fs::path pathCached GUARDED_BY(g_path_cache_mutex);\n+static fs::path pathCachedNetSpecific GUARDED_BY(g_path_cache_mutex);\n \n-const fs::path &GetBlocksDir()\n+namespace {",
    "path": "src/util/system.cpp",
    "position": null,
    "original_position": 39,
    "commit_id": "7b90f77146d36ef21760f2ce3704e2f2f463b3a2",
    "original_commit_id": "f7f41a0810f43d587c8a5fb1cfbf8f3206992e52",
    "user": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines.html#Rs-unnamed2",
    "created_at": "2020-06-09T04:47:04Z",
    "updated_at": "2020-11-09T11:07:52Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19213#discussion_r437135032",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19213",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/437135032"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19213#discussion_r437135032"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19213"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/437135032/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 676,
    "side": "RIGHT",
    "in_reply_to_id": 436945160
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/519687414",
    "pull_request_review_id": 526095156,
    "id": 519687414,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTY4NzQxNA==",
    "diff_hunk": "@@ -686,14 +686,12 @@ fs::path StripRedundantLastElementsOfPath(const fs::path& path)\n }\n } // namespace\n \n-static fs::path g_blocks_path_cache_net_specific;\n-static fs::path pathCached;\n-static fs::path pathCachedNetSpecific;\n-static RecursiveMutex csPathCached;\n+static Mutex g_blocksdir_path_mutex;\n+static fs::path g_blocks_path_cache_net_specific GUARDED_BY(g_blocksdir_path_mutex);\n \n const fs::path &GetBlocksDir()\n {\n-    LOCK(csPathCached);\n+    LOCK(g_blocksdir_path_mutex);\n     fs::path &path = g_blocks_path_cache_net_specific;",
    "path": "src/util/system.cpp",
    "position": 15,
    "original_position": 15,
    "commit_id": "7b90f77146d36ef21760f2ce3704e2f2f463b3a2",
    "original_commit_id": "0173e6884568bf9f03d08b80ffc0b80729378e44",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Assuming `g_blocksdir_path_mutex` protects just the variable `g_blocks_path_cache_net_specific`, would it be possible to release the mutex after this assignment?\r\n\r\nIf \"yes\", then I would suggest to do it as a good practice of minimizing the time a mutex is held and also to avoid holding it together with the other newly introduced `g_datadir_path_mutex`.\r\n\r\nIf \"no\" then I think it is warranted to explain in a comment next to `g_blocksdir_path_mutex` what exactly is protected by it.",
    "created_at": "2020-11-09T10:03:43Z",
    "updated_at": "2020-11-09T11:07:52Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19213#discussion_r519687414",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19213",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/519687414"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19213#discussion_r519687414"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19213"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/519687414/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": 694,
    "original_start_line": 694,
    "start_side": "RIGHT",
    "line": 695,
    "original_line": 695,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/519720813",
    "pull_request_review_id": 526138106,
    "id": 519720813,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTcyMDgxMw==",
    "diff_hunk": "@@ -686,14 +686,12 @@ fs::path StripRedundantLastElementsOfPath(const fs::path& path)\n }\n } // namespace\n \n-static fs::path g_blocks_path_cache_net_specific;\n-static fs::path pathCached;\n-static fs::path pathCachedNetSpecific;\n-static RecursiveMutex csPathCached;\n+static Mutex g_blocksdir_path_mutex;\n+static fs::path g_blocks_path_cache_net_specific GUARDED_BY(g_blocksdir_path_mutex);\n \n const fs::path &GetBlocksDir()\n {\n-    LOCK(csPathCached);\n+    LOCK(g_blocksdir_path_mutex);\n     fs::path &path = g_blocks_path_cache_net_specific;",
    "path": "src/util/system.cpp",
    "position": 15,
    "original_position": 15,
    "commit_id": "7b90f77146d36ef21760f2ce3704e2f2f463b3a2",
    "original_commit_id": "0173e6884568bf9f03d08b80ffc0b80729378e44",
    "user": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "> Assuming `g_blocksdir_path_mutex` protects just the variable `g_blocks_path_cache_net_specific`, would it be possible to release the mutex after this assignment?\r\n\r\nI guess not, as the `path` references to the same memory location as the `g_blocks_path_cache_net_specific` variable, that must be protected by the `g_blocksdir_path_mutex`.",
    "created_at": "2020-11-09T10:57:22Z",
    "updated_at": "2020-11-09T11:07:52Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19213#discussion_r519720813",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19213",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/519720813"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19213#discussion_r519720813"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19213"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/519720813/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": 694,
    "original_start_line": 694,
    "start_side": "RIGHT",
    "line": 695,
    "original_line": 695,
    "side": "RIGHT",
    "in_reply_to_id": 519687414
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/519721581",
    "pull_request_review_id": 526139142,
    "id": 519721581,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTcyMTU4MQ==",
    "diff_hunk": "@@ -686,14 +686,12 @@ fs::path StripRedundantLastElementsOfPath(const fs::path& path)\n }\n } // namespace\n \n-static fs::path g_blocks_path_cache_net_specific;\n-static fs::path pathCached;\n-static fs::path pathCachedNetSpecific;\n-static RecursiveMutex csPathCached;\n+static Mutex g_blocksdir_path_mutex;\n+static fs::path g_blocks_path_cache_net_specific GUARDED_BY(g_blocksdir_path_mutex);\n \n const fs::path &GetBlocksDir()\n {\n-    LOCK(csPathCached);\n+    LOCK(g_blocksdir_path_mutex);\n     fs::path &path = g_blocks_path_cache_net_specific;",
    "path": "src/util/system.cpp",
    "position": 15,
    "original_position": 15,
    "commit_id": "7b90f77146d36ef21760f2ce3704e2f2f463b3a2",
    "original_commit_id": "0173e6884568bf9f03d08b80ffc0b80729378e44",
    "user": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "> If \"no\" then I think it is warranted to explain in a comment next to `g_blocksdir_path_mutex` what exactly is protected by it.\r\n\r\nI think `GUARDED_BY` is pretty self-documented annotation, no?",
    "created_at": "2020-11-09T10:58:47Z",
    "updated_at": "2020-11-09T11:07:52Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19213#discussion_r519721581",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19213",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/519721581"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19213#discussion_r519721581"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19213"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/519721581/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": 694,
    "original_start_line": 694,
    "start_side": "RIGHT",
    "line": 695,
    "original_line": 695,
    "side": "RIGHT",
    "in_reply_to_id": 519687414
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/519844835",
    "pull_request_review_id": 526296841,
    "id": 519844835,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTg0NDgzNQ==",
    "diff_hunk": "@@ -686,14 +686,12 @@ fs::path StripRedundantLastElementsOfPath(const fs::path& path)\n }\n } // namespace\n \n-static fs::path g_blocks_path_cache_net_specific;\n-static fs::path pathCached;\n-static fs::path pathCachedNetSpecific;\n-static RecursiveMutex csPathCached;\n+static Mutex g_blocksdir_path_mutex;\n+static fs::path g_blocks_path_cache_net_specific GUARDED_BY(g_blocksdir_path_mutex);\n \n const fs::path &GetBlocksDir()\n {\n-    LOCK(csPathCached);\n+    LOCK(g_blocksdir_path_mutex);\n     fs::path &path = g_blocks_path_cache_net_specific;",
    "path": "src/util/system.cpp",
    "position": 15,
    "original_position": 15,
    "commit_id": "7b90f77146d36ef21760f2ce3704e2f2f463b3a2",
    "original_commit_id": "0173e6884568bf9f03d08b80ffc0b80729378e44",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "oh well, I overlooked the fact that it is being assigned to a reference",
    "created_at": "2020-11-09T14:15:46Z",
    "updated_at": "2020-11-09T14:15:46Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19213#discussion_r519844835",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19213",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/519844835"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19213#discussion_r519844835"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19213"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/519844835/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": 694,
    "original_start_line": 694,
    "start_side": "RIGHT",
    "line": 695,
    "original_line": 695,
    "side": "RIGHT",
    "in_reply_to_id": 519687414
  }
]