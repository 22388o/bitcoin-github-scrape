[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/774370548",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21090#issuecomment-774370548",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21090",
    "id": 774370548,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3NDM3MDU0OA==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-06T01:22:16Z",
    "updated_at": "2021-07-09T06:56:39Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #20362 by MarcoFalke\n* #18554 by rodentrabies\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/774370548/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/827442618",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21090#issuecomment-827442618",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21090",
    "id": 827442618,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyNzQ0MjYxOA==",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-27T09:00:05Z",
    "updated_at": "2021-04-27T09:00:05Z",
    "author_association": "MEMBER",
    "body": "This needs rebase now that #21009 is merged. I did my own rebase here: https://github.com/jnewbery/bitcoin/tree/pr21090.1 since I need it for #20799. Feel free to take that if it's helpful.\r\n\r\nI think it might make sense to remove the `test_upgrade_after_activation()` subtest from p2p_segwit.py and place it in its own file. It's not anything to do with p2p and doesn't have any dependencies on the rest of that test.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/827442618/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/829482770",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21090#issuecomment-829482770",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21090",
    "id": 829482770,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyOTQ4Mjc3MA==",
    "user": {
      "login": "dhruv",
      "id": 856960,
      "node_id": "MDQ6VXNlcjg1Njk2MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/856960?u=65406da0f40524c00b8b647f916d31cbbb449edb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhruv",
      "html_url": "https://github.com/dhruv",
      "followers_url": "https://api.github.com/users/dhruv/followers",
      "following_url": "https://api.github.com/users/dhruv/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhruv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhruv/subscriptions",
      "organizations_url": "https://api.github.com/users/dhruv/orgs",
      "repos_url": "https://api.github.com/users/dhruv/repos",
      "events_url": "https://api.github.com/users/dhruv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhruv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-29T18:16:54Z",
    "updated_at": "2021-04-29T18:16:54Z",
    "author_association": "CONTRIBUTOR",
    "body": "Rebased against master, ready for review.\r\n\r\n@jnewbery it does make a ton of sense to extract `test_upgrade_after_activation()` into another file. Once `-reindex` has the expected effect, the rest of the test merely verifies that the node syncs on to the strongest chain, and that is in covered in other tests. I've gone ahead and done that refactor. This also simplified `p2p_segwit.py` since it now only needs two nodes for the rest of the test cases.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/829482770/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/830151051",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21090#issuecomment-830151051",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21090",
    "id": 830151051,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgzMDE1MTA1MQ==",
    "user": {
      "login": "dhruv",
      "id": 856960,
      "node_id": "MDQ6VXNlcjg1Njk2MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/856960?u=65406da0f40524c00b8b647f916d31cbbb449edb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhruv",
      "html_url": "https://github.com/dhruv",
      "followers_url": "https://api.github.com/users/dhruv/followers",
      "following_url": "https://api.github.com/users/dhruv/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhruv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhruv/subscriptions",
      "organizations_url": "https://api.github.com/users/dhruv/orgs",
      "repos_url": "https://api.github.com/users/dhruv/repos",
      "events_url": "https://api.github.com/users/dhruv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhruv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-30T14:54:26Z",
    "updated_at": "2021-04-30T14:54:26Z",
    "author_association": "CONTRIBUTOR",
    "body": "Comments addressed. Ready for further review.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/830151051/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/831096059",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21090#issuecomment-831096059",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21090",
    "id": 831096059,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgzMTA5NjA1OQ==",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-03T08:04:25Z",
    "updated_at": "2021-05-03T08:04:25Z",
    "author_association": "MEMBER",
    "body": "Code review ACK 0dd10ccfd6ef13e5caa06fc380d6eb7f3a8fd22e\r\n\r\nLooks great. Thanks @dhruv!",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/831096059/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/831142763",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21090#issuecomment-831142763",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21090",
    "id": 831142763,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgzMTE0Mjc2Mw==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-03T09:34:12Z",
    "updated_at": "2021-05-03T09:34:12Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--4a62be1de6b64f3ed646cdc7932c8cf5-->\n\ud83d\udd75\ufe0f @sipa has been requested to review this pull request as specified in the REVIEWERS file.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/831142763/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/864594489",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21090#issuecomment-864594489",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21090",
    "id": 864594489,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2NDU5NDQ4OQ==",
    "user": {
      "login": "dhruv",
      "id": 856960,
      "node_id": "MDQ6VXNlcjg1Njk2MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/856960?u=65406da0f40524c00b8b647f916d31cbbb449edb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhruv",
      "html_url": "https://github.com/dhruv",
      "followers_url": "https://api.github.com/users/dhruv/followers",
      "following_url": "https://api.github.com/users/dhruv/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhruv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhruv/subscriptions",
      "organizations_url": "https://api.github.com/users/dhruv/orgs",
      "repos_url": "https://api.github.com/users/dhruv/repos",
      "events_url": "https://api.github.com/users/dhruv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhruv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-20T18:33:35Z",
    "updated_at": "2021-06-20T18:33:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "Addressed comments from @mzumsande. Ready for further review.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/864594489/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/866284416",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21090#issuecomment-866284416",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21090",
    "id": 866284416,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2NjI4NDQxNg==",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-22T19:48:43Z",
    "updated_at": "2021-06-22T19:48:43Z",
    "author_association": "MEMBER",
    "body": "utACK c44bac14b4",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/866284416/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/874535099",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21090#issuecomment-874535099",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21090",
    "id": 874535099,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3NDUzNTA5OQ==",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-06T07:40:11Z",
    "updated_at": "2021-07-06T07:40:11Z",
    "author_association": "MEMBER",
    "body": "@dhruv - do you plan to rebase this?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/874535099/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/874765251",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21090#issuecomment-874765251",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21090",
    "id": 874765251,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3NDc2NTI1MQ==",
    "user": {
      "login": "dhruv",
      "id": 856960,
      "node_id": "MDQ6VXNlcjg1Njk2MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/856960?u=65406da0f40524c00b8b647f916d31cbbb449edb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhruv",
      "html_url": "https://github.com/dhruv",
      "followers_url": "https://api.github.com/users/dhruv/followers",
      "following_url": "https://api.github.com/users/dhruv/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhruv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhruv/subscriptions",
      "organizations_url": "https://api.github.com/users/dhruv/orgs",
      "repos_url": "https://api.github.com/users/dhruv/repos",
      "events_url": "https://api.github.com/users/dhruv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhruv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-06T13:34:32Z",
    "updated_at": "2021-07-06T13:34:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jnewbery I do. Been on break for a long weekend where I live. ",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/874765251/reactions",
      "total_count": 2,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 2,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/875163152",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21090#issuecomment-875163152",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21090",
    "id": 875163152,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3NTE2MzE1Mg==",
    "user": {
      "login": "theStack",
      "id": 91535,
      "node_id": "MDQ6VXNlcjkxNTM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theStack",
      "html_url": "https://github.com/theStack",
      "followers_url": "https://api.github.com/users/theStack/followers",
      "following_url": "https://api.github.com/users/theStack/following{/other_user}",
      "gists_url": "https://api.github.com/users/theStack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theStack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
      "organizations_url": "https://api.github.com/users/theStack/orgs",
      "repos_url": "https://api.github.com/users/theStack/repos",
      "events_url": "https://api.github.com/users/theStack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theStack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-07T00:04:54Z",
    "updated_at": "2021-07-07T00:04:54Z",
    "author_association": "CONTRIBUTOR",
    "body": "Concept ACK",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/875163152/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/876135029",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21090#issuecomment-876135029",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21090",
    "id": 876135029,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3NjEzNTAyOQ==",
    "user": {
      "login": "dhruv",
      "id": 856960,
      "node_id": "MDQ6VXNlcjg1Njk2MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/856960?u=65406da0f40524c00b8b647f916d31cbbb449edb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhruv",
      "html_url": "https://github.com/dhruv",
      "followers_url": "https://api.github.com/users/dhruv/followers",
      "following_url": "https://api.github.com/users/dhruv/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhruv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhruv/subscriptions",
      "organizations_url": "https://api.github.com/users/dhruv/orgs",
      "repos_url": "https://api.github.com/users/dhruv/repos",
      "events_url": "https://api.github.com/users/dhruv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhruv/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-08T05:18:32Z",
    "updated_at": "2021-07-08T05:18:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "Rebased. Addressed comments. Ready for further review.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/876135029/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/881957339",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21090#issuecomment-881957339",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21090",
    "id": 881957339,
    "node_id": "IC_kwDOABII5840kZnb",
    "user": {
      "login": "mzumsande",
      "id": 48763452,
      "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
      "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mzumsande",
      "html_url": "https://github.com/mzumsande",
      "followers_url": "https://api.github.com/users/mzumsande/followers",
      "following_url": "https://api.github.com/users/mzumsande/following{/other_user}",
      "gists_url": "https://api.github.com/users/mzumsande/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
      "organizations_url": "https://api.github.com/users/mzumsande/orgs",
      "repos_url": "https://api.github.com/users/mzumsande/repos",
      "events_url": "https://api.github.com/users/mzumsande/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mzumsande/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-17T20:41:51Z",
    "updated_at": "2021-07-17T20:41:51Z",
    "author_association": "CONTRIBUTOR",
    "body": "Code-Review ACK a806647d260132a00cd633160040625c7dd17803",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/881957339/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/885010966",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21090#issuecomment-885010966",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21090",
    "id": 885010966,
    "node_id": "IC_kwDOABII5840wDIW",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-22T15:36:07Z",
    "updated_at": "2021-07-22T15:36:07Z",
    "author_association": "MEMBER",
    "body": "Code review ACK a806647d260132a00cd633160040625c7dd17803, nice cleanup",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/885010966/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623302697",
    "pull_request_review_id": 648536417,
    "id": 623302697,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMzMwMjY5Nw==",
    "diff_hunk": "@@ -490,11 +490,8 @@ void CRegTestParams::UpdateActivationParametersFromArgs(const ArgsManager& args)\n {\n     if (args.IsArgSet(\"-segwitheight\")) {\n         int64_t height = args.GetArg(\"-segwitheight\", consensus.SegwitHeight);\n-        if (height < -1 || height >= std::numeric_limits<int>::max()) {\n+        if (height < 0 || height >= std::numeric_limits<int>::max()) {\n             throw std::runtime_error(strprintf(\"Activation height %ld for segwit is out of valid range. Use -1 to disable segwit.\", height));",
    "path": "src/chainparams.cpp",
    "position": null,
    "original_position": 6,
    "commit_id": "a806647d260132a00cd633160040625c7dd17803",
    "original_commit_id": "117ae3f264ec6d3dd23e2e71a308d4df8e3d0702",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "```suggestion\r\n            throw std::runtime_error(strprintf(\"Activation height %ld for segwit is out of valid range.\", height));\r\n```",
    "created_at": "2021-04-29T18:42:41Z",
    "updated_at": "2021-04-30T15:46:18Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r623302697",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623302697"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r623302697"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623302697/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 494,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623519618",
    "pull_request_review_id": 648789506,
    "id": 623519618,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMzUxOTYxOA==",
    "diff_hunk": "@@ -2586,7 +2585,7 @@ void PeerManagerImpl::ProcessMessage(CNode& pfrom, const std::string& msg_type,\n         bool fAnnounceUsingCMPCTBLOCK = false;\n         uint64_t nCMPCTBLOCKVersion = 0;\n         vRecv >> fAnnounceUsingCMPCTBLOCK >> nCMPCTBLOCKVersion;\n-        if (nCMPCTBLOCKVersion == 1 || ((pfrom.GetLocalServices() & NODE_WITNESS) && nCMPCTBLOCKVersion == 2)) {\n+        if (nCMPCTBLOCKVersion == 1 || nCMPCTBLOCKVersion == 2) {",
    "path": "src/net_processing.cpp",
    "position": 33,
    "original_position": 33,
    "commit_id": "a806647d260132a00cd633160040625c7dd17803",
    "original_commit_id": "f43a12789b70dc4fc8a4aa1067229d3476a6c29f",
    "user": {
      "login": "dhruv",
      "id": 856960,
      "node_id": "MDQ6VXNlcjg1Njk2MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/856960?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhruv",
      "html_url": "https://github.com/dhruv",
      "followers_url": "https://api.github.com/users/dhruv/followers",
      "following_url": "https://api.github.com/users/dhruv/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhruv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhruv/subscriptions",
      "organizations_url": "https://api.github.com/users/dhruv/orgs",
      "repos_url": "https://api.github.com/users/dhruv/repos",
      "events_url": "https://api.github.com/users/dhruv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhruv/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I [think](https://developer.bitcoin.org/reference/p2p_networking.html#sendcmpct) the only allowed values for `nCMPCTBLOCKVersion` are 1 or 2. Can this conditional be removed altogether (especially since `fWantsCmpctWitness` is conditioned appropriately below)? Or perhaps replaced with `if (0 < nCMPCTBLOCKVersion < 3)` ?",
    "created_at": "2021-04-30T01:03:48Z",
    "updated_at": "2021-04-30T15:46:18Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r623519618",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623519618"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r623519618"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623519618/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2688,
    "original_line": 2688,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623520004",
    "pull_request_review_id": 648789919,
    "id": 623520004,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMzUyMDAwNA==",
    "diff_hunk": "@@ -490,11 +490,8 @@ void CRegTestParams::UpdateActivationParametersFromArgs(const ArgsManager& args)\n {\n     if (args.IsArgSet(\"-segwitheight\")) {\n         int64_t height = args.GetArg(\"-segwitheight\", consensus.SegwitHeight);\n-        if (height < -1 || height >= std::numeric_limits<int>::max()) {\n+        if (height < 0 || height >= std::numeric_limits<int>::max()) {\n             throw std::runtime_error(strprintf(\"Activation height %ld for segwit is out of valid range. Use -1 to disable segwit.\", height));",
    "path": "src/chainparams.cpp",
    "position": null,
    "original_position": 6,
    "commit_id": "a806647d260132a00cd633160040625c7dd17803",
    "original_commit_id": "117ae3f264ec6d3dd23e2e71a308d4df8e3d0702",
    "user": {
      "login": "dhruv",
      "id": 856960,
      "node_id": "MDQ6VXNlcjg1Njk2MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/856960?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhruv",
      "html_url": "https://github.com/dhruv",
      "followers_url": "https://api.github.com/users/dhruv/followers",
      "following_url": "https://api.github.com/users/dhruv/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhruv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhruv/subscriptions",
      "organizations_url": "https://api.github.com/users/dhruv/orgs",
      "repos_url": "https://api.github.com/users/dhruv/repos",
      "events_url": "https://api.github.com/users/dhruv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhruv/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done.",
    "created_at": "2021-04-30T01:05:10Z",
    "updated_at": "2021-04-30T15:46:18Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r623520004",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623520004"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r623520004"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623520004/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 494,
    "side": "RIGHT",
    "in_reply_to_id": 623302697
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623661970",
    "pull_request_review_id": 648941997,
    "id": 623661970,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMzY2MTk3MA==",
    "diff_hunk": "@@ -2586,7 +2585,7 @@ void PeerManagerImpl::ProcessMessage(CNode& pfrom, const std::string& msg_type,\n         bool fAnnounceUsingCMPCTBLOCK = false;\n         uint64_t nCMPCTBLOCKVersion = 0;\n         vRecv >> fAnnounceUsingCMPCTBLOCK >> nCMPCTBLOCKVersion;\n-        if (nCMPCTBLOCKVersion == 1 || ((pfrom.GetLocalServices() & NODE_WITNESS) && nCMPCTBLOCKVersion == 2)) {\n+        if (nCMPCTBLOCKVersion == 1 || nCMPCTBLOCKVersion == 2) {",
    "path": "src/net_processing.cpp",
    "position": 33,
    "original_position": 33,
    "commit_id": "a806647d260132a00cd633160040625c7dd17803",
    "original_commit_id": "f43a12789b70dc4fc8a4aa1067229d3476a6c29f",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Yes, the only permitted values for nCMPCTBLOCKVersion are `1` and `2`, which is why this conditional is here. We want to ignore any `sendcmpct` message received where nCMPCTBLOCKVersion is not 1 or 2.\r\n\r\n`if (0 < nCMPCTBLOCKVersion < 3)` does not do what you I think you expect it to do.",
    "created_at": "2021-04-30T07:11:00Z",
    "updated_at": "2021-04-30T15:46:18Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r623661970",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623661970"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r623661970"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623661970/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2688,
    "original_line": 2688,
    "side": "RIGHT",
    "in_reply_to_id": 623519618
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623672844",
    "pull_request_review_id": 648952878,
    "id": 623672844,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMzY3Mjg0NA==",
    "diff_hunk": "@@ -224,7 +222,6 @@ def skip_test_if_missing_module(self):\n     def setup_network(self):",
    "path": "test/functional/p2p_segwit.py",
    "position": null,
    "original_position": 28,
    "commit_id": "a806647d260132a00cd633160040625c7dd17803",
    "original_commit_id": "f43a12789b70dc4fc8a4aa1067229d3476a6c29f",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This method override can be removed entirely, since it's doing the same as the default `setup_network()` in test_framework.py",
    "created_at": "2021-04-30T07:28:26Z",
    "updated_at": "2021-04-30T15:46:18Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r623672844",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623672844"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r623672844"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623672844/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 222,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623675320",
    "pull_request_review_id": 648952878,
    "id": 623675320,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMzY3NTMyMA==",
    "diff_hunk": "@@ -0,0 +1,58 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2017-2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test a pre-segwit node upgrading to segwit consensus\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    softfork_active,\n+)\n+\n+class SegwitUpgradeTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 1\n+\n+    def setup_network(self):\n+        self.setup_nodes()\n+",
    "path": "test/functional/feature_presegwit_node_upgrade.py",
    "position": null,
    "original_position": 20,
    "commit_id": "a806647d260132a00cd633160040625c7dd17803",
    "original_commit_id": "f43a12789b70dc4fc8a4aa1067229d3476a6c29f",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Not needed. This is default behaviour.",
    "created_at": "2021-04-30T07:32:54Z",
    "updated_at": "2021-04-30T15:46:18Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r623675320",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623675320"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r623675320"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623675320/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": 18,
    "start_side": "RIGHT",
    "line": null,
    "original_line": 18,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623675668",
    "pull_request_review_id": 648952878,
    "id": 623675668,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMzY3NTY2OA==",
    "diff_hunk": "@@ -0,0 +1,58 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2017-2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test a pre-segwit node upgrading to segwit consensus\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    softfork_active,\n+)\n+\n+class SegwitUpgradeTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 1\n+\n+    def setup_network(self):\n+        self.setup_nodes()\n+\n+    def run_test(self):\n+        self.test_upgrade_after_activation()\n+\n+    def test_upgrade_after_activation(self):\n+        \"\"\"A pre-segwit node with insufficiently validated blocks needs to redownload blocks\"\"\"",
    "path": "test/functional/feature_presegwit_node_upgrade.py",
    "position": null,
    "original_position": 25,
    "commit_id": "a806647d260132a00cd633160040625c7dd17803",
    "original_commit_id": "f43a12789b70dc4fc8a4aa1067229d3476a6c29f",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "No need to have a run_test() method that only calls one method. Just put the logic in `run_test()`.\r\n\r\n```suggestion\r\n    def run_test(self):\r\n        \"\"\"A pre-segwit node with insufficiently validated blocks needs to redownload blocks\"\"\"\r\n```",
    "created_at": "2021-04-30T07:33:36Z",
    "updated_at": "2021-04-30T15:46:18Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r623675668",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623675668"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r623675668"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623675668/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": 21,
    "start_side": "RIGHT",
    "line": null,
    "original_line": 20,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623675932",
    "pull_request_review_id": 648952878,
    "id": 623675932,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMzY3NTkzMg==",
    "diff_hunk": "@@ -0,0 +1,58 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2017-2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test a pre-segwit node upgrading to segwit consensus\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    softfork_active,\n+)\n+\n+class SegwitUpgradeTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 1\n+\n+    def setup_network(self):\n+        self.setup_nodes()\n+\n+    def run_test(self):\n+        self.test_upgrade_after_activation()\n+\n+    def test_upgrade_after_activation(self):\n+        \"\"\"A pre-segwit node with insufficiently validated blocks needs to redownload blocks\"\"\"\n+\n+        self.log.info(\"Testing upgrade behaviour for pre-segwit node to segwit rules\")\n+        node = self.nodes[0]\n+\n+        # Node hasn't been used or connected yet\n+        assert_equal(node.getblockcount(), 0)\n+\n+        self.restart_node(0, extra_args=[\"-segwitheight=10\"])",
    "path": "test/functional/feature_presegwit_node_upgrade.py",
    "position": null,
    "original_position": 33,
    "commit_id": "a806647d260132a00cd633160040625c7dd17803",
    "original_commit_id": "f43a12789b70dc4fc8a4aa1067229d3476a6c29f",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Why not just start the node with `\"-segwitheight=10\"` first time, rather than starting and then restarting?",
    "created_at": "2021-04-30T07:34:11Z",
    "updated_at": "2021-04-30T15:46:18Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r623675932",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623675932"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r623675932"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623675932/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 33,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623894000",
    "pull_request_review_id": 649237612,
    "id": 623894000,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMzg5NDAwMA==",
    "diff_hunk": "@@ -2586,7 +2585,7 @@ void PeerManagerImpl::ProcessMessage(CNode& pfrom, const std::string& msg_type,\n         bool fAnnounceUsingCMPCTBLOCK = false;\n         uint64_t nCMPCTBLOCKVersion = 0;\n         vRecv >> fAnnounceUsingCMPCTBLOCK >> nCMPCTBLOCKVersion;\n-        if (nCMPCTBLOCKVersion == 1 || ((pfrom.GetLocalServices() & NODE_WITNESS) && nCMPCTBLOCKVersion == 2)) {\n+        if (nCMPCTBLOCKVersion == 1 || nCMPCTBLOCKVersion == 2) {",
    "path": "src/net_processing.cpp",
    "position": 33,
    "original_position": 33,
    "commit_id": "a806647d260132a00cd633160040625c7dd17803",
    "original_commit_id": "f43a12789b70dc4fc8a4aa1067229d3476a6c29f",
    "user": {
      "login": "dhruv",
      "id": 856960,
      "node_id": "MDQ6VXNlcjg1Njk2MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/856960?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhruv",
      "html_url": "https://github.com/dhruv",
      "followers_url": "https://api.github.com/users/dhruv/followers",
      "following_url": "https://api.github.com/users/dhruv/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhruv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhruv/subscriptions",
      "organizations_url": "https://api.github.com/users/dhruv/orgs",
      "repos_url": "https://api.github.com/users/dhruv/repos",
      "events_url": "https://api.github.com/users/dhruv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhruv/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Ok, I'll leave the conditional in there then. Nice mental compiling! For others following along `if (0 < nCMPCTBLOCKVersion < 3)` ends up comparing a `bool` resulting from the first half of the expression to 3. Fortunately `clang++` issues a warning.\r\n```\r\nwarning: result of comparison of constant 3 with\r\n      expression of type 'bool' is always true\r\n      [-Wtautological-constant-out-of-range-compare]\r\n    if (0 < i < 3) {\r\n```",
    "created_at": "2021-04-30T13:51:59Z",
    "updated_at": "2021-04-30T15:46:18Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r623894000",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623894000"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r623894000"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623894000/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2688,
    "original_line": 2688,
    "side": "RIGHT",
    "in_reply_to_id": 623519618
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623908286",
    "pull_request_review_id": 649256811,
    "id": 623908286,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMzkwODI4Ng==",
    "diff_hunk": "@@ -224,7 +222,6 @@ def skip_test_if_missing_module(self):\n     def setup_network(self):",
    "path": "test/functional/p2p_segwit.py",
    "position": null,
    "original_position": 28,
    "commit_id": "a806647d260132a00cd633160040625c7dd17803",
    "original_commit_id": "f43a12789b70dc4fc8a4aa1067229d3476a6c29f",
    "user": {
      "login": "dhruv",
      "id": 856960,
      "node_id": "MDQ6VXNlcjg1Njk2MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/856960?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhruv",
      "html_url": "https://github.com/dhruv",
      "followers_url": "https://api.github.com/users/dhruv/followers",
      "following_url": "https://api.github.com/users/dhruv/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhruv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhruv/subscriptions",
      "organizations_url": "https://api.github.com/users/dhruv/orgs",
      "repos_url": "https://api.github.com/users/dhruv/repos",
      "events_url": "https://api.github.com/users/dhruv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhruv/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done",
    "created_at": "2021-04-30T14:11:28Z",
    "updated_at": "2021-04-30T15:46:18Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r623908286",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623908286"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r623908286"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623908286/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 222,
    "side": "RIGHT",
    "in_reply_to_id": 623672844
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623908361",
    "pull_request_review_id": 649256922,
    "id": 623908361,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMzkwODM2MQ==",
    "diff_hunk": "@@ -0,0 +1,58 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2017-2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test a pre-segwit node upgrading to segwit consensus\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    softfork_active,\n+)\n+\n+class SegwitUpgradeTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 1\n+\n+    def setup_network(self):\n+        self.setup_nodes()\n+",
    "path": "test/functional/feature_presegwit_node_upgrade.py",
    "position": null,
    "original_position": 20,
    "commit_id": "a806647d260132a00cd633160040625c7dd17803",
    "original_commit_id": "f43a12789b70dc4fc8a4aa1067229d3476a6c29f",
    "user": {
      "login": "dhruv",
      "id": 856960,
      "node_id": "MDQ6VXNlcjg1Njk2MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/856960?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhruv",
      "html_url": "https://github.com/dhruv",
      "followers_url": "https://api.github.com/users/dhruv/followers",
      "following_url": "https://api.github.com/users/dhruv/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhruv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhruv/subscriptions",
      "organizations_url": "https://api.github.com/users/dhruv/orgs",
      "repos_url": "https://api.github.com/users/dhruv/repos",
      "events_url": "https://api.github.com/users/dhruv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhruv/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done",
    "created_at": "2021-04-30T14:11:34Z",
    "updated_at": "2021-04-30T15:46:18Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r623908361",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623908361"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r623908361"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623908361/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": 18,
    "start_side": "RIGHT",
    "line": null,
    "original_line": 18,
    "side": "RIGHT",
    "in_reply_to_id": 623675320
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623911977",
    "pull_request_review_id": 649261732,
    "id": 623911977,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMzkxMTk3Nw==",
    "diff_hunk": "@@ -0,0 +1,58 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2017-2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test a pre-segwit node upgrading to segwit consensus\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    softfork_active,\n+)\n+\n+class SegwitUpgradeTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 1\n+\n+    def setup_network(self):\n+        self.setup_nodes()\n+\n+    def run_test(self):\n+        self.test_upgrade_after_activation()\n+\n+    def test_upgrade_after_activation(self):\n+        \"\"\"A pre-segwit node with insufficiently validated blocks needs to redownload blocks\"\"\"",
    "path": "test/functional/feature_presegwit_node_upgrade.py",
    "position": null,
    "original_position": 25,
    "commit_id": "a806647d260132a00cd633160040625c7dd17803",
    "original_commit_id": "f43a12789b70dc4fc8a4aa1067229d3476a6c29f",
    "user": {
      "login": "dhruv",
      "id": 856960,
      "node_id": "MDQ6VXNlcjg1Njk2MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/856960?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhruv",
      "html_url": "https://github.com/dhruv",
      "followers_url": "https://api.github.com/users/dhruv/followers",
      "following_url": "https://api.github.com/users/dhruv/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhruv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhruv/subscriptions",
      "organizations_url": "https://api.github.com/users/dhruv/orgs",
      "repos_url": "https://api.github.com/users/dhruv/repos",
      "events_url": "https://api.github.com/users/dhruv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhruv/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I am not sure I understand. It seems we call `main()` which then calls `test_framework.py::run_test()`. I am not sure how I could remove this `run_test()` and put the logic in `test_framework.py::run_test()`? \r\n\r\nAlso, it seems `BitcoinTestFramework` [requires](https://github.com/bitcoin/bitcoin/blob/480bf01c295527bd212964efe4df3bb886db5654/test/functional/test_framework/test_framework.py#L69) overriding `run_test()`.",
    "created_at": "2021-04-30T14:16:28Z",
    "updated_at": "2021-04-30T15:46:18Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r623911977",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623911977"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r623911977"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623911977/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": 21,
    "start_side": "RIGHT",
    "line": null,
    "original_line": 20,
    "side": "RIGHT",
    "in_reply_to_id": 623675668
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623912110",
    "pull_request_review_id": 649261901,
    "id": 623912110,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMzkxMjExMA==",
    "diff_hunk": "@@ -0,0 +1,58 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2017-2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test a pre-segwit node upgrading to segwit consensus\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    softfork_active,\n+)\n+\n+class SegwitUpgradeTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 1\n+\n+    def setup_network(self):\n+        self.setup_nodes()\n+\n+    def run_test(self):\n+        self.test_upgrade_after_activation()\n+\n+    def test_upgrade_after_activation(self):\n+        \"\"\"A pre-segwit node with insufficiently validated blocks needs to redownload blocks\"\"\"\n+\n+        self.log.info(\"Testing upgrade behaviour for pre-segwit node to segwit rules\")\n+        node = self.nodes[0]\n+\n+        # Node hasn't been used or connected yet\n+        assert_equal(node.getblockcount(), 0)\n+\n+        self.restart_node(0, extra_args=[\"-segwitheight=10\"])",
    "path": "test/functional/feature_presegwit_node_upgrade.py",
    "position": null,
    "original_position": 33,
    "commit_id": "a806647d260132a00cd633160040625c7dd17803",
    "original_commit_id": "f43a12789b70dc4fc8a4aa1067229d3476a6c29f",
    "user": {
      "login": "dhruv",
      "id": 856960,
      "node_id": "MDQ6VXNlcjg1Njk2MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/856960?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhruv",
      "html_url": "https://github.com/dhruv",
      "followers_url": "https://api.github.com/users/dhruv/followers",
      "following_url": "https://api.github.com/users/dhruv/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhruv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhruv/subscriptions",
      "organizations_url": "https://api.github.com/users/dhruv/orgs",
      "repos_url": "https://api.github.com/users/dhruv/repos",
      "events_url": "https://api.github.com/users/dhruv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhruv/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Nice! Done.",
    "created_at": "2021-04-30T14:16:38Z",
    "updated_at": "2021-04-30T15:46:18Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r623912110",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623912110"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r623912110"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623912110/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 33,
    "side": "RIGHT",
    "in_reply_to_id": 623675932
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623944315",
    "pull_request_review_id": 649305501,
    "id": 623944315,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMzk0NDMxNQ==",
    "diff_hunk": "@@ -0,0 +1,58 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2017-2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test a pre-segwit node upgrading to segwit consensus\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    softfork_active,\n+)\n+\n+class SegwitUpgradeTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 1\n+\n+    def setup_network(self):\n+        self.setup_nodes()\n+\n+    def run_test(self):\n+        self.test_upgrade_after_activation()\n+\n+    def test_upgrade_after_activation(self):\n+        \"\"\"A pre-segwit node with insufficiently validated blocks needs to redownload blocks\"\"\"",
    "path": "test/functional/feature_presegwit_node_upgrade.py",
    "position": null,
    "original_position": 25,
    "commit_id": "a806647d260132a00cd633160040625c7dd17803",
    "original_commit_id": "f43a12789b70dc4fc8a4aa1067229d3476a6c29f",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Have you tried applying this diff?",
    "created_at": "2021-04-30T14:58:53Z",
    "updated_at": "2021-04-30T15:46:18Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r623944315",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623944315"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r623944315"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623944315/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": 21,
    "start_side": "RIGHT",
    "line": null,
    "original_line": 20,
    "side": "RIGHT",
    "in_reply_to_id": 623675668
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623982580",
    "pull_request_review_id": 649354282,
    "id": 623982580,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMzk4MjU4MA==",
    "diff_hunk": "@@ -0,0 +1,58 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2017-2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test a pre-segwit node upgrading to segwit consensus\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    softfork_active,\n+)\n+\n+class SegwitUpgradeTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 1\n+\n+    def setup_network(self):\n+        self.setup_nodes()\n+\n+    def run_test(self):\n+        self.test_upgrade_after_activation()\n+\n+    def test_upgrade_after_activation(self):\n+        \"\"\"A pre-segwit node with insufficiently validated blocks needs to redownload blocks\"\"\"",
    "path": "test/functional/feature_presegwit_node_upgrade.py",
    "position": null,
    "original_position": 25,
    "commit_id": "a806647d260132a00cd633160040625c7dd17803",
    "original_commit_id": "f43a12789b70dc4fc8a4aa1067229d3476a6c29f",
    "user": {
      "login": "dhruv",
      "id": 856960,
      "node_id": "MDQ6VXNlcjg1Njk2MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/856960?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhruv",
      "html_url": "https://github.com/dhruv",
      "followers_url": "https://api.github.com/users/dhruv/followers",
      "following_url": "https://api.github.com/users/dhruv/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhruv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhruv/subscriptions",
      "organizations_url": "https://api.github.com/users/dhruv/orgs",
      "repos_url": "https://api.github.com/users/dhruv/repos",
      "events_url": "https://api.github.com/users/dhruv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhruv/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "You're right. My apologies for misreading the diff as just removing the `run_test()` function (which I did try manually). Updated. Thanks for your patience.",
    "created_at": "2021-04-30T15:48:29Z",
    "updated_at": "2021-04-30T15:48:29Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r623982580",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623982580"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r623982580"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623982580/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": 21,
    "start_side": "RIGHT",
    "line": null,
    "original_line": 20,
    "side": "RIGHT",
    "in_reply_to_id": 623675668
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/650584482",
    "pull_request_review_id": 682449517,
    "id": 650584482,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY1MDU4NDQ4Mg==",
    "diff_hunk": "@@ -490,11 +490,8 @@ void CRegTestParams::UpdateActivationParametersFromArgs(const ArgsManager& args)\n {\n     if (args.IsArgSet(\"-segwitheight\")) {\n         int64_t height = args.GetArg(\"-segwitheight\", consensus.SegwitHeight);\n-        if (height < -1 || height >= std::numeric_limits<int>::max()) {\n-            throw std::runtime_error(strprintf(\"Activation height %ld for segwit is out of valid range. Use -1 to disable segwit.\", height));\n-        } else if (height == -1) {\n-            LogPrintf(\"Segwit disabled for testing\\n\");\n-            height = std::numeric_limits<int>::max();",
    "path": "src/chainparams.cpp",
    "position": 8,
    "original_position": 8,
    "commit_id": "a806647d260132a00cd633160040625c7dd17803",
    "original_commit_id": "a552c1ae3607cea3d22c49c6bed8bd619acc2ba7",
    "user": {
      "login": "mzumsande",
      "id": 48763452,
      "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
      "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mzumsande",
      "html_url": "https://github.com/mzumsande",
      "followers_url": "https://api.github.com/users/mzumsande/followers",
      "following_url": "https://api.github.com/users/mzumsande/following{/other_user}",
      "gists_url": "https://api.github.com/users/mzumsande/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
      "organizations_url": "https://api.github.com/users/mzumsande/orgs",
      "repos_url": "https://api.github.com/users/mzumsande/repos",
      "events_url": "https://api.github.com/users/mzumsande/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mzumsande/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "With the `segwitheight=-1` option removed, I think that also `IsScriptWitnessEnabled()` in `validation.cpp` has become obsolete and could be removed as well (the comment there also seems to say that it's only kept along for `p2p_segwit.py`).",
    "created_at": "2021-06-13T22:14:34Z",
    "updated_at": "2021-06-13T22:18:20Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r650584482",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/650584482"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r650584482"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/650584482/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 497,
    "original_line": 497,
    "side": "LEFT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/650586262",
    "pull_request_review_id": 682450586,
    "id": 650586262,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY1MDU4NjI2Mg==",
    "diff_hunk": "@@ -490,11 +490,8 @@ void CRegTestParams::UpdateActivationParametersFromArgs(const ArgsManager& args)\n {\n     if (args.IsArgSet(\"-segwitheight\")) {\n         int64_t height = args.GetArg(\"-segwitheight\", consensus.SegwitHeight);\n-        if (height < -1 || height >= std::numeric_limits<int>::max()) {\n-            throw std::runtime_error(strprintf(\"Activation height %ld for segwit is out of valid range. Use -1 to disable segwit.\", height));\n-        } else if (height == -1) {\n-            LogPrintf(\"Segwit disabled for testing\\n\");\n-            height = std::numeric_limits<int>::max();",
    "path": "src/chainparams.cpp",
    "position": 8,
    "original_position": 8,
    "commit_id": "a806647d260132a00cd633160040625c7dd17803",
    "original_commit_id": "a552c1ae3607cea3d22c49c6bed8bd619acc2ba7",
    "user": {
      "login": "mzumsande",
      "id": 48763452,
      "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
      "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mzumsande",
      "html_url": "https://github.com/mzumsande",
      "followers_url": "https://api.github.com/users/mzumsande/followers",
      "following_url": "https://api.github.com/users/mzumsande/following{/other_user}",
      "gists_url": "https://api.github.com/users/mzumsande/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
      "organizations_url": "https://api.github.com/users/mzumsande/orgs",
      "repos_url": "https://api.github.com/users/mzumsande/repos",
      "events_url": "https://api.github.com/users/mzumsande/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mzumsande/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "There is another check for `consensusParams.SegwitHeight != std::numeric_limits<int>::max())` in `GenerateCoinbaseCommitment()`, also in validation.",
    "created_at": "2021-06-13T22:32:58Z",
    "updated_at": "2021-06-13T22:32:58Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r650586262",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/650586262"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r650586262"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/650586262/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 497,
    "original_line": 497,
    "side": "LEFT",
    "in_reply_to_id": 650584482
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/654972447",
    "pull_request_review_id": 687930827,
    "id": 654972447,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY1NDk3MjQ0Nw==",
    "diff_hunk": "@@ -490,11 +490,8 @@ void CRegTestParams::UpdateActivationParametersFromArgs(const ArgsManager& args)\n {\n     if (args.IsArgSet(\"-segwitheight\")) {\n         int64_t height = args.GetArg(\"-segwitheight\", consensus.SegwitHeight);\n-        if (height < -1 || height >= std::numeric_limits<int>::max()) {\n-            throw std::runtime_error(strprintf(\"Activation height %ld for segwit is out of valid range. Use -1 to disable segwit.\", height));\n-        } else if (height == -1) {\n-            LogPrintf(\"Segwit disabled for testing\\n\");\n-            height = std::numeric_limits<int>::max();",
    "path": "src/chainparams.cpp",
    "position": 8,
    "original_position": 8,
    "commit_id": "a806647d260132a00cd633160040625c7dd17803",
    "original_commit_id": "a552c1ae3607cea3d22c49c6bed8bd619acc2ba7",
    "user": {
      "login": "dhruv",
      "id": 856960,
      "node_id": "MDQ6VXNlcjg1Njk2MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/856960?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhruv",
      "html_url": "https://github.com/dhruv",
      "followers_url": "https://api.github.com/users/dhruv/followers",
      "following_url": "https://api.github.com/users/dhruv/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhruv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhruv/subscriptions",
      "organizations_url": "https://api.github.com/users/dhruv/orgs",
      "repos_url": "https://api.github.com/users/dhruv/repos",
      "events_url": "https://api.github.com/users/dhruv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhruv/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Great catches. Thank you, @mzumsande! Both comments addressed.",
    "created_at": "2021-06-20T18:32:43Z",
    "updated_at": "2021-06-20T18:32:43Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r654972447",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/654972447"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r654972447"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/654972447/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 497,
    "original_line": 497,
    "side": "LEFT",
    "in_reply_to_id": 650584482
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/662984447",
    "pull_request_review_id": 698147566,
    "id": 662984447,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2Mjk4NDQ0Nw==",
    "diff_hunk": "@@ -550,37 +535,9 @@ def test_v0_outputs_arent_spendable(self):\n             # TODO: support multiple acceptable reject reasons.\n             test_witness_block(self.nodes[0], self.test_node, block, accepted=False, with_witness=False)\n \n-        self.connect_nodes(0, 2)\n-\n         self.utxo.pop(0)\n         self.utxo.append(UTXO(txid, 2, value))\n \n-    @subtest  # type: ignore\n-    def test_getblocktemplate_before_lockin(self):\n-        txid = int(self.nodes[0].sendtoaddress(self.nodes[0].getnewaddress(), 1), 16)\n-\n-        for node in [self.nodes[0], self.nodes[2]]:\n-            gbt_results = node.getblocktemplate({\"rules\": [\"segwit\"]})\n-            if node == self.nodes[2]:\n-                # If this is a non-segwit node, we should not get a witness\n-                # commitment.\n-                assert 'default_witness_commitment' not in gbt_results\n-            else:\n-                # For segwit-aware nodes, check the witness\n-                # commitment is correct.\n-                assert 'default_witness_commitment' in gbt_results\n-                witness_commitment = gbt_results['default_witness_commitment']\n-\n-                # Check that default_witness_commitment is present.\n-                witness_root = CBlock.get_merkle_root([ser_uint256(0),\n-                                                       ser_uint256(txid)])\n-                script = get_witness_script(witness_root, 0)\n-                assert_equal(witness_commitment, script.hex())",
    "path": "test/functional/p2p_segwit.py",
    "position": 96,
    "original_position": 96,
    "commit_id": "a806647d260132a00cd633160040625c7dd17803",
    "original_commit_id": "c24ffdcbaf7b38a136566dc7e54d6cc3a80d373b",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "why is the test for default_witness_commitment removed?",
    "created_at": "2021-07-02T12:43:08Z",
    "updated_at": "2021-07-02T12:43:08Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r662984447",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/662984447"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r662984447"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/662984447/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 578,
    "original_line": 578,
    "side": "LEFT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/662990109",
    "pull_request_review_id": 698155292,
    "id": 662990109,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2Mjk5MDEwOQ==",
    "diff_hunk": "@@ -550,37 +535,9 @@ def test_v0_outputs_arent_spendable(self):\n             # TODO: support multiple acceptable reject reasons.\n             test_witness_block(self.nodes[0], self.test_node, block, accepted=False, with_witness=False)\n \n-        self.connect_nodes(0, 2)\n-\n         self.utxo.pop(0)\n         self.utxo.append(UTXO(txid, 2, value))\n \n-    @subtest  # type: ignore\n-    def test_getblocktemplate_before_lockin(self):\n-        txid = int(self.nodes[0].sendtoaddress(self.nodes[0].getnewaddress(), 1), 16)\n-\n-        for node in [self.nodes[0], self.nodes[2]]:\n-            gbt_results = node.getblocktemplate({\"rules\": [\"segwit\"]})\n-            if node == self.nodes[2]:\n-                # If this is a non-segwit node, we should not get a witness\n-                # commitment.\n-                assert 'default_witness_commitment' not in gbt_results\n-            else:\n-                # For segwit-aware nodes, check the witness\n-                # commitment is correct.\n-                assert 'default_witness_commitment' in gbt_results\n-                witness_commitment = gbt_results['default_witness_commitment']\n-\n-                # Check that default_witness_commitment is present.\n-                witness_root = CBlock.get_merkle_root([ser_uint256(0),\n-                                                       ser_uint256(txid)])\n-                script = get_witness_script(witness_root, 0)\n-                assert_equal(witness_commitment, script.hex())",
    "path": "test/functional/p2p_segwit.py",
    "position": 96,
    "original_position": 96,
    "commit_id": "a806647d260132a00cd633160040625c7dd17803",
    "original_commit_id": "c24ffdcbaf7b38a136566dc7e54d6cc3a80d373b",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Segwit is a buried deployment. There are no miners calling `getblocktemplate` before the segwit activation is locked in.",
    "created_at": "2021-07-02T12:52:34Z",
    "updated_at": "2021-07-02T12:52:34Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r662990109",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/662990109"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r662990109"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/662990109/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 578,
    "original_line": 578,
    "side": "LEFT",
    "in_reply_to_id": 662984447
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/662995852",
    "pull_request_review_id": 698162954,
    "id": 662995852,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2Mjk5NTg1Mg==",
    "diff_hunk": "@@ -550,37 +535,9 @@ def test_v0_outputs_arent_spendable(self):\n             # TODO: support multiple acceptable reject reasons.\n             test_witness_block(self.nodes[0], self.test_node, block, accepted=False, with_witness=False)\n \n-        self.connect_nodes(0, 2)\n-\n         self.utxo.pop(0)\n         self.utxo.append(UTXO(txid, 2, value))\n \n-    @subtest  # type: ignore\n-    def test_getblocktemplate_before_lockin(self):\n-        txid = int(self.nodes[0].sendtoaddress(self.nodes[0].getnewaddress(), 1), 16)\n-\n-        for node in [self.nodes[0], self.nodes[2]]:\n-            gbt_results = node.getblocktemplate({\"rules\": [\"segwit\"]})\n-            if node == self.nodes[2]:\n-                # If this is a non-segwit node, we should not get a witness\n-                # commitment.\n-                assert 'default_witness_commitment' not in gbt_results\n-            else:\n-                # For segwit-aware nodes, check the witness\n-                # commitment is correct.\n-                assert 'default_witness_commitment' in gbt_results\n-                witness_commitment = gbt_results['default_witness_commitment']\n-\n-                # Check that default_witness_commitment is present.\n-                witness_root = CBlock.get_merkle_root([ser_uint256(0),\n-                                                       ser_uint256(txid)])\n-                script = get_witness_script(witness_root, 0)\n-                assert_equal(witness_commitment, script.hex())",
    "path": "test/functional/p2p_segwit.py",
    "position": 96,
    "original_position": 96,
    "commit_id": "a806647d260132a00cd633160040625c7dd17803",
    "original_commit_id": "c24ffdcbaf7b38a136566dc7e54d6cc3a80d373b",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "The commitment is produced regardless of whether segwit locked in or not.",
    "created_at": "2021-07-02T13:01:36Z",
    "updated_at": "2021-07-02T13:01:36Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r662995852",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/662995852"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r662995852"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/662995852/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 578,
    "original_line": 578,
    "side": "LEFT",
    "in_reply_to_id": 662984447
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/663766372",
    "pull_request_review_id": 698961314,
    "id": 663766372,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2Mzc2NjM3Mg==",
    "diff_hunk": "@@ -550,37 +535,9 @@ def test_v0_outputs_arent_spendable(self):\n             # TODO: support multiple acceptable reject reasons.\n             test_witness_block(self.nodes[0], self.test_node, block, accepted=False, with_witness=False)\n \n-        self.connect_nodes(0, 2)\n-\n         self.utxo.pop(0)\n         self.utxo.append(UTXO(txid, 2, value))\n \n-    @subtest  # type: ignore\n-    def test_getblocktemplate_before_lockin(self):\n-        txid = int(self.nodes[0].sendtoaddress(self.nodes[0].getnewaddress(), 1), 16)\n-\n-        for node in [self.nodes[0], self.nodes[2]]:\n-            gbt_results = node.getblocktemplate({\"rules\": [\"segwit\"]})\n-            if node == self.nodes[2]:\n-                # If this is a non-segwit node, we should not get a witness\n-                # commitment.\n-                assert 'default_witness_commitment' not in gbt_results\n-            else:\n-                # For segwit-aware nodes, check the witness\n-                # commitment is correct.\n-                assert 'default_witness_commitment' in gbt_results\n-                witness_commitment = gbt_results['default_witness_commitment']\n-\n-                # Check that default_witness_commitment is present.\n-                witness_root = CBlock.get_merkle_root([ser_uint256(0),\n-                                                       ser_uint256(txid)])\n-                script = get_witness_script(witness_root, 0)\n-                assert_equal(witness_commitment, script.hex())",
    "path": "test/functional/p2p_segwit.py",
    "position": 96,
    "original_position": 96,
    "commit_id": "a806647d260132a00cd633160040625c7dd17803",
    "original_commit_id": "c24ffdcbaf7b38a136566dc7e54d6cc3a80d373b",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Oh, I see now that `default_witness_commitment` is not tested anywhere else. Perhaps it should be tested in mining_basic.py?",
    "created_at": "2021-07-05T09:07:28Z",
    "updated_at": "2021-07-05T09:07:29Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r663766372",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/663766372"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r663766372"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/663766372/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 578,
    "original_line": 578,
    "side": "LEFT",
    "in_reply_to_id": 662984447
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/665876449",
    "pull_request_review_id": 701647822,
    "id": 665876449,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2NTg3NjQ0OQ==",
    "diff_hunk": "@@ -550,37 +535,9 @@ def test_v0_outputs_arent_spendable(self):\n             # TODO: support multiple acceptable reject reasons.\n             test_witness_block(self.nodes[0], self.test_node, block, accepted=False, with_witness=False)\n \n-        self.connect_nodes(0, 2)\n-\n         self.utxo.pop(0)\n         self.utxo.append(UTXO(txid, 2, value))\n \n-    @subtest  # type: ignore\n-    def test_getblocktemplate_before_lockin(self):\n-        txid = int(self.nodes[0].sendtoaddress(self.nodes[0].getnewaddress(), 1), 16)\n-\n-        for node in [self.nodes[0], self.nodes[2]]:\n-            gbt_results = node.getblocktemplate({\"rules\": [\"segwit\"]})\n-            if node == self.nodes[2]:\n-                # If this is a non-segwit node, we should not get a witness\n-                # commitment.\n-                assert 'default_witness_commitment' not in gbt_results\n-            else:\n-                # For segwit-aware nodes, check the witness\n-                # commitment is correct.\n-                assert 'default_witness_commitment' in gbt_results\n-                witness_commitment = gbt_results['default_witness_commitment']\n-\n-                # Check that default_witness_commitment is present.\n-                witness_root = CBlock.get_merkle_root([ser_uint256(0),\n-                                                       ser_uint256(txid)])\n-                script = get_witness_script(witness_root, 0)\n-                assert_equal(witness_commitment, script.hex())",
    "path": "test/functional/p2p_segwit.py",
    "position": 96,
    "original_position": 96,
    "commit_id": "a806647d260132a00cd633160040625c7dd17803",
    "original_commit_id": "c24ffdcbaf7b38a136566dc7e54d6cc3a80d373b",
    "user": {
      "login": "dhruv",
      "id": 856960,
      "node_id": "MDQ6VXNlcjg1Njk2MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/856960?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhruv",
      "html_url": "https://github.com/dhruv",
      "followers_url": "https://api.github.com/users/dhruv/followers",
      "following_url": "https://api.github.com/users/dhruv/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhruv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhruv/subscriptions",
      "organizations_url": "https://api.github.com/users/dhruv/orgs",
      "repos_url": "https://api.github.com/users/dhruv/repos",
      "events_url": "https://api.github.com/users/dhruv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhruv/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Thank you for the catch, @MarcoFalke ! Test is now moved into mining_basic.py",
    "created_at": "2021-07-08T05:18:11Z",
    "updated_at": "2021-07-08T05:18:11Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r665876449",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/665876449"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r665876449"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/665876449/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 578,
    "original_line": 578,
    "side": "LEFT",
    "in_reply_to_id": 662984447
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/665977709",
    "pull_request_review_id": 701776960,
    "id": 665977709,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2NTk3NzcwOQ==",
    "diff_hunk": "@@ -49,6 +51,9 @@ def set_test_params(self):\n         self.setup_clean_chain = True\n         self.supports_cli = False\n \n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()",
    "path": "test/functional/mining_basic.py",
    "position": 21,
    "original_position": 21,
    "commit_id": "a806647d260132a00cd633160040625c7dd17803",
    "original_commit_id": "a806647d260132a00cd633160040625c7dd17803",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This is ok for now, but it'd be nice to rework this test so that it doesn't require a wallet.\r\n\r\nWe could also update the test to verify that the witness commitment commits to the wtxids of the transactions in the block rather than the txids. Currently the block being tested contains only the coinbase transaction and one transaction that spends from a P2PKH output, so the txid is the same as wtxid. It could be updated to include transactions that spend segwit outputs so that the txid and wtxid are different.",
    "created_at": "2021-07-08T08:22:44Z",
    "updated_at": "2021-07-08T08:53:02Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r665977709",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/665977709"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r665977709"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/665977709/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": 54,
    "original_start_line": 54,
    "start_side": "RIGHT",
    "line": 55,
    "original_line": 55,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/666523282",
    "pull_request_review_id": 702506742,
    "id": 666523282,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2NjUyMzI4Mg==",
    "diff_hunk": "@@ -49,6 +51,9 @@ def set_test_params(self):\n         self.setup_clean_chain = True\n         self.supports_cli = False\n \n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()",
    "path": "test/functional/mining_basic.py",
    "position": 21,
    "original_position": 21,
    "commit_id": "a806647d260132a00cd633160040625c7dd17803",
    "original_commit_id": "a806647d260132a00cd633160040625c7dd17803",
    "user": {
      "login": "dhruv",
      "id": 856960,
      "node_id": "MDQ6VXNlcjg1Njk2MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/856960?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dhruv",
      "html_url": "https://github.com/dhruv",
      "followers_url": "https://api.github.com/users/dhruv/followers",
      "following_url": "https://api.github.com/users/dhruv/following{/other_user}",
      "gists_url": "https://api.github.com/users/dhruv/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dhruv/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dhruv/subscriptions",
      "organizations_url": "https://api.github.com/users/dhruv/orgs",
      "repos_url": "https://api.github.com/users/dhruv/repos",
      "events_url": "https://api.github.com/users/dhruv/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dhruv/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I can do those in a follow-up PR. Can you tell me more about how I could remove the wallet dependency? My understanding is that to have `getblocktemplate` include a transaction that the witness root commits to, I need a valid transaction in the mempool, and to create that valid tx, I need a wallet. I feel like I am missing something about the test framework perhaps?",
    "created_at": "2021-07-08T21:15:22Z",
    "updated_at": "2021-07-08T21:15:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r666523282",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/666523282"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r666523282"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/666523282/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": 54,
    "original_start_line": 54,
    "start_side": "RIGHT",
    "line": 55,
    "original_line": 55,
    "side": "RIGHT",
    "in_reply_to_id": 665977709
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/666592597",
    "pull_request_review_id": 702590827,
    "id": 666592597,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2NjU5MjU5Nw==",
    "diff_hunk": "@@ -49,6 +51,9 @@ def set_test_params(self):\n         self.setup_clean_chain = True\n         self.supports_cli = False\n \n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()",
    "path": "test/functional/mining_basic.py",
    "position": 21,
    "original_position": 21,
    "commit_id": "a806647d260132a00cd633160040625c7dd17803",
    "original_commit_id": "a806647d260132a00cd633160040625c7dd17803",
    "user": {
      "login": "theStack",
      "id": 91535,
      "node_id": "MDQ6VXNlcjkxNTM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theStack",
      "html_url": "https://github.com/theStack",
      "followers_url": "https://api.github.com/users/theStack/followers",
      "following_url": "https://api.github.com/users/theStack/following{/other_user}",
      "gists_url": "https://api.github.com/users/theStack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theStack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
      "organizations_url": "https://api.github.com/users/theStack/orgs",
      "repos_url": "https://api.github.com/users/theStack/repos",
      "events_url": "https://api.github.com/users/theStack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theStack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "@dhruv: Luckily we have a minimalistic wallet implementation for the functional test framework (first introduced by MarcoFalke last year, see #19800). Look for modules importing `MiniWallet` for example usage, see also issue #20078. Also, feel free to tag me in your follow-up PR, will be happy to review.",
    "created_at": "2021-07-09T00:17:38Z",
    "updated_at": "2021-07-09T00:17:38Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r666592597",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/666592597"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r666592597"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/666592597/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": 54,
    "original_start_line": 54,
    "start_side": "RIGHT",
    "line": 55,
    "original_line": 55,
    "side": "RIGHT",
    "in_reply_to_id": 665977709
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/675101211",
    "pull_request_review_id": 713156421,
    "id": 675101211,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3NTEwMTIxMQ==",
    "diff_hunk": "@@ -89,7 +94,21 @@ def assert_submitblock(block, result_str_1, result_str_2=None):\n         assert_equal(mining_info['networkhashps'], Decimal('0.003333333333333334'))\n         assert_equal(mining_info['pooledtx'], 0)\n \n-        # Mine a block to leave initial block download\n+        self.log.info(\"getblocktemplate: Test default witness commitment\")\n+        txid = int(node.sendtoaddress(node.getnewaddress(), 1), 16)\n+        tmpl = node.getblocktemplate(NORMAL_GBT_REQUEST_PARAMS)\n+\n+        # Check that default_witness_commitment is present.\n+        assert 'default_witness_commitment' in tmpl\n+        witness_commitment = tmpl['default_witness_commitment']\n+\n+        # Check that default_witness_commitment is correct.\n+        witness_root = CBlock.get_merkle_root([ser_uint256(0),\n+                                               ser_uint256(txid)])\n+        script = get_witness_script(witness_root, 0)\n+        assert_equal(witness_commitment, script.hex())",
    "path": "test/functional/mining_basic.py",
    "position": 43,
    "original_position": 43,
    "commit_id": "a806647d260132a00cd633160040625c7dd17803",
    "original_commit_id": "eba5b1cd6460c98e75d0422bd394e12af7f11e4c",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Python will throw key-error, so you don't need the \"# Check that default_witness_commitment is present.\" section.\r\n\r\nSee:\r\n\r\n```\r\n>>> {'b':1}['a']\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nKeyError: 'a'\r\n```\r\n\r\nSuggestion:\r\n\r\n```py\r\n         assert_equal(tmpl['default_witness_commitment'], script.hex())",
    "created_at": "2021-07-22T19:24:04Z",
    "updated_at": "2021-07-22T19:49:19Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r675101211",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/675101211"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r675101211"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/675101211/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 109,
    "original_line": 109,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/675101560",
    "pull_request_review_id": 713156421,
    "id": 675101560,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3NTEwMTU2MA==",
    "diff_hunk": "@@ -49,6 +51,9 @@ def set_test_params(self):\n         self.setup_clean_chain = True\n         self.supports_cli = False\n \n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()",
    "path": "test/functional/mining_basic.py",
    "position": 21,
    "original_position": 21,
    "commit_id": "a806647d260132a00cd633160040625c7dd17803",
    "original_commit_id": "a806647d260132a00cd633160040625c7dd17803",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Agree",
    "created_at": "2021-07-22T19:24:38Z",
    "updated_at": "2021-07-22T19:49:19Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r675101560",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/675101560"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21090#discussion_r675101560"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21090"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/675101560/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": 54,
    "original_start_line": 54,
    "start_side": "RIGHT",
    "line": 55,
    "original_line": 55,
    "side": "RIGHT",
    "in_reply_to_id": 665977709
  }
]