DrahtBot,2020-07-08 11:28:40,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #14053 (Add address-based index (attempt 4?) by marcinja)\n\nIf you consider this pull request important, please also help",https://github.com/bitcoin/bitcoin/pull/19464#issuecomment-655459727,655459727,
fjahr,2020-07-10 19:01:04,Concept ACK but the commits are cluttered up with quite a bit of edits that produce unnecessary noise.,https://github.com/bitcoin/bitcoin/pull/19464#issuecomment-656834525,656834525,
jonatack,2020-07-11 08:38:49,Thanks @MarcoFalke and @fjahr for reviewing! Updated with your feedback per `git range-diff 505b4ed f926882 b71eac1` for easy re-ACK.,https://github.com/bitcoin/bitcoin/pull/19464#issuecomment-657016435,657016435,
jonatack,2020-07-11 09:32:33,"> Do the unit and functional tests pass on [ff43c0c](https://github.com/bitcoin/bitcoin/commit/ff43c0c49eb087d27cd6ecf6b30fe6f6f96df650)\n\nThe tests had to be updated for the config removal.",https://github.com/bitcoin/bitcoin/pull/19464#issuecomment-657024820,657024820,
jonatack,2020-07-11 09:40:03,"> If not, the following two commits should be squashed into it. Or maybe just squash all commit? man_shrugging\n> \n> Review-only ACK\n\nThanks for ACKing. I took the time to made atomic commits for different actions, step by step, as seen in other contributors' changesets and as described in `CONTRIBUTING.md` and in the wikipedia link it contains.\n```md\nIn general, [commits should be atom",https://github.com/bitcoin/bitcoin/pull/19464#issuecomment-657026625,657026625,
MarcoFalke,2020-07-11 09:52:57,Please see the second section of https://www.codewithjason.com/atomic-commits-testing/,https://github.com/bitcoin/bitcoin/pull/19464#issuecomment-657029431,657029431,
jonatack,2020-07-11 10:11:26,"> Please see the second section of https://www.codewithjason.com/atomic-commits-testing/\n\nYes, I agree with this and it has been my standard practice. But AFAIK it's not what is requested in this project's documentation, and maybe not the most-observed practice in this project -- I had to unlearn my practices to adapt to it.",https://github.com/bitcoin/bitcoin/pull/19464#issuecomment-657033372,657033372,
MarcoFalke,2020-07-11 10:13:04,">  But AFAIK it's not what is requested in this project's documentation\n\nOk, then our documentation is wrong and should be fixed.",https://github.com/bitcoin/bitcoin/pull/19464#issuecomment-657033750,657033750,
jonatack,2020-07-11 10:15:11,I'll make the commits hygienic.,https://github.com/bitcoin/bitcoin/pull/19464#issuecomment-657034158,657034158,
jonatack,2020-07-13 14:35:39,"Thanks for reviewing, @vasild!\n\n> Should `doc/man/bitcoin-qt.1` and `doc/man/bitcoind.1` be updated in this PR (they contain references to `-banscore`)?\n\nAFAIK the manpages are auto-generated; we don't edit them in PRs.\n \n> If this PR gets merged now, it means that Bitcoin Core 0.21 will not recognize the `-banscore` command line option, is this the intention?\n\nCorrect. See the lin",https://github.com/bitcoin/bitcoin/pull/19464#issuecomment-657598045,657598045,
MarcoFalke,2020-07-13 17:28:01,"Ideally everything would go in one swish (including state->nMisbehavior), but that can't happen because it is still needed for RPC. This is a necessary first step.\n\n\nreview ACK 06059b0c2a6c2db70c87a7715f8a344a13400fa1 ðŸ“™\n\n<details><summary>Show signature and timestamp</summary>\n\nSignature:\n\n```\n-----BEGIN PGP SIGNED MESSAGE-----\nHash: SHA512\n\nreview ACK 06059b0c2a6c2db70c8",https://github.com/bitcoin/bitcoin/pull/19464#issuecomment-657690196,657690196,
jnewbery,2020-07-14 08:39:42,"post-merge ACK.\n\nThe test `BOOST_AUTO_TEST_CASE(DoS_banscore)` should be removed entirely. It only existed to test manually testing the `-banscore` config. Nothing else in the test is untested by the previous `DoS_banning` test.",https://github.com/bitcoin/bitcoin/pull/19464#issuecomment-658052518,658052518,
jonatack,2020-07-14 12:17:26,"> post-merge ACK.\n> \n> The test `BOOST_AUTO_TEST_CASE(DoS_banscore)` should be removed entirely. It only existed to test manually testing the `-banscore` config. Nothing else in the test is untested by the previous `DoS_banning` test.\n\nGood point @jnewbery. Added the removal to the test change commit in #19512.",https://github.com/bitcoin/bitcoin/pull/19464#issuecomment-658146397,658146397,
MarcoFalke,2020-07-10 13:15:31,Mind adding this to the main release notes file? There shouldn't be any conflicts and this is not for backport either.,https://github.com/bitcoin/bitcoin/pull/19464#discussion_r452835586,452835586,doc/release-notes-19464.md
jonatack,2020-07-11 08:35:54,Done,https://github.com/bitcoin/bitcoin/pull/19464#discussion_r453172542,453172542,doc/release-notes-19464.md
MarcoFalke,2020-07-11 09:26:18,can be moved to the cpp file and made constexpr?,https://github.com/bitcoin/bitcoin/pull/19464#discussion_r453176410,453176410,src/net_processing.h
jonatack,2020-07-11 09:46:21,"> can be moved to the cpp file and made constexpr?\n\ngood idea",https://github.com/bitcoin/bitcoin/pull/19464#discussion_r453178003,453178003,src/net_processing.h
jonatack,2020-07-11 11:13:04,"Done, then moved it back to the header file to be able to use it in the unit tests. This allowed for some nice improvements there.",https://github.com/bitcoin/bitcoin/pull/19464#discussion_r453184542,453184542,src/net_processing.h
vasild,2020-07-13 12:13:18,"Shouldn't this be in `doc/release-notes-19464.md`? `doc/developer-notes.md` says:\n> Release notes should be added to a PR-specific release note file at\n`/doc/release-notes-<PR number>.md`",https://github.com/bitcoin/bitcoin/pull/19464#discussion_r453605237,453605237,doc/release-notes.md
vasild,2020-07-13 12:25:53,Maybe worth mentioning what is the unit of this?,https://github.com/bitcoin/bitcoin/pull/19464#discussion_r453611722,453611722,src/net_processing.h
jonatack,2020-07-13 14:23:43,See https://github.com/bitcoin/bitcoin/pull/19464#discussion_r452835586,https://github.com/bitcoin/bitcoin/pull/19464#discussion_r453687168,453687168,doc/release-notes.md
jonatack,2020-07-13 14:25:20,"What unit would you suggest? It's just a score (see `Misbehaving` in net_processing.cpp), and expected to be removed (see the links in the PR description).",https://github.com/bitcoin/bitcoin/pull/19464#discussion_r453688353,453688353,src/net_processing.h
MarcoFalke,2020-07-13 17:24:53,"```suggestion\n  section, ""Changes regarding misbehaving peers"" in the 0.20.1 release notes, for details. (#19464)\n```",https://github.com/bitcoin/bitcoin/pull/19464#discussion_r453809868,453809868,doc/release-notes.md
practicalswift,2020-07-13 21:45:16,Why the change from 10 to 100 iterations here? :),https://github.com/bitcoin/bitcoin/pull/19464#discussion_r453951745,453951745,test/functional/p2p_leak.py
practicalswift,2020-07-13 21:46:01,Why the change from `100` to `89` here? :),https://github.com/bitcoin/bitcoin/pull/19464#discussion_r453952277,453952277,src/test/denialofservice_tests.cpp
jonatack,2020-07-14 04:46:53,"Because we can no longer use `-banscore` to change the default threshold (see removed line in test: `self.extra_args = [['-banscore=' + str(banscore)]]`), so we have to use `DISCOURAGEMENT_THRESHOLD` here for the number of veracks sans version to send.\n\nNote to self: the words ""ban"" in this functional test should be updated to ""discourage"".",https://github.com/bitcoin/bitcoin/pull/19464#discussion_r454097473,454097473,test/functional/p2p_leak.py
jonatack,2020-07-14 04:50:10,"See the two removed `-banscore` lines of this test, particularly the first one: `gArgs.ForceSetArg(""-banscore"", ""111""); // because 11 is my favorite number`.",https://github.com/bitcoin/bitcoin/pull/19464#discussion_r454098331,454098331,src/test/denialofservice_tests.cpp
jonatack,2020-07-14 06:58:49,"Oh, good catch.",https://github.com/bitcoin/bitcoin/pull/19464#discussion_r454144115,454144115,doc/release-notes.md
jonatack,2020-07-14 07:00:11,"Will touch it up in the GUI PR to remove the banscore field, mentioned in the PR description.",https://github.com/bitcoin/bitcoin/pull/19464#discussion_r454144728,454144728,doc/release-notes.md
jonatack,2020-07-14 08:23:32,"Done, thanks again for seeing that.",https://github.com/bitcoin/bitcoin/pull/19464#discussion_r454188410,454188410,doc/release-notes.md
