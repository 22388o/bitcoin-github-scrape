[
  {
    "sha": "76cd4000d5cbeb38ae9f53072fcfb86b8e7d400f",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo3NmNkNDAwMGQ1Y2JlYjM4YWU5ZjUzMDcyZmNmYjg2YjhlN2Q0MDBm",
    "commit": {
      "author": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2017-12-13T21:17:34Z"
      },
      "committer": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2017-12-14T06:25:40Z"
      },
      "message": "Pass back FeeCalculation object in CWallet::CreateTransaction()",
      "tree": {
        "sha": "fd57f863142c88e95d1ec6a76e82a0fd007e6836",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/fd57f863142c88e95d1ec6a76e82a0fd007e6836"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/76cd4000d5cbeb38ae9f53072fcfb86b8e7d400f",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEyhopCNzi8TB0xizeHrd2uwPHki0FAloyGWUACgkQHrd2uwPH\nki0GBRAAt3bQ682psNyeS1Bw25DBdspHcsVzsPIcl2ZAjXdasaVCEHU2zcDL32DE\nCO/+YK6HpxWkvw7ibh+Y9sMc++grAw9g6JJ957NIZO1iLMdy3a5HCMWd3lh/9hl6\nFjaOnKRfAdwR6mRLr237dpXphIqnanZdZztRbLx8zG+DjQJKI/GmVR8vAlkM/KzV\naw22R/70xpX7uRVWxQ/Pu90lUa4ezfeJ/KV9Qpf7W8/sd4Fg8wB9yiWmJltnTNhX\nBTVrt5SWjpI68/EVTL6QGNblnHdriDttQ6M1Rn8GfcF3nH3Q1Yai4k/d9sr+PxQs\nPvSZ1gicmRtQp8kv3mpTlMbKBkmqfft45MRG8xGGx34k4WgRJDFq1m1m5+Cv/x1b\nsIVXKCKtRKK4DeUKi3EebSIlihtK5fJqCkwrIeHoaGTVIzXRE53qvOJLigVgxH6d\ncwMCJsEPkDpAtkcLUNTsD+V05mGWw/M3yY9DQangA9uP/yKMZppilzuCDZrHT6GC\nPjx8kqHfanPdW7OWGyq36Yr1qElWWF107nFfWKHYI0/+rjJu4G1s8LWZLmAFR5fW\nSVC1Cz3vfhAgI+l+WmE4E/MiqKN1XfjsC97btD5zArQLu6bEl5e591cCFdffhGbL\nK3JsPCn1HAjTcNNy3S2dLXjG0pX8xfpBLGZ1qpJnONTYz5Dk5PM=\n=iKYY\n-----END PGP SIGNATURE-----",
        "payload": "tree fd57f863142c88e95d1ec6a76e82a0fd007e6836\nparent d4991c0cbb8a5464add1b64268eccdbfd3026d6e\nauthor Jonas Schnelli <dev@jonasschnelli.ch> 1513199854 -1000\ncommitter Jonas Schnelli <dev@jonasschnelli.ch> 1513232740 -1000\n\nPass back FeeCalculation object in CWallet::CreateTransaction()\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/76cd4000d5cbeb38ae9f53072fcfb86b8e7d400f",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/76cd4000d5cbeb38ae9f53072fcfb86b8e7d400f",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/76cd4000d5cbeb38ae9f53072fcfb86b8e7d400f/comments",
    "author": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "d4991c0cbb8a5464add1b64268eccdbfd3026d6e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d4991c0cbb8a5464add1b64268eccdbfd3026d6e",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/d4991c0cbb8a5464add1b64268eccdbfd3026d6e"
      }
    ],
    "stats": {
      "total": 20,
      "additions": 12,
      "deletions": 8
    },
    "files": [
      {
        "sha": "4d638f152cac7880402bca99fa94b6960afc82da",
        "filename": "src/qt/walletmodel.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 1,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/76cd4000d5cbeb38ae9f53072fcfb86b8e7d400f/src/qt/walletmodel.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/76cd4000d5cbeb38ae9f53072fcfb86b8e7d400f/src/qt/walletmodel.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/walletmodel.cpp?ref=76cd4000d5cbeb38ae9f53072fcfb86b8e7d400f",
        "patch": "@@ -276,7 +276,8 @@ WalletModel::SendCoinsReturn WalletModel::prepareTransaction(WalletModelTransact\n \n         CWalletTx *newTx = transaction.getTransaction();\n         CReserveKey *keyChange = transaction.getPossibleKeyChange();\n-        bool fCreated = wallet->CreateTransaction(vecSend, *newTx, *keyChange, nFeeRequired, nChangePosRet, strFailReason, coinControl);\n+        FeeCalculation feeCalc;\n+        bool fCreated = wallet->CreateTransaction(vecSend, *newTx, *keyChange, nFeeRequired, nChangePosRet, strFailReason, coinControl, feeCalc);\n         transaction.setTransactionFee(nFeeRequired);\n         if (fSubtractFeeFromAmount && fCreated)\n             transaction.reassignAmounts(nChangePosRet);"
      },
      {
        "sha": "969fce28cd62c066274cb5a188eb156f5d12fb92",
        "filename": "src/wallet/rpcwallet.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 2,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/76cd4000d5cbeb38ae9f53072fcfb86b8e7d400f/src/wallet/rpcwallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/76cd4000d5cbeb38ae9f53072fcfb86b8e7d400f/src/wallet/rpcwallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/rpcwallet.cpp?ref=76cd4000d5cbeb38ae9f53072fcfb86b8e7d400f",
        "patch": "@@ -406,7 +406,8 @@ static void SendMoney(CWallet * const pwallet, const CTxDestination &address, CA\n     int nChangePosRet = -1;\n     CRecipient recipient = {scriptPubKey, nValue, fSubtractFeeFromAmount};\n     vecSend.push_back(recipient);\n-    if (!pwallet->CreateTransaction(vecSend, wtxNew, reservekey, nFeeRequired, nChangePosRet, strError, coin_control)) {\n+    FeeCalculation feeCalc;\n+    if (!pwallet->CreateTransaction(vecSend, wtxNew, reservekey, nFeeRequired, nChangePosRet, strError, coin_control, feeCalc)) {\n         if (!fSubtractFeeFromAmount && nValue + nFeeRequired > curBalance)\n             strError = strprintf(\"Error: This transaction requires a transaction fee of at least %s\", FormatMoney(nFeeRequired));\n         throw JSONRPCError(RPC_WALLET_ERROR, strError);\n@@ -1126,7 +1127,8 @@ UniValue sendmany(const JSONRPCRequest& request)\n     CAmount nFeeRequired = 0;\n     int nChangePosRet = -1;\n     std::string strFailReason;\n-    bool fCreated = pwallet->CreateTransaction(vecSend, wtx, keyChange, nFeeRequired, nChangePosRet, strFailReason, coin_control);\n+    FeeCalculation feeCalc;\n+    bool fCreated = pwallet->CreateTransaction(vecSend, wtx, keyChange, nFeeRequired, nChangePosRet, strFailReason, coin_control, feeCalc);\n     if (!fCreated)\n         throw JSONRPCError(RPC_WALLET_INSUFFICIENT_FUNDS, strFailReason);\n     CValidationState state;"
      },
      {
        "sha": "b13e3d79f3ee225062cb1cd9dc0c3e96e96fecad",
        "filename": "src/wallet/test/wallet_tests.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 1,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/76cd4000d5cbeb38ae9f53072fcfb86b8e7d400f/src/wallet/test/wallet_tests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/76cd4000d5cbeb38ae9f53072fcfb86b8e7d400f/src/wallet/test/wallet_tests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/test/wallet_tests.cpp?ref=76cd4000d5cbeb38ae9f53072fcfb86b8e7d400f",
        "patch": "@@ -624,7 +624,8 @@ class ListCoinsTestingSetup : public TestChain100Setup\n         int changePos = -1;\n         std::string error;\n         CCoinControl dummy;\n-        BOOST_CHECK(wallet->CreateTransaction({recipient}, wtx, reservekey, fee, changePos, error, dummy));\n+        FeeCalculation feeCalc;\n+        BOOST_CHECK(wallet->CreateTransaction({recipient}, wtx, reservekey, fee, changePos, error, dummy, feeCalc));\n         CValidationState state;\n         BOOST_CHECK(wallet->CommitTransaction(wtx, reservekey, nullptr, state));\n         LOCK(wallet->cs_wallet);"
      },
      {
        "sha": "2a7f52cd9f26f20aa381bb8e3a0e2d52300ed50f",
        "filename": "src/wallet/wallet.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/76cd4000d5cbeb38ae9f53072fcfb86b8e7d400f/src/wallet/wallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/76cd4000d5cbeb38ae9f53072fcfb86b8e7d400f/src/wallet/wallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.cpp?ref=76cd4000d5cbeb38ae9f53072fcfb86b8e7d400f",
        "patch": "@@ -2610,7 +2610,8 @@ bool CWallet::FundTransaction(CMutableTransaction& tx, CAmount& nFeeRet, int& nC\n \n     CReserveKey reservekey(this);\n     CWalletTx wtx;\n-    if (!CreateTransaction(vecSend, wtx, reservekey, nFeeRet, nChangePosInOut, strFailReason, coinControl, false)) {\n+    FeeCalculation feeCalc;\n+    if (!CreateTransaction(vecSend, wtx, reservekey, nFeeRet, nChangePosInOut, strFailReason, coinControl, feeCalc, false)) {\n         return false;\n     }\n \n@@ -2645,7 +2646,7 @@ bool CWallet::FundTransaction(CMutableTransaction& tx, CAmount& nFeeRet, int& nC\n }\n \n bool CWallet::CreateTransaction(const std::vector<CRecipient>& vecSend, CWalletTx& wtxNew, CReserveKey& reservekey, CAmount& nFeeRet,\n-                                int& nChangePosInOut, std::string& strFailReason, const CCoinControl& coin_control, bool sign)\n+                                int& nChangePosInOut, std::string& strFailReason, const CCoinControl& coin_control, FeeCalculation& feeCalc, bool sign)\n {\n     CAmount nValue = 0;\n     int nChangePosRequest = nChangePosInOut;\n@@ -2703,7 +2704,6 @@ bool CWallet::CreateTransaction(const std::vector<CRecipient>& vecSend, CWalletT\n \n     assert(txNew.nLockTime <= (unsigned int)chainActive.Height());\n     assert(txNew.nLockTime < LOCKTIME_THRESHOLD);\n-    FeeCalculation feeCalc;\n     CAmount nFeeNeeded;\n     unsigned int nBytes;\n     {"
      },
      {
        "sha": "8a374ac6c58247e421a18f52d70666efaf4b065f",
        "filename": "src/wallet/wallet.h",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/76cd4000d5cbeb38ae9f53072fcfb86b8e7d400f/src/wallet/wallet.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/76cd4000d5cbeb38ae9f53072fcfb86b8e7d400f/src/wallet/wallet.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.h?ref=76cd4000d5cbeb38ae9f53072fcfb86b8e7d400f",
        "patch": "@@ -961,7 +961,7 @@ class CWallet final : public CCryptoKeyStore, public CValidationInterface\n      * @note passing nChangePosInOut as -1 will result in setting a random position\n      */\n     bool CreateTransaction(const std::vector<CRecipient>& vecSend, CWalletTx& wtxNew, CReserveKey& reservekey, CAmount& nFeeRet, int& nChangePosInOut,\n-                           std::string& strFailReason, const CCoinControl& coin_control, bool sign = true);\n+                           std::string& strFailReason, const CCoinControl& coin_control, FeeCalculation& fee_calc, bool sign = true);\n     bool CommitTransaction(CWalletTx& wtxNew, CReserveKey& reservekey, CConnman* connman, CValidationState& state);\n \n     void ListAccountCreditDebit(const std::string& strAccount, std::list<CAccountingEntry>& entries);"
      }
    ]
  },
  {
    "sha": "147dc47c7f63826b2a47df9a6d524d76819400ab",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoxNDdkYzQ3YzdmNjM4MjZiMmE0N2RmOWE2ZDUyNGQ3NjgxOTQwMGFi",
    "commit": {
      "author": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2017-12-13T23:09:52Z"
      },
      "committer": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2017-12-14T06:25:43Z"
      },
      "message": "[Qt] Warn if fallback fee has been used",
      "tree": {
        "sha": "62328a1f525eccd88875300194d55b0eaa5d3b0f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/62328a1f525eccd88875300194d55b0eaa5d3b0f"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/147dc47c7f63826b2a47df9a6d524d76819400ab",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEyhopCNzi8TB0xizeHrd2uwPHki0FAloyGWcACgkQHrd2uwPH\nki126Q/+Oo1GbJk0GZ8OdNvsU4tkOYYZtJRl5BaqBIyFFSMpQ16BrG32Jtq5lLS0\nVByyFYLk+rswD6Z5XlcuXoZxHqwYxGQIIn2Rzu3cycBikfK3YBZhHwiSK5q/Q8FT\nmlvoNgKLiCYkm+4JGSDJR8KpjoODTdfrpa1bLfYftZph5d+bLQJmQSz4bvWea9Km\nMcUVqrUJqx0eQf8qUG1l1bgXjjoLIknfo4ie+dSssO49SM4DwrA52HaQe5XlBEWb\n6T25MLV4ID9xqrJO2KZn2wFU7W8om8ZCwwOfhqIC/h+AeXJME3BP2eNMu7Y8czS+\nWWYPnjQS/Xp4Zv0sM+MryMlzyskuTvvuYeWyTZDJNadZ4T4sNVmfBQJNrYzKxdRt\nw4ap8BRsL5ngVk7qm8Px0M0eBuGTD+cUnfmVUb4JGtCgBWVwh8Uckt9/Y4Pxkjel\neq800hq9mE4euWkONkC8s4ueIBkKA0r418ycu4UDirCs/8k1wQSZOH8/dBEmBNKB\nKIsOomIX9TXIkcDaBFdWw88yGYrBGy0UCiaOyFvX+FCt6Ru1d6YDAtblUm9ijtWH\nafeiWq7TEU99s+tIrf331DhMOtbpqOXVu2OERG1qQGQ/OGuMgYxMhT/l4On5rGCD\n5IkhPB0y2Oz3L6IMGiFsiVWsBq0yW2+G8jnP5dKdyjKDpbmeI5Y=\n=SoCO\n-----END PGP SIGNATURE-----",
        "payload": "tree 62328a1f525eccd88875300194d55b0eaa5d3b0f\nparent 76cd4000d5cbeb38ae9f53072fcfb86b8e7d400f\nauthor Jonas Schnelli <dev@jonasschnelli.ch> 1513206592 -1000\ncommitter Jonas Schnelli <dev@jonasschnelli.ch> 1513232743 -1000\n\n[Qt] Warn if fallback fee has been used\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/147dc47c7f63826b2a47df9a6d524d76819400ab",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/147dc47c7f63826b2a47df9a6d524d76819400ab",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/147dc47c7f63826b2a47df9a6d524d76819400ab/comments",
    "author": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "76cd4000d5cbeb38ae9f53072fcfb86b8e7d400f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/76cd4000d5cbeb38ae9f53072fcfb86b8e7d400f",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/76cd4000d5cbeb38ae9f53072fcfb86b8e7d400f"
      }
    ],
    "stats": {
      "total": 19,
      "additions": 14,
      "deletions": 5
    },
    "files": [
      {
        "sha": "2d097ec53efea352717032affbcea0f012ea5008",
        "filename": "src/qt/sendcoinsdialog.cpp",
        "status": "modified",
        "additions": 7,
        "deletions": 0,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/147dc47c7f63826b2a47df9a6d524d76819400ab/src/qt/sendcoinsdialog.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/147dc47c7f63826b2a47df9a6d524d76819400ab/src/qt/sendcoinsdialog.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/sendcoinsdialog.cpp?ref=147dc47c7f63826b2a47df9a6d524d76819400ab",
        "patch": "@@ -346,6 +346,13 @@ void SendCoinsDialog::on_sendButton_clicked()\n         questionString.append(\"</span>\");\n     }\n \n+    if (prepareStatus.m_fallback_fee_used) {\n+        questionString.append(\"<hr /><span style='color:#aa0000;'>\");\n+        questionString.append(tr(\"WARNING\")+\":</span> <span>\");\n+        questionString.append(tr(\"A static fallback transaction fee has been used due to missing fee estimation. Please consider waiting a few blocks until fee estimation is ready. The transaction will very likely get stuck or overpay in fees.\"));\n+        questionString.append(\"</span>\");\n+    }\n+\n     SendConfirmationDialog confirmationDialog(tr(\"Confirm send coins\"),\n         questionString.arg(formatted.join(\"<br />\")), SEND_CONFIRM_DELAY, this);\n     confirmationDialog.exec();"
      },
      {
        "sha": "fd5fa4cad638cf3898fda8a9641c378b00f71826",
        "filename": "src/qt/walletmodel.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/147dc47c7f63826b2a47df9a6d524d76819400ab/src/qt/walletmodel.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/147dc47c7f63826b2a47df9a6d524d76819400ab/src/qt/walletmodel.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/walletmodel.cpp?ref=147dc47c7f63826b2a47df9a6d524d76819400ab",
        "patch": "@@ -265,6 +265,7 @@ WalletModel::SendCoinsReturn WalletModel::prepareTransaction(WalletModelTransact\n         return AmountExceedsBalance;\n     }\n \n+    FeeCalculation feeCalc;\n     {\n         LOCK2(cs_main, wallet->cs_wallet);\n \n@@ -276,7 +277,6 @@ WalletModel::SendCoinsReturn WalletModel::prepareTransaction(WalletModelTransact\n \n         CWalletTx *newTx = transaction.getTransaction();\n         CReserveKey *keyChange = transaction.getPossibleKeyChange();\n-        FeeCalculation feeCalc;\n         bool fCreated = wallet->CreateTransaction(vecSend, *newTx, *keyChange, nFeeRequired, nChangePosRet, strFailReason, coinControl, feeCalc);\n         transaction.setTransactionFee(nFeeRequired);\n         if (fSubtractFeeFromAmount && fCreated)\n@@ -286,7 +286,7 @@ WalletModel::SendCoinsReturn WalletModel::prepareTransaction(WalletModelTransact\n         {\n             if(!fSubtractFeeFromAmount && (total + nFeeRequired) > nBalance)\n             {\n-                return SendCoinsReturn(AmountWithFeeExceedsBalance);\n+                return SendCoinsReturn(AmountWithFeeExceedsBalance, \"\", feeCalc.reason == FeeReason::FALLBACK);\n             }\n             Q_EMIT message(tr(\"Send Coins\"), QString::fromStdString(strFailReason),\n                          CClientUIInterface::MSG_ERROR);\n@@ -300,7 +300,7 @@ WalletModel::SendCoinsReturn WalletModel::prepareTransaction(WalletModelTransact\n             return AbsurdFee;\n     }\n \n-    return SendCoinsReturn(OK);\n+    return SendCoinsReturn(OK, \"\", feeCalc.reason == FeeReason::FALLBACK);\n }\n \n WalletModel::SendCoinsReturn WalletModel::sendCoins(WalletModelTransaction &transaction)"
      },
      {
        "sha": "06362dd895b914c0257808f9852ebcf68ae85051",
        "filename": "src/qt/walletmodel.h",
        "status": "modified",
        "additions": 4,
        "deletions": 2,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/147dc47c7f63826b2a47df9a6d524d76819400ab/src/qt/walletmodel.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/147dc47c7f63826b2a47df9a6d524d76819400ab/src/qt/walletmodel.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/walletmodel.h?ref=147dc47c7f63826b2a47df9a6d524d76819400ab",
        "patch": "@@ -144,13 +144,15 @@ class WalletModel : public QObject\n     // Return status record for SendCoins, contains error id + information\n     struct SendCoinsReturn\n     {\n-        SendCoinsReturn(StatusCode _status = OK, QString _reasonCommitFailed = \"\")\n+        SendCoinsReturn(StatusCode _status = OK, QString _reasonCommitFailed = \"\", bool fallback_fee_used = false)\n             : status(_status),\n-              reasonCommitFailed(_reasonCommitFailed)\n+              reasonCommitFailed(_reasonCommitFailed),\n+              m_fallback_fee_used(fallback_fee_used)\n         {\n         }\n         StatusCode status;\n         QString reasonCommitFailed;\n+        bool m_fallback_fee_used;\n     };\n \n     // prepare transaction for getting txfee before sending coins"
      }
    ]
  }
]