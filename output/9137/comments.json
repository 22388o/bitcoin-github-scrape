[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/260110132",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9137#issuecomment-260110132",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9137",
    "id": 260110132,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MDExMDEzMg==",
    "user": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?u=eab5d0cdbb6cc25087cb61d4ca4a6f85255f42a7&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-11-12T08:47:29Z",
    "updated_at": "2016-11-12T08:47:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "Conceptual questions:\n- I guess the new `importmulti` call should also be covered in this change?\n- Idea: We could deprecate the other import calls in favor of `importmulti` (which has more features and makes generally more sense).\n- Does spending those incomplete transactions work well? IMO some checks (isFinal()) do read the nSequence value of the (now missing) inputs?\n\nThings that would need to be done:\n-> Visual attribution in the GUI\n-> the `fIncomplete` status should probably be added to the RPC TxToJSON (or similar) function\n-> Add tests\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/260110132/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/260114312",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9137#issuecomment-260114312",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9137",
    "id": 260114312,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MDExNDMxMg==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-11-12T10:32:14Z",
    "updated_at": "2016-11-12T10:46:13Z",
    "author_association": "MEMBER",
    "body": "~~NACK when done this way. If you need an incomplete transaction, use CMutableTransaction instead of hacking that functionality around CTransaction.~~\n\nThinking more about the above, this is not useful advice. I said it in response to seeing the suggestion of a CIncompleteTransaction, assuming we were calling SetHash after it became complete.\n\nWhat we want here is a hash that does travel with the transaction, and is complete. I don't think it needs to break CTransaction's immutability, though. What about a constructor to CTransaction that takes a CMutableTransaction and a hash?\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/260114312/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/260121079",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9137#issuecomment-260121079",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9137",
    "id": 260121079,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MDEyMTA3OQ==",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-11-12T13:05:15Z",
    "updated_at": "2016-11-12T13:05:15Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks @jonasschnelli, I am planning to get to the various todos you mentioned. The one I might like to know more about is \"Visual attribution in the GUI.\" Do you have any thoughts on what this should look like? And what would be the reasons for making the distinction? E.g. are there particular wallet features or RPC calls that won't work with incomplete transaction data? (Asking because I actually haven't used the wallet UI very much myself yet.)\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/260121079/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/260121171",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9137#issuecomment-260121171",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9137",
    "id": 260121171,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MDEyMTE3MQ==",
    "user": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?u=eab5d0cdbb6cc25087cb61d4ca4a6f85255f42a7&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-11-12T13:07:18Z",
    "updated_at": "2016-11-12T13:07:18Z",
    "author_association": "CONTRIBUTOR",
    "body": "@ryanofsky: I think the GUI stuff can be done in a separate PR after this has been merged.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/260121171/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/260121393",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9137#issuecomment-260121393",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9137",
    "id": 260121393,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MDEyMTM5Mw==",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-11-12T13:12:11Z",
    "updated_at": "2016-11-12T13:12:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks @jonasschnelli, that makes sense. I still would appreciate knowing any thoughts you may have on the GUI implementation either here or in the original issue #8497.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/260121393/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/260138143",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9137#issuecomment-260138143",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9137",
    "id": 260138143,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MDEzODE0Mw==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-11-12T18:03:03Z",
    "updated_at": "2016-11-12T18:03:03Z",
    "author_association": "MEMBER",
    "body": "I'm working on a series of changes to the serialization code, the result of which will be that CTransaction is fully immutable, so UpdateHash will go away.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/260138143/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/263710088",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9137#issuecomment-263710088",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9137",
    "id": 263710088,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2MzcxMDA4OA==",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-11-29T21:48:07Z",
    "updated_at": "2016-11-30T00:08:43Z",
    "author_association": "CONTRIBUTOR",
    "body": "This is better tested now and ready to be reviewed and merged. There are a few extra things that could be done based on comments above, but they don't necessarily have to be part of this PR:\r\n\r\n- [x] Maybe add test to confirm IsFinal works after an incomplete transaction output is spent. ([jonasschnelli comment](https://github.com/bitcoin/bitcoin/pull/9137#issuecomment-260110132))\r\n- [ ] Maybe add visual attribution for incomplete transactions in gui ([jonasschnelli comment](https://github.com/bitcoin/bitcoin/pull/9137#issuecomment-260110132))\r\n- [ ] Maybe add incomplete status to TxToJSON ([jonasschnelli comment](https://github.com/bitcoin/bitcoin/pull/9137#issuecomment-260110132))\r\n- [ ] Maybe allow UTXO rescanning on non -prune nodes ([luke-jr comment](https://github.com/bitcoin/bitcoin/pull/9137#discussion_r87690967))\r\n- [ ] Maybe add ability for wallet to scan mempool for when importing keys ([luke-jr comment](https://github.com/bitcoin/bitcoin/pull/9137#pullrequestreview-8321654))",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/263710088/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/263742010",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9137#issuecomment-263742010",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9137",
    "id": 263742010,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2Mzc0MjAxMA==",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-11-30T00:11:47Z",
    "updated_at": "2016-11-30T00:11:47Z",
    "author_association": "CONTRIBUTOR",
    "body": "Added test code to `import-rescan.py` to make sure spends of incomplete transactions are picked up by the wallet and finalized.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/263742010/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/264912477",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9137#issuecomment-264912477",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9137",
    "id": 264912477,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2NDkxMjQ3Nw==",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-05T17:05:56Z",
    "updated_at": "2016-12-05T17:05:56Z",
    "author_association": "CONTRIBUTOR",
    "body": "Updated to fix conflicts after #8580 merge.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/264912477/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/266583702",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9137#issuecomment-266583702",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9137",
    "id": 266583702,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2NjU4MzcwMg==",
    "user": {
      "login": "gmaxwell",
      "id": 858454,
      "node_id": "MDQ6VXNlcjg1ODQ1NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/858454?u=63e5c438c242094837a9deeda775d77988b508bf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gmaxwell",
      "html_url": "https://github.com/gmaxwell",
      "followers_url": "https://api.github.com/users/gmaxwell/followers",
      "following_url": "https://api.github.com/users/gmaxwell/following{/other_user}",
      "gists_url": "https://api.github.com/users/gmaxwell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
      "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
      "repos_url": "https://api.github.com/users/gmaxwell/repos",
      "events_url": "https://api.github.com/users/gmaxwell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-12T23:12:00Z",
    "updated_at": "2016-12-12T23:12:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "rescan=true and importing pruned things are not the same though. Rescan makes sure you get the historical transactions and a utxo scan doesn't.   I think we may want to track a global state for a wallet that indicates if it believes its history is complete or not, and report that.  (e.g. in the GUI there could be a bar at the top of the transaction list \"some historical transactions may be missing\")",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/266583702/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/266825238",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9137#issuecomment-266825238",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9137",
    "id": 266825238,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2NjgyNTIzOA==",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-13T18:45:59Z",
    "updated_at": "2016-12-13T18:45:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "Having a gui indication of an incomplete historical transaction list seems like a good idea with this change, but it would probably also be a good idea without this change. (The transaction list will be incomplete now if you import with a key without rescanning, or if you use the removeprunedfunds API.) The goal of this change is to make possible to see and spend balances after importing keys on `-prune` nodes as described in #8497.\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/266825238/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/266826654",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9137#issuecomment-266826654",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9137",
    "id": 266826654,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2NjgyNjY1NA==",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-13T18:51:12Z",
    "updated_at": "2016-12-13T18:51:12Z",
    "author_association": "CONTRIBUTOR",
    "body": "I do think it would be a good idea not overload to the meaning of `rescan=true`, though. Maybe `rescan` could be changed from a bool to a string argument where `rescan=\"history\"` would scan the blockchain and `rescan=\"utxo\"` would scan the utxo set. `rescan=true` could still be kept for backwards compatibility.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/266826654/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/307888044",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9137#issuecomment-307888044",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9137",
    "id": 307888044,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMwNzg4ODA0NA==",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-12T19:02:24Z",
    "updated_at": "2017-06-12T19:02:24Z",
    "author_association": "CONTRIBUTOR",
    "body": "Haven't worked on this in a while. Will close and reopen if I make more more progress.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/307888044/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324226789",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9137#issuecomment-324226789",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9137",
    "id": 324226789,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNDIyNjc4OQ==",
    "user": {
      "login": "sangaman",
      "id": 3440835,
      "node_id": "MDQ6VXNlcjM0NDA4MzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3440835?u=721bd2c570ded420136bae4350a9beabeb2e8652&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sangaman",
      "html_url": "https://github.com/sangaman",
      "followers_url": "https://api.github.com/users/sangaman/followers",
      "following_url": "https://api.github.com/users/sangaman/following{/other_user}",
      "gists_url": "https://api.github.com/users/sangaman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sangaman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sangaman/subscriptions",
      "organizations_url": "https://api.github.com/users/sangaman/orgs",
      "repos_url": "https://api.github.com/users/sangaman/repos",
      "events_url": "https://api.github.com/users/sangaman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sangaman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-23T05:40:37Z",
    "updated_at": "2017-08-23T05:40:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "This is a feature I'd love to see added. I've been following the progress in this and related issues and PRs. Regarding the most recent comments, I think it would make sense to leave rescan=true as is, and have rescan=utxo only check an address or key against the utxo set and not do a full rescan for historical transactions.\r\n\r\nI'm new to contributing to this project but let me know if I can help with testing or anything for this PR. Or, @ryanofsky, if you don't feel like you'll be revisiting this issue in the foreseeable future maybe I can try to pick up where you left off. Thanks. ",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324226789/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324765352",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9137#issuecomment-324765352",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9137",
    "id": 324765352,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMyNDc2NTM1Mg==",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-08-24T21:41:00Z",
    "updated_at": "2017-08-24T21:41:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "@sangaman, it'd be great if you want to pick this up. As mentioned in my last update I haven't worked on this on a while and don't have plans to continue at the moment.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/324765352/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/87689230",
    "pull_request_review_id": 8295141,
    "id": 87689230,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDg3Njg5MjMw",
    "diff_hunk": "@@ -62,9 +62,14 @@ uint256 CMutableTransaction::GetHash() const\n     return SerializeHash(*this, SER_GETHASH, SERIALIZE_TRANSACTION_NO_WITNESS);\n }\n \n-void CTransaction::UpdateHash() const\n+void CTransaction::SetHash(const uint256 &tx_hash)\n {\n-    *const_cast<uint256*>(&hash) = SerializeHash(*this, SER_GETHASH, SERIALIZE_TRANSACTION_NO_WITNESS);\n+    *const_cast<uint256*>(&hash) = tx_hash;",
    "path": "src/primitives/transaction.cpp",
    "position": null,
    "original_position": 8,
    "commit_id": "a63ec0e10325d902b3563078fb969d042830a220",
    "original_commit_id": "3fc45351717db4f5e06e18d060f86fbd9783f4b4",
    "user": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Hmm... this would result in not longer coupling the hash with the data-structure. This can result in difficult states for future changes.\nWould a new primitive (maybe `CIncompleteTransaction` or similar) make more sense?\n",
    "created_at": "2016-11-12T08:31:34Z",
    "updated_at": "2017-02-16T11:38:57Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9137#discussion_r87689230",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9137",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/87689230"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9137#discussion_r87689230"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9137"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/87689230/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 67,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/87689280",
    "pull_request_review_id": 8295166,
    "id": 87689280,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDg3Njg5Mjgw",
    "diff_hunk": "@@ -1506,6 +1507,29 @@ int CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, bool fUpdate)\n     return ret;\n }\n \n+void CWallet::ScanForWalletUTXOs()\n+{\n+    for (std::unique_ptr<CCoinsViewCursor> pcursor(pcoinsTip->Cursor());",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 41,
    "commit_id": "a63ec0e10325d902b3563078fb969d042830a220",
    "original_commit_id": "3fc45351717db4f5e06e18d060f86fbd9783f4b4",
    "user": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Would there be a better way to keep the wallet separated from the UTXO set?\nDuring wallet creation (`init.cpp`) it could pass-in a lambda that would take care about finding the corresponding `CCoins`.\n",
    "created_at": "2016-11-12T08:35:19Z",
    "updated_at": "2017-02-16T11:38:57Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9137#discussion_r87689280",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9137",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/87689280"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9137#discussion_r87689280"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9137"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/87689280/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1512,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/87690967",
    "pull_request_review_id": 8296662,
    "id": 87690967,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDg3NjkwOTY3",
    "diff_hunk": "@@ -398,7 +395,10 @@ UniValue importpubkey(const JSONRPCRequest& request)\n \n     if (fRescan)\n     {\n-        pwalletMain->ScanForWalletTransactions(chainActive.Genesis(), true);\n+        if (fPruneMode)\n+          pwalletMain->ScanForWalletUTXOs();\n+        else\n+          pwalletMain->ScanForWalletTransactions(chainActive.Genesis(), true);",
    "path": "src/wallet/rpcdump.cpp",
    "position": null,
    "original_position": 62,
    "commit_id": "a63ec0e10325d902b3563078fb969d042830a220",
    "original_commit_id": "3fc45351717db4f5e06e18d060f86fbd9783f4b4",
    "user": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Shouldn't there be some way to scan for UTXOs on non-pruned nodes?\n",
    "created_at": "2016-11-12T11:08:32Z",
    "updated_at": "2017-02-16T11:38:57Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9137#discussion_r87690967",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9137",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/87690967"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9137#discussion_r87690967"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9137"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/87690967/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 401,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/87690997",
    "pull_request_review_id": 8296677,
    "id": 87690997,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDg3NjkwOTk3",
    "diff_hunk": "@@ -1506,6 +1507,29 @@ int CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, bool fUpdate)\n     return ret;\n }\n \n+void CWallet::ScanForWalletUTXOs()\n+{\n+    for (std::unique_ptr<CCoinsViewCursor> pcursor(pcoinsTip->Cursor());\n+         pcursor->Valid(); pcursor->Next())\n+    {\n+        uint256 hash;\n+        CCoins coins;\n+        if (!pcursor->GetKey(hash))\n+            LogPrintf(\"GetKey failed\");\n+        else if (!pcursor->GetValue(coins))\n+            LogPrintf(\"GetValue failed\");",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 49,
    "commit_id": "a63ec0e10325d902b3563078fb969d042830a220",
    "original_commit_id": "3fc45351717db4f5e06e18d060f86fbd9783f4b4",
    "user": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "These errors leave much to be desired...\n",
    "created_at": "2016-11-12T11:10:28Z",
    "updated_at": "2017-02-16T11:38:57Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9137#discussion_r87690997",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9137",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/87690997"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9137#discussion_r87690997"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9137"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/87690997/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1520,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/87692076",
    "pull_request_review_id": 8297582,
    "id": 87692076,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDg3NjkyMDc2",
    "diff_hunk": "@@ -62,9 +62,14 @@ uint256 CMutableTransaction::GetHash() const\n     return SerializeHash(*this, SER_GETHASH, SERIALIZE_TRANSACTION_NO_WITNESS);\n }\n \n-void CTransaction::UpdateHash() const\n+void CTransaction::SetHash(const uint256 &tx_hash)\n {\n-    *const_cast<uint256*>(&hash) = SerializeHash(*this, SER_GETHASH, SERIALIZE_TRANSACTION_NO_WITNESS);\n+    *const_cast<uint256*>(&hash) = tx_hash;",
    "path": "src/primitives/transaction.cpp",
    "position": null,
    "original_position": 8,
    "commit_id": "a63ec0e10325d902b3563078fb969d042830a220",
    "original_commit_id": "3fc45351717db4f5e06e18d060f86fbd9783f4b4",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I don't know if @sipa's suggestion of making a new `CTransaction` constructor that accepts a hash would sufficiently address your concern. (It would not eliminate the risk that some code could make a seemingly harmless `UpdateHash()` call on the wallet transaction and overwrite the correct hash).\n\nPersonally, the way I would go about this would be to change `CWalletTx` not to inherit from `CMerkleTx`, and instead just contain either a `variant<CMerkleTx, CCoins>` or an  `optional<CMerkleTx>` member. I can try this in a separate PR (since would create a lot of unrelated code churn in the wallet) if you are amenable to the idea.\n",
    "created_at": "2016-11-12T12:39:32Z",
    "updated_at": "2017-02-16T11:38:57Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9137#discussion_r87692076",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9137",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/87692076"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9137#discussion_r87692076"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9137"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/87692076/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 67,
    "side": "RIGHT",
    "in_reply_to_id": 87689230
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/87692085",
    "pull_request_review_id": 8297590,
    "id": 87692085,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDg3NjkyMDg1",
    "diff_hunk": "@@ -1506,6 +1507,29 @@ int CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, bool fUpdate)\n     return ret;\n }\n \n+void CWallet::ScanForWalletUTXOs()\n+{\n+    for (std::unique_ptr<CCoinsViewCursor> pcursor(pcoinsTip->Cursor());",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 41,
    "commit_id": "a63ec0e10325d902b3563078fb969d042830a220",
    "original_commit_id": "3fc45351717db4f5e06e18d060f86fbd9783f4b4",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Sounds good, will change.\n",
    "created_at": "2016-11-12T12:40:20Z",
    "updated_at": "2017-02-16T11:38:57Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9137#discussion_r87692085",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9137",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/87692085"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9137#discussion_r87692085"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9137"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/87692085/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1512,
    "side": "RIGHT",
    "in_reply_to_id": 87689280
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/87692241",
    "pull_request_review_id": 8297721,
    "id": 87692241,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDg3NjkyMjQx",
    "diff_hunk": "@@ -398,7 +395,10 @@ UniValue importpubkey(const JSONRPCRequest& request)\n \n     if (fRescan)\n     {\n-        pwalletMain->ScanForWalletTransactions(chainActive.Genesis(), true);\n+        if (fPruneMode)\n+          pwalletMain->ScanForWalletUTXOs();\n+        else\n+          pwalletMain->ScanForWalletTransactions(chainActive.Genesis(), true);",
    "path": "src/wallet/rpcdump.cpp",
    "position": null,
    "original_position": 62,
    "commit_id": "a63ec0e10325d902b3563078fb969d042830a220",
    "original_commit_id": "3fc45351717db4f5e06e18d060f86fbd9783f4b4",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I could definitely add it as another option to the RPC. I guess the benefit to the RPC caller would be that if they're importing a key which they already know is unspent, calling `ScanForWalletUTXOs` would be faster than calling `ScanForWalletTransactions`?\n",
    "created_at": "2016-11-12T12:52:35Z",
    "updated_at": "2017-02-16T11:38:57Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9137#discussion_r87692241",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9137",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/87692241"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9137#discussion_r87692241"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9137"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/87692241/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 401,
    "side": "RIGHT",
    "in_reply_to_id": 87690967
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/87720751",
    "pull_request_review_id": 8321654,
    "id": 87720751,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDg3NzIwNzUx",
    "diff_hunk": "@@ -1506,6 +1507,29 @@ int CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, bool fUpdate)\n     return ret;\n }\n \n+void CWallet::ScanForWalletUTXOs()\n+{\n+    for (std::unique_ptr<CCoinsViewCursor> pcursor(pcoinsTip->Cursor());",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 41,
    "commit_id": "a63ec0e10325d902b3563078fb969d042830a220",
    "original_commit_id": "3fc45351717db4f5e06e18d060f86fbd9783f4b4",
    "user": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Won't this miss unconfirmed TXOs?\n",
    "created_at": "2016-11-13T20:28:38Z",
    "updated_at": "2017-02-16T11:38:57Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9137#discussion_r87720751",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9137",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/87720751"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9137#discussion_r87720751"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9137"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/87720751/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1512,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/87905166",
    "pull_request_review_id": 8497555,
    "id": 87905166,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDg3OTA1MTY2",
    "diff_hunk": "@@ -1506,6 +1507,29 @@ int CWallet::ScanForWalletTransactions(CBlockIndex* pindexStart, bool fUpdate)\n     return ret;\n }\n \n+void CWallet::ScanForWalletUTXOs()\n+{\n+    for (std::unique_ptr<CCoinsViewCursor> pcursor(pcoinsTip->Cursor());",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 41,
    "commit_id": "a63ec0e10325d902b3563078fb969d042830a220",
    "original_commit_id": "3fc45351717db4f5e06e18d060f86fbd9783f4b4",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This doesn't deal with unconfirmed TXOs, but neither does `ScanForWalletTransactions`, which this is just intended to be a lightweight fallback for.\n\nI don't know the wallet code well enough to know how it does deal with unconfirmed TXOs, but I expect that if there are issues tracking them, they would be orthogonal to this change.\n",
    "created_at": "2016-11-14T22:14:01Z",
    "updated_at": "2017-02-16T11:38:57Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9137#discussion_r87905166",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9137",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/87905166"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9137#discussion_r87905166"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9137"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/87905166/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1512,
    "side": "RIGHT",
    "in_reply_to_id": 87720751
  }
]