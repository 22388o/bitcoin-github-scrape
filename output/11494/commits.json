[
  {
    "sha": "313c7a4d9b5418907f6b631f3efed87e910ddaf2",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzozMTNjN2E0ZDliNTQxODkwN2Y2YjYzMWYzZWZlZDg3ZTkxMGRkYWYy",
    "commit": {
      "author": {
        "name": "Anthony Towns",
        "email": "aj@erisian.com.au",
        "date": "2017-10-13T07:01:02Z"
      },
      "committer": {
        "name": "Anthony Towns",
        "email": "aj@erisian.com.au",
        "date": "2017-10-13T07:10:17Z"
      },
      "message": "Clarify BIP9 behaviour when nTimeout <= 0\n\nAdds a comment in the BIP9Deployment class declaration for when to set\nnTimeout=0, and changes the checks for (nTimeout!=0) to (nTimeout>0)\nfor consistency.",
      "tree": {
        "sha": "e0b1be1ee2f55a80c6f36d794683502e527b50ea",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e0b1be1ee2f55a80c6f36d794683502e527b50ea"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/313c7a4d9b5418907f6b631f3efed87e910ddaf2",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/313c7a4d9b5418907f6b631f3efed87e910ddaf2",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/313c7a4d9b5418907f6b631f3efed87e910ddaf2",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/313c7a4d9b5418907f6b631f3efed87e910ddaf2/comments",
    "author": {
      "login": "ajtowns",
      "id": 127186,
      "node_id": "MDQ6VXNlcjEyNzE4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajtowns",
      "html_url": "https://github.com/ajtowns",
      "followers_url": "https://api.github.com/users/ajtowns/followers",
      "following_url": "https://api.github.com/users/ajtowns/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajtowns/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
      "organizations_url": "https://api.github.com/users/ajtowns/orgs",
      "repos_url": "https://api.github.com/users/ajtowns/repos",
      "events_url": "https://api.github.com/users/ajtowns/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajtowns/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "ajtowns",
      "id": 127186,
      "node_id": "MDQ6VXNlcjEyNzE4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajtowns",
      "html_url": "https://github.com/ajtowns",
      "followers_url": "https://api.github.com/users/ajtowns/followers",
      "following_url": "https://api.github.com/users/ajtowns/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajtowns/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
      "organizations_url": "https://api.github.com/users/ajtowns/orgs",
      "repos_url": "https://api.github.com/users/ajtowns/repos",
      "events_url": "https://api.github.com/users/ajtowns/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajtowns/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "424be03305143cbe5da5d5adb54d73d3dc3747b6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/424be03305143cbe5da5d5adb54d73d3dc3747b6",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/424be03305143cbe5da5d5adb54d73d3dc3747b6"
      }
    ],
    "stats": {
      "total": 13,
      "additions": 8,
      "deletions": 5
    },
    "files": [
      {
        "sha": "8daf8fdbe42703b514d8950749b87b047392806b",
        "filename": "src/consensus/params.h",
        "status": "modified",
        "additions": 6,
        "deletions": 1,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/313c7a4d9b5418907f6b631f3efed87e910ddaf2/src/consensus/params.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/313c7a4d9b5418907f6b631f3efed87e910ddaf2/src/consensus/params.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/consensus/params.h?ref=313c7a4d9b5418907f6b631f3efed87e910ddaf2",
        "patch": "@@ -29,7 +29,12 @@ struct BIP9Deployment {\n     int bit;\n     /** Start MedianTime for version bits miner confirmation. Can be a date in the past */\n     int64_t nStartTime;\n-    /** Timeout/expiry MedianTime for the deployment attempt. */\n+    /** Timeout/expiry MedianTime for the deployment attempt.\n+     * Setting to 0 will prevent advertising presence of softfork,\n+     * allowing code to be merged without defining the softfork's\n+     * activation parameters.\n+     */\n+\n     int64_t nTimeout;\n };\n "
      },
      {
        "sha": "bc61f2f234c5290387aca06888d7e2ee1536c9ac",
        "filename": "src/init.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 3,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/313c7a4d9b5418907f6b631f3efed87e910ddaf2/src/init.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/313c7a4d9b5418907f6b631f3efed87e910ddaf2/src/init.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/init.cpp?ref=313c7a4d9b5418907f6b631f3efed87e910ddaf2",
        "patch": "@@ -1597,10 +1597,8 @@ bool AppInitMain(boost::thread_group& threadGroup, CScheduler& scheduler)\n         }\n     }\n \n-    if (chainparams.GetConsensus().vDeployments[Consensus::DEPLOYMENT_SEGWIT].nTimeout != 0) {\n+    if (chainparams.GetConsensus().vDeployments[Consensus::DEPLOYMENT_SEGWIT].nTimeout > 0) {\n         // Only advertise witness capabilities if they have a reasonable start time.\n-        // This allows us to have the code merged without a defined softfork, by setting its\n-        // end time to 0.\n         // Note that setting NODE_WITNESS is never required: the only downside from not\n         // doing so is that after activation, no upgraded nodes will fetch from you.\n         nLocalServices = ServiceFlags(nLocalServices | NODE_WITNESS);"
      },
      {
        "sha": "6d69474228d53fadf8be962bbab0eff1ea145a77",
        "filename": "src/validation.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/313c7a4d9b5418907f6b631f3efed87e910ddaf2/src/validation.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/313c7a4d9b5418907f6b631f3efed87e910ddaf2/src/validation.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/validation.cpp?ref=313c7a4d9b5418907f6b631f3efed87e910ddaf2",
        "patch": "@@ -2884,7 +2884,7 @@ std::vector<unsigned char> GenerateCoinbaseCommitment(CBlock& block, const CBloc\n     std::vector<unsigned char> commitment;\n     int commitpos = GetWitnessCommitmentIndex(block);\n     std::vector<unsigned char> ret(32, 0x00);\n-    if (consensusParams.vDeployments[Consensus::DEPLOYMENT_SEGWIT].nTimeout != 0) {\n+    if (consensusParams.vDeployments[Consensus::DEPLOYMENT_SEGWIT].nTimeout > 0) {\n         if (commitpos == -1) {\n             uint256 witnessroot = BlockWitnessMerkleRoot(block, nullptr);\n             CHash256().Write(witnessroot.begin(), 32).Write(ret.data(), 32).Finalize(witnessroot.begin());"
      }
    ]
  }
]