DrahtBot,2018-06-26T11:19:18Z,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #19114 (scripted-diff: TxoutType C++11 scoped enum class by MarcoFalke)\n* #18011 (Replace current benchmarking framework ",https://github.com/bitcoin/bitcoin/pull/13525#issuecomment-400271906,400271906,
Empact,2018-06-28T18:35:33Z,"@promag Addressed your comments, including tests for each case.",https://github.com/bitcoin/bitcoin/pull/13525#issuecomment-401131943,401131943,
sipa,2018-07-14T02:57:31Z,utACK 7298231aa8faaff65c261eac557448c223b76500,https://github.com/bitcoin/bitcoin/pull/13525#issuecomment-404993848,404993848,
luke-jr,2018-07-29T18:47:27Z,"This is already part of #7533 \n\nAt the very least, please try to use the short rejection reasons therein...",https://github.com/bitcoin/bitcoin/pull/13525#issuecomment-408697421,408697421,
luke-jr,2018-07-29T18:47:41Z,https://github.com/bitcoin/bitcoin/pull/7533/commits/c59e7166253e962043b5fdccd5de8a21969d21e0,https://github.com/bitcoin/bitcoin/pull/13525#issuecomment-408697437,408697437,
Empact,2018-07-29T23:12:02Z,"Thanks @luke-jr, I adapted the short reasons from c59e716. How does that look? Is it alright to put the input index in the rejection reason or better to append?",https://github.com/bitcoin/bitcoin/pull/13525#issuecomment-408712889,408712889,
Empact,2018-07-29T23:12:52Z,Also moved the string instantiation out of the bench loop.,https://github.com/bitcoin/bitcoin/pull/13525#issuecomment-408712935,408712935,
luke-jr,2018-07-30T01:14:07Z,"Might be better to have the index at the end, not sure.",https://github.com/bitcoin/bitcoin/pull/13525#issuecomment-408720705,408720705,
Empact,2018-07-30T16:16:19Z,"@luke-jr moved the input index to the end. Now I'm questioning the need for the `bad-txns-` prefix, given that these are to become debug output, rather than the reason string, which is what usually bears this prefix.",https://github.com/bitcoin/bitcoin/pull/13525#issuecomment-408921346,408921346,
Empact,2018-07-30T16:24:40Z,Removed `bad-txns-`. Note these are propagated as the debug string alongside a `bad-txns-nonstandard-inputs` `CValidationState` reject reason.,https://github.com/bitcoin/bitcoin/pull/13525#issuecomment-408924287,408924287,
luke-jr,2018-08-15T19:34:29Z,Why do you want to limit it to debug output? Reasons should be in the reason field. ,https://github.com/bitcoin/bitcoin/pull/13525#issuecomment-413310142,413310142,
Empact,2018-08-15T20:09:30Z,"@luke-jr Good point - split the reason and debug fields, and replaced `bad-txns-nonstandard-inputs` with one of: `bad-txns-script-nonstandard`, `bad-txns-scriptsig-error`, or `bad-txns-scriptcheck-sigops`.",https://github.com/bitcoin/bitcoin/pull/13525#issuecomment-413319842,413319842,
luke-jr,2018-08-15T20:25:55Z,"Prefer to use the existing `bad-txns-input-script-unknown`, `bad-txns-input-scriptsig-failure`, `bad-txns-input-scriptcheck-missing`, and `bad-txns-input-scriptcheck-sigops`",https://github.com/bitcoin/bitcoin/pull/13525#issuecomment-413324491,413324491,
Empact,2018-08-25T18:44:48Z,Rebased for  #13429,https://github.com/bitcoin/bitcoin/pull/13525#issuecomment-415988875,415988875,
Empact,2018-08-30T06:26:54Z,"Fixed rebase for #13429, dropped refactor commit, and made use of every reason recommended by @luke-jr ",https://github.com/bitcoin/bitcoin/pull/13525#issuecomment-417204209,417204209,
Empact,2018-09-15T16:34:55Z,@practicalswift replaced existing and new uses of `&array[sizeof(array]` with `array + sizeof(array)`,https://github.com/bitcoin/bitcoin/pull/13525#issuecomment-421596187,421596187,
Empact,2018-10-05T07:41:57Z,"Stopped shadowing `reason` var (by reusing the existing var).\nLimited test array access changes to only affecting the added tests.",https://github.com/bitcoin/bitcoin/pull/13525#issuecomment-427275013,427275013,
Empact,2018-12-12T23:28:01Z,"Rebased for #14908, added test for `bad-txns-input-scriptcheck-missing`, so testing covers all failure conditions, and removed some test precondition checks that were already captured in the `AreInputsStandard` outputs.",https://github.com/bitcoin/bitcoin/pull/13525#issuecomment-446783262,446783262,
Empact,2018-12-12T23:33:12Z,"Added code-blocks to tests to protect against accidental reuse, e.g. of `txToNonStd1` in other test cases.",https://github.com/bitcoin/bitcoin/pull/13525#issuecomment-446784348,446784348,
Empact,2018-12-14T11:29:50Z,"Fixed a MSVC-specific test failure: ""error C2466: cannot allocate an array of constant size 0"", ran clang format.\nhttps://ci.appveyor.com/project/DrahtBot/bitcoin/builds/20971133",https://github.com/bitcoin/bitcoin/pull/13525#issuecomment-447298286,447298286,
sipa,2019-05-22T19:02:56Z,"utACK 85e2ddb14c15b9613093ec0cb991b77091c4287c, with or without nits addressed.",https://github.com/bitcoin/bitcoin/pull/13525#issuecomment-494926153,494926153,
Empact,2019-05-28T18:22:48Z,"Updated:\n* `bad-txns-input-scriptsig-failure` -> `bad-txns-input-p2sh-scriptsig-malformed`\n* `bad-txns-input-scriptcheck-missing` -> `bad-txns-input-p2sh-no-redeemscript`\n* `bad-txns-input-scriptcheck-sigops` -> `bad-txns-input-p2sh-redeemscript-sigops`\n\nNote the current behavior returns `bad-txns-nonstandard-inputs` in all cases.",https://github.com/bitcoin/bitcoin/pull/13525#issuecomment-496632538,496632538,
Empact,2019-10-09T11:46:46Z,"Rebased, added missing braces and tinyformat include.",https://github.com/bitcoin/bitcoin/pull/13525#issuecomment-539965274,539965274,
Empact,2020-01-11T00:14:42Z,Rebased,https://github.com/bitcoin/bitcoin/pull/13525#issuecomment-573254578,573254578,
sipa,2020-03-28T18:32:21Z,utACK 6a241604fec4346d90495fd468f54a6bf6a0ee88,https://github.com/bitcoin/bitcoin/pull/13525#issuecomment-605500883,605500883,
Empact,2020-05-09T07:10:33Z,Rebased for #18859,https://github.com/bitcoin/bitcoin/pull/13525#issuecomment-626119779,626119779,
DrahtBot,2020-06-28T19:37:10Z,<!--cf906140f33d8803c4a75a2196329ecb-->\nüêô This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).,https://github.com/bitcoin/bitcoin/pull/13525#issuecomment-650811720,650811720,
0xB10C,2021-08-03T13:46:02Z,Concept ACK,https://github.com/bitcoin/bitcoin/pull/13525#issuecomment-891860321,891860321,
promag,2018-06-23T13:32:22Z,Not tested?,https://github.com/bitcoin/bitcoin/pull/13525#discussion_r197612061,197612061,src/policy/policy.cpp
promag,2018-06-23T13:34:35Z,`contains the reason of the first non-standard input`?,https://github.com/bitcoin/bitcoin/pull/13525#discussion_r197612109,197612109,src/policy/policy.h
promag,2018-06-23T13:35:19Z,Not tested?,https://github.com/bitcoin/bitcoin/pull/13525#discussion_r197612130,197612130,src/policy/policy.cpp
promag,2018-06-23T13:36:55Z,Why this change? It must succeed no?,https://github.com/bitcoin/bitcoin/pull/13525#discussion_r197612160,197612160,src/bench/ccoins_caching.cpp
practicalswift,2018-09-14T16:04:20Z,Isn't `&op_return[sizeof(op_return)]` an array overrun?,https://github.com/bitcoin/bitcoin/pull/13525#discussion_r217763381,217763381,src/test/script_p2sh_tests.cpp
practicalswift,2018-09-14T16:04:43Z,Same here?,https://github.com/bitcoin/bitcoin/pull/13525#discussion_r217763483,217763483,src/test/script_tests.cpp
practicalswift,2018-10-04T20:37:59Z,`reason` shadows an existing local variable here. Please choose another name :-),https://github.com/bitcoin/bitcoin/pull/13525#discussion_r222818834,222818834,src/validation.cpp
sipa,2019-05-22T18:50:07Z,"Bikeshedding: I think it'd be less confusing to call this ""bad-txns-malformed-p2sh-scriptsig"" (as it's specific for P2SH, and triggers when the scriptSig can't be evaluated).",https://github.com/bitcoin/bitcoin/pull/13525#discussion_r286635166,286635166,src/policy/policy.cpp
sipa,2019-05-22T18:50:46Z,"How about ""bad-txns-input-p2sh-no-redeemscript""?",https://github.com/bitcoin/bitcoin/pull/13525#discussion_r286635435,286635435,src/policy/policy.cpp
luke-jr,2019-05-28T22:47:24Z,"The order of words typically indicates subcategories/relationships. For that reason, ""bad-txns-scriptsig-p2sh-malformed"" would fit better.",https://github.com/bitcoin/bitcoin/pull/13525#discussion_r288331723,288331723,src/policy/policy.cpp
Empact,2019-05-29T00:13:12Z,"I‚Äôm currently using: ‚Äúbad-txns-input-p2sh-scriptsig-malformed‚Äù for this.\n\nBecause all reasons in this function relate to inputs, of which are tested/subdivided according to type (p2sh in this case), then the subject scrptsig, then the issue.\n\nNot that there‚Äôs a right or wrong here, but that‚Äôs the rationale.",https://github.com/bitcoin/bitcoin/pull/13525#discussion_r288350285,288350285,src/policy/policy.cpp
MarcoFalke,2019-06-17T18:50:16Z,style-nit: Could add `{`?,https://github.com/bitcoin/bitcoin/pull/13525#discussion_r294462210,294462210,src/validation.cpp
Empact,2019-10-09T11:45:32Z,Added üëç ,https://github.com/bitcoin/bitcoin/pull/13525#discussion_r332967201,332967201,src/validation.cpp
glozow,2021-10-25T14:32:26Z,"I think the best way to do this is to change the `AreInputsStandard` interface to return a `std::optional<std::pair<std::string, std::string>>` instead of passing in/reusing mutable references.\n\nAlternatively, you can pass in a `TxValidationState& state` which already has `reason` and `debug` fields.",https://github.com/bitcoin/bitcoin/pull/13525#discussion_r735662787,735662787,src/policy/policy.h
