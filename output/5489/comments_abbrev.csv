laanwj,2014-12-16T16:29:30Z,Can you give the exact command line used? I'd like to reproduce this.\n,https://github.com/bitcoin/bitcoin/pull/5489#issuecomment-67187204,67187204,
jonasschnelli,2014-12-16T16:40:51Z,i used `convert -strip <filename>.png <filename>.png`.\n,https://github.com/bitcoin/bitcoin/pull/5489#issuecomment-67189296,67189296,
paveljanik,2014-12-16T17:13:59Z,"Doesn't print the warning as the master itself.\nFor the reference, the warning was:\n\n```\nlibpng warning: iCCP: known incorrect sRGB profile\n```\n",https://github.com/bitcoin/bitcoin/pull/5489#issuecomment-67195044,67195044,
sipa,2014-12-17T00:06:55Z,The result of that command is not identical here. Running the command on top of your output gives an even different result.\n,https://github.com/bitcoin/bitcoin/pull/5489#issuecomment-67256465,67256465,
jonasschnelli,2014-12-17T08:00:39Z,Analyzed.\nIt needs two (or even three runs). After then that file SHA1 keep the same.\nI also provided a script under `./contrib/strip_pngs.sh`\n\nI also assume it could depend on installed imagemagick and libpng version.\n\nHere you can see the process of one file.\nThe DIFF is from imagemagicks `identify -verbose`\n(full bash dump of all files is here: http://paste.ubuntu.com/9548096/)\n\n```\n,https://github.com/bitcoin/bitcoin/pull/5489#issuecomment-67288553,67288553,
laanwj,2014-12-17T13:57:39Z,"OK this freaks me out. My output differs from yours. From your diff above I thought the problem was an embedded timestamp, however I get no different result from\n\n``` bash\n    export LD_PRELOAD=/usr/lib/x86_64-linux-gnu/faketime/libfaketime.so.1\n    export FAKETIME='2012-12-12 12:12:12'\n    git reset --hard\n    find -name \*.png -print0 | xargs -0 -I FILENAME convert -strip FILENAME FILENAME",https://github.com/bitcoin/bitcoin/pull/5489#issuecomment-67325055,67325055,
laanwj,2014-12-17T14:05:59Z,"Now ran it three times, hash was not longer changing. However, still not all match the files in this pull (though some do). See diff here http://paste.ubuntu.com/9550744/\n",https://github.com/bitcoin/bitcoin/pull/5489#issuecomment-67326107,67326107,
jonasschnelli,2014-12-17T14:09:06Z,"I assume this happens because of different imagemagick/libpng versions. I mean, the core business of these tools is to deal with png/bitmap internas. So there might be some byte differences because of different handling.\nAdding imagemagick and libpng to the depends would probably solve this but is a overkill IMO.\n",https://github.com/bitcoin/bitcoin/pull/5489#issuecomment-67326477,67326477,
laanwj,2014-12-17T14:28:46Z,"Yes, it's not that important. I primarily wanted to be able to reproduce this when people add files (which the script does). Determinism would be a plus, but adding imagemagick to depends would be overkill.\n",https://github.com/bitcoin/bitcoin/pull/5489#issuecomment-67329173,67329173,
fanquake,2015-01-03T10:02:37Z,Needs Rebase\n,https://github.com/bitcoin/bitcoin/pull/5489#issuecomment-68589535,68589535,
jonasschnelli,2015-01-03T19:14:45Z,Rebased.\n,https://github.com/bitcoin/bitcoin/pull/5489#issuecomment-68605886,68605886,
jonasschnelli,2015-01-09T15:47:06Z,Updated the script as well as the images so it will use `pngcrush` to crush the `convert`-stripped images.\n,https://github.com/bitcoin/bitcoin/pull/5489#issuecomment-69351698,69351698,
zander,2015-01-13T06:51:24Z,Would a tool like optipng or pngcrush or trimage be more appropriate ?\n,https://github.com/bitcoin/bitcoin/pull/5489#issuecomment-69702609,69702609,
jonasschnelli,2015-01-13T07:14:12Z,@zander: pngcrush is included. See my last comment.\n,https://github.com/bitcoin/bitcoin/pull/5489#issuecomment-69704229,69704229,
laanwj,2015-01-13T09:52:11Z,"Your script needs `set -e` at the top to make it fail when one of the tools fails.\n(e.g. I didn't have pngcrush installed and it happily continued)\n\nAlso let's move it to `contrib/devtools`, leaving the script in the contrib toplevel is a bit untidy.\n",https://github.com/bitcoin/bitcoin/pull/5489#issuecomment-69719943,69719943,
jonasschnelli,2015-01-13T12:38:31Z,"Rewrote script, placed it under `contrib/devtools`.\nOutput of processing is here: https://gist.github.com/jonasschnelli/dad302d9b9b8a3163259\n",https://github.com/bitcoin/bitcoin/pull/5489#issuecomment-69738315,69738315,
jonasschnelli,2015-01-13T12:42:21Z,A second run of the script won't change the PNG sha256 (at least in my environment).\n,https://github.com/bitcoin/bitcoin/pull/5489#issuecomment-69738665,69738665,
laanwj,2015-01-14T12:54:02Z,Looks good to me now. When I re-run this script I get the same output as well.\nIn https://github.com/laanwj/bitcoin/commit/41dc934ffc111a900d9262cd1bb1ad84492a4e6e I've improved the script a little bit:\n- Add pre/post check of image contents\n- remove use of external tool to compute sha256 in favor of hashlib\n,https://github.com/bitcoin/bitcoin/pull/5489#issuecomment-69911807,69911807,
laanwj,2015-01-14T13:12:40Z,"Added another commit https://github.com/laanwj/bitcoin/commit/2c77c150703952764aaeb43ab5f836d5b7fb0f7a that replaces uses of shell=True with the Python equivalent (as shell=True is less portable, and can be a security hazard).\n",https://github.com/bitcoin/bitcoin/pull/5489#issuecomment-69913736,69913736,
jonasschnelli,2015-01-14T15:10:57Z,Nice. Thanks for the additions.\nI also added a rename commit because `strip_png.py` is no longer a adequate name.\n,https://github.com/bitcoin/bitcoin/pull/5489#issuecomment-69929756,69929756,
laanwj,2015-01-14T16:25:24Z,"Merged via d1aa3c6 (squashed into two commits, one with your changes one with mine)\n",https://github.com/bitcoin/bitcoin/pull/5489#issuecomment-69943367,69943367,
jonasschnelli,2015-01-16T10:05:39Z,Was merged. Closing.\n,https://github.com/bitcoin/bitcoin/pull/5489#issuecomment-70232553,70232553,
