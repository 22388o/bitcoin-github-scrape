[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/289892911",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10072#issuecomment-289892911",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10072",
    "id": 289892911,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4OTg5MjkxMQ==",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-28T20:23:23Z",
    "updated_at": "2017-03-28T20:23:23Z",
    "author_association": "MEMBER",
    "body": "Pushed a new version using while/else and not using assert for control flow.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/289892911/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/290978641",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10072#issuecomment-290978641",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10072",
    "id": 290978641,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MDk3ODY0MQ==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-04-02T10:51:02Z",
    "updated_at": "2017-04-02T10:51:02Z",
    "author_association": "MEMBER",
    "body": "utACK a4fd89f. Going to merge this, so that the failures are a thing of the past.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/290978641/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/291010398",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10072#issuecomment-291010398",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10072",
    "id": 291010398,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5MTAxMDM5OA==",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-04-02T19:53:15Z",
    "updated_at": "2017-04-02T19:53:15Z",
    "author_association": "MEMBER",
    "body": "\ud83c\udf89 first successful daily run of extended tests on Travis: https://travis-ci.org/bitcoin/bitcoin/builds/217786785\r\n\r\nThanks for merging @MarcoFalke ",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/291010398/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108487850",
    "pull_request_review_id": 29522081,
    "id": 108487850,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwODQ4Nzg1MA==",
    "diff_hunk": "@@ -200,16 +200,14 @@ def test_BIP(self, bipName, activated_version, invalidate, invalidatePostSignatu\n         yield TestInstance([[block, False]])\n \n         # Restart all\n-        self.test.block_store.close()\n+        self.test.clear_all_connections()\n         stop_nodes(self.nodes)\n-        shutil.rmtree(self.options.tmpdir)\n+        shutil.rmtree(self.options.tmpdir + \"/node0\")\n         self.setup_chain()\n         self.setup_network()\n-        self.test.block_store = BlockStore(self.options.tmpdir)\n-        self.test.clear_all_connections()\n         self.test.add_all_connections(self.nodes)\n-        NetworkThread().start() # Start up network handling in another thread\n-\n+        NetworkThread().start()\n+        self.test.test_nodes[0].wait_for_verack()",
    "path": "test/functional/bip9-softforks.py",
    "position": 17,
    "original_position": 17,
    "commit_id": "a4fd89fddba49c56e77f131fe95feffa8d7cf6ed",
    "original_commit_id": "baeecbbb087842b18fb085b0d8c7b736c367cfe0",
    "user": {
      "login": "JeremyRubin",
      "id": 886523,
      "node_id": "MDQ6VXNlcjg4NjUyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JeremyRubin",
      "html_url": "https://github.com/JeremyRubin",
      "followers_url": "https://api.github.com/users/JeremyRubin/followers",
      "following_url": "https://api.github.com/users/JeremyRubin/following{/other_user}",
      "gists_url": "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
      "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
      "repos_url": "https://api.github.com/users/JeremyRubin/repos",
      "events_url": "https://api.github.com/users/JeremyRubin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Do we want the same behavior on L44?",
    "created_at": "2017-03-28T17:43:08Z",
    "updated_at": "2017-03-28T20:22:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108487850",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108487850"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108487850"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108487850/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 210,
    "original_line": 210,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108488077",
    "pull_request_review_id": 29522081,
    "id": 108488077,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwODQ4ODA3Nw==",
    "diff_hunk": "@@ -200,16 +200,14 @@ def test_BIP(self, bipName, activated_version, invalidate, invalidatePostSignatu\n         yield TestInstance([[block, False]])\n \n         # Restart all\n-        self.test.block_store.close()\n+        self.test.clear_all_connections()\n         stop_nodes(self.nodes)\n-        shutil.rmtree(self.options.tmpdir)\n+        shutil.rmtree(self.options.tmpdir + \"/node0\")\n         self.setup_chain()\n         self.setup_network()\n-        self.test.block_store = BlockStore(self.options.tmpdir)\n-        self.test.clear_all_connections()\n         self.test.add_all_connections(self.nodes)\n-        NetworkThread().start() # Start up network handling in another thread\n-\n+        NetworkThread().start()",
    "path": "test/functional/bip9-softforks.py",
    "position": 16,
    "original_position": 16,
    "commit_id": "a4fd89fddba49c56e77f131fe95feffa8d7cf6ed",
    "original_commit_id": "baeecbbb087842b18fb085b0d8c7b736c367cfe0",
    "user": {
      "login": "JeremyRubin",
      "id": 886523,
      "node_id": "MDQ6VXNlcjg4NjUyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JeremyRubin",
      "html_url": "https://github.com/JeremyRubin",
      "followers_url": "https://api.github.com/users/JeremyRubin/followers",
      "following_url": "https://api.github.com/users/JeremyRubin/following{/other_user}",
      "gists_url": "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
      "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
      "repos_url": "https://api.github.com/users/JeremyRubin/repos",
      "events_url": "https://api.github.com/users/JeremyRubin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Is there any work we can do in-between this and the wait for verack?\r\n\r\nMaybe have a comment here about having to wait for verack rather than just deleting the comment.",
    "created_at": "2017-03-28T17:44:08Z",
    "updated_at": "2017-03-28T20:22:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108488077",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108488077"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108488077"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108488077/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 209,
    "original_line": 209,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108488136",
    "pull_request_review_id": 29522081,
    "id": 108488136,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwODQ4ODEzNg==",
    "diff_hunk": "@@ -200,16 +200,14 @@ def test_BIP(self, bipName, activated_version, invalidate, invalidatePostSignatu\n         yield TestInstance([[block, False]])\n \n         # Restart all\n-        self.test.block_store.close()\n+        self.test.clear_all_connections()\n         stop_nodes(self.nodes)\n-        shutil.rmtree(self.options.tmpdir)\n+        shutil.rmtree(self.options.tmpdir + \"/node0\")",
    "path": "test/functional/bip9-softforks.py",
    "position": 8,
    "original_position": 8,
    "commit_id": "a4fd89fddba49c56e77f131fe95feffa8d7cf6ed",
    "original_commit_id": "baeecbbb087842b18fb085b0d8c7b736c367cfe0",
    "user": {
      "login": "JeremyRubin",
      "id": 886523,
      "node_id": "MDQ6VXNlcjg4NjUyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JeremyRubin",
      "html_url": "https://github.com/JeremyRubin",
      "followers_url": "https://api.github.com/users/JeremyRubin/followers",
      "following_url": "https://api.github.com/users/JeremyRubin/following{/other_user}",
      "gists_url": "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
      "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
      "repos_url": "https://api.github.com/users/JeremyRubin/repos",
      "events_url": "https://api.github.com/users/JeremyRubin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Is there a more idiomatic way to get the dirname?",
    "created_at": "2017-03-28T17:44:22Z",
    "updated_at": "2017-03-28T20:22:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108488136",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108488136"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108488136"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108488136/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 205,
    "original_line": 205,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108488637",
    "pull_request_review_id": 29522081,
    "id": 108488637,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwODQ4ODYzNw==",
    "diff_hunk": "@@ -41,11 +42,17 @@ def run_test(self):\n         self.nodes[1].generate(1)\n         self.sync_all()\n \n-        with open(self.alert_filename, 'r', encoding='utf8') as f:\n-            alert_text = f.read()\n+        # Give bitcoind 10 seconds to write the alert notification\n+        timeout = 10\n+        while True:\n+            with open(self.alert_filename, 'r', encoding='utf8') as f:\n+                alert_text = f.read()\n+            if len(alert_text) > 0:\n+                break\n \n-        if len(alert_text) == 0:\n-            raise AssertionError(\"-alertnotify did not warn of up-version blocks\")\n+            assert timeout > 0, \"-alertnotify did not warn of up-version blocks\"",
    "path": "test/functional/forknotify.py",
    "position": null,
    "original_position": 24,
    "commit_id": "a4fd89fddba49c56e77f131fe95feffa8d7cf6ed",
    "original_commit_id": "baeecbbb087842b18fb085b0d8c7b736c367cfe0",
    "user": {
      "login": "JeremyRubin",
      "id": 886523,
      "node_id": "MDQ6VXNlcjg4NjUyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JeremyRubin",
      "html_url": "https://github.com/JeremyRubin",
      "followers_url": "https://api.github.com/users/JeremyRubin/followers",
      "following_url": "https://api.github.com/users/JeremyRubin/following{/other_user}",
      "gists_url": "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
      "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
      "repos_url": "https://api.github.com/users/JeremyRubin/repos",
      "events_url": "https://api.github.com/users/JeremyRubin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Maybe raise the error yourself rather than `assert`, unless you only want it in debug mode?",
    "created_at": "2017-03-28T17:46:18Z",
    "updated_at": "2017-03-28T20:22:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108488637",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108488637"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108488637"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108488637/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 53,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108493763",
    "pull_request_review_id": 29522081,
    "id": 108493763,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwODQ5Mzc2Mw==",
    "diff_hunk": "@@ -41,11 +42,17 @@ def run_test(self):\n         self.nodes[1].generate(1)\n         self.sync_all()\n \n-        with open(self.alert_filename, 'r', encoding='utf8') as f:\n-            alert_text = f.read()\n+        # Give bitcoind 10 seconds to write the alert notification\n+        timeout = 10\n+        while True:",
    "path": "test/functional/forknotify.py",
    "position": null,
    "original_position": 16,
    "commit_id": "a4fd89fddba49c56e77f131fe95feffa8d7cf6ed",
    "original_commit_id": "baeecbbb087842b18fb085b0d8c7b736c367cfe0",
    "user": {
      "login": "JeremyRubin",
      "id": 886523,
      "node_id": "MDQ6VXNlcjg4NjUyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JeremyRubin",
      "html_url": "https://github.com/JeremyRubin",
      "followers_url": "https://api.github.com/users/JeremyRubin/followers",
      "following_url": "https://api.github.com/users/JeremyRubin/following{/other_user}",
      "gists_url": "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
      "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
      "repos_url": "https://api.github.com/users/JeremyRubin/repos",
      "events_url": "https://api.github.com/users/JeremyRubin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Maybe a bit cleaner to do something like (a couple of changes, feel free to pick and choose -- I was torn on the os.path.exists+getsize v.s. continual reading with open).\r\n\r\n```python\r\n        for t in xrange(100):\r\n            if os.path.exists(self.alert_filename) and os.path.getsize(self.alert_filename):\r\n                break\r\n            if t != 99: time.sleep(0.1) \r\n        else:\r\n            raise AssertionError(\"-alertnotify did not warn of up-version blocks\")\r\n        with open(self.alert_filename, 'r', encoding='utf8') as f:\r\n            alert_text = f.read()\r\n```",
    "created_at": "2017-03-28T18:04:49Z",
    "updated_at": "2017-03-28T20:22:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108493763",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108493763"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108493763"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108493763/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 47,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108494509",
    "pull_request_review_id": 29522081,
    "id": 108494509,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwODQ5NDUwOQ==",
    "diff_hunk": "@@ -41,11 +42,17 @@ def run_test(self):\n         self.nodes[1].generate(1)\n         self.sync_all()\n \n-        with open(self.alert_filename, 'r', encoding='utf8') as f:\n-            alert_text = f.read()\n+        # Give bitcoind 10 seconds to write the alert notification\n+        timeout = 10",
    "path": "test/functional/forknotify.py",
    "position": null,
    "original_position": 15,
    "commit_id": "a4fd89fddba49c56e77f131fe95feffa8d7cf6ed",
    "original_commit_id": "baeecbbb087842b18fb085b0d8c7b736c367cfe0",
    "user": {
      "login": "JeremyRubin",
      "id": 886523,
      "node_id": "MDQ6VXNlcjg4NjUyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JeremyRubin",
      "html_url": "https://github.com/JeremyRubin",
      "followers_url": "https://api.github.com/users/JeremyRubin/followers",
      "following_url": "https://api.github.com/users/JeremyRubin/following{/other_user}",
      "gists_url": "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
      "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
      "repos_url": "https://api.github.com/users/JeremyRubin/repos",
      "events_url": "https://api.github.com/users/JeremyRubin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This should rarely actually take 10 seconds, if the code is correct, right? Maybe 1 second will be a bit better in the case where it is actually broken & you're trying to fix it.",
    "created_at": "2017-03-28T18:07:35Z",
    "updated_at": "2017-03-28T20:22:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108494509",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108494509"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108494509"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108494509/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 46,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108505201",
    "pull_request_review_id": 29540462,
    "id": 108505201,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwODUwNTIwMQ==",
    "diff_hunk": "@@ -200,16 +200,14 @@ def test_BIP(self, bipName, activated_version, invalidate, invalidatePostSignatu\n         yield TestInstance([[block, False]])\n \n         # Restart all\n-        self.test.block_store.close()\n+        self.test.clear_all_connections()\n         stop_nodes(self.nodes)\n-        shutil.rmtree(self.options.tmpdir)\n+        shutil.rmtree(self.options.tmpdir + \"/node0\")",
    "path": "test/functional/bip9-softforks.py",
    "position": 8,
    "original_position": 8,
    "commit_id": "a4fd89fddba49c56e77f131fe95feffa8d7cf6ed",
    "original_commit_id": "baeecbbb087842b18fb085b0d8c7b736c367cfe0",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Not that I know of.\r\n\r\nI don't like the fact that this test is using shutil and removing files itself. This change just makes it slightly less damaging (ie it's only removing the datadir rather than the entire tmpdir)",
    "created_at": "2017-03-28T18:45:52Z",
    "updated_at": "2017-03-28T20:22:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108505201",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108505201"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108505201"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108505201/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 205,
    "original_line": 205,
    "side": "RIGHT",
    "in_reply_to_id": 108488136
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108505549",
    "pull_request_review_id": 29540462,
    "id": 108505549,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwODUwNTU0OQ==",
    "diff_hunk": "@@ -200,16 +200,14 @@ def test_BIP(self, bipName, activated_version, invalidate, invalidatePostSignatu\n         yield TestInstance([[block, False]])\n \n         # Restart all\n-        self.test.block_store.close()\n+        self.test.clear_all_connections()\n         stop_nodes(self.nodes)\n-        shutil.rmtree(self.options.tmpdir)\n+        shutil.rmtree(self.options.tmpdir + \"/node0\")\n         self.setup_chain()\n         self.setup_network()\n-        self.test.block_store = BlockStore(self.options.tmpdir)\n-        self.test.clear_all_connections()\n         self.test.add_all_connections(self.nodes)\n-        NetworkThread().start() # Start up network handling in another thread\n-\n+        NetworkThread().start()",
    "path": "test/functional/bip9-softforks.py",
    "position": 16,
    "original_position": 16,
    "commit_id": "a4fd89fddba49c56e77f131fe95feffa8d7cf6ed",
    "original_commit_id": "baeecbbb087842b18fb085b0d8c7b736c367cfe0",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "No, we need to wait for the network thread to start before receiving the verack (the network thread is what catches the verack and calls the callback).",
    "created_at": "2017-03-28T18:46:51Z",
    "updated_at": "2017-03-28T20:22:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108505549",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108505549"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108505549"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108505549/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 209,
    "original_line": 209,
    "side": "RIGHT",
    "in_reply_to_id": 108488077
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108506068",
    "pull_request_review_id": 29540462,
    "id": 108506068,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwODUwNjA2OA==",
    "diff_hunk": "@@ -200,16 +200,14 @@ def test_BIP(self, bipName, activated_version, invalidate, invalidatePostSignatu\n         yield TestInstance([[block, False]])\n \n         # Restart all\n-        self.test.block_store.close()\n+        self.test.clear_all_connections()\n         stop_nodes(self.nodes)\n-        shutil.rmtree(self.options.tmpdir)\n+        shutil.rmtree(self.options.tmpdir + \"/node0\")\n         self.setup_chain()\n         self.setup_network()\n-        self.test.block_store = BlockStore(self.options.tmpdir)\n-        self.test.clear_all_connections()\n         self.test.add_all_connections(self.nodes)\n-        NetworkThread().start() # Start up network handling in another thread\n-\n+        NetworkThread().start()\n+        self.test.test_nodes[0].wait_for_verack()",
    "path": "test/functional/bip9-softforks.py",
    "position": 17,
    "original_position": 17,
    "commit_id": "a4fd89fddba49c56e77f131fe95feffa8d7cf6ed",
    "original_commit_id": "baeecbbb087842b18fb085b0d8c7b736c367cfe0",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "wait_for_verack() is called by the comparison test framework at the start of the test run (comptest.py line 300).",
    "created_at": "2017-03-28T18:48:39Z",
    "updated_at": "2017-03-28T20:22:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108506068",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108506068"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108506068"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108506068/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 210,
    "original_line": 210,
    "side": "RIGHT",
    "in_reply_to_id": 108487850
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108506362",
    "pull_request_review_id": 29540462,
    "id": 108506362,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwODUwNjM2Mg==",
    "diff_hunk": "@@ -41,11 +42,17 @@ def run_test(self):\n         self.nodes[1].generate(1)\n         self.sync_all()\n \n-        with open(self.alert_filename, 'r', encoding='utf8') as f:\n-            alert_text = f.read()\n+        # Give bitcoind 10 seconds to write the alert notification\n+        timeout = 10",
    "path": "test/functional/forknotify.py",
    "position": null,
    "original_position": 15,
    "commit_id": "a4fd89fddba49c56e77f131fe95feffa8d7cf6ed",
    "original_commit_id": "baeecbbb087842b18fb085b0d8c7b736c367cfe0",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Depends. Travis catches a lot of timing edge cases. I don't think there's any problem making the timeout something high like 10 seconds since the while loop will break as soon as the file is written.",
    "created_at": "2017-03-28T18:49:48Z",
    "updated_at": "2017-03-28T20:22:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108506362",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108506362"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108506362"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108506362/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 46,
    "side": "RIGHT",
    "in_reply_to_id": 108494509
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108506887",
    "pull_request_review_id": 29540462,
    "id": 108506887,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwODUwNjg4Nw==",
    "diff_hunk": "@@ -41,11 +42,17 @@ def run_test(self):\n         self.nodes[1].generate(1)\n         self.sync_all()\n \n-        with open(self.alert_filename, 'r', encoding='utf8') as f:\n-            alert_text = f.read()\n+        # Give bitcoind 10 seconds to write the alert notification\n+        timeout = 10\n+        while True:",
    "path": "test/functional/forknotify.py",
    "position": null,
    "original_position": 16,
    "commit_id": "a4fd89fddba49c56e77f131fe95feffa8d7cf6ed",
    "original_commit_id": "baeecbbb087842b18fb085b0d8c7b736c367cfe0",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I think this is equivalent.",
    "created_at": "2017-03-28T18:51:40Z",
    "updated_at": "2017-03-28T20:22:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108506887",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108506887"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108506887"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108506887/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 47,
    "side": "RIGHT",
    "in_reply_to_id": 108493763
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108507304",
    "pull_request_review_id": 29540462,
    "id": 108507304,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwODUwNzMwNA==",
    "diff_hunk": "@@ -41,11 +42,17 @@ def run_test(self):\n         self.nodes[1].generate(1)\n         self.sync_all()\n \n-        with open(self.alert_filename, 'r', encoding='utf8') as f:\n-            alert_text = f.read()\n+        # Give bitcoind 10 seconds to write the alert notification\n+        timeout = 10\n+        while True:\n+            with open(self.alert_filename, 'r', encoding='utf8') as f:\n+                alert_text = f.read()\n+            if len(alert_text) > 0:\n+                break\n \n-        if len(alert_text) == 0:\n-            raise AssertionError(\"-alertnotify did not warn of up-version blocks\")\n+            assert timeout > 0, \"-alertnotify did not warn of up-version blocks\"",
    "path": "test/functional/forknotify.py",
    "position": null,
    "original_position": 24,
    "commit_id": "a4fd89fddba49c56e77f131fe95feffa8d7cf6ed",
    "original_commit_id": "baeecbbb087842b18fb085b0d8c7b736c367cfe0",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I don't think there's any difference. No-one runs the test cases with `-O`",
    "created_at": "2017-03-28T18:53:14Z",
    "updated_at": "2017-03-28T20:22:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108507304",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108507304"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108507304"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108507304/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 53,
    "side": "RIGHT",
    "in_reply_to_id": 108488637
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108521935",
    "pull_request_review_id": 29558315,
    "id": 108521935,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwODUyMTkzNQ==",
    "diff_hunk": "@@ -41,11 +42,17 @@ def run_test(self):\n         self.nodes[1].generate(1)\n         self.sync_all()\n \n-        with open(self.alert_filename, 'r', encoding='utf8') as f:\n-            alert_text = f.read()\n+        # Give bitcoind 10 seconds to write the alert notification\n+        timeout = 10\n+        while True:",
    "path": "test/functional/forknotify.py",
    "position": null,
    "original_position": 16,
    "commit_id": "a4fd89fddba49c56e77f131fe95feffa8d7cf6ed",
    "original_commit_id": "baeecbbb087842b18fb085b0d8c7b736c367cfe0",
    "user": {
      "login": "JeremyRubin",
      "id": 886523,
      "node_id": "MDQ6VXNlcjg4NjUyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JeremyRubin",
      "html_url": "https://github.com/JeremyRubin",
      "followers_url": "https://api.github.com/users/JeremyRubin/followers",
      "following_url": "https://api.github.com/users/JeremyRubin/following{/other_user}",
      "gists_url": "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
      "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
      "repos_url": "https://api.github.com/users/JeremyRubin/repos",
      "events_url": "https://api.github.com/users/JeremyRubin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "yeah; mostly this was motivated by being able to get rid of the stateful `timeout = 10; assert timeout > 0; timeout -= 0.1` combo.\r\nThis is also fine.\r\n```python\r\n        for t in xrange(100):\r\n            with open(self.alert_filename, 'r', encoding='utf8') as f:\r\n                alert_text = f.read()\r\n            if alert_text:\r\n                break\r\n            time.sleep(0.1) \r\n        else:\r\n            raise AssertionError(\"-alertnotify did not warn of up-version blocks\")\r\n```\r\n",
    "created_at": "2017-03-28T19:57:46Z",
    "updated_at": "2017-03-28T20:22:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108521935",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108521935"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108521935"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108521935/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 47,
    "side": "RIGHT",
    "in_reply_to_id": 108493763
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108522911",
    "pull_request_review_id": 29559437,
    "id": 108522911,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwODUyMjkxMQ==",
    "diff_hunk": "@@ -41,11 +42,17 @@ def run_test(self):\n         self.nodes[1].generate(1)\n         self.sync_all()\n \n-        with open(self.alert_filename, 'r', encoding='utf8') as f:\n-            alert_text = f.read()\n+        # Give bitcoind 10 seconds to write the alert notification\n+        timeout = 10\n+        while True:\n+            with open(self.alert_filename, 'r', encoding='utf8') as f:\n+                alert_text = f.read()\n+            if len(alert_text) > 0:\n+                break\n \n-        if len(alert_text) == 0:\n-            raise AssertionError(\"-alertnotify did not warn of up-version blocks\")\n+            assert timeout > 0, \"-alertnotify did not warn of up-version blocks\"",
    "path": "test/functional/forknotify.py",
    "position": null,
    "original_position": 24,
    "commit_id": "a4fd89fddba49c56e77f131fe95feffa8d7cf6ed",
    "original_commit_id": "baeecbbb087842b18fb085b0d8c7b736c367cfe0",
    "user": {
      "login": "JeremyRubin",
      "id": 886523,
      "node_id": "MDQ6VXNlcjg4NjUyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JeremyRubin",
      "html_url": "https://github.com/JeremyRubin",
      "followers_url": "https://api.github.com/users/JeremyRubin/followers",
      "following_url": "https://api.github.com/users/JeremyRubin/following{/other_user}",
      "gists_url": "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
      "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
      "repos_url": "https://api.github.com/users/JeremyRubin/repos",
      "events_url": "https://api.github.com/users/JeremyRubin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "using asserts as control flow is generally an antipattern (I think that the for/else loop is a bit clearer in any case).",
    "created_at": "2017-03-28T20:02:40Z",
    "updated_at": "2017-03-28T20:22:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108522911",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108522911"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108522911"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108522911/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 53,
    "side": "RIGHT",
    "in_reply_to_id": 108488637
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108524745",
    "pull_request_review_id": 29561418,
    "id": 108524745,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwODUyNDc0NQ==",
    "diff_hunk": "@@ -41,11 +42,17 @@ def run_test(self):\n         self.nodes[1].generate(1)\n         self.sync_all()\n \n-        with open(self.alert_filename, 'r', encoding='utf8') as f:\n-            alert_text = f.read()\n+        # Give bitcoind 10 seconds to write the alert notification\n+        timeout = 10\n+        while True:\n+            with open(self.alert_filename, 'r', encoding='utf8') as f:\n+                alert_text = f.read()\n+            if len(alert_text) > 0:\n+                break\n \n-        if len(alert_text) == 0:\n-            raise AssertionError(\"-alertnotify did not warn of up-version blocks\")\n+            assert timeout > 0, \"-alertnotify did not warn of up-version blocks\"",
    "path": "test/functional/forknotify.py",
    "position": null,
    "original_position": 24,
    "commit_id": "a4fd89fddba49c56e77f131fe95feffa8d7cf6ed",
    "original_commit_id": "baeecbbb087842b18fb085b0d8c7b736c367cfe0",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "ah. I see what you're saying now. Yes, I'll remove the assert from the control flow.",
    "created_at": "2017-03-28T20:11:10Z",
    "updated_at": "2017-03-28T20:22:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108524745",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108524745"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r108524745"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/108524745/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 53,
    "side": "RIGHT",
    "in_reply_to_id": 108488637
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/109305808",
    "pull_request_review_id": 30401370,
    "id": 109305808,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwOTMwNTgwOA==",
    "diff_hunk": "@@ -41,12 +43,19 @@ def run_test(self):\n         self.nodes[1].generate(1)\n         self.sync_all()\n \n+        # Give bitcoind 10 seconds to write the alert notification\n+        timeout = 10.0\n+        while timeout > 0:\n+            if os.path.exists(self.alert_filename) and os.path.getsize(self.alert_filename):\n+                break\n+            time.sleep(0.1)\n+            timeout -= 0.1\n+        else:\n+            assert False, \"-alertnotify did not warn of up-version blocks\"",
    "path": "test/functional/forknotify.py",
    "position": 21,
    "original_position": 21,
    "commit_id": "a4fd89fddba49c56e77f131fe95feffa8d7cf6ed",
    "original_commit_id": "a4fd89fddba49c56e77f131fe95feffa8d7cf6ed",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "@jnewbery nit: Any reason you changed the raise AssertionError to assert False?",
    "created_at": "2017-04-02T10:53:21Z",
    "updated_at": "2017-04-02T10:53:21Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r109305808",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/109305808"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r109305808"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/109305808/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 54,
    "original_line": 54,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/109308519",
    "pull_request_review_id": 30403752,
    "id": 109308519,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwOTMwODUxOQ==",
    "diff_hunk": "@@ -41,12 +43,19 @@ def run_test(self):\n         self.nodes[1].generate(1)\n         self.sync_all()\n \n+        # Give bitcoind 10 seconds to write the alert notification\n+        timeout = 10.0\n+        while timeout > 0:\n+            if os.path.exists(self.alert_filename) and os.path.getsize(self.alert_filename):\n+                break\n+            time.sleep(0.1)\n+            timeout -= 0.1\n+        else:\n+            assert False, \"-alertnotify did not warn of up-version blocks\"",
    "path": "test/functional/forknotify.py",
    "position": 21,
    "original_position": 21,
    "commit_id": "a4fd89fddba49c56e77f131fe95feffa8d7cf6ed",
    "original_commit_id": "a4fd89fddba49c56e77f131fe95feffa8d7cf6ed",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "No good reason. Equivalent behaviour but you're probably right that `raise AssertionError` is better style here.",
    "created_at": "2017-04-02T13:12:40Z",
    "updated_at": "2017-04-02T13:12:40Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r109308519",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/109308519"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/10072#discussion_r109308519"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10072"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/109308519/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 54,
    "original_line": 54,
    "side": "RIGHT",
    "in_reply_to_id": 109305808
  }
]