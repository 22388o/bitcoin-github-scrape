kallewoof,2018-04-06T05:23:06Z,"utACK.\n\nIt looks like `-pie` is on by default in the linker on GCC 6 and onward (and same for clang), so this was probably passed to the compiler instead of the linker... Either way, this PR fixes it, for systems where `-pie` is not enabled by default.",https://github.com/bitcoin/bitcoin/pull/12899#issuecomment-379151254,379151254,
l2a5b1,2018-04-06T23:49:13Z,"Nice! Tested ACK.\nMacOS 10.13.4 (17E199) and Xcode 9.3 (9E145)",https://github.com/bitcoin/bitcoin/pull/12899#issuecomment-379413250,379413250,
theuni,2018-04-09T17:39:02Z,"(see edit at bottom)\n\nThe issue here is that macOS is always pie, so there's no need to specify it. The compiler front-end warns about it, but I guess the linker doesn't care.\n\n@kallewoof default-pie is a configure option for recent compilers (at least for gcc, and I assume clang as well). It's up to distros/packagers whether they want to enable it or not. Modern distros have begun enablin",https://github.com/bitcoin/bitcoin/pull/12899#issuecomment-379833581,379833581,
AkioNak,2018-04-09T22:01:56Z,@theuni Thank you for your review. ,https://github.com/bitcoin/bitcoin/pull/12899#issuecomment-379907676,379907676,
kallewoof,2018-04-10T01:57:34Z,"@theuni Thanks for the detailed explanation! I agree that we should check for pie warnings as in your first patch. No idea on the second patch, really.",https://github.com/bitcoin/bitcoin/pull/12899#issuecomment-379948969,379948969,
AkioNak,2018-04-10T02:05:44Z,"@theuni I understood that how to use 4th parameter of AX_CHECK_{COMPILE,LINK}_FLAG().\nI agree what you pointed out. thanks.",https://github.com/bitcoin/bitcoin/pull/12899#issuecomment-379950286,379950286,
theuni,2018-04-10T02:07:51Z,"@kallewoof I think the first patch is enough to fix the warnings reported by @AkioNak, and the second patch (building a shared lib as pie) can actually be dropped here as it is a separate concern.\n\n@AkioNak Could you try that and see if it works for you?",https://github.com/bitcoin/bitcoin/pull/12899#issuecomment-379950612,379950612,
AkioNak,2018-04-10T02:10:50Z,@theuni sure. I will try it soon.,https://github.com/bitcoin/bitcoin/pull/12899#issuecomment-379951079,379951079,
AkioNak,2018-04-10T08:01:07Z,"@theuni @kallewoof  fixed and rebased to master 727175a.\nIt works fine (there is no warnings about ```-pie```, ```make check```  reports all ```PASS```) on my enviroment , both macos10.13.4/XCode9.3 and ubuntu 17.10/g++7.2.0.\n\nBut Travis-Job #27212.2 and #27212.5 have failed at ```bitcoin-util-test.py```.\n#27212.2 https://travis-ci.org/bitcoin/bitcoin/jobs/364451508\n#27212.5 https://trav",https://github.com/bitcoin/bitcoin/pull/12899#issuecomment-380010585,380010585,
jonasschnelli,2018-04-11T08:19:12Z,"Fixes my Xcode 9.3 maxOS 10.12 compiler warnings.\nTested ACK 6c1003589919b77dc9b143b4851cb123869b8fd0",https://github.com/bitcoin/bitcoin/pull/12899#issuecomment-380368483,380368483,
fanquake,2018-04-11T15:30:44Z,"Also tested that https://github.com/bitcoin/bitcoin/commit/6c1003589919b77dc9b143b4851cb123869b8fd0 fixes all ```-pie``` related warnings with macOS 10.13.4 and Xcode 9.3.\n\nIt seems like we don't have a clear conclusion on the second patch? We should open an issue to track that if required.",https://github.com/bitcoin/bitcoin/pull/12899#issuecomment-380495119,380495119,
theuni,2018-04-11T18:51:59Z,"Thanks! utACK 6c1003589919b77dc9b143b4851cb123869b8fd0. Test failure seems unrelated, I'll restart it.\n\n@fanquake Yes, it's not actually all that related here, since the new changes take care of the issue with libbitcoinconsensus also. And it's clearly not a real-world issue at the moment that we're building the library with -pie, as it seems to work fine. It'd be nice to find some real guidan",https://github.com/bitcoin/bitcoin/pull/12899#issuecomment-380558216,380558216,
laanwj,2018-04-12T10:18:30Z,"The travis failure in `../test/util/bitcoin-util-test.py` is really strange (almost all testcases fail!), it didn't go away after cleaning the cache and restarting the buld.\n\nEdit: see issue #12955",https://github.com/bitcoin/bitcoin/pull/12899#issuecomment-380752868,380752868,
theuni,2018-04-12T18:14:04Z,"ok, seems this is a genuine problem. @AkioNak: Sorry that this got off-track.\n```\nchecking whether C++ compiler accepts -fPIE... no\nchecking whether the linker accepts -pie... yes\n```\nA quick look around the net points out plenty of issues with mingw and pie.\nReally, this combo shouldn't happen anyway. The GCC docs for -pie even warn about mismatches with:\n> For predictable results, ",https://github.com/bitcoin/bitcoin/pull/12899#issuecomment-380897067,380897067,
AkioNak,2018-04-13T03:43:12Z,"@theuniÂ thanks. fixed and rebased. \nIt seems to work fine with travis too.",https://github.com/bitcoin/bitcoin/pull/12899#issuecomment-381012918,381012918,
theuni,2018-04-13T23:36:15Z,Thanks. utACK.\n,https://github.com/bitcoin/bitcoin/pull/12899#issuecomment-381284473,381284473,
fanquake,2018-04-16T02:58:20Z,"macOS 10.13.4\nXcode 9.3\nApple LLVM version 9.1.0 (clang-902.0.39.1)\n\nCompiling master (e76acf3384aca13cd2dd850568317c0ce44458ed):\n```\nchecking whether C++ compiler accepts -fPIE... yes\nchecking whether the linker accepts -pie... yes\n```\n\n```\nclang: warning: argument unused during compilation: '-pie' [-Wunused-command-line-argument]\n  CXX      qt/bitcoin_qt-bitcoin.o\n  OBJ",https://github.com/bitcoin/bitcoin/pull/12899#issuecomment-381466573,381466573,
jonasschnelli,2018-04-17T08:58:03Z,Tested ACK 2eb5036c330fcc4fc115fe378b8211fd14711195,https://github.com/bitcoin/bitcoin/pull/12899#issuecomment-381908455,381908455,
laanwj,2018-04-09T14:27:38Z,"Is this also correct for non-macOS? I've seen `-pie` a lot in build systems but never `-Wl,-pie`.\n@theuni?",https://github.com/bitcoin/bitcoin/pull/12899#discussion_r180112353,180112353,configure.ac
