theuni,2017-10-25T16:08:02Z,The rest of the changes look good to me.,https://github.com/bitcoin/bitcoin/pull/11558#issuecomment-339382714,339382714,
theuni,2017-10-25T21:10:43Z,"See #11562, which should eliminate the need for the gettimeofday() patch.",https://github.com/bitcoin/bitcoin/pull/11558#issuecomment-339472697,339472697,
sipsorcery,2017-11-01T10:36:19Z,"Working around the use of the non-portable ssize_t definition is proving to be a bit tricky. Adding a typedef to random.h allows the code to build but as some reviewers pointed out it was a clunky fix.\n\nSwitching from ssize_t to int in random.h and random.cpp is not sufficient. There are also multiple uses of ssize_t in netbase.cpp and test/util_tests.cpp. A side effect of the definition in ra",https://github.com/bitcoin/bitcoin/pull/11558#issuecomment-341069333,341069333,
laanwj,2017-11-09T17:04:21Z,">  however if portable code is a goal for the future it may be worth steering away from non-C++ standard types, such as ssize_t, outside of any platform specific classes?\n\nAgree, ssize_t should be used in POSIX code, as some of the POSIX functions such as read() return it. But outside it it's better not to.\n\nutACK, changes look sane (or at least harmless) to me now. https://github.com/bitc",https://github.com/bitcoin/bitcoin/pull/11558#issuecomment-343221909,343221909,
ryanofsky,2017-11-09T17:13:44Z,"~~~Why not just make MAX_TRIES an int instead of an ssize_t like Cory suggested? Seems like misuse of ssize_t anyway.~~~ \n\nEDIT: Never mind. I see there were other uses of ssize_t outside of random.h/cpp. Still would be good to stop using ssize_t in inappropriate places.",https://github.com/bitcoin/bitcoin/pull/11558#issuecomment-343224794,343224794,
MarcoFalke,2017-12-13T15:04:55Z,Post merge Concept ACK fbf327b,https://github.com/bitcoin/bitcoin/pull/11558#issuecomment-351417518,351417518,
theuni,2017-10-25T15:50:44Z,Let's just drop gettimedouble() and switch this to std::chrono::steady_clock. That should eliminate the non-portable code.,https://github.com/bitcoin/bitcoin/pull/11558#discussion_r146902345,146902345,src/bench/bench.cpp
theuni,2017-10-25T15:51:53Z,I think just making MAX_TRIES an int should remove the need for this?,https://github.com/bitcoin/bitcoin/pull/11558#discussion_r146902758,146902758,src/random.h
theuni,2017-10-25T16:03:56Z,See the discussion here #11196 for context here. Now would be a good time to reassess.,https://github.com/bitcoin/bitcoin/pull/11558#discussion_r146906331,146906331,src/support/cleanse.cpp
ryanofsky,2017-10-25T18:31:52Z,"> I think just making MAX_TRIES an int should remove the need for this?\n\nYes this would be better than adding a top-level definition that could conflict with other libraries. (Also, if we did need a top-level definition, compat.h would probably be a better place to put it.)",https://github.com/bitcoin/bitcoin/pull/11558#discussion_r146947165,146947165,src/random.h
ryanofsky,2017-10-25T18:34:19Z,Need to get replace the tab on this line with spaces to fix travis error.,https://github.com/bitcoin/bitcoin/pull/11558#discussion_r146947926,146947926,src/support/cleanse.cpp
sipsorcery,2017-10-25T21:16:43Z,"Note that __asm is not supported with msvc when targeting x64, that's the only reason for this change.",https://github.com/bitcoin/bitcoin/pull/11558#discussion_r146989413,146989413,src/support/cleanse.cpp
sipsorcery,2017-10-25T22:14:35Z,"@ryanofsky I agree it's very clunky to add yet another ssize_t typedef. I did consider adding to compat.h, see the main PR comment. Happy to go with whatever the consensus is.",https://github.com/bitcoin/bitcoin/pull/11558#discussion_r147001807,147001807,src/random.h
ryanofsky,2017-10-31T20:08:12Z,"> Happy to go with whatever the consensus is.\n\nI think you should just make MAX_TRIES an int like Cory suggested.",https://github.com/bitcoin/bitcoin/pull/11558#discussion_r148112894,148112894,src/random.h
theuni,2017-11-09T18:54:20Z,"Please just make NUM_OS_RANDOM_BYTES an int to keep the compat.h include out of this header. I realize it's still needed in the cpp, but let's try not to spread the use further than necessary.",https://github.com/bitcoin/bitcoin/pull/11558#discussion_r150053669,150053669,src/random.h
