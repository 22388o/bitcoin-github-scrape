[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/775094408",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21106#issuecomment-775094408",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21106",
    "id": 775094408,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3NTA5NDQwOA==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-08T11:58:56Z",
    "updated_at": "2021-02-08T11:58:56Z",
    "author_association": "MEMBER",
    "body": "> all or most of the listening nodes are restarted into Initial Block Download mode \r\n\r\nWouldn't that mean that there hasn't been a block in 24 hours? Then, waiting another two days for the next block doesn't seem like a fallback that will be needed.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/775094408/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/775567992",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21106#issuecomment-775567992",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21106",
    "id": 775567992,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3NTU2Nzk5Mg==",
    "user": {
      "login": "pstratem",
      "id": 620611,
      "node_id": "MDQ6VXNlcjYyMDYxMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/620611?u=871eabd15ac87d37f1b4d2b927fa8f33e3ad7fe3&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pstratem",
      "html_url": "https://github.com/pstratem",
      "followers_url": "https://api.github.com/users/pstratem/followers",
      "following_url": "https://api.github.com/users/pstratem/following{/other_user}",
      "gists_url": "https://api.github.com/users/pstratem/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pstratem/subscriptions",
      "organizations_url": "https://api.github.com/users/pstratem/orgs",
      "repos_url": "https://api.github.com/users/pstratem/repos",
      "events_url": "https://api.github.com/users/pstratem/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pstratem/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-09T00:45:00Z",
    "updated_at": "2021-02-09T00:45:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "@MarcoFalke no it doesn't, just that the listening nodes haven't seen the block yet.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/775567992/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/775723337",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21106#issuecomment-775723337",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21106",
    "id": 775723337,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3NTcyMzMzNw==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-09T07:08:45Z",
    "updated_at": "2021-02-09T07:08:45Z",
    "author_association": "MEMBER",
    "body": "If the listening nodes haven't seen a block from 24h ago, something is going wrong and needs human attention to manually fixup. Having an automated fallback that hits after two days doesn't seem needed when having to manually interfere anyway.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/775723337/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/776494393",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21106#issuecomment-776494393",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21106",
    "id": 776494393,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3NjQ5NDM5Mw==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-10T07:04:42Z",
    "updated_at": "2021-02-10T07:04:42Z",
    "author_association": "MEMBER",
    "body": "I fully agree that the node should try to recover (to avoid manual intervention as much as possible) when its both reasonable and safe to do. Though in this particular case, the users that are eager enough to corrupt their datadir, won't be patient enough to wait three full days for this workaround to take effect. And similarly, the patient users won't see the benefits either because some eager users successfully poked their node on the first day of issues.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/776494393/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/776597233",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21106#issuecomment-776597233",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21106",
    "id": 776597233,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3NjU5NzIzMw==",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?u=3f68150a5f30acd541d1ed279376cd20b78046b1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-10T10:08:33Z",
    "updated_at": "2021-02-10T10:08:33Z",
    "author_association": "MEMBER",
    "body": ">  the tricky part is being equally confident that the various attacks that the IBD specific behaviour is intended to protect against are still protected against-- esp because no one reviewing this work may remember all of them\r\n\r\nYes.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/776597233/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/776619931",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21106#issuecomment-776619931",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21106",
    "id": 776619931,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3NjYxOTkzMQ==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-10T10:46:11Z",
    "updated_at": "2021-02-10T10:54:08Z",
    "author_association": "MEMBER",
    "body": "If this was a boolean option (default to false), it would be easier to review than this time-based threshold. Obviously, it would also lose the node-fixes-itself-after-three-days feature. Though, I am still sceptical of it's use. It assumes that *all* of your connections (inbound, as well as block-feeler, outbound block-relay, ...) are out of IBD for three days without a single one of them setting the flag manually.\r\n\r\n(Edit: I wrote this before the previous comment, so it is not a reply to that)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/776619931/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/776932029",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21106#issuecomment-776932029",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21106",
    "id": 776932029,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3NjkzMjAyOQ==",
    "user": {
      "login": "pstratem",
      "id": 620611,
      "node_id": "MDQ6VXNlcjYyMDYxMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/620611?u=871eabd15ac87d37f1b4d2b927fa8f33e3ad7fe3&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pstratem",
      "html_url": "https://github.com/pstratem",
      "followers_url": "https://api.github.com/users/pstratem/followers",
      "following_url": "https://api.github.com/users/pstratem/following{/other_user}",
      "gists_url": "https://api.github.com/users/pstratem/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pstratem/subscriptions",
      "organizations_url": "https://api.github.com/users/pstratem/orgs",
      "repos_url": "https://api.github.com/users/pstratem/repos",
      "events_url": "https://api.github.com/users/pstratem/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pstratem/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-10T18:51:30Z",
    "updated_at": "2021-02-10T18:51:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "@MarcoFalke In IBD we do not request headers from inbound peers.  Literally only from a single outbound peer with a timeout.\r\n\r\nA setting to disable IBD for your own node might fix your node if your node is listening and receiving inbound connections from nodes which are sync'd with miners.  Relying on that would be extremely fragile.\r\n\r\nEven if you were able to fix your own node, you can't then heal the rest of the network without them connecting to you as the single initial sync peer, the odds of which are extremely low.\r\n\r\nThe timeout prevents the network from being in this state for more than 48 hours with a bunch of nodes stuck in IBD.\r\n\r\nI'm assuming that the vast majority of listening nodes are not actively maintained and have no wallet, but are rather used as a kind of gateway, so being down for 48 hours is a nuisance to the rest of the network, but is probably not directly going to cause them to take action.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/776932029/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/776956299",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21106#issuecomment-776956299",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21106",
    "id": 776956299,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3Njk1NjI5OQ==",
    "user": {
      "login": "pstratem",
      "id": 620611,
      "node_id": "MDQ6VXNlcjYyMDYxMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/620611?u=871eabd15ac87d37f1b4d2b927fa8f33e3ad7fe3&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pstratem",
      "html_url": "https://github.com/pstratem",
      "followers_url": "https://api.github.com/users/pstratem/followers",
      "following_url": "https://api.github.com/users/pstratem/following{/other_user}",
      "gists_url": "https://api.github.com/users/pstratem/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pstratem/subscriptions",
      "organizations_url": "https://api.github.com/users/pstratem/orgs",
      "repos_url": "https://api.github.com/users/pstratem/repos",
      "events_url": "https://api.github.com/users/pstratem/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pstratem/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-10T19:23:46Z",
    "updated_at": "2021-02-10T19:23:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "@gmaxwell Yes just writing the latch to disk is probably the best solution.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/776956299/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/776957620",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21106#issuecomment-776957620",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21106",
    "id": 776957620,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3Njk1NzYyMA==",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?u=3f68150a5f30acd541d1ed279376cd20b78046b1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-10T19:26:03Z",
    "updated_at": "2021-02-10T19:26:03Z",
    "author_association": "MEMBER",
    "body": "Yes, if we can avoid using time that would be a real win. Easier to test too.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/776957620/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/777179339",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21106#issuecomment-777179339",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21106",
    "id": 777179339,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3NzE3OTMzOQ==",
    "user": {
      "login": "pstratem",
      "id": 620611,
      "node_id": "MDQ6VXNlcjYyMDYxMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/620611?u=871eabd15ac87d37f1b4d2b927fa8f33e3ad7fe3&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pstratem",
      "html_url": "https://github.com/pstratem",
      "followers_url": "https://api.github.com/users/pstratem/followers",
      "following_url": "https://api.github.com/users/pstratem/following{/other_user}",
      "gists_url": "https://api.github.com/users/pstratem/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pstratem/subscriptions",
      "organizations_url": "https://api.github.com/users/pstratem/orgs",
      "repos_url": "https://api.github.com/users/pstratem/repos",
      "events_url": "https://api.github.com/users/pstratem/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pstratem/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-11T03:16:20Z",
    "updated_at": "2021-02-11T03:16:20Z",
    "author_association": "CONTRIBUTOR",
    "body": "The CI failures are all random zmq issues.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/777179339/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/777697260",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21106#issuecomment-777697260",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21106",
    "id": 777697260,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3NzY5NzI2MA==",
    "user": {
      "login": "decryp2kanon",
      "id": 60179867,
      "node_id": "MDQ6VXNlcjYwMTc5ODY3",
      "avatar_url": "https://avatars.githubusercontent.com/u/60179867?u=e9e1c5a6e483ca07e551fb1e8a7d00c28d0843c0&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/decryp2kanon",
      "html_url": "https://github.com/decryp2kanon",
      "followers_url": "https://api.github.com/users/decryp2kanon/followers",
      "following_url": "https://api.github.com/users/decryp2kanon/following{/other_user}",
      "gists_url": "https://api.github.com/users/decryp2kanon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/decryp2kanon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/decryp2kanon/subscriptions",
      "organizations_url": "https://api.github.com/users/decryp2kanon/orgs",
      "repos_url": "https://api.github.com/users/decryp2kanon/repos",
      "events_url": "https://api.github.com/users/decryp2kanon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/decryp2kanon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-11T18:27:51Z",
    "updated_at": "2021-02-11T18:27:51Z",
    "author_association": "CONTRIBUTOR",
    "body": "Concept ACK",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/777697260/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/783085787",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21106#issuecomment-783085787",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21106",
    "id": 783085787,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4MzA4NTc4Nw==",
    "user": {
      "login": "pstratem",
      "id": 620611,
      "node_id": "MDQ6VXNlcjYyMDYxMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/620611?u=871eabd15ac87d37f1b4d2b927fa8f33e3ad7fe3&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pstratem",
      "html_url": "https://github.com/pstratem",
      "followers_url": "https://api.github.com/users/pstratem/followers",
      "following_url": "https://api.github.com/users/pstratem/following{/other_user}",
      "gists_url": "https://api.github.com/users/pstratem/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pstratem/subscriptions",
      "organizations_url": "https://api.github.com/users/pstratem/orgs",
      "repos_url": "https://api.github.com/users/pstratem/repos",
      "events_url": "https://api.github.com/users/pstratem/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pstratem/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-22T05:10:49Z",
    "updated_at": "2021-02-22T05:10:49Z",
    "author_association": "CONTRIBUTOR",
    "body": "Is there anything I need to do here?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/783085787/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/783237486",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21106#issuecomment-783237486",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21106",
    "id": 783237486,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4MzIzNzQ4Ng==",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-22T09:37:00Z",
    "updated_at": "2021-02-22T09:37:00Z",
    "author_association": "MEMBER",
    "body": "> Is there anything I need to do here?\r\n\r\nConvince other contributors that this is a good idea. Currently, if a node is switched off and then switched back on some time later, it'll start up in IBD until it catches up to the tip. This seems like good behaviour - we don't want to download transactions, relay our address, respond to getheaders, etc until we've caught back up. If you want other contributors to ACK this PR, you'll need to convince them that changing that behaviour is an improvement, and does not introduce any regressions/vulnerabilities/etc.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/783237486/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/783676898",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21106#issuecomment-783676898",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21106",
    "id": 783676898,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4MzY3Njg5OA==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-22T21:10:59Z",
    "updated_at": "2021-02-22T21:52:27Z",
    "author_association": "MEMBER",
    "body": "TL;DR: I think we should just drop the \"don't respond to GETHEADERS while in IBD\" behavior, rather than keeping the IsInitialBlockDownload() latch across restarts. Possibly we can also improve the find-another-peer-to-sync-headers-from logic (and, if that's the real problem, this PR doesn't currently address it).\r\n\r\nThese are the things that IsInitialBlockDownload() affects (there are more, but these are probably the most important ones).\r\n\r\n1) We don't respond to GETHEADERS while in IBD.\r\n2) We don't announce our local address while in IBD.\r\n3) The `getblocktemplate` RPC doesn't work while in IBD.\r\n4) We don't request transactions in IBD.\r\n5) Various compact block related things are disabled in IBD.\r\n\r\nThere is also a related behavior that is **not** controlled by IsInitialBlockDownload(), but by `pindexBestHeader->GetBlockTime() > GetAdjustedTime() - 24 * 60 * 60` instead:\r\n\r\n6) Only request headers from one peer at a time (however, if it times out, another peer will be selected).\r\n\r\nI believe it is mostly (1) and (6) we're concerned about here?\r\n\r\nI don't actually know why (1) exists in the first place. Perhaps it's trying to minimize time to be synced with the network first before providing services to others? I think that only has a minimal effect, especially when combined with (2). It seems to me that just removing (1) would address most of the concern here.\r\n\r\nIt seems possible to improve on (6) as well, but it's fundamentally a tradeoff between bandwidth and (high probability of) fast header syncing. The headers sync timeout is ~15 minutes though, which can be annoying, but is probably short enough that (6) doesn't actually matter for the scenario under consideration here.\r\n\r\nA way to improve (6) (especially useful when combined with removing (1)) would be to treat a \"less than 2000 headers received at once\" while the last one doesn't get out us out of IBD as \"done syncing with this peer, pick another one\".\r\n\r\nThese avoid the need to permanently latch to IBD, which seems like a very heavy hammer. Especially the transaction (4) and compact block related behaviours (5) we probably want to keep for nodes that were once out of IBD, but have been offline for a substantial period of time.\r\n\r\n(3) does look fairly scary if nodes can actually get stuck in IBD - but it's also a sign of a deeper problem. I'm not sure if that warrants addressing beyond just trying to make sure we don't get stuck in IBD.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/783676898/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/786984053",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21106#issuecomment-786984053",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21106",
    "id": 786984053,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4Njk4NDA1Mw==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-27T02:00:54Z",
    "updated_at": "2021-02-27T02:00:54Z",
    "author_association": "MEMBER",
    "body": "@pstratem So I suspect that what happened in $ALTCOIN is the headers fetching logic is approximately doing this:\r\n- until the tip header is less than a day old, we pick a single peer to fetch headers from. If we have at least one outbound peer, only outbounds are considered.\r\n- headers fetching times out after 15 minutes, and after that a new peer is picked (but, in a normal situation, again an outbound one, and it'll never actually get to asking an inbound peer)\r\n\r\nI don't believe the current PR actually addresses this, because none of the logic above is dependent on IsInitialBlockDownload. If actually all reachable nodes on the network are in \"headers 24 hours behind\" state, then making them IsIBD()==false would make them respond to headers, but never enough to get close enough to $NOW to get the network unstuck.\r\n\r\nHere are a couple alternative ideas (not all necessary, but probably most powerful if all 3 are done):\r\n* When headers fetch reaches timeout, instead of disconnecting a peer, it is marked \"failed headers sync\", and another peer is tried. Perhaps such \"failed headers sync\" peers can be preferred for eviction/replacement.\r\n* If we can't respond to a GETHEADERS request (for whatever reason), just echo the reported tip back the requester in a HEADERS. That has no they-might-ban-us risk, because clearly that tip is valid to themselves, and can be used as a \"done sending you headers\" signed (see next point).\r\n* If a HEADERS message arrives from the headers sync peer with less than MAX_HEADERS entries, which doesn't get us within 24h of $NOW, treat that as a \"failed headers sync\" as well. That means that headers sync peer cycling can go almost instantly, rather than needing 15-minute timeouts.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/786984053/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/790802591",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21106#issuecomment-790802591",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21106",
    "id": 790802591,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc5MDgwMjU5MQ==",
    "user": {
      "login": "sdaftuar",
      "id": 7463573,
      "node_id": "MDQ6VXNlcjc0NjM1NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sdaftuar",
      "html_url": "https://github.com/sdaftuar",
      "followers_url": "https://api.github.com/users/sdaftuar/followers",
      "following_url": "https://api.github.com/users/sdaftuar/following{/other_user}",
      "gists_url": "https://api.github.com/users/sdaftuar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
      "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
      "repos_url": "https://api.github.com/users/sdaftuar/repos",
      "events_url": "https://api.github.com/users/sdaftuar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-04T17:45:26Z",
    "updated_at": "2021-03-04T17:45:26Z",
    "author_association": "MEMBER",
    "body": "@sipa Originally the logic was added to not respond to GETHEADERS while in IBD because we relaxed the checkpoint logic, so that we could accept a non-checkpointed chain during initial sync.  If a node was in IBD and fed a bogus initial headers chain, then a peer that is on the checkpointed chain would ban us if we gave them a checkpoint-violating header.\r\n\r\nSince then, our logic has changed a lot, both around banning and with the addition of minimum-chain-work.  An easy improvement would be to respond to getheaders messages as long as our tip is past the minimum chain work that we're configured with.\r\n\r\n@pstratem My understanding of block relay is that the scenario that I think you have in mind should not really exist, but perhaps I'm not understanding the scenario.  Let's say the whole network is in IBD for some reason, because no blocks have been found in several days and then everyone restarts their software.  At this point, initial headers sync with every peer is timing out every 20 minutes or whatever causing some peer churn (this all sounds bad, but not yet disastrous).\r\n\r\n(1) Then a miner finds a block and submits it to their node. That node is not a listening node, but (2) with the new block it will leave IBD.  It will also (3) announce that block (via INV) to all its peers, which will in turn immediately (4) send a getheaders to the node, which it will (5) respond to because its out of IBD.\r\n\r\nThat will (6) trigger block relay to all those peers via a getdata, which in turn will cause those nodes to (7) leave IBD and then (8) announce the block to their peers.  Things should progress fine from there, in the same way, I think -- what do you think is breaking down exactly?\r\n\r\nI guess (1) could break down because miners have to manually cause their own node to leave IBD in order for `getblocktemplate` to work, via the `-maxtipage` option.  But if you assume miners will quickly figure that out to not waste their hashpower, I think everything should work after that.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/790802591/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/790834342",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21106#issuecomment-790834342",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21106",
    "id": 790834342,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc5MDgzNDM0Mg==",
    "user": {
      "login": "sdaftuar",
      "id": 7463573,
      "node_id": "MDQ6VXNlcjc0NjM1NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sdaftuar",
      "html_url": "https://github.com/sdaftuar",
      "followers_url": "https://api.github.com/users/sdaftuar/followers",
      "following_url": "https://api.github.com/users/sdaftuar/following{/other_user}",
      "gists_url": "https://api.github.com/users/sdaftuar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
      "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
      "repos_url": "https://api.github.com/users/sdaftuar/repos",
      "events_url": "https://api.github.com/users/sdaftuar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-04T18:33:10Z",
    "updated_at": "2021-03-04T18:33:10Z",
    "author_association": "MEMBER",
    "body": "> That will (6) trigger block relay to all those peers via a getdata, which in turn will cause those nodes to (7) leave IBD and then (8) announce the block to their peers. Things should progress fine from there, in the same way, I think -- what do you think is breaking down exactly?\r\n\r\nAha, on further investigation, I think (6) is where things break down: when a node is in IBD because its current tip is too old, if we learn of a new block header from an inbound peer, we will not fetch the block when we get the header via direct-fetch (because `CanDirectFetch` will return false due to our old tip), and we won't fetch the block through parallel block fetch (via `FindNextBlocksToDownload`) if we're in IBD and we have any outbound peers.  I was able to replicate this behavior in a simple regtest setting.\r\n\r\nMy recollection is that we don't want to do full-on IBD from inbound peers because users running bitcoind at home might not want to be used for some outbound peer's initial sync.  Assuming we think that is still a reasonable concern, a simple fix might be to try fetching blocks via `FindNextBlocksToDownload` from inbound peers if we have no blocks in flight, as presumably that means our outbound peers have nothing for us, so we might as well treat that scenario the same as if we have no outbounds at all.\r\n\r\n(To be clear, I don't believe that the headers-sync behaviors with inbound peers are really a problem, because if an inbound peer is the only one to be finding new blocks, we will get their headers via our inv-processing behavior.  I think this is just a concern around block fetching.)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/790834342/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/846730993",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21106#issuecomment-846730993",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21106",
    "id": 846730993,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0NjczMDk5Mw==",
    "user": {
      "login": "JeremyRubin",
      "id": 886523,
      "node_id": "MDQ6VXNlcjg4NjUyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/886523?u=8cdd8653982252593843d7369ecfebe432b89768&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JeremyRubin",
      "html_url": "https://github.com/JeremyRubin",
      "followers_url": "https://api.github.com/users/JeremyRubin/followers",
      "following_url": "https://api.github.com/users/JeremyRubin/following{/other_user}",
      "gists_url": "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
      "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
      "repos_url": "https://api.github.com/users/JeremyRubin/repos",
      "events_url": "https://api.github.com/users/JeremyRubin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-24T04:51:37Z",
    "updated_at": "2021-05-24T04:51:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "Noting that I was operating a signet for a while which crashed, and by the time I rebooted it (life happens) it was a few months later. Now after restarting, I think the IBD latch is keeping my seed/mining node in IBD since it's in the past, even though I'm producing new blocks. This also prevents this node from relaying the new blocks to peers.\r\n\r\nThis patch might fix this (pathological) case.\r\n\r\nh/t @ajtowns for pointing this out.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/846730993/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/571946307",
    "pull_request_review_id": 585370500,
    "id": 571946307,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MTk0NjMwNw==",
    "diff_hunk": "@@ -1305,6 +1305,14 @@ bool CChainState::IsInitialBlockDownload() const\n         return false;\n     if (fImporting || fReindex)\n         return true;\n+    uint64_t ibdtimeout = gArgs.GetArg(\"-ibdtimeout\", DEFAULT_IBD_TIMEOUT);\n+    int64_t uptime = GetTime() - GetStartupTime();\n+    assert(uptime >= 0);",
    "path": "src/validation.cpp",
    "position": null,
    "original_position": 6,
    "commit_id": "a3e713ace8b6dd97b6048b267e51e74f5a386f5f",
    "original_commit_id": "22c27cca430298bfc0b76ab50b18dc639110d75e",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This assumes that `GetTime()` is monotonic, which I don't think is true. `GetTime()` is mockable so may move backwards in tests.\r\n\r\nIt looks like `GetTime()` is also deprecated.",
    "created_at": "2021-02-08T10:46:22Z",
    "updated_at": "2021-02-11T01:20:18Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21106#discussion_r571946307",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21106",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/571946307"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21106#discussion_r571946307"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21106"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/571946307/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": 1309,
    "start_side": "RIGHT",
    "line": null,
    "original_line": 1310,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572483459",
    "pull_request_review_id": 586054492,
    "id": 572483459,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MjQ4MzQ1OQ==",
    "diff_hunk": "@@ -1305,6 +1305,14 @@ bool CChainState::IsInitialBlockDownload() const\n         return false;\n     if (fImporting || fReindex)\n         return true;\n+    uint64_t ibdtimeout = gArgs.GetArg(\"-ibdtimeout\", DEFAULT_IBD_TIMEOUT);\n+    int64_t uptime = GetTime() - GetStartupTime();\n+    assert(uptime >= 0);",
    "path": "src/validation.cpp",
    "position": null,
    "original_position": 6,
    "commit_id": "a3e713ace8b6dd97b6048b267e51e74f5a386f5f",
    "original_commit_id": "22c27cca430298bfc0b76ab50b18dc639110d75e",
    "user": {
      "login": "pstratem",
      "id": 620611,
      "node_id": "MDQ6VXNlcjYyMDYxMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/620611?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pstratem",
      "html_url": "https://github.com/pstratem",
      "followers_url": "https://api.github.com/users/pstratem/followers",
      "following_url": "https://api.github.com/users/pstratem/following{/other_user}",
      "gists_url": "https://api.github.com/users/pstratem/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pstratem/subscriptions",
      "organizations_url": "https://api.github.com/users/pstratem/orgs",
      "repos_url": "https://api.github.com/users/pstratem/repos",
      "events_url": "https://api.github.com/users/pstratem/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pstratem/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Nodes in IBD will not respond to GETHEADERS. Nodes in IBD do not request headers from inbound peers only outbound.\r\n\r\nIf all or most of the listening nodes are in IBD (emergency hot fix or something) then nobody will be able to get headers.\r\n\r\nTo get out of this the listening nodes need to request headers from inbound connections, either by exiting IBD or special casing that limit while in IBD.",
    "created_at": "2021-02-09T00:43:37Z",
    "updated_at": "2021-02-11T01:20:18Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21106#discussion_r572483459",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21106",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572483459"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21106#discussion_r572483459"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21106"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572483459/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": 1309,
    "start_side": "RIGHT",
    "line": null,
    "original_line": 1310,
    "side": "RIGHT",
    "in_reply_to_id": 571946307
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/573569162",
    "pull_request_review_id": 587402387,
    "id": 573569162,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MzU2OTE2Mg==",
    "diff_hunk": "@@ -1305,11 +1305,19 @@ bool CChainState::IsInitialBlockDownload() const\n         return false;\n     if (fImporting || fReindex)\n         return true;\n+    uint64_t ibdtimeout = gArgs.GetArg(\"-ibdtimeout\", DEFAULT_IBD_TIMEOUT);\n+    int64_t uptime = GetTime() - GetStartupTime();",
    "path": "src/validation.cpp",
    "position": null,
    "original_position": 5,
    "commit_id": "a3e713ace8b6dd97b6048b267e51e74f5a386f5f",
    "original_commit_id": "99283bf75197199191e433ae07456f3cf239308e",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "The `ibdtimeout` and `uptime` localvars can be `const`.\r\n\r\nAs @jnewbery mentions, we probably don't want to use `GetTime()` here, see `src/util/time.h`.\r\n\r\nAlso maybe consider how this interacts with `setmocktime`\r\n```\r\n    // For now, don't change mocktime if we're in the middle of validation, as\r\n    // this could have an effect on mempool time-based eviction, as well as\r\n    // IsCurrentForFeeEstimation() and IsInitialBlockDownload().\r\n    // TODO: figure out the right way to synchronize around mocktime, and\r\n    // ensure all call sites of GetTime() are accessing this safely.\r\n```\r\n",
    "created_at": "2021-02-10T09:25:14Z",
    "updated_at": "2021-02-11T01:20:18Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21106#discussion_r573569162",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21106",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/573569162"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21106#discussion_r573569162"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21106"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/573569162/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1309,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/573569430",
    "pull_request_review_id": 587402387,
    "id": 573569430,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MzU2OTQzMA==",
    "diff_hunk": "@@ -53,6 +53,7 @@ struct DisconnectedBlockTransactions;\n struct PrecomputedTransactionData;\n struct LockPoints;\n \n+static const unsigned int DEFAULT_IBD_TIMEOUT = 3600 * 48; // 48 Hours",
    "path": "src/validation.h",
    "position": null,
    "original_position": 4,
    "commit_id": "a3e713ace8b6dd97b6048b267e51e74f5a386f5f",
    "original_commit_id": "99283bf75197199191e433ae07456f3cf239308e",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Can use `constexpr` and mention that the constant refers to a time duration in seconds.",
    "created_at": "2021-02-10T09:25:37Z",
    "updated_at": "2021-02-11T01:20:18Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21106#discussion_r573569430",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21106",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/573569430"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21106#discussion_r573569430"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21106"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/573569430/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 56,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/574085139",
    "pull_request_review_id": 588064190,
    "id": 574085139,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NDA4NTEzOQ==",
    "diff_hunk": "@@ -1312,6 +1323,9 @@ bool CChainState::IsInitialBlockDownload() const\n     if (m_chain.Tip()->GetBlockTime() < (GetTime() - nMaxTipAge))\n         return true;\n     LogPrintf(\"Leaving InitialBlockDownload (latching to false)\\n\");\n+    f = fsbridge::fopen(latch_filename, \"wb\");\n+    if (!f) LogPrintf(\"Failed to write %s \\n\", latch_filename.string().c_str());\n+    else fclose(f);",
    "path": "src/validation.cpp",
    "position": null,
    "original_position": 40,
    "commit_id": "a3e713ace8b6dd97b6048b267e51e74f5a386f5f",
    "original_commit_id": "cf742ecc4447f17751e13f0e61e23fd7859c5f57",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I think we now use bracket syntax for the conditional (after a famous Apple bug iirc)\r\n```diff\r\n-    if (!f) LogPrintf(\"Failed to write %s \\n\", latch_filename.c_str());\r\n-    else fclose(f);\r\n+    if (f) {\r\n+        fclose(f);\r\n+    } else {\r\n+        LogPrintf(\"Failed to write %s\\n\", latch_filename.c_str());\r\n+    }\r\n```\r\n",
    "created_at": "2021-02-10T21:19:53Z",
    "updated_at": "2021-02-11T01:20:18Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21106#discussion_r574085139",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21106",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/574085139"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21106#discussion_r574085139"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21106"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/574085139/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1328,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/574092299",
    "pull_request_review_id": 588073442,
    "id": 574092299,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NDA5MjI5OQ==",
    "diff_hunk": "@@ -1312,6 +1323,9 @@ bool CChainState::IsInitialBlockDownload() const\n     if (m_chain.Tip()->GetBlockTime() < (GetTime() - nMaxTipAge))\n         return true;\n     LogPrintf(\"Leaving InitialBlockDownload (latching to false)\\n\");\n+    f = fsbridge::fopen(latch_filename, \"wb\");\n+    if (!f) LogPrintf(\"Failed to write %s \\n\", latch_filename.string().c_str());\n+    else fclose(f);",
    "path": "src/validation.cpp",
    "position": null,
    "original_position": 40,
    "commit_id": "a3e713ace8b6dd97b6048b267e51e74f5a386f5f",
    "original_commit_id": "cf742ecc4447f17751e13f0e61e23fd7859c5f57",
    "user": {
      "login": "pstratem",
      "id": 620611,
      "node_id": "MDQ6VXNlcjYyMDYxMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/620611?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pstratem",
      "html_url": "https://github.com/pstratem",
      "followers_url": "https://api.github.com/users/pstratem/followers",
      "following_url": "https://api.github.com/users/pstratem/following{/other_user}",
      "gists_url": "https://api.github.com/users/pstratem/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pstratem/subscriptions",
      "organizations_url": "https://api.github.com/users/pstratem/orgs",
      "repos_url": "https://api.github.com/users/pstratem/repos",
      "events_url": "https://api.github.com/users/pstratem/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pstratem/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Coding style guidelines doesn't agree, but I will expand it to new lines to make it easier to read.\r\n\r\n(Indeed ironically I argued for using braces everywhere, but we don't).\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md#coding-style-c",
    "created_at": "2021-02-10T21:32:44Z",
    "updated_at": "2021-02-11T01:20:18Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21106#discussion_r574092299",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21106",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/574092299"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21106#discussion_r574092299"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21106"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/574092299/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1328,
    "side": "RIGHT",
    "in_reply_to_id": 574085139
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/574098661",
    "pull_request_review_id": 588081125,
    "id": 574098661,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NDA5ODY2MQ==",
    "diff_hunk": "@@ -1312,6 +1323,9 @@ bool CChainState::IsInitialBlockDownload() const\n     if (m_chain.Tip()->GetBlockTime() < (GetTime() - nMaxTipAge))\n         return true;\n     LogPrintf(\"Leaving InitialBlockDownload (latching to false)\\n\");\n+    f = fsbridge::fopen(latch_filename, \"wb\");\n+    if (!f) LogPrintf(\"Failed to write %s \\n\", latch_filename.string().c_str());\n+    else fclose(f);",
    "path": "src/validation.cpp",
    "position": null,
    "original_position": 40,
    "commit_id": "a3e713ace8b6dd97b6048b267e51e74f5a386f5f",
    "original_commit_id": "cf742ecc4447f17751e13f0e61e23fd7859c5f57",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "The developer notes state:\r\n```\r\n  - If an `if` only has a single-statement `then`-clause, it can appear\r\n    on the same line as the `if`, without braces. In every other case,\r\n    braces are required, and the `then` and `else` clauses must appear\r\n    correctly indented on a new line.\r\n```\r\n",
    "created_at": "2021-02-10T21:43:51Z",
    "updated_at": "2021-02-11T01:20:18Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21106#discussion_r574098661",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21106",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/574098661"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21106#discussion_r574098661"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21106"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/574098661/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1328,
    "side": "RIGHT",
    "in_reply_to_id": 574085139
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/574099441",
    "pull_request_review_id": 588082083,
    "id": 574099441,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NDA5OTQ0MQ==",
    "diff_hunk": "@@ -1312,6 +1323,9 @@ bool CChainState::IsInitialBlockDownload() const\n     if (m_chain.Tip()->GetBlockTime() < (GetTime() - nMaxTipAge))\n         return true;\n     LogPrintf(\"Leaving InitialBlockDownload (latching to false)\\n\");\n+    f = fsbridge::fopen(latch_filename, \"wb\");\n+    if (!f) LogPrintf(\"Failed to write %s \\n\", latch_filename.string().c_str());\n+    else fclose(f);",
    "path": "src/validation.cpp",
    "position": null,
    "original_position": 40,
    "commit_id": "a3e713ace8b6dd97b6048b267e51e74f5a386f5f",
    "original_commit_id": "cf742ecc4447f17751e13f0e61e23fd7859c5f57",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "So if I read it correctly, without the `else` it would be fine, but with the `else` then braces are required (at any rate, that is what I've been doing).",
    "created_at": "2021-02-10T21:45:19Z",
    "updated_at": "2021-02-11T01:20:18Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21106#discussion_r574099441",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21106",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/574099441"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21106#discussion_r574099441"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21106"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/574099441/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1328,
    "side": "RIGHT",
    "in_reply_to_id": 574085139
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/575687579",
    "pull_request_review_id": 589979886,
    "id": 575687579,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NTY4NzU3OQ==",
    "diff_hunk": "@@ -1294,15 +1295,23 @@ void CChainState::InitCoinsCache(size_t cache_size_bytes)\n // `const` so that `CValidationInterface` clients (which are given a `const CChainState*`)\n // can call it.\n //\n+// The file .ibd_complete is used to latch the datadir to IBD false across restarts",
    "path": "src/validation.cpp",
    "position": 12,
    "original_position": 12,
    "commit_id": "a3e713ace8b6dd97b6048b267e51e74f5a386f5f",
    "original_commit_id": "a3e713ace8b6dd97b6048b267e51e74f5a386f5f",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "If this moves forward, noting that a file description should be added to `doc/files.md` (alternatively, perhaps persist the latch in `settings.json`, which is also chain-specific).",
    "created_at": "2021-02-13T16:53:26Z",
    "updated_at": "2021-02-13T17:01:59Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21106#discussion_r575687579",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21106",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/575687579"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21106#discussion_r575687579"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21106"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/575687579/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1298,
    "original_line": 1298,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/575704729",
    "pull_request_review_id": 589990517,
    "id": 575704729,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NTcwNDcyOQ==",
    "diff_hunk": "@@ -1294,15 +1295,23 @@ void CChainState::InitCoinsCache(size_t cache_size_bytes)\n // `const` so that `CValidationInterface` clients (which are given a `const CChainState*`)\n // can call it.\n //\n+// The file .ibd_complete is used to latch the datadir to IBD false across restarts",
    "path": "src/validation.cpp",
    "position": 12,
    "original_position": 12,
    "commit_id": "a3e713ace8b6dd97b6048b267e51e74f5a386f5f",
    "original_commit_id": "a3e713ace8b6dd97b6048b267e51e74f5a386f5f",
    "user": {
      "login": "pstratem",
      "id": 620611,
      "node_id": "MDQ6VXNlcjYyMDYxMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/620611?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pstratem",
      "html_url": "https://github.com/pstratem",
      "followers_url": "https://api.github.com/users/pstratem/followers",
      "following_url": "https://api.github.com/users/pstratem/following{/other_user}",
      "gists_url": "https://api.github.com/users/pstratem/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pstratem/subscriptions",
      "organizations_url": "https://api.github.com/users/pstratem/orgs",
      "repos_url": "https://api.github.com/users/pstratem/repos",
      "events_url": "https://api.github.com/users/pstratem/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pstratem/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I did this as a separate file so that users can easily add the file to override, with GetDataDir() it should be chain specific, no?",
    "created_at": "2021-02-13T19:35:56Z",
    "updated_at": "2021-02-13T19:35:56Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21106#discussion_r575704729",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21106",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/575704729"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21106#discussion_r575704729"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21106"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/575704729/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1298,
    "original_line": 1298,
    "side": "RIGHT",
    "in_reply_to_id": 575687579
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/575706285",
    "pull_request_review_id": 589991512,
    "id": 575706285,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NTcwNjI4NQ==",
    "diff_hunk": "@@ -1294,15 +1295,23 @@ void CChainState::InitCoinsCache(size_t cache_size_bytes)\n // `const` so that `CValidationInterface` clients (which are given a `const CChainState*`)\n // can call it.\n //\n+// The file .ibd_complete is used to latch the datadir to IBD false across restarts",
    "path": "src/validation.cpp",
    "position": 12,
    "original_position": 12,
    "commit_id": "a3e713ace8b6dd97b6048b267e51e74f5a386f5f",
    "original_commit_id": "a3e713ace8b6dd97b6048b267e51e74f5a386f5f",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Yes, I think they should both be.",
    "created_at": "2021-02-13T19:50:35Z",
    "updated_at": "2021-02-13T19:50:35Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21106#discussion_r575706285",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21106",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/575706285"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21106#discussion_r575706285"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21106"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/575706285/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1298,
    "original_line": 1298,
    "side": "RIGHT",
    "in_reply_to_id": 575687579
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/580105756",
    "pull_request_review_id": 595162546,
    "id": 580105756,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MDEwNTc1Ng==",
    "diff_hunk": "@@ -1294,15 +1295,23 @@ void CChainState::InitCoinsCache(size_t cache_size_bytes)\n // `const` so that `CValidationInterface` clients (which are given a `const CChainState*`)\n // can call it.\n //\n+// The file .ibd_complete is used to latch the datadir to IBD false across restarts\n+//\n bool CChainState::IsInitialBlockDownload() const\n {\n+    static const fs::path latch_filename = GetDataDir() / \".ibd_complete\";\n     // Optimization: pre-test latch before taking the lock.\n     if (m_cached_finished_ibd.load(std::memory_order_relaxed))\n         return false;\n \n     LOCK(cs_main);\n     if (m_cached_finished_ibd.load(std::memory_order_relaxed))\n         return false;\n+    if (fs::exists(latch_filename)) {\n+        LogPrintf(\"Leaving InitialBlockDownload (latching to false)\\n\");\n+        m_cached_finished_ibd.store(true, std::memory_order_relaxed);\n+        return false;",
    "path": "src/validation.cpp",
    "position": 27,
    "original_position": 27,
    "commit_id": "a3e713ace8b6dd97b6048b267e51e74f5a386f5f",
    "original_commit_id": "a3e713ace8b6dd97b6048b267e51e74f5a386f5f",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This will set ibd to false, when `-reindex`? If yes, that seems wrong",
    "created_at": "2021-02-22T09:40:15Z",
    "updated_at": "2021-02-22T09:40:15Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21106#discussion_r580105756",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21106",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/580105756"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21106#discussion_r580105756"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21106"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/580105756/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1313,
    "original_line": 1313,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/581543035",
    "pull_request_review_id": 596989001,
    "id": 581543035,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MTU0MzAzNQ==",
    "diff_hunk": "@@ -1294,15 +1295,23 @@ void CChainState::InitCoinsCache(size_t cache_size_bytes)\n // `const` so that `CValidationInterface` clients (which are given a `const CChainState*`)\n // can call it.\n //\n+// The file .ibd_complete is used to latch the datadir to IBD false across restarts",
    "path": "src/validation.cpp",
    "position": 12,
    "original_position": 12,
    "commit_id": "a3e713ace8b6dd97b6048b267e51e74f5a386f5f",
    "original_commit_id": "a3e713ace8b6dd97b6048b267e51e74f5a386f5f",
    "user": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Users can easily override settings.json as well - they're just interpreted as command-line options.\r\n\r\nSo something like `--ibd_complete=0/1` would work",
    "created_at": "2021-02-24T01:45:59Z",
    "updated_at": "2021-02-24T01:45:59Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21106#discussion_r581543035",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21106",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/581543035"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21106#discussion_r581543035"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21106"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/581543035/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1298,
    "original_line": 1298,
    "side": "RIGHT",
    "in_reply_to_id": 575687579
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/584207780",
    "pull_request_review_id": 600204813,
    "id": 584207780,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4NDIwNzc4MA==",
    "diff_hunk": "@@ -1294,15 +1295,23 @@ void CChainState::InitCoinsCache(size_t cache_size_bytes)\n // `const` so that `CValidationInterface` clients (which are given a `const CChainState*`)\n // can call it.\n //\n+// The file .ibd_complete is used to latch the datadir to IBD false across restarts\n+//\n bool CChainState::IsInitialBlockDownload() const\n {\n+    static const fs::path latch_filename = GetDataDir() / \".ibd_complete\";\n     // Optimization: pre-test latch before taking the lock.\n     if (m_cached_finished_ibd.load(std::memory_order_relaxed))\n         return false;\n \n     LOCK(cs_main);\n     if (m_cached_finished_ibd.load(std::memory_order_relaxed))\n         return false;\n+    if (fs::exists(latch_filename)) {\n+        LogPrintf(\"Leaving InitialBlockDownload (latching to false)\\n\");\n+        m_cached_finished_ibd.store(true, std::memory_order_relaxed);\n+        return false;",
    "path": "src/validation.cpp",
    "position": 27,
    "original_position": 27,
    "commit_id": "a3e713ace8b6dd97b6048b267e51e74f5a386f5f",
    "original_commit_id": "a3e713ace8b6dd97b6048b267e51e74f5a386f5f",
    "user": {
      "login": "pstratem",
      "id": 620611,
      "node_id": "MDQ6VXNlcjYyMDYxMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/620611?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pstratem",
      "html_url": "https://github.com/pstratem",
      "followers_url": "https://api.github.com/users/pstratem/followers",
      "following_url": "https://api.github.com/users/pstratem/following{/other_user}",
      "gists_url": "https://api.github.com/users/pstratem/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pstratem/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pstratem/subscriptions",
      "organizations_url": "https://api.github.com/users/pstratem/orgs",
      "repos_url": "https://api.github.com/users/pstratem/repos",
      "events_url": "https://api.github.com/users/pstratem/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pstratem/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "yes, it is wrong",
    "created_at": "2021-02-28T00:04:38Z",
    "updated_at": "2021-02-28T00:04:38Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21106#discussion_r584207780",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21106",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/584207780"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21106#discussion_r584207780"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21106"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/584207780/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1313,
    "original_line": 1313,
    "side": "RIGHT",
    "in_reply_to_id": 580105756
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/584212675",
    "pull_request_review_id": 600207246,
    "id": 584212675,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4NDIxMjY3NQ==",
    "diff_hunk": "@@ -1305,6 +1305,14 @@ bool CChainState::IsInitialBlockDownload() const\n         return false;\n     if (fImporting || fReindex)\n         return true;\n+    uint64_t ibdtimeout = gArgs.GetArg(\"-ibdtimeout\", DEFAULT_IBD_TIMEOUT);\n+    int64_t uptime = GetTime() - GetStartupTime();\n+    assert(uptime >= 0);",
    "path": "src/validation.cpp",
    "position": null,
    "original_position": 6,
    "commit_id": "a3e713ace8b6dd97b6048b267e51e74f5a386f5f",
    "original_commit_id": "22c27cca430298bfc0b76ab50b18dc639110d75e",
    "user": {
      "login": "schuie2528",
      "id": 79707411,
      "node_id": "MDQ6VXNlcjc5NzA3NDEx",
      "avatar_url": "https://avatars.githubusercontent.com/u/79707411?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/schuie2528",
      "html_url": "https://github.com/schuie2528",
      "followers_url": "https://api.github.com/users/schuie2528/followers",
      "following_url": "https://api.github.com/users/schuie2528/following{/other_user}",
      "gists_url": "https://api.github.com/users/schuie2528/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/schuie2528/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/schuie2528/subscriptions",
      "organizations_url": "https://api.github.com/users/schuie2528/orgs",
      "repos_url": "https://api.github.com/users/schuie2528/repos",
      "events_url": "https://api.github.com/users/schuie2528/events{/privacy}",
      "received_events_url": "https://api.github.com/users/schuie2528/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "bc1que90l5dy4yzn79x8xmem8t7dgn0c2zcqvxnr6x",
    "created_at": "2021-02-28T01:01:12Z",
    "updated_at": "2021-02-28T01:01:12Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21106#discussion_r584212675",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21106",
    "author_association": "NONE",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/584212675"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21106#discussion_r584212675"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21106"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/584212675/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": 1309,
    "start_side": "RIGHT",
    "line": null,
    "original_line": 1310,
    "side": "RIGHT",
    "in_reply_to_id": 571946307
  }
]