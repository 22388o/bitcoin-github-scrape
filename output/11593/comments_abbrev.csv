gmaxwell,2017-11-01T22:00:45Z,utACK.,https://github.com/bitcoin/bitcoin/pull/11593#issuecomment-341256313,341256313,
achow101,2017-11-01T23:52:34Z,utACK,https://github.com/bitcoin/bitcoin/pull/11593#issuecomment-341277438,341277438,
promag,2017-11-02T09:33:01Z,"utACK 6b58360.\n\nFor `http_set_gencb` there is no need to enable/disable since the reply is sent right away in the callback:\nhttps://github.com/bitcoin/bitcoin/blob/1b8c88451b0554502435d3883c528ad0aad1b09b/src/httpserver.cpp#L291-L296",https://github.com/bitcoin/bitcoin/pull/11593#issuecomment-341365194,341365194,
ryanofsky,2017-11-02T17:01:10Z,"I'm trying to reproduce the bug, but not having luck so far. I'm building 6b58360f9b64eb0b680a662fdfd590e47f115f44 with the fix commit reverted. My `event_get_version_number()` is 0x2001500 and I'm running\n\n```sh\nsrc/bitcoind -regtest\n```\nwith\n\n```sh\nwhile true; do curl -s -XGET --data-binary . 127.0.0.1:18443; done\n```",https://github.com/bitcoin/bitcoin/pull/11593#issuecomment-341489496,341489496,
TheBlueMatt,2017-11-02T18:17:40Z,"utACK 6b58360f9b64eb0b680a662fdfd590e47f115f44, assuming https://github.com/libevent/libevent/pull/567 gets merged upstream.",https://github.com/bitcoin/bitcoin/pull/11593#issuecomment-341513244,341513244,
theuni,2017-11-02T18:41:30Z,"Thanks to @ryanofsky for the version info. I bisected the upstream bug and found that it was introduced in 2.1.6-beta, so the workaround has been constrained to the appropriate range.",https://github.com/bitcoin/bitcoin/pull/11593#issuecomment-341520054,341520054,
jonasschnelli,2017-11-02T19:05:19Z,"utACK 97932cd2689659addfbb58dc6148928b73af3bd0\nA squash of the two commits would be preferable IMO.",https://github.com/bitcoin/bitcoin/pull/11593#issuecomment-341526539,341526539,
laanwj,2017-11-02T19:10:58Z,utACK 97932cd,https://github.com/bitcoin/bitcoin/pull/11593#issuecomment-341528019,341528019,
TheBlueMatt,2017-11-02T16:11:56Z,Are they not going to backport the fix? It looks like they haven't released a 2.2.0?,https://github.com/bitcoin/bitcoin/pull/11593#discussion_r148581918,148581918,src/httpserver.cpp
TheBlueMatt,2017-11-02T17:43:07Z,Why do we now need to copy req where we weren't previously?,https://github.com/bitcoin/bitcoin/pull/11593#discussion_r148608827,148608827,src/httpserver.cpp
theuni,2017-11-02T17:56:55Z,"Unsure if they'll backport, but it shouldn't hurt anything if they do. The reason for the version check is in case the behavior changes drastically in the future and enabling the read/write may be harmful. 2.2.0 isn't released, but the fix is in master.",https://github.com/bitcoin/bitcoin/pull/11593#discussion_r148613039,148613039,src/httpserver.cpp
theuni,2017-11-02T17:59:31Z,"std::bind copied in req by value, but passing ""this"" into the lambda and using req would use this->req in the callback, which would blow up because req is set to nullptr a few lines below.\n\nThis is clunky, but I'm not sure how else to pass a class member into a lambda by value in c++11.",https://github.com/bitcoin/bitcoin/pull/11593#discussion_r148613854,148613854,src/httpserver.cpp
TheBlueMatt,2017-11-02T18:02:00Z,"If the lambda were changed to simply say ""req"" (not ""req&"") then it is copied by value (in this case the pointer is copied).",https://github.com/bitcoin/bitcoin/pull/11593#discussion_r148614517,148614517,src/httpserver.cpp
theuni,2017-11-02T18:39:40Z,"Class members need to be captured with 'this', so unfortunately that doesn't work.",https://github.com/bitcoin/bitcoin/pull/11593#discussion_r148625139,148625139,src/httpserver.cpp
