cozz,2014-03-21T23:19:36Z,"update:\n- removed SplashMessage signal, now only 1 signal in CWallet::ScanForWalletTransactions\n- added LoadWallet signal to uiInterface\n- moved QProgressDialog to walletview\n",https://github.com/bitcoin/bitcoin/pull/3928#issuecomment-38334433,38334433,
laanwj,2014-03-23T10:29:40Z,ACK on code changes\nStill need to test\n,https://github.com/bitcoin/bitcoin/pull/3928#issuecomment-38378774,38378774,
laanwj,2014-03-24T11:34:42Z,Testing: With a fairly new wallet it goes from 1% to 2% then is finished. My guess is that progress reporting is not correct when not starting from the beginning?\n,https://github.com/bitcoin/bitcoin/pull/3928#issuecomment-38434178,38434178,
cozz,2014-03-24T12:36:16Z,"I assume you have only downloaded 2% of the chain?\nIn this case, rescan is finished after 2% yes.\nIf not started from the beginning it should go to, lets say 98% pretty fast, and then scan the other 2% (assuming you are 100% synced).\n\n#3696 introduced Checkpoints::GuessVerificationProgress for calculating the progress.\nso I just used it and didnt think about it any further.\nCheckpoints::Gues",https://github.com/bitcoin/bitcoin/pull/3928#issuecomment-38438626,38438626,
sipa,2014-03-24T12:39:09Z,"For rscan progress, I think you can just use (GuessProgress(current) - GuessProgress(start)) / (GuessProgress(tip) - GuessProgress(start))?\n",https://github.com/bitcoin/bitcoin/pull/3928#issuecomment-38438901,38438901,
laanwj,2014-03-24T12:42:47Z,I have downloaded the entire chain. It just doesn't start the rescan from the beginning because the wallet birthdate is recent.\n,https://github.com/bitcoin/bitcoin/pull/3928#issuecomment-38439219,38439219,
cozz,2014-03-24T13:23:52Z,"@sipa great idea, thanks.\n\n@laanwj To be honest, not sure how rescan can be finished after 2%, if you are synced.\nEven if blocks are skipped at the beginning, GuessVerificationProgress doesnt care about that.\n\nLooks like this needs better testing of all the edge cases.\nI will\n- add an optional boolean parameter fIgnoreSigchecks to GuessVerificationProgress\n- implement @sipa formula\n- do s",https://github.com/bitcoin/bitcoin/pull/3928#issuecomment-38443064,38443064,
laanwj,2014-03-24T13:35:00Z,"@cozz I see. Yes, I have the full blockchain but it had started a reindex. So it makes sense that it stops at 2%, because it only had come that far with reindexing. False alarm.\n",https://github.com/bitcoin/bitcoin/pull/3928#issuecomment-38444197,38444197,
cozz,2014-03-24T13:41:59Z,@laanwj Ok. Still makes sense to consider skipped blocks at beginning or end for progress.\n,https://github.com/bitcoin/bitcoin/pull/3928#issuecomment-38444963,38444963,
laanwj,2014-03-28T09:53:13Z,@cozz you're going to do those changes inside this pull request?\n,https://github.com/bitcoin/bitcoin/pull/3928#issuecomment-38902804,38902804,
cozz,2014-03-30T00:06:40Z,update:\n- added bool fSigchecks to Checkpoints::GuessVerificationProgress(..)\n- consider dPrgressStart and dPrgressTip in progress calculation in CWallet::ScanForWalletTransactions(..)\n,https://github.com/bitcoin/bitcoin/pull/3928#issuecomment-39013347,39013347,
sipa,2014-03-30T15:08:39Z,ACK core changes; didn't test.\n,https://github.com/bitcoin/bitcoin/pull/3928#issuecomment-39027728,39027728,
cozz,2014-04-02T01:51:24Z,"update:\n- added #ifdef around #include ""wallet.h""\n",https://github.com/bitcoin/bitcoin/pull/3928#issuecomment-39281354,39281354,
BitcoinPullTester,2014-04-02T04:12:52Z,"Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/392783697c21a0c4cf3db6b0946d3d44d7fed537 for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/cu",https://github.com/bitcoin/bitcoin/pull/3928#issuecomment-39287261,39287261,
laanwj,2014-04-03T09:46:35Z,Works for me.\nThanks for implementing this @cozz\n,https://github.com/bitcoin/bitcoin/pull/3928#issuecomment-39432826,39432826,
Diapolo,2014-04-04T08:57:41Z,"A comment, when I supply -rescan with Qt we can click the splashscreen and it fades (as it's an own thread now)... this will result in a tray-icon but NO further user feedback during re-scan. Perhaps it should show the progress via tray pop-up also?\n\nBtw. is there a RPC command to trigger a rescan during normal Qt runtime?\n",https://github.com/bitcoin/bitcoin/pull/3928#issuecomment-39544291,39544291,
laanwj,2014-04-04T09:34:40Z,"Well if you don't want to see the splash screen, you also don't see the progress. I think that makes sense. I suppose a way to bring back the splash screen would be nice (for some reason it doesn't just minimize?) (see also #3282).\n\nSome OSes (Windows http://www.codeproject.com/Articles/37451/Display-Progress-and-Overlay-Icons-for-Multiple-Vi , Ubuntu https://wiki.ubuntu.com/Unity/LauncherAPI ) ",https://github.com/bitcoin/bitcoin/pull/3928#issuecomment-39547168,39547168,
Diapolo,2014-04-04T09:49:40Z,"When you click the splashscreen it's gone, no way to bring it back currently. Would be nice if a click on the tray icon could re-activate it.\n",https://github.com/bitcoin/bitcoin/pull/3928#issuecomment-39548241,39548241,
rebroad,2014-05-15T23:42:13Z,"Given that ShowProgress() could also be used to show block verification progress in the splash screen, is it ideally placed in the wallet related cpp files?\n",https://github.com/bitcoin/bitcoin/pull/3928#issuecomment-43278273,43278273,
laanwj,2014-05-16T07:24:50Z,It _is_ used in the splash screen to display progress. The methods are on\nthe wallet because the progress is wallet-specific. In theory multiple\nwallets could be rescanning in parallel.\n,https://github.com/bitcoin/bitcoin/pull/3928#issuecomment-43304222,43304222,
laanwj,2014-03-21T16:14:07Z,"Thanks for tackling this!\n\nNit: We should use the same ShowProgress in the splash screen, and avoid SplashMessage (which burdens the interface as it's basically just a copy of InitMessage) and the resulting duplication here.\n",https://github.com/bitcoin/bitcoin/pull/3928#discussion_r10842360,10842360,src/wallet.cpp
laanwj,2014-03-21T16:46:03Z,"This dialog should be in the wallet view, not the model :)\n",https://github.com/bitcoin/bitcoin/pull/3928#discussion_r10843657,10843657,src/qt/walletmodel.h
laanwj,2014-03-21T16:49:44Z,I thought about that a bit and it will indeed give an implementation difficulty: how to get the SplashScreen to subscribe to the wallet in Init to get updates? Maybe add a uiInterface signal to announce a new CWallet to the GUI? Seems something we'll need eventually for MultiWallet support anyway.\n,https://github.com/bitcoin/bitcoin/pull/3928#discussion_r10843810,10843810,src/wallet.cpp
laanwj,2014-03-31T06:47:52Z,This include needs to be in #ifdef ENABLE_WALLET\n,https://github.com/bitcoin/bitcoin/pull/3928#discussion_r11105091,11105091,src/qt/splashscreen.cpp
