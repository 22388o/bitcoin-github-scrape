DrahtBot,2019-07-22 10:41:18,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #17966 (qt, refactor: Optimize signal-slot connections logic by hebasto)\n* #17877 (qt, refactor: Make enums in BitcoinUni",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-513739428,513739428,
practicalswift,2019-07-22 11:08:10,@hebasto Would you mind posting before/after screenshots?,https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-513747113,513747113,
hebasto,2019-07-22 11:40:10,"@practicalswift \n> Would you mind posting before/after screenshots?\n\nDone.",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-513756253,513756253,
laanwj,2019-07-22 13:04:38,"Concept ACK, definitely prefer the `#` to `h-i-d-d-e-n`",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-513782480,513782480,
hebasto,2019-07-22 13:07:11,"@MarcoFalke \n> I think a fence of `#` translates better.\n\n@laanwj \n> definitely prefer the `#` to `h-i-d-d-e-n`\n\nThe screenshot on OP has been updated.",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-513783370,513783370,
achow101,2019-07-22 13:24:13,"Can it use a fixed number/string of `#`s instead of replacing each character with `#`? That way we don't leak any information about the number of coins. For example, right now, in your screenshot, we can see that you have at least 1000 coins and at least 100 available to spend.",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-513789511,513789511,
jonasschnelli,2019-07-22 14:17:55,"Thanks for working on this!\nTested a bit. Works.\n\nNot sure if clicking on the actual amount label is the right way to activate this (may confuse user who lacks understanding the ""hidden""-concept).\n\nPlus, should it not also cover the ""Recent transactions""-list amounts?\n\nI would say ideally, once enabled, the values in the transaction list should also be ""hidden"".",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-513810812,513810812,
promag,2019-07-22 14:24:56,Concept ACK. Not so sure about the approach as it requires too much wiring. I'm testing a different approach and I'll give feedback if it's worth it.,https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-513813936,513813936,
promag,2019-07-22 14:26:21,"> Not sure if clicking on the actual amount label is the right way to activate this \n\nAgree with @jonasschnelli, I initially thought of having a toggle somewhere (in the status bar for instance) as well a menu option. Something for a follow up.",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-513814481,513814481,
hebasto,2019-07-22 14:32:29,"@achow101 \n> Can it use a fixed number/string of `#`s instead of replacing each character with `#`? That way we don't leak any information about the number of coins. For example, right now, in your screenshot, we can see that you have at least 1000 coins and at least 100 available to spend.\n\nDone. The screenshot on OP has been updated.\n",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-513817167,513817167,
hebasto,2019-07-22 14:43:56,"@jonasschnelli Thank you for your review.\n\n> Not sure if clicking on the actual amount label is the right way to activate this (may confuse user who lacks understanding the ""hidden""-concept).\n\nIt seems very intuitive ;) (also there is an example of usage in Wasabi)\nTo further improvements (on the following PR), a toggle could be added (as @promag [suggested](https://github.com/bitcoin/bi",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-513822046,513822046,
kristapsk,2019-07-22 22:35:53,"> Not sure if clicking on the actual amount label is the right way to activate this (may confuse user who lacks understanding the ""hidden""-concept).\n\nThat's the way ""lurking wife mode"" of Wasabi Wallet, which is basically the same, is activated. I think Bitcoin is already hard enough for newcomers, so unnecessary reinventing the wheel should be avoided, if possible, so that users get similar e",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-513980783,513980783,
fanquake,2019-07-23 05:43:47,Concept ACK,https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-514062504,514062504,
hebasto,2019-07-23 12:26:33,"Fixed two bugs:\n- sat units (no fractional part) handling\n- unit switching handling",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-514187662,514187662,
fanquake,2019-07-24 05:32:53,"Had a quick test. Functionality works as described. I might just be seeing things, but the monospace font looks a bit weird no macOS, don't think that has to be any sort of blocker though.\n\n@promag Are you still working on a different approach, or happy with this PR now?\n\nmaster:\n![master](https://user-images.githubusercontent.com/863730/61767561-406ee100-ae17-11e9-9b0d-ec8295057ca1.png)",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-514486077,514486077,
darosior,2019-07-24 21:55:36,"ACK 22c16fd3e19437db187a514ba043af635135b719\nI readed the code and I tested it. I think it's a great addition.",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-514814625,514814625,
promag,2019-07-25 01:01:21,"I've tried alternatives - basically tried filtering paint events if the widget had amounts or even extend QStyle - but didn't like at the end.\n\nCurrently I think this PR can be improved, I'll review shortly.",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-514853518,514853518,
jonasschnelli,2019-08-12 12:13:42,"Looks like the build is failing:\n```\nqt/bitcoinamountlabel.cpp:26:47: error: 'QRegularExpression' is an incomplete type\n    fractional_part = fractional_part.replace(QRegularExpression(""\\d""), mask);\n                                              ^\n/home/ubuntu/src/depends/x86_64-apple-darwin14/include/QtCore/qstring.h:80:7: note: forward declaration of 'QRegularExpression'\nclass QRegul",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-520399927,520399927,
hebasto,2019-08-12 18:23:24,"@jonasschnelli \n> Looks like the build is failing: ...\n\nRebased and fixed by partially reverting the 248e22bbc0d7bc40ae3584d53a18507c46b0e553 commit (#16386).",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-520539349,520539349,
jonasschnelli,2019-08-13 08:20:21,"Works as intended. I like the concept but think it should be implemented more radical (maybe in follow up PRs?).\n\n* The privacy mode won't hide recent transaction values\n* For users not aware of the privacy mode, it's unclear why the numbers are now # and how to bring it back,... a quick disappearing info-element (statusbar?) would make things much more understandable for users new to this c",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-520738075,520738075,
konez2k,2019-08-20 15:24:21,"This should work without regexp\n\n```\nstatic QString cloak(QString& text)\n{\n    QStringList parts = text.split(' ');\n    QStringList amounts = parts[0].split('.');\n    for (int i = 0; i < amounts.size(); i++)\n        amounts[i].fill('#');\n    return amounts.join('.') + ' ' + parts[1];\n}\n```",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-523065716,523065716,
JeremyCrookshank,2019-10-25 19:34:04,"Are you still working on this @hebasto. This PR is definitely of interest for me and would love to help/takeover it if you aren't\n",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-546484456,546484456,
hebasto,2019-10-27 17:33:44,"@kristapsk \n> But probably some message about privacy / stealth mode being activated and how to turn it back off would not hurt.\n\n@jonasschnelli \n> For users not aware of the privacy mode, it's unclear why the numbers are now # and how to bring it back,... a quick disappearing info-element (statusbar?) would make things much more understandable for users new to this concept\n\nA relevant",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-546716516,546716516,
hebasto,2019-10-27 19:18:26,"@jonasschnelli \n> Plus, should it not also cover the ""Recent transactions""-list amounts?\n\nDone.",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-546724777,546724777,
hebasto,2019-10-27 19:19:34,All comments have been addressed. PR is ready to be re-reviewed ;),https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-546724863,546724863,
hebasto,2019-10-28 11:05:41,Rebased in order to incorporate already merged #15529 and fix MSVC build.,https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-546897422,546897422,
luke-jr,2019-11-13 22:22:41,This kind of interferes with selecting to copy... :/,https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-553632052,553632052,
JeremyCrookshank,2019-11-16 13:35:30,"- As Luke said it's very hard to copy and paste values with this enabled also\n\n\n- It's not obvious why they're hidden if a user is still downloading blocks. I think the best solution is to disable this feature by default and only enable through GUI/config setting. \n\n![image](https://user-images.githubusercontent.com/46864828/68993661-73c7f680-0872-11ea-933a-d42bdb723e79.png)\n\n- It mi",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-554638029,554638029,
hebasto,2019-11-16 14:08:33,"@JeremyCrookshank \n\nThank you for your review.\n\n> As Luke said it's very hard to copy and paste values with this enabled also\n\nIt seems a bit counter-intuitive to try to copy a hidden / masked value.\n\n>  I think the best solution is to disable this feature by default and only enable through GUI/config setting.\n\nI'd prefer to make GUI/config settings related changes in follow-up",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-554640697,554640697,
JeremyCrookshank,2019-11-16 14:11:27,"> @JeremyCrookshank\n> \n> Thank you for your review.\n> \n> > As Luke said it's very hard to copy and paste values with this enabled also\n> \n> It seems a bit counter-intuitive to try copy a hidden / masked value.\n\nIt's hard to copy the non masked value. As you have to right click to copy which masks it.",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-554640975,554640975,
luke-jr,2019-11-16 14:20:19,"I typically copy values by double-clicking. No right-click needed, but still broken by this feature.\n\nMaybe a checkable menu item is best?",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-554641705,554641705,
RandyMcMillan,2019-11-17 00:43:46,"Using an asterisk as the replacement character may be easier on the eyes.\n\n```\n*.******\n```\nor\n```\n•.••••••\n```\n\nand conforms with what users may be used to as far as password obfuscation.\n\n\nEach field could have an individual unhide icon next to it.\n\n![Screen Shot 2019-11-16 at 7 49 09 PM](https://user-images.githubusercontent.com/152159/69001325-5e6ebe80-08aa-11ea-9",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-554689144,554689144,
hebasto,2019-11-17 18:21:42,"@JeremyCrookshank \n> It's hard to copy the non masked value. As you have to right click to copy which masks it.\n\n@luke-jr \n> I typically copy values by double-clicking. No right-click needed, but still broken by this feature.\n\nClick-to-hide/reveal buggy feature has been removed.\n\n> Maybe a checkable menu item is best?\n\nImplemented in the latest push e9df42cc7066f089c2c83844893a",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-554772089,554772089,
hebasto,2019-11-28 18:15:33,"@luke-jr \n> Why not just make this the default for `BitcoinAmountLabel`?\n\nDone in the latest push.",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-559577428,559577428,
MarkLTZ,2019-12-17 14:39:15,Nice PR. I think it just miss to hide the transactions page.,https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-566568986,566568986,
hebasto,2019-12-17 16:45:39,"@MarkLTZ \n> Nice PR. \n\nThank you.\n\n> I think it just miss to hide the transactions page.\n\nI believe this improvement could follow this PR.\n\n",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-566647175,566647175,
hebasto,2020-01-02 13:27:54,"In the latest push:\n- code is much simplified\n- monospace font style continues to be used\n- a shortcut has been added to simplify testing and/or usage\n\n![Screenshot from 2020-01-02 15-08-28](https://user-images.githubusercontent.com/32963518/71669074-28ab6980-2d74-11ea-8e54-4973aa307192.png)\n\n![Screenshot from 2020-01-02 15-10-23 cropped](https://user-images.githubusercontent.com/329",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-570206885,570206885,
hebasto,2020-01-02 15:33:36,"The OP has been updated.\n\n@achow101 @jonasschnelli @fanquake @laanwj @luke-jr @MarcoFalke @promag\nWould you mind re-reviewing this PR?",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-570242751,570242751,
achow101,2020-01-02 18:23:10,"ACK 3935bce9c28eefe38ea4e0152dbbddc630671d27\n\nTested change and reviewed.\n\nNot sure if this is possible, but it would be nice if the spaces for the right justify weren't selectable. Is there some other way to achieve the justify using spacers in the ui form?",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-570295450,570295450,
hebasto,2020-01-03 01:03:35,"@achow101 \n> Not sure if this is possible, but it would be nice if the spaces for the right justify weren't selectable. Is there some other way to achieve the justify using spacers in the ui form?\n\nIt is possible, but it requires to overhaul a form layout in a separate PR.\n",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-570423384,570423384,
hebasto,2020-01-04 19:43:22,"As @luke-jr rightly [commented](https://github.com/bitcoin/bitcoin/pull/16432#discussion_r362976691):\n> I'm not sure there's a point to a dedicated widget anymore...\n\nSo the dedicated `BitcoinAmountLabel` widget has been removed.",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-570813848,570813848,
hebasto,2020-02-02 18:23:03,Rebased after #17937 has been merged.,https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-581162487,581162487,
kristapsk,2020-02-02 23:28:34,"I think good place for icon when this mode is enabled would be near ""Balances"" and ""Recent transactions"" titles, at is is already done during sync, which informs that balances may be wrong and recent transactions might not appear. As this privacy mode also impacts the same things. But agree that this could be added as a follow-up PR. Also, more important IMHO would be to work on hiding values in o",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-581189851,581189851,
luke-jr,2020-02-03 03:37:20,"Hmm, I wonder if just ""closing"" the wallets in the GUI (but leaving them open for sync/updates) would work best.",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-581222986,581222986,
hebasto,2020-02-03 18:59:23,"> Hmm, I wonder if just ""closing"" the wallets in the GUI (but leaving them open for sync/updates) would work best.\n\nTBH, I do not like how it would look like (from the point of a user).",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-581563962,581563962,
hebasto,2020-03-24 16:54:39,Rebased 08a3048dd703d67f878d16be00a6288a5d27157f -> dba83b9dab919ea9c72f4321612605eb3242d523 due to the conflict with #18278.,https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-603366367,603366367,
hebasto,2020-04-29 17:23:50,Rebased dba83b9dab919ea9c72f4321612605eb3242d523 -> 6920e1236b3f7a6b46c78f058aac4a32fcfede9f due to the conflict with #16528.,https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-621351637,621351637,
hebasto,2020-05-06 08:08:24,"@achow101 @jonasschnelli @luke-jr @promag and @instagibbs (as initiator of #16407)\nMind re-reviewing this PR?",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-624503745,624503745,
instagibbs,2020-05-06 13:26:22,@hebasto huh didn't know this PR existed. Will review.,https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-624648144,624648144,
instagibbs,2020-05-06 13:29:51,"just from looking at the screenshots, did you consider something like adding a GUI toggle above/near the balances themselves? It's probably something I'd want to toggle on and off pretty fast, yeah?\n\nConcept ACK on the ##### scheme at least",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-624650198,624650198,
hebasto,2020-05-06 13:32:21,"> just from looking at the screenshots, did you consider something like adding a GUI toggle above/near the balances themselves? It's probably something I'd want to toggle on and off pretty fast, yeah?\n\nhttps://github.com/bitcoin/bitcoin/blob/6920e1236b3f7a6b46c78f058aac4a32fcfede9f/src/qt/bitcoingui.cpp#L354",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-624651653,624651653,
instagibbs,2020-05-06 14:07:35,"I see, it's a top-level setting. Light testing shows it does what's on the tin. \n\nedit: Continued testing is :heavy_check_mark: \n\ntACK https://github.com/bitcoin/bitcoin/pull/16432/commits/6920e1236b3f7a6b46c78f058aac4a32fcfede9f",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-624671248,624671248,
hebasto,2020-05-23 14:22:41,"Updated 6920e1236b3f7a6b46c78f058aac4a32fcfede9f -> 206d17e4d7131179e7c5a5e74632806859d7d493 ([pr16432.17](https://github.com/hebasto/bitcoin/commits/pr16432.17) -> [pr16432.18](https://github.com/hebasto/bitcoin/commits/pr16432.18), [diff](https://github.com/hebasto/bitcoin/compare/pr16432.17..pr16432.18)):\n\n- addressed all @jonatack's comments",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-633063508,633063508,
instagibbs,2020-05-23 16:25:14,reACK https://github.com/bitcoin/bitcoin/pull/16432/commits/206d17e4d7131179e7c5a5e74632806859d7d493,https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-633087808,633087808,
hebasto,2020-05-24 12:27:51,@MarcoFalke Mind re-reviewing this PR?,https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-633223765,633223765,
MarcoFalke,2020-05-24 12:33:02,Concept 🅰🅲🅺,https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-633224386,633224386,
hebasto,2020-05-25 05:59:19,"Updated 206d17e4d7131179e7c5a5e74632806859d7d493 -> ad5103667d0dc0a8117a2dd99032ecba2107cdd5 ([pr16432.18](https://github.com/hebasto/bitcoin/commits/pr16432.18) -> [pr16432.19](https://github.com/hebasto/bitcoin/commits/pr16432.19), [diff](https://github.com/hebasto/bitcoin/compare/pr16432.18..pr16432.19)):\n\n- addressed @promag's [comment](https://github.com/bitcoin/bitcoin/pull/16432#discuss",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-633392179,633392179,
hebasto,2020-05-25 14:14:34,"Updated ad5103667d0dc0a8117a2dd99032ecba2107cdd5 -> 31be796e44aff80510fb561cc0e8dbd2aa302080 ([pr16432.19](https://github.com/hebasto/bitcoin/commits/pr16432.19) -> [pr16432.20](https://github.com/hebasto/bitcoin/commits/pr16432.20), [diff](https://github.com/hebasto/bitcoin/compare/pr16432.19..pr16432.20)):\n\n- addressed @promag's [comment](https://github.com/bitcoin/bitcoin/pull/16432#discuss",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-633592495,633592495,
hebasto,2020-05-26 13:56:58,"Updated 31be796e44aff80510fb561cc0e8dbd2aa302080 -> 908b01457bc8454c78fb4d12b7b0d37030f2a6bd ([pr16432.20](https://github.com/hebasto/bitcoin/commits/pr16432.20) -> [pr16432.21](https://github.com/hebasto/bitcoin/commits/pr16432.21), [diff](https://github.com/hebasto/bitcoin/compare/pr16432.20..pr16432.21)):\n\n- addressed @promag's [comment](https://github.com/bitcoin/bitcoin/pull/16432#discuss",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-634041616,634041616,
jonatack,2020-05-27 08:50:50,"Tested re-ACK 908b01457bc8454c78fb4d12b7b0d37030f2a6bd only changes are addressing feedback (thanks!) as per `git diff 31be796 908b014`\n\n<details><summary><code>git diff 31be796 908b014</code></summary><p>\n\n```diff\n((HEAD detached at origin/pr/16432))$ git diff 31be796 908b014\ndiff --git a/src/qt/bitcoingui.cpp b/src/qt/bitcoingui.cpp\nindex a2fd231c05..321812c1f0 100644\n--- a/src/q",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-634522397,634522397,
hebasto,2020-05-27 08:58:31,"Updated 908b01457bc8454c78fb4d12b7b0d37030f2a6bd -> 8d75115844baefe5cad4d82ec8dce001dd16eb9c ([pr16432.21](https://github.com/hebasto/bitcoin/commits/pr16432.21) -> [pr16432.22](https://github.com/hebasto/bitcoin/commits/pr16432.22), [diff](https://github.com/hebasto/bitcoin/compare/pr16432.21..pr16432.22)):\n\n- addressed @jonatack's [comment](https://github.com/bitcoin/bitcoin/pull/16432#issue",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-634526515,634526515,
jonatack,2020-05-27 09:20:50,"Tested ACK 8d75115\n\nChanges since last review:\n<details><summary><code>git diff 908b014 8d75115</code></summary><p>\n\n```diff\n((HEAD detached at origin/pr/16432))$ git diff 31be796 908b014\n$ git diff 908b014 8d75115\ndiff --git a/src/qt/overviewpage.cpp b/src/qt/overviewpage.cpp\nindex 51682fe2fc..1ab30fefc7 100644\n--- a/src/qt/overviewpage.cpp\n+++ b/src/qt/overviewpage.cpp\n@@",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-634538523,634538523,
luke-jr,2020-05-28 05:07:25,">Apologetic nit: I belatedly noticed that this change makes the message long enough to be potentially cut off at the end (on my display on Debian).\n\nWe shouldn't be assuming or breaking with any window or font size... Is this a bug?",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-635103936,635103936,
jonatack,2020-05-28 07:26:57,"@luke-jr Good question. My description was imprecise. When the GUI window was at its smallest size, the message wasn't truncated per se but required navigating horizontally using the window scroll bar to see the last word.",https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-635162610,635162610,
jonasschnelli,2020-05-29 06:54:55,Tested ACK 8d75115844baefe5cad4d82ec8dce001dd16eb9c,https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-635796400,635796400,
MarcoFalke,2019-07-22 12:01:51,"I think a fence of `#` translates better.\n\nCouldn't this use `BitcoinUnits::format(unit, 0).replace(""0"", ""#"") + unit.shortName()` (or whatever is used right now), so that the UI doesn't reflow the columns on every toggle?",https://github.com/bitcoin/bitcoin/pull/16432#discussion_r305807357,305807357,src/qt/bitcoinamountlabel.cpp
MarcoFalke,2019-07-22 12:05:09,"![Screenshot from 2019-07-22 08-04-35](https://user-images.githubusercontent.com/6399679/61631080-66e61e00-ac57-11e9-9143-34c0965c3f89.png)\n",https://github.com/bitcoin/bitcoin/pull/16432#discussion_r305808411,305808411,src/qt/bitcoinamountlabel.cpp
hebasto,2019-07-22 13:04:34,"> I think a fence of # translates better.\n\nDone.\n\n> ... so that the UI doesn't reflow the columns on every toggle?\n\nThis requires a monospaced font. ",https://github.com/bitcoin/bitcoin/pull/16432#discussion_r305833602,305833602,src/qt/bitcoinamountlabel.cpp
hebasto,2019-07-22 14:53:04,"> This requires a monospaced font.\n\nDone.",https://github.com/bitcoin/bitcoin/pull/16432#discussion_r305887979,305887979,src/qt/bitcoinamountlabel.cpp
kristapsk,2019-07-22 23:18:02,"Just looked at how Wasabi did this and they just replace any amounts, addresses, labels everywhere with a fixed number of #'s. IMO ""#########"" even looks better than ""#.########"" and it's less lines of code, all this block could be just replaced with\n```\ncache = text();\nQLabel::setText(""#########"");`\n```",https://github.com/bitcoin/bitcoin/pull/16432#discussion_r306071570,306071570,src/qt/bitcoinamountlabel.cpp
hebasto,2019-07-23 05:34:08,"Unfortunately, this will cause the UI to reflow the columns on every toggle (see @MarcoFalke's [comment](https://github.com/bitcoin/bitcoin/pull/16432#discussion_r305807357)).",https://github.com/bitcoin/bitcoin/pull/16432#discussion_r306134970,306134970,src/qt/bitcoinamountlabel.cpp
luke-jr,2019-08-20 00:28:46,It seems a bit excessive to add regex support just for this...,https://github.com/bitcoin/bitcoin/pull/16432#discussion_r315464914,315464914,depends/packages/qt.mk
laanwj,2019-10-26 10:56:50,"Would agree here. If you really need complex regexps then I don't mind adding the dep, but it seems overkill for this.",https://github.com/bitcoin/bitcoin/pull/16432#discussion_r339295946,339295946,depends/packages/qt.mk
laanwj,2019-10-27 11:17:10,OTOH #17213 seems to need qt-regexp as well.,https://github.com/bitcoin/bitcoin/pull/16432#discussion_r339337232,339337232,depends/packages/qt.mk
hebasto,2019-10-27 17:22:53,Reverted back.,https://github.com/bitcoin/bitcoin/pull/16432#discussion_r339354000,339354000,depends/packages/qt.mk
luke-jr,2019-11-13 21:41:14,Why not just make this the default for `BitcoinAmountLabel`?,https://github.com/bitcoin/bitcoin/pull/16432#discussion_r346016891,346016891,src/qt/forms/overviewpage.ui
hebasto,2019-11-17 18:24:58,"I've tried different approaches, including\n```\nconst QFont font{""monospace""};\nQApplication::setFont(font, ""BitcoinAmountLabel"");\n```\n\n~Only the current code works as expected. But I'm still open for suggestions.~",https://github.com/bitcoin/bitcoin/pull/16432#discussion_r347151165,347151165,src/qt/forms/overviewpage.ui
hebasto,2019-11-28 18:02:07,Done.,https://github.com/bitcoin/bitcoin/pull/16432#discussion_r351896248,351896248,src/qt/forms/overviewpage.ui
luke-jr,2019-12-24 18:12:14,Basing it on the real number is revealing too much info.,https://github.com/bitcoin/bitcoin/pull/16432#discussion_r361209297,361209297,src/qt/bitcoinamountlabel.cpp
luke-jr,2019-12-24 18:14:28,Should be called `m_cache`,https://github.com/bitcoin/bitcoin/pull/16432#discussion_r361209556,361209556,src/qt/bitcoinamountlabel.h
luke-jr,2019-12-24 18:16:25,I wonder if there's a good way to auto-connect these,https://github.com/bitcoin/bitcoin/pull/16432#discussion_r361209779,361209779,src/qt/overviewpage.cpp
hebasto,2019-12-25 08:54:23,"> Basing it on the real number is revealing too much info.\n\nI'm not sure if I understand you correctly. Mind rewording your concerns?",https://github.com/bitcoin/bitcoin/pull/16432#discussion_r361283473,361283473,src/qt/bitcoinamountlabel.cpp
luke-jr,2019-12-25 15:58:14,"Your cloaking reveals at least how many whole number digits are in the real amount, by measuring the number of spaces you add.\n\nhttps://github.com/bitcoin/bitcoin/commit/98ce0b830e505ddede5d56951e4ce7ee1bf5a0c5",https://github.com/bitcoin/bitcoin/pull/16432#discussion_r361324057,361324057,src/qt/bitcoinamountlabel.cpp
hebasto,2020-01-01 11:24:18,Fixed.,https://github.com/bitcoin/bitcoin/pull/16432#discussion_r362317374,362317374,src/qt/bitcoinamountlabel.h
hebasto,2020-01-01 11:28:42,"> Your cloaking reveals at least how many whole number digits are in the real amount, by measuring the number of spaces you add.\n\nFixed in the latest push.\n\n> [98ce0b8](https://github.com/bitcoin/bitcoin/commit/98ce0b830e505ddede5d56951e4ce7ee1bf5a0c5)\n\nMonospace font style prevents the UI to reflow the columns on every toggle (https://github.com/bitcoin/bitcoin/pull/16432#discussion_r",https://github.com/bitcoin/bitcoin/pull/16432#discussion_r362317547,362317547,src/qt/bitcoinamountlabel.cpp
hebasto,2020-01-01 11:37:51,~I believe this could follow this PR.~,https://github.com/bitcoin/bitcoin/pull/16432#discussion_r362317914,362317914,src/qt/overviewpage.cpp
hebasto,2020-01-02 13:29:27,This part of code has been removed in the latest push.,https://github.com/bitcoin/bitcoin/pull/16432#discussion_r362472624,362472624,src/qt/overviewpage.cpp
luke-jr,2020-01-03 22:05:08,Please use `formatWithUnit`,https://github.com/bitcoin/bitcoin/pull/16432#discussion_r362976615,362976615,src/qt/bitcoinamountlabel.cpp
luke-jr,2020-01-03 22:05:25,I'm not sure there's a point to a dedicated widget anymore...,https://github.com/bitcoin/bitcoin/pull/16432#discussion_r362976691,362976691,src/qt/bitcoinamountlabel.cpp
luke-jr,2020-01-03 22:05:48,`QLabel::` is unnecessary,https://github.com/bitcoin/bitcoin/pull/16432#discussion_r362976802,362976802,src/qt/bitcoinamountlabel.cpp
hebasto,2020-01-04 19:35:12,Agree. Fixed in the latest push.,https://github.com/bitcoin/bitcoin/pull/16432#discussion_r363051349,363051349,src/qt/bitcoinamountlabel.cpp
hebasto,2020-01-04 19:36:05,A new signature of `BitcoinUnits::format()` is used here.,https://github.com/bitcoin/bitcoin/pull/16432#discussion_r363051392,363051392,src/qt/bitcoinamountlabel.cpp
hebasto,2020-01-04 19:39:50,Note to reviewers: these changes in numbers are just Qt Designer artefacts.,https://github.com/bitcoin/bitcoin/pull/16432#discussion_r363051569,363051569,src/qt/forms/overviewpage.ui
jonatack,2020-05-09 14:34:59,"pico nit: s/if it set/, if it is set/ or "", if set""",https://github.com/bitcoin/bitcoin/pull/16432#discussion_r422502862,422502862,src/qt/bitcoinunits.h
jonatack,2020-05-09 15:02:17,"Easy user-facing improvement:\n\n- s/values on/the values in the|all values in the/ \n\n- I'd suggest keeping the verb consistent everywhere, e.g. s/Cloak/Mask/\n",https://github.com/bitcoin/bitcoin/pull/16432#discussion_r422505634,422505634,src/qt/bitcoingui.cpp
jonatack,2020-05-09 15:06:12,"User-facing suggestion:\n```diff\n- ""PRIVACY mode is activated. To reveal cloaked values uncheck Menu->Settings->Mask values""\n+ ""PRIVACY mode is activated. To unmask the values, uncheck Menu->Settings->Mask values.""\n```\n- adds a missing ""the"", comma, and period\n- replaces ""reveal cloaked"" with the more consistent, shorter, and simpler ""unmask""\n\n(also, maybe consider not screaming :) ",https://github.com/bitcoin/bitcoin/pull/16432#discussion_r422506049,422506049,src/qt/overviewpage.cpp
jonatack,2020-05-09 15:11:31,"micro-nit, can perform one less conditional (with slightly improved readability) by avoiding the embedded ternary:\n```diff\n-    QString value = format(unit, privacy ? 0 : amount, false, separators, true);\n+    QString value;\n     if (privacy) {\n+        value = format(unit, 0, false, separators, true);\n         value.replace('0', '#');\n+    } else {\n+        value = format(unit, am",https://github.com/bitcoin/bitcoin/pull/16432#discussion_r422506640,422506640,src/qt/bitcoinunits.cpp
hebasto,2020-05-23 14:26:57,[Updated](https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-633063508).,https://github.com/bitcoin/bitcoin/pull/16432#discussion_r429550599,429550599,src/qt/bitcoinunits.h
hebasto,2020-05-23 14:27:06,[Updated](https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-633063508).,https://github.com/bitcoin/bitcoin/pull/16432#discussion_r429550613,429550613,src/qt/bitcoingui.cpp
hebasto,2020-05-23 14:27:15,[Updated](https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-633063508).,https://github.com/bitcoin/bitcoin/pull/16432#discussion_r429550624,429550624,src/qt/overviewpage.cpp
hebasto,2020-05-23 14:27:29,[Updated](https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-633063508).,https://github.com/bitcoin/bitcoin/pull/16432#discussion_r429550642,429550642,src/qt/bitcoinunits.cpp
promag,2020-05-25 00:22:03,"This condition looks unnecessary/unrelated, could add a comment maybe? ",https://github.com/bitcoin/bitcoin/pull/16432#discussion_r429690630,429690630,src/qt/overviewpage.cpp
promag,2020-05-25 00:29:23,Could we simplify this? Maybe define a `class AmountLabel : public QLabel` and here you would just call `setAmount(...)`. And in `setWalletModel` you could `ui->labelBalance->setOptionsModel`. This way `AmountLabel` would call `setText` when privacy or display unit changes (and amount ofc).,https://github.com/bitcoin/bitcoin/pull/16432#discussion_r429691466,429691466,src/qt/overviewpage.cpp
promag,2020-05-25 00:33:58,I think this should be in `OptionsModel`. No need to go through bitcoingui -> walletframe -> walletview -> overview.,https://github.com/bitcoin/bitcoin/pull/16432#discussion_r429691934,429691934,src/qt/overviewpage.h
promag,2020-05-25 00:37:12,"Why singleShot? Anyway, if you follow the OptionsModel then this is not needed.",https://github.com/bitcoin/bitcoin/pull/16432#discussion_r429692306,429692306,src/qt/walletframe.cpp
hebasto,2020-05-25 05:04:41,"> Why singleShot?\n\nTo apply the privacy mode to a just opened wallet.",https://github.com/bitcoin/bitcoin/pull/16432#discussion_r429732357,429732357,src/qt/walletframe.cpp
hebasto,2020-05-25 05:28:30,"> I think this should be in `OptionsModel`.\n\nIn this PR the privacy mode state is not intended to be preserved between consequent `bitcoin-qt` runs, that an `OptionsModel` instance does.\n\nI'd leave the detailed discussion for a followup pull.\n",https://github.com/bitcoin/bitcoin/pull/16432#discussion_r429736913,429736913,src/qt/overviewpage.h
hebasto,2020-05-25 05:36:38,"Removing a tailored widget was [considered](https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-570813848) as simplification already :)\n> As @luke-jr rightly [commented](https://github.com/bitcoin/bitcoin/pull/16432#discussion_r362976691):\n> > I'm not sure there's a point to a dedicated widget anymore...\n>\n> So the dedicated `BitcoinAmountLabel` widget has been removed.\n\nAnyway,",https://github.com/bitcoin/bitcoin/pull/16432#discussion_r429738575,429738575,src/qt/overviewpage.cpp
hebasto,2020-05-25 05:59:48,[Updated](https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-633392179).,https://github.com/bitcoin/bitcoin/pull/16432#discussion_r429744563,429744563,src/qt/overviewpage.cpp
promag,2020-05-25 08:29:34,"It doesn't have to be persisted to be in `OptionsModel`, it's a runtime option only for now. ",https://github.com/bitcoin/bitcoin/pull/16432#discussion_r429804032,429804032,src/qt/overviewpage.h
promag,2020-05-25 08:33:09,But this is the same as just calling `walletView->setPrivacy(gui->isPrivacyModeActivated())`.,https://github.com/bitcoin/bitcoin/pull/16432#discussion_r429805750,429805750,src/qt/walletframe.cpp
hebasto,2020-05-25 13:24:04,"> But this is the same as just calling `walletView->setPrivacy(gui->isPrivacyModeActivated())`.\n\nIndeed :)\nThank you!",https://github.com/bitcoin/bitcoin/pull/16432#discussion_r429932904,429932904,src/qt/walletframe.cpp
hebasto,2020-05-25 14:14:56,[Updated](https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-633592495).,https://github.com/bitcoin/bitcoin/pull/16432#discussion_r429957474,429957474,src/qt/walletframe.cpp
hebasto,2020-05-25 14:16:00,"Sorry, going to leave it as is.",https://github.com/bitcoin/bitcoin/pull/16432#discussion_r429957970,429957970,src/qt/overviewpage.h
promag,2020-05-25 14:38:43,"73d8ef72742ab9193e9e95158b26176bfaab3f66\n\nnit, any reason for this assertion in this function? Looks like it should be in `format()`?",https://github.com/bitcoin/bitcoin/pull/16432#discussion_r429968879,429968879,src/qt/bitcoinunits.cpp
promag,2020-05-25 14:48:50,"31be796e44aff80510fb561cc0e8dbd2aa302080\n\nATM `m_mask_values_action` is always instanced but only added to the GUI when `walletFrame` is set. But I'd make the instancing optional and here I'd `assert(m_mask_values_action)` - it should only be called when wallets are enabled.",https://github.com/bitcoin/bitcoin/pull/16432#discussion_r429973527,429973527,src/qt/bitcoingui.cpp
jonatack,2020-05-26 09:31:29,"```suggestion\n    const QString status_tip = m_privacy ? tr(""Privacy mode is activated for the Overview tab. To unmask the values, uncheck Menu->Settings->Mask values."") : """";\n```",https://github.com/bitcoin/bitcoin/pull/16432#discussion_r430280378,430280378,src/qt/overviewpage.cpp
hebasto,2020-05-26 13:06:25,"> [73d8ef7](https://github.com/bitcoin/bitcoin/commit/73d8ef72742ab9193e9e95158b26176bfaab3f66)\n> \n> nit, any reason for this assertion in this function? Looks like it should be in `format()`?\n\n`BitcoinUnits::format()` handles a negative `CAmount` argument correctly. But the code of `BitcoinUnits::formatWithPrivacy()` is not designed to work with the minus sign. This is a deliberate simpli",https://github.com/bitcoin/bitcoin/pull/16432#discussion_r430396834,430396834,src/qt/bitcoinunits.cpp
hebasto,2020-05-26 13:57:30,[Updated](https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-634041616).,https://github.com/bitcoin/bitcoin/pull/16432#discussion_r430432554,430432554,src/qt/bitcoingui.cpp
hebasto,2020-05-26 13:57:40,[Updated](https://github.com/bitcoin/bitcoin/pull/16432#issuecomment-634041616).,https://github.com/bitcoin/bitcoin/pull/16432#discussion_r430432693,430432693,src/qt/overviewpage.cpp
