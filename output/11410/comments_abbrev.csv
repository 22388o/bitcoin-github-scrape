promag,2017-09-28T20:37:43Z,utACK d4e253e.,https://github.com/bitcoin/bitcoin/pull/11410#issuecomment-332956814,332956814,
TheBlueMatt,2017-09-28T23:30:28Z,"I think we should just replace mempoolminfee with max(mempoolminfee, minrelayfee) as we no longer support priority/free-relay txn that will likely not be mined (so the original arguments for separating them no longer hold).",https://github.com/bitcoin/bitcoin/pull/11410#issuecomment-332991078,332991078,
sipa,2017-09-29T00:34:38Z,Agree with @TheBlueMatt.,https://github.com/bitcoin/bitcoin/pull/11410#issuecomment-332999688,332999688,
mess110,2017-09-29T15:34:23Z,"Thanks for the feedback.\n\nWe already do max between `rollingMinimumFeeRate` and `incrementalRelayFee` in https://github.com/bitcoin/bitcoin/blob/master/src/txmempool.cpp#L1002, but there are cases when we return 0:\n\n* https://github.com/bitcoin/bitcoin/blob/master/src/txmempool.cpp#L999\n* https://github.com/bitcoin/bitcoin/blob/master/src/txmempool.cpp#L984\n\nTo solve this, (imo) we h",https://github.com/bitcoin/bitcoin/pull/11410#issuecomment-333159978,333159978,
MarcoFalke,2017-09-29T16:54:20Z,"If you create the new method (option 2), you should also use it in the other places where `GetMinFee` is called and remove the (now obsolete) `std::max` from them. If you only plan to use it in `getmempoolinfo`, you could as well just do the `std::max` there (option 1).",https://github.com/bitcoin/bitcoin/pull/11410#issuecomment-333179982,333179982,
morcos,2017-09-29T17:12:53Z,I think I agree with @sipa and @TheBlueMatt.  There are still a couple of differences between minRelayTxFee and mempoolMinFee.  One I can thing of now is the wallet will allow you to create a transaction below mempoolMinFee but not below minRelayTxFee.  But I think if we carefully went through the code to see where either of them were used we might find that there is no point in ever returning a m,https://github.com/bitcoin/bitcoin/pull/11410#issuecomment-333184250,333184250,
mess110,2017-09-30T23:11:57Z,Rebased,https://github.com/bitcoin/bitcoin/pull/11410#issuecomment-333341963,333341963,
MarcoFalke,2017-10-02T15:19:25Z,You can remove `GetRequiredFee` in src/wallet/fees.cpp now.,https://github.com/bitcoin/bitcoin/pull/11410#issuecomment-333566941,333566941,
mess110,2017-10-02T15:36:40Z,"@ryanofsky fixed, thx\n\n@MarcoFalke prefer to do that in a different PR. Is that fine? Will create a different issue if that is ok.",https://github.com/bitcoin/bitcoin/pull/11410#issuecomment-333572525,333572525,
MarcoFalke,2017-10-02T16:01:31Z,"To elaborate a bit: Previously, when calling `GetMinimumFee` and the resulting fee was smaller than the `minRelayTxFee`, the reason for increasing the fee would always be `FeeReason::REQUIRED`. Now, the reason for increasing the fee would depend on whether `paytxfee` (would result in `FeeReason::REQUIRED`) was used or smart fee estimation (would result in `FeeReason::MEMPOOL_MIN`). With your chang",https://github.com/bitcoin/bitcoin/pull/11410#issuecomment-333580217,333580217,
ryanofsky,2017-10-02T16:52:25Z,Removing the call to GetRequiredFee in GetMinimumFee does seem like the correct thing to do here (and the change would only be harder to understand in another context). I just didn't think GetRequiredFee should be removed entirely.,https://github.com/bitcoin/bitcoin/pull/11410#issuecomment-333594635,333594635,
mess110,2017-10-02T19:58:39Z,"Oh, ok, now I understand. I removed the `GetRequiredFee` code from `GetMinimumFee`",https://github.com/bitcoin/bitcoin/pull/11410#issuecomment-333647186,333647186,
mess110,2017-10-03T14:55:07Z,"After repeated runs of  `./test/functional/test_runner.py fundrawtransaction`, I have my doubts that the code in https://github.com/bitcoin/bitcoin/pull/11410/files#diff-ca74c4b28865382863b8fe7633a85cd6 is correct.\n\nSometimes, I get this error:\n\n```\n............................................................................................................................................",https://github.com/bitcoin/bitcoin/pull/11410#issuecomment-333868390,333868390,
ryanofsky,2017-10-02T14:51:16Z,"Maybe preserve this comment (move it up by mempoolRejectFee check).\n\nAlso maybe drop the `mempoolRejectFee > 0` check above which seems impossible to hit now (and confusing & unnecessary previously).",https://github.com/bitcoin/bitcoin/pull/11410#discussion_r142161090,142161090,src/validation.cpp
mess110,2017-10-02T15:18:49Z,"Thanks for the review, fixed",https://github.com/bitcoin/bitcoin/pull/11410#discussion_r142169216,142169216,src/validation.cpp
ryanofsky,2017-10-02T15:27:20Z,Should probably say mempool min fee instead of minRelayTxFee.,https://github.com/bitcoin/bitcoin/pull/11410#discussion_r142171745,142171745,src/validation.cpp
MarcoFalke,2017-10-02T20:16:30Z,"You'd still need to set it to minTxFee in case the current fee is smaller than that (Also set the FeeReason appropriately)\n\nAlso, I'd suggest to move GetMinFee down, so that it is applied when paytxfee is set.",https://github.com/bitcoin/bitcoin/pull/11410#discussion_r142243128,142243128,src/wallet/fees.cpp
MarcoFalke,2017-10-05T10:44:16Z,<strike>I don't feel entirely happy that a bug fix is part of a mostly refactoring commit. Would you mind to split up those bug fixes to a separate (minimal) commit and pull request?,https://github.com/bitcoin/bitcoin/pull/11410#discussion_r142904723,142904723,src/txmempool.cpp
mess110,2017-10-05T12:06:09Z,"No, I think that is a great idea. Should help me with digging as well. Will do",https://github.com/bitcoin/bitcoin/pull/11410#discussion_r142918699,142918699,src/txmempool.cpp
