laanwj,2012-11-18T11:17:24Z,"I don't understand how this can fix anything. The code should be equivalent. I suspect this is a memory corruption issue, and that by adding a variable you're moving some memory out of the way, probably moving the corruption issue to some place else.\n",https://github.com/bitcoin/bitcoin/pull/2024#issuecomment-10485027,10485027,
laanwj,2012-11-18T11:23:25Z,"~~I think I understand the problem: fDbEnvInit seems to be never initialized to false when CDBEnv is created. It should be initialized to false in the constructor.~~\n\n~~Otherwise, if the CDbEnv is created and destroyed without calling Open, something bad may happen in the destructor.~~\n\nEdit: Hm no the CDBEnv object is created as global static object, so it should be zero-initialized. So that'",https://github.com/bitcoin/bitcoin/pull/2024#issuecomment-10485083,10485083,
laanwj,2012-11-18T11:37:35Z,"Another possibility would be a static destructor order issue. We've had those before with GetDataDir(). In which case this patch can actually solve the problem, by not calling GetDataDir()! But I thought that problem inside GetDataDir() was solved.\n\nACK anyway, this change can never hurt, storing the path inside the object is better encapsulation too. \n\nEdit: But please also add the `fDbEnvIni",https://github.com/bitcoin/bitcoin/pull/2024#issuecomment-10485195,10485195,
Diapolo,2012-11-18T13:05:48Z,"The last time my debugger was working correctly, I saw that inside the Boost .string() code it was crashing. So this patch solves that by preventing the use of Boost filesystem in the destructor.\n",https://github.com/bitcoin/bitcoin/pull/2024#issuecomment-10485949,10485949,
Diapolo,2012-11-18T13:15:28Z,@laanwj Could this be related https://svn.boost.org/trac/boost/ticket/6320?\n\nEdit: Last rebase adds init of the private flags to false.\n\nEdit 2: It seems the crash is coming from path.hpp (Boost filesystem).\n,https://github.com/bitcoin/bitcoin/pull/2024#issuecomment-10486018,10486018,
sipa,2012-11-18T18:53:23Z,"Haven't tested, but I don't expect to see any difference on Linux. ACK\n",https://github.com/bitcoin/bitcoin/pull/2024#issuecomment-10489717,10489717,
luke-jr,2012-11-21T14:06:40Z,"Looked over the implications visually. This actually fixes a bug on all platforms in theory, though in practice has no effect (besides destructor safety) since we only use CDBEnv for the same path. ACK\n",https://github.com/bitcoin/bitcoin/pull/2024#issuecomment-10598026,10598026,
BitcoinPullTester,2012-11-22T09:31:24Z,"Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/be8e1f8479ff46c99f97ac3e396736d36e5458c6 for binaries and test log.\n",https://github.com/bitcoin/bitcoin/pull/2024#issuecomment-10628299,10628299,
