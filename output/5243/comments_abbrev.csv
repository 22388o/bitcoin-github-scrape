sipa,2014-11-08T12:17:52Z,"I wonder what would happen if you start with -reindex but don't actually already have a blockchain locally. Or what if the genesis block entry on disk is broken.\n\nMaybe it makes sense to wait for _either_ the genesis block present, or the importing process to be finished.\n",https://github.com/bitcoin/bitcoin/pull/5243#issuecomment-62255787,62255787,
TheBlueMatt,2014-11-08T18:40:39Z,"If the import process finishes without genesis, then we have skipped the genesis-build and we should actually wipe chainstate or so.\n",https://github.com/bitcoin/bitcoin/pull/5243#issuecomment-62270299,62270299,
laanwj,2014-11-12T16:35:56Z,"Agreed on concept, but this looks fragile. Polling every 10 milliseconds is also suboptimal - if this really needs to happen in a thread I would prefer to use a condition variable.\n\nThough as said in #5078 I'd prefer to split off the part of the import that looks for the Genesis block into a LocateGenesisBlock function. This would look in the first block file, look at the first block, and if it ",https://github.com/bitcoin/bitcoin/pull/5243#issuecomment-62747950,62747950,
sipa,2014-11-14T17:23:04Z,"@TheBlueMatt Agree, I don't think this makes things worse.\n",https://github.com/bitcoin/bitcoin/pull/5243#issuecomment-63098650,63098650,
sipa,2014-11-18T13:52:19Z,"@TheBlueMatt Actually, it does. `-reindex` without any datadir currently works as expected. I believe that the code here will end up in an infinite sleep loop.\n",https://github.com/bitcoin/bitcoin/pull/5243#issuecomment-63473348,63473348,
sipa,2014-11-18T16:21:52Z,"Tested ACK.\n\nI was wrong. Importing ends with a call to InitBlockIndex(), which fixes the no-genesis case in case nothing was imported.\n",https://github.com/bitcoin/bitcoin/pull/5243#issuecomment-63497535,63497535,
TheBlueMatt,2014-12-21T03:13:38Z,"@laanwj I agree, but overcomplicating this stuff for the incredibly rare/strange case of having a corrupt genesis block (especially if it works in that case, even if not well)...probably not worth it. Anyway, I added a log print and a check to fRequestShutdown.\n",https://github.com/bitcoin/bitcoin/pull/5243#issuecomment-67758626,67758626,
laanwj,2015-01-26T11:33:15Z,Backported to 0.10 branch as c5044bc1693ced50ed070a27e7d2f3174202ace5\n,https://github.com/bitcoin/bitcoin/pull/5243#issuecomment-71448062,71448062,
laanwj,2014-12-05T10:17:23Z,"This should check for fRequestShutdown, otherwise the initialization is not interruptible while waiting here (which make take a long time if the genesis block is corrupted).\n",https://github.com/bitcoin/bitcoin/pull/5243#discussion_r21364604,21364604,src/init.cpp
