[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/410215803",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13862#issuecomment-410215803",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13862",
    "id": 410215803,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMDIxNTgwMw==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-03T10:40:47Z",
    "updated_at": "2018-08-25T18:27:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--e57a25ab6845829454e8d69fc972939a-->Note to reviewers: This pull request conflicts with the following ones:\n\n* #13878 (utils: Add fstream wrapper to allow to pass unicode filename on Windows by ken2812221)\n* #13866 (utils: Use _wfopen and _wfreopen on Windows by ken2812221)\n* #13746 (-masterdatadir for datadir bootstrapping by kallewoof)\n* #13743 (refactor: Replace std/boost::bind with lambda by ken2812221)\n* #13159 (Don't close old debug log file handle prematurely when trying to re-open (on SIGHUP) by practicalswift)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/410215803/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/410249864",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13862#issuecomment-410249864",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13862",
    "id": 410249864,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMDI0OTg2NA==",
    "user": {
      "login": "Empact",
      "id": 5470,
      "node_id": "MDQ6VXNlcjU0NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5470?u=a1574ca2038ff1dfaa9a7764c59ea5ff4f305b5d&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Empact",
      "html_url": "https://github.com/Empact",
      "followers_url": "https://api.github.com/users/Empact/followers",
      "following_url": "https://api.github.com/users/Empact/following{/other_user}",
      "gists_url": "https://api.github.com/users/Empact/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Empact/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
      "organizations_url": "https://api.github.com/users/Empact/orgs",
      "repos_url": "https://api.github.com/users/Empact/repos",
      "events_url": "https://api.github.com/users/Empact/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Empact/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-03T13:16:40Z",
    "updated_at": "2018-08-03T13:16:40Z",
    "author_association": "MEMBER",
    "body": "Seems like a good opportunity to drop `boost::interprocess::file_lock` altogether, no?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/410249864/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/410304855",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13862#issuecomment-410304855",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13862",
    "id": 410304855,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMDMwNDg1NQ==",
    "user": {
      "login": "ken2812221",
      "id": 11154118,
      "node_id": "MDQ6VXNlcjExMTU0MTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11154118?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ken2812221",
      "html_url": "https://github.com/ken2812221",
      "followers_url": "https://api.github.com/users/ken2812221/followers",
      "following_url": "https://api.github.com/users/ken2812221/following{/other_user}",
      "gists_url": "https://api.github.com/users/ken2812221/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ken2812221/subscriptions",
      "organizations_url": "https://api.github.com/users/ken2812221/orgs",
      "repos_url": "https://api.github.com/users/ken2812221/repos",
      "events_url": "https://api.github.com/users/ken2812221/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ken2812221/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-03T16:22:19Z",
    "updated_at": "2018-08-03T16:36:25Z",
    "author_association": "CONTRIBUTOR",
    "body": "@Empact  In my opinion, we deal catching exception and try_lock fail much the same when we use boost, so no need to handle the extra exception for now.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/410304855/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/410321834",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13862#issuecomment-410321834",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13862",
    "id": 410321834,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMDMyMTgzNA==",
    "user": {
      "login": "Empact",
      "id": 5470,
      "node_id": "MDQ6VXNlcjU0NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5470?u=a1574ca2038ff1dfaa9a7764c59ea5ff4f305b5d&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Empact",
      "html_url": "https://github.com/Empact",
      "followers_url": "https://api.github.com/users/Empact/followers",
      "following_url": "https://api.github.com/users/Empact/following{/other_user}",
      "gists_url": "https://api.github.com/users/Empact/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Empact/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
      "organizations_url": "https://api.github.com/users/Empact/orgs",
      "repos_url": "https://api.github.com/users/Empact/repos",
      "events_url": "https://api.github.com/users/Empact/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Empact/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-03T17:25:54Z",
    "updated_at": "2018-08-03T17:25:54Z",
    "author_association": "MEMBER",
    "body": "@ken2812221 FYI boost does throw on the failures noted above:\r\n\r\n```C++\r\ninline bool file_lock::try_lock()\r\n{\r\n   bool result;\r\n   if(!ipcdetail::try_acquire_file_lock(m_file_hnd, result)){\r\n      error_info err(system_error_code());\r\n      throw interprocess_exception(err);\r\n   }\r\n   return result;\r\n}\r\n\r\nnamespace boost {\r\nnamespace interprocess {\r\ninline int system_error_code() // artifact of POSIX and WINDOWS error reporting\r\n{\r\n   #if (defined BOOST_INTERPROCESS_WINDOWS)\r\n   return winapi::get_last_error();\r\n   #else\r\n   return errno; // GCC 3.1 won't accept ::errno\r\n   #endif\r\n}\r\n```\r\nhttps://www.boost.org/doc/libs/1_67_0/boost/interprocess/sync/file_lock.hpp\r\nhttps://www.boost.org/doc/libs/1_46_1/boost/interprocess/errors.hpp",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/410321834/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/410324307",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13862#issuecomment-410324307",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13862",
    "id": 410324307,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMDMyNDMwNw==",
    "user": {
      "login": "ken2812221",
      "id": 11154118,
      "node_id": "MDQ6VXNlcjExMTU0MTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11154118?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ken2812221",
      "html_url": "https://github.com/ken2812221",
      "followers_url": "https://api.github.com/users/ken2812221/followers",
      "following_url": "https://api.github.com/users/ken2812221/following{/other_user}",
      "gists_url": "https://api.github.com/users/ken2812221/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ken2812221/subscriptions",
      "organizations_url": "https://api.github.com/users/ken2812221/orgs",
      "repos_url": "https://api.github.com/users/ken2812221/repos",
      "events_url": "https://api.github.com/users/ken2812221/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ken2812221/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-03T17:35:07Z",
    "updated_at": "2018-08-03T17:35:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "@Empact I simply return false in my code at those conditions.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/410324307/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/410326299",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13862#issuecomment-410326299",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13862",
    "id": 410326299,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMDMyNjI5OQ==",
    "user": {
      "login": "Empact",
      "id": 5470,
      "node_id": "MDQ6VXNlcjU0NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5470?u=a1574ca2038ff1dfaa9a7764c59ea5ff4f305b5d&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Empact",
      "html_url": "https://github.com/Empact",
      "followers_url": "https://api.github.com/users/Empact/followers",
      "following_url": "https://api.github.com/users/Empact/following{/other_user}",
      "gists_url": "https://api.github.com/users/Empact/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Empact/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
      "organizations_url": "https://api.github.com/users/Empact/orgs",
      "repos_url": "https://api.github.com/users/Empact/repos",
      "events_url": "https://api.github.com/users/Empact/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Empact/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-03T17:42:34Z",
    "updated_at": "2018-08-03T17:42:34Z",
    "author_association": "MEMBER",
    "body": "Yeah so the net effect is the loss of this message:\r\n`return error(\"Error while attempting to lock directory %s: %s\", directory.string(), e.what());`\r\n\r\nCertainly not a big deal but breadcrumbs can mean the difference between an easy fix and a maddening mystery.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/410326299/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/410339465",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13862#issuecomment-410339465",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13862",
    "id": 410339465,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMDMzOTQ2NQ==",
    "user": {
      "login": "ken2812221",
      "id": 11154118,
      "node_id": "MDQ6VXNlcjExMTU0MTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11154118?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ken2812221",
      "html_url": "https://github.com/ken2812221",
      "followers_url": "https://api.github.com/users/ken2812221/followers",
      "following_url": "https://api.github.com/users/ken2812221/following{/other_user}",
      "gists_url": "https://api.github.com/users/ken2812221/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ken2812221/subscriptions",
      "organizations_url": "https://api.github.com/users/ken2812221/orgs",
      "repos_url": "https://api.github.com/users/ken2812221/repos",
      "events_url": "https://api.github.com/users/ken2812221/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ken2812221/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-03T18:32:14Z",
    "updated_at": "2018-08-03T18:32:14Z",
    "author_association": "CONTRIBUTOR",
    "body": "@Empact Updated to get error messages.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/410339465/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/410527735",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13862#issuecomment-410527735",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13862",
    "id": 410527735,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxMDUyNzczNQ==",
    "user": {
      "login": "ken2812221",
      "id": 11154118,
      "node_id": "MDQ6VXNlcjExMTU0MTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11154118?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ken2812221",
      "html_url": "https://github.com/ken2812221",
      "followers_url": "https://api.github.com/users/ken2812221/followers",
      "following_url": "https://api.github.com/users/ken2812221/following{/other_user}",
      "gists_url": "https://api.github.com/users/ken2812221/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ken2812221/subscriptions",
      "organizations_url": "https://api.github.com/users/ken2812221/orgs",
      "repos_url": "https://api.github.com/users/ken2812221/repos",
      "events_url": "https://api.github.com/users/ken2812221/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ken2812221/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-05T15:30:03Z",
    "updated_at": "2018-08-05T15:30:03Z",
    "author_association": "CONTRIBUTOR",
    "body": "Update: use std codecvt instead of custom converter.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/410527735/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/416211421",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13862#issuecomment-416211421",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13862",
    "id": 416211421,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxNjIxMTQyMQ==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-27T12:33:39Z",
    "updated_at": "2018-08-29T12:17:21Z",
    "author_association": "MEMBER",
    "body": "lightly tested ACK 80119487840db0c3944a89f92772660ee594c4c3\r\n\r\ntested on-\r\n- Linux Ubuntu 18.04 (\u2705)\r\n- OpenBSD 6.3 (\u2705)\r\n- FreeBSD 11.2 (\u2705 )\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/416211421/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/207589776",
    "pull_request_review_id": 143237870,
    "id": 207589776,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNzU4OTc3Ng==",
    "diff_hunk": "@@ -19,6 +21,21 @@ namespace fs = boost::filesystem;\n namespace fsbridge {\n     FILE *fopen(const fs::path& p, const char *mode);\n     FILE *freopen(const fs::path& p, const char *mode, FILE *stream);\n+\n+    class FileLock\n+    {\n+    public:\n+        FileLock(const fs::path& file);",
    "path": "src/fs.h",
    "position": null,
    "original_position": 21,
    "commit_id": "1661a472b8245eb4588fedbf19c9ed07a41e7602",
    "original_commit_id": "3b72520dbf0b45d5ac281f319e4b4e88d7ef39ad",
    "user": {
      "login": "Empact",
      "id": 5470,
      "node_id": "MDQ6VXNlcjU0NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Empact",
      "html_url": "https://github.com/Empact",
      "followers_url": "https://api.github.com/users/Empact/followers",
      "following_url": "https://api.github.com/users/Empact/following{/other_user}",
      "gists_url": "https://api.github.com/users/Empact/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Empact/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
      "organizations_url": "https://api.github.com/users/Empact/orgs",
      "repos_url": "https://api.github.com/users/Empact/repos",
      "events_url": "https://api.github.com/users/Empact/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Empact/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "nit: could delete default and copy constructor",
    "created_at": "2018-08-03T15:52:34Z",
    "updated_at": "2018-08-27T16:55:39Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13862#discussion_r207589776",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13862",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/207589776"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13862#discussion_r207589776"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13862"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/207589776/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 28,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/207591824",
    "pull_request_review_id": 143240445,
    "id": 207591824,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNzU5MTgyNA==",
    "diff_hunk": "@@ -12,4 +18,54 @@ FILE *freopen(const fs::path& p, const char *mode, FILE *stream)\n     return ::freopen(p.string().c_str(), mode, stream);\n }\n \n+#ifndef WIN32\n+\n+FileLock::FileLock(const fs::path& file)\n+{\n+    fd = open(file.string().c_str(), O_RDWR);\n+}\n+\n+FileLock::~FileLock()\n+{\n+    if (fd != -1) {\n+        close(fd);\n+    }\n+}\n+\n+bool FileLock::TryLock()\n+{\n+    if (fd == -1) {\n+        return false;\n+    }\n+    struct flock lock;\n+    lock.l_type = F_WRLCK;\n+    lock.l_whence = SEEK_SET;\n+    lock.l_start = 0;\n+    lock.l_len = 0;\n+    return -1 != fcntl(fd, F_SETLK, &lock);\n+}",
    "path": "src/fs.cpp",
    "position": null,
    "original_position": 41,
    "commit_id": "1661a472b8245eb4588fedbf19c9ed07a41e7602",
    "original_commit_id": "3b72520dbf0b45d5ac281f319e4b4e88d7ef39ad",
    "user": {
      "login": "Empact",
      "id": 5470,
      "node_id": "MDQ6VXNlcjU0NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Empact",
      "html_url": "https://github.com/Empact",
      "followers_url": "https://api.github.com/users/Empact/followers",
      "following_url": "https://api.github.com/users/Empact/following{/other_user}",
      "gists_url": "https://api.github.com/users/Empact/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Empact/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
      "organizations_url": "https://api.github.com/users/Empact/orgs",
      "repos_url": "https://api.github.com/users/Empact/repos",
      "events_url": "https://api.github.com/users/Empact/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Empact/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "The relevant boost implementation, for reference:\r\n```C++\r\ninline bool try_acquire_file_lock(file_handle_t hnd, bool &acquired)\r\n{\r\n   struct ::flock lock;\r\n   lock.l_type    = F_WRLCK;\r\n   lock.l_whence  = SEEK_SET;\r\n   lock.l_start   = 0;\r\n   lock.l_len     = 0;\r\n   int ret = ::fcntl(hnd, F_SETLK, &lock);\r\n   if(ret == -1){\r\n      return (errno == EAGAIN || errno == EACCES) ?\r\n               acquired = false, true : false;\r\n   }\r\n   return (acquired = true);\r\n}\r\n```\r\nhttps://www.boost.org/doc/libs/1_67_0/boost/interprocess/detail/os_file_functions.hpp\r\n\r\nShould we distinguish between hard (e.g. EINVAL) and soft (EAGAIN, EACCES) failures, as they do? We could throw in the former case?\r\nhttps://www.gnu.org/software/libc/manual/html_node/File-Locks.html",
    "created_at": "2018-08-03T15:59:50Z",
    "updated_at": "2018-08-27T16:55:39Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13862#discussion_r207591824",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13862",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/207591824"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13862#discussion_r207591824"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13862"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/207591824/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 58,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/207593056",
    "pull_request_review_id": 143241714,
    "id": 207593056,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNzU5MzA1Ng==",
    "diff_hunk": "@@ -12,4 +18,54 @@ FILE *freopen(const fs::path& p, const char *mode, FILE *stream)\n     return ::freopen(p.string().c_str(), mode, stream);\n }\n \n+#ifndef WIN32\n+\n+FileLock::FileLock(const fs::path& file)\n+{\n+    fd = open(file.string().c_str(), O_RDWR);\n+}\n+\n+FileLock::~FileLock()\n+{\n+    if (fd != -1) {\n+        close(fd);\n+    }\n+}\n+\n+bool FileLock::TryLock()\n+{\n+    if (fd == -1) {\n+        return false;\n+    }\n+    struct flock lock;\n+    lock.l_type = F_WRLCK;\n+    lock.l_whence = SEEK_SET;\n+    lock.l_start = 0;\n+    lock.l_len = 0;\n+    return -1 != fcntl(fd, F_SETLK, &lock);\n+}\n+#else\n+\n+FileLock::FileLock(const fs::path& file)\n+{\n+    hFile = CreateFileW(file.wstring().c_str(), GENERIC_READ | GENERIC_WRITE, 0, nullptr, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, nullptr);\n+}\n+\n+FileLock::~FileLock()\n+{\n+    if (hFile != INVALID_HANDLE_VALUE) {\n+        CloseHandle(hFile);\n+    }\n+}\n+\n+bool FileLock::TryLock()\n+{\n+    if (hFile == INVALID_HANDLE_VALUE) {\n+        return false;\n+    }\n+    _OVERLAPPED overlapped = {0};\n+    return LockFileEx((HANDLE)hFile, LOCKFILE_EXCLUSIVE_LOCK | LOCKFILE_FAIL_IMMEDIATELY, 0, 0, 0, &overlapped);\n+}",
    "path": "src/fs.cpp",
    "position": null,
    "original_position": 63,
    "commit_id": "1661a472b8245eb4588fedbf19c9ed07a41e7602",
    "original_commit_id": "3b72520dbf0b45d5ac281f319e4b4e88d7ef39ad",
    "user": {
      "login": "Empact",
      "id": 5470,
      "node_id": "MDQ6VXNlcjU0NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Empact",
      "html_url": "https://github.com/Empact",
      "followers_url": "https://api.github.com/users/Empact/followers",
      "following_url": "https://api.github.com/users/Empact/following{/other_user}",
      "gists_url": "https://api.github.com/users/Empact/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Empact/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
      "organizations_url": "https://api.github.com/users/Empact/orgs",
      "repos_url": "https://api.github.com/users/Empact/repos",
      "events_url": "https://api.github.com/users/Empact/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Empact/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "The relevant boost implementation, for reference:\r\n```C++\r\ninline bool try_acquire_file_lock(file_handle_t hnd, bool &acquired)\r\n{\r\n   const unsigned long len = ((unsigned long)-1);\r\n   winapi::interprocess_overlapped overlapped;\r\n   std::memset(&overlapped, 0, sizeof(overlapped));\r\n   if(!winapi::lock_file_ex\r\n      (hnd, winapi::lockfile_exclusive_lock | winapi::lockfile_fail_immediately,\r\n       0, len, len, &overlapped)){\r\n      return winapi::get_last_error() == winapi::error_lock_violation ?\r\n               acquired = false, true : false;\r\n\r\n   }\r\n   return (acquired = true);\r\n}\r\n```\r\nhttps://www.boost.org/doc/libs/1_67_0/boost/interprocess/detail/os_file_functions.hpp\r\n\r\nSimilar question re. `GetLastError`?",
    "created_at": "2018-08-03T16:03:30Z",
    "updated_at": "2018-08-27T16:55:39Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13862#discussion_r207593056",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13862",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/207593056"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13862#discussion_r207593056"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13862"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/207593056/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 97,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/207593509",
    "pull_request_review_id": 143242280,
    "id": 207593509,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNzU5MzUwOQ==",
    "diff_hunk": "@@ -12,4 +18,54 @@ FILE *freopen(const fs::path& p, const char *mode, FILE *stream)\n     return ::freopen(p.string().c_str(), mode, stream);\n }\n \n+#ifndef WIN32\n+\n+FileLock::FileLock(const fs::path& file)\n+{\n+    fd = open(file.string().c_str(), O_RDWR);\n+}\n+\n+FileLock::~FileLock()\n+{\n+    if (fd != -1) {\n+        close(fd);\n+    }\n+}\n+\n+bool FileLock::TryLock()\n+{\n+    if (fd == -1) {\n+        return false;\n+    }\n+    struct flock lock;\n+    lock.l_type = F_WRLCK;\n+    lock.l_whence = SEEK_SET;\n+    lock.l_start = 0;\n+    lock.l_len = 0;\n+    return -1 != fcntl(fd, F_SETLK, &lock);\n+}\n+#else\n+\n+FileLock::FileLock(const fs::path& file)\n+{\n+    hFile = CreateFileW(file.wstring().c_str(), GENERIC_READ | GENERIC_WRITE, 0, nullptr, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, nullptr);\n+}\n+\n+FileLock::~FileLock()\n+{\n+    if (hFile != INVALID_HANDLE_VALUE) {\n+        CloseHandle(hFile);\n+    }\n+}\n+\n+bool FileLock::TryLock()\n+{\n+    if (hFile == INVALID_HANDLE_VALUE) {\n+        return false;\n+    }\n+    _OVERLAPPED overlapped = {0};\n+    return LockFileEx((HANDLE)hFile, LOCKFILE_EXCLUSIVE_LOCK | LOCKFILE_FAIL_IMMEDIATELY, 0, 0, 0, &overlapped);\n+}",
    "path": "src/fs.cpp",
    "position": null,
    "original_position": 63,
    "commit_id": "1661a472b8245eb4588fedbf19c9ed07a41e7602",
    "original_commit_id": "3b72520dbf0b45d5ac281f319e4b4e88d7ef39ad",
    "user": {
      "login": "Empact",
      "id": 5470,
      "node_id": "MDQ6VXNlcjU0NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Empact",
      "html_url": "https://github.com/Empact",
      "followers_url": "https://api.github.com/users/Empact/followers",
      "following_url": "https://api.github.com/users/Empact/following{/other_user}",
      "gists_url": "https://api.github.com/users/Empact/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Empact/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
      "organizations_url": "https://api.github.com/users/Empact/orgs",
      "repos_url": "https://api.github.com/users/Empact/repos",
      "events_url": "https://api.github.com/users/Empact/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Empact/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Also is the `(HANDLE)` cast necessary?",
    "created_at": "2018-08-03T16:05:15Z",
    "updated_at": "2018-08-27T16:55:39Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13862#discussion_r207593509",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13862",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/207593509"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13862#discussion_r207593509"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13862"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/207593509/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 97,
    "side": "RIGHT",
    "in_reply_to_id": 207593056
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/207597096",
    "pull_request_review_id": 143246791,
    "id": 207597096,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNzU5NzA5Ng==",
    "diff_hunk": "@@ -12,4 +18,54 @@ FILE *freopen(const fs::path& p, const char *mode, FILE *stream)\n     return ::freopen(p.string().c_str(), mode, stream);\n }\n \n+#ifndef WIN32\n+\n+FileLock::FileLock(const fs::path& file)\n+{\n+    fd = open(file.string().c_str(), O_RDWR);\n+}\n+\n+FileLock::~FileLock()\n+{\n+    if (fd != -1) {\n+        close(fd);\n+    }\n+}\n+\n+bool FileLock::TryLock()\n+{\n+    if (fd == -1) {\n+        return false;\n+    }\n+    struct flock lock;\n+    lock.l_type = F_WRLCK;\n+    lock.l_whence = SEEK_SET;\n+    lock.l_start = 0;\n+    lock.l_len = 0;\n+    return -1 != fcntl(fd, F_SETLK, &lock);\n+}\n+#else\n+\n+FileLock::FileLock(const fs::path& file)\n+{\n+    hFile = CreateFileW(file.wstring().c_str(), GENERIC_READ | GENERIC_WRITE, 0, nullptr, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, nullptr);\n+}\n+\n+FileLock::~FileLock()\n+{\n+    if (hFile != INVALID_HANDLE_VALUE) {\n+        CloseHandle(hFile);\n+    }\n+}\n+\n+bool FileLock::TryLock()\n+{\n+    if (hFile == INVALID_HANDLE_VALUE) {\n+        return false;\n+    }\n+    _OVERLAPPED overlapped = {0};\n+    return LockFileEx((HANDLE)hFile, LOCKFILE_EXCLUSIVE_LOCK | LOCKFILE_FAIL_IMMEDIATELY, 0, 0, 0, &overlapped);\n+}",
    "path": "src/fs.cpp",
    "position": null,
    "original_position": 63,
    "commit_id": "1661a472b8245eb4588fedbf19c9ed07a41e7602",
    "original_commit_id": "3b72520dbf0b45d5ac281f319e4b4e88d7ef39ad",
    "user": {
      "login": "ken2812221",
      "id": 11154118,
      "node_id": "MDQ6VXNlcjExMTU0MTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11154118?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ken2812221",
      "html_url": "https://github.com/ken2812221",
      "followers_url": "https://api.github.com/users/ken2812221/followers",
      "following_url": "https://api.github.com/users/ken2812221/following{/other_user}",
      "gists_url": "https://api.github.com/users/ken2812221/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ken2812221/subscriptions",
      "organizations_url": "https://api.github.com/users/ken2812221/orgs",
      "repos_url": "https://api.github.com/users/ken2812221/repos",
      "events_url": "https://api.github.com/users/ken2812221/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ken2812221/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Fixed",
    "created_at": "2018-08-03T16:18:50Z",
    "updated_at": "2018-08-27T16:55:39Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13862#discussion_r207597096",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13862",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/207597096"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13862#discussion_r207597096"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13862"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/207597096/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 97,
    "side": "RIGHT",
    "in_reply_to_id": 207593056
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/207601154",
    "pull_request_review_id": 143251900,
    "id": 207601154,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNzYwMTE1NA==",
    "diff_hunk": "@@ -19,6 +21,21 @@ namespace fs = boost::filesystem;\n namespace fsbridge {\n     FILE *fopen(const fs::path& p, const char *mode);\n     FILE *freopen(const fs::path& p, const char *mode, FILE *stream);\n+\n+    class FileLock\n+    {\n+    public:\n+        FileLock(const fs::path& file);",
    "path": "src/fs.h",
    "position": null,
    "original_position": 21,
    "commit_id": "1661a472b8245eb4588fedbf19c9ed07a41e7602",
    "original_commit_id": "3b72520dbf0b45d5ac281f319e4b4e88d7ef39ad",
    "user": {
      "login": "ken2812221",
      "id": 11154118,
      "node_id": "MDQ6VXNlcjExMTU0MTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11154118?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ken2812221",
      "html_url": "https://github.com/ken2812221",
      "followers_url": "https://api.github.com/users/ken2812221/followers",
      "following_url": "https://api.github.com/users/ken2812221/following{/other_user}",
      "gists_url": "https://api.github.com/users/ken2812221/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ken2812221/subscriptions",
      "organizations_url": "https://api.github.com/users/ken2812221/orgs",
      "repos_url": "https://api.github.com/users/ken2812221/repos",
      "events_url": "https://api.github.com/users/ken2812221/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ken2812221/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Fixed",
    "created_at": "2018-08-03T16:35:07Z",
    "updated_at": "2018-08-27T16:55:39Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13862#discussion_r207601154",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13862",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/207601154"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13862#discussion_r207601154"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13862"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/207601154/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 28,
    "side": "RIGHT",
    "in_reply_to_id": 207589776
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/207672720",
    "pull_request_review_id": 143341148,
    "id": 207672720,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNzY3MjcyMA==",
    "diff_hunk": "@@ -12,4 +18,54 @@ FILE *freopen(const fs::path& p, const char *mode, FILE *stream)\n     return ::freopen(p.string().c_str(), mode, stream);\n }\n \n+#ifndef WIN32\n+\n+FileLock::FileLock(const fs::path& file)\n+{\n+    fd = open(file.string().c_str(), O_RDWR);\n+}\n+\n+FileLock::~FileLock()\n+{\n+    if (fd != -1) {\n+        close(fd);\n+    }\n+}\n+\n+bool FileLock::TryLock()\n+{\n+    if (fd == -1) {\n+        return false;\n+    }\n+    struct flock lock;\n+    lock.l_type = F_WRLCK;\n+    lock.l_whence = SEEK_SET;\n+    lock.l_start = 0;\n+    lock.l_len = 0;\n+    return -1 != fcntl(fd, F_SETLK, &lock);\n+}\n+#else\n+\n+FileLock::FileLock(const fs::path& file)\n+{\n+    hFile = CreateFileW(file.wstring().c_str(), GENERIC_READ | GENERIC_WRITE, 0, nullptr, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, nullptr);\n+}\n+\n+FileLock::~FileLock()\n+{\n+    if (hFile != INVALID_HANDLE_VALUE) {\n+        CloseHandle(hFile);\n+    }\n+}\n+\n+bool FileLock::TryLock()\n+{\n+    if (hFile == INVALID_HANDLE_VALUE) {\n+        return false;\n+    }\n+    _OVERLAPPED overlapped = {0};\n+    return LockFileEx(hFile, LOCKFILE_EXCLUSIVE_LOCK | LOCKFILE_FAIL_IMMEDIATELY, 0, 0, 0, &overlapped);",
    "path": "src/fs.cpp",
    "position": null,
    "original_position": 62,
    "commit_id": "1661a472b8245eb4588fedbf19c9ed07a41e7602",
    "original_commit_id": "574c4b721636fc6861c31dab60404acdfa3f2b04",
    "user": {
      "login": "donaloconnor",
      "id": 6394033,
      "node_id": "MDQ6VXNlcjYzOTQwMzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6394033?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/donaloconnor",
      "html_url": "https://github.com/donaloconnor",
      "followers_url": "https://api.github.com/users/donaloconnor/followers",
      "following_url": "https://api.github.com/users/donaloconnor/following{/other_user}",
      "gists_url": "https://api.github.com/users/donaloconnor/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/donaloconnor/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/donaloconnor/subscriptions",
      "organizations_url": "https://api.github.com/users/donaloconnor/orgs",
      "repos_url": "https://api.github.com/users/donaloconnor/repos",
      "events_url": "https://api.github.com/users/donaloconnor/events{/privacy}",
      "received_events_url": "https://api.github.com/users/donaloconnor/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "The CreateFileW with 0 sharing effectively opens the file as exclusive (locking it). It feels the TryLock() here is redundant because we don't require locking of specific bytes.\r\n\r\nPerhaps the TryLock() should be the one doing the CreateFileW.\r\nApologies if I've misunderstood something here :-)",
    "created_at": "2018-08-03T21:30:54Z",
    "updated_at": "2018-08-27T16:55:39Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13862#discussion_r207672720",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13862",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/207672720"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13862#discussion_r207672720"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13862"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/207672720/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 67,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/207686115",
    "pull_request_review_id": 143357264,
    "id": 207686115,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNzY4NjExNQ==",
    "diff_hunk": "@@ -12,4 +18,54 @@ FILE *freopen(const fs::path& p, const char *mode, FILE *stream)\n     return ::freopen(p.string().c_str(), mode, stream);\n }\n \n+#ifndef WIN32\n+\n+FileLock::FileLock(const fs::path& file)\n+{\n+    fd = open(file.string().c_str(), O_RDWR);\n+}\n+\n+FileLock::~FileLock()\n+{\n+    if (fd != -1) {\n+        close(fd);\n+    }\n+}\n+\n+bool FileLock::TryLock()\n+{\n+    if (fd == -1) {\n+        return false;\n+    }\n+    struct flock lock;\n+    lock.l_type = F_WRLCK;\n+    lock.l_whence = SEEK_SET;\n+    lock.l_start = 0;\n+    lock.l_len = 0;\n+    return -1 != fcntl(fd, F_SETLK, &lock);\n+}\n+#else\n+\n+FileLock::FileLock(const fs::path& file)\n+{\n+    hFile = CreateFileW(file.wstring().c_str(), GENERIC_READ | GENERIC_WRITE, 0, nullptr, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, nullptr);\n+}\n+\n+FileLock::~FileLock()\n+{\n+    if (hFile != INVALID_HANDLE_VALUE) {\n+        CloseHandle(hFile);\n+    }\n+}\n+\n+bool FileLock::TryLock()\n+{\n+    if (hFile == INVALID_HANDLE_VALUE) {\n+        return false;\n+    }\n+    _OVERLAPPED overlapped = {0};\n+    return LockFileEx(hFile, LOCKFILE_EXCLUSIVE_LOCK | LOCKFILE_FAIL_IMMEDIATELY, 0, 0, 0, &overlapped);",
    "path": "src/fs.cpp",
    "position": null,
    "original_position": 62,
    "commit_id": "1661a472b8245eb4588fedbf19c9ed07a41e7602",
    "original_commit_id": "574c4b721636fc6861c31dab60404acdfa3f2b04",
    "user": {
      "login": "ken2812221",
      "id": 11154118,
      "node_id": "MDQ6VXNlcjExMTU0MTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11154118?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ken2812221",
      "html_url": "https://github.com/ken2812221",
      "followers_url": "https://api.github.com/users/ken2812221/followers",
      "following_url": "https://api.github.com/users/ken2812221/following{/other_user}",
      "gists_url": "https://api.github.com/users/ken2812221/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ken2812221/subscriptions",
      "organizations_url": "https://api.github.com/users/ken2812221/orgs",
      "repos_url": "https://api.github.com/users/ken2812221/repos",
      "events_url": "https://api.github.com/users/ken2812221/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ken2812221/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Fixed",
    "created_at": "2018-08-03T23:03:36Z",
    "updated_at": "2018-08-27T16:55:40Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13862#discussion_r207686115",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13862",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/207686115"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13862#discussion_r207686115"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13862"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/207686115/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 67,
    "side": "RIGHT",
    "in_reply_to_id": 207672720
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/207711453",
    "pull_request_review_id": 143385683,
    "id": 207711453,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNzcxMTQ1Mw==",
    "diff_hunk": "@@ -12,4 +21,82 @@ FILE *freopen(const fs::path& p, const char *mode, FILE *stream)\n     return ::freopen(p.string().c_str(), mode, stream);\n }\n \n+#ifndef WIN32\n+\n+std::string GetErrorReason() {",
    "path": "src/fs.cpp",
    "position": null,
    "original_position": 20,
    "commit_id": "1661a472b8245eb4588fedbf19c9ed07a41e7602",
    "original_commit_id": "3b8ced6a4dca93015054688d862a9fd9fb2bf2f0",
    "user": {
      "login": "Empact",
      "id": 5470,
      "node_id": "MDQ6VXNlcjU0NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Empact",
      "html_url": "https://github.com/Empact",
      "followers_url": "https://api.github.com/users/Empact/followers",
      "following_url": "https://api.github.com/users/Empact/following{/other_user}",
      "gists_url": "https://api.github.com/users/Empact/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Empact/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
      "organizations_url": "https://api.github.com/users/Empact/orgs",
      "repos_url": "https://api.github.com/users/Empact/repos",
      "events_url": "https://api.github.com/users/Empact/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Empact/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "nit: `static`",
    "created_at": "2018-08-04T15:28:52Z",
    "updated_at": "2018-08-27T16:55:40Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13862#discussion_r207711453",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13862",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/207711453"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13862#discussion_r207711453"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13862"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/207711453/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 24,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/207711458",
    "pull_request_review_id": 143385692,
    "id": 207711458,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNzcxMTQ1OA==",
    "diff_hunk": "@@ -12,4 +21,82 @@ FILE *freopen(const fs::path& p, const char *mode, FILE *stream)\n     return ::freopen(p.string().c_str(), mode, stream);\n }\n \n+#ifndef WIN32\n+\n+std::string GetErrorReason() {\n+    return std::strerror(errno);\n+}\n+\n+FileLock::FileLock(const fs::path& file)\n+{\n+    fd = open(file.string().c_str(), O_RDWR);\n+    if (fd == -1) {\n+        reason = GetErrorReason();\n+    }\n+}\n+\n+FileLock::~FileLock()\n+{\n+    if (fd != -1) {\n+        close(fd);\n+    }\n+}\n+\n+bool FileLock::TryLock()\n+{\n+    if (fd == -1) {\n+        return false;\n+    }\n+    struct flock lock;\n+    lock.l_type = F_WRLCK;\n+    lock.l_whence = SEEK_SET;\n+    lock.l_start = 0;\n+    lock.l_len = 0;\n+    if (-1 == fcntl(fd, F_SETLK, &lock)) {\n+        reason = GetErrorReason();\n+        return false;\n+    }\n+    return true;\n+}\n+#else\n+\n+std::string GetErrorReason() {",
    "path": "src/fs.cpp",
    "position": null,
    "original_position": 57,
    "commit_id": "1661a472b8245eb4588fedbf19c9ed07a41e7602",
    "original_commit_id": "3b8ced6a4dca93015054688d862a9fd9fb2bf2f0",
    "user": {
      "login": "Empact",
      "id": 5470,
      "node_id": "MDQ6VXNlcjU0NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Empact",
      "html_url": "https://github.com/Empact",
      "followers_url": "https://api.github.com/users/Empact/followers",
      "following_url": "https://api.github.com/users/Empact/following{/other_user}",
      "gists_url": "https://api.github.com/users/Empact/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Empact/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
      "organizations_url": "https://api.github.com/users/Empact/orgs",
      "repos_url": "https://api.github.com/users/Empact/repos",
      "events_url": "https://api.github.com/users/Empact/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Empact/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "nit: `static`",
    "created_at": "2018-08-04T15:29:03Z",
    "updated_at": "2018-08-27T16:55:40Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13862#discussion_r207711458",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13862",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/207711458"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13862#discussion_r207711458"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13862"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/207711458/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 61,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/207711930",
    "pull_request_review_id": 143386243,
    "id": 207711930,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNzcxMTkzMA==",
    "diff_hunk": "@@ -158,18 +157,13 @@ bool LockDirectory(const fs::path& directory, const std::string lockfile_name, b\n     // Create empty lock file if it doesn't exist.\n     FILE* file = fsbridge::fopen(pathLockFile, \"a\");\n     if (file) fclose(file);\n-\n-    try {\n-        auto lock = MakeUnique<boost::interprocess::file_lock>(pathLockFile.string().c_str());\n-        if (!lock->try_lock()) {\n-            return false;\n-        }\n-        if (!probe_only) {\n-            // Lock successful and we're not just probing, put it into the map\n-            dir_locks.emplace(pathLockFile.string(), std::move(lock));\n-        }\n-    } catch (const boost::interprocess::interprocess_exception& e) {\n-        return error(\"Error while attempting to lock directory %s: %s\", directory.string(), e.what());\n+    auto lock = MakeUnique<fsbridge::FileLock>(pathLockFile);\n+    if (!lock->TryLock()) {\n+        return error(\"Error while attempting to lock directory %s: %s\", directory.string(), lock->GetReason());",
    "path": "src/util.cpp",
    "position": 35,
    "original_position": 35,
    "commit_id": "1661a472b8245eb4588fedbf19c9ed07a41e7602",
    "original_commit_id": "3b8ced6a4dca93015054688d862a9fd9fb2bf2f0",
    "user": {
      "login": "Empact",
      "id": 5470,
      "node_id": "MDQ6VXNlcjU0NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Empact",
      "html_url": "https://github.com/Empact",
      "followers_url": "https://api.github.com/users/Empact/followers",
      "following_url": "https://api.github.com/users/Empact/following{/other_user}",
      "gists_url": "https://api.github.com/users/Empact/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Empact/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
      "organizations_url": "https://api.github.com/users/Empact/orgs",
      "repos_url": "https://api.github.com/users/Empact/repos",
      "events_url": "https://api.github.com/users/Empact/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Empact/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "For reference, how these are logged by the callers:\r\nhttps://github.com/bitcoin/bitcoin/blob/2b67354aa584c4aabae049a67767ac7b70e2d01a/src/init.cpp#L1183-L1185\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/2b67354aa584c4aabae049a67767ac7b70e2d01a/src/wallet/db.cpp#L136-L139\r\n",
    "created_at": "2018-08-04T15:44:45Z",
    "updated_at": "2018-08-27T16:55:40Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13862#discussion_r207711930",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13862",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/207711930"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13862#discussion_r207711930"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13862"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/207711930/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 160,
    "original_line": 160,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/212958280",
    "pull_request_review_id": 149691313,
    "id": 212958280,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxMjk1ODI4MA==",
    "diff_hunk": "@@ -12,4 +19,82 @@ FILE *freopen(const fs::path& p, const char *mode, FILE *stream)\n     return ::freopen(p.string().c_str(), mode, stream);\n }\n \n+#ifndef WIN32\n+\n+static std::string GetErrorReason() {\n+    return std::strerror(errno);\n+}\n+\n+FileLock::FileLock(const fs::path& file)\n+{\n+    fd = open(file.string().c_str(), O_RDWR);\n+    if (fd == -1) {\n+        reason = GetErrorReason();\n+    }\n+}\n+\n+FileLock::~FileLock()\n+{\n+    if (fd != -1) {\n+        close(fd);\n+    }\n+}\n+\n+bool FileLock::TryLock()\n+{\n+    if (fd == -1) {\n+        return false;\n+    }\n+    struct flock lock;\n+    lock.l_type = F_WRLCK;\n+    lock.l_whence = SEEK_SET;\n+    lock.l_start = 0;\n+    lock.l_len = 0;\n+    if (-1 == fcntl(fd, F_SETLK, &lock)) {",
    "path": "src/fs.cpp",
    "position": null,
    "original_position": 48,
    "commit_id": "1661a472b8245eb4588fedbf19c9ed07a41e7602",
    "original_commit_id": "80119487840db0c3944a89f92772660ee594c4c3",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "would prefer simply `fcntl(fd, F_SETLK, &lock) == -1` (more consistent with the other if statements in the code)",
    "created_at": "2018-08-27T12:35:27Z",
    "updated_at": "2018-08-27T16:55:40Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13862#discussion_r212958280",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13862",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/212958280"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13862#discussion_r212958280"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13862"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/212958280/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 53,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/213042311",
    "pull_request_review_id": 149794033,
    "id": 213042311,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxMzA0MjMxMQ==",
    "diff_hunk": "@@ -12,4 +19,82 @@ FILE *freopen(const fs::path& p, const char *mode, FILE *stream)\n     return ::freopen(p.string().c_str(), mode, stream);\n }\n \n+#ifndef WIN32\n+\n+static std::string GetErrorReason() {\n+    return std::strerror(errno);\n+}\n+\n+FileLock::FileLock(const fs::path& file)\n+{\n+    fd = open(file.string().c_str(), O_RDWR);\n+    if (fd == -1) {\n+        reason = GetErrorReason();\n+    }\n+}\n+\n+FileLock::~FileLock()\n+{\n+    if (fd != -1) {\n+        close(fd);\n+    }\n+}\n+\n+bool FileLock::TryLock()\n+{\n+    if (fd == -1) {\n+        return false;\n+    }\n+    struct flock lock;\n+    lock.l_type = F_WRLCK;\n+    lock.l_whence = SEEK_SET;\n+    lock.l_start = 0;\n+    lock.l_len = 0;\n+    if (-1 == fcntl(fd, F_SETLK, &lock)) {",
    "path": "src/fs.cpp",
    "position": null,
    "original_position": 48,
    "commit_id": "1661a472b8245eb4588fedbf19c9ed07a41e7602",
    "original_commit_id": "80119487840db0c3944a89f92772660ee594c4c3",
    "user": {
      "login": "ken2812221",
      "id": 11154118,
      "node_id": "MDQ6VXNlcjExMTU0MTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11154118?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ken2812221",
      "html_url": "https://github.com/ken2812221",
      "followers_url": "https://api.github.com/users/ken2812221/followers",
      "following_url": "https://api.github.com/users/ken2812221/following{/other_user}",
      "gists_url": "https://api.github.com/users/ken2812221/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ken2812221/subscriptions",
      "organizations_url": "https://api.github.com/users/ken2812221/orgs",
      "repos_url": "https://api.github.com/users/ken2812221/repos",
      "events_url": "https://api.github.com/users/ken2812221/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ken2812221/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "fixed",
    "created_at": "2018-08-27T16:56:07Z",
    "updated_at": "2018-08-27T16:56:07Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13862#discussion_r213042311",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13862",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/213042311"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13862#discussion_r213042311"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13862"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/213042311/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 53,
    "side": "RIGHT",
    "in_reply_to_id": 212958280
  }
]