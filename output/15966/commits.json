[
  {
    "sha": "9596534a0ad963e43f2c917e0fb9e012ad721a36",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo5NTk2NTM0YTBhZDk2M2U0M2YyYzkxN2UwZmI5ZTAxMmFkNzIxYTM2",
    "commit": {
      "author": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2019-05-06T19:17:31Z"
      },
      "committer": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2019-05-06T21:30:43Z"
      },
      "message": "Drop ancient miniUPnPc API version support",
      "tree": {
        "sha": "66a6f2bf829c30e70525f59ba0185c08fd6b2886",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/66a6f2bf829c30e70525f59ba0185c08fd6b2886"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9596534a0ad963e43f2c917e0fb9e012ad721a36",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE0dvyxLlvLev0wWZUQQEIES5+qB8FAlzQp4UACgkQQQEIES5+\nqB8xrA/8D7kweCOnPQTqwoUPsSRCyZm0OpoUGIh9XvRO21k3M0bmAyPf5M+O8vdR\nHarABMCRwQrsDBY31bWEUgKowVs+kBj/Dok2j5biQigHQwLJLipBVgNhSxYAHHPV\nQpyLQv914eM+qLoR3NQiDoub5MZ0B8NsUMjo3EkaAfxvI65YwrrAoPfDAuj2IfAE\njg6Zv3pn/jTkuYXtu551AooDFL5sU7CM97/tHES8O9/qdO9j8xRByOcOtqD5g21e\n+CQw1l6OvAzDdsbQ4LvUO8l5NoRrULj8NbM2JLc+xbg/noMgHVDetgidbrujjOts\nWJV0PPluu/qBtGGbv1bPnF8mtuD20v02MuZZqMNU6qfSVsR7o4AuUSurS/oTxeBC\nUjcjoHXm75++mKZ0q5YA6KXU5K1Nj8IzIjzywLQE36YdLm3L+A5rs0DQvsXAkGaV\nQGPErv2TGhJMN4Xh9+j29EulxsFg/XISihs8f9x2SgJAXxm//Sz3WtORtwzrE8t3\nTFh0C/MmOFIVKLhen5gXM34+lZeZ3/4p8dKPWMzQMQWnD2tol1ZQGSrhOwo7KeHl\n9zV0voPFaF1WUEHCvWTutlELj7MbYJZcMnlTf9votcLcjJ6xG0awGXOAKXa0i8fJ\nne/bpvFNG3sFtnp8IasAQz0HfxK+na+92ACZuPMMZmZ3nWmZqlY=\n=kM18\n-----END PGP SIGNATURE-----",
        "payload": "tree 66a6f2bf829c30e70525f59ba0185c08fd6b2886\nparent 8ec7121a45903eea262e7a3a120db1a937ca3b66\nauthor Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1557170251 +0300\ncommitter Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1557178243 +0300\n\nDrop ancient miniUPnPc API version support\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9596534a0ad963e43f2c917e0fb9e012ad721a36",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/9596534a0ad963e43f2c917e0fb9e012ad721a36",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9596534a0ad963e43f2c917e0fb9e012ad721a36/comments",
    "author": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "8ec7121a45903eea262e7a3a120db1a937ca3b66",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8ec7121a45903eea262e7a3a120db1a937ca3b66",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/8ec7121a45903eea262e7a3a120db1a937ca3b66"
      }
    ],
    "stats": {
      "total": 16,
      "additions": 2,
      "deletions": 14
    },
    "files": [
      {
        "sha": "b43d603fa465ee2002bbbfc68f1d8701e0017af3",
        "filename": "src/net.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 14,
        "changes": 16,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/9596534a0ad963e43f2c917e0fb9e012ad721a36/src/net.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/9596534a0ad963e43f2c917e0fb9e012ad721a36/src/net.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/net.cpp?ref=9596534a0ad963e43f2c917e0fb9e012ad721a36",
        "patch": "@@ -36,6 +36,7 @@\n #include <miniupnpc/miniwget.h>\n #include <miniupnpc/upnpcommands.h>\n #include <miniupnpc/upnperrors.h>\n+static_assert(MINIUPNPC_API_VERSION >= 8, \"miniUPnPc API version >= 8 assumed\");\n #endif\n \n #include <unordered_map>\n@@ -1403,16 +1404,10 @@ static void ThreadMapPort()\n     struct UPNPDev * devlist = nullptr;\n     char lanaddr[64];\n \n-#ifndef UPNPDISCOVER_SUCCESS\n-    /* miniupnpc 1.5 */\n-    devlist = upnpDiscover(2000, multicastif, minissdpdpath, 0);\n-#elif MINIUPNPC_API_VERSION < 14\n-    /* miniupnpc 1.6 */\n     int error = 0;\n+#if MINIUPNPC_API_VERSION < 14\n     devlist = upnpDiscover(2000, multicastif, minissdpdpath, 0, 0, &error);\n #else\n-    /* miniupnpc 1.9.20150730 */\n-    int error = 0;\n     devlist = upnpDiscover(2000, multicastif, minissdpdpath, 0, 0, 2, &error);\n #endif\n \n@@ -1446,15 +1441,8 @@ static void ThreadMapPort()\n         std::string strDesc = \"Bitcoin \" + FormatFullVersion();\n \n         do {\n-#ifndef UPNPDISCOVER_SUCCESS\n-            /* miniupnpc 1.5 */\n-            r = UPNP_AddPortMapping(urls.controlURL, data.first.servicetype,\n-                                port.c_str(), port.c_str(), lanaddr, strDesc.c_str(), \"TCP\", 0);\n-#else\n-            /* miniupnpc 1.6 */\n             r = UPNP_AddPortMapping(urls.controlURL, data.first.servicetype,\n                                 port.c_str(), port.c_str(), lanaddr, strDesc.c_str(), \"TCP\", 0, \"0\");\n-#endif\n \n             if(r!=UPNPCOMMAND_SUCCESS)\n                 LogPrintf(\"AddPortMapping(%s, %s, %s) failed with code %d (%s)\\n\","
      }
    ]
  },
  {
    "sha": "8a373775ceb9d0b16267b516948b5b69d0f3119f",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo4YTM3Mzc3NWNlYjlkMGIxNjI2N2I1MTY5NDhiNWI2OWQwZjMxMTlm",
    "commit": {
      "author": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2019-05-06T19:58:10Z"
      },
      "committer": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2019-05-06T21:30:48Z"
      },
      "message": "Use PACKAGE_NAME in UPnP description",
      "tree": {
        "sha": "db8db28ff5c6c4b850d5f927f6ea2e26d26fcf49",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/db8db28ff5c6c4b850d5f927f6ea2e26d26fcf49"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8a373775ceb9d0b16267b516948b5b69d0f3119f",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE0dvyxLlvLev0wWZUQQEIES5+qB8FAlzQp4gACgkQQQEIES5+\nqB+e0Q/+Pl/VqIX+vUaA3+Ej82DeQvCsWg/iEKBDeQFg+sSjS6E4PwRAAKAAAkRs\n9rbtGuYSngDIexjbXY3pEZBRl+f/LpJupyeEXTYjLJQ1TySY5tjC3ZvdFupHn+zw\n0+zW99RM+RMUbz02JnUedRDcTIaYBey4wY5Mn0iGd7t9OYBRa/Uf+qH+JUT5Cj6P\np72HOSs9aFpnUq5Rg4uvkbN4leWZfQkTVpNKJwlgrDj5kWT/o5atUAhSA4m0BIft\na3wfI29L5sLD5IUW3QCS3ohyiVDlQe35I81VIoRCRJzKWiUniRkbAAH0USRND+5V\n+EQaRWK/huehVaL5SCTmeA3jZfoBabTIJEoF4YtcBWmVvZBHn0JyqtCB4A/kE4dK\n+TaQ7vx5Li5b80LbUgsfy3aMLBjVUbbeYfP3A09gNV+M8wYdiAPMM51739RV6VL5\nSZoiyC6knAUQcYLCRkzdcT/gsR9qm/ey9a6e3VsLdkf00jjX426TXbIreM3BULoG\ntVHHddbFPw3rb1jI0bTPpcnFa1Rsm1qBkQL/vTfgP6Q7HTCesnOkjDiPbnsT8uon\nz/H7ZED6tMNgS8TUh0KjveS7cLMTeW0AOgNrcZsIq1o1UGTLQjHtkUZXqR7MLtYT\ngZZW+tnbXxvxRgW8n2xBzD9A2cuhLFks7s+bD2a7DM15kiDcujk=\n=cSPd\n-----END PGP SIGNATURE-----",
        "payload": "tree db8db28ff5c6c4b850d5f927f6ea2e26d26fcf49\nparent 9596534a0ad963e43f2c917e0fb9e012ad721a36\nauthor Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1557172690 +0300\ncommitter Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1557178248 +0300\n\nUse PACKAGE_NAME in UPnP description\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8a373775ceb9d0b16267b516948b5b69d0f3119f",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/8a373775ceb9d0b16267b516948b5b69d0f3119f",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8a373775ceb9d0b16267b516948b5b69d0f3119f/comments",
    "author": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "9596534a0ad963e43f2c917e0fb9e012ad721a36",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9596534a0ad963e43f2c917e0fb9e012ad721a36",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/9596534a0ad963e43f2c917e0fb9e012ad721a36"
      }
    ],
    "stats": {
      "total": 2,
      "additions": 1,
      "deletions": 1
    },
    "files": [
      {
        "sha": "8cbf1da6fceb32a99550f9d2d80f8da301dc6d16",
        "filename": "src/net.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8a373775ceb9d0b16267b516948b5b69d0f3119f/src/net.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8a373775ceb9d0b16267b516948b5b69d0f3119f/src/net.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/net.cpp?ref=8a373775ceb9d0b16267b516948b5b69d0f3119f",
        "patch": "@@ -1438,7 +1438,7 @@ static void ThreadMapPort()\n             }\n         }\n \n-        std::string strDesc = \"Bitcoin \" + FormatFullVersion();\n+        std::string strDesc = PACKAGE_NAME \" \" + FormatFullVersion();\n \n         do {\n             r = UPNP_AddPortMapping(urls.controlURL, data.first.servicetype,"
      }
    ]
  },
  {
    "sha": "da9cd991a4c0779dbea31b70e3ac629af03f3adb",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkYTljZDk5MWE0YzA3NzlkYmVhMzFiNzBlM2FjNjI5YWYwM2YzYWRi",
    "commit": {
      "author": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2019-05-06T20:17:51Z"
      },
      "committer": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2019-05-06T21:30:48Z"
      },
      "message": "Align formatting with clang-format",
      "tree": {
        "sha": "881a27fc9a7fed98305af2b484bdba055e4ac7da",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/881a27fc9a7fed98305af2b484bdba055e4ac7da"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/da9cd991a4c0779dbea31b70e3ac629af03f3adb",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE0dvyxLlvLev0wWZUQQEIES5+qB8FAlzQp4gACgkQQQEIES5+\nqB8bXw/+Kr0ajSQjr4/d71/v7Yh1AwfqKNB6yeH2mRsAHpWepoxICrGtt59aWsy1\nYM9RdIyqRm95DcufYZTEx2oX/rbOlw1laW1iGWsGhFRt9tl4zdfkIAVAox2Igl/N\nrzxgw3ziyNKWNqh0eK4mNhHfHnegOZkF15yI6uDEDZiDQXHdCJ2tPIsz4QB6mTcG\nZNd6qYbQnA561AkIOiFjnbYxOSXuTIcOUANkGtoLdsMYzXgzVqCTNI8yhh3kUNtm\nku5Sf6JVKN9YEckfX5c0UTYEsZAX40d9LYl728XgjTcbQjQ4XQPuMD4npvOBb8px\nCoVQ3MWX/8rxBFu2VS4zfCJyScnZDPHrxjJuqyZf2YgAvn79jabxeJcpwoKpOWyQ\nKYUa4sNbKnO4LX9lqQaFACTMGqlhNfPlqqZIz+heWqPpnt0bEXa8tt8MCibG5Qac\nrwSaZyfcp586NX/T7FE1P1gdA+WaEH8ZebHyuN1Z2ATww/dR6t+W+4E/jOOMb84H\n4YmtArLhWKIxReagyiXNcC8wRnNCL8TTg539Cj30ELsq2GAahbogyBQqH734gl5A\nZCMcE2GVCTPvM7CEfg3OuHYZfqHAwbAld3TGWC7ZLo860rcQAh+AvP4u6oiqppQe\nqPGugq9698YOx5gRJZIKC6BaUqsQzyxlFJQpi8nNRjVeHGCV6Jk=\n=Nwo6\n-----END PGP SIGNATURE-----",
        "payload": "tree 881a27fc9a7fed98305af2b484bdba055e4ac7da\nparent 8a373775ceb9d0b16267b516948b5b69d0f3119f\nauthor Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1557173871 +0300\ncommitter Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1557178248 +0300\n\nAlign formatting with clang-format\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/da9cd991a4c0779dbea31b70e3ac629af03f3adb",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/da9cd991a4c0779dbea31b70e3ac629af03f3adb",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/da9cd991a4c0779dbea31b70e3ac629af03f3adb/comments",
    "author": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "8a373775ceb9d0b16267b516948b5b69d0f3119f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8a373775ceb9d0b16267b516948b5b69d0f3119f",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/8a373775ceb9d0b16267b516948b5b69d0f3119f"
      }
    ],
    "stats": {
      "total": 28,
      "additions": 12,
      "deletions": 16
    },
    "files": [
      {
        "sha": "24d3d88f0121389e6f316ebfb8e7894edc18d8a1",
        "filename": "src/net.cpp",
        "status": "modified",
        "additions": 12,
        "deletions": 16,
        "changes": 28,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/da9cd991a4c0779dbea31b70e3ac629af03f3adb/src/net.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/da9cd991a4c0779dbea31b70e3ac629af03f3adb/src/net.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/net.cpp?ref=da9cd991a4c0779dbea31b70e3ac629af03f3adb",
        "patch": "@@ -1421,36 +1421,32 @@ static void ThreadMapPort()\n         if (fDiscover) {\n             char externalIPAddress[40];\n             r = UPNP_GetExternalIPAddress(urls.controlURL, data.first.servicetype, externalIPAddress);\n-            if(r != UPNPCOMMAND_SUCCESS)\n+            if (r != UPNPCOMMAND_SUCCESS) {\n                 LogPrintf(\"UPnP: GetExternalIPAddress() returned %d\\n\", r);\n-            else\n-            {\n-                if(externalIPAddress[0])\n-                {\n+            } else {\n+                if (externalIPAddress[0]) {\n                     CNetAddr resolved;\n-                    if(LookupHost(externalIPAddress, resolved, false)) {\n+                    if (LookupHost(externalIPAddress, resolved, false)) {\n                         LogPrintf(\"UPnP: ExternalIPAddress = %s\\n\", resolved.ToString().c_str());\n                         AddLocal(resolved, LOCAL_UPNP);\n                     }\n-                }\n-                else\n+                } else {\n                     LogPrintf(\"UPnP: GetExternalIPAddress failed.\\n\");\n+                }\n             }\n         }\n \n         std::string strDesc = PACKAGE_NAME \" \" + FormatFullVersion();\n \n         do {\n-            r = UPNP_AddPortMapping(urls.controlURL, data.first.servicetype,\n-                                port.c_str(), port.c_str(), lanaddr, strDesc.c_str(), \"TCP\", 0, \"0\");\n+            r = UPNP_AddPortMapping(urls.controlURL, data.first.servicetype, port.c_str(), port.c_str(), lanaddr, strDesc.c_str(), \"TCP\", 0, \"0\");\n \n-            if(r!=UPNPCOMMAND_SUCCESS)\n-                LogPrintf(\"AddPortMapping(%s, %s, %s) failed with code %d (%s)\\n\",\n-                    port, port, lanaddr, r, strupnperror(r));\n-            else\n+            if (r != UPNPCOMMAND_SUCCESS) {\n+                LogPrintf(\"AddPortMapping(%s, %s, %s) failed with code %d (%s)\\n\", port, port, lanaddr, r, strupnperror(r));\n+            } else {\n                 LogPrintf(\"UPnP Port Mapping successful.\\n\");\n-        }\n-        while(g_upnp_interrupt.sleep_for(std::chrono::minutes(20)));\n+            }\n+        } while (g_upnp_interrupt.sleep_for(std::chrono::minutes(20)));\n \n         r = UPNP_DeletePortMapping(urls.controlURL, data.first.servicetype, port.c_str(), \"TCP\", 0);\n         LogPrintf(\"UPNP_DeletePortMapping() returned: %d\\n\", r);"
      }
    ]
  }
]