[
  {
    "sha": "80190e7aeb7e730934271b03918640ec18a56dc5",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo4MDE5MGU3YWViN2U3MzA5MzQyNzFiMDM5MTg2NDBlYzE4YTU2ZGM1",
    "commit": {
      "author": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2020-03-14T19:50:33Z"
      },
      "committer": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2020-03-25T16:58:45Z"
      },
      "message": "build: Drop workaround for version string",
      "tree": {
        "sha": "8fc71baaced30462ad3bd347e4a7c095b22b1da4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/8fc71baaced30462ad3bd347e4a7c095b22b1da4"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/80190e7aeb7e730934271b03918640ec18a56dc5",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE0dvyxLlvLev0wWZUQQEIES5+qB8FAl57jcUACgkQQQEIES5+\nqB9iGxAAjy8m11OqKotGXHn33wfzcxgRAy4BVi8ljq11Z3T0Ao6exIagwD2duk2i\n3T7Hs+5bEQf1/T371yrHdrGQIBoVZUnRMAu1W/K8xoINLxFk/EstABgjYBfRjtwH\ntVlLc5rE7m//0Ev4v2cNlwPKLrdHcltlZYmATR7DwS53Q4iREap1otGSlxoY95S7\nbm2iDgeTAkopnT6R1MDJhDqU9R67NInVqHRbt9Wjy7BZKwNzunPm/nqHk6/4aRs0\nTrqzatgmVcK0PLd9PWuIeq6PzvWH8W2JbzId88ErukNbi+W6djBtL6guUyalhgHr\n0VHs51zfkGc8UkPwY0snessJhg7yQ5ZvREiRmOobuFsZcYYiEvPEaCWyHF1/Cgs2\nQAQ/JAEyUmyb/JpLHoHTjLDIrfheF4ZKrHlH4LfuOAK7RhhdqQflRLGs7Wp5Uu/w\nlLCTGhmuh9ZwWw9RQMuMw9wJ3M30zx6BYmHtZvW1IuhgK+163mk5iqh5TXLLeL7C\n8ek7/IX6LhlegywkaoG0aaxmi+VGPz5cmHFUgQNfOvNGcbKlVOTtZ6Dw7fP2OIK+\nTRGVVLdrRu3tNgMc4snvdHFT6OISq/dbVOiozwBOySdQAlHegVVyZurvh0CzTwC0\nVpeErRPCKnC8jG0qKCfXqn7Y4wziji/wY/kbWRZ2eBlX0hL+LF0=\n=leUs\n-----END PGP SIGNATURE-----",
        "payload": "tree 8fc71baaced30462ad3bd347e4a7c095b22b1da4\nparent 60a39a96fc04c9bde98f0a55c0deb2a0b3fc25a7\nauthor Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1584215433 +0200\ncommitter Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1585155525 +0200\n\nbuild: Drop workaround for version string\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/80190e7aeb7e730934271b03918640ec18a56dc5",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/80190e7aeb7e730934271b03918640ec18a56dc5",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/80190e7aeb7e730934271b03918640ec18a56dc5/comments",
    "author": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "60a39a96fc04c9bde98f0a55c0deb2a0b3fc25a7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/60a39a96fc04c9bde98f0a55c0deb2a0b3fc25a7",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/60a39a96fc04c9bde98f0a55c0deb2a0b3fc25a7"
      }
    ],
    "stats": {
      "total": 28,
      "additions": 3,
      "deletions": 25
    },
    "files": [
      {
        "sha": "f3a520f801ef939b9b03ad0113aa191313092a8f",
        "filename": "contrib/gitian-descriptors/gitian-linux.yml",
        "status": "modified",
        "additions": 0,
        "deletions": 8,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/80190e7aeb7e730934271b03918640ec18a56dc5/contrib/gitian-descriptors/gitian-linux.yml",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/80190e7aeb7e730934271b03918640ec18a56dc5/contrib/gitian-descriptors/gitian-linux.yml",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/gitian-descriptors/gitian-linux.yml?ref=80190e7aeb7e730934271b03918640ec18a56dc5",
        "patch": "@@ -147,9 +147,6 @@ script: |\n   SOURCEDIST=$(echo bitcoin-*.tar.gz)\n   DISTNAME=${SOURCEDIST/%.tar.gz}\n \n-  # Workaround for tarball not building with the bare tag version (prep)\n-  make -C src obj/build.h\n-\n   ORIGPATH=\"$PATH\"\n   # Extract the release tarball into a dir for each host and build\n   for i in ${HOSTS}; do\n@@ -167,11 +164,6 @@ script: |\n     mkdir -p ${INSTALLPATH}\n     tar --strip-components=1 -xf ../$SOURCEDIST\n \n-    # Workaround for tarball not building with the bare tag version\n-    echo '#!/bin/true' >share/genbuild.sh\n-    mkdir src/obj\n-    cp ../src/obj/build.h src/obj/\n-\n     CONFIG_SITE=${BASEPREFIX}/${i}/share/config.site ./configure --prefix=/ --disable-ccache --disable-maintainer-mode --disable-dependency-tracking ${CONFIGFLAGS} CFLAGS=\"${HOST_CFLAGS}\" CXXFLAGS=\"${HOST_CXXFLAGS}\" LDFLAGS=\"${HOST_LDFLAGS}\"\n     make ${MAKEOPTS}\n     make ${MAKEOPTS} -C src check-security"
      },
      {
        "sha": "6909e2ef800054a9b6b8410e42c401217e116e4e",
        "filename": "contrib/gitian-descriptors/gitian-osx.yml",
        "status": "modified",
        "additions": 0,
        "deletions": 8,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/80190e7aeb7e730934271b03918640ec18a56dc5/contrib/gitian-descriptors/gitian-osx.yml",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/80190e7aeb7e730934271b03918640ec18a56dc5/contrib/gitian-descriptors/gitian-osx.yml",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/gitian-descriptors/gitian-osx.yml?ref=80190e7aeb7e730934271b03918640ec18a56dc5",
        "patch": "@@ -110,9 +110,6 @@ script: |\n   SOURCEDIST=$(echo bitcoin-*.tar.gz)\n   DISTNAME=${SOURCEDIST/%.tar.gz}\n \n-  # Workaround for tarball not building with the bare tag version (prep)\n-  make -C src obj/build.h\n-\n   ORIGPATH=\"$PATH\"\n   # Extract the release tarball into a dir for each host and build\n   for i in ${HOSTS}; do\n@@ -123,11 +120,6 @@ script: |\n     mkdir -p ${INSTALLPATH}\n     tar --strip-components=1 -xf ../$SOURCEDIST\n \n-    # Workaround for tarball not building with the bare tag version\n-    echo '#!/bin/true' >share/genbuild.sh\n-    mkdir src/obj\n-    cp ../src/obj/build.h src/obj/\n-\n     CONFIG_SITE=${BASEPREFIX}/${i}/share/config.site ./configure --prefix=/ --disable-ccache --disable-maintainer-mode --disable-dependency-tracking ${CONFIGFLAGS}\n     make ${MAKEOPTS}\n     make ${MAKEOPTS} -C src check-security"
      },
      {
        "sha": "f6ac9bd445b939f3b9b82604c41cc387c245f842",
        "filename": "contrib/gitian-descriptors/gitian-win.yml",
        "status": "modified",
        "additions": 0,
        "deletions": 8,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/80190e7aeb7e730934271b03918640ec18a56dc5/contrib/gitian-descriptors/gitian-win.yml",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/80190e7aeb7e730934271b03918640ec18a56dc5/contrib/gitian-descriptors/gitian-win.yml",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/gitian-descriptors/gitian-win.yml?ref=80190e7aeb7e730934271b03918640ec18a56dc5",
        "patch": "@@ -117,9 +117,6 @@ script: |\n   SOURCEDIST=$(echo bitcoin-*.tar.gz)\n   DISTNAME=${SOURCEDIST/%.tar.gz}\n \n-  # Workaround for tarball not building with the bare tag version (prep)\n-  make -C src obj/build.h\n-\n   ORIGPATH=\"$PATH\"\n   # Extract the release tarball into a dir for each host and build\n   for i in ${HOSTS}; do\n@@ -130,11 +127,6 @@ script: |\n     mkdir -p ${INSTALLPATH}\n     tar --strip-components=1 -xf ../$SOURCEDIST\n \n-    # Workaround for tarball not building with the bare tag version\n-    echo '#!/bin/true' >share/genbuild.sh\n-    mkdir src/obj\n-    cp ../src/obj/build.h src/obj/\n-\n     CONFIG_SITE=${BASEPREFIX}/${i}/share/config.site ./configure --prefix=/ --disable-ccache --disable-maintainer-mode --disable-dependency-tracking ${CONFIGFLAGS} CFLAGS=\"${HOST_CFLAGS}\" CXXFLAGS=\"${HOST_CXXFLAGS}\"\n     make ${MAKEOPTS}\n     make ${MAKEOPTS} -C src check-security"
      },
      {
        "sha": "4866be49285a37f5782a33022ac308c856829948",
        "filename": "share/genbuild.sh",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/80190e7aeb7e730934271b03918640ec18a56dc5/share/genbuild.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/80190e7aeb7e730934271b03918640ec18a56dc5/share/genbuild.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/share/genbuild.sh?ref=80190e7aeb7e730934271b03918640ec18a56dc5",
        "patch": "@@ -37,6 +37,8 @@ if [ \"${BITCOIN_GENBUILD_NO_GIT}\" != \"1\" ] && [ -e \"$(command -v git)\" ] && [ \"$\n     # otherwise generate suffix from git, i.e. string like \"59887e8-dirty\"\n     SUFFIX=$(git rev-parse --short HEAD)\n     git diff-index --quiet HEAD -- || SUFFIX=\"$SUFFIX-dirty\"\n+elif [ -f \"$FILE\" ]; then\n+    exit 0\n fi\n \n if [ -n \"$DESC\" ]; then"
      },
      {
        "sha": "f28af87995bb13f378f4ec1596f366ff8f5ce89f",
        "filename": "src/Makefile.am",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/80190e7aeb7e730934271b03918640ec18a56dc5/src/Makefile.am",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/80190e7aeb7e730934271b03918640ec18a56dc5/src/Makefile.am",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/Makefile.am?ref=80190e7aeb7e730934271b03918640ec18a56dc5",
        "patch": "@@ -540,7 +540,7 @@ libbitcoin_cli_a_SOURCES = \\\n   rpc/client.cpp \\\n   $(BITCOIN_CORE_H)\n \n-nodist_libbitcoin_util_a_SOURCES = $(srcdir)/obj/build.h\n+libbitcoin_util_a_SOURCES += obj/build.h\n #\n \n # bitcoind binary #"
      }
    ]
  }
]