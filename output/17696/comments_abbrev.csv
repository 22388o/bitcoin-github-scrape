DrahtBot,2019-12-08 13:47:53,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#17453](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/17453.html) (gui: Fix intro dialog labels when the prune",https://github.com/bitcoin/bitcoin/pull/17696#issuecomment-562950290,562950290,
Sjors,2019-12-10 13:25:04,"Tested ACK 6928c50fa3104ce1b77c5d12928d49584fa536d5\n\nIn macOS the settings are in `~/Library/Preferences/org.bitcoin.Bitcoin-Qt-regtest.plist` which can be viewed with Xcode.",https://github.com/bitcoin/bitcoin/pull/17696#issuecomment-564030508,564030508,
jonasschnelli,2019-12-22 23:46:53,utACK 6928c50fa3104ce1b77c5d12928d49584fa536d5,https://github.com/bitcoin/bitcoin/pull/17696#issuecomment-568313472,568313472,
Sjors,2020-01-02 09:57:08,@promag can you do a review?,https://github.com/bitcoin/bitcoin/pull/17696#issuecomment-570161618,570161618,
hebasto,2020-01-02 15:49:24,"@fanquake @MarcoFalke \nWould you mind reviewing this PR?",https://github.com/bitcoin/bitcoin/pull/17696#issuecomment-570247977,570247977,
promag,2020-01-02 16:32:53,"I have tested that this change resets to 2GB regardless of what's in the settings.\n\nHowever I'm not sure this is correct, actually I think current behavior is correct - only problem is that the intro dialog doesn't show what's in the settings. In your case the intro should have the checkbox checked and it should say ""6 GB (prune)"".\n\nI don't think running with `-choosedatadir` should make i",https://github.com/bitcoin/bitcoin/pull/17696#issuecomment-570261615,570261615,
Sjors,2020-01-03 06:03:43,"> I don't think running with -choosedatadir should make it ignore existing settings - for that we have -resetguisettings?\n\nI don't mind either way; the plan seems to be to store settings in the datadir, e.g. using rw_config #11082.",https://github.com/bitcoin/bitcoin/pull/17696#issuecomment-570473101,570473101,
promag,2020-01-03 10:10:33,"> the plan seems to be to store settings in the datadir\n\nIn that case the current prune setting would still be available.",https://github.com/bitcoin/bitcoin/pull/17696#issuecomment-570527576,570527576,
hebasto,2020-01-03 22:18:41,@ryanofsky Would you mind reviewing this PR w.r.t. future of settings handling?,https://github.com/bitcoin/bitcoin/pull/17696#issuecomment-570715313,570715313,
Sjors,2020-01-04 05:40:10,"> > the plan seems to be to store settings in the datadir\n> \n> In that case the current prune setting would still be available.\n\nIt doesn't make sense to me to keep the same prune setting for a different data directory; it's probably on a different disk.",https://github.com/bitcoin/bitcoin/pull/17696#issuecomment-570758881,570758881,
hebasto,2020-01-07 20:23:20,"Implemented @ryanofsky's [suggestions](https://github.com/bitcoin/bitcoin/pull/17696#discussion_r363496670).\n\n@Sjors @jonasschnelli @promag @ryanofsky \nWould you mind re-reviewing?",https://github.com/bitcoin/bitcoin/pull/17696#issuecomment-571755395,571755395,
hebasto,2020-01-07 22:19:15,"@ryanofsky \nThank you for your review. All your comments have been addressed.",https://github.com/bitcoin/bitcoin/pull/17696#issuecomment-571799635,571799635,
promag,2020-01-08 01:02:31,"Tested ACK af112ab62895b145660f4cd7ff842e9cfea2a530. Latest suggestions and changes look good to me.\n\nOnce settings get stored in datadir I think the intro dialog could show prune target of the currently selected directory, if any (so it isn't overridden). Or disable/hide the prune option in the intro dialog if the currently selected directory exists and is valid - it's already initialized aft",https://github.com/bitcoin/bitcoin/pull/17696#issuecomment-571843807,571843807,
Sjors,2020-01-08 06:32:07,Code review re-ACK af112ab62895b145660f4cd7ff842e9cfea2a530,https://github.com/bitcoin/bitcoin/pull/17696#issuecomment-571910759,571910759,
ryanofsky,2020-01-06 21:42:18,"I think this `BitcoinApplication::SetPrune` function is confusing now that it is no longer just forwarding to optionsModel. Would suggest:\n\n- Renaming `SetPrune` to something like `InitializePruneSetting` or `ResetPrune` since it now resets the pruning size and is only called after the intro sequence.\n- Dropping the `bool force` parameter since it is only called one place with `force=true`\",https://github.com/bitcoin/bitcoin/pull/17696#discussion_r363496670,363496670,src/qt/bitcoin.cpp
hebasto,2020-01-07 10:29:45,"@ryanofsky \n\nAgree with all your suggestions.\n\nAs this PR has 3 ACKs already, is it acceptable to implement your suggestions in a following PR, e.g., #17453?",https://github.com/bitcoin/bitcoin/pull/17696#discussion_r363684570,363684570,src/qt/bitcoin.cpp
ryanofsky,2020-01-07 11:49:17,"> As this PR has 3 ACKs already, is it acceptable to implement your suggestions in a following PR, e.g., #17453?\n\nOf course yes, my suggestions are always just suggestions, and I wouldn't ACK a PR that I didn't think was ready to merge. I'd slightly prefer cleanup here or in a standalone PR instead of #17453 to make #17453 more focused and understandable, but it doesn't matter too much.",https://github.com/bitcoin/bitcoin/pull/17696#discussion_r363713032,363713032,src/qt/bitcoin.cpp
hebasto,2020-01-07 20:20:08,Done in the latest push.,https://github.com/bitcoin/bitcoin/pull/17696#discussion_r363933158,363933158,src/qt/bitcoin.cpp
ryanofsky,2020-01-07 21:23:03,"In commit ""qt: Rename SetPrune() to InitializePruneSetting()"" (192151ff193ceff8ad7177b07f0b98bf0ebcfc0d)\n\nI think this comment would be a better placed inside the `InitializePruneSetting` method body because it's describing and justifying the implementation of the function, which (I think) is pretty confusing without a nearby explanation. I also think it would be better to add this comment in ",https://github.com/bitcoin/bitcoin/pull/17696#discussion_r363957205,363957205,src/qt/bitcoin.h
ryanofsky,2020-01-07 21:43:13,"In commit ""refactor: Drop `bool force' parameter"" (0849b512916be3411db9d1efa447f2c12552ee0d)\n\nNot a big deal, but I don't think the force argument should be dropped from this function. The call site in InitializePruneSetting is clearer if it has to explicitly set `force` to true, and it seems inconsistent and unsafe for one optionsmodel `SetPrune` method to soft-set by default while the other ",https://github.com/bitcoin/bitcoin/pull/17696#discussion_r363965326,363965326,src/qt/optionsmodel.cpp
hebasto,2020-01-07 22:20:58,Done.,https://github.com/bitcoin/bitcoin/pull/17696#discussion_r363980196,363980196,src/qt/bitcoin.h
hebasto,2020-01-07 22:21:10,Done.,https://github.com/bitcoin/bitcoin/pull/17696#discussion_r363980266,363980266,src/qt/optionsmodel.cpp
