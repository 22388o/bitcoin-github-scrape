[
  {
    "sha": "a4d0fd026b74db034dc8a1fa7efbd4f1dba8cdb9",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzphNGQwZmQwMjZiNzRkYjAzNGRjOGExZmE3ZWZiZDRmMWRiYThjZGI5",
    "commit": {
      "author": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2019-03-08T04:20:51Z"
      },
      "committer": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2019-03-11T23:17:22Z"
      },
      "message": "doc: correct analysepsbt rpc doc",
      "tree": {
        "sha": "011e2905a82e72f3954a17a0764456731c30ce11",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/011e2905a82e72f3954a17a0764456731c30ce11"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a4d0fd026b74db034dc8a1fa7efbd4f1dba8cdb9",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEz7FuIclQ9n+pXlWPLuufXMCVJsEFAlyG7IQACgkQLuufXMCV\nJsGskw/9EgzPWpJXkKE8U0Wbo0R+HyDAZFd+fHJvMMu26CEUs4rktFNo/j0brvKV\nl910otRn2Dodw3gNgbZ0XpWL1v3pm65i0zfQxvZmq9gnw9jsFzCo1qYcQ8OxmpKY\n6YWiyO8F5LN/aS+UUN5i+fx/845M1ZfJ70zoP0Mnn6aDyAHxpwPjww0lFWzN62CH\nGUCpSXrrwvb1ki/qZWTu1Pzi+49VkyVq/TwY4QbqjeLZrSiybRZUHyBIpRBUQOFI\npcyO9Fgmt3M6YmbH99dzWUHtjMzrlWAYSCefwijrIuC/qUAao4XI8h5X2cKQrc1e\nFl0I53dabMarHMh0yOqMzUfLxTA8VmEIy50Qe3HkLj2mH+rGmcEGIRGBNpPEleer\nt/ugKWwBDtSU+uyPUmpsf/BRHaJ4SKhS1w0ppxX6UwzZTlzPQ7qLALBZ/Jnq8RkI\nnDWJuJjwZDq1VMpjW/8zEWQzIOTRQxLyh5PYn8yM07yFts+axkS3R0Ilqy98IWhH\n437HQWXpb0RcI/OlQd8Qjuzsm2mTETb+dJZ5QFqVciCfEhl+ygYOAozgVHRE0H0d\ncqpMKVmsCsUcwZStWDu5ecfrYu2GcLBBxJelCy0Hr1+jKMkalf6cYtE2pfZ4+7Gs\nWKZdVY80yCJHZ3EEEQsMRtOy2C90095RWjWnGNx+2LtufO4JNWo=\n=F3Tm\n-----END PGP SIGNATURE-----",
        "payload": "tree 011e2905a82e72f3954a17a0764456731c30ce11\nparent c94852e7912eb0881eb38af28cd2e3076e53e393\nauthor fanquake <fanquake@gmail.com> 1552018851 +0800\ncommitter fanquake <fanquake@gmail.com> 1552346242 +0800\n\ndoc: correct analysepsbt rpc doc\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a4d0fd026b74db034dc8a1fa7efbd4f1dba8cdb9",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/a4d0fd026b74db034dc8a1fa7efbd4f1dba8cdb9",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a4d0fd026b74db034dc8a1fa7efbd4f1dba8cdb9/comments",
    "author": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "c94852e7912eb0881eb38af28cd2e3076e53e393",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c94852e7912eb0881eb38af28cd2e3076e53e393",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/c94852e7912eb0881eb38af28cd2e3076e53e393"
      }
    ],
    "stats": {
      "total": 14,
      "additions": 7,
      "deletions": 7
    },
    "files": [
      {
        "sha": "80d8c962d0b1aeac519a1b287fddc5a84f58778c",
        "filename": "src/rpc/rawtransaction.cpp",
        "status": "modified",
        "additions": 7,
        "deletions": 7,
        "changes": 14,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a4d0fd026b74db034dc8a1fa7efbd4f1dba8cdb9/src/rpc/rawtransaction.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a4d0fd026b74db034dc8a1fa7efbd4f1dba8cdb9/src/rpc/rawtransaction.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/rawtransaction.cpp?ref=a4d0fd026b74db034dc8a1fa7efbd4f1dba8cdb9",
        "patch": "@@ -1862,21 +1862,21 @@ UniValue analyzepsbt(const JSONRPCRequest& request)\n                 \"      \\\"has_utxo\\\" : true|false     (boolean) Whether a UTXO is provided\\n\"\n                 \"      \\\"is_final\\\" : true|false     (boolean) Whether the input is finalized\\n\"\n                 \"      \\\"missing\\\" : {               (json object, optional) Things that are missing that are required to complete this input\\n\"\n-                \"        \\\"pubkeys\\\" : [             (array)\\n\"\n+                \"        \\\"pubkeys\\\" : [             (array, optional)\\n\"\n                 \"          \\\"keyid\\\"                 (string) Public key ID, hash160 of the public key, of a public key whose BIP 32 derivation path is missing\\n\"\n                 \"        ]\\n\"\n-                \"        \\\"signatures\\\" : [          (array)\\n\"\n+                \"        \\\"signatures\\\" : [          (array, optional)\\n\"\n                 \"          \\\"keyid\\\"                 (string) Public key ID, hash160 of the public key, of a public key whose signature is missing\\n\"\n                 \"        ]\\n\"\n-                \"        \\\"redeemscript\\\" : \\\"hash\\\"   (string) Hash160 of the redeemScript that is missing\\n\"\n-                \"        \\\"witnessscript\\\" : \\\"hash\\\"  (string) SHA256 of the witnessScript that is missing\\n\"\n+                \"        \\\"redeemscript\\\" : \\\"hash\\\"   (string, optional) Hash160 of the redeemScript that is missing\\n\"\n+                \"        \\\"witnessscript\\\" : \\\"hash\\\"  (string, optional) SHA256 of the witnessScript that is missing\\n\"\n                 \"      }\\n\"\n-                \"      \\\"next\\\" : \\\"role\\\"           (string) Role of the next person that this input needs to go to\\n\"\n+                \"      \\\"next\\\" : \\\"role\\\"             (string, optional) Role of the next person that this input needs to go to\\n\"\n                 \"    }\\n\"\n                 \"    ,...\\n\"\n                 \"  ]\\n\"\n-                \"  \\\"estimated_vsize\\\" : vsize       (numeric) Estimated vsize of the final signed transaction\\n\"\n-                \"  \\\"estimated_feerate\\\" : feerate   (numeric, optional) Estimated feerate of the final signed transaction. Shown only if all UTXO slots in the PSBT have been filled.\\n\"\n+                \"  \\\"estimated_vsize\\\" : vsize       (numeric, optional) Estimated vsize of the final signed transaction\\n\"\n+                \"  \\\"estimated_feerate\\\" : feerate   (numeric, optional) Estimated feerate of the final signed transaction in \" + CURRENCY_UNIT + \"/kB. Shown only if all UTXO slots in the PSBT have been filled.\\n\"\n                 \"  \\\"fee\\\" : fee                     (numeric, optional) The transaction fee paid. Shown only if all UTXO slots in the PSBT have been filled.\\n\"\n                 \"  \\\"next\\\" : \\\"role\\\"                 (string) Role of the next person that this psbt needs to go to\\n\"\n                 \"}\\n\""
      }
    ]
  },
  {
    "sha": "335931df4a37467299a2ee0ba521ecd5c4e6d39e",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzozMzU5MzFkZjRhMzc0NjcyOTlhMmVlMGJhNTIxZWNkNWM0ZTZkMzll",
    "commit": {
      "author": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2019-03-09T06:50:44Z"
      },
      "committer": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2019-03-11T23:17:42Z"
      },
      "message": "rpc: return a number for estimated_feerate in analyzepsbt",
      "tree": {
        "sha": "90ffc5409d6f1824f1fcdf648860512570b4de4f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/90ffc5409d6f1824f1fcdf648860512570b4de4f"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/335931df4a37467299a2ee0ba521ecd5c4e6d39e",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEz7FuIclQ9n+pXlWPLuufXMCVJsEFAlyG7JYACgkQLuufXMCV\nJsEXTQ/+P+zQyazreEuVRBNbR5rGXbTyCXm+83/41jzaVrs/3IrTw/xNHnlhK5YW\nWSfttPLxmxlzrhjTVUSGiR6su+Q9nawZXy5nN1mjt/XybG4l+pL349yWPr9fvnaa\n5UwmSrMqDvJR7Rd9Gps7FkSpvN18Wk2s/V8eqMGcUVYwIUe5GoEI2yYMDSvDLN74\nbqIFOZtu/dqnGc1BGSgsyV3wcYTMpVbsEB90TjX3gTJLZSMbSKT8RhpdwdXhT9uk\nx4JPNScBgqkPHp8tNVLKx5GnUGu8iDNb4O4woZOL8N/uIkf71REUpTCkh1ZJLCB+\nSVx1Xc8ir6jSFeN1ZZUC2waH9MVftBHfFqJBSWCNqbXqPul1SBlWNjUnorSnMHfh\n9H0ef08s2yycF/1fmKpyhkuiZAU+a9vl1silpy5Th8syHgq/HoflHkSuodPUOmtl\nd39ayjbtnUXldCc/saPZC3/JddWdBc1C90StTdVjbWBdBGM6nrUq10jObiFXGTmq\nOn1Wi5aoAZKR+bO8QcyENlU2SKwiHuy6etothv0KyOPNuOB148xSMqoCqYs2dv4g\n0Rvp17Zqoz/b5oQFwbu1srFUya+6uVMvinVXAtCle1NgHpgFsjTzc4XySID9NzFW\n/6qXAtKx+euZH/AyJ6Vj1Ws/uvAmW2kalBDhaZOPJPrqQq9RUIU=\n=VsuX\n-----END PGP SIGNATURE-----",
        "payload": "tree 90ffc5409d6f1824f1fcdf648860512570b4de4f\nparent a4d0fd026b74db034dc8a1fa7efbd4f1dba8cdb9\nauthor fanquake <fanquake@gmail.com> 1552114244 +0800\ncommitter fanquake <fanquake@gmail.com> 1552346262 +0800\n\nrpc: return a number for estimated_feerate in analyzepsbt\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/335931df4a37467299a2ee0ba521ecd5c4e6d39e",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/335931df4a37467299a2ee0ba521ecd5c4e6d39e",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/335931df4a37467299a2ee0ba521ecd5c4e6d39e/comments",
    "author": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "a4d0fd026b74db034dc8a1fa7efbd4f1dba8cdb9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a4d0fd026b74db034dc8a1fa7efbd4f1dba8cdb9",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/a4d0fd026b74db034dc8a1fa7efbd4f1dba8cdb9"
      }
    ],
    "stats": {
      "total": 4,
      "additions": 2,
      "deletions": 2
    },
    "files": [
      {
        "sha": "541171602e7c3302b58c48f0de2f4f8ab5c436f4",
        "filename": "src/rpc/rawtransaction.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/335931df4a37467299a2ee0ba521ecd5c4e6d39e/src/rpc/rawtransaction.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/335931df4a37467299a2ee0ba521ecd5c4e6d39e/src/rpc/rawtransaction.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/rawtransaction.cpp?ref=335931df4a37467299a2ee0ba521ecd5c4e6d39e",
        "patch": "@@ -2021,7 +2021,7 @@ UniValue analyzepsbt(const JSONRPCRequest& request)\n             result.pushKV(\"estimated_vsize\", (int)size);\n             // Estimate fee rate\n             CFeeRate feerate(fee, size);\n-            result.pushKV(\"estimated_feerate\", feerate.ToString());\n+            result.pushKV(\"estimated_feerate\", ValueFromAmount(feerate.GetFeePerK()));\n         }\n         result.pushKV(\"fee\", ValueFromAmount(fee));\n "
      },
      {
        "sha": "904ddac42899121c7fd684d86935fe2e73c7a82c",
        "filename": "test/functional/rpc_psbt.py",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/335931df4a37467299a2ee0ba521ecd5c4e6d39e/test/functional/rpc_psbt.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/335931df4a37467299a2ee0ba521ecd5c4e6d39e/test/functional/rpc_psbt.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/rpc_psbt.py?ref=335931df4a37467299a2ee0ba521ecd5c4e6d39e",
        "patch": "@@ -355,7 +355,7 @@ def run_test(self):\n         assert analyzed['inputs'][0]['has_utxo'] and not analyzed['inputs'][0]['is_final'] and analyzed['inputs'][0]['next'] == 'signer' and analyzed['next'] == 'signer' and analyzed['inputs'][0]['missing']['signatures'][0] == addrinfo['embedded']['witness_program']\n \n         # Check fee and size things\n-        assert analyzed['fee'] == Decimal('0.001') and analyzed['estimated_vsize'] == 134 and analyzed['estimated_feerate'] == '0.00746268 BTC/kB'\n+        assert analyzed['fee'] == Decimal('0.001') and analyzed['estimated_vsize'] == 134 and analyzed['estimated_feerate'] == Decimal('0.00746268')\n \n         # After signing and finalizing, needs extracting\n         signed = self.nodes[1].walletprocesspsbt(updated)['psbt']"
      }
    ]
  }
]