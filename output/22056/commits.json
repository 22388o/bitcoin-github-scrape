[
  {
    "sha": "d8f1ea7227260e51c340271fc9a43866799b8ac4",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkOGYxZWE3MjI3MjYwZTUxYzM0MDI3MWZjOWE0Mzg2Njc5OWI4YWM0",
    "commit": {
      "author": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2021-05-25T10:33:20Z"
      },
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2021-05-25T13:18:50Z"
      },
      "message": "doc: describe in fuzzing.md how to reproduce a CI crash\n\nand add/improve a few headers",
      "tree": {
        "sha": "2447322f4d83e0ace476dfcbf5f5353f619a9668",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2447322f4d83e0ace476dfcbf5f5353f619a9668"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d8f1ea7227260e51c340271fc9a43866799b8ac4",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEd6u7+MhX7zEv6RP5T1chs9Djkh0FAmCs+UAACgkQT1chs9Dj\nkh3dHw/+OG3V1O3pl0b4sLjubRp+/yhU5gP5nV7wy0kAuGRYc8jffBd1JjHXfga7\nBXdv5C1MRcEW6ckdUKb0t1xUmjy4QSwLXmPbTmPDJIFNMUTKxy055VLuBpHpxCE1\nhW+D6XaNAxL9xiwRZ9gyJGfB4u+XiIA9hB05yjGJF5knLj0ifvbsluoVZj9oMW7w\nX+j9GzzUuX+4MBBaULev/O4swoEUONhO+dFIvGHQ5ZuPVULkHoN5Aa5TQA2J59yV\n6JLCROYAMMcTsMro+MWiAgEfRfJVXZhqZcyQpbo9TcFu8/eF1XhK5z1MMd5yFoLq\no8CHHpLHJY/h7v8+06GYFK1wWN+OooQ+8Lrfm2u1Fh04JA1i0o0fbu1dYDVa+iTx\nwkJeAM3Fy/8qgjMfJh8C+2D4oqbeBE2NDPGHMYFdtqUtAGQVF8dHGqbBzIPoyJ87\nKxdA83SSY1gR+o6Ea5mAfp3R2mPghvsCpgtSf7fbGOAga/fwdjQ+fV4wNIR4sB9F\nDBg6OmMfZl9RVneLoO/50PObMFC3sMk2+NrroTbFn3cSMyO4VEOmnDWSuOvjEgmv\n/NihTKXWnj7D5pkgMXLn0dBbj+Udv25FiaCUztjUmbSRTmRSOOcErJEeKwWbW1iG\nzi4ReXveX8834s3zVogF/jw6tjXvxxbJhDSXiJWuyJqX3q0TjX8=\n=X1ri\n-----END PGP SIGNATURE-----\n-----BEGIN OPENTIMESTAMPS GIT TIMESTAMP-----\n\nAQHwIGb9+BhdpqKTNJ+Dqnwn/Xi8SBpXWsKA25OC95q4T32tCP/wEAy5/k1pfzYN\nXAuk7zRJoIoI8QRgrPlC8AgRlUMH+xxqfACD3+MNLvkMji4taHR0cHM6Ly9hbGlj\nZS5idGMuY2FsZW5kYXIub3BlbnRpbWVzdGFtcHMub3Jn//AQLZTer+/eMr7c+UhM\ni9+NDwjxBGCs+ULwCPYFd7zEhGCUAIPf4w0u+QyOLCtodHRwczovL2JvYi5idGMu\nY2FsZW5kYXIub3BlbnRpbWVzdGFtcHMub3Jn8BC8HSG2J84vi7hDOfv6tKXkCPEE\nYKz5QvAIScLWo1K2kuwAg9/jDS75DI4jImh0dHBzOi8vYnRjLmNhbGVuZGFyLmNh\ndGFsbGF4eS5jb20=\n-----END OPENTIMESTAMPS GIT TIMESTAMP-----",
        "payload": "tree 2447322f4d83e0ace476dfcbf5f5353f619a9668\nparent 7041d256e3a951dc7cc8b10db32e6f21d2071806\nauthor Jon Atack <jon@atack.com> 1621938800 +0200\ncommitter Jon Atack <jon@atack.com> 1621948730 +0200\n\ndoc: describe in fuzzing.md how to reproduce a CI crash\n\nand add/improve a few headers\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d8f1ea7227260e51c340271fc9a43866799b8ac4",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/d8f1ea7227260e51c340271fc9a43866799b8ac4",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d8f1ea7227260e51c340271fc9a43866799b8ac4/comments",
    "author": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "7041d256e3a951dc7cc8b10db32e6f21d2071806",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7041d256e3a951dc7cc8b10db32e6f21d2071806",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/7041d256e3a951dc7cc8b10db32e6f21d2071806"
      }
    ],
    "stats": {
      "total": 18,
      "additions": 17,
      "deletions": 1
    },
    "files": [
      {
        "sha": "6fc9077e4c3b91eea828b57b8e8916b13f67980d",
        "filename": "doc/fuzzing.md",
        "status": "modified",
        "additions": 17,
        "deletions": 1,
        "changes": 18,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d8f1ea7227260e51c340271fc9a43866799b8ac4/doc/fuzzing.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d8f1ea7227260e51c340271fc9a43866799b8ac4/doc/fuzzing.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/doc/fuzzing.md?ref=d8f1ea7227260e51c340271fc9a43866799b8ac4",
        "patch": "@@ -16,7 +16,7 @@ $ FUZZ=process_message src/test/fuzz/fuzz\n # abort fuzzing using ctrl-c\n ```\n \n-## Fuzzing harnesses, fuzzing output and fuzzing corpora\n+## Fuzzing harnesses and output\n \n [`process_message`](https://github.com/bitcoin/bitcoin/blob/master/src/test/fuzz/process_message.cpp) is a fuzzing harness for the [`ProcessMessage(...)` function (`net_processing`)](https://github.com/bitcoin/bitcoin/blob/master/src/net_processing.cpp). The available fuzzing harnesses are found in [`src/test/fuzz/`](https://github.com/bitcoin/bitcoin/tree/master/src/test/fuzz).\n \n@@ -64,6 +64,8 @@ block^@M-^?M-^?M-^?M-^?M-^?nM-^?M-^?\n \n In this case the fuzzer managed to create a `block` message which when passed to `ProcessMessage(...)` increased coverage.\n \n+## Fuzzing corpora\n+\n The project's collection of seed corpora is found in the [`bitcoin-core/qa-assets`](https://github.com/bitcoin-core/qa-assets) repo.\n \n To fuzz `process_message` using the [`bitcoin-core/qa-assets`](https://github.com/bitcoin-core/qa-assets) seed corpus:\n@@ -81,6 +83,20 @@ INFO: seed corpus: files: 991 min: 1b max: 1858b total: 288291b rss: 150Mb\n \u2026\n ```\n \n+## Reproduce a fuzzer crash reported by the CI\n+\n+- `cd` into the `qa-assets` directory and update it with `git pull qa-assets`\n+- locate the crash case described in the CI output, e.g. `Test unit written to\n+  ./crash-1bc91feec9fc00b107d97dc225a9f2cdaa078eb6`\n+- make sure to compile with all sanitizers, if they are needed (fuzzing runs\n+  more slowly with sanitizers enabled, but a crash should be reproducible very\n+  quickly from a crash case)\n+- run the fuzzer with the case number appended to the seed corpus path:\n+  `FUZZ=process_message src/test/fuzz/fuzz\n+  qa-assets/fuzz_seed_corpus/process_message/1bc91feec9fc00b107d97dc225a9f2cdaa078eb6`\n+\n+## Submit improved coverage\n+\n If you find coverage increasing inputs when fuzzing you are highly encouraged to submit them for inclusion in the [`bitcoin-core/qa-assets`](https://github.com/bitcoin-core/qa-assets) repo.\n \n Every single pull request submitted against the Bitcoin Core repo is automatically tested against all inputs in the [`bitcoin-core/qa-assets`](https://github.com/bitcoin-core/qa-assets) repo. Contributing new coverage increasing inputs is an easy way to help make Bitcoin Core more robust."
      }
    ]
  }
]