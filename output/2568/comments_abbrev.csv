gmaxwell,2013-04-25T23:12:12Z,We should probably be clamping max connections at FD_SETSIZE-MIN_CORE_FILEDESCRIPTORS otherwise you get fun stuff like select becoming crashy.\n,https://github.com/bitcoin/bitcoin/pull/2568#issuecomment-17046528,17046528,
jgarzik,2013-04-25T23:16:23Z,ACK\n,https://github.com/bitcoin/bitcoin/pull/2568#issuecomment-17046681,17046681,
gavinandresen,2013-04-26T12:06:40Z,ACK\n,https://github.com/bitcoin/bitcoin/pull/2568#issuecomment-17071033,17071033,
sipa,2013-04-26T12:21:16Z,@gavinandresen Have you tested whether this compiles on OSX?\n,https://github.com/bitcoin/bitcoin/pull/2568#issuecomment-17071510,17071510,
gavinandresen,2013-04-26T15:56:53Z,"@sipa : yes, compiles fine, unit tests run, bitcoind -testnet runs on OSX\n",https://github.com/bitcoin/bitcoin/pull/2568#issuecomment-17083117,17083117,
gmaxwell,2013-04-26T16:03:50Z,"@gavinandresen  can you try running \n\n(for i in {1..220000} ; do export bh=`./bitcoind getblockhash $i` ; for tx in `./bitcoind getblock $bh | grep '     ""' | cut -d'""' -f2` ; do  ./bitcoind getrawtransaction $tx > /dev/null  ; done   ; done)\n\nOn a OSX mainnet node with this patch and txindex=1 when you get a chance?  It should causes about 500 FDs to be used.\n",https://github.com/bitcoin/bitcoin/pull/2568#issuecomment-17083541,17083541,
sipa,2013-04-27T23:48:28Z,"Refactored the code into a RaiseFileDescriptorLimit in util, and added a windows implementation.\nAlso added Gregory's suggestion to clamp maxconnections, according to the size of FD_SETSIZE.\n\nMinimal test plan:\n- Start the client with increasingly higher -maxconnections=X values\n- Look for the line ""Using at most Y connections (Z file descriptors available)"" in debug.log\n- Without specific h",https://github.com/bitcoin/bitcoin/pull/2568#issuecomment-17125478,17125478,
BitcoinPullTester,2013-04-29T00:26:49Z,"Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/ba29a5590bc4479d74454f0b9fdaf007d9d80221 for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/cu",https://github.com/bitcoin/bitcoin/pull/2568#issuecomment-17145999,17145999,
gavinandresen,2013-04-29T14:29:26Z,ACK.  @gmaxwell : successfully ran (a modified version of) your stress test on OSX with this patch and -txindex=1.\n,https://github.com/bitcoin/bitcoin/pull/2568#issuecomment-17169878,17169878,
gmaxwell,2013-04-29T19:54:47Z,ACK.\n,https://github.com/bitcoin/bitcoin/pull/2568#issuecomment-17190035,17190035,
Diapolo,2013-04-28T21:02:49Z,"Is this correct? MSDN says: ""Up to 2,048 files can be open simultaneously at the lowio level (that is, opened and accessed by means of the _open, _read, _write, and so forth family of I/O functions). Up to 512 files can be open simultaneously at the stdio level (that is, opened and accessed by means of the fopen, fgetc, fputc, and so forth family of functions). The limit of 512 open files at the s",https://github.com/bitcoin/bitcoin/pull/2568#discussion_r3992373,3992373,src/util.cpp
sipa,2013-04-28T21:37:49Z,"It's a bit fuzzy, as things don't match exactly, but file descriptors correspond to the lowio level. However, the win32 leveldb implementation uses kernel calls directly, bypassing both stdio and lowio, so we don't actually need to count those. On the other hand, for block and undo files, we do use the stdio level...\n",https://github.com/bitcoin/bitcoin/pull/2568#discussion_r3992516,3992516,src/util.cpp
