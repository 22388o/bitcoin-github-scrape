[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/255854010",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9008#issuecomment-255854010",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9008",
    "id": 255854010,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NTg1NDAxMA==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-10-24T20:19:56Z",
    "updated_at": "2016-10-24T20:19:56Z",
    "author_association": "MEMBER",
    "body": "Isn't there some behaviour we want when the actual value (based on number of connections, not maximum number) <= 0, like cancelling the attempt?\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/255854010/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/255941975",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9008#issuecomment-255941975",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9008",
    "id": 255941975,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NTk0MTk3NQ==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-10-25T05:44:23Z",
    "updated_at": "2016-10-25T05:45:18Z",
    "author_association": "MEMBER",
    "body": "> Isn't there some behaviour we want when the actual value (based on number of connections, not maximum number) <= 0, like cancelling the attempt?\n\nI've checked the code below it and I think there is no danger from this value reaching <0. The only thing that actually uses nMaxInBound is:\n\n```\n    if (nInbound >= nMaxInbound)\n    {\n        if (!AttemptToEvictConnection()) {\n            // No connection to evict, disconnect the new connection\n            LogPrint(\"net\", \"failed to find an eviction candidate - connection dropped (full)\\n\");\n            CloseSocket(hSocket);\n            return;\n        }\n    }\n```\n\nSo it will try to evict all connections, just like when nMaxInbound would be 0, which I think makes sense. No need for special-casing.\n\nutACK https://github.com/bitcoin/bitcoin/pull/9008/commits/fa1c3c2eb0a1853ed0e0662fc2bdbca51e05ccf5\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/255941975/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/255945965",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9008#issuecomment-255945965",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9008",
    "id": 255945965,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NTk0NTk2NQ==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-10-25T06:13:56Z",
    "updated_at": "2016-10-25T06:13:56Z",
    "author_association": "MEMBER",
    "body": "Theoretically we could stop listening for inbound connections completely if this is <=0, however, whitelisted connections are probably an exception? There are some potential traps there that can create additional unexpected behavior changes. I think this pull is safe and we can do that later.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/255945965/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/255972454",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9008#issuecomment-255972454",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9008",
    "id": 255972454,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI1NTk3MjQ1NA==",
    "user": {
      "login": "gmaxwell",
      "id": 858454,
      "node_id": "MDQ6VXNlcjg1ODQ1NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/858454?u=63e5c438c242094837a9deeda775d77988b508bf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gmaxwell",
      "html_url": "https://github.com/gmaxwell",
      "followers_url": "https://api.github.com/users/gmaxwell/followers",
      "following_url": "https://api.github.com/users/gmaxwell/following{/other_user}",
      "gists_url": "https://api.github.com/users/gmaxwell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
      "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
      "repos_url": "https://api.github.com/users/gmaxwell/repos",
      "events_url": "https://api.github.com/users/gmaxwell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-10-25T08:35:28Z",
    "updated_at": "2016-10-25T08:35:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Theoretically we could stop listening for inbound connections completely if this is <=0, however, whitelisted connections are probably an exception? \n\nProbably the logic should be changed further in the future, if you set maxconnections to 5 and -listen=1 -connect=gateway.host  I would expect you to end up with 5 connections, not 1.\n\nBut ACK getting rid of the assert, good move for now and telling people to set maxconnections to a small number used to be common advice for people concerned with memory and bandwidth (we now use less memory per peer, so less reason)... I also checked that the negative is fine with the current code.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/255972454/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/84834414",
    "pull_request_review_id": 5585725,
    "id": 84834414,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDg0ODM0NDE0",
    "diff_hunk": "@@ -970,7 +970,6 @@ void CConnman::AcceptConnection(const ListenSocket& hListenSocket) {\n     CAddress addr;\n     int nInbound = 0;\n     int nMaxInbound = nMaxConnections - (nMaxOutbound + nMaxFeeler);",
    "path": "src/net.cpp",
    "position": 3,
    "original_position": 3,
    "commit_id": "fa1c3c2eb0a1853ed0e0662fc2bdbca51e05ccf5",
    "original_commit_id": "fa1c3c2eb0a1853ed0e0662fc2bdbca51e05ccf5",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Maybe it would be wise to cap this to 0 explicitly, as no one will be expecting this to be negative in future maintenance, and they may add something again that crashes if it is.\n\n```\nint nMaxInbound = std::max(nMaxConnections - (nMaxOutbound + nMaxFeeler), 0);\n```\n",
    "created_at": "2016-10-25T05:47:22Z",
    "updated_at": "2016-10-25T05:47:50Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9008#discussion_r84834414",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9008",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/84834414"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9008#discussion_r84834414"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9008"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/84834414/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 972,
    "original_line": 972,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/84960162",
    "pull_request_review_id": 5704707,
    "id": 84960162,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDg0OTYwMTYy",
    "diff_hunk": "@@ -970,7 +970,6 @@ void CConnman::AcceptConnection(const ListenSocket& hListenSocket) {\n     CAddress addr;\n     int nInbound = 0;\n     int nMaxInbound = nMaxConnections - (nMaxOutbound + nMaxFeeler);",
    "path": "src/net.cpp",
    "position": 3,
    "original_position": 3,
    "commit_id": "fa1c3c2eb0a1853ed0e0662fc2bdbca51e05ccf5",
    "original_commit_id": "fa1c3c2eb0a1853ed0e0662fc2bdbca51e05ccf5",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I disagree at just blindly capping this at 0. There are only two ways imo:\n- Add a comment which says this may be negative\n- Rework the \"-maxconnections\" code to not allow negative numbers here\n",
    "created_at": "2016-10-25T17:46:40Z",
    "updated_at": "2016-10-25T17:46:40Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9008#discussion_r84960162",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9008",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/84960162"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9008#discussion_r84960162"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9008"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/84960162/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 972,
    "original_line": 972,
    "side": "RIGHT",
    "in_reply_to_id": 84834414
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/84964805",
    "pull_request_review_id": 5709073,
    "id": 84964805,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDg0OTY0ODA1",
    "diff_hunk": "@@ -970,7 +970,6 @@ void CConnman::AcceptConnection(const ListenSocket& hListenSocket) {\n     CAddress addr;\n     int nInbound = 0;\n     int nMaxInbound = nMaxConnections - (nMaxOutbound + nMaxFeeler);",
    "path": "src/net.cpp",
    "position": 3,
    "original_position": 3,
    "commit_id": "fa1c3c2eb0a1853ed0e0662fc2bdbca51e05ccf5",
    "original_commit_id": "fa1c3c2eb0a1853ed0e0662fc2bdbca51e05ccf5",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I don't think a negative value for something called `nMaxOutbound` makes sense. There should never be a difference in behavior between no outgoing connections, or negative outgoing connections. But ok, this needs a different solution anyway at a higher level.\n",
    "created_at": "2016-10-25T18:07:33Z",
    "updated_at": "2016-10-25T18:07:33Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9008#discussion_r84964805",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9008",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/84964805"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9008#discussion_r84964805"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9008"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/84964805/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 972,
    "original_line": 972,
    "side": "RIGHT",
    "in_reply_to_id": 84834414
  }
]