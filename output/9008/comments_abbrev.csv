sipa,2016-10-24T20:19:56Z,"Isn't there some behaviour we want when the actual value (based on number of connections, not maximum number) <= 0, like cancelling the attempt?\n",https://github.com/bitcoin/bitcoin/pull/9008#issuecomment-255854010,255854010,
laanwj,2016-10-25T05:44:23Z,"> Isn't there some behaviour we want when the actual value (based on number of connections, not maximum number) <= 0, like cancelling the attempt?\n\nI've checked the code below it and I think there is no danger from this value reaching <0. The only thing that actually uses nMaxInBound is:\n\n```\n    if (nInbound >= nMaxInbound)\n    {\n        if (!AttemptToEvictConnection()) {\n            // N",https://github.com/bitcoin/bitcoin/pull/9008#issuecomment-255941975,255941975,
laanwj,2016-10-25T06:13:56Z,"Theoretically we could stop listening for inbound connections completely if this is <=0, however, whitelisted connections are probably an exception? There are some potential traps there that can create additional unexpected behavior changes. I think this pull is safe and we can do that later.\n",https://github.com/bitcoin/bitcoin/pull/9008#issuecomment-255945965,255945965,
gmaxwell,2016-10-25T08:35:28Z,"> Theoretically we could stop listening for inbound connections completely if this is <=0, however, whitelisted connections are probably an exception? \n\nProbably the logic should be changed further in the future, if you set maxconnections to 5 and -listen=1 -connect=gateway.host  I would expect you to end up with 5 connections, not 1.\n\nBut ACK getting rid of the assert, good move for now and t",https://github.com/bitcoin/bitcoin/pull/9008#issuecomment-255972454,255972454,
laanwj,2016-10-25T05:47:22Z,"Maybe it would be wise to cap this to 0 explicitly, as no one will be expecting this to be negative in future maintenance, and they may add something again that crashes if it is.\n\n```\nint nMaxInbound = std::max(nMaxConnections - (nMaxOutbound + nMaxFeeler), 0);\n```\n",https://github.com/bitcoin/bitcoin/pull/9008#discussion_r84834414,84834414,src/net.cpp
MarcoFalke,2016-10-25T17:46:40Z,"I disagree at just blindly capping this at 0. There are only two ways imo:\n- Add a comment which says this may be negative\n- Rework the ""-maxconnections"" code to not allow negative numbers here\n",https://github.com/bitcoin/bitcoin/pull/9008#discussion_r84960162,84960162,src/net.cpp
laanwj,2016-10-25T18:07:33Z,"I don't think a negative value for something called `nMaxOutbound` makes sense. There should never be a difference in behavior between no outgoing connections, or negative outgoing connections. But ok, this needs a different solution anyway at a higher level.\n",https://github.com/bitcoin/bitcoin/pull/9008#discussion_r84964805,84964805,src/net.cpp
