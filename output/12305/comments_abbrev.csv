laanwj,2018-01-30T22:13:18Z,"Not just this one, all relative files and directories specified either on the command line or through RPC are supposed to be relative to the data directory.",https://github.com/bitcoin/bitcoin/pull/12305#issuecomment-361752399,361752399,
MarcoFalke,2018-01-30T22:27:21Z,OT: Wasn't walletdir temporarily allowed to be relative to the cwd?,https://github.com/bitcoin/bitcoin/pull/12305#issuecomment-361756062,361756062,
jamesob,2018-01-30T22:38:10Z,"Sounds like we don't have any documentation indicating that all path arguments are relative to datadir;  that information should live somewhere (preferably in a single place that isn't easy to miss). One option is to put it in a paragraph between ""Usage"" and ""Options"" in `{bitcoind,bitcoin-cli,bitcoin-qt} -h`. Any other suggestions?",https://github.com/bitcoin/bitcoin/pull/12305#issuecomment-361758781,361758781,
MarcoFalke,2018-01-30T23:22:31Z,"Options that take paths or file names are:\n\n* `-rpccookiefile=<loc>`\n* `-walletdir=<dir>`\n* `-wallet=<file>`\n* `-datadir=<dir>`\n* `-conf=<file>`\n\nSo, adding a general paragraph only makes sense if it holds true for all paths. Otherwise, I'd prefer if each command line help was clarified individually.",https://github.com/bitcoin/bitcoin/pull/12305#issuecomment-361768891,361768891,
jamesob,2018-01-31T04:02:37Z,"@MarcoFalke thanks for that list. I've looked at how each option on the list is parsed (as well as a few others):\n\n- `-rpccookiefile=<loc>`: Is put under datadir if relative.\n- `-walletdir=<dir>`: Isn't allowed to be relative.\n- `-wallet=<file>`: Moved under walletdir with `fs::absolute(walletFile, GetWalletDir())`.\n- `-datadir=<dir>`: Can be specified as relative but will warn. Obviousl",https://github.com/bitcoin/bitcoin/pull/12305#issuecomment-361817075,361817075,
laanwj,2018-01-31T09:47:29Z,"Thanks, utACK ",https://github.com/bitcoin/bitcoin/pull/12305#issuecomment-361878893,361878893,
jamesob,2018-01-31T16:15:21Z,Thanks for the feedback @promag. It's been incorporated and pushed.,https://github.com/bitcoin/bitcoin/pull/12305#issuecomment-361983342,361983342,
jamesob,2018-01-31T20:41:28Z,"Thanks for the good feedback, @ryanofsky. Incorporated and pushed.",https://github.com/bitcoin/bitcoin/pull/12305#issuecomment-362063799,362063799,
ajtowns,2018-02-02T10:14:11Z,Could update the commit title to match the renamed function :),https://github.com/bitcoin/bitcoin/pull/12305#issuecomment-362544879,362544879,
jamesob,2018-02-02T14:24:46Z,"d'oh. Thanks, @ajtowns. Pushed.",https://github.com/bitcoin/bitcoin/pull/12305#issuecomment-362599939,362599939,
jnewbery,2018-02-05T20:07:04Z,"Looks good.\n\nMinor note that `-conf` is relative to the base datadir, but `-debuglogfile`, `-pid` and `-rpccookiefile` are relative the net-specific subdirectories. It might be better to specify that in the help text.",https://github.com/bitcoin/bitcoin/pull/12305#issuecomment-363205504,363205504,
sipa,2018-02-05T21:10:07Z,"utACK 95963c120c48ce750fdb2298f3eb70034e578e8d, but needs rebase.",https://github.com/bitcoin/bitcoin/pull/12305#issuecomment-363222271,363222271,
jamesob,2018-02-05T22:50:27Z,Rebased and incorporated @jnewbery's feedback.,https://github.com/bitcoin/bitcoin/pull/12305#issuecomment-363248400,363248400,
jnewbery,2018-02-06T00:36:47Z,utACK 54604600c3de6cb18540c0911127173f68ad246c,https://github.com/bitcoin/bitcoin/pull/12305#issuecomment-363269758,363269758,
MarcoFalke,2018-02-06T23:05:28Z,Post-merge utACK 54604600c3de6cb18540c0911127173f68ad246c,https://github.com/bitcoin/bitcoin/pull/12305#issuecomment-363596162,363596162,
promag,2018-01-31T15:48:12Z,"I'd rename to `GetAbsolutePath` or more specific `GetAbsoluteDataPath`:\n```cpp\nfs::path GetAbsoluteDataPath(const fs::path& path, bool net_specific)\n```\nI other contexts/languages, normalization can be interpreted as transforming from `foo/../bar/` to `bar`.\n\nNit, snake_case arguments.",https://github.com/bitcoin/bitcoin/pull/12305#discussion_r165094450,165094450,src/util.cpp
promag,2018-01-31T15:48:41Z,"Nit, unrelated change, remove.",https://github.com/bitcoin/bitcoin/pull/12305#discussion_r165094611,165094611,src/wallet/init.cpp
ryanofsky,2018-01-31T18:08:44Z,"Would be a little better to return: `return fs::absolute(path, GetDataDir(net_specific))` to make it clear this returns an absolute path. You could also drop the `is_complete` check above if you did this.",https://github.com/bitcoin/bitcoin/pull/12305#discussion_r165138129,165138129,src/util.cpp
ryanofsky,2018-01-31T18:10:55Z,"Could eliminate this check, but if you will keep it [developer notes](https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md) suggest adding braces or putting if body on same line as condition.",https://github.com/bitcoin/bitcoin/pull/12305#discussion_r165138720,165138720,src/util.cpp
ryanofsky,2018-01-31T18:12:28Z,"""ForArg"" in function name seems a little redundant. Just a suggestion, but I might call it something `GetDataPath` or `GetDataDirPath`.",https://github.com/bitcoin/bitcoin/pull/12305#discussion_r165139162,165139162,src/util.h
jamesob,2018-01-31T20:33:02Z,"Great, thanks.",https://github.com/bitcoin/bitcoin/pull/12305#discussion_r165178313,165178313,src/util.cpp
jamesob,2018-01-31T20:36:28Z,"My only reservation here is that the path won't necessarily be in datadir, so a name with Data or DataDir seems confusing. ""Arg"" here is meant to correspond to an argument to the binary, not the function, but maybe that isn't clear.",https://github.com/bitcoin/bitcoin/pull/12305#discussion_r165179100,165179100,src/util.h
jamesob,2018-01-31T20:37:00Z,"Taking your advice below, but the reminder about convention is appreciated.",https://github.com/bitcoin/bitcoin/pull/12305#discussion_r165179212,165179212,src/util.cpp
jamesob,2018-01-31T20:38:45Z,I'll try `AbsPathForConfigVal`.,https://github.com/bitcoin/bitcoin/pull/12305#discussion_r165179604,165179604,src/util.h
promag,2018-02-05T23:13:04Z,The absolute path?,https://github.com/bitcoin/bitcoin/pull/12305#discussion_r166142773,166142773,src/util.h
