hebasto,2019-05-11 06:59:47,"> If `/etc/bitcoin` does not exist when the systemd script is run for the first time then the directory gets created...\n\nProviding `-conf=/etc/bitcoin/bitcoin.conf` option in `ExecStart=/usr/bin/bitcoind` line of `bitcoind.service` file assumes setting up `/etc/bitcoin/bitcoin.conf` _before_ `bitcoind` service get started.\n\n> The 0710 permissions will/may prevent a non-root user from being",https://github.com/bitcoin/bitcoin/pull/15995#issuecomment-491485934,491485934,
sipsorcery,2019-05-11 07:39:02,"> It looks good from the security point of view. Why is this an issue?\n\nIt's now happened to me a couple of times where I've installed the service script and overlooked creating the config file. I then check the log messages realise it's missing and copy it into the `/etc/bitcoin` directory. This is where the problem occurs. Restarting the bitcoin service will continue to fail because the perm",https://github.com/bitcoin/bitcoin/pull/15995#issuecomment-491488447,491488447,
hebasto,2019-05-11 07:56:11,"@sipsorcery \n> It's now happened to me a couple of times where I've installed the service script and overlooked creating the config file.\n\nIMO, there is nothing to fix in the software ;)",https://github.com/bitcoin/bitcoin/pull/15995#issuecomment-491489563,491489563,
sipsorcery,2019-05-11 08:31:45,"> IMO, there is nothing to fix in the software ;)\n\nPoint taken and not disputed ;). Wish I could get my memory banks serviced. I keep cleaning them with alcohol but it just seems to make it worse :(.\n\nFor any other interested parties the choices I see are:\n\n1. Leave as is and let users manually work out they need to set the ownership correctly on `/etc/bitcoin`. Once the ownership is s",https://github.com/bitcoin/bitcoin/pull/15995#issuecomment-491491651,491491651,
laanwj,2019-07-04 12:45:13,"I'm not convinced that this is a good idea. `bitcoin.conf` can contain secrets such as RPC account user/passwords, so restricting its permissions to `root` and whatever the `uid`/`gid` is that the service runs under makes sense.\n(at least by default! of course admins can decide to weaken these permissions in specific cases)",https://github.com/bitcoin/bitcoin/pull/15995#issuecomment-508469900,508469900,
sipsorcery,2019-07-04 12:54:30,@laanwj the PR doesn't affect the permissions on the bitcoin.conf file. It affects the permissions that systemd will set on the `/etc/bitcoin` directory IF it does not exist. If the `bitcoin.conf` file has restricted read permissions they are not affected.,https://github.com/bitcoin/bitcoin/pull/15995#issuecomment-508472630,508472630,
hebasto,2019-07-05 18:26:11,"Concept NACK.\n\nRationale:\n1. If the `/etc/bitcoin` directory was created by `systemd` with `root` ownership and `0755` permissions, the just created `bitcoin.conf` file (e.g., `touch /etc/bitcoin/bitcoin.conf`) will acquire the same permissions. It means `bitcoin.conf` will be readable for all users.\n\n2. This PR looks like a bad trade-off between first-time setup convenience for long-ter",https://github.com/bitcoin/bitcoin/pull/15995#issuecomment-508833930,508833930,
sipsorcery,2019-07-05 19:11:12,"Ok I'll accept that the proposed solution is not ideal and close this PR. \n\nIn my defense I will point out that my goal was to avoid future users of the sample systemd `bitcoind.service` script receiving the error below.  I reasoned that if I, as a someone with a bit of programmer experience under my belt, was having difficulties then so would others that tried to use the script. That could ce",https://github.com/bitcoin/bitcoin/pull/15995#issuecomment-508842263,508842263,
setpill,2019-08-06 12:01:00,"Just stumbled across this same issue and contributed my own fix with `711` (rather than `755`). On the one hand I see the problem with having the config file world-readable due to RPC secrets; on the other hand, if one wants to run with the default settings and doesn't care about putting a `bitcoin.conf` in `/etc/bitcoin` the current systemd service file simply creates the the directory with the w",https://github.com/bitcoin/bitcoin/pull/15995#issuecomment-518639415,518639415,
setpill,2019-08-06 14:38:02,"I disagree with some points made in this discussion.\n\n@hebasto \n> Providing `-conf=/etc/bitcoin/bitcoin.conf` option in `ExecStart=/usr/bin/bitcoind` line of `bitcoind.service` file assumes setting up `/etc/bitcoin/bitcoin.conf` before bitcoind service get started.\n\nFalse; this just sets the location where `bitcoind` will look for the configuration; `bitcoind` does not require the config",https://github.com/bitcoin/bitcoin/pull/15995#issuecomment-518698078,518698078,
