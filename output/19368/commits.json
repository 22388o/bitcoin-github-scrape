[
  {
    "sha": "8cf9d15b823d91d2a74fc83832fccca2219342c9",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo4Y2Y5ZDE1YjgyM2Q5MWQyYTc0ZmM4MzgzMmZjY2NhMjIxOTM0MmM5",
    "commit": {
      "author": {
        "name": "Ivan Metlushko",
        "email": "metlushko@gmail.com",
        "date": "2020-06-24T02:08:41Z"
      },
      "committer": {
        "name": "Ivan Metlushko",
        "email": "metlushko@gmail.com",
        "date": "2020-06-24T02:29:50Z"
      },
      "message": "test: use pgrep for better compatibility\n\npidof is not available on BSD system, while pgrep is present on BSD, Linux and macOS",
      "tree": {
        "sha": "410b4dc14e83a687dbe820550dd1a61bcb911ea6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/410b4dc14e83a687dbe820550dd1a61bcb911ea6"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8cf9d15b823d91d2a74fc83832fccca2219342c9",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8cf9d15b823d91d2a74fc83832fccca2219342c9",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/8cf9d15b823d91d2a74fc83832fccca2219342c9",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8cf9d15b823d91d2a74fc83832fccca2219342c9/comments",
    "author": {
      "login": "S3RK",
      "id": 1466284,
      "node_id": "MDQ6VXNlcjE0NjYyODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/S3RK",
      "html_url": "https://github.com/S3RK",
      "followers_url": "https://api.github.com/users/S3RK/followers",
      "following_url": "https://api.github.com/users/S3RK/following{/other_user}",
      "gists_url": "https://api.github.com/users/S3RK/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
      "organizations_url": "https://api.github.com/users/S3RK/orgs",
      "repos_url": "https://api.github.com/users/S3RK/repos",
      "events_url": "https://api.github.com/users/S3RK/events{/privacy}",
      "received_events_url": "https://api.github.com/users/S3RK/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "S3RK",
      "id": 1466284,
      "node_id": "MDQ6VXNlcjE0NjYyODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/S3RK",
      "html_url": "https://github.com/S3RK",
      "followers_url": "https://api.github.com/users/S3RK/followers",
      "following_url": "https://api.github.com/users/S3RK/following{/other_user}",
      "gists_url": "https://api.github.com/users/S3RK/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
      "organizations_url": "https://api.github.com/users/S3RK/orgs",
      "repos_url": "https://api.github.com/users/S3RK/repos",
      "events_url": "https://api.github.com/users/S3RK/events{/privacy}",
      "received_events_url": "https://api.github.com/users/S3RK/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "80fd474e402bb003c3a427f1997eb649e69138ba",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/80fd474e402bb003c3a427f1997eb649e69138ba",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/80fd474e402bb003c3a427f1997eb649e69138ba"
      }
    ],
    "stats": {
      "total": 7,
      "additions": 4,
      "deletions": 3
    },
    "files": [
      {
        "sha": "2fa48006f41c86e0403c45b30750557cf0e20c8b",
        "filename": "test/functional/test_runner.py",
        "status": "modified",
        "additions": 4,
        "deletions": 3,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8cf9d15b823d91d2a74fc83832fccca2219342c9/test/functional/test_runner.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8cf9d15b823d91d2a74fc83832fccca2219342c9/test/functional/test_runner.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/test_runner.py?ref=8cf9d15b823d91d2a74fc83832fccca2219342c9",
        "patch": "@@ -396,11 +396,12 @@ def run_tests(*, test_list, src_dir, build_dir, tmpdir, jobs=1, enable_coverage=\n     args = args or []\n \n     # Warn if bitcoind is already running\n-    # pidof might fail or return an empty string if bitcoind is not running\n     try:\n-        if subprocess.check_output([\"pidof\", \"bitcoind\"]) not in [b'']:\n+        # pgrep exits with code zero when one or more matching processes found\n+        if subprocess.run([\"pgrep\", \"-x\", \"bitcoind\"], stdout=subprocess.DEVNULL).returncode == 0:\n             print(\"%sWARNING!%s There is already a bitcoind process running on this system. Tests may fail unexpectedly due to resource contention!\" % (BOLD[1], BOLD[0]))\n-    except (OSError, subprocess.SubprocessError):\n+    except OSError:\n+        # pgrep not supported\n         pass\n \n     # Warn if there is a cache directory"
      }
    ]
  },
  {
    "sha": "3a7e79478ab41af7c53ce14d9fca9815bffe1f73",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzozYTdlNzk0NzhhYjQxYWY3YzUzY2UxNGQ5ZmNhOTgxNWJmZmUxZjcz",
    "commit": {
      "author": {
        "name": "Ivan Metlushko",
        "email": "metlushko@gmail.com",
        "date": "2020-06-24T10:49:04Z"
      },
      "committer": {
        "name": "Ivan Metlushko",
        "email": "metlushko@gmail.com",
        "date": "2020-06-25T10:26:20Z"
      },
      "message": "test: retry when write to a socket fails on macOS\n\nIf the socket is tearing down macOS will return EPROTOTYPE instead of EPIPE.\nBecause python doesn't handle this internally we have to do a workaround and retry the request.\nSee https://bugs.python.org/issue33450",
      "tree": {
        "sha": "77afac9c22f5df01735a241f036df8482176a547",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/77afac9c22f5df01735a241f036df8482176a547"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3a7e79478ab41af7c53ce14d9fca9815bffe1f73",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3a7e79478ab41af7c53ce14d9fca9815bffe1f73",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/3a7e79478ab41af7c53ce14d9fca9815bffe1f73",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3a7e79478ab41af7c53ce14d9fca9815bffe1f73/comments",
    "author": {
      "login": "S3RK",
      "id": 1466284,
      "node_id": "MDQ6VXNlcjE0NjYyODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/S3RK",
      "html_url": "https://github.com/S3RK",
      "followers_url": "https://api.github.com/users/S3RK/followers",
      "following_url": "https://api.github.com/users/S3RK/following{/other_user}",
      "gists_url": "https://api.github.com/users/S3RK/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
      "organizations_url": "https://api.github.com/users/S3RK/orgs",
      "repos_url": "https://api.github.com/users/S3RK/repos",
      "events_url": "https://api.github.com/users/S3RK/events{/privacy}",
      "received_events_url": "https://api.github.com/users/S3RK/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "S3RK",
      "id": 1466284,
      "node_id": "MDQ6VXNlcjE0NjYyODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/S3RK",
      "html_url": "https://github.com/S3RK",
      "followers_url": "https://api.github.com/users/S3RK/followers",
      "following_url": "https://api.github.com/users/S3RK/following{/other_user}",
      "gists_url": "https://api.github.com/users/S3RK/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
      "organizations_url": "https://api.github.com/users/S3RK/orgs",
      "repos_url": "https://api.github.com/users/S3RK/repos",
      "events_url": "https://api.github.com/users/S3RK/events{/privacy}",
      "received_events_url": "https://api.github.com/users/S3RK/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "8cf9d15b823d91d2a74fc83832fccca2219342c9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8cf9d15b823d91d2a74fc83832fccca2219342c9",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/8cf9d15b823d91d2a74fc83832fccca2219342c9"
      }
    ],
    "stats": {
      "total": 2,
      "additions": 2,
      "deletions": 0
    },
    "files": [
      {
        "sha": "81eb881234521c7ea9208f54c6f94656d65ef894",
        "filename": "test/functional/test_framework/authproxy.py",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/3a7e79478ab41af7c53ce14d9fca9815bffe1f73/test/functional/test_framework/authproxy.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/3a7e79478ab41af7c53ce14d9fca9815bffe1f73/test/functional/test_framework/authproxy.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/test_framework/authproxy.py?ref=3a7e79478ab41af7c53ce14d9fca9815bffe1f73",
        "patch": "@@ -115,6 +115,8 @@ def _request(self, method, path, postdata):\n         except OSError as e:\n             retry = (\n                 '[WinError 10053] An established connection was aborted by the software in your host machine' in str(e))\n+            # Workaround for a bug on macOS. See https://bugs.python.org/issue33450\n+            retry = retry or ('[Errno 41] Protocol wrong type for socket' in str(e))\n             if retry:\n                 self.__conn.close()\n                 self.__conn.request(method, path, postdata, headers)"
      }
    ]
  }
]