laanwj,2016-05-30T07:27:49Z,Does anyone know what was the rationale to not include signal.h on WIN32 before? Does this break native windows builds?\n,https://github.com/bitcoin/bitcoin/pull/8112#issuecomment-222429374,222429374,
fanquake,2016-05-30T07:52:16Z,"This [commit](https://github.com/bitcoin/bitcoin/pull/1112/commits/ed6d0b5f852dc5f1c9407abecb5a9c6a7e42b4b2) that was part of [removing headers.h](https://github.com/bitcoin/bitcoin/pull/1112), moved signal.h into a WIN32 ifndef in main.cpp, but that doesn't have any specific reasoning.\n",https://github.com/bitcoin/bitcoin/pull/8112#issuecomment-222433843,222433843,
laanwj,2016-05-30T10:36:55Z,"If this does break native windows builds, we should do this differently: define our own type, which is a typedef of `sig_atomic_t` on UNIX-ish OSes, and `volatile int` or such on Windows, as there are no signals on that OS anyhow.\n",https://github.com/bitcoin/bitcoin/pull/8112#issuecomment-222464419,222464419,
laanwj,2016-05-30T10:38:19Z,Or could we simply use an c++11 atomic here? Is there something special about `sig_atomic_t` with signals?\n,https://github.com/bitcoin/bitcoin/pull/8112#issuecomment-222464638,222464638,
sipa,2016-05-30T10:40:15Z,"On Windows, do we even install signal handlers?\n",https://github.com/bitcoin/bitcoin/pull/8112#issuecomment-222464956,222464956,
laanwj,2016-05-30T10:45:54Z,No (windows uses a different signalling mechanism based on messages)\nSee also https://github.com/bitcoin/bitcoin/blob/master/src/init.cpp#L785\n,https://github.com/bitcoin/bitcoin/pull/8112#issuecomment-222465812,222465812,
sipa,2016-05-30T11:19:46Z,"Then perhaps we should not declare that variable as sig_atomic_t at all on Windows., as it won't be used for its intended purpose  anyway.\n",https://github.com/bitcoin/bitcoin/pull/8112#issuecomment-222471121,222471121,
laanwj,2016-05-30T11:23:05Z,"That's what I suggested above: define our own type for it, which is sig_atomic_t only on UNIXish OSes but something else on windows. I still think it should be atomic because at least `fRequestShutdown` is used to communicate between threads.\n\nWhich means maybe we should simply use a c++11 atomic there, which are available without problems on both Windows and Linux?\n",https://github.com/bitcoin/bitcoin/pull/8112#issuecomment-222471603,222471603,
sipa,2016-05-30T13:44:20Z,@laanwj I think that's the way to go; see #8123.\n,https://github.com/bitcoin/bitcoin/pull/8112#issuecomment-222495712,222495712,
laanwj,2016-05-31T13:19:18Z,Closing in favor of #8123\n,https://github.com/bitcoin/bitcoin/pull/8112#issuecomment-222685468,222685468,
