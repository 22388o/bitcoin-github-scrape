[
  {
    "sha": "b01784f0270dc20f8076ea4e46203c97b40b93ef",
    "node_id": "C_kwDOABII59oAKGIwMTc4NGYwMjcwZGMyMGY4MDc2ZWE0ZTQ2MjAzYzk3YjQwYjkzZWY",
    "commit": {
      "author": {
        "name": "glozow",
        "email": "gloriajzhao@gmail.com",
        "date": "2021-12-02T11:47:20Z"
      },
      "committer": {
        "name": "glozow",
        "email": "gloriajzhao@gmail.com",
        "date": "2021-12-02T12:04:17Z"
      },
      "message": "remove unnecessary casts and use braced initialization",
      "tree": {
        "sha": "74363de404894c2b42356171b4fcd1b88cc3a6dc",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/74363de404894c2b42356171b4fcd1b88cc3a6dc"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b01784f0270dc20f8076ea4e46203c97b40b93ef",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b01784f0270dc20f8076ea4e46203c97b40b93ef",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/b01784f0270dc20f8076ea4e46203c97b40b93ef",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b01784f0270dc20f8076ea4e46203c97b40b93ef/comments",
    "author": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "6acda4b00b3fc1bfac02f5de590e1a5386cbc779",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6acda4b00b3fc1bfac02f5de590e1a5386cbc779",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/6acda4b00b3fc1bfac02f5de590e1a5386cbc779"
      }
    ],
    "stats": {
      "total": 6,
      "additions": 3,
      "deletions": 3
    },
    "files": [
      {
        "sha": "1a4837839eebd768edd0eb779dfac723995a6fde",
        "filename": "src/validation.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b01784f0270dc20f8076ea4e46203c97b40b93ef/src/validation.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b01784f0270dc20f8076ea4e46203c97b40b93ef/src/validation.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/validation.cpp?ref=b01784f0270dc20f8076ea4e46203c97b40b93ef",
        "patch": "@@ -357,7 +357,7 @@ void CChainState::MaybeUpdateMempoolForReorg(\n         AssertLockHeld(::cs_main);\n         const CTransaction& tx = it->GetTx();\n         LockPoints lp = it->GetLockPoints();\n-        bool validLP = TestLockPointValidity(m_chain, &lp);\n+        const bool validLP{TestLockPointValidity(m_chain, &lp)};\n         CCoinsViewMemPool view_mempool(&CoinsTip(), *m_mempool);\n         if (!CheckFinalTx(m_chain.Tip(), tx, flags)\n             || !CheckSequenceLocks(m_chain.Tip(), view_mempool, tx, flags, &lp, validLP)) {\n@@ -371,8 +371,8 @@ void CChainState::MaybeUpdateMempoolForReorg(\n                     continue;\n                 const Coin &coin = CoinsTip().AccessCoin(txin.prevout);\n                 assert(!coin.IsSpent());\n-                unsigned int nMemPoolHeight = m_chain.Tip()->nHeight + 1;\n-                if (coin.IsSpent() || (coin.IsCoinBase() && ((signed long)nMemPoolHeight) - coin.nHeight < COINBASE_MATURITY)) {\n+                const auto mempool_spend_height{m_chain.Tip()->nHeight + 1};\n+                if (coin.IsSpent() || (coin.IsCoinBase() && mempool_spend_height - coin.nHeight < COINBASE_MATURITY)) {\n                     should_remove = true;\n                     break;\n                 }"
      }
    ]
  },
  {
    "sha": "c4efc4db5484910ac33ba41aa76f4e23639d6f33",
    "node_id": "C_kwDOABII59oAKGM0ZWZjNGRiNTQ4NDkxMGFjMzNiYTQxYWE3NmY0ZTIzNjM5ZDZmMzM",
    "commit": {
      "author": {
        "name": "glozow",
        "email": "gloriajzhao@gmail.com",
        "date": "2021-12-02T11:51:21Z"
      },
      "committer": {
        "name": "glozow",
        "email": "gloriajzhao@gmail.com",
        "date": "2021-12-02T14:45:18Z"
      },
      "message": "change TestLockPointValidity to take a const reference\n\nThe lockpoints are not changed in this function.\nThere is no reason to pass a pointer.",
      "tree": {
        "sha": "c657c042b503fd8272edb0dcbba07994058af9b2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c657c042b503fd8272edb0dcbba07994058af9b2"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c4efc4db5484910ac33ba41aa76f4e23639d6f33",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c4efc4db5484910ac33ba41aa76f4e23639d6f33",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/c4efc4db5484910ac33ba41aa76f4e23639d6f33",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c4efc4db5484910ac33ba41aa76f4e23639d6f33/comments",
    "author": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "b01784f0270dc20f8076ea4e46203c97b40b93ef",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b01784f0270dc20f8076ea4e46203c97b40b93ef",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/b01784f0270dc20f8076ea4e46203c97b40b93ef"
      }
    ],
    "stats": {
      "total": 15,
      "additions": 7,
      "deletions": 8
    },
    "files": [
      {
        "sha": "b4ec9bd67914f3824d33c738a9c1e874c0cac97d",
        "filename": "src/txmempool.cpp",
        "status": "modified",
        "additions": 5,
        "deletions": 6,
        "changes": 11,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c4efc4db5484910ac33ba41aa76f4e23639d6f33/src/txmempool.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c4efc4db5484910ac33ba41aa76f4e23639d6f33/src/txmempool.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/txmempool.cpp?ref=c4efc4db5484910ac33ba41aa76f4e23639d6f33",
        "patch": "@@ -73,16 +73,15 @@ struct update_lock_points\n     const LockPoints& lp;\n };\n \n-bool TestLockPointValidity(CChain& active_chain, const LockPoints* lp)\n+bool TestLockPointValidity(CChain& active_chain, const LockPoints& lp)\n {\n     AssertLockHeld(cs_main);\n-    assert(lp);\n     // If there are relative lock times then the maxInputBlock will be set\n     // If there are no relative lock times, the LockPoints don't depend on the chain\n-    if (lp->maxInputBlock) {\n+    if (lp.maxInputBlock) {\n         // Check whether active_chain is an extension of the block at which the LockPoints\n         // calculation was valid.  If not LockPoints are no longer valid\n-        if (!active_chain.Contains(lp->maxInputBlock)) {\n+        if (!active_chain.Contains(lp.maxInputBlock)) {\n             return false;\n         }\n     }\n@@ -649,8 +648,8 @@ void CTxMemPool::removeForReorg(CChain& chain, std::function<bool(txiter)> check\n     }\n     RemoveStaged(setAllRemoves, false, MemPoolRemovalReason::REORG);\n     for (indexed_transaction_set::const_iterator it = mapTx.begin(); it != mapTx.end(); it++) {\n-        LockPoints lp = it->GetLockPoints();\n-        if (!TestLockPointValidity(chain, &lp)) {\n+        const LockPoints lp{it->GetLockPoints()};\n+        if (!TestLockPointValidity(chain, lp)) {\n             mapTx.modify(it, update_lock_points(lp));\n         }\n     }"
      },
      {
        "sha": "6ba474e228b8dd767cad5f7b013c073212481db2",
        "filename": "src/txmempool.h",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c4efc4db5484910ac33ba41aa76f4e23639d6f33/src/txmempool.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c4efc4db5484910ac33ba41aa76f4e23639d6f33/src/txmempool.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/txmempool.h?ref=c4efc4db5484910ac33ba41aa76f4e23639d6f33",
        "patch": "@@ -53,7 +53,7 @@ struct LockPoints {\n /**\n  * Test whether the LockPoints height and time are still valid on the current chain\n  */\n-bool TestLockPointValidity(CChain& active_chain, const LockPoints* lp) EXCLUSIVE_LOCKS_REQUIRED(cs_main);\n+bool TestLockPointValidity(CChain& active_chain, const LockPoints& lp) EXCLUSIVE_LOCKS_REQUIRED(cs_main);\n \n struct CompareIteratorByHash {\n     // SFINAE for T where T is either a pointer type (e.g., a txiter) or a reference_wrapper<T>"
      },
      {
        "sha": "b532888f37359e456d2d6cca49f9a042dc14d922",
        "filename": "src/validation.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c4efc4db5484910ac33ba41aa76f4e23639d6f33/src/validation.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c4efc4db5484910ac33ba41aa76f4e23639d6f33/src/validation.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/validation.cpp?ref=c4efc4db5484910ac33ba41aa76f4e23639d6f33",
        "patch": "@@ -357,7 +357,7 @@ void CChainState::MaybeUpdateMempoolForReorg(\n         AssertLockHeld(::cs_main);\n         const CTransaction& tx = it->GetTx();\n         LockPoints lp = it->GetLockPoints();\n-        const bool validLP{TestLockPointValidity(m_chain, &lp)};\n+        const bool validLP{TestLockPointValidity(m_chain, lp)};\n         CCoinsViewMemPool view_mempool(&CoinsTip(), *m_mempool);\n         if (!CheckFinalTx(m_chain.Tip(), tx, flags)\n             || !CheckSequenceLocks(m_chain.Tip(), view_mempool, tx, flags, &lp, validLP)) {"
      }
    ]
  },
  {
    "sha": "ddd74ff65c471c5c25815ac0643d16ea0d51f58f",
    "node_id": "C_kwDOABII59oAKGRkZDc0ZmY2NWM0NzFjNWMyNTgxNWFjMDY0M2QxNmVhMGQ1MWY1OGY",
    "commit": {
      "author": {
        "name": "glozow",
        "email": "gloriajzhao@gmail.com",
        "date": "2021-12-02T14:46:24Z"
      },
      "committer": {
        "name": "glozow",
        "email": "gloriajzhao@gmail.com",
        "date": "2021-12-02T14:49:19Z"
      },
      "message": "clean up txmempool includes",
      "tree": {
        "sha": "7125fccb959bb998e4c67328324505840b00ba07",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7125fccb959bb998e4c67328324505840b00ba07"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ddd74ff65c471c5c25815ac0643d16ea0d51f58f",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ddd74ff65c471c5c25815ac0643d16ea0d51f58f",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/ddd74ff65c471c5c25815ac0643d16ea0d51f58f",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ddd74ff65c471c5c25815ac0643d16ea0d51f58f/comments",
    "author": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "c4efc4db5484910ac33ba41aa76f4e23639d6f33",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c4efc4db5484910ac33ba41aa76f4e23639d6f33",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/c4efc4db5484910ac33ba41aa76f4e23639d6f33"
      }
    ],
    "stats": {
      "total": 5,
      "additions": 3,
      "deletions": 2
    },
    "files": [
      {
        "sha": "fcfc27d38ee8157b6f0be5fbf8c741f96461343d",
        "filename": "src/txmempool.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/ddd74ff65c471c5c25815ac0643d16ea0d51f58f/src/txmempool.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/ddd74ff65c471c5c25815ac0643d16ea0d51f58f/src/txmempool.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/txmempool.cpp?ref=ddd74ff65c471c5c25815ac0643d16ea0d51f58f",
        "patch": "@@ -5,6 +5,7 @@\n \n #include <txmempool.h>\n \n+#include <chain.h>\n #include <coins.h>\n #include <consensus/consensus.h>\n #include <consensus/tx_verify.h>"
      },
      {
        "sha": "f87ecc9cd08446c30e2b238fe8d8059e8269b214",
        "filename": "src/txmempool.h",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/ddd74ff65c471c5c25815ac0643d16ea0d51f58f/src/txmempool.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/ddd74ff65c471c5c25815ac0643d16ea0d51f58f/src/txmempool.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/txmempool.h?ref=ddd74ff65c471c5c25815ac0643d16ea0d51f58f",
        "patch": "@@ -14,7 +14,6 @@\n #include <utility>\n #include <vector>\n \n-#include <chain.h>\n #include <coins.h>\n #include <consensus/amount.h>\n #include <indirectmap.h>\n@@ -26,12 +25,13 @@\n #include <util/epochguard.h>\n #include <util/hasher.h>\n \n-#include <boost/multi_index_container.hpp>\n #include <boost/multi_index/hashed_index.hpp>\n #include <boost/multi_index/ordered_index.hpp>\n #include <boost/multi_index/sequenced_index.hpp>\n+#include <boost/multi_index_container.hpp>\n \n class CBlockIndex;\n+class CChain;\n class CChainState;\n extern RecursiveMutex cs_main;\n "
      }
    ]
  }
]