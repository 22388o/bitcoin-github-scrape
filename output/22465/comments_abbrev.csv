fanquake,2021-07-16 06:06:37,Concept ACK - moving back to vanilla / upstream Guix is good. I take that all of your patches have now made it back to upstream?,https://github.com/bitcoin/bitcoin/pull/22465#issuecomment-881201418,881201418,
dongcarl,2021-07-16 06:14:07,"> I take that all of your patches have now made it back to upstream?\n\nYes, the [outstanding ones in 490e39f](https://github.com/dongcarl/guix/compare/490e39ff303f4f6873a04bfb8253755bdae1b29c) have made it upstream as of version-1.3.0.\n\nNote that there are also a few other changes that made it in **_after_** version-1.3.0 that would remove some of our custom patching in `contrib/guix/patche",https://github.com/bitcoin/bitcoin/pull/22465#issuecomment-881204755,881204755,
fanquake,2021-07-16 13:23:49,"Guix builds (x86_64):\n```bash\n9dce51ed2539581adf2b14c66f5945827b3b0b78760f5f8e74c45e86ca231aec  guix-build-e6a94d44469f/output/aarch64-linux-gnu/SHA256SUMS.part\nf7048fd647c75fdf0dfbaa1929627d66cad904e4e4d756f621e1479b6bf68030  guix-build-e6a94d44469f/output/aarch64-linux-gnu/bitcoin-e6a94d44469f-aarch64-linux-gnu-debug.tar.gz\nab72c7d0d457bfb0a87a7dd434049c98c16b0e1be4b31bdf116c6a56140e6bcc",https://github.com/bitcoin/bitcoin/pull/22465#issuecomment-881447481,881447481,
hebasto,2021-07-16 18:05:32,Concept ACK.,https://github.com/bitcoin/bitcoin/pull/22465#issuecomment-881625280,881625280,
dongcarl,2021-07-17 02:51:01,"Matching!\n```\n9dce51ed2539581adf2b14c66f5945827b3b0b78760f5f8e74c45e86ca231aec  guix-build-e6a94d44469f/output/aarch64-linux-gnu/SHA256SUMS.part\nf7048fd647c75fdf0dfbaa1929627d66cad904e4e4d756f621e1479b6bf68030  guix-build-e6a94d44469f/output/aarch64-linux-gnu/bitcoin-e6a94d44469f-aarch64-linux-gnu-debug.tar.gz\nab72c7d0d457bfb0a87a7dd434049c98c16b0e1be4b31bdf116c6a56140e6bcc  guix-build-e6a",https://github.com/bitcoin/bitcoin/pull/22465#issuecomment-881804988,881804988,
hebasto,2021-07-17 07:36:09,"#### Guix builds:\n```\n$ find guix-build-$(git rev-parse --short=12 HEAD)/output/ -type f -print0 | env LC_ALL=C sort -z | xargs -r0 sha256sum\n9dce51ed2539581adf2b14c66f5945827b3b0b78760f5f8e74c45e86ca231aec  guix-build-e6a94d44469f/output/aarch64-linux-gnu/SHA256SUMS.part\nf7048fd647c75fdf0dfbaa1929627d66cad904e4e4d756f621e1479b6bf68030  guix-build-e6a94d44469f/output/aarch64-linux-gnu/bitc",https://github.com/bitcoin/bitcoin/pull/22465#issuecomment-881849902,881849902,
DrahtBot,2021-07-18 00:03:03,<!--9cd9c72976c961c55c7acef8f6ba82cd-->\n### Guix builds\n\n| File | commit a88fa1a555195af6543cdc802e8e1c2e1668dd38<br>(master) | commit 23bae45037732aa919aee93817d1b9ce71d61661<br>(master and this pull) |\n|--|--|--|\n| SHA256SUMS.part | [`53cf4ee746d0b25d...`](https://drahtbot.space/guix/bitcoin/bitcoin/a88fa1a555195af6543cdc802e8e1c2e1668dd38/SHA256SUMS.part) | [`a2f47c48bbc9292e...`](https://,https://github.com/bitcoin/bitcoin/pull/22465#issuecomment-881976127,881976127,
luke-jr,2021-07-18 05:54:08,"> - Use 4.9 for all others (second-oldest LTS release, released in  combination with glibc glibc 2.24 in Debian stretch)\n\nBut we support back to glibc 2.17...? (And it supports much older kernels)",https://github.com/bitcoin/bitcoin/pull/22465#issuecomment-882003571,882003571,
laanwj,2021-07-18 14:23:50,Kernel 4.19 for RISC-V 64 bit and 4.9 for the rest SGTM.,https://github.com/bitcoin/bitcoin/pull/22465#issuecomment-882064712,882064712,
MarcoFalke,2021-07-19 12:03:06,review ACK e6a94d44469f90f4dc88a07a5a8587730811c705 to change to vanilla guix. Did not review the kernel change.,https://github.com/bitcoin/bitcoin/pull/22465#issuecomment-882491653,882491653,
dongcarl,2021-07-19 22:14:50,"> > * Use 4.9 for all others (second-oldest LTS release, released in  combination with glibc glibc 2.24 in Debian stretch)\n> \n> But we support back to glibc 2.17...? (And it supports much older kernels)\n\nWith Gitian builds on Focal, we were building against kernel header version 5.4: https://packages.ubuntu.com/focal/linux-libc-dev, https://packages.ubuntu.com/focal/linux-libc-dev-riscv64-",https://github.com/bitcoin/bitcoin/pull/22465#issuecomment-882896758,882896758,
luke-jr,2021-07-19 23:55:20,"0.21.1 used bionic, not focal. It appears to have Linux 4.15, so yes, it is still a compat improvement to use 4.9.\n\nI don't care strongly either way, just making an observation.",https://github.com/bitcoin/bitcoin/pull/22465#issuecomment-882939855,882939855,
laanwj,2021-07-20 03:59:55,"As said in #bitcoin-core-dev I don't think it should matter much (for backwards compatibility) what version of the kernel we build against as long as libc is linked dynamically. That said it's good to settle on a version to build against, just to avoid variability that causes unpredictable issues.\n\nThe syscalls we use directly are:\n- `getrandom` was introduced in kernel 3.17\n- `perf_event_",https://github.com/bitcoin/bitcoin/pull/22465#issuecomment-883032338,883032338,
luke-jr,2021-07-20 06:06:08,">I don't think it should matter much (for backwards compatibility) what version of the kernel we build against as long as libc is linked dynamically.\n\nUnfortunately, Boost explicitly doesn't support running with kernels older than the one used to build. There is an actual bug of this nature that affects Bitcoin Core in some unusual cases. #21550 (However, the version we use in depends *should*",https://github.com/bitcoin/bitcoin/pull/22465#issuecomment-883097793,883097793,
