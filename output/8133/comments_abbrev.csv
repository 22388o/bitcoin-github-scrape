MarcoFalke,2016-06-02T17:11:35Z,Concept ACK\n,https://github.com/bitcoin/bitcoin/pull/8133#issuecomment-223357950,223357950,
theuni,2016-06-02T17:57:08Z,"Generally speaking, if it's used as-is from git, it's srcdir. If it's generated or pre-processed, it's builddir.\n\nPut another way: after checkout, think of srcdir as read-only. If anything is modified, it must happen in builddir.\n",https://github.com/bitcoin/bitcoin/pull/8133#issuecomment-223370903,223370903,
laanwj,2016-06-03T13:24:01Z,utACK 142ffc7\n,https://github.com/bitcoin/bitcoin/pull/8133#issuecomment-223577438,223577438,
MarcoFalke,2016-06-03T15:39:13Z,"`make check` fails with:\n\n``` py\nRunning test/bitcoin-util-test.py...\nTraceback (most recent call last):\n  File ""../../src/test/bitcoin-util-test.py"", line 8, in <module>\n    import buildenv\nImportError: bad magic number in 'buildenv': b'\x03\xf3\r\n'\n```\n",https://github.com/bitcoin/bitcoin/pull/8133#issuecomment-223613764,223613764,
theuni,2016-06-03T15:44:58Z,"@MarcoFalke Yes, I just saw that as well while trying to answer the question above. I'm not sure why Travis passes.\n\nI'll fix that one up.\n",https://github.com/bitcoin/bitcoin/pull/8133#issuecomment-223615283,223615283,
theuni,2016-06-03T18:16:45Z,"Pushed a quick fix for @MarcoFalke's problem. I'm not sure if we really need that or not, but it's probably better than each dev running into the problem and googling for themselves.\n\nThe issue is this: previous invocations of python2 in an in-tree build would leave a buildenv.pyc hanging around in srcdir. We prepend python's search path with builddir, but for some reason it ends up finding the ",https://github.com/bitcoin/bitcoin/pull/8133#issuecomment-223653579,223653579,
MarcoFalke,2016-06-03T18:48:29Z,Tested ACK 340012d\n,https://github.com/bitcoin/bitcoin/pull/8133#issuecomment-223661788,223661788,
luke-jr,2016-06-05T17:38:43Z,"Extensively-tested, with the following results:\n\nI built, `make check`'d, and confirmed the reported version numbers for:\n1. Before this PR (plus #7522), built in a clean git clone: v0.12.99.0-fd89d8e\n2. Before this PR (plus #7522), built in a clean dist dir: v0.12.99.0-gfd89d8e\n3. Before this PR (plus #7522), built in a clean dist dir under a foreign git checkout: v0.12.99.0-6862d12\n4. With",https://github.com/bitcoin/bitcoin/pull/8133#issuecomment-223826329,223826329,
laanwj,2016-06-06T08:17:26Z,BTW seems `make translate` also needs changes to work out-of-tree. Not necessarily in this pull.\n,https://github.com/bitcoin/bitcoin/pull/8133#issuecomment-223895335,223895335,
laanwj,2016-06-06T08:23:04Z,"Looks like this is enough:\n\n``` patch\ndiff --git a/src/Makefile.qt.include b/src/Makefile.qt.include\nindex 3b39919..327a3d1 100644\n--- a/src/Makefile.qt.include\n+++ b/src/Makefile.qt.include\n@@ -390,13 +390,13 @@ QT_QM=$(QT_TS:.ts=.qm)\n\n SECONDARY: $(QT_QM)\n\n-qt/bitcoinstrings.cpp: $(libbitcoin_server_a_SOURCES) $(libbitcoin_wallet_a_SOURCES)\n+$(srcdir)/qt/bitcoinstrings.cpp: $(libbitc",https://github.com/bitcoin/bitcoin/pull/8133#issuecomment-223896424,223896424,
theuni,2016-06-06T13:34:53Z,"@luke-jr Whoa, that's great feedback! Thanks for the testing. I'm having a look at the ""-dirty"" issue.\n\n@laanwj Thanks, I'll add that here.\n",https://github.com/bitcoin/bitcoin/pull/8133#issuecomment-223960182,223960182,
laanwj,2016-06-09T05:25:08Z,Let's try to get this merged soon.\nI can PR the `make translate` change separately if that's mroe convenient.\n,https://github.com/bitcoin/bitcoin/pull/8133#issuecomment-224802964,224802964,
theuni,2016-06-09T20:50:15Z,"@luke-jr I believe I've found the issue here. When you ""chown -R root:root ."", you're setting the git index to read-only. That makes ""git diff"" fail to update the index, which makes the diff-index fail.\n\nFor the sake of this PR, I'm ok with that not working correctly, since git is in a pretty bad state.\n",https://github.com/bitcoin/bitcoin/pull/8133#issuecomment-225022190,225022190,
laanwj,2016-06-10T08:01:10Z,> since git is in a pretty bad state\n\nThat sounds ominous. Time to switch to mercurial or bzr? :-)\n,https://github.com/bitcoin/bitcoin/pull/8133#issuecomment-225117813,225117813,
laanwj,2016-06-10T08:04:50Z,"""works for me"" ACK https://github.com/bitcoin/bitcoin/pull/8133/commits/d1a3d570e5f4e59683cde9ccc0ac10d012ef7070\n",https://github.com/bitcoin/bitcoin/pull/8133#issuecomment-225118516,225118516,
theuni,2016-06-10T08:41:13Z,"Haha. That was a half-complete thought as usual.\n\nShould read: ""I'm ok with that not working correctly, since if you're hitting this case, your git repo is already unreliable"".\n",https://github.com/bitcoin/bitcoin/pull/8133#issuecomment-225125334,225125334,
MarcoFalke,2016-06-02T17:11:21Z,Note to myself: Does the cache (from `create_cache.py` et al.) end up in SRCDIR now?\n,https://github.com/bitcoin/bitcoin/pull/8133#discussion_r65580075,65580075,qa/pull-tester/rpc-tests.py
laanwj,2016-06-03T13:49:51Z,Wasn't it always (and still is) the case that the cache ends up in the current directory when the tests are launched?\n,https://github.com/bitcoin/bitcoin/pull/8133#discussion_r65709677,65709677,qa/pull-tester/rpc-tests.py
MarcoFalke,2016-06-03T14:45:32Z,"Correct.\n\nThough, this should be changed. Having different caches lying around in folders that happen to be your working dir right then is misleading at best.\n\nAnyway, this is unrelated to this pull.\n",https://github.com/bitcoin/bitcoin/pull/8133#discussion_r65719097,65719097,qa/pull-tester/rpc-tests.py
theuni,2016-06-03T15:25:36Z,"I'm having a hard time answering that question because of the symlink interaction with Python. builddir/rpc-tests.py is now a symlink to sourcedir/rpc-tests.py because it needs to be writable. But that makes the definition of ""current dir"" hazy.\n\n@MarcoFalke I suppose it would be best to make the location explicit.\n",https://github.com/bitcoin/bitcoin/pull/8133#discussion_r65726075,65726075,qa/pull-tester/rpc-tests.py
MarcoFalke,2016-06-03T15:38:07Z,"Sure, this is on my list of cleanups. If no one beats me to it, you can expect it some time after feature freeze. ;)\n",https://github.com/bitcoin/bitcoin/pull/8133#discussion_r65728271,65728271,qa/pull-tester/rpc-tests.py
MarcoFalke,2016-06-03T18:53:16Z,Is it safe to assume everyone runs the tests from the root of buildir?\n,https://github.com/bitcoin/bitcoin/pull/8133#discussion_r65758242,65758242,qa/pull-tester/rpc-tests.py
luke-jr,2016-06-03T20:38:03Z,"Probably not, but FWIW at least I do...\n",https://github.com/bitcoin/bitcoin/pull/8133#discussion_r65771799,65771799,qa/pull-tester/rpc-tests.py
btcdrak,2016-06-03T21:33:20Z,I do too.\n,https://github.com/bitcoin/bitcoin/pull/8133#discussion_r65779040,65779040,qa/pull-tester/rpc-tests.py
sipa,2016-06-03T21:38:49Z,"Heh, I run them from qa/pull-tester. I had no idea you could run them from the root...\n",https://github.com/bitcoin/bitcoin/pull/8133#discussion_r65779721,65779721,qa/pull-tester/rpc-tests.py
MarcoFalke,2016-06-04T05:57:18Z,Not sure how to fix this...\n\nWhat about byte-compiling the rpc-tests.py instead of linking?\n,https://github.com/bitcoin/bitcoin/pull/8133#discussion_r65797981,65797981,qa/pull-tester/rpc-tests.py
laanwj,2016-06-13T10:29:07Z,"> Heh, I run them from qa/pull-tester. I had no idea you could run them from the root...\n\nSame here. But running from the root is ok with me.\n",https://github.com/bitcoin/bitcoin/pull/8133#discussion_r66770338,66770338,qa/pull-tester/rpc-tests.py
