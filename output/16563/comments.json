[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/519177938",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16563#issuecomment-519177938",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16563",
    "id": 519177938,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxOTE3NzkzOA==",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?u=5ff13e375b40ea55ecd3c108337dd6a23f68eddf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-07T16:44:37Z",
    "updated_at": "2019-08-07T16:44:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "Welcome as a contributor @mzumsande!\r\n\r\nWould you mind adding a comment describing the bug-turned-feature to give some context to this change? :-)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/519177938/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/519179503",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16563#issuecomment-519179503",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16563",
    "id": 519179503,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxOTE3OTUwMw==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-07T16:49:04Z",
    "updated_at": "2019-08-07T16:49:04Z",
    "author_association": "MEMBER",
    "body": "Maybe this:\r\n\r\n*  AddTimeData will never update nTimeOffset past 199 samples #4521 \r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/519179503/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/519182126",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16563#issuecomment-519182126",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16563",
    "id": 519182126,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxOTE4MjEyNg==",
    "user": {
      "login": "mzumsande",
      "id": 48763452,
      "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
      "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mzumsande",
      "html_url": "https://github.com/mzumsande",
      "followers_url": "https://api.github.com/users/mzumsande/followers",
      "following_url": "https://api.github.com/users/mzumsande/following{/other_user}",
      "gists_url": "https://api.github.com/users/mzumsande/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
      "organizations_url": "https://api.github.com/users/mzumsande/orgs",
      "repos_url": "https://api.github.com/users/mzumsande/repos",
      "events_url": "https://api.github.com/users/mzumsande/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mzumsande/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-07T16:56:18Z",
    "updated_at": "2019-08-07T17:00:20Z",
    "author_association": "CONTRIBUTOR",
    "body": "Yes, I meant #4521 -  there is also a comment about this in the source code of timedata.cpp which I referenced in the test. \r\n\r\nBasically, the method of getting offsets from peers will become ineffective after it has reached 200 samples, because it only attempts to change `nTimeOffset` when it the filter size is odd. So `nTimeOffset` will never be changed after offsets from 200 peers have been received (unless you restart the node).",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/519182126/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/519184989",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16563#issuecomment-519184989",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16563",
    "id": 519184989,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxOTE4NDk4OQ==",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?u=5ff13e375b40ea55ecd3c108337dd6a23f68eddf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-07T17:03:52Z",
    "updated_at": "2019-08-07T17:03:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "@mzumsande Could you add a comment to `BOOST_AUTO_TEST_CASE(addtimedata)` describing the intended behaviour and the rationale behind doing so?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/519184989/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/519224562",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16563#issuecomment-519224562",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16563",
    "id": 519224562,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxOTIyNDU2Mg==",
    "user": {
      "login": "mzumsande",
      "id": 48763452,
      "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
      "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mzumsande",
      "html_url": "https://github.com/mzumsande",
      "followers_url": "https://api.github.com/users/mzumsande/followers",
      "following_url": "https://api.github.com/users/mzumsande/following{/other_user}",
      "gists_url": "https://api.github.com/users/mzumsande/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
      "organizations_url": "https://api.github.com/users/mzumsande/orgs",
      "repos_url": "https://api.github.com/users/mzumsande/repos",
      "events_url": "https://api.github.com/users/mzumsande/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mzumsande/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-07T18:52:13Z",
    "updated_at": "2019-08-07T18:52:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "@practicalswift  I added a comment about this and also adjusted the other comments to make it more clear what is tested.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/519224562/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/519296080",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16563#issuecomment-519296080",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16563",
    "id": 519296080,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxOTI5NjA4MA==",
    "user": {
      "login": "mzumsande",
      "id": 48763452,
      "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
      "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mzumsande",
      "html_url": "https://github.com/mzumsande",
      "followers_url": "https://api.github.com/users/mzumsande/followers",
      "following_url": "https://api.github.com/users/mzumsande/following{/other_user}",
      "gists_url": "https://api.github.com/users/mzumsande/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
      "organizations_url": "https://api.github.com/users/mzumsande/orgs",
      "repos_url": "https://api.github.com/users/mzumsande/repos",
      "events_url": "https://api.github.com/users/mzumsande/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mzumsande/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-07T22:47:15Z",
    "updated_at": "2019-08-07T22:47:15Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks @ariard for the review, I adressed your comments.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/519296080/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/519326663",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16563#issuecomment-519326663",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16563",
    "id": 519326663,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxOTMyNjY2Mw==",
    "user": {
      "login": "ariard",
      "id": 23310655,
      "node_id": "MDQ6VXNlcjIzMzEwNjU1",
      "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ariard",
      "html_url": "https://github.com/ariard",
      "followers_url": "https://api.github.com/users/ariard/followers",
      "following_url": "https://api.github.com/users/ariard/following{/other_user}",
      "gists_url": "https://api.github.com/users/ariard/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ariard/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
      "organizations_url": "https://api.github.com/users/ariard/orgs",
      "repos_url": "https://api.github.com/users/ariard/repos",
      "events_url": "https://api.github.com/users/ariard/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ariard/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-08T01:27:04Z",
    "updated_at": "2019-08-08T01:27:04Z",
    "author_association": "MEMBER",
    "body": "ACK 50a9f58.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/519326663/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/520875391",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16563#issuecomment-520875391",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16563",
    "id": 520875391,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMDg3NTM5MQ==",
    "user": {
      "login": "mzumsande",
      "id": 48763452,
      "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
      "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mzumsande",
      "html_url": "https://github.com/mzumsande",
      "followers_url": "https://api.github.com/users/mzumsande/followers",
      "following_url": "https://api.github.com/users/mzumsande/following{/other_user}",
      "gists_url": "https://api.github.com/users/mzumsande/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
      "organizations_url": "https://api.github.com/users/mzumsande/orgs",
      "repos_url": "https://api.github.com/users/mzumsande/repos",
      "events_url": "https://api.github.com/users/mzumsande/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mzumsande/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-13T15:07:25Z",
    "updated_at": "2019-08-13T15:07:25Z",
    "author_association": "CONTRIBUTOR",
    "body": "Addressed nits by @promag.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/520875391/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/521225929",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16563#issuecomment-521225929",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16563",
    "id": 521225929,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUyMTIyNTkyOQ==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-14T12:30:02Z",
    "updated_at": "2019-08-14T12:30:02Z",
    "author_association": "MEMBER",
    "body": "ACK 7cd069d8ef900c6c6b904ddd6fbd64e14bd0f53e, thanks for adding a test",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/521225929/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/311741461",
    "pull_request_review_id": 272201754,
    "id": 311741461,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMTc0MTQ2MQ==",
    "diff_hunk": "@@ -34,4 +38,58 @@ BOOST_AUTO_TEST_CASE(util_MedianFilter)\n     BOOST_CHECK_EQUAL(filter.median(), 7);\n }\n \n+void MultiAddTimeData(int n, int64_t offset)\n+{\n+    static int cnt = 0;\n+    for (int i = 0; i < n; ++i) {\n+        CNetAddr addr;\n+        addr.SetInternal(std::to_string(++cnt));\n+        AddTimeData(addr, offset);\n+    }\n+}\n+\n+\n+BOOST_AUTO_TEST_CASE(addtimedata)\n+{\n+    BOOST_CHECK_EQUAL(GetTimeOffset(), 0);\n+\n+    //Part 1: Add large offsets to test a warning message that our clock may be wrong.\n+    MultiAddTimeData(3, DEFAULT_MAX_TIME_ADJUSTMENT + 1); //filter size 4, initialized with 0",
    "path": "src/test/timedata_tests.cpp",
    "position": null,
    "original_position": 34,
    "commit_id": "7cd069d8ef900c6c6b904ddd6fbd64e14bd0f53e",
    "original_commit_id": "cf02a00427d04820b898355cd67345321b71a13d",
    "user": {
      "login": "ariard",
      "id": 23310655,
      "node_id": "MDQ6VXNlcjIzMzEwNjU1",
      "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ariard",
      "html_url": "https://github.com/ariard",
      "followers_url": "https://api.github.com/users/ariard/followers",
      "following_url": "https://api.github.com/users/ariard/following{/other_user}",
      "gists_url": "https://api.github.com/users/ariard/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ariard/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
      "organizations_url": "https://api.github.com/users/ariard/orgs",
      "repos_url": "https://api.github.com/users/ariard/repos",
      "events_url": "https://api.github.com/users/ariard/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ariard/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "You add 3, but filter size is 4, is vTimeOffsets seeded with a first sample somewhere in test setup ? ",
    "created_at": "2019-08-07T20:10:48Z",
    "updated_at": "2019-08-13T15:06:14Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16563#discussion_r311741461",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16563",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/311741461"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16563#discussion_r311741461"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16563"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/311741461/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 57,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/311741998",
    "pull_request_review_id": 272201754,
    "id": 311741998,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMTc0MTk5OA==",
    "diff_hunk": "@@ -34,4 +38,58 @@ BOOST_AUTO_TEST_CASE(util_MedianFilter)\n     BOOST_CHECK_EQUAL(filter.median(), 7);\n }\n \n+void MultiAddTimeData(int n, int64_t offset)\n+{\n+    static int cnt = 0;\n+    for (int i = 0; i < n; ++i) {\n+        CNetAddr addr;\n+        addr.SetInternal(std::to_string(++cnt));\n+        AddTimeData(addr, offset);\n+    }\n+}\n+\n+\n+BOOST_AUTO_TEST_CASE(addtimedata)\n+{\n+    BOOST_CHECK_EQUAL(GetTimeOffset(), 0);\n+\n+    //Part 1: Add large offsets to test a warning message that our clock may be wrong.\n+    MultiAddTimeData(3, DEFAULT_MAX_TIME_ADJUSTMENT + 1); //filter size 4, initialized with 0\n+\n+    noui_suppress();\n+    MultiAddTimeData(1, DEFAULT_MAX_TIME_ADJUSTMENT + 1); //filter size 5\n+    noui_reconnect();\n+\n+    std::string warning = GetWarnings(\"gui\");\n+    BOOST_CHECK(warning.find(\"clock is wrong\") != std::string::npos);\n+\n+    // nTimeOffset is not changed if the median of offsets exceeds DEFAULT_MAX_TIME_ADJUSTMENT\n+    BOOST_CHECK_EQUAL(GetTimeOffset(), 0);\n+\n+    // Part 2: Test positive and negative medians by adding more offsets\n+    MultiAddTimeData(4, 100); // filter size 9\n+    BOOST_CHECK_EQUAL(GetTimeOffset(), 100);\n+    MultiAddTimeData(10, -100); //filter size 19\n+    BOOST_CHECK_EQUAL(GetTimeOffset(), -100);\n+\n+    // Part 3: Test behaviour when filter has reached maximum number of offsets\n+    const int MAX_SAMPLES = 200;\n+    int nfill = (MAX_SAMPLES - 3 - 19) / 2; //89\n+    MultiAddTimeData(nfill, 100);\n+    MultiAddTimeData(nfill, -100); //filter size MAX_SAMPLES - 3\n+    BOOST_CHECK_EQUAL(GetTimeOffset(), -100);\n+\n+    MultiAddTimeData(2, 100); //filter size MAX_SAMPLES -1\n+    BOOST_CHECK_EQUAL(GetTimeOffset(), 0);\n+\n+    // After the number of offsets has reached MAX_SAMPLES -1 (=199), nTimeOffset will never change\n+    // because it is only updated when the number of elements in the filter becomes odd. It was decided\n+    // not to fix this because it prevents possible attacks. See the comment in AddTimeData() or issue #4521\n+    // for a more detailed explanation.\n+    MultiAddTimeData(MAX_SAMPLES, 200); // filter median is 200, but nTimeOffset will not change",
    "path": "src/test/timedata_tests.cpp",
    "position": null,
    "original_position": 66,
    "commit_id": "7cd069d8ef900c6c6b904ddd6fbd64e14bd0f53e",
    "original_commit_id": "cf02a00427d04820b898355cd67345321b71a13d",
    "user": {
      "login": "ariard",
      "id": 23310655,
      "node_id": "MDQ6VXNlcjIzMzEwNjU1",
      "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ariard",
      "html_url": "https://github.com/ariard",
      "followers_url": "https://api.github.com/users/ariard/followers",
      "following_url": "https://api.github.com/users/ariard/following{/other_user}",
      "gists_url": "https://api.github.com/users/ariard/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ariard/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
      "organizations_url": "https://api.github.com/users/ariard/orgs",
      "repos_url": "https://api.github.com/users/ariard/repos",
      "events_url": "https://api.github.com/users/ariard/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ariard/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Shouldn't be better to try to increment by one instead of MAX_SAMPLES to see if threshold effect happens as expected?",
    "created_at": "2019-08-07T20:12:07Z",
    "updated_at": "2019-08-13T15:06:14Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16563#discussion_r311741998",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16563",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/311741998"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16563#discussion_r311741998"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16563"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/311741998/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 89,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/311784227",
    "pull_request_review_id": 272255593,
    "id": 311784227,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMTc4NDIyNw==",
    "diff_hunk": "@@ -34,4 +38,58 @@ BOOST_AUTO_TEST_CASE(util_MedianFilter)\n     BOOST_CHECK_EQUAL(filter.median(), 7);\n }\n \n+void MultiAddTimeData(int n, int64_t offset)\n+{\n+    static int cnt = 0;\n+    for (int i = 0; i < n; ++i) {\n+        CNetAddr addr;\n+        addr.SetInternal(std::to_string(++cnt));\n+        AddTimeData(addr, offset);\n+    }\n+}\n+\n+\n+BOOST_AUTO_TEST_CASE(addtimedata)\n+{\n+    BOOST_CHECK_EQUAL(GetTimeOffset(), 0);\n+\n+    //Part 1: Add large offsets to test a warning message that our clock may be wrong.\n+    MultiAddTimeData(3, DEFAULT_MAX_TIME_ADJUSTMENT + 1); //filter size 4, initialized with 0",
    "path": "src/test/timedata_tests.cpp",
    "position": null,
    "original_position": 34,
    "commit_id": "7cd069d8ef900c6c6b904ddd6fbd64e14bd0f53e",
    "original_commit_id": "cf02a00427d04820b898355cd67345321b71a13d",
    "user": {
      "login": "mzumsande",
      "id": 48763452,
      "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
      "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mzumsande",
      "html_url": "https://github.com/mzumsande",
      "followers_url": "https://api.github.com/users/mzumsande/followers",
      "following_url": "https://api.github.com/users/mzumsande/following{/other_user}",
      "gists_url": "https://api.github.com/users/mzumsande/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
      "organizations_url": "https://api.github.com/users/mzumsande/orgs",
      "repos_url": "https://api.github.com/users/mzumsande/repos",
      "events_url": "https://api.github.com/users/mzumsande/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mzumsande/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Not in the test, but in `timedata.cpp`: vTimeOffsets is static and initialized with one element, offset 0:`static CMedianFilter<int64_t> vTimeOffsets(BITCOIN_TIMEDATA_MAX_SAMPLES, 0)`;\r\nI later add the same number of positive and negative elements so that this initial 0 element stays the median at the end. Will change the comment `initialized with 0` to a better wording.",
    "created_at": "2019-08-07T22:09:09Z",
    "updated_at": "2019-08-13T15:06:14Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16563#discussion_r311784227",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16563",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/311784227"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16563#discussion_r311784227"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16563"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/311784227/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 57,
    "side": "RIGHT",
    "in_reply_to_id": 311741461
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/311785537",
    "pull_request_review_id": 272257211,
    "id": 311785537,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMTc4NTUzNw==",
    "diff_hunk": "@@ -34,4 +38,58 @@ BOOST_AUTO_TEST_CASE(util_MedianFilter)\n     BOOST_CHECK_EQUAL(filter.median(), 7);\n }\n \n+void MultiAddTimeData(int n, int64_t offset)\n+{\n+    static int cnt = 0;\n+    for (int i = 0; i < n; ++i) {\n+        CNetAddr addr;\n+        addr.SetInternal(std::to_string(++cnt));\n+        AddTimeData(addr, offset);\n+    }\n+}\n+\n+\n+BOOST_AUTO_TEST_CASE(addtimedata)\n+{\n+    BOOST_CHECK_EQUAL(GetTimeOffset(), 0);\n+\n+    //Part 1: Add large offsets to test a warning message that our clock may be wrong.\n+    MultiAddTimeData(3, DEFAULT_MAX_TIME_ADJUSTMENT + 1); //filter size 4, initialized with 0\n+\n+    noui_suppress();\n+    MultiAddTimeData(1, DEFAULT_MAX_TIME_ADJUSTMENT + 1); //filter size 5\n+    noui_reconnect();\n+\n+    std::string warning = GetWarnings(\"gui\");\n+    BOOST_CHECK(warning.find(\"clock is wrong\") != std::string::npos);\n+\n+    // nTimeOffset is not changed if the median of offsets exceeds DEFAULT_MAX_TIME_ADJUSTMENT\n+    BOOST_CHECK_EQUAL(GetTimeOffset(), 0);\n+\n+    // Part 2: Test positive and negative medians by adding more offsets\n+    MultiAddTimeData(4, 100); // filter size 9\n+    BOOST_CHECK_EQUAL(GetTimeOffset(), 100);\n+    MultiAddTimeData(10, -100); //filter size 19\n+    BOOST_CHECK_EQUAL(GetTimeOffset(), -100);\n+\n+    // Part 3: Test behaviour when filter has reached maximum number of offsets\n+    const int MAX_SAMPLES = 200;\n+    int nfill = (MAX_SAMPLES - 3 - 19) / 2; //89\n+    MultiAddTimeData(nfill, 100);\n+    MultiAddTimeData(nfill, -100); //filter size MAX_SAMPLES - 3\n+    BOOST_CHECK_EQUAL(GetTimeOffset(), -100);\n+\n+    MultiAddTimeData(2, 100); //filter size MAX_SAMPLES -1\n+    BOOST_CHECK_EQUAL(GetTimeOffset(), 0);\n+\n+    // After the number of offsets has reached MAX_SAMPLES -1 (=199), nTimeOffset will never change\n+    // because it is only updated when the number of elements in the filter becomes odd. It was decided\n+    // not to fix this because it prevents possible attacks. See the comment in AddTimeData() or issue #4521\n+    // for a more detailed explanation.\n+    MultiAddTimeData(MAX_SAMPLES, 200); // filter median is 200, but nTimeOffset will not change",
    "path": "src/test/timedata_tests.cpp",
    "position": null,
    "original_position": 66,
    "commit_id": "7cd069d8ef900c6c6b904ddd6fbd64e14bd0f53e",
    "original_commit_id": "cf02a00427d04820b898355cd67345321b71a13d",
    "user": {
      "login": "mzumsande",
      "id": 48763452,
      "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
      "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mzumsande",
      "html_url": "https://github.com/mzumsande",
      "followers_url": "https://api.github.com/users/mzumsande/followers",
      "following_url": "https://api.github.com/users/mzumsande/following{/other_user}",
      "gists_url": "https://api.github.com/users/mzumsande/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
      "organizations_url": "https://api.github.com/users/mzumsande/orgs",
      "repos_url": "https://api.github.com/users/mzumsande/repos",
      "events_url": "https://api.github.com/users/mzumsande/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mzumsande/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I wanted to point out that you can replace as much elements in `vTimeOffsets`  as you want without `nTimeOffset` ever changing, but yeah, MAX_SAMPLES is probably a bit overkill, so will change this to a lower value.",
    "created_at": "2019-08-07T22:14:02Z",
    "updated_at": "2019-08-13T15:06:14Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16563#discussion_r311785537",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16563",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/311785537"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16563#discussion_r311785537"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16563"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/311785537/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 89,
    "side": "RIGHT",
    "in_reply_to_id": 311741998
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/311823299",
    "pull_request_review_id": 272303215,
    "id": 311823299,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMTgyMzI5OQ==",
    "diff_hunk": "@@ -34,4 +38,58 @@ BOOST_AUTO_TEST_CASE(util_MedianFilter)\n     BOOST_CHECK_EQUAL(filter.median(), 7);\n }\n \n+void MultiAddTimeData(int n, int64_t offset)\n+{\n+    static int cnt = 0;\n+    for (int i = 0; i < n; ++i) {\n+        CNetAddr addr;\n+        addr.SetInternal(std::to_string(++cnt));\n+        AddTimeData(addr, offset);\n+    }\n+}\n+\n+\n+BOOST_AUTO_TEST_CASE(addtimedata)\n+{\n+    BOOST_CHECK_EQUAL(GetTimeOffset(), 0);\n+\n+    //Part 1: Add large offsets to test a warning message that our clock may be wrong.\n+    MultiAddTimeData(3, DEFAULT_MAX_TIME_ADJUSTMENT + 1); //filter size 4, initialized with 0",
    "path": "src/test/timedata_tests.cpp",
    "position": null,
    "original_position": 34,
    "commit_id": "7cd069d8ef900c6c6b904ddd6fbd64e14bd0f53e",
    "original_commit_id": "cf02a00427d04820b898355cd67345321b71a13d",
    "user": {
      "login": "ariard",
      "id": 23310655,
      "node_id": "MDQ6VXNlcjIzMzEwNjU1",
      "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ariard",
      "html_url": "https://github.com/ariard",
      "followers_url": "https://api.github.com/users/ariard/followers",
      "following_url": "https://api.github.com/users/ariard/following{/other_user}",
      "gists_url": "https://api.github.com/users/ariard/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ariard/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
      "organizations_url": "https://api.github.com/users/ariard/orgs",
      "repos_url": "https://api.github.com/users/ariard/repos",
      "events_url": "https://api.github.com/users/ariard/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ariard/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "You're right, still have to get familiar with cpp multiple ways of initializing arrays.",
    "created_at": "2019-08-08T01:23:54Z",
    "updated_at": "2019-08-13T15:06:14Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16563#discussion_r311823299",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16563",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/311823299"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16563#discussion_r311823299"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16563"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/311823299/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 57,
    "side": "RIGHT",
    "in_reply_to_id": 311741461
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/311823755",
    "pull_request_review_id": 272303746,
    "id": 311823755,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMTgyMzc1NQ==",
    "diff_hunk": "@@ -34,4 +38,58 @@ BOOST_AUTO_TEST_CASE(util_MedianFilter)\n     BOOST_CHECK_EQUAL(filter.median(), 7);\n }\n \n+void MultiAddTimeData(int n, int64_t offset)\n+{\n+    static int cnt = 0;\n+    for (int i = 0; i < n; ++i) {\n+        CNetAddr addr;\n+        addr.SetInternal(std::to_string(++cnt));\n+        AddTimeData(addr, offset);\n+    }\n+}\n+\n+\n+BOOST_AUTO_TEST_CASE(addtimedata)\n+{\n+    BOOST_CHECK_EQUAL(GetTimeOffset(), 0);\n+\n+    //Part 1: Add large offsets to test a warning message that our clock may be wrong.\n+    MultiAddTimeData(3, DEFAULT_MAX_TIME_ADJUSTMENT + 1); //filter size 4, initialized with 0\n+\n+    noui_suppress();\n+    MultiAddTimeData(1, DEFAULT_MAX_TIME_ADJUSTMENT + 1); //filter size 5\n+    noui_reconnect();\n+\n+    std::string warning = GetWarnings(\"gui\");\n+    BOOST_CHECK(warning.find(\"clock is wrong\") != std::string::npos);\n+\n+    // nTimeOffset is not changed if the median of offsets exceeds DEFAULT_MAX_TIME_ADJUSTMENT\n+    BOOST_CHECK_EQUAL(GetTimeOffset(), 0);\n+\n+    // Part 2: Test positive and negative medians by adding more offsets\n+    MultiAddTimeData(4, 100); // filter size 9\n+    BOOST_CHECK_EQUAL(GetTimeOffset(), 100);\n+    MultiAddTimeData(10, -100); //filter size 19\n+    BOOST_CHECK_EQUAL(GetTimeOffset(), -100);\n+\n+    // Part 3: Test behaviour when filter has reached maximum number of offsets\n+    const int MAX_SAMPLES = 200;\n+    int nfill = (MAX_SAMPLES - 3 - 19) / 2; //89\n+    MultiAddTimeData(nfill, 100);\n+    MultiAddTimeData(nfill, -100); //filter size MAX_SAMPLES - 3\n+    BOOST_CHECK_EQUAL(GetTimeOffset(), -100);\n+\n+    MultiAddTimeData(2, 100); //filter size MAX_SAMPLES -1\n+    BOOST_CHECK_EQUAL(GetTimeOffset(), 0);\n+\n+    // After the number of offsets has reached MAX_SAMPLES -1 (=199), nTimeOffset will never change\n+    // because it is only updated when the number of elements in the filter becomes odd. It was decided\n+    // not to fix this because it prevents possible attacks. See the comment in AddTimeData() or issue #4521\n+    // for a more detailed explanation.\n+    MultiAddTimeData(MAX_SAMPLES, 200); // filter median is 200, but nTimeOffset will not change",
    "path": "src/test/timedata_tests.cpp",
    "position": null,
    "original_position": 66,
    "commit_id": "7cd069d8ef900c6c6b904ddd6fbd64e14bd0f53e",
    "original_commit_id": "cf02a00427d04820b898355cd67345321b71a13d",
    "user": {
      "login": "ariard",
      "id": 23310655,
      "node_id": "MDQ6VXNlcjIzMzEwNjU1",
      "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ariard",
      "html_url": "https://github.com/ariard",
      "followers_url": "https://api.github.com/users/ariard/followers",
      "following_url": "https://api.github.com/users/ariard/following{/other_user}",
      "gists_url": "https://api.github.com/users/ariard/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ariard/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
      "organizations_url": "https://api.github.com/users/ariard/orgs",
      "repos_url": "https://api.github.com/users/ariard/repos",
      "events_url": "https://api.github.com/users/ariard/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ariard/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Yes, median doesn't change anymore at MAX_SAMPLES so that's this threshold effect you're interested to see I think (in this case nothing should change)",
    "created_at": "2019-08-08T01:26:59Z",
    "updated_at": "2019-08-13T15:06:14Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16563#discussion_r311823755",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16563",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/311823755"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16563#discussion_r311823755"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16563"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/311823755/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 89,
    "side": "RIGHT",
    "in_reply_to_id": 311741998
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/313158768",
    "pull_request_review_id": 273987336,
    "id": 313158768,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMzE1ODc2OA==",
    "diff_hunk": "@@ -34,4 +38,62 @@ BOOST_AUTO_TEST_CASE(util_MedianFilter)\n     BOOST_CHECK_EQUAL(filter.median(), 7);\n }\n \n+void MultiAddTimeData(int n, int64_t offset)",
    "path": "src/test/timedata_tests.cpp",
    "position": null,
    "original_position": 18,
    "commit_id": "7cd069d8ef900c6c6b904ddd6fbd64e14bd0f53e",
    "original_commit_id": "50a9f58052fa9d0116a3072f724aa0728a22c815",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "nit, static function.",
    "created_at": "2019-08-12T22:42:03Z",
    "updated_at": "2019-08-13T15:06:14Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16563#discussion_r313158768",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16563",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/313158768"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16563#discussion_r313158768"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16563"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/313158768/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 41,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/313158947",
    "pull_request_review_id": 273987336,
    "id": 313158947,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMzE1ODk0Nw==",
    "diff_hunk": "@@ -34,4 +38,62 @@ BOOST_AUTO_TEST_CASE(util_MedianFilter)\n     BOOST_CHECK_EQUAL(filter.median(), 7);\n }\n \n+void MultiAddTimeData(int n, int64_t offset)\n+{\n+    static int cnt = 0;\n+    for (int i = 0; i < n; ++i) {\n+        CNetAddr addr;\n+        addr.SetInternal(std::to_string(++cnt));",
    "path": "src/test/timedata_tests.cpp",
    "position": 25,
    "original_position": 23,
    "commit_id": "7cd069d8ef900c6c6b904ddd6fbd64e14bd0f53e",
    "original_commit_id": "50a9f58052fa9d0116a3072f724aa0728a22c815",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "nit, should `#include <string>` - iwyu.",
    "created_at": "2019-08-12T22:42:50Z",
    "updated_at": "2019-08-13T15:06:14Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16563#discussion_r313158947",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16563",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/313158947"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16563#discussion_r313158947"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16563"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/313158947/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 48,
    "original_line": 48,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/313159738",
    "pull_request_review_id": 273987336,
    "id": 313159738,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMzE1OTczOA==",
    "diff_hunk": "@@ -34,4 +38,62 @@ BOOST_AUTO_TEST_CASE(util_MedianFilter)\n     BOOST_CHECK_EQUAL(filter.median(), 7);\n }\n \n+void MultiAddTimeData(int n, int64_t offset)\n+{\n+    static int cnt = 0;\n+    for (int i = 0; i < n; ++i) {\n+        CNetAddr addr;\n+        addr.SetInternal(std::to_string(++cnt));\n+        AddTimeData(addr, offset);\n+    }\n+}\n+\n+\n+BOOST_AUTO_TEST_CASE(addtimedata)\n+{\n+    BOOST_CHECK_EQUAL(GetTimeOffset(), 0);\n+\n+    //Part 1: Add large offsets to test a warning message that our clock may be wrong.\n+    MultiAddTimeData(3, DEFAULT_MAX_TIME_ADJUSTMENT + 1);\n+    // Filter size is 1 + 3 = 4: It is always initialized with a single element (offset 0)\n+\n+    noui_suppress();\n+    MultiAddTimeData(1, DEFAULT_MAX_TIME_ADJUSTMENT + 1); //filter size 5\n+    noui_reconnect();\n+\n+    std::string warning = GetWarnings(\"gui\");\n+    BOOST_CHECK(warning.find(\"clock is wrong\") != std::string::npos);",
    "path": "src/test/timedata_tests.cpp",
    "position": null,
    "original_position": 42,
    "commit_id": "7cd069d8ef900c6c6b904ddd6fbd64e14bd0f53e",
    "original_commit_id": "50a9f58052fa9d0116a3072f724aa0728a22c815",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "nit, could avoid `warning` var by doing `GetWarnings(\"gui\").find(\"...\")`.",
    "created_at": "2019-08-12T22:46:07Z",
    "updated_at": "2019-08-13T15:06:14Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16563#discussion_r313159738",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16563",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/313159738"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16563#discussion_r313159738"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16563"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/313159738/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 65,
    "side": "RIGHT"
  }
]