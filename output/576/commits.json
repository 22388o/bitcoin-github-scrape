[
  {
    "sha": "b4d0588d06e7c2746b624128b3cc4596459ddf87",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiNGQwNTg4ZDA2ZTdjMjc0NmI2MjQxMjhiM2NjNDU5NjQ1OWRkZjg3",
    "commit": {
      "author": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2011-10-09T18:23:20Z"
      },
      "committer": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2011-10-09T18:23:20Z"
      },
      "message": "Add support to makefile.unix for the same parameters used by bitcoin-qt.pro, dynamic linking unless STATIC=1 is passed",
      "tree": {
        "sha": "43ab1b66a50941377ad9afdd27d1e341300315ac",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/43ab1b66a50941377ad9afdd27d1e341300315ac"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b4d0588d06e7c2746b624128b3cc4596459ddf87",
      "comment_count": 1,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b4d0588d06e7c2746b624128b3cc4596459ddf87",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/b4d0588d06e7c2746b624128b3cc4596459ddf87",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b4d0588d06e7c2746b624128b3cc4596459ddf87/comments",
    "author": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "4db9705dd839cbb386398b1eb4be2a67357c27c4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4db9705dd839cbb386398b1eb4be2a67357c27c4",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/4db9705dd839cbb386398b1eb4be2a67357c27c4"
      }
    ],
    "stats": {
      "total": 53,
      "additions": 37,
      "deletions": 16
    },
    "files": [
      {
        "sha": "7e0d174810e3fb95d8c2b9b279e0ba2c1af447b6",
        "filename": "contrib/gitian-descriptors/gitian.yml",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b4d0588d06e7c2746b624128b3cc4596459ddf87/contrib/gitian-descriptors/gitian.yml",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b4d0588d06e7c2746b624128b3cc4596459ddf87/contrib/gitian-descriptors/gitian.yml",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/gitian-descriptors/gitian.yml?ref=b4d0588d06e7c2746b624128b3cc4596459ddf87",
        "patch": "@@ -53,7 +53,7 @@ script: |\n   cp $OUTDIR/src/COPYING $OUTDIR\n   cd src\n   sed 's/$(DEBUGFLAGS)//' -i makefile.unix\n-  PATH=$INSTDIR/bin:$PATH make -f makefile.unix CXX=\"g++ -I$INSTDIR/include -L$INSTDIR/lib\" $MAKEOPTS bitcoin USE_UPNP=1\n-  PATH=$INSTDIR/bin:$PATH make -f makefile.unix CXX=\"g++ -I$INSTDIR/include -L$INSTDIR/lib\" $MAKEOPTS bitcoind USE_UPNP=0\n+  PATH=$INSTDIR/bin:$PATH make -f makefile.unix STATIC=1 CXX=\"g++ -I$INSTDIR/include -L$INSTDIR/lib\" $MAKEOPTS bitcoin USE_UPNP=1\n+  PATH=$INSTDIR/bin:$PATH make -f makefile.unix STATIC=1 CXX=\"g++ -I$INSTDIR/include -L$INSTDIR/lib\" $MAKEOPTS bitcoind USE_UPNP=0\n   mkdir -p $OUTDIR/bin/$GBUILD_BITS\n   install -s bitcoin bitcoind $OUTDIR/bin/$GBUILD_BITS"
      },
      {
        "sha": "f4178caae5468a4248650d67ece430f13b6059d0",
        "filename": "doc/build-unix.txt",
        "status": "modified",
        "additions": 7,
        "deletions": 5,
        "changes": 12,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b4d0588d06e7c2746b624128b3cc4596459ddf87/doc/build-unix.txt",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b4d0588d06e7c2746b624128b3cc4596459ddf87/doc/build-unix.txt",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/doc/build-unix.txt?ref=b4d0588d06e7c2746b624128b3cc4596459ddf87",
        "patch": "@@ -65,14 +65,16 @@ If using Boost 1.37, append -mt to the boost libraries in the makefile.\n \n Dependency Build Instructions: Gentoo\n -------------------------------------\n-emerge -av boost openssl sys-libs/db\n+\n+Note: If you just want to install bitcoind on Gentoo, you can add the Bitcoin\n+      overlay and use your package manager:\n+          layman -a bitcoin && emerge bitcoind\n+\n+emerge -av1 --noreplace boost glib openssl sys-libs/db:4.8\n \n Take the following steps to build (no UPnP support):\n  cd ${BITCOIN_DIR}/src\n- sed -i 's/<db_cxx.h>/<db4.8\\/db_cxx.h>/' *.h        # path fix\n- sed -i 's/-Bstatic/-Bdynamic/' makefile.unix        # dynamic linking\n- sed -i 's/^USE_UPNP:=0$/USE_UPNP:=/' makefile.unix  # disable UPnP\n- make -f makefile.unix\n+ make -f makefile.unix USE_UPNP= BDB_INCLUDE_PATH='/usr/include/db4.8'\n  strip bitcoind\n \n "
      },
      {
        "sha": "0e903ef18e98394c9ee7e895ce5fb79ef9bdbee4",
        "filename": "src/makefile.unix",
        "status": "modified",
        "additions": 28,
        "deletions": 9,
        "changes": 37,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b4d0588d06e7c2746b624128b3cc4596459ddf87/src/makefile.unix",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b4d0588d06e7c2746b624128b3cc4596459ddf87/src/makefile.unix",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/makefile.unix?ref=b4d0588d06e7c2746b624128b3cc4596459ddf87",
        "patch": "@@ -6,26 +6,45 @@ CXX=g++\n \n USE_UPNP:=0\n \n-DEFS=-DNOPCH -DUSE_SSL\n+DEFS=-DNOPCH\n+\n+DEFS += $(addprefix -I,$(BOOST_INCLUDE_PATH) $(BDB_INCLUDE_PATH) $(OPENSSL_INCLUDE_PATH))\n+LIBS += $(addprefix -l,$(BOOST_LIB_PATH) $(BDB_LIB_PATH) $(OPENSSL_LIB_PATH))\n+\n+LMODE = dynamic\n+LMODE2 = dynamic\n+ifdef STATIC\n+\tLMODE = static\n+\tifeq (${STATIC}, all)\n+\t\tLMODE2 = static\n+\tendif\n+endif\n \n # for boost 1.37, add -mt to the boost libraries\n LIBS= \\\n- -Wl,-Bstatic \\\n-   -l boost_system \\\n-   -l boost_filesystem \\\n-   -l boost_program_options \\\n-   -l boost_thread \\\n-   -l db_cxx \\\n+ -Wl,-B$(LMODE) \\\n+   -l boost_system$(BOOST_LIB_SUFFIX) \\\n+   -l boost_filesystem$(BOOST_LIB_SUFFIX) \\\n+   -l boost_program_options$(BOOST_LIB_SUFFIX) \\\n+   -l boost_thread$(BOOST_LIB_SUFFIX) \\\n+   -l db_cxx$(BDB_LIB_SUFFIX) \\\n    -l ssl \\\n    -l crypto\n \n-ifdef USE_UPNP\n+ifndef USE_UPNP\n+\toverride USE_UPNP = -\n+endif\n+ifneq (${USE_UPNP}, -)\n \tLIBS += -l miniupnpc\n \tDEFS += -DUSE_UPNP=$(USE_UPNP)\n endif\n \n+ifneq (${USE_SSL}, 0)\n+\tDEFS += -DUSE_SSL\n+endif\n+\n LIBS+= \\\n- -Wl,-Bdynamic \\\n+ -Wl,-B$(LMODE2) \\\n    -l gthread-2.0 \\\n    -l z \\\n    -l dl \\"
      }
    ]
  }
]