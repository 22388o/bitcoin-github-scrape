[
  {
    "sha": "8efed3bc93a15fc715fd4f3cca50f44685872b5e",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo4ZWZlZDNiYzkzYTE1ZmM3MTVmZDRmM2NjYTUwZjQ0Njg1ODcyYjVl",
    "commit": {
      "author": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2016-03-17T16:54:54Z"
      },
      "committer": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2016-04-04T07:25:34Z"
      },
      "message": "[Qt] Support for abandoned/abandoning transactions",
      "tree": {
        "sha": "d25414acbb18118519aab29ae23e6339fc8553ff",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d25414acbb18118519aab29ae23e6339fc8553ff"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8efed3bc93a15fc715fd4f3cca50f44685872b5e",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "expired_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1\n\niQIcBAABAgAGBQJXAhcpAAoJECnUvLZBb1Pst88QAJ7CaHHYCeNPuX5aujM7R4F4\nxBmk3/9X5x3G0V9WZy7uYjxp8Trs24o5aLvlCH6b/oS0fViIOok5Ttqg4/aaPhpK\n+XkUQ6y0KJ5VIzv4MjvYV+0UCRRkr1vTfFmjmpnATnCuJrniq1e/DbtMC3H1Umux\n3Awpfjjx4Ng+uSJa1zKYmvFlCQZG8e2ACR1DrnO7vvW2kGMGVCvmzxzzY80TLA+9\nukaWg4DhQyuYEczo4U/WyXJMfScphUfkzTVGzZkwgxQXFCrcc0OzgSwytGh4jREQ\nrmd4iMQ7kVHQsT9I7N5Bx9BOiyE8DT6E8X34Q8wtUS+THlRYv+ZXn8bIe3jHqpRm\nI6LzEGWWosx+QnG93g9y9U2m4YGFcdTKr+QYiLXAwsUvJRJ6+Dc9gFk8uuKLvdu1\nYHXSCLwz71U7oO/qerRt1d9hJS1eDL46oq9tlby164d+mFVata+SZK3+1/xKMTK0\nEPyis4azU13CP0x+MG6byVbfZUUBAHSZVwR4S4BPcTJR3DgPGsJEI6SMZREu2HTP\nvyG9ddXDlmwLUzAcSbWLGrOxKZHkvYiwKYEk5h0XNwWVblDrw17a8+6HNPZtjS7Y\nW4TC1vDT77OLkVNf6P3l9G9W9V+wsz7oU+lYKETlTfyA66BMw39bMymHD61e4Ry6\nSht8XTTS6PAlOaYjr3QV\n=WghA\n-----END PGP SIGNATURE-----",
        "payload": "tree d25414acbb18118519aab29ae23e6339fc8553ff\nparent b35a59179359709df21eb026d35f4124ce90fbd1\nauthor Jonas Schnelli <dev@jonasschnelli.ch> 1458233694 +0100\ncommitter Jonas Schnelli <dev@jonasschnelli.ch> 1459754734 +0200\n\n[Qt] Support for abandoned/abandoning transactions\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8efed3bc93a15fc715fd4f3cca50f44685872b5e",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/8efed3bc93a15fc715fd4f3cca50f44685872b5e",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8efed3bc93a15fc715fd4f3cca50f44685872b5e/comments",
    "author": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "b35a59179359709df21eb026d35f4124ce90fbd1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b35a59179359709df21eb026d35f4124ce90fbd1",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/b35a59179359709df21eb026d35f4124ce90fbd1"
      }
    ],
    "stats": {
      "total": 74,
      "additions": 70,
      "deletions": 4
    },
    "files": [
      {
        "sha": "247ca3f1d41f691569cb1f27ceb3c989f02be6fb",
        "filename": "src/Makefile.qt.include",
        "status": "modified",
        "additions": 2,
        "deletions": 1,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8efed3bc93a15fc715fd4f3cca50f44685872b5e/src/Makefile.qt.include",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8efed3bc93a15fc715fd4f3cca50f44685872b5e/src/Makefile.qt.include",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/Makefile.qt.include?ref=8efed3bc93a15fc715fd4f3cca50f44685872b5e",
        "patch": "@@ -268,7 +268,8 @@ RES_ICONS = \\\n   qt/res/icons/tx_output.png \\\n   qt/res/icons/tx_mined.png \\\n   qt/res/icons/warning.png \\\n-  qt/res/icons/verify.png\n+  qt/res/icons/verify.png \\\n+  qt/res/icons/transaction_abandoned.png\n \n BITCOIN_QT_CPP = \\\n   qt/bantablemodel.cpp \\"
      },
      {
        "sha": "24b0bae3ec144dfb000c4e5c1a96d96d0424435a",
        "filename": "src/qt/bitcoin.qrc",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8efed3bc93a15fc715fd4f3cca50f44685872b5e/src/qt/bitcoin.qrc",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8efed3bc93a15fc715fd4f3cca50f44685872b5e/src/qt/bitcoin.qrc",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoin.qrc?ref=8efed3bc93a15fc715fd4f3cca50f44685872b5e",
        "patch": "@@ -49,6 +49,7 @@\n         <file alias=\"fontbigger\">res/icons/fontbigger.png</file>\n         <file alias=\"fontsmaller\">res/icons/fontsmaller.png</file>\n         <file alias=\"prompticon\">res/icons/chevron.png</file>\n+        <file alias=\"transaction_abandoned\">res/icons/transaction_abandoned.png</file>\n     </qresource>\n     <qresource prefix=\"/movies\">\n         <file alias=\"spinner-000\">res/movies/spinner-000.png</file>"
      },
      {
        "sha": "4b2c10dd48e43a4735a5bb9ebef7f6af1492631f",
        "filename": "src/qt/guiconstants.h",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8efed3bc93a15fc715fd4f3cca50f44685872b5e/src/qt/guiconstants.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8efed3bc93a15fc715fd4f3cca50f44685872b5e/src/qt/guiconstants.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/guiconstants.h?ref=8efed3bc93a15fc715fd4f3cca50f44685872b5e",
        "patch": "@@ -29,6 +29,8 @@ static const bool DEFAULT_SPLASHSCREEN = true;\n #define COLOR_TX_STATUS_OPENUNTILDATE QColor(64, 64, 255)\n /* Transaction list -- TX status decoration - offline */\n #define COLOR_TX_STATUS_OFFLINE QColor(192, 192, 192)\n+/* Transaction list -- TX status decoration - danger, tx needs attention */\n+#define COLOR_TX_STATUS_DANGER QColor(200, 100, 100)\n /* Transaction list -- TX status decoration - default color */\n #define COLOR_BLACK QColor(0, 0, 0)\n "
      },
      {
        "sha": "8ca6445c20f263b3dd479806a524e3f09b8f9e63",
        "filename": "src/qt/res/icons/transaction_abandoned.png",
        "status": "added",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8efed3bc93a15fc715fd4f3cca50f44685872b5e/src/qt/res/icons/transaction_abandoned.png",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8efed3bc93a15fc715fd4f3cca50f44685872b5e/src/qt/res/icons/transaction_abandoned.png",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/res/icons/transaction_abandoned.png?ref=8efed3bc93a15fc715fd4f3cca50f44685872b5e"
      },
      {
        "sha": "1b8bf978ad831581c834f6d51e1ddf6a08de9a84",
        "filename": "src/qt/transactiondesc.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8efed3bc93a15fc715fd4f3cca50f44685872b5e/src/qt/transactiondesc.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8efed3bc93a15fc715fd4f3cca50f44685872b5e/src/qt/transactiondesc.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/transactiondesc.cpp?ref=8efed3bc93a15fc715fd4f3cca50f44685872b5e",
        "patch": "@@ -39,7 +39,7 @@ QString TransactionDesc::FormatTxStatus(const CWalletTx& wtx)\n         else if (GetAdjustedTime() - wtx.nTimeReceived > 2 * 60 && wtx.GetRequestCount() == 0)\n             return tr(\"%1/offline\").arg(nDepth);\n         else if (nDepth == 0)\n-            return tr(\"0/unconfirmed, %1\").arg((wtx.InMempool() ? tr(\"in memory pool\") : tr(\"not in memory pool\")));\n+            return tr(\"0/unconfirmed, %1\").arg((wtx.InMempool() ? tr(\"in memory pool\") : tr(\"not in memory pool\"))) + (wtx.isAbandoned() ? \", \"+tr(\"abandoned\") : \"\");\n         else if (nDepth < 6)\n             return tr(\"%1/unconfirmed\").arg(nDepth);\n         else"
      },
      {
        "sha": "1efeda93ec8f57a08001fe68658bc30c8826defe",
        "filename": "src/qt/transactionrecord.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8efed3bc93a15fc715fd4f3cca50f44685872b5e/src/qt/transactionrecord.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8efed3bc93a15fc715fd4f3cca50f44685872b5e/src/qt/transactionrecord.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/transactionrecord.cpp?ref=8efed3bc93a15fc715fd4f3cca50f44685872b5e",
        "patch": "@@ -239,6 +239,8 @@ void TransactionRecord::updateStatus(const CWalletTx &wtx)\n         else if (status.depth == 0)\n         {\n             status.status = TransactionStatus::Unconfirmed;\n+            if (wtx.isAbandoned())\n+                status.status = TransactionStatus::Abandoned;\n         }\n         else if (status.depth < RecommendedNumConfirmations)\n         {"
      },
      {
        "sha": "330cd48cfa92a1dde380da9d6fbf10a001629c93",
        "filename": "src/qt/transactionrecord.h",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8efed3bc93a15fc715fd4f3cca50f44685872b5e/src/qt/transactionrecord.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8efed3bc93a15fc715fd4f3cca50f44685872b5e/src/qt/transactionrecord.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/transactionrecord.h?ref=8efed3bc93a15fc715fd4f3cca50f44685872b5e",
        "patch": "@@ -33,6 +33,7 @@ class TransactionStatus\n         Unconfirmed,        /**< Not yet mined into a block **/\n         Confirming,         /**< Confirmed, but waiting for the recommended number of confirmations **/\n         Conflicted,         /**< Conflicts with other transaction or mempool **/\n+        Abandoned,          /**< Abandoned from the wallet **/\n         /// Generated (mined) transactions\n         Immature,           /**< Mined but waiting for maturity */\n         MaturesWarning,     /**< Transaction will likely not mature because no nodes have confirmed */"
      },
      {
        "sha": "b29ecf83486b008f482122d00dc7e29c730ef618",
        "filename": "src/qt/transactiontablemodel.cpp",
        "status": "modified",
        "additions": 10,
        "deletions": 0,
        "changes": 10,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8efed3bc93a15fc715fd4f3cca50f44685872b5e/src/qt/transactiontablemodel.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8efed3bc93a15fc715fd4f3cca50f44685872b5e/src/qt/transactiontablemodel.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/transactiontablemodel.cpp?ref=8efed3bc93a15fc715fd4f3cca50f44685872b5e",
        "patch": "@@ -312,6 +312,9 @@ QString TransactionTableModel::formatTxStatus(const TransactionRecord *wtx) cons\n     case TransactionStatus::Unconfirmed:\n         status = tr(\"Unconfirmed\");\n         break;\n+    case TransactionStatus::Abandoned:\n+        status = tr(\"Abandoned\");\n+        break;\n     case TransactionStatus::Confirming:\n         status = tr(\"Confirming (%1 of %2 recommended confirmations)\").arg(wtx->status.depth).arg(TransactionRecord::RecommendedNumConfirmations);\n         break;\n@@ -468,6 +471,8 @@ QVariant TransactionTableModel::txStatusDecoration(const TransactionRecord *wtx)\n         return COLOR_TX_STATUS_OFFLINE;\n     case TransactionStatus::Unconfirmed:\n         return QIcon(\":/icons/transaction_0\");\n+    case TransactionStatus::Abandoned:\n+        return QIcon(\":/icons/transaction_abandoned\");\n     case TransactionStatus::Confirming:\n         switch(wtx->status.depth)\n         {\n@@ -573,6 +578,11 @@ QVariant TransactionTableModel::data(const QModelIndex &index, int role) const\n     case Qt::TextAlignmentRole:\n         return column_alignments[index.column()];\n     case Qt::ForegroundRole:\n+        // Use the \"danger\" color for abandoned transactions\n+        if(rec->status.status == TransactionStatus::Abandoned)\n+        {\n+            return COLOR_TX_STATUS_DANGER;\n+        }\n         // Non-confirmed (but not immature) as transactions are grey\n         if(!rec->status.countsForBalance && rec->status.status != TransactionStatus::Immature)\n         {"
      },
      {
        "sha": "a352228c36fb5e32f3fd2a13ef8e6e93272c63da",
        "filename": "src/qt/transactionview.cpp",
        "status": "modified",
        "additions": 31,
        "deletions": 2,
        "changes": 33,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8efed3bc93a15fc715fd4f3cca50f44685872b5e/src/qt/transactionview.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8efed3bc93a15fc715fd4f3cca50f44685872b5e/src/qt/transactionview.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/transactionview.cpp?ref=8efed3bc93a15fc715fd4f3cca50f44685872b5e",
        "patch": "@@ -37,7 +37,7 @@\n \n TransactionView::TransactionView(const PlatformStyle *platformStyle, QWidget *parent) :\n     QWidget(parent), model(0), transactionProxyModel(0),\n-    transactionView(0)\n+    transactionView(0), abandonAction(0)\n {\n     // Build filter row\n     setContentsMargins(0,0,0,0);\n@@ -137,6 +137,7 @@ TransactionView::TransactionView(const PlatformStyle *platformStyle, QWidget *pa\n     transactionView = view;\n \n     // Actions\n+    abandonAction = new QAction(tr(\"Abandon transaction\"), this);\n     QAction *copyAddressAction = new QAction(tr(\"Copy address\"), this);\n     QAction *copyLabelAction = new QAction(tr(\"Copy label\"), this);\n     QAction *copyAmountAction = new QAction(tr(\"Copy amount\"), this);\n@@ -153,8 +154,10 @@ TransactionView::TransactionView(const PlatformStyle *platformStyle, QWidget *pa\n     contextMenu->addAction(copyTxIDAction);\n     contextMenu->addAction(copyTxHexAction);\n     contextMenu->addAction(copyTxPlainText);\n-    contextMenu->addAction(editLabelAction);\n     contextMenu->addAction(showDetailsAction);\n+    contextMenu->addSeparator();\n+    contextMenu->addAction(abandonAction);\n+    contextMenu->addAction(editLabelAction);\n \n     mapperThirdPartyTxUrls = new QSignalMapper(this);\n \n@@ -170,6 +173,7 @@ TransactionView::TransactionView(const PlatformStyle *platformStyle, QWidget *pa\n     connect(view, SIGNAL(doubleClicked(QModelIndex)), this, SIGNAL(doubleClicked(QModelIndex)));\n     connect(view, SIGNAL(customContextMenuRequested(QPoint)), this, SLOT(contextualMenu(QPoint)));\n \n+    connect(abandonAction, SIGNAL(triggered()), this, SLOT(abandonTx()));\n     connect(copyAddressAction, SIGNAL(triggered()), this, SLOT(copyAddress()));\n     connect(copyLabelAction, SIGNAL(triggered()), this, SLOT(copyLabel()));\n     connect(copyAmountAction, SIGNAL(triggered()), this, SLOT(copyAmount()));\n@@ -360,12 +364,37 @@ void TransactionView::exportClicked()\n void TransactionView::contextualMenu(const QPoint &point)\n {\n     QModelIndex index = transactionView->indexAt(point);\n+    QModelIndexList selection = transactionView->selectionModel()->selectedRows(0);\n+\n+    // check if transaction can be abandoned, disable context menu action in case it doesn't\n+    uint256 hash;\n+    hash.SetHex(selection.at(0).data(TransactionTableModel::TxHashRole).toString().toStdString());\n+    abandonAction->setEnabled(model->transactionCanBeAbandoned(hash));\n+\n     if(index.isValid())\n     {\n         contextMenu->exec(QCursor::pos());\n     }\n }\n \n+void TransactionView::abandonTx()\n+{\n+    if(!transactionView || !transactionView->selectionModel())\n+        return;\n+    QModelIndexList selection = transactionView->selectionModel()->selectedRows(0);\n+\n+    // get the hash from the TxHashRole (QVariant / QString)\n+    uint256 hash;\n+    QString hashQStr = selection.at(0).data(TransactionTableModel::TxHashRole).toString();\n+    hash.SetHex(hashQStr.toStdString());\n+\n+    // Abandon the wallet transaction over the walletModel\n+    model->abandonTransaction(hash);\n+\n+    // Update the table\n+    model->getTransactionTableModel()->updateTransaction(hashQStr, CT_UPDATED, false);\n+}\n+\n void TransactionView::copyAddress()\n {\n     GUIUtil::copyEntryData(transactionView, 0, TransactionTableModel::AddressRole);"
      },
      {
        "sha": "e9b9d5b6bc9e2e9af4cec7ae49e803ebc16169fb",
        "filename": "src/qt/transactionview.h",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8efed3bc93a15fc715fd4f3cca50f44685872b5e/src/qt/transactionview.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8efed3bc93a15fc715fd4f3cca50f44685872b5e/src/qt/transactionview.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/transactionview.h?ref=8efed3bc93a15fc715fd4f3cca50f44685872b5e",
        "patch": "@@ -75,6 +75,7 @@ class TransactionView : public QWidget\n     QFrame *dateRangeWidget;\n     QDateTimeEdit *dateFrom;\n     QDateTimeEdit *dateTo;\n+    QAction *abandonAction;\n \n     QWidget *createDateRangeWidget();\n \n@@ -97,6 +98,7 @@ private Q_SLOTS:\n     void copyTxPlainText();\n     void openThirdPartyTxUrl(QString url);\n     void updateWatchOnlyColumn(bool fHaveWatchOnly);\n+    void abandonTx();\n \n Q_SIGNALS:\n     void doubleClicked(const QModelIndex&);"
      },
      {
        "sha": "ce230d6aedbceb5a9d2a5b5e742d5d65cc3dccb2",
        "filename": "src/qt/walletmodel.cpp",
        "status": "modified",
        "additions": 15,
        "deletions": 0,
        "changes": 15,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8efed3bc93a15fc715fd4f3cca50f44685872b5e/src/qt/walletmodel.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8efed3bc93a15fc715fd4f3cca50f44685872b5e/src/qt/walletmodel.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/walletmodel.cpp?ref=8efed3bc93a15fc715fd4f3cca50f44685872b5e",
        "patch": "@@ -668,3 +668,18 @@ bool WalletModel::saveReceiveRequest(const std::string &sAddress, const int64_t\n     else\n         return wallet->AddDestData(dest, key, sRequest);\n }\n+\n+bool WalletModel::transactionCanBeAbandoned(uint256 hash) const\n+{\n+    LOCK2(cs_main, wallet->cs_wallet);\n+    const CWalletTx *wtx = wallet->GetWalletTx(hash);\n+    if (!wtx || wtx->isAbandoned() || wtx->GetDepthInMainChain() > 0 || wtx->InMempool())\n+        return false;\n+    return true;\n+}\n+\n+bool WalletModel::abandonTransaction(uint256 hash) const\n+{\n+    LOCK2(cs_main, wallet->cs_wallet);\n+    return wallet->AbandonTransaction(hash);\n+}"
      },
      {
        "sha": "e5470bf618eea1925786b682c5af76fd0e3bafb4",
        "filename": "src/qt/walletmodel.h",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8efed3bc93a15fc715fd4f3cca50f44685872b5e/src/qt/walletmodel.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8efed3bc93a15fc715fd4f3cca50f44685872b5e/src/qt/walletmodel.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/walletmodel.h?ref=8efed3bc93a15fc715fd4f3cca50f44685872b5e",
        "patch": "@@ -200,6 +200,9 @@ class WalletModel : public QObject\n     void loadReceiveRequests(std::vector<std::string>& vReceiveRequests);\n     bool saveReceiveRequest(const std::string &sAddress, const int64_t nId, const std::string &sRequest);\n \n+    bool transactionCanBeAbandoned(uint256 hash) const;\n+    bool abandonTransaction(uint256 hash) const;\n+\n private:\n     CWallet *wallet;\n     bool fHaveWatchOnly;"
      }
    ]
  }
]