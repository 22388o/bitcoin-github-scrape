achow101,2021-05-17 19:26:01,Code Review ACK 9938d610b043bf018e0b34d92e3daaffe1f17fcc,https://github.com/bitcoin/bitcoin/pull/21962#issuecomment-842574364,842574364,
laanwj,2021-05-19 12:01:17,"Looks good to me now, code review ACK 9938d610b043bf018e0b34d92e3daaffe1f17fcc",https://github.com/bitcoin/bitcoin/pull/21962#issuecomment-844034962,844034962,
laanwj,2021-05-17 12:17:30,Looks like there is still some duplication in the error handling. I wonder if it'd make sense to make RAII wrappers around these things at some point. ,https://github.com/bitcoin/bitcoin/pull/21962#discussion_r633479057,633479057,src/wallet/sqlite.cpp
laanwj,2021-05-17 12:18:35,"I don't think we should be translating these SQLite internal error messages. It should be assumed that translators have some knowledge about bitcoin concept, but translators are not going to know what 'preparing a statement' is.",https://github.com/bitcoin/bitcoin/pull/21962#discussion_r633479655,633479655,src/wallet/sqlite.cpp
theStack,2021-05-17 15:27:13,"Agreed, changed the code to return the error string with `Untranslated(...)` rather than `_(...)` -- the calling method `SQLiteDatabase::Verify` expects the error as `bilingual_str`, hence I think it's the easiest to also pass out this type in the helper `ReadPragmaInteger`.",https://github.com/bitcoin/bitcoin/pull/21962#discussion_r633633653,633633653,src/wallet/sqlite.cpp
theStack,2021-05-17 15:29:34,"I agree that RAII wrappers would make sense here to deduplicate the `sqlite3_prepare_v2` / `sqlite3_finalize` pairs. My own C++ skills are probably still too lousy to implement this properly, but I'm happy to help reviewing :)",https://github.com/bitcoin/bitcoin/pull/21962#discussion_r633635706,633635706,src/wallet/sqlite.cpp
laanwj,2021-05-17 18:07:39,"Yes, it was just a random idea, not a blocker for this PR.",https://github.com/bitcoin/bitcoin/pull/21962#discussion_r633748170,633748170,src/wallet/sqlite.cpp
laanwj,2021-05-18 14:47:40,"Having the error message type be different between `SetPragma` and `ReadPragmaInteger` is slightly inconsistent, though yes I understand why.",https://github.com/bitcoin/bitcoin/pull/21962#discussion_r634457136,634457136,src/wallet/sqlite.cpp
