gmaxwell,2011-09-06T00:15:09Z,"It seems to me that its sort of weird that I could generate a bunch of completely insane blocks, and feed you them and get you to accept themâ€” only to drop them when you hit the first checkpoint.  Perhaps I could use this to pollute your wallet.dat with megabytes of junk transactions?   I suppose I could still do this without this change though.\n\nPerhaps it should validate up to block 75k or so,",https://github.com/bitcoin/bitcoin/pull/492#issuecomment-2007585,2007585,
gavinandresen,2011-09-08T00:22:39Z,"Thanks for the thoughtful comments.\n\nRE: polluting the wallet with megabytes of junk blocks/transactions:  I'm working on another fix for that (see my DoSprevention branch for the start, punishing peers that send lots of obviously bogus orphan blocks is on my TODO list). This change doesn't make that attack any easier to mount. By far the bottleneck to that attack would be generating bogus block",https://github.com/bitcoin/bitcoin/pull/492#issuecomment-2035378,2035378,
sipa,2011-09-08T12:44:28Z,"I'm not sure I really like this. This means giving the maintainer of the software control over which block-chain is accepted by the client. Of course, he can already do this by changing the source code, so there may not be a real reason for my dislike for it. However, maybe we can still have a configuration option ""Verify entire chain"", for paranoid people?\n\nOn the other hand, if we are going to",https://github.com/bitcoin/bitcoin/pull/492#issuecomment-2039327,2039327,
gavinandresen,2011-09-09T14:23:27Z,"We already control which block-chain is accepted with the blockchain checkpoint mechanism.\n\nRE: adding a 'verify the whole thing' option:  if you're that paranoid, you should run a separate piece of code to do the verification, in my humble opinion. In fact, a standalone verify-bklindex/blk000 tool would be way spiffy.\n\nI don't understand your last point; the client needs all (unspent and not-",https://github.com/bitcoin/bitcoin/pull/492#issuecomment-2051642,2051642,
sipa,2011-09-09T14:38:09Z,"1) There is a subtle difference: currently the maintainer can prevent certain chains from being accepted by clients, but the accepted chain does need to be valid. If you're going to skip verification of everything beneath a certain checkpoint, an ""evil maintainer"" could make ""his"" client accept a fake chain. Again, I realize there is little difference with the maintainer just changing the code, so",https://github.com/bitcoin/bitcoin/pull/492#issuecomment-2051802,2051802,
alexwaters,2011-09-12T11:19:01Z,I'm testing the speed on this just by timing how long it takes to download a few thousand blocks. Anything else you want me to test for this one? And - are there better ways of speed testing optimizations?\n,https://github.com/bitcoin/bitcoin/pull/492#issuecomment-2069748,2069748,
gavinandresen,2011-09-12T13:20:36Z,"You'll need to test on blocks that actually have a bunch of transactions in them, so don't test with the first few thousand blocks in the main chain (because they're all mostly empty-- a ""generate bitcoins"" transaction doesn't have a signature to verify).\n\nI'd suggest:\n- Download up to block 50,000 or so\n- Shutdown, then save the blkindex.dat and blk0001.dat files\n- Time how long it takes to ",https://github.com/bitcoin/bitcoin/pull/492#issuecomment-2070484,2070484,
alexwaters,2011-09-12T13:54:34Z,"There was a 10% gain for the first 70k blocks. At 99k, the patched client was 27m faster. Testing with Gavin's method now to verify.\n\n...it took 1:17 for the unpatched client to get to 99k, and :50 for the patched.\n",https://github.com/bitcoin/bitcoin/pull/492#issuecomment-2070818,2070818,
gmaxwell,2011-09-12T14:37:31Z,27m faster?  This sounds broken. Even with 4000 transactions per block there is no way it should be taking that long.\n,https://github.com/bitcoin/bitcoin/pull/492#issuecomment-2071230,2071230,
alexwaters,2011-09-12T15:49:04Z,"By using Gavin's method to avoid network variance - the original client took 13m to get from 65-75k, and the patched client took 10m. Giving a 23% improvement. I'm assuming that percentage would be higher with the recent, heavier blocks.\n",https://github.com/bitcoin/bitcoin/pull/492#issuecomment-2071973,2071973,
sipa,2011-09-12T18:33:56Z,"There weren't that many transactions at 75k either yet. Maybe you can benchmark the entire chain verification? That is what every new node installation has to go through anyway.\n\nUse a local node that is synced up, and use -connect to connect to it from an empty install, both patched and unpatched. Maybe it's possible to run bitcoind in a shell using ""time"", to measure how much CPU time it uses ",https://github.com/bitcoin/bitcoin/pull/492#issuecomment-2073753,2073753,
alexwaters,2011-09-12T22:27:27Z,"Sipa, I can do that now. I think that knowing these timings will be good for future tests as well. I had been just eyeballing it, but I will try to write some kind of script that does the speed test. I imagine this could be used on several current and future commits.\n\nCheers for reminding me about time, that will make things a lot less tedious =P\n",https://github.com/bitcoin/bitcoin/pull/492#issuecomment-2076198,2076198,
alexwaters,2011-09-17T15:31:23Z,"OK I have tested this with the full blockchain. I went from 0 to 145,686 and had the following results:\n\n0.4.0rc1 - 10H:21M\n\n0.4.0rc1 + pull 492 - 7H:14M\n\nSo that's an improvement of 3H:7M or 30%\n",https://github.com/bitcoin/bitcoin/pull/492#issuecomment-2122718,2122718,
gmaxwell,2011-09-17T19:35:46Z,These numbers are back to sounding suspect to me again. My desktop does over a thousand ECDSA verifies a second. That doesn't really jive with the speedup here.\n,https://github.com/bitcoin/bitcoin/pull/492#issuecomment-2123702,2123702,
alexwaters,2011-09-18T06:25:56Z,gmaxwell: can you test this commit to see if you get different results from my test?\n,https://github.com/bitcoin/bitcoin/pull/492#issuecomment-2125591,2125591,
gmaxwell,2011-09-18T06:53:15Z,"Sure, I will.  FWIW, I'm not questioning your methodology so much as suggesting that if its true then there is perhaps something else wrong with bitcoin which out to be fixed regardless of this change.\n",https://github.com/bitcoin/bitcoin/pull/492#issuecomment-2125642,2125642,
alexwaters,2011-09-18T07:03:59Z,"I'm running this in virtualbox, so maybe my system's speed is a contributing factor - I will try it tomorrow on a different machine.\n\nAs for something else being wrong; in general I think major changes are needed to the blockchain download. Having a GB+ requirement is fairly undesirable (esp for mobile). \n\nI don't remember who, but someone brought up an interesting idea at the conference (poss",https://github.com/bitcoin/bitcoin/pull/492#issuecomment-2125662,2125662,
