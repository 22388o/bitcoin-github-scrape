jb55,2019-09-23 19:14:54,Concept ACK,https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-534243460,534243460,
nvk,2019-09-23 19:18:04,Would love to see this happen +1,https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-534244571,534244571,
DrahtBot,2019-09-23 20:01:48,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#17518](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/17518.html) (refactor, wallet: Nuke coincontrol circular",https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-534260562,534260562,
instagibbs,2019-09-23 20:28:00,"concept ACK.\n\nI do however think a proper dialogue will be required to let the user know what's going on at a minimum rather than magic resulting in a clipboard result.\n\nvery light testing also shows it appears it does what's on the tin. I'll do lots more testing later once approach is settled.",https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-534270538,534270538,
gwillen,2019-09-23 20:58:59,"So as some of you saw, I did some related work quite awhile ago. I have a dialog with support for creating/saving/loading/signing/sending these. It's somewhat modeled after the offline signing UI in Armory. I was never _happy_ with the UI, and I think designing this to be intuitive is really hard, but I think it may already be an improvement over clipboard-only.\n\nLet me spend a few minutes fig",https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-534282105,534282105,
promag,2019-09-23 21:42:57,Concept ACK.,https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-534297117,534297117,
gwillen,2019-09-23 22:20:42,"Ok, if you'd like to see my work on this, please have a look at https://github.com/gwillen/bitcoin/tree/feature-offline-v2 .\n\nYou will need to check preferences->wallet->enable offline transaction features. Then you'll get an 'Offline' menu, a new offline transactions dialog box, and a new pair of checkboxes in the 'send' dialog: ""Include watchonly coins"" and ""create offline transaction"" (whic",https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-534307676,534307676,
Sjors,2019-09-24 12:36:38,"@gwillen can you make a (draft) PR with that branch? If you rebase on top of this, you can probably drop the ""Enable offline transaction features"" checkbox as well as the ""include watchonly coins"" and ""create unsigned ""checkboxes, in favor of only allowing the functionality with watch-only wallets.\n\nI like how the send button text changes, so I'll steal that for this PR :-)\n\n<img width=""89",https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-534538035,534538035,
Sjors,2019-09-24 13:34:12,Let's continue the UX brainstom here: #16954,https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-534560388,534560388,
practicalswift,2019-09-25 11:23:07,"I'm afraid the current version of this PR introduces a bug in `CWallet::ListCoins`.\n\nFirst, note that `==` has higher precedence than the ternary conditional:\n\n```\n[cling]$ 1 == 2 ? 3 : 4\n(int) 4\n[cling]$ (1 == 2) ? 3 : 4\n(int) 4\n[cling]$ 1 == (2 ? 3 : 4)\n(bool) false\n```\n\nSecond, some context:\n\n```\nunsigned int IsMine(...);\nbool IsWalletFlagSet(...);\nint ISMINE",https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-534976077,534976077,
instagibbs,2019-09-25 13:36:39,"The final dialogue should have the ""Yes"" text replace with ""Copy unsigned tx to clipboard"" or something self-explanatory.\n\nReally ""Yes"" should be ""Send"" in the average case anyways(think I might PR that change separately)",https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-535026260,535026260,
Sjors,2019-09-26 09:46:47,"Fixed the precedence bug @practicalswift found.\n\nI added some additional copy:\n<img width=""391"" alt=""Schermafbeelding 2019-09-26 om 11 15 42"" src=""https://user-images.githubusercontent.com/10217/65675777-04424180-e04f-11e9-9bd2-426104c2bda8.png"">\n\n<img width=""627"" alt=""Schermafbeelding 2019-09-26 om 11 30 25"" src=""https://user-images.githubusercontent.com/10217/65676974-14f3b700-e051-11e",https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-535427802,535427802,
instagibbs,2019-09-26 14:12:56,"""e.g., and offline Bitcoin Core wallet, or a PSBT-compatible hardware wallet""\n\nI think that change would make me happy.",https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-535521894,535521894,
Sjors,2019-09-26 14:27:30,@instagibbs done (I didn't update the screenshots),https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-535529063,535529063,
instagibbs,2019-09-26 15:02:58,"tACK https://github.com/bitcoin/bitcoin/pull/16944/commits/da869592ecf82f8a03eb4ab2339d6bffa3dcea58\n\nRan both watch-only and non-watch-only modes, tested coin control in watch-only mode, tested a Core -> HWI -> Core round-trip and successfully finalized a PSBT with the desired properties.",https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-535546393,535546393,
Sjors,2019-10-01 15:28:53,"The confirmation dialog is a `QMessageBox`, which isn't very flexible. #16966 is a better place to tweak things (and I want to avoid rebase hell there).",https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-537091541,537091541,
promag,2019-10-01 22:33:09,"What am I missing?\n```\ngetbalances\n{\n  ""mine"": {\n    ""trusted"": 0.00000000,\n    ""untrusted_pending"": 0.00000000,\n    ""immature"": 0.00000000\n  },\n  ""watchonly"": {\n    ""trusted"": 11202.50000000,\n    ""untrusted_pending"": 0.00000000,\n    ""immature"": 1250.00003320\n  }\n}\n```\nAnd then I get ""The amount exceeds your balance.""",https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-537260062,537260062,
gwillen,2019-10-02 03:41:50,"My experience was that coin selection refused to select watchonly coins when I wanted it to, even if I set watchonly to true in the coincontrol object passed to preparetransaction (and hence createtransaction), unless I made some more-invasive changes, linked below. I'm not sure if that's what you're seeing, @promag. \n\nIn particular, see my changes to CWallet::ListCoins: https://github.com/gwi",https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-537321922,537321922,
Sjors,2019-10-02 10:13:06,"@promag how did you insert the watch-only keys into that wallet? I've only tested with [HWI](https://github.com/bitcoin-core/HWI) which imports as follows:\n\n`[{""desc"": ""wpkh([8...4P/0/*)#36sal9a4"", ""internal"": false, ""range"": [0, 1000], ""timestamp"": ""now"", ""keypool"": true, ""watchonly"": true}, {""desc"": ""wpkh([80..P/1/*)#nl2rc26w"", ""internal"": true, ""range"": [0, 1000], ""timestamp"": ""now"", ""keypo",https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-537428633,537428633,
instagibbs,2019-10-02 14:53:22,needs rebase,https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-537531165,537531165,
promag,2019-10-02 15:43:28,"@Sjors result of `getaddressinfo`:\n\n```\n{\n  ""address"": ""2N9wHFC4dSkZMu3BCspQkApJ9Pf4coHQWUF"",\n  ""scriptPubKey"": ""a914b7155eadf2015c0fe4d1e17c4e29d5d58659a9d987"",\n  ""ismine"": false,\n  ""solvable"": true,\n  ""desc"": ""sh(wpkh([528979b9]03dce9cd688fd0a9f6dac92627691eb609b8096123455676b5b57db6abaa32f666))#w8dysyn3"",\n  ""iswatchonly"": true,\n  ""isscript"": true,\n  ""iswitness"": false,\n ",https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-537554079,537554079,
instagibbs,2019-10-08 15:29:46,@promag able to reproduce issue? I'm willing to help debug.,https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-539569112,539569112,
promag,2019-10-08 17:40:25,"> @promag able to reproduce issue?\n\n@instagibbs no, currently it's working ðŸ‘€",https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-539623657,539623657,
instagibbs,2019-10-08 20:50:36,"code review and tACK 428bdc8041e2c1479b650207110de081a91a19eb\n\nTested:\n1) wallet with privkeys, button is ""Send"", coin control works as intended\n2) wallet with imported descriptors, button lets you make psbt(that I am able to sign remote, and finalize), coin control works as expected\n3) wallet with imported addresses only, button also ""Create unsigned"" but no funds available, nothing sho",https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-539698694,539698694,
harding,2019-10-09 20:46:03,"@Sjors and @gwillen thanks for working on this!  I use both the GUI and a Bitcoin Core-based cold wallet, so I'm very appreciative of this type of improvement.\n\nNit-ish.  If I try to create an unsigned spend by clicking ""Use available balance"" and checking ""Subtract fee from amount"", my transaction shouldn't have a change output.  However, on a wallet where I haven't created a keypool, I get a",https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-540187262,540187262,
Sjors,2019-10-10 13:53:35,"The wallet seems a bit overzealous on trying to top up the keypool. I would prefer to punt this particular bug until after #16341, unless @achow101 thinks a fix won't create rebase hell for him.",https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-540595431,540595431,
promag,2019-10-10 13:59:51,"> I get an error message about not having a change address\n\nYeah also got that one. @Sjors I think that, regardless of #16341, a solution would be nice.",https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-540599353,540599353,
Sjors,2019-10-11 10:49:47,I reproduced the issue by creating a watch-only wallet without a keypool (using HWI's `--nokeypool` feature). Added a commit to address this.,https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-541015526,541015526,
Sjors,2019-10-22 19:12:37,I extracted the keypool stuff into #17219,https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-545110926,545110926,
instagibbs,2019-10-25 19:11:29,"Will re-review, but the diff looks good.",https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-546477185,546477185,
instagibbs,2019-10-25 19:48:00,"re-code-review ACK https://github.com/bitcoin/bitcoin/pull/16944/commits/9808f7867d9c557ba4bc253104f47fbd7f02b668\n\nonly changes from last tested review:\n```\ne081a91a19eb 9808f7867d9c557ba4bc253104f47fbd7f02b668\ndiff --git a/src/qt/sendcoinsdialog.cpp b/src/qt/sendcoinsdialog.cpp\nindex de701dbdd..3fd63a1b7 100644\n--- a/src/qt/sendcoinsdialog.cpp\n+++ b/src/qt/sendcoinsdialog.cpp\n@@",https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-546488758,546488758,
meshcollider,2019-11-06 06:24:08,"Code review ACK 9808f7867d9c557ba4bc253104f47fbd7f02b668\n\nI'll wait for one more tested ACK before merging, just to make sure.",https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-550164506,550164506,
promag,2019-11-06 08:35:17,"Sorry @Sjors, missed the notification, will review.",https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-550203299,550203299,
Sjors,2019-11-06 17:54:00,"Mmm, this in an odd Travis error:\n```\n2019-11-06T17:49:26.056000Z TestFramework (INFO): sendrawtransaction with missing input\n198162019-11-06T17:49:42.869000Z TestFramework (ERROR): JSONRPC error\n19817Traceback (most recent call last):\n19818  File ""/home/travis/build/bitcoin/bitcoin/build/bitcoin-i686-pc-linux-gnu/test/functional/test_framework/test_framework.py"", line 111, in main\n198",https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-550426266,550426266,
instagibbs,2019-11-14 17:50:27,test and code review ACK https://github.com/bitcoin/bitcoin/pull/16944/commits/c6dd565c8820aa8a98b190621e10c6e2821a9ecc,https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-554001865,554001865,
jonasschnelli,2019-11-15 22:49:56,Concept ACK,https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-554559630,554559630,
promag,2019-11-24 21:40:23,"I've used the ""Use available balance"" which filled the amount, but below balance is still zero. \n\n<img width=""1034"" alt=""Screenshot 2019-11-24 at 21 27 50"" src=""https://user-images.githubusercontent.com/3534524/69501927-9193fc00-0f01-11ea-95c0-f84ab12675a6.png"">\n\nSomething that can be fixed in a follow up - the button could change and/or the balance info on the bottom too.\n\nTested ACK ",https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-557930796,557930796,
Sjors,2019-11-25 10:05:46,"@promag the balance seems unrelated, though obviously a bug",https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-558082376,558082376,
Sjors,2019-11-25 10:39:41,@promag fixed in #17587,https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-558096211,558096211,
instagibbs,2019-09-25 13:19:04,As @practicalswift notes you likely wanted parenths around this new clause,https://github.com/bitcoin/bitcoin/pull/16944#discussion_r328116392,328116392,src/wallet/wallet.cpp
instagibbs,2019-09-25 13:22:05,nit: annotate the optional bool args for clarity,https://github.com/bitcoin/bitcoin/pull/16944#discussion_r328117961,328117961,src/qt/sendcoinsdialog.cpp
instagibbs,2019-09-25 13:27:59,"`done` isn't really helping me parse what is going on here, maybe call it `send_failure` and reverse the meaning?",https://github.com/bitcoin/bitcoin/pull/16944#discussion_r328121141,328121141,src/qt/sendcoinsdialog.cpp
practicalswift,2019-09-25 21:56:09,"Should be ""clipboard"" :)",https://github.com/bitcoin/bitcoin/pull/16944#discussion_r328358110,328358110,src/qt/sendcoinsdialog.cpp
achow101,2019-09-30 21:04:23,This doesn't need to be outside of the `else` block since it isn't used in the no private keys case.,https://github.com/bitcoin/bitcoin/pull/16944#discussion_r329785733,329785733,src/qt/sendcoinsdialog.cpp
Sjors,2019-10-01 15:26:09,"In the no private keys case we also clear the form. We just assume (with an `assert`) that PSBT creation can never fail, which is why `send_failure` is always `false`. ",https://github.com/bitcoin/bitcoin/pull/16944#discussion_r330122504,330122504,src/qt/sendcoinsdialog.cpp
promag,2019-10-12 08:45:11,"1cb1381ca51d1967146a0a75fd96c1b4800ec378\n\nWhy was this changed?",https://github.com/bitcoin/bitcoin/pull/16944#discussion_r334227902,334227902,src/wallet/wallet.cpp
promag,2019-10-12 08:53:14,"1cb1381ca51d1967146a0a75fd96c1b4800ec378\n\nnit `bool failed_to_get_change_address{false}`.",https://github.com/bitcoin/bitcoin/pull/16944#discussion_r334228153,334228153,src/wallet/wallet.cpp
promag,2019-10-12 09:04:13,"1cb1381ca51d1967146a0a75fd96c1b4800ec378\n\nI think you don't need this, you can write the reason in `strFailReason`.",https://github.com/bitcoin/bitcoin/pull/16944#discussion_r334228541,334228541,src/wallet/wallet.cpp
promag,2019-10-12 09:10:21,"1cb1381ca51d1967146a0a75fd96c1b4800ec378\n\nCould also test it works with `changeAddress` option?",https://github.com/bitcoin/bitcoin/pull/16944#discussion_r334228750,334228750,test/functional/wallet_keypool.py
promag,2019-10-12 09:11:18,"1cb1381ca51d1967146a0a75fd96c1b4800ec378\n\nunrelated, I wonder why this is not translated.",https://github.com/bitcoin/bitcoin/pull/16944#discussion_r334228774,334228774,src/wallet/wallet.cpp
Sjors,2019-10-12 10:00:48,So it's not undefined when passed into coin selection.,https://github.com/bitcoin/bitcoin/pull/16944#discussion_r334230433,334230433,src/wallet/wallet.cpp
promag,2019-10-12 10:06:54,The empty constructor was already being called right?,https://github.com/bitcoin/bitcoin/pull/16944#discussion_r334230594,334230594,src/wallet/wallet.cpp
Sjors,2019-10-12 10:17:28,Added,https://github.com/bitcoin/bitcoin/pull/16944#discussion_r334231039,334231039,test/functional/wallet_keypool.py
Sjors,2019-10-12 10:30:29,Added translation,https://github.com/bitcoin/bitcoin/pull/16944#discussion_r334231528,334231528,src/wallet/wallet.cpp
Sjors,2019-10-12 10:43:09,"Ah yes, it's a class, so it's initialized... Fixed.",https://github.com/bitcoin/bitcoin/pull/16944#discussion_r334232031,334232031,src/wallet/wallet.cpp
achow101,2019-10-16 19:25:20,nit: s/Unsigned/Signed,https://github.com/bitcoin/bitcoin/pull/16944#discussion_r335665339,335665339,src/qt/sendcoinsdialog.cpp
achow101,2019-10-16 19:37:42,This is unused.,https://github.com/bitcoin/bitcoin/pull/16944#discussion_r335670563,335670563,src/qt/sendcoinsdialog.h
achow101,2019-10-16 19:45:54,"IMO this should be up higher at the BnB failure check. If BnB fails to find an exact match, then it is highly unlikely that KnapsackSolver will find an exact match. It is better to fail earlier, so I would prefer that this check and return occurred in https://github.com/bitcoin/bitcoin/blob/master/src/wallet/wallet.cpp#L3081-L3083",https://github.com/bitcoin/bitcoin/pull/16944#discussion_r335674194,335674194,src/wallet/wallet.cpp
Sjors,2019-10-21 09:10:47,If moved this check to the start of the loop.,https://github.com/bitcoin/bitcoin/pull/16944#discussion_r336909933,336909933,src/wallet/wallet.cpp
Sjors,2019-10-21 11:35:40,"~That didn't work.~ I don't like putting this deep inside hard to reason about loop & if/else branches; don't want to accidentally send change to nowhere. So I added `coin_selection_params.use_knapsack` which is set to false if `failed_to_get_change_address `, in order to skip knapsack.",https://github.com/bitcoin/bitcoin/pull/16944#discussion_r336967659,336967659,src/wallet/wallet.cpp
Sjors,2019-10-21 13:35:29,"This seems hopeless. There's a few scenarios where BNB isn't used:\n\n1. When you use manual coin selection in QT \n\nhttps://github.com/bitcoin/bitcoin/blob/a22b62481aae95747830bd3c0db3227860b12d8e/src/wallet/wallet.cpp#L2674-L2682\n\nThis is the scenario @gwillen ran into: https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-537321922\n\n2. When we subtract fee from amount:\n\nht",https://github.com/bitcoin/bitcoin/pull/16944#discussion_r337020513,337020513,src/wallet/wallet.cpp
instagibbs,2019-10-21 13:56:17,"At the risk of making the error message less precise, I think this whole block is easier to read if it just relies on `GetReservedDestination` to check if `CanGetAddress` is true or not. You also can just not store `ret` and use it directly in the conditional.\n\n",https://github.com/bitcoin/bitcoin/pull/16944#discussion_r337031540,337031540,src/wallet/wallet.cpp
instagibbs,2019-10-21 14:01:24,I think the reduced efficiency is fine in that it's easier to read at least.,https://github.com/bitcoin/bitcoin/pull/16944#discussion_r337034494,337034494,src/wallet/wallet.cpp
achow101,2019-10-23 22:31:29,Seems like we need to enable bnb for those things. Will try.,https://github.com/bitcoin/bitcoin/pull/16944#discussion_r338308868,338308868,src/wallet/wallet.cpp
Sjors,2019-10-24 15:06:03,I got part of the way there in #17219,https://github.com/bitcoin/bitcoin/pull/16944#discussion_r338629089,338629089,src/wallet/wallet.cpp
promag,2019-11-06 09:37:43,"a16d2eb0d593633d6ba733d761c56c835b0e30dc\n\nDoes it make sense to do something like:\n```cpp\n    // some comment here\n    isminetype is_mine_filter = IsWalletFlagSet(WALLET_FLAG_DISABLE_PRIVATE_KEYS)\n                              ? ISMINE_WATCH_ONLY\n                              : ISMINE_SPENDABLE;\n\nâ€¦\n                IsMine(it->second.tx->vout[output.n]) == is_mine_filter) {\n```",https://github.com/bitcoin/bitcoin/pull/16944#discussion_r342996173,342996173,src/wallet/wallet.cpp
promag,2019-11-06 09:42:03,"eef2b6350684f2675989b48a2d7f79c0d8a7be6e\n\nDoes this have to be here?  Couldn't this be checked in `CWallet::AvailableCoins`?",https://github.com/bitcoin/bitcoin/pull/16944#discussion_r342998196,342998196,src/qt/sendcoinsdialog.cpp
promag,2019-11-06 09:47:14,"2bc10122874421ba7ce379325ebc2420955b1b9b\n\nLooks like default arguments aren't used in these interfaces, @ryanofsky coincidence or is there a reason for that?",https://github.com/bitcoin/bitcoin/pull/16944#discussion_r343000831,343000831,src/interfaces/wallet.h
promag,2019-11-06 09:47:32,"2bc10122874421ba7ce379325ebc2420955b1b9b\n\nnit, comments have period here.",https://github.com/bitcoin/bitcoin/pull/16944#discussion_r343000988,343000988,src/interfaces/wallet.h
promag,2019-11-06 09:48:07,"2bc10122874421ba7ce379325ebc2420955b1b9b\n\nI think you should forward declare what's necessary.",https://github.com/bitcoin/bitcoin/pull/16944#discussion_r343001263,343001263,src/interfaces/wallet.h
promag,2019-11-06 09:48:38,"9808f7867d9c557ba4bc253104f47fbd7f02b668\n\nnit sort.",https://github.com/bitcoin/bitcoin/pull/16944#discussion_r343001563,343001563,src/qt/sendcoinsdialog.cpp
promag,2019-11-06 09:49:50,"9808f7867d9c557ba4bc253104f47fbd7f02b668\n\nAvoid `pleaseReview` by calling `questionString.append` here and below? - like L332 above.",https://github.com/bitcoin/bitcoin/pull/16944#discussion_r343002142,343002142,src/qt/sendcoinsdialog.cpp
promag,2019-11-06 09:51:49,"9808f7867d9c557ba4bc253104f47fbd7f02b668\n\nUse ternary like above or just one `if (model->privateKeysDisabled())` for these.",https://github.com/bitcoin/bitcoin/pull/16944#discussion_r343003211,343003211,src/qt/sendcoinsdialog.cpp
promag,2019-11-06 09:54:14,Maybe for now move the defaults to interfaces/wallet.cpp and just have `psbtx` and `complete` arguments for now.,https://github.com/bitcoin/bitcoin/pull/16944#discussion_r343004421,343004421,src/interfaces/wallet.h
promag,2019-11-06 09:56:51,Or even just make this `unsignedFilllPSBT(psbtx)` which `assert(complete == false)` and makes the GUI code simpler?,https://github.com/bitcoin/bitcoin/pull/16944#discussion_r343005788,343005788,src/interfaces/wallet.h
Sjors,2019-11-06 16:18:14,"I don't think that's a good idea. The RPC sets this based on `includeWatching`, so then we'd have to make it an `Optional`.",https://github.com/bitcoin/bitcoin/pull/16944#discussion_r343189738,343189738,src/qt/sendcoinsdialog.cpp
Sjors,2019-11-06 16:18:19,Done,https://github.com/bitcoin/bitcoin/pull/16944#discussion_r343189775,343189775,src/wallet/wallet.cpp
Sjors,2019-11-06 16:22:38,"I think refactoring the interface can be done some other time. External signers #16546 will set `sign` to true, and the result may or may not be complete (e.g. multisig). ",https://github.com/bitcoin/bitcoin/pull/16944#discussion_r343192385,343192385,src/interfaces/wallet.h
Sjors,2019-11-06 16:37:58,"I tried, but it results in having to import stuff all over the place, and errors like this:\n```\ninterfaces/wallet.cpp:354:20: error: no matching function for call to 'FillPSBT'\n            return FillPSBT(m_wallet.get(), psbtx, complete, sighash_type, sign, bip32derivs);\n                   ^~~~~~~~\n./wallet/psbtwallet.h:27:28: note: candidate function not viable: cannot convert argument ",https://github.com/bitcoin/bitcoin/pull/16944#discussion_r343201621,343201621,src/interfaces/wallet.h
promag,2019-11-06 16:50:39,"d474156f242dc900c221924765210ac4f7e97f7a\n\nWrong indentation.",https://github.com/bitcoin/bitcoin/pull/16944#discussion_r343209088,343209088,src/interfaces/wallet.cpp
Sjors,2019-11-06 17:53:26,Fixed,https://github.com/bitcoin/bitcoin/pull/16944#discussion_r343240006,343240006,src/interfaces/wallet.cpp
luke-jr,2019-11-13 03:28:53,"""Bitcoin Core"" should be replaced with %1 and `PACKAGE_NAME`",https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345555157,345555157,src/qt/sendcoinsdialog.cpp
luke-jr,2019-11-13 03:29:24,Do we want to imply the Bitcoin Core GUI can sign these yet?,https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345555238,345555238,src/qt/sendcoinsdialog.cpp
luke-jr,2019-11-13 03:30:55,"Do we need this? Each wallet gets its own `SendCoinsDialog`, and can't change `privateKeysDisabled` AFAIK...",https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345555495,345555495,src/qt/sendcoinsdialog.cpp
luke-jr,2019-11-13 03:31:14,"[If we do need it,] remove duplicate from .ui file",https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345555549,345555549,src/qt/sendcoinsdialog.cpp
luke-jr,2019-11-13 03:31:38,"[If we do need it,] should be ""S&end"" for the shortcut key.",https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345555607,345555607,src/qt/sendcoinsdialog.cpp
luke-jr,2019-11-13 03:32:08,Please handle the true case first.,https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345555697,345555697,src/qt/sendcoinsdialog.cpp
luke-jr,2019-11-13 03:32:46,Not sure we need to change this message.,https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345555833,345555833,src/qt/sendcoinsdialog.cpp
luke-jr,2019-11-13 03:35:12,Suggest using 4e10bdd433f5d1ba9069f4942cb89e69dd83d816 for this (part of #15987),https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345556226,345556226,src/qt/sendcoinsdialog.cpp
luke-jr,2019-11-13 03:45:25,I'd make a `const bool include_watch_only` to check the wallet flag once outside the loops...,https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345557957,345557957,src/wallet/wallet.cpp
luke-jr,2019-11-13 03:46:33,"Something like this above:\n\n```C++\n    // Include watch-only for wallets without private keys\n    const bool include_watch_only = IsWalletFlagSet(WALLET_FLAG_DISABLE_PRIVATE_KEYS);\n    const isminetype is_mine_filter = include_watch_only ? ISMINE_WATCH_ONLY : ISMINE_SPENDABLE;\n```",https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345558163,345558163,src/wallet/wallet.cpp
Sjors,2019-11-13 16:59:37,"In reference to ""offline Bitcoin Core wallet""? It doesn't say GUI :-)",https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345880896,345880896,src/qt/sendcoinsdialog.cpp
Sjors,2019-11-13 17:23:45,Not sure what you mean here. We set these strings in `setModel(WalletModel *_model)`. That's the first time we know `privateKeysDisabled`. The constructor doesn't know.,https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345893996,345893996,src/qt/sendcoinsdialog.cpp
Sjors,2019-11-13 17:29:18,This is the only place where it's not in a toolbox.,https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345897117,345897117,src/qt/sendcoinsdialog.cpp
luke-jr,2019-11-13 17:53:59,"Hence ""imply"".",https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345909139,345909139,src/qt/sendcoinsdialog.cpp
luke-jr,2019-11-13 17:54:32,"I mean there is never a case where we need to change the text *back* to ""Send"" (which is set in the .ui)",https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345909400,345909400,src/qt/sendcoinsdialog.cpp
luke-jr,2019-11-13 17:54:58,???,https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345909606,345909606,src/qt/sendcoinsdialog.cpp
Sjors,2019-11-13 17:55:30,"~Ok, I removed the tooltip and button text from the UI file.~ I also added the `s` keyboard shortcut back, though I can't test that on macOS.",https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345909846,345909846,src/qt/sendcoinsdialog.cpp
Sjors,2019-11-13 17:57:00,I mean tool tip.,https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345910614,345910614,src/qt/sendcoinsdialog.cpp
Sjors,2019-11-13 17:57:09,Done,https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345910700,345910700,src/qt/sendcoinsdialog.cpp
luke-jr,2019-11-13 17:59:21,"Should be `""S&end""`",https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345911899,345911899,src/qt/sendcoinsdialog.cpp
Sjors,2019-11-13 17:59:55,"I only expect people to use this feature (watch only wallets in general) based on some tutorial, so I don't think this needs to be perfect. Hopefully we can add signing PSBT from the GUI soon too.",https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345912214,345912214,src/qt/sendcoinsdialog.cpp
Sjors,2019-11-13 18:01:17,"I'll rebase if that's merged first, but that's not a trivial enough commit.",https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345912878,345912878,src/qt/sendcoinsdialog.cpp
Sjors,2019-11-13 18:06:34,"Ah I see. Ok, I dropped the else branch (keeping the original in the `.ui` file).",https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345915227,345915227,src/qt/sendcoinsdialog.cpp
luke-jr,2019-11-13 18:20:24,You didn't resolve this...,https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345921586,345921586,src/wallet/wallet.cpp
luke-jr,2019-11-13 18:23:59,"Perhaps use `""Cr&eate Unsigned""` so the ""E"" shortcut matches with `""S&end""`",https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345923209,345923209,src/qt/sendcoinsdialog.cpp
Sjors,2019-11-13 19:03:54,Done,https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345943613,345943613,src/qt/sendcoinsdialog.cpp
promag,2019-11-18 00:21:39,Good point.,https://github.com/bitcoin/bitcoin/pull/16944#discussion_r347170115,347170115,src/qt/sendcoinsdialog.cpp
