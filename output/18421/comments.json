[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/603340799",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18421#issuecomment-603340799",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18421",
    "id": 603340799,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYwMzM0MDc5OQ==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-24T16:18:07Z",
    "updated_at": "2020-08-08T15:13:02Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #19316 ([net] Cleanup logic around connection types by amitiuttarwar)\n* #19064 (refactor: Cleanup thread ctor calls by hebasto)\n* #18077 (net: Add NAT-PMP port forwarding support by hebasto)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/603340799/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/603341645",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18421#issuecomment-603341645",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18421",
    "id": 603341645,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYwMzM0MTY0NQ==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-24T16:19:26Z",
    "updated_at": "2020-03-24T16:19:26Z",
    "author_association": "MEMBER",
    "body": "Can this use the scheduler instead of using a separate thread?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/603341645/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/603356671",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18421#issuecomment-603356671",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18421",
    "id": 603356671,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYwMzM1NjY3MQ==",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?u=5ff13e375b40ea55ecd3c108337dd6a23f68eddf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-24T16:42:00Z",
    "updated_at": "2020-03-24T16:42:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "Concept ACK",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/603356671/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/603357337",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18421#issuecomment-603357337",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18421",
    "id": 603357337,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYwMzM1NzMzNw==",
    "user": {
      "login": "naumenkogs",
      "id": 7975071,
      "node_id": "MDQ6VXNlcjc5NzUwNzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7975071?u=06eb9ae4f9b3f954056098860decccbf1340e40f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/naumenkogs",
      "html_url": "https://github.com/naumenkogs",
      "followers_url": "https://api.github.com/users/naumenkogs/followers",
      "following_url": "https://api.github.com/users/naumenkogs/following{/other_user}",
      "gists_url": "https://api.github.com/users/naumenkogs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
      "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
      "repos_url": "https://api.github.com/users/naumenkogs/repos",
      "events_url": "https://api.github.com/users/naumenkogs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-24T16:42:57Z",
    "updated_at": "2020-03-24T16:42:57Z",
    "author_association": "MEMBER",
    "body": "@sipa yes! I simply forgot that this can be done with scheduler. Just force-pushed an update.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/603357337/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/603392699",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18421#issuecomment-603392699",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18421",
    "id": 603392699,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYwMzM5MjY5OQ==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-24T17:31:50Z",
    "updated_at": "2020-03-24T17:31:50Z",
    "author_association": "MEMBER",
    "body": "> Can this use the scheduler instead of using a separate thread?\r\n\r\nWhat is the maximum time this can take? If it is unbounded, it seems that this would be a trivial DOS attack against a node, no?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/603392699/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/603557583",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18421#issuecomment-603557583",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18421",
    "id": 603557583,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYwMzU1NzU4Mw==",
    "user": {
      "login": "naumenkogs",
      "id": 7975071,
      "node_id": "MDQ6VXNlcjc5NzUwNzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7975071?u=06eb9ae4f9b3f954056098860decccbf1340e40f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/naumenkogs",
      "html_url": "https://github.com/naumenkogs",
      "followers_url": "https://api.github.com/users/naumenkogs/followers",
      "following_url": "https://api.github.com/users/naumenkogs/following{/other_user}",
      "gists_url": "https://api.github.com/users/naumenkogs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
      "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
      "repos_url": "https://api.github.com/users/naumenkogs/repos",
      "events_url": "https://api.github.com/users/naumenkogs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-24T23:30:03Z",
    "updated_at": "2020-03-24T23:30:03Z",
    "author_association": "MEMBER",
    "body": "@sipa I was not aware that scheduled event will block other execution threads, and now that Marco pointed out that attack, i'm thinking separate thread makes more sense? We don't want to make any assumptions about these requests executing very fast.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/603557583/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/603560680",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18421#issuecomment-603560680",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18421",
    "id": 603560680,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYwMzU2MDY4MA==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-24T23:40:48Z",
    "updated_at": "2020-03-24T23:40:48Z",
    "author_association": "MEMBER",
    "body": "`LimitValidationInterfaceQueue` is called in `ActivateBestChain`. So even validation itself can be blocked, if an attacker can make those requests go slow. Not sure if that is possible, but I wanted to raise the point.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/603560680/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/604154189",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18421#issuecomment-604154189",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18421",
    "id": 604154189,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYwNDE1NDE4OQ==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-26T00:09:23Z",
    "updated_at": "2020-03-26T00:09:23Z",
    "author_association": "MEMBER",
    "body": "@naumenkogs It won't block other threads, but it will delay other events in the same scheduler. I agree that it's probably too slow for that (I don't know what latency `getaddrinfo` can have, but I expect it may be substantial). An alternative is doing it from `PeerValidationLogic::SendMessages`, once a timer expires. I'm hammering on avoiding a separate thread for this, because threads have a significant memory footprint (several MB, at least), so a thread that's idle almost all the time is a waste.\r\n\r\n@MarcoFalke Vaguely related, do we have any policies around what maximum execution duration things in the main scheduler are allowed to have? ",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/604154189/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/604178979",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18421#issuecomment-604178979",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18421",
    "id": 604178979,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYwNDE3ODk3OQ==",
    "user": {
      "login": "naumenkogs",
      "id": 7975071,
      "node_id": "MDQ6VXNlcjc5NzUwNzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7975071?u=06eb9ae4f9b3f954056098860decccbf1340e40f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/naumenkogs",
      "html_url": "https://github.com/naumenkogs",
      "followers_url": "https://api.github.com/users/naumenkogs/followers",
      "following_url": "https://api.github.com/users/naumenkogs/following{/other_user}",
      "gists_url": "https://api.github.com/users/naumenkogs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
      "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
      "repos_url": "https://api.github.com/users/naumenkogs/repos",
      "events_url": "https://api.github.com/users/naumenkogs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-26T01:41:03Z",
    "updated_at": "2020-03-26T01:42:08Z",
    "author_association": "MEMBER",
    "body": "Agreed that that RAM overhead of a new thread for just this is no good.\r\n\r\nYeah, I would say normal execution of this function takes 2s, abnormal may take...a minute even if everyone is honest, due to random internet/os glitches.\r\nDo we have anything in our toolset to make sure Lookup() function doesn't take more than couple seconds? I don't see anything within scheduler. Maybe it's doable to add this feature?\r\n\r\nAn alternative crazy idea is to have a special thread for a number of rare not-so-critical functions, which might take long time (for example, I can imagine DumpAddresses takes long due to I/O issues).",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/604178979/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/626032987",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18421#issuecomment-626032987",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18421",
    "id": 626032987,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyNjAzMjk4Nw==",
    "user": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-08T21:40:37Z",
    "updated_at": "2020-05-08T21:40:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "I thought we had two scheduler threads? If not we should just do that and then its not a problem.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/626032987/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/672501658",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18421#issuecomment-672501658",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18421",
    "id": 672501658,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3MjUwMTY1OA==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-12T02:43:04Z",
    "updated_at": "2020-08-12T02:43:04Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--cf906140f33d8803c4a75a2196329ecb-->\n\ud83d\udc19 This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/672501658/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/930055736",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18421#issuecomment-930055736",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18421",
    "id": 930055736,
    "node_id": "IC_kwDOABII5843b4Y4",
    "user": {
      "login": "naumenkogs",
      "id": 7975071,
      "node_id": "MDQ6VXNlcjc5NzUwNzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7975071?u=06eb9ae4f9b3f954056098860decccbf1340e40f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/naumenkogs",
      "html_url": "https://github.com/naumenkogs",
      "followers_url": "https://api.github.com/users/naumenkogs/followers",
      "following_url": "https://api.github.com/users/naumenkogs/following{/other_user}",
      "gists_url": "https://api.github.com/users/naumenkogs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
      "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
      "repos_url": "https://api.github.com/users/naumenkogs/repos",
      "events_url": "https://api.github.com/users/naumenkogs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-29T10:35:54Z",
    "updated_at": "2021-09-29T10:36:12Z",
    "author_association": "MEMBER",
    "body": "Not sure what to do with this PR.\r\nThe show-stopper here was the discussion around the blocking behavior of DNS queries: the options were either add a new thread or employing existing threads for such non-critical task (see [discussion](https://github.com/bitcoin/bitcoin/issues/18488)).\r\n\r\nIt kind of went nowhere, so I'm gonna close this PR for now. If you have an opinion on the way to move forward with one of those paths, please go to the mentioned [discussion](https://github.com/bitcoin/bitcoin/issues/18488).\r\n\r\nIf you have an alternative way to move forward, feel free to comment here and we can resurrect it.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/930055736/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/397302616",
    "pull_request_review_id": 380499860,
    "id": 397302616,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzMwMjYxNg==",
    "diff_hunk": "@@ -28,7 +28,9 @@ calculating the target.\n \n Disabling listening will result in fewer nodes connected (remember the maximum of 8\n outbound peers). Fewer nodes will result in less traffic usage as you are relaying\n-blocks and transactions to fewer nodes.\n+blocks and transactions to fewer nodes. This would also prevent reachable nodes from\n+periodically querying DNS servers when it is not needed (feature, which gives more\n+privacy to the non-reachable nodes located in the same subnet).",
    "path": "doc/reduce-traffic.md",
    "position": null,
    "original_position": 7,
    "commit_id": "de74888e9db3da3604e06d966d58f78247ca9641",
    "original_commit_id": "5e87cba47a8c5b86448658e4c23d2e809e69b50b",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I think this in an implementation detail which people that want to reduce their traffic are not interested in learning about.\r\n\r\nA release notes snippet would be a better place to put this, no?",
    "created_at": "2020-03-24T16:44:20Z",
    "updated_at": "2020-04-16T14:40:14Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18421#discussion_r397302616",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18421",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/397302616"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18421#discussion_r397302616"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18421"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/397302616/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 33,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/397305463",
    "pull_request_review_id": 380503239,
    "id": 397305463,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzMwNTQ2Mw==",
    "diff_hunk": "@@ -28,7 +28,9 @@ calculating the target.\n \n Disabling listening will result in fewer nodes connected (remember the maximum of 8\n outbound peers). Fewer nodes will result in less traffic usage as you are relaying\n-blocks and transactions to fewer nodes.\n+blocks and transactions to fewer nodes. This would also prevent reachable nodes from\n+periodically querying DNS servers when it is not needed (feature, which gives more\n+privacy to the non-reachable nodes located in the same subnet).",
    "path": "doc/reduce-traffic.md",
    "position": null,
    "original_position": 7,
    "commit_id": "de74888e9db3da3604e06d966d58f78247ca9641",
    "original_commit_id": "5e87cba47a8c5b86448658e4c23d2e809e69b50b",
    "user": {
      "login": "naumenkogs",
      "id": 7975071,
      "node_id": "MDQ6VXNlcjc5NzUwNzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/naumenkogs",
      "html_url": "https://github.com/naumenkogs",
      "followers_url": "https://api.github.com/users/naumenkogs/followers",
      "following_url": "https://api.github.com/users/naumenkogs/following{/other_user}",
      "gists_url": "https://api.github.com/users/naumenkogs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
      "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
      "repos_url": "https://api.github.com/users/naumenkogs/repos",
      "events_url": "https://api.github.com/users/naumenkogs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Yeah, I was hesitant about this part. Committed this for now simply to not ignore this. Unless someone expresses support for keeping this, I would remove this commit later.",
    "created_at": "2020-03-24T16:47:55Z",
    "updated_at": "2020-04-16T14:40:14Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18421#discussion_r397305463",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18421",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/397305463"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18421#discussion_r397305463"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18421"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/397305463/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 33,
    "side": "RIGHT",
    "in_reply_to_id": 397302616
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/397313055",
    "pull_request_review_id": 380512858,
    "id": 397313055,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzMxMzA1NQ==",
    "diff_hunk": "@@ -48,6 +48,9 @@ static_assert(MINIUPNPC_API_VERSION >= 10, \"miniUPnPc API version >= 10 assumed\"\n // How often to dump addresses to peers.dat\n static constexpr std::chrono::minutes DUMP_PEERS_INTERVAL{15};\n \n+// How often to make a DNS caches updating query",
    "path": "src/net.cpp",
    "position": null,
    "original_position": 4,
    "commit_id": "de74888e9db3da3604e06d966d58f78247ca9641",
    "original_commit_id": "5e87cba47a8c5b86448658e4c23d2e809e69b50b",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "nit: Could use doxygen comment?\r\n```suggestion\r\n/** How often to make a DNS caches updating query */\r\n```",
    "created_at": "2020-03-24T16:57:55Z",
    "updated_at": "2020-04-16T14:40:14Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18421#discussion_r397313055",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18421",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/397313055"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18421#discussion_r397313055"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18421"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/397313055/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 51,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/397316551",
    "pull_request_review_id": 380512858,
    "id": 397316551,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzMxNjU1MQ==",
    "diff_hunk": "@@ -1571,8 +1579,48 @@ void StopMapPort()\n #endif\n \n \n+void CConnman::DNSCachesUpdate()\n+{\n+    // Only reachable nodes do this, because those are already easy to find.\n+    // Unless the node is explicitly set to be non-reachable (-listen=0),\n+    // the only way to check if it is reachable is to observe inbound connections.\n+    // This check is made every time, because a node may become non-reachable\n+    // due to external factors (e.g. local network settings update).\n+    if (CountInboundConnections() == 0) return;\n+\n+    // Every time a new widely-requests service bit is deployed, this list should be\n+    // updated to invalide records for that service bit.\n+    std::vector<uint64_t> service_bits_combinations{",
    "path": "src/net.cpp",
    "position": null,
    "original_position": 56,
    "commit_id": "de74888e9db3da3604e06d966d58f78247ca9641",
    "original_commit_id": "5e87cba47a8c5b86448658e4c23d2e809e69b50b",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "nit: I think this list reads easier if each entry was on its own line.\r\n\r\nnit: compile time constants should be all upper case and static\r\n\r\n```suggestion\r\n    static const std::vector<uint64_t> SERVICE_BITS_COMBINATIONS{\r\n```",
    "created_at": "2020-03-24T17:02:53Z",
    "updated_at": "2020-04-16T14:40:14Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18421#discussion_r397316551",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18421",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/397316551"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18421#discussion_r397316551"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18421"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/397316551/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1593,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/397318427",
    "pull_request_review_id": 380512858,
    "id": 397318427,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzMxODQyNw==",
    "diff_hunk": "@@ -468,6 +479,7 @@ class CConnman\n \n     CThreadInterrupt interruptNet;\n \n+    std::thread thread_dns_caches_update;",
    "path": "src/net.h",
    "position": null,
    "original_position": 29,
    "commit_id": "de74888e9db3da3604e06d966d58f78247ca9641",
    "original_commit_id": "5e87cba47a8c5b86448658e4c23d2e809e69b50b",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "nit: Should be removed now?",
    "created_at": "2020-03-24T17:05:34Z",
    "updated_at": "2020-04-16T14:40:14Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18421#discussion_r397318427",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18421",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/397318427"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18421#discussion_r397318427"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18421"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/397318427/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 482,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/397319403",
    "pull_request_review_id": 380512858,
    "id": 397319403,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzMxOTQwMw==",
    "diff_hunk": "@@ -361,6 +362,16 @@ class CConnman\n     void ThreadSocketHandler();\n     void ThreadDNSAddressSeed();\n \n+    // Reachable nodes should periodically make requests\n+    // to DNS servers even if they don't need them.\n+    // Then, when new nodes from the same subnets need to query DNS,\n+    // they are likely to hit the cache instead.\n+    // For non-reachable nodes this means more privacy,\n+    // because fewer actors would know about their query.\n+    // For reachable nodes there is no privacy loss due to this,\n+    // because being reachable already makes them public.\n+    void DNSCachesUpdate();",
    "path": "src/net.h",
    "position": null,
    "original_position": 20,
    "commit_id": "de74888e9db3da3604e06d966d58f78247ca9641",
    "original_commit_id": "5e87cba47a8c5b86448658e4c23d2e809e69b50b",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "nit: Both of the newly added methods can be `const` because they are read-only, no?\r\n```suggestion\r\n    void DNSCachesUpdate() const;\r\n```",
    "created_at": "2020-03-24T17:06:59Z",
    "updated_at": "2020-04-16T14:40:14Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18421#discussion_r397319403",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18421",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/397319403"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18421#discussion_r397319403"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18421"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/397319403/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 373,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/397334535",
    "pull_request_review_id": 380539924,
    "id": 397334535,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzMzNDUzNQ==",
    "diff_hunk": "@@ -468,6 +479,7 @@ class CConnman\n \n     CThreadInterrupt interruptNet;\n \n+    std::thread thread_dns_caches_update;",
    "path": "src/net.h",
    "position": null,
    "original_position": 29,
    "commit_id": "de74888e9db3da3604e06d966d58f78247ca9641",
    "original_commit_id": "5e87cba47a8c5b86448658e4c23d2e809e69b50b",
    "user": {
      "login": "naumenkogs",
      "id": 7975071,
      "node_id": "MDQ6VXNlcjc5NzUwNzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/naumenkogs",
      "html_url": "https://github.com/naumenkogs",
      "followers_url": "https://api.github.com/users/naumenkogs/followers",
      "following_url": "https://api.github.com/users/naumenkogs/following{/other_user}",
      "gists_url": "https://api.github.com/users/naumenkogs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
      "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
      "repos_url": "https://api.github.com/users/naumenkogs/repos",
      "events_url": "https://api.github.com/users/naumenkogs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "oops. yes!",
    "created_at": "2020-03-24T17:28:42Z",
    "updated_at": "2020-04-16T14:40:14Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18421#discussion_r397334535",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18421",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/397334535"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18421#discussion_r397334535"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18421"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/397334535/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 482,
    "side": "RIGHT",
    "in_reply_to_id": 397318427
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/413405312",
    "pull_request_review_id": 398663899,
    "id": 413405312,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzQwNTMxMg==",
    "diff_hunk": "@@ -1571,8 +1579,53 @@ void StopMapPort()\n #endif\n \n \n+void CConnman::DNSCachesUpdate() const\n+{\n+    // Only reachable nodes do this, because those are already easy to find.\n+    // Unless the node is explicitly set to be non-reachable (-listen=0),\n+    // the only way to check if it is reachable is to observe inbound connections.\n+    // This check is made every time, because a node may become non-reachable\n+    // due to external factors (e.g. local network settings update).\n+    if (CountInboundConnections() == 0) return;",
    "path": "src/net.cpp",
    "position": 52,
    "original_position": 52,
    "commit_id": "de74888e9db3da3604e06d966d58f78247ca9641",
    "original_commit_id": "de74888e9db3da3604e06d966d58f78247ca9641",
    "user": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "How about a `-dnscloaking` option to force it on/off?",
    "created_at": "2020-04-22T23:39:41Z",
    "updated_at": "2020-04-22T23:45:44Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18421#discussion_r413405312",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18421",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/413405312"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18421#discussion_r413405312"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18421"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/413405312/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1589,
    "original_line": 1589,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/413405590",
    "pull_request_review_id": 398663899,
    "id": 413405590,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzQwNTU5MA==",
    "diff_hunk": "@@ -1571,8 +1579,53 @@ void StopMapPort()\n #endif\n \n \n+void CConnman::DNSCachesUpdate() const\n+{\n+    // Only reachable nodes do this, because those are already easy to find.\n+    // Unless the node is explicitly set to be non-reachable (-listen=0),\n+    // the only way to check if it is reachable is to observe inbound connections.\n+    // This check is made every time, because a node may become non-reachable\n+    // due to external factors (e.g. local network settings update).\n+    if (CountInboundConnections() == 0) return;\n+\n+    // Every time a new widely-requests service bit is deployed, this list should be\n+    // updated to invalide records for that service bit.\n+    std::vector<uint64_t> SERVICE_BITS_COMBINATIONS{\n+        // Legacy nodes\n+        NODE_NETWORK,",
    "path": "src/net.cpp",
    "position": 58,
    "original_position": 58,
    "commit_id": "de74888e9db3da3604e06d966d58f78247ca9641",
    "original_commit_id": "de74888e9db3da3604e06d966d58f78247ca9641",
    "user": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Wouldn't these be requesting the bare name without any service bit specification?",
    "created_at": "2020-04-22T23:40:27Z",
    "updated_at": "2020-04-22T23:45:44Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18421#discussion_r413405590",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18421",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/413405590"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18421#discussion_r413405590"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18421"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/413405590/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1595,
    "original_line": 1595,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/413405668",
    "pull_request_review_id": 398663899,
    "id": 413405668,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzQwNTY2OA==",
    "diff_hunk": "@@ -1571,8 +1579,53 @@ void StopMapPort()\n #endif\n \n \n+void CConnman::DNSCachesUpdate() const\n+{\n+    // Only reachable nodes do this, because those are already easy to find.\n+    // Unless the node is explicitly set to be non-reachable (-listen=0),\n+    // the only way to check if it is reachable is to observe inbound connections.\n+    // This check is made every time, because a node may become non-reachable\n+    // due to external factors (e.g. local network settings update).\n+    if (CountInboundConnections() == 0) return;\n+\n+    // Every time a new widely-requests service bit is deployed, this list should be\n+    // updated to invalide records for that service bit.\n+    std::vector<uint64_t> SERVICE_BITS_COMBINATIONS{\n+        // Legacy nodes\n+        NODE_NETWORK,\n+        NODE_NETWORK_LIMITED,",
    "path": "src/net.cpp",
    "position": 59,
    "original_position": 59,
    "commit_id": "de74888e9db3da3604e06d966d58f78247ca9641",
    "original_commit_id": "de74888e9db3da3604e06d966d58f78247ca9641",
    "user": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "What nodes would ever request this?",
    "created_at": "2020-04-22T23:40:39Z",
    "updated_at": "2020-04-22T23:45:44Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18421#discussion_r413405668",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18421",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/413405668"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18421#discussion_r413405668"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18421"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/413405668/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1596,
    "original_line": 1596,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/413406286",
    "pull_request_review_id": 398663899,
    "id": 413406286,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzQwNjI4Ng==",
    "diff_hunk": "@@ -1571,8 +1579,53 @@ void StopMapPort()\n #endif\n \n \n+void CConnman::DNSCachesUpdate() const\n+{\n+    // Only reachable nodes do this, because those are already easy to find.\n+    // Unless the node is explicitly set to be non-reachable (-listen=0),\n+    // the only way to check if it is reachable is to observe inbound connections.\n+    // This check is made every time, because a node may become non-reachable\n+    // due to external factors (e.g. local network settings update).\n+    if (CountInboundConnections() == 0) return;\n+\n+    // Every time a new widely-requests service bit is deployed, this list should be\n+    // updated to invalide records for that service bit.\n+    std::vector<uint64_t> SERVICE_BITS_COMBINATIONS{\n+        // Legacy nodes\n+        NODE_NETWORK,\n+        NODE_NETWORK_LIMITED,\n+        // Segwit-supporting nodes\n+        NODE_NETWORK | NODE_WITNESS,\n+        NODE_NETWORK_LIMITED | NODE_WITNESS,\n+        // Nodes supporting Bloom Filters per BIP 111\n+        NODE_BLOOM,\n+        NODE_NETWORK | NODE_BLOOM,\n+        NODE_NETWORK_LIMITED | NODE_BLOOM,\n+        NODE_NETWORK | NODE_WITNESS | NODE_BLOOM,\n+        NODE_NETWORK_LIMITED | NODE_WITNESS | NODE_BLOOM};\n+\n+    for (const std::string& seed : Params().DNSSeeds()) {\n+        if (interruptNet) {\n+            return;\n+        }\n \n+        // first query as if client doesn't support service bits first\n+        std::vector<CNetAddr> ips;\n+        LookupHost(seed, ips, 1, true);\n+        // TODO: Here and below, make sure downloaded IPs are not very different\n+        // from what stored locally, to identify AddrMan or DNS poisoning.\n \n+        // query for all widely used combinations of service bits\n+        for (uint64_t service_bits_combination : SERVICE_BITS_COMBINATIONS) {",
    "path": "src/net.cpp",
    "position": 82,
    "original_position": 82,
    "commit_id": "de74888e9db3da3604e06d966d58f78247ca9641",
    "original_commit_id": "de74888e9db3da3604e06d966d58f78247ca9641",
    "user": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Should these really be done all at the same time? No new node would batch them like this...?",
    "created_at": "2020-04-22T23:42:07Z",
    "updated_at": "2020-04-22T23:45:44Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18421#discussion_r413406286",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18421",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/413406286"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18421#discussion_r413406286"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18421"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/413406286/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1619,
    "original_line": 1619,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/413407639",
    "pull_request_review_id": 398663899,
    "id": 413407639,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzQwNzYzOQ==",
    "diff_hunk": "@@ -2322,8 +2375,13 @@ bool CConnman::Start(CScheduler& scheduler, const Options& connOptions)\n \n     if (!gArgs.GetBoolArg(\"-dnsseed\", true))\n         LogPrintf(\"DNS seeding disabled\\n\");\n-    else\n+    else {\n         threadDNSAddressSeed = std::thread(&TraceThread<std::function<void()> >, \"dnsseed\", std::function<void()>(std::bind(&CConnman::ThreadDNSAddressSeed, this)));\n+        if (fListen && fNameLookup && !HaveNameProxy()) {\n+            LogPrintf(\"Proactive querying DNS servers to update caches is enabled\\n\");\n+            scheduler.scheduleEvery([this] { DNSCachesUpdate(); }, DNS_CACHES_UPDATE_INTERVAL);",
    "path": "src/net.cpp",
    "position": 104,
    "original_position": 104,
    "commit_id": "de74888e9db3da3604e06d966d58f78247ca9641",
    "original_commit_id": "de74888e9db3da3604e06d966d58f78247ca9641",
    "user": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Probably there should be some randomness added to the interval for each iteration?",
    "created_at": "2020-04-22T23:45:35Z",
    "updated_at": "2020-04-22T23:45:44Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18421#discussion_r413407639",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18421",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/413407639"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18421#discussion_r413407639"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18421"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/413407639/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2382,
    "original_line": 2382,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/414174191",
    "pull_request_review_id": 399529498,
    "id": 414174191,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE3NDE5MQ==",
    "diff_hunk": "@@ -1571,8 +1579,53 @@ void StopMapPort()\n #endif\n \n \n+void CConnman::DNSCachesUpdate() const\n+{\n+    // Only reachable nodes do this, because those are already easy to find.\n+    // Unless the node is explicitly set to be non-reachable (-listen=0),\n+    // the only way to check if it is reachable is to observe inbound connections.\n+    // This check is made every time, because a node may become non-reachable\n+    // due to external factors (e.g. local network settings update).\n+    if (CountInboundConnections() == 0) return;",
    "path": "src/net.cpp",
    "position": 52,
    "original_position": 52,
    "commit_id": "de74888e9db3da3604e06d966d58f78247ca9641",
    "original_commit_id": "de74888e9db3da3604e06d966d58f78247ca9641",
    "user": {
      "login": "naumenkogs",
      "id": 7975071,
      "node_id": "MDQ6VXNlcjc5NzUwNzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/naumenkogs",
      "html_url": "https://github.com/naumenkogs",
      "followers_url": "https://api.github.com/users/naumenkogs/followers",
      "following_url": "https://api.github.com/users/naumenkogs/following{/other_user}",
      "gists_url": "https://api.github.com/users/naumenkogs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
      "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
      "repos_url": "https://api.github.com/users/naumenkogs/repos",
      "events_url": "https://api.github.com/users/naumenkogs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Good idea. Will add this config and add the documentation once we get more concept acks.",
    "created_at": "2020-04-23T22:47:49Z",
    "updated_at": "2020-04-23T22:47:49Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18421#discussion_r414174191",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18421",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/414174191"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18421#discussion_r414174191"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18421"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/414174191/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1589,
    "original_line": 1589,
    "side": "RIGHT",
    "in_reply_to_id": 413405312
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/414175134",
    "pull_request_review_id": 399530448,
    "id": 414175134,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE3NTEzNA==",
    "diff_hunk": "@@ -1571,8 +1579,53 @@ void StopMapPort()\n #endif\n \n \n+void CConnman::DNSCachesUpdate() const\n+{\n+    // Only reachable nodes do this, because those are already easy to find.\n+    // Unless the node is explicitly set to be non-reachable (-listen=0),\n+    // the only way to check if it is reachable is to observe inbound connections.\n+    // This check is made every time, because a node may become non-reachable\n+    // due to external factors (e.g. local network settings update).\n+    if (CountInboundConnections() == 0) return;\n+\n+    // Every time a new widely-requests service bit is deployed, this list should be\n+    // updated to invalide records for that service bit.\n+    std::vector<uint64_t> SERVICE_BITS_COMBINATIONS{\n+        // Legacy nodes\n+        NODE_NETWORK,",
    "path": "src/net.cpp",
    "position": 58,
    "original_position": 58,
    "commit_id": "de74888e9db3da3604e06d966d58f78247ca9641",
    "original_commit_id": "de74888e9db3da3604e06d966d58f78247ca9641",
    "user": {
      "login": "naumenkogs",
      "id": 7975071,
      "node_id": "MDQ6VXNlcjc5NzUwNzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/naumenkogs",
      "html_url": "https://github.com/naumenkogs",
      "followers_url": "https://api.github.com/users/naumenkogs/followers",
      "following_url": "https://api.github.com/users/naumenkogs/following{/other_user}",
      "gists_url": "https://api.github.com/users/naumenkogs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
      "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
      "repos_url": "https://api.github.com/users/naumenkogs/repos",
      "events_url": "https://api.github.com/users/naumenkogs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I think this should be x1.dns.whatever.com?",
    "created_at": "2020-04-23T22:50:05Z",
    "updated_at": "2020-04-23T22:50:05Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18421#discussion_r414175134",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18421",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/414175134"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18421#discussion_r414175134"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18421"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/414175134/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1595,
    "original_line": 1595,
    "side": "RIGHT",
    "in_reply_to_id": 413405590
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/414176230",
    "pull_request_review_id": 399531494,
    "id": 414176230,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDE3NjIzMA==",
    "diff_hunk": "@@ -1571,8 +1579,53 @@ void StopMapPort()\n #endif\n \n \n+void CConnman::DNSCachesUpdate() const\n+{\n+    // Only reachable nodes do this, because those are already easy to find.\n+    // Unless the node is explicitly set to be non-reachable (-listen=0),\n+    // the only way to check if it is reachable is to observe inbound connections.\n+    // This check is made every time, because a node may become non-reachable\n+    // due to external factors (e.g. local network settings update).\n+    if (CountInboundConnections() == 0) return;\n+\n+    // Every time a new widely-requests service bit is deployed, this list should be\n+    // updated to invalide records for that service bit.\n+    std::vector<uint64_t> SERVICE_BITS_COMBINATIONS{\n+        // Legacy nodes\n+        NODE_NETWORK,\n+        NODE_NETWORK_LIMITED,\n+        // Segwit-supporting nodes\n+        NODE_NETWORK | NODE_WITNESS,\n+        NODE_NETWORK_LIMITED | NODE_WITNESS,\n+        // Nodes supporting Bloom Filters per BIP 111\n+        NODE_BLOOM,\n+        NODE_NETWORK | NODE_BLOOM,\n+        NODE_NETWORK_LIMITED | NODE_BLOOM,\n+        NODE_NETWORK | NODE_WITNESS | NODE_BLOOM,\n+        NODE_NETWORK_LIMITED | NODE_WITNESS | NODE_BLOOM};\n+\n+    for (const std::string& seed : Params().DNSSeeds()) {\n+        if (interruptNet) {\n+            return;\n+        }\n \n+        // first query as if client doesn't support service bits first\n+        std::vector<CNetAddr> ips;\n+        LookupHost(seed, ips, 1, true);\n+        // TODO: Here and below, make sure downloaded IPs are not very different\n+        // from what stored locally, to identify AddrMan or DNS poisoning.\n \n+        // query for all widely used combinations of service bits\n+        for (uint64_t service_bits_combination : SERVICE_BITS_COMBINATIONS) {",
    "path": "src/net.cpp",
    "position": 82,
    "original_position": 82,
    "commit_id": "de74888e9db3da3604e06d966d58f78247ca9641",
    "original_commit_id": "de74888e9db3da3604e06d966d58f78247ca9641",
    "user": {
      "login": "naumenkogs",
      "id": 7975071,
      "node_id": "MDQ6VXNlcjc5NzUwNzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/naumenkogs",
      "html_url": "https://github.com/naumenkogs",
      "followers_url": "https://api.github.com/users/naumenkogs/followers",
      "following_url": "https://api.github.com/users/naumenkogs/following{/other_user}",
      "gists_url": "https://api.github.com/users/naumenkogs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
      "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
      "repos_url": "https://api.github.com/users/naumenkogs/repos",
      "events_url": "https://api.github.com/users/naumenkogs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Well, one private node in the subnet will request one combination, another private node will request another one...\r\n\r\nWhy would you want the already public node separate cache updates in time? ",
    "created_at": "2020-04-23T22:52:45Z",
    "updated_at": "2020-04-23T22:52:45Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18421#discussion_r414176230",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18421",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/414176230"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18421#discussion_r414176230"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18421"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/414176230/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1619,
    "original_line": 1619,
    "side": "RIGHT",
    "in_reply_to_id": 413406286
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422389535",
    "pull_request_review_id": 408544763,
    "id": 422389535,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjM4OTUzNQ==",
    "diff_hunk": "@@ -937,6 +940,16 @@ bool CConnman::AttemptToEvictConnection()\n     return false;\n }\n \n+int CConnman::CountInboundConnections() const\n+{\n+    int inbounds = 0;\n+    LOCK(cs_vNodes);\n+    for (const CNode* node : vNodes) {",
    "path": "src/net.cpp",
    "position": 18,
    "original_position": 18,
    "commit_id": "de74888e9db3da3604e06d966d58f78247ca9641",
    "original_commit_id": "de74888e9db3da3604e06d966d58f78247ca9641",
    "user": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Can we count that such connections are from non-local addresses? Should be an extra two LoC",
    "created_at": "2020-05-08T21:42:37Z",
    "updated_at": "2020-05-08T21:42:37Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18421#discussion_r422389535",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18421",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422389535"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18421#discussion_r422389535"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18421"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422389535/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 947,
    "original_line": 947,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/469145808",
    "pull_request_review_id": 465766334,
    "id": 469145808,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTE0NTgwOA==",
    "diff_hunk": "@@ -1571,8 +1579,53 @@ void StopMapPort()\n #endif\n \n \n+void CConnman::DNSCachesUpdate() const\n+{\n+    // Only reachable nodes do this, because those are already easy to find.\n+    // Unless the node is explicitly set to be non-reachable (-listen=0),\n+    // the only way to check if it is reachable is to observe inbound connections.\n+    // This check is made every time, because a node may become non-reachable\n+    // due to external factors (e.g. local network settings update).\n+    if (CountInboundConnections() == 0) return;\n+\n+    // Every time a new widely-requests service bit is deployed, this list should be\n+    // updated to invalide records for that service bit.\n+    std::vector<uint64_t> SERVICE_BITS_COMBINATIONS{\n+        // Legacy nodes\n+        NODE_NETWORK,\n+        NODE_NETWORK_LIMITED,\n+        // Segwit-supporting nodes\n+        NODE_NETWORK | NODE_WITNESS,\n+        NODE_NETWORK_LIMITED | NODE_WITNESS,\n+        // Nodes supporting Bloom Filters per BIP 111\n+        NODE_BLOOM,\n+        NODE_NETWORK | NODE_BLOOM,\n+        NODE_NETWORK_LIMITED | NODE_BLOOM,\n+        NODE_NETWORK | NODE_WITNESS | NODE_BLOOM,\n+        NODE_NETWORK_LIMITED | NODE_WITNESS | NODE_BLOOM};\n+\n+    for (const std::string& seed : Params().DNSSeeds()) {\n+        if (interruptNet) {\n+            return;\n+        }\n \n+        // first query as if client doesn't support service bits first\n+        std::vector<CNetAddr> ips;\n+        LookupHost(seed, ips, 1, true);\n+        // TODO: Here and below, make sure downloaded IPs are not very different\n+        // from what stored locally, to identify AddrMan or DNS poisoning.\n \n+        // query for all widely used combinations of service bits\n+        for (uint64_t service_bits_combination : SERVICE_BITS_COMBINATIONS) {\n+            if (interruptNet) {\n+                return;\n+            }\n+            std::string host = strprintf(\"x%x.%s\", ServiceFlags(service_bits_combination), seed);\n+            LookupHost(host, ips, 1, true);\n+        }\n+    }\n+    LogPrintf(\"DNS requests were made to update caches.\\n\");",
    "path": "src/net.cpp",
    "position": 90,
    "original_position": 90,
    "commit_id": "de74888e9db3da3604e06d966d58f78247ca9641",
    "original_commit_id": "de74888e9db3da3604e06d966d58f78247ca9641",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This could be logged to a debug category to avoid reducing the signal to noise in the default bitcoind output? We already print too much along the lines of \"everything is working as expected\" which makes it easy to miss the more relevant \"oh, something seems broken\" log messages :)",
    "created_at": "2020-08-12T09:57:18Z",
    "updated_at": "2020-08-12T10:00:33Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18421#discussion_r469145808",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18421",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/469145808"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18421#discussion_r469145808"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18421"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/469145808/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1627,
    "original_line": 1627,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/469146189",
    "pull_request_review_id": 465766334,
    "id": 469146189,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTE0NjE4OQ==",
    "diff_hunk": "@@ -2322,8 +2375,13 @@ bool CConnman::Start(CScheduler& scheduler, const Options& connOptions)\n \n     if (!gArgs.GetBoolArg(\"-dnsseed\", true))\n         LogPrintf(\"DNS seeding disabled\\n\");\n-    else\n+    else {\n         threadDNSAddressSeed = std::thread(&TraceThread<std::function<void()> >, \"dnsseed\", std::function<void()>(std::bind(&CConnman::ThreadDNSAddressSeed, this)));\n+        if (fListen && fNameLookup && !HaveNameProxy()) {\n+            LogPrintf(\"Proactive querying DNS servers to update caches is enabled\\n\");",
    "path": "src/net.cpp",
    "position": 103,
    "original_position": 103,
    "commit_id": "de74888e9db3da3604e06d966d58f78247ca9641",
    "original_commit_id": "de74888e9db3da3604e06d966d58f78247ca9641",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This could be logged to a debug category to avoid reducing the signal to noise in the default bitcoind output?",
    "created_at": "2020-08-12T09:58:02Z",
    "updated_at": "2020-08-12T10:00:33Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18421#discussion_r469146189",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18421",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/469146189"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18421#discussion_r469146189"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18421"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/469146189/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2381,
    "original_line": 2381,
    "side": "RIGHT"
  }
]