DrahtBot,2019-05-07 02:18:57,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#14696](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/14696.html) (qa: Add explicit references to related CVE'",https://github.com/bitcoin/bitcoin/pull/15969#issuecomment-489880799,489880799,
JeremyRubin,2019-05-07 04:26:16,If #13062 goes ahead (it's been sitting for a while) it doesn't look to hard to rebase either PR.,https://github.com/bitcoin/bitcoin/pull/15969#issuecomment-489902967,489902967,
jnewbery,2019-05-07 14:36:57,"You say in the opening paragraph that you're not advocating for this PR and haven't verified that it's consensus compatible with the existing code. Can you explain what your motivation is for opening this? What are you expecting from other contributors?\n\nA good general principal is that we shouldn't change consensus code unless there are very obvious benefits, and if we do have to make changes",https://github.com/bitcoin/bitcoin/pull/15969#issuecomment-490107307,490107307,
ryanofsky,2019-05-07 15:22:20,"> Can you explain what your motivation is for opening this? What are you expecting from other contributors?\n\nI think it's explained pretty well, and I don't think anything is being expected of you if you aren't interested in this. People can look at this if they are interested, and if they think they think the new code is an improvement over the old code they can say ""hey this new code is real",https://github.com/bitcoin/bitcoin/pull/15969#issuecomment-490126446,490126446,
JeremyRubin,2019-05-07 18:01:17,"Well, the idea is that I wanted to understand how this part of the code was working and it was needlessly more complicated than it should be.\n\nIn order to understand it better, I refactored it into something simpler. I opened the PR because if anyone in the future has an interest in looking at this logic, perhaps because they are adding a new script flag, I would point them towards perhaps doi",https://github.com/bitcoin/bitcoin/pull/15969#issuecomment-490186161,490186161,
jnewbery,2019-05-08 13:57:56,"> Not every PR has to be merged, and PRs that aren't merged can still be useful for other reasons.\n\nI think that's where we disagree. A pull request is a request for the branch to be pulled into master.\n\nIf this branch is intended as educational or illustrative, then it makes sense to be maintained as a branch in @JeremyRubin's repo, rather than as a PR in the bitcoin repo. Having PRs open",https://github.com/bitcoin/bitcoin/pull/15969#issuecomment-490496385,490496385,
jb55,2019-05-14 07:18:12,"I think this PR would be more interesting if your changes were split into separate commits so they could be reviewed and verified independently. In the current state it's really hard to verify the correctness of each change simulataneously.\n\nI don't think it was a waste of time. I find PRs like these give software verifiers a chance to run state machine tests over changes like these, to sharpe",https://github.com/bitcoin/bitcoin/pull/15969#issuecomment-492109680,492109680,
sipa,2019-05-14 16:05:57,"I suggested a few years ago that we could have two independent script implementations in the codebase (1) a stripped-down version of the current code, only for use in consensus logic, which is rarely touched and (2) a feature-rich one that undergoes refactoring and addition of features as needed for everything else. There would obviously be tests to (aim to) verify correspondence between the two, ",https://github.com/bitcoin/bitcoin/pull/15969#issuecomment-492302832,492302832,
JeremyRubin,2019-05-14 19:07:17,"@jb55 have at it! https://github.com/bitcoin/bitcoin/compare/master...JeremyRubin:explicit-verifyscript-reunsquash?expand=1 This is more or less the same end state (modulo typos/formatting errors) done in very small digestible steps. (I reproduced this from scratch, not a branch that existed prior). Each commit *should* be able to run and pass all tests.\n\n\n@sipa I agree that it would be good",https://github.com/bitcoin/bitcoin/pull/15969#issuecomment-492369063,492369063,
sipa,2019-05-14 19:35:15,By features I mean for example all the logic in CScript to actually construct scripts. Not anything affecting consensus.\n\nAnd I certainly don't think this is the kind of change that's worth making to consensus logic; making code easier to read is far inferior in priority to guaranteeing consistency.,https://github.com/bitcoin/bitcoin/pull/15969#issuecomment-492378938,492378938,
JeremyRubin,2019-05-14 21:54:12,"We don't disagree that the goal is consistency.\n\nMy view is that, as noted above, this version is superior in maintaining consistency with future versions/features added.\n\nI.e., if we add further complexity to this code for handling a new case or flag we will have an increased likelihood of those code paths causing an incompatibility if the flag is added against the old version than agains",https://github.com/bitcoin/bitcoin/pull/15969#issuecomment-492424267,492424267,
JeremyRubin,2019-05-14 22:38:16,"addendum:\n\nI also wanted to point out that an alternative approach to this refactor would be to take the past revisions to this logic and structure it as follows:\n\n```\nif SEGWIT:\n   code from when SegWit activated's script processing\nif P2SH:\n   code from when p2sh activated script processing\nif ORIGINAL:\n   code from original interpreter, no extensions\n```\n\nThis structur",https://github.com/bitcoin/bitcoin/pull/15969#issuecomment-492436703,492436703,
sdaftuar,2019-05-17 01:01:08,"As I've commented elsewhere many times before, I think a PR like this is way too high risk to be worth contemplating actually merging.  But if there are things you've learned from your effort that would be helpful to document for others, then I think opening a PR that just adds better comments to the existing logic and justifies its correctness could be helpful.\n\n",https://github.com/bitcoin/bitcoin/pull/15969#issuecomment-493281282,493281282,
laanwj,2019-06-07 13:21:07,"There seems to be agreement not to make this change (on the verification/consensus side), and I tend to agree it's too risky, so I'm closing this.",https://github.com/bitcoin/bitcoin/pull/15969#issuecomment-499882206,499882206,
