gmaxwell,2017-03-25T05:51:23Z,"utACK.  We need to get in the habit of testing the tests by breaking the code, -- I do this sometimes, but clearly not enough.",https://github.com/bitcoin/bitcoin/pull/10073#issuecomment-289191171,289191171,
MarcoFalke,2017-03-25T14:14:29Z,"Concept ACK. I was wondering if it makes sense to put the rpc tests in a separate folder and then run a check in test_runner, that all files in the folder are mentioned at least once in the test_runner file. ",https://github.com/bitcoin/bitcoin/pull/10073#issuecomment-289214313,289214313,
jnewbery,2017-03-25T16:46:10Z,"@MarcoFalke - I've already got a branch that does almost that (in my version I added an extra list `NON_TESTS` to test_runner and then check that all files in the functional directory appear in one of the test lists or NON_TESTS.\n\nI think your version is tidier. I'm happy to rework my branch or review a PR if you want to implement it. Whichever you prefer.",https://github.com/bitcoin/bitcoin/pull/10073#issuecomment-289223757,289223757,
NicolasDorier,2017-03-26T09:01:11Z,utACK 717ad131f6b665b2e7cf55db689da9616e727d78,https://github.com/bitcoin/bitcoin/pull/10073#issuecomment-289267467,289267467,
laanwj,2017-03-27T07:48:50Z,"> I was wondering if it makes sense to put the rpc tests in a separate folder \n\nNot sure about this. I agree that a way to identify 'orphan' tests would be great, however having scripts in multiple folders is unfortunately kind of annoying with Python and its automatic directory hierarchy for packages. Also it means having to think/search where the test is when manually running it. I think I p",https://github.com/bitcoin/bitcoin/pull/10073#issuecomment-289378723,289378723,
laanwj,2017-03-27T14:15:30Z,"The test is failing intermittently on master, it seems:\n```\n2017-03-27 14:09:57.475000 TestFramework (ERROR): Assertion failed\nTraceback (most recent call last):\n  File ""/home/travis/build/bitcoin/bitcoin/build/bitcoin-x86_64-unknown-linux-gnu/test/functional/test_framework/test_framework.py"", line 150, in main\n    self.run_test()\n  File ""/home/travis/build/bitcoin/bitcoin/build/bitcoi",https://github.com/bitcoin/bitcoin/pull/10073#issuecomment-289466653,289466653,
NicolasDorier,2017-03-28T04:54:49Z,using `assert_blockchain_height` should prevent it to fails intermittently. @jnewbery thoughts ?,https://github.com/bitcoin/bitcoin/pull/10073#discussion_r108334165,108334165,test/functional/assumevalid.py
jnewbery,2017-03-28T20:08:59Z,"@NicolasDorier you may be right. I think that sync_with_ping() _should_ be enough to make sure the node is sync'ed to the tip (p2p messages are processed sequentially and single threaded by bitcoind, so it shouldn't send a pong back until it's worked through all the block messages).\n\nSadly there aren't quite enough logs to see what's going on here. I'm going to leave this as it is for a few mo",https://github.com/bitcoin/bitcoin/pull/10073#discussion_r108524262,108524262,test/functional/assumevalid.py
jnewbery,2017-03-29T16:03:31Z,"sigh. sync_with_ping() doesn't assert that the node has sync'ed. It's up to the caller to assert on the return value. Sadly, none of the test cases that call sync_with_ping() actually assert on the return value. Proposed fix here: https://github.com/bitcoin/bitcoin/pull/10114",https://github.com/bitcoin/bitcoin/pull/10073#discussion_r108717162,108717162,test/functional/assumevalid.py
