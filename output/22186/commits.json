[
  {
    "sha": "d1d1cc983146ece950430da78ebae6f502913a53",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkMWQxY2M5ODMxNDZlY2U5NTA0MzBkYTc4ZWJhZTZmNTAyOTEzYTUz",
    "commit": {
      "author": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2021-06-08T00:51:48Z"
      },
      "committer": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2021-06-08T01:16:36Z"
      },
      "message": "build, qt: Fix compiling qt package in depends with GCC 11",
      "tree": {
        "sha": "7c8433ce9255d3d1ba7cd7b1232d444b9a8ef7d9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7c8433ce9255d3d1ba7cd7b1232d444b9a8ef7d9"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d1d1cc983146ece950430da78ebae6f502913a53",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE0dvyxLlvLev0wWZUQQEIES5+qB8FAmC+xPQACgkQQQEIES5+\nqB/QCQ/9HupcaVlhfAuPk0xvqXtMyUL+aGwrjrwix2v7f8Tq/1nHdhuwdUUR/G2N\nqF/UIrFQGnGdsRP8PGlf8V+Kw9EKkN34tve0+v7rqRU167uqbEkrqAx41KHYI2LT\ncp4GucOy7LH9YbJ+PakPHGKcerCsN87GzQWxz0wMayqJyAbMxjwrLzWBQ+g/1tDW\n/ntsskikwWFk5PWoqbeK+2JoMOi+4midFz0r0Iarn3ynqj9RKWXNSvdBQ43UdGnK\n0tLx98KEEo7ET2Kr8yGnf/CKmO/8SHnhm7WfGzFJ14FIWATlqoUTff0Fwo2DXW77\nXLUG9xe/LIUFZdUCUK3d+a60UMRoza/cxKHc73nXIP6rAdIA6WFwnVAsN8mEJRpD\n3nWSpA9gZLh/oR5pfS02zCNwjZuXyEvMxrspEae6CRBkTPD2uPo8gvoWenifuEhL\njWkyAi5vK2JDgFXHZkwTmRD6u1Ttv8s5fwadjeHarhrL5H/UtzzxmSKDguZRwgd1\nvdp3thtNgiUbvn2DKcxGuFA+CFi1Q1JqCMk9H4IGrBCkeNxU1Q5ZCu4vLpgDjgVZ\n+R7dnGpJlmOgDPeBel26B1H+47P32whU9eSfVUU9a/PhJbg4qFPjBncqQVbyKXEz\nNBPEYSnqeIHJcSHDqNcBv75Lo6a3VHohOfrCw9mwhfhsCtk//P0=\n=p9tG\n-----END PGP SIGNATURE-----",
        "payload": "tree 7c8433ce9255d3d1ba7cd7b1232d444b9a8ef7d9\nparent e638acf6970394f8eb1957366ad2d39512f33b31\nauthor Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1623113508 +0300\ncommitter Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1623114996 +0300\n\nbuild, qt: Fix compiling qt package in depends with GCC 11\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d1d1cc983146ece950430da78ebae6f502913a53",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/d1d1cc983146ece950430da78ebae6f502913a53",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d1d1cc983146ece950430da78ebae6f502913a53/comments",
    "author": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "e638acf6970394f8eb1957366ad2d39512f33b31",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e638acf6970394f8eb1957366ad2d39512f33b31",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/e638acf6970394f8eb1957366ad2d39512f33b31"
      }
    ],
    "stats": {
      "total": 47,
      "additions": 46,
      "deletions": 1
    },
    "files": [
      {
        "sha": "165c27f5e3cc4947dccf03dddf4bb39cb0bc9a4c",
        "filename": "depends/packages/qt.mk",
        "status": "modified",
        "additions": 2,
        "deletions": 1,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d1d1cc983146ece950430da78ebae6f502913a53/depends/packages/qt.mk",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d1d1cc983146ece950430da78ebae6f502913a53/depends/packages/qt.mk",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/packages/qt.mk?ref=d1d1cc983146ece950430da78ebae6f502913a53",
        "patch": "@@ -10,7 +10,7 @@ $(package)_patches=fix_qt_pkgconfig.patch mac-qmake.conf fix_no_printer.patch no\n $(package)_patches+= fix_android_qmake_conf.patch fix_android_jni_static.patch dont_hardcode_pwd.patch\n $(package)_patches+= drop_lrelease_dependency.patch no_sdk_version_check.patch\n $(package)_patches+= fix_lib_paths.patch fix_android_pch.patch\n-$(package)_patches+= qtbase-moc-ignore-gcc-macro.patch\n+$(package)_patches+= qtbase-moc-ignore-gcc-macro.patch fix_limits_header.patch\n \n $(package)_qttranslations_file_name=qttranslations-$($(package)_suffix)\n $(package)_qttranslations_sha256_hash=577b0668a777eb2b451c61e8d026d79285371597ce9df06b6dee6c814164b7c3\n@@ -231,6 +231,7 @@ define $(package)_preprocess_cmds\n   patch -p1 -i $($(package)_patch_dir)/no_sdk_version_check.patch && \\\n   patch -p1 -i $($(package)_patch_dir)/fix_lib_paths.patch && \\\n   patch -p1 -i $($(package)_patch_dir)/qtbase-moc-ignore-gcc-macro.patch && \\\n+  patch -p1 -i $($(package)_patch_dir)/fix_limits_header.patch && \\\n   sed -i.old \"s|updateqm.commands = \\$$$$\\$$$$LRELEASE|updateqm.commands = $($(package)_extract_dir)/qttools/bin/lrelease|\" qttranslations/translations/translations.pro && \\\n   mkdir -p qtbase/mkspecs/macx-clang-linux &&\\\n   cp -f qtbase/mkspecs/macx-clang/qplatformdefs.h qtbase/mkspecs/macx-clang-linux/ &&\\"
      },
      {
        "sha": "e4313770e5a8b9c12bbebbc8bb75b8a7585a1992",
        "filename": "depends/patches/qt/fix_limits_header.patch",
        "status": "added",
        "additions": 44,
        "deletions": 0,
        "changes": 44,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d1d1cc983146ece950430da78ebae6f502913a53/depends/patches/qt/fix_limits_header.patch",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d1d1cc983146ece950430da78ebae6f502913a53/depends/patches/qt/fix_limits_header.patch",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/patches/qt/fix_limits_header.patch?ref=d1d1cc983146ece950430da78ebae6f502913a53",
        "patch": "@@ -0,0 +1,44 @@\n+Fix compiling with GCC 11\n+\n+See: https://bugreports.qt.io/browse/QTBUG-90395.\n+\n+Upstream commits:\n+ - Qt 5.15 -- unavailable as open source\n+ - Qt 6.0: b2af6332ea37e45ab230a7a5d2d278f86d961b83\n+ - Qt 6.1: 9c56d4da2ff631a8c1c30475bd792f6c86bda53c\n+\n+--- old/qtbase/src/corelib/global/qendian.h\n++++ new/qtbase/src/corelib/global/qendian.h\n+@@ -44,6 +44,8 @@\n+ #include <QtCore/qfloat16.h>\n+ #include <QtCore/qglobal.h>\n+ \n++#include <limits>\n++\n+ // include stdlib.h and hope that it defines __GLIBC__ for glibc-based systems\n+ #include <stdlib.h>\n+ #include <string.h>\n+\n+--- old/qtbase/src/corelib/tools/qbytearraymatcher.h\n++++ new/qtbase/src/corelib/tools/qbytearraymatcher.h\n+@@ -42,6 +42,8 @@\n+ \n+ #include <QtCore/qbytearray.h>\n+ \n++#include <limits>\n++\n+ QT_BEGIN_NAMESPACE\n+ \n+ \n+\n+--- old/qtbase/src/tools/moc/generator.cpp\n++++ new/qtbase/src/tools/moc/generator.cpp\n+@@ -40,6 +40,8 @@\n+ #include <QtCore/qplugin.h>\n+ #include <QtCore/qstringview.h>\n+ \n++#include <limits>\n++\n+ #include <math.h>\n+ #include <stdio.h>\n+ "
      }
    ]
  }
]