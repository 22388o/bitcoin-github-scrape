[
  {
    "sha": "58702a5c49015e9a01062ac6e8b0440e7f2348d3",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo1ODcwMmE1YzQ5MDE1ZTlhMDEwNjJhYzZlOGIwNDQwZTdmMjM0OGQz",
    "commit": {
      "author": {
        "name": "Midnight Magic",
        "email": "midnightmagic@users.noreply.github.com",
        "date": "2020-07-02T11:17:36Z"
      },
      "committer": {
        "name": "Midnight Magic",
        "email": "midnightmagic@users.noreply.github.com",
        "date": "2020-07-02T11:17:36Z"
      },
      "message": "These build-netbsd and configure.ac changes are required to get bitcoin\nworking on NetBSD.\n\nAt the moment they are not functional on master as of a few minutes ago,\nfailing with an Abort trap in gmake check, but this can be fixed in another\nPR. These particular changes should be correct and back-portable to\nv0.20.0, and will end up with a working gmake check there.\n\nHopefully these changes will be of some use to the, apparently, other NetBSD\nuser out there who is by now on an outdated version.",
      "tree": {
        "sha": "cc575e5285db2f57dd98fb72d1941a7b5a6ae80c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/cc575e5285db2f57dd98fb72d1941a7b5a6ae80c"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/58702a5c49015e9a01062ac6e8b0440e7f2348d3",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/58702a5c49015e9a01062ac6e8b0440e7f2348d3",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/58702a5c49015e9a01062ac6e8b0440e7f2348d3",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/58702a5c49015e9a01062ac6e8b0440e7f2348d3/comments",
    "author": {
      "login": "midnightmagic",
      "id": 607777,
      "node_id": "MDQ6VXNlcjYwNzc3Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/607777?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/midnightmagic",
      "html_url": "https://github.com/midnightmagic",
      "followers_url": "https://api.github.com/users/midnightmagic/followers",
      "following_url": "https://api.github.com/users/midnightmagic/following{/other_user}",
      "gists_url": "https://api.github.com/users/midnightmagic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/midnightmagic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/midnightmagic/subscriptions",
      "organizations_url": "https://api.github.com/users/midnightmagic/orgs",
      "repos_url": "https://api.github.com/users/midnightmagic/repos",
      "events_url": "https://api.github.com/users/midnightmagic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/midnightmagic/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "midnightmagic",
      "id": 607777,
      "node_id": "MDQ6VXNlcjYwNzc3Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/607777?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/midnightmagic",
      "html_url": "https://github.com/midnightmagic",
      "followers_url": "https://api.github.com/users/midnightmagic/followers",
      "following_url": "https://api.github.com/users/midnightmagic/following{/other_user}",
      "gists_url": "https://api.github.com/users/midnightmagic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/midnightmagic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/midnightmagic/subscriptions",
      "organizations_url": "https://api.github.com/users/midnightmagic/orgs",
      "repos_url": "https://api.github.com/users/midnightmagic/repos",
      "events_url": "https://api.github.com/users/midnightmagic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/midnightmagic/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "a1c0e5fce13911252a135bdce4ffc09c24d23791",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a1c0e5fce13911252a135bdce4ffc09c24d23791",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/a1c0e5fce13911252a135bdce4ffc09c24d23791"
      }
    ],
    "stats": {
      "total": 60,
      "additions": 31,
      "deletions": 29
    },
    "files": [
      {
        "sha": "425cef518cf97bd7477c121ba3e3d9965215da4e",
        "filename": "configure.ac",
        "status": "modified",
        "additions": 7,
        "deletions": 0,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/58702a5c49015e9a01062ac6e8b0440e7f2348d3/configure.ac",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/58702a5c49015e9a01062ac6e8b0440e7f2348d3/configure.ac",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/configure.ac?ref=58702a5c49015e9a01062ac6e8b0440e7f2348d3",
        "patch": "@@ -1015,11 +1015,18 @@ AC_COMPILE_IFELSE([AC_LANG_PROGRAM([[#include <stdint.h>\n \n dnl LevelDB platform checks\n AC_MSG_CHECKING(for fdatasync)\n+case $host in\n+  *netbsd*)\n+AC_MSG_RESULT(no because NetBSD will not fdatasync on directories and this breaks leveldb); HAVE_FDATASYNC=0\n+     ;;\n+  *)\n AC_COMPILE_IFELSE([AC_LANG_PROGRAM([[#include <unistd.h>]],\n  [[ fdatasync(0); ]])],\n  [ AC_MSG_RESULT(yes); HAVE_FDATASYNC=1 ],\n  [ AC_MSG_RESULT(no); HAVE_FDATASYNC=0 ]\n )\n+     ;;\n+esac\n \n AC_MSG_CHECKING(for F_FULLFSYNC)\n AC_COMPILE_IFELSE([AC_LANG_PROGRAM([[#include <fcntl.h>]],"
      },
      {
        "sha": "7a263b5d2c69271265f6da03513cadbb2efc1082",
        "filename": "doc/build-netbsd.md",
        "status": "modified",
        "additions": 24,
        "deletions": 29,
        "changes": 53,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/58702a5c49015e9a01062ac6e8b0440e7f2348d3/doc/build-netbsd.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/58702a5c49015e9a01062ac6e8b0440e7f2348d3/doc/build-netbsd.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/doc/build-netbsd.md?ref=58702a5c49015e9a01062ac6e8b0440e7f2348d3",
        "patch": "@@ -1,6 +1,6 @@\n NetBSD build guide\n ======================\n-(updated for NetBSD 8.0)\n+(updated for NetBSD 9.0)\n \n This guide describes how to build bitcoind and command-line utilities on NetBSD.\n \n@@ -9,18 +9,18 @@ This guide does not contain instructions for building the GUI.\n Preparation\n -------------\n \n-You will need the following modules, which can be installed via pkgsrc or pkgin:\n+You will need the following packages, which can be installed via pkgsrc or pkgin:\n \n ```\n-autoconf\n-automake\n-boost\n-git\n-gmake\n-libevent\n-libtool\n-pkg-config\n-python37\n+devel/autoconf\n+devel/automake\n+devel/boost-libs\n+devel/git\n+devel/gmake\n+devel/libevent\n+devel/libtool\n+devel/pkg-config\n+lang/python37\n \n git clone https://github.com/bitcoin/bitcoin.git\n ```\n@@ -32,10 +32,8 @@ See [dependencies.md](dependencies.md) for a complete overview.\n BerkeleyDB is only necessary for the wallet functionality. To skip this, pass\n `--disable-wallet` to `./configure` and skip to the next section.\n \n-It is recommended to use Berkeley DB 4.8. You cannot use the BerkeleyDB library\n-from ports, for the same reason as boost above (g++/libstd++ incompatibility).\n-If you have to build it yourself, you can use [the installation script included\n-in contrib/](/contrib/install_db4.sh) like so:\n+It is recommended to use Berkeley DB 4.8. For maximum compatibility, use the\n+bundled [installation script included in contrib/](/contrib/install_db4.sh) like so:\n \n ```bash\n ./contrib/install_db4.sh `pwd`\n@@ -54,27 +52,24 @@ export BDB_PREFIX=\"$PWD/db4\"\n With wallet:\n ```bash\n ./autogen.sh\n-./configure --with-gui=no CPPFLAGS=\"-I/usr/pkg/include\" \\\n-    LDFLAGS=\"-L/usr/pkg/lib\" \\\n-    BOOST_CPPFLAGS=\"-I/usr/pkg/include\" \\\n-    BOOST_LDFLAGS=\"-L/usr/pkg/lib\" \\\n-    BDB_LIBS=\"-L${BDB_PREFIX}/lib -ldb_cxx-4.8\" \\\n-    BDB_CFLAGS=\"-I${BDB_PREFIX}/include\" \\\n-    MAKE=gmake\n+\n+MAKE=\"gmake\" \\\n+CPPFLAGS=\"-I/usr/pkg/include\" LDFLAGS=\"-L/usr/pkg/lib -Wl,-R/usr/pkg/lib\" \\\n+BDB_LIBS=\"-L${BDB_PREFIX}/lib -ldb_cxx-4.8\" BDB_CFLAGS=\"-I${BDB_PREFIX}/include\" \\\n+./configure --with-gui=no --with-boost=/usr/pkg\n ```\n \n Without wallet:\n ```bash\n ./autogen.sh\n-./configure --with-gui=no --disable-wallet \\\n-    CPPFLAGS=\"-I/usr/pkg/include\" \\\n-    LDFLAGS=\"-L/usr/pkg/lib\" \\\n-    BOOST_CPPFLAGS=\"-I/usr/pkg/include\" \\\n-    BOOST_LDFLAGS=\"-L/usr/pkg/lib\" \\\n-    MAKE=gmake\n+\n+MAKE=\"gmake\" \\\n+CPPFLAGS=\"-I/usr/pkg/include\" LDFLAGS=\"-L/usr/pkg/lib -Wl,-R/usr/pkg/lib\" \\\n+BDB_LIBS=\"-L${BDB_PREFIX}/lib -ldb_cxx-4.8\" BDB_CFLAGS=\"-I${BDB_PREFIX}/include\" \\\n+./configure --with-gui=no --with-boost=/usr/pkg --disable-wallet\n ```\n \n-Build and run the tests:\n+Build and run the tests (very important!):\n ```bash\n gmake # use -jX here for parallelism\n gmake check"
      }
    ]
  }
]