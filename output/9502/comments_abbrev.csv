paveljanik,2017-01-10T17:37:39Z,"Isn't network toggle button usable in this case? If it is not, let's fix it instead...",https://github.com/bitcoin/bitcoin/pull/9502#issuecomment-271642973,271642973,
jonasschnelli,2017-01-10T18:05:19Z,"I extracted this from my SPV branch. Especially there, it is very useful to pause IBD and continue with SPV during a time where you don't want to use all available resources on verification.\n\nBut also without SPV, I think this can be useful (pause IBD and not loose broadcast capabilities, fetch headers but not the blocks)... ",https://github.com/bitcoin/bitcoin/pull/9502#issuecomment-271650692,271650692,
luke-jr,2017-01-10T18:06:22Z,"IMO it would be too confusing to be worth it without ""SPV"" mode, but probably should go in after the latter is.",https://github.com/bitcoin/bitcoin/pull/9502#issuecomment-271650958,271650958,
MarcoFalke,2017-01-10T18:33:43Z,"> Isn't network toggle button usable in this case? If it is not, let's fix it instead...\n\nImo those are different features, but I agree that the GUI should not\n""diverge"" in regard to presenting features. The toggle network\nfunctionality should be removed from the network icon and a proper\nbutton should be put beside the new ""Pause"" button?\n",https://github.com/bitcoin/bitcoin/pull/9502#issuecomment-271658050,271658050,
luke-jr,2017-01-10T18:44:23Z,"The ""Pause"" button won't be visible in normal cases.",https://github.com/bitcoin/bitcoin/pull/9502#issuecomment-271660816,271660816,
jonasschnelli,2017-01-10T19:16:04Z,">> Isn't network toggle button usable in this case? If it is not, let's fix it instead...\n\n> Imo those are different features, but I agree that the GUI should not\n""diverge"" in regard to presenting features. The toggle network\nfunctionality should be removed from the network icon and a proper\nbutton should be put beside the new ""Pause"" button?\n\nYes. These are internally two completely",https://github.com/bitcoin/bitcoin/pull/9502#issuecomment-271669602,271669602,
laanwj,2017-03-14T08:57:40Z,Added 0.15 milestone,https://github.com/bitcoin/bitcoin/pull/9502#issuecomment-286359511,286359511,
jonasschnelli,2017-03-17T14:22:45Z,Rebased.,https://github.com/bitcoin/bitcoin/pull/9502#issuecomment-287367189,287367189,
laanwj,2017-04-19T10:40:53Z,"When re-enabling AutoRequestBlocks, what 'kicks off' the block requesting process again? Setting the flag will make it request blocks the next time `FindNextBlocksToDownload` is called; is that good enough? I suppose it is, because `SendMessages` is called periodically (every 100 ms?).",https://github.com/bitcoin/bitcoin/pull/9502#issuecomment-295211444,295211444,
jonasschnelli,2017-04-20T08:33:22Z,"Overhauled the PR and addresses @laanwj points.\n\nAlso, I added the info ""Blocks requested from peers"" (blocks in flight). This may be important because pause will not result in disconnecting peers. Already requested blocks will be downloaded (and verified) in the ""pause"" state.\n\nIf blocks are in flight and the pause has been triggered, there is now a special info label `Wait to finish curr",https://github.com/bitcoin/bitcoin/pull/9502#issuecomment-295633700,295633700,
paveljanik,2017-04-20T09:10:24Z,"Well, I have to change my previous opinion. I think this can be useful.\n\nConcept ACK\n\nWill test soon.",https://github.com/bitcoin/bitcoin/pull/9502#issuecomment-295644775,295644775,
paveljanik,2017-04-25T10:17:43Z,"Needs rebase.\n",https://github.com/bitcoin/bitcoin/pull/9502#issuecomment-296986340,296986340,
ryanofsky,2017-05-01T18:35:50Z,"ACK e952b67d294043d9758b37bf2be57a982b41c051\n\nCode looks good. On the UI feature, two minor comments:\n\n- Pausing the download throws off ""Estimated time left till synced."" It would be better pausing didn't affect estimated time.\n- Pause/Resume button really sticks out where it's currently placed. Maybe it would make more sense next to the progress bar or near the hide button.",https://github.com/bitcoin/bitcoin/pull/9502#issuecomment-298397090,298397090,
sipa,2017-05-01T22:54:35Z,Needs rebase.,https://github.com/bitcoin/bitcoin/pull/9502#issuecomment-298454170,298454170,
jonasschnelli,2017-05-11T13:26:34Z,Rebased.,https://github.com/bitcoin/bitcoin/pull/9502#issuecomment-300788536,300788536,
paveljanik,2017-05-15T16:56:55Z,"Testing this again.\n\nACK https://github.com/bitcoin/bitcoin/pull/9502/commits/fc84323d8ee447f1461a10b7f3b29d113f9f4a43\n\nI think this could be even more usable if it can be called once fully in sync with the network. But I can't display the overlay then...\n",https://github.com/bitcoin/bitcoin/pull/9502#issuecomment-301536220,301536220,
laanwj,2017-05-24T06:54:36Z,"> I think this could be even more usable if it can be called once fully in sync with the network. But I can't display the overlay then...\n\nHm I vaguely remember I added that functionality once, you should be able to bring up the overlay by the secret trick of clicking on the sync icon.",https://github.com/bitcoin/bitcoin/pull/9502#issuecomment-303634807,303634807,
paveljanik,2017-05-24T06:57:12Z,"@laanwj But the sync icon (you mean the triangle with an exclamation mark inside?) is not displayed when you are ""in sync"" with the network.",https://github.com/bitcoin/bitcoin/pull/9502#issuecomment-303635273,303635273,
jonasschnelli,2017-05-24T06:57:48Z,"> I think this could be even more usable if it can be called once fully in sync with the network. But I can't display the overlay then...\n\nThere are four ways how the modal-overlay can be opened:\n-> auto-opens when in IBD/sync\n-> Click on the warning icons next to the balance\n-> Click on the progress bar during IBD/sync\n-> Click on the sync icon in the status bar\n\nThough I agree wi",https://github.com/bitcoin/bitcoin/pull/9502#issuecomment-303635391,303635391,
laanwj,2017-05-24T07:03:31Z,"@paveljanik Oh, though it also worked with the checkmark that takes its place.",https://github.com/bitcoin/bitcoin/pull/9502#issuecomment-303636504,303636504,
jonasschnelli,2017-05-24T07:05:24Z,"> @paveljanik Oh, though it also worked with the checkmark that takes its place.\n\nYes. We should probably allow that.",https://github.com/bitcoin/bitcoin/pull/9502#issuecomment-303636874,303636874,
sdaftuar,2017-06-01T18:43:36Z,"Concept ACK. (I haven't reviewed the qt code at all, but I did look over the net_processing changes.)\n\nWhat is the intended behavior if the user turns off block download after being synced or nearly synced?  I believe this PR only disables the parallel fetch logic, and not the direct fetch -- so block download could conceivably be disabled by the user, but blocks could still be requested as th",https://github.com/bitcoin/bitcoin/pull/9502#issuecomment-305583597,305583597,
jonasschnelli,2017-06-29T15:18:14Z,"Rebased and addressed the `CanDirectFetch()` issue @sdaftuar mentioned.\n\nThe current implementation avoids exposing `net_processing.cpp`'s `CanDirectFetch()` for the reasons a) it does always use chainActive (lock) and b) to avoid another core-layer dependency.\n\nI'm not doing to tackle the transaction download in the PR (main scope is disabling block download).",https://github.com/bitcoin/bitcoin/pull/9502#issuecomment-311999415,311999415,
achow101,2017-07-12T21:48:45Z,"ACK\n\nI have tested this on a node that was a few weeks behind and I was able to pause the block download multiple times while it was syncing. I noticed that even when paused, UpdateTip is still happening for hundreds of blocks after what the GUI said still needed to be downloaded. I assume this is because it still processes all of the blocks that have been downloaded and the downloading happen",https://github.com/bitcoin/bitcoin/pull/9502#issuecomment-314907192,314907192,
sipa,2017-07-12T22:37:57Z,"> I assume this is because it still processes all of the blocks that have been downloaded and the downloading happens faster than the processing.\n\nYes, that's expected. We download multiple blocks in parallel, ahead of the next one to connect. I expect that this PR also keeps processing the ones that were in flight at the time blocks downloads are disabled.",https://github.com/bitcoin/bitcoin/pull/9502#issuecomment-314917629,314917629,
laanwj,2017-07-18T15:20:56Z,"This has missed the 0.15 feature freeze, moving to 0.16.",https://github.com/bitcoin/bitcoin/pull/9502#issuecomment-316098775,316098775,
jonasschnelli,2017-09-07T18:02:20Z,Rebased.,https://github.com/bitcoin/bitcoin/pull/9502#issuecomment-327877718,327877718,
jonasschnelli,2017-09-07T19:48:04Z,rebased and slightly overhauled the blocks-in-flight information flow.,https://github.com/bitcoin/bitcoin/pull/9502#issuecomment-327904542,327904542,
jonasschnelli,2017-10-05T04:00:17Z,"Rebased.\n@paveljanik @achow101 @ryanofsky @kallewoof: care to re-ack?",https://github.com/bitcoin/bitcoin/pull/9502#issuecomment-334352462,334352462,
jonasschnelli,2017-11-16T21:43:05Z,Rebased and addressed nits (code style).,https://github.com/bitcoin/bitcoin/pull/9502#issuecomment-345072092,345072092,
jonasschnelli,2018-03-20T11:51:07Z,"@cfields: since this is touching net code, can you do a final review?",https://github.com/bitcoin/bitcoin/pull/9502#issuecomment-374569837,374569837,
fanquake,2018-03-21T15:19:40Z,"Had a quick test of this (b0a9b8d6dae2a9efcdbc3607b235c37e1f7db31d) on top of master (9b8b1079ddab64ac955766536c38d23dc57bc499). macOS 10.13.3 and Qt 5.10.1.\n\nThis is what the overlay model looks like now with this PR (b0a9b8d6dae2a9efcdbc3607b235c37e1f7db31d):\n![147511](https://user-images.githubusercontent.com/863730/37718009-b363ad0e-2d5c-11e8-9ff8-d01169983d10.png)\n\nOne thing I notic",https://github.com/bitcoin/bitcoin/pull/9502#issuecomment-374975805,374975805,
jonasschnelli,2018-04-10T19:11:47Z,"> One thing I noticed is after hitting ""Pause"", it can take a while to stop downloading blocks.\ni.e In the images below, we hit pause with 127 blocks ""requested from peers"" and 145022 total blocks left. However we don't appear to stop downloading blocks until we've reached 144601 total blocks left to download, > 400 blocks later. This could be confusing, and might appear worse on slower connecti",https://github.com/bitcoin/bitcoin/pull/9502#issuecomment-380215044,380215044,
jonasschnelli,2018-04-11T08:00:21Z,"Rebased.\nThanks for re-reviewing.",https://github.com/bitcoin/bitcoin/pull/9502#issuecomment-380363501,380363501,
jonasschnelli,2018-04-22T18:16:42Z,Rebased.,https://github.com/bitcoin/bitcoin/pull/9502#issuecomment-383401268,383401268,
DrahtBot,2018-07-22T12:55:36Z,"<!--5d09a71f8925f3f132321140b44b946d-->The last travis run for this pull request was 95 days ago and is thus outdated. To trigger a fresh travis build, this pull request should be closed and re-opened.",https://github.com/bitcoin/bitcoin/pull/9502#issuecomment-406864609,406864609,
DrahtBot,2018-08-21T10:36:41Z,<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase,https://github.com/bitcoin/bitcoin/pull/9502#issuecomment-414630169,414630169,
jonasschnelli,2018-10-17T19:37:34Z,Rebased.,https://github.com/bitcoin/bitcoin/pull/9502#issuecomment-430760647,430760647,
fanquake,2019-06-17T09:34:20Z,"Discussion has dragged on and died out here. Going to label ""Up for grabs"" and close for now.",https://github.com/bitcoin/bitcoin/pull/9502#issuecomment-502609600,502609600,
kallewoof,2017-02-28T22:10:24Z,Typo: useful~l~ (one L),https://github.com/bitcoin/bitcoin/pull/9502#discussion_r103563790,103563790,src/net_processing.h
kallewoof,2017-02-28T22:11:53Z,"Nit: `isAutorequestingBlocks` (add `ing`). The `setAutorequestBlocks` below is fine as is, though.",https://github.com/bitcoin/bitcoin/pull/9502#discussion_r103564031,103564031,src/qt/clientmodel.h
laanwj,2017-04-19T10:25:54Z,"Instead of exporting this variable (whose definition is an implementation detail) from net_processing.h I'd prefer a setter/getter, e.g. `SetAutoRequestBlocks(bool)` `GetAutoRequestBlocks()`",https://github.com/bitcoin/bitcoin/pull/9502#discussion_r112166816,112166816,src/net_processing.h
jonasschnelli,2017-04-19T10:26:36Z,Agree. Will change...,https://github.com/bitcoin/bitcoin/pull/9502#discussion_r112166977,112166977,src/net_processing.h
laanwj,2017-04-19T10:26:36Z,isAutorequestBlocks is a bit of a strange name; isAutoRequestingBlocks maybe?,https://github.com/bitcoin/bitcoin/pull/9502#discussion_r112166980,112166980,src/qt/clientmodel.cpp
promag,2017-07-17T20:27:01Z,"Nit, rename `toggleDownloadButton`.",https://github.com/bitcoin/bitcoin/pull/9502#discussion_r127815879,127815879,src/qt/forms/modaloverlay.ui
promag,2017-07-17T20:28:44Z,"Nit, can't comment there, but remove `leftMargin` above to be consistent.",https://github.com/bitcoin/bitcoin/pull/9502#discussion_r127816296,127816296,src/qt/forms/modaloverlay.ui
promag,2017-07-17T20:36:23Z,"I don't know if you plan to show other messages for this label, but if not then toggle visibility like above?",https://github.com/bitcoin/bitcoin/pull/9502#discussion_r127818139,127818139,src/qt/modaloverlay.cpp
promag,2017-07-17T20:49:02Z,"Also, when paused, `nBlocksInFlight` doesn't always decrease to zero.",https://github.com/bitcoin/bitcoin/pull/9502#discussion_r127821318,127821318,src/qt/modaloverlay.cpp
promag,2017-07-17T20:52:12Z,"Don't see the need to change label, maybe a generic `Downloading: %d blocks`?",https://github.com/bitcoin/bitcoin/pull/9502#discussion_r127822070,127822070,src/qt/modaloverlay.cpp
jonasschnelli,2017-08-18T10:18:27Z,"I prefer to keep it because it's not pure download, it's the whole verification (and maybe we further extend what it does in the background later).",https://github.com/bitcoin/bitcoin/pull/9502#discussion_r133926224,133926224,src/qt/forms/modaloverlay.ui
jonasschnelli,2017-09-07T17:48:19Z,I think the currents PR label switch makes it more clear what happens in the background (pause syncing will not lead to immediate network download halt). ,https://github.com/bitcoin/bitcoin/pull/9502#discussion_r137609366,137609366,src/qt/modaloverlay.cpp
jonasschnelli,2017-09-07T17:49:39Z,"I think this is fine how it is, as long as `nBlocksInFlight > 0` we need to expect network traffic and therefor should still remind the user with the `""Wait to finish current...""`.",https://github.com/bitcoin/bitcoin/pull/9502#discussion_r137609786,137609786,src/qt/modaloverlay.cpp
kallewoof,2017-10-05T04:05:37Z,I think they should all start with capital or non-capital (`SetAuto` vs `isAuto`/`getAmount`) for consistency.,https://github.com/bitcoin/bitcoin/pull/9502#discussion_r142844064,142844064,src/net_processing.cpp
paveljanik,2017-10-05T07:45:57Z,typo retruns,https://github.com/bitcoin/bitcoin/pull/9502#discussion_r142868568,142868568,src/net_processing.h
paveljanik,2017-10-05T07:47:44Z,we we,https://github.com/bitcoin/bitcoin/pull/9502#discussion_r142869137,142869137,src/qt/modaloverlay.cpp
meshcollider,2017-10-05T09:16:04Z,"Typo in variable name `canFetchDirecly`, should be `Directly`",https://github.com/bitcoin/bitcoin/pull/9502#discussion_r142886842,142886842,src/qt/modaloverlay.cpp
meshcollider,2017-10-05T09:18:55Z,"nit, space missing before `:` (same on next two lines)",https://github.com/bitcoin/bitcoin/pull/9502#discussion_r142887446,142887446,src/qt/modaloverlay.cpp
meshcollider,2017-10-05T09:20:02Z,"nit, space at the end of the first string instead of before `:`",https://github.com/bitcoin/bitcoin/pull/9502#discussion_r142887687,142887687,src/qt/modaloverlay.cpp
meshcollider,2017-10-05T09:28:28Z,"Also nit, the braces should be on new lines",https://github.com/bitcoin/bitcoin/pull/9502#discussion_r142889546,142889546,src/net_processing.cpp
jonasschnelli,2017-11-16T21:33:46Z,Why remove?,https://github.com/bitcoin/bitcoin/pull/9502#discussion_r151543171,151543171,src/qt/forms/modaloverlay.ui
kallewoof,2017-11-17T02:39:15Z,"Brace starts on same line for this function but on different lines for above two functions. I think separate line is the preferred style these days, but I could be wrong?",https://github.com/bitcoin/bitcoin/pull/9502#discussion_r151591332,151591332,src/net_processing.cpp
fanquake,2018-03-21T15:23:03Z,"I'd suggest changing this string to just ""Blocks in download queue"" or similar. Then we don't have to worry about switching strings between paused and downloading.",https://github.com/bitcoin/bitcoin/pull/9502#discussion_r176122730,176122730,src/qt/modaloverlay.cpp
fanquake,2018-03-21T15:25:27Z,"Maybe use ""Downloading blocks remaining in queue.."" or similar here?",https://github.com/bitcoin/bitcoin/pull/9502#discussion_r176123730,176123730,src/qt/modaloverlay.cpp
MarcoFalke,2018-07-22T19:20:03Z,"could use the new connect syntax, so it wouldn't have to be changed again in the future?",https://github.com/bitcoin/bitcoin/pull/9502#discussion_r204251455,204251455,src/qt/bitcoingui.cpp
practicalswift,2018-10-19T06:33:33Z,nit: Redundant parentheses :-),https://github.com/bitcoin/bitcoin/pull/9502#discussion_r226544910,226544910,src/qt/modaloverlay.cpp
