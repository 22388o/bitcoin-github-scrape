[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/708653738",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20147#issuecomment-708653738",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20147",
    "id": 708653738,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwODY1MzczOA==",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?u=3f68150a5f30acd541d1ed279376cd20b78046b1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-14T20:52:53Z",
    "updated_at": "2020-10-14T20:52:53Z",
    "author_association": "MEMBER",
    "body": "Concept ACK.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/708653738/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/708660206",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20147#issuecomment-708660206",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20147",
    "id": 708660206,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwODY2MDIwNg==",
    "user": {
      "login": "benthecarman",
      "id": 15256660,
      "node_id": "MDQ6VXNlcjE1MjU2NjYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/15256660?u=eab48576b7831944b8ce7f04fcdff4154a853d50&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/benthecarman",
      "html_url": "https://github.com/benthecarman",
      "followers_url": "https://api.github.com/users/benthecarman/followers",
      "following_url": "https://api.github.com/users/benthecarman/following{/other_user}",
      "gists_url": "https://api.github.com/users/benthecarman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/benthecarman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/benthecarman/subscriptions",
      "organizations_url": "https://api.github.com/users/benthecarman/orgs",
      "repos_url": "https://api.github.com/users/benthecarman/repos",
      "events_url": "https://api.github.com/users/benthecarman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/benthecarman/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-14T21:06:48Z",
    "updated_at": "2020-10-14T21:06:55Z",
    "author_association": "CONTRIBUTOR",
    "body": "ACK 9e5626d \r\n\r\n```\r\n$  ./test/lint/git-subtree-check.sh src/secp256k1\r\nsrc/secp256k1 in HEAD currently refers to tree c79797189781d6656eba6cb155c249c57b4f5c9a\r\nsrc/secp256k1 in HEAD was last updated in commit 52380bf304b1c02dda23f1e2fad0159e29b2f7a2 (tree c79797189781d6656eba6cb155c249c57b4f5c9a)\r\nsrc/secp256k1 in HEAD was last updated to upstream commit c6b6b8f1bb044d7d1aa065ebb674adde98a36a8e (tree c79797189781d6656eba6cb155c249c57b4f5c9a)\r\nGOOD\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/708660206/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/708869877",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20147#issuecomment-708869877",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20147",
    "id": 708869877,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwODg2OTg3Nw==",
    "user": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?u=a0e0040aacd7d4f0787481e8ac30b494fa429e11&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-15T03:18:26Z",
    "updated_at": "2020-10-15T03:18:26Z",
    "author_association": "MEMBER",
    "body": "@jamesob this would be a good PR for you to throw into bitcoinperf.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/708869877/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/710053770",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20147#issuecomment-710053770",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20147",
    "id": 710053770,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMDA1Mzc3MA==",
    "user": {
      "login": "jamesob",
      "id": 73197,
      "node_id": "MDQ6VXNlcjczMTk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jamesob",
      "html_url": "https://github.com/jamesob",
      "followers_url": "https://api.github.com/users/jamesob/followers",
      "following_url": "https://api.github.com/users/jamesob/following{/other_user}",
      "gists_url": "https://api.github.com/users/jamesob/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
      "organizations_url": "https://api.github.com/users/jamesob/orgs",
      "repos_url": "https://api.github.com/users/jamesob/repos",
      "events_url": "https://api.github.com/users/jamesob/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jamesob/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-16T13:40:13Z",
    "updated_at": "2020-10-16T13:40:13Z",
    "author_association": "MEMBER",
    "body": "Ran a local IBD comparison on this for 8000 blocks (height 500_000 - 508_000) and to my surprise didn't see any performance difference. Compared the HEAD of this PR to the commit in master preceding it (https://github.com/bitcoin/bitcoin/commit/c2c4dbaebd955ad2829364f7fa5b8169ca1ba6b9). Could be that this platform is bottlenecked by IO and not CPU?\r\n\r\n![ibd local range 500000 508000](https://user-images.githubusercontent.com/73197/96265349-52482100-0f93-11eb-9ff8-bb4c921f76cb.png)\r\n\r\n### commands index\r\n|          bench name           |                                                                                                    command                                                                                                     |\r\n|-------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\r\n| ibd.local.range.500000.508000 | `bitcoind -dbcache=300 -debug=coindb -debug=bench -listen=0 -connect=0 -addnode=127.0.0.1:8888 -prune=9999999 -printtoconsole=0 -assumevalid=000000000000000000176c192f42ad13ab159fdb20198b87e7ba3c001e47b876` |\r\n\r\n\r\n### #20147 vs. c2c4dbaebd955ad2829364f7fa5b8169ca1ba6b9 (absolute)\r\n|                 bench name                 |  x  |           #20147           | c2c4dbaebd955ad2829364f7fa5b8169ca1ba6b9 |\r\n|--------------------------------------------|----:|----------------------------|------------------------------------------|\r\n| ibd.local.range.500000.508000.total_secs   |   2 | 737.8656 (\u00b1 3.1841)        | 738.3541 (\u00b1 7.6443)                      |\r\n| ibd.local.range.500000.508000.peak_rss_KiB |   2 | 1746294.0000 (\u00b1 2362.0000) | 1756260.0000 (\u00b1 3168.0000)               |\r\n\r\n\r\n### #20147 vs. c2c4dbaebd955ad2829364f7fa5b8169ca1ba6b9 (relative)\r\n|                 bench name                 |  x  | #20147 | c2c4dbaebd955ad2829364f7fa5b8169ca1ba6b9 |\r\n|--------------------------------------------|----:|-------:|-----------------------------------------:|\r\n| ibd.local.range.500000.508000.total_secs   |   2 |      1 |                                    1.001 |\r\n| ibd.local.range.500000.508000.peak_rss_KiB |   2 |      1 |                                    1.006 |\r\n\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/710053770/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/710149143",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20147#issuecomment-710149143",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20147",
    "id": 710149143,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMDE0OTE0Mw==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-16T16:07:20Z",
    "updated_at": "2020-10-16T16:07:20Z",
    "author_association": "MEMBER",
    "body": "@jamesob That's certainly possible. With such a low dbcache, it's also possible it's just spending a lot of time in in preparing leveldb updates to flush.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/710149143/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/710344157",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20147#issuecomment-710344157",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20147",
    "id": 710344157,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMDM0NDE1Nw==",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-16T18:07:51Z",
    "updated_at": "2020-10-16T18:07:51Z",
    "author_association": "MEMBER",
    "body": "Your `assumevalid` block is at height 522,000 so you're not checking signatures, I think.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/710344157/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/711051877",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20147#issuecomment-711051877",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20147",
    "id": 711051877,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMTA1MTg3Nw==",
    "user": {
      "login": "jamesob",
      "id": 73197,
      "node_id": "MDQ6VXNlcjczMTk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jamesob",
      "html_url": "https://github.com/jamesob",
      "followers_url": "https://api.github.com/users/jamesob/followers",
      "following_url": "https://api.github.com/users/jamesob/following{/other_user}",
      "gists_url": "https://api.github.com/users/jamesob/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
      "organizations_url": "https://api.github.com/users/jamesob/orgs",
      "repos_url": "https://api.github.com/users/jamesob/repos",
      "events_url": "https://api.github.com/users/jamesob/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jamesob/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-17T17:22:36Z",
    "updated_at": "2020-10-17T17:22:36Z",
    "author_association": "MEMBER",
    "body": "Great call @Sjors, that should've occurred to me (d'oh). In any case, here are some much less surprising results showing improvement after disabled assumevalid.\r\n\r\n![ibd local range 500000 508000](https://user-images.githubusercontent.com/73197/96349121-754e0000-107b-11eb-84e0-e1a0351e2165.png)\r\n\r\n### commands index\r\n|          bench name           |                                                                     command                                                                      |\r\n|-------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------|\r\n| ibd.local.range.500000.508000 | `bitcoind -dbcache=300 -debug=coindb -debug=bench -listen=0 -connect=0 -addnode=127.0.0.1:8888 -prune=9999999 -printtoconsole=0 \\-assumevalid=0` |\r\n\r\n\r\n### #20147 vs. c2c4dbae (absolute)\r\n|                 bench name                 |  x  |           #20147            |          c2c4dbae          |\r\n|--------------------------------------------|----:|-----------------------------|----------------------------|\r\n| ibd.local.range.500000.508000.total_secs   |   2 | 1529.8273 (\u00b1 5.1097)        | 1780.5817 (\u00b1 5.7187)       |\r\n| ibd.local.range.500000.508000.peak_rss_KiB |   2 | 1718228.0000 (\u00b1 17852.0000) | 1686864.0000 (\u00b1 6596.0000) |\r\n\r\n\r\n### #20147 vs. c2c4dbae (relative)\r\n|                 bench name                 |  x  | #20147 | c2c4dbae |\r\n|--------------------------------------------|----:|-------:|---------:|\r\n| ibd.local.range.500000.508000.total_secs   |   2 |  1.000 |    1.164 |\r\n| ibd.local.range.500000.508000.peak_rss_KiB |   2 |  1.019 |    1.000 |\r\n\r\n\r\nFor kicks, here's the utxo cache flush history (I need to normalize the times in this graph...).\r\n\r\n![ibd local range 500000 508000-flush-history](https://user-images.githubusercontent.com/73197/96349130-85fe7600-107b-11eb-9824-814a817a841d.png)\r\n\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/711051877/reactions",
      "total_count": 5,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 3,
      "confused": 0,
      "heart": 0,
      "rocket": 2,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/711454462",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20147#issuecomment-711454462",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20147",
    "id": 711454462,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMTQ1NDQ2Mg==",
    "user": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?u=a0e0040aacd7d4f0787481e8ac30b494fa429e11&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-19T01:00:48Z",
    "updated_at": "2020-10-19T01:00:48Z",
    "author_association": "MEMBER",
    "body": "Thanks @jamesob \ud83d\udc4d ",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/711454462/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]