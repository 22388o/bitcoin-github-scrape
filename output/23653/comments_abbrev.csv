sipa,2021-12-02T16:54:55Z,I'm happy to let #23438 (`std::byte` Serialize) go first and rebase this on top.,https://github.com/bitcoin/bitcoin/pull/23653#issuecomment-984812504,984812504,
DrahtBot,2021-12-03T04:01:45Z,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#23438](https://github.com/bitcoin/bitcoin/pull/23438) (refactor: Use spans of std::byte in serialize by MarcoFalke)\n\nI",https://github.com/bitcoin/bitcoin/pull/23653#issuecomment-985196364,985196364,
MarcoFalke,2021-12-03T09:05:48Z,"re-ACK 2c35a93b3cc19dc71d5664f9f61c24a04f419e35 ðŸ–¨\n\n<details><summary>Show signature</summary>\n\nSignature:\n\n```\n-----BEGIN PGP SIGNED MESSAGE-----\nHash: SHA512\n\nre-ACK 2c35a93b3cc19dc71d5664f9f61c24a04f419e35 ðŸ–¨\n-----BEGIN PGP SIGNATURE-----\n\niQGzBAEBCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUgcPgv+KnKiX/J5RN0CHNr/DpP/v+1fhK27eioJvsEcH9DXAdY0Y/mntZ0mMOSZ\",https://github.com/bitcoin/bitcoin/pull/23653#issuecomment-985335801,985335801,
MarcoFalke,2021-12-02T18:36:35Z,"```suggestion\n    SpanReader stream{GCS_SER_TYPE, GCS_SER_VERSION, m_encoded, 0};\n```\n\nnit: Haven't checked if it compiles.",https://github.com/bitcoin/bitcoin/pull/23653#discussion_r761367793,761367793,src/blockfilter.cpp
MarcoFalke,2021-12-02T18:38:30Z,"```suggestion\n    bool empty() const { return m_data.empty; }\n```",https://github.com/bitcoin/bitcoin/pull/23653#discussion_r761369169,761369169,src/streams.h
sipa,2021-12-02T19:47:51Z,Done.,https://github.com/bitcoin/bitcoin/pull/23653#discussion_r761415883,761415883,src/streams.h
sipa,2021-12-02T19:48:03Z,"Done, everywhere.",https://github.com/bitcoin/bitcoin/pull/23653#discussion_r761416018,761416018,src/blockfilter.cpp
achow101,2021-12-06T20:35:58Z,"Shouldn't this be\n\n```suggestion\n       m_data = m_data.subspan(pos);\n```",https://github.com/bitcoin/bitcoin/pull/23653#discussion_r763370432,763370432,src/streams.h
sipa,2021-12-06T20:37:10Z,"Ugh, yes! Will create a PR.",https://github.com/bitcoin/bitcoin/pull/23653#discussion_r763371228,763371228,src/streams.h
sipa,2021-12-06T20:38:15Z,"Actually, it looks like all call sites use `pos=0`, which makes this harmless. With spans, having a separate `pos` is also pointless as it can be easily done by the caller using `subspan`. I'm just going to drop it.",https://github.com/bitcoin/bitcoin/pull/23653#discussion_r763371881,763371881,src/streams.h
achow101,2021-12-06T20:39:02Z,I need it for PSBT things (which is how I found this bug). It would also be nice to have a test for other pos too.,https://github.com/bitcoin/bitcoin/pull/23653#discussion_r763372373,763372373,src/streams.h
sipa,2021-12-06T20:51:50Z,https://github.com/bitcoin/bitcoin/pull/23687,https://github.com/bitcoin/bitcoin/pull/23653#discussion_r763380374,763380374,src/streams.h
