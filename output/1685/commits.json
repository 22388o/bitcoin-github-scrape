[
  {
    "sha": "5fb445b49e80812f004f00d5adf8fdd39bec557f",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo1ZmI0NDViNDllODA4MTJmMDA0ZjAwZDVhZGY4ZmRkMzliZWM1NTdm",
    "commit": {
      "author": {
        "name": "Philip Kaufmann",
        "email": "phil.kaufmann@t-online.de",
        "date": "2012-08-18T13:54:39Z"
      },
      "committer": {
        "name": "Philip Kaufmann",
        "email": "phil.kaufmann@t-online.de",
        "date": "2013-01-05T12:51:36Z"
      },
      "message": "Bitcoin-Qt: add a Reset button to the options dialog\n\n- a click on \"Reset Options\" sets all options to the default values by\n  removing all stored settings (QSettings), loading the defaults and\n  saving them as the new settings\n- before the reset is executed the user is presented a confirmation dialog\n- special casing was needed for StartAtStartup",
      "tree": {
        "sha": "ef1cf6ec492049daccaa4ce7b31d7f429d99317b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ef1cf6ec492049daccaa4ce7b31d7f429d99317b"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5fb445b49e80812f004f00d5adf8fdd39bec557f",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5fb445b49e80812f004f00d5adf8fdd39bec557f",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/5fb445b49e80812f004f00d5adf8fdd39bec557f",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5fb445b49e80812f004f00d5adf8fdd39bec557f/comments",
    "author": null,
    "committer": null,
    "parents": [
      {
        "sha": "ea9788517bfa3e53e192c5af9e64e73625f9db74",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ea9788517bfa3e53e192c5af9e64e73625f9db74",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/ea9788517bfa3e53e192c5af9e64e73625f9db74"
      }
    ],
    "stats": {
      "total": 81,
      "additions": 79,
      "deletions": 2
    },
    "files": [
      {
        "sha": "3771f9de631fa5d6a5b0fcfb238ca2dd68c4c9ee",
        "filename": "src/qt/forms/optionsdialog.ui",
        "status": "modified",
        "additions": 32,
        "deletions": 2,
        "changes": 34,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5fb445b49e80812f004f00d5adf8fdd39bec557f/src/qt/forms/optionsdialog.ui",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5fb445b49e80812f004f00d5adf8fdd39bec557f/src/qt/forms/optionsdialog.ui",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/forms/optionsdialog.ui?ref=5fb445b49e80812f004f00d5adf8fdd39bec557f",
        "patch": "@@ -44,7 +44,7 @@\n         </widget>\n        </item>\n        <item>\n-        <layout class=\"QHBoxLayout\" name=\"horizontalLayout_Main\">\n+        <layout class=\"QHBoxLayout\" name=\"horizontalLayout_1_Main\">\n          <item>\n           <widget class=\"QLabel\" name=\"transactionFeeLabel\">\n            <property name=\"text\">\n@@ -62,7 +62,7 @@\n           <widget class=\"BitcoinAmountField\" name=\"transactionFee\"/>\n          </item>\n          <item>\n-          <spacer name=\"horizontalSpacer_Main\">\n+          <spacer name=\"horizontalSpacer_1_Main\">\n            <property name=\"orientation\">\n             <enum>Qt::Horizontal</enum>\n            </property>\n@@ -99,6 +99,36 @@\n          </property>\n         </spacer>\n        </item>\n+       <item>\n+        <layout class=\"QHBoxLayout\" name=\"horizontalLayout_2_Main\">\n+         <item>\n+          <spacer name=\"horizontalSpacer_2_Main\">\n+           <property name=\"orientation\">\n+            <enum>Qt::Horizontal</enum>\n+           </property>\n+           <property name=\"sizeHint\" stdset=\"0\">\n+            <size>\n+             <width>40</width>\n+             <height>20</height>\n+            </size>\n+           </property>\n+          </spacer>\n+         </item>\n+         <item>\n+          <widget class=\"QPushButton\" name=\"resetButton\">\n+           <property name=\"toolTip\">\n+            <string>Reset all client options to default.</string>\n+           </property>\n+           <property name=\"text\">\n+            <string>&amp;Reset Options</string>\n+           </property>\n+           <property name=\"autoDefault\">\n+            <bool>false</bool>\n+           </property>\n+          </widget>\n+         </item>\n+        </layout>\n+       </item>\n       </layout>\n      </widget>\n      <widget class=\"QWidget\" name=\"tabNetwork\">"
      },
      {
        "sha": "6b98ab19296954fdacc9c46ce4ef1ae53d6364b1",
        "filename": "src/qt/optionsdialog.cpp",
        "status": "modified",
        "additions": 27,
        "deletions": 0,
        "changes": 27,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5fb445b49e80812f004f00d5adf8fdd39bec557f/src/qt/optionsdialog.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5fb445b49e80812f004f00d5adf8fdd39bec557f/src/qt/optionsdialog.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/optionsdialog.cpp?ref=5fb445b49e80812f004f00d5adf8fdd39bec557f",
        "patch": "@@ -177,6 +177,33 @@ void OptionsDialog::setSaveButtonState(bool fState)\n     ui->okButton->setEnabled(fState);\n }\n \n+void OptionsDialog::on_resetButton_clicked()\n+{\n+    if(model)\n+    {\n+        // confirmation dialog\n+        QMessageBox::StandardButton btnRetVal = QMessageBox::question(this, tr(\"Confirm options reset\"),\n+            tr(\"Some settings may require a client restart to take effect.\") + \"<br><br>\" + tr(\"Do you want to proceed?\"),\n+            QMessageBox::Yes | QMessageBox::Cancel, QMessageBox::Cancel);\n+\n+        if(btnRetVal == QMessageBox::Cancel)\n+            return;\n+\n+        disableApplyButton();\n+\n+        /* disable restart warning messages display */\n+        fRestartWarningDisplayed_Lang = fRestartWarningDisplayed_Proxy = true;\n+\n+        /* reset all options and save the default values (QSettings) */\n+        model->Reset();\n+        mapper->toFirst();\n+        mapper->submit();\n+\n+        /* re-enable restart warning messages display */\n+        fRestartWarningDisplayed_Lang = fRestartWarningDisplayed_Proxy = false;\n+    }\n+}\n+\n void OptionsDialog::on_okButton_clicked()\n {\n     mapper->submit();"
      },
      {
        "sha": "d64ed0b57fe1a825b5398d91e976244d5665be86",
        "filename": "src/qt/optionsdialog.h",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5fb445b49e80812f004f00d5adf8fdd39bec557f/src/qt/optionsdialog.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5fb445b49e80812f004f00d5adf8fdd39bec557f/src/qt/optionsdialog.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/optionsdialog.h?ref=5fb445b49e80812f004f00d5adf8fdd39bec557f",
        "patch": "@@ -36,6 +36,7 @@ private slots:\n     void disableSaveButtons();\n     /* set apply button and OK button state (enabled / disabled) */\n     void setSaveButtonState(bool fState);\n+    void on_resetButton_clicked();\n     void on_okButton_clicked();\n     void on_cancelButton_clicked();\n     void on_applyButton_clicked();"
      },
      {
        "sha": "2457e38742102593a283271899b7addb8113a38c",
        "filename": "src/qt/optionsmodel.cpp",
        "status": "modified",
        "additions": 18,
        "deletions": 0,
        "changes": 18,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5fb445b49e80812f004f00d5adf8fdd39bec557f/src/qt/optionsmodel.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5fb445b49e80812f004f00d5adf8fdd39bec557f/src/qt/optionsmodel.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/optionsmodel.cpp?ref=5fb445b49e80812f004f00d5adf8fdd39bec557f",
        "patch": "@@ -60,6 +60,24 @@ void OptionsModel::Init()\n         SoftSetArg(\"-lang\", language.toStdString());\n }\n \n+void OptionsModel::Reset()\n+{\n+    QSettings settings;\n+\n+    // Remove all entries in this QSettings object\n+    settings.clear();\n+\n+    // default setting for OptionsModel::StartAtStartup - disabled\n+    if (GUIUtil::GetStartOnSystemStartup())\n+        GUIUtil::SetStartOnSystemStartup(false);\n+\n+    // Re-Init to get default values\n+    Init();\n+\n+    // Ensure Upgrade() is not running again by setting the bImportFinished flag\n+    settings.setValue(\"bImportFinished\", true);\n+}\n+\n bool OptionsModel::Upgrade()\n {\n     QSettings settings;"
      },
      {
        "sha": "d25d898d9c81d905eede0d405df3616a7c539da3",
        "filename": "src/qt/optionsmodel.h",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5fb445b49e80812f004f00d5adf8fdd39bec557f/src/qt/optionsmodel.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5fb445b49e80812f004f00d5adf8fdd39bec557f/src/qt/optionsmodel.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/optionsmodel.h?ref=5fb445b49e80812f004f00d5adf8fdd39bec557f",
        "patch": "@@ -33,6 +33,7 @@ class OptionsModel : public QAbstractListModel\n     };\n \n     void Init();\n+    void Reset();\n \n     /* Migrate settings from wallet.dat after app initialization */\n     bool Upgrade(); /* returns true if settings upgraded */"
      }
    ]
  }
]