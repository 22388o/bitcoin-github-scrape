[
  {
    "sha": "bd0aa105198d3cc12751dc4645877af70cac6258",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiZDBhYTEwNTE5OGQzY2MxMjc1MWRjNDY0NTg3N2FmNzBjYWM2MjU4",
    "commit": {
      "author": {
        "name": "Doug",
        "email": "doug@bitcoinarmory.com",
        "date": "2014-07-30T20:04:40Z"
      },
      "committer": {
        "name": "Doug",
        "email": "doug@bitcoinarmory.com",
        "date": "2014-07-30T20:04:40Z"
      },
      "message": "Replace the temporary file hack currently used to change Bitcoin-Qt's dock icon (OS X) with a buffer-based solution.",
      "tree": {
        "sha": "6f311a24424b87de92ade3231d514bfb037a5ef6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6f311a24424b87de92ade3231d514bfb037a5ef6"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/bd0aa105198d3cc12751dc4645877af70cac6258",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/bd0aa105198d3cc12751dc4645877af70cac6258",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/bd0aa105198d3cc12751dc4645877af70cac6258",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/bd0aa105198d3cc12751dc4645877af70cac6258/comments",
    "author": null,
    "committer": null,
    "parents": [
      {
        "sha": "1de2992e0786f4de0f0cae10eb27a3b69ec6e3de",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1de2992e0786f4de0f0cae10eb27a3b69ec6e3de",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/1de2992e0786f4de0f0cae10eb27a3b69ec6e3de"
      }
    ],
    "stats": {
      "total": 16,
      "additions": 8,
      "deletions": 8
    },
    "files": [
      {
        "sha": "a2ff148d9dad159f34c430fd3538593b98de02c9",
        "filename": "src/qt/macdockiconhandler.mm",
        "status": "modified",
        "additions": 8,
        "deletions": 8,
        "changes": 16,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/bd0aa105198d3cc12751dc4645877af70cac6258/src/qt/macdockiconhandler.mm",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/bd0aa105198d3cc12751dc4645877af70cac6258/src/qt/macdockiconhandler.mm",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/macdockiconhandler.mm?ref=bd0aa105198d3cc12751dc4645877af70cac6258",
        "patch": "@@ -6,7 +6,7 @@\n \n #include <QImageWriter>\n #include <QMenu>\n-#include <QTemporaryFile>\n+#include <QBuffer>\n #include <QWidget>\n \n #undef slots\n@@ -95,14 +95,14 @@ - (void)handleDockClickEvent:(NSAppleEventDescriptor*)event withReplyEvent:(NSAp\n         QSize size = icon.actualSize(QSize(128, 128));\n         QPixmap pixmap = icon.pixmap(size);\n \n-        // write temp file hack (could also be done through QIODevice [memory])\n-        QTemporaryFile notificationIconFile;\n-        if (!pixmap.isNull() && notificationIconFile.open()) {\n-            QImageWriter writer(&notificationIconFile, \"PNG\");\n+        // Write image into a R/W buffer from raw pixmap, then save the image.\n+        QBuffer notificationBuffer;\n+        if (!pixmap.isNull() && notificationBuffer.open(QIODevice::ReadWrite)) {\n+            QImageWriter writer(&notificationBuffer, \"PNG\");\n             if (writer.write(pixmap.toImage())) {\n-                const char *cString = notificationIconFile.fileName().toUtf8().data();\n-                NSString *macString = [NSString stringWithCString:cString encoding:NSUTF8StringEncoding];\n-                image =  [[NSImage alloc] initWithContentsOfFile:macString];\n+                NSData* macImgData = [NSData dataWithBytes:notificationBuffer.buffer().data()\n+                                             length:notificationBuffer.buffer().size()];\n+                image =  [[NSImage alloc] initWithData:macImgData];\n             }\n         }\n "
      }
    ]
  }
]