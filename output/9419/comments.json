[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/269362967",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9419#issuecomment-269362967",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9419",
    "id": 269362967,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2OTM2Mjk2Nw==",
    "user": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-27T18:21:34Z",
    "updated_at": "2016-12-27T18:21:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "Rebased after #9243 merge.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/269362967/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/269366047",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9419#issuecomment-269366047",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9419",
    "id": 269366047,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2OTM2NjA0Nw==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-27T18:46:48Z",
    "updated_at": "2016-12-27T18:46:48Z",
    "author_association": "MEMBER",
    "body": "Wouldn't it be easier to use a shared_ptr wrapping for cleanup-after-last-use, instead of implementing refcounting yourself? You can still use a manual wrapper to lock/unlock.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/269366047/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/269371479",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9419#issuecomment-269371479",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9419",
    "id": 269371479,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2OTM3MTQ3OQ==",
    "user": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-27T19:28:50Z",
    "updated_at": "2016-12-27T19:28:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "Hmm, I kinda prefer to not introduce shared_ptr abstractions unless they're optimizing a copy that we don't want to do. I don't think the manual refcounting is that bad.\n\nOn December 27, 2016 7:46:52 PM GMT+01:00, Pieter Wuille <notifications@github.com> wrote:\n>Wouldn't it be easier to use a shared_ptr wrapping for\n>cleanup-after-last-use, instead of implementing refcounting yourself?\n>You can still use a manual wrapper to lock/unlock.\n>\n>-- \n>You are receiving this because you authored the thread.\n>Reply to this email directly or view it on GitHub:\n>https://github.com/bitcoin/bitcoin/pull/9419#issuecomment-269366047\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/269371479/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/269478578",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9419#issuecomment-269478578",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9419",
    "id": 269478578,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2OTQ3ODU3OA==",
    "user": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-28T13:42:12Z",
    "updated_at": "2016-12-28T13:42:12Z",
    "author_association": "CONTRIBUTOR",
    "body": "OK, @sipa found a better way to use shared_ptrs here so I went ahead and did that. It means removing some asserts, but I think its worth it.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/269478578/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/269683085",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9419#issuecomment-269683085",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9419",
    "id": 269683085,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2OTY4MzA4NQ==",
    "user": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-29T19:46:36Z",
    "updated_at": "2016-12-29T19:46:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "Went down the rabbit hole here trying to track down a deadlock and then realized that it was already prevented. Note that (very much on purpose) cs_main is still used prior to all CNodeStateAccessors except for a few where we only call Misbehaving() or otherwise sure we are only locking one CNodeState at a time (to avoid deadlocks where we lock them in different orders).",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/269683085/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/269686838",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9419#issuecomment-269686838",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9419",
    "id": 269686838,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2OTY4NjgzOA==",
    "user": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-29T20:14:31Z",
    "updated_at": "2016-12-29T20:14:31Z",
    "author_association": "CONTRIBUTOR",
    "body": "Addressed @sipa's comments.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/269686838/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/269702525",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9419#issuecomment-269702525",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9419",
    "id": 269702525,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2OTcwMjUyNQ==",
    "user": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-29T22:20:13Z",
    "updated_at": "2016-12-29T22:20:13Z",
    "author_association": "MEMBER",
    "body": "Wanted to make sure my nits so far were reasonable, so I went ahead and patched 'em in. Feel free to take from https://github.com/theuni/bitcoin/commit/058193e4d51bdd0cb8e7c225130414b817207ac2",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/269702525/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/269891735",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9419#issuecomment-269891735",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9419",
    "id": 269891735,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2OTg5MTczNQ==",
    "user": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-01T04:16:13Z",
    "updated_at": "2017-01-01T04:16:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "Fixed a few of @theuni's comments, rebased diff-tree is at https://0bin.net/paste/nkpqzdxyoAXkoX7B#STuXxIS32GXf3gMP1JbiIPrufL9gq1hcSH+g6yXSKdq",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/269891735/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/270024543",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9419#issuecomment-270024543",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9419",
    "id": 270024543,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3MDAyNDU0Mw==",
    "user": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-02T21:57:56Z",
    "updated_at": "2017-01-02T21:57:56Z",
    "author_association": "MEMBER",
    "body": "@TheBlueMatt Maybe I'm missing something big-picture here, but would it not be possible to hold a new global mutex rather than cs_main to serialize CNodeStateAccessor access? Or is there a reason that they must share the same lock?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/270024543/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/270025539",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9419#issuecomment-270025539",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9419",
    "id": 270025539,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3MDAyNTUzOQ==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-02T22:10:03Z",
    "updated_at": "2017-01-02T22:10:03Z",
    "author_association": "MEMBER",
    "body": "@theuni I think that's the plan longer term.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/270025539/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/270028269",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9419#issuecomment-270028269",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9419",
    "id": 270028269,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3MDAyODI2OQ==",
    "user": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-02T22:46:20Z",
    "updated_at": "2017-01-02T22:46:20Z",
    "author_association": "MEMBER",
    "body": "I suppose I'm trying to figure out, for the sake of reviewing this PR, what remains to be done before that can happen. I'm certainly not insinuating that we should hold this up until that point, I'd just like to get an idea of what other issues still need to be solved.\r\n\r\nSo if, for ex, we naively made CNodeState::cs static and dropped the cs_main guards, what kind of carnage would be expected?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/270028269/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/270028672",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9419#issuecomment-270028672",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9419",
    "id": 270028672,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3MDAyODY3Mg==",
    "user": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-02T22:51:34Z",
    "updated_at": "2017-01-02T22:51:34Z",
    "author_association": "CONTRIBUTOR",
    "body": "Aside from the places that do, actually, require cs_main, a global order between various CNodeState::cs locks needs to be defined (or, equivalently, we could say that you may not hold multiple CNodeState::cs locks at once).",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/270028672/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/272249955",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9419#issuecomment-272249955",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9419",
    "id": 272249955,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3MjI0OTk1NQ==",
    "user": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-12T18:58:23Z",
    "updated_at": "2017-01-12T18:58:23Z",
    "author_association": "CONTRIBUTOR",
    "body": "Without #9488 (which I do not think should make 0.14 at this juncture), this should not go in for 0.14.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/272249955/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/273205175",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9419#issuecomment-273205175",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9419",
    "id": 273205175,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3MzIwNTE3NQ==",
    "user": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-17T15:41:50Z",
    "updated_at": "2017-01-17T15:41:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "Closing for now. Will make access exclusive and work towards a more whole solution for 0.15.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/273205175/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/93908872",
    "pull_request_review_id": 14440440,
    "id": 93908872,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDkzOTA4ODcy",
    "diff_hunk": "@@ -238,9 +240,12 @@ bool LogAcceptCategory(const char* category)\n         static boost::thread_specific_ptr<set<string> > ptrCategory;\n         if (ptrCategory.get() == NULL)\n         {\n-            const vector<string>& categories = mapMultiArgs[\"-debug\"];\n-            ptrCategory.reset(new set<string>(categories.begin(), categories.end()));\n-            // thread_specific_ptr automatically deletes the set when the thread ends.\n+            if (mapMultiArgs.count(\"-debug\")) {",
    "path": "src/util.cpp",
    "position": null,
    "original_position": 19,
    "commit_id": "e195459b2ca5c52d2c4dda5ace28b4b6ee082a79",
    "original_commit_id": "67bc69b159dd90105d4cf1e1bf70faf1d81366cd",
    "user": {
      "login": "dcousens",
      "id": 413395,
      "node_id": "MDQ6VXNlcjQxMzM5NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/413395?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dcousens",
      "html_url": "https://github.com/dcousens",
      "followers_url": "https://api.github.com/users/dcousens/followers",
      "following_url": "https://api.github.com/users/dcousens/following{/other_user}",
      "gists_url": "https://api.github.com/users/dcousens/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dcousens/subscriptions",
      "organizations_url": "https://api.github.com/users/dcousens/orgs",
      "repos_url": "https://api.github.com/users/dcousens/repos",
      "events_url": "https://api.github.com/users/dcousens/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dcousens/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Why not `IsMultiArgSet`?",
    "created_at": "2016-12-27T08:50:04Z",
    "updated_at": "2017-01-01T04:15:58Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9419#discussion_r93908872",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9419",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/93908872"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9419#discussion_r93908872"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9419"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/93908872/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 243,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/93908981",
    "pull_request_review_id": 14440537,
    "id": 93908981,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDkzOTA4OTgx",
    "diff_hunk": "@@ -412,6 +428,13 @@ bool SoftSetBoolArg(const std::string& strArg, bool fValue)\n         return SoftSetArg(strArg, std::string(\"0\"));\n }\n \n+void ForceSetArg(const std::string& strArg, const std::string& strValue)\n+{\n+    mapArgs[strArg] = strValue;",
    "path": "src/util.cpp",
    "position": null,
    "original_position": 90,
    "commit_id": "e195459b2ca5c52d2c4dda5ace28b4b6ee082a79",
    "original_commit_id": "67bc69b159dd90105d4cf1e1bf70faf1d81366cd",
    "user": {
      "login": "dcousens",
      "id": 413395,
      "node_id": "MDQ6VXNlcjQxMzM5NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/413395?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dcousens",
      "html_url": "https://github.com/dcousens",
      "followers_url": "https://api.github.com/users/dcousens/followers",
      "following_url": "https://api.github.com/users/dcousens/following{/other_user}",
      "gists_url": "https://api.github.com/users/dcousens/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dcousens/subscriptions",
      "organizations_url": "https://api.github.com/users/dcousens/orgs",
      "repos_url": "https://api.github.com/users/dcousens/repos",
      "events_url": "https://api.github.com/users/dcousens/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dcousens/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Why is this not `LOCK(cs_args)`?\r\n(maybe I misinterpreted the meaning of `force`)",
    "created_at": "2016-12-27T08:51:06Z",
    "updated_at": "2017-01-01T04:15:58Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9419#discussion_r93908981",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9419",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/93908981"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9419#discussion_r93908981"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9419"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/93908981/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 433,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/93928135",
    "pull_request_review_id": 14459487,
    "id": 93928135,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDkzOTI4MTM1",
    "diff_hunk": "@@ -238,9 +240,12 @@ bool LogAcceptCategory(const char* category)\n         static boost::thread_specific_ptr<set<string> > ptrCategory;\n         if (ptrCategory.get() == NULL)\n         {\n-            const vector<string>& categories = mapMultiArgs[\"-debug\"];\n-            ptrCategory.reset(new set<string>(categories.begin(), categories.end()));\n-            // thread_specific_ptr automatically deletes the set when the thread ends.\n+            if (mapMultiArgs.count(\"-debug\")) {",
    "path": "src/util.cpp",
    "position": null,
    "original_position": 19,
    "commit_id": "e195459b2ca5c52d2c4dda5ace28b4b6ee082a79",
    "original_commit_id": "67bc69b159dd90105d4cf1e1bf70faf1d81366cd",
    "user": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Prefer less diff? (note this is really from #9243, not strictly this PR).",
    "created_at": "2016-12-27T12:51:20Z",
    "updated_at": "2017-01-01T04:15:58Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9419#discussion_r93928135",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9419",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/93928135"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9419#discussion_r93928135"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9419"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/93928135/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 243,
    "side": "RIGHT",
    "in_reply_to_id": 93908872
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/93928237",
    "pull_request_review_id": 14459587,
    "id": 93928237,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDkzOTI4MjM3",
    "diff_hunk": "@@ -412,6 +428,13 @@ bool SoftSetBoolArg(const std::string& strArg, bool fValue)\n         return SoftSetArg(strArg, std::string(\"0\"));\n }\n \n+void ForceSetArg(const std::string& strArg, const std::string& strValue)\n+{\n+    mapArgs[strArg] = strValue;",
    "path": "src/util.cpp",
    "position": null,
    "original_position": 90,
    "commit_id": "e195459b2ca5c52d2c4dda5ace28b4b6ee082a79",
    "original_commit_id": "67bc69b159dd90105d4cf1e1bf70faf1d81366cd",
    "user": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Fixed in #9243",
    "created_at": "2016-12-27T12:52:49Z",
    "updated_at": "2017-01-01T04:15:58Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9419#discussion_r93928237",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9419",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/93928237"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9419#discussion_r93928237"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9419"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/93928237/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 433,
    "side": "RIGHT",
    "in_reply_to_id": 93908981
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/94071374",
    "pull_request_review_id": 14602012,
    "id": 94071374,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDk0MDcxMzc0",
    "diff_hunk": "@@ -220,15 +220,41 @@ struct CNodeState {\n     }\n };\n \n-/** Map maintaining per-node state. Requires cs_main. */\n-map<NodeId, CNodeState> mapNodeState;\n+class NodeStateStorage {\n+    /** Map maintaining per-node state. Requires cs_main. */\n+    map<NodeId, CNodeState> mapNodeState;\n+\n+public:\n+    CNodeState *GetNodeState(NodeId nodeid) {\n+        AssertLockHeld(cs_main);\n+        map<NodeId, CNodeState>::iterator it = mapNodeState.find(nodeid);\n+        if (it == mapNodeState.end())\n+            return NULL;\n+        return &it->second;\n+    }\n+\n+    void AddStateForNode(NodeId nodeid, const CAddress& addr, const std::string& addrName) {\n+        LOCK(cs_main);\n+        mapNodeState.emplace_hint(mapNodeState.end(), std::piecewise_construct, std::forward_as_tuple(nodeid), std::forward_as_tuple(addr, std::move(addrName)));",
    "path": "src/net_processing.cpp",
    "position": null,
    "original_position": 21,
    "commit_id": "e195459b2ca5c52d2c4dda5ace28b4b6ee082a79",
    "original_commit_id": "1ee9f54ff16dc21bd7d4170451ec604cb9edce7e",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "The `std::move(addrMany)` here won't do what you want, as `addrName` is a const reference. You can't destroy `addrName` anyway, so just remove the `std::move`.",
    "created_at": "2016-12-28T19:57:19Z",
    "updated_at": "2017-01-01T04:15:58Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9419#discussion_r94071374",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9419",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/94071374"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9419#discussion_r94071374"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9419"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/94071374/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 238,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/94073460",
    "pull_request_review_id": 14602012,
    "id": 94073460,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDk0MDczNDYw",
    "diff_hunk": "@@ -220,28 +223,65 @@ struct CNodeState {\n     }\n };\n \n+/** Provides locked access to a CNodeState */\n+class CNodeStateAccessor {\n+private:\n+    std::shared_ptr<CNodeState> pstate;\n+\n+    CNodeStateAccessor() : pstate() { }\n+    CNodeStateAccessor(std::shared_ptr<CNodeState> pstateIn) : pstate(pstateIn) { ENTER_CRITICAL_SECTION(pstate->cs); }\n+    friend class NodeStateStorage;\n+\n+public:\n+    ~CNodeStateAccessor() { if (pstate) LEAVE_CRITICAL_SECTION(pstate->cs); }\n+\n+    CNodeStateAccessor(const CNodeStateAccessor&) =delete;\n+    CNodeStateAccessor& operator= (const CNodeStateAccessor&) =delete;\n+\n+    CNodeStateAccessor(CNodeStateAccessor&& o) { pstate = o.pstate; o.pstate = NULL; }\n+\n+    bool operator()() const { return (bool)pstate; }\n+\n+    CNodeState* operator->() { return &(*pstate); }\n+    const CNodeState* operator->() const { return &(*pstate); }\n+};\n+\n class NodeStateStorage {\n     /** Map maintaining per-node state. Requires cs_main. */\n-    map<NodeId, CNodeState> mapNodeState;\n+    map<NodeId, std::shared_ptr<CNodeState> > mapNodeState;\n+    CCriticalSection cs_mapNodeState;\n \n public:\n-    CNodeState *GetNodeState(NodeId nodeid) {\n-        AssertLockHeld(cs_main);\n-        map<NodeId, CNodeState>::iterator it = mapNodeState.find(nodeid);\n-        if (it == mapNodeState.end())\n-            return NULL;\n-        return &it->second;\n+    CNodeStateAccessor GetNodeState(NodeId nodeid) {\n+        AssertLockHeld(cs_main); // TODO: Remove State reliance on cs_main\n+\n+        std::shared_ptr<CNodeState> pstate;\n+        {\n+            LOCK(cs_mapNodeState);\n+            auto it = mapNodeState.find(nodeid);\n+            if (it == mapNodeState.end())\n+                return CNodeStateAccessor();\n+            pstate = it->second;\n+        }\n+        return CNodeStateAccessor(pstate);",
    "path": "src/net_processing.cpp",
    "position": null,
    "original_position": 61,
    "commit_id": "e195459b2ca5c52d2c4dda5ace28b4b6ee082a79",
    "original_commit_id": "85aec47cf959060bac7666b398c7653fb0e61733",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "You should add an `std::move` here if you want to avoid a copy.",
    "created_at": "2016-12-28T20:19:38Z",
    "updated_at": "2017-01-01T04:15:58Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9419#discussion_r94073460",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9419",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/94073460"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9419#discussion_r94073460"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9419"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/94073460/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 266,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/94073568",
    "pull_request_review_id": 14602012,
    "id": 94073568,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDk0MDczNTY4",
    "diff_hunk": "@@ -220,28 +223,65 @@ struct CNodeState {\n     }\n };\n \n+/** Provides locked access to a CNodeState */\n+class CNodeStateAccessor {\n+private:\n+    std::shared_ptr<CNodeState> pstate;\n+\n+    CNodeStateAccessor() : pstate() { }\n+    CNodeStateAccessor(std::shared_ptr<CNodeState> pstateIn) : pstate(pstateIn) { ENTER_CRITICAL_SECTION(pstate->cs); }",
    "path": "src/net_processing.cpp",
    "position": null,
    "original_position": 20,
    "commit_id": "e195459b2ca5c52d2c4dda5ace28b4b6ee082a79",
    "original_commit_id": "85aec47cf959060bac7666b398c7653fb0e61733",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Add a `std::move` around `pstateIn` to avoid a copy.",
    "created_at": "2016-12-28T20:21:00Z",
    "updated_at": "2017-01-01T04:15:58Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9419#discussion_r94073568",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9419",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/94073568"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9419#discussion_r94073568"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9419"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/94073568/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 232,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/94182656",
    "pull_request_review_id": 14713717,
    "id": 94182656,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDk0MTgyNjU2",
    "diff_hunk": "@@ -220,18 +223,68 @@ struct CNodeState {\n     }\n };\n \n-/** Map maintaining per-node state. Requires cs_main. */\n-map<NodeId, CNodeState> mapNodeState;\n+/** Provides locked access to a CNodeState */\n+class CNodeStateAccessor {\n+private:\n+    std::shared_ptr<CNodeState> pstate;\n \n-// Requires cs_main.\n-CNodeState *State(NodeId pnode) {\n-    map<NodeId, CNodeState>::iterator it = mapNodeState.find(pnode);\n-    if (it == mapNodeState.end())\n-        return NULL;\n-    return &it->second;\n+    CNodeStateAccessor() : pstate() { }\n+    CNodeStateAccessor(std::shared_ptr<CNodeState>&& pstateIn) : pstate(std::move(pstateIn)) { ENTER_CRITICAL_SECTION(pstate->cs); }\n+    friend class NodeStateStorage;\n+\n+public:\n+    ~CNodeStateAccessor() { if (pstate) LEAVE_CRITICAL_SECTION(pstate->cs); }\n+\n+    CNodeStateAccessor(const CNodeStateAccessor&) =delete;\n+    CNodeStateAccessor& operator= (const CNodeStateAccessor&) =delete;\n+\n+    CNodeStateAccessor(CNodeStateAccessor&& o) { pstate = o.pstate; o.pstate = NULL; }\n+\n+    bool operator()() const { return (bool)pstate; }",
    "path": "src/net_processing.cpp",
    "position": null,
    "original_position": 65,
    "commit_id": "e195459b2ca5c52d2c4dda5ace28b4b6ee082a79",
    "original_commit_id": "79c5a2124cc583de179267ffd8899631ff29f486",
    "user": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "explicit operator bool instead? Using the call operator for this seems strange.",
    "created_at": "2016-12-29T21:38:11Z",
    "updated_at": "2017-01-01T04:15:58Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9419#discussion_r94182656",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9419",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/94182656"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9419#discussion_r94182656"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9419"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/94182656/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 243,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/94182818",
    "pull_request_review_id": 14713870,
    "id": 94182818,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDk0MTgyODE4",
    "diff_hunk": "@@ -220,28 +223,65 @@ struct CNodeState {\n     }\n };\n \n+/** Provides locked access to a CNodeState */\n+class CNodeStateAccessor {\n+private:\n+    std::shared_ptr<CNodeState> pstate;\n+\n+    CNodeStateAccessor() : pstate() { }\n+    CNodeStateAccessor(std::shared_ptr<CNodeState>&& pstateIn) : pstate(std::move(pstateIn)) { ENTER_CRITICAL_SECTION(pstate->cs); }\n+    friend class NodeStateStorage;\n+\n+public:\n+    ~CNodeStateAccessor() { if (pstate) LEAVE_CRITICAL_SECTION(pstate->cs); }\n+\n+    CNodeStateAccessor(const CNodeStateAccessor&) =delete;\n+    CNodeStateAccessor& operator= (const CNodeStateAccessor&) =delete;\n+\n+    CNodeStateAccessor(CNodeStateAccessor&& o) { pstate = o.pstate; o.pstate = NULL; }\n+\n+    bool operator()() const { return (bool)pstate; }\n+\n+    CNodeState* operator->() { return &(*pstate); }\n+    const CNodeState* operator->() const { return &(*pstate); }\n+};\n+\n class NodeStateStorage {\n     /** Map maintaining per-node state. Requires cs_main. */",
    "path": "src/net_processing.cpp",
    "position": null,
    "original_position": 38,
    "commit_id": "e195459b2ca5c52d2c4dda5ace28b4b6ee082a79",
    "original_commit_id": "4bb585ed6c9069b73b20ea1970a3967886e92938",
    "user": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Stale comment?",
    "created_at": "2016-12-29T21:40:10Z",
    "updated_at": "2017-01-01T04:15:58Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9419#discussion_r94182818",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9419",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/94182818"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9419#discussion_r94182818"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9419"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/94182818/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 250,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/94183279",
    "pull_request_review_id": 14714339,
    "id": 94183279,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDk0MTgzMjc5",
    "diff_hunk": "@@ -220,28 +223,65 @@ struct CNodeState {\n     }\n };\n \n+/** Provides locked access to a CNodeState */\n+class CNodeStateAccessor {\n+private:\n+    std::shared_ptr<CNodeState> pstate;\n+\n+    CNodeStateAccessor() : pstate() { }\n+    CNodeStateAccessor(std::shared_ptr<CNodeState>&& pstateIn) : pstate(std::move(pstateIn)) { ENTER_CRITICAL_SECTION(pstate->cs); }",
    "path": "src/net_processing.cpp",
    "position": null,
    "original_position": 20,
    "commit_id": "e195459b2ca5c52d2c4dda5ace28b4b6ee082a79",
    "original_commit_id": "4bb585ed6c9069b73b20ea1970a3967886e92938",
    "user": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Why not just have a lock as a member?",
    "created_at": "2016-12-29T21:46:10Z",
    "updated_at": "2017-01-01T04:15:58Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9419#discussion_r94183279",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9419",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/94183279"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9419#discussion_r94183279"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9419"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/94183279/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 232,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/94186711",
    "pull_request_review_id": 14717639,
    "id": 94186711,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDk0MTg2NzEx",
    "diff_hunk": "@@ -220,18 +223,68 @@ struct CNodeState {\n     }\n };\n \n-/** Map maintaining per-node state. Requires cs_main. */\n-map<NodeId, CNodeState> mapNodeState;\n+/** Provides locked access to a CNodeState */\n+class CNodeStateAccessor {\n+private:\n+    std::shared_ptr<CNodeState> pstate;\n \n-// Requires cs_main.\n-CNodeState *State(NodeId pnode) {\n-    map<NodeId, CNodeState>::iterator it = mapNodeState.find(pnode);\n-    if (it == mapNodeState.end())\n-        return NULL;\n-    return &it->second;\n+    CNodeStateAccessor() : pstate() { }\n+    CNodeStateAccessor(std::shared_ptr<CNodeState>&& pstateIn) : pstate(std::move(pstateIn)) { ENTER_CRITICAL_SECTION(pstate->cs); }\n+    friend class NodeStateStorage;\n+\n+public:\n+    ~CNodeStateAccessor() { if (pstate) LEAVE_CRITICAL_SECTION(pstate->cs); }\n+\n+    CNodeStateAccessor(const CNodeStateAccessor&) =delete;\n+    CNodeStateAccessor& operator= (const CNodeStateAccessor&) =delete;\n+\n+    CNodeStateAccessor(CNodeStateAccessor&& o) { pstate = o.pstate; o.pstate = NULL; }\n+\n+    bool operator()() const { return (bool)pstate; }",
    "path": "src/net_processing.cpp",
    "position": null,
    "original_position": 65,
    "commit_id": "e195459b2ca5c52d2c4dda5ace28b4b6ee082a79",
    "original_commit_id": "79c5a2124cc583de179267ffd8899631ff29f486",
    "user": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I dunno I dont really like the bool operator. If you really prefer it I'm happy to change it.",
    "created_at": "2016-12-29T22:20:21Z",
    "updated_at": "2017-01-01T04:15:58Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9419#discussion_r94186711",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9419",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/94186711"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9419#discussion_r94186711"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9419"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/94186711/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 243,
    "side": "RIGHT",
    "in_reply_to_id": 94182656
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/94186848",
    "pull_request_review_id": 14717780,
    "id": 94186848,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDk0MTg2ODQ4",
    "diff_hunk": "@@ -220,28 +223,65 @@ struct CNodeState {\n     }\n };\n \n+/** Provides locked access to a CNodeState */\n+class CNodeStateAccessor {\n+private:\n+    std::shared_ptr<CNodeState> pstate;\n+\n+    CNodeStateAccessor() : pstate() { }\n+    CNodeStateAccessor(std::shared_ptr<CNodeState>&& pstateIn) : pstate(std::move(pstateIn)) { ENTER_CRITICAL_SECTION(pstate->cs); }",
    "path": "src/net_processing.cpp",
    "position": null,
    "original_position": 20,
    "commit_id": "e195459b2ca5c52d2c4dda5ace28b4b6ee082a79",
    "original_commit_id": "4bb585ed6c9069b73b20ea1970a3967886e92938",
    "user": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I didnt realize we had an RAII lock in sync.h that would still do DEBUG_LOCKORDER checks. Will fix with CMutexLock.",
    "created_at": "2016-12-29T22:22:16Z",
    "updated_at": "2017-01-01T04:15:58Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9419#discussion_r94186848",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9419",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/94186848"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9419#discussion_r94186848"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9419"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/94186848/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 232,
    "side": "RIGHT",
    "in_reply_to_id": 94183279
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/94197671",
    "pull_request_review_id": 14728724,
    "id": 94197671,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDk0MTk3Njcx",
    "diff_hunk": "@@ -220,18 +223,68 @@ struct CNodeState {\n     }\n };\n \n-/** Map maintaining per-node state. Requires cs_main. */\n-map<NodeId, CNodeState> mapNodeState;\n+/** Provides locked access to a CNodeState */\n+class CNodeStateAccessor {\n+private:\n+    std::shared_ptr<CNodeState> pstate;\n \n-// Requires cs_main.\n-CNodeState *State(NodeId pnode) {\n-    map<NodeId, CNodeState>::iterator it = mapNodeState.find(pnode);\n-    if (it == mapNodeState.end())\n-        return NULL;\n-    return &it->second;\n+    CNodeStateAccessor() : pstate() { }\n+    CNodeStateAccessor(std::shared_ptr<CNodeState>&& pstateIn) : pstate(std::move(pstateIn)) { ENTER_CRITICAL_SECTION(pstate->cs); }\n+    friend class NodeStateStorage;\n+\n+public:\n+    ~CNodeStateAccessor() { if (pstate) LEAVE_CRITICAL_SECTION(pstate->cs); }\n+\n+    CNodeStateAccessor(const CNodeStateAccessor&) =delete;\n+    CNodeStateAccessor& operator= (const CNodeStateAccessor&) =delete;\n+\n+    CNodeStateAccessor(CNodeStateAccessor&& o) { pstate = o.pstate; o.pstate = NULL; }\n+\n+    bool operator()() const { return (bool)pstate; }",
    "path": "src/net_processing.cpp",
    "position": null,
    "original_position": 65,
    "commit_id": "e195459b2ca5c52d2c4dda5ace28b4b6ee082a79",
    "original_commit_id": "79c5a2124cc583de179267ffd8899631ff29f486",
    "user": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "explicit bool matches the semantics of smart pointers, so I think it's a good fit here. But more importantly, the call operator makes it look as though something is happening to the accessor, so I'd really rather not use that.",
    "created_at": "2016-12-30T02:02:44Z",
    "updated_at": "2017-01-01T04:15:58Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9419#discussion_r94197671",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9419",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/94197671"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9419#discussion_r94197671"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9419"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/94197671/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 243,
    "side": "RIGHT",
    "in_reply_to_id": 94182656
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/94279837",
    "pull_request_review_id": 14809869,
    "id": 94279837,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDk0Mjc5ODM3",
    "diff_hunk": "@@ -220,28 +223,65 @@ struct CNodeState {\n     }\n };\n \n+/** Provides locked access to a CNodeState */\n+class CNodeStateAccessor {\n+private:\n+    std::shared_ptr<CNodeState> pstate;\n+\n+    CNodeStateAccessor() : pstate() { }\n+    CNodeStateAccessor(std::shared_ptr<CNodeState>&& pstateIn) : pstate(std::move(pstateIn)) { ENTER_CRITICAL_SECTION(pstate->cs); }",
    "path": "src/net_processing.cpp",
    "position": null,
    "original_position": 20,
    "commit_id": "e195459b2ca5c52d2c4dda5ace28b4b6ee082a79",
    "original_commit_id": "4bb585ed6c9069b73b20ea1970a3967886e92938",
    "user": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Hmm, looking again using CMutexLock means adding `__FILE__`,` __LINE__`, etc macros in net_processing for parameters to CMutexLock, instead of letting ENTER_CRITICAL_SECTION figure it out. If you prefer I could try to add some crazy defines like CONSTRUCT_CMUTEXLOCK(mutex, lockName) which fills in a constructor for use in the CNodeStateAccessor constructor?",
    "created_at": "2017-01-01T03:53:45Z",
    "updated_at": "2017-01-01T16:16:25Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9419#discussion_r94279837",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9419",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/94279837"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9419#discussion_r94279837"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9419"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/94279837/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 232,
    "side": "RIGHT",
    "in_reply_to_id": 94183279
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/94279903",
    "pull_request_review_id": 14809916,
    "id": 94279903,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDk0Mjc5OTAz",
    "diff_hunk": "@@ -220,18 +223,68 @@ struct CNodeState {\n     }\n };\n \n-/** Map maintaining per-node state. Requires cs_main. */\n-map<NodeId, CNodeState> mapNodeState;\n+/** Provides locked access to a CNodeState */\n+class CNodeStateAccessor {\n+private:\n+    std::shared_ptr<CNodeState> pstate;\n \n-// Requires cs_main.\n-CNodeState *State(NodeId pnode) {\n-    map<NodeId, CNodeState>::iterator it = mapNodeState.find(pnode);\n-    if (it == mapNodeState.end())\n-        return NULL;\n-    return &it->second;\n+    CNodeStateAccessor() : pstate() { }\n+    CNodeStateAccessor(std::shared_ptr<CNodeState>&& pstateIn) : pstate(std::move(pstateIn)) { ENTER_CRITICAL_SECTION(pstate->cs); }\n+    friend class NodeStateStorage;\n+\n+public:\n+    ~CNodeStateAccessor() { if (pstate) LEAVE_CRITICAL_SECTION(pstate->cs); }\n+\n+    CNodeStateAccessor(const CNodeStateAccessor&) =delete;\n+    CNodeStateAccessor& operator= (const CNodeStateAccessor&) =delete;\n+\n+    CNodeStateAccessor(CNodeStateAccessor&& o) { pstate = o.pstate; o.pstate = NULL; }\n+\n+    bool operator()() const { return (bool)pstate; }",
    "path": "src/net_processing.cpp",
    "position": null,
    "original_position": 65,
    "commit_id": "e195459b2ca5c52d2c4dda5ace28b4b6ee082a79",
    "original_commit_id": "79c5a2124cc583de179267ffd8899631ff29f486",
    "user": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "OK, switched to regular bool.",
    "created_at": "2017-01-01T04:11:53Z",
    "updated_at": "2017-01-01T04:15:58Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9419#discussion_r94279903",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9419",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/94279903"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9419#discussion_r94279903"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9419"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/94279903/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 243,
    "side": "RIGHT",
    "in_reply_to_id": 94182656
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/94279904",
    "pull_request_review_id": 14809917,
    "id": 94279904,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDk0Mjc5OTA0",
    "diff_hunk": "@@ -220,28 +223,65 @@ struct CNodeState {\n     }\n };\n \n+/** Provides locked access to a CNodeState */\n+class CNodeStateAccessor {\n+private:\n+    std::shared_ptr<CNodeState> pstate;\n+\n+    CNodeStateAccessor() : pstate() { }\n+    CNodeStateAccessor(std::shared_ptr<CNodeState>&& pstateIn) : pstate(std::move(pstateIn)) { ENTER_CRITICAL_SECTION(pstate->cs); }\n+    friend class NodeStateStorage;\n+\n+public:\n+    ~CNodeStateAccessor() { if (pstate) LEAVE_CRITICAL_SECTION(pstate->cs); }\n+\n+    CNodeStateAccessor(const CNodeStateAccessor&) =delete;\n+    CNodeStateAccessor& operator= (const CNodeStateAccessor&) =delete;\n+\n+    CNodeStateAccessor(CNodeStateAccessor&& o) { pstate = o.pstate; o.pstate = NULL; }\n+\n+    bool operator()() const { return (bool)pstate; }\n+\n+    CNodeState* operator->() { return &(*pstate); }\n+    const CNodeState* operator->() const { return &(*pstate); }\n+};\n+\n class NodeStateStorage {\n     /** Map maintaining per-node state. Requires cs_main. */",
    "path": "src/net_processing.cpp",
    "position": null,
    "original_position": 38,
    "commit_id": "e195459b2ca5c52d2c4dda5ace28b4b6ee082a79",
    "original_commit_id": "4bb585ed6c9069b73b20ea1970a3967886e92938",
    "user": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Fixed.",
    "created_at": "2017-01-01T04:11:53Z",
    "updated_at": "2017-01-01T04:15:58Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9419#discussion_r94279904",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9419",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/94279904"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9419#discussion_r94279904"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9419"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/94279904/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 250,
    "side": "RIGHT",
    "in_reply_to_id": 94182818
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/94346965",
    "pull_request_review_id": 14873067,
    "id": 94346965,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDk0MzQ2OTY1",
    "diff_hunk": "@@ -220,28 +223,65 @@ struct CNodeState {\n     }\n };\n \n+/** Provides locked access to a CNodeState */\n+class CNodeStateAccessor {\n+private:\n+    std::shared_ptr<CNodeState> pstate;\n+\n+    CNodeStateAccessor() : pstate() { }\n+    CNodeStateAccessor(std::shared_ptr<CNodeState>&& pstateIn) : pstate(std::move(pstateIn)) { ENTER_CRITICAL_SECTION(pstate->cs); }",
    "path": "src/net_processing.cpp",
    "position": null,
    "original_position": 20,
    "commit_id": "e195459b2ca5c52d2c4dda5ace28b4b6ee082a79",
    "original_commit_id": "4bb585ed6c9069b73b20ea1970a3967886e92938",
    "user": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Hmm, I think you actually want these coming from net_processing anyway, no? I think if you make the ctor inline and pass \\_\\_LINE__ to CMutexLock, you'd end up seeing the source of the lock. Otherwise, you're always seeing it come from the same place I should think.\r\n\r\nTaking that a step further, I think it would work to change CMutexLock's ctors to take default \\_\\_FILE__ and \\_\\_LINE__ args?",
    "created_at": "2017-01-02T21:40:13Z",
    "updated_at": "2017-01-02T21:40:14Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9419#discussion_r94346965",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9419",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/94346965"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9419#discussion_r94346965"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9419"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/94346965/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 232,
    "side": "RIGHT",
    "in_reply_to_id": 94183279
  }
]