[
  {
    "sha": "0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowYWRmOThlZDM4YzcwNmViYWUwN2EwZDc0YmY2YmFiMThlMWI5ZjQy",
    "commit": {
      "author": {
        "name": "Mark Friedenbach",
        "email": "mark@friedenbach.org",
        "date": "2014-04-22T22:46:19Z"
      },
      "committer": {
        "name": "jtimon",
        "email": "jtimon@monetize.io",
        "date": "2014-07-31T19:00:20Z"
      },
      "message": "Use a typedef for monetary values",
      "tree": {
        "sha": "8b5d6403e90169158e5dc0206d4f4d87a7b8e6e7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/8b5d6403e90169158e5dc0206d4f4d87a7b8e6e7"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/comments",
    "author": {
      "login": "maaku",
      "id": 69154,
      "node_id": "MDQ6VXNlcjY5MTU0",
      "avatar_url": "https://avatars.githubusercontent.com/u/69154?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/maaku",
      "html_url": "https://github.com/maaku",
      "followers_url": "https://api.github.com/users/maaku/followers",
      "following_url": "https://api.github.com/users/maaku/following{/other_user}",
      "gists_url": "https://api.github.com/users/maaku/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/maaku/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/maaku/subscriptions",
      "organizations_url": "https://api.github.com/users/maaku/orgs",
      "repos_url": "https://api.github.com/users/maaku/repos",
      "events_url": "https://api.github.com/users/maaku/events{/privacy}",
      "received_events_url": "https://api.github.com/users/maaku/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jtimon",
      "id": 1008458,
      "node_id": "MDQ6VXNlcjEwMDg0NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1008458?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtimon",
      "html_url": "https://github.com/jtimon",
      "followers_url": "https://api.github.com/users/jtimon/followers",
      "following_url": "https://api.github.com/users/jtimon/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtimon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtimon/subscriptions",
      "organizations_url": "https://api.github.com/users/jtimon/orgs",
      "repos_url": "https://api.github.com/users/jtimon/repos",
      "events_url": "https://api.github.com/users/jtimon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtimon/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "c0e9548b6305d315735ecd6dacc3c88acd6a6c7a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c0e9548b6305d315735ecd6dacc3c88acd6a6c7a",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/c0e9548b6305d315735ecd6dacc3c88acd6a6c7a"
      }
    ],
    "stats": {
      "total": 673,
      "additions": 354,
      "deletions": 319
    },
    "files": [
      {
        "sha": "44b44360c66931df0fff26ff1031b9ec07d9c5ba",
        "filename": "src/Makefile.am",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/Makefile.am",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/Makefile.am",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/Makefile.am?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -68,6 +68,7 @@ BITCOIN_CORE_H = \\\n   addrman.h \\\n   alert.h \\\n   allocators.h \\\n+  amount.h \\\n   base58.h \\\n   bloom.h \\\n   chainparams.h \\"
      },
      {
        "sha": "1381c3131c38c1059a26c954b9c8905649a8e223",
        "filename": "src/amount.h",
        "status": "added",
        "additions": 13,
        "deletions": 0,
        "changes": 13,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/amount.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/amount.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/amount.h?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -0,0 +1,13 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2014 The Bitcoin developers\n+// Distributed under the MIT/X11 software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_AMOUNT_H\n+#define BITCOIN_AMOUNT_H\n+\n+#include <stdint.h>\n+\n+typedef int64_t Amount;\n+\n+#endif"
      },
      {
        "sha": "b5466b109370b9392fe7bf48e55a953d6a0385c1",
        "filename": "src/coins.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/coins.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/coins.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/coins.cpp?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -155,12 +155,12 @@ const CTxOut &CCoinsViewCache::GetOutputFor(const CTxIn& input)\n     return coins.vout[input.prevout.n];\n }\n \n-int64_t CCoinsViewCache::GetValueIn(const CTransaction& tx)\n+Amount CCoinsViewCache::GetValueIn(const CTransaction& tx)\n {\n     if (tx.IsCoinBase())\n         return 0;\n \n-    int64_t nResult = 0;\n+    Amount nResult = 0;\n     for (unsigned int i = 0; i < tx.vin.size(); i++)\n         nResult += GetOutputFor(tx.vin[i]).nValue;\n "
      },
      {
        "sha": "586f22e17aea6c947ac89e3143ae081d4419b24c",
        "filename": "src/coins.h",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/coins.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/coins.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/coins.h?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -262,7 +262,7 @@ struct CCoinsStats\n     uint64_t nTransactionOutputs;\n     uint64_t nSerializedSize;\n     uint256 hashSerialized;\n-    int64_t nTotalAmount;\n+    Amount nTotalAmount;\n \n     CCoinsStats() : nHeight(0), hashBlock(0), nTransactions(0), nTransactionOutputs(0), nSerializedSize(0), hashSerialized(0), nTotalAmount(0) {}\n };\n@@ -355,7 +355,7 @@ class CCoinsViewCache : public CCoinsViewBacked\n         @param[in] tx\ttransaction for which we are checking input total\n         @return\tSum of value of all inputs (scriptSigs)\n      */\n-    int64_t GetValueIn(const CTransaction& tx);\n+    Amount GetValueIn(const CTransaction& tx);\n \n     // Check whether all prevouts of the transaction are present in the UTXO set represented by this view\n     bool HaveInputs(const CTransaction& tx);"
      },
      {
        "sha": "2536cdfabc90469ec77fd235d702037c7590a7b2",
        "filename": "src/core.cpp",
        "status": "modified",
        "additions": 5,
        "deletions": 5,
        "changes": 10,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/core.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/core.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/core.cpp?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -51,7 +51,7 @@ void CTxIn::print() const\n     LogPrintf(\"%s\\n\", ToString());\n }\n \n-CTxOut::CTxOut(int64_t nValueIn, CScript scriptPubKeyIn)\n+CTxOut::CTxOut(const Amount& nValueIn, CScript scriptPubKeyIn)\n {\n     nValue = nValueIn;\n     scriptPubKey = scriptPubKeyIn;\n@@ -72,15 +72,15 @@ void CTxOut::print() const\n     LogPrintf(\"%s\\n\", ToString());\n }\n \n-CFeeRate::CFeeRate(int64_t nFeePaid, size_t nSize)\n+CFeeRate::CFeeRate(Amount nFeePaid, size_t nSize)\n {\n     if (nSize > 0)\n         nSatoshisPerK = nFeePaid*1000/nSize;\n     else\n         nSatoshisPerK = 0;\n }\n \n-int64_t CFeeRate::GetFee(size_t nSize) const\n+Amount CFeeRate::GetFee(size_t nSize) const\n {\n     int64_t nFee = nSatoshisPerK*nSize / 1000;\n \n@@ -124,9 +124,9 @@ CTransaction& CTransaction::operator=(const CTransaction &tx) {\n     return *this;\n }\n \n-int64_t CTransaction::GetValueOut() const\n+Amount CTransaction::GetValueOut() const\n {\n-    int64_t nValueOut = 0;\n+    Amount nValueOut = 0;\n     BOOST_FOREACH(const CTxOut& txout, vout)\n     {\n         nValueOut += txout.nValue;"
      },
      {
        "sha": "4ea1179c96eda7e9a59a014241d23d2cd7aad08c",
        "filename": "src/core.h",
        "status": "modified",
        "additions": 5,
        "deletions": 5,
        "changes": 10,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/core.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/core.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/core.h?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -15,8 +15,8 @@\n class CTransaction;\n \n /** No amount larger than this (in satoshi) is valid */\n-static const int64_t MAX_MONEY = 21000000 * COIN;\n-inline bool MoneyRange(int64_t nValue) { return (nValue >= 0 && nValue <= MAX_MONEY); }\n+static const Amount MAX_MONEY = 21000000 * COIN;\n+inline bool MoneyRange(const Amount& nValue) { return (nValue >= 0 && nValue <= MAX_MONEY); }\n \n /** An outpoint - a combination of a transaction hash and an index n into its vout */\n class COutPoint\n@@ -145,15 +145,15 @@ class CFeeRate\n class CTxOut\n {\n public:\n-    int64_t nValue;\n+    Amount nValue;\n     CScript scriptPubKey;\n \n     CTxOut()\n     {\n         SetNull();\n     }\n \n-    CTxOut(int64_t nValueIn, CScript scriptPubKeyIn);\n+    CTxOut(const Amount& nValueIn, CScript scriptPubKeyIn);\n \n     IMPLEMENT_SERIALIZE\n     (\n@@ -256,7 +256,7 @@ class CTransaction\n     }\n \n     // Return sum of txouts.\n-    int64_t GetValueOut() const;\n+    Amount GetValueOut() const;\n     // GetValueIn() is a method on CCoinsViewCache, because\n     // inputs must be known to compute value in.\n "
      },
      {
        "sha": "275c12fc690892d319c0501407c739b407f2641c",
        "filename": "src/init.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/init.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/init.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/init.cpp?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -646,7 +646,7 @@ bool AppInit2(boost::thread_group& threadGroup)\n     // cost to you of processing a transaction.\n     if (mapArgs.count(\"-minrelaytxfee\"))\n     {\n-        int64_t n = 0;\n+        Amount n = 0;\n         if (ParseMoney(mapArgs[\"-minrelaytxfee\"], n) && n > 0)\n             ::minRelayTxFee = CFeeRate(n);\n         else"
      },
      {
        "sha": "be76b62ba85a0037863a14b662e2d91aaa5f580b",
        "filename": "src/main.cpp",
        "status": "modified",
        "additions": 12,
        "deletions": 12,
        "changes": 24,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/main.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/main.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/main.cpp?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -800,7 +800,7 @@ bool CheckTransaction(const CTransaction& tx, CValidationState &state)\n                          REJECT_INVALID, \"bad-txns-oversize\");\n \n     // Check for negative or overflow output values\n-    int64_t nValueOut = 0;\n+    Amount nValueOut = 0;\n     BOOST_FOREACH(const CTxOut& txout, tx.vout)\n     {\n         if (txout.nValue < 0)\n@@ -842,7 +842,7 @@ bool CheckTransaction(const CTransaction& tx, CValidationState &state)\n     return true;\n }\n \n-int64_t GetMinRelayFee(const CTransaction& tx, unsigned int nBytes, bool fAllowFree)\n+Amount GetMinRelayFee(const CTransaction& tx, unsigned int nBytes, bool fAllowFree)\n {\n     {\n         LOCK(mempool.cs);\n@@ -854,7 +854,7 @@ int64_t GetMinRelayFee(const CTransaction& tx, unsigned int nBytes, bool fAllowF\n             return 0;\n     }\n \n-    int64_t nMinFee = ::minRelayTxFee.GetFee(nBytes);\n+    Amount nMinFee = ::minRelayTxFee.GetFee(nBytes);\n \n     if (fAllowFree)\n     {\n@@ -917,7 +917,7 @@ bool AcceptToMemoryPool(CTxMemPool& pool, CValidationState &state, const CTransa\n         CCoinsView dummy;\n         CCoinsViewCache view(dummy);\n \n-        int64_t nValueIn = 0;\n+        Amount nValueIn = 0;\n         {\n         LOCK(pool.cs);\n         CCoinsViewMemPool viewMemPool(*pcoinsTip, pool);\n@@ -960,15 +960,15 @@ bool AcceptToMemoryPool(CTxMemPool& pool, CValidationState &state, const CTransa\n         // you should add code here to check that the transaction does a\n         // reasonable number of ECDSA signature verifications.\n \n-        int64_t nValueOut = tx.GetValueOut();\n-        int64_t nFees = nValueIn-nValueOut;\n+        Amount nValueOut = tx.GetValueOut();\n+        Amount nFees = nValueIn-nValueOut;\n         double dPriority = view.GetPriority(tx, chainActive.Height());\n \n         CTxMemPoolEntry entry(tx, nFees, GetTime(), dPriority, chainActive.Height());\n         unsigned int nSize = entry.GetTxSize();\n \n         // Don't accept it if it can't get into a block\n-        int64_t txMinFee = GetMinRelayFee(tx, nSize, true);\n+        Amount txMinFee = GetMinRelayFee(tx, nSize, true);\n         if (fLimitFree && nFees < txMinFee)\n             return state.DoS(0, error(\"AcceptToMemoryPool : not enough fees %s, %d < %d\",\n                                       hash.ToString(), nFees, txMinFee),\n@@ -1240,7 +1240,7 @@ void static PruneOrphanBlocks()\n     mapOrphanBlocks.erase(hash);\n }\n \n-int64_t GetBlockValue(int nHeight, int64_t nFees)\n+Amount GetBlockValue(int nHeight, const Amount& nFees)\n {\n     int64_t nSubsidy = 50 * COIN;\n     int halvings = nHeight / Params().SubsidyHalvingInterval();\n@@ -1476,8 +1476,8 @@ bool CheckInputs(const CTransaction& tx, CValidationState &state, CCoinsViewCach\n         // This is also true for mempool checks.\n         CBlockIndex *pindexPrev = mapBlockIndex.find(inputs.GetBestBlock())->second;\n         int nSpendHeight = pindexPrev->nHeight + 1;\n-        int64_t nValueIn = 0;\n-        int64_t nFees = 0;\n+        Amount nValueIn = 0;\n+        Amount nFees = 0;\n         for (unsigned int i = 0; i < tx.vin.size(); i++)\n         {\n             const COutPoint &prevout = tx.vin[i].prevout;\n@@ -1504,7 +1504,7 @@ bool CheckInputs(const CTransaction& tx, CValidationState &state, CCoinsViewCach\n                              REJECT_INVALID, \"bad-txns-in-belowout\");\n \n         // Tally transaction fees\n-        int64_t nTxFee = nValueIn - tx.GetValueOut();\n+        Amount nTxFee = nValueIn - tx.GetValueOut();\n         if (nTxFee < 0)\n             return state.DoS(100, error(\"CheckInputs() : %s nTxFee < 0\", tx.GetHash().ToString()),\n                              REJECT_INVALID, \"bad-txns-fee-negative\");\n@@ -1743,7 +1743,7 @@ bool ConnectBlock(CBlock& block, CValidationState& state, CBlockIndex* pindex, C\n     CCheckQueueControl<CScriptCheck> control(fScriptChecks && nScriptCheckThreads ? &scriptcheckqueue : NULL);\n \n     int64_t nTimeStart = GetTimeMicros();\n-    int64_t nFees = 0;\n+    Amount nFees = 0;\n     int nInputs = 0;\n     unsigned int nSigOps = 0;\n     CDiskTxPos pos(pindex->GetBlockPos(), GetSizeOfCompactSize(block.vtx.size()));"
      },
      {
        "sha": "66409fbedd1a8ce5e3e6e0d2bdad754f2e428220",
        "filename": "src/main.h",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/main.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/main.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/main.h?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -159,7 +159,7 @@ std::string GetWarnings(std::string strFor);\n bool GetTransaction(const uint256 &hash, CTransaction &tx, uint256 &hashBlock, bool fAllowSlow = false);\n /** Find the best known block, and make it the tip of the block chain */\n bool ActivateBestChain(CValidationState &state);\n-int64_t GetBlockValue(int nHeight, int64_t nFees);\n+Amount GetBlockValue(int nHeight, const Amount& nFees);\n \n void UpdateTime(CBlockHeader& block, const CBlockIndex* pindexPrev);\n \n@@ -245,7 +245,7 @@ struct CDiskTxPos : public CDiskBlockPos\n };\n \n \n-int64_t GetMinRelayFee(const CTransaction& tx, unsigned int nBytes, bool fAllowFree);\n+Amount GetMinRelayFee(const CTransaction& tx, unsigned int nBytes, bool fAllowFree);\n \n //\n // Check transaction inputs, and make sure any\n@@ -1083,7 +1083,7 @@ extern CBlockTreeDB *pblocktree;\n struct CBlockTemplate\n {\n     CBlock block;\n-    std::vector<int64_t> vTxFees;\n+    std::vector<Amount> vTxFees;\n     std::vector<int64_t> vTxSigOps;\n };\n "
      },
      {
        "sha": "6ff5607970bee13e0b5f4ac85e477562cd6853eb",
        "filename": "src/miner.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 5,
        "changes": 9,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/miner.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/miner.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/miner.cpp?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -117,8 +117,7 @@ CBlockTemplate* CreateNewBlock(const CScript& scriptPubKeyIn)\n     nBlockMinSize = std::min(nBlockMaxSize, nBlockMinSize);\n \n     // Collect memory pool transactions into the block\n-    int64_t nFees = 0;\n-\n+    Amount nFees = 0;\n     {\n         LOCK2(cs_main, mempool.cs);\n         CBlockIndex* pindexPrev = chainActive.Tip();\n@@ -141,7 +140,7 @@ CBlockTemplate* CreateNewBlock(const CScript& scriptPubKeyIn)\n \n             COrphan* porphan = NULL;\n             double dPriority = 0;\n-            int64_t nTotalIn = 0;\n+            Amount nTotalIn = 0;\n             bool fMissingInputs = false;\n             BOOST_FOREACH(const CTxIn& txin, tx.vin)\n             {\n@@ -175,7 +174,7 @@ CBlockTemplate* CreateNewBlock(const CScript& scriptPubKeyIn)\n                 }\n                 const CCoins &coins = view.GetCoins(txin.prevout.hash);\n \n-                int64_t nValueIn = coins.vout[txin.prevout.n].nValue;\n+                Amount nValueIn = coins.vout[txin.prevout.n].nValue;\n                 nTotalIn += nValueIn;\n \n                 int nConf = pindexPrev->nHeight - coins.nHeight + 1;\n@@ -252,7 +251,7 @@ CBlockTemplate* CreateNewBlock(const CScript& scriptPubKeyIn)\n             if (!view.HaveInputs(tx))\n                 continue;\n \n-            int64_t nTxFees = view.GetValueIn(tx)-tx.GetValueOut();\n+            Amount nTxFees = view.GetValueIn(tx)-tx.GetValueOut();\n \n             nTxSigOps += GetP2SHSigOpCount(tx, view);\n             if (nBlockSigOps + nTxSigOps >= MAX_BLOCK_SIGOPS)"
      },
      {
        "sha": "4a996129da2d8daa484230c1d7c725da966182ec",
        "filename": "src/qt/bitcoinamountfield.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 4,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/bitcoinamountfield.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/bitcoinamountfield.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoinamountfield.cpp?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -150,7 +150,7 @@ class AmountSpinBox: public QAbstractSpinBox\n      */\n     qint64 parse(const QString &text, bool *valid_out=0) const\n     {\n-        qint64 val = 0;\n+        Amount val = 0;\n         bool valid = BitcoinUnits::parse(currentUnit, text, &val);\n         if(valid)\n         {\n@@ -253,12 +253,12 @@ QWidget *BitcoinAmountField::setupTabChain(QWidget *prev)\n     return unit;\n }\n \n-qint64 BitcoinAmountField::value(bool *valid_out) const\n+Amount BitcoinAmountField::value(bool *valid_out) const\n {\n     return amount->value(valid_out);\n }\n \n-void BitcoinAmountField::setValue(qint64 value)\n+void BitcoinAmountField::setValue(const Amount& value)\n {\n     amount->setValue(value);\n }\n@@ -285,7 +285,7 @@ void BitcoinAmountField::setDisplayUnit(int newUnit)\n     unit->setValue(newUnit);\n }\n \n-void BitcoinAmountField::setSingleStep(qint64 step)\n+void BitcoinAmountField::setSingleStep(const Amount& step)\n {\n     amount->setSingleStep(step);\n }"
      },
      {
        "sha": "09c74b183d11d9849cba68178ef8c93fa2c5aff3",
        "filename": "src/qt/bitcoinamountfield.h",
        "status": "modified",
        "additions": 6,
        "deletions": 4,
        "changes": 10,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/bitcoinamountfield.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/bitcoinamountfield.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoinamountfield.h?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -5,6 +5,8 @@\n #ifndef BITCOINAMOUNTFIELD_H\n #define BITCOINAMOUNTFIELD_H\n \n+#include \"amount.h\"\n+\n #include <QWidget>\n \n QT_BEGIN_NAMESPACE\n@@ -19,16 +21,16 @@ class BitcoinAmountField: public QWidget\n {\n     Q_OBJECT\n \n-    Q_PROPERTY(qint64 value READ value WRITE setValue NOTIFY valueChanged USER true)\n+    Q_PROPERTY(Amount value READ value WRITE setValue NOTIFY valueChanged USER true)\n \n public:\n     explicit BitcoinAmountField(QWidget *parent = 0);\n \n-    qint64 value(bool *valid=0) const;\n-    void setValue(qint64 value);\n+    Amount value(bool *value=0) const;\n+    void setValue(const Amount& value);\n \n     /** Set single step in satoshis **/\n-    void setSingleStep(qint64 step);\n+    void setSingleStep(const Amount& step);\n \n     /** Make read-only **/\n     void setReadOnly(bool fReadOnly);"
      },
      {
        "sha": "593a134200f8f32fe0deeb2fdf5c345e1dbf031d",
        "filename": "src/qt/bitcoingui.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/bitcoingui.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/bitcoingui.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoingui.cpp?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -828,7 +828,7 @@ void BitcoinGUI::closeEvent(QCloseEvent *event)\n }\n \n #ifdef ENABLE_WALLET\n-void BitcoinGUI::incomingTransaction(const QString& date, int unit, qint64 amount, const QString& type, const QString& address)\n+void BitcoinGUI::incomingTransaction(const QString& date, int unit, const Amount& amount, const QString& type, const QString& address)\n {\n     // On new transaction, make an info balloon\n     message((amount)<0 ? tr(\"Sent transaction\") : tr(\"Incoming transaction\"),"
      },
      {
        "sha": "4b3b3730aba2942e1633542ebd7e6ed99d6c9536",
        "filename": "src/qt/bitcoingui.h",
        "status": "modified",
        "additions": 3,
        "deletions": 1,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/bitcoingui.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/bitcoingui.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoingui.h?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -9,6 +9,8 @@\n #include \"config/bitcoin-config.h\"\n #endif\n \n+#include \"amount.h\"\n+\n #include <QLabel>\n #include <QMainWindow>\n #include <QMap>\n@@ -158,7 +160,7 @@ public slots:\n     bool handlePaymentRequest(const SendCoinsRecipient& recipient);\n \n     /** Show incoming transaction notification for new transactions. */\n-    void incomingTransaction(const QString& date, int unit, qint64 amount, const QString& type, const QString& address);\n+    void incomingTransaction(const QString& date, int unit, const Amount& amount, const QString& type, const QString& address);\n #endif\n \n private slots:"
      },
      {
        "sha": "27121329a8e4f9e350caba04834421184ec11d27",
        "filename": "src/qt/bitcoinunits.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 4,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/bitcoinunits.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/bitcoinunits.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoinunits.cpp?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -91,7 +91,7 @@ int BitcoinUnits::decimals(int unit)\n     }\n }\n \n-QString BitcoinUnits::format(int unit, qint64 n, bool fPlus, SeparatorStyle separators)\n+QString BitcoinUnits::format(int unit, const Amount& n, bool fPlus, SeparatorStyle separators)\n {\n     // Note: not using straight sprintf here because we do NOT want\n     // localized number formatting.\n@@ -143,20 +143,20 @@ QString BitcoinUnits::format(int unit, qint64 n, bool fPlus, SeparatorStyle sepa\n // Please take care to use formatHtmlWithUnit instead, when\n // appropriate.\n \n-QString BitcoinUnits::formatWithUnit(int unit, qint64 amount, bool plussign, SeparatorStyle separators)\n+QString BitcoinUnits::formatWithUnit(int unit, const Amount& amount, bool plussign, SeparatorStyle separators)\n {\n     return format(unit, amount, plussign, separators) + QString(\" \") + name(unit);\n }\n \n-QString BitcoinUnits::formatHtmlWithUnit(int unit, qint64 amount, bool plussign, SeparatorStyle separators)\n+QString BitcoinUnits::formatHtmlWithUnit(int unit, const Amount& amount, bool plussign, SeparatorStyle separators)\n {\n     QString str(formatWithUnit(unit, amount, plussign, separators));\n     str.replace(QChar(THIN_SP_CP), QString(THIN_SP_HTML));\n     return QString(\"<span style='white-space: nowrap;'>%1</span>\").arg(str);\n }\n \n \n-bool BitcoinUnits::parse(int unit, const QString &value, qint64 *val_out)\n+bool BitcoinUnits::parse(int unit, const QString &value, Amount* val_out)\n {\n     if(!valid(unit) || value.isEmpty())\n         return false; // Refuse to parse invalid unit or empty string"
      },
      {
        "sha": "48317485dbfb673121d45a503b01ea700875d045",
        "filename": "src/qt/bitcoinunits.h",
        "status": "modified",
        "additions": 6,
        "deletions": 4,
        "changes": 10,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/bitcoinunits.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/bitcoinunits.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoinunits.h?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -5,6 +5,8 @@\n #ifndef BITCOINUNITS_H\n #define BITCOINUNITS_H\n \n+#include \"amount.h\"\n+\n #include <QAbstractListModel>\n #include <QString>\n \n@@ -85,12 +87,12 @@ class BitcoinUnits: public QAbstractListModel\n     //! Number of decimals left\n     static int decimals(int unit);\n     //! Format as string\n-    static QString format(int unit, qint64 amount, bool plussign=false, SeparatorStyle separators=separatorStandard);\n+    static QString format(int unit, const Amount& amount, bool plussign=false, SeparatorStyle separators=separatorStandard);\n     //! Format as string (with unit)\n-    static QString formatWithUnit(int unit, qint64 amount, bool plussign=false, SeparatorStyle separators=separatorStandard);\n-    static QString formatHtmlWithUnit(int unit, qint64 amount, bool plussign=false, SeparatorStyle separators=separatorStandard);\n+    static QString formatWithUnit(int unit, const Amount& amount, bool plussign=false, SeparatorStyle separators=separatorStandard);\n+    static QString formatHtmlWithUnit(int unit, const Amount& amount, bool plussign=false, SeparatorStyle separators=separatorStandard);\n     //! Parse string to coin amount\n-    static bool parse(int unit, const QString &value, qint64 *val_out);\n+    static bool parse(int unit, const QString &value, Amount* val_out);\n     //! Gets title for amount column including current display unit if optionsModel reference available */\n     static QString getAmountColumnTitle(int unit);\n     ///@}"
      },
      {
        "sha": "8157707a28dfe329aa335e523e6512a2b84bbcd8",
        "filename": "src/qt/coincontroldialog.cpp",
        "status": "modified",
        "additions": 8,
        "deletions": 8,
        "changes": 16,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/coincontroldialog.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/coincontroldialog.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/coincontroldialog.cpp?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -29,7 +29,7 @@\n #include <QTreeWidgetItem>\n \n using namespace std;\n-QList<qint64> CoinControlDialog::payAmounts;\n+QList<Amount> CoinControlDialog::payAmounts;\n CCoinControl* CoinControlDialog::coinControl = new CCoinControl();\n \n CoinControlDialog::CoinControlDialog(QWidget *parent) :\n@@ -443,10 +443,10 @@ void CoinControlDialog::updateLabels(WalletModel *model, QDialog* dialog)\n         return;\n \n     // nPayAmount\n-    qint64 nPayAmount = 0;\n+    Amount nPayAmount = 0;\n     bool fDust = false;\n     CMutableTransaction txDummy;\n-    foreach(const qint64 &amount, CoinControlDialog::payAmounts)\n+    foreach(const Amount &amount, CoinControlDialog::payAmounts)\n     {\n         nPayAmount += amount;\n \n@@ -460,10 +460,10 @@ void CoinControlDialog::updateLabels(WalletModel *model, QDialog* dialog)\n     }\n \n     QString sPriorityLabel      = tr(\"none\");\n-    int64_t nAmount             = 0;\n-    int64_t nPayFee             = 0;\n-    int64_t nAfterFee           = 0;\n-    int64_t nChange             = 0;\n+    Amount nAmount              = 0;\n+    Amount nPayFee              = 0;\n+    Amount nAfterFee            = 0;\n+    Amount nChange              = 0;\n     unsigned int nBytes         = 0;\n     unsigned int nBytesInputs   = 0;\n     double dPriority            = 0;\n@@ -684,7 +684,7 @@ void CoinControlDialog::updateView()\n             itemWalletAddress->setText(COLUMN_ADDRESS, sWalletAddress);\n         }\n \n-        int64_t nSum = 0;\n+        Amount nSum = 0;\n         double dPrioritySum = 0;\n         int nChildren = 0;\n         int nInputSum = 0;"
      },
      {
        "sha": "ab4202c38cfb82d47eaaaead75b7c4225280665f",
        "filename": "src/qt/coincontroldialog.h",
        "status": "modified",
        "additions": 3,
        "deletions": 1,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/coincontroldialog.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/coincontroldialog.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/coincontroldialog.h?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -5,6 +5,8 @@\n #ifndef COINCONTROLDIALOG_H\n #define COINCONTROLDIALOG_H\n \n+#include \"amount.h\"\n+\n #include <QAbstractButton>\n #include <QAction>\n #include <QDialog>\n@@ -35,7 +37,7 @@ class CoinControlDialog : public QDialog\n     static void updateLabels(WalletModel*, QDialog*);\n     static QString getPriorityLabel(const CTxMemPool& pool, double);\n \n-    static QList<qint64> payAmounts;\n+    static QList<Amount> payAmounts;\n     static CCoinControl *coinControl;\n \n private:"
      },
      {
        "sha": "1e4cb5fbf377a45ebbd2722005f4ed5e62fc662e",
        "filename": "src/qt/guiutil.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/guiutil.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/guiutil.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/guiutil.cpp?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -208,7 +208,7 @@ QString formatBitcoinURI(const SendCoinsRecipient &info)\n     return ret;\n }\n \n-bool isDust(const QString& address, qint64 amount)\n+bool isDust(const QString& address, const Amount& amount)\n {\n     CTxDestination dest = CBitcoinAddress(address.toStdString()).Get();\n     CScript script; script.SetDestination(dest);"
      },
      {
        "sha": "f21ead1609e9780b3bd49759e94c57a4511ac13d",
        "filename": "src/qt/guiutil.h",
        "status": "modified",
        "additions": 3,
        "deletions": 1,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/guiutil.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/guiutil.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/guiutil.h?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -5,6 +5,8 @@\n #ifndef GUIUTIL_H\n #define GUIUTIL_H\n \n+#include \"amount.h\"\n+\n #include <QHeaderView>\n #include <QMessageBox>\n #include <QObject>\n@@ -46,7 +48,7 @@ namespace GUIUtil\n     QString formatBitcoinURI(const SendCoinsRecipient &info);\n \n     // Returns true if given address+amount meets \"dust\" definition\n-    bool isDust(const QString& address, qint64 amount);\n+    bool isDust(const QString& address, const Amount& amount);\n \n     // HTML escaping for rich text controls\n     QString HtmlEscape(const QString& str, bool fMultiLine=false);"
      },
      {
        "sha": "26679f9d9aad81086cf2c40260a2b6a5fcc0b8eb",
        "filename": "src/qt/optionsmodel.h",
        "status": "modified",
        "additions": 3,
        "deletions": 1,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/optionsmodel.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/optionsmodel.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/optionsmodel.h?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -5,6 +5,8 @@\n #ifndef OPTIONSMODEL_H\n #define OPTIONSMODEL_H\n \n+#include \"amount.h\"\n+\n #include <QAbstractListModel>\n \n QT_BEGIN_NAMESPACE\n@@ -85,7 +87,7 @@ class OptionsModel : public QAbstractListModel\n \n signals:\n     void displayUnitChanged(int unit);\n-    void transactionFeeChanged(qint64);\n+    void transactionFeeChanged(const Amount&);\n     void coinControlFeaturesChanged(bool);\n };\n "
      },
      {
        "sha": "c953e94d0df4c1b1fc7ef543a7c55f1e1f85cd73",
        "filename": "src/qt/overviewpage.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/overviewpage.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/overviewpage.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/overviewpage.cpp?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -138,7 +138,7 @@ OverviewPage::~OverviewPage()\n     delete ui;\n }\n \n-void OverviewPage::setBalance(qint64 balance, qint64 unconfirmedBalance, qint64 immatureBalance, qint64 watchOnlyBalance, qint64 watchUnconfBalance, qint64 watchImmatureBalance)\n+void OverviewPage::setBalance(const Amount& balance, const Amount& unconfirmedBalance, const Amount& immatureBalance, const Amount& watchOnlyBalance, const Amount& watchUnconfBalance, const Amount& watchImmatureBalance)\n {\n     int unit = walletModel->getOptionsModel()->getDisplayUnit();\n     currentBalance = balance;\n@@ -204,7 +204,7 @@ void OverviewPage::setWalletModel(WalletModel *model)\n         // Keep up to date with wallet\n         setBalance(model->getBalance(), model->getUnconfirmedBalance(), model->getImmatureBalance(),\n                    model->getWatchBalance(), model->getWatchUnconfirmedBalance(), model->getWatchImmatureBalance());\n-        connect(model, SIGNAL(balanceChanged(qint64, qint64, qint64, qint64, qint64, qint64)), this, SLOT(setBalance(qint64, qint64, qint64, qint64, qint64, qint64)));\n+        connect(model, SIGNAL(balanceChanged(const Amount&, const Amount&, const Amount&, const Amount&, const Amount&, const Amount&)), this, SLOT(setBalance(const Amount&, const Amount&, const Amount&, const Amount&, const Amount&, const Amount&)));\n \n         connect(model->getOptionsModel(), SIGNAL(displayUnitChanged(int)), this, SLOT(updateDisplayUnit()));\n     }"
      },
      {
        "sha": "ef288208d39bda43aa836bcc7c57c20c0e709e02",
        "filename": "src/qt/overviewpage.h",
        "status": "modified",
        "additions": 10,
        "deletions": 8,
        "changes": 18,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/overviewpage.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/overviewpage.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/overviewpage.h?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -5,6 +5,8 @@\n #ifndef OVERVIEWPAGE_H\n #define OVERVIEWPAGE_H\n \n+#include \"amount.h\"\n+\n #include <QWidget>\n \n class ClientModel;\n@@ -34,8 +36,8 @@ class OverviewPage : public QWidget\n     void showOutOfSyncWarning(bool fShow);\n \n public slots:\n-    void setBalance(qint64 balance, qint64 unconfirmedBalance, qint64 immatureBalance,\n-                    qint64 watchOnlyBalance, qint64 watchUnconfBalance, qint64 watchImmatureBalance);\n+    void setBalance(const Amount& balance, const Amount& unconfirmedBalance, const Amount& immatureBalance,\n+                    const Amount& watchOnlyBalance, const Amount& watchUnconfBalance, const Amount& watchImmatureBalance);\n \n signals:\n     void transactionClicked(const QModelIndex &index);\n@@ -44,12 +46,12 @@ public slots:\n     Ui::OverviewPage *ui;\n     ClientModel *clientModel;\n     WalletModel *walletModel;\n-    qint64 currentBalance;\n-    qint64 currentUnconfirmedBalance;\n-    qint64 currentImmatureBalance;\n-    qint64 currentWatchOnlyBalance;\n-    qint64 currentWatchUnconfBalance;\n-    qint64 currentWatchImmatureBalance;\n+    Amount currentBalance;\n+    Amount currentUnconfirmedBalance;\n+    Amount currentImmatureBalance;\n+    Amount currentWatchOnlyBalance;\n+    Amount currentWatchUnconfBalance;\n+    Amount currentWatchImmatureBalance;\n \n     TxViewDelegate *txdelegate;\n     TransactionFilterProxy *filter;"
      },
      {
        "sha": "88c5c67197038efa2f511871780bd93da1792142",
        "filename": "src/qt/paymentrequestplus.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/paymentrequestplus.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/paymentrequestplus.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/paymentrequestplus.cpp?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -195,9 +195,9 @@ bool PaymentRequestPlus::getMerchant(X509_STORE* certStore, QString& merchant) c\n     return fResult;\n }\n \n-QList<std::pair<CScript,qint64> > PaymentRequestPlus::getPayTo() const\n+QList<std::pair<CScript,Amount> > PaymentRequestPlus::getPayTo() const\n {\n-    QList<std::pair<CScript,qint64> > result;\n+    QList<std::pair<CScript,Amount> > result;\n     for (int i = 0; i < details.outputs_size(); i++)\n     {\n         const unsigned char* scriptStr = (const unsigned char*)details.outputs(i).script().data();"
      },
      {
        "sha": "2f8b9d48190441f21e1f5ea5a426df815bc8d56a",
        "filename": "src/qt/paymentrequestplus.h",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/paymentrequestplus.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/paymentrequestplus.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/paymentrequestplus.h?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -33,7 +33,7 @@ class PaymentRequestPlus\n     bool getMerchant(X509_STORE* certStore, QString& merchant) const;\n \n     // Returns list of outputs, amount\n-    QList<std::pair<CScript,qint64> > getPayTo() const;\n+    QList<std::pair<CScript,Amount> > getPayTo() const;\n \n     const payments::PaymentDetails& getDetails() const { return details; }\n "
      },
      {
        "sha": "9278f09a321fc2dfdd605c93cfeae72c5467fa41",
        "filename": "src/qt/paymentserver.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/paymentserver.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/paymentserver.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/paymentserver.cpp?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -527,10 +527,10 @@ bool PaymentServer::processPaymentRequest(PaymentRequestPlus& request, SendCoins\n \n     request.getMerchant(PaymentServer::certStore, recipient.authenticatedMerchant);\n \n-    QList<std::pair<CScript, qint64> > sendingTos = request.getPayTo();\n+    QList<std::pair<CScript, Amount> > sendingTos = request.getPayTo();\n     QStringList addresses;\n \n-    foreach(const PAIRTYPE(CScript, qint64)& sendingTo, sendingTos) {\n+    foreach(const PAIRTYPE(CScript, Amount)& sendingTo, sendingTos) {\n         // Extract and check destination addresses\n         CTxDestination dest;\n         if (ExtractDestination(sendingTo.first, dest)) {"
      },
      {
        "sha": "7692101b27270edfee08a64897902813dfcbed62",
        "filename": "src/qt/sendcoinsdialog.cpp",
        "status": "modified",
        "additions": 5,
        "deletions": 5,
        "changes": 10,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/sendcoinsdialog.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/sendcoinsdialog.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/sendcoinsdialog.cpp?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -92,7 +92,7 @@ void SendCoinsDialog::setModel(WalletModel *model)\n \n         setBalance(model->getBalance(), model->getUnconfirmedBalance(), model->getImmatureBalance(),\n                    model->getWatchBalance(), model->getWatchUnconfirmedBalance(), model->getWatchImmatureBalance());\n-        connect(model, SIGNAL(balanceChanged(qint64, qint64, qint64, qint64, qint64, qint64)), this, SLOT(setBalance(qint64, qint64, qint64, qint64, qint64, qint64)));\n+        connect(model, SIGNAL(balanceChanged(const Amount&, const Amount&, const Amount&, const Amount&, const Amount&, const Amount&)), this, SLOT(setBalance(const Amount&, const Amount&, const Amount&, const Amount&, const Amount&, const Amount&)));\n         connect(model->getOptionsModel(), SIGNAL(displayUnitChanged(int)), this, SLOT(updateDisplayUnit()));\n \n         // Coin Control\n@@ -203,7 +203,7 @@ void SendCoinsDialog::on_sendButton_clicked()\n         return;\n     }\n \n-    qint64 txFee = currentTransaction.getTransactionFee();\n+    Amount txFee = currentTransaction.getTransactionFee();\n     QString questionString = tr(\"Are you sure you want to send?\");\n     questionString.append(\"<br /><br />%1\");\n \n@@ -218,7 +218,7 @@ void SendCoinsDialog::on_sendButton_clicked()\n \n     // add total amount in all subdivision units\n     questionString.append(\"<hr />\");\n-    qint64 totalAmount = currentTransaction.getTotalTransactionAmount() + txFee;\n+    Amount totalAmount = currentTransaction.getTotalTransactionAmount() + txFee;\n     QStringList alternativeUnits;\n     foreach(BitcoinUnits::Unit u, BitcoinUnits::availableUnits())\n     {\n@@ -384,8 +384,8 @@ bool SendCoinsDialog::handlePaymentRequest(const SendCoinsRecipient &rv)\n     return true;\n }\n \n-void SendCoinsDialog::setBalance(qint64 balance, qint64 unconfirmedBalance, qint64 immatureBalance, \n-                                 qint64 watchBalance, qint64 watchUnconfirmedBalance, qint64 watchImmatureBalance)\n+void SendCoinsDialog::setBalance(const Amount& balance, const Amount& unconfirmedBalance, const Amount& immatureBalance, \n+                                 const Amount& watchBalance, const Amount& watchUnconfirmedBalance, const Amount& watchImmatureBalance)\n {\n     Q_UNUSED(unconfirmedBalance);\n     Q_UNUSED(immatureBalance);"
      },
      {
        "sha": "c74d4d65b21720bd66db0fe9ec3eea4c6f68df2f",
        "filename": "src/qt/sendcoinsdialog.h",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/sendcoinsdialog.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/sendcoinsdialog.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/sendcoinsdialog.h?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -47,8 +47,8 @@ public slots:\n     void accept();\n     SendCoinsEntry *addEntry();\n     void updateTabsAndLabels();\n-    void setBalance(qint64 balance, qint64 unconfirmedBalance, qint64 immatureBalance,\n-                    qint64 watchOnlyBalance, qint64 watchUnconfBalance, qint64 watchImmatureBalance);\n+    void setBalance(const Amount& balance, const Amount& unconfirmedBalance, const Amount& immatureBalance,\n+                    const Amount& watchOnlyBalance, const Amount& watchUnconfBalance, const Amount& watchImmatureBalance);\n \n private:\n     Ui::SendCoinsDialog *ui;"
      },
      {
        "sha": "6286b15cf60680d09ae780ca1762e3ff72fa9ee8",
        "filename": "src/qt/transactiondesc.cpp",
        "status": "modified",
        "additions": 7,
        "deletions": 7,
        "changes": 14,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/transactiondesc.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/transactiondesc.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/transactiondesc.cpp?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -55,9 +55,9 @@ QString TransactionDesc::toHTML(CWallet *wallet, CWalletTx &wtx, TransactionReco\n     strHTML += \"<html><font face='verdana, arial, helvetica, sans-serif'>\";\n \n     int64_t nTime = wtx.GetTxTime();\n-    int64_t nCredit = wtx.GetCredit(ISMINE_ALL);\n-    int64_t nDebit = wtx.GetDebit(ISMINE_ALL);\n-    int64_t nNet = nCredit - nDebit;\n+    Amount nCredit = wtx.GetCredit(ISMINE_ALL);\n+    Amount nDebit = wtx.GetDebit(ISMINE_ALL);\n+    Amount nNet = nCredit - nDebit;\n \n     strHTML += \"<b>\" + tr(\"Status\") + \":</b> \" + FormatTxStatus(wtx);\n     int nRequests = wtx.GetRequestCount();\n@@ -131,7 +131,7 @@ QString TransactionDesc::toHTML(CWallet *wallet, CWalletTx &wtx, TransactionReco\n         //\n         // Coinbase\n         //\n-        int64_t nUnmatured = 0;\n+        Amount nUnmatured = 0;\n         BOOST_FOREACH(const CTxOut& txout, wtx.vout)\n             nUnmatured += wallet->GetCredit(txout, ISMINE_ALL);\n         strHTML += \"<b>\" + tr(\"Credit\") + \":</b> \";\n@@ -205,13 +205,13 @@ QString TransactionDesc::toHTML(CWallet *wallet, CWalletTx &wtx, TransactionReco\n             if (fAllToMe)\n             {\n                 // Payment to self\n-                int64_t nChange = wtx.GetChange();\n-                int64_t nValue = nCredit - nChange;\n+                Amount nChange = wtx.GetChange();\n+                Amount nValue = nCredit - nChange;\n                 strHTML += \"<b>\" + tr(\"Total debit\") + \":</b> \" + BitcoinUnits::formatHtmlWithUnit(unit, -nValue) + \"<br>\";\n                 strHTML += \"<b>\" + tr(\"Total credit\") + \":</b> \" + BitcoinUnits::formatHtmlWithUnit(unit, nValue) + \"<br>\";\n             }\n \n-            int64_t nTxFee = nDebit - wtx.GetValueOut();\n+            Amount nTxFee = nDebit - wtx.GetValueOut();\n             if (nTxFee > 0)\n                 strHTML += \"<b>\" + tr(\"Transaction fee\") + \":</b> \" + BitcoinUnits::formatHtmlWithUnit(unit, -nTxFee) + \"<br>\";\n         }"
      },
      {
        "sha": "52c508bdd9a2214da66ce1e15f9b0b951c07996f",
        "filename": "src/qt/transactionfilterproxy.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/transactionfilterproxy.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/transactionfilterproxy.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/transactionfilterproxy.cpp?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -72,7 +72,7 @@ void TransactionFilterProxy::setTypeFilter(quint32 modes)\n     invalidateFilter();\n }\n \n-void TransactionFilterProxy::setMinAmount(qint64 minimum)\n+void TransactionFilterProxy::setMinAmount(const Amount& minimum)\n {\n     this->minAmount = minimum;\n     invalidateFilter();"
      },
      {
        "sha": "a518a9c56e80b2eb2f04da69dec2b3d1de1968f6",
        "filename": "src/qt/transactionfilterproxy.h",
        "status": "modified",
        "additions": 4,
        "deletions": 2,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/transactionfilterproxy.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/transactionfilterproxy.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/transactionfilterproxy.h?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -5,6 +5,8 @@\n #ifndef TRANSACTIONFILTERPROXY_H\n #define TRANSACTIONFILTERPROXY_H\n \n+#include \"amount.h\"\n+\n #include <QDateTime>\n #include <QSortFilterProxyModel>\n \n@@ -31,7 +33,7 @@ class TransactionFilterProxy : public QSortFilterProxyModel\n       @note Type filter takes a bit field created with TYPE() or ALL_TYPES\n      */\n     void setTypeFilter(quint32 modes);\n-    void setMinAmount(qint64 minimum);\n+    void setMinAmount(const Amount& minimum);\n \n     /** Set maximum number of rows returned, -1 if unlimited. */\n     void setLimit(int limit);\n@@ -49,7 +51,7 @@ class TransactionFilterProxy : public QSortFilterProxyModel\n     QDateTime dateTo;\n     QString addrPrefix;\n     quint32 typeFilter;\n-    qint64 minAmount;\n+    Amount minAmount;\n     int limitRows;\n     bool showInactive;\n };"
      },
      {
        "sha": "e57249e27d5df8d8a5c1a85c26b269fad8d02d65",
        "filename": "src/qt/transactionrecord.cpp",
        "status": "modified",
        "additions": 6,
        "deletions": 6,
        "changes": 12,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/transactionrecord.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/transactionrecord.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/transactionrecord.cpp?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -32,9 +32,9 @@ QList<TransactionRecord> TransactionRecord::decomposeTransaction(const CWallet *\n {\n     QList<TransactionRecord> parts;\n     int64_t nTime = wtx.GetTxTime();\n-    int64_t nCredit = wtx.GetCredit(true);\n-    int64_t nDebit = wtx.GetDebit(ISMINE_ALL);\n-    int64_t nNet = nCredit - nDebit;\n+    Amount nCredit = wtx.GetCredit(true);\n+    Amount nDebit = wtx.GetDebit(ISMINE_ALL);\n+    Amount nNet = nCredit - nDebit;\n     uint256 hash = wtx.GetHash();\n     std::map<std::string, std::string> mapValue = wtx.mapValue;\n \n@@ -97,7 +97,7 @@ QList<TransactionRecord> TransactionRecord::decomposeTransaction(const CWallet *\n         if (fAllFromMe && fAllToMe)\n         {\n             // Payment to self\n-            int64_t nChange = wtx.GetChange();\n+            Amount nChange = wtx.GetChange();\n \n             parts.append(TransactionRecord(hash, nTime, TransactionRecord::SendToSelf, \"\",\n                             -(nDebit - nChange), nCredit - nChange));\n@@ -108,7 +108,7 @@ QList<TransactionRecord> TransactionRecord::decomposeTransaction(const CWallet *\n             //\n             // Debit\n             //\n-            int64_t nTxFee = nDebit - wtx.GetValueOut();\n+            Amount nTxFee = nDebit - wtx.GetValueOut();\n \n             for (unsigned int nOut = 0; nOut < wtx.vout.size(); nOut++)\n             {\n@@ -138,7 +138,7 @@ QList<TransactionRecord> TransactionRecord::decomposeTransaction(const CWallet *\n                     sub.address = mapValue[\"to\"];\n                 }\n \n-                int64_t nValue = txout.nValue;\n+                Amount nValue = txout.nValue;\n                 /* Add fee to first output */\n                 if (nTxFee > 0)\n                 {"
      },
      {
        "sha": "9baee1538c3084b03e690a269d2bc3d9d1930173",
        "filename": "src/qt/transactionrecord.h",
        "status": "modified",
        "additions": 4,
        "deletions": 3,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/transactionrecord.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/transactionrecord.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/transactionrecord.h?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -6,6 +6,7 @@\n #define TRANSACTIONRECORD_H\n \n #include \"uint256.h\"\n+#include \"amount.h\"\n \n #include <QList>\n #include <QString>\n@@ -94,7 +95,7 @@ class TransactionRecord\n \n     TransactionRecord(uint256 hash, qint64 time,\n                 Type type, const std::string &address,\n-                qint64 debit, qint64 credit):\n+                const Amount& debit, const Amount& credit):\n             hash(hash), time(time), type(type), address(address), debit(debit), credit(credit),\n             idx(0)\n     {\n@@ -111,8 +112,8 @@ class TransactionRecord\n     qint64 time;\n     Type type;\n     std::string address;\n-    qint64 debit;\n-    qint64 credit;\n+    Amount debit;\n+    Amount credit;\n     /**@}*/\n \n     /** Subtransaction index, for sort key */"
      },
      {
        "sha": "fc5ff7409f802ec8af3230fa9fdc18905b0fdcd4",
        "filename": "src/qt/transactiontablemodel.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/transactiontablemodel.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/transactiontablemodel.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/transactiontablemodel.cpp?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -536,7 +536,7 @@ QVariant TransactionTableModel::data(const QModelIndex &index, int role) const\n         case ToAddress:\n             return formatTxToAddress(rec, true);\n         case Amount:\n-            return rec->credit + rec->debit;\n+            return static_cast<qint64>(rec->credit + rec->debit);\n         }\n         break;\n     case Qt::ToolTipRole:\n@@ -569,7 +569,7 @@ QVariant TransactionTableModel::data(const QModelIndex &index, int role) const\n     case LabelRole:\n         return walletModel->getAddressTableModel()->labelForAddress(QString::fromStdString(rec->address));\n     case AmountRole:\n-        return rec->credit + rec->debit;\n+        return static_cast<qint64>(rec->credit + rec->debit);\n     case TxIDRole:\n         return rec->getTxID();\n     case TxHashRole:"
      },
      {
        "sha": "53e9adfd366b6764fe2b8b014484cf718ff8cf9e",
        "filename": "src/qt/transactionview.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/transactionview.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/transactionview.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/transactionview.cpp?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -281,7 +281,7 @@ void TransactionView::changedAmount(const QString &amount)\n {\n     if(!transactionProxyModel)\n         return;\n-    qint64 amount_parsed = 0;\n+    Amount amount_parsed = 0;\n     if(BitcoinUnits::parse(model->getOptionsModel()->getDisplayUnit(), amount, &amount_parsed))\n     {\n         transactionProxyModel->setMinAmount(amount_parsed);"
      },
      {
        "sha": "2aa280df80941ff62ea0c8d030b254092d9675ef",
        "filename": "src/qt/walletmodel.cpp",
        "status": "modified",
        "additions": 20,
        "deletions": 20,
        "changes": 40,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/walletmodel.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/walletmodel.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/walletmodel.cpp?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -54,11 +54,11 @@ WalletModel::~WalletModel()\n     unsubscribeFromCoreSignals();\n }\n \n-qint64 WalletModel::getBalance(const CCoinControl *coinControl) const\n+Amount WalletModel::getBalance(const CCoinControl *coinControl) const\n {\n     if (coinControl)\n     {\n-        qint64 nBalance = 0;\n+        Amount nBalance = 0;\n         std::vector<COutput> vCoins;\n         wallet->AvailableCoins(vCoins, true, coinControl);\n         BOOST_FOREACH(const COutput& out, vCoins)\n@@ -71,27 +71,27 @@ qint64 WalletModel::getBalance(const CCoinControl *coinControl) const\n     return wallet->GetBalance();\n }\n \n-qint64 WalletModel::getUnconfirmedBalance() const\n+Amount WalletModel::getUnconfirmedBalance() const\n {\n     return wallet->GetUnconfirmedBalance();\n }\n \n-qint64 WalletModel::getImmatureBalance() const\n+Amount WalletModel::getImmatureBalance() const\n {\n     return wallet->GetImmatureBalance();\n }\n \n-qint64 WalletModel::getWatchBalance() const\n+Amount WalletModel::getWatchBalance() const\n {\n     return wallet->GetWatchOnlyBalance();\n }\n \n-qint64 WalletModel::getWatchUnconfirmedBalance() const\n+Amount WalletModel::getWatchUnconfirmedBalance() const\n {\n     return wallet->GetUnconfirmedWatchOnlyBalance();\n }\n \n-qint64 WalletModel::getWatchImmatureBalance() const\n+Amount WalletModel::getWatchImmatureBalance() const\n {\n     return wallet->GetImmatureWatchOnlyBalance();\n }\n@@ -141,12 +141,12 @@ void WalletModel::pollBalanceChanged()\n \n void WalletModel::checkBalanceChanged()\n {\n-    qint64 newBalance = getBalance();\n-    qint64 newUnconfirmedBalance = getUnconfirmedBalance();\n-    qint64 newImmatureBalance = getImmatureBalance();\n-    qint64 newWatchOnlyBalance = getWatchBalance();\n-    qint64 newWatchUnconfBalance = getWatchUnconfirmedBalance();\n-    qint64 newWatchImmatureBalance = getWatchImmatureBalance();\n+    Amount newBalance = getBalance();\n+    Amount newUnconfirmedBalance = getUnconfirmedBalance();\n+    Amount newImmatureBalance = getImmatureBalance();\n+    Amount newWatchOnlyBalance = getWatchBalance();\n+    Amount newWatchUnconfBalance = getWatchUnconfirmedBalance();\n+    Amount newWatchImmatureBalance = getWatchImmatureBalance();\n \n     if(cachedBalance != newBalance || cachedUnconfirmedBalance != newUnconfirmedBalance || cachedImmatureBalance != newImmatureBalance ||\n         cachedWatchOnlyBalance != newWatchOnlyBalance || cachedWatchUnconfBalance != newWatchUnconfBalance || cachedWatchImmatureBalance != newWatchImmatureBalance)\n@@ -193,9 +193,9 @@ bool WalletModel::validateAddress(const QString &address)\n \n WalletModel::SendCoinsReturn WalletModel::prepareTransaction(WalletModelTransaction &transaction, const CCoinControl *coinControl)\n {\n-    qint64 total = 0;\n+    Amount total = 0;\n     QList<SendCoinsRecipient> recipients = transaction.getRecipients();\n-    std::vector<std::pair<CScript, int64_t> > vecSend;\n+    std::vector<std::pair<CScript, Amount> > vecSend;\n \n     if(recipients.empty())\n     {\n@@ -210,7 +210,7 @@ WalletModel::SendCoinsReturn WalletModel::prepareTransaction(WalletModelTransact\n     {\n         if (rcp.paymentRequest.IsInitialized())\n         {   // PaymentRequest...\n-            int64_t subtotal = 0;\n+            Amount subtotal = 0;\n             const payments::PaymentDetails& details = rcp.paymentRequest.getDetails();\n             for (int i = 0; i < details.outputs_size(); i++)\n             {\n@@ -219,7 +219,7 @@ WalletModel::SendCoinsReturn WalletModel::prepareTransaction(WalletModelTransact\n                 subtotal += out.amount();\n                 const unsigned char* scriptStr = (const unsigned char*)out.script().data();\n                 CScript scriptPubKey(scriptStr, scriptStr+out.script().size());\n-                vecSend.push_back(std::pair<CScript, int64_t>(scriptPubKey, out.amount()));\n+                vecSend.push_back(std::pair<CScript, Amount>(scriptPubKey, out.amount()));\n             }\n             if (subtotal <= 0)\n             {\n@@ -242,7 +242,7 @@ WalletModel::SendCoinsReturn WalletModel::prepareTransaction(WalletModelTransact\n \n             CScript scriptPubKey;\n             scriptPubKey.SetDestination(CBitcoinAddress(rcp.address.toStdString()).Get());\n-            vecSend.push_back(std::pair<CScript, int64_t>(scriptPubKey, rcp.amount));\n+            vecSend.push_back(std::pair<CScript, Amount>(scriptPubKey, rcp.amount));\n \n             total += rcp.amount;\n         }\n@@ -252,7 +252,7 @@ WalletModel::SendCoinsReturn WalletModel::prepareTransaction(WalletModelTransact\n         return DuplicateAddress;\n     }\n \n-    qint64 nBalance = getBalance(coinControl);\n+    Amount nBalance = getBalance(coinControl);\n \n     if(total > nBalance)\n     {\n@@ -263,7 +263,7 @@ WalletModel::SendCoinsReturn WalletModel::prepareTransaction(WalletModelTransact\n         LOCK2(cs_main, wallet->cs_wallet);\n \n         transaction.newPossibleKeyChange(wallet);\n-        int64_t nFeeRequired = 0;\n+        Amount nFeeRequired = 0;\n         std::string strFailReason;\n \n         CWalletTx *newTx = transaction.getTransaction();"
      },
      {
        "sha": "168e01d58d4b3ede87d6512d18b85abcdf14ebb8",
        "filename": "src/qt/walletmodel.h",
        "status": "modified",
        "additions": 16,
        "deletions": 16,
        "changes": 32,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/walletmodel.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/walletmodel.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/walletmodel.h?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -37,7 +37,7 @@ class SendCoinsRecipient\n {\n public:\n     explicit SendCoinsRecipient() : amount(0), nVersion(SendCoinsRecipient::CURRENT_VERSION) { }\n-    explicit SendCoinsRecipient(const QString &addr, const QString &label, quint64 amount, const QString &message):\n+    explicit SendCoinsRecipient(const QString &addr, const QString &label, const Amount& amount, const QString &message):\n         address(addr), label(label), amount(amount), message(message), nVersion(SendCoinsRecipient::CURRENT_VERSION) {}\n \n     // If from an insecure payment request, this is used for storing\n@@ -47,7 +47,7 @@ class SendCoinsRecipient\n     // Todo: This is a hack, should be replaced with a cleaner solution!\n     QString address;\n     QString label;\n-    qint64 amount;\n+    Amount amount;\n     // If from a payment request, this is used for storing the memo\n     QString message;\n \n@@ -125,12 +125,12 @@ class WalletModel : public QObject\n     TransactionTableModel *getTransactionTableModel();\n     RecentRequestsTableModel *getRecentRequestsTableModel();\n \n-    qint64 getBalance(const CCoinControl *coinControl = NULL) const;\n-    qint64 getUnconfirmedBalance() const;\n-    qint64 getImmatureBalance() const;\n-    qint64 getWatchBalance() const;\n-    qint64 getWatchUnconfirmedBalance() const;\n-    qint64 getWatchImmatureBalance() const;\n+    Amount getBalance(const CCoinControl *coinControl = NULL) const;\n+    Amount getUnconfirmedBalance() const;\n+    Amount getImmatureBalance() const;\n+    Amount getWatchBalance() const;\n+    Amount getWatchUnconfirmedBalance() const;\n+    Amount getWatchImmatureBalance() const;\n     int getNumTransactions() const;\n     EncryptionStatus getEncryptionStatus() const;\n     bool processingQueuedTransactions() { return fProcessingQueuedTransactions; }\n@@ -208,12 +208,12 @@ class WalletModel : public QObject\n     RecentRequestsTableModel *recentRequestsTableModel;\n \n     // Cache some values to be able to detect changes\n-    qint64 cachedBalance;\n-    qint64 cachedUnconfirmedBalance;\n-    qint64 cachedImmatureBalance;\n-    qint64 cachedWatchOnlyBalance;\n-    qint64 cachedWatchUnconfBalance;\n-    qint64 cachedWatchImmatureBalance;\n+    Amount cachedBalance;\n+    Amount cachedUnconfirmedBalance;\n+    Amount cachedImmatureBalance;\n+    Amount cachedWatchOnlyBalance;\n+    Amount cachedWatchUnconfBalance;\n+    Amount cachedWatchImmatureBalance;\n     qint64 cachedNumTransactions;\n     EncryptionStatus cachedEncryptionStatus;\n     int cachedNumBlocks;\n@@ -226,8 +226,8 @@ class WalletModel : public QObject\n \n signals:\n     // Signal that balance in wallet changed\n-    void balanceChanged(qint64 balance, qint64 unconfirmedBalance, qint64 immatureBalance,\n-                        qint64 watchOnlyBalance, qint64 watchUnconfBalance, qint64 watchImmatureBalance);\n+    void balanceChanged(const Amount& balance, const Amount& unconfirmedBalance, const Amount& immatureBalance,\n+                        const Amount& watchOnlyBalance, const Amount& watchUnconfBalance, const Amount& watchImmatureBalance);\n \n     // Number of transactions in wallet changed\n     void numTransactionsChanged(int count);"
      },
      {
        "sha": "0a35ab982d79b3a22ae50684fa616d65dd6365b9",
        "filename": "src/qt/walletmodeltransaction.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 4,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/walletmodeltransaction.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/walletmodeltransaction.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/walletmodeltransaction.cpp?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -31,19 +31,19 @@ CWalletTx *WalletModelTransaction::getTransaction()\n     return walletTransaction;\n }\n \n-qint64 WalletModelTransaction::getTransactionFee()\n+Amount WalletModelTransaction::getTransactionFee()\n {\n     return fee;\n }\n \n-void WalletModelTransaction::setTransactionFee(qint64 newFee)\n+void WalletModelTransaction::setTransactionFee(const Amount& newFee)\n {\n     fee = newFee;\n }\n \n-qint64 WalletModelTransaction::getTotalTransactionAmount()\n+Amount WalletModelTransaction::getTotalTransactionAmount()\n {\n-    qint64 totalTransactionAmount = 0;\n+    Amount totalTransactionAmount = 0;\n     foreach(const SendCoinsRecipient &rcp, recipients)\n     {\n         totalTransactionAmount += rcp.amount;"
      },
      {
        "sha": "b891e834d2c6ca6d3b32cf197cc84e9fd42141a1",
        "filename": "src/qt/walletmodeltransaction.h",
        "status": "modified",
        "additions": 4,
        "deletions": 4,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/walletmodeltransaction.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/walletmodeltransaction.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/walletmodeltransaction.h?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -26,10 +26,10 @@ class WalletModelTransaction\n \n     CWalletTx *getTransaction();\n \n-    void setTransactionFee(qint64 newFee);\n-    qint64 getTransactionFee();\n+    void setTransactionFee(const Amount& newFee);\n+    Amount getTransactionFee();\n \n-    qint64 getTotalTransactionAmount();\n+    Amount getTotalTransactionAmount();\n \n     void newPossibleKeyChange(CWallet *wallet);\n     CReserveKey *getPossibleKeyChange();\n@@ -38,7 +38,7 @@ class WalletModelTransaction\n     const QList<SendCoinsRecipient> recipients;\n     CWalletTx *walletTransaction;\n     CReserveKey *keyChange;\n-    qint64 fee;\n+    Amount fee;\n };\n \n #endif // WALLETMODELTRANSACTION_H"
      },
      {
        "sha": "7159800194aad0401ae12a5ae81f9eab978f04bd",
        "filename": "src/qt/walletview.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/walletview.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/walletview.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/walletview.cpp?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -92,7 +92,7 @@ void WalletView::setBitcoinGUI(BitcoinGUI *gui)\n         connect(this, SIGNAL(encryptionStatusChanged(int)), gui, SLOT(setEncryptionStatus(int)));\n \n         // Pass through transaction notifications\n-        connect(this, SIGNAL(incomingTransaction(QString,int,qint64,QString,QString)), gui, SLOT(incomingTransaction(QString,int,qint64,QString,QString)));\n+        connect(this, SIGNAL(incomingTransaction(QString,int,const Amount&,QString,QString)), gui, SLOT(incomingTransaction(QString,int,const Amount&,QString,QString)));\n     }\n }\n "
      },
      {
        "sha": "37c0ab25119d9915c9a074c9f877664c5e0940ff",
        "filename": "src/qt/walletview.h",
        "status": "modified",
        "additions": 3,
        "deletions": 1,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/walletview.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/qt/walletview.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/walletview.h?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -5,6 +5,8 @@\n #ifndef WALLETVIEW_H\n #define WALLETVIEW_H\n \n+#include \"amount.h\"\n+\n #include <QStackedWidget>\n \n class BitcoinGUI;\n@@ -111,7 +113,7 @@ public slots:\n     /** Encryption status of wallet changed */\n     void encryptionStatusChanged(int status);\n     /** Notify that a new transaction appeared */\n-    void incomingTransaction(const QString& date, int unit, qint64 amount, const QString& type, const QString& address);\n+    void incomingTransaction(const QString& date, int unit, const Amount& amount, const QString& type, const QString& address);\n };\n \n #endif // WALLETVIEW_H"
      },
      {
        "sha": "2bd3996bea6b548b75f1e403a4eae6b11326b71a",
        "filename": "src/rpcrawtransaction.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/rpcrawtransaction.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/rpcrawtransaction.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpcrawtransaction.cpp?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -266,7 +266,7 @@ Value listunspent(const Array& params, bool fHelp)\n                 continue;\n         }\n \n-        int64_t nValue = out.tx->vout[out.i].nValue;\n+        Amount nValue = out.tx->vout[out.i].nValue;\n         const CScript& pk = out.tx->vout[out.i].scriptPubKey;\n         Object entry;\n         entry.push_back(Pair(\"txid\", out.tx->GetHash().GetHex()));\n@@ -365,7 +365,7 @@ Value createrawtransaction(const Array& params, bool fHelp)\n \n         CScript scriptPubKey;\n         scriptPubKey.SetDestination(address.Get());\n-        int64_t nAmount = AmountFromValue(s.value_);\n+        Amount nAmount = AmountFromValue(s.value_);\n \n         CTxOut out(nAmount, scriptPubKey);\n         rawTx.vout.push_back(out);"
      },
      {
        "sha": "1459e16dc14ac0bfbee9505c53bd011c49a122c8",
        "filename": "src/rpcserver.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/rpcserver.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/rpcserver.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpcserver.cpp?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -82,18 +82,18 @@ void RPCTypeCheck(const Object& o,\n     }\n }\n \n-int64_t AmountFromValue(const Value& value)\n+Amount AmountFromValue(const Value& value)\n {\n     double dAmount = value.get_real();\n     if (dAmount <= 0.0 || dAmount > 21000000.0)\n         throw JSONRPCError(RPC_TYPE_ERROR, \"Invalid amount\");\n-    int64_t nAmount = roundint64(dAmount * COIN);\n+    Amount nAmount = roundint64(dAmount * COIN);\n     if (!MoneyRange(nAmount))\n         throw JSONRPCError(RPC_TYPE_ERROR, \"Invalid amount\");\n     return nAmount;\n }\n \n-Value ValueFromAmount(int64_t amount)\n+Value ValueFromAmount(const Amount& amount)\n {\n     return (double)amount / (double)COIN;\n }"
      },
      {
        "sha": "f03f54317aaa341645ffb2af9fa1d02f7fc79aa4",
        "filename": "src/rpcserver.h",
        "status": "modified",
        "additions": 3,
        "deletions": 2,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/rpcserver.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/rpcserver.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpcserver.h?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -8,6 +8,7 @@\n \n #include \"uint256.h\"\n #include \"rpcprotocol.h\"\n+#include \"amount.h\"\n \n #include <list>\n #include <map>\n@@ -115,8 +116,8 @@ extern void InitRPCMining();\n extern void ShutdownRPCMining();\n \n extern int64_t nWalletUnlockTime;\n-extern int64_t AmountFromValue(const json_spirit::Value& value);\n-extern json_spirit::Value ValueFromAmount(int64_t amount);\n+extern Amount AmountFromValue(const json_spirit::Value& value);\n+extern json_spirit::Value ValueFromAmount(const Amount& amount);\n extern double GetDifficulty(const CBlockIndex* blockindex = NULL);\n extern std::string HelpRequiringPassphrase();\n extern std::string HelpExampleCli(std::string methodname, std::string args);"
      },
      {
        "sha": "6ec4433d15669ee3ba308fc711c3ba642f415c29",
        "filename": "src/rpcwallet.cpp",
        "status": "modified",
        "additions": 31,
        "deletions": 31,
        "changes": 62,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/rpcwallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/rpcwallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpcwallet.cpp?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -332,7 +332,7 @@ Value sendtoaddress(const Array& params, bool fHelp)\n         throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid Bitcoin address\");\n \n     // Amount\n-    int64_t nAmount = AmountFromValue(params[1]);\n+    Amount nAmount = AmountFromValue(params[1]);\n \n     // Wallet comments\n     CWalletTx wtx;\n@@ -376,7 +376,7 @@ Value listaddressgroupings(const Array& params, bool fHelp)\n         );\n \n     Array jsonGroupings;\n-    map<CTxDestination, int64_t> balances = pwalletMain->GetAddressBalances();\n+    map<CTxDestination, Amount> balances = pwalletMain->GetAddressBalances();\n     BOOST_FOREACH(set<CTxDestination> grouping, pwalletMain->GetAddressGroupings())\n     {\n         Array jsonGrouping;\n@@ -485,7 +485,7 @@ Value getreceivedbyaddress(const Array& params, bool fHelp)\n         nMinDepth = params[1].get_int();\n \n     // Tally\n-    int64_t nAmount = 0;\n+    Amount nAmount = 0;\n     for (map<uint256, CWalletTx>::iterator it = pwalletMain->mapWallet.begin(); it != pwalletMain->mapWallet.end(); ++it)\n     {\n         const CWalletTx& wtx = (*it).second;\n@@ -534,7 +534,7 @@ Value getreceivedbyaccount(const Array& params, bool fHelp)\n     set<CTxDestination> setAddress = pwalletMain->GetAccountAddresses(strAccount);\n \n     // Tally\n-    int64_t nAmount = 0;\n+    Amount nAmount = 0;\n     for (map<uint256, CWalletTx>::iterator it = pwalletMain->mapWallet.begin(); it != pwalletMain->mapWallet.end(); ++it)\n     {\n         const CWalletTx& wtx = (*it).second;\n@@ -554,9 +554,9 @@ Value getreceivedbyaccount(const Array& params, bool fHelp)\n }\n \n \n-int64_t GetAccountBalance(CWalletDB& walletdb, const string& strAccount, int nMinDepth, const isminefilter& filter)\n+Amount GetAccountBalance(CWalletDB& walletdb, const string& strAccount, int nMinDepth, const isminefilter& filter)\n {\n-    int64_t nBalance = 0;\n+    Amount nBalance = 0;\n \n     // Tally wallet transactions\n     for (map<uint256, CWalletTx>::iterator it = pwalletMain->mapWallet.begin(); it != pwalletMain->mapWallet.end(); ++it)\n@@ -565,7 +565,7 @@ int64_t GetAccountBalance(CWalletDB& walletdb, const string& strAccount, int nMi\n         if (!IsFinalTx(wtx) || wtx.GetBlocksToMaturity() > 0 || wtx.GetDepthInMainChain() < 0)\n             continue;\n \n-        int64_t nReceived, nSent, nFee;\n+        Amount nReceived, nSent, nFee;\n         wtx.GetAccountAmounts(strAccount, nReceived, nSent, nFee, filter);\n \n         if (nReceived != 0 && wtx.GetDepthInMainChain() >= nMinDepth)\n@@ -579,7 +579,7 @@ int64_t GetAccountBalance(CWalletDB& walletdb, const string& strAccount, int nMi\n     return nBalance;\n }\n \n-int64_t GetAccountBalance(const string& strAccount, int nMinDepth, const isminefilter& filter)\n+Amount GetAccountBalance(const string& strAccount, int nMinDepth, const isminefilter& filter)\n {\n     CWalletDB walletdb(pwalletMain->strWalletFile);\n     return GetAccountBalance(walletdb, strAccount, nMinDepth, filter);\n@@ -629,14 +629,14 @@ Value getbalance(const Array& params, bool fHelp)\n         // Calculate total balance a different way from GetBalance()\n         // (GetBalance() sums up all unspent TxOuts)\n         // getbalance and getbalance '*' 0 should return the same number\n-        int64_t nBalance = 0;\n+        Amount nBalance = 0;\n         for (map<uint256, CWalletTx>::iterator it = pwalletMain->mapWallet.begin(); it != pwalletMain->mapWallet.end(); ++it)\n         {\n             const CWalletTx& wtx = (*it).second;\n             if (!wtx.IsTrusted() || wtx.GetBlocksToMaturity() > 0)\n                 continue;\n \n-            int64_t allFee;\n+            Amount allFee;\n             string strSentAccount;\n             list<COutputEntry> listReceived;\n             list<COutputEntry> listSent;\n@@ -655,7 +655,7 @@ Value getbalance(const Array& params, bool fHelp)\n \n     string strAccount = AccountFromValue(params[0]);\n \n-    int64_t nBalance = GetAccountBalance(strAccount, nMinDepth, filter);\n+    Amount nBalance = GetAccountBalance(strAccount, nMinDepth, filter);\n \n     return ValueFromAmount(nBalance);\n }\n@@ -694,7 +694,7 @@ Value movecmd(const Array& params, bool fHelp)\n \n     string strFrom = AccountFromValue(params[0]);\n     string strTo = AccountFromValue(params[1]);\n-    int64_t nAmount = AmountFromValue(params[2]);\n+    Amount nAmount = AmountFromValue(params[2]);\n     if (params.size() > 3)\n         // unused parameter, used to be nMinDepth, keep type-checking it though\n         (void)params[3].get_int();\n@@ -768,7 +768,7 @@ Value sendfrom(const Array& params, bool fHelp)\n     CBitcoinAddress address(params[1].get_str());\n     if (!address.IsValid())\n         throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid Bitcoin address\");\n-    int64_t nAmount = AmountFromValue(params[2]);\n+    Amount nAmount = AmountFromValue(params[2]);\n     int nMinDepth = 1;\n     if (params.size() > 3)\n         nMinDepth = params[3].get_int();\n@@ -783,7 +783,7 @@ Value sendfrom(const Array& params, bool fHelp)\n     EnsureWalletIsUnlocked();\n \n     // Check funds\n-    int64_t nBalance = GetAccountBalance(strAccount, nMinDepth, ISMINE_SPENDABLE);\n+    Amount nBalance = GetAccountBalance(strAccount, nMinDepth, ISMINE_SPENDABLE);\n     if (nAmount > nBalance)\n         throw JSONRPCError(RPC_WALLET_INSUFFICIENT_FUNDS, \"Account has insufficient funds\");\n \n@@ -836,9 +836,9 @@ Value sendmany(const Array& params, bool fHelp)\n         wtx.mapValue[\"comment\"] = params[3].get_str();\n \n     set<CBitcoinAddress> setAddress;\n-    vector<pair<CScript, int64_t> > vecSend;\n+    vector<pair<CScript, Amount> > vecSend;\n \n-    int64_t totalAmount = 0;\n+    Amount totalAmount = 0;\n     BOOST_FOREACH(const Pair& s, sendTo)\n     {\n         CBitcoinAddress address(s.name_);\n@@ -851,7 +851,7 @@ Value sendmany(const Array& params, bool fHelp)\n \n         CScript scriptPubKey;\n         scriptPubKey.SetDestination(address.Get());\n-        int64_t nAmount = AmountFromValue(s.value_);\n+        Amount nAmount = AmountFromValue(s.value_);\n         totalAmount += nAmount;\n \n         vecSend.push_back(make_pair(scriptPubKey, nAmount));\n@@ -860,13 +860,13 @@ Value sendmany(const Array& params, bool fHelp)\n     EnsureWalletIsUnlocked();\n \n     // Check funds\n-    int64_t nBalance = GetAccountBalance(strAccount, nMinDepth, ISMINE_SPENDABLE);\n+    Amount nBalance = GetAccountBalance(strAccount, nMinDepth, ISMINE_SPENDABLE);\n     if (totalAmount > nBalance)\n         throw JSONRPCError(RPC_WALLET_INSUFFICIENT_FUNDS, \"Account has insufficient funds\");\n \n     // Send\n     CReserveKey keyChange(pwalletMain);\n-    int64_t nFeeRequired = 0;\n+    Amount nFeeRequired = 0;\n     string strFailReason;\n     bool fCreated = pwalletMain->CreateTransaction(vecSend, wtx, keyChange, nFeeRequired, strFailReason);\n     if (!fCreated)\n@@ -926,7 +926,7 @@ Value addmultisigaddress(const Array& params, bool fHelp)\n \n struct tallyitem\n {\n-    int64_t nAmount;\n+    Amount nAmount;\n     int nConf;\n     vector<uint256> txids;\n     bool fIsWatchonly;\n@@ -998,7 +998,7 @@ Value ListReceived(const Array& params, bool fByAccounts)\n         if (it == mapTally.end() && !fIncludeEmpty)\n             continue;\n \n-        int64_t nAmount = 0;\n+        Amount nAmount = 0;\n         int nConf = std::numeric_limits<int>::max();\n         bool fIsWatchonly = false;\n         if (it != mapTally.end())\n@@ -1041,7 +1041,7 @@ Value ListReceived(const Array& params, bool fByAccounts)\n     {\n         for (map<string, tallyitem>::iterator it = mapAccountTally.begin(); it != mapAccountTally.end(); ++it)\n         {\n-            int64_t nAmount = (*it).second.nAmount;\n+            Amount nAmount = (*it).second.nAmount;\n             int nConf = (*it).second.nConf;\n             Object obj;\n             if((*it).second.fIsWatchonly)\n@@ -1128,7 +1128,7 @@ static void MaybePushAddress(Object & entry, const CTxDestination &dest)\n \n void ListTransactions(const CWalletTx& wtx, const string& strAccount, int nMinDepth, bool fLong, Array& ret, const isminefilter& filter)\n {\n-    int64_t nFee;\n+    Amount nFee;\n     string strSentAccount;\n     list<COutputEntry> listReceived;\n     list<COutputEntry> listSent;\n@@ -1358,7 +1358,7 @@ Value listaccounts(const Array& params, bool fHelp)\n         if(params[1].get_bool())\n             includeWatchonly = includeWatchonly | ISMINE_WATCH_ONLY;\n \n-    map<string, int64_t> mapAccountBalances;\n+    map<string, Amount> mapAccountBalances;\n     BOOST_FOREACH(const PAIRTYPE(CTxDestination, CAddressBookData)& entry, pwalletMain->mapAddressBook) {\n         if (IsMine(*pwalletMain, entry.first) & includeWatchonly) // This address belongs to me\n             mapAccountBalances[entry.second.name] = 0;\n@@ -1367,7 +1367,7 @@ Value listaccounts(const Array& params, bool fHelp)\n     for (map<uint256, CWalletTx>::iterator it = pwalletMain->mapWallet.begin(); it != pwalletMain->mapWallet.end(); ++it)\n     {\n         const CWalletTx& wtx = (*it).second;\n-        int64_t nFee;\n+        Amount nFee;\n         string strSentAccount;\n         list<COutputEntry> listReceived;\n         list<COutputEntry> listSent;\n@@ -1394,7 +1394,7 @@ Value listaccounts(const Array& params, bool fHelp)\n         mapAccountBalances[entry.strAccount] += entry.nCreditDebit;\n \n     Object ret;\n-    BOOST_FOREACH(const PAIRTYPE(string, int64_t)& accountBalance, mapAccountBalances) {\n+    BOOST_FOREACH(const PAIRTYPE(string, Amount)& accountBalance, mapAccountBalances) {\n         ret.push_back(Pair(accountBalance.first, ValueFromAmount(accountBalance.second)));\n     }\n     return ret;\n@@ -1536,10 +1536,10 @@ Value gettransaction(const Array& params, bool fHelp)\n         throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid or non-wallet transaction id\");\n     const CWalletTx& wtx = pwalletMain->mapWallet[hash];\n \n-    int64_t nCredit = wtx.GetCredit(filter);\n-    int64_t nDebit = wtx.GetDebit(filter);\n-    int64_t nNet = nCredit - nDebit;\n-    int64_t nFee = (wtx.IsFromMe(filter) ? wtx.GetValueOut() - nDebit : 0);\n+    Amount nCredit = wtx.GetCredit(filter);\n+    Amount nDebit = wtx.GetDebit(filter);\n+    Amount nNet = nCredit - nDebit;\n+    Amount nFee = (wtx.IsFromMe(filter) ? wtx.GetValueOut() - nDebit : 0);\n \n     entry.push_back(Pair(\"amount\", ValueFromAmount(nNet - nFee)));\n     if (wtx.IsFromMe(filter))\n@@ -1939,7 +1939,7 @@ Value settxfee(const Array& params, bool fHelp)\n         );\n \n     // Amount\n-    int64_t nAmount = 0;\n+    Amount nAmount = 0;\n     if (params[0].get_real() != 0.0)\n         nAmount = AmountFromValue(params[0]);        // rejects 0.0 amounts\n "
      },
      {
        "sha": "90bb4d92f8f275e3e0cdf38db786bf4fb8c5a3e8",
        "filename": "src/test/accounting_tests.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/test/accounting_tests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/test/accounting_tests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/accounting_tests.cpp?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -15,7 +15,7 @@ extern CWallet* pwalletMain;\n BOOST_AUTO_TEST_SUITE(accounting_tests)\n \n static void\n-GetResults(CWalletDB& walletdb, std::map<int64_t, CAccountingEntry>& results)\n+GetResults(CWalletDB& walletdb, std::map<Amount, CAccountingEntry>& results)\n {\n     std::list<CAccountingEntry> aes;\n \n@@ -34,7 +34,7 @@ BOOST_AUTO_TEST_CASE(acc_orderupgrade)\n     std::vector<CWalletTx*> vpwtx;\n     CWalletTx wtx;\n     CAccountingEntry ae;\n-    std::map<int64_t, CAccountingEntry> results;\n+    std::map<Amount, CAccountingEntry> results;\n \n     LOCK(pwalletMain->cs_wallet);\n "
      },
      {
        "sha": "0c0f9c351a7650d6c5e666edb1a47f0778e70aeb",
        "filename": "src/test/main_tests.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/test/main_tests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/test/main_tests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/main_tests.cpp?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -11,9 +11,9 @@ BOOST_AUTO_TEST_SUITE(main_tests)\n \n BOOST_AUTO_TEST_CASE(subsidy_limit_test)\n {\n-    uint64_t nSum = 0;\n+    Amount nSum = 0;\n     for (int nHeight = 0; nHeight < 14000000; nHeight += 1000) {\n-        uint64_t nSubsidy = GetBlockValue(nHeight, 0);\n+        Amount nSubsidy = GetBlockValue(nHeight, 0);\n         BOOST_CHECK(nSubsidy <= 50 * COIN);\n         nSum += nSubsidy * 1000;\n         BOOST_CHECK(MoneyRange(nSum));"
      },
      {
        "sha": "5aafc2e346e229cf4671a136d8b6c7b286f3197f",
        "filename": "src/test/util_tests.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/test/util_tests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/test/util_tests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/util_tests.cpp?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -193,7 +193,7 @@ BOOST_AUTO_TEST_CASE(util_FormatMoney)\n \n BOOST_AUTO_TEST_CASE(util_ParseMoney)\n {\n-    int64_t ret = 0;\n+    Amount ret = 0;\n     BOOST_CHECK(ParseMoney(\"0.0\", ret));\n     BOOST_CHECK_EQUAL(ret, 0);\n "
      },
      {
        "sha": "70d68685903a6302ea421eb4887ebc6bb36b5e4a",
        "filename": "src/test/wallet_tests.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/test/wallet_tests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/test/wallet_tests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/wallet_tests.cpp?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -28,7 +28,7 @@ BOOST_AUTO_TEST_SUITE(wallet_tests)\n static CWallet wallet;\n static vector<COutput> vCoins;\n \n-static void add_coin(int64_t nValue, int nAge = 6*24, bool fIsFromMe = false, int nInput=0)\n+static void add_coin(const Amount& nValue, int nAge = 6*24, bool fIsFromMe = false, int nInput=0)\n {\n     static int nextLockTime = 0;\n     CMutableTransaction tx;\n@@ -66,7 +66,7 @@ static bool equal_sets(CoinSet a, CoinSet b)\n BOOST_AUTO_TEST_CASE(coin_selection_tests)\n {\n     CoinSet setCoinsRet, setCoinsRet2;\n-    int64_t nValueRet;\n+    Amount nValueRet;\n \n     LOCK(wallet.cs_wallet);\n "
      },
      {
        "sha": "4b6e120aab5543c6e0fdce51150e290130bf0c29",
        "filename": "src/txdb.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/txdb.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/txdb.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/txdb.cpp?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -109,7 +109,7 @@ bool CCoinsViewDB::GetStats(CCoinsStats &stats) {\n     CHashWriter ss(SER_GETHASH, PROTOCOL_VERSION);\n     stats.hashBlock = GetBestBlock();\n     ss << stats.hashBlock;\n-    int64_t nTotalAmount = 0;\n+    Amount nTotalAmount = 0;\n     while (pcursor->Valid()) {\n         boost::this_thread::interruption_point();\n         try {"
      },
      {
        "sha": "453ba67845770c1cdebb20ddcfef9c7ef8f3ad45",
        "filename": "src/txmempool.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/txmempool.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/txmempool.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/txmempool.cpp?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -15,7 +15,7 @@ CTxMemPoolEntry::CTxMemPoolEntry()\n     nHeight = MEMPOOL_HEIGHT;\n }\n \n-CTxMemPoolEntry::CTxMemPoolEntry(const CTransaction& _tx, int64_t _nFee,\n+CTxMemPoolEntry::CTxMemPoolEntry(const CTransaction& _tx, const Amount& _nFee,\n                                  int64_t _nTime, double _dPriority,\n                                  unsigned int _nHeight):\n     tx(_tx), nFee(_nFee), nTime(_nTime), dPriority(_dPriority), nHeight(_nHeight)\n@@ -31,7 +31,7 @@ CTxMemPoolEntry::CTxMemPoolEntry(const CTxMemPoolEntry& other)\n double\n CTxMemPoolEntry::GetPriority(unsigned int currentHeight) const\n {\n-    int64_t nValueIn = tx.GetValueOut()+nFee;\n+    Amount nValueIn = tx.GetValueOut()+nFee;\n     double deltaPriority = ((double)(currentHeight-nHeight)*nValueIn)/nTxSize;\n     double dResult = dPriority + deltaPriority;\n     return dResult;"
      },
      {
        "sha": "35438a356d8c17359422b46e3d6c327808e52aa7",
        "filename": "src/txmempool.h",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/txmempool.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/txmempool.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/txmempool.h?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -28,21 +28,21 @@ class CTxMemPoolEntry\n {\n private:\n     CTransaction tx;\n-    int64_t nFee; // Cached to avoid expensive parent-transaction lookups\n+    Amount nFee; // Cached to avoid expensive parent-transaction lookups\n     size_t nTxSize; // ... and avoid recomputing tx size\n     int64_t nTime; // Local time when entering the mempool\n     double dPriority; // Priority when entering the mempool\n     unsigned int nHeight; // Chain height when entering the mempool\n \n public:\n-    CTxMemPoolEntry(const CTransaction& _tx, int64_t _nFee,\n+    CTxMemPoolEntry(const CTransaction& _tx, const Amount& _nFee,\n                     int64_t _nTime, double _dPriority, unsigned int _nHeight);\n     CTxMemPoolEntry();\n     CTxMemPoolEntry(const CTxMemPoolEntry& other);\n \n     const CTransaction& GetTx() const { return this->tx; }\n     double GetPriority(unsigned int currentHeight) const;\n-    int64_t GetFee() const { return nFee; }\n+    Amount GetFee() const { return nFee; }\n     size_t GetTxSize() const { return nTxSize; }\n     int64_t GetTime() const { return nTime; }\n     unsigned int GetHeight() const { return nHeight; }"
      },
      {
        "sha": "521fe2a22a95d3c01b7f370b9595b8bcbef7b5b0",
        "filename": "src/util.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 4,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/util.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/util.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/util.cpp?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -237,7 +237,7 @@ int LogPrintStr(const std::string &str)\n     return ret;\n }\n \n-string FormatMoney(int64_t n, bool fPlus)\n+string FormatMoney(const Amount& n, bool fPlus)\n {\n     // Note: not using straight sprintf here because we do NOT want\n     // localized number formatting.\n@@ -261,12 +261,12 @@ string FormatMoney(int64_t n, bool fPlus)\n }\n \n \n-bool ParseMoney(const string& str, int64_t& nRet)\n+bool ParseMoney(const string& str, Amount& nRet)\n {\n     return ParseMoney(str.c_str(), nRet);\n }\n \n-bool ParseMoney(const char* pszIn, int64_t& nRet)\n+bool ParseMoney(const char* pszIn, Amount& nRet)\n {\n     string strWhole;\n     int64_t nUnits = 0;\n@@ -300,7 +300,7 @@ bool ParseMoney(const char* pszIn, int64_t& nRet)\n     if (nUnits < 0 || nUnits > COIN)\n         return false;\n     int64_t nWhole = atoi64(strWhole);\n-    int64_t nValue = nWhole*COIN + nUnits;\n+    Amount nValue = nWhole*COIN + nUnits;\n \n     nRet = nValue;\n     return true;"
      },
      {
        "sha": "8c226e93de84ecfe15a300bcc4dc5629a32ad0be",
        "filename": "src/util.h",
        "status": "modified",
        "additions": 4,
        "deletions": 3,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/util.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/util.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/util.h?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -11,6 +11,7 @@\n #endif\n \n #include \"compat.h\"\n+#include \"amount.h\"\n #include \"serialize.h\"\n #include \"tinyformat.h\"\n \n@@ -147,9 +148,9 @@ static inline bool error(const char* format)\n }\n \n void PrintExceptionContinue(std::exception* pex, const char* pszThread);\n-std::string FormatMoney(int64_t n, bool fPlus=false);\n-bool ParseMoney(const std::string& str, int64_t& nRet);\n-bool ParseMoney(const char* pszIn, int64_t& nRet);\n+std::string FormatMoney(const Amount& n, bool fPlus=false);\n+bool ParseMoney(const std::string& str, Amount& nRet);\n+bool ParseMoney(const char* pszIn, Amount& nRet);\n std::string SanitizeString(const std::string& str);\n std::vector<unsigned char> ParseHex(const char* psz);\n std::vector<unsigned char> ParseHex(const std::string& str);"
      },
      {
        "sha": "532734b26925baa4d6813b5657a56a96ae4df3d2",
        "filename": "src/wallet.cpp",
        "status": "modified",
        "additions": 54,
        "deletions": 54,
        "changes": 108,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/wallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/wallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet.cpp?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -30,8 +30,8 @@ CFeeRate CWallet::minTxFee = CFeeRate(10000);  // Override with -mintxfee\n \n struct CompareValueOnly\n {\n-    bool operator()(const pair<int64_t, pair<const CWalletTx*, unsigned int> >& t1,\n-                    const pair<int64_t, pair<const CWalletTx*, unsigned int> >& t2) const\n+    bool operator()(const pair<Amount, pair<const CWalletTx*, unsigned int> >& t1,\n+                    const pair<Amount, pair<const CWalletTx*, unsigned int> >& t2) const\n     {\n         return t1.first < t2.first;\n     }\n@@ -686,7 +686,7 @@ isminetype CWallet::IsMine(const CTxIn &txin) const\n     return ISMINE_NO;\n }\n \n-int64_t CWallet::GetDebit(const CTxIn &txin, const isminefilter& filter) const\n+Amount CWallet::GetDebit(const CTxIn &txin, const isminefilter& filter) const\n {\n     {\n         LOCK(cs_wallet);\n@@ -770,18 +770,18 @@ int CWalletTx::GetRequestCount() const\n }\n \n void CWalletTx::GetAmounts(list<COutputEntry>& listReceived,\n-                           list<COutputEntry>& listSent, int64_t& nFee, string& strSentAccount, const isminefilter& filter) const\n+                           list<COutputEntry>& listSent, Amount& nFee, string& strSentAccount, const isminefilter& filter) const\n {\n     nFee = 0;\n     listReceived.clear();\n     listSent.clear();\n     strSentAccount = strFromAccount;\n \n     // Compute fee:\n-    int64_t nDebit = GetDebit(filter);\n+    Amount nDebit = GetDebit(filter);\n     if (nDebit > 0) // debit>0 means we signed/sent this transaction\n     {\n-        int64_t nValueOut = GetValueOut();\n+        Amount nValueOut = GetValueOut();\n         nFee = nDebit - nValueOut;\n     }\n \n@@ -824,12 +824,12 @@ void CWalletTx::GetAmounts(list<COutputEntry>& listReceived,\n \n }\n \n-void CWalletTx::GetAccountAmounts(const string& strAccount, int64_t& nReceived,\n-                                  int64_t& nSent, int64_t& nFee, const isminefilter& filter) const\n+void CWalletTx::GetAccountAmounts(const string& strAccount, Amount& nReceived,\n+                                  Amount& nSent, Amount& nFee, const isminefilter& filter) const\n {\n     nReceived = nSent = nFee = 0;\n \n-    int64_t allFee;\n+    Amount allFee;\n     string strSentAccount;\n     list<COutputEntry> listReceived;\n     list<COutputEntry> listSent;\n@@ -1000,9 +1000,9 @@ void CWallet::ResendWalletTransactions()\n //\n \n \n-int64_t CWallet::GetBalance() const\n+Amount CWallet::GetBalance() const\n {\n-    int64_t nTotal = 0;\n+    Amount nTotal = 0;\n     {\n         LOCK2(cs_main, cs_wallet);\n         for (map<uint256, CWalletTx>::const_iterator it = mapWallet.begin(); it != mapWallet.end(); ++it)\n@@ -1016,9 +1016,9 @@ int64_t CWallet::GetBalance() const\n     return nTotal;\n }\n \n-int64_t CWallet::GetUnconfirmedBalance() const\n+Amount CWallet::GetUnconfirmedBalance() const\n {\n-    int64_t nTotal = 0;\n+    Amount nTotal = 0;\n     {\n         LOCK2(cs_main, cs_wallet);\n         for (map<uint256, CWalletTx>::const_iterator it = mapWallet.begin(); it != mapWallet.end(); ++it)\n@@ -1031,9 +1031,9 @@ int64_t CWallet::GetUnconfirmedBalance() const\n     return nTotal;\n }\n \n-int64_t CWallet::GetImmatureBalance() const\n+Amount CWallet::GetImmatureBalance() const\n {\n-    int64_t nTotal = 0;\n+    Amount nTotal = 0;\n     {\n         LOCK2(cs_main, cs_wallet);\n         for (map<uint256, CWalletTx>::const_iterator it = mapWallet.begin(); it != mapWallet.end(); ++it)\n@@ -1045,9 +1045,9 @@ int64_t CWallet::GetImmatureBalance() const\n     return nTotal;\n }\n \n-int64_t CWallet::GetWatchOnlyBalance() const\n+Amount CWallet::GetWatchOnlyBalance() const\n {\n-    int64_t nTotal = 0;\n+    Amount nTotal = 0;\n     {\n         LOCK2(cs_main, cs_wallet);\n         for (map<uint256, CWalletTx>::const_iterator it = mapWallet.begin(); it != mapWallet.end(); ++it)\n@@ -1061,9 +1061,9 @@ int64_t CWallet::GetWatchOnlyBalance() const\n     return nTotal;\n }\n \n-int64_t CWallet::GetUnconfirmedWatchOnlyBalance() const\n+Amount CWallet::GetUnconfirmedWatchOnlyBalance() const\n {\n-    int64_t nTotal = 0;\n+    Amount nTotal = 0;\n     {\n         LOCK2(cs_main, cs_wallet);\n         for (map<uint256, CWalletTx>::const_iterator it = mapWallet.begin(); it != mapWallet.end(); ++it)\n@@ -1076,9 +1076,9 @@ int64_t CWallet::GetUnconfirmedWatchOnlyBalance() const\n     return nTotal;\n }\n \n-int64_t CWallet::GetImmatureWatchOnlyBalance() const\n+Amount CWallet::GetImmatureWatchOnlyBalance() const\n {\n-    int64_t nTotal = 0;\n+    Amount nTotal = 0;\n     {\n         LOCK2(cs_main, cs_wallet);\n         for (map<uint256, CWalletTx>::const_iterator it = mapWallet.begin(); it != mapWallet.end(); ++it)\n@@ -1126,8 +1126,8 @@ void CWallet::AvailableCoins(vector<COutput>& vCoins, bool fOnlyConfirmed, const\n     }\n }\n \n-static void ApproximateBestSubset(vector<pair<int64_t, pair<const CWalletTx*,unsigned int> > >vValue, int64_t nTotalLower, int64_t nTargetValue,\n-                                  vector<char>& vfBest, int64_t& nBest, int iterations = 1000)\n+static void ApproximateBestSubset(vector<pair<Amount, pair<const CWalletTx*,unsigned int> > >vValue, const Amount& nTotalLower, const Amount& nTargetValue,\n+                                  vector<char>& vfBest, Amount& nBest, int iterations = 1000)\n {\n     vector<char> vfIncluded;\n \n@@ -1139,7 +1139,7 @@ static void ApproximateBestSubset(vector<pair<int64_t, pair<const CWalletTx*,uns\n     for (int nRep = 0; nRep < iterations && nBest != nTargetValue; nRep++)\n     {\n         vfIncluded.assign(vValue.size(), false);\n-        int64_t nTotal = 0;\n+        Amount nTotal = 0;\n         bool fReachedTarget = false;\n         for (int nPass = 0; nPass < 2 && !fReachedTarget; nPass++)\n         {\n@@ -1172,18 +1172,18 @@ static void ApproximateBestSubset(vector<pair<int64_t, pair<const CWalletTx*,uns\n     }\n }\n \n-bool CWallet::SelectCoinsMinConf(int64_t nTargetValue, int nConfMine, int nConfTheirs, vector<COutput> vCoins,\n-                                 set<pair<const CWalletTx*,unsigned int> >& setCoinsRet, int64_t& nValueRet) const\n+bool CWallet::SelectCoinsMinConf(const Amount& nTargetValue, int nConfMine, int nConfTheirs, vector<COutput> vCoins,\n+                                 set<pair<const CWalletTx*,unsigned int> >& setCoinsRet, Amount& nValueRet) const\n {\n     setCoinsRet.clear();\n     nValueRet = 0;\n \n     // List of values less than target\n-    pair<int64_t, pair<const CWalletTx*,unsigned int> > coinLowestLarger;\n-    coinLowestLarger.first = std::numeric_limits<int64_t>::max();\n+    pair<Amount, pair<const CWalletTx*,unsigned int> > coinLowestLarger;\n+    coinLowestLarger.first = std::numeric_limits<Amount>::max();\n     coinLowestLarger.second.first = NULL;\n-    vector<pair<int64_t, pair<const CWalletTx*,unsigned int> > > vValue;\n-    int64_t nTotalLower = 0;\n+    vector<pair<Amount, pair<const CWalletTx*,unsigned int> > > vValue;\n+    Amount nTotalLower = 0;\n \n     random_shuffle(vCoins.begin(), vCoins.end(), GetRandInt);\n \n@@ -1198,9 +1198,9 @@ bool CWallet::SelectCoinsMinConf(int64_t nTargetValue, int nConfMine, int nConfT\n             continue;\n \n         int i = output.i;\n-        int64_t n = pcoin->vout[i].nValue;\n+        Amount n = pcoin->vout[i].nValue;\n \n-        pair<int64_t,pair<const CWalletTx*,unsigned int> > coin = make_pair(n,make_pair(pcoin, i));\n+        pair<Amount,pair<const CWalletTx*,unsigned int> > coin = make_pair(n,make_pair(pcoin, i));\n \n         if (n == nTargetValue)\n         {\n@@ -1241,7 +1241,7 @@ bool CWallet::SelectCoinsMinConf(int64_t nTargetValue, int nConfMine, int nConfT\n     // Solve subset sum by stochastic approximation\n     sort(vValue.rbegin(), vValue.rend(), CompareValueOnly());\n     vector<char> vfBest;\n-    int64_t nBest;\n+    Amount nBest;\n \n     ApproximateBestSubset(vValue, nTotalLower, nTargetValue, vfBest, nBest, 1000);\n     if (nBest != nTargetValue && nTotalLower >= nTargetValue + CENT)\n@@ -1273,7 +1273,7 @@ bool CWallet::SelectCoinsMinConf(int64_t nTargetValue, int nConfMine, int nConfT\n     return true;\n }\n \n-bool CWallet::SelectCoins(int64_t nTargetValue, set<pair<const CWalletTx*,unsigned int> >& setCoinsRet, int64_t& nValueRet, const CCoinControl* coinControl) const\n+bool CWallet::SelectCoins(const Amount& nTargetValue, set<pair<const CWalletTx*,unsigned int> >& setCoinsRet, Amount& nValueRet, const CCoinControl* coinControl) const\n {\n     vector<COutput> vCoins;\n     AvailableCoins(vCoins, true, coinControl);\n@@ -1299,11 +1299,11 @@ bool CWallet::SelectCoins(int64_t nTargetValue, set<pair<const CWalletTx*,unsign\n \n \n \n-bool CWallet::CreateTransaction(const vector<pair<CScript, int64_t> >& vecSend,\n-                                CWalletTx& wtxNew, CReserveKey& reservekey, int64_t& nFeeRet, std::string& strFailReason, const CCoinControl* coinControl)\n+bool CWallet::CreateTransaction(const vector<pair<CScript, Amount> >& vecSend,\n+                                CWalletTx& wtxNew, CReserveKey& reservekey, Amount& nFeeRet, std::string& strFailReason, const CCoinControl* coinControl)\n {\n-    int64_t nValue = 0;\n-    BOOST_FOREACH (const PAIRTYPE(CScript, int64_t)& s, vecSend)\n+    Amount nValue = 0;\n+    BOOST_FOREACH (const PAIRTYPE(CScript, Amount)& s, vecSend)\n     {\n         if (nValue < 0)\n         {\n@@ -1332,10 +1332,10 @@ bool CWallet::CreateTransaction(const vector<pair<CScript, int64_t> >& vecSend,\n                 txNew.vout.clear();\n                 wtxNew.fFromMe = true;\n \n-                int64_t nTotalValue = nValue + nFeeRet;\n+                Amount nTotalValue = nValue + nFeeRet;\n                 double dPriority = 0;\n                 // vouts to the payees\n-                BOOST_FOREACH (const PAIRTYPE(CScript, int64_t)& s, vecSend)\n+                BOOST_FOREACH (const PAIRTYPE(CScript, Amount)& s, vecSend)\n                 {\n                     CTxOut txout(s.second, s.first);\n                     if (txout.IsDust(::minRelayTxFee))\n@@ -1348,22 +1348,22 @@ bool CWallet::CreateTransaction(const vector<pair<CScript, int64_t> >& vecSend,\n \n                 // Choose coins to use\n                 set<pair<const CWalletTx*,unsigned int> > setCoins;\n-                int64_t nValueIn = 0;\n+                Amount nValueIn = 0;\n                 if (!SelectCoins(nTotalValue, setCoins, nValueIn, coinControl))\n                 {\n                     strFailReason = _(\"Insufficient funds\");\n                     return false;\n                 }\n                 BOOST_FOREACH(PAIRTYPE(const CWalletTx*, unsigned int) pcoin, setCoins)\n                 {\n-                    int64_t nCredit = pcoin.first->vout[pcoin.second].nValue;\n+                    Amount nCredit = pcoin.first->vout[pcoin.second].nValue;\n                     //The priority after the next block (depth+1) is used instead of the current,\n                     //reflecting an assumption the user would accept a bit more delay for\n                     //a chance at a free transaction.\n                     dPriority += (double)nCredit * (pcoin.first->GetDepthInMainChain()+1);\n                 }\n \n-                int64_t nChange = nValueIn - nValue - nFeeRet;\n+                Amount nChange = nValueIn - nValue - nFeeRet;\n \n                 if (nChange > 0)\n                 {\n@@ -1439,7 +1439,7 @@ bool CWallet::CreateTransaction(const vector<pair<CScript, int64_t> >& vecSend,\n                 }\n                 dPriority = wtxNew.ComputePriority(dPriority, nBytes);\n \n-                int64_t nFeeNeeded = GetMinimumFee(nBytes, nTxConfirmTarget, mempool);\n+                Amount nFeeNeeded = GetMinimumFee(nBytes, nTxConfirmTarget, mempool);\n \n                 if (nFeeRet >= nFeeNeeded)\n                     break; // Done, enough fee included.\n@@ -1470,10 +1470,10 @@ bool CWallet::CreateTransaction(const vector<pair<CScript, int64_t> >& vecSend,\n     return true;\n }\n \n-bool CWallet::CreateTransaction(CScript scriptPubKey, int64_t nValue,\n-                                CWalletTx& wtxNew, CReserveKey& reservekey, int64_t& nFeeRet, std::string& strFailReason, const CCoinControl* coinControl)\n+bool CWallet::CreateTransaction(CScript scriptPubKey, const Amount& nValue,\n+                                CWalletTx& wtxNew, CReserveKey& reservekey, Amount& nFeeRet, std::string& strFailReason, const CCoinControl* coinControl)\n {\n-    vector< pair<CScript, int64_t> > vecSend;\n+    vector< pair<CScript, Amount> > vecSend;\n     vecSend.push_back(make_pair(scriptPubKey, nValue));\n     return CreateTransaction(vecSend, wtxNew, reservekey, nFeeRet, strFailReason, coinControl);\n }\n@@ -1528,7 +1528,7 @@ bool CWallet::CommitTransaction(CWalletTx& wtxNew, CReserveKey& reservekey)\n \n \n \n-string CWallet::SendMoney(const CTxDestination &address, int64_t nValue, CWalletTx& wtxNew)\n+string CWallet::SendMoney(const CTxDestination &address, const Amount& nValue, CWalletTx& wtxNew)\n {\n     // Check amount\n     if (nValue <= 0)\n@@ -1550,7 +1550,7 @@ string CWallet::SendMoney(const CTxDestination &address, int64_t nValue, CWallet\n \n     // Create and send the transaction\n     CReserveKey reservekey(this);\n-    int64_t nFeeRequired;\n+    Amount nFeeRequired;\n     if (!CreateTransaction(scriptPubKey, nValue, wtxNew, reservekey, nFeeRequired, strError))\n     {\n         if (nValue + nFeeRequired > GetBalance())\n@@ -1566,10 +1566,10 @@ string CWallet::SendMoney(const CTxDestination &address, int64_t nValue, CWallet\n \n \n \n-int64_t CWallet::GetMinimumFee(unsigned int nTxBytes, unsigned int nConfirmTarget, const CTxMemPool& pool)\n+Amount CWallet::GetMinimumFee(unsigned int nTxBytes, unsigned int nConfirmTarget, const CTxMemPool& pool)\n {\n     // payTxFee is user-set \"I want to pay this much\"\n-    int64_t nFeeNeeded = payTxFee.GetFee(nTxBytes);\n+    Amount nFeeNeeded = payTxFee.GetFee(nTxBytes);\n     // User didn't set: use -txconfirmtarget to estimate...\n     if (nFeeNeeded == 0)\n         nFeeNeeded = pool.estimateFee(nConfirmTarget).GetFee(nTxBytes);\n@@ -1828,9 +1828,9 @@ int64_t CWallet::GetOldestKeyPoolTime()\n     return keypool.nTime;\n }\n \n-std::map<CTxDestination, int64_t> CWallet::GetAddressBalances()\n+std::map<CTxDestination, Amount> CWallet::GetAddressBalances()\n {\n-    map<CTxDestination, int64_t> balances;\n+    map<CTxDestination, Amount> balances;\n \n     {\n         LOCK(cs_wallet);\n@@ -1856,7 +1856,7 @@ std::map<CTxDestination, int64_t> CWallet::GetAddressBalances()\n                 if(!ExtractDestination(pcoin->vout[i].scriptPubKey, addr))\n                     continue;\n \n-                int64_t n = IsSpent(walletEntry.first, i) ? 0 : pcoin->vout[i].nValue;\n+                Amount n = IsSpent(walletEntry.first, i) ? 0 : pcoin->vout[i].nValue;\n \n                 if (!balances.count(addr))\n                     balances[addr] = 0;"
      },
      {
        "sha": "ddc0043b783fbff6200f66da1ff9d9352986e633",
        "filename": "src/wallet.h",
        "status": "modified",
        "additions": 49,
        "deletions": 49,
        "changes": 98,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/wallet.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/wallet.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet.h?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -29,9 +29,9 @@ extern unsigned int nTxConfirmTarget;\n extern bool bSpendZeroConfChange;\n \n // -paytxfee default\n-static const int64_t DEFAULT_TRANSACTION_FEE = 0;\n+static const Amount DEFAULT_TRANSACTION_FEE = 0;\n // -paytxfee will warn if called with a higher fee than this amount (in satoshis) per KB\n-static const int nHighTransactionFeeWarning = 0.01 * COIN;\n+static const Amount nHighTransactionFeeWarning = 0.01 * COIN;\n // Largest (in bytes) free transaction we're willing to create\n static const unsigned int MAX_FREE_TRANSACTION_CREATE_SIZE = 1000;\n \n@@ -103,7 +103,7 @@ class CAddressBookData\n class CWallet : public CCryptoKeyStore, public CWalletInterface\n {\n private:\n-    bool SelectCoins(int64_t nTargetValue, std::set<std::pair<const CWalletTx*,unsigned int> >& setCoinsRet, int64_t& nValueRet, const CCoinControl *coinControl = NULL) const;\n+    bool SelectCoins(const Amount& nTargetValue, std::set<std::pair<const CWalletTx*,unsigned int> >& setCoinsRet, Amount& nValueRet, const CCoinControl *coinControl = NULL) const;\n \n     CWalletDB *pwalletdbEncryption;\n \n@@ -187,7 +187,7 @@ class CWallet : public CCryptoKeyStore, public CWalletInterface\n     bool CanSupportFeature(enum WalletFeature wf) { AssertLockHeld(cs_wallet); return nWalletMaxVersion >= wf; }\n \n     void AvailableCoins(std::vector<COutput>& vCoins, bool fOnlyConfirmed=true, const CCoinControl *coinControl = NULL) const;\n-    bool SelectCoinsMinConf(int64_t nTargetValue, int nConfMine, int nConfTheirs, std::vector<COutput> vCoins, std::set<std::pair<const CWalletTx*,unsigned int> >& setCoinsRet, int64_t& nValueRet) const;\n+    bool SelectCoinsMinConf(const Amount& nTargetValue, int nConfMine, int nConfTheirs, std::vector<COutput> vCoins, std::set<std::pair<const CWalletTx*,unsigned int> >& setCoinsRet, Amount& nValueRet) const;\n \n     bool IsSpent(const uint256& hash, unsigned int n) const;\n \n@@ -258,18 +258,18 @@ class CWallet : public CCryptoKeyStore, public CWalletInterface\n     int ScanForWalletTransactions(CBlockIndex* pindexStart, bool fUpdate = false);\n     void ReacceptWalletTransactions();\n     void ResendWalletTransactions();\n-    int64_t GetBalance() const;\n-    int64_t GetUnconfirmedBalance() const;\n-    int64_t GetImmatureBalance() const;\n-    int64_t GetWatchOnlyBalance() const;\n-    int64_t GetUnconfirmedWatchOnlyBalance() const;\n-    int64_t GetImmatureWatchOnlyBalance() const;\n-    bool CreateTransaction(const std::vector<std::pair<CScript, int64_t> >& vecSend,\n-                           CWalletTx& wtxNew, CReserveKey& reservekey, int64_t& nFeeRet, std::string& strFailReason, const CCoinControl *coinControl = NULL);\n-    bool CreateTransaction(CScript scriptPubKey, int64_t nValue,\n-                           CWalletTx& wtxNew, CReserveKey& reservekey, int64_t& nFeeRet, std::string& strFailReason, const CCoinControl *coinControl = NULL);\n+    Amount GetBalance() const;\n+    Amount GetUnconfirmedBalance() const;\n+    Amount GetImmatureBalance() const;\n+    Amount GetWatchOnlyBalance() const;\n+    Amount GetUnconfirmedWatchOnlyBalance() const;\n+    Amount GetImmatureWatchOnlyBalance() const;\n+    bool CreateTransaction(const std::vector<std::pair<CScript, Amount> >& vecSend,\n+                           CWalletTx& wtxNew, CReserveKey& reservekey, Amount& nFeeRet, std::string& strFailReason, const CCoinControl *coinControl = NULL);\n+    bool CreateTransaction(CScript scriptPubKey, const Amount& nValue,\n+                           CWalletTx& wtxNew, CReserveKey& reservekey, Amount& nFeeRet, std::string& strFailReason, const CCoinControl *coinControl = NULL);\n     bool CommitTransaction(CWalletTx& wtxNew, CReserveKey& reservekey);\n-    std::string SendMoney(const CTxDestination &address, int64_t nValue, CWalletTx& wtxNew);\n+    std::string SendMoney(const CTxDestination &address, const Amount& nValue, CWalletTx& wtxNew);\n \n     static CFeeRate minTxFee;\n     static int64_t GetMinimumFee(unsigned int nTxBytes, unsigned int nConfirmTarget, const CTxMemPool& pool);\n@@ -284,24 +284,24 @@ class CWallet : public CCryptoKeyStore, public CWalletInterface\n     void GetAllReserveKeys(std::set<CKeyID>& setAddress) const;\n \n     std::set< std::set<CTxDestination> > GetAddressGroupings();\n-    std::map<CTxDestination, int64_t> GetAddressBalances();\n+    std::map<CTxDestination, Amount> GetAddressBalances();\n \n     std::set<CTxDestination> GetAccountAddresses(std::string strAccount) const;\n \n     isminetype IsMine(const CTxIn& txin) const;\n-    int64_t GetDebit(const CTxIn& txin, const isminefilter& filter) const;\n+    Amount GetDebit(const CTxIn& txin, const isminefilter& filter) const;\n     isminetype IsMine(const CTxOut& txout) const\n     {\n         return ::IsMine(*this, txout.scriptPubKey);\n     }\n-    int64_t GetCredit(const CTxOut& txout, const isminefilter& filter) const\n+    Amount GetCredit(const CTxOut& txout, const isminefilter& filter) const\n     {\n         if (!MoneyRange(txout.nValue))\n             throw std::runtime_error(\"CWallet::GetCredit() : value out of range\");\n         return ((IsMine(txout) & filter) ? txout.nValue : 0);\n     }\n     bool IsChange(const CTxOut& txout) const;\n-    int64_t GetChange(const CTxOut& txout) const\n+    Amount GetChange(const CTxOut& txout) const\n     {\n         if (!MoneyRange(txout.nValue))\n             throw std::runtime_error(\"CWallet::GetChange() : value out of range\");\n@@ -318,9 +318,9 @@ class CWallet : public CCryptoKeyStore, public CWalletInterface\n     {\n         return (GetDebit(tx, ISMINE_ALL) > 0);\n     }\n-    int64_t GetDebit(const CTransaction& tx, const isminefilter& filter) const\n+    Amount GetDebit(const CTransaction& tx, const isminefilter& filter) const\n     {\n-        int64_t nDebit = 0;\n+        Amount nDebit = 0;\n         BOOST_FOREACH(const CTxIn& txin, tx.vin)\n         {\n             nDebit += GetDebit(txin, filter);\n@@ -329,9 +329,9 @@ class CWallet : public CCryptoKeyStore, public CWalletInterface\n         }\n         return nDebit;\n     }\n-    int64_t GetCredit(const CTransaction& tx, const isminefilter& filter) const\n+    Amount GetCredit(const CTransaction& tx, const isminefilter& filter) const\n     {\n-        int64_t nCredit = 0;\n+        Amount nCredit = 0;\n         BOOST_FOREACH(const CTxOut& txout, tx.vout)\n         {\n             nCredit += GetCredit(txout, filter);\n@@ -340,9 +340,9 @@ class CWallet : public CCryptoKeyStore, public CWalletInterface\n         }\n         return nCredit;\n     }\n-    int64_t GetChange(const CTransaction& tx) const\n+    Amount GetChange(const CTransaction& tx) const\n     {\n-        int64_t nChange = 0;\n+        Amount nChange = 0;\n         BOOST_FOREACH(const CTxOut& txout, tx.vout)\n         {\n             nChange += GetChange(txout);\n@@ -459,7 +459,7 @@ static void WriteOrderPos(const int64_t& nOrderPos, mapValue_t& mapValue)\n struct COutputEntry\n {\n     CTxDestination destination;\n-    int64_t amount;\n+    Amount amount;\n     int vout;\n };\n \n@@ -491,15 +491,15 @@ class CWalletTx : public CMerkleTx\n     mutable bool fImmatureWatchCreditCached;\n     mutable bool fAvailableWatchCreditCached;\n     mutable bool fChangeCached;\n-    mutable int64_t nDebitCached;\n-    mutable int64_t nCreditCached;\n-    mutable int64_t nImmatureCreditCached;\n-    mutable int64_t nAvailableCreditCached;\n-    mutable int64_t nWatchDebitCached;\n-    mutable int64_t nWatchCreditCached;\n-    mutable int64_t nImmatureWatchCreditCached;\n-    mutable int64_t nAvailableWatchCreditCached;\n-    mutable int64_t nChangeCached;\n+    mutable Amount nDebitCached;\n+    mutable Amount nCreditCached;\n+    mutable Amount nImmatureCreditCached;\n+    mutable Amount nAvailableCreditCached;\n+    mutable Amount nWatchDebitCached;\n+    mutable Amount nWatchCreditCached;\n+    mutable Amount nImmatureWatchCreditCached;\n+    mutable Amount nAvailableWatchCreditCached;\n+    mutable Amount nChangeCached;\n \n     CWalletTx()\n     {\n@@ -615,12 +615,12 @@ class CWalletTx : public CMerkleTx\n     }\n \n     // filter decides which addresses will count towards the debit\n-    int64_t GetDebit(const isminefilter& filter) const\n+    Amount GetDebit(const isminefilter& filter) const\n     {\n         if (vin.empty())\n             return 0;\n \n-        int64_t debit = 0;\n+        Amount debit = 0;\n         if(filter & ISMINE_SPENDABLE)\n         {\n             if (fDebitCached)\n@@ -646,7 +646,7 @@ class CWalletTx : public CMerkleTx\n         return debit;\n     }\n \n-    int64_t GetCredit(bool fUseCache=true) const\n+    Amount GetCredit(bool fUseCache=true) const\n     {\n         // Must wait until coinbase is safely deep enough in the chain before valuing it\n         if (IsCoinBase() && GetBlocksToMaturity() > 0)\n@@ -660,7 +660,7 @@ class CWalletTx : public CMerkleTx\n         return nCreditCached;\n     }\n \n-    int64_t GetImmatureCredit(bool fUseCache=true) const\n+    Amount GetImmatureCredit(bool fUseCache=true) const\n     {\n         if (IsCoinBase() && GetBlocksToMaturity() > 0 && IsInMainChain())\n         {\n@@ -674,7 +674,7 @@ class CWalletTx : public CMerkleTx\n         return 0;\n     }\n \n-    int64_t GetAvailableCredit(bool fUseCache=true) const\n+    Amount GetAvailableCredit(bool fUseCache=true) const\n     {\n         if (pwallet == 0)\n             return 0;\n@@ -686,7 +686,7 @@ class CWalletTx : public CMerkleTx\n         if (fUseCache && fAvailableCreditCached)\n             return nAvailableCreditCached;\n \n-        int64_t nCredit = 0;\n+        Amount nCredit = 0;\n         uint256 hashTx = GetHash();\n         for (unsigned int i = 0; i < vout.size(); i++)\n         {\n@@ -704,7 +704,7 @@ class CWalletTx : public CMerkleTx\n         return nCredit;\n     }\n \n-    int64_t GetImmatureWatchOnlyCredit(const bool& fUseCache=true) const\n+    Amount GetImmatureWatchOnlyCredit(const bool& fUseCache=true) const\n     {\n         if (IsCoinBase() && GetBlocksToMaturity() > 0 && IsInMainChain())\n         {\n@@ -718,7 +718,7 @@ class CWalletTx : public CMerkleTx\n         return 0;\n     }\n \n-    int64_t GetAvailableWatchOnlyCredit(const bool& fUseCache=true) const\n+    Amount GetAvailableWatchOnlyCredit(const bool& fUseCache=true) const\n     {\n         if (pwallet == 0)\n             return 0;\n@@ -730,7 +730,7 @@ class CWalletTx : public CMerkleTx\n         if (fUseCache && fAvailableWatchCreditCached)\n             return nAvailableWatchCreditCached;\n \n-        int64_t nCredit = 0;\n+        Amount nCredit = 0;\n         for (unsigned int i = 0; i < vout.size(); i++)\n         {\n             if (!pwallet->IsSpent(GetHash(), i))\n@@ -747,7 +747,7 @@ class CWalletTx : public CMerkleTx\n         return nCredit;\n     }\n \n-    int64_t GetChange() const\n+    Amount GetChange() const\n     {\n         if (fChangeCached)\n             return nChangeCached;\n@@ -757,10 +757,10 @@ class CWalletTx : public CMerkleTx\n     }\n \n     void GetAmounts(std::list<COutputEntry>& listReceived,\n-                    std::list<COutputEntry>& listSent, int64_t& nFee, std::string& strSentAccount, const isminefilter& filter) const;\n+                    std::list<COutputEntry>& listSent, Amount& nFee, std::string& strSentAccount, const isminefilter& filter) const;\n \n-    void GetAccountAmounts(const std::string& strAccount, int64_t& nReceived,\n-                           int64_t& nSent, int64_t& nFee, const isminefilter& filter) const;\n+    void GetAccountAmounts(const std::string& strAccount, Amount& nReceived,\n+                           Amount& nSent, Amount& nFee, const isminefilter& filter) const;\n \n     bool IsFromMe(const isminefilter& filter) const\n     {\n@@ -902,7 +902,7 @@ class CAccountingEntry\n {\n public:\n     std::string strAccount;\n-    int64_t nCreditDebit;\n+    Amount nCreditDebit;\n     int64_t nTime;\n     std::string strOtherAccount;\n     std::string strComment;"
      },
      {
        "sha": "c78173eb1cc179fcb6cc881bb67de5a23598e00e",
        "filename": "src/walletdb.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/walletdb.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/walletdb.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/walletdb.cpp?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -184,12 +184,12 @@ bool CWalletDB::WriteAccountingEntry(const CAccountingEntry& acentry)\n     return WriteAccountingEntry(++nAccountingEntryNumber, acentry);\n }\n \n-int64_t CWalletDB::GetAccountCreditDebit(const string& strAccount)\n+Amount CWalletDB::GetAccountCreditDebit(const string& strAccount)\n {\n     list<CAccountingEntry> entries;\n     ListAccountCreditDebit(strAccount, entries);\n \n-    int64_t nCreditDebit = 0;\n+    Amount nCreditDebit = 0;\n     BOOST_FOREACH (const CAccountingEntry& entry, entries)\n         nCreditDebit += entry.nCreditDebit;\n "
      },
      {
        "sha": "54746a0bed3eb6bf41b5d4167e451e839acf1041",
        "filename": "src/walletdb.h",
        "status": "modified",
        "additions": 2,
        "deletions": 1,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/walletdb.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0adf98ed38c706ebae07a0d74bf6bab18e1b9f42/src/walletdb.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/walletdb.h?ref=0adf98ed38c706ebae07a0d74bf6bab18e1b9f42",
        "patch": "@@ -5,6 +5,7 @@\n #ifndef BITCOIN_WALLETDB_H\n #define BITCOIN_WALLETDB_H\n \n+#include \"amount.h\"\n #include \"db.h\"\n #include \"key.h\"\n #include \"keystore.h\"\n@@ -120,7 +121,7 @@ class CWalletDB : public CDB\n     bool WriteAccountingEntry(const uint64_t nAccEntryNum, const CAccountingEntry& acentry);\n public:\n     bool WriteAccountingEntry(const CAccountingEntry& acentry);\n-    int64_t GetAccountCreditDebit(const std::string& strAccount);\n+    Amount GetAccountCreditDebit(const std::string& strAccount);\n     void ListAccountCreditDebit(const std::string& strAccount, std::list<CAccountingEntry>& acentries);\n \n     DBErrors ReorderTransactions(CWallet*);"
      }
    ]
  }
]