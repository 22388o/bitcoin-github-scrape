[
  {
    "sha": "dfaa9b33c4b91f91cebc77bff249d853e698f1f2",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkZmFhOWIzM2M0YjkxZjkxY2ViYzc3YmZmMjQ5ZDg1M2U2OThmMWYy",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-04-13T20:09:13Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-05-05T17:12:17Z"
      },
      "message": "guix: Build fixes for HOST canonicalization\n\n1. Bump time-machine to a commit that includes:\n\n   commit 58452d08ff3e0044e9a32e6d5b3663cf185d8b33\n   Author: Carl Dong <contact@carldong.me>\n   Date:   Sun Mar 28 10:51:16 2021 -0700\n\n       gnu: cross-base: Relax check for powerpc64le.\n\n       * gnu/packages/cross-base.scm (cross-gcc-arguments): When conditionally adding\n       \"--with-long-double-128\", check for \"powerpc64le-\" prefix instead of matching\n       full target.\n\n       Signed-off-by: Chris Marusich <cmmarusich@gmail.com>\n\n2. Explicitly supply CC_BUILD to freetype's configure invocation,\n   otherwise it erroneously use CC for the target build if it thinks\n   that host=build. However, when Guix-building, even if host=build, we\n   need to use a different CC for the target, as the Guix's default\n   GCC's specfile (which inserts a lot of rpaths) is not suitable for\n   our purposes.",
      "tree": {
        "sha": "ab0d51bda8da411d77ba6c57ab685b28f1d79483",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ab0d51bda8da411d77ba6c57ab685b28f1d79483"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/dfaa9b33c4b91f91cebc77bff249d853e698f1f2",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/dfaa9b33c4b91f91cebc77bff249d853e698f1f2",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/dfaa9b33c4b91f91cebc77bff249d853e698f1f2",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/dfaa9b33c4b91f91cebc77bff249d853e698f1f2/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "128b98fce36db8d4a85e056a30e141fc117f3390",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/128b98fce36db8d4a85e056a30e141fc117f3390",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/128b98fce36db8d4a85e056a30e141fc117f3390"
      }
    ],
    "stats": {
      "total": 4,
      "additions": 2,
      "deletions": 2
    },
    "files": [
      {
        "sha": "2692fb07086ffea768dc946015ec0ef79f856847",
        "filename": "contrib/guix/guix-build",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/dfaa9b33c4b91f91cebc77bff249d853e698f1f2/contrib/guix/guix-build",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/dfaa9b33c4b91f91cebc77bff249d853e698f1f2/contrib/guix/guix-build",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/guix-build?ref=dfaa9b33c4b91f91cebc77bff249d853e698f1f2",
        "patch": "@@ -194,7 +194,7 @@ SOURCE_DATE_EPOCH=\"${SOURCE_DATE_EPOCH:-$(git log --format=%at -1)}\"\n time-machine() {\n     # shellcheck disable=SC2086\n     guix time-machine --url=https://github.com/dongcarl/guix.git \\\n-                      --commit=490e39ff303f4f6873a04bfb8253755bdae1b29c \\\n+                      --commit=ec8d09ee672e0d357bb5bb597464c8b168f14bfb \\\n                       --cores=\"$JOBS\" \\\n                       --keep-failed \\\n                       --fallback \\"
      },
      {
        "sha": "200d41b06d480186de1e8602c6479ee1c42e2431",
        "filename": "depends/packages/freetype.mk",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/dfaa9b33c4b91f91cebc77bff249d853e698f1f2/depends/packages/freetype.mk",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/dfaa9b33c4b91f91cebc77bff249d853e698f1f2/depends/packages/freetype.mk",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/packages/freetype.mk?ref=dfaa9b33c4b91f91cebc77bff249d853e698f1f2",
        "patch": "@@ -11,7 +11,7 @@ define $(package)_set_vars\n endef\n \n define $(package)_config_cmds\n-  $($(package)_autoconf)\n+  $($(package)_autoconf) CC_BUILD=$(build_CC)\n endef\n \n define $(package)_build_cmds"
      }
    ]
  },
  {
    "sha": "aa0f83283504c69b57ea20f4cb127c4ec4d993f3",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzphYTBmODMyODM1MDRjNjliNTdlYTIwZjRjYjEyN2M0ZWM0ZDk5M2Yz",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-04-13T20:16:47Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-05-05T17:12:17Z"
      },
      "message": "guix: Always canonicalize HOST\n\nWe need to specify the qt_config_opts_aarch64_linux because the default\nQt platform profile for aarch64 assumes that gcc is named\naarch64-linux-gnu-gcc, but it's actually named\naarch64-unknown-linx-gnu-gcc if platform triples are correctly\ncanonicalized.",
      "tree": {
        "sha": "77404d6f0b2cee22c0fef0d217a31f2483006966",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/77404d6f0b2cee22c0fef0d217a31f2483006966"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/aa0f83283504c69b57ea20f4cb127c4ec4d993f3",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/aa0f83283504c69b57ea20f4cb127c4ec4d993f3",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/aa0f83283504c69b57ea20f4cb127c4ec4d993f3",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/aa0f83283504c69b57ea20f4cb127c4ec4d993f3/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "dfaa9b33c4b91f91cebc77bff249d853e698f1f2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/dfaa9b33c4b91f91cebc77bff249d853e698f1f2",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/dfaa9b33c4b91f91cebc77bff249d853e698f1f2"
      }
    ],
    "stats": {
      "total": 72,
      "additions": 45,
      "deletions": 27
    },
    "files": [
      {
        "sha": "aedf441f4ce43262ddcca4f6e597dcb0e76980f8",
        "filename": "contrib/guix/README.md",
        "status": "modified",
        "additions": 4,
        "deletions": 3,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/aa0f83283504c69b57ea20f4cb127c4ec4d993f3/contrib/guix/README.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/aa0f83283504c69b57ea20f4cb127c4ec4d993f3/contrib/guix/README.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/README.md?ref=aa0f83283504c69b57ea20f4cb127c4ec4d993f3",
        "patch": "@@ -146,9 +146,10 @@ find output/ -type f -print0 | sort -z | xargs -r0 sha256sum\n * _**HOSTS**_\n \n   Override the space-separated list of platform triples for which to perform a\n-  bootstrappable build. _(defaults to \"x86\\_64-linux-gnu arm-linux-gnueabihf\n-  aarch64-linux-gnu riscv64-linux-gnu powerpc64-linux-gnu powerpc64le-linux-gnu\n-  x86\\_64-w64-mingw32 x86\\_64-apple-darwin18\")_\n+  bootstrappable build. _(defaults to \"x86\\_64-pc-linux-gnu\n+  arm-unknown-linux-gnueabihf aarch64-unknown-linux-gnu\n+  riscv64-unknown-linux-gnu powerpc64-unknown-linux-gnu\n+  powerpc64le-unknown-linux-gnu x86\\_64-w64-mingw32 x86\\_64-apple-darwin18\")_\n \n * _**SOURCES_PATH**_\n "
      },
      {
        "sha": "937b1fbbb0dbcef53a1da8ae8e135b4a3f421b47",
        "filename": "contrib/guix/guix-build",
        "status": "modified",
        "additions": 19,
        "deletions": 3,
        "changes": 22,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/aa0f83283504c69b57ea20f4cb127c4ec4d993f3/contrib/guix/guix-build",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/aa0f83283504c69b57ea20f4cb127c4ec4d993f3/contrib/guix/guix-build",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/guix-build?ref=aa0f83283504c69b57ea20f4cb127c4ec4d993f3",
        "patch": "@@ -74,9 +74,25 @@ mkdir -p \"$VERSION_BASE\"\n ################\n \n # Default to building for all supported HOSTs (overridable by environment)\n-export HOSTS=\"${HOSTS:-x86_64-linux-gnu arm-linux-gnueabihf aarch64-linux-gnu riscv64-linux-gnu powerpc64-linux-gnu powerpc64le-linux-gnu\n-                       x86_64-w64-mingw32\n-                       x86_64-apple-darwin18}\"\n+export uncanonicalized_HOSTS=\"${HOSTS:-x86_64-pc-linux-gnu\n+                                       arm-unknown-linux-gnueabihf\n+                                       aarch64-unknown-linux-gnu\n+                                       riscv64-unknown-linux-gnu\n+                                       powerpc64-unknown-linux-gnu\n+                                       powerpc64le-unknown-linux-gnu\n+                                       x86_64-w64-mingw32\n+                                       x86_64-apple-darwin18}\"\n+\n+unset HOSTS\n+canonicalized_HOSTS=\"\"\n+for host in $uncanonicalized_HOSTS; do\n+    canonicalized_host=\"$(./depends/config.sub \"$host\")\"\n+    if [ \"$host\" != \"$canonicalized_host\" ]; then\n+        echo \"INFO: Canonicalizing '$host' to '$canonicalized_host'\"\n+    fi\n+    canonicalized_HOSTS+=\" $canonicalized_host\"\n+done\n+HOSTS=\"$canonicalized_HOSTS\"\n \n # Usage: distsrc_for_host HOST\n #"
      },
      {
        "sha": "fcad28c5ea6a33f035f2316a104c5e2bf1aae853",
        "filename": "contrib/guix/libexec/build.sh",
        "status": "modified",
        "additions": 22,
        "deletions": 21,
        "changes": 43,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/aa0f83283504c69b57ea20f4cb127c4ec4d993f3/contrib/guix/libexec/build.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/aa0f83283504c69b57ea20f4cb127c4ec4d993f3/contrib/guix/libexec/build.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/libexec/build.sh?ref=aa0f83283504c69b57ea20f4cb127c4ec4d993f3",
        "patch": "@@ -161,14 +161,14 @@ case \"$HOST\" in\n     *linux*)\n         glibc_dynamic_linker=$(\n             case \"$HOST\" in\n-                i686-linux-gnu)        echo /lib/ld-linux.so.2 ;;\n-                x86_64-linux-gnu)      echo /lib64/ld-linux-x86-64.so.2 ;;\n-                arm-linux-gnueabihf)   echo /lib/ld-linux-armhf.so.3 ;;\n-                aarch64-linux-gnu)     echo /lib/ld-linux-aarch64.so.1 ;;\n-                riscv64-linux-gnu)     echo /lib/ld-linux-riscv64-lp64d.so.1 ;;\n-                powerpc64-linux-gnu)   echo /lib/ld64.so.1;;\n-                powerpc64le-linux-gnu) echo /lib/ld64.so.2;;\n-                *)                     exit 1 ;;\n+                i686-pc-linux-gnu)             echo /lib/ld-linux.so.2 ;;\n+                x86_64-pc-linux-gnu)           echo /lib64/ld-linux-x86-64.so.2 ;;\n+                arm-unknown-linux-gnueabihf)   echo /lib/ld-linux-armhf.so.3 ;;\n+                aarch64-unknown-linux-gnu)     echo /lib/ld-linux-aarch64.so.1 ;;\n+                riscv64-unknown-linux-gnu)     echo /lib/ld-linux-riscv64-lp64d.so.1 ;;\n+                powerpc64-unknown-linux-gnu)   echo /lib/ld64.so.1;;\n+                powerpc64le-unknown-linux-gnu) echo /lib/ld64.so.2;;\n+                *)                             exit 1 ;;\n             esac\n         )\n         ;;\n@@ -199,19 +199,20 @@ make -C depends --jobs=\"$JOBS\" HOST=\"$HOST\" \\\n                                    ${SOURCES_PATH+SOURCES_PATH=\"$SOURCES_PATH\"} \\\n                                    ${BASE_CACHE+BASE_CACHE=\"$BASE_CACHE\"} \\\n                                    ${SDK_PATH+SDK_PATH=\"$SDK_PATH\"} \\\n-                                   i686_linux_CC=i686-linux-gnu-gcc \\\n-                                   i686_linux_CXX=i686-linux-gnu-g++ \\\n-                                   i686_linux_AR=i686-linux-gnu-ar \\\n-                                   i686_linux_RANLIB=i686-linux-gnu-ranlib \\\n-                                   i686_linux_NM=i686-linux-gnu-nm \\\n-                                   i686_linux_STRIP=i686-linux-gnu-strip \\\n-                                   x86_64_linux_CC=x86_64-linux-gnu-gcc \\\n-                                   x86_64_linux_CXX=x86_64-linux-gnu-g++ \\\n-                                   x86_64_linux_AR=x86_64-linux-gnu-ar \\\n-                                   x86_64_linux_RANLIB=x86_64-linux-gnu-ranlib \\\n-                                   x86_64_linux_NM=x86_64-linux-gnu-nm \\\n-                                   x86_64_linux_STRIP=x86_64-linux-gnu-strip \\\n+                                   i686_linux_CC=i686-pc-linux-gnu-gcc \\\n+                                   i686_linux_CXX=i686-pc-linux-gnu-g++ \\\n+                                   i686_linux_AR=i686-pc-linux-gnu-ar \\\n+                                   i686_linux_RANLIB=i686-pc-linux-gnu-ranlib \\\n+                                   i686_linux_NM=i686-pc-linux-gnu-nm \\\n+                                   i686_linux_STRIP=i686-pc-linux-gnu-strip \\\n+                                   x86_64_linux_CC=x86_64-pc-linux-gnu-gcc \\\n+                                   x86_64_linux_CXX=x86_64-pc-linux-gnu-g++ \\\n+                                   x86_64_linux_AR=x86_64-pc-linux-gnu-ar \\\n+                                   x86_64_linux_RANLIB=x86_64-pc-linux-gnu-ranlib \\\n+                                   x86_64_linux_NM=x86_64-pc-linux-gnu-nm \\\n+                                   x86_64_linux_STRIP=x86_64-pc-linux-gnu-strip \\\n                                    qt_config_opts_i686_linux='-platform linux-g++ -xplatform bitcoin-linux-g++' \\\n+                                   qt_config_opts_aarch64_linux='-platform linux-g++ -xplatform bitcoin-linux-g++' \\\n                                    FORCE_USE_SYSTEM_CLANG=1\n \n \n@@ -255,7 +256,7 @@ case \"$HOST\" in\n esac\n \n case \"$HOST\" in\n-    powerpc64-linux-*|riscv64-linux-*) HOST_LDFLAGS=\"${HOST_LDFLAGS} -Wl,-z,noexecstack\" ;;\n+    powerpc64-unknown-linux-gnu|riscv64-unknown-linux-gnu) HOST_LDFLAGS=\"${HOST_LDFLAGS} -Wl,-z,noexecstack\" ;;\n esac\n \n # Make $HOST-specific native binaries from depends available in $PATH"
      }
    ]
  },
  {
    "sha": "754fd2bbbe9c43122e6725dc01a010f12a95048d",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo3NTRmZDJiYmJlOWM0MzEyMmU2NzI1ZGMwMWEwMTBmMTJhOTUwNDhk",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-06-16T18:09:30Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-06-18T18:07:37Z"
      },
      "message": "depends: Recognize and pass AUTOCONFFLAGS",
      "tree": {
        "sha": "12d1f88d8fdf45f8baec85a4ac63e5c726928d83",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/12d1f88d8fdf45f8baec85a4ac63e5c726928d83"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/754fd2bbbe9c43122e6725dc01a010f12a95048d",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/754fd2bbbe9c43122e6725dc01a010f12a95048d",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/754fd2bbbe9c43122e6725dc01a010f12a95048d",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/754fd2bbbe9c43122e6725dc01a010f12a95048d/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "aa0f83283504c69b57ea20f4cb127c4ec4d993f3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/aa0f83283504c69b57ea20f4cb127c4ec4d993f3",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/aa0f83283504c69b57ea20f4cb127c4ec4d993f3"
      }
    ],
    "stats": {
      "total": 11,
      "additions": 9,
      "deletions": 2
    },
    "files": [
      {
        "sha": "c73a20096818b73edbd33c2676dc6080b04fa4d6",
        "filename": "depends/funcs.mk",
        "status": "modified",
        "additions": 8,
        "deletions": 1,
        "changes": 9,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/754fd2bbbe9c43122e6725dc01a010f12a95048d/depends/funcs.mk",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/754fd2bbbe9c43122e6725dc01a010f12a95048d/depends/funcs.mk",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/funcs.mk?ref=754fd2bbbe9c43122e6725dc01a010f12a95048d",
        "patch": "@@ -18,6 +18,8 @@ $(1)_ldflags=$$($$($(1)_type)_LDFLAGS) \\\n $(1)_cppflags=$$($$($(1)_type)_CPPFLAGS) \\\n               $$($$($(1)_type)_$$(release_type)_CPPFLAGS) \\\n               -I$$($$($(1)_type)_prefix)/include\n+$(1)_autoconfflags=$$($$($(1)_type)_AUTOCONFFLAGS) \\\n+                   $$($$($(1)_type)_$$(release_type)_AUTOCONFFLAGS)\n $(1)_recipe_hash:=\n endef\n \n@@ -129,6 +131,11 @@ $(1)_config_opts+=$$($(1)_config_opts_$(host_arch)) $$($(1)_config_opts_$(host_a\n $(1)_config_opts+=$$($(1)_config_opts_$(host_os)) $$($(1)_config_opts_$(host_os)_$(release_type))\n $(1)_config_opts+=$$($(1)_config_opts_$(host_arch)_$(host_os)) $$($(1)_config_opts_$(host_arch)_$(host_os)_$(release_type))\n \n+$(1)_autoconfflags+=$$($(1)_autoconfflags_$(release_type))\n+$(1)_autoconfflags+=$$($(1)_autoconfflags_$(host_arch)) $$($(1)_autoconfflags_$(host_arch)_$(release_type))\n+$(1)_autoconfflags+=$$($(1)_autoconfflags_$(host_os)) $$($(1)_autoconfflags_$(host_os)_$(release_type))\n+$(1)_autoconfflags+=$$($(1)_autoconfflags_$(host_arch)_$(host_os)) $$($(1)_autoconfflags_$(host_arch)_$(host_os)_$(release_type))\n+\n $(1)_config_env+=$$($(1)_config_env_$(release_type))\n $(1)_config_env+=$($(1)_config_env_$(host_arch)) $($(1)_config_env_$(host_arch)_$(release_type))\n $(1)_config_env+=$($(1)_config_env_$(host_os)) $($(1)_config_env_$(host_os)_$(release_type))\n@@ -146,7 +153,7 @@ $(1)_stage_env+=PATH=$(build_prefix)/bin:$(PATH)\n # config.guess, which is what we set it too here. This also quells autoconf\n # warnings, \"If you wanted to set the --build type, don't use --host.\",\n # when using versions older than 2.70.\n-$(1)_autoconf=./configure --build=$(BUILD) --host=$($($(1)_type)_host) --prefix=$($($(1)_type)_prefix) $$($(1)_config_opts) CC=\"$$($(1)_cc)\" CXX=\"$$($(1)_cxx)\"\n+$(1)_autoconf=./configure --build=$(BUILD) --host=$($($(1)_type)_host) --prefix=$($($(1)_type)_prefix) $$($(1)_config_opts) $$($(1)_autoconfflags) CC=\"$$($(1)_cc)\" CXX=\"$$($(1)_cxx)\"\n ifneq ($($(1)_nm),)\n $(1)_autoconf += NM=\"$$($(1)_nm)\"\n endif"
      },
      {
        "sha": "d120fede1f35bd920a51ad4ca98d0e168a997dc7",
        "filename": "depends/hosts/default.mk",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/754fd2bbbe9c43122e6725dc01a010f12a95048d/depends/hosts/default.mk",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/754fd2bbbe9c43122e6725dc01a010f12a95048d/depends/hosts/default.mk",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/hosts/default.mk?ref=754fd2bbbe9c43122e6725dc01a010f12a95048d",
        "patch": "@@ -36,4 +36,4 @@ host_$(release_type)_$1 = $$($(host_arch)_$(host_os)_$(release_type)_$1)\n endef\n \n $(foreach tool,CC CXX AR RANLIB STRIP NM LIBTOOL OTOOL INSTALL_NAME_TOOL,$(eval $(call add_host_tool_func,$(tool))))\n-$(foreach flags,CFLAGS CXXFLAGS CPPFLAGS LDFLAGS, $(eval $(call add_host_flags_func,$(flags))))\n+$(foreach flags,CFLAGS CXXFLAGS CPPFLAGS LDFLAGS AUTOCONFFLAGS, $(eval $(call add_host_flags_func,$(flags))))"
      }
    ]
  },
  {
    "sha": "d0e2378c1a90d1e073e93830293f986aba0a8acb",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkMGUyMzc4YzFhOTBkMWUwNzNlOTM4MzAyOTNmOTg2YWJhMGE4YWNi",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-06-18T18:07:48Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-06-18T18:07:48Z"
      },
      "message": "guix: Supply cross_compiling=yes to Autoconf\n\nAbstractly, our Guix builds do not treat native-builds and cross-builds\ndifferently. We always build 2 toolchains:\n\n1. A native toolchain (in depends terms: build) (namely, the\n   `gcc-toolchain` package, with the command line name being simply\n   `gcc`), and\n2. A cross toolchain (in depends terms: host) (namely, packages returned\n   by the `make-cross-toolchain` procedure in `manifest.scm`, with the\n   command line name being something like `x86_64-pc-linux-gnu-gcc`)\n\nThis means that even if we are technically not cross\ncompiling (`build==host`), we do not coalesce or reuse the toolchains in\nany way. This is necessary because our release binaries (produced by the\ncross toolchain) are built to:\n\n1. Have a dependency on a minimal number of shared libraries\n2. Expect the dynamic linker/loader `ld-linux.so(8)` to be somewhere\n   like `/lib{,64}/ld*`\n\nThis is not the case for binaries produced by Guix's native\n`gcc-toolchain` package. They are built to work best in Guix containers,\nwhere the binaries reach for libraries and `ld-linux.so(8)` in\n`/gnu/store` and have dependencies recorded as RUNPATHs in their dynamic\nsection (since paths are deterministic).\n\nIn other words, Guix's native `gcc-toolchain` package can be thought of\nas a different platform triple: `x86_64-guix-linux-gnu` (PLEASE don't\nactually use this triple this is not standard just a way to think about\nit).\n\nWe can therefore think of performing a Guix build on `x86_64` for\n`x86_64` as a cross-compilation with build=`x86_64-guix-linux-gnu` and\nhost=`x86_64-pc-linux-gnu` since even when the architecture and OS\nmatches, binaries built with the native toolchain will not run on normal\ndistros, and binaries built with the cross toolchain will not run in\nGuix environments.\n\n---\n\nWith this context in mind, we can now discuss our particular issue.\n\nPrior to canonicalizing `$HOST` (this PR), autoconf's barely-working\ncross compilation detection (which is marked `# FIXME: To remove some\nday.`) set `cross_compiling=yes` if `$host` is not the exact same string\nas `$build`:\nhttp://git.savannah.gnu.org/gitweb/?p=autoconf.git;a=blob;f=lib/autoconf/general.m4;h=053130b3d0ba7af8b9177da6ff850d8c20ac6cbe;hb=HEAD#l972.\nWhich actually worked in our favor since we were not canonicalizing\n`host` and specifying `build=x86_64-pc-linux-gnu` and\n`host=x86_64-linux-gnu`, and the missing `-pc-` made autoconf assume\nthat it was a cross-compilation.\n\nAfter canonicalizing `$HOST` autoconf instead sees that `$build==$host`\nand sets `cross_compiling=no`, which leads to later configure tests to\ncompile `conftest` binaries using `CC` (namely, our cross-toolchain\n`x86_64-pc-linux-gnu-gcc`) and attempt to run them inside the Guix\ncontainer. This leads to the problems fanquake identified here:\nhttps://github.com/bitcoin/bitcoin/pull/21671#issuecomment-858331108\n\nThe solution is to be explicit and supply `cross_compiling=yes` to\n`./configure`, which is us saying: \"yes i'm on the same architecture,\nOS, and userspace as the target, but there are important differences in\nwhat we want in our dynamic sections which lead to binaries not being\nable to find the right libraries to load if they were copied to the\nother environment so just assume that I'm cross compiling and don't try\nto be smart\"",
      "tree": {
        "sha": "66078253a43df0123d20e897919d3cff3b3c6562",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/66078253a43df0123d20e897919d3cff3b3c6562"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d0e2378c1a90d1e073e93830293f986aba0a8acb",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d0e2378c1a90d1e073e93830293f986aba0a8acb",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/d0e2378c1a90d1e073e93830293f986aba0a8acb",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d0e2378c1a90d1e073e93830293f986aba0a8acb/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "754fd2bbbe9c43122e6725dc01a010f12a95048d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/754fd2bbbe9c43122e6725dc01a010f12a95048d",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/754fd2bbbe9c43122e6725dc01a010f12a95048d"
      }
    ],
    "stats": {
      "total": 1,
      "additions": 1,
      "deletions": 0
    },
    "files": [
      {
        "sha": "c806f269b2d4344335d491949c2a25fb5436557e",
        "filename": "contrib/guix/libexec/build.sh",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d0e2378c1a90d1e073e93830293f986aba0a8acb/contrib/guix/libexec/build.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d0e2378c1a90d1e073e93830293f986aba0a8acb/contrib/guix/libexec/build.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/libexec/build.sh?ref=d0e2378c1a90d1e073e93830293f986aba0a8acb",
        "patch": "@@ -213,6 +213,7 @@ make -C depends --jobs=\"$JOBS\" HOST=\"$HOST\" \\\n                                    x86_64_linux_STRIP=x86_64-pc-linux-gnu-strip \\\n                                    qt_config_opts_i686_linux='-platform linux-g++ -xplatform bitcoin-linux-g++' \\\n                                    qt_config_opts_aarch64_linux='-platform linux-g++ -xplatform bitcoin-linux-g++' \\\n+                                   AUTOCONFFLAGS=\"cross_compiling=yes\" \\\n                                    FORCE_USE_SYSTEM_CLANG=1\n \n "
      }
    ]
  }
]