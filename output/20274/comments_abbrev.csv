fanquake,2020-10-31 02:58:31,NOTE: If this does get merged we'll also need to update the [stripbuildinfo.patch](https://github.com/bitcoin-core/bitcoin-maintainer-tools/blob/master/patches/stripbuildinfo.patch),https://github.com/bitcoin/bitcoin/pull/20274#issuecomment-719873697,719873697,
practicalswift,2020-10-31 09:35:53,"The goal of `src/compat/assumptions.h` is to document all system assumptions we make we make.\n\nThe assumption that the macro `NDEBUG` is not defined is an important such assumption, so please don't remove the `NDEBUG` documentation from `src/compat/assumptions.h` :)",https://github.com/bitcoin/bitcoin/pull/20274#issuecomment-719909720,719909720,
MarcoFalke,2020-10-30 16:56:06,"This is where our `Assert` is defined, so I think it makes sense to have the compiler check here.",https://github.com/bitcoin/bitcoin/pull/20274#discussion_r515240033,515240033,src/util/check.h
hebasto,2020-10-30 17:03:38,"Honestly, I don't understand why?\n\nThe fault of the`NDEBUG` check in `compat/assumptions.h` will stop compilation (at [phase 4](https://en.cppreference.com/w/cpp/preprocessor)) as early as possible, because `LIBBITCOIN_UTIL` is the second in the sequence after `LIBBITCOIN_CRYPTO`.",https://github.com/bitcoin/bitcoin/pull/20274#discussion_r515244868,515244868,src/util/check.h
MarcoFalke,2020-10-30 17:08:54,"NDEBUG is a compile flag that can change for each compilation unit, not a fixed architecture property like the other assumptions.\n\nFor example, it might be possible to compile validation.o with NDEBUG (accidentally), the rest of Bitcoin Core without it. The resulting binary will misbehave. (Haven't checked that though).",https://github.com/bitcoin/bitcoin/pull/20274#discussion_r515248016,515248016,src/util/check.h
hebasto,2020-10-30 17:16:03,"Thanks for elaboration!\n\nSo redundant code is in `compat/assumptions.h`, right?",https://github.com/bitcoin/bitcoin/pull/20274#discussion_r515253151,515253151,src/util/check.h
MarcoFalke,2020-10-30 17:20:26,"> So redundant code is in compat/assumptions.h, right?\n\nSeems fine to remove that",https://github.com/bitcoin/bitcoin/pull/20274#discussion_r515255935,515255935,src/util/check.h
hebasto,2020-10-30 17:29:23,Updated.,https://github.com/bitcoin/bitcoin/pull/20274#discussion_r515261447,515261447,src/util/check.h
