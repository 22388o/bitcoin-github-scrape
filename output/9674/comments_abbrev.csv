pstratem,2017-02-03T01:13:25Z,Does it even matter if TRYLOCK ordering is consistent?,https://github.com/bitcoin/bitcoin/pull/9674#issuecomment-277136859,277136859,
dcousens,2017-02-03T01:18:25Z,"@pstratem if the ordering is inconsistent,  you could have a situation where two threads have both locked their respective first lock,  and unable to gain the second.",https://github.com/bitcoin/bitcoin/pull/9674#issuecomment-277137676,277137676,
pstratem,2017-02-03T01:23:22Z,"@dcousens yeah but they're try locks, so they'll fail and try again and one will eventually succeed",https://github.com/bitcoin/bitcoin/pull/9674#issuecomment-277138467,277138467,
dcousens,2017-02-03T01:29:52Z,"@pstratem in that situation,  wouldn't they both succeed on the first, and continually try again on the second [if the ordering was inconsistent]?\n\nI suppose you're right, it would get through eventually,  but,  it does seem better to avoid that if possible no?",https://github.com/bitcoin/bitcoin/pull/9674#issuecomment-277139503,277139503,
sipa,2017-02-03T01:39:17Z,"A thread doing (L1, try L2) and another doing (L2, L1) is not a problem. A thread doing (try L1, L2) and another doing (L2, L1) is a problem.",https://github.com/bitcoin/bitcoin/pull/9674#issuecomment-277141051,277141051,
TheBlueMatt,2017-02-03T03:33:18Z,"No, in this case it does not matter, but for code hygene we should generally try to (and it can matter, as @sipa points out).\n\nTurns out that, at least for our travis test cases, this lock inversion was the only one left, so DEBUG_LOCKORDER now enforces for all lock inversions.",https://github.com/bitcoin/bitcoin/pull/9674#issuecomment-277156211,277156211,
laanwj,2017-02-03T08:09:39Z,Well it simplifies the checking code at least that's a good thing...,https://github.com/bitcoin/bitcoin/pull/9674#issuecomment-277188226,277188226,
TheBlueMatt,2017-02-03T12:44:53Z,"The checking code is now also able to detect some deadlocks that it previously was unable to, though I'd have to go stare at it for a while to recall which those were.\n\nOn February 3, 2017 3:09:43 AM EST, ""Wladimir J. van der Laan"" <notifications@github.com> wrote:\n>Well it simplifies the checking code at least that's a good thing...\n>\n>-- \n>You are receiving this because you authored the th",https://github.com/bitcoin/bitcoin/pull/9674#issuecomment-277238656,277238656,
sipa,2017-02-04T00:51:51Z,"Nice, utACK 8465631845eac3db834942a4feb50f65c3401c68.",https://github.com/bitcoin/bitcoin/pull/9674#issuecomment-277402763,277402763,
TheBlueMatt,2017-02-04T21:48:54Z,"Pushed a commit that purely does style fixes (moves { up to the same line as if). Would like to see the agressive DEBUG_LOCKORDER assertions in 0.14rc1 for testers, but its not the end of the world to miss.",https://github.com/bitcoin/bitcoin/pull/9674#issuecomment-277480464,277480464,
gmaxwell,2017-02-04T22:37:47Z,I think this should go in 0.14. utACK.,https://github.com/bitcoin/bitcoin/pull/9674#issuecomment-277483285,277483285,
gmaxwell,2017-02-08T04:11:55Z,ACK.,https://github.com/bitcoin/bitcoin/pull/9674#issuecomment-278224379,278224379,
theuni,2017-02-08T06:56:14Z,utACK 618ee9249b178d94911ea66cb4b5291f000ef1fb,https://github.com/bitcoin/bitcoin/pull/9674#issuecomment-278244891,278244891,
laanwj,2017-02-08T13:49:22Z,"> Would like to see the agressive DEBUG_LOCKORDER assertions in 0.14rc1 for testers\n\nNote that we don't build releases (and neither release candidates) with DEBUG_LOCKORDER enabled.",https://github.com/bitcoin/bitcoin/pull/9674#issuecomment-278333394,278333394,
TheBlueMatt,2017-02-08T14:03:08Z,"I'm aware, but I hope some testers do, if only other devs.\n\nOn February 8, 2017 8:49:27 AM EST, ""Wladimir J. van der Laan"" <notifications@github.com> wrote:\n>> Would like to see the agressive DEBUG_LOCKORDER assertions in 0.14rc1\n>for testers\n>\n>Note that we don't build releases (and neither release candidates) with\n>DEBUG_LOCKORDER enabled.\n>\n>-- \n>You are receiving this because you aut",https://github.com/bitcoin/bitcoin/pull/9674#issuecomment-278336679,278336679,
sipa,2017-02-04T00:47:34Z,Can you fix style here?,https://github.com/bitcoin/bitcoin/pull/9674#discussion_r99450951,99450951,src/net.cpp
ryanofsky,2017-02-07T18:58:29Z,"Do you need to get rid of the if (!fTry) condition below in push_lock() to make this happen with trylocks?\n\nAlso, it doesn't appear to that invlockorders variable is ever used here. Can it be deleted?",https://github.com/bitcoin/bitcoin/pull/9674#discussion_r99899999,99899999,src/sync.cpp
ryanofsky,2017-02-07T19:09:28Z,"Never mind about invlockorders, seems to be needed to clean up lockorders when the lock is deleted.",https://github.com/bitcoin/bitcoin/pull/9674#discussion_r99902574,99902574,src/sync.cpp
