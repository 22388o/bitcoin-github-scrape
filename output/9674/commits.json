[
  {
    "sha": "fd13eca147be80f3ebd1a5a1db1ce75bbeeb1953",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmZDEzZWNhMTQ3YmU4MGYzZWJkMWE1YTFkYjFjZTc1YmJlZWIxOTUz",
    "commit": {
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-02-03T01:03:46Z"
      },
      "committer": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-02-03T01:03:46Z"
      },
      "message": "Lock cs_vSend and cs_inventory in a consistent order even in TRY",
      "tree": {
        "sha": "20264c24f6a72441d97670f977f9a8cc86ed89aa",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/20264c24f6a72441d97670f977f9a8cc86ed89aa"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fd13eca147be80f3ebd1a5a1db1ce75bbeeb1953",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fd13eca147be80f3ebd1a5a1db1ce75bbeeb1953",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fd13eca147be80f3ebd1a5a1db1ce75bbeeb1953",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fd13eca147be80f3ebd1a5a1db1ce75bbeeb1953/comments",
    "author": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "1c2edd9f6707d16c03ecfba094b1cfec2ddc4dce",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1c2edd9f6707d16c03ecfba094b1cfec2ddc4dce",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/1c2edd9f6707d16c03ecfba094b1cfec2ddc4dce"
      }
    ],
    "stats": {
      "total": 11,
      "additions": 6,
      "deletions": 5
    },
    "files": [
      {
        "sha": "5cddc6f44dcc026a342f0d90643ec39441207c3a",
        "filename": "src/net.cpp",
        "status": "modified",
        "additions": 6,
        "deletions": 5,
        "changes": 11,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fd13eca147be80f3ebd1a5a1db1ce75bbeeb1953/src/net.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fd13eca147be80f3ebd1a5a1db1ce75bbeeb1953/src/net.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/net.cpp?ref=fd13eca147be80f3ebd1a5a1db1ce75bbeeb1953",
        "patch": "@@ -1070,12 +1070,13 @@ void CConnman::ThreadSocketHandler()\n                 {\n                     bool fDelete = false;\n                     {\n-                        TRY_LOCK(pnode->cs_vSend, lockSend);\n-                        if (lockSend)\n+                        TRY_LOCK(pnode->cs_inventory, lockInv);\n+                        if (lockInv)\n                         {\n-                                TRY_LOCK(pnode->cs_inventory, lockInv);\n-                                if (lockInv)\n-                                    fDelete = true;\n+                            TRY_LOCK(pnode->cs_vSend, lockSend);\n+                            if (lockSend) {\n+                                fDelete = true;\n+                            }\n                         }\n                     }\n                     if (fDelete)"
      }
    ]
  },
  {
    "sha": "8465631845eac3db834942a4feb50f65c3401c68",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo4NDY1NjMxODQ1ZWFjM2RiODM0OTQyYTRmZWI1MGY2NWMzNDAxYzY4",
    "commit": {
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-02-03T03:22:01Z"
      },
      "committer": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-02-03T03:31:27Z"
      },
      "message": "Always enforce lock strict lock ordering (try or not)",
      "tree": {
        "sha": "cdd5873fa56481570050a64ef6216cf5a880e5de",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/cdd5873fa56481570050a64ef6216cf5a880e5de"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8465631845eac3db834942a4feb50f65c3401c68",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8465631845eac3db834942a4feb50f65c3401c68",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/8465631845eac3db834942a4feb50f65c3401c68",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8465631845eac3db834942a4feb50f65c3401c68/comments",
    "author": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "fd13eca147be80f3ebd1a5a1db1ce75bbeeb1953",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fd13eca147be80f3ebd1a5a1db1ce75bbeeb1953",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/fd13eca147be80f3ebd1a5a1db1ce75bbeeb1953"
      }
    ],
    "stats": {
      "total": 26,
      "additions": 1,
      "deletions": 25
    },
    "files": [
      {
        "sha": "25773f08e9830f69322cff0294ec5fe2cdb986b8",
        "filename": "src/sync.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 25,
        "changes": 26,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8465631845eac3db834942a4feb50f65c3401c68/src/sync.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8465631845eac3db834942a4feb50f65c3401c68/src/sync.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/sync.cpp?ref=8465631845eac3db834942a4feb50f65c3401c68",
        "patch": "@@ -77,52 +77,28 @@ boost::thread_specific_ptr<LockStack> lockstack;\n \n static void potential_deadlock_detected(const std::pair<void*, void*>& mismatch, const LockStack& s1, const LockStack& s2)\n {\n-    // We attempt to not assert on probably-not deadlocks by assuming that\n-    // a try lock will immediately have otherwise bailed if it had\n-    // failed to get the lock\n-    // We do this by, for the locks which triggered the potential deadlock,\n-    // in either lockorder, checking that the second of the two which is locked\n-    // is only a TRY_LOCK, ignoring locks if they are reentrant.\n-    bool firstLocked = false;\n-    bool secondLocked = false;\n-    bool onlyMaybeDeadlock = false;\n-\n     LogPrintf(\"POTENTIAL DEADLOCK DETECTED\\n\");\n     LogPrintf(\"Previous lock order was:\\n\");\n     BOOST_FOREACH (const PAIRTYPE(void*, CLockLocation) & i, s2) {\n         if (i.first == mismatch.first) {\n             LogPrintf(\" (1)\");\n-            if (!firstLocked && secondLocked && i.second.fTry)\n-                onlyMaybeDeadlock = true;\n-            firstLocked = true;\n         }\n         if (i.first == mismatch.second) {\n             LogPrintf(\" (2)\");\n-            if (!secondLocked && firstLocked && i.second.fTry)\n-                onlyMaybeDeadlock = true;\n-            secondLocked = true;\n         }\n         LogPrintf(\" %s\\n\", i.second.ToString());\n     }\n-    firstLocked = false;\n-    secondLocked = false;\n     LogPrintf(\"Current lock order is:\\n\");\n     BOOST_FOREACH (const PAIRTYPE(void*, CLockLocation) & i, s1) {\n         if (i.first == mismatch.first) {\n             LogPrintf(\" (1)\");\n-            if (!firstLocked && secondLocked && i.second.fTry)\n-                onlyMaybeDeadlock = true;\n-            firstLocked = true;\n         }\n         if (i.first == mismatch.second) {\n             LogPrintf(\" (2)\");\n-            if (!secondLocked && firstLocked && i.second.fTry)\n-                onlyMaybeDeadlock = true;\n-            secondLocked = true;\n         }\n         LogPrintf(\" %s\\n\", i.second.ToString());\n     }\n-    assert(onlyMaybeDeadlock);\n+    assert(false);\n }\n \n static void push_lock(void* c, const CLockLocation& locklocation, bool fTry)"
      }
    ]
  },
  {
    "sha": "2a962d4540a253f63803d1f145fa26b938e69633",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyYTk2MmQ0NTQwYTI1M2Y2MzgwM2QxZjE0NWZhMjZiOTM4ZTY5NjMz",
    "commit": {
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-02-04T21:44:05Z"
      },
      "committer": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-02-04T21:44:05Z"
      },
      "message": "Fixup style a bit by moving { to the same line as if statements",
      "tree": {
        "sha": "79ec56379d85434fd8b7672647754fb529b246ca",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/79ec56379d85434fd8b7672647754fb529b246ca"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2a962d4540a253f63803d1f145fa26b938e69633",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2a962d4540a253f63803d1f145fa26b938e69633",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/2a962d4540a253f63803d1f145fa26b938e69633",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2a962d4540a253f63803d1f145fa26b938e69633/comments",
    "author": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "8465631845eac3db834942a4feb50f65c3401c68",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8465631845eac3db834942a4feb50f65c3401c68",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/8465631845eac3db834942a4feb50f65c3401c68"
      }
    ],
    "stats": {
      "total": 9,
      "additions": 3,
      "deletions": 6
    },
    "files": [
      {
        "sha": "704d3b8d34fd848de48dd3f98d4fc534a5242b7a",
        "filename": "src/net.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 6,
        "changes": 9,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2a962d4540a253f63803d1f145fa26b938e69633/src/net.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2a962d4540a253f63803d1f145fa26b938e69633/src/net.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/net.cpp?ref=2a962d4540a253f63803d1f145fa26b938e69633",
        "patch": "@@ -1066,21 +1066,18 @@ void CConnman::ThreadSocketHandler()\n             BOOST_FOREACH(CNode* pnode, vNodesDisconnectedCopy)\n             {\n                 // wait until threads are done using it\n-                if (pnode->GetRefCount() <= 0)\n-                {\n+                if (pnode->GetRefCount() <= 0) {\n                     bool fDelete = false;\n                     {\n                         TRY_LOCK(pnode->cs_inventory, lockInv);\n-                        if (lockInv)\n-                        {\n+                        if (lockInv) {\n                             TRY_LOCK(pnode->cs_vSend, lockSend);\n                             if (lockSend) {\n                                 fDelete = true;\n                             }\n                         }\n                     }\n-                    if (fDelete)\n-                    {\n+                    if (fDelete) {\n                         vNodesDisconnected.remove(pnode);\n                         DeleteNode(pnode);\n                     }"
      }
    ]
  },
  {
    "sha": "618ee9249b178d94911ea66cb4b5291f000ef1fb",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo2MThlZTkyNDliMTc4ZDk0OTExZWE2NmNiNGI1MjkxZjAwMGVmMWZi",
    "commit": {
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-02-07T19:15:28Z"
      },
      "committer": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2017-02-07T19:15:28Z"
      },
      "message": "Further-enforce lockordering by enforcing directly after TRY_LOCKs",
      "tree": {
        "sha": "dde47fee6a3afbdd91f54b35173e25812509de87",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/dde47fee6a3afbdd91f54b35173e25812509de87"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/618ee9249b178d94911ea66cb4b5291f000ef1fb",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/618ee9249b178d94911ea66cb4b5291f000ef1fb",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/618ee9249b178d94911ea66cb4b5291f000ef1fb",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/618ee9249b178d94911ea66cb4b5291f000ef1fb/comments",
    "author": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "2a962d4540a253f63803d1f145fa26b938e69633",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2a962d4540a253f63803d1f145fa26b938e69633",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/2a962d4540a253f63803d1f145fa26b938e69633"
      }
    ],
    "stats": {
      "total": 28,
      "additions": 13,
      "deletions": 15
    },
    "files": [
      {
        "sha": "fce57f1df9f72ed068afae3a505a69dd67f6a1ac",
        "filename": "src/sync.cpp",
        "status": "modified",
        "additions": 13,
        "deletions": 15,
        "changes": 28,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/618ee9249b178d94911ea66cb4b5291f000ef1fb/src/sync.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/618ee9249b178d94911ea66cb4b5291f000ef1fb/src/sync.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/sync.cpp?ref=618ee9249b178d94911ea66cb4b5291f000ef1fb",
        "patch": "@@ -110,21 +110,19 @@ static void push_lock(void* c, const CLockLocation& locklocation, bool fTry)\n \n     (*lockstack).push_back(std::make_pair(c, locklocation));\n \n-    if (!fTry) {\n-        BOOST_FOREACH (const PAIRTYPE(void*, CLockLocation) & i, (*lockstack)) {\n-            if (i.first == c)\n-                break;\n-\n-            std::pair<void*, void*> p1 = std::make_pair(i.first, c);\n-            if (lockdata.lockorders.count(p1))\n-                continue;\n-            lockdata.lockorders[p1] = (*lockstack);\n-\n-            std::pair<void*, void*> p2 = std::make_pair(c, i.first);\n-            lockdata.invlockorders.insert(p2);\n-            if (lockdata.lockorders.count(p2))\n-                potential_deadlock_detected(p1, lockdata.lockorders[p2], lockdata.lockorders[p1]);\n-        }\n+    BOOST_FOREACH (const PAIRTYPE(void*, CLockLocation) & i, (*lockstack)) {\n+        if (i.first == c)\n+            break;\n+\n+        std::pair<void*, void*> p1 = std::make_pair(i.first, c);\n+        if (lockdata.lockorders.count(p1))\n+            continue;\n+        lockdata.lockorders[p1] = (*lockstack);\n+\n+        std::pair<void*, void*> p2 = std::make_pair(c, i.first);\n+        lockdata.invlockorders.insert(p2);\n+        if (lockdata.lockorders.count(p2))\n+            potential_deadlock_detected(p1, lockdata.lockorders[p2], lockdata.lockorders[p1]);\n     }\n }\n "
      }
    ]
  }
]