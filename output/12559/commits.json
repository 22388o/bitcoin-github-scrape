[
  {
    "sha": "00f58f8c48db05dce9dceed73a0028482e037f0f",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowMGY1OGY4YzQ4ZGIwNWRjZTlkY2VlZDczYTAwMjg0ODJlMDM3ZjBm",
    "commit": {
      "author": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2018-08-23T00:46:59Z"
      },
      "committer": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2018-08-23T00:46:59Z"
      },
      "message": "rpc: Avoid locking cs_main in some wallet RPC",
      "tree": {
        "sha": "687820f04f1b6115a92144d6449a0498d936beb5",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/687820f04f1b6115a92144d6449a0498d936beb5"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/00f58f8c48db05dce9dceed73a0028482e037f0f",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/00f58f8c48db05dce9dceed73a0028482e037f0f",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/00f58f8c48db05dce9dceed73a0028482e037f0f",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/00f58f8c48db05dce9dceed73a0028482e037f0f/comments",
    "author": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "1b04b55f2d22078ca79cd38fc1078e15fa9cbe94",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1b04b55f2d22078ca79cd38fc1078e15fa9cbe94",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/1b04b55f2d22078ca79cd38fc1078e15fa9cbe94"
      }
    ],
    "stats": {
      "total": 7,
      "additions": 3,
      "deletions": 4
    },
    "files": [
      {
        "sha": "637c9f73ab953b976e512a6ff7fd7e21fc33ed10",
        "filename": "src/rpc/rawtransaction.cpp",
        "status": "modified",
        "additions": 0,
        "deletions": 1,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/00f58f8c48db05dce9dceed73a0028482e037f0f/src/rpc/rawtransaction.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/00f58f8c48db05dce9dceed73a0028482e037f0f/src/rpc/rawtransaction.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/rawtransaction.cpp?ref=00f58f8c48db05dce9dceed73a0028482e037f0f",
        "patch": "@@ -562,7 +562,6 @@ static UniValue decoderawtransaction(const JSONRPCRequest& request)\n             + HelpExampleRpc(\"decoderawtransaction\", \"\\\"hexstring\\\"\")\n         );\n \n-    LOCK(cs_main);\n     RPCTypeCheck(request.params, {UniValue::VSTR, UniValue::VBOOL});\n \n     CMutableTransaction mtx;"
      },
      {
        "sha": "c0c59da7bd3c9f2d809b66596ed3120fe16cc1a0",
        "filename": "src/wallet/rpcwallet.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/00f58f8c48db05dce9dceed73a0028482e037f0f/src/wallet/rpcwallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/00f58f8c48db05dce9dceed73a0028482e037f0f/src/wallet/rpcwallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/rpcwallet.cpp?ref=00f58f8c48db05dce9dceed73a0028482e037f0f",
        "patch": "@@ -165,7 +165,7 @@ static UniValue getnewaddress(const JSONRPCRequest& request)\n         throw JSONRPCError(RPC_WALLET_ERROR, \"Error: Private keys are disabled for this wallet\");\n     }\n \n-    LOCK2(cs_main, pwallet->cs_wallet);\n+    LOCK(pwallet->cs_wallet);\n \n     // Parse the label first so we don't generate a key if there's an error\n     std::string label;\n@@ -276,7 +276,7 @@ static UniValue getrawchangeaddress(const JSONRPCRequest& request)\n         throw JSONRPCError(RPC_WALLET_ERROR, \"Error: Private keys are disabled for this wallet\");\n     }\n \n-    LOCK2(cs_main, pwallet->cs_wallet);\n+    LOCK(pwallet->cs_wallet);\n \n     if (!pwallet->IsLocked()) {\n         pwallet->TopUpKeyPool();\n@@ -331,7 +331,7 @@ static UniValue setlabel(const JSONRPCRequest& request)\n             + HelpExampleRpc(\"setlabel\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XX\\\", \\\"tabby\\\"\")\n         );\n \n-    LOCK2(cs_main, pwallet->cs_wallet);\n+    LOCK(pwallet->cs_wallet);\n \n     CTxDestination dest = DecodeDestination(request.params[0].get_str());\n     if (!IsValidDestination(dest)) {"
      }
    ]
  }
]