gmaxwell,2012-05-19T01:41:34Z,I've started testing this some—  I think that after some more review (and perhaps some minor cleanups) we should pull this.  I've long supported having it— there are some use-cases where it's handy and it fosters a deeper understanding of the Bitcoin system\n\nAt the same time I'm concerned that it's quite rough from an interface perspective (the multiselect on another tab driving a text field wit,https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-5798765,5798765,
sipa,2012-05-19T10:49:57Z,"I certainly agree we need to have this merged. I think the functionality it adds is limited (it feels like micro-management where more high-level constructions should be used instead), but its educational value is very high. It helps breaking the ""bitcoin-transactions-as-a-ledger"" abstraction (without txins/txouts/change/keys/blocks) for those who want to learn the inner workings (and at least for",https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-5800901,5800901,
Diapolo,2012-05-19T23:29:57Z,Is this UI-wise harmonized with other used dialogs (e.g. add as many settings as possible into the XML-file and remove code)?\n,https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-5805551,5805551,
gmaxwell,2012-05-20T06:50:33Z,"From reports in #bitcoin, it sounds like you just get a Transaction Failed when fees are required  when the inputs selected don't have enough coin to pay the fee. (e.g. no fee request dialog or anything). This is a little confusing and should be fixed eventually. \n",https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-5806980,5806980,
luke-jr,2012-06-04T16:56:22Z,Rebased on top of #1416 to split Coin Control from selection refactoring.\n,https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6104075,6104075,
dooglus,2012-06-04T18:57:09Z,Thanks Luke.  Sorry I wasn't able to do that for you.\n,https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6107226,6107226,
ghost,2012-06-08T21:11:10Z,"I was having trouble using this fork with the bitcoinrpc interface. Problem was, the sendFromAddressRestriction variable in cwallet was never getting set, so I would specify a list of ""from"" addresses and the system would ignore them, processing my transaction as if I hadn't specified them.\n\nI eventually traced the problem to this line:\n\nCScopedSendFromAddressRestrictionstd::set<std::string >(",https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6213149,6213149,
luke-jr,2012-06-08T21:51:01Z,Good catch. Fixed.\n,https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6213908,6213908,
tril0byte,2012-06-15T16:18:14Z,"Luke, this branch doesn't build on debian squeeze (libqt4-dev 4:4.6.3-4+squeeze1),\n\nIn file included from src/qt/sendcoinsdialog.cpp:2:\nbuild/ui_sendcoinsdialog.h: In member function ‘void Ui_SendCoinsDialog::retranslateUi(QDialog_)’:\nbuild/ui_sendcoinsdialog.h:167: error: ‘class QLineEdit’ has no member named ‘setPlaceholderText’\nmake: *_\* [build/sendcoinsdialog.o] Error 1\n\nThis is the sa",https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6360517,6360517,
luke-jr,2012-06-15T17:04:49Z,"@tril0byte That bug is in git master for now, not related to this at all.\n",https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6361512,6361512,
luke-jr,2012-06-15T18:42:57Z,"@Diapolo Please post on the pullrequest (you're posting on an old commit). I don't foresee this getting merged any time soon, unless someone steps up to clean it up - including your changes. If you'd prefer, I can merge a patch you make into my branch.\n",https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6363645,6363645,
Diapolo,2012-06-15T18:59:25Z,"@luke-jr It seems I took a route to a dead-end ... dunno how that happened, had no beer yet ^^. If you are willing to teach me the Git magic I need to do to be able to create a patch, you're welcome :). Do I need to fork your repo and create a pull or is there another way?\n",https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6364019,6364019,
luke-jr,2012-06-15T19:10:45Z,@Diapolo\n\n```\ngit remote add luke-jr git://gitorious.org/~Luke-Jr/bitcoin/luke-jr-bitcoin.git\ngit fetch luke-jr\ngit checkout luke-jr/coincontrol -b coincontrol\n# make your changes\ngit commit -a\ngit push # however you normally do it!\n```\n\nThen just point me at your branch...\n,https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6364237,6364237,
Diapolo,2012-06-17T15:20:26Z,"luke-jr: I'm going to start here, when some of my last GUI commits get merged or final, okay?\n",https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6381916,6381916,
Diapolo,2012-06-18T08:03:25Z,"Thanks for the git commands, I now have that branch and can start working with :).\n",https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6390197,6390197,
Diapolo,2012-06-18T18:27:19Z,@luke-jr https://github.com/Diapolo/bitcoin/tree/coincontrol\n,https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6404747,6404747,
luke-jr,2012-06-18T21:49:09Z,Rebased with @Diapolo 's changes.\n,https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6410195,6410195,
dooglus,2012-06-19T00:21:24Z,"Is src/qt/forms/coincontrolpage.ui meant to be in this commit?\n\nqmake complains:\n  WARNING: Failure to find: src/qt/forms/coincontrolpage.ui\n\nand make errors:\n  make: **\* No rule to make target `src/qt/forms/coincontrolpage.ui', needed by`build/ui_coincontrolpage.h'.  Stop.\n",https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6413013,6413013,
luke-jr,2012-06-19T00:48:07Z,Fixed\n,https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6413355,6413355,
Diapolo,2012-06-19T05:48:06Z,@luke-jr You merged the whole patch ;)?\n,https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6416542,6416542,
luke-jr,2012-06-19T05:54:17Z,"Yes, but it doesn't work  :(\n",https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6416589,6416589,
Diapolo,2012-06-19T05:56:35Z,"What does not work? You did try it before merging, no?\n\n@dooglus: Yes I added that .ui file. Anything wrong with it?\n",https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6416617,6416617,
dooglus,2012-06-19T05:58:12Z,"This is what I see:\n\n```\nProgram received signal SIGSEGV, Segmentation fault.\n0x081d34f4 in OptionsModel::getDisplayUnit() ()\n(gdb) where\n#0  0x081d34f4 in OptionsModel::getDisplayUnit() ()\n#1  0x0809b429 in CoinControlPage::UpdateTable() ()\n#2  0x08087113 in BitcoinGUI::gotoCoinControlPage() ()\n#3  0x08260af8 in BitcoinGUI::qt_static_metacall(QObject*, QMetaObject::Call, int, void**) ()\",https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6416628,6416628,
Diapolo,2012-06-19T06:04:48Z,Is `OptionsModel::getDisplayUnit()` the function which starts with that seg-fault?\nDid you ever set the display unit via optionsdialog before?\n\nWhat happens if you comment out in coincontrolpage.cpp:\n\n<pre>\n    if(model)\n        unit = model->getDisplayUnit();\n</pre>\n,https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6416705,6416705,
dooglus,2012-06-19T06:07:18Z,"The .ui file didn't find its way into Luke's branch at first, but it's there now.\n\nThe display unit is set to BTC.  Changing it causes the amounts shown in other tabs to change as expected.\n\nCommenting out those 2 lines fixes the problem, and then everything seems to work.\n",https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6416727,6416727,
Diapolo,2012-06-19T06:11:45Z,"@dooglus I'm glad this hot-fixes the segfault ... will have to check this in depth later. Strange thing is that does not happen for me on Windows. Thanks for testing my patch. I'm willing to bring this forward now GUI wise and perhaps we can fix the ""bad"" internals somehow to get this merged in the near future?\n",https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6416766,6416766,
dooglus,2012-06-19T06:57:32Z,"I think the problem is that CoinControlPage::setModel(OptionsModel *model) isn't being called, and so the model pointer is uninitialised.  I don't know how you get away with indirecting through it on Windows.  Oh, except that it's probably 0 on Windows, so the if(model) check prevents the pointer being used.\n\nWhat if you switch to mBTC - does the coin control page show mBTC values for you?\n",https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6417384,6417384,
dooglus,2012-06-19T07:51:06Z,"This fixes the crash for me without commenting out the 2 lines you suggested, indicating that an uninitialised 'model' member is indeed the cause of the trouble:\n\n```\ndiff --git a/src/qt/coincontrolpage.cpp b/src/qt/coincontrolpage.cpp\nindex 3be6813..c7290b9 100644\n--- a/src/qt/coincontrolpage.cpp\n+++ b/src/qt/coincontrolpage.cpp\n@@ -20,6 +20,7 @@ CoinControlPage::CoinControlPage(QWidget *p",https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6418503,6418503,
Diapolo,2012-06-19T09:24:25Z,"@dooglus Great, yes this will fix it ... currently model is not initialized to 0. This should be done via:\n\n<pre>\nCoinControlPage::CoinControlPage(QWidget *parent) :\n    QDialog(parent),\n    ui(new Ui::CoinControlPage),\n    model(0)\n</pre>\n\n\nWill create a patch later... btw. I find it hard to follow the changes when they occur as rebase. Shall we just use seperate commits for now and reb",https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6420219,6420219,
dooglus,2012-06-19T09:26:25Z,"That's not enough to fix the real problem though.  We need to arrange for setModel to be called somehow, or it will always be 0.\n",https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6420264,6420264,
Diapolo,2012-06-19T09:27:45Z,"It is called in bitcoingui.cpp, see https://github.com/bitcoin/bitcoin/pull/1359/files#L2R393\n\nThere are several things todo for the GUI, e.g. update units when you change them in optionsdialog, but that is in the pipe :).\n",https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6420282,6420282,
luke-jr,2012-06-19T15:17:09Z,Umm... guys... I fixed this last night :p\n,https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6427734,6427734,
Diapolo,2012-06-19T16:20:09Z,"While we were discussing this was not available here ... as I wrote above can we work with seperate commits until we are final? It's impossible to track changes when it's rebased all the time.\n\nI would also like to use model(0) as everywhere else in the GUI part of the code, not NULL.\n",https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6429793,6429793,
luke-jr,2012-06-19T16:29:06Z,"I suppose separate commits makes sense for this one...\n\nNULL is correct here. 0 is an integer, not a pointer.\n",https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6430106,6430106,
Diapolo,2012-06-19T16:30:11Z,Can you tell @laanwj he uses a wrong init value all over the GUI.\n\nBtw: http://www2.research.att.com/~bs/bs_faq2.html#null\n,https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6430146,6430146,
Diapolo,2012-06-19T16:36:18Z,"How can I update my local repo with the now current version?\n\n`git fetch luke-jr`\n`git rebase luke-jr/coincontrol`\n\nSeems to generate to much merge-conflicts, so I believe there is sth. wrong.\n",https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6430332,6430332,
luke-jr,2012-06-19T16:58:31Z,This will discard all local changes and commits in your current branch and set its HEAD to latest coincontrol:\n\n```\ngit reset --hard luke-jr/coincontrol\n```\n,https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6430992,6430992,
Diapolo,2012-06-19T17:04:59Z,"@luke-jr But this should be safe, as you merged my patch and did only some small further changes, right? When I have a new commit, how shall we proceed further?\n",https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6431184,6431184,
luke-jr,2012-06-19T17:07:23Z,"I did not merge your changes unrelated to coin control. To see the difference between your current HEAD and my coincontrol, do:\n\n```\ngit diff luke-jr/coincontrol\n```\n",https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6431241,6431241,
Diapolo,2012-06-19T17:10:13Z,"@laanwj That post was purely ironic, I want all of them to be 0 to stay consistent, nothing more :).\n",https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6431329,6431329,
Diapolo,2012-06-21T13:18:13Z,"@luke-jr That `git diff luke-jr/coincontrol` doesn't help, as it's too much difference ... I regularly rebase patches to current master, but coincontrol seems to be not up to date, which makes comparing the branches very hard. My joy to push here fades away, when I don't know what you left out of my patch or changed for yourself. Things you consider unrelated (even if that may be true feature-wise",https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6481900,6481900,
luke-jr,2012-06-21T15:30:40Z,Don't put unrelated things in pulls.\n,https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6485222,6485222,
dooglus,2012-06-25T07:02:21Z,"I would like this extended to work on individual coins, if possible.  Currently I can see the balance at each address, but can't tell how many separate transaction outputs each address balance corresponds to, and can't select individual outputs to spend.\n\nI'd also like it if all the selected inputs (whether addresses or individual 'coins') were summed so I know how the value of the selected coin",https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6540824,6540824,
gmaxwell,2012-06-25T07:06:19Z,"@dooglus   I was thinking it would be interesting if it supported a hierarchy— accounts/labels  /  addresses / inputs,  and if you could select groups at each level (e.g. select an account to get all its addresses and all their inputs, select an address to get all its inputs)— with each level showing a subtotal, and there being a total of selected.  Also a 'select all', which would then let you go",https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6540869,6540869,
dooglus,2012-06-25T07:32:51Z,Accounts are something different I think.  There's no direct correspondence between addresses and accounts is there?  It's possible to move coins from one account to another without creating a transaction.\n\nBut it could work with labels.  It's possible to have the same label on multiple addresses.\n,https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6541191,6541191,
sipa,2012-06-25T09:21:39Z,"_Receive_ addresses are associated with an account. Coins that originally arrived via an address that - at the time - was associated with an account, remain associated to that account.\n\nSplitting the available coin list based on account is dangerous I think, as it will re-enforce the notion that coins belong to an account. Splitting per destination address is fine, imho.\n",https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6542938,6542938,
gmaxwell,2012-06-25T13:50:11Z,@sipa  fair enough.\n,https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6547702,6547702,
luke-jr,2012-07-11T05:29:36Z,Rebased with more of @Diapolo 's GUI improvements\n,https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6898469,6898469,
dooglus,2012-07-11T06:28:12Z,"@luke-jr I just built your rebased version from an hour ago.  The coin control tab is now lacking a scrollbar.  I can scroll the contents using the right-hand edge of the touchpad (probably that's simulating a mouse's scrollwheel), but the scrollbar itself is missing.  It was there the last time I built from your same branch.\n\nI can't see what you've changed because it appears that you've overwr",https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6899086,6899086,
Diapolo,2012-07-11T06:35:34Z,"@dooglus As I currently don't work on this (e.g. found it boring to discuss about cosmetic changes that luke refused to accept, no commits, lack of under the hood updates etc.) I can only guess, that perhaps in the UI file scrollbars are disabled?\n",https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6899194,6899194,
dooglus,2012-07-11T06:41:09Z,"@Diapolo It's a shame.  I find it to be a useful feature to have, but after rebasing it over and over I too had to give up on it.\n",https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6899272,6899272,
Diapolo,2012-07-11T06:49:17Z,"@dooglus I put great efforts in improving parts of the GUI client over the last weeks, but I think it could need a few more helping hands. You are absolutely right!\n",https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6899388,6899388,
luke-jr,2012-07-11T06:54:16Z,"@dooglus Yes, I see that @Diapolo 's latest changes removed the scrollbar. I'll add it back, I suppose.\n\nAs far as just adding commits, I had intended to just pull (fast-forward style) from others. Unfortunately @Diapolo did his own rebasing and merging of his old changes with his new changes, so I had to dig them out and merge them in by hand (so not even cherry-picking would work). And then th",https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6899450,6899450,
Diapolo,2012-07-11T09:04:19Z,"@luke-jr I like your feedback most of the time as coding-wise it's valuable ... but most of the time a team-play like here (where you are the master-chief of this patch currently) seems to not work. I rebase all my patches agains the current master in regular intervals, which minimizes merge-conflicts. And coding-style wise we have different points of view.\n",https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-6901504,6901504,
jgarzik,2012-08-01T16:30:21Z,"Consensus:  we like ""listaddressgroupings"", and request that that be submitted in a new pull request.\n\nThe current UI, as proposed, is superceded by the raw transaction RPC API, which permits full coin control, and is accessible via the GUI RPC console.\n\nFull discussion took place on #bitcoin-dev around ~12:30PM EDT August 1.\n",https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-7432276,7432276,
rebroad,2012-12-23T17:15:49Z,so.. what's happening with this? Is this the best pull to use currently for coin control?\n,https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-11648126,11648126,
gmaxwell,2012-12-23T18:54:59Z,It's closed. There is no current pull.  Enough was merged so that you could spend unlinked inputs manually with the raw transaction API— as not a single person was willing to step up to maintain the GUI stuff.\n,https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-11649269,11649269,
eldentyrell,2013-03-04T22:51:24Z,"> Enough was merged so that you could spend unlinked inputs manually with the raw transaction API\n\nThat's nice, but if the raw transaction API were a substitute for the GUI the client wouldn't have a GUI in the first place.\n\n> not a single person was willing to step up to maintain the GUI stuff\n\nNot merging this is causing people to refuse to upgrade.  Just keep that in mind.\n",https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-14411941,14411941,
gmaxwell,2013-03-04T23:22:21Z,@eldentyrell  Perhaps you are interested in Pull #2343 ? \n,https://github.com/bitcoin/bitcoin/pull/1359#issuecomment-14413412,14413412,
sipa,2012-05-19T00:34:57Z,bah!\n,https://github.com/bitcoin/bitcoin/pull/1359#discussion_r848868,848868,src/wallet.h
sipa,2012-05-19T00:42:30Z,A bit more elaborate: why is the coin selection a property of CWallet being set and unset? It should just be passed to the coin selection functions.\n,https://github.com/bitcoin/bitcoin/pull/1359#discussion_r848881,848881,src/wallet.h
Diapolo,2012-06-15T18:02:04Z,"This should indeed be moved to SendCoinsDialog::SendCoinsDialog() via as it's considered standard to currently not use the placeholderText property in ui-files.\n\n<pre>\n#if (QT_VERSION >= 0x040700)\n    /* Do not move this to the XML file, Qt before 4.7 will choke on it */\n    ui->sendFrom->setPlaceholderText(tr(""Restrict the client to only send from these Bitcoin addresses.""));\n#endif\n</pre>",https://github.com/bitcoin/bitcoin/pull/1359#discussion_r994662,994662,src/qt/forms/sendcoinsdialog.ui
Diapolo,2012-06-18T09:07:47Z,Can this really safely be removed? Is this change directly related to coincontrol?\n,https://github.com/bitcoin/bitcoin/pull/1359#discussion_r999773,999773,src/wallet.cpp
mb300sd,2012-06-25T02:05:12Z,"I think this should be an object rather than an array, having trouble deserializing an array of different types. And this makes it match the output of every other command better.\n\n```\n        Object addressInfo;\n        addressInfo.push_back(Pair(""address"",       address));\n        addressInfo.push_back(Pair(""balance"",       ValueFromAmount(balances[address])));\n        {\n            LOCK(p",https://github.com/bitcoin/bitcoin/pull/1359#discussion_r1039642,1039642,src/bitcoinrpc.cpp
mb300sd,2012-06-25T03:33:42Z,"I also added an option to hide the groups/addresses that have 0 balance. Might be useful for someone else as well. \n\nHeres a diff, I haven't figured out how to use git yet. :(\nhttp://pastebin.com/YSRxKBqx\n",https://github.com/bitcoin/bitcoin/pull/1359#discussion_r1039831,1039831,src/bitcoinrpc.cpp
Diapolo,2012-06-25T05:01:40Z,I think every progress here is a good thing. Perhaps luke can merge your changes. Have you setup Git on your machine yet?\n,https://github.com/bitcoin/bitcoin/pull/1359#discussion_r1039940,1039940,src/bitcoinrpc.cpp
mb300sd,2012-06-26T15:16:03Z,"I figured out how to create my own repo, but not much point forking the bitcoin code, the above is about all I have to contribute.\n",https://github.com/bitcoin/bitcoin/pull/1359#discussion_r1051682,1051682,src/bitcoinrpc.cpp
