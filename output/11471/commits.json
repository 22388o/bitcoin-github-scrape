[
  {
    "sha": "c23bd2892b892b91bbf29e9c7d5630e2c1074584",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjMjNiZDI4OTJiODkyYjkxYmJmMjllOWM3ZDU2MzBlMmMxMDc0NTg0",
    "commit": {
      "author": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2017-10-09T21:10:18Z"
      },
      "committer": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2018-03-19T03:00:11Z"
      },
      "message": "[Qt] Optimize SendToSelf rendering with a single non-change output",
      "tree": {
        "sha": "2c7055acfc19ca6023e5e0933ace7cf88147750d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2c7055acfc19ca6023e5e0933ace7cf88147750d"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c23bd2892b892b91bbf29e9c7d5630e2c1074584",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEyhopCNzi8TB0xizeHrd2uwPHki0FAlqvJ70ACgkQHrd2uwPH\nki0j1hAAnN4TuHQuYmee1ffeRUzqO+kKCL74C9sOkeQ0A3PhmV8zaRnkX3aWErFa\nRNkCLcSZzBjqNGUsxXVs6tnRyWtyBwzR9c155fK+pJlaCi4zKfp3g9es6Op6+ByN\ntY2KysibB71XDRVi/qvOOOkSPtfWFtwdwFb/tFlDRjrhKcpuuaJ9d6MTrnXVgGiA\ntctlMiM68Y0JWKsAdd+dxcAtYKcpsk/3DjTu8SVlA9DufVhWng0JIb7YSJEsf1Rn\nVouPeCGLqBQvo+Lt8E22SMVD5RCJIj7vAQHiobOzu2FNN1lYvAbWwxhfiaPAMi0o\n9YWId8P9E2CP4cTM52FnG9BXmDTQd+0/qTMfOLyghCwm+BkYedKu6bgMeXoisu8F\n42JlUWHvD4VTtlD/ENagyAFAOMMKj3c4rZVlfPbtD00LzAKlpfdjzM2Rl3kz+V0S\nKfAzwEsQ3sg7lQ6CL4J9+AhmPQusfTq3IdVuWowm4QU1I73Y6SxR4YxtDtieaKww\nFJ39JQFX0N2/E5S0Ql1GWXAJ04ehTnFfT8KlMBUp9RA38qArRszsh388lpm8VDyi\norbiXqHBokDxKOZ0m9+q/aPeKPEDAUEV8pv87EhqFthll0/JTsMOc36jzNrHiJvV\nlNd4+B4Tg9m/lkfP9FgRQEWQ4pk4Y+6P4ggHFJSwwid7voCfAFU=\n=IaE5\n-----END PGP SIGNATURE-----",
        "payload": "tree 2c7055acfc19ca6023e5e0933ace7cf88147750d\nparent e022463a4b238750476430d08b45bc9171791e6f\nauthor Jonas Schnelli <dev@jonasschnelli.ch> 1507583418 -0700\ncommitter Jonas Schnelli <dev@jonasschnelli.ch> 1521428411 +0700\n\n[Qt] Optimize SendToSelf rendering with a single non-change output\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c23bd2892b892b91bbf29e9c7d5630e2c1074584",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/c23bd2892b892b91bbf29e9c7d5630e2c1074584",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c23bd2892b892b91bbf29e9c7d5630e2c1074584/comments",
    "author": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "e022463a4b238750476430d08b45bc9171791e6f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e022463a4b238750476430d08b45bc9171791e6f",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/e022463a4b238750476430d08b45bc9171791e6f"
      }
    ],
    "stats": {
      "total": 19,
      "additions": 17,
      "deletions": 2
    },
    "files": [
      {
        "sha": "81f228869d13b1b55311a315d57e7ec3b66725ce",
        "filename": "src/qt/transactionrecord.cpp",
        "status": "modified",
        "additions": 15,
        "deletions": 2,
        "changes": 17,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c23bd2892b892b91bbf29e9c7d5630e2c1074584/src/qt/transactionrecord.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c23bd2892b892b91bbf29e9c7d5630e2c1074584/src/qt/transactionrecord.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/transactionrecord.cpp?ref=c23bd2892b892b91bbf29e9c7d5630e2c1074584",
        "patch": "@@ -94,10 +94,23 @@ QList<TransactionRecord> TransactionRecord::decomposeTransaction(const CWallet *\n \n         if (fAllFromMe && fAllToMe)\n         {\n+            std::string address;\n+            if (wtx.tx->vout.size() == 2)\n+            {\n+                for (const CTxOut& txout : wtx.tx->vout)\n+                {\n+                    if (wallet->IsChange(txout)) continue;\n+\n+                    CTxDestination destination;\n+                    if (ExtractDestination(txout.scriptPubKey, destination))\n+                    {\n+                        address = EncodeDestination(destination);\n+                    }\n+                }\n+            }\n             // Payment to self\n             CAmount nChange = wtx.GetChange();\n-\n-            parts.append(TransactionRecord(hash, nTime, TransactionRecord::SendToSelf, \"\",\n+            parts.append(TransactionRecord(hash, nTime, TransactionRecord::SendToSelf, address,\n                             -(nDebit - nChange), nCredit - nChange));\n             parts.last().involvesWatchAddress = involvesWatchAddress;   // maybe pass to TransactionRecord as constructor argument\n         }"
      },
      {
        "sha": "80776d73bd93d7e1599f2e048656b48da410e8e6",
        "filename": "src/qt/transactiontablemodel.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c23bd2892b892b91bbf29e9c7d5630e2c1074584/src/qt/transactiontablemodel.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c23bd2892b892b91bbf29e9c7d5630e2c1074584/src/qt/transactiontablemodel.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/transactiontablemodel.cpp?ref=c23bd2892b892b91bbf29e9c7d5630e2c1074584",
        "patch": "@@ -423,6 +423,8 @@ QString TransactionTableModel::formatTxToAddress(const TransactionRecord *wtx, b\n     case TransactionRecord::SendToOther:\n         return QString::fromStdString(wtx->address) + watchAddress;\n     case TransactionRecord::SendToSelf:\n+        /* Falls through. */\n+        if (!wtx->address.empty()) { return lookupAddress(wtx->address, tooltip) + watchAddress; }\n     default:\n         return tr(\"(n/a)\") + watchAddress;\n     }"
      }
    ]
  }
]