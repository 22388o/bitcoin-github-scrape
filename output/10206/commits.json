[
  {
    "sha": "9329ca0fedcf91028f7aa760deba5b628bc389e3",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo5MzI5Y2EwZmVkY2Y5MTAyOGY3YWE3NjBkZWJhNWI2MjhiYzM4OWUz",
    "commit": {
      "author": {
        "name": "Miha Vuckovic",
        "email": "miha.vuckovic@gmail.com",
        "date": "2017-04-13T21:27:31Z"
      },
      "committer": {
        "name": "Miha Vuckovic",
        "email": "miha.vuckovic@gmail.com",
        "date": "2017-04-13T21:27:31Z"
      },
      "message": "Chainparams: In ReceivedBlockTransactions()",
      "tree": {
        "sha": "db6ec18bedb770c47eef2573342c1cc759fa34fb",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/db6ec18bedb770c47eef2573342c1cc759fa34fb"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9329ca0fedcf91028f7aa760deba5b628bc389e3",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9329ca0fedcf91028f7aa760deba5b628bc389e3",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/9329ca0fedcf91028f7aa760deba5b628bc389e3",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9329ca0fedcf91028f7aa760deba5b628bc389e3/comments",
    "author": null,
    "committer": null,
    "parents": [
      {
        "sha": "70f6f56e9dde0d0eb1a51e70c051b8fa3ba9535f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/70f6f56e9dde0d0eb1a51e70c051b8fa3ba9535f",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/70f6f56e9dde0d0eb1a51e70c051b8fa3ba9535f"
      }
    ],
    "stats": {
      "total": 8,
      "additions": 4,
      "deletions": 4
    },
    "files": [
      {
        "sha": "b0d81c4f7864b8ed7406feb53d10ff76dcaa1234",
        "filename": "src/validation.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 4,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/9329ca0fedcf91028f7aa760deba5b628bc389e3/src/validation.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/9329ca0fedcf91028f7aa760deba5b628bc389e3/src/validation.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/validation.cpp?ref=9329ca0fedcf91028f7aa760deba5b628bc389e3",
        "patch": "@@ -2676,15 +2676,15 @@ CBlockIndex* AddToBlockIndex(const CBlockHeader& block)\n }\n \n /** Mark a block as having its data received and checked (up to BLOCK_VALID_TRANSACTIONS). */\n-bool ReceivedBlockTransactions(const CBlock &block, CValidationState& state, CBlockIndex *pindexNew, const CDiskBlockPos& pos)\n+bool ReceivedBlockTransactions(const CBlock &block, CValidationState& state,  const CChainParams& params, CBlockIndex *pindexNew, const CDiskBlockPos& pos)\n {\n     pindexNew->nTx = block.vtx.size();\n     pindexNew->nChainTx = 0;\n     pindexNew->nFile = pos.nFile;\n     pindexNew->nDataPos = pos.nPos;\n     pindexNew->nUndoPos = 0;\n     pindexNew->nStatus |= BLOCK_HAVE_DATA;\n-    if (IsWitnessEnabled(pindexNew->pprev, Params().GetConsensus())) {\n+    if (IsWitnessEnabled(pindexNew->pprev, params.GetConsensus())) {\n         pindexNew->nStatus |= BLOCK_OPT_WITNESS;\n     }\n     pindexNew->RaiseValidity(BLOCK_VALID_TRANSACTIONS);\n@@ -3206,7 +3206,7 @@ static bool AcceptBlock(const std::shared_ptr<const CBlock>& pblock, CValidation\n         if (dbp == NULL)\n             if (!WriteBlockToDisk(block, blockPos, chainparams.MessageStart()))\n                 AbortNode(state, \"Failed to write block\");\n-        if (!ReceivedBlockTransactions(block, state, pindex, blockPos))\n+        if (!ReceivedBlockTransactions(block, state, chainparams, pindex, blockPos))\n             return error(\"AcceptBlock(): ReceivedBlockTransactions failed\");\n     } catch (const std::runtime_error& e) {\n         return AbortNode(state, std::string(\"System error: \") + e.what());\n@@ -3837,7 +3837,7 @@ bool InitBlockIndex(const CChainParams& chainparams)\n             if (!WriteBlockToDisk(block, blockPos, chainparams.MessageStart()))\n                 return error(\"LoadBlockIndex(): writing genesis block to disk failed\");\n             CBlockIndex *pindex = AddToBlockIndex(block);\n-            if (!ReceivedBlockTransactions(block, state, pindex, blockPos))\n+            if (!ReceivedBlockTransactions(block, state, chainparams, pindex, blockPos))\n                 return error(\"LoadBlockIndex(): genesis block not accepted\");\n             // Force a chainstate write so that when we VerifyDB in a moment, it doesn't check stale data\n             return FlushStateToDisk(state, FLUSH_STATE_ALWAYS);"
      }
    ]
  }
]