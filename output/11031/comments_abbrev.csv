jnewbery,2017-08-11T17:50:34Z,"This could be made even more generic by adding additional `deprecated` field to the `CRPCTable`. That way the `IsDeprecatedRPCEnabled()` call could be added to the dispatcher instead of the individual RPC functions, and the help text could show methods as `DEPRECATED`. I didn't think that was worth doing for just this one RPC method.",https://github.com/bitcoin/bitcoin/pull/11031#issuecomment-321877466,321877466,
morcos,2017-08-11T19:27:06Z,Concept ACK,https://github.com/bitcoin/bitcoin/pull/11031#issuecomment-321898825,321898825,
jnewbery,2017-08-12T17:45:23Z,"Thanks for the thoughtful review @promag!\n\n> Mixed feelings about adding a option to enable individual methods. Why not one option to enable all existing deprecated methods?\n\nThe point of this is that it *forces* action on the user if they want to continue using a deprecated method. In version x they need to explicitly update their config to include `-enablerpcmethod=<method>`, so they hav",https://github.com/bitcoin/bitcoin/pull/11031#issuecomment-321995649,321995649,
jnewbery,2017-08-23T15:06:09Z,Thanks to @mess110 for contributing a functional test to cover the new command line option.,https://github.com/bitcoin/bitcoin/pull/11031#issuecomment-324365648,324365648,
jnewbery,2017-09-12T18:48:22Z,rebased,https://github.com/bitcoin/bitcoin/pull/11031#issuecomment-328946154,328946154,
jnewbery,2017-09-14T13:54:58Z,rebased and fixed conflict,https://github.com/bitcoin/bitcoin/pull/11031#issuecomment-329489317,329489317,
TheBlueMatt,2017-09-15T19:09:50Z,utACK dc163bca56fa10ae06874e56a2ee08af44b4be8a,https://github.com/bitcoin/bitcoin/pull/11031#issuecomment-329873716,329873716,
jonasschnelli,2017-09-17T03:57:58Z,utACK dc163bca56fa10ae06874e56a2ee08af44b4be8a,https://github.com/bitcoin/bitcoin/pull/11031#issuecomment-330017136,330017136,
MarcoFalke,2017-09-17T15:08:02Z,utACK dc163bca56fa10ae06874e56a2ee08af44b4be8a,https://github.com/bitcoin/bitcoin/pull/11031#issuecomment-330055410,330055410,
jnewbery,2017-09-18T20:14:47Z,"Updated:\n\n- fixed nits\n- fixed help text\n\nOld HEAD for this branch is here: https://github.com/jnewbery/bitcoin/releases/tag/pr11031.1",https://github.com/bitcoin/bitcoin/pull/11031#issuecomment-330342685,330342685,
meshcollider,2017-09-21T19:14:38Z,utACK https://github.com/bitcoin/bitcoin/pull/11031/commits/4efc8317c2d665d910374aff6e40989ae9917617 modulo the rename of the parameter being discussed on IRC,https://github.com/bitcoin/bitcoin/pull/11031#issuecomment-331254017,331254017,
jnewbery,2017-09-21T19:41:40Z,Changed argument name from `-enablerpcmethod` to `-deprecatedrpc` as discussed in the IRC meeting: https://botbot.me/freenode/bitcoin-core-dev/2017-09-21/?msg=91401205&page=3,https://github.com/bitcoin/bitcoin/pull/11031#issuecomment-331260535,331260535,
sipa,2017-09-22T19:06:23Z,"utACK 822ada4867a046bd5dbbdaacdef71999664c9704\n\nI really like this approach for deprecation.",https://github.com/bitcoin/bitcoin/pull/11031#issuecomment-331534576,331534576,
achow101,2017-09-26T15:56:31Z,utACK 822ada4867a046bd5dbbdaacdef71999664c9704,https://github.com/bitcoin/bitcoin/pull/11031#issuecomment-332245429,332245429,
jnewbery,2017-09-26T16:18:40Z,"fixed commit comment.\n\n@laanwj - time for merge? This PR has 9 utACKs",https://github.com/bitcoin/bitcoin/pull/11031#issuecomment-332253104,332253104,
MarcoFalke,2017-09-27T12:13:52Z,"re-utACK 048e0c3 (verified that only the option name changed)\n\nGoing to merge this, since some other pulls build on top of this.",https://github.com/bitcoin/bitcoin/pull/11031#issuecomment-332501339,332501339,
laanwj,2017-09-27T12:29:31Z,@MarcoFalke thanks\n\n,https://github.com/bitcoin/bitcoin/pull/11031#issuecomment-332504903,332504903,
jtimon,2017-09-27T23:48:59Z,posthumous utACK,https://github.com/bitcoin/bitcoin/pull/11031#issuecomment-332687191,332687191,
promag,2017-08-11T23:03:24Z,Missing validation for this argument?,https://github.com/bitcoin/bitcoin/pull/11031#discussion_r132798778,132798778,src/init.cpp
promag,2017-08-11T23:03:55Z,Argument should mention it is a deprecated method? Like `-enabledeprecated=...`,https://github.com/bitcoin/bitcoin/pull/11031#discussion_r132798832,132798832,src/init.cpp
promag,2017-08-11T23:04:57Z,Should be before help? Why show the help if it's disabled? Why the explicit `std::string()`?,https://github.com/bitcoin/bitcoin/pull/11031#discussion_r132798923,132798923,src/rpc/mining.cpp
promag,2017-08-11T23:05:48Z,`const std::string& method`?,https://github.com/bitcoin/bitcoin/pull/11031#discussion_r132799004,132799004,src/rpc/server.cpp
promag,2017-08-11T23:07:21Z,"No need to `if`:\n```\nreturn find(enabled_rpcs.begin(), enabled_rpcs.end(), rpc_name) != enabled_rpcs.end();\n```",https://github.com/bitcoin/bitcoin/pull/11031#discussion_r132799143,132799143,src/rpc/server.cpp
jnewbery,2017-08-12T17:19:23Z,"I think `enablerpcmethod` is already clear, especially since this is a hidden option and the help text explains that it's used for enabling a deprecated method.\n\nI don't think there's validation for any of our arguments.",https://github.com/bitcoin/bitcoin/pull/11031#discussion_r132822376,132822376,src/init.cpp
jnewbery,2017-08-12T17:30:10Z,"I initially had this before the help if statement, but the way that help is implemented in `server.cpp` means that calling help without any arguments calls into every RPC method. Adding the `if (!IsDeprecatedRPCEnabled` statement before the help if statement breaks that.\n\nYou're right that no explicit `std::string()` is required. Removing.",https://github.com/bitcoin/bitcoin/pull/11031#discussion_r132822591,132822591,src/rpc/mining.cpp
promag,2017-08-12T17:33:22Z,"Yes there is, don't recall exactly which.",https://github.com/bitcoin/bitcoin/pull/11031#discussion_r132822635,132822635,src/init.cpp
jnewbery,2017-08-12T17:39:06Z,changed,https://github.com/bitcoin/bitcoin/pull/11031#discussion_r132822772,132822772,src/rpc/server.cpp
jnewbery,2017-08-12T17:39:11Z,"yep, fixed",https://github.com/bitcoin/bitcoin/pull/11031#discussion_r132822773,132822773,src/rpc/server.cpp
hodlbirb,2017-08-12T17:48:55Z,Would be nice to have a list of deprecated RPC methods with `enabled` flag,https://github.com/bitcoin/bitcoin/pull/11031#discussion_r132822956,132822956,src/init.cpp
promag,2017-08-12T22:05:28Z,With validation you force to clean outdated `enablerpcmethod ` from config file.,https://github.com/bitcoin/bitcoin/pull/11031#discussion_r132827824,132827824,src/init.cpp
jnewbery,2017-08-14T13:22:12Z,"I don't think validating arguments is the norm. If I'm wrong, please point out where in the code this happens.\n\nI'd definitely concept ACK a PR for better validating of command line arguments in general (for example, warning if a user tries setting an argument that doesn't exist, to catch mis-spellings).\n\nThis particular argument `enablerpcmethod` seems to be one where validation is least ",https://github.com/bitcoin/bitcoin/pull/11031#discussion_r132948422,132948422,src/init.cpp
promag,2017-09-17T08:24:28Z,"For reference, one arg validation http://github.com/bitcoin/bitcoin/blame/master/src/init.cpp#L1019.",https://github.com/bitcoin/bitcoin/pull/11031#discussion_r139304868,139304868,src/init.cpp
promag,2017-09-17T08:24:41Z,Missing space before `{`.,https://github.com/bitcoin/bitcoin/pull/11031#discussion_r139304872,139304872,src/rpc/mining.cpp
instagibbs,2017-09-18T19:15:13Z,micronit: 2017,https://github.com/bitcoin/bitcoin/pull/11031#discussion_r139514204,139514204,test/functional/deprecated_rpc.py
MarcoFalke,2017-09-18T19:26:41Z,"Will be fixed by the ""bump copyright headers"" script ;)",https://github.com/bitcoin/bitcoin/pull/11031#discussion_r139516759,139516759,test/functional/deprecated_rpc.py
jnewbery,2017-09-18T20:13:50Z,fixed,https://github.com/bitcoin/bitcoin/pull/11031#discussion_r139527726,139527726,src/rpc/mining.cpp
jnewbery,2017-09-18T20:14:01Z,I was pushing anyone so I fixed this,https://github.com/bitcoin/bitcoin/pull/11031#discussion_r139527765,139527765,test/functional/deprecated_rpc.py
achow101,2017-09-21T19:50:36Z,I think it would be better to have a dummy RPC that is marked deprecated since `estimatefee` will be removed in the future.,https://github.com/bitcoin/bitcoin/pull/11031#discussion_r140342260,140342260,test/functional/deprecated_rpc.py
jnewbery,2017-09-22T15:06:56Z,"hmm, I'm not sure we should add more product code just so the test code can test something else.\n\nWe should just change this test to use a different rpc when estimatefee is removed (or skip the test entirely if there are currently no deprecated RPCs).",https://github.com/bitcoin/bitcoin/pull/11031#discussion_r140518718,140518718,test/functional/deprecated_rpc.py
