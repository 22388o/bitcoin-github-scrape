Empact,2019-01-07T02:24:05Z,Concept ACK,https://github.com/bitcoin/bitcoin/pull/15117#issuecomment-451802804,451802804,
laanwj,2019-01-07T16:23:55Z,"TIL. Always thought it returned `NULL` on error.\n```\nRETURN VALUE\n       On success, mmap() returns a pointer to the mapped area.  On error, the\n       value MAP_FAILED (that is, (void *) -1) is returned, and errno  is  set\n       to indicate the cause of the error.\n```\nutACK ca126d490b0ff6960e135f3c77b2b2d4892a5744",https://github.com/bitcoin/bitcoin/pull/15117#issuecomment-451991436,451991436,
gmaxwell,2019-01-07T20:29:32Z,Concept ACK.  I too assumed mmap returned NULL on failure.,https://github.com/bitcoin/bitcoin/pull/15117#issuecomment-452071036,452071036,
donaloconnor,2019-01-07T23:57:21Z,Concept ACK - good spot!,https://github.com/bitcoin/bitcoin/pull/15117#issuecomment-452125432,452125432,
Empact,2019-01-07T02:22:05Z,Maybe propagate errno info?,https://github.com/bitcoin/bitcoin/pull/15117#discussion_r245536797,245536797,src/support/allocators/secure.h
Empact,2019-01-07T02:23:11Z,"Judging from leveldb's handling, and the mmap docs, the null value case is negligible:\nhttps://github.com/bitcoin/bitcoin/blob/9c719987718d9fcc3a689e50f5212acc7ead7606/src/leveldb/util/env_posix.cc#L367-L372",https://github.com/bitcoin/bitcoin/pull/15117#discussion_r245536904,245536904,src/support/lockedpool.cpp
practicalswift,2019-01-07T15:49:39Z,I'm not sure how to parse TBH: are you suggesting a change here? :-),https://github.com/bitcoin/bitcoin/pull/15117#discussion_r245699597,245699597,src/support/lockedpool.cpp
practicalswift,2019-01-07T15:55:24Z,I don't think `bad_alloc` have any parameterized ctor:s?,https://github.com/bitcoin/bitcoin/pull/15117#discussion_r245701778,245701778,src/support/allocators/secure.h
Empact,2019-01-07T18:45:03Z,Indeed - I guess the other option would be to log it in the `allocate` method. (nit only),https://github.com/bitcoin/bitcoin/pull/15117#discussion_r245757358,245757358,src/support/allocators/secure.h
Empact,2019-01-07T18:47:30Z,Just that the `if (addr)` is strictly unnecessary.,https://github.com/bitcoin/bitcoin/pull/15117#discussion_r245758065,245758065,src/support/lockedpool.cpp
