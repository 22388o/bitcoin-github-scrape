[
  {
    "sha": "b7a17444e0746c562ae97b26eba431577947b06a",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiN2ExNzQ0NGUwNzQ2YzU2MmFlOTdiMjZlYmE0MzE1Nzc5NDdiMDZh",
    "commit": {
      "author": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2021-08-18T10:29:36Z"
      },
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2021-08-18T17:57:15Z"
      },
      "message": "log, sync: add LOCK logging category, apply it to lock contention",
      "tree": {
        "sha": "b2995987513a07c104ebf9944da9a5ee91892dd4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b2995987513a07c104ebf9944da9a5ee91892dd4"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b7a17444e0746c562ae97b26eba431577947b06a",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEd6u7+MhX7zEv6RP5T1chs9Djkh0FAmEdSiwACgkQT1chs9Dj\nkh3lNBAAhExvtK/n879XCRp0Cct2p50OZzQHZjbbyWqQfTpK3w9X6tznxClnwQV0\naBkn9ktcF6a0NN4Ud9SHj0m1PKXxqfqB7IMFWHkA0VA5mwPcIDTHoMj28Wcsqxhv\nFSpuKC5yCRo2xjG1XNuBkA3TYxDz6JfvAEVpV8FruMf6GL/dOp40D+XvY+blYLok\nLevcvUyO5WHUkYsb0+BpCGP6ihcTP+r49MSf3fgnna7Se5nVMe6NogHYUmWuqLrX\ndXZRZDunVBwzqpgq8MKpCoZF6o0c8JvyOSWqvvGVBj81DIV1atyQNQnuC8J9BF/G\noCwUfR4/wwqzb/bK3tC9cyy9qhI08UIXtEztEObscqwvBIV577pVNDcP05M74OKP\n/C6nqsnOq5GcuuSc0zTvp75JwfOETEk5N/UEvJ8ctQRn8ZbMPQL573tNI6ckkXWU\nMw/E7e8RBPGROwpgII3F9/y77WG2pYS/r4Hfm+S1Lako8whgiHBBz6UcTMD69E1b\nNvdr49MvRV6jEdnjrsFFqhK64emoSR0mlreJdVxRzcHyUG3Gg6UmwYCf6HwHz7PW\nTIC7Ax84/xMhrn1yfMEidJifZnW7aRAeyc0lGz7purBxrkoo6AvyPe84dIla/GQ9\nESrdTo6CDRjXrw/HfBGBbsCipnHMo7WhIe5uJqLAlW2oHI+XF5Q=\n=WzQz\n-----END PGP SIGNATURE-----\n-----BEGIN OPENTIMESTAMPS GIT TIMESTAMP-----\n\nAQHwIDnULFRLYtQiDymooa47z6ZUBAf5RBvUl81u1tGEEJq7CP/wEDeGUEfFryJ3\nvJ7JH6mP+0UI8CBB/mA9VvBE9uA7vEnzcQySjlRggdYhX0sfLZaugInZfQjwIEdV\nfCUpeY3lgJs45n06yZpu9YIC9GeD0G8vDozehJ6oCPAgdWZmm4IzwQJn1fSdvwtz\n+FuLcR3JJD3H09+19F31QXsI8QRhHUov8AhM9tqts8+CrQCD3+MNLvkMjikoaHR0\ncHM6Ly9maW5uZXkuY2FsZW5kYXIuZXRlcm5pdHl3YWxsLmNvbf/wEEm5m2KFLlCM\nRwCKA0fFOZMI8CCq3/4YGYVd3yZSfujNHEVVDWFva6nWVvM1jV3xyuDEHQjwIGYM\nclDZU01ETnSNcF9Mxcrknx+ukJ3MlUQwzj1iY7nDCPAgHFhbPxGQxM84x3aKLaJh\n95MxIM1UC1RUqQchnoF7qsYI8QRhHUou8Ahnbh9T1MCrwgCD3+MNLvkMjiwraHR0\ncHM6Ly9ib2IuYnRjLmNhbGVuZGFyLm9wZW50aW1lc3RhbXBzLm9yZ//wEEqxClYc\nXbKIb4WmQYevDRAI8QRhHUou8AgauXdro5/0ogCD3+MNLvkMjiMiaHR0cHM6Ly9i\ndGMuY2FsZW5kYXIuY2F0YWxsYXh5LmNvbfAQrWhmKHonhiT0jwDiddoQTgjwIEIv\nsndMzm5526zFv3ayjiQO9UXfdIwhtRVMpmXl1IAgCPAg92+7NtueqlLlJDtk1PuL\nllPS7gcRw2t3W3O5Zm1VOZ0I8CBSrHlBJ8nJqVXnrNfUko4EqjX6WJ9sKcneSS+C\nndlljQjxBGEdSi7wCB7D+a8nYuoOAIPf4w0u+QyOLi1odHRwczovL2FsaWNlLmJ0\nYy5jYWxlbmRhci5vcGVudGltZXN0YW1wcy5vcmc=\n-----END OPENTIMESTAMPS GIT TIMESTAMP-----",
        "payload": "tree b2995987513a07c104ebf9944da9a5ee91892dd4\nparent bb9f76a7194a665effab169d228bb8cbc66ccf86\nauthor Jon Atack <jon@atack.com> 1629282576 +0200\ncommitter Jon Atack <jon@atack.com> 1629309435 +0200\n\nlog, sync: add LOCK logging category, apply it to lock contention\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b7a17444e0746c562ae97b26eba431577947b06a",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/b7a17444e0746c562ae97b26eba431577947b06a",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b7a17444e0746c562ae97b26eba431577947b06a/comments",
    "author": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "bb9f76a7194a665effab169d228bb8cbc66ccf86",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/bb9f76a7194a665effab169d228bb8cbc66ccf86",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/bb9f76a7194a665effab169d228bb8cbc66ccf86"
      }
    ],
    "stats": {
      "total": 8,
      "additions": 5,
      "deletions": 3
    },
    "files": [
      {
        "sha": "eb2c750296dfcd655cccd7eabaabdb39ad8046b2",
        "filename": "src/logging.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b7a17444e0746c562ae97b26eba431577947b06a/src/logging.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b7a17444e0746c562ae97b26eba431577947b06a/src/logging.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/logging.cpp?ref=b7a17444e0746c562ae97b26eba431577947b06a",
        "patch": "@@ -159,6 +159,7 @@ const CLogCategoryDesc LogCategories[] =\n     {BCLog::VALIDATION, \"validation\"},\n     {BCLog::I2P, \"i2p\"},\n     {BCLog::IPC, \"ipc\"},\n+    {BCLog::LOCK, \"lock\"},\n     {BCLog::ALL, \"1\"},\n     {BCLog::ALL, \"all\"},\n };"
      },
      {
        "sha": "53a89d28bd52979094b60916e60203a4fc27428e",
        "filename": "src/logging.h",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b7a17444e0746c562ae97b26eba431577947b06a/src/logging.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b7a17444e0746c562ae97b26eba431577947b06a/src/logging.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/logging.h?ref=b7a17444e0746c562ae97b26eba431577947b06a",
        "patch": "@@ -59,6 +59,7 @@ namespace BCLog {\n         VALIDATION  = (1 << 21),\n         I2P         = (1 << 22),\n         IPC         = (1 << 23),\n+        LOCK        = (1 << 24),\n         ALL         = ~(uint32_t)0,\n     };\n "
      },
      {
        "sha": "9351417d431f4df18888647b3c26b9d92fc7d4dd",
        "filename": "src/sync.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b7a17444e0746c562ae97b26eba431577947b06a/src/sync.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b7a17444e0746c562ae97b26eba431577947b06a/src/sync.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/sync.cpp?ref=b7a17444e0746c562ae97b26eba431577947b06a",
        "patch": "@@ -29,8 +29,8 @@ static_assert(false, \"thread_local is not supported\");\n #endif\n void PrintLockContention(const char* pszName, const char* pszFile, int nLine)\n {\n-    LogPrintf(\"LOCKCONTENTION: %s\\n\", pszName);\n-    LogPrintf(\"Locker: %s:%d\\n\", pszFile, nLine);\n+    LogPrint(BCLog::LOCK, \"LOCKCONTENTION: %s\\n\", pszName);\n+    LogPrint(BCLog::LOCK, \"Locker: %s:%d\\n\", pszFile, nLine);\n }\n #endif /* DEBUG_LOCKCONTENTION */\n "
      },
      {
        "sha": "13f33c321fc91aa274d3c223f9aa5c5d400f3660",
        "filename": "test/functional/rpc_misc.py",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b7a17444e0746c562ae97b26eba431577947b06a/test/functional/rpc_misc.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b7a17444e0746c562ae97b26eba431577947b06a/test/functional/rpc_misc.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/rpc_misc.py?ref=b7a17444e0746c562ae97b26eba431577947b06a",
        "patch": "@@ -57,7 +57,7 @@ def run_test(self):\n         self.log.info(\"test logging rpc and help\")\n \n         # Test logging RPC returns the expected number of logging categories.\n-        assert_equal(len(node.logging()), 24)\n+        assert_equal(len(node.logging()), 25)\n \n         # Test toggling a logging category on/off/on with the logging RPC.\n         assert_equal(node.logging()['qt'], True)"
      }
    ]
  },
  {
    "sha": "3f4c6b87f1098436693c4990f2082515ec0ece26",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzozZjRjNmI4N2YxMDk4NDM2NjkzYzQ5OTBmMjA4MjUxNWVjMGVjZTI2",
    "commit": {
      "author": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2021-09-01T11:57:45Z"
      },
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2021-09-01T13:12:52Z"
      },
      "message": "log, timer: add timing macro in usec LOG_TIME_MICROS_WITH_CATEGORY\n\nand update BCLog::LogMsg() to omit irrelevant decimals for microseconds\nand skip unneeded code and math.",
      "tree": {
        "sha": "2b5d15b9d43c63a277ce66b816de1ce397353ee1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2b5d15b9d43c63a277ce66b816de1ce397353ee1"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3f4c6b87f1098436693c4990f2082515ec0ece26",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEd6u7+MhX7zEv6RP5T1chs9Djkh0FAmEvfFQACgkQT1chs9Dj\nkh3Gog/6Ak2rq2lkAHRxUVYsR8+JXmwJOTbLuAv5HYx85PL9plovKUl+a5zwXf6L\np9tSxu81VJk09GdsREq5SWE4wm6qiiLtbiuRSwcPaXyWqIRGCkNjF1iIsUCvmB59\nr9UfnR0cXOUdHLCRwi9wpyUSXe+ocDEy+iJ6yktaQIGXZyNAhM9i58722dwJ+I6a\nIXrmeWv30pJG1g9fPcYZbY0uXngmfR14OcfFTLgMOThJKV9XlggXVd9qRdCRnhTB\nwfKumlC7DcltrCRQsOseGwPIjsH+oZzH7qC+9svchqxDvCTEOi+79gvfkT0EJUfm\n5MM79Wfkfykv65iInE7RpTD83PMRgDs43+zPyX8YavpXZ5iu3i8CJRxdx58t5Mhp\nsY7FgAAomc+qkgPlfJDJ9kMa2hnnhHOSM60kcNdXJfP9gJz28tZMptWohpi4nVvj\ne5FzcYggRlBtHY220LopqH0Z79v5c4S/gd1OW6ZzFX4PNFj4K0xloEyxxP0QXO/T\nvWBlcDvAjjwV9JnUb2HPPiCpjY6HOlixLQJF83J1d0lFS5q0H7X4LWsBobekgx+0\nNrcbYwV3e9MbcleWsb1qxeejoZtq6Th8DSvwnpmA4O98i3tKKbu4Ryplhtx+MH7T\nWdE3N3qnF/9757gAFM47iSbWgF166JEIXfhIEWLPN7hnPNs0Opg=\n=woQy\n-----END PGP SIGNATURE-----\n-----BEGIN OPENTIMESTAMPS GIT TIMESTAMP-----\n\nAQHwIHRg+SnmRVr+MXi8f0kyQYzPE1SudquOd8r2f/YDOGmMCP/wEAdCIBy1Awb/\n/d5f9XacZCII8QRhL3xW8AhmyzrxCZDgUgCD3+MNLvkMjiMiaHR0cHM6Ly9idGMu\nY2FsZW5kYXIuY2F0YWxsYXh5LmNvbf/wEESWEr09UhhDgh+7LhtSe80I8QRhL3xW\n8AjVxMqrfQ4ycQCD3+MNLvkMji4taHR0cHM6Ly9hbGljZS5idGMuY2FsZW5kYXIu\nb3BlbnRpbWVzdGFtcHMub3Jn//AQtOkxTa07whzMmv8gRUCdEwjwIO0fHi9zh/7x\nNWfjGQPcHwa+pqWcYagefTzL1U0dTp83CPAg4Gyhovk1acJskYSrTBHzzgfkM6px\nGSfriRPEwSf3RxoI8QRhL3xX8Ag6oPj0O/5cCwCD3+MNLvkMjikoaHR0cHM6Ly9m\naW5uZXkuY2FsZW5kYXIuZXRlcm5pdHl3YWxsLmNvbfAQ+Ddso0FEqMY9HZG3QHXG\nQgjxIAsmiO2aldzjqMGjWMU5kVumRW6ix1h8A/SE+AFU7/M1CPEEYS98VvAI9tSl\nZ/2QyFcAg9/jDS75DI4sK2h0dHBzOi8vYm9iLmJ0Yy5jYWxlbmRhci5vcGVudGlt\nZXN0YW1wcy5vcmc=\n-----END OPENTIMESTAMPS GIT TIMESTAMP-----",
        "payload": "tree 2b5d15b9d43c63a277ce66b816de1ce397353ee1\nparent b7a17444e0746c562ae97b26eba431577947b06a\nauthor Jon Atack <jon@atack.com> 1630497465 +0200\ncommitter Jon Atack <jon@atack.com> 1630501972 +0200\n\nlog, timer: add timing macro in usec LOG_TIME_MICROS_WITH_CATEGORY\n\nand update BCLog::LogMsg() to omit irrelevant decimals for microseconds\nand skip unneeded code and math.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3f4c6b87f1098436693c4990f2082515ec0ece26",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/3f4c6b87f1098436693c4990f2082515ec0ece26",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3f4c6b87f1098436693c4990f2082515ec0ece26/comments",
    "author": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "b7a17444e0746c562ae97b26eba431577947b06a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b7a17444e0746c562ae97b26eba431577947b06a",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/b7a17444e0746c562ae97b26eba431577947b06a"
      }
    ],
    "stats": {
      "total": 14,
      "additions": 9,
      "deletions": 5
    },
    "files": [
      {
        "sha": "647e3fa30e867ac154dc851844e765dbc2157300",
        "filename": "src/logging/timer.h",
        "status": "modified",
        "additions": 8,
        "deletions": 4,
        "changes": 12,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/3f4c6b87f1098436693c4990f2082515ec0ece26/src/logging/timer.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/3f4c6b87f1098436693c4990f2082515ec0ece26/src/logging/timer.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/logging/timer.h?ref=3f4c6b87f1098436693c4990f2082515ec0ece26",
        "patch": "@@ -58,12 +58,14 @@ class Timer\n             return strprintf(\"%s: %s\", m_prefix, msg);\n         }\n \n-        std::string units = \"\";\n+        if (std::is_same<TimeType, std::chrono::microseconds>::value) {\n+            return strprintf(\"%s: %s (%i\u03bcs)\", m_prefix, msg, end_time.count());\n+        }\n+\n+        std::string units;\n         float divisor = 1;\n \n-        if (std::is_same<TimeType, std::chrono::microseconds>::value) {\n-            units = \"\u03bcs\";\n-        } else if (std::is_same<TimeType, std::chrono::milliseconds>::value) {\n+        if (std::is_same<TimeType, std::chrono::milliseconds>::value) {\n             units = \"ms\";\n             divisor = 1000.;\n         } else if (std::is_same<TimeType, std::chrono::seconds>::value) {\n@@ -93,6 +95,8 @@ class Timer\n } // namespace BCLog\n \n \n+#define LOG_TIME_MICROS_WITH_CATEGORY(end_msg, log_category) \\\n+    BCLog::Timer<std::chrono::microseconds> PASTE2(logging_timer, __COUNTER__)(__func__, end_msg, log_category)\n #define LOG_TIME_MILLIS_WITH_CATEGORY(end_msg, log_category) \\\n     BCLog::Timer<std::chrono::milliseconds> PASTE2(logging_timer, __COUNTER__)(__func__, end_msg, log_category)\n #define LOG_TIME_SECONDS(end_msg) \\"
      },
      {
        "sha": "e2e31c62d709ce7af1ed4604f71b961df189f6d0",
        "filename": "src/test/logging_tests.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/3f4c6b87f1098436693c4990f2082515ec0ece26/src/test/logging_tests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/3f4c6b87f1098436693c4990f2082515ec0ece26/src/test/logging_tests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/logging_tests.cpp?ref=3f4c6b87f1098436693c4990f2082515ec0ece26",
        "patch": "@@ -27,7 +27,7 @@ BOOST_AUTO_TEST_CASE(logging_timer)\n     SetMockTime(1);\n     auto micro_timer = BCLog::Timer<std::chrono::microseconds>(\"tests\", \"end_msg\");\n     SetMockTime(2);\n-    BOOST_CHECK_EQUAL(micro_timer.LogMsg(\"test micros\"), \"tests: test micros (1000000.00\u03bcs)\");\n+    BOOST_CHECK_EQUAL(micro_timer.LogMsg(\"test micros\"), \"tests: test micros (1000000\u03bcs)\");\n }\n \n BOOST_AUTO_TEST_SUITE_END()"
      }
    ]
  },
  {
    "sha": "9b08006bc502e67956d6ab518388fad6397cac8d",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo5YjA4MDA2YmM1MDJlNjc5NTZkNmFiNTE4Mzg4ZmFkNjM5N2NhYzhk",
    "commit": {
      "author": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2021-08-18T17:53:42Z"
      },
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2021-09-01T13:25:38Z"
      },
      "message": "log, sync: improve lock contention logging and add time duration\n\nin microseconds.\n\nChange the function name in order to print \"LockContention\" instead\nof \"PrintLockContention\" to the log.  Add Doxygen documentation.\n\nWith this change, the lock contention log prints:\n\n2021-09-01T11:29:03Z LockContention: pnode->cs_vSend, net.cpp:1373 started\n2021-09-01T11:29:03Z LockContention: pnode->cs_vSend, net.cpp:1373 completed (31\u03bcs)\n2021-09-01T11:29:03Z LockContention: cs_vNodes, net.cpp:2277 started\n2021-09-01T11:29:03Z LockContention: cs_vNodes, net.cpp:2277 completed (6\u03bcs)\n2021-09-01T11:29:04Z LockContention: cs_vNodes, net.cpp:2242 started\n2021-09-01T11:29:04Z LockContention: cs_vNodes, net.cpp:2242 completed (3\u03bcs)\n\nCo-authored-by: Hennadii Stepanov <32963518+hebasto@users.noreply.github.com>\nCo-authored-by: practicalswift <practicalswift@users.noreply.github.com>",
      "tree": {
        "sha": "c91ff6a05c64c14fe7b6085ec9a5008c37061871",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c91ff6a05c64c14fe7b6085ec9a5008c37061871"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9b08006bc502e67956d6ab518388fad6397cac8d",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEd6u7+MhX7zEv6RP5T1chs9Djkh0FAmEvf4kACgkQT1chs9Dj\nkh1aFw//b4fjHEhbu1ZNQ/AR5OEpI08ccrL1XW0WDDXCQQiSPExxCkndCsae6ZUR\nwIfIeZE+PjY0QLBEDp7X6yBAYsqcvNPVIaakHLVviJiGvyTgxbcydT+Ukiwc6fyl\nbEUhco3Kkw7R4cG+rdUcPZQf7S/YHMVX32J0d+Q7LlbFdSSMRnRLDMSG9Kd2gtiU\n4KnqMa0sZnGpGJTnG8fdMwlPSDR9VwgvYVLjCmc6nRxJOWGkjArJWoGhGcW6xFkD\n6wrB8LrHwE92wCaLrncUJfJbRIA56FQXnMkJQ3nlye2pj0ZnuPtd5MGEix8cvabG\nRhmRmOcYmJS52p4kWrDGPNzJF7dXCLszzNMyCDpQ3fM5G6ptboZ543dg/xWPjkK7\nAFyzvNzJWmM3WAqLpgucZpChw7rff4Y14L9vlSAliaFex4OqfVejcZ4UxGLw6S4p\nknG846jTHBRcXwOiy1Kb0iRqnIHk+2Q8eb2KEhFVuNuXVaC5jfuEdOfUUKfWM7GR\nShJZRPJPulS/4+Kj4i8xDU88iVyqH3aCvMZDasZi6xsOqEeknhb/kf5dGcJsPygm\nSAD2HdmNOU/ol5gok3cW2DFP2yI9ur4tHOOEGLS97N2YkDeFh95z52fQ/PHYQih/\nZekLo/Pe479wzsDkchDIkcPNN6xVo8Ug3cQTZfxUYCH7bXjqjo8=\n=Qo/8\n-----END PGP SIGNATURE-----\n-----BEGIN OPENTIMESTAMPS GIT TIMESTAMP-----\n\nAQHwIAchpTuO30xrF1mnEHnTRTfqI8EAm7wilQjROUXbiPDICP/wEK6ZxMcnLZZX\njlTPm+tJaJwI8QRhL3+L8AjcaetN//XQtgCD3+MNLvkMjiwraHR0cHM6Ly9ib2Iu\nYnRjLmNhbGVuZGFyLm9wZW50aW1lc3RhbXBzLm9yZ//wEMRM8SSYCzl80FyV0Pb1\nH8YI8QRhL3+L8AhPBnSjnYR/ywCD3+MNLvkMjiMiaHR0cHM6Ly9idGMuY2FsZW5k\nYXIuY2F0YWxsYXh5LmNvbf/wEMW9h7OyMYMMW9Vn+JEMcAkI8SCClCJtkrDGMcfT\nVvEKwIXreQQExWZ9KVKA6zi/Jh8bBAjxBGEvf4vwCKZRPt4dt+DhAIPf4w0u+QyO\nKShodHRwczovL2Zpbm5leS5jYWxlbmRhci5ldGVybml0eXdhbGwuY29t8BDWlJ/f\nclz0FNSI4kk97ZHXCPEEYS9/i/AIPakNLLWAJzIAg9/jDS75DI4uLWh0dHBzOi8v\nYWxpY2UuYnRjLmNhbGVuZGFyLm9wZW50aW1lc3RhbXBzLm9yZw==\n-----END OPENTIMESTAMPS GIT TIMESTAMP-----",
        "payload": "tree c91ff6a05c64c14fe7b6085ec9a5008c37061871\nparent 3f4c6b87f1098436693c4990f2082515ec0ece26\nauthor Jon Atack <jon@atack.com> 1629309222 +0200\ncommitter Jon Atack <jon@atack.com> 1630502738 +0200\n\nlog, sync: improve lock contention logging and add time duration\n\nin microseconds.\n\nChange the function name in order to print \"LockContention\" instead\nof \"PrintLockContention\" to the log.  Add Doxygen documentation.\n\nWith this change, the lock contention log prints:\n\n2021-09-01T11:29:03Z LockContention: pnode->cs_vSend, net.cpp:1373 started\n2021-09-01T11:29:03Z LockContention: pnode->cs_vSend, net.cpp:1373 completed (31\u03bcs)\n2021-09-01T11:29:03Z LockContention: cs_vNodes, net.cpp:2277 started\n2021-09-01T11:29:03Z LockContention: cs_vNodes, net.cpp:2277 completed (6\u03bcs)\n2021-09-01T11:29:04Z LockContention: cs_vNodes, net.cpp:2242 started\n2021-09-01T11:29:04Z LockContention: cs_vNodes, net.cpp:2242 completed (3\u03bcs)\n\nCo-authored-by: Hennadii Stepanov <32963518+hebasto@users.noreply.github.com>\nCo-authored-by: practicalswift <practicalswift@users.noreply.github.com>\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9b08006bc502e67956d6ab518388fad6397cac8d",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/9b08006bc502e67956d6ab518388fad6397cac8d",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9b08006bc502e67956d6ab518388fad6397cac8d/comments",
    "author": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "3f4c6b87f1098436693c4990f2082515ec0ece26",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3f4c6b87f1098436693c4990f2082515ec0ece26",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/3f4c6b87f1098436693c4990f2082515ec0ece26"
      }
    ],
    "stats": {
      "total": 11,
      "additions": 6,
      "deletions": 5
    },
    "files": [
      {
        "sha": "ef46bbb22f54ec5fed96129a3de8b31437e56507",
        "filename": "src/sync.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/9b08006bc502e67956d6ab518388fad6397cac8d/src/sync.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/9b08006bc502e67956d6ab518388fad6397cac8d/src/sync.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/sync.cpp?ref=9b08006bc502e67956d6ab518388fad6397cac8d",
        "patch": "@@ -9,6 +9,7 @@\n #include <sync.h>\n \n #include <logging.h>\n+#include <logging/timer.h>\n #include <tinyformat.h>\n #include <util/strencodings.h>\n #include <util/threadnames.h>\n@@ -27,10 +28,9 @@\n #if !defined(HAVE_THREAD_LOCAL)\n static_assert(false, \"thread_local is not supported\");\n #endif\n-void PrintLockContention(const char* pszName, const char* pszFile, int nLine)\n+void LockContention(const char* pszName, const char* pszFile, int nLine)\n {\n-    LogPrint(BCLog::LOCK, \"LOCKCONTENTION: %s\\n\", pszName);\n-    LogPrint(BCLog::LOCK, \"Locker: %s:%d\\n\", pszFile, nLine);\n+    LOG_TIME_MICROS_WITH_CATEGORY(strprintf(\"%s, %s:%d\", pszName, pszFile, nLine), BCLog::LOCK);\n }\n #endif /* DEBUG_LOCKCONTENTION */\n "
      },
      {
        "sha": "f4f6ece41dd7aadf4128fb272593f01ed541e826",
        "filename": "src/sync.h",
        "status": "modified",
        "additions": 3,
        "deletions": 2,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/9b08006bc502e67956d6ab518388fad6397cac8d/src/sync.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/9b08006bc502e67956d6ab518388fad6397cac8d/src/sync.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/sync.h?ref=9b08006bc502e67956d6ab518388fad6397cac8d",
        "patch": "@@ -127,7 +127,8 @@ using RecursiveMutex = AnnotatedMixin<std::recursive_mutex>;\n typedef AnnotatedMixin<std::mutex> Mutex;\n \n #ifdef DEBUG_LOCKCONTENTION\n-void PrintLockContention(const char* pszName, const char* pszFile, int nLine);\n+/** Prints a lock contention to the log */\n+void LockContention(const char* pszName, const char* pszFile, int nLine);\n #endif\n \n /** Wrapper around std::unique_lock style lock for Mutex. */\n@@ -140,7 +141,7 @@ class SCOPED_LOCKABLE UniqueLock : public Base\n         EnterCritical(pszName, pszFile, nLine, Base::mutex());\n #ifdef DEBUG_LOCKCONTENTION\n         if (!Base::try_lock()) {\n-            PrintLockContention(pszName, pszFile, nLine);\n+            LockContention(pszName, pszFile, nLine); // log the contention\n #endif\n             Base::lock();\n #ifdef DEBUG_LOCKCONTENTION"
      }
    ]
  },
  {
    "sha": "7e698732836121912f179b7c743a72dd6fdffa72",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo3ZTY5ODczMjgzNjEyMTkxMmYxNzliN2M3NDNhNzJkZDZmZGZmYTcy",
    "commit": {
      "author": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2021-08-18T10:34:18Z"
      },
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2021-09-01T13:26:35Z"
      },
      "message": "sync: remove DEBUG_LOCKCONTENTION preprocessor directives\n\nto allow logging the lock contentions without the need to define\nDEBUG_LOCKCONTENTION at compile time.",
      "tree": {
        "sha": "d0f5d9b5a1408287b70258aa10218172b758be30",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d0f5d9b5a1408287b70258aa10218172b758be30"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7e698732836121912f179b7c743a72dd6fdffa72",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEd6u7+MhX7zEv6RP5T1chs9Djkh0FAmEvf4sACgkQT1chs9Dj\nkh2S/Q/7BtozHBjBewQg6is7Pzrt9IJ18lZhLMRWLN9EofyrTfbaKBluY7PxBoHK\n/ZPpe5hgVf3LOGOrc61/4uB79K8v1VuM4QcqxH1CQTiDyCQriYlTxiW6ttco/0/d\nZ0wNThbqkHsD60yWd9Pw1OsJeetOwhXVV+UdZWdTU4cgrrY/AfoS5gsRAKPKdnBJ\n+0x8/GwsPFDHqasqNgcZEE4Mf1V7N7iACZCntNVS/5ZH9G8lTHCwcQEBpnjEr+CN\n/xuoHj2+7l00fPnRmPpl9NyIV6mqNAhZFzhATcjfZgnTwKmBvPMOWaNSXBaX+tjN\n9pZZ8D6TLUCQd8i+M84F0GZNAkoIer82nBPduR+yYhWqFiAOg+PsIsrVBTBQdDGT\nHb0lWwyTKUMO016R+4HvObL8ypwVgZLBLTPxsFVcJHxk+o7AYFq291OPeAKgfX/l\nqyZMdmbjZarh/O95HPLcQrZ72z/QqK9MdtMB0S/sOcfUNRpn047CzXG3wL7Nqmqm\ngwlhbbx5cHE+VzfiJi2NDB0pdjJpe7xF2D2c3+VLSsPXLl7irCCNsOuCWHTpgYvi\n1YQ0iDMNVNH0G9MX9DysJq0BGDuLOO68t5DA6g4EpXyUfY8h7nHCTfCOl3ZO64dT\nrU6H8iFvydd1i18Lyq+v5JRdUI+mAfnym5uMgkC0jnPINdG1528=\n=Dc64\n-----END PGP SIGNATURE-----\n-----BEGIN OPENTIMESTAMPS GIT TIMESTAMP-----\n\nAQHwIIWNewI6GfHxSPqFHU4pDVCOOhKkXd0h0W37jP1dskv2CP/wEFU8dnefuz+P\nE9uI5KFq7kgI8QRhL3+N8Ai8X/vDEBrRvgCD3+MNLvkMjiwraHR0cHM6Ly9ib2Iu\nYnRjLmNhbGVuZGFyLm9wZW50aW1lc3RhbXBzLm9yZ//wEFyNXyU2qxgMv6uEYZAW\n+8QI8QRhL3+N8AgzwCgTS0VpYwCD3+MNLvkMjiMiaHR0cHM6Ly9idGMuY2FsZW5k\nYXIuY2F0YWxsYXh5LmNvbf/wEIh6/8O2aN4yVXj4yY/J+LEI8QRhL3+N8AiIUesY\nvmSHBwCD3+MNLvkMjikoaHR0cHM6Ly9maW5uZXkuY2FsZW5kYXIuZXRlcm5pdHl3\nYWxsLmNvbfAQxNob9Kie4/kNLm5+pyhSSwjwIA1J+22OZGBrMescoiA8Qr4Ny5bp\nswjqmzNhlPEkB+sOCPAgWx0yxsl8ZLbbN7zioQ/TpOtJIlEIYVlHJxPyU3sN5VEI\n8QRhL3+N8AjNmcx1kFjS0ACD3+MNLvkMji4taHR0cHM6Ly9hbGljZS5idGMuY2Fs\nZW5kYXIub3BlbnRpbWVzdGFtcHMub3Jn\n-----END OPENTIMESTAMPS GIT TIMESTAMP-----",
        "payload": "tree d0f5d9b5a1408287b70258aa10218172b758be30\nparent 9b08006bc502e67956d6ab518388fad6397cac8d\nauthor Jon Atack <jon@atack.com> 1629282858 +0200\ncommitter Jon Atack <jon@atack.com> 1630502795 +0200\n\nsync: remove DEBUG_LOCKCONTENTION preprocessor directives\n\nto allow logging the lock contentions without the need to define\nDEBUG_LOCKCONTENTION at compile time.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7e698732836121912f179b7c743a72dd6fdffa72",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/7e698732836121912f179b7c743a72dd6fdffa72",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7e698732836121912f179b7c743a72dd6fdffa72/comments",
    "author": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "9b08006bc502e67956d6ab518388fad6397cac8d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9b08006bc502e67956d6ab518388fad6397cac8d",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/9b08006bc502e67956d6ab518388fad6397cac8d"
      }
    ],
    "stats": {
      "total": 21,
      "additions": 5,
      "deletions": 16
    },
    "files": [
      {
        "sha": "eace86d9dda5ed0238176b39763f0e035a2751f6",
        "filename": "src/sync.cpp",
        "status": "modified",
        "additions": 0,
        "deletions": 5,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/7e698732836121912f179b7c743a72dd6fdffa72/src/sync.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/7e698732836121912f179b7c743a72dd6fdffa72/src/sync.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/sync.cpp?ref=7e698732836121912f179b7c743a72dd6fdffa72",
        "patch": "@@ -24,15 +24,10 @@\n #include <utility>\n #include <vector>\n \n-#ifdef DEBUG_LOCKCONTENTION\n-#if !defined(HAVE_THREAD_LOCAL)\n-static_assert(false, \"thread_local is not supported\");\n-#endif\n void LockContention(const char* pszName, const char* pszFile, int nLine)\n {\n     LOG_TIME_MICROS_WITH_CATEGORY(strprintf(\"%s, %s:%d\", pszName, pszFile, nLine), BCLog::LOCK);\n }\n-#endif /* DEBUG_LOCKCONTENTION */\n \n #ifdef DEBUG_LOCKORDER\n //"
      },
      {
        "sha": "bf15c0b4eb4a8d2f022eddc017bddec16693e745",
        "filename": "src/sync.h",
        "status": "modified",
        "additions": 5,
        "deletions": 11,
        "changes": 16,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/7e698732836121912f179b7c743a72dd6fdffa72/src/sync.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/7e698732836121912f179b7c743a72dd6fdffa72/src/sync.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/sync.h?ref=7e698732836121912f179b7c743a72dd6fdffa72",
        "patch": "@@ -126,10 +126,8 @@ using RecursiveMutex = AnnotatedMixin<std::recursive_mutex>;\n /** Wrapped mutex: supports waiting but not recursive locking */\n typedef AnnotatedMixin<std::mutex> Mutex;\n \n-#ifdef DEBUG_LOCKCONTENTION\n /** Prints a lock contention to the log */\n void LockContention(const char* pszName, const char* pszFile, int nLine);\n-#endif\n \n /** Wrapper around std::unique_lock style lock for Mutex. */\n template <typename Mutex, typename Base = typename Mutex::UniqueLock>\n@@ -139,22 +137,18 @@ class SCOPED_LOCKABLE UniqueLock : public Base\n     void Enter(const char* pszName, const char* pszFile, int nLine)\n     {\n         EnterCritical(pszName, pszFile, nLine, Base::mutex());\n-#ifdef DEBUG_LOCKCONTENTION\n-        if (!Base::try_lock()) {\n-            LockContention(pszName, pszFile, nLine); // log the contention\n-#endif\n-            Base::lock();\n-#ifdef DEBUG_LOCKCONTENTION\n-        }\n-#endif\n+        if (Base::try_lock()) return;\n+        LockContention(pszName, pszFile, nLine); // log the contention\n+        Base::lock();\n     }\n \n     bool TryEnter(const char* pszName, const char* pszFile, int nLine)\n     {\n         EnterCritical(pszName, pszFile, nLine, Base::mutex(), true);\n         Base::try_lock();\n-        if (!Base::owns_lock())\n+        if (!Base::owns_lock()) {\n             LeaveCritical();\n+        }\n         return Base::owns_lock();\n     }\n "
      }
    ]
  }
]