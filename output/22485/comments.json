[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/882138024",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22485#issuecomment-882138024",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22485",
    "id": 882138024,
    "node_id": "IC_kwDOABII5840lFuo",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-19T00:04:18Z",
    "updated_at": "2021-11-16T15:08:10Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/882138024/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/889792034",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22485#issuecomment-889792034",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22485",
    "id": 889792034,
    "node_id": "IC_kwDOABII5841CSYi",
    "user": {
      "login": "tryphe",
      "id": 8435003,
      "node_id": "MDQ6VXNlcjg0MzUwMDM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8435003?u=7c63a6209cf9ab35dd71f150c3fe68a4eaef89cf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tryphe",
      "html_url": "https://github.com/tryphe",
      "followers_url": "https://api.github.com/users/tryphe/followers",
      "following_url": "https://api.github.com/users/tryphe/following{/other_user}",
      "gists_url": "https://api.github.com/users/tryphe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tryphe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
      "organizations_url": "https://api.github.com/users/tryphe/orgs",
      "repos_url": "https://api.github.com/users/tryphe/repos",
      "events_url": "https://api.github.com/users/tryphe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tryphe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-30T10:14:50Z",
    "updated_at": "2021-07-30T10:16:08Z",
    "author_association": "CONTRIBUTOR",
    "body": "Concept ACK\r\n\r\nAny easy way to confirm this behavior, regarding BlockConnected signals vs.\r\nusing ThreadSync()? Would be willing to test it out.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/889792034/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/954763822",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22485#issuecomment-954763822",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22485",
    "id": 954763822,
    "node_id": "IC_kwDOABII58446Iou",
    "user": {
      "login": "jamesob",
      "id": 73197,
      "node_id": "MDQ6VXNlcjczMTk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jamesob",
      "html_url": "https://github.com/jamesob",
      "followers_url": "https://api.github.com/users/jamesob/followers",
      "following_url": "https://api.github.com/users/jamesob/following{/other_user}",
      "gists_url": "https://api.github.com/users/jamesob/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
      "organizations_url": "https://api.github.com/users/jamesob/orgs",
      "repos_url": "https://api.github.com/users/jamesob/repos",
      "events_url": "https://api.github.com/users/jamesob/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jamesob/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-29T13:54:18Z",
    "updated_at": "2021-10-29T13:54:18Z",
    "author_association": "MEMBER",
    "body": "Worth merging? Anything left to do here? Should I close?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/954763822/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/672112880",
    "pull_request_review_id": 709309310,
    "id": 672112880,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MjExMjg4MA==",
    "diff_hunk": "@@ -66,7 +66,16 @@ bool BaseIndex::Init()\n     } else {\n         m_best_block_index = m_chainstate->m_blockman.FindForkInGlobalIndex(active_chain, locator);\n     }\n+\n+    // Note: this will latch to true immediately if the user starts up with an empty\n+    // datadir and an index enabled. If this is the case, indexation will happen solely\n+    // via `BlockConnected` signals until, possibly, the next restart.",
    "path": "src/index/base.cpp",
    "position": 7,
    "original_position": 7,
    "commit_id": "2b48b03f9b6fd3126f957f328dd559fadceeaa7f",
    "original_commit_id": "2b48b03f9b6fd3126f957f328dd559fadceeaa7f",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "What do you mean with \"until the next restart\"? Once the index is in sync with the active chain tip, it will stay that way, regardless of restarts. The only way it could get out of sync is when you disable the index on a restart, advance the tip, then enable it again. Am I missing something?",
    "created_at": "2021-07-19T08:52:23Z",
    "updated_at": "2021-07-19T08:52:41Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22485#discussion_r672112880",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22485",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/672112880"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22485#discussion_r672112880"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22485"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/672112880/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 72,
    "original_line": 72,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/672130887",
    "pull_request_review_id": 709332569,
    "id": 672130887,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MjEzMDg4Nw==",
    "diff_hunk": "@@ -66,7 +66,16 @@ bool BaseIndex::Init()\n     } else {\n         m_best_block_index = m_chainstate->m_blockman.FindForkInGlobalIndex(active_chain, locator);\n     }\n+\n+    // Note: this will latch to true immediately if the user starts up with an empty\n+    // datadir and an index enabled. If this is the case, indexation will happen solely\n+    // via `BlockConnected` signals until, possibly, the next restart.",
    "path": "src/index/base.cpp",
    "position": 7,
    "original_position": 7,
    "commit_id": "2b48b03f9b6fd3126f957f328dd559fadceeaa7f",
    "original_commit_id": "2b48b03f9b6fd3126f957f328dd559fadceeaa7f",
    "user": {
      "login": "jamesob",
      "id": 73197,
      "node_id": "MDQ6VXNlcjczMTk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jamesob",
      "html_url": "https://github.com/jamesob",
      "followers_url": "https://api.github.com/users/jamesob/followers",
      "following_url": "https://api.github.com/users/jamesob/following{/other_user}",
      "gists_url": "https://api.github.com/users/jamesob/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
      "organizations_url": "https://api.github.com/users/jamesob/orgs",
      "repos_url": "https://api.github.com/users/jamesob/repos",
      "events_url": "https://api.github.com/users/jamesob/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jamesob/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This is contingent on how fast the particular indexing process is; you can imagine that if a given index takes (for the sake of argument) a minute per block to build, if we get 1000 blocks connected and then the user shuts down immediately, the validationinterface queue may not clear* and we will start up out of sync after having been \"synced\" in the degenerate way. Does this make sense?\r\n\r\n*I know we wait for this queue to clear during a graceful shutdown, but we can't assume this.",
    "created_at": "2021-07-19T09:17:05Z",
    "updated_at": "2021-07-19T09:17:06Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22485#discussion_r672130887",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22485",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/672130887"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22485#discussion_r672130887"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22485"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/672130887/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 72,
    "original_line": 72,
    "side": "RIGHT",
    "in_reply_to_id": 672112880
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/741400913",
    "pull_request_review_id": 795833906,
    "id": 741400913,
    "node_id": "PRRC_kwDOABII584sMOFR",
    "diff_hunk": "@@ -66,7 +66,16 @@ bool BaseIndex::Init()\n     } else {\n         m_best_block_index = m_chainstate->m_blockman.FindForkInGlobalIndex(active_chain, locator);\n     }\n+\n+    // Note: this will latch to true immediately if the user starts up with an empty\n+    // datadir and an index enabled. If this is the case, indexation will happen solely\n+    // via `BlockConnected` signals until, possibly, the next restart.",
    "path": "src/index/base.cpp",
    "position": 7,
    "original_position": 7,
    "commit_id": "2b48b03f9b6fd3126f957f328dd559fadceeaa7f",
    "original_commit_id": "2b48b03f9b6fd3126f957f328dd559fadceeaa7f",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "In commit \"index: doc/log BaseIndex sync behavior with empty datadir\" (2b48b03f9b6fd3126f957f328dd559fadceeaa7f)\r\n\r\nI also found this confusing and would suggest just saying \"the index will get updated and stay in sync through BlockConnected notifications\"",
    "created_at": "2021-11-02T19:27:29Z",
    "updated_at": "2021-11-02T19:38:41Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22485#discussion_r741400913",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22485",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/741400913"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22485#discussion_r741400913"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22485"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/741400913/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 72,
    "original_line": 72,
    "side": "RIGHT",
    "in_reply_to_id": 672112880
  }
]