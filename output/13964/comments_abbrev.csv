practicalswift,2018-08-14T08:50:32Z,"Concept ACK\n\nMore diversity in testing is better.\n\nFWIW, it seems like a few tests are missing from `test_bitcoin.vcxproj` – is that intentional?\n\n```\n$ for FILE in $(git ls-files -- ""*_tests.cpp""); do FILE_BASENAME=$(basename ${FILE}); grep -q ${FILE_BASENAME} build_msvc/test_bitcoin/test_bitcoin.vcxproj || echo ""* ${FILE_BASENAME} missing in test_bitcoin.vcxproj""; done\n* descript",https://github.com/bitcoin/bitcoin/pull/13964#issuecomment-412801355,412801355,
ken2812221,2018-08-14T09:09:09Z,@practicalswift I'm not sure if it is intentional. Maybe @sipsorcery forgot to add them. I'll add those files after the test pass.,https://github.com/bitcoin/bitcoin/pull/13964#issuecomment-412806427,412806427,
NicolasDorier,2018-08-14T10:02:05Z,"btw, msbuild support wildcard replacing all `..\..\src\test\xxxxx_tests.cpp` by one `..\..\src\test\*.cpp` might work.\n\nEDIT: Or maybe `..\..\src\test\*_tests.cpp`",https://github.com/bitcoin/bitcoin/pull/13964#issuecomment-412820677,412820677,
MarcoFalke,2018-08-14T12:18:45Z,"utACK a87072f4b9ce2e4020dd2a1ca4ed7cb227757090\n\nCould you please post instructions for maintainers how to enable this appveyor thing?",https://github.com/bitcoin/bitcoin/pull/13964#issuecomment-412852328,412852328,
MarcoFalke,2018-08-14T12:20:53Z,"I guess https://ci.appveyor.com/projects/new on ""Public GitHub repositories""?",https://github.com/bitcoin/bitcoin/pull/13964#issuecomment-412852891,412852891,
ken2812221,2018-08-14T13:30:11Z,"@MarcoFalke Yes, note that appveyor does not connect with github team. So the owner need to change his account name on appveyor to ""bitcoin"" to get ""bitcoin"" project prefix(https://ci.appveyor.com/account), but that is not necessary.\n\n\n",https://github.com/bitcoin/bitcoin/pull/13964#issuecomment-412872022,412872022,
sipsorcery,2018-08-14T14:58:04Z,"Tested ACK https://github.com/bitcoin/bitcoin/commit/a87072f4b9ce2e4020dd2a1ca4ed7cb227757090\n\n@NicolasDorier's suggestion is a good one and would help avoid files missing in the future (it was human error on my behalf that caused them to be missing in the first place).\n\n``` \n<ItemGroup>\n  <ClCompile Include=""..\..\src\test\*.cpp"" Exclude=""..\..\src\test\test_bitcoin_fuzzy.cpp"" />\n  ",https://github.com/bitcoin/bitcoin/pull/13964#issuecomment-412901996,412901996,
practicalswift,2018-08-14T15:17:17Z,@sipsorcery Would it be possible to use wildcards in the other project files to make the maintenance of these scripts easier? :-),https://github.com/bitcoin/bitcoin/pull/13964#issuecomment-412908951,412908951,
MarcoFalke,2018-08-14T18:16:35Z,It must run on pull requests. Otherwise we can't enable it on the master branch without having to fix each failure post merge.,https://github.com/bitcoin/bitcoin/pull/13964#issuecomment-412967191,412967191,
ken2812221,2018-08-14T20:38:00Z,"@practicalswift That might not happen on other project files because that would cause link error.\n\n@MarcoFalke Yes, it can run on pull request https://ci.appveyor.com/project/ken2812221/bitcoin/build/1.0.151",https://github.com/bitcoin/bitcoin/pull/13964#issuecomment-413007801,413007801,
sipsorcery,2018-08-15T06:24:27Z,"@practicalswift For the other projects it's not really possible to use wildcards if we also want to maintain the same build components as the Makefile. In particular libbitcoin_common, libbitcoin_util, libbitcoin_consensus and libbitcoin_server all include *.cpp files from /src.\n\nOne alternative solution would be to write a script that parses the Makefile to automatically build the Visual Stud",https://github.com/bitcoin/bitcoin/pull/13964#issuecomment-413105517,413105517,
sipsorcery,2018-08-15T07:27:05Z,Tested ACK https://github.com/bitcoin/bitcoin/pull/13964/commits/1f6ff04e59fcd1f2315d194f096665d73c8922d2,https://github.com/bitcoin/bitcoin/pull/13964#issuecomment-413116670,413116670,
sipsorcery,2018-08-16T09:14:55Z,"A small note on the AppVeyor build in this PR.\n\nThe URL to install the bzip dependency in the AppVeyor version of vcpkg (the Microsoft C++ dependency that makes building bitcoin-core straight forward) is currently broken as per https://github.com/Microsoft/vcpkg/pull/4046.\n\nThe consequence is that anyone that forks bitcoin-core and creates their own AppVeyor job will end up with a failing ",https://github.com/bitcoin/bitcoin/pull/13964#issuecomment-413479697,413479697,
NicolasDorier,2018-08-16T09:22:31Z,@sipsorcery maybe pulling and just ckecking out specifc commit so that updates on appveryor does not have impact.,https://github.com/bitcoin/bitcoin/pull/13964#issuecomment-413481784,413481784,
sipsorcery,2018-08-16T09:47:41Z,Before doing a PR I'll try and ascertain how/when AppVeyor update vcpkg https://help.appveyor.com/discussions/problems/15817-vcpkg-updates.,https://github.com/bitcoin/bitcoin/pull/13964#issuecomment-413488460,413488460,
ken2812221,2018-08-17T03:00:00Z,@MarcoFalke Did you have any trouble while setting up Appveyor CI?,https://github.com/bitcoin/bitcoin/pull/13964#issuecomment-413743842,413743842,
NicolasDorier,2018-08-17T04:48:31Z,"Cool they replied on https://help.appveyor.com/discussions/problems/15817-vcpkg-updates\n\n```\ninstall:\n- cmd: |\n    cd ""C:\Tools\vcpkg""\n    git pull\n    .\bootstrap-vcpkg.bat\n    cd %appveyor_build_folder%\n```\n\n@MarcoFalke , you will need that for now if you want to include to github. That said they will fix in few weeks.",https://github.com/bitcoin/bitcoin/pull/13964#issuecomment-413756559,413756559,
MarcoFalke,2018-08-17T15:38:36Z,"@laanwj @ken2812221 I have set this up through DrahtBot. Though, it wouldn't run on pull requests, it seems.",https://github.com/bitcoin/bitcoin/pull/13964#issuecomment-413904894,413904894,
ken2812221,2018-08-17T15:58:02Z,"@MarcoFalke Can you take a look at https://github.com/bitcoin/bitcoin/settings/hooks\nIt should enable pull request\n![image](https://user-images.githubusercontent.com/11154118/44276155-40667880-a279-11e8-92c1-7eb7edb1d115.png)\n",https://github.com/bitcoin/bitcoin/pull/13964#issuecomment-413910568,413910568,
ras0219-msft,2018-08-17T19:48:14Z,"@sipsorcery We would definitely recommend what @NicolasDorier suggests -- the best fix here is to  checkout a specific vcpkg git commit in your appveyor.yml:\n```\ncd C:\Tools\vcpkg\ngit checkout <some sha, perhaps today's master>\n.\bootstrap-vcpkg.bat\ncd %appveyor_build_folder%\n```\nWhenever you want to update your dependencies (say, to fix issues like this), you just need to change the",https://github.com/bitcoin/bitcoin/pull/13964#issuecomment-413970785,413970785,
ken2812221,2018-08-23T04:42:57Z,"@MarcoFalke Could you enable rolling build for Appveyor?\n https://www.appveyor.com/docs/build-configuration/#rolling-builds",https://github.com/bitcoin/bitcoin/pull/13964#issuecomment-415288615,415288615,
MarcoFalke,2018-08-23T11:58:51Z,"Hmm, that would make it impossible to run multiple pull requests?",https://github.com/bitcoin/bitcoin/pull/13964#issuecomment-415389333,415389333,
ken2812221,2018-08-23T12:19:14Z,"@MarcoFalke  If you push to the same PR, it would cancel the previous one and does not affect other PRs.",https://github.com/bitcoin/bitcoin/pull/13964#issuecomment-415394474,415394474,
jonasschnelli,2018-08-23T20:32:12Z,"Post merge: I'm unsure about the usefulness of this. This requires documentation. I have no clue how to make #14032 pass AppVeyor...\nSomehow I have the feeling that this sets an unexpected heavy burden on those not primarily interested in MSVC support.\n\nIMO MSVC compatibility should be maintained by those interested in it.",https://github.com/bitcoin/bitcoin/pull/13964#issuecomment-415561509,415561509,
sipsorcery,2018-08-24T06:25:46Z,The project files for the msvc build are currently not automatically synchronised with the Makefiles. Whenever a new class file is added or removed the msvc build will break. Until we write a script to keep them in sync I agree with @jonasschnelli in that blocking a PR based on the msvc build is not ideal. ,https://github.com/bitcoin/bitcoin/pull/13964#issuecomment-415663925,415663925,
practicalswift,2018-08-24T09:09:32Z,"@sipsorcery Agreed!\n\nCould a way to solve this be to auto-generate the project files (or at least the parts referencing files) to make sure they’re automatically changed when new files are added/removed?\n\nThe only input needed for such auto-generation would be `find src/ -type f`? :-)\n\nSee previous discussion in https://github.com/bitcoin/bitcoin/pull/11526#issuecomment-338202281 and h",https://github.com/bitcoin/bitcoin/pull/13964#issuecomment-415700994,415700994,
ryanofsky,2018-08-24T18:19:28Z,"> blocking a PR based on the msvc build is not ideal.\n\nFrom irc yesterday (https://botbot.me/freenode/bitcoin-core-dev/msg/103712220/), it sounds like appveyor failures will not actually block merges, so they might not be a real problem (though annoying to look at).\n\n> Could a way to solve this be to auto-generate the project files\n\nAn easier way to alleviate this might just be to use ",https://github.com/bitcoin/bitcoin/pull/13964#issuecomment-415841215,415841215,
sipsorcery,2018-08-24T18:41:19Z,"The options I can think of:\n\n1. Leave the Visual Studio project files as is and manually update the project files as class files are added and removed. Over the last 12 months I’d estimate I’ve updated the project files about a dozen times,\n2. Investigate switching to a wildcard project file,\n3. Switch from Makefile to CMake to allow a wider variety of platform builds from a single configu",https://github.com/bitcoin/bitcoin/pull/13964#issuecomment-415847270,415847270,
