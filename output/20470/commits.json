[
  {
    "sha": "22437fc72e78ba3845a3953853d40093de32c395",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyMjQzN2ZjNzJlNzhiYTM4NDVhMzk1Mzg1M2Q0MDA5M2RlMzJjMzk1",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2020-09-26T01:18:01Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2020-12-11T16:43:11Z"
      },
      "message": "build: Run libdmg-hfsplus's DMG tool in make deploy\n\nPreviously, the compression of the .iso file to a .dmg file was done\noutside of `make deploy' in order to use the faketime-wrapped version of\nlibdmg-hfsplus's DMG tool.\n\nSpecifying the faketime-wrapped version of the DMG tool to ./configure\nfixes this and simplifies build scripts.",
      "tree": {
        "sha": "aee928dba9fe3ddc2ba9023d730b96be54d3faf0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/aee928dba9fe3ddc2ba9023d730b96be54d3faf0"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/22437fc72e78ba3845a3953853d40093de32c395",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/22437fc72e78ba3845a3953853d40093de32c395",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/22437fc72e78ba3845a3953853d40093de32c395",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/22437fc72e78ba3845a3953853d40093de32c395/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "b76abae387b9ac2526c315c95b0f2da8c78e16fc",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b76abae387b9ac2526c315c95b0f2da8c78e16fc",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/b76abae387b9ac2526c315c95b0f2da8c78e16fc"
      }
    ],
    "stats": {
      "total": 15,
      "additions": 10,
      "deletions": 5
    },
    "files": [
      {
        "sha": "810ef5db6bc53a7d372581a6cbf207ddafb4817a",
        "filename": ".gitignore",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/22437fc72e78ba3845a3953853d40093de32c395/.gitignore",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/22437fc72e78ba3845a3953853d40093de32c395/.gitignore",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/.gitignore?ref=22437fc72e78ba3845a3953853d40093de32c395",
        "patch": "@@ -76,6 +76,7 @@ src/qt/bitcoin-qt.includes\n *.log\n *.trs\n *.dmg\n+*.iso\n \n *.json.h\n *.raw.h"
      },
      {
        "sha": "07c56a46aeeccd2ce8d863540e9784fe2d050829",
        "filename": "Makefile.am",
        "status": "modified",
        "additions": 6,
        "deletions": 1,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/22437fc72e78ba3845a3953853d40093de32c395/Makefile.am",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/22437fc72e78ba3845a3953853d40093de32c395/Makefile.am",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/Makefile.am?ref=22437fc72e78ba3845a3953853d40093de32c395",
        "patch": "@@ -35,6 +35,7 @@ space := $(empty) $(empty)\n OSX_APP=Bitcoin-Qt.app\n OSX_VOLNAME = $(subst $(space),-,$(PACKAGE_NAME))\n OSX_DMG = $(OSX_VOLNAME).dmg\n+OSX_TEMP_ISO = $(OSX_DMG:.dmg=).temp.iso\n OSX_BACKGROUND_SVG=background.svg\n OSX_BACKGROUND_IMAGE=background.tiff\n OSX_BACKGROUND_IMAGE_DPIS=36 72\n@@ -135,9 +136,13 @@ $(APP_DIST_DIR)/Applications:\n \n $(APP_DIST_EXTRAS): $(APP_DIST_DIR)/$(OSX_APP)/Contents/MacOS/Bitcoin-Qt\n \n-$(OSX_DMG): $(APP_DIST_EXTRAS)\n+.INTERMEDIATE: $(OSX_TEMP_ISO)\n+$(OSX_TEMP_ISO): $(APP_DIST_EXTRAS)\n \t$(GENISOIMAGE) -no-cache-inodes -D -l -probe -V \"$(OSX_VOLNAME)\" -no-pad -r -dir-mode 0755 -apple -o $@ dist\n \n+$(OSX_DMG): $(OSX_TEMP_ISO)\n+\t$(DMG) dmg \"$<\" \"$@\"\n+\n dpi%.$(OSX_BACKGROUND_IMAGE): contrib/macdeploy/$(OSX_BACKGROUND_SVG)\n \tsed 's/PACKAGE_NAME/$(PACKAGE_NAME)/' < \"$<\" | $(RSVG_CONVERT) -f png -d $* -p $* | $(IMAGEMAGICK_CONVERT) - $@\n OSX_BACKGROUND_IMAGE_DPIFILES := $(foreach dpi,$(OSX_BACKGROUND_IMAGE_DPIS),dpi$(dpi).$(OSX_BACKGROUND_IMAGE))"
      },
      {
        "sha": "bdfbd9144555293bc496439b2b3d42363e64baa1",
        "filename": "configure.ac",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/22437fc72e78ba3845a3953853d40093de32c395/configure.ac",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/22437fc72e78ba3845a3953853d40093de32c395/configure.ac",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/configure.ac?ref=22437fc72e78ba3845a3953853d40093de32c395",
        "patch": "@@ -670,6 +670,7 @@ case $host in\n            AC_PATH_TOOL([INSTALLNAMETOOL], [install_name_tool], install_name_tool)\n            AC_PATH_TOOL([OTOOL], [otool], otool)\n            AC_PATH_PROGS([GENISOIMAGE], [genisoimage mkisofs],genisoimage)\n+           AC_PATH_PROGS([DMG], [dmg], dmg)\n            AC_PATH_PROGS([RSVG_CONVERT], [rsvg-convert rsvg],rsvg-convert)\n            AC_PATH_PROGS([IMAGEMAGICK_CONVERT], [convert],convert)\n            AC_PATH_PROGS([TIFFCP], [tiffcp],tiffcp)"
      },
      {
        "sha": "55b1dc2661dac882f3b52ae397c65e5413058d2a",
        "filename": "contrib/gitian-descriptors/gitian-osx.yml",
        "status": "modified",
        "additions": 2,
        "deletions": 4,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/22437fc72e78ba3845a3953853d40093de32c395/contrib/gitian-descriptors/gitian-osx.yml",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/22437fc72e78ba3845a3953853d40093de32c395/contrib/gitian-descriptors/gitian-osx.yml",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/gitian-descriptors/gitian-osx.yml?ref=22437fc72e78ba3845a3953853d40093de32c395",
        "patch": "@@ -38,7 +38,7 @@ script: |\n \n   WRAP_DIR=$HOME/wrapped\n   HOSTS=\"x86_64-apple-darwin18\"\n-  CONFIGFLAGS=\"--enable-reduce-exports --disable-bench --disable-gui-tests GENISOIMAGE=$WRAP_DIR/genisoimage\"\n+  CONFIGFLAGS=\"--enable-reduce-exports --disable-bench --disable-gui-tests GENISOIMAGE=$WRAP_DIR/genisoimage DMG=$WRAP_DIR/dmg\"\n   FAKETIME_HOST_PROGS=\"\"\n   FAKETIME_PROGS=\"ar ranlib date dmg genisoimage\"\n \n@@ -132,7 +132,6 @@ script: |\n \n     make osx_volname\n     make deploydir\n-    OSX_VOLNAME=\"$(cat osx_volname)\"\n     mkdir -p unsigned-app-${i}\n     cp osx_volname unsigned-app-${i}/\n     cp contrib/macdeploy/detached-sig-apply.sh unsigned-app-${i}\n@@ -145,8 +144,7 @@ script: |\n     find . | sort | tar --mtime=\"$REFERENCE_DATETIME\" --no-recursion --mode='u+rw,go+r-w,a+X' --owner=0 --group=0 -c -T - | gzip -9n > ${OUTDIR}/${DISTNAME}-osx-unsigned.tar.gz\n     popd\n \n-    make deploy\n-    ${WRAP_DIR}/dmg dmg \"${OSX_VOLNAME}.dmg\" ${OUTDIR}/${DISTNAME}-osx-unsigned.dmg\n+    make deploy OSX_DMG=\"${OUTDIR}/${DISTNAME}-osx-unsigned.dmg\"\n \n     cd installed\n     find . -name \"lib*.la\" -delete"
      }
    ]
  },
  {
    "sha": "0df98191268fe641dd5d12e3a9f517c0c5cfacdd",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowZGY5ODE5MTI2OGZlNjQxZGQ1ZDEyZTNhOWY1MTdjMGM1Y2ZhY2Rk",
    "commit": {
      "author": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2020-02-15T12:38:18Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2020-12-16T17:29:14Z"
      },
      "message": "build: Replace genisoimage with xorriso\n\nxorriso and its mkisofs/genisoimage emulation alter-ego xorrisofs are\nmore maintained, and has the right toggles for us to achieve output\ndeterminism without using blunt tools like faketime.\n\nIn this commit, we use xorrisofs from the build environment rather than\nbuilding it ourselves using depends. This is not necessary and can be\nchanged in the future.\n\nFrom https://wiki.debian.org/genisoimage?action=recall&rev=11 :\n\n> The classical command line interface for production of ISO 9660\n> filesystem images is the option set established by program mkisofs.\n> For reasons of licensing and other problems with its author, Debian\n> ships a fork of mkisofs, called genisoimage, which was split off in\n> 2006 and then developed independently.\n>\n> Meanwhile, genisoimage gets no new features and not even bug fixes. It\n> is first choice only if its options -udf or -hfs are needed.\n>\n> Replacement in most uses cases, especially for bootable ISO 9660\n> filesystems, archiving, and backup, is xorrisofs which starts the -as\n> mkisofs emulation mode of program xorriso.",
      "tree": {
        "sha": "bd79448b29b4cbfeebbed0a839909352f55b33d7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/bd79448b29b4cbfeebbed0a839909352f55b33d7"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0df98191268fe641dd5d12e3a9f517c0c5cfacdd",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0df98191268fe641dd5d12e3a9f517c0c5cfacdd",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/0df98191268fe641dd5d12e3a9f517c0c5cfacdd",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0df98191268fe641dd5d12e3a9f517c0c5cfacdd/comments",
    "author": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "22437fc72e78ba3845a3953853d40093de32c395",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/22437fc72e78ba3845a3953853d40093de32c395",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/22437fc72e78ba3845a3953853d40093de32c395"
      }
    ],
    "stats": {
      "total": 32,
      "additions": 15,
      "deletions": 17
    },
    "files": [
      {
        "sha": "6573f91d97100c435e4cc631469ab626ae778979",
        "filename": "Makefile.am",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0df98191268fe641dd5d12e3a9f517c0c5cfacdd/Makefile.am",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0df98191268fe641dd5d12e3a9f517c0c5cfacdd/Makefile.am",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/Makefile.am?ref=0df98191268fe641dd5d12e3a9f517c0c5cfacdd",
        "patch": "@@ -138,7 +138,7 @@ $(APP_DIST_EXTRAS): $(APP_DIST_DIR)/$(OSX_APP)/Contents/MacOS/Bitcoin-Qt\n \n .INTERMEDIATE: $(OSX_TEMP_ISO)\n $(OSX_TEMP_ISO): $(APP_DIST_EXTRAS)\n-\t$(GENISOIMAGE) -no-cache-inodes -D -l -probe -V \"$(OSX_VOLNAME)\" -no-pad -r -dir-mode 0755 -apple -o $@ dist\n+\t$(XORRISOFS) -D -l -V \"$(OSX_VOLNAME)\" -no-pad -r -dir-mode 0755 -o $@ dist\n \n $(OSX_DMG): $(OSX_TEMP_ISO)\n \t$(DMG) dmg \"$<\" \"$@\""
      },
      {
        "sha": "b0de2ec0bbedd5d9b57d43b3a3874b90804c84c1",
        "filename": "ci/test/00_setup_env_mac.sh",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0df98191268fe641dd5d12e3a9f517c0c5cfacdd/ci/test/00_setup_env_mac.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0df98191268fe641dd5d12e3a9f517c0c5cfacdd/ci/test/00_setup_env_mac.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/ci/test/00_setup_env_mac.sh?ref=0df98191268fe641dd5d12e3a9f517c0c5cfacdd",
        "patch": "@@ -9,7 +9,7 @@ export LC_ALL=C.UTF-8\n export CONTAINER_NAME=ci_macos_cross\n export DOCKER_NAME_TAG=ubuntu:18.04  # Check that bionic can cross-compile to macos (bionic is used in the gitian build as well)\n export HOST=x86_64-apple-darwin18\n-export PACKAGES=\"cmake imagemagick libcap-dev librsvg2-bin libz-dev libbz2-dev libtiff-tools python3-dev python3-setuptools\"\n+export PACKAGES=\"cmake imagemagick libcap-dev librsvg2-bin libz-dev libbz2-dev libtiff-tools python3-dev python3-setuptools xorriso\"\n export XCODE_VERSION=11.3.1\n export XCODE_BUILD_ID=11C505\n export RUN_UNIT_TESTS=false"
      },
      {
        "sha": "4d176bdd3baa5633ae3f1fe45daedb164a2b10f7",
        "filename": "configure.ac",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0df98191268fe641dd5d12e3a9f517c0c5cfacdd/configure.ac",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0df98191268fe641dd5d12e3a9f517c0c5cfacdd/configure.ac",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/configure.ac?ref=0df98191268fe641dd5d12e3a9f517c0c5cfacdd",
        "patch": "@@ -669,7 +669,7 @@ case $host in\n            AC_PATH_TOOL([DSYMUTIL], [dsymutil], dsymutil)\n            AC_PATH_TOOL([INSTALLNAMETOOL], [install_name_tool], install_name_tool)\n            AC_PATH_TOOL([OTOOL], [otool], otool)\n-           AC_PATH_PROGS([GENISOIMAGE], [genisoimage mkisofs],genisoimage)\n+           AC_PATH_PROGS([XORRISOFS], [xorrisofs], xorrisofs)\n            AC_PATH_PROGS([DMG], [dmg], dmg)\n            AC_PATH_PROGS([RSVG_CONVERT], [rsvg-convert rsvg],rsvg-convert)\n            AC_PATH_PROGS([IMAGEMAGICK_CONVERT], [convert],convert)"
      },
      {
        "sha": "2330ff77368d1f438b9741261458726c8ae1ceef",
        "filename": "contrib/gitian-descriptors/gitian-osx-signer.yml",
        "status": "modified",
        "additions": 3,
        "deletions": 2,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0df98191268fe641dd5d12e3a9f517c0c5cfacdd/contrib/gitian-descriptors/gitian-osx-signer.yml",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0df98191268fe641dd5d12e3a9f517c0c5cfacdd/contrib/gitian-descriptors/gitian-osx-signer.yml",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/gitian-descriptors/gitian-osx-signer.yml?ref=0df98191268fe641dd5d12e3a9f517c0c5cfacdd",
        "patch": "@@ -7,6 +7,7 @@ architectures:\n - \"amd64\"\n packages:\n - \"faketime\"\n+- \"xorriso\"\n remotes:\n - \"url\": \"https://github.com/bitcoin-core/bitcoin-detached-sigs.git\"\n   \"dir\": \"signature\"\n@@ -18,7 +19,7 @@ script: |\n   WRAP_DIR=$HOME/wrapped\n   mkdir -p ${WRAP_DIR}\n   export PATH=\"$PWD\":$PATH\n-  FAKETIME_PROGS=\"dmg genisoimage\"\n+  FAKETIME_PROGS=\"dmg xorrisofs\"\n \n   # Create global faketime wrappers\n   for prog in ${FAKETIME_PROGS}; do\n@@ -36,5 +37,5 @@ script: |\n   tar -xf ${UNSIGNED}\n   OSX_VOLNAME=\"$(cat osx_volname)\"\n   ./detached-sig-apply.sh ${UNSIGNED} signature/osx\n-  ${WRAP_DIR}/genisoimage -no-cache-inodes -D -l -probe -V \"${OSX_VOLNAME}\" -no-pad -r -dir-mode 0755 -apple -o uncompressed.dmg signed-app\n+  ${WRAP_DIR}/xorrisofs -D -l -V \"${OSX_VOLNAME}\" -no-pad -r -dir-mode 0755 -o uncompressed.dmg signed-app\n   ${WRAP_DIR}/dmg dmg uncompressed.dmg ${OUTDIR}/${SIGNED}"
      },
      {
        "sha": "9a7dd13c9cfa51f535ea09294dc728ba90fb1f18",
        "filename": "contrib/gitian-descriptors/gitian-osx.yml",
        "status": "modified",
        "additions": 4,
        "deletions": 3,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0df98191268fe641dd5d12e3a9f517c0c5cfacdd/contrib/gitian-descriptors/gitian-osx.yml",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0df98191268fe641dd5d12e3a9f517c0c5cfacdd/contrib/gitian-descriptors/gitian-osx.yml",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/gitian-descriptors/gitian-osx.yml?ref=0df98191268fe641dd5d12e3a9f517c0c5cfacdd",
        "patch": "@@ -28,6 +28,7 @@ packages:\n - \"python3-dev\"\n - \"python3-setuptools\"\n - \"fonts-tuffy\"\n+- \"xorriso\"\n remotes:\n - \"url\": \"https://github.com/bitcoin/bitcoin.git\"\n   \"dir\": \"bitcoin\"\n@@ -38,9 +39,9 @@ script: |\n \n   WRAP_DIR=$HOME/wrapped\n   HOSTS=\"x86_64-apple-darwin18\"\n-  CONFIGFLAGS=\"--enable-reduce-exports --disable-bench --disable-gui-tests GENISOIMAGE=$WRAP_DIR/genisoimage DMG=$WRAP_DIR/dmg\"\n+  CONFIGFLAGS=\"--enable-reduce-exports --disable-bench --disable-gui-tests XORRISOFS=${WRAP_DIR}/xorrisofs DMG=${WRAP_DIR}/dmg\"\n   FAKETIME_HOST_PROGS=\"\"\n-  FAKETIME_PROGS=\"ar ranlib date dmg genisoimage\"\n+  FAKETIME_PROGS=\"ar ranlib date dmg xorrisofs\"\n \n   export QT_RCC_TEST=1\n   export QT_RCC_SOURCE_DATE_OVERRIDE=1\n@@ -136,7 +137,7 @@ script: |\n     cp osx_volname unsigned-app-${i}/\n     cp contrib/macdeploy/detached-sig-apply.sh unsigned-app-${i}\n     cp contrib/macdeploy/detached-sig-create.sh unsigned-app-${i}\n-    cp ${BASEPREFIX}/${i}/native/bin/dmg ${BASEPREFIX}/${i}/native/bin/genisoimage unsigned-app-${i}\n+    cp ${BASEPREFIX}/${i}/native/bin/dmg unsigned-app-${i}\n     cp ${BASEPREFIX}/${i}/native/bin/${i}-codesign_allocate unsigned-app-${i}/codesign_allocate\n     cp ${BASEPREFIX}/${i}/native/bin/${i}-pagestuff unsigned-app-${i}/pagestuff\n     mv dist unsigned-app-${i}"
      },
      {
        "sha": "2d9a4a2153b567baa94c09c1e3a007625ceb889e",
        "filename": "contrib/macdeploy/README.md",
        "status": "modified",
        "additions": 5,
        "deletions": 9,
        "changes": 14,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0df98191268fe641dd5d12e3a9f517c0c5cfacdd/contrib/macdeploy/README.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0df98191268fe641dd5d12e3a9f517c0c5cfacdd/contrib/macdeploy/README.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/macdeploy/README.md?ref=0df98191268fe641dd5d12e3a9f517c0c5cfacdd",
        "patch": "@@ -92,19 +92,15 @@ created using these tools. The build process has been designed to avoid includin\n SDK's files in Gitian's outputs. All interim tarballs are fully deterministic and may be freely\n redistributed.\n \n-`genisoimage` is used to create the initial DMG. It is not deterministic as-is, so it has been\n-patched. A system `genisoimage` will work fine, but it will not be deterministic because\n-the file-order will change between invocations. The patch can be seen here: [cdrkit-deterministic.patch](https://github.com/bitcoin/bitcoin/blob/master/depends/patches/native_cdrkit/cdrkit-deterministic.patch).\n-No effort was made to fix this cleanly, so it likely leaks memory badly, however it's only used for\n-a single invocation, so that's no real concern.\n+[`xorrisofs`](https://www.gnu.org/software/xorriso/) is used to create the DMG.\n \n-`genisoimage` cannot compress DMGs, so afterwards, the DMG tool from the\n-`libdmg-hfsplus` project is used to compress it. There are several bugs in this tool and its\n-maintainer has seemingly abandoned the project.\n+`xorrisofs` cannot compress DMGs, so afterwards, the DMG tool from the\n+`libdmg-hfsplus` project is used to compress it. There are several bugs in this\n+tool and its maintainer has seemingly abandoned the project.\n \n The DMG tool has the ability to create DMGs from scratch as well, but this functionality is\n broken. Only the compression feature is currently used. Ideally, the creation could be fixed\n-and `genisoimage` would no longer be necessary.\n+and `xorrisofs` would no longer be necessary.\n \n Background images and other features can be added to DMG files by inserting a\n `.DS_Store` during creation."
      }
    ]
  },
  {
    "sha": "7587d11ec959f15f469bd396d4ad2697729b4ccd",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo3NTg3ZDExZWM5NTlmMTVmNDY5YmQzOTZkNGFkMjY5NzcyOWI0Y2Nk",
    "commit": {
      "author": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2020-02-15T12:41:14Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2020-12-16T17:29:14Z"
      },
      "message": "build: remove cdrkit package from depends",
      "tree": {
        "sha": "fdf58d47a4c8f2c974c00d348ed1ac97446f9676",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/fdf58d47a4c8f2c974c00d348ed1ac97446f9676"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7587d11ec959f15f469bd396d4ad2697729b4ccd",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7587d11ec959f15f469bd396d4ad2697729b4ccd",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/7587d11ec959f15f469bd396d4ad2697729b4ccd",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7587d11ec959f15f469bd396d4ad2697729b4ccd/comments",
    "author": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "0df98191268fe641dd5d12e3a9f517c0c5cfacdd",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0df98191268fe641dd5d12e3a9f517c0c5cfacdd",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/0df98191268fe641dd5d12e3a9f517c0c5cfacdd"
      }
    ],
    "stats": {
      "total": 116,
      "additions": 1,
      "deletions": 115
    },
    "files": [
      {
        "sha": "7bdf2d7dfda9a221ff75e842ea887f35ca153f42",
        "filename": "depends/packages/native_cdrkit.mk",
        "status": "removed",
        "additions": 0,
        "deletions": 28,
        "changes": 28,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0df98191268fe641dd5d12e3a9f517c0c5cfacdd/depends/packages/native_cdrkit.mk",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0df98191268fe641dd5d12e3a9f517c0c5cfacdd/depends/packages/native_cdrkit.mk",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/packages/native_cdrkit.mk?ref=0df98191268fe641dd5d12e3a9f517c0c5cfacdd",
        "patch": "@@ -1,28 +0,0 @@\n-package=native_cdrkit\n-$(package)_version=1.1.11\n-$(package)_download_path=https://distro.ibiblio.org/fatdog/source/600/c\n-$(package)_file_name=cdrkit-$($(package)_version).tar.bz2\n-$(package)_sha256_hash=b50d64c214a65b1a79afe3a964c691931a4233e2ba605d793eb85d0ac3652564\n-$(package)_patches=cdrkit-deterministic.patch\n-\n-define $(package)_preprocess_cmds\n-  patch -p1 < $($(package)_patch_dir)/cdrkit-deterministic.patch\n-endef\n-\n-# Starting with 10.1, GCC defaults to -fno-common, resulting in linking errors.\n-# Pass -fcommon to retain the legacy behaviour.\n-define $(package)_config_cmds\n-  $($(package)_cmake) -DCMAKE_C_FLAGS=\"$$($(1)_cflags) -fcommon\"\n-endef\n-\n-define $(package)_build_cmds\n-  $(MAKE) genisoimage\n-endef\n-\n-define $(package)_stage_cmds\n-  $(MAKE) DESTDIR=$($(package)_staging_dir) -C genisoimage install\n-endef\n-\n-define $(package)_postprocess_cmds\n-  rm bin/isovfy bin/isoinfo bin/isodump bin/isodebug bin/devdump\n-endef"
      },
      {
        "sha": "d4fd23a47b5b2d3a9b4d7be0fe56960d75b748ea",
        "filename": "depends/packages/packages.mk",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/7587d11ec959f15f469bd396d4ad2697729b4ccd/depends/packages/packages.mk",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/7587d11ec959f15f469bd396d4ad2697729b4ccd/depends/packages/packages.mk",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/packages/packages.mk?ref=7587d11ec959f15f469bd396d4ad2697729b4ccd",
        "patch": "@@ -25,5 +25,5 @@ darwin_native_packages = native_ds_store native_mac_alias\n $(host_arch)_$(host_os)_native_packages += native_b2\n \n ifneq ($(build_os),darwin)\n-darwin_native_packages += native_cctools native_cdrkit native_libdmg-hfsplus\n+darwin_native_packages += native_cctools native_libdmg-hfsplus\n endif"
      },
      {
        "sha": "8ab0993dc4de142ab7766a500640be92540fe80f",
        "filename": "depends/patches/native_cdrkit/cdrkit-deterministic.patch",
        "status": "removed",
        "additions": 0,
        "deletions": 86,
        "changes": 86,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0df98191268fe641dd5d12e3a9f517c0c5cfacdd/depends/patches/native_cdrkit/cdrkit-deterministic.patch",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0df98191268fe641dd5d12e3a9f517c0c5cfacdd/depends/patches/native_cdrkit/cdrkit-deterministic.patch",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/patches/native_cdrkit/cdrkit-deterministic.patch?ref=0df98191268fe641dd5d12e3a9f517c0c5cfacdd",
        "patch": "@@ -1,86 +0,0 @@\n---- cdrkit-1.1.11.old/genisoimage/tree.c\t2008-10-21 19:57:47.000000000 -0400\n-+++ cdrkit-1.1.11/genisoimage/tree.c\t2013-12-06 00:23:18.489622668 -0500\n-@@ -1139,8 +1139,9 @@\n- scan_directory_tree(struct directory *this_dir, char *path, \n- \t\t\t\t\t\t  struct directory_entry *de)\n- {\n--\tDIR\t\t*current_dir;\n-+        int             current_file;\n- \tchar\t\twhole_path[PATH_MAX];\n-+        struct dirent  **d_list;\n- \tstruct dirent\t*d_entry;\n- \tstruct directory *parent;\n- \tint\t\tdflag;\n-@@ -1164,7 +1165,8 @@\n- \tthis_dir->dir_flags |= DIR_WAS_SCANNED;\n- \n- \terrno = 0;\t/* Paranoia */\n--\tcurrent_dir = opendir(path);\n-+\t//current_dir = opendir(path);\n-+        current_file = scandir(path, &d_list, NULL, alphasort);\n- \td_entry = NULL;\n- \n- \t/*\n-@@ -1173,12 +1175,12 @@\n- \t */\n- \told_path = path;\n- \n--\tif (current_dir) {\n-+\tif (current_file >= 0) {\n- \t\terrno = 0;\n--\t\td_entry = readdir(current_dir);\n-+\t\td_entry = d_list[0];\n- \t}\n- \n--\tif (!current_dir || !d_entry) {\n-+\tif (current_file < 0 || !d_entry) {\n- \t\tint\tret = 1;\n- \n- #ifdef\tUSE_LIBSCHILY\n-@@ -1191,8 +1193,8 @@\n- \t\t\tde->isorec.flags[0] &= ~ISO_DIRECTORY;\n- \t\t\tret = 0;\n- \t\t}\n--\t\tif (current_dir)\n--\t\t\tclosedir(current_dir);\n-+\t\tif(d_list)\n-+\t\t\tfree(d_list);\n- \t\treturn (ret);\n- \t}\n- #ifdef\tABORT_DEEP_ISO_ONLY\n-@@ -1208,7 +1210,7 @@\n- \t\t\terrmsgno(EX_BAD, \"use Rock Ridge extensions via -R or -r,\\n\");\n- \t\t\terrmsgno(EX_BAD, \"or allow deep ISO9660 directory nesting via -D.\\n\");\n- \t\t}\n--\t\tclosedir(current_dir);\n-+\t\tfree(d_list);\n- \t\treturn (1);\n- \t}\n- #endif\n-@@ -1250,13 +1252,13 @@\n- \t\t * The first time through, skip this, since we already asked\n- \t\t * for the first entry when we opened the directory.\n- \t\t */\n--\t\tif (dflag)\n--\t\t\td_entry = readdir(current_dir);\n-+\t\tif (dflag && current_file >= 0)\n-+\t\t\td_entry = d_list[current_file];\n- \t\tdflag++;\n- \n--\t\tif (!d_entry)\n-+\t\tif (current_file < 0)\n- \t\t\tbreak;\n--\n-+                current_file--;\n- \t\t/* OK, got a valid entry */\n- \n- \t\t/* If we do not want all files, then pitch the backups. */\n-@@ -1348,7 +1350,7 @@\n- \t\tinsert_file_entry(this_dir, whole_path, d_entry->d_name);\n- #endif\t/* APPLE_HYB */\n- \t}\n--\tclosedir(current_dir);\n-+\tfree(d_list);\n- \n- #ifdef APPLE_HYB\n- \t/*"
      }
    ]
  }
]