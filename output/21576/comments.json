[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/812659510",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21576#issuecomment-812659510",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21576",
    "id": 812659510,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxMjY1OTUxMA==",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-02T18:39:56Z",
    "updated_at": "2021-04-27T07:54:21Z",
    "author_association": "MEMBER",
    "body": "I'm not tremendously excited by this approach of overloading `bumpfee`. But it also seems wrong to use `psbtbumpfee` here for the simple case of a single signer that has all the required keys. I could add yet another RPC method `signerbumpfee`?\r\n\r\ncc @achow101 @instagibbs ",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/812659510/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/812772264",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21576#issuecomment-812772264",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21576",
    "id": 812772264,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxMjc3MjI2NA==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-03T01:22:13Z",
    "updated_at": "2021-11-30T06:27:27Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#23628](https://github.com/bitcoin/bitcoin/pull/23628) (Check descriptors returned by external signers by sstone)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/812772264/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/851561966",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21576#issuecomment-851561966",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21576",
    "id": 851561966,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1MTU2MTk2Ng==",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-31T15:31:22Z",
    "updated_at": "2021-05-31T15:31:22Z",
    "author_association": "MEMBER",
    "body": "Rebased, addressed comments and added a test.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/851561966/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/909804743",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21576#issuecomment-909804743",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21576",
    "id": 909804743,
    "node_id": "IC_kwDOABII5842OoTH",
    "user": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-01T02:04:26Z",
    "updated_at": "2021-09-01T02:04:26Z",
    "author_association": "MEMBER",
    "body": "On further reflection, any reason not to put these details in `feebumper::SignTransaction` so it's more easily reused in the GUI?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/909804743/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/910364893",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21576#issuecomment-910364893",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21576",
    "id": 910364893,
    "node_id": "IC_kwDOABII5842QxDd",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-01T14:54:35Z",
    "updated_at": "2021-09-01T14:54:35Z",
    "author_association": "MEMBER",
    "body": "@luke-jr good idea: now it works with GUI too!",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/910364893/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/642044198",
    "pull_request_review_id": 671807247,
    "id": 642044198,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0MjA0NDE5OA==",
    "diff_hunk": "@@ -3521,16 +3521,39 @@ static RPCHelpMan bumpfee_helper(std::string method_name)\n     // If wallet private keys are enabled, return the new transaction id,\n     // otherwise return the base64-encoded unsigned PSBT of the new transaction.\n     if (!want_psbt) {\n-        if (!feebumper::SignTransaction(*pwallet, mtx)) {\n-            throw JSONRPCError(RPC_WALLET_ERROR, \"Can't sign transaction.\");\n-        }\n+        if (pwallet->IsWalletFlagSet(WALLET_FLAG_EXTERNAL_SIGNER)) {\n+            // Make a blank psbt\n+            PartiallySignedTransaction psbtx(mtx);\n \n-        uint256 txid;\n-        if (feebumper::CommitTransaction(*pwallet, hash, std::move(mtx), errors, txid) != feebumper::Result::OK) {\n-            throw JSONRPCError(RPC_WALLET_ERROR, errors[0].original);\n-        }\n+            // First fill transaction with our data without signing,\n+            // so external signers are not asked sign more than once.",
    "path": "src/wallet/rpcwallet.cpp",
    "position": null,
    "original_position": 25,
    "commit_id": "25aa986a53c5a2d8796e05fbe5094d3d037e188a",
    "original_commit_id": "0c0d293d31e96c9119e4793df66b375ec9f8495e",
    "user": {
      "login": "meshcollider",
      "id": 3211283,
      "node_id": "MDQ6VXNlcjMyMTEyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3211283?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/meshcollider",
      "html_url": "https://github.com/meshcollider",
      "followers_url": "https://api.github.com/users/meshcollider/followers",
      "following_url": "https://api.github.com/users/meshcollider/following{/other_user}",
      "gists_url": "https://api.github.com/users/meshcollider/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/meshcollider/subscriptions",
      "organizations_url": "https://api.github.com/users/meshcollider/orgs",
      "repos_url": "https://api.github.com/users/meshcollider/repos",
      "events_url": "https://api.github.com/users/meshcollider/events{/privacy}",
      "received_events_url": "https://api.github.com/users/meshcollider/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "nit: `asked sign` -> `asked to sign`",
    "created_at": "2021-05-30T08:56:38Z",
    "updated_at": "2021-05-30T09:00:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21576#discussion_r642044198",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21576",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/642044198"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21576#discussion_r642044198"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21576"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/642044198/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 3529,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/642044302",
    "pull_request_review_id": 671807247,
    "id": 642044302,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0MjA0NDMwMg==",
    "diff_hunk": "@@ -3521,16 +3521,39 @@ static RPCHelpMan bumpfee_helper(std::string method_name)\n     // If wallet private keys are enabled, return the new transaction id,\n     // otherwise return the base64-encoded unsigned PSBT of the new transaction.\n     if (!want_psbt) {\n-        if (!feebumper::SignTransaction(*pwallet, mtx)) {\n-            throw JSONRPCError(RPC_WALLET_ERROR, \"Can't sign transaction.\");\n-        }\n+        if (pwallet->IsWalletFlagSet(WALLET_FLAG_EXTERNAL_SIGNER)) {\n+            // Make a blank psbt\n+            PartiallySignedTransaction psbtx(mtx);\n \n-        uint256 txid;\n-        if (feebumper::CommitTransaction(*pwallet, hash, std::move(mtx), errors, txid) != feebumper::Result::OK) {\n-            throw JSONRPCError(RPC_WALLET_ERROR, errors[0].original);\n-        }\n+            // First fill transaction with our data without signing,\n+            // so external signers are not asked sign more than once.\n+            bool complete;\n+            pwallet->FillPSBT(psbtx, complete, SIGHASH_ALL, false, true);\n+            const TransactionError err = pwallet->FillPSBT(psbtx, complete, SIGHASH_ALL, true, false);",
    "path": "src/wallet/rpcwallet.cpp",
    "position": null,
    "original_position": 28,
    "commit_id": "25aa986a53c5a2d8796e05fbe5094d3d037e188a",
    "original_commit_id": "0c0d293d31e96c9119e4793df66b375ec9f8495e",
    "user": {
      "login": "meshcollider",
      "id": 3211283,
      "node_id": "MDQ6VXNlcjMyMTEyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3211283?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/meshcollider",
      "html_url": "https://github.com/meshcollider",
      "followers_url": "https://api.github.com/users/meshcollider/followers",
      "following_url": "https://api.github.com/users/meshcollider/following{/other_user}",
      "gists_url": "https://api.github.com/users/meshcollider/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/meshcollider/subscriptions",
      "organizations_url": "https://api.github.com/users/meshcollider/orgs",
      "repos_url": "https://api.github.com/users/meshcollider/repos",
      "events_url": "https://api.github.com/users/meshcollider/events{/privacy}",
      "received_events_url": "https://api.github.com/users/meshcollider/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "style nit: would be good to include the usual `/* sign */` etc. comments for the bools here.",
    "created_at": "2021-05-30T08:57:31Z",
    "updated_at": "2021-05-30T09:00:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21576#discussion_r642044302",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21576",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/642044302"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21576#discussion_r642044302"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21576"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/642044302/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 3532,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/642044407",
    "pull_request_review_id": 671807247,
    "id": 642044407,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0MjA0NDQwNw==",
    "diff_hunk": "@@ -3521,16 +3521,39 @@ static RPCHelpMan bumpfee_helper(std::string method_name)\n     // If wallet private keys are enabled, return the new transaction id,\n     // otherwise return the base64-encoded unsigned PSBT of the new transaction.\n     if (!want_psbt) {\n-        if (!feebumper::SignTransaction(*pwallet, mtx)) {\n-            throw JSONRPCError(RPC_WALLET_ERROR, \"Can't sign transaction.\");\n-        }\n+        if (pwallet->IsWalletFlagSet(WALLET_FLAG_EXTERNAL_SIGNER)) {\n+            // Make a blank psbt\n+            PartiallySignedTransaction psbtx(mtx);\n \n-        uint256 txid;\n-        if (feebumper::CommitTransaction(*pwallet, hash, std::move(mtx), errors, txid) != feebumper::Result::OK) {\n-            throw JSONRPCError(RPC_WALLET_ERROR, errors[0].original);\n-        }\n+            // First fill transaction with our data without signing,\n+            // so external signers are not asked sign more than once.\n+            bool complete;\n+            pwallet->FillPSBT(psbtx, complete, SIGHASH_ALL, false, true);\n+            const TransactionError err = pwallet->FillPSBT(psbtx, complete, SIGHASH_ALL, true, false);\n+            if (err != TransactionError::OK) {\n+                throw JSONRPCTransactionError(err);\n+            }\n \n-        result.pushKV(\"txid\", txid.GetHex());\n+            CMutableTransaction mtx;",
    "path": "src/wallet/rpcwallet.cpp",
    "position": null,
    "original_position": 34,
    "commit_id": "25aa986a53c5a2d8796e05fbe5094d3d037e188a",
    "original_commit_id": "0c0d293d31e96c9119e4793df66b375ec9f8495e",
    "user": {
      "login": "meshcollider",
      "id": 3211283,
      "node_id": "MDQ6VXNlcjMyMTEyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3211283?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/meshcollider",
      "html_url": "https://github.com/meshcollider",
      "followers_url": "https://api.github.com/users/meshcollider/followers",
      "following_url": "https://api.github.com/users/meshcollider/following{/other_user}",
      "gists_url": "https://api.github.com/users/meshcollider/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/meshcollider/subscriptions",
      "organizations_url": "https://api.github.com/users/meshcollider/orgs",
      "repos_url": "https://api.github.com/users/meshcollider/repos",
      "events_url": "https://api.github.com/users/meshcollider/events{/privacy}",
      "received_events_url": "https://api.github.com/users/meshcollider/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "redefinition of `mtx`?",
    "created_at": "2021-05-30T08:58:44Z",
    "updated_at": "2021-05-30T09:00:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21576#discussion_r642044407",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21576",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/642044407"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21576#discussion_r642044407"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21576"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/642044407/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 3537,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/642045233",
    "pull_request_review_id": 671808035,
    "id": 642045233,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0MjA0NTIzMw==",
    "diff_hunk": "@@ -3521,16 +3521,39 @@ static RPCHelpMan bumpfee_helper(std::string method_name)\n     // If wallet private keys are enabled, return the new transaction id,\n     // otherwise return the base64-encoded unsigned PSBT of the new transaction.",
    "path": "src/wallet/rpcwallet.cpp",
    "position": null,
    "original_position": 11,
    "commit_id": "25aa986a53c5a2d8796e05fbe5094d3d037e188a",
    "original_commit_id": "0c0d293d31e96c9119e4793df66b375ec9f8495e",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Do the merged changes in #22021 need to be updated with this pull?",
    "created_at": "2021-05-30T09:06:41Z",
    "updated_at": "2021-05-30T09:06:41Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21576#discussion_r642045233",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21576",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/642045233"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21576#discussion_r642045233"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21576"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/642045233/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 3522,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/642506086",
    "pull_request_review_id": 672333773,
    "id": 642506086,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0MjUwNjA4Ng==",
    "diff_hunk": "@@ -3521,16 +3521,39 @@ static RPCHelpMan bumpfee_helper(std::string method_name)\n     // If wallet private keys are enabled, return the new transaction id,\n     // otherwise return the base64-encoded unsigned PSBT of the new transaction.",
    "path": "src/wallet/rpcwallet.cpp",
    "position": null,
    "original_position": 11,
    "commit_id": "25aa986a53c5a2d8796e05fbe5094d3d037e188a",
    "original_commit_id": "0c0d293d31e96c9119e4793df66b375ec9f8495e",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I'll do a rebase and also address the nits above.",
    "created_at": "2021-05-31T13:53:13Z",
    "updated_at": "2021-05-31T13:53:13Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21576#discussion_r642506086",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21576",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/642506086"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21576#discussion_r642506086"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21576"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/642506086/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 3522,
    "side": "RIGHT",
    "in_reply_to_id": 642045233
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/642552286",
    "pull_request_review_id": 672394417,
    "id": 642552286,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0MjU1MjI4Ng==",
    "diff_hunk": "@@ -3521,16 +3521,39 @@ static RPCHelpMan bumpfee_helper(std::string method_name)\n     // If wallet private keys are enabled, return the new transaction id,\n     // otherwise return the base64-encoded unsigned PSBT of the new transaction.",
    "path": "src/wallet/rpcwallet.cpp",
    "position": null,
    "original_position": 11,
    "commit_id": "25aa986a53c5a2d8796e05fbe5094d3d037e188a",
    "original_commit_id": "0c0d293d31e96c9119e4793df66b375ec9f8495e",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "For now these comments are correct. In a multisig setup `bumpfee` will throw ` \"Transaction incomplete. Try psbtbumpfee instead.\"` (which in turn won't call the external signer). We can improve that later.",
    "created_at": "2021-05-31T15:07:50Z",
    "updated_at": "2021-05-31T15:08:28Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21576#discussion_r642552286",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21576",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/642552286"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21576#discussion_r642552286"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21576"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/642552286/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 3522,
    "side": "RIGHT",
    "in_reply_to_id": 642045233
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/699783919",
    "pull_request_review_id": 743327132,
    "id": 699783919,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5OTc4MzkxOQ==",
    "diff_hunk": "@@ -4174,10 +4195,10 @@ static RPCHelpMan send()\n             PartiallySignedTransaction psbtx(rawTx);\n \n             // First fill transaction with our data without signing,\n-            // so external signers are not asked sign more than once.\n+            // so external signers are not asked to sign more than once.\n             bool complete;\n-            pwallet->FillPSBT(psbtx, complete, SIGHASH_DEFAULT, false, true);\n-            const TransactionError err = pwallet->FillPSBT(psbtx, complete, SIGHASH_DEFAULT, true, false);\n+            pwallet->FillPSBT(psbtx, complete, SIGHASH_DEFAULT, false /* sign */, true /* bip32derivs */);",
    "path": "src/wallet/rpcwallet.cpp",
    "position": null,
    "original_position": 64,
    "commit_id": "25aa986a53c5a2d8796e05fbe5094d3d037e188a",
    "original_commit_id": "c7e4cc0c95e99c870ab504f44528792370f36939",
    "user": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Usually we put the meaning-comment before the value.",
    "created_at": "2021-09-01T01:46:49Z",
    "updated_at": "2021-09-01T02:00:11Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21576#discussion_r699783919",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21576",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/699783919"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21576#discussion_r699783919"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21576"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/699783919/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 4200,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/699785619",
    "pull_request_review_id": 743327132,
    "id": 699785619,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5OTc4NTYxOQ==",
    "diff_hunk": "@@ -3530,16 +3530,37 @@ static RPCHelpMan bumpfee_helper(std::string method_name)\n     // For bumpfee, return the new transaction id.\n     // For psbtbumpfee, return the base64-encoded unsigned PSBT of the new transaction.\n     if (!want_psbt) {\n-        if (!feebumper::SignTransaction(*pwallet, mtx)) {\n-            throw JSONRPCError(RPC_WALLET_ERROR, \"Can't sign transaction.\");\n-        }\n+        if (pwallet->IsWalletFlagSet(WALLET_FLAG_EXTERNAL_SIGNER)) {\n+            // Make a blank psbt\n+            PartiallySignedTransaction psbtx(mtx);\n \n-        uint256 txid;\n-        if (feebumper::CommitTransaction(*pwallet, hash, std::move(mtx), errors, txid) != feebumper::Result::OK) {\n-            throw JSONRPCError(RPC_WALLET_ERROR, errors[0].original);\n-        }\n+            // First fill transaction with our data without signing,\n+            // so external signers are not asked to sign more than once.\n+            bool complete;\n+            pwallet->FillPSBT(psbtx, complete, SIGHASH_ALL, false /* sign */, true /* bip32derivs */);\n+            const TransactionError err = pwallet->FillPSBT(psbtx, complete, SIGHASH_ALL, true /* sign */, false  /* bip32derivs */);\n+            if (err != TransactionError::OK) {\n+                throw JSONRPCTransactionError(err);\n+            }\n \n-        result.pushKV(\"txid\", txid.GetHex());\n+            complete = FinalizeAndExtractPSBT(psbtx, mtx);\n+\n+            if (!complete) {\n+                throw JSONRPCError(RPC_WALLET_ERROR, \"Transaction incomplete. Try psbtbumpfee instead.\");\n+            }\n+            CTransactionRef tx(MakeTransactionRef(std::move(mtx)));\n+            result.pushKV(\"txid\", tx->GetHash().GetHex());",
    "path": "src/wallet/rpcwallet.cpp",
    "position": null,
    "original_position": 40,
    "commit_id": "25aa986a53c5a2d8796e05fbe5094d3d037e188a",
    "original_commit_id": "c7e4cc0c95e99c870ab504f44528792370f36939",
    "user": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Prefer to assign `txid` here and do a single shared `pushKV` later.",
    "created_at": "2021-09-01T01:51:51Z",
    "updated_at": "2021-09-01T02:00:11Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21576#discussion_r699785619",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21576",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/699785619"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21576#discussion_r699785619"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21576"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/699785619/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 3552,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/700248131",
    "pull_request_review_id": 743975319,
    "id": 700248131,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwMDI0ODEzMQ==",
    "diff_hunk": "@@ -4174,10 +4195,10 @@ static RPCHelpMan send()\n             PartiallySignedTransaction psbtx(rawTx);\n \n             // First fill transaction with our data without signing,\n-            // so external signers are not asked sign more than once.\n+            // so external signers are not asked to sign more than once.\n             bool complete;\n-            pwallet->FillPSBT(psbtx, complete, SIGHASH_DEFAULT, false, true);\n-            const TransactionError err = pwallet->FillPSBT(psbtx, complete, SIGHASH_DEFAULT, true, false);\n+            pwallet->FillPSBT(psbtx, complete, SIGHASH_DEFAULT, false /* sign */, true /* bip32derivs */);",
    "path": "src/wallet/rpcwallet.cpp",
    "position": null,
    "original_position": 64,
    "commit_id": "25aa986a53c5a2d8796e05fbe5094d3d037e188a",
    "original_commit_id": "c7e4cc0c95e99c870ab504f44528792370f36939",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "That indeed seems more common (`*/,` has 93 results vs 441 for `, /* `)",
    "created_at": "2021-09-01T14:05:52Z",
    "updated_at": "2021-09-01T14:05:52Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21576#discussion_r700248131",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21576",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/700248131"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21576#discussion_r700248131"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21576"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/700248131/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 4200,
    "side": "RIGHT",
    "in_reply_to_id": 699783919
  }
]