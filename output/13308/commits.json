[
  {
    "sha": "8009958363630f4c8347d691748337689fb212f9",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo4MDA5OTU4MzYzNjMwZjRjODM0N2Q2OTE3NDgzMzc2ODlmYjIxMmY5",
    "commit": {
      "author": {
        "name": "Sebastian Kung",
        "email": "seb.kung@gmail.com",
        "date": "2018-05-19T14:22:47Z"
      },
      "committer": {
        "name": "Sebastian Kung",
        "email": "seb.kung@gmail.com",
        "date": "2018-05-19T14:30:19Z"
      },
      "message": "Ugrade Qt depends to Qt5.9.4\n\nDepends can now be built with Qt5.9.4 , which is Qt's new long term\nsupport version.",
      "tree": {
        "sha": "5b381862025a6ebc22cbb32f8bcbfa80222891ab",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5b381862025a6ebc22cbb32f8bcbfa80222891ab"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8009958363630f4c8347d691748337689fb212f9",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE8s/Eq9C5nYN+67fQm3m0VpHbQXMFAlsANPsACgkQm3m0VpHb\nQXMwYQ//f4Z3yrE+QGOFmnGd8Ml0Wusyp7HF+tAUlmbFEwlMUBP2AF/xXRlZT+pR\nqPPD51COQQ+cUdXSmBeMxdocq4Bxox63ODcJ5yVEXb/45ka0r1wpKAREwAVGf9uL\nN2Bw6Ql/pFeK5ibpyDmDehgoXen695Qv1VZS0hiAVzLY6aDz6jY1Ldz5EhbSqsUr\nxsMwReNZqxZ3oWINONpUoxJ4nZo9hjykfKIot35vm2FMOLnnf+Fb3A81IplfRSLu\n8ErtKIg5Qzp96QD93ZjaCHtIUnSZBZJaMKjpfbkdivj7ZCaNBfov8dG+7PLFSeu9\n7njjQtmHE+rHgxHHHgPqfvcfJBWIfeHrJj5qntdq6fFWLDC2aovrZ+EZDKxI7FWd\n9M9eplbVHW19ik4303P8L1Oi8TDGoe42J0x9vhyBsilfFM4h0CjwDj5BQbNZHl4f\nHTCfjxY3+0md6Wzb9hmN3gInUw1Jv0O8yLFDwjl2v00uRgysEVztyitEFs2+Pa77\nSeZkW2GRYg+QHnZEkekT9YsnhlhHDWTzBaB2Iu9xHjF0+IumoseLlcazVI+qYzUv\nrpQ9iUcBUPj5ZDfG9+xKLIHRnFbNsarEGVFE/zrjsvJ8f8SStn9/Y8tCseP2jXiO\nDPpLJ+rTgyqVA8p1jJVGLSXybuNs/7iMmWBQDN0l9j5Rjfp8BI8=\n=8wdP\n-----END PGP SIGNATURE-----",
        "payload": "tree 5b381862025a6ebc22cbb32f8bcbfa80222891ab\nparent e76acf3384aca13cd2dd850568317c0ce44458ed\nauthor Sebastian Kung <seb.kung@gmail.com> 1526739767 +0200\ncommitter Sebastian Kung <seb.kung@gmail.com> 1526740219 +0200\n\nUgrade Qt depends to Qt5.9.4\n\nDepends can now be built with Qt5.9.4 , which is Qt's new long term\nsupport version.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8009958363630f4c8347d691748337689fb212f9",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/8009958363630f4c8347d691748337689fb212f9",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8009958363630f4c8347d691748337689fb212f9/comments",
    "author": {
      "login": "TheCharlatan",
      "id": 8421793,
      "node_id": "MDQ6VXNlcjg0MjE3OTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheCharlatan",
      "html_url": "https://github.com/TheCharlatan",
      "followers_url": "https://api.github.com/users/TheCharlatan/followers",
      "following_url": "https://api.github.com/users/TheCharlatan/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
      "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
      "repos_url": "https://api.github.com/users/TheCharlatan/repos",
      "events_url": "https://api.github.com/users/TheCharlatan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "TheCharlatan",
      "id": 8421793,
      "node_id": "MDQ6VXNlcjg0MjE3OTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheCharlatan",
      "html_url": "https://github.com/TheCharlatan",
      "followers_url": "https://api.github.com/users/TheCharlatan/followers",
      "following_url": "https://api.github.com/users/TheCharlatan/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
      "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
      "repos_url": "https://api.github.com/users/TheCharlatan/repos",
      "events_url": "https://api.github.com/users/TheCharlatan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "e76acf3384aca13cd2dd850568317c0ce44458ed",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e76acf3384aca13cd2dd850568317c0ce44458ed",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/e76acf3384aca13cd2dd850568317c0ce44458ed"
      }
    ],
    "stats": {
      "total": 338,
      "additions": 87,
      "deletions": 251
    },
    "files": [
      {
        "sha": "91a212bc17a4d0bdf3f6741dd63b69106ac33521",
        "filename": "build-aux/m4/bitcoin_qt.m4",
        "status": "modified",
        "additions": 67,
        "deletions": 19,
        "changes": 86,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8009958363630f4c8347d691748337689fb212f9/build-aux/m4/bitcoin_qt.m4",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8009958363630f4c8347d691748337689fb212f9/build-aux/m4/bitcoin_qt.m4",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/build-aux/m4/bitcoin_qt.m4?ref=8009958363630f4c8347d691748337689fb212f9",
        "patch": "@@ -292,35 +292,56 @@ AC_DEFUN([_BITCOIN_QT_CHECK_QT5],[\n       #endif\n     ]],\n     [[\n-      #if QT_VERSION < 0x050000\n+      #if QT_VERSION < 0x050000 || QT_VERSION_MAJOR < 5\n       choke\n       #endif\n     ]])],\n     [bitcoin_cv_qt5=yes],\n     [bitcoin_cv_qt5=no])\n ])])\n \n-dnl Internal. Check if the linked version of Qt was built as static libs.\n-dnl Requires: Qt5. This check cannot determine if Qt4 is static.\n-dnl Requires: INCLUDES and LIBS must be populated as necessary.\n-dnl Output: bitcoin_cv_static_qt=yes|no\n-dnl Output: Defines QT_STATICPLUGIN if plugins are static.\n-AC_DEFUN([_BITCOIN_QT_IS_STATIC],[\n-  AC_CACHE_CHECK(for static Qt, bitcoin_cv_static_qt,[\n+dnl Internal. Check if the included version of Qt is greater than Qt57.\n+dnl Requires: INCLUDES must be populated as necessary.\n+dnl Output: bitcoin_cv_qt5=yes|no\n+AC_DEFUN([_BITCOIN_QT_CHECK_QT58],[\n+  AC_CACHE_CHECK(for > Qt 5.7, bitcoin_cv_qt58,[\n   AC_COMPILE_IFELSE([AC_LANG_PROGRAM([[\n       #include <QtCore/qconfig.h>\n       #ifndef QT_VERSION\n       #  include <QtCore/qglobal.h>\n       #endif\n     ]],\n     [[\n-      #if !defined(QT_STATIC)\n+      #if QT_VERSION_MINOR < 8\n       choke\n       #endif\n     ]])],\n-    [bitcoin_cv_static_qt=yes],\n-    [bitcoin_cv_static_qt=no])\n-  ])\n+    [bitcoin_cv_qt58=yes],\n+    [bitcoin_cv_qt58=no])\n+])])\n+\n+\n+dnl Internal. Check if the linked version of Qt was built as static libs.\n+dnl Requires: Qt5. This check cannot determine if Qt4 is static.\n+dnl Requires: INCLUDES and LIBS must be populated as necessary.\n+dnl Output: bitcoin_cv_static_qt=yes|no\n+dnl Output: Defines QT_STATICPLUGIN if plugins are static.\n+AC_DEFUN([_BITCOIN_QT_IS_STATIC],[\n+  AC_CACHE_CHECK(for static Qt, bitcoin_cv_static_qt,[\n+    AC_COMPILE_IFELSE([AC_LANG_PROGRAM([[\n+        #include <QtCore/qconfig.h>\n+        #ifndef QT_VERSION OR QT_VERSION_STR\n+        #  include <QtCore/qglobal.h>\n+        #endif\n+      ]],\n+      [[\n+        #if !defined(QT_STATIC)\n+        choke\n+        #endif\n+      ]])],\n+      [bitcoin_cv_static_qt=yes],\n+      [bitcoin_cv_static_qt=no])\n+    ])\n   if test \"x$bitcoin_cv_static_qt\" = xyes; then\n     AC_DEFINE(QT_STATICPLUGIN, 1, [Define this symbol for static Qt plugins])\n   fi\n@@ -360,14 +381,25 @@ AC_DEFUN([_BITCOIN_QT_FIND_STATIC_PLUGINS],[\n      if test \"x$use_pkgconfig\" = xyes; then\n      : dnl\n      m4_ifdef([PKG_CHECK_MODULES],[\n-       PKG_CHECK_MODULES([QTPLATFORM], [Qt5PlatformSupport], [QT_LIBS=\"$QTPLATFORM_LIBS $QT_LIBS\"])\n+       if test x$bitcoin_cv_qt58 = xno; then\n+         PKG_CHECK_MODULES([QTPLATFORM], [Qt5PlatformSupport], [QT_LIBS=\"$QTPLATFORM_LIBS $QT_LIBS\"])\n+       else\n+         PKG_CHECK_MODULES([QTFONTDATABASE], [Qt5FontDatabaseSupport], [QT_LIBS=\"-lQt5FontDatabaseSupport $QT_LIBS\"])\n+         PKG_CHECK_MODULES([QTEVENTDISPATCHER], [Qt5EventDispatcherSupport], [QT_LIBS=\"-lQt5EventDispatcherSupport $QT_LIBS\"])\n+         PKG_CHECK_MODULES([QTTHEME], [Qt5ThemeSupport], [QT_LIBS=\"-lQt5ThemeSupport $QT_LIBS\"])\n+         PKG_CHECK_MODULES([QTDEVICEDISCOVERY], [Qt5DeviceDiscoverySupport], [QT_LIBS=\"-lQt5DeviceDiscoverySupport $QT_LIBS\"])\n+         PKG_CHECK_MODULES([QTACCESSIBILITY], [Qt5AccessibilitySupport], [QT_LIBS=\"-lQt5AccessibilitySupport $QT_LIBS\"])\n+         PKG_CHECK_MODULES([QTFB], [Qt5FbSupport], [QT_LIBS=\"-lQt5FbSupport $QT_LIBS\"])\n+                fi\n        if test \"x$TARGET_OS\" = xlinux; then\n          PKG_CHECK_MODULES([X11XCB], [x11-xcb], [QT_LIBS=\"$X11XCB_LIBS $QT_LIBS\"])\n          if ${PKG_CONFIG} --exists \"Qt5Core >= 5.5\" 2>/dev/null; then\n            PKG_CHECK_MODULES([QTXCBQPA], [Qt5XcbQpa], [QT_LIBS=\"$QTXCBQPA_LIBS $QT_LIBS\"])\n          fi\n        elif test \"x$TARGET_OS\" = xdarwin; then\n-         PKG_CHECK_MODULES([QTPRINT], [Qt5PrintSupport], [QT_LIBS=\"$QTPRINT_LIBS $QT_LIBS\"])\n+         PKG_CHECK_MODULES([QTCLIPBOARD], [Qt5ClipboardSupport], [QT_LIBS=\"-lQt5ClipboardSupport $QT_LIBS\"])\n+         PKG_CHECK_MODULES([QTGRAPHICS], [Qt5GraphicsSupport], [QT_LIBS=\"-lQt5GraphicsSupport $QT_LIBS\"])\n+         PKG_CHECK_MODULES([QTCGL], [Qt5CglSupport], [QT_LIBS=\"-lQt5CglSupport $QT_LIBS\"])\n        fi\n      ])\n      else\n@@ -380,15 +412,25 @@ AC_DEFUN([_BITCOIN_QT_FIND_STATIC_PLUGINS],[\n                #endif\n              ]],\n              [[\n-               #if QT_VERSION < 0x050600\n+               #if QT_VERSION < 0x050600 || QT_VERSION_MINOR < 6\n                choke\n                #endif\n              ]])],\n            [bitcoin_cv_need_platformsupport=yes],\n            [bitcoin_cv_need_platformsupport=no])\n          ])\n          if test \"x$bitcoin_cv_need_platformsupport\" = xyes; then\n-           BITCOIN_QT_CHECK(AC_CHECK_LIB([${QT_LIB_PREFIX}PlatformSupport],[main],,BITCOIN_QT_FAIL(lib${QT_LIB_PREFIX}PlatformSupport not found)))\n+           if test x$bitcoin_cv_qt58 = xno; then\n+             BITCOIN_QT_CHECK(AC_CHECK_LIB([${QT_LIB_PREFIX}PlatformSupport],[main],,BITCOIN_QT_FAIL(lib$QT_LIB_PREFIXPlatformSupport not found)))\n+           else\n+             BITCOIN_QT_CHECK(AC_CHECK_LIB([${QT_LIB_PREFIX}FontDatabaseSupport],[main],,BITCOIN_QT_FAIL(lib$QT_LIB_PREFIXFontDatabaseSupport not found)))\n+             BITCOIN_QT_CHECK(AC_CHECK_LIB([${QT_LIB_PREFIX}EventDispatcherSupport],[main],,BITCOIN_QT_FAIL(lib$QT_LIB_PREFIXEventDispatcherSupport not found)))\n+             BITCOIN_QT_CHECK(AC_CHECK_LIB([${QT_LIB_PREFIX}ThemeSupport],[main],,BITCOIN_QT_FAIL(lib$QT_LIB_PREFIXThemeSupport not found)))\n+             BITCOIN_QT_CHECK(AC_CHECK_LIB([${QT_LIB_PREFIX}FbSupport],[main],,BITCOIN_QT_FAIL(lib$QT_LIB_PREFIXFbSupport not found)))\n+             BITCOIN_QT_CHECK(AC_CHECK_LIB([${QT_LIB_PREFIX}DeviceDiscoverySupport],[main],,BITCOIN_QT_FAIL(lib$QT_LIB_PREFIXDeviceDiscoverySupport not found)))\n+             BITCOIN_QT_CHECK(AC_CHECK_LIB([${QT_LIB_PREFIX}AccessibilitySupport],[main],,BITCOIN_QT_FAIL(lib$QT_LIB_PREFIXAccessibilitySupport not found)))\n+             QT_LIBS=\"$QT_LIBS -lversion -ldwmapi -luxtheme\"\n+           fi\n          fi\n        fi\n      fi\n@@ -479,6 +521,7 @@ AC_DEFUN([_BITCOIN_QT_FIND_LIBS_WITHOUT_PKGCONFIG],[\n   BITCOIN_QT_CHECK([\n     if test \"x$bitcoin_qt_want_version\" = xauto; then\n       _BITCOIN_QT_CHECK_QT5\n+      _BITCOIN_QT_CHECK_QT58\n     fi\n     if test \"x$bitcoin_cv_qt5\" = xyes || test \"x$bitcoin_qt_want_version\" = xqt5; then\n       QT_LIB_PREFIX=Qt5\n@@ -501,10 +544,15 @@ AC_DEFUN([_BITCOIN_QT_FIND_LIBS_WITHOUT_PKGCONFIG],[\n   ])\n \n   BITCOIN_QT_CHECK(AC_CHECK_LIB([z] ,[main],,AC_MSG_WARN([zlib not found. Assuming qt has it built-in])))\n-  BITCOIN_QT_CHECK(AC_SEARCH_LIBS([png_error] ,[qtpng png],,AC_MSG_WARN([libpng not found. Assuming qt has it built-in])))\n   BITCOIN_QT_CHECK(AC_SEARCH_LIBS([jpeg_create_decompress] ,[qtjpeg jpeg],,AC_MSG_WARN([libjpeg not found. Assuming qt has it built-in])))\n-  BITCOIN_QT_CHECK(AC_SEARCH_LIBS([pcre16_exec], [qtpcre pcre16],,AC_MSG_WARN([libpcre16 not found. Assuming qt has it built-in])))\n-  BITCOIN_QT_CHECK(AC_SEARCH_LIBS([hb_ot_tags_from_script] ,[qtharfbuzzng harfbuzz],,AC_MSG_WARN([libharfbuzz not found. Assuming qt has it built-in or support is disabled])))\n+  if test x$bitcoin_cv_qt58 = xno; then\n+    BITCOIN_QT_CHECK(AC_SEARCH_LIBS([png_error] ,[qtpng png],,AC_MSG_WARN([libpng not found. Assuming qt has it built-in])))\n+    BITCOIN_QT_CHECK(AC_SEARCH_LIBS([pcre16_exec], [qtpcre pcre16],,AC_MSG_WARN([libpcre16 not found. Assuming qt has it built-in])))\n+  else\n+    BITCOIN_QT_CHECK(AC_SEARCH_LIBS([png_error] ,[qtlibpng png],,AC_MSG_WARN([libpng not found. Assuming qt has it built-in])))\n+    BITCOIN_QT_CHECK(AC_SEARCH_LIBS([pcre2_match_16], [qtpcre2 libqtpcre2],,AC_MSG_WARN([libqtpcre2 not found. Assuming qt has it built-in])))\n+  fi\n+  BITCOIN_QT_CHECK(AC_SEARCH_LIBS([hb_ot_tags_from_script] ,[qtharfbuzzng qtharfbuzz harfbuzz],,AC_MSG_WARN([libharfbuzz not found. Assuming qt has it built-in or support is disabled])))\n   BITCOIN_QT_CHECK(AC_CHECK_LIB([${QT_LIB_PREFIX}Core]   ,[main],,BITCOIN_QT_FAIL(lib${QT_LIB_PREFIX}Core not found)))\n   BITCOIN_QT_CHECK(AC_CHECK_LIB([${QT_LIB_PREFIX}Gui]    ,[main],,BITCOIN_QT_FAIL(lib${QT_LIB_PREFIX}Gui not found)))\n   BITCOIN_QT_CHECK(AC_CHECK_LIB([${QT_LIB_PREFIX}Network],[main],,BITCOIN_QT_FAIL(lib${QT_LIB_PREFIX}Network not found)))"
      },
      {
        "sha": "b4a8e530ad792ccb9ab939b65ff84cda70ac73f5",
        "filename": "depends/packages/qt.mk",
        "status": "modified",
        "additions": 19,
        "deletions": 32,
        "changes": 51,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8009958363630f4c8347d691748337689fb212f9/depends/packages/qt.mk",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8009958363630f4c8347d691748337689fb212f9/depends/packages/qt.mk",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/packages/qt.mk?ref=8009958363630f4c8347d691748337689fb212f9",
        "patch": "@@ -1,22 +1,20 @@\n PACKAGE=qt\n-$(package)_version=5.7.1\n-$(package)_download_path=http://download.qt.io/official_releases/qt/5.7/$($(package)_version)/submodules\n-$(package)_suffix=opensource-src-$($(package)_version).tar.gz\n+$(package)_version=5.9.4\n+$(package)_download_path=http://download.qt.io/official_releases/qt/5.9/$($(package)_version)/submodules\n+$(package)_suffix=opensource-src-$($(package)_version).tar.xz\n $(package)_file_name=qtbase-$($(package)_suffix)\n-$(package)_sha256_hash=95f83e532d23b3ddbde7973f380ecae1bac13230340557276f75f2e37984e410\n+$(package)_sha256_hash=69e6bde3ab00673a77e1506173551fec7d0cd899fcbf9b1260517db1b61004cf\n $(package)_dependencies=openssl zlib\n $(package)_linux_dependencies=freetype fontconfig libxcb libX11 xproto libXext\n $(package)_build_subdir=qtbase\n-$(package)_qt_libs=corelib network widgets gui plugins testlib\n-$(package)_patches=mac-qmake.conf mingw-uuidof.patch pidlist_absolute.patch fix-xcb-include-order.patch\n-$(package)_patches+=fix_qt_pkgconfig.patch fix-cocoahelpers-macos.patch qfixed-coretext.patch\n+$(package)_qt_libs=corelib network widgets gui plugins testlib concurrent xml\n+$(package)_patches=fix_qt_pkgconfig.patch mac-qmake.conf fix_configure_mac.patch fix_no_printer.patch qfixed-coretext.patch\n \n $(package)_qttranslations_file_name=qttranslations-$($(package)_suffix)\n-$(package)_qttranslations_sha256_hash=3a15aebd523c6d89fb97b2d3df866c94149653a26d27a00aac9b6d3020bc5a1d\n-\n+$(package)_qttranslations_sha256_hash=e5cf81f88cc6811166ea631e6b7faa869a578a910dce61e951f98ff83f27bad6\n \n $(package)_qttools_file_name=qttools-$($(package)_suffix)\n-$(package)_qttools_sha256_hash=22d67de915cb8cd93e16fdd38fa006224ad9170bd217c2be1e53045a8dd02f0f\n+$(package)_qttools_sha256_hash=95aa5782d5a79be22fba36cea4dc2319cf2a2060a3cc1e24e6585b8d98996e87\n \n $(package)_extra_sources  = $($(package)_qttranslations_file_name)\n $(package)_extra_sources += $($(package)_qttools_file_name)\n@@ -29,25 +27,18 @@ $(package)_config_opts += -c++std c++11\n $(package)_config_opts += -confirm-license\n $(package)_config_opts += -dbus-runtime\n $(package)_config_opts += -hostprefix $(build_prefix)\n-$(package)_config_opts += -no-alsa\n-$(package)_config_opts += -no-audio-backend\n $(package)_config_opts += -no-cups\n $(package)_config_opts += -no-egl\n $(package)_config_opts += -no-eglfs\n-$(package)_config_opts += -no-feature-style-windowsmobile\n-$(package)_config_opts += -no-feature-style-windowsce\n $(package)_config_opts += -no-freetype\n $(package)_config_opts += -no-gif\n $(package)_config_opts += -no-glib\n-$(package)_config_opts += -no-gstreamer\n $(package)_config_opts += -no-icu\n $(package)_config_opts += -no-iconv\n $(package)_config_opts += -no-kms\n $(package)_config_opts += -no-linuxfb\n $(package)_config_opts += -no-libudev\n-$(package)_config_opts += -no-mitshm\n $(package)_config_opts += -no-mtdev\n-$(package)_config_opts += -no-pulseaudio\n $(package)_config_opts += -no-openvg\n $(package)_config_opts += -no-reduce-relocations\n $(package)_config_opts += -no-qml-debug\n@@ -61,8 +52,6 @@ $(package)_config_opts += -no-sql-psql\n $(package)_config_opts += -no-sql-sqlite\n $(package)_config_opts += -no-sql-sqlite2\n $(package)_config_opts += -no-use-gold-linker\n-$(package)_config_opts += -no-xinput2\n-$(package)_config_opts += -no-xrender\n $(package)_config_opts += -nomake examples\n $(package)_config_opts += -nomake tests\n $(package)_config_opts += -opensource\n@@ -75,7 +64,6 @@ $(package)_config_opts += -qt-libpng\n $(package)_config_opts += -qt-libjpeg\n $(package)_config_opts += -qt-pcre\n $(package)_config_opts += -system-zlib\n-$(package)_config_opts += -reduce-exports\n $(package)_config_opts += -static\n $(package)_config_opts += -silent\n $(package)_config_opts += -v\n@@ -95,7 +83,6 @@ endif\n $(package)_config_opts_linux  = -qt-xkbcommon\n $(package)_config_opts_linux += -qt-xcb\n $(package)_config_opts_linux += -system-freetype\n-$(package)_config_opts_linux += -no-sm\n $(package)_config_opts_linux += -fontconfig\n $(package)_config_opts_linux += -no-opengl\n $(package)_config_opts_arm_linux  = -platform linux-g++ -xplatform $(host)\n@@ -124,7 +111,6 @@ define $(package)_extract_cmds\n   tar --strip-components=1 -xf $($(package)_source_dir)/$($(package)_qttools_file_name) -C qttools\n endef\n \n-\n define $(package)_preprocess_cmds\n   sed -i.old \"s|updateqm.commands = \\$$$$\\$$$$LRELEASE|updateqm.commands = $($(package)_extract_dir)/qttools/bin/lrelease|\" qttranslations/translations/translations.pro && \\\n   sed -i.old \"/updateqm.depends =/d\" qttranslations/translations/translations.pro && \\\n@@ -137,19 +123,17 @@ define $(package)_preprocess_cmds\n   cp -f qtbase/mkspecs/macx-clang/Info.plist.app qtbase/mkspecs/macx-clang-linux/ &&\\\n   cp -f qtbase/mkspecs/macx-clang/qplatformdefs.h qtbase/mkspecs/macx-clang-linux/ &&\\\n   cp -f $($(package)_patch_dir)/mac-qmake.conf qtbase/mkspecs/macx-clang-linux/qmake.conf && \\\n-  patch -p1 < $($(package)_patch_dir)/mingw-uuidof.patch && \\\n-  patch -p1 < $($(package)_patch_dir)/pidlist_absolute.patch && \\\n-  patch -p1 < $($(package)_patch_dir)/fix-xcb-include-order.patch && \\\n-  patch -p1 < $($(package)_patch_dir)/fix_qt_pkgconfig.patch && \\\n-  patch -p1 < $($(package)_patch_dir)/fix-cocoahelpers-macos.patch && \\\n-  patch -p1 < $($(package)_patch_dir)/qfixed-coretext.patch && \\\n+  patch -p1 -i $($(package)_patch_dir)/fix_qt_pkgconfig.patch &&\\\n+  patch -p1 -i $($(package)_patch_dir)/fix_no_printer.patch &&\\\n+  patch -p1 -i $($(package)_patch_dir)/qfixed-coretext.patch &&\\\n   echo \"!host_build: QMAKE_CFLAGS     += $($(package)_cflags) $($(package)_cppflags)\" >> qtbase/mkspecs/common/gcc-base.conf && \\\n   echo \"!host_build: QMAKE_CXXFLAGS   += $($(package)_cxxflags) $($(package)_cppflags)\" >> qtbase/mkspecs/common/gcc-base.conf && \\\n   echo \"!host_build: QMAKE_LFLAGS     += $($(package)_ldflags)\" >> qtbase/mkspecs/common/gcc-base.conf && \\\n+  echo \"QMAKE_LINK_OBJECT_MAX = 10\" >> qtbase/mkspecs/win32-g++/qmake.conf &&\\\n+  echo \"QMAKE_LINK_OBJECT_SCRIPT = object_script\" >> qtbase/mkspecs/win32-g++/qmake.conf &&\\\n   sed -i.old \"s|QMAKE_CFLAGS            = |!host_build: QMAKE_CFLAGS            = $($(package)_cflags) $($(package)_cppflags) |\" qtbase/mkspecs/win32-g++/qmake.conf && \\\n   sed -i.old \"s|QMAKE_LFLAGS            = |!host_build: QMAKE_LFLAGS            = $($(package)_ldflags) |\" qtbase/mkspecs/win32-g++/qmake.conf && \\\n   sed -i.old \"s|QMAKE_CXXFLAGS          = |!host_build: QMAKE_CXXFLAGS            = $($(package)_cxxflags) $($(package)_cppflags) |\" qtbase/mkspecs/win32-g++/qmake.conf\n-\n endef\n \n define $(package)_config_cmds\n@@ -161,19 +145,22 @@ define $(package)_config_cmds\n   echo \"CONFIG += force_bootstrap\" >> mkspecs/qconfig.pri && \\\n   $(MAKE) sub-src-clean && \\\n   cd ../qttranslations && ../qtbase/bin/qmake qttranslations.pro -o Makefile && \\\n-  cd translations && ../../qtbase/bin/qmake translations.pro -o Makefile && cd ../.. &&\\\n-  cd qttools/src/linguist/lrelease/ && ../../../../qtbase/bin/qmake lrelease.pro -o Makefile\n+  cd translations && ../../qtbase/bin/qmake translations.pro -o Makefile && cd ../.. && \\\n+  cd qttools/src/linguist/lrelease/ && ../../../../qtbase/bin/qmake lrelease.pro -o Makefile && \\\n+  cd ../lupdate/ && ../../../../qtbase/bin/qmake lupdate.pro -o Makefile && cd ../../../..\n endef\n \n define $(package)_build_cmds\n   $(MAKE) -C src $(addprefix sub-,$($(package)_qt_libs)) && \\\n   $(MAKE) -C ../qttools/src/linguist/lrelease && \\\n+  $(MAKE) -C ../qttools/src/linguist/lupdate && \\\n   $(MAKE) -C ../qttranslations\n endef\n \n define $(package)_stage_cmds\n-  $(MAKE) -C src INSTALL_ROOT=$($(package)_staging_dir) $(addsuffix -install_subtargets,$(addprefix sub-,$($(package)_qt_libs))) && cd .. &&\\\n+  $(MAKE) -C src INSTALL_ROOT=$($(package)_staging_dir) $(addsuffix -install_subtargets,$(addprefix sub-,$($(package)_qt_libs))) && cd .. && \\\n   $(MAKE) -C qttools/src/linguist/lrelease INSTALL_ROOT=$($(package)_staging_dir) install_target && \\\n+  $(MAKE) -C qttools/src/linguist/lupdate INSTALL_ROOT=$($(package)_staging_dir) install_target && \\\n   $(MAKE) -C qttranslations INSTALL_ROOT=$($(package)_staging_dir) install_subtargets && \\\n   if `test -f qtbase/src/plugins/platforms/xcb/xcb-static/libxcb-static.a`; then \\\n     cp qtbase/src/plugins/platforms/xcb/xcb-static/libxcb-static.a $($(package)_staging_prefix_dir)/lib; \\"
      },
      {
        "sha": "1b43a9eff8fe924961b3962ee0d892ae5553c75c",
        "filename": "depends/patches/qt/fix-cocoahelpers-macos.patch",
        "status": "removed",
        "additions": 0,
        "deletions": 70,
        "changes": 70,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e76acf3384aca13cd2dd850568317c0ce44458ed/depends/patches/qt/fix-cocoahelpers-macos.patch",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e76acf3384aca13cd2dd850568317c0ce44458ed/depends/patches/qt/fix-cocoahelpers-macos.patch",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/patches/qt/fix-cocoahelpers-macos.patch?ref=e76acf3384aca13cd2dd850568317c0ce44458ed",
        "patch": "@@ -1,70 +0,0 @@\n-From 0707260a4f8e64dfadf1df5f935e74cabb7c7d27 Mon Sep 17 00:00:00 2001\n-From: Jake Petroules <jake.petroules@qt.io>\n-Date: Sun, 1 Oct 2017 21:48:17 -0700\n-Subject: [PATCH] Fix build error with macOS 10.13 SDK\n-MIME-Version: 1.0\n-Content-Type: text/plain; charset=utf8\n-Content-Transfer-Encoding: 8bit\n-\n-Several of these variables/macros are no longer defined. We didn't\n-validate the preconditions on iOS, tvOS, or watchOS, so no\n-need to bother validating them on macOS either. Nor did we check the\n-OSStatus result on any platform anyways.\n-\n-Task-number: QTBUG-63401\n-Change-Id: Ife64dff767cf6d3f4b839fc53ec486181c176bf3\n-(cherry-picked from 861544583511d4e6f7745d2339b26ff1cd44132b)\n-Reviewed-by: Timur Pocheptsov <timur.pocheptsov@qt.io>\n-Reviewed-by: Tor Arne Vestb\u00c3\u00b8 <tor.arne.vestbo@qt.io>\n----\n- src/plugins/platforms/cocoa/qcocoahelpers.h  |  2 +-\n- src/plugins/platforms/cocoa/qcocoahelpers.mm | 13 +------------\n- 2 files changed, 2 insertions(+), 13 deletions(-)\n-\n-diff --git old/qtbase/src/plugins/platforms/cocoa/qcocoahelpers.h new/qtbase/src/plugins/platforms/cocoa/qcocoahelpers.h\n-index bbb3793..74371d5 100644\n---- old/qtbase/src/plugins/platforms/cocoa/qcocoahelpers.h\n-+++ new/qtbase/src/plugins/platforms/cocoa/qcocoahelpers.h\n-@@ -80,7 +80,7 @@ QColor qt_mac_toQColor(CGColorRef color);\n- // Creates a mutable shape, it's the caller's responsibility to release.\n- HIMutableShapeRef qt_mac_QRegionToHIMutableShape(const QRegion &region);\n- \n--OSStatus qt_mac_drawCGImage(CGContextRef inContext, const CGRect *inBounds, CGImageRef inImage);\n-+void qt_mac_drawCGImage(CGContextRef inContext, const CGRect *inBounds, CGImageRef inImage);\n- \n- NSDragOperation qt_mac_mapDropAction(Qt::DropAction action);\n- NSDragOperation qt_mac_mapDropActions(Qt::DropActions actions);\n-diff --git old/qtbase/src/plugins/platforms/cocoa/qcocoahelpers.mm new/qtbase/src/plugins/platforms/cocoa/qcocoahelpers.mm\n-index cd73148..3f8429e 100644\n---- old/qtbase/src/plugins/platforms/cocoa/qcocoahelpers.mm\n-+++ new/qtbase/src/plugins/platforms/cocoa/qcocoahelpers.mm\n-@@ -544,15 +544,8 @@ NSRect qt_mac_flipRect(const QRect &rect)\n-     return NSMakeRect(rect.x(), flippedY, rect.width(), rect.height());\n- }\n- \n--OSStatus qt_mac_drawCGImage(CGContextRef inContext, const CGRect *inBounds, CGImageRef inImage)\n-+void qt_mac_drawCGImage(CGContextRef inContext, const CGRect *inBounds, CGImageRef inImage)\n- {\n--    // Verbatim copy if HIViewDrawCGImage (as shown on Carbon-Dev)\n--    OSStatus err = noErr;\n--\n--    require_action(inContext != NULL, InvalidContext, err = paramErr);\n--    require_action(inBounds != NULL, InvalidBounds, err = paramErr);\n--    require_action(inImage != NULL, InvalidImage, err = paramErr);\n--\n-     CGContextSaveGState( inContext );\n-     CGContextTranslateCTM (inContext, 0, inBounds->origin.y + CGRectGetMaxY(*inBounds));\n-     CGContextScaleCTM(inContext, 1, -1);\n-@@ -560,10 +553,6 @@ OSStatus qt_mac_drawCGImage(CGContextRef inContext, const CGRect *inBounds, CGIm\n-     CGContextDrawImage(inContext, *inBounds, inImage);\n- \n-     CGContextRestoreGState(inContext);\n--InvalidImage:\n--InvalidBounds:\n--InvalidContext:\n--        return err;\n- }\n- \n- Qt::MouseButton cocoaButton2QtButton(NSInteger buttonNum)\n--- \n-2.7.4"
      },
      {
        "sha": "ec2bc17d9bd9e032acfec9e34ea6afbbbb7e79f2",
        "filename": "depends/patches/qt/fix-xcb-include-order.patch",
        "status": "removed",
        "additions": 0,
        "deletions": 49,
        "changes": 49,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e76acf3384aca13cd2dd850568317c0ce44458ed/depends/patches/qt/fix-xcb-include-order.patch",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e76acf3384aca13cd2dd850568317c0ce44458ed/depends/patches/qt/fix-xcb-include-order.patch",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/patches/qt/fix-xcb-include-order.patch?ref=e76acf3384aca13cd2dd850568317c0ce44458ed",
        "patch": "@@ -1,49 +0,0 @@\n---- old/qtbase/src/plugins/platforms/xcb/xcb_qpa_lib.pro 2015-03-17\n-+++ new/qtbase/src/plugins/platforms/xcb/xcb_qpa_lib.pro 2015-03-17\n-@@ -76,8 +76,6 @@\n- \n- DEFINES += $$QMAKE_DEFINES_XCB\n- LIBS += $$QMAKE_LIBS_XCB\n--QMAKE_CXXFLAGS += $$QMAKE_CFLAGS_XCB\n--QMAKE_CFLAGS += $$QMAKE_CFLAGS_XCB\n- \n- CONFIG += qpa/genericunixfontdatabase\n- \n-@@ -89,7 +87,8 @@\n- contains(QT_CONFIG, xcb-qt) {\n-     DEFINES += XCB_USE_RENDER\n-     XCB_DIR = ../../../3rdparty/xcb\n--    INCLUDEPATH += $$XCB_DIR/include $$XCB_DIR/sysinclude\n-+    QMAKE_CFLAGS += -I$$XCB_DIR/include -I$$XCB_DIR/sysinclude $$QMAKE_CFLAGS_XCB\n-+    QMAKE_CXXFLAGS += -I$$XCB_DIR/include -I$$XCB_DIR/sysinclude $$QMAKE_CFLAGS_XCB\n-     LIBS += -lxcb -L$$MODULE_BASE_OUTDIR/lib -lxcb-static$$qtPlatformTargetSuffix()\n- } else {\n-     LIBS += -lxcb -lxcb-image -lxcb-icccm -lxcb-sync -lxcb-xfixes -lxcb-shm -lxcb-randr -lxcb-shape -lxcb-keysyms -lxcb-xinerama\n---- old/qtbase/src/plugins/platforms/xcb/xcb-static/xcb-static.pro\n-+++ new/qtbase/src/plugins/platforms/xcb/xcb-static/xcb-static.pro\n-@@ -9,7 +9,8 @@\n- \n- XCB_DIR = ../../../../3rdparty/xcb\n- \n--INCLUDEPATH += $$XCB_DIR/include $$XCB_DIR/include/xcb $$XCB_DIR/sysinclude\n-+QMAKE_CFLAGS += -I$$XCB_DIR/include -I$$XCB_DIR/include/xcb -I$$XCB_DIR/sysinclude\n-+QMAKE_CXXFLAGS += -I$$XCB_DIR/include -I$$XCB_DIR/include/xcb -I$$XCB_DIR/sysinclude\n- \n- QMAKE_CXXFLAGS += $$QMAKE_CFLAGS_XCB\n- QMAKE_CFLAGS += $$QMAKE_CFLAGS_XCB\n---- old/qtbase/src/plugins/platforms/xcb/xcb-plugin.pro\n-+++ new/qtbase/src/plugins/platforms/xcb/xcb-plugin.pro\n-@@ -6,6 +6,13 @@\n-     qxcbmain.cpp\n- OTHER_FILES += xcb.json README\n- \n-+contains(QT_CONFIG, xcb-qt) {\n-+    DEFINES += XCB_USE_RENDER\n-+    XCB_DIR = ../../../3rdparty/xcb\n-+    QMAKE_CFLAGS += -I$$XCB_DIR/include -I$$XCB_DIR/sysinclude $$QMAKE_CFLAGS_XCB\n-+    QMAKE_CXXFLAGS += -I$$XCB_DIR/include -I$$XCB_DIR/sysinclude $$QMAKE_CFLAGS_XCB\n-+}\n-+\n- PLUGIN_TYPE = platforms\n- PLUGIN_CLASS_NAME = QXcbIntegrationPlugin\n- !equals(TARGET, $$QT_DEFAULT_QPA_PLUGIN): PLUGIN_EXTENDS = -"
      },
      {
        "sha": "337d0eb9caf6eaf1bfad8aa24853063c96f6b85b",
        "filename": "depends/patches/qt/mac-qmake.conf",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8009958363630f4c8347d691748337689fb212f9/depends/patches/qt/mac-qmake.conf",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8009958363630f4c8347d691748337689fb212f9/depends/patches/qt/mac-qmake.conf",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/patches/qt/mac-qmake.conf?ref=8009958363630f4c8347d691748337689fb212f9",
        "patch": "@@ -14,6 +14,7 @@ QMAKE_MAC_SDK.macosx.Path = $${MAC_SDK_PATH}\n QMAKE_MAC_SDK.macosx.platform_name = macosx\n QMAKE_MAC_SDK.macosx.SDKVersion = $${MAC_SDK_VERSION}\n QMAKE_MAC_SDK.macosx.PlatformPath = /phony\n+QMAKE_APPLE_DEVICE_ARCHS=x86_64\n !host_build: QMAKE_CFLAGS += -target $${MAC_TARGET}\n !host_build: QMAKE_OBJECTIVE_CFLAGS += $$QMAKE_CFLAGS\n !host_build: QMAKE_CXXFLAGS += $$QMAKE_CFLAGS"
      },
      {
        "sha": "fb21923c8c36b60c337c20a9e8002fc593f5716d",
        "filename": "depends/patches/qt/mingw-uuidof.patch",
        "status": "removed",
        "additions": 0,
        "deletions": 44,
        "changes": 44,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e76acf3384aca13cd2dd850568317c0ce44458ed/depends/patches/qt/mingw-uuidof.patch",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e76acf3384aca13cd2dd850568317c0ce44458ed/depends/patches/qt/mingw-uuidof.patch",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/patches/qt/mingw-uuidof.patch?ref=e76acf3384aca13cd2dd850568317c0ce44458ed",
        "patch": "@@ -1,44 +0,0 @@\n---- old/qtbase/src/plugins/platforms/windows/qwindowscontext.cpp\n-+++ new/qtbase/src/plugins/platforms/windows/qwindowscontext.cpp\n-@@ -77,7 +77,7 @@\n- #include <stdlib.h>\n- #include <stdio.h>\n- #include <windowsx.h>\n--#ifndef Q_OS_WINCE\n-+#if !defined(Q_OS_WINCE) && (!defined(USE___UUIDOF) || (defined(USE___UUIDOF) && USE___UUIDOF == 1))\n- #  include <comdef.h>\n- #endif\n- \n-@@ -814,7 +814,7 @@\n-                           HWND_MESSAGE, NULL, static_cast<HINSTANCE>(GetModuleHandle(0)), NULL);\n- }\n- \n--#ifndef Q_OS_WINCE\n-+#if !defined(Q_OS_WINCE) && (!defined(USE___UUIDOF) || (defined(USE___UUIDOF) && USE___UUIDOF == 1))\n- // Re-engineered from the inline function _com_error::ErrorMessage().\n- // We cannot use it directly since it uses swprintf_s(), which is not\n- // present in the MSVCRT.DLL found on Windows XP (QTBUG-35617).\n-@@ -833,7 +833,7 @@\n-          return QString::asprintf(\"IDispatch error #%u\", uint(wCode));\n-      return QString::asprintf(\"Unknown error 0x0%x\", uint(comError.Error()));\n- }\n--#endif // !Q_OS_WINCE\n-+#endif // !defined(Q_OS_WINCE) && (!defined(USE___UUIDOF) || (defined(USE___UUIDOF) && USE___UUIDOF == 1))\n- \n- /*!\n-     \\brief Common COM error strings.\n-@@ -901,12 +901,12 @@\n-     default:\n-         break;\n-     }\n--#ifndef Q_OS_WINCE\n-+#if !defined(Q_OS_WINCE) && (!defined(USE___UUIDOF) || (defined(USE___UUIDOF) && USE___UUIDOF == 1))\n-     _com_error error(hr);\n-     result += QByteArrayLiteral(\" (\");\n-     result += errorMessageFromComError(error);\n-     result += ')';\n--#endif // !Q_OS_WINCE\n-+#endif // !defined(Q_OS_WINCE) && (!defined(USE___UUIDOF) || (defined(USE___UUIDOF) && USE___UUIDOF == 1))\n-     return result;\n- }\n- "
      },
      {
        "sha": "c792824179056473fe97fa8f876f36ca950a6c80",
        "filename": "depends/patches/qt/pidlist_absolute.patch",
        "status": "removed",
        "additions": 0,
        "deletions": 37,
        "changes": 37,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e76acf3384aca13cd2dd850568317c0ce44458ed/depends/patches/qt/pidlist_absolute.patch",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e76acf3384aca13cd2dd850568317c0ce44458ed/depends/patches/qt/pidlist_absolute.patch",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/patches/qt/pidlist_absolute.patch?ref=e76acf3384aca13cd2dd850568317c0ce44458ed",
        "patch": "@@ -1,37 +0,0 @@\n-diff -dur old/qtbase/src/plugins/platforms/windows/qwindowscontext.h new/qtbase/src/plugins/platforms/windows/qwindowscontext.h\n---- old/qtbase/src/plugins/platforms/windows/qwindowscontext.h\n-+++ new/qtbase/src/plugins/platforms/windows/qwindowscontext.h\n-@@ -136,10 +136,18 @@\n-     inline void init();\n- \n-     typedef HRESULT (WINAPI *SHCreateItemFromParsingName)(PCWSTR, IBindCtx *, const GUID&, void **);\n-+#if defined(Q_CC_MINGW) && (!defined(__MINGW64_VERSION_MAJOR) || __MINGW64_VERSION_MAJOR < 3)\n-+    typedef HRESULT (WINAPI *SHGetKnownFolderIDList)(const GUID &, DWORD, HANDLE, ITEMIDLIST **);\n-+#else\n-     typedef HRESULT (WINAPI *SHGetKnownFolderIDList)(const GUID &, DWORD, HANDLE, PIDLIST_ABSOLUTE *);\n-+#endif\n-     typedef HRESULT (WINAPI *SHGetStockIconInfo)(int , int , _SHSTOCKICONINFO *);\n-     typedef HRESULT (WINAPI *SHGetImageList)(int, REFIID , void **);\n-+#if defined(Q_CC_MINGW) && (!defined(__MINGW64_VERSION_MAJOR) || __MINGW64_VERSION_MAJOR < 3)\n-+    typedef HRESULT (WINAPI *SHCreateItemFromIDList)(const ITEMIDLIST *, REFIID, void **);\n-+#else\n-     typedef HRESULT (WINAPI *SHCreateItemFromIDList)(PCIDLIST_ABSOLUTE, REFIID, void **);\n-+#endif\n- \n-     SHCreateItemFromParsingName sHCreateItemFromParsingName;\n-     SHGetKnownFolderIDList sHGetKnownFolderIDList;\n-diff -dur old/qtbase/src/plugins/platforms/windows/qwindowsdialoghelpers.cpp new/qtbase/src/plugins/platforms/windows/qwindowsdialoghelpers.cpp\n---- old/qtbase/src/plugins/platforms/windows/qwindowsdialoghelpers.cpp\n-+++ new/qtbase/src/plugins/platforms/windows/qwindowsdialoghelpers.cpp\n-@@ -1016,7 +1016,11 @@\n-             qWarning() << __FUNCTION__ << \": Invalid CLSID: \" << url.path();\n-             return Q_NULLPTR;\n-         }\n-+#if defined(Q_CC_MINGW) && (!defined(__MINGW64_VERSION_MAJOR) || __MINGW64_VERSION_MAJOR < 3)\n-+        ITEMIDLIST *idList;\n-+#else\n-         PIDLIST_ABSOLUTE idList;\n-+#endif\n-         HRESULT hr = QWindowsContext::shell32dll.sHGetKnownFolderIDList(uuid, 0, 0, &idList);\n-         if (FAILED(hr)) {\n-             qErrnoWarning(\"%s: SHGetKnownFolderIDList(%s)) failed\", __FUNCTION__, qPrintable(url.toString()));"
      }
    ]
  },
  {
    "sha": "a45cbc63f42b1b7d4d1d75119718f3b234f81ee7",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzphNDVjYmM2M2Y0MmIxYjdkNGQxZDc1MTE5NzE4ZjNiMjM0ZjgxZWU3",
    "commit": {
      "author": {
        "name": "Ken Lee",
        "email": "ken2812221@gmail.com",
        "date": "2018-05-19T14:24:37Z"
      },
      "committer": {
        "name": "Sebastian Kung",
        "email": "seb.kung@gmail.com",
        "date": "2018-05-19T14:31:32Z"
      },
      "message": "Fix depends Qt5.9.4 mac build\n\nApply patch from QTBUG-67286",
      "tree": {
        "sha": "ee30eaa99c387831540b3f0edeae10ff65cf3d74",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ee30eaa99c387831540b3f0edeae10ff65cf3d74"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a45cbc63f42b1b7d4d1d75119718f3b234f81ee7",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE8s/Eq9C5nYN+67fQm3m0VpHbQXMFAlsANUkACgkQm3m0VpHb\nQXOZuxAAoKF26WH/KuGQx4UUw83PGiGtlMCeXgwGpZUhAPRx5N85zqRAOEm4XMc3\nsHgRmRFPjKi72fNeksB0KUxfDYg1eL85OS5+M8keJyKDu6oQTLUmPUmkhfzihmLV\nTqfSmKDi3+tC2fefdOv+dmUtsz6VJnzAEx1SxyeQwzKjfXPXU0AnA3r88ENgeNO4\nHpw3CoFtr99GUov+zZKMKjVPRP2UH02NRtB7GxAVWd9ul5wNGtsBWdCtJoQrOB2F\nmEy5+uAccHAAfIRRNs7J3QSp8Ra0Z8hsMLQaNYk0AnjY4kQl3TF2W4RTxz8gdGGY\nK3A4tag2JeuykYs/UpHR2+MNMXv7cwrnUdtgYIihaZTSdBzIlIpqZVxlcO1xFAQ2\newYFLx3epfIbAcvgHIA3EXUecRSZEO1CmEMEqBtn+O9VTB9U88WA9PokmTw0K4z4\npe0FFOT4Q2wqNPY+AtpyRA60Ivx3lvWeUaNffRGJspdPmNgDf8srqoXBCJBwKoaY\nAWyRfBESnGm75CKUdj1Zjm9ne2GKHzMSYE44CsmxriU0iyZ1jc/3Odm4Ze0TP7qG\nzW0GcNpyLGDeq+cJ922DcmhXL1HEuvZcCLzJlMXqiBeL8h3ondLcrkio75+BK/j7\nMS3Hm/qBMukNsChqx/ZC78YqxyFNNyufscMbjnNnSUHmR1fS7+k=\n=sHyi\n-----END PGP SIGNATURE-----",
        "payload": "tree ee30eaa99c387831540b3f0edeae10ff65cf3d74\nparent 8009958363630f4c8347d691748337689fb212f9\nauthor Ken Lee <ken2812221@gmail.com> 1526739877 +0200\ncommitter Sebastian Kung <seb.kung@gmail.com> 1526740292 +0200\n\nFix depends Qt5.9.4 mac build\n\nApply patch from QTBUG-67286\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a45cbc63f42b1b7d4d1d75119718f3b234f81ee7",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/a45cbc63f42b1b7d4d1d75119718f3b234f81ee7",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a45cbc63f42b1b7d4d1d75119718f3b234f81ee7/comments",
    "author": {
      "login": "ken2812221",
      "id": 11154118,
      "node_id": "MDQ6VXNlcjExMTU0MTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11154118?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ken2812221",
      "html_url": "https://github.com/ken2812221",
      "followers_url": "https://api.github.com/users/ken2812221/followers",
      "following_url": "https://api.github.com/users/ken2812221/following{/other_user}",
      "gists_url": "https://api.github.com/users/ken2812221/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ken2812221/subscriptions",
      "organizations_url": "https://api.github.com/users/ken2812221/orgs",
      "repos_url": "https://api.github.com/users/ken2812221/repos",
      "events_url": "https://api.github.com/users/ken2812221/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ken2812221/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "TheCharlatan",
      "id": 8421793,
      "node_id": "MDQ6VXNlcjg0MjE3OTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheCharlatan",
      "html_url": "https://github.com/TheCharlatan",
      "followers_url": "https://api.github.com/users/TheCharlatan/followers",
      "following_url": "https://api.github.com/users/TheCharlatan/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
      "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
      "repos_url": "https://api.github.com/users/TheCharlatan/repos",
      "events_url": "https://api.github.com/users/TheCharlatan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "8009958363630f4c8347d691748337689fb212f9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8009958363630f4c8347d691748337689fb212f9",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/8009958363630f4c8347d691748337689fb212f9"
      }
    ],
    "stats": {
      "total": 71,
      "additions": 71,
      "deletions": 0
    },
    "files": [
      {
        "sha": "ea7d6f37efe022270eb4ae25c7f9fe174e7dd506",
        "filename": "depends/packages/qt.mk",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a45cbc63f42b1b7d4d1d75119718f3b234f81ee7/depends/packages/qt.mk",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a45cbc63f42b1b7d4d1d75119718f3b234f81ee7/depends/packages/qt.mk",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/packages/qt.mk?ref=a45cbc63f42b1b7d4d1d75119718f3b234f81ee7",
        "patch": "@@ -87,6 +87,7 @@ $(package)_config_opts_linux += -fontconfig\n $(package)_config_opts_linux += -no-opengl\n $(package)_config_opts_arm_linux  = -platform linux-g++ -xplatform $(host)\n $(package)_config_opts_i686_linux  = -xplatform linux-g++-32\n+$(package)_config_opts_x86_64_linux = -xplatform linux-g++-64\n $(package)_config_opts_mingw32  = -no-opengl -xplatform win32-g++ -device-option CROSS_COMPILE=\"$(host)-\"\n $(package)_build_env  = QT_RCC_TEST=1\n endef\n@@ -124,6 +125,7 @@ define $(package)_preprocess_cmds\n   cp -f qtbase/mkspecs/macx-clang/qplatformdefs.h qtbase/mkspecs/macx-clang-linux/ &&\\\n   cp -f $($(package)_patch_dir)/mac-qmake.conf qtbase/mkspecs/macx-clang-linux/qmake.conf && \\\n   patch -p1 -i $($(package)_patch_dir)/fix_qt_pkgconfig.patch &&\\\n+  patch -p1 -i $($(package)_patch_dir)/fix_configure_mac.patch &&\\\n   patch -p1 -i $($(package)_patch_dir)/fix_no_printer.patch &&\\\n   patch -p1 -i $($(package)_patch_dir)/qfixed-coretext.patch &&\\\n   echo \"!host_build: QMAKE_CFLAGS     += $($(package)_cflags) $($(package)_cppflags)\" >> qtbase/mkspecs/common/gcc-base.conf && \\"
      },
      {
        "sha": "0d7dd647debca93eb5383ee72f6d4db573dabaac",
        "filename": "depends/patches/qt/fix_configure_mac.patch",
        "status": "added",
        "additions": 50,
        "deletions": 0,
        "changes": 50,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a45cbc63f42b1b7d4d1d75119718f3b234f81ee7/depends/patches/qt/fix_configure_mac.patch",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a45cbc63f42b1b7d4d1d75119718f3b234f81ee7/depends/patches/qt/fix_configure_mac.patch",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/patches/qt/fix_configure_mac.patch?ref=a45cbc63f42b1b7d4d1d75119718f3b234f81ee7",
        "patch": "@@ -0,0 +1,50 @@\n+--- old/qtbase/mkspecs/features/mac/sdk.prf\t2018-02-08 10:24:48.000000000 -0800\n++++ new/qtbase/mkspecs/features/mac/sdk.prf\t2018-03-23 10:38:56.000000000 -0700\n+@@ -8,21 +8,21 @@\n+ defineReplace(xcodeSDKInfo) {\n+     info = $$1\n+     equals(info, \"Path\"): \\\n+-        info = --show-sdk-path\n++        infoarg = --show-sdk-path\n+     equals(info, \"PlatformPath\"): \\\n+-        info = --show-sdk-platform-path\n++        infoarg = --show-sdk-platform-path\n+     equals(info, \"SDKVersion\"): \\\n+-        info = --show-sdk-version\n++        infoarg = --show-sdk-version\n+     sdk = $$2\n+     isEmpty(sdk): \\\n+         sdk = $$QMAKE_MAC_SDK\n+ \n+     isEmpty(QMAKE_MAC_SDK.$${sdk}.$${info}) {\n+-        QMAKE_MAC_SDK.$${sdk}.$${info} = $$system(\"/usr/bin/xcrun --sdk $$sdk $$info 2>/dev/null\")\n++        QMAKE_MAC_SDK.$${sdk}.$${info} = $$system(\"/usr/bin/xcrun --sdk $$sdk $$infoarg 2>/dev/null\")\n+         # --show-sdk-platform-path won't work for Command Line Tools; this is fine\n+         # only used by the XCTest backend to testlib\n+-        isEmpty(QMAKE_MAC_SDK.$${sdk}.$${info}):if(!isEmpty(QMAKE_XCODEBUILD_PATH)|!equals(info, \"--show-sdk-platform-path\")): \\\n+-            error(\"Could not resolve SDK $$info for \\'$$sdk\\'\")\n++        isEmpty(QMAKE_MAC_SDK.$${sdk}.$${info}):if(!isEmpty(QMAKE_XCODEBUILD_PATH)|!equals(infoarg, \"--show-sdk-platform-path\")): \\\n++            error(\"Could not resolve SDK $$info for \\'$$sdk\\' using $$infoarg\")\n+         cache(QMAKE_MAC_SDK.$${sdk}.$${info}, set stash, QMAKE_MAC_SDK.$${sdk}.$${info})\n+     }\n+\n+--- old/qtbase/configure\t2018-02-08 10:24:48.000000000 -0800\n++++ new/qtbase/configure\t2018-03-23 05:42:29.000000000 -0700\n+@@ -232,8 +232,13 @@\n+ \n+     sdk=$(getSingleQMakeVariable \"QMAKE_MAC_SDK\" \"$1\")\n+     if [ -z \"$sdk\" ]; then echo \"QMAKE_MAC_SDK must be set when building on Mac\" >&2; exit 1; fi\n+-    sysroot=$(/usr/bin/xcrun --sdk $sdk --show-sdk-path 2>/dev/null)\n+-    if [ -z \"$sysroot\" ]; then echo \"Failed to resolve SDK path for '$sdk'\" >&2; exit 1; fi\n++    sysroot=$(getSingleQMakeVariable \"QMAKE_MAC_SDK_PATH\" \"$1\")\n++\n++    echo \"sysroot pre-configured as $sysroot\";\n++    if [ -z \"$sysroot\" ]; then\n++       sysroot=$(/usr/bin/xcrun --sdk $sdk --show-sdk-path 2>/dev/null)\n++       if [ -z \"$sysroot\" ]; then echo \"Failed to resolve SDK path for '$sdk'\" >&2; exit 1; fi\n++    fi\n+ \n+     case \"$sdk\" in\n+         macosx*)\n+\n+"
      },
      {
        "sha": "f868ca25775547188620644ae02881edeaa06a8d",
        "filename": "depends/patches/qt/fix_no_printer.patch",
        "status": "added",
        "additions": 19,
        "deletions": 0,
        "changes": 19,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a45cbc63f42b1b7d4d1d75119718f3b234f81ee7/depends/patches/qt/fix_no_printer.patch",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a45cbc63f42b1b7d4d1d75119718f3b234f81ee7/depends/patches/qt/fix_no_printer.patch",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/patches/qt/fix_no_printer.patch?ref=a45cbc63f42b1b7d4d1d75119718f3b234f81ee7",
        "patch": "@@ -0,0 +1,19 @@\n+--- x/qtbase/src/plugins/platforms/cocoa/qprintengine_mac_p.h\n++++ y/qtbase/src/plugins/platforms/cocoa/qprintengine_mac_p.h\n+@@ -52,6 +52,7 @@\n+ //\n+\n+ #include <QtCore/qglobal.h>\n++#include <qpa/qplatformprintdevice.h>\n+\n+ #ifndef QT_NO_PRINTER\n+\n+--- x/qtbase/src/plugins/plugins.pro\n++++ y/qtbase/src/plugins/plugins.pro\n+@@ -8,6 +8,3 @@ qtHaveModule(gui) {\n+     qtConfig(imageformatplugin): SUBDIRS *= imageformats\n+     !android:qtConfig(library): SUBDIRS *= generic\n+ }\n+-\n+-!winrt:qtHaveModule(printsupport): \\\n+-    SUBDIRS += printsupport"
      }
    ]
  },
  {
    "sha": "82923b3b7177d2c572312b00693f8bcd66183f12",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo4MjkyM2IzYjcxNzdkMmM1NzIzMTJiMDA2OTNmOGJjZDY2MTgzZjEy",
    "commit": {
      "author": {
        "name": "Chun Kuan Lee",
        "email": "ken2812221@gmail.com",
        "date": "2018-05-23T04:55:35Z"
      },
      "committer": {
        "name": "Chun Kuan Lee",
        "email": "ken2812221@gmail.com",
        "date": "2018-05-23T04:55:35Z"
      },
      "message": "test",
      "tree": {
        "sha": "d0f766e879af748a61e42bd63a631404d459f8c7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d0f766e879af748a61e42bd63a631404d459f8c7"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/82923b3b7177d2c572312b00693f8bcd66183f12",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/82923b3b7177d2c572312b00693f8bcd66183f12",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/82923b3b7177d2c572312b00693f8bcd66183f12",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/82923b3b7177d2c572312b00693f8bcd66183f12/comments",
    "author": {
      "login": "ken2812221",
      "id": 11154118,
      "node_id": "MDQ6VXNlcjExMTU0MTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11154118?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ken2812221",
      "html_url": "https://github.com/ken2812221",
      "followers_url": "https://api.github.com/users/ken2812221/followers",
      "following_url": "https://api.github.com/users/ken2812221/following{/other_user}",
      "gists_url": "https://api.github.com/users/ken2812221/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ken2812221/subscriptions",
      "organizations_url": "https://api.github.com/users/ken2812221/orgs",
      "repos_url": "https://api.github.com/users/ken2812221/repos",
      "events_url": "https://api.github.com/users/ken2812221/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ken2812221/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "ken2812221",
      "id": 11154118,
      "node_id": "MDQ6VXNlcjExMTU0MTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11154118?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ken2812221",
      "html_url": "https://github.com/ken2812221",
      "followers_url": "https://api.github.com/users/ken2812221/followers",
      "following_url": "https://api.github.com/users/ken2812221/following{/other_user}",
      "gists_url": "https://api.github.com/users/ken2812221/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ken2812221/subscriptions",
      "organizations_url": "https://api.github.com/users/ken2812221/orgs",
      "repos_url": "https://api.github.com/users/ken2812221/repos",
      "events_url": "https://api.github.com/users/ken2812221/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ken2812221/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "a45cbc63f42b1b7d4d1d75119718f3b234f81ee7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a45cbc63f42b1b7d4d1d75119718f3b234f81ee7",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/a45cbc63f42b1b7d4d1d75119718f3b234f81ee7"
      }
    ],
    "stats": {
      "total": 1,
      "additions": 1,
      "deletions": 0
    },
    "files": [
      {
        "sha": "9c43bd18183144df1819674090df878e6bed0bb7",
        "filename": "depends/packages/qt.mk",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/82923b3b7177d2c572312b00693f8bcd66183f12/depends/packages/qt.mk",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/82923b3b7177d2c572312b00693f8bcd66183f12/depends/packages/qt.mk",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/packages/qt.mk?ref=82923b3b7177d2c572312b00693f8bcd66183f12",
        "patch": "@@ -69,6 +69,7 @@ $(package)_config_opts += -silent\n $(package)_config_opts += -v\n $(package)_config_opts += -no-feature-printer\n $(package)_config_opts += -no-feature-printdialog\n+$(package)_config_opts += -no-feature-accessibility\n \n ifneq ($(build_os),darwin)\n $(package)_config_opts_darwin = -xplatform macx-clang-linux"
      }
    ]
  }
]