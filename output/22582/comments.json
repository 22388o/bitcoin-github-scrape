[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/889172376",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22582#issuecomment-889172376",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22582",
    "id": 889172376,
    "node_id": "IC_kwDOABII5840_7GY",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-29T14:03:52Z",
    "updated_at": "2021-08-10T19:57:33Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/889172376/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/889567341",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22582#issuecomment-889567341",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22582",
    "id": 889567341,
    "node_id": "IC_kwDOABII5841Bbht",
    "user": {
      "login": "tryphe",
      "id": 8435003,
      "node_id": "MDQ6VXNlcjg0MzUwMDM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8435003?u=7c63a6209cf9ab35dd71f150c3fe68a4eaef89cf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tryphe",
      "html_url": "https://github.com/tryphe",
      "followers_url": "https://api.github.com/users/tryphe/followers",
      "following_url": "https://api.github.com/users/tryphe/following{/other_user}",
      "gists_url": "https://api.github.com/users/tryphe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tryphe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tryphe/subscriptions",
      "organizations_url": "https://api.github.com/users/tryphe/orgs",
      "repos_url": "https://api.github.com/users/tryphe/repos",
      "events_url": "https://api.github.com/users/tryphe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tryphe/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-30T01:43:42Z",
    "updated_at": "2021-07-30T01:43:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "Concept ACK",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/889567341/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/894976551",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22582#issuecomment-894976551",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22582",
    "id": 894976551,
    "node_id": "IC_kwDOABII5841WEIn",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?u=3e27bc6589085f3450be1b0e969d04008cc77565&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-09T06:18:51Z",
    "updated_at": "2021-08-09T06:19:04Z",
    "author_association": "CONTRIBUTOR",
    "body": "Will review again after rebase - note that the mempool tests have been moved to mempool_package_limits.py",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/894976551/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/896847328",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22582#issuecomment-896847328",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22582",
    "id": 896847328,
    "node_id": "IC_kwDOABII5841dM3g",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?u=3e27bc6589085f3450be1b0e969d04008cc77565&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-11T13:54:13Z",
    "updated_at": "2021-08-11T13:54:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "Another suggestion (probably for a different PR): This doesn't matter _that_ much, but we have quite a few of the same lines repeated in this test. Given how many OP_TRUE spends there are, I think it'd be good to either add a OP_TRUE variation of `make_chain` to wallet.py or, better yet, make all those functions methods of `MiniWallet`.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/896847328/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/899460878",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22582#issuecomment-899460878",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22582",
    "id": 899460878,
    "node_id": "IC_kwDOABII5841nK8O",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?u=3e27bc6589085f3450be1b0e969d04008cc77565&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-16T12:11:55Z",
    "updated_at": "2021-08-16T12:11:55Z",
    "author_association": "CONTRIBUTOR",
    "body": "PR description needs to be updated",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/899460878/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/899515089",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22582#issuecomment-899515089",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22582",
    "id": 899515089,
    "node_id": "IC_kwDOABII5841nYLR",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-16T13:33:16Z",
    "updated_at": "2021-08-16T13:33:16Z",
    "author_association": "MEMBER",
    "body": "I still don't understand what logic this is testing that isn't already covered by the `test_desc_count_limits()` subtest.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/899515089/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/899675145",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22582#issuecomment-899675145",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22582",
    "id": 899675145,
    "node_id": "IC_kwDOABII5841n_QJ",
    "user": {
      "login": "ritickgoenka",
      "id": 32807799,
      "node_id": "MDQ6VXNlcjMyODA3Nzk5",
      "avatar_url": "https://avatars.githubusercontent.com/u/32807799?u=e41a4826d0a3e765507bd520584a2ec4b5e3cb17&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ritickgoenka",
      "html_url": "https://github.com/ritickgoenka",
      "followers_url": "https://api.github.com/users/ritickgoenka/followers",
      "following_url": "https://api.github.com/users/ritickgoenka/following{/other_user}",
      "gists_url": "https://api.github.com/users/ritickgoenka/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ritickgoenka/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ritickgoenka/subscriptions",
      "organizations_url": "https://api.github.com/users/ritickgoenka/orgs",
      "repos_url": "https://api.github.com/users/ritickgoenka/repos",
      "events_url": "https://api.github.com/users/ritickgoenka/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ritickgoenka/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-16T17:11:56Z",
    "updated_at": "2021-08-16T17:11:56Z",
    "author_association": "CONTRIBUTOR",
    "body": "> I still don't understand what logic this is testing that isn't already covered by the `test_desc_count_limits()` subtest.\r\n\r\nIt is testing if the second generation in Package transactions are considered while checking Descendant count limits. It is analogous to the 'test_anc_count_limits_2()' subtest for Ancestor count limits. ",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/899675145/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/900420385",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22582#issuecomment-900420385",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22582",
    "id": 900420385,
    "node_id": "IC_kwDOABII5841q1Mh",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-17T15:56:12Z",
    "updated_at": "2021-08-17T15:56:12Z",
    "author_association": "MEMBER",
    "body": "@glozow has pointed out that this scenario is for a transaction to fail its descendant limit count due to a combination of mempool descendants, package direct descendants, and package indirect descendants, which seems like a reasonable thing to test.\r\n\r\nI think the transaction P3 is unnecessary, since the package would fail with just P2. It's good for a test to fail at the edge case (i.e. the package would be accepted if you removed just one transaction).\r\n\r\nI'd also recommend you remove the image from the PR description and replace it with an ascii drawing. The PR description is included in the merge commit, so it's best if it's plain text without attachments.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/900420385/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679691371",
    "pull_request_review_id": 718771736,
    "id": 679691371,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3OTY5MTM3MQ==",
    "diff_hunk": "@@ -304,6 +305,109 @@ def test_descendant_limits(self):\n         assert all([res[\"allowed\"] for res in node.testmempoolaccept(rawtxs=package_hex)])\n         node.generate(1)\n \n+    def test_descendant_limits_bushy(self):\n+        \"\"\"Create A bushy Package with 24 transaction in mempool and 3 transaction in package\n+                              M1a\n+                             ^  ^\n+                            ^    M2a\n+            M1b            ^       .\n+              ^           ^         .\n+               ^         ^           ^\n+                ^       ^            M23a\n+                 ^     ^\n+                  ^   P1\n+                   ^ ^  ^\n+                    P2   P3\n+\n+        P1 has M1a as a mempool ancestor, P2 has only M1b as in-mempool ancestor whereas P3 has\n+        no in-mempool ancestors, but when combined both P2 and P3 have M1a as an ancestor and\n+        M1a exceeds descendant_limits (23 in-mempool descendants + 3 in-package descendants)\n+        \"\"\"",
    "path": "test/functional/rpc_packages.py",
    "position": null,
    "original_position": 29,
    "commit_id": "fa7db1cbf7e8400b625fccd5757f8e1b200796bd",
    "original_commit_id": "c18188e96204f9264e2ed64ab5e53f3abdd137e5",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "What does M1b do? I don't see how it's relevant to the test :thinking: ",
    "created_at": "2021-07-30T06:52:32Z",
    "updated_at": "2021-07-30T07:01:47Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22582#discussion_r679691371",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22582",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679691371"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22582#discussion_r679691371"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22582"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679691371/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": 308,
    "start_side": "RIGHT",
    "line": null,
    "original_line": 325,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679693319",
    "pull_request_review_id": 718771736,
    "id": 679693319,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3OTY5MzMxOQ==",
    "diff_hunk": "@@ -304,6 +305,109 @@ def test_descendant_limits(self):\n         assert all([res[\"allowed\"] for res in node.testmempoolaccept(rawtxs=package_hex)])\n         node.generate(1)\n \n+    def test_descendant_limits_bushy(self):",
    "path": "test/functional/rpc_packages.py",
    "position": null,
    "original_position": 12,
    "commit_id": "fa7db1cbf7e8400b625fccd5757f8e1b200796bd",
    "original_commit_id": "c18188e96204f9264e2ed64ab5e53f3abdd137e5",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I wouldn't call this bushy, it's kind of giraffe-shaped?\r\nmaybe `test_descendant_limits_2` or `test_descendant_limits_mempool_dominated`",
    "created_at": "2021-07-30T06:56:48Z",
    "updated_at": "2021-07-30T07:01:47Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22582#discussion_r679693319",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22582",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679693319"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22582#discussion_r679693319"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22582"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679693319/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 308,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679917094",
    "pull_request_review_id": 719066654,
    "id": 679917094,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3OTkxNzA5NA==",
    "diff_hunk": "@@ -304,6 +305,109 @@ def test_descendant_limits(self):\n         assert all([res[\"allowed\"] for res in node.testmempoolaccept(rawtxs=package_hex)])\n         node.generate(1)\n \n+    def test_descendant_limits_bushy(self):",
    "path": "test/functional/rpc_packages.py",
    "position": null,
    "original_position": 12,
    "commit_id": "fa7db1cbf7e8400b625fccd5757f8e1b200796bd",
    "original_commit_id": "c18188e96204f9264e2ed64ab5e53f3abdd137e5",
    "user": {
      "login": "ritickgoenka",
      "id": 32807799,
      "node_id": "MDQ6VXNlcjMyODA3Nzk5",
      "avatar_url": "https://avatars.githubusercontent.com/u/32807799?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ritickgoenka",
      "html_url": "https://github.com/ritickgoenka",
      "followers_url": "https://api.github.com/users/ritickgoenka/followers",
      "following_url": "https://api.github.com/users/ritickgoenka/following{/other_user}",
      "gists_url": "https://api.github.com/users/ritickgoenka/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ritickgoenka/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ritickgoenka/subscriptions",
      "organizations_url": "https://api.github.com/users/ritickgoenka/orgs",
      "repos_url": "https://api.github.com/users/ritickgoenka/repos",
      "events_url": "https://api.github.com/users/ritickgoenka/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ritickgoenka/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done",
    "created_at": "2021-07-30T13:17:00Z",
    "updated_at": "2021-07-30T13:17:00Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22582#discussion_r679917094",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22582",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679917094"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22582#discussion_r679917094"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22582"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679917094/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 308,
    "side": "RIGHT",
    "in_reply_to_id": 679693319
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679929485",
    "pull_request_review_id": 719083467,
    "id": 679929485,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3OTkyOTQ4NQ==",
    "diff_hunk": "@@ -304,6 +305,109 @@ def test_descendant_limits(self):\n         assert all([res[\"allowed\"] for res in node.testmempoolaccept(rawtxs=package_hex)])\n         node.generate(1)\n \n+    def test_descendant_limits_bushy(self):\n+        \"\"\"Create A bushy Package with 24 transaction in mempool and 3 transaction in package\n+                              M1a\n+                             ^  ^\n+                            ^    M2a\n+            M1b            ^       .\n+              ^           ^         .\n+               ^         ^           ^\n+                ^       ^            M23a\n+                 ^     ^\n+                  ^   P1\n+                   ^ ^  ^\n+                    P2   P3\n+\n+        P1 has M1a as a mempool ancestor, P2 has only M1b as in-mempool ancestor whereas P3 has\n+        no in-mempool ancestors, but when combined both P2 and P3 have M1a as an ancestor and\n+        M1a exceeds descendant_limits (23 in-mempool descendants + 3 in-package descendants)\n+        \"\"\"",
    "path": "test/functional/rpc_packages.py",
    "position": null,
    "original_position": 29,
    "commit_id": "fa7db1cbf7e8400b625fccd5757f8e1b200796bd",
    "original_commit_id": "c18188e96204f9264e2ed64ab5e53f3abdd137e5",
    "user": {
      "login": "ritickgoenka",
      "id": 32807799,
      "node_id": "MDQ6VXNlcjMyODA3Nzk5",
      "avatar_url": "https://avatars.githubusercontent.com/u/32807799?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ritickgoenka",
      "html_url": "https://github.com/ritickgoenka",
      "followers_url": "https://api.github.com/users/ritickgoenka/followers",
      "following_url": "https://api.github.com/users/ritickgoenka/following{/other_user}",
      "gists_url": "https://api.github.com/users/ritickgoenka/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ritickgoenka/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ritickgoenka/subscriptions",
      "organizations_url": "https://api.github.com/users/ritickgoenka/orgs",
      "repos_url": "https://api.github.com/users/ritickgoenka/repos",
      "events_url": "https://api.github.com/users/ritickgoenka/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ritickgoenka/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "To test a transaction having a direct connection to mempool doesn't affect it being counted as an indirect descendant of some transaction in the mempool. If this doesn't make much sense I can remove M1b.",
    "created_at": "2021-07-30T13:34:33Z",
    "updated_at": "2021-07-30T13:34:33Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22582#discussion_r679929485",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22582",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679929485"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22582#discussion_r679929485"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22582"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/679929485/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": 308,
    "start_side": "RIGHT",
    "line": null,
    "original_line": 325,
    "side": "RIGHT",
    "in_reply_to_id": 679691371
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686825121",
    "pull_request_review_id": 727476788,
    "id": 686825121,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4NjgyNTEyMQ==",
    "diff_hunk": "@@ -177,6 +178,107 @@ def test_desc_count_limits(self):\n         node.generate(1)\n         assert all([res[\"allowed\"] for res in node.testmempoolaccept(rawtxs=package_hex)])\n \n+    def test_desc_count_limits_2(self):\n+        \"\"\"Create A bushy Package with 24 transaction in mempool and 3 transaction in package\n+                              M1a\n+                             ^  ^\n+                            ^    M2a\n+            M1b            ^       .\n+              ^           ^         .\n+               ^         ^           ^\n+                ^       ^            M23a\n+                 ^     ^\n+                  ^   P1\n+                   ^ ^  ^\n+                    P2   P3\n+        P1 has M1a as a mempool ancestor, P2 has only M1b as in-mempool ancestor whereas P3 has\n+        no in-mempool ancestors, but when combined both P2 and P3 have M1a as an ancestor and\n+        M1a exceeds descendant_limits (23 in-mempool descendants + 3 in-package descendants)\n+        \"\"\"\n+\n+        node = self.nodes[0]\n+        package_hex = []\n+        parents_tx = []\n+        values = []\n+        scripts = []\n+        # M1a\n+        first_coin_a = self.coins.pop()\n+        parent_value = (first_coin_a[\"amount\"] - Decimal(\"0.0002\")) / 2 # Deduct reasonable fee and make 2 outputs",
    "path": "test/functional/mempool_package_limits.py",
    "position": null,
    "original_position": 37,
    "commit_id": "fa7db1cbf7e8400b625fccd5757f8e1b200796bd",
    "original_commit_id": "2bc8b5a2c5bd290591e4757e7964a23ed9e79ec9",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I actually think a fee of just `Decimal(\"0.0001\")` would be sufficient here. In fact, I think it'd be best to import `DEFAULT_FEE` from test_framework/wallet.py and use that throughout this test.",
    "created_at": "2021-08-11T13:21:46Z",
    "updated_at": "2021-08-11T13:52:43Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22582#discussion_r686825121",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22582",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686825121"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22582#discussion_r686825121"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22582"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686825121/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 206,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686835358",
    "pull_request_review_id": 727476788,
    "id": 686835358,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4NjgzNTM1OA==",
    "diff_hunk": "@@ -177,6 +178,107 @@ def test_desc_count_limits(self):\n         node.generate(1)\n         assert all([res[\"allowed\"] for res in node.testmempoolaccept(rawtxs=package_hex)])\n \n+    def test_desc_count_limits_2(self):\n+        \"\"\"Create A bushy Package with 24 transaction in mempool and 3 transaction in package\n+                              M1a\n+                             ^  ^\n+                            ^    M2a\n+            M1b            ^       .\n+              ^           ^         .\n+               ^         ^           ^\n+                ^       ^            M23a\n+                 ^     ^\n+                  ^   P1\n+                   ^ ^  ^\n+                    P2   P3",
    "path": "test/functional/mempool_package_limits.py",
    "position": null,
    "original_position": 24,
    "commit_id": "fa7db1cbf7e8400b625fccd5757f8e1b200796bd",
    "original_commit_id": "2bc8b5a2c5bd290591e4757e7964a23ed9e79ec9",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "nit: this test would be simplified if you made M2a .... M23a be a chain spending vout[0] of M1a. It'd save maybe 5-10 lines.\r\n",
    "created_at": "2021-08-11T13:33:11Z",
    "updated_at": "2021-08-11T13:52:43Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22582#discussion_r686835358",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22582",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686835358"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22582#discussion_r686835358"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22582"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686835358/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": 183,
    "start_side": "RIGHT",
    "line": null,
    "original_line": 193,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686851459",
    "pull_request_review_id": 727476788,
    "id": 686851459,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4Njg1MTQ1OQ==",
    "diff_hunk": "@@ -177,6 +178,107 @@ def test_desc_count_limits(self):\n         node.generate(1)\n         assert all([res[\"allowed\"] for res in node.testmempoolaccept(rawtxs=package_hex)])\n \n+    def test_desc_count_limits_2(self):\n+        \"\"\"Create A bushy Package with 24 transaction in mempool and 3 transaction in package",
    "path": "test/functional/mempool_package_limits.py",
    "position": null,
    "original_position": 13,
    "commit_id": "fa7db1cbf7e8400b625fccd5757f8e1b200796bd",
    "original_commit_id": "2bc8b5a2c5bd290591e4757e7964a23ed9e79ec9",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Again, not bushy",
    "created_at": "2021-08-11T13:50:53Z",
    "updated_at": "2021-08-11T13:52:43Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22582#discussion_r686851459",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22582",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686851459"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22582#discussion_r686851459"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22582"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686851459/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 182,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686854062",
    "pull_request_review_id": 727515348,
    "id": 686854062,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4Njg1NDA2Mg==",
    "diff_hunk": "@@ -304,6 +305,109 @@ def test_descendant_limits(self):\n         assert all([res[\"allowed\"] for res in node.testmempoolaccept(rawtxs=package_hex)])\n         node.generate(1)\n \n+    def test_descendant_limits_bushy(self):\n+        \"\"\"Create A bushy Package with 24 transaction in mempool and 3 transaction in package\n+                              M1a\n+                             ^  ^\n+                            ^    M2a\n+            M1b            ^       .\n+              ^           ^         .\n+               ^         ^           ^\n+                ^       ^            M23a\n+                 ^     ^\n+                  ^   P1\n+                   ^ ^  ^\n+                    P2   P3\n+\n+        P1 has M1a as a mempool ancestor, P2 has only M1b as in-mempool ancestor whereas P3 has\n+        no in-mempool ancestors, but when combined both P2 and P3 have M1a as an ancestor and\n+        M1a exceeds descendant_limits (23 in-mempool descendants + 3 in-package descendants)\n+        \"\"\"",
    "path": "test/functional/rpc_packages.py",
    "position": null,
    "original_position": 29,
    "commit_id": "fa7db1cbf7e8400b625fccd5757f8e1b200796bd",
    "original_commit_id": "c18188e96204f9264e2ed64ab5e53f3abdd137e5",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "^ This description or a short summary of it would be good in place of the \"bushy\" comment",
    "created_at": "2021-08-11T13:53:36Z",
    "updated_at": "2021-08-11T13:53:37Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22582#discussion_r686854062",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22582",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686854062"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22582#discussion_r686854062"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22582"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686854062/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": 308,
    "start_side": "RIGHT",
    "line": null,
    "original_line": 325,
    "side": "RIGHT",
    "in_reply_to_id": 679691371
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686883715",
    "pull_request_review_id": 727555894,
    "id": 686883715,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4Njg4MzcxNQ==",
    "diff_hunk": "@@ -304,6 +305,109 @@ def test_descendant_limits(self):\n         assert all([res[\"allowed\"] for res in node.testmempoolaccept(rawtxs=package_hex)])\n         node.generate(1)\n \n+    def test_descendant_limits_bushy(self):\n+        \"\"\"Create A bushy Package with 24 transaction in mempool and 3 transaction in package\n+                              M1a\n+                             ^  ^\n+                            ^    M2a\n+            M1b            ^       .\n+              ^           ^         .\n+               ^         ^           ^\n+                ^       ^            M23a\n+                 ^     ^\n+                  ^   P1\n+                   ^ ^  ^\n+                    P2   P3\n+\n+        P1 has M1a as a mempool ancestor, P2 has only M1b as in-mempool ancestor whereas P3 has\n+        no in-mempool ancestors, but when combined both P2 and P3 have M1a as an ancestor and\n+        M1a exceeds descendant_limits (23 in-mempool descendants + 3 in-package descendants)\n+        \"\"\"",
    "path": "test/functional/rpc_packages.py",
    "position": null,
    "original_position": 29,
    "commit_id": "fa7db1cbf7e8400b625fccd5757f8e1b200796bd",
    "original_commit_id": "c18188e96204f9264e2ed64ab5e53f3abdd137e5",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Right now the test doesn't utilize M1b at all - it should test that the package [P1, P2] passes but [P1, P2, P3] fails.",
    "created_at": "2021-08-11T14:25:08Z",
    "updated_at": "2021-08-11T14:25:08Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22582#discussion_r686883715",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22582",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686883715"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22582#discussion_r686883715"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22582"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686883715/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": 308,
    "start_side": "RIGHT",
    "line": null,
    "original_line": 325,
    "side": "RIGHT",
    "in_reply_to_id": 679691371
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686884160",
    "pull_request_review_id": 727556492,
    "id": 686884160,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4Njg4NDE2MA==",
    "diff_hunk": "@@ -304,6 +305,109 @@ def test_descendant_limits(self):\n         assert all([res[\"allowed\"] for res in node.testmempoolaccept(rawtxs=package_hex)])\n         node.generate(1)\n \n+    def test_descendant_limits_bushy(self):\n+        \"\"\"Create A bushy Package with 24 transaction in mempool and 3 transaction in package\n+                              M1a\n+                             ^  ^\n+                            ^    M2a\n+            M1b            ^       .\n+              ^           ^         .\n+               ^         ^           ^\n+                ^       ^            M23a\n+                 ^     ^\n+                  ^   P1\n+                   ^ ^  ^\n+                    P2   P3\n+\n+        P1 has M1a as a mempool ancestor, P2 has only M1b as in-mempool ancestor whereas P3 has\n+        no in-mempool ancestors, but when combined both P2 and P3 have M1a as an ancestor and\n+        M1a exceeds descendant_limits (23 in-mempool descendants + 3 in-package descendants)\n+        \"\"\"",
    "path": "test/functional/rpc_packages.py",
    "position": null,
    "original_position": 29,
    "commit_id": "fa7db1cbf7e8400b625fccd5757f8e1b200796bd",
    "original_commit_id": "c18188e96204f9264e2ed64ab5e53f3abdd137e5",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This test would fail regardless of whether M1b exists or not (since M1a has 23 descendants in the mempool and 3 descendants in the package). It doesn't seem to me to be testing an edgecase that isn't already covered by the other tests in rpc_packages.py.",
    "created_at": "2021-08-11T14:25:37Z",
    "updated_at": "2021-08-11T14:25:38Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22582#discussion_r686884160",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22582",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686884160"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22582#discussion_r686884160"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22582"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/686884160/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": 308,
    "start_side": "RIGHT",
    "line": null,
    "original_line": 325,
    "side": "RIGHT",
    "in_reply_to_id": 679691371
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/687545626",
    "pull_request_review_id": 728380093,
    "id": 687545626,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4NzU0NTYyNg==",
    "diff_hunk": "@@ -177,6 +179,102 @@ def test_desc_count_limits(self):\n         node.generate(1)\n         assert all([res[\"allowed\"] for res in node.testmempoolaccept(rawtxs=package_hex)])\n \n+    def test_desc_count_limits_2(self):\n+        \"\"\"Create a Package with 24 transaction in mempool and 3 transaction in package\n+                      M1a\n+                     ^  ^\n+                   M2a   ^\n+                   .      ^\n+                  .        ^        M1b\n+                 .          ^       ^\n+                M23a         ^     ^\n+                              ^   ^\n+                               ^ ^\n+                               P1\n+                              ^  ^\n+                             P2   P3\n+        P1 has M1a as a mempool ancestor, P2 has only M1b as in-mempool ancestor whereas P3 has\n+        no in-mempool ancestors, but when combined both P2 and P3 have M1a as an ancestor and\n+        M1a exceeds descendant_limits (23 in-mempool descendants + 3 in-package descendants)\n+        \"\"\"\n+\n+        node = self.nodes[0]\n+        package_hex = []\n+        parents_tx = []\n+        values = []\n+        scripts = []\n+        # M1a\n+        first_coin_a = self.coins.pop()\n+        parent_value = (first_coin_a[\"amount\"] - DEFAULT_FEE) / 2 # Deduct reasonable fee and make 2 outputs\n+        inputs = [{\"txid\": first_coin_a[\"txid\"], \"vout\": 0}]\n+        outputs = [{self.address : parent_value}, {ADDRESS_BCRT1_P2WSH_OP_TRUE : parent_value}]\n+        rawtx = node.createrawtransaction(inputs, outputs)\n+\n+        parent_signed = node.signrawtransactionwithkey(hexstring=rawtx, privkeys=self.privkeys)\n+        assert parent_signed[\"complete\"]\n+        parent_tx = tx_from_hex(parent_signed[\"hex\"])\n+        parent_txid = parent_tx.rehash()\n+        node.sendrawtransaction(parent_signed[\"hex\"])\n+\n+        # Chain M2a...M23a\n+        spk = parent_tx.vout[0].scriptPubKey.hex()\n+        value = parent_value\n+        txid = parent_txid\n+        for i in range(22): # M2a... M23a\n+            (tx, txhex, value, spk) = make_chain(node, self.address, self.privkeys, txid, value, 0, spk)\n+            txid = tx.rehash()\n+            node.sendrawtransaction(txhex)\n+\n+        # P1\n+        value_p1 = (parent_value - DEFAULT_FEE) / 2 # Deduct reasonable fee and make 2 outputs\n+        inputs_p1 = [{\"txid\": parent_txid, \"vout\": 1}]\n+        outputs_p1 = [{self.address : value_p1}, {ADDRESS_BCRT1_P2WSH_OP_TRUE : value_p1}]\n+        rawtx_p1 = node.createrawtransaction(inputs_p1, outputs_p1)\n+        tx_child_p1 = tx_from_hex(rawtx_p1)\n+        tx_child_p1.wit.vtxinwit = [CTxInWitness()]\n+        tx_child_p1.wit.vtxinwit[0].scriptWitness.stack = [CScript([OP_TRUE])]\n+        tx_child_p1_hex = tx_child_p1.serialize().hex()\n+        txid_child_p1 = tx_child_p1.rehash()\n+        package_hex.append(tx_child_p1_hex)\n+        parents_tx.append(tx_child_p1)\n+        values.append(value_p1)\n+        scripts.append(tx_child_p1.vout[0].scriptPubKey.hex())\n+\n+        # P3\n+        value_p3 = value_p1 - DEFAULT_FEE\n+        rawtx_p3 = node.createrawtransaction([{\"txid\": txid_child_p1, \"vout\": 1}], {self.address : value_p3})\n+        tx_child_p3 = tx_from_hex(rawtx_p3)\n+        tx_child_p3.wit.vtxinwit = [CTxInWitness()]\n+        tx_child_p3.wit.vtxinwit[0].scriptWitness.stack = [CScript([OP_TRUE])]\n+        tx_child_p3_hex = tx_child_p3.serialize().hex()\n+        package_hex.append(tx_child_p3_hex)\n+\n+        # M1b\n+        first_coin_b = self.coins.pop()\n+        spk = None\n+        txid = first_coin_b[\"txid\"]\n+        value = first_coin_b[\"amount\"]\n+        (tx, txhex, value, spk) = make_chain(node, self.address, self.privkeys, txid, value, 0, spk)\n+        txid = tx.rehash()\n+        node.sendrawtransaction(txhex)\n+        parents_tx.append(tx)\n+        values.append(value)\n+        scripts.append(spk)\n+\n+        # P2\n+        child_hex = create_child_with_parents(node, self.address, self.privkeys, parents_tx, values, scripts)\n+        package_hex.append(child_hex)\n+\n+        assert_equal(24, node.getmempoolinfo()[\"size\"])\n+        assert_equal(3, len(package_hex))\n+        testres = node.testmempoolaccept(rawtxs=package_hex)",
    "path": "test/functional/mempool_package_limits.py",
    "position": 79,
    "original_position": 108,
    "commit_id": "fa7db1cbf7e8400b625fccd5757f8e1b200796bd",
    "original_commit_id": "4fd79792dd547b465dc8f5e9ec37073598db4b8e",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Did you consider the suggestion about asserting success for [P1, P3] but failure for [P1, P2, P3] ?",
    "created_at": "2021-08-12T09:28:23Z",
    "updated_at": "2021-08-12T09:29:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22582#discussion_r687545626",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22582",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/687545626"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22582#discussion_r687545626"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22582"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/687545626/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 241,
    "original_line": 241,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/687546339",
    "pull_request_review_id": 728380093,
    "id": 687546339,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4NzU0NjMzOQ==",
    "diff_hunk": "@@ -177,6 +179,102 @@ def test_desc_count_limits(self):\n         node.generate(1)\n         assert all([res[\"allowed\"] for res in node.testmempoolaccept(rawtxs=package_hex)])\n \n+    def test_desc_count_limits_2(self):\n+        \"\"\"Create a Package with 24 transaction in mempool and 3 transaction in package\n+                      M1a\n+                     ^  ^\n+                   M2a   ^\n+                   .      ^\n+                  .        ^        M1b\n+                 .          ^       ^\n+                M23a         ^     ^\n+                              ^   ^\n+                               ^ ^\n+                               P1\n+                              ^  ^\n+                             P2   P3\n+        P1 has M1a as a mempool ancestor, P2 has only M1b as in-mempool ancestor whereas P3 has\n+        no in-mempool ancestors, but when combined both P2 and P3 have M1a as an ancestor and\n+        M1a exceeds descendant_limits (23 in-mempool descendants + 3 in-package descendants)",
    "path": "test/functional/mempool_package_limits.py",
    "position": null,
    "original_position": 36,
    "commit_id": "fa7db1cbf7e8400b625fccd5757f8e1b200796bd",
    "original_commit_id": "4fd79792dd547b465dc8f5e9ec37073598db4b8e",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This comment/diagram is now incorrect - M1b is the parent of P2, not P1",
    "created_at": "2021-08-12T09:29:19Z",
    "updated_at": "2021-08-12T09:29:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22582#discussion_r687546339",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22582",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/687546339"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22582#discussion_r687546339"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22582"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/687546339/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": 184,
    "start_side": "RIGHT",
    "line": null,
    "original_line": 198,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/687979237",
    "pull_request_review_id": 728936039,
    "id": 687979237,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4Nzk3OTIzNw==",
    "diff_hunk": "@@ -177,6 +179,102 @@ def test_desc_count_limits(self):\n         node.generate(1)\n         assert all([res[\"allowed\"] for res in node.testmempoolaccept(rawtxs=package_hex)])\n \n+    def test_desc_count_limits_2(self):\n+        \"\"\"Create a Package with 24 transaction in mempool and 3 transaction in package\n+                      M1a\n+                     ^  ^\n+                   M2a   ^\n+                   .      ^\n+                  .        ^        M1b\n+                 .          ^       ^\n+                M23a         ^     ^\n+                              ^   ^\n+                               ^ ^\n+                               P1\n+                              ^  ^\n+                             P2   P3\n+        P1 has M1a as a mempool ancestor, P2 has only M1b as in-mempool ancestor whereas P3 has\n+        no in-mempool ancestors, but when combined both P2 and P3 have M1a as an ancestor and\n+        M1a exceeds descendant_limits (23 in-mempool descendants + 3 in-package descendants)\n+        \"\"\"\n+\n+        node = self.nodes[0]\n+        package_hex = []\n+        parents_tx = []\n+        values = []\n+        scripts = []\n+        # M1a\n+        first_coin_a = self.coins.pop()\n+        parent_value = (first_coin_a[\"amount\"] - DEFAULT_FEE) / 2 # Deduct reasonable fee and make 2 outputs\n+        inputs = [{\"txid\": first_coin_a[\"txid\"], \"vout\": 0}]\n+        outputs = [{self.address : parent_value}, {ADDRESS_BCRT1_P2WSH_OP_TRUE : parent_value}]\n+        rawtx = node.createrawtransaction(inputs, outputs)\n+\n+        parent_signed = node.signrawtransactionwithkey(hexstring=rawtx, privkeys=self.privkeys)\n+        assert parent_signed[\"complete\"]\n+        parent_tx = tx_from_hex(parent_signed[\"hex\"])\n+        parent_txid = parent_tx.rehash()\n+        node.sendrawtransaction(parent_signed[\"hex\"])\n+\n+        # Chain M2a...M23a\n+        spk = parent_tx.vout[0].scriptPubKey.hex()\n+        value = parent_value\n+        txid = parent_txid\n+        for i in range(22): # M2a... M23a\n+            (tx, txhex, value, spk) = make_chain(node, self.address, self.privkeys, txid, value, 0, spk)\n+            txid = tx.rehash()\n+            node.sendrawtransaction(txhex)\n+\n+        # P1\n+        value_p1 = (parent_value - DEFAULT_FEE) / 2 # Deduct reasonable fee and make 2 outputs\n+        inputs_p1 = [{\"txid\": parent_txid, \"vout\": 1}]\n+        outputs_p1 = [{self.address : value_p1}, {ADDRESS_BCRT1_P2WSH_OP_TRUE : value_p1}]\n+        rawtx_p1 = node.createrawtransaction(inputs_p1, outputs_p1)\n+        tx_child_p1 = tx_from_hex(rawtx_p1)\n+        tx_child_p1.wit.vtxinwit = [CTxInWitness()]\n+        tx_child_p1.wit.vtxinwit[0].scriptWitness.stack = [CScript([OP_TRUE])]\n+        tx_child_p1_hex = tx_child_p1.serialize().hex()\n+        txid_child_p1 = tx_child_p1.rehash()\n+        package_hex.append(tx_child_p1_hex)\n+        parents_tx.append(tx_child_p1)\n+        values.append(value_p1)\n+        scripts.append(tx_child_p1.vout[0].scriptPubKey.hex())\n+\n+        # P3\n+        value_p3 = value_p1 - DEFAULT_FEE\n+        rawtx_p3 = node.createrawtransaction([{\"txid\": txid_child_p1, \"vout\": 1}], {self.address : value_p3})\n+        tx_child_p3 = tx_from_hex(rawtx_p3)\n+        tx_child_p3.wit.vtxinwit = [CTxInWitness()]\n+        tx_child_p3.wit.vtxinwit[0].scriptWitness.stack = [CScript([OP_TRUE])]\n+        tx_child_p3_hex = tx_child_p3.serialize().hex()\n+        package_hex.append(tx_child_p3_hex)\n+\n+        # M1b\n+        first_coin_b = self.coins.pop()\n+        spk = None\n+        txid = first_coin_b[\"txid\"]\n+        value = first_coin_b[\"amount\"]\n+        (tx, txhex, value, spk) = make_chain(node, self.address, self.privkeys, txid, value, 0, spk)\n+        txid = tx.rehash()\n+        node.sendrawtransaction(txhex)\n+        parents_tx.append(tx)\n+        values.append(value)\n+        scripts.append(spk)\n+\n+        # P2\n+        child_hex = create_child_with_parents(node, self.address, self.privkeys, parents_tx, values, scripts)\n+        package_hex.append(child_hex)\n+\n+        assert_equal(24, node.getmempoolinfo()[\"size\"])\n+        assert_equal(3, len(package_hex))\n+        testres = node.testmempoolaccept(rawtxs=package_hex)",
    "path": "test/functional/mempool_package_limits.py",
    "position": 79,
    "original_position": 108,
    "commit_id": "fa7db1cbf7e8400b625fccd5757f8e1b200796bd",
    "original_commit_id": "4fd79792dd547b465dc8f5e9ec37073598db4b8e",
    "user": {
      "login": "ritickgoenka",
      "id": 32807799,
      "node_id": "MDQ6VXNlcjMyODA3Nzk5",
      "avatar_url": "https://avatars.githubusercontent.com/u/32807799?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ritickgoenka",
      "html_url": "https://github.com/ritickgoenka",
      "followers_url": "https://api.github.com/users/ritickgoenka/followers",
      "following_url": "https://api.github.com/users/ritickgoenka/following{/other_user}",
      "gists_url": "https://api.github.com/users/ritickgoenka/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ritickgoenka/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ritickgoenka/subscriptions",
      "organizations_url": "https://api.github.com/users/ritickgoenka/orgs",
      "repos_url": "https://api.github.com/users/ritickgoenka/repos",
      "events_url": "https://api.github.com/users/ritickgoenka/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ritickgoenka/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I have removed M1b as it was creating more confusion and as jnewbery pointed out the test would still fail regardless of M1b being present there and it was not adding any edgecase that it not already present.",
    "created_at": "2021-08-12T18:17:01Z",
    "updated_at": "2021-08-12T18:17:01Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22582#discussion_r687979237",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22582",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/687979237"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22582#discussion_r687979237"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22582"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/687979237/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 241,
    "original_line": 241,
    "side": "RIGHT",
    "in_reply_to_id": 687545626
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/689434394",
    "pull_request_review_id": 730578286,
    "id": 689434394,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4OTQzNDM5NA==",
    "diff_hunk": "@@ -177,6 +179,84 @@ def test_desc_count_limits(self):\n         node.generate(1)\n         assert all([res[\"allowed\"] for res in node.testmempoolaccept(rawtxs=package_hex)])\n \n+    def test_desc_count_limits_2(self):\n+        \"\"\"Create a Package with 23 transaction in mempool and 3 transaction in package\n+                      M1a\n+                     ^  ^\n+                   M2a   ^\n+                   .      ^\n+                  .        ^\n+                 .          ^\n+                M23a         ^\n+                              ^\n+                              P1\n+                             ^  ^\n+                            P2   P3\n+        P1 has M1a as a mempool ancestor, P2 and P3 have no in-mempool ancestors, but when\n+        combined both P2 and P3 have M1a as an ancestor and M1a exceeds descendant_limits\n+        (23 in-mempool descendants + 3 in-package descendants)",
    "path": "test/functional/mempool_package_limits.py",
    "position": null,
    "original_position": 35,
    "commit_id": "fa7db1cbf7e8400b625fccd5757f8e1b200796bd",
    "original_commit_id": "5a7050c63c1a574abf336a47b18e154554a4020a",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "```suggestion\r\n        (22 in-mempool descendants + 3 in-package descendants, a total of 26 including itself).\r\n```",
    "created_at": "2021-08-16T10:55:12Z",
    "updated_at": "2021-08-16T10:57:11Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22582#discussion_r689434394",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22582",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/689434394"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22582#discussion_r689434394"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22582"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/689434394/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 197,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/692345308",
    "pull_request_review_id": 734284021,
    "id": 692345308,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5MjM0NTMwOA==",
    "diff_hunk": "@@ -177,6 +179,73 @@ def test_desc_count_limits(self):\n         node.generate(1)\n         assert all([res[\"allowed\"] for res in node.testmempoolaccept(rawtxs=package_hex)])\n \n+    def test_desc_count_limits_2(self):\n+        \"\"\"Create a Package with 24 transaction in mempool and 2 transaction in package:\n+                      M1\n+                     ^  ^\n+                   M2    ^\n+                   .      ^\n+                  .        ^\n+                 .          ^\n+                M24          ^\n+                              ^\n+                              P1\n+                              ^\n+                              P2\n+        P1 has M1 as a mempool ancestor, P2 has no in-mempool ancestors, but when\n+        combined P2 has M1 as an ancestor and M1 exceeds descendant_limits(23 in-mempool\n+        descendants + 2 in-package descendants, a total of 26 including itself).\n+        \"\"\"\n+\n+        node = self.nodes[0]\n+        package_hex = []\n+        # M1\n+        first_coin_a = self.coins.pop()\n+        parent_value = (first_coin_a[\"amount\"] - DEFAULT_FEE) / 2 # Deduct reasonable fee and make 2 outputs\n+        inputs = [{\"txid\": first_coin_a[\"txid\"], \"vout\": 0}]\n+        outputs = [{self.address : parent_value}, {ADDRESS_BCRT1_P2WSH_OP_TRUE : parent_value}]\n+        rawtx = node.createrawtransaction(inputs, outputs)\n+\n+        parent_signed = node.signrawtransactionwithkey(hexstring=rawtx, privkeys=self.privkeys)\n+        assert parent_signed[\"complete\"]\n+        parent_tx = tx_from_hex(parent_signed[\"hex\"])\n+        parent_txid = parent_tx.rehash()\n+        node.sendrawtransaction(parent_signed[\"hex\"])\n+\n+        # Chain M2...M24\n+        spk = parent_tx.vout[0].scriptPubKey.hex()\n+        value = parent_value\n+        txid = parent_txid\n+        for i in range(23): # M2...M24\n+            (tx, txhex, value, spk) = make_chain(node, self.address, self.privkeys, txid, value, 0, spk)\n+            txid = tx.rehash()\n+            node.sendrawtransaction(txhex)\n+\n+        # P1\n+        value_p1 = (parent_value - DEFAULT_FEE)\n+        rawtx_p1 = node.createrawtransaction([{\"txid\": parent_txid, \"vout\": 1}], [{self.address : value_p1}])\n+        tx_child_p1 = tx_from_hex(rawtx_p1)\n+        tx_child_p1.wit.vtxinwit = [CTxInWitness()]\n+        tx_child_p1.wit.vtxinwit[0].scriptWitness.stack = [CScript([OP_TRUE])]\n+        tx_child_p1_hex = tx_child_p1.serialize().hex()\n+        txid_child_p1 = tx_child_p1.rehash()\n+        package_hex.append(tx_child_p1_hex)\n+        tx_child_p1_spk = tx_child_p1.vout[0].scriptPubKey.hex()\n+\n+        # P2\n+        (_, tx_child_p2_hex, _, _) = make_chain(node, self.address, self.privkeys, txid_child_p1, value_p1, 0, tx_child_p1_spk)\n+        package_hex.append(tx_child_p2_hex)\n+\n+        assert_equal(24, node.getmempoolinfo()[\"size\"])\n+        assert_equal(2, len(package_hex))\n+        testres = node.testmempoolaccept(rawtxs=package_hex)\n+        for txres in testres:",
    "path": "test/functional/mempool_package_limits.py",
    "position": 81,
    "original_position": 80,
    "commit_id": "fa7db1cbf7e8400b625fccd5757f8e1b200796bd",
    "original_commit_id": "2ef27b5b784befb85fd139abf9761c5121bcf08a",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "In commit \"[test] checks descendants limtis for second generation Package descendants\" (e0f92f30954438540e6a676af77d17fbb963ca5d)\r\n\r\nMay be paranoid, but could be good to check `assert_equal(len(testres), len(package_hex))`",
    "created_at": "2021-08-19T17:33:03Z",
    "updated_at": "2021-08-19T17:36:08Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22582#discussion_r692345308",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22582",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/692345308"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22582#discussion_r692345308"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22582"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/692345308/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 243,
    "original_line": 243,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/705331521",
    "pull_request_review_id": 750339076,
    "id": 705331521,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNTMzMTUyMQ==",
    "diff_hunk": "@@ -177,6 +179,74 @@ def test_desc_count_limits(self):\n         node.generate(1)\n         assert all([res[\"allowed\"] for res in node.testmempoolaccept(rawtxs=package_hex)])\n \n+    def test_desc_count_limits_2(self):\n+        \"\"\"Create a Package with 24 transaction in mempool and 2 transaction in package:\n+                      M1\n+                     ^  ^\n+                   M2    ^\n+                   .      ^\n+                  .        ^\n+                 .          ^\n+                M24          ^\n+                              ^\n+                              P1\n+                              ^\n+                              P2\n+        P1 has M1 as a mempool ancestor, P2 has no in-mempool ancestors, but when\n+        combined P2 has M1 as an ancestor and M1 exceeds descendant_limits(23 in-mempool\n+        descendants + 2 in-package descendants, a total of 26 including itself).\n+        \"\"\"\n+\n+        node = self.nodes[0]\n+        package_hex = []\n+        # M1\n+        first_coin_a = self.coins.pop()\n+        parent_value = (first_coin_a[\"amount\"] - DEFAULT_FEE) / 2 # Deduct reasonable fee and make 2 outputs\n+        inputs = [{\"txid\": first_coin_a[\"txid\"], \"vout\": 0}]\n+        outputs = [{self.address : parent_value}, {ADDRESS_BCRT1_P2WSH_OP_TRUE : parent_value}]\n+        rawtx = node.createrawtransaction(inputs, outputs)\n+\n+        parent_signed = node.signrawtransactionwithkey(hexstring=rawtx, privkeys=self.privkeys)\n+        assert parent_signed[\"complete\"]\n+        parent_tx = tx_from_hex(parent_signed[\"hex\"])\n+        parent_txid = parent_tx.rehash()\n+        node.sendrawtransaction(parent_signed[\"hex\"])\n+\n+        # Chain M2...M24\n+        spk = parent_tx.vout[0].scriptPubKey.hex()\n+        value = parent_value\n+        txid = parent_txid\n+        for i in range(23): # M2...M24\n+            (tx, txhex, value, spk) = make_chain(node, self.address, self.privkeys, txid, value, 0, spk)",
    "path": "test/functional/mempool_package_limits.py",
    "position": 58,
    "original_position": 58,
    "commit_id": "fa7db1cbf7e8400b625fccd5757f8e1b200796bd",
    "original_commit_id": "fa7db1cbf7e8400b625fccd5757f8e1b200796bd",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "```suggestion\r\n            tx, txhex, value, spk = make_chain(node, self.address, self.privkeys, txid, value, 0, spk)\r\n```",
    "created_at": "2021-09-09T13:27:45Z",
    "updated_at": "2021-09-09T13:35:49Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22582#discussion_r705331521",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22582",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/705331521"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22582#discussion_r705331521"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22582"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/705331521/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 220,
    "original_line": 220,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/705337693",
    "pull_request_review_id": 750339076,
    "id": 705337693,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNTMzNzY5Mw==",
    "diff_hunk": "@@ -177,6 +179,74 @@ def test_desc_count_limits(self):\n         node.generate(1)\n         assert all([res[\"allowed\"] for res in node.testmempoolaccept(rawtxs=package_hex)])\n \n+    def test_desc_count_limits_2(self):\n+        \"\"\"Create a Package with 24 transaction in mempool and 2 transaction in package:\n+                      M1\n+                     ^  ^\n+                   M2    ^\n+                   .      ^\n+                  .        ^\n+                 .          ^\n+                M24          ^\n+                              ^\n+                              P1\n+                              ^\n+                              P2\n+        P1 has M1 as a mempool ancestor, P2 has no in-mempool ancestors, but when\n+        combined P2 has M1 as an ancestor and M1 exceeds descendant_limits(23 in-mempool\n+        descendants + 2 in-package descendants, a total of 26 including itself).\n+        \"\"\"\n+\n+        node = self.nodes[0]\n+        package_hex = []\n+        # M1\n+        first_coin_a = self.coins.pop()\n+        parent_value = (first_coin_a[\"amount\"] - DEFAULT_FEE) / 2 # Deduct reasonable fee and make 2 outputs\n+        inputs = [{\"txid\": first_coin_a[\"txid\"], \"vout\": 0}]\n+        outputs = [{self.address : parent_value}, {ADDRESS_BCRT1_P2WSH_OP_TRUE : parent_value}]",
    "path": "test/functional/mempool_package_limits.py",
    "position": 44,
    "original_position": 44,
    "commit_id": "fa7db1cbf7e8400b625fccd5757f8e1b200796bd",
    "original_commit_id": "fa7db1cbf7e8400b625fccd5757f8e1b200796bd",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Consider using a linter like [flake8](https://flake8.pycqa.org/en/latest/) or a formatter like [black](https://github.com/psf/black) to catch/fix PEP8 violations:\r\n\r\n```suggestion\r\n        outputs = [{self.address: parent_value}, {ADDRESS_BCRT1_P2WSH_OP_TRUE: parent_value}]\r\n```",
    "created_at": "2021-09-09T13:34:25Z",
    "updated_at": "2021-09-09T13:35:49Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22582#discussion_r705337693",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22582",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/705337693"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22582#discussion_r705337693"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22582"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/705337693/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 206,
    "original_line": 206,
    "side": "RIGHT"
  }
]