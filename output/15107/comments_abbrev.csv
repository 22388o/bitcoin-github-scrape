laanwj,2019-01-07T13:01:47Z,"I'm a bit confused here. From the fact that these call return an array I surmise it's possible for it to return more than one result as well? If so, I think handling the zero case specially is not a good idea.\n\nIf not, then I'm ok with this change.",https://github.com/bitcoin/bitcoin/pull/15107#issuecomment-451927594,451927594,
jgarzik,2019-01-07T13:51:46Z,"concept ACK -- it makes sense to give a definitive and HTTP-standard answer for this condition, rather than forcing the caller to infer it.",https://github.com/bitcoin/bitcoin/pull/15107#issuecomment-451940881,451940881,
promag,2019-01-07T15:50:53Z,"@laanwj the error already exits, for instance, in `/rest/block`:\n\nhttps://github.com/bitcoin/bitcoin/blob/2d5f1ea2e3f9629d313f1d2aff94a15ef8e1128a/src/rest.cpp#L213-L217\n",https://github.com/bitcoin/bitcoin/pull/15107#issuecomment-451979832,451979832,
sipa,2019-01-09T18:34:22Z,"So with this change you'll get a 404 when the block hash is unknown, but you'll still get an empty array when you request a known block hash not in the main chain. Is that intentional (it may or may not be, I can see arguments both ways).\n\n",https://github.com/bitcoin/bitcoin/pull/15107#issuecomment-452806186,452806186,
promag,2019-01-09T19:17:04Z,@sipa oh haven't considered that case. IMO that's an advantage of this change. What arguments do you see for the other way?,https://github.com/bitcoin/bitcoin/pull/15107#issuecomment-452821812,452821812,
sipa,2019-01-11T14:27:01Z,"@promag If the REST interface for blocks is supposed to give access to ""the best headers chain"", it shouldn't distinguish between unknown or not in the chain.",https://github.com/bitcoin/bitcoin/pull/15107#issuecomment-453533309,453533309,
promag,2019-01-11T14:45:13Z,"It'd be consistent with `/block/<hash>` response. Not sure why you say ""shouldn't"" when for the client  this is more informative:\n - the client might be in the wrong network\n - the node is syncing\n - some bug or data corruption on the client\n\nAnd for the server I don't see harm in distinguishing.\n\nAnyway, if there's agreement to what you say then the documentation could be updated.",https://github.com/bitcoin/bitcoin/pull/15107#issuecomment-453539434,453539434,
laanwj,2019-01-14T14:36:30Z,"I think it's (marginally) better to update the documentation.\n\nUnless you have a strong use case for distinguishing these in your own code that uses this API?",https://github.com/bitcoin/bitcoin/pull/15107#issuecomment-454025694,454025694,
promag,2019-01-14T22:57:20Z,"@laanwj no use case.\n\nWhat @sipa made me realize is that strictly speaking `/block` and `/headers` are semantically different.",https://github.com/bitcoin/bitcoin/pull/15107#issuecomment-454193295,454193295,
laanwj,2019-01-16T13:32:24Z,"> Also add a test for /rest/block/ which already returns the 404 error.\n\nWe could still add this test?",https://github.com/bitcoin/bitcoin/pull/15107#issuecomment-454779748,454779748,
promag,2019-01-16T13:35:52Z,I'll submit it along with a documentation update.,https://github.com/bitcoin/bitcoin/pull/15107#issuecomment-454780846,454780846,
laanwj,2019-01-16T13:36:18Z,Thanks!,https://github.com/bitcoin/bitcoin/pull/15107#issuecomment-454780986,454780986,
promag,2019-01-16T14:53:41Z,"I've decided to include it in #15177, it's a small change.",https://github.com/bitcoin/bitcoin/pull/15107#issuecomment-454807305,454807305,
PatrickLemke,2019-01-09T17:04:08Z,"```suggestion\n        # Should give 404 if block hash does not exist\n```",https://github.com/bitcoin/bitcoin/pull/15107#discussion_r246463193,246463193,test/functional/interface_rest.py
