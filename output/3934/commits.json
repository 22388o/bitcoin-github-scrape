[
  {
    "sha": "051b3e9d39b298eb839cf29e28345fde4e68fdb7",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowNTFiM2U5ZDM5YjI5OGViODM5Y2YyOWUyODM0NWZkZTRlNjhmZGI3",
    "commit": {
      "author": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2014-03-22T08:11:35Z"
      },
      "committer": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2014-03-22T08:11:51Z"
      },
      "message": "Support unicode characters in paths in Windows\n\nSet boost::filesystem locale to UTF-8 at start of program, independent\nof operating system.",
      "tree": {
        "sha": "6093c53b6bb5f127ea4c14b065dbb1663692b73a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6093c53b6bb5f127ea4c14b065dbb1663692b73a"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/051b3e9d39b298eb839cf29e28345fde4e68fdb7",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/051b3e9d39b298eb839cf29e28345fde4e68fdb7",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/051b3e9d39b298eb839cf29e28345fde4e68fdb7",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/051b3e9d39b298eb839cf29e28345fde4e68fdb7/comments",
    "author": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "0a3acf260a56cb21fa768c7b7a82efa2f1bdcbf6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0a3acf260a56cb21fa768c7b7a82efa2f1bdcbf6",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/0a3acf260a56cb21fa768c7b7a82efa2f1bdcbf6"
      }
    ],
    "stats": {
      "total": 26,
      "additions": 26,
      "deletions": 0
    },
    "files": [
      {
        "sha": "da2dba9cf06a87bb8e376f69039eebde2bff5020",
        "filename": "src/bitcoin-cli.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/051b3e9d39b298eb839cf29e28345fde4e68fdb7/src/bitcoin-cli.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/051b3e9d39b298eb839cf29e28345fde4e68fdb7/src/bitcoin-cli.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/bitcoin-cli.cpp?ref=051b3e9d39b298eb839cf29e28345fde4e68fdb7",
        "patch": "@@ -18,6 +18,8 @@\n //\n static bool AppInitRPC(int argc, char* argv[])\n {\n+    BoostFilesystemToUTF8();\n+\n     //\n     // Parameters\n     //"
      },
      {
        "sha": "a7aba8663a326d6a957ab087418979abd398b7ba",
        "filename": "src/bitcoind.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/051b3e9d39b298eb839cf29e28345fde4e68fdb7/src/bitcoind.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/051b3e9d39b298eb839cf29e28345fde4e68fdb7/src/bitcoind.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/bitcoind.cpp?ref=051b3e9d39b298eb839cf29e28345fde4e68fdb7",
        "patch": "@@ -60,6 +60,7 @@ bool AppInit(int argc, char* argv[])\n     bool fRet = false;\n     try\n     {\n+        BoostFilesystemToUTF8();\n         //\n         // Parameters\n         //"
      },
      {
        "sha": "f1653fbf7ee3e6e81ab7ea6449ac12d514f1ef55",
        "filename": "src/qt/bitcoin.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/051b3e9d39b298eb839cf29e28345fde4e68fdb7/src/qt/bitcoin.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/051b3e9d39b298eb839cf29e28345fde4e68fdb7/src/qt/bitcoin.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoin.cpp?ref=051b3e9d39b298eb839cf29e28345fde4e68fdb7",
        "patch": "@@ -30,6 +30,7 @@\n #include <stdint.h>\n \n #include <boost/filesystem/operations.hpp>\n+#include <boost/filesystem/detail/utf8_codecvt_facet.hpp>\n #include <QApplication>\n #include <QLibraryInfo>\n #include <QLocale>\n@@ -457,6 +458,7 @@ int main(int argc, char *argv[])\n     QTextCodec::setCodecForTr(QTextCodec::codecForName(\"UTF-8\"));\n     QTextCodec::setCodecForCStrings(QTextCodec::codecForTr());\n #endif\n+    BoostFilesystemToUTF8();\n \n     Q_INIT_RESOURCE(bitcoin);\n     BitcoinApplication app(argc, argv);"
      },
      {
        "sha": "dae8d4c6e38a7bd4e0cfb8b3129d7fd4fec31ecb",
        "filename": "src/qt/test/test_main.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/051b3e9d39b298eb839cf29e28345fde4e68fdb7/src/qt/test/test_main.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/051b3e9d39b298eb839cf29e28345fde4e68fdb7/src/qt/test/test_main.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/test/test_main.cpp?ref=051b3e9d39b298eb839cf29e28345fde4e68fdb7",
        "patch": "@@ -7,6 +7,7 @@\n #include \"paymentservertests.h\"\n #endif\n #include \"uritests.h\"\n+#include \"util.h\"\n \n #include <QCoreApplication>\n #include <QObject>\n@@ -30,6 +31,8 @@ int main(int argc, char *argv[])\n     QCoreApplication app(argc, argv);\n     app.setApplicationName(\"Bitcoin-Qt-test\");\n \n+    BoostFilesystemToUTF8();\n+\n     URITests test1;\n     if (QTest::qExec(&test1) != 0)\n         fInvalid = true;"
      },
      {
        "sha": "434f909fcf69f8f4843f64b10e0c7e2d0aea85ff",
        "filename": "src/test/test_bitcoin.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/051b3e9d39b298eb839cf29e28345fde4e68fdb7/src/test/test_bitcoin.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/051b3e9d39b298eb839cf29e28345fde4e68fdb7/src/test/test_bitcoin.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/test_bitcoin.cpp?ref=051b3e9d39b298eb839cf29e28345fde4e68fdb7",
        "patch": "@@ -31,6 +31,8 @@ struct TestingSetup {\n \n     TestingSetup() {\n         fPrintToDebugLog = false; // don't want to write to debug.log file\n+\n+        BoostFilesystemToUTF8();\n         noui_connect();\n #ifdef ENABLE_WALLET\n         bitdb.MakeMock();"
      },
      {
        "sha": "803fb4145e95ac40b1edf98ec511cd82c173a465",
        "filename": "src/util.cpp",
        "status": "modified",
        "additions": 10,
        "deletions": 0,
        "changes": 10,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/051b3e9d39b298eb839cf29e28345fde4e68fdb7/src/util.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/051b3e9d39b298eb839cf29e28345fde4e68fdb7/src/util.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/util.cpp?ref=051b3e9d39b298eb839cf29e28345fde4e68fdb7",
        "patch": "@@ -68,6 +68,7 @@\n #include <boost/foreach.hpp>\n #include <boost/program_options/detail/config_file.hpp>\n #include <boost/program_options/parsers.hpp>\n+#include <boost/filesystem/detail/utf8_codecvt_facet.hpp>\n #include <openssl/crypto.h>\n #include <openssl/rand.h>\n \n@@ -1427,3 +1428,12 @@ void RenameThread(const char* name)\n #endif\n }\n \n+void BoostFilesystemToUTF8()\n+{\n+    // Convince boost::filesystem globally that all standard strings (both those passed in and\n+    // retrieved) are UTF-8\n+    std::locale global_loc = std::locale();\n+    std::locale loc(global_loc, new boost::filesystem::detail::utf8_codecvt_facet);\n+    boost::filesystem::path::imbue(loc);\n+}\n+"
      },
      {
        "sha": "b2ef8150a9b4cedcaecf1b46d6c20d58c691e933",
        "filename": "src/util.h",
        "status": "modified",
        "additions": 6,
        "deletions": 0,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/051b3e9d39b298eb839cf29e28345fde4e68fdb7/src/util.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/051b3e9d39b298eb839cf29e28345fde4e68fdb7/src/util.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/util.h?ref=051b3e9d39b298eb839cf29e28345fde4e68fdb7",
        "patch": "@@ -439,6 +439,12 @@ bool TimingResistantEqual(const T& a, const T& b)\n     return accumulator == 0;\n }\n \n+/**\n+ * Convince boost::filesystem that all standard strings are UTF-8.\n+ * Call this before using any boost::filesystem functions.\n+ */\n+void BoostFilesystemToUTF8();\n+\n /** Median filter over a stream of values.\n  * Returns the median of the last N numbers\n  */"
      }
    ]
  }
]