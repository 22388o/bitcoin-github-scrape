laanwj,2014-04-29T07:16:25Z,Waiting doesn't seem to be a very robust solution when there is some system load.\nIsn't there another way to wait for hdiutil to be ready?\n,https://github.com/bitcoin/bitcoin/pull/4104#issuecomment-41647655,41647655,
iangcarroll,2014-04-29T12:09:40Z,"My best guess was that it hadn't finished mounting and needed to pause. If anyone can shine a better light on it, great.\n\n> On Apr 29, 2014, at 3:16 AM, ""Wladimir J. van der Laan"" notifications@github.com wrote:\n> \n> Waiting doesn't seem to be a very robust solution when there is some system load.\n> Isn't there another way to wait for hdiutil to be ready?\n> \n> —\n> Reply to this email direc",https://github.com/bitcoin/bitcoin/pull/4104#issuecomment-41667969,41667969,
sipa,2014-04-29T20:08:39Z,"@iangcarroll That seems like a reasonable guess, but what @laanwj means is that waiting some arbitrary amount of time is rarely a good solution - for someone else it may take longer. Isn't there a way to check whether the mounting has completed, and just wait until that is done?\n",https://github.com/bitcoin/bitcoin/pull/4104#issuecomment-41725573,41725573,
laanwj,2014-04-30T10:20:47Z,"Yes, to clarify, I'm not against waiting, but against waiting a fixed amount of time.\n\nEven waiting a fixed amount of time would be OK if you can detect the specific error and repeat the operation in that case.\n",https://github.com/bitcoin/bitcoin/pull/4104#issuecomment-41781301,41781301,
BitcoinPullTester,2014-06-23T11:11:49Z,"Automatic sanity-testing: FAILED BUILD/TEST, see http://jenkins.bluematt.me/pull-tester/p4104_68aa01e51fb9673ff2739825529a3fee36df79b4/ for binaries and test log.\n\nThis could happen for one of several reasons:\n1. It chanages paths in makefile.linux-mingw or otherwise changes build scripts in a way that made them incompatible with the automated testing scripts (please tweak those patches in qa/p",https://github.com/bitcoin/bitcoin/pull/4104#issuecomment-46831115,46831115,
laanwj,2014-06-24T15:18:16Z,@theuni Have you ever encountered this problem?\n,https://github.com/bitcoin/bitcoin/pull/4104#issuecomment-46985018,46985018,
theuni,2014-06-24T18:07:54Z,"I've never seen it, no.\n\nThe applescript should be sync, afaik. I'm not sure how it would return before the image is unmounted.\n\nThough I agree that it's a bad fix, I'm not opposed to it if it actually fixes the problem. The net is littered with scripts to handle mounting/unmounting, and random waits seem to be commonplace.\n",https://github.com/bitcoin/bitcoin/pull/4104#issuecomment-47007959,47007959,
iangcarroll,2014-06-24T18:21:29Z,"I just don't know how to find out if it's ready or not. If anyone could shine some light related to this... I'll try reproducing later today.\n\n> On Jun 24, 2014, at 2:08 PM, Cory Fields notifications@github.com wrote:\n> \n> I've never seen it, no.\n> \n> The applescript should be sync, afaik. I'm not sure how it would return before the image is unmounted.\n> \n> Though I agree that it's a bad f",https://github.com/bitcoin/bitcoin/pull/4104#issuecomment-47009620,47009620,
theuni,2014-06-24T18:58:10Z,"@iangcarroll About the only thing I can think of to try would be to remove the 'eject' from the applescript, and run 'hdiutil eject...' manually afterwards instead. At least that way you could debug the timing somewhat. For me, 'hdiutil eject /mount/point' seems to return pretty much instantly, and presumably it's actually ejected before exiting.\n",https://github.com/bitcoin/bitcoin/pull/4104#issuecomment-47015407,47015407,
theuni,2014-06-24T19:01:47Z,"Data point: https://chromium.googlesource.com/external/dart/bleeding_edge/+/refs/heads/master/dart/tools/mac_build_editor_dmg.sh\n\nGoogle adds in a wait as well. I suspect that under whatever circumstances that trigger the race, there's probably not a way to detect hdiutil's finish.\n\nHow about we just borrow google's solution?\n\n```\n# Wait until the script above has umounted the image\nwhile ",https://github.com/bitcoin/bitcoin/pull/4104#issuecomment-47015910,47015910,
theuni,2014-06-24T19:13:27Z,One more example solution: https://chromium.googlesource.com/webm/webmquicktime/+/ed0b174b6e6d7b4c947cdd5a364d4cd43f40ec35/third_party/yoursway-create-dmg/support/template.applescript\n,https://github.com/bitcoin/bitcoin/pull/4104#issuecomment-47017335,47017335,
laanwj,2014-06-25T04:52:26Z,The loop for existence of the mount point is acceptable. At least it detects that the operation was finished instead of adding an arbitrary wait which _still_ may not be enough under heavy system loads.\n,https://github.com/bitcoin/bitcoin/pull/4104#issuecomment-47060408,47060408,
laanwj,2014-07-04T07:24:12Z,@iangcarroll Are you going to update this?\n,https://github.com/bitcoin/bitcoin/pull/4104#issuecomment-48015512,48015512,
iangcarroll,2014-07-04T13:21:35Z,"Yeah, I'll do it when I get back to my house on Monday. \n\nSent from my iPhone\n\n> On Jul 4, 2014, at 3:24 AM, Wladimir J. van der Laan notifications@github.com wrote:\n> \n> @iangcarroll Are you going to update this?\n> \n> —\n> Reply to this email directly or view it on GitHub.\n",https://github.com/bitcoin/bitcoin/pull/4104#issuecomment-48043199,48043199,
laanwj,2014-07-25T09:09:46Z,@iangcarroll ping\n,https://github.com/bitcoin/bitcoin/pull/4104#issuecomment-50125650,50125650,
laanwj,2014-07-30T09:45:12Z,"Just going to merge this as-is, having a solution is better than no solution at all.\n",https://github.com/bitcoin/bitcoin/pull/4104#issuecomment-50594447,50594447,
