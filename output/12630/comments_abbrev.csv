MarcoFalke,2018-03-07T13:02:14Z,Don't forget to add a test.,https://github.com/bitcoin/bitcoin/pull/12630#issuecomment-371131245,371131245,
practicalswift,2018-03-07T14:08:27Z,"Concept ACK, but please try to solve this without introducing more Boost usage. We want to get rid of Boost â€“ see https://github.com/bitcoin/bitcoin/projects/3 :-)",https://github.com/bitcoin/bitcoin/pull/12630#issuecomment-371149073,371149073,
randolf,2018-03-07T15:18:25Z,"Concept ACK.  I agree with not needing UUID, etc., and not using the Boost libraries.",https://github.com/bitcoin/bitcoin/pull/12630#issuecomment-371171788,371171788,
eklitzke,2018-03-10T16:31:33Z,"On POSIX you can do this in one line of code with `access(3)`, which just relied on `<unistd.h>`. I believe that MingW (which we use for Windows builds) provides a compatibility version of that header, so I think you can just use `access()` on the directory and completely remove the boost fs stuff.",https://github.com/bitcoin/bitcoin/pull/12630#issuecomment-372042853,372042853,
murrayn,2018-03-12T08:23:25Z,"@eklitzke, access() works on Linux for me, but not Windows. I consistently get failure with errno ENOENT. I believe access() can be flaky with NFS as well, but I didn't test that myself. My most recent commit works on Windows and Linux.\n\n",https://github.com/bitcoin/bitcoin/pull/12630#issuecomment-372226858,372226858,
eklitzke,2018-03-13T05:10:31Z,Alright in that case disregard. utACK 8a79879d2dfb5bcf1a020949044f246ce666e3d3 (and I'll note there aren't any credible proposed alternatives for boost::filesystem so I don't think that should be an objection).,https://github.com/bitcoin/bitcoin/pull/12630#issuecomment-372548929,372548929,
laanwj,2018-03-14T16:10:10Z,"utACK after squash. I still think the check for write-ability could be rolled into LockDirectory, as that function creates the lock file by writing by definition (and that would take care of other directories too, such as wallet directories), but anyhow I'm ok with this solution too.\n\n> and I'll note there aren't any credible proposed alternatives for boost::filesystem\n\nRight - we'll just ",https://github.com/bitcoin/bitcoin/pull/12630#issuecomment-373079144,373079144,
laanwj,2018-03-19T15:49:06Z,"It works:\n```bash\n$ src/bitcoind -datadir=/tmp/test1\nError: Specified data directory ""/tmp/test1"" does not exist.\n$ mkdir /tmp/test2 && chmod 0 /tmp/test2\n$ src/bitcoind -datadir=/tmp/test2\nError: Cannot write to data directory '/tmp/test2'; check permissions.\n$ mkdir /tmp/test3\n$ src/bitcoind -datadir=/tmp/test3 -daemon\n$ src/bitcoind -datadir=/tmp/test3\nError: Cannot obtain a",https://github.com/bitcoin/bitcoin/pull/12630#issuecomment-374260786,374260786,
eklitzke,2018-03-20T07:45:31Z,utACK 8674e74b47c1f6e86a367cfbc738fcc9812b616b,https://github.com/bitcoin/bitcoin/pull/12630#issuecomment-374504233,374504233,
laanwj,2018-03-07T13:21:30Z,"no need for lexical cast and uuid here: you can use `fs::unique_path` if it needs to be unique, but I'm not sure if hardcoding a name for the probe file wouldn't be better for troubleshooting.\n\nAnother (potentially better, as it will follow for wallet paths too) possibility would be to report a different failure from the LockDirectory function, as creating the lock file is done separately. E.g",https://github.com/bitcoin/bitcoin/pull/12630#discussion_r172838928,172838928,src/util.cpp
promag,2018-03-07T17:07:23Z,"Agree, just improve error handling.",https://github.com/bitcoin/bitcoin/pull/12630#discussion_r172914561,172914561,src/util.cpp
