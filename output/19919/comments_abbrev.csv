promag,2020-09-08 21:20:22,This only affects master?,https://github.com/bitcoin/bitcoin/pull/19919#issuecomment-689142429,689142429,
ryanofsky,2020-09-08 21:30:52,"> This only affects master?\n\nThe behavior change probably happened with #19619. I haven't tried to reproduce this, but the status variables this is assigning didn't exist before #19619",https://github.com/bitcoin/bitcoin/pull/19919#issuecomment-689146778,689146778,
AkioNak,2020-09-09 02:05:41,@ryanofsky @haggleburt1972 Thank you for reviewing this!,https://github.com/bitcoin/bitcoin/pull/19919#issuecomment-689252859,689252859,
AkioNak,2020-09-09 07:46:24,"@hebasto Thanks. \nFWIW, my enviroment is:\nmacOS Catalina 10.15.6 and configure with ```--enable-debug```.\n\n```\n% uname -mrsvp\nDarwin 19.6.0 Darwin Kernel Version 19.6.0: Thu Jun 18 20:49:00 PDT 2020; root:xnu-6153.141.1~1/RELEASE_X86_64 x86_64 i386\n\n\n% clang --version\nApple clang version 11.0.3 (clang-1103.0.32.62)\nTarget: x86_64-apple-darwin19.6.0\nThread model: posix\nIns",https://github.com/bitcoin/bitcoin/pull/19919#issuecomment-689378694,689378694,
AkioNak,2020-09-09 07:50:24,@promag Thanks. I will address (both ```loadwallet()``` and ```createwallet()``` that refer the status) .,https://github.com/bitcoin/bitcoin/pull/19919#issuecomment-689384515,689384515,
ryanofsky,2020-09-09 13:50:27,5c4fd19dabd27fe64f7cb66387e00a582c99135d is ok but I preferred 1728059730abef04f3fa84de0b6e20044be7a9d6.  I think UNKNOWN/INVALID error codes are bad practice and source of bugs on their own. If you want to handle unset values better to use `Optional<DatabaseStatus>` type to be unambiguous and actually force all calls to deal with unset values instead of having some callers add unknown/check_nonfa,https://github.com/bitcoin/bitcoin/pull/19919#issuecomment-689576453,689576453,
promag,2020-09-09 14:04:01,"@ryanofsky yup, I've asked if it makes sense some approach to prevent unset values. The current approach is similarly bad because nothing forces settings the default to `UNKNOWN` in the first place. In this case I'd drop the ""output"" arguments and return a `LoadResult` structure, something that could be used like:\n```\nreturn LoadResult(wallet); // for success\nreturn LoadResult(DatabaseStatus",https://github.com/bitcoin/bitcoin/pull/19919#issuecomment-689584672,689584672,
AkioNak,2020-09-09 15:09:53,"@ryanofsky @promag Sorry for bother you caused by my misunderstanding.\nI think I should at least revert these latest improvement-less changes , right?",https://github.com/bitcoin/bitcoin/pull/19919#issuecomment-689626448,689626448,
AkioNak,2020-09-09 15:59:36,Revered to same as 1728059 .,https://github.com/bitcoin/bitcoin/pull/19919#issuecomment-689657483,689657483,
ryanofsky,2020-09-08 18:06:45,"In commit ""bugfix: make LoadWallet assigns status always"" (f32ddd81267cfca9f3c07006cef7c80f79a48527)\n\nCan `FAILED` be renamed to `FAILED_LOAD` and moved immediately after `FAILED_CREATE` above? `FAILED_LOAD` and `FAILED_CREATE` would be the most generic failures, but it'd be good to distinguish between loading an existing wallet and creating a new one.",https://github.com/bitcoin/bitcoin/pull/19919#discussion_r485104140,485104140,src/wallet/db.h
ryanofsky,2020-09-08 18:09:19,"In commit ""bugfix: make LoadWallet assigns status always"" (f32ddd81267cfca9f3c07006cef7c80f79a48527)\n\nBetter to use `DatabaseStatus::FAILED_LOAD` here because the error happens when loading an existing wallet not creating a new one. (`CWallet::Create` name refers to creating a `CWallet` object not creating a new database).",https://github.com/bitcoin/bitcoin/pull/19919#discussion_r485105478,485105478,src/wallet/wallet.cpp
ryanofsky,2020-09-08 18:11:30,"In commit ""bugfix: make LoadWallet assigns status always"" (f32ddd81267cfca9f3c07006cef7c80f79a48527)\n\nWould be good to use `DatabaseStatus::FAILED_LOAD` here too",https://github.com/bitcoin/bitcoin/pull/19919#discussion_r485106695,485106695,src/wallet/wallet.cpp
ryanofsky,2020-09-08 18:11:38,"In commit ""bugfix: make LoadWallet assigns status always"" (f32ddd81267cfca9f3c07006cef7c80f79a48527)\n\nWould be good to use `DatabaseStatus::FAILED_LOAD` here too",https://github.com/bitcoin/bitcoin/pull/19919#discussion_r485106762,485106762,src/wallet/wallet.cpp
