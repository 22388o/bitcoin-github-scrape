sipa,2013-02-14T21:37:52Z,(added an own pull so I can try fixing the pulltester build issue)\n,https://github.com/bitcoin/bitcoin/pull/2310#issuecomment-13580101,13580101,
BitcoinPullTester,2013-02-14T22:00:40Z,"Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/69be30d7e64eba0c936d9221b73b2bc35bebc7e2 for binaries and test log.\n",https://github.com/bitcoin/bitcoin/pull/2310#issuecomment-13581187,13581187,
qubez,2013-02-15T10:14:22Z,"Interesting, I had a idea about five days ago of how to improve estimation (which can be network-bound or cpu-bound):\n\n-Include with each checkpoint the size of the blockchain at that checkpoint (which will loosely correspond with CPU work as well as download bandwidth)\n-Include with the last checkpoint a multiplier to estimate additional CPU expense per block to do full verification after last",https://github.com/bitcoin/bitcoin/pull/2310#issuecomment-13600250,13600250,
gavinandresen,2013-02-15T16:41:33Z,"nit: compiling with clang 3.3 on my Mac:\n  src/qt/bitcoingui.cpp:534:9: warning: unused variable 'totalSecs' [-Wunused-variable]\n    int totalSecs = genesisBlockDate.secsTo(currentDate);\n\nAnd running against a pre-0.8 datadirectory gets a crash, passing a NULL *pblockindex to GuessVerificationProgress from BitcoinGUI::setNumBlocks\n",https://github.com/bitcoin/bitcoin/pull/2310#issuecomment-13615350,13615350,
sipa,2013-02-15T16:54:23Z,updated\n,https://github.com/bitcoin/bitcoin/pull/2310#issuecomment-13616045,13616045,
schildbach,2013-02-15T20:41:52Z,"Some feedback:\n\nThere is a space (or LF) missing before ""Transactions after this will not yet be visible.""\n\nI'd prefer proper plurals. Using workarounds like ""day(s)"" are looking unprofessional. Easy fix: Drop to the next lower unit just before the switch from 2 to 1 would occur.\n",https://github.com/bitcoin/bitcoin/pull/2310#issuecomment-13626942,13626942,
qubez,2013-02-15T20:46:42Z,"I ran the win32 pull-tester build without issue, but was taken aback by the new message. ""six hours behind"" looks like it's going to take six hours to do something.\n\nI don't know if this is the way forward as this communicates even less information. I would rather have an estimate of how long it's going to run before it's caught up. This would be more useful information to end users, they want t",https://github.com/bitcoin/bitcoin/pull/2310#issuecomment-13627168,13627168,
luke-jr,2013-02-15T20:47:32Z,"@schildbach Qt will automatically change ""day(s)"" to ""day"" or ""days"" as appropriate.\n",https://github.com/bitcoin/bitcoin/pull/2310#issuecomment-13627204,13627204,
schildbach,2013-02-15T20:59:38Z,"@luke-jr Hu? I'm almost sure I saw ""day(s)"" in the actual running software. I'm running Ubuntu Linux 12.10 in case this matters.\n",https://github.com/bitcoin/bitcoin/pull/2310#issuecomment-13627729,13627729,
laanwj,2013-02-15T21:42:52Z,"This isn't based on the last version of my commits. I fixed the totalSecs already, along with some other changes such as the LF before the transaction message.\n\n@schildbach: in Qt that is avoided by adding the correct plurals in the english translation file, no need to hack around in the source code.\n\n@qubez if you know better just submit a pull request to improve it, I'm pretty darn sick of a",https://github.com/bitcoin/bitcoin/pull/2310#issuecomment-13629695,13629695,
sipa,2013-02-15T23:04:26Z,"@laanwj In that case, pull my commits into your pullreq and I'll close this?\n",https://github.com/bitcoin/bitcoin/pull/2310#issuecomment-13632926,13632926,
laanwj,2013-02-16T07:54:28Z,Yep good idea\n,https://github.com/bitcoin/bitcoin/pull/2310#issuecomment-13646360,13646360,
schildbach,2013-02-16T10:40:06Z,"I just retested this on latest sipa/progressbar and I am definately seeing the ""(s)"" in day(s) and hour(s). I'm trying to do a screenshot.\n",https://github.com/bitcoin/bitcoin/pull/2310#issuecomment-13647874,13647874,
schildbach,2013-02-16T10:45:02Z,![Screenshot from 2013-02-16 11:40:50](https://f.cloud.github.com/assets/743306/163359/e6f4230c-7825-11e2-91ce-af9ff8b2b183.png)\n,https://github.com/bitcoin/bitcoin/pull/2310#issuecomment-13647915,13647915,
sipa,2013-02-16T13:53:51Z,"@laanwj Updated to your latest pull's code (I think...)\n\n@qubez If you're keen on making graphs, can you compare with the method implemented in this pullreq? It's fairly similar to what you propose, except it uses transactions and not blockchain size, as transactions are already computed (so don't require extra checkpoints data)... Or, as said, feel free to write a patch yourself.\n\n@laanwj @sc",https://github.com/bitcoin/bitcoin/pull/2310#issuecomment-13650028,13650028,
Diapolo,2013-02-16T14:37:00Z,"@schildbach As long as the english translation master file is not updated in the correct way, you will see this generic string. Most of the time I update these file or laanwy does. This is a non-issue, really :).\n",https://github.com/bitcoin/bitcoin/pull/2310#issuecomment-13650757,13650757,
laanwj,2013-02-16T15:35:11Z,"@sipa yes this is the last version, and indeed the translations still have to be updated\n",https://github.com/bitcoin/bitcoin/pull/2310#issuecomment-13653022,13653022,
schildbach,2013-02-17T01:09:30Z,"There is more. Sometimes it says phrases like ""and 0 day(s)"". Will the whole phrase also automagically get cut by the translations?\n",https://github.com/bitcoin/bitcoin/pull/2310#issuecomment-13678644,13678644,
laanwj,2013-02-17T07:55:42Z,"I'm pretty sure you cannot get 0 day(s) as under 2 days it shows hours, but it's possible to get 0 hour(s) if secs < 90_60 *but_ count < nTotalBlocks. I suppose something less than an hour could be displayed as an hour.\n",https://github.com/bitcoin/bitcoin/pull/2310#issuecomment-13682372,13682372,
schildbach,2013-02-17T09:30:17Z,"@laanwj emphasis on the ""and"". Probably it was ""and 0 hours"", I just wanted to describe the scheme. Could in future as well happen with ""and 0 years"" if you decide to add centuries.\n",https://github.com/bitcoin/bitcoin/pull/2310#issuecomment-13683237,13683237,
laanwj,2013-02-17T09:36:41Z,"Fyi the ""and"" has been gone for a while.\n",https://github.com/bitcoin/bitcoin/pull/2310#issuecomment-13683294,13683294,
schildbach,2013-02-17T11:43:31Z,"@laanwj Ok thanks for fixing.\n\nWith the current version, there is another problem: The progress bar does not appear to progress well. It started with about 100 week(s) behind, and the bar was nearly empty. Now I'm at 29 week(s) behind, and the bar is filled by perhaps 15%. I'd expect to be filled either at about 70% or at about 85%, depending on if the progress is relative to genesis or to app s",https://github.com/bitcoin/bitcoin/pull/2310#issuecomment-13684671,13684671,
laanwj,2013-02-17T12:05:12Z,"The progress bar _was_ relative to app start a few versions ago, and that confused people, as they thought the download restarted every time.\n\nThe code in this pull request displays the absolute progress, in verification cycles computed from the number of transactions, from the genesis block to now. This is as precise as it gets: if it is 50% full then this means there is 50% download/verificati",https://github.com/bitcoin/bitcoin/pull/2310#issuecomment-13684889,13684889,
schildbach,2013-02-17T14:31:11Z,"@laanwj Please read my report. My arguement is that about 15% fits neither calculation. Genesis was 210 weeks ago, in my test case I had 29 weeks to go. In terms of time, I had 86% done, yet it showed only about 15%. In terms of transaction I cannot say, but if you look at\nhttps://blockchain.info/charts/n-transactions\nits pretty clear visually that the integral before ""29 weeks ago"" is more than",https://github.com/bitcoin/bitcoin/pull/2310#issuecomment-13686666,13686666,
sipa,2013-02-17T14:37:08Z,"@schildbach That is because signature verification is only enabled after the last checkpoint, so transaction after that  are given much higher weight in the calculation (15 times more). Feel free to suggest a better factor (or heuristic for determining it), but for a test I did, this resulted in a very accurate measurement of processing time.\n",https://github.com/bitcoin/bitcoin/pull/2310#issuecomment-13686761,13686761,
qubez,2013-02-17T19:18:24Z,"Signature verification gets ""turned on"" only for the last 5000 blocks - the problem @schildbach is describing is that most of the download time is downloading blocks 0-216116, the progress of which is figured as 50% by 108058, but the actual percentage of blockchain size/transactions downloaded and processed by then is only about 2% - (see area under curve in my graphic above).\n\nThat's the probl",https://github.com/bitcoin/bitcoin/pull/2310#issuecomment-13691552,13691552,
sipa,2013-02-17T20:41:38Z,"@qubez Using block chain size or transaction count shouldn't matter much - they are very correlated.\n\nWhat this pull does is change the progressbar to reflect ""verification time progress"". Effectively, it counts/estimates transactions, weighing those after the last checkpoint higher, as those require higher much more CPU.\n\nThe factor used to scale post-checkpoint transactions should reflect th",https://github.com/bitcoin/bitcoin/pull/2310#issuecomment-13694929,13694929,
qubez,2013-02-17T21:29:18Z,"I have no problem believing that sipafactor(tm) is correct for your system and for a reindex or import of blocks already downloaded. However:\n\n1:\na. verification up to last checkpoint is not well multithreaded, vs\nb. signature verification is well multithreaded\n\nresult: end user reindex on 1 core vs 16 core will have a very different ""time factor"" correction.\n\nand\n\n2: end user initial bl",https://github.com/bitcoin/bitcoin/pull/2310#issuecomment-13697114,13697114,
sipa,2013-02-17T22:16:57Z,"@qubez I think you misunderstand this patch, given the graph above. I do not have a constant time per block (with a different speed before/after the checkpoint) - it's a constant time per _transaction_ (with a different speed before/after the checkpoint), and transactions have a pretty constant size on average, so it's proportional to the size in bytes of the chain.\n\nAlso, I do not claim the cur",https://github.com/bitcoin/bitcoin/pull/2310#issuecomment-13698102,13698102,
gmaxwell,2013-02-17T22:25:18Z,@qubez Please don't post graphs which are pure conjecture. If you're going to go through the trouble of making a graph please make it on an actual measurement. What you're proposing is actually just a less accurate version of what Sipa already implemented his change uses the transaction count which is very closely related to size and more strongly correlated with the work than size is).\n,https://github.com/bitcoin/bitcoin/pull/2310#issuecomment-13698250,13698250,
BitcoinPullTester,2013-02-18T00:34:55Z,"Automatic sanity-testing: WARNING, see http://jenkins.bluematt.me/pull-tester/9f2467ad6241ce6cf0897ed30c676598d59441a7 for binaries and test log.\n\nThis pull decreases total test coverage, please add unit tests to test all new code and help us add test cases for existing code.\nCoverage report can be found at http://jenkins.bluematt.me/pull-tester/9f2467ad6241ce6cf0897ed30c676598d59441a7/bitcoin/",https://github.com/bitcoin/bitcoin/pull/2310#issuecomment-13701235,13701235,
