gavinandresen,2012-04-02T18:35:49Z,"Please don't open pull requests until you think your code is 100% perfect and tested and ready to go.\n\nBefore then, you can ask people to look at your code or help out using your github repository.\n",https://github.com/bitcoin/bitcoin/pull/1023#issuecomment-4885091,4885091,
laanwj,2012-04-07T12:29:52Z,"These might be interesting as an alternative to boost::interprocess (and flakey shared memory queues in general):\n\nhttp://doc.qt.nokia.com/4.7-snapshot/qlocalserver.html\nhttp://doc.qt.nokia.com/4.7-snapshot/qlocalsocket.html\n\nThey provide a named socket (unix socket on unix, pipe on windows) to communicate between processes on the same machine.\n\nAlternatively, boost also supports unix socke",https://github.com/bitcoin/bitcoin/pull/1023#issuecomment-5007888,5007888,
luke-jr,2012-04-10T13:51:44Z,Rebasing required.\n,https://github.com/bitcoin/bitcoin/pull/1023#issuecomment-5046267,5046267,
Diapolo,2012-04-10T21:01:55Z,Rebased and re-worked a little. I need someone to test this ;).\n\nNeeds boost 1.49 with a small edit in boost/interprocess/detail/tmp_dir_helpers.hpp see: https://svn.boost.org/trac/boost/ticket/5392#comment:24\n\nThere is currently no need for any hard monkey-patches like #986.\n,https://github.com/bitcoin/bitcoin/pull/1023#issuecomment-5056175,5056175,
gavinandresen,2012-04-11T01:22:22Z,"NACK-- not worth requiring boost 1.49 for this, and ""a small edit in boost"" scares the pants off me.\n",https://github.com/bitcoin/bitcoin/pull/1023#issuecomment-5060351,5060351,
Diapolo,2012-04-11T06:23:45Z,"The small edit is uncommenting 3 lines of code that are already IN the tmp_dir_helpers.hpp ... I really would like to know what your problem with a boost update is? If you could explain it a little it makes it easier for me to understand, thanks.\n",https://github.com/bitcoin/bitcoin/pull/1023#issuecomment-5062872,5062872,
laanwj,2012-04-11T07:13:38Z,"With the amount of trouble it has given us, I think we can safely conclude that boost::interprocess is not ready for production use yet until upstream gets their act together. Also it seems aimed at much more complex use-cases such as sharing memory and objects instead of signaling simple lines of text between processes. \n\nWhen I have some time I'll try coming up with a QLocalServer/QLocalSocket",https://github.com/bitcoin/bitcoin/pull/1023#issuecomment-5063407,5063407,
gavinandresen,2012-04-11T17:32:36Z,"RE: what's the trouble with requiring everybody upgrade to boost 1.49:  boost is probably the hardest of our dependencies to get compiled and working, and somebody running an older version of Linux or OSX that spent a day getting boost 1.46 compiled and working properly to compile bitcoind isn't going to be happy if we tell them ""you need 1.49 now, because we need that version to fix a bug in URI ",https://github.com/bitcoin/bitcoin/pull/1023#issuecomment-5074216,5074216,
laanwj,2012-04-11T17:45:34Z,"Gavin: I don't completely follow this reasoning. URL handling (and _any_ usage of boost::interprocess) is limited to bitcoin-qt, if we required boost 1.49 for bitcoin-qt for Windows doesn't mean everyone has to upgrade. The rest of the code can remain backwards compatible. Also, even for bitcoin-qt, the older boost::interprocess works fine in Linux.\n",https://github.com/bitcoin/bitcoin/pull/1023#issuecomment-5074502,5074502,
Diapolo,2012-04-11T21:28:01Z,"It's to easy to say Linux / OSX users may not care about Bitcoin-Qt at all and certainly don't care about Windows. How many Windows users download the client and how many use the GUI version contra how many Linux users are out there? For example I never used bitcoind as Windows users like GUIs and that's a fact :). I could say I don't care about Linux users that want to compile bitcoind, but I don",https://github.com/bitcoin/bitcoin/pull/1023#issuecomment-5079425,5079425,
luke-jr,2012-05-27T14:05:39Z,wtf is with 1e39376? you just committed conflicts!\n,https://github.com/bitcoin/bitcoin/pull/1023#issuecomment-5953721,5953721,
Diapolo,2012-05-27T14:27:31Z,"Dunno how that happened, I normally don't include rebase-conflicts ;), should work again. Sorry @luke-jr!\n",https://github.com/bitcoin/bitcoin/pull/1023#issuecomment-5953846,5953846,
Diapolo,2012-06-10T15:59:13Z,"Updated to reflect the last suggestions from the discussion, all commits will be merged after this get's final (if it get's final ^^), so I used NO speaking commit message!\n",https://github.com/bitcoin/bitcoin/pull/1023#issuecomment-6229399,6229399,
Diapolo,2012-07-06T10:15:50Z,I will cherry-pick some of the changes and open a new pull.\n,https://github.com/bitcoin/bitcoin/pull/1023#issuecomment-6801656,6801656,
Diapolo,2012-04-01T12:45:56Z,Is there a possibility to display a message box before the GUI is initialized?\n,https://github.com/bitcoin/bitcoin/pull/1023#discussion_r630690,630690,src/qt/bitcoin.cpp
laanwj,2012-04-02T07:15:20Z,"- Before the bitcoin GUI is initialized, in GUI code, in the main thread: yes you can use the QMessageBox::critical static function\n- Before Qt and translation services are initialized: no\n\nIn this place here you can't.\n",https://github.com/bitcoin/bitcoin/pull/1023#discussion_r631705,631705,src/qt/bitcoin.cpp
TheBlueMatt,2012-06-10T12:53:46Z,"This is redundant, boost already deals with this for us, see message_queue.hpp:501 (in 1.49)\n""//Check if buffer is smaller than maximum allowed""\n",https://github.com/bitcoin/bitcoin/pull/1023#discussion_r956884,956884,src/qt/bitcoin.cpp
TheBlueMatt,2012-06-10T12:54:43Z,"Is there a reason to use a std:;string instead of a const char*, seems like std::string needlessly copies the data to yet another buffer? (and then copies it back in 2 lines where you call c_str()\n",https://github.com/bitcoin/bitcoin/pull/1023#discussion_r956885,956885,src/qt/bitcoin.cpp
TheBlueMatt,2012-06-10T12:58:26Z,Why convert to try_receive instead of timed_receive? With timed_receive we can handle URIs instantly without any messy Sleeps and without eating CPU?\n,https://github.com/bitcoin/bitcoin/pull/1023#discussion_r956886,956886,src/qt/qtipcserver.cpp
TheBlueMatt,2012-06-10T12:59:11Z,"Is there a reason for this? I see it only set but never read, which seems pointless?\n",https://github.com/bitcoin/bitcoin/pull/1023#discussion_r956889,956889,src/qt/qtipcserver.cpp
TheBlueMatt,2012-06-10T13:00:05Z,Is there a reason this is no longer needed?\n,https://github.com/bitcoin/bitcoin/pull/1023#discussion_r956890,956890,src/qt/qtipcserver.cpp
TheBlueMatt,2012-06-10T13:02:19Z,"Im assuming it does, but this does call message_queue::remove, correct?\n",https://github.com/bitcoin/bitcoin/pull/1023#discussion_r956891,956891,src/qt/qtipcserver.cpp
TheBlueMatt,2012-06-10T13:02:52Z,"ACK, we really should do this.\n",https://github.com/bitcoin/bitcoin/pull/1023#discussion_r956892,956892,src/qt/qtipcserver.cpp
laanwj,2012-06-10T14:35:34Z,"I think it's more consistent to use C++ string handling everywhere instead of strlen() and friends (performance is not an argument here). In most implementations, c_str doesn't perform a copy, but it simply returns a pointer to the internal buffer. Though it'd be better to use .data() if you don't rely on it being zero-terminated like in this case.\n",https://github.com/bitcoin/bitcoin/pull/1023#discussion_r956968,956968,src/qt/bitcoin.cpp
laanwj,2012-06-10T14:36:54Z,"I do wonder why strlen is still used in the line above this, though. I guess the consistency argument doesn't hold either :-)\n",https://github.com/bitcoin/bitcoin/pull/1023#discussion_r956969,956969,src/qt/bitcoin.cpp
Diapolo,2012-06-10T15:13:50Z,"ACK, this gets removed!\n",https://github.com/bitcoin/bitcoin/pull/1023#discussion_r957007,957007,src/qt/bitcoin.cpp
Diapolo,2012-06-10T15:16:13Z,As above line will get the strlen removed your argument counts :). My intention was to avoid pure char \* usage as much as possible and use std::string for this.\n,https://github.com/bitcoin/bitcoin/pull/1023#discussion_r957011,957011,src/qt/bitcoin.cpp
Diapolo,2012-06-10T15:20:32Z,"@laanwj You suggested to use .data() instead of .c_str() for this here, but I'm not sure, why we don't need it to it be zero-terminated, can you explain please :).\n",https://github.com/bitcoin/bitcoin/pull/1023#discussion_r957017,957017,src/qt/bitcoin.cpp
Diapolo,2012-06-10T15:21:46Z,"@TheBlueMatt `globalIpcState` is used here, to avoid errors, if ipcInit fails for some reason.\n",https://github.com/bitcoin/bitcoin/pull/1023#discussion_r957019,957019,src/qt/bitcoin.cpp
Diapolo,2012-06-10T15:23:04Z,"To be honest, I really don't recall, why I changed this ... it's no problem to revert to a timed_receive() :D.\n",https://github.com/bitcoin/bitcoin/pull/1023#discussion_r957023,957023,src/qt/qtipcserver.cpp
Diapolo,2012-06-10T15:25:28Z,"It does NOT call remove(), which is one of the bigger changes in this pull. We leave the mq where it is and try to re-use it.\n",https://github.com/bitcoin/bitcoin/pull/1023#discussion_r957027,957027,src/qt/qtipcserver.cpp
Diapolo,2012-06-10T15:26:57Z,"Quite a few devs were telling me it needs to be possible to use multiple instances in parallel AND as I wrote above this pulls doesn't remove a message_queue, so this was removed intentionally.\n",https://github.com/bitcoin/bitcoin/pull/1023#discussion_r957029,957029,src/qt/qtipcserver.cpp
TheBlueMatt,2012-06-10T16:55:17Z,"These few lines dont make it impossible to use multiple instances in parallel, in fact they make it more sane.  Without these lines, multiple instances get URIs distributed between them, which is...non-intuitive IMHO.  With these lines they simply all go to the most recent running version.\n",https://github.com/bitcoin/bitcoin/pull/1023#discussion_r957128,957128,src/qt/qtipcserver.cpp
TheBlueMatt,2012-06-10T16:58:02Z,"If we leave it, does Bitcoin-Qt open properly?\nWould it not try to send to the mq, send properly, and then exit (when opening with a URI after previously closing)?\nMaking anyone open Bitcoin-Qt several times until the mq fills up?\n",https://github.com/bitcoin/bitcoin/pull/1023#discussion_r957134,957134,src/qt/qtipcserver.cpp
TheBlueMatt,2012-06-10T17:02:56Z,"Ah, well then would it not be cleaner to return a value from ipcInit instead of adding a global state variable?\n",https://github.com/bitcoin/bitcoin/pull/1023#discussion_r957141,957141,src/qt/bitcoin.cpp
