[
  {
    "sha": "735610940c0cac72343ca247eb3062b2e09512a0",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo3MzU2MTA5NDBjMGNhYzcyMzQzY2EyNDdlYjMwNjJiMmUwOTUxMmEw",
    "commit": {
      "author": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2021-03-10T03:42:34Z"
      },
      "committer": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2021-03-31T09:05:52Z"
      },
      "message": "build: set --build when configuring packages in depends\n\nAfter reading\nhttps://www.gnu.org/savannah-checkouts/gnu/autoconf/manual/autoconf-2.70/autoconf.html#Specifying-Target-Triplets,\nmy understanding is that this change should mostly be a no-op, as\n--build defaults to the output of config.guess, however, this may be\nslightly more correct\n>  For historical reasons, whenever you specify --host, be sure to\n> specify --build too; this will be fixed in the future.\n\nand will quell some warnings in depends (#16354). If anything, this\nalso explicitly enables cross-compilation mode when `--host` differs\nfrom `--build`.\n\nAs for \"fixed in the future\", this is the case for Autoconf 2.70+.",
      "tree": {
        "sha": "b3e1e25af199d5cf4eee0f9f610188d79ea14ff8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b3e1e25af199d5cf4eee0f9f610188d79ea14ff8"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/735610940c0cac72343ca247eb3062b2e09512a0",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEz7FuIclQ9n+pXlWPLuufXMCVJsEFAmBkO5cACgkQLuufXMCV\nJsF5Ag//Tsq3MPq86VNksSqSGp6znL7o74MJuAG+m1seYidMeKovsbOWatkhoSAc\nWifgLY2A7WkDD4NHA1WwIjUK+l8mxwQjDxxnW1WQLPNtr/0fr1CQfnPi82ZYhqxn\nlcgIqAY9FOgymTwAqpIZ50xwssAigw7sLXfDsfQqzDePjoJ0u3o3oNJeSbviEfSi\nhzXbcMyYGVrOfiJBfKbM/u689xCaIjuIHrlUI01nSxEBITPtQ9eksL2RdSgIxTrF\nR1yicMrJnuHYVWtErvsKlUBQdFRK8w490Til1tvj7mA8+MefgJf04yPVn0GgUX47\nLpbIl6sZD1qiFJKfT18q7liyT5c5Sa09MK6jQlss885H4vQs5Eu9TPyHFg0Lysrd\nB+BI4K9ahBm5dQiRtW+L5HbfaiewpzaFkyfGjEPqWQgQvKDacZgR3tGBvz9ez9WE\nLdJyX/CmyPpRsruvvfCBjscAf7tDUtQQ+RyRd4lIa63n0Lu/okvkOyKwWjd7pc3k\nZiAhszEw7BYJpZlE1DgYEIM49LKfGakO9iGrhWilP2JutS/qdKinAtLB3lWLRr3w\nkh6HlDT6vLUUCuKz1LSdQmsqc/zRkfoFaoPO/Y/s7mJ7F3PHp5+GXTOBF4h5UyiQ\ngk6Sm/HTvhsKpQuJ6XMZOjJpy8ZNftcl76Xj8tNj43G2xf/hYRI=\n=/hNg\n-----END PGP SIGNATURE-----",
        "payload": "tree b3e1e25af199d5cf4eee0f9f610188d79ea14ff8\nparent b14462083f82aeaa9a376978f210db5538db296f\nauthor fanquake <fanquake@gmail.com> 1615347754 +0800\ncommitter fanquake <fanquake@gmail.com> 1617181552 +0800\n\nbuild: set --build when configuring packages in depends\n\nAfter reading\nhttps://www.gnu.org/savannah-checkouts/gnu/autoconf/manual/autoconf-2.70/autoconf.html#Specifying-Target-Triplets,\nmy understanding is that this change should mostly be a no-op, as\n--build defaults to the output of config.guess, however, this may be\nslightly more correct\n>  For historical reasons, whenever you specify --host, be sure to\n> specify --build too; this will be fixed in the future.\n\nand will quell some warnings in depends (#16354). If anything, this\nalso explicitly enables cross-compilation mode when `--host` differs\nfrom `--build`.\n\nAs for \"fixed in the future\", this is the case for Autoconf 2.70+.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/735610940c0cac72343ca247eb3062b2e09512a0",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/735610940c0cac72343ca247eb3062b2e09512a0",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/735610940c0cac72343ca247eb3062b2e09512a0/comments",
    "author": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "b14462083f82aeaa9a376978f210db5538db296f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b14462083f82aeaa9a376978f210db5538db296f",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/b14462083f82aeaa9a376978f210db5538db296f"
      }
    ],
    "stats": {
      "total": 8,
      "additions": 7,
      "deletions": 1
    },
    "files": [
      {
        "sha": "6e1a922f89067a414b858b2771496dc854d3acf3",
        "filename": "depends/funcs.mk",
        "status": "modified",
        "additions": 7,
        "deletions": 1,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/735610940c0cac72343ca247eb3062b2e09512a0/depends/funcs.mk",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/735610940c0cac72343ca247eb3062b2e09512a0/depends/funcs.mk",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/funcs.mk?ref=735610940c0cac72343ca247eb3062b2e09512a0",
        "patch": "@@ -140,7 +140,13 @@ $(1)_config_env+=CMAKE_MODULE_PATH=$($($(1)_type)_prefix)/lib/cmake\n $(1)_config_env+=PATH=$(build_prefix)/bin:$(PATH)\n $(1)_build_env+=PATH=$(build_prefix)/bin:$(PATH)\n $(1)_stage_env+=PATH=$(build_prefix)/bin:$(PATH)\n-$(1)_autoconf=./configure --host=$($($(1)_type)_host) --prefix=$($($(1)_type)_prefix) $$($(1)_config_opts) CC=\"$$($(1)_cc)\" CXX=\"$$($(1)_cxx)\"\n+\n+# Setting a --build type that differs from --host will explicitly enable\n+# cross-compilation mode. Note that --build defaults to the output of\n+# config.guess, which is what we set it too here. This also quells autoconf\n+# warnings, \"If you wanted to set the --build type, don't use --host.\",\n+# when using versions older than 2.70.\n+$(1)_autoconf=./configure --build=$(BUILD) --host=$($($(1)_type)_host) --prefix=$($($(1)_type)_prefix) $$($(1)_config_opts) CC=\"$$($(1)_cc)\" CXX=\"$$($(1)_cxx)\"\n ifneq ($($(1)_nm),)\n $(1)_autoconf += NM=\"$$($(1)_nm)\"\n endif"
      }
    ]
  }
]