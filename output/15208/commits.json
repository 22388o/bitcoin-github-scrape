[
  {
    "sha": "516437a1b70b6df87faadfd38c3d84e6dfb5eae8",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo1MTY0MzdhMWI3MGI2ZGY4N2ZhYWRmZDM4YzNkODRlNmRmYjVlYWU4",
    "commit": {
      "author": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2019-01-19T07:47:01Z"
      },
      "committer": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2019-01-22T08:42:51Z"
      },
      "message": "Qt: remove macOS launch-at-startup option when compiled with > macOS 10.11",
      "tree": {
        "sha": "ef919b8b9bdd1115046e2dfd0c10a0abb91302cc",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ef919b8b9bdd1115046e2dfd0c10a0abb91302cc"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/516437a1b70b6df87faadfd38c3d84e6dfb5eae8",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEyhopCNzi8TB0xizeHrd2uwPHki0FAlxG140ACgkQHrd2uwPH\nki2JDw//ejxyEeG7ZHzXXQGY6ghq3CENCZJ2D1k2rXm6EBmX62vCSI8ntS6FwxPA\nbB4QLH7cF0hl4TDLMmaX2s2ClRjNz4vaTdffZc1at72SCI7Z1HQKRQTXswTZZxMg\nVAwZqOOLJ8KW87RAQEvH5+B6uJjRnSEAyXswkMX8UOlYDdAZv/Zq1KlJ1zDAtwnw\nvoOz0DR1o9JSKAnReqjTMGN3k4jYSaVwEqoDw1zWelYBKSv7mk39R0pWw/HsKahi\n4XNksUXBxugqbJztemioSFyFibm6qCioweoLAIE6H6YIcD4CmdT1TURhYv9UJpA+\nxjgYAZ49YTRExBu79vTgB/1vsSR4qi8DZ+jqgXYphe4RjIixdo+OYq2wKjNXmYcw\nDkxDFeeC0HWucIV5MtxQza6auJag/Epm3MyY2fHLr8uOsG3WrGCbSqlxnIXjXb1Y\n5HgcLk8YedH+dE80EbIrH8sBs7mzWNr1rsrkdr/f0NtEEq8n5GZ6pqWFZfu6YD2M\nllSwxqp4fYUfZ5ZCm+sDOLDmb+MUjUw/GHr9eUBReN+BcLmslbZ80GYa9ezKPQiL\nhx4i+pS1wTAA1htKDuW9ViVYRXIQCjz25ckYI2J67zki+nEsFAXyV5qoQ95DeAnn\nUnnDN6vG+BfLmfCC9tWLF0Cp6ngJVagupZYGR0Dnd9kyCdARNjs=\n=laHB\n-----END PGP SIGNATURE-----",
        "payload": "tree ef919b8b9bdd1115046e2dfd0c10a0abb91302cc\nparent 63144335becb705a233b32fb8d63f37b7d62071a\nauthor Jonas Schnelli <dev@jonasschnelli.ch> 1547884021 -1000\ncommitter Jonas Schnelli <dev@jonasschnelli.ch> 1548146571 -1000\n\nQt: remove macOS launch-at-startup option when compiled with > macOS 10.11\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/516437a1b70b6df87faadfd38c3d84e6dfb5eae8",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/516437a1b70b6df87faadfd38c3d84e6dfb5eae8",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/516437a1b70b6df87faadfd38c3d84e6dfb5eae8/comments",
    "author": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "63144335becb705a233b32fb8d63f37b7d62071a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/63144335becb705a233b32fb8d63f37b7d62071a",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/63144335becb705a233b32fb8d63f37b7d62071a"
      }
    ],
    "stats": {
      "total": 14,
      "additions": 13,
      "deletions": 1
    },
    "files": [
      {
        "sha": "c21a153a2507d7d63addfe6b1f78066fd98b8cd5",
        "filename": "doc/release-notes.md",
        "status": "modified",
        "additions": 6,
        "deletions": 0,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/516437a1b70b6df87faadfd38c3d84e6dfb5eae8/doc/release-notes.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/516437a1b70b6df87faadfd38c3d84e6dfb5eae8/doc/release-notes.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/doc/release-notes.md?ref=516437a1b70b6df87faadfd38c3d84e6dfb5eae8",
        "patch": "@@ -262,6 +262,12 @@ Graphical User Interface (GUI)\n   balance shown if the wallet was created using the `createwallet` RPC\n   and the `disable_private_keys` parameter was set to true.\n \n+- The launch-on-startup option is no longer available on macOS if\n+  compiled with macosx min version greater than 10.11 (use\n+  CXXFLAGS=\"-mmacosx-version-min=10.11\"\n+  CFLAGS=\"-mmacosx-version-min=10.11\" for setting the deployment\n+  sdk version)\n+\n Low-level changes\n =================\n "
      },
      {
        "sha": "b61fc25dc7d26f97a4bfcc34a48657753595ab45",
        "filename": "src/qt/guiutil.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/516437a1b70b6df87faadfd38c3d84e6dfb5eae8/src/qt/guiutil.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/516437a1b70b6df87faadfd38c3d84e6dfb5eae8/src/qt/guiutil.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/guiutil.cpp?ref=516437a1b70b6df87faadfd38c3d84e6dfb5eae8",
        "patch": "@@ -683,7 +683,7 @@ bool SetStartOnSystemStartup(bool fAutoStart)\n }\n \n \n-#elif defined(Q_OS_MAC)\n+#elif defined(Q_OS_MAC) && defined(MAC_OS_X_VERSION_MIN_REQUIRED) && MAC_OS_X_VERSION_MIN_REQUIRED <= 101100\n // based on: https://github.com/Mozketo/LaunchAtLoginController/blob/master/LaunchAtLoginController.m\n \n LSSharedFileListItemRef findStartupItemInList(LSSharedFileListRef list, CFURLRef findUrl);"
      },
      {
        "sha": "849bc2e47714a64bc347e5bc0e36f3578f82193c",
        "filename": "src/qt/optionsdialog.cpp",
        "status": "modified",
        "additions": 6,
        "deletions": 0,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/516437a1b70b6df87faadfd38c3d84e6dfb5eae8/src/qt/optionsdialog.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/516437a1b70b6df87faadfd38c3d84e6dfb5eae8/src/qt/optionsdialog.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/optionsdialog.cpp?ref=516437a1b70b6df87faadfd38c3d84e6dfb5eae8",
        "patch": "@@ -74,6 +74,12 @@ OptionsDialog::OptionsDialog(QWidget *parent, bool enableWallet) :\n #ifdef Q_OS_MAC\n     /* remove Window tab on Mac */\n     ui->tabWidget->removeTab(ui->tabWidget->indexOf(ui->tabWindow));\n+#if  defined(MAC_OS_X_VERSION_MIN_REQUIRED) && MAC_OS_X_VERSION_MIN_REQUIRED > 101100\n+    /* hide launch at startup option if compiled against macOS > 10.11 (removed API) */\n+    ui->bitcoinAtStartup->setVisible(false);\n+    ui->verticalLayout_Main->removeWidget(ui->bitcoinAtStartup);\n+    ui->verticalLayout_Main->removeItem(ui->horizontalSpacer_0_Main);\n+#endif\n #endif\n \n     /* remove Wallet tab in case of -disablewallet */"
      }
    ]
  },
  {
    "sha": "da6011826a730837b59aef5664f3feab4787c9bc",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkYTYwMTE4MjZhNzMwODM3YjU5YWVmNTY2NGYzZmVhYjQ3ODdjOWJj",
    "commit": {
      "author": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2019-01-21T06:14:58Z"
      },
      "committer": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2019-01-22T08:43:03Z"
      },
      "message": "Fix macOS launch-at-startup memory issue",
      "tree": {
        "sha": "e8f0dfc758c347c636298ff9239fb47b1ccc3666",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e8f0dfc758c347c636298ff9239fb47b1ccc3666"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/da6011826a730837b59aef5664f3feab4787c9bc",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEyhopCNzi8TB0xizeHrd2uwPHki0FAlxG15cACgkQHrd2uwPH\nki1ukg/8DOVEvDzmIeYMiP32pFBzlVJZDgDA8yNVFAdRfqlDsQGw3qrDUWjb9zJT\nz6iA5gN0ctWuJj4C2rKWh+0aRHb88gDJQ9Wrtg4XWA/zIyOIMk1Cuio4hkIPjAuV\nptGMor305/NtwgyQZ38G0pMf7Rha/6qtL6hHj+n3QfWPc3q1pH3WijTV370Ntg94\nUY0D1Xt07PFP7xOi4zcej3K34wP75Iyx38MNlHU9XVI0obq81YqB6OZExcA5roKF\nki5WmTZc5tPCV0mYjgzvHIl/XeTLIBpcV/l+hw0SrQ+42D/mZZ7y55Pznks2Qquz\ndkHh0T0kYbAIaRPoC2ZYsdZ2+TLX9xvT0zTEXl8IE7I76HiUjI21TrKPUMRW3yQM\nAJlFIknCT9gYjvt5DC497IvTQWbq2MKxOiP75zIYkfRLMkiwUso6bMh+rN920Tq4\nDkZIJ325aktiKL76Y2FR/W4sV9+vCMDAZP3DhasXyhTfl0tzDIEDeP2HpqzdOPur\nzklaUaGqk7RUoksT0eJ5TqV9P5eCoH4OIMoNCejmqN6Z+avByPy4IHTIh8U3ho50\nbCR4AJDsldZERikejP8+G4enJ8oI540LxodTcYq33ADouW0feUBoOdshiYL+c0ts\n76vwSFO7+DMfeKCgc2m7JD/RZI2B3n6tziIloNo2WYjEx2tS1oM=\n=GLQZ\n-----END PGP SIGNATURE-----",
        "payload": "tree e8f0dfc758c347c636298ff9239fb47b1ccc3666\nparent 516437a1b70b6df87faadfd38c3d84e6dfb5eae8\nauthor Jonas Schnelli <dev@jonasschnelli.ch> 1548051298 -1000\ncommitter Jonas Schnelli <dev@jonasschnelli.ch> 1548146583 -1000\n\nFix macOS launch-at-startup memory issue\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/da6011826a730837b59aef5664f3feab4787c9bc",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/da6011826a730837b59aef5664f3feab4787c9bc",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/da6011826a730837b59aef5664f3feab4787c9bc/comments",
    "author": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "516437a1b70b6df87faadfd38c3d84e6dfb5eae8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/516437a1b70b6df87faadfd38c3d84e6dfb5eae8",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/516437a1b70b6df87faadfd38c3d84e6dfb5eae8"
      }
    ],
    "stats": {
      "total": 20,
      "additions": 10,
      "deletions": 10
    },
    "files": [
      {
        "sha": "71e987c8f4b04711ea272f3e0097e91f82db7f6d",
        "filename": "src/qt/guiutil.cpp",
        "status": "modified",
        "additions": 10,
        "deletions": 10,
        "changes": 20,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/da6011826a730837b59aef5664f3feab4787c9bc/src/qt/guiutil.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/da6011826a730837b59aef5664f3feab4787c9bc/src/qt/guiutil.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/guiutil.cpp?ref=da6011826a730837b59aef5664f3feab4787c9bc",
        "patch": "@@ -686,10 +686,8 @@ bool SetStartOnSystemStartup(bool fAutoStart)\n #elif defined(Q_OS_MAC) && defined(MAC_OS_X_VERSION_MIN_REQUIRED) && MAC_OS_X_VERSION_MIN_REQUIRED <= 101100\n // based on: https://github.com/Mozketo/LaunchAtLoginController/blob/master/LaunchAtLoginController.m\n \n-LSSharedFileListItemRef findStartupItemInList(LSSharedFileListRef list, CFURLRef findUrl);\n-LSSharedFileListItemRef findStartupItemInList(LSSharedFileListRef list, CFURLRef findUrl)\n+LSSharedFileListItemRef findStartupItemInList(CFArrayRef listSnapshot, LSSharedFileListRef list, CFURLRef findUrl)\n {\n-    CFArrayRef listSnapshot = LSSharedFileListCopySnapshot(list, nullptr);\n     if (listSnapshot == nullptr) {\n         return nullptr;\n     }\n@@ -714,15 +712,12 @@ LSSharedFileListItemRef findStartupItemInList(LSSharedFileListRef list, CFURLRef\n         if(currentItemURL) {\n             if (CFEqual(currentItemURL, findUrl)) {\n                 // found\n-                CFRelease(listSnapshot);\n                 CFRelease(currentItemURL);\n                 return item;\n             }\n             CFRelease(currentItemURL);\n         }\n     }\n-\n-    CFRelease(listSnapshot);\n     return nullptr;\n }\n \n@@ -734,10 +729,12 @@ bool GetStartOnSystemStartup()\n     }\n \n     LSSharedFileListRef loginItems = LSSharedFileListCreate(nullptr, kLSSharedFileListSessionLoginItems, nullptr);\n-    LSSharedFileListItemRef foundItem = findStartupItemInList(loginItems, bitcoinAppUrl);\n-\n+    CFArrayRef listSnapshot = LSSharedFileListCopySnapshot(loginItems, nullptr);\n+    bool res = (findStartupItemInList(listSnapshot, loginItems, bitcoinAppUrl) != nullptr);\n     CFRelease(bitcoinAppUrl);\n-    return !!foundItem; // return boolified object\n+    CFRelease(loginItems);\n+    CFRelease(listSnapshot);\n+    return res;\n }\n \n bool SetStartOnSystemStartup(bool fAutoStart)\n@@ -748,7 +745,8 @@ bool SetStartOnSystemStartup(bool fAutoStart)\n     }\n \n     LSSharedFileListRef loginItems = LSSharedFileListCreate(nullptr, kLSSharedFileListSessionLoginItems, nullptr);\n-    LSSharedFileListItemRef foundItem = findStartupItemInList(loginItems, bitcoinAppUrl);\n+    CFArrayRef listSnapshot = LSSharedFileListCopySnapshot(loginItems, nullptr);\n+    LSSharedFileListItemRef foundItem = findStartupItemInList(listSnapshot, loginItems, bitcoinAppUrl);\n \n     if(fAutoStart && !foundItem) {\n         // add bitcoin app to startup item list\n@@ -760,6 +758,8 @@ bool SetStartOnSystemStartup(bool fAutoStart)\n     }\n \n     CFRelease(bitcoinAppUrl);\n+    CFRelease(loginItems);\n+    CFRelease(listSnapshot);\n     return true;\n }\n #pragma GCC diagnostic pop"
      }
    ]
  }
]