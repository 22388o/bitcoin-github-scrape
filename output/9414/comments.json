[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/269023650",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9414#issuecomment-269023650",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9414",
    "id": 269023650,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2OTAyMzY1MA==",
    "user": {
      "login": "gmaxwell",
      "id": 858454,
      "node_id": "MDQ6VXNlcjg1ODQ1NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/858454?u=63e5c438c242094837a9deeda775d77988b508bf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gmaxwell",
      "html_url": "https://github.com/gmaxwell",
      "followers_url": "https://api.github.com/users/gmaxwell/followers",
      "following_url": "https://api.github.com/users/gmaxwell/following{/other_user}",
      "gists_url": "https://api.github.com/users/gmaxwell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
      "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
      "repos_url": "https://api.github.com/users/gmaxwell/repos",
      "events_url": "https://api.github.com/users/gmaxwell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-23T17:45:33Z",
    "updated_at": "2016-12-23T17:45:33Z",
    "author_association": "CONTRIBUTOR",
    "body": "&& is shortcutting so this doesn't change it to skip AcceptToMemoryPool.  It does however change it so that it does not run the else clause which is needed for the forced relaying for whitelisted peers (which needs to run already for transactions we already have).\r\n\r\nSo I think the only real behavior change this makes is to break the functionality.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/269023650/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/269069639",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9414#issuecomment-269069639",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9414",
    "id": 269069639,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI2OTA2OTYzOQ==",
    "user": {
      "login": "rebroad",
      "id": 1530283,
      "node_id": "MDQ6VXNlcjE1MzAyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1530283?u=6a4a31aaddbc438e053c52d084a698a5f622f1ea&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rebroad",
      "html_url": "https://github.com/rebroad",
      "followers_url": "https://api.github.com/users/rebroad/followers",
      "following_url": "https://api.github.com/users/rebroad/following{/other_user}",
      "gists_url": "https://api.github.com/users/rebroad/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rebroad/subscriptions",
      "organizations_url": "https://api.github.com/users/rebroad/orgs",
      "repos_url": "https://api.github.com/users/rebroad/repos",
      "events_url": "https://api.github.com/users/rebroad/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rebroad/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-12-24T05:11:40Z",
    "updated_at": "2016-12-24T05:14:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "@gmaxwell Ah, yes, my apologies I has missed the whitelist intention there. It was primarily noticing that `(!tx.HasWitness() && !state.CorruptionPossible())` is bring run against txs we already have in the mempool that made me wonder if there was a logic oversight here, but perhaps the overhead from running this checks again is not significant.\r\n\r\nI am not aware yet of why we would want to relay txs (possibly multiple times) to whitelisted nodes that we already have in our mempool though - is this requirement documented somewhere please?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/269069639/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/93784567",
    "pull_request_review_id": 14320931,
    "id": 93784567,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDkzNzg0NTY3",
    "diff_hunk": "@@ -1682,9 +1685,9 @@ bool static ProcessMessage(CNode* pfrom, string strCommand, CDataStream& vRecv,\n \n             BOOST_FOREACH(uint256 hash, vEraseQueue)\n                 EraseOrphanTx(hash);\n-        }\n+        } // if accepted to memory pool\n         else if (fMissingInputs)",
    "path": "src/net_processing.cpp",
    "position": 18,
    "original_position": 18,
    "commit_id": "715b64abe2d26f8f27e1133348302d2d5d48887a",
    "original_commit_id": "715b64abe2d26f8f27e1133348302d2d5d48887a",
    "user": {
      "login": "rebroad",
      "id": 1530283,
      "node_id": "MDQ6VXNlcjE1MzAyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1530283?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rebroad",
      "html_url": "https://github.com/rebroad",
      "followers_url": "https://api.github.com/users/rebroad/followers",
      "following_url": "https://api.github.com/users/rebroad/following{/other_user}",
      "gists_url": "https://api.github.com/users/rebroad/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rebroad/subscriptions",
      "organizations_url": "https://api.github.com/users/rebroad/orgs",
      "repos_url": "https://api.github.com/users/rebroad/repos",
      "events_url": "https://api.github.com/users/rebroad/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rebroad/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "for fMissingInputs to be true AlreadyHave() had to be false",
    "created_at": "2016-12-23T16:55:36Z",
    "updated_at": "2016-12-23T16:55:36Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9414#discussion_r93784567",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9414",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/93784567"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9414#discussion_r93784567"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9414"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/93784567/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1689,
    "original_line": 1689,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/93784609",
    "pull_request_review_id": 14320979,
    "id": 93784609,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDkzNzg0NjA5",
    "diff_hunk": "@@ -1709,7 +1712,7 @@ bool static ProcessMessage(CNode* pfrom, string strCommand, CDataStream& vRecv,\n             } else {\n                 LogPrint(\"mempool\", \"not keeping orphan with rejected parents %s\\n\",tx.GetHash().ToString());\n             }\n-        } else {\n+        } else { // not accepted and not missing inputs, i.e. invalid",
    "path": "src/net_processing.cpp",
    "position": 29,
    "original_position": 29,
    "commit_id": "715b64abe2d26f8f27e1133348302d2d5d48887a",
    "original_commit_id": "715b64abe2d26f8f27e1133348302d2d5d48887a",
    "user": {
      "login": "rebroad",
      "id": 1530283,
      "node_id": "MDQ6VXNlcjE1MzAyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1530283?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rebroad",
      "html_url": "https://github.com/rebroad",
      "followers_url": "https://api.github.com/users/rebroad/followers",
      "following_url": "https://api.github.com/users/rebroad/following{/other_user}",
      "gists_url": "https://api.github.com/users/rebroad/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rebroad/subscriptions",
      "organizations_url": "https://api.github.com/users/rebroad/orgs",
      "repos_url": "https://api.github.com/users/rebroad/repos",
      "events_url": "https://api.github.com/users/rebroad/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rebroad/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "whereas here AlreadyHave() could have been true still, so for whitelisted nodes, the same tx could be relayed multiple times",
    "created_at": "2016-12-23T16:56:01Z",
    "updated_at": "2016-12-23T16:56:59Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9414#discussion_r93784609",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9414",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/93784609"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9414#discussion_r93784609"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9414"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/93784609/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1715,
    "original_line": 1715,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/93797591",
    "pull_request_review_id": 14334502,
    "id": 93797591,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDkzNzk3NTkx",
    "diff_hunk": "@@ -1709,7 +1712,7 @@ bool static ProcessMessage(CNode* pfrom, string strCommand, CDataStream& vRecv,\n             } else {\n                 LogPrint(\"mempool\", \"not keeping orphan with rejected parents %s\\n\",tx.GetHash().ToString());\n             }\n-        } else {\n+        } else { // not accepted and not missing inputs, i.e. invalid",
    "path": "src/net_processing.cpp",
    "position": 29,
    "original_position": 29,
    "commit_id": "715b64abe2d26f8f27e1133348302d2d5d48887a",
    "original_commit_id": "715b64abe2d26f8f27e1133348302d2d5d48887a",
    "user": {
      "login": "gmaxwell",
      "id": 858454,
      "node_id": "MDQ6VXNlcjg1ODQ1NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/858454?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gmaxwell",
      "html_url": "https://github.com/gmaxwell",
      "followers_url": "https://api.github.com/users/gmaxwell/followers",
      "following_url": "https://api.github.com/users/gmaxwell/following{/other_user}",
      "gists_url": "https://api.github.com/users/gmaxwell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
      "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
      "repos_url": "https://api.github.com/users/gmaxwell/repos",
      "events_url": "https://api.github.com/users/gmaxwell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "That is the intended and advertised purpose of the whitelisting, read the comment in the else block!",
    "created_at": "2016-12-23T19:48:41Z",
    "updated_at": "2016-12-23T19:48:41Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9414#discussion_r93797591",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9414",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/93797591"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9414#discussion_r93797591"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9414"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/93797591/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 1,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1715,
    "original_line": 1715,
    "side": "RIGHT",
    "in_reply_to_id": 93784609
  }
]