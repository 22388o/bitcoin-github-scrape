[
  {
    "sha": "715b64abe2d26f8f27e1133348302d2d5d48887a",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo3MTViNjRhYmUyZDI2ZjhmMjdlMTEzMzM0ODMwMmQyZDVkNDg4ODdh",
    "commit": {
      "author": {
        "name": "R E Broadley",
        "email": "rebroad+github@gmail.com",
        "date": "2016-12-23T08:37:33Z"
      },
      "committer": {
        "name": "R E Broadley",
        "email": "rebroad+github@gmail.com",
        "date": "2016-12-23T16:52:53Z"
      },
      "message": "Skip processing of TXs that we already have.\n\nPreviously TXs were processed more than they needed to be even though we\nalready have them.",
      "tree": {
        "sha": "018caaf0143187fe2639594c4823983970127b6f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/018caaf0143187fe2639594c4823983970127b6f"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/715b64abe2d26f8f27e1133348302d2d5d48887a",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "expired_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1\n\niQIcBAABAgAGBQJYXVZlAAoJEJYWlWnKgEH5zLMP/1+2O0JpAN6YE3ZJHOCogjrK\nnSI69AlnXs3UX/DA9hKGNCBuqmYTGRDV+gn8uO1cE6/GlyRySHzFHLCl8OyFi7rT\naKDBTMHGBbUwueQBpbfgmNbXHFRTJef8yVEl1tKxpqAE/W6CqD+DpeZsIkCdVVhG\nmK9LjlQraygvDvJatkSI8s1xVA9JDHpUBTsHSvg3W4zUOw1Mm7SGrn8N/5DHGt8W\nOoxgKt3Q062JGmeQNJuY3I8ij0P8rLsCSfyY98by3UKf8UKSJHijotX1GLEe77GM\nJCOcUUFVmPYuxiBaq0/7n3jF1ZndhEkThIaymJghLjE2cHwnhHae+TUfK7P5Nbtr\nP8p51YyfEGhTCIuJEOGI+i1wgH48+/m5d7PRukP+OFimlinJye66rmBMNFlrvYIf\npD8DggRKY9WmckgP5elvdSMgnDsw6RN7RSNTeHS/J+IJ6Qcc5tYSQcHd5kVlh+Nc\nWtU3kZRFTxwzHqJ0pLEQpZD69AgPOtR5untvwfqDyn8GHMS9FDPJuLHcb8k7NA1C\nKEScwZWrkzd8iAHnEk7EZbqp3Gyk04RbrJlzUrjIlOXE7XXxCG2Pal7WbtIHF6sz\nAGC/0tviSoigPIk95qXDDDrljmLHzAtZPL/SmLmZuDHV11KBYAC7Udy9nNED1cea\nxTZfhSwou7diq0y9L8Z+\n=Qyd7\n-----END PGP SIGNATURE-----",
        "payload": "tree 018caaf0143187fe2639594c4823983970127b6f\nparent 0f921e6a0492c4e9f037a9ed91f474885032d68c\nauthor R E Broadley <rebroad+github@gmail.com> 1482482253 +0700\ncommitter R E Broadley <rebroad+github@gmail.com> 1482511973 +0700\n\nSkip processing of TXs that we already have.\n\nPreviously TXs were processed more than they needed to be even though we\nalready have them.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/715b64abe2d26f8f27e1133348302d2d5d48887a",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/715b64abe2d26f8f27e1133348302d2d5d48887a",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/715b64abe2d26f8f27e1133348302d2d5d48887a/comments",
    "author": {
      "login": "rebroad",
      "id": 1530283,
      "node_id": "MDQ6VXNlcjE1MzAyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1530283?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rebroad",
      "html_url": "https://github.com/rebroad",
      "followers_url": "https://api.github.com/users/rebroad/followers",
      "following_url": "https://api.github.com/users/rebroad/following{/other_user}",
      "gists_url": "https://api.github.com/users/rebroad/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rebroad/subscriptions",
      "organizations_url": "https://api.github.com/users/rebroad/orgs",
      "repos_url": "https://api.github.com/users/rebroad/repos",
      "events_url": "https://api.github.com/users/rebroad/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rebroad/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "rebroad",
      "id": 1530283,
      "node_id": "MDQ6VXNlcjE1MzAyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1530283?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rebroad",
      "html_url": "https://github.com/rebroad",
      "followers_url": "https://api.github.com/users/rebroad/followers",
      "following_url": "https://api.github.com/users/rebroad/following{/other_user}",
      "gists_url": "https://api.github.com/users/rebroad/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rebroad/subscriptions",
      "organizations_url": "https://api.github.com/users/rebroad/orgs",
      "repos_url": "https://api.github.com/users/rebroad/repos",
      "events_url": "https://api.github.com/users/rebroad/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rebroad/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "0f921e6a0492c4e9f037a9ed91f474885032d68c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0f921e6a0492c4e9f037a9ed91f474885032d68c",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/0f921e6a0492c4e9f037a9ed91f474885032d68c"
      }
    ],
    "stats": {
      "total": 11,
      "additions": 7,
      "deletions": 4
    },
    "files": [
      {
        "sha": "edff0133251b7812375e6d88d3311660a5a757c8",
        "filename": "src/net_processing.cpp",
        "status": "modified",
        "additions": 7,
        "deletions": 4,
        "changes": 11,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/715b64abe2d26f8f27e1133348302d2d5d48887a/src/net_processing.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/715b64abe2d26f8f27e1133348302d2d5d48887a/src/net_processing.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/net_processing.cpp?ref=715b64abe2d26f8f27e1133348302d2d5d48887a",
        "patch": "@@ -1609,7 +1609,10 @@ bool static ProcessMessage(CNode* pfrom, string strCommand, CDataStream& vRecv,\n         pfrom->setAskFor.erase(inv.hash);\n         mapAlreadyAskedFor.erase(inv.hash);\n \n-        if (!AlreadyHave(inv) && AcceptToMemoryPool(mempool, state, tx, true, &fMissingInputs)) {\n+        if (AlreadyHave(inv))\n+            return true;\n+\n+        if (AcceptToMemoryPool(mempool, state, tx, true, &fMissingInputs)) {\n             mempool.check(pcoinsTip);\n             RelayTransaction(tx, connman);\n             for (unsigned int i = 0; i < tx.vout.size(); i++) {\n@@ -1682,9 +1685,9 @@ bool static ProcessMessage(CNode* pfrom, string strCommand, CDataStream& vRecv,\n \n             BOOST_FOREACH(uint256 hash, vEraseQueue)\n                 EraseOrphanTx(hash);\n-        }\n+        } // if accepted to memory pool\n         else if (fMissingInputs)\n-        {\n+        { // not accepted as missing inputs, i.e. an orphan\n             bool fRejectedParents = false; // It may be the case that the orphans parents have all been rejected\n             BOOST_FOREACH(const CTxIn& txin, tx.vin) {\n                 if (recentRejects->contains(txin.prevout.hash)) {\n@@ -1709,7 +1712,7 @@ bool static ProcessMessage(CNode* pfrom, string strCommand, CDataStream& vRecv,\n             } else {\n                 LogPrint(\"mempool\", \"not keeping orphan with rejected parents %s\\n\",tx.GetHash().ToString());\n             }\n-        } else {\n+        } else { // not accepted and not missing inputs, i.e. invalid\n             if (!tx.HasWitness() && !state.CorruptionPossible()) {\n                 // Do not use rejection cache for witness transactions or\n                 // witness-stripped transactions, as they can have been malleated."
      }
    ]
  }
]