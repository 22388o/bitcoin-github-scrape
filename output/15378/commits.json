[
  {
    "sha": "dc3b2ccb5f5dd4331e4f985f2d9ef65f2a8b4c55",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkYzNiMmNjYjVmNWRkNDMzMWU0Zjk4NWYyZDllZjY1ZjJhOGI0YzU1",
    "commit": {
      "author": {
        "name": "Ben Carman",
        "email": "benthecarman@live.com",
        "date": "2019-02-12T00:19:22Z"
      },
      "committer": {
        "name": "Ben Carman",
        "email": "benthecarman@live.com",
        "date": "2019-02-12T00:19:22Z"
      },
      "message": "tests: Added missing tests for RPC wallet errors",
      "tree": {
        "sha": "9202612735d3e53b18c226e3c8a162d20ea29e87",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9202612735d3e53b18c226e3c8a162d20ea29e87"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/dc3b2ccb5f5dd4331e4f985f2d9ef65f2a8b4c55",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEECtg4d8HwzR7pvWYK18x3C4H9IqgFAlxiEQoACgkQ18x3C4H9\nIqhLVwv/WHTZASa+IGp8TbFOJJS8XQSKn/Tkeuhp38yKCfe/n+sTMTF3zN9gSnRR\nxMDXXWrBxPjdIpDLn7tfK5aUiU83hZX1vgc9PY857kDyAuC6k//fNiyk4qhR0UZ4\nKYHQPpQguAsWGMiC7+EHVR0Nvd/1+ta6KXRMN+qizTQ2J3hrRjYCUWhfhkf6us0b\nPGRc0OEOVr77wQbaLK7NIND26ZNQFALhRhZWdF0o2Irpt3/uSls4G5SyfOZK+OEZ\nVyZCVFC8ph9NbhrwtNrJQIf5CXKx2Z/N31QZf/S1DrzRRdRcm/bigAyjKkTq6fT3\n+KfbF42ZfZ+p3JKy4VqkbOSWsmtZ/GO8zSnDiCRyov6XSuIDnEjP9incM7aVSz78\ngG8QdrFlBalVEiOhl0vDJ35iy+zE2jutK4SNacZo+VlLB1xv+daqtYMgiBgzO8kg\n8hCAXrFwWQNYxW27jfH2sHo+GVH9zuspYTsN5fnxLHR39iKm5Stak9NW3FGp6V9s\nrTt7lP/I\n=QRFa\n-----END PGP SIGNATURE-----",
        "payload": "tree 9202612735d3e53b18c226e3c8a162d20ea29e87\nparent 1bc149d05b09d716723d2f091250fab38fd70fc2\nauthor Ben Carman <benthecarman@live.com> 1549930762 -0600\ncommitter Ben Carman <benthecarman@live.com> 1549930762 -0600\n\ntests: Added missing tests for RPC wallet errors\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/dc3b2ccb5f5dd4331e4f985f2d9ef65f2a8b4c55",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/dc3b2ccb5f5dd4331e4f985f2d9ef65f2a8b4c55",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/dc3b2ccb5f5dd4331e4f985f2d9ef65f2a8b4c55/comments",
    "author": {
      "login": "benthecarman",
      "id": 15256660,
      "node_id": "MDQ6VXNlcjE1MjU2NjYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/15256660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/benthecarman",
      "html_url": "https://github.com/benthecarman",
      "followers_url": "https://api.github.com/users/benthecarman/followers",
      "following_url": "https://api.github.com/users/benthecarman/following{/other_user}",
      "gists_url": "https://api.github.com/users/benthecarman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/benthecarman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/benthecarman/subscriptions",
      "organizations_url": "https://api.github.com/users/benthecarman/orgs",
      "repos_url": "https://api.github.com/users/benthecarman/repos",
      "events_url": "https://api.github.com/users/benthecarman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/benthecarman/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "benthecarman",
      "id": 15256660,
      "node_id": "MDQ6VXNlcjE1MjU2NjYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/15256660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/benthecarman",
      "html_url": "https://github.com/benthecarman",
      "followers_url": "https://api.github.com/users/benthecarman/followers",
      "following_url": "https://api.github.com/users/benthecarman/following{/other_user}",
      "gists_url": "https://api.github.com/users/benthecarman/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/benthecarman/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/benthecarman/subscriptions",
      "organizations_url": "https://api.github.com/users/benthecarman/orgs",
      "repos_url": "https://api.github.com/users/benthecarman/repos",
      "events_url": "https://api.github.com/users/benthecarman/events{/privacy}",
      "received_events_url": "https://api.github.com/users/benthecarman/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "1bc149d05b09d716723d2f091250fab38fd70fc2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1bc149d05b09d716723d2f091250fab38fd70fc2",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/1bc149d05b09d716723d2f091250fab38fd70fc2"
      }
    ],
    "stats": {
      "total": 26,
      "additions": 26,
      "deletions": 0
    },
    "files": [
      {
        "sha": "fe1a614700099e6388b26cedc50e2bb55b7c4e11",
        "filename": "test/functional/wallet_basic.py",
        "status": "modified",
        "additions": 26,
        "deletions": 0,
        "changes": 26,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/dc3b2ccb5f5dd4331e4f985f2d9ef65f2a8b4c55/test/functional/wallet_basic.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/dc3b2ccb5f5dd4331e4f985f2d9ef65f2a8b4c55/test/functional/wallet_basic.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/wallet_basic.py?ref=dc3b2ccb5f5dd4331e4f985f2d9ef65f2a8b4c55",
        "patch": "@@ -327,12 +327,38 @@ def run_test(self):\n         tx_obj = self.nodes[0].gettransaction(txid)\n         assert_equal(tx_obj['amount'], Decimal('-0.0001'))\n \n+        # General checks for errors from incorrect inputs\n         # This will raise an exception because the amount type is wrong\n         assert_raises_rpc_error(-3, \"Invalid amount\", self.nodes[0].sendtoaddress, self.nodes[2].getnewaddress(), \"1f-4\")\n \n         # This will raise an exception since generate does not accept a string\n         assert_raises_rpc_error(-1, \"not an integer\", self.nodes[0].generate, \"2\")\n \n+        # This will raise an exception for the invalid private key format\n+        assert_raises_rpc_error(-5, \"Invalid private key encoding\", self.nodes[0].importprivkey, \"invalid\")\n+\n+        # This will raise an exception for importing an address with the PS2H flag\n+        temp_address = self.nodes[1].getnewaddress()\n+        assert_raises_rpc_error(-5, \"Cannot use the p2sh flag with an address - use a script instead\", self.nodes[0].importaddress, temp_address, \"label\", False, True)\n+\n+        # This will raise an exception for attempting to dump the private key of an address you do not own\n+        assert_raises_rpc_error(-3, \"Address does not refer to a key\", self.nodes[0].dumpprivkey, temp_address)\n+\n+        # This will raise an exception for attempting to get the private key of an invalid Bitcoin address\n+        assert_raises_rpc_error(-5, \"Invalid Bitcoin address\", self.nodes[0].dumpprivkey, \"invalid\")\n+\n+        # This will raise an exception for attempting to set a label for an invalid Bitcoin address\n+        assert_raises_rpc_error(-5, \"Invalid Bitcoin address\", self.nodes[0].setlabel, \"invalid address\", \"label\")\n+\n+        # This will raise an exception for importing an invalid address\n+        assert_raises_rpc_error(-5, \"Invalid Bitcoin address or script\", self.nodes[0].importaddress, \"invalid\")\n+\n+        # This will raise an exception for attempting to import a pubkey that isn't in hex\n+        assert_raises_rpc_error(-5, \"Pubkey must be a hex string\", self.nodes[0].importpubkey, \"not hex\")\n+\n+        # This will raise an exception for importing an invalid pubkey\n+        assert_raises_rpc_error(-5, \"Pubkey is not a valid public key\", self.nodes[0].importpubkey, \"5361746f736869204e616b616d6f746f\")\n+\n         # Import address and private key to check correct behavior of spendable unspents\n         # 1. Send some coins to generate new UTXO\n         address_to_import = self.nodes[2].getnewaddress()"
      }
    ]
  }
]