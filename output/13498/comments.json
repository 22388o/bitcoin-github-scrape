[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/399299871",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13498#issuecomment-399299871",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13498",
    "id": 399299871,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5OTI5OTg3MQ==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-22T02:17:11Z",
    "updated_at": "2018-06-22T02:17:11Z",
    "author_association": "MEMBER",
    "body": "Concept ACK",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/399299871/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/399773434",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13498#issuecomment-399773434",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13498",
    "id": 399773434,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5OTc3MzQzNA==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-24T17:35:40Z",
    "updated_at": "2018-06-24T17:35:40Z",
    "author_association": "MEMBER",
    "body": "utACK df10f07db178d84b3def9f0b99d9b7c92e4227a9",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/399773434/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/196531993",
    "pull_request_review_id": 130102993,
    "id": 196531993,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE5NjUzMTk5Mw==",
    "diff_hunk": "@@ -1255,9 +1263,11 @@ static UniValue sendmany(const JSONRPCRequest& request)\n     EnsureWalletIsUnlocked(pwallet);\n \n     // Check funds\n-    CAmount nBalance = pwallet->GetLegacyBalance(ISMINE_SPENDABLE, nMinDepth, &strAccount);\n-    if (totalAmount > nBalance)\n+    if (IsDeprecatedRPCEnabled(\"accounts\") && totalAmount > pwallet->GetLegacyBalance(ISMINE_SPENDABLE, nMinDepth, &strAccount)) {\n         throw JSONRPCError(RPC_WALLET_INSUFFICIENT_FUNDS, \"Account has insufficient funds\");\n+    } else if (!IsDeprecatedRPCEnabled(\"accounts\") && totalAmount > pwallet->GetLegacyBalance(ISMINE_SPENDABLE, nMinDepth, nullptr)) {\n+        throw JSONRPCError(RPC_WALLET_INSUFFICIENT_FUNDS, \"Wallet has insufficient funds\");",
    "path": "src/wallet/rpcwallet.cpp",
    "position": 24,
    "original_position": 24,
    "commit_id": "df10f07db178d84b3def9f0b99d9b7c92e4227a9",
    "original_commit_id": "df10f07db178d84b3def9f0b99d9b7c92e4227a9",
    "user": {
      "login": "TheCharlatan",
      "id": 8421793,
      "node_id": "MDQ6VXNlcjg0MjE3OTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheCharlatan",
      "html_url": "https://github.com/TheCharlatan",
      "followers_url": "https://api.github.com/users/TheCharlatan/followers",
      "following_url": "https://api.github.com/users/TheCharlatan/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
      "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
      "repos_url": "https://api.github.com/users/TheCharlatan/repos",
      "events_url": "https://api.github.com/users/TheCharlatan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Previously `sendmany` mimicked `sendfrom`'s behaviour by allowing the user to select the addresses to be sent from. By making the label allways `nullptr`, there is no more fine grained selection. I propose to keep `GetLegacyBalance(ISMINE_SPENDABLE, nMinDepth, &strAccount);` without checking wether the deprecated flag is active and using the `nullptr` when the label argument passed in is `\\\"\\*\\\"`",
    "created_at": "2018-06-19T18:26:48Z",
    "updated_at": "2018-06-19T18:26:49Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13498#discussion_r196531993",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13498",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/196531993"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13498#discussion_r196531993"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13498"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/196531993/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1269,
    "original_line": 1269,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/196532769",
    "pull_request_review_id": 130103926,
    "id": 196532769,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE5NjUzMjc2OQ==",
    "diff_hunk": "@@ -1255,9 +1263,11 @@ static UniValue sendmany(const JSONRPCRequest& request)\n     EnsureWalletIsUnlocked(pwallet);\n \n     // Check funds\n-    CAmount nBalance = pwallet->GetLegacyBalance(ISMINE_SPENDABLE, nMinDepth, &strAccount);\n-    if (totalAmount > nBalance)\n+    if (IsDeprecatedRPCEnabled(\"accounts\") && totalAmount > pwallet->GetLegacyBalance(ISMINE_SPENDABLE, nMinDepth, &strAccount)) {\n         throw JSONRPCError(RPC_WALLET_INSUFFICIENT_FUNDS, \"Account has insufficient funds\");\n+    } else if (!IsDeprecatedRPCEnabled(\"accounts\") && totalAmount > pwallet->GetLegacyBalance(ISMINE_SPENDABLE, nMinDepth, nullptr)) {\n+        throw JSONRPCError(RPC_WALLET_INSUFFICIENT_FUNDS, \"Wallet has insufficient funds\");",
    "path": "src/wallet/rpcwallet.cpp",
    "position": 24,
    "original_position": 24,
    "commit_id": "df10f07db178d84b3def9f0b99d9b7c92e4227a9",
    "original_commit_id": "df10f07db178d84b3def9f0b99d9b7c92e4227a9",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "The label in sendfrom/sendmany denotes which account's balance to debit. It does not, and never did, affect which UTXO were being used in transaction creation.",
    "created_at": "2018-06-19T18:29:17Z",
    "updated_at": "2018-06-19T18:29:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13498#discussion_r196532769",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13498",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/196532769"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13498#discussion_r196532769"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13498"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/196532769/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1269,
    "original_line": 1269,
    "side": "RIGHT",
    "in_reply_to_id": 196531993
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/196575773",
    "pull_request_review_id": 130156537,
    "id": 196575773,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE5NjU3NTc3Mw==",
    "diff_hunk": "@@ -1255,9 +1263,11 @@ static UniValue sendmany(const JSONRPCRequest& request)\n     EnsureWalletIsUnlocked(pwallet);\n \n     // Check funds\n-    CAmount nBalance = pwallet->GetLegacyBalance(ISMINE_SPENDABLE, nMinDepth, &strAccount);\n-    if (totalAmount > nBalance)\n+    if (IsDeprecatedRPCEnabled(\"accounts\") && totalAmount > pwallet->GetLegacyBalance(ISMINE_SPENDABLE, nMinDepth, &strAccount)) {\n         throw JSONRPCError(RPC_WALLET_INSUFFICIENT_FUNDS, \"Account has insufficient funds\");\n+    } else if (!IsDeprecatedRPCEnabled(\"accounts\") && totalAmount > pwallet->GetLegacyBalance(ISMINE_SPENDABLE, nMinDepth, nullptr)) {\n+        throw JSONRPCError(RPC_WALLET_INSUFFICIENT_FUNDS, \"Wallet has insufficient funds\");",
    "path": "src/wallet/rpcwallet.cpp",
    "position": 24,
    "original_position": 24,
    "commit_id": "df10f07db178d84b3def9f0b99d9b7c92e4227a9",
    "original_commit_id": "df10f07db178d84b3def9f0b99d9b7c92e4227a9",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "> The label in sendfrom/sendmany denotes which account's balance to debit. It does not, and never did, affect which UTXO were being used in transaction creation.\r\n\r\nIndeed, this is one of the biggest confusions around accounts, and reasons why they're being deprecated.\r\n(also: how the balance is computed doesn't affect UTXO selection)",
    "created_at": "2018-06-19T20:57:11Z",
    "updated_at": "2018-06-19T20:59:05Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13498#discussion_r196575773",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13498",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/196575773"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13498#discussion_r196575773"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13498"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/196575773/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1269,
    "original_line": 1269,
    "side": "RIGHT",
    "in_reply_to_id": 196531993
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/196591780",
    "pull_request_review_id": 130175359,
    "id": 196591780,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE5NjU5MTc4MA==",
    "diff_hunk": "@@ -1255,9 +1263,11 @@ static UniValue sendmany(const JSONRPCRequest& request)\n     EnsureWalletIsUnlocked(pwallet);\n \n     // Check funds\n-    CAmount nBalance = pwallet->GetLegacyBalance(ISMINE_SPENDABLE, nMinDepth, &strAccount);\n-    if (totalAmount > nBalance)\n+    if (IsDeprecatedRPCEnabled(\"accounts\") && totalAmount > pwallet->GetLegacyBalance(ISMINE_SPENDABLE, nMinDepth, &strAccount)) {\n         throw JSONRPCError(RPC_WALLET_INSUFFICIENT_FUNDS, \"Account has insufficient funds\");\n+    } else if (!IsDeprecatedRPCEnabled(\"accounts\") && totalAmount > pwallet->GetLegacyBalance(ISMINE_SPENDABLE, nMinDepth, nullptr)) {\n+        throw JSONRPCError(RPC_WALLET_INSUFFICIENT_FUNDS, \"Wallet has insufficient funds\");",
    "path": "src/wallet/rpcwallet.cpp",
    "position": 24,
    "original_position": 24,
    "commit_id": "df10f07db178d84b3def9f0b99d9b7c92e4227a9",
    "original_commit_id": "df10f07db178d84b3def9f0b99d9b7c92e4227a9",
    "user": {
      "login": "TheCharlatan",
      "id": 8421793,
      "node_id": "MDQ6VXNlcjg0MjE3OTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheCharlatan",
      "html_url": "https://github.com/TheCharlatan",
      "followers_url": "https://api.github.com/users/TheCharlatan/followers",
      "following_url": "https://api.github.com/users/TheCharlatan/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
      "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
      "repos_url": "https://api.github.com/users/TheCharlatan/repos",
      "events_url": "https://api.github.com/users/TheCharlatan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Yes, both sendfrom and sendmany use the same api of `CreateTransaction` (where no direct coin control is used in this case) followed by `CommitTransaction`. I think the wording would be better if \"send\" from is changed with \"debited\" from (both in the api call and in my comment, but that is probably not possible anymore). \r\nCurrently I have 2 UTXOs with 2 confirmations each in my wallet. One has an address with the label \"THIS\" and a balance of 0.19 BTC, the other is unlabeled and has 0.009 BTC. If I `getbalance` the amount is displayed correctly as 0.199BTC. If I now to try to `sendmany \"\" '{\"someaddress\":0.03}'`, the `Account has insufficient funds (code -6)` error is thrown. Naively, I would expect this to work. ",
    "created_at": "2018-06-19T21:56:41Z",
    "updated_at": "2018-06-19T21:56:41Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13498#discussion_r196591780",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13498",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/196591780"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13498#discussion_r196591780"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13498"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/196591780/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1269,
    "original_line": 1269,
    "side": "RIGHT",
    "in_reply_to_id": 196531993
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/196790818",
    "pull_request_review_id": 130409475,
    "id": 196790818,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE5Njc5MDgxOA==",
    "diff_hunk": "@@ -1255,9 +1263,11 @@ static UniValue sendmany(const JSONRPCRequest& request)\n     EnsureWalletIsUnlocked(pwallet);\n \n     // Check funds\n-    CAmount nBalance = pwallet->GetLegacyBalance(ISMINE_SPENDABLE, nMinDepth, &strAccount);\n-    if (totalAmount > nBalance)\n+    if (IsDeprecatedRPCEnabled(\"accounts\") && totalAmount > pwallet->GetLegacyBalance(ISMINE_SPENDABLE, nMinDepth, &strAccount)) {\n         throw JSONRPCError(RPC_WALLET_INSUFFICIENT_FUNDS, \"Account has insufficient funds\");\n+    } else if (!IsDeprecatedRPCEnabled(\"accounts\") && totalAmount > pwallet->GetLegacyBalance(ISMINE_SPENDABLE, nMinDepth, nullptr)) {\n+        throw JSONRPCError(RPC_WALLET_INSUFFICIENT_FUNDS, \"Wallet has insufficient funds\");",
    "path": "src/wallet/rpcwallet.cpp",
    "position": 24,
    "original_position": 24,
    "commit_id": "df10f07db178d84b3def9f0b99d9b7c92e4227a9",
    "original_commit_id": "df10f07db178d84b3def9f0b99d9b7c92e4227a9",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "@TheCharlatan - please see my comment here: https://github.com/bitcoin/bitcoin/issues/12952#issuecomment-398103755.\r\n\r\nThe account is not used in coin selection, but it *is* used in calculating the balance and whether there are enough funds to send from. That's what this PR is fixing.",
    "created_at": "2018-06-20T14:01:57Z",
    "updated_at": "2018-06-20T14:01:58Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13498#discussion_r196790818",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13498",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/196790818"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13498#discussion_r196790818"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13498"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/196790818/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1269,
    "original_line": 1269,
    "side": "RIGHT",
    "in_reply_to_id": 196531993
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/196824404",
    "pull_request_review_id": 130449698,
    "id": 196824404,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE5NjgyNDQwNA==",
    "diff_hunk": "@@ -1255,9 +1263,11 @@ static UniValue sendmany(const JSONRPCRequest& request)\n     EnsureWalletIsUnlocked(pwallet);\n \n     // Check funds\n-    CAmount nBalance = pwallet->GetLegacyBalance(ISMINE_SPENDABLE, nMinDepth, &strAccount);\n-    if (totalAmount > nBalance)\n+    if (IsDeprecatedRPCEnabled(\"accounts\") && totalAmount > pwallet->GetLegacyBalance(ISMINE_SPENDABLE, nMinDepth, &strAccount)) {\n         throw JSONRPCError(RPC_WALLET_INSUFFICIENT_FUNDS, \"Account has insufficient funds\");\n+    } else if (!IsDeprecatedRPCEnabled(\"accounts\") && totalAmount > pwallet->GetLegacyBalance(ISMINE_SPENDABLE, nMinDepth, nullptr)) {\n+        throw JSONRPCError(RPC_WALLET_INSUFFICIENT_FUNDS, \"Wallet has insufficient funds\");",
    "path": "src/wallet/rpcwallet.cpp",
    "position": 24,
    "original_position": 24,
    "commit_id": "df10f07db178d84b3def9f0b99d9b7c92e4227a9",
    "original_commit_id": "df10f07db178d84b3def9f0b99d9b7c92e4227a9",
    "user": {
      "login": "TheCharlatan",
      "id": 8421793,
      "node_id": "MDQ6VXNlcjg0MjE3OTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheCharlatan",
      "html_url": "https://github.com/TheCharlatan",
      "followers_url": "https://api.github.com/users/TheCharlatan/followers",
      "following_url": "https://api.github.com/users/TheCharlatan/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheCharlatan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheCharlatan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
      "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
      "repos_url": "https://api.github.com/users/TheCharlatan/repos",
      "events_url": "https://api.github.com/users/TheCharlatan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Sorry for the ruckus, this patch does exactly what it should do. ",
    "created_at": "2018-06-20T15:20:17Z",
    "updated_at": "2018-06-20T15:20:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13498#discussion_r196824404",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13498",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/196824404"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13498#discussion_r196824404"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13498"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/196824404/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1269,
    "original_line": 1269,
    "side": "RIGHT",
    "in_reply_to_id": 196531993
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/196851208",
    "pull_request_review_id": 130482291,
    "id": 196851208,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE5Njg1MTIwOA==",
    "diff_hunk": "@@ -1255,9 +1263,11 @@ static UniValue sendmany(const JSONRPCRequest& request)\n     EnsureWalletIsUnlocked(pwallet);\n \n     // Check funds\n-    CAmount nBalance = pwallet->GetLegacyBalance(ISMINE_SPENDABLE, nMinDepth, &strAccount);\n-    if (totalAmount > nBalance)\n+    if (IsDeprecatedRPCEnabled(\"accounts\") && totalAmount > pwallet->GetLegacyBalance(ISMINE_SPENDABLE, nMinDepth, &strAccount)) {\n         throw JSONRPCError(RPC_WALLET_INSUFFICIENT_FUNDS, \"Account has insufficient funds\");\n+    } else if (!IsDeprecatedRPCEnabled(\"accounts\") && totalAmount > pwallet->GetLegacyBalance(ISMINE_SPENDABLE, nMinDepth, nullptr)) {\n+        throw JSONRPCError(RPC_WALLET_INSUFFICIENT_FUNDS, \"Wallet has insufficient funds\");",
    "path": "src/wallet/rpcwallet.cpp",
    "position": 24,
    "original_position": 24,
    "commit_id": "df10f07db178d84b3def9f0b99d9b7c92e4227a9",
    "original_commit_id": "df10f07db178d84b3def9f0b99d9b7c92e4227a9",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "@TheCharlatan no problem. Any test/review of this PR would be greatly appreciated :slightly_smiling_face: ",
    "created_at": "2018-06-20T16:32:24Z",
    "updated_at": "2018-06-20T16:32:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13498#discussion_r196851208",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13498",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/196851208"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13498#discussion_r196851208"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13498"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/196851208/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1269,
    "original_line": 1269,
    "side": "RIGHT",
    "in_reply_to_id": 196531993
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/198146859",
    "pull_request_review_id": 132023374,
    "id": 198146859,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE5ODE0Njg1OQ==",
    "diff_hunk": "@@ -1255,9 +1263,11 @@ static UniValue sendmany(const JSONRPCRequest& request)\n     EnsureWalletIsUnlocked(pwallet);\n \n     // Check funds\n-    CAmount nBalance = pwallet->GetLegacyBalance(ISMINE_SPENDABLE, nMinDepth, &strAccount);\n-    if (totalAmount > nBalance)\n+    if (IsDeprecatedRPCEnabled(\"accounts\") && totalAmount > pwallet->GetLegacyBalance(ISMINE_SPENDABLE, nMinDepth, &strAccount)) {\n         throw JSONRPCError(RPC_WALLET_INSUFFICIENT_FUNDS, \"Account has insufficient funds\");\n+    } else if (!IsDeprecatedRPCEnabled(\"accounts\") && totalAmount > pwallet->GetLegacyBalance(ISMINE_SPENDABLE, nMinDepth, nullptr)) {\n+        throw JSONRPCError(RPC_WALLET_INSUFFICIENT_FUNDS, \"Wallet has insufficient funds\");",
    "path": "src/wallet/rpcwallet.cpp",
    "position": 24,
    "original_position": 24,
    "commit_id": "df10f07db178d84b3def9f0b99d9b7c92e4227a9",
    "original_commit_id": "df10f07db178d84b3def9f0b99d9b7c92e4227a9",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Commit \"[wallet] Don't use accounts when checking balance in sendmany\"\r\n\r\nUse same error as https://github.com/bitcoin/bitcoin/blob/ee02debb25675542d13a03b65ed49832b79b0db9/src/wallet/rpcwallet.cpp#L466\r\nand\r\nhttps://github.com/bitcoin/bitcoin/blob/ee02debb25675542d13a03b65ed49832b79b0db9/src/wallet/wallet.cpp#L2905",
    "created_at": "2018-06-26T13:40:43Z",
    "updated_at": "2018-06-26T13:42:55Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13498#discussion_r198146859",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13498",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/198146859"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13498#discussion_r198146859"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13498"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/198146859/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1269,
    "original_line": 1269,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/198186532",
    "pull_request_review_id": 132071203,
    "id": 198186532,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE5ODE4NjUzMg==",
    "diff_hunk": "@@ -1255,9 +1263,11 @@ static UniValue sendmany(const JSONRPCRequest& request)\n     EnsureWalletIsUnlocked(pwallet);\n \n     // Check funds\n-    CAmount nBalance = pwallet->GetLegacyBalance(ISMINE_SPENDABLE, nMinDepth, &strAccount);\n-    if (totalAmount > nBalance)\n+    if (IsDeprecatedRPCEnabled(\"accounts\") && totalAmount > pwallet->GetLegacyBalance(ISMINE_SPENDABLE, nMinDepth, &strAccount)) {\n         throw JSONRPCError(RPC_WALLET_INSUFFICIENT_FUNDS, \"Account has insufficient funds\");\n+    } else if (!IsDeprecatedRPCEnabled(\"accounts\") && totalAmount > pwallet->GetLegacyBalance(ISMINE_SPENDABLE, nMinDepth, nullptr)) {\n+        throw JSONRPCError(RPC_WALLET_INSUFFICIENT_FUNDS, \"Wallet has insufficient funds\");",
    "path": "src/wallet/rpcwallet.cpp",
    "position": 24,
    "original_position": 24,
    "commit_id": "df10f07db178d84b3def9f0b99d9b7c92e4227a9",
    "original_commit_id": "df10f07db178d84b3def9f0b99d9b7c92e4227a9",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Thanks @promag . This code will need to be changed for V0.18 when accounts are definitively removed. Let's save error message cleanup until then and not invalidate previous ACKs.",
    "created_at": "2018-06-26T15:16:16Z",
    "updated_at": "2018-06-26T15:16:16Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13498#discussion_r198186532",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13498",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/198186532"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13498#discussion_r198186532"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13498"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/198186532/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1269,
    "original_line": 1269,
    "side": "RIGHT",
    "in_reply_to_id": 198146859
  }
]