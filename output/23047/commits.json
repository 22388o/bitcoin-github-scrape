[
  {
    "sha": "faca688a8579d7e30d056b6847789fdd56fc0bf4",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYWNhNjg4YTg1NzlkN2UzMGQwNTZiNjg0Nzc4OWZkZDU2ZmMwYmY0",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-09-20T13:22:15Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-09-20T13:48:12Z"
      },
      "message": "test: Add MiniWallet get_descriptor function",
      "tree": {
        "sha": "1d1c86036a5356ea0fa780ad083007ecb1fb977c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/1d1c86036a5356ea0fa780ad083007ecb1fb977c"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/faca688a8579d7e30d056b6847789fdd56fc0bf4",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUj1XgwAz2uO/UEebh729JsoD5UvPQBzr0ivJghCPlQ+Phw+B8n1U6uVz3KRVFzu\n3a1jMdlZ10LY/vJObUoRKVohTH5NQl/VlBj/RC5ZDq3HrJAZfJSBL587EEZ25hiJ\nNDB4GKyGWeX30tGWs0d6IeAbBO6X9ie5O/ymH3UC9zb+SyrxiL+D/yyuHBU1SNc0\n2+DcJBJrBQSCL0o4BAlt9H/MzzvbD7iIFwb7kxGeQDjE+bQHx4REnxK2oBc4TFNU\nJxZPP20QMLkmFkHY4RTI3uCHoojAggTPF5xBLxf7D7Qvuy90QvUt76L0xAg4YEYM\niblpchHkRgMR9bX+d1AGOwekyUZ4Mm2xCB+ByMwvcwEsuild50hlkVWHy3+1y7O1\nGFegI+RrKoNLf5db1VahIHb8KIDKc1c9Fz4DRPCuEJ/bfcVrHwKFXiQt1n7tOayT\nMVrRMEPU2Jru159FT2qhyko36hqytr3JhtOtBxTkR3rx6/nnBCDQPEM7izcfOSB1\n38euSHko\n=NvsM\n-----END PGP SIGNATURE-----",
        "payload": "tree 1d1c86036a5356ea0fa780ad083007ecb1fb977c\nparent 226731ac1144886d693d3508b331f98727ab883c\nauthor MarcoFalke <falke.marco@gmail.com> 1632144135 +0200\ncommitter MarcoFalke <falke.marco@gmail.com> 1632145692 +0200\n\ntest: Add MiniWallet get_descriptor function\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/faca688a8579d7e30d056b6847789fdd56fc0bf4",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/faca688a8579d7e30d056b6847789fdd56fc0bf4",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/faca688a8579d7e30d056b6847789fdd56fc0bf4/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "226731ac1144886d693d3508b331f98727ab883c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/226731ac1144886d693d3508b331f98727ab883c",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/226731ac1144886d693d3508b331f98727ab883c"
      }
    ],
    "stats": {
      "total": 7,
      "additions": 5,
      "deletions": 2
    },
    "files": [
      {
        "sha": "4abaa20c07bad1e2c42566d036437c2e9e5a6982",
        "filename": "test/functional/test_framework/wallet.py",
        "status": "modified",
        "additions": 5,
        "deletions": 2,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/faca688a8579d7e30d056b6847789fdd56fc0bf4/test/functional/test_framework/wallet.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/faca688a8579d7e30d056b6847789fdd56fc0bf4/test/functional/test_framework/wallet.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/test_framework/wallet.py?ref=faca688a8579d7e30d056b6847789fdd56fc0bf4",
        "patch": "@@ -82,7 +82,7 @@ def __init__(self, test_node, *, mode=MiniWalletMode.ADDRESS_OP_TRUE):\n     def rescan_utxos(self):\n         \"\"\"Drop all utxos and rescan the utxo set\"\"\"\n         self._utxos = []\n-        res = self._test_node.scantxoutset(action=\"start\", scanobjects=[f'raw({self._scriptPubKey.hex()})'])\n+        res = self._test_node.scantxoutset(action=\"start\", scanobjects=[self.get_descriptor()])\n         assert_equal(True, res['success'])\n         for utxo in res['unspents']:\n             self._utxos.append({'txid': utxo['txid'], 'vout': utxo['vout'], 'value': utxo['amount']})\n@@ -117,12 +117,15 @@ def sign_tx(self, tx, fixed_length=True):\n \n     def generate(self, num_blocks):\n         \"\"\"Generate blocks with coinbase outputs to the internal address, and append the outputs to the internal list\"\"\"\n-        blocks = self._test_node.generatetodescriptor(num_blocks, f'raw({self._scriptPubKey.hex()})')\n+        blocks = self._test_node.generatetodescriptor(num_blocks, self.get_descriptor())\n         for b in blocks:\n             cb_tx = self._test_node.getblock(blockhash=b, verbosity=2)['tx'][0]\n             self._utxos.append({'txid': cb_tx['txid'], 'vout': 0, 'value': cb_tx['vout'][0]['value']})\n         return blocks\n \n+    def get_descriptor(self):\n+        return self._test_node.getdescriptorinfo(f'raw({self._scriptPubKey.hex()})')['descriptor']\n+\n     def get_address(self):\n         return self._address\n "
      }
    ]
  },
  {
    "sha": "fa32cb2467056b3fd47f0b88215311faec8fd5a4",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYTMyY2IyNDY3MDU2YjNmZDQ3ZjBiODgyMTUzMTFmYWVjOGZkNWE0",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-09-20T13:25:49Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-09-20T13:48:32Z"
      },
      "message": "test: Use MiniWallet in mempool_persist",
      "tree": {
        "sha": "43c4a17ed71bc0e6f8d7d57b49c729a8f0288f1a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/43c4a17ed71bc0e6f8d7d57b49c729a8f0288f1a"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa32cb2467056b3fd47f0b88215311faec8fd5a4",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUhvygv+OcD1/aJHtkrT6VxssrNC4ZRSMjA879mnn3APax2B3XAlnR4EULl1Te1u\nG2FBVwP/1/cVglOGlb0dV6xOobGEDfe/DN4HXKBD517h1G6NQOLw2FiUQnsIWETl\nGh1+CycPSTJ+2HU42EQsPoUN7PXNKBc6/NWwWgH+UONLQFWKhMfg1OgmU3pUcP1j\nt1KS9z6ab2HeVfwybRafyDE1IiJrl135nnv6KdgvmnR0nEEzJ8zrSWKaQjipWtdE\nQUWQKWIAMalbdu9sWqSPlYzaCAhcSvEwTKeadm+TpdIb0430oxYx7UpXJX4UocoH\nM1uBeFj1/5iHOUyK4377LP7OVu1IsZzzyuk6zqF4hIRYYvRPvLuGzntJ2JEVTSLb\nU/6xXd8R3LeEsPpWAS6ApB2ctvGDuDSzurTwzCdGMBf3y9OKr35o58D29eIh3YB9\nxQusLQXj03CsbYe4pyDKwIFMiFEHdDkj2eFPMS/akEqKp0+esDHr9kCkzeImxvWv\ncr+h/R33\n=+FCv\n-----END PGP SIGNATURE-----",
        "payload": "tree 43c4a17ed71bc0e6f8d7d57b49c729a8f0288f1a\nparent faca688a8579d7e30d056b6847789fdd56fc0bf4\nauthor MarcoFalke <falke.marco@gmail.com> 1632144349 +0200\ncommitter MarcoFalke <falke.marco@gmail.com> 1632145712 +0200\n\ntest: Use MiniWallet in mempool_persist\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa32cb2467056b3fd47f0b88215311faec8fd5a4",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fa32cb2467056b3fd47f0b88215311faec8fd5a4",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa32cb2467056b3fd47f0b88215311faec8fd5a4/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "faca688a8579d7e30d056b6847789fdd56fc0bf4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/faca688a8579d7e30d056b6847789fdd56fc0bf4",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/faca688a8579d7e30d056b6847789fdd56fc0bf4"
      }
    ],
    "stats": {
      "total": 39,
      "additions": 26,
      "deletions": 13
    },
    "files": [
      {
        "sha": "68daa87e633446ffbab2f3f11c530798794aa996",
        "filename": "test/functional/mempool_persist.py",
        "status": "modified",
        "additions": 26,
        "deletions": 13,
        "changes": 39,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa32cb2467056b3fd47f0b88215311faec8fd5a4/test/functional/mempool_persist.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa32cb2467056b3fd47f0b88215311faec8fd5a4/test/functional/mempool_persist.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/mempool_persist.py?ref=fa32cb2467056b3fd47f0b88215311faec8fd5a4",
        "patch": "@@ -46,22 +46,34 @@\n     assert_greater_than_or_equal,\n     assert_raises_rpc_error,\n )\n+from test_framework.wallet import MiniWallet\n \n \n class MempoolPersistTest(BitcoinTestFramework):\n     def set_test_params(self):\n         self.num_nodes = 3\n         self.extra_args = [[], [\"-persistmempool=0\"], []]\n \n-    def skip_test_if_missing_module(self):\n-        self.skip_if_no_wallet()\n-\n     def run_test(self):\n+        self.mini_wallet = MiniWallet(self.nodes[2])\n+        self.mini_wallet.rescan_utxos()\n+        if self.is_sqlite_compiled():\n+            self.nodes[2].createwallet(\n+                wallet_name=\"watch\",\n+                descriptors=True,\n+                disable_private_keys=True,\n+                load_on_startup=False,\n+            )\n+            wallet_watch = self.nodes[2].get_wallet_rpc(\"watch\")\n+            assert_equal([{'success': True}], wallet_watch.importdescriptors([{'desc': self.mini_wallet.get_descriptor(), 'timestamp': 0}]))\n+\n         self.log.debug(\"Send 5 transactions from node2 (to its own address)\")\n         tx_creation_time_lower = int(time.time())\n         for _ in range(5):\n-            last_txid = self.nodes[2].sendtoaddress(self.nodes[2].getnewaddress(), Decimal(\"10\"))\n-        node2_balance = self.nodes[2].getbalance()\n+            last_txid = self.mini_wallet.send_self_transfer(from_node=self.nodes[2])[\"txid\"]\n+        if self.is_sqlite_compiled():\n+            self.nodes[2].syncwithvalidationinterfacequeue()  # Flush mempool to wallet\n+            node2_balance = wallet_watch.getbalance()\n         self.sync_all()\n         tx_creation_time_higher = int(time.time())\n \n@@ -90,7 +102,7 @@ def run_test(self):\n         self.disconnect_nodes(0, 1)\n         assert(len(self.nodes[0].getpeerinfo()) == 0)\n         assert(len(self.nodes[0].p2ps) == 0)\n-        self.nodes[0].sendtoaddress(self.nodes[2].getnewaddress(), Decimal(\"12\"))\n+        self.mini_wallet.send_self_transfer(from_node=self.nodes[0])\n         self.connect_nodes(0, 2)\n \n         self.log.debug(\"Stop-start the nodes. Verify that node0 has the transactions in its mempool and node1 does not. Verify that node2 calculates its balance correctly after loading wallet transactions.\")\n@@ -115,13 +127,15 @@ def run_test(self):\n         assert_equal(tx_creation_time, self.nodes[0].getmempoolentry(txid=last_txid)['time'])\n \n         # Verify accounting of mempool transactions after restart is correct\n-        self.nodes[2].syncwithvalidationinterfacequeue()  # Flush mempool to wallet\n-        assert_equal(node2_balance, self.nodes[2].getbalance())\n+        if self.is_sqlite_compiled():\n+            self.nodes[2].loadwallet(\"watch\")\n+            wallet_watch = self.nodes[2].get_wallet_rpc(\"watch\")\n+            self.nodes[2].syncwithvalidationinterfacequeue()  # Flush mempool to wallet\n+            assert_equal(node2_balance, wallet_watch.getbalance())\n \n-        # start node0 with wallet disabled so wallet transactions don't get resubmitted\n         self.log.debug(\"Stop-start node0 with -persistmempool=0. Verify that it doesn't load its mempool.dat file.\")\n         self.stop_nodes()\n-        self.start_node(0, extra_args=[\"-persistmempool=0\", \"-disablewallet\"])\n+        self.start_node(0, extra_args=[\"-persistmempool=0\"])\n         assert self.nodes[0].getmempoolinfo()[\"loaded\"]\n         assert_equal(len(self.nodes[0].getrawmempool()), 0)\n \n@@ -166,11 +180,10 @@ def test_persist_unbroadcast(self):\n         # make a transaction that will remain in the unbroadcast set\n         assert(len(node0.getpeerinfo()) == 0)\n         assert(len(node0.p2ps) == 0)\n-        node0.sendtoaddress(self.nodes[1].getnewaddress(), Decimal(\"12\"))\n+        self.mini_wallet.send_self_transfer(from_node=node0)\n \n         # shutdown, then startup with wallet disabled\n-        self.stop_nodes()\n-        self.start_node(0, extra_args=[\"-disablewallet\"])\n+        self.restart_node(0, extra_args=[\"-disablewallet\"])\n \n         # check that txn gets broadcast due to unbroadcast logic\n         conn = node0.add_p2p_connection(P2PTxInvStore())"
      }
    ]
  },
  {
    "sha": "fafb7b7a892b24405d6b6291d6d72f0e88462f2f",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYWZiN2I3YTg5MmIyNDQwNWQ2YjYyOTFkNmQ3MmYwZTg4NDYyZjJm",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-09-20T13:29:20Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-09-20T13:48:47Z"
      },
      "message": "test: pep8",
      "tree": {
        "sha": "d2ad8e3a081870ee75afe8e68207c91170244c34",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d2ad8e3a081870ee75afe8e68207c91170244c34"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fafb7b7a892b24405d6b6291d6d72f0e88462f2f",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUhuTgwAuc3vQB5BH8VZZmyP3/NuL6ffccB4AMoqGOLnMZF0xhRB8bUJAsAbICo5\nGvMR1EwslAaas8q+N861AP2iAgNVjMdkqonLtI8mKsOlZQOvtmENenzKtjDlrLy6\naZcXg7K6sBTsasj19GGCTi0Ie3ax7c7TfwD8OQl7JG2RL7Jix2PM0IOgf8maa6fl\nCTP5jEfDZhVyKOHkmFSbLPgtib7/b78gIXEGy2LD8GFJ3FiCfav4z946PkyVSTeu\n2+orRgHsdKOuYmKVJsEnciMfPv83fiDUw1dWIdwHJZ4KgYg/RZcfkoIQttiy/eB6\n8m89CO4gRl7RPVkWIsabt2+hS0X/isBTYf8Toq3+IpFiq5xZ5uqBJ9xTVqcYC03/\nAQ7WZzlbmTUurhwhHybblSXr4atJUPePNOY1t6ilaHTevJueRz/AvRS4fMlL7fyA\neS94sz5CH0+wHQHoFVEU52vUJLE/r9VWxWiniKOtBTywQc82Jo6LLJCavyC7FzMg\nILqap2SO\n=zYIC\n-----END PGP SIGNATURE-----",
        "payload": "tree d2ad8e3a081870ee75afe8e68207c91170244c34\nparent fa32cb2467056b3fd47f0b88215311faec8fd5a4\nauthor MarcoFalke <falke.marco@gmail.com> 1632144560 +0200\ncommitter MarcoFalke <falke.marco@gmail.com> 1632145727 +0200\n\ntest: pep8\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fafb7b7a892b24405d6b6291d6d72f0e88462f2f",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fafb7b7a892b24405d6b6291d6d72f0e88462f2f",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fafb7b7a892b24405d6b6291d6d72f0e88462f2f/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "fa32cb2467056b3fd47f0b88215311faec8fd5a4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa32cb2467056b3fd47f0b88215311faec8fd5a4",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/fa32cb2467056b3fd47f0b88215311faec8fd5a4"
      }
    ],
    "stats": {
      "total": 13,
      "additions": 7,
      "deletions": 6
    },
    "files": [
      {
        "sha": "b284755b27ec9caafd6202ce0836c052fd47c6bb",
        "filename": "test/functional/mempool_persist.py",
        "status": "modified",
        "additions": 7,
        "deletions": 6,
        "changes": 13,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fafb7b7a892b24405d6b6291d6d72f0e88462f2f/test/functional/mempool_persist.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fafb7b7a892b24405d6b6291d6d72f0e88462f2f/test/functional/mempool_persist.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/mempool_persist.py?ref=fafb7b7a892b24405d6b6291d6d72f0e88462f2f",
        "patch": "@@ -100,8 +100,8 @@ def run_test(self):\n \n         # disconnect nodes & make a txn that remains in the unbroadcast set.\n         self.disconnect_nodes(0, 1)\n-        assert(len(self.nodes[0].getpeerinfo()) == 0)\n-        assert(len(self.nodes[0].p2ps) == 0)\n+        assert_equal(len(self.nodes[0].getpeerinfo()), 0)\n+        assert_equal(len(self.nodes[0].p2ps), 0)\n         self.mini_wallet.send_self_transfer(from_node=self.nodes[0])\n         self.connect_nodes(0, 2)\n \n@@ -178,17 +178,18 @@ def test_persist_unbroadcast(self):\n \n         # ensure node0 doesn't have any connections\n         # make a transaction that will remain in the unbroadcast set\n-        assert(len(node0.getpeerinfo()) == 0)\n-        assert(len(node0.p2ps) == 0)\n+        assert_equal(len(node0.getpeerinfo()), 0)\n+        assert_equal(len(node0.p2ps), 0)\n         self.mini_wallet.send_self_transfer(from_node=node0)\n \n         # shutdown, then startup with wallet disabled\n         self.restart_node(0, extra_args=[\"-disablewallet\"])\n \n         # check that txn gets broadcast due to unbroadcast logic\n         conn = node0.add_p2p_connection(P2PTxInvStore())\n-        node0.mockscheduler(16*60) # 15 min + 1 for buffer\n+        node0.mockscheduler(16 * 60)  # 15 min + 1 for buffer\n         self.wait_until(lambda: len(conn.get_invs()) == 1)\n \n-if __name__ == '__main__':\n+\n+if __name__ == \"__main__\":\n     MempoolPersistTest().main()"
      }
    ]
  },
  {
    "sha": "fa4db9261725de8c0e5c73d13df1cddd6bbaeab0",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYTRkYjkyNjE3MjVkZThjMGU1YzczZDEzZGYxY2RkZDZiYmFlYWIw",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-09-20T13:51:28Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-09-20T13:49:23Z"
      },
      "message": "test: Remove unused self.connect_nodes\n\nThe nodes are stopped in the next line, no need to connect them",
      "tree": {
        "sha": "804e4d9e575458b25cf745b5982e9c7f05bebc79",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/804e4d9e575458b25cf745b5982e9c7f05bebc79"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa4db9261725de8c0e5c73d13df1cddd6bbaeab0",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUgGqwwAqX6dHuSBETyPwYTOS2HMV0xSwTRlPeiluP17XNGZfSeKLAw+Soicrw2w\nKOWrP5RHfh3/NWx6ekwhBo2TYVZRcXOt0jtj4wHqCuTBP8XdZExRDpb2Kg6ApqgU\nTX1mhZimyqCBan2TX06RLcq6aDplbSqWENtQlQYxD3SyVVuF8aff+6DeV83N+SX2\nIzPJjY85+b1cZ4ty4jTIpzedEM44wZeFQqqSJQDZMQuCUFu4ToQ9Vaju/ZwVItO4\n1IRnRn33i7micbEVs32IQhol0d4IobSM3FRne09P8t7j1+aGEbth+oJwazF6KQZz\nP7XN2WPa3/Fr1PWx3QkhmNAD9u7oIwGDq8AdCLHqKXyQO+fnTqfeE895L4vyVjAk\nw6a9U+HuiPVeVX3/6GcTNo3S1xg8yQjB/3yZg+1mL5Fe7Uk9w1KdmBa/OeSI6DA/\n4JNT8liM/y/VjTFsbUvc+P/ZvmGoqkJwNSwHuOeOywEP7ztXw3566144A6KVEWkY\n8NHziunB\n=1rpy\n-----END PGP SIGNATURE-----",
        "payload": "tree 804e4d9e575458b25cf745b5982e9c7f05bebc79\nparent fafb7b7a892b24405d6b6291d6d72f0e88462f2f\nauthor MarcoFalke <falke.marco@gmail.com> 1632145888 +0200\ncommitter MarcoFalke <falke.marco@gmail.com> 1632145763 +0200\n\ntest: Remove unused self.connect_nodes\n\nThe nodes are stopped in the next line, no need to connect them\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa4db9261725de8c0e5c73d13df1cddd6bbaeab0",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fa4db9261725de8c0e5c73d13df1cddd6bbaeab0",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa4db9261725de8c0e5c73d13df1cddd6bbaeab0/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "fafb7b7a892b24405d6b6291d6d72f0e88462f2f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fafb7b7a892b24405d6b6291d6d72f0e88462f2f",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/fafb7b7a892b24405d6b6291d6d72f0e88462f2f"
      }
    ],
    "stats": {
      "total": 1,
      "additions": 0,
      "deletions": 1
    },
    "files": [
      {
        "sha": "832ef22011946872407b9efdba2108c22a28f7da",
        "filename": "test/functional/mempool_persist.py",
        "status": "modified",
        "additions": 0,
        "deletions": 1,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa4db9261725de8c0e5c73d13df1cddd6bbaeab0/test/functional/mempool_persist.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa4db9261725de8c0e5c73d13df1cddd6bbaeab0/test/functional/mempool_persist.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/mempool_persist.py?ref=fa4db9261725de8c0e5c73d13df1cddd6bbaeab0",
        "patch": "@@ -103,7 +103,6 @@ def run_test(self):\n         assert_equal(len(self.nodes[0].getpeerinfo()), 0)\n         assert_equal(len(self.nodes[0].p2ps), 0)\n         self.mini_wallet.send_self_transfer(from_node=self.nodes[0])\n-        self.connect_nodes(0, 2)\n \n         self.log.debug(\"Stop-start the nodes. Verify that node0 has the transactions in its mempool and node1 does not. Verify that node2 calculates its balance correctly after loading wallet transactions.\")\n         self.stop_nodes()"
      }
    ]
  },
  {
    "sha": "faae0988d6abb50039026a49543eef134eb9103f",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYWFlMDk4OGQ2YWJiNTAwMzkwMjZhNDk1NDNlZWYxMzRlYjkxMDNm",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-09-20T13:48:09Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-09-20T13:49:27Z"
      },
      "message": "test: Check other fields are loaded correctly as well",
      "tree": {
        "sha": "06fa2a8dba13a7c2c333fc6ae5eaf8b9146d62a4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/06fa2a8dba13a7c2c333fc6ae5eaf8b9146d62a4"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/faae0988d6abb50039026a49543eef134eb9103f",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUhrRQwAgwmKd0rxEQkvqVACEb4SXh/svdRTGyal+cp5qZrD7D2ZK0Dzyx/n2r7Q\nLnXDzSlnPBUt+0QJqvXIA9Xon3tQIKlqqP+g7p0jTYUTkAkZPKg8mTUROxvHju9V\naSF7Xn8UpFKLNGcHFe1dzvJ3eZnyFOABW5XthtlnU+fU9PEyMQtvK5ZgYNvF2iOu\nz0bjX+VVJqcIQ+4wI4NJbdTrF137V+d879zWAkiEQrLfflYKKbj68pE6hcEi2WNj\ne1HhKQqLEA+C4OEadLRdSnRMu+OBupU4tPMmbS5cD8gCuq+ne5WJ4HdVOSUWahbI\n5cOBPm+g+QZdSeEFC9DZfAFrobPxWbMNS/+d1SQH1XN0IEW0BTI9daTX3gGUYxPP\n9F8bcA9i7yVAxMIDhfsFaw+EEo4YV/oMm13bp1i8cJMlNSzLFe6P6uT7tX/4yGse\nn9vohYt4Fvq1Ad6DLCCYtASb1D4B1fZqE5vjzxx4jt3jKRagV0j30FdxQxIKbDZC\n4rIidKNN\n=e2Vb\n-----END PGP SIGNATURE-----",
        "payload": "tree 06fa2a8dba13a7c2c333fc6ae5eaf8b9146d62a4\nparent fa4db9261725de8c0e5c73d13df1cddd6bbaeab0\nauthor MarcoFalke <falke.marco@gmail.com> 1632145689 +0200\ncommitter MarcoFalke <falke.marco@gmail.com> 1632145767 +0200\n\ntest: Check other fields are loaded correctly as well\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/faae0988d6abb50039026a49543eef134eb9103f",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/faae0988d6abb50039026a49543eef134eb9103f",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/faae0988d6abb50039026a49543eef134eb9103f/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "fa4db9261725de8c0e5c73d13df1cddd6bbaeab0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa4db9261725de8c0e5c73d13df1cddd6bbaeab0",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/fa4db9261725de8c0e5c73d13df1cddd6bbaeab0"
      }
    ],
    "stats": {
      "total": 7,
      "additions": 4,
      "deletions": 3
    },
    "files": [
      {
        "sha": "015876cbbfc491c1d13b012c4c018ab1e581bfe2",
        "filename": "test/functional/mempool_persist.py",
        "status": "modified",
        "additions": 4,
        "deletions": 3,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/faae0988d6abb50039026a49543eef134eb9103f/test/functional/mempool_persist.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/faae0988d6abb50039026a49543eef134eb9103f/test/functional/mempool_persist.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/mempool_persist.py?ref=faae0988d6abb50039026a49543eef134eb9103f",
        "patch": "@@ -94,7 +94,8 @@ def run_test(self):\n         assert_equal(total_fee_old, self.nodes[0].getmempoolinfo()['total_fee'])\n         assert_equal(total_fee_old, sum(v['fees']['base'] for k, v in self.nodes[0].getrawmempool(verbose=True).items()))\n \n-        tx_creation_time = self.nodes[0].getmempoolentry(txid=last_txid)['time']\n+        last_entry = self.nodes[0].getmempoolentry(txid=last_txid)\n+        tx_creation_time = last_entry['time']\n         assert_greater_than_or_equal(tx_creation_time, tx_creation_time_lower)\n         assert_greater_than_or_equal(tx_creation_time_higher, tx_creation_time)\n \n@@ -122,8 +123,8 @@ def run_test(self):\n         fees = self.nodes[0].getmempoolentry(txid=last_txid)['fees']\n         assert_equal(fees['base'] + Decimal('0.00001000'), fees['modified'])\n \n-        self.log.debug('Verify time is loaded correctly')\n-        assert_equal(tx_creation_time, self.nodes[0].getmempoolentry(txid=last_txid)['time'])\n+        self.log.debug('Verify all fields are loaded correctly')\n+        assert_equal(last_entry, self.nodes[0].getmempoolentry(txid=last_txid))\n \n         # Verify accounting of mempool transactions after restart is correct\n         if self.is_sqlite_compiled():"
      }
    ]
  }
]