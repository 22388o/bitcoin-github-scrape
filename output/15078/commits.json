[
  {
    "sha": "fab3f1467823c854cc88bc5a7e087263866ed87e",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYWIzZjE0Njc4MjNjODU0Y2M4OGJjNWE3ZTA4NzI2Mzg2NmVkODdl",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2019-01-02T12:13:50Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2019-01-03T14:49:24Z"
      },
      "message": "rpc: Document bytessent_per_msg and bytesrecv_per_msg",
      "tree": {
        "sha": "ea6cfb5fd3f6fa4a955a48862ae30ee7042b9410",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ea6cfb5fd3f6fa4a955a48862ae30ee7042b9410"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fab3f1467823c854cc88bc5a7e087263866ed87e",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGcBAABCgAGBQJcLiD0AAoJEM4rdWl+aaVIlzEL/1ieME9e6f2hJKhYMi4iTJ5d\nRRgVBG8wH3VJ1JgHMcMwKI+zJ2xTS7sgwtnshM6h7f4oAnK5CpqOER5/PUpJGztp\nosNaQaHeYTeS8Tq4cVy7xmGCINTTQtNj5MMijWDBW3FytxYRActhT7xi4FfYqD3K\n+1FTyxcj4tONqKeErBnqhrYkErtIqxfrFZ4i267+wAV5SFIl04LTsfXGR0y27aDG\nJXAbHLIEHE8wj1fzyYNw7lYzgZUjOrMB5CgSrKo/J9hD9ZIF9ixJeOCVfe+4AJqU\noketODFG1oQNLycJLWi3PC1patY225dwNML41rIsrj3QuuPpoJNVTQa3t5Vfw4lc\nJqr9XnyI5qwWhz+8bbW/WeimC36pQyctgyrKe3ugEb0QTXBcMlWMOqWHabroT93G\nefxmKAASefLnX+kppuOWMcn/QLQHlJOmXuxMdBc3Mq3hg/4q1/jA3wbjUFvjzXSJ\nIfDS+FgeUhwyh94LbOEcJ6A5ba1p/Nc5AJImrT9CYA==\n=ItZq\n-----END PGP SIGNATURE-----",
        "payload": "tree ea6cfb5fd3f6fa4a955a48862ae30ee7042b9410\nparent df894fa69a09ff2b7f00af0cf220e5132a69c70a\nauthor MarcoFalke <falke.marco@gmail.com> 1546431230 +0100\ncommitter MarcoFalke <falke.marco@gmail.com> 1546526964 +0100\n\nrpc: Document bytessent_per_msg and bytesrecv_per_msg\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fab3f1467823c854cc88bc5a7e087263866ed87e",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fab3f1467823c854cc88bc5a7e087263866ed87e",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fab3f1467823c854cc88bc5a7e087263866ed87e/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "df894fa69a09ff2b7f00af0cf220e5132a69c70a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/df894fa69a09ff2b7f00af0cf220e5132a69c70a",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/df894fa69a09ff2b7f00af0cf220e5132a69c70a"
      }
    ],
    "stats": {
      "total": 25,
      "additions": 15,
      "deletions": 10
    },
    "files": [
      {
        "sha": "902830f79cbd829eac0d625100ae2f2e1a15eda3",
        "filename": "src/net.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 3,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fab3f1467823c854cc88bc5a7e087263866ed87e/src/net.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fab3f1467823c854cc88bc5a7e087263866ed87e/src/net.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/net.cpp?ref=fab3f1467823c854cc88bc5a7e087263866ed87e",
        "patch": "@@ -1,5 +1,5 @@\n // Copyright (c) 2009-2010 Satoshi Nakamoto\n-// Copyright (c) 2009-2018 The Bitcoin Core developers\n+// Copyright (c) 2009-2019 The Bitcoin Core developers\n // Distributed under the MIT software license, see the accompanying\n // file COPYING or http://www.opensource.org/licenses/mit-license.php.\n \n@@ -80,7 +80,7 @@ enum BindFlags {\n // The sleep time needs to be small to avoid new sockets stalling\n static const uint64_t SELECT_TIMEOUT_MILLISECONDS = 50;\n \n-const static std::string NET_MESSAGE_COMMAND_OTHER = \"*other*\";\n+const std::string NET_MESSAGE_COMMAND_OTHER = \"*other*\";\n \n static const uint64_t RANDOMIZER_ID_NETGROUP = 0x6c0edd8036ef4036ULL; // SHA256(\"netgroup\")[0:8]\n static const uint64_t RANDOMIZER_ID_LOCALHOSTNONCE = 0xd93e69e2bbfa5735ULL; // SHA256(\"localhostnonce\")[0:8]\n@@ -787,7 +787,6 @@ bool CNode::ReceiveMsgBytes(const char *pch, unsigned int nBytes, bool& complete\n         nBytes -= handled;\n \n         if (msg.complete()) {\n-\n             //store received bytes per message command\n             //to prevent a memory DOS, only allow valid commands\n             mapMsgCmdSize::iterator i = mapRecvBytesPerMsgCmd.find(msg.hdr.pchCommand);"
      },
      {
        "sha": "4af3318656e7591686772410d360a2aadc857f43",
        "filename": "src/net.h",
        "status": "modified",
        "additions": 4,
        "deletions": 2,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fab3f1467823c854cc88bc5a7e087263866ed87e/src/net.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fab3f1467823c854cc88bc5a7e087263866ed87e/src/net.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/net.h?ref=fab3f1467823c854cc88bc5a7e087263866ed87e",
        "patch": "@@ -1,5 +1,5 @@\n // Copyright (c) 2009-2010 Satoshi Nakamoto\n-// Copyright (c) 2009-2018 The Bitcoin Core developers\n+// Copyright (c) 2009-2019 The Bitcoin Core developers\n // Distributed under the MIT software license, see the accompanying\n // file COPYING or http://www.opensource.org/licenses/mit-license.php.\n \n@@ -550,6 +550,8 @@ struct LocalServiceInfo {\n \n extern CCriticalSection cs_mapLocalHost;\n extern std::map<CNetAddr, LocalServiceInfo> mapLocalHost GUARDED_BY(cs_mapLocalHost);\n+\n+extern const std::string NET_MESSAGE_COMMAND_OTHER;\n typedef std::map<std::string, uint64_t> mapMsgCmdSize; //command, total bytes\n \n class CNodeStats\n@@ -696,8 +698,8 @@ class CNode\n     const uint64_t nKeyedNetGroup;\n     std::atomic_bool fPauseRecv;\n     std::atomic_bool fPauseSend;\n-protected:\n \n+protected:\n     mapMsgCmdSize mapSendBytesPerMsgCmd;\n     mapMsgCmdSize mapRecvBytesPerMsgCmd GUARDED_BY(cs_vRecv);\n "
      },
      {
        "sha": "cc229367ba30092c7892ce2518e9d4d9efdf7bab",
        "filename": "src/rpc/net.cpp",
        "status": "modified",
        "additions": 9,
        "deletions": 5,
        "changes": 14,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fab3f1467823c854cc88bc5a7e087263866ed87e/src/rpc/net.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fab3f1467823c854cc88bc5a7e087263866ed87e/src/rpc/net.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/net.cpp?ref=fab3f1467823c854cc88bc5a7e087263866ed87e",
        "patch": "@@ -1,4 +1,4 @@\n-// Copyright (c) 2009-2018 The Bitcoin Core developers\n+// Copyright (c) 2009-2019 The Bitcoin Core developers\n // Distributed under the MIT software license, see the accompanying\n // file COPYING or http://www.opensource.org/licenses/mit-license.php.\n \n@@ -109,11 +109,15 @@ static UniValue getpeerinfo(const JSONRPCRequest& request)\n             \"    \\\"whitelisted\\\": true|false, (boolean) Whether the peer is whitelisted\\n\"\n             \"    \\\"minfeefilter\\\": n,         (numeric) The minimum fee rate for transactions this peer accepts\\n\"\n             \"    \\\"bytessent_per_msg\\\": {\\n\"\n-            \"       \\\"addr\\\": n,              (numeric) The total bytes sent aggregated by message type\\n\"\n+            \"       \\\"msg\\\": n,               (numeric) The total bytes sent aggregated by message type\\n\"\n+            \"                               When a message type is not listed in this json object, the bytes sent are 0.\\n\"\n+            \"                               Only known message types can appear as keys in the object.\\n\"\n             \"       ...\\n\"\n             \"    },\\n\"\n             \"    \\\"bytesrecv_per_msg\\\": {\\n\"\n-            \"       \\\"addr\\\": n,              (numeric) The total bytes received aggregated by message type\\n\"\n+            \"       \\\"msg\\\": n,               (numeric) The total bytes received aggregated by message type\\n\"\n+            \"                               When a message type is not listed in this json object, the bytes received are 0.\\n\"\n+            \"                               Only known message types can appear as keys in the object and all bytes received of unknown message types are listed under '\"+NET_MESSAGE_COMMAND_OTHER+\"'.\\n\"\n             \"       ...\\n\"\n             \"    }\\n\"\n             \"  }\\n\"\n@@ -178,14 +182,14 @@ static UniValue getpeerinfo(const JSONRPCRequest& request)\n         obj.pushKV(\"minfeefilter\", ValueFromAmount(stats.minFeeFilter));\n \n         UniValue sendPerMsgCmd(UniValue::VOBJ);\n-        for (const mapMsgCmdSize::value_type &i : stats.mapSendBytesPerMsgCmd) {\n+        for (const auto& i : stats.mapSendBytesPerMsgCmd) {\n             if (i.second > 0)\n                 sendPerMsgCmd.pushKV(i.first, i.second);\n         }\n         obj.pushKV(\"bytessent_per_msg\", sendPerMsgCmd);\n \n         UniValue recvPerMsgCmd(UniValue::VOBJ);\n-        for (const mapMsgCmdSize::value_type &i : stats.mapRecvBytesPerMsgCmd) {\n+        for (const auto& i : stats.mapRecvBytesPerMsgCmd) {\n             if (i.second > 0)\n                 recvPerMsgCmd.pushKV(i.first, i.second);\n         }"
      }
    ]
  }
]