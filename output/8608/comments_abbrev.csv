luke-jr,2016-08-27T02:27:35Z,"Why include generated files (the manpages in this case) in the git repo, rather than just building them during make? (configure can disable man by default if help2man isn't found)\n",https://github.com/bitcoin/bitcoin/pull/8608#issuecomment-242890347,242890347,
laanwj,2016-08-27T06:30:58Z,"> Why include generated files (the manpages in this case) in the git repo, rather than just building them during make? (configure can disable man by default if help2man isn't found)\n\nBecause this (now manual) step requires actually executing the built executables to get their help output. I disagree with making that a default step in the build process. It will also not work with cross-compilatio",https://github.com/bitcoin/bitcoin/pull/8608#issuecomment-242899755,242899755,
laanwj,2016-08-27T06:34:52Z,"utACK, will test.\n",https://github.com/bitcoin/bitcoin/pull/8608#issuecomment-242899888,242899888,
MarcoFalke,2016-08-27T09:19:45Z,"Agree with @laanwj that â€‹it is helpful to differentiate between generation of the man pages and installation. Keep in mind that this allows to fiddle with the output, in case help2man is not perfect.\n",https://github.com/bitcoin/bitcoin/pull/8608#issuecomment-242906559,242906559,
jonasschnelli,2016-08-29T11:41:14Z,Concept ACK\n,https://github.com/bitcoin/bitcoin/pull/8608#issuecomment-243101217,243101217,
laanwj,2016-08-31T13:57:57Z,"Nits: \n- can we avoid the commit id being included in the generated manpages? This will generate diff noise every time they're regenerated for no good reason.\n  `Bitcoin Core RPC client version v0.13.0.0-ga402396`\n- `doc/release-process.md` should contain instructions to generate these pages (after bumping the version!)\n- `bitcoin-tx` has no man page.\n\nApart from that, tested ACK.\n",https://github.com/bitcoin/bitcoin/pull/8608#issuecomment-243772524,243772524,
theuni,2016-08-31T15:21:48Z,"Concept ACK.\n\nAgreed with the points above. Though, if we're pre-generating the pages and keeping them in-repo, we need to be careful about #ifdefs in help output.\n\nFor example: https://github.com/bitcoin/bitcoin/blob/master/src/init.cpp#L317\n\nAlso, I'd much rather use a makefile target for generating, similar to the way the other generated files are produced. That helps to keep everything i",https://github.com/bitcoin/bitcoin/pull/8608#issuecomment-243799540,243799540,
laanwj,2016-09-01T12:03:41Z,"> Though, if we're pre-generating the pages and keeping them in-repo, we need to be careful about #ifdefs in help output.\n\nI just don't like the alternative. If this could be parsed from the C source _without_ executing, I'd be fine with doing generation during build process.\nIn any case that can be done in the future, this is strictly an improvement to how things currently are.\n",https://github.com/bitcoin/bitcoin/pull/8608#issuecomment-244058317,244058317,
nomnombtc,2016-09-01T16:20:09Z,"> can we avoid the commit id being included in the generated manpages? This will generate diff noise every time they're regenerated for no good reason. Bitcoin Core RPC client version v0.13.0.0-ga402396\n\nYes I have updated the script somewhat to strip the commit id from the help2man output. It now also has some variables like BITCOIND BITCOINCLI and so on, as luke-jr suggested above somewhere an",https://github.com/bitcoin/bitcoin/pull/8608#issuecomment-244132377,244132377,
nomnombtc,2016-09-02T18:56:06Z,"here is something which is probably better.\nIt uses a Makefile target instead of a shellscript to run help2man and a few other small improvements.\n\nhttps://github.com/bitcoin/bitcoin/compare/master...nomnombtc:man_automake4\n\n> Changes compared to this here (8608):\n> - Shellscript replaced by Makefile target ""update-man"" - many thanks to @theuni\n> - DISTCHECK_CONFIGURE_FLAGS has been removed",https://github.com/bitcoin/bitcoin/pull/8608#issuecomment-244459588,244459588,
laanwj,2016-09-13T08:25:50Z,"Thanks for sticking with this, ACK d19583f\n",https://github.com/bitcoin/bitcoin/pull/8608#issuecomment-246611106,246611106,
luke-jr,2016-08-27T02:22:22Z,Normally we use --disable-\* for the help for options which are enabled by default.\n,https://github.com/bitcoin/bitcoin/pull/8608#discussion_r76508551,76508551,configure.ac
luke-jr,2016-08-27T02:22:44Z,(I wonder if it should perhaps be disabled by default when building for Windows?)\n,https://github.com/bitcoin/bitcoin/pull/8608#discussion_r76508555,76508555,configure.ac
luke-jr,2016-08-27T02:25:35Z,"Should probably mention the relevant binaries need to be in PATH, adjust it so the BITCOIND and/or BITCOINCLI environment variables are used, and/or just use the binaries in the build dir.\n",https://github.com/bitcoin/bitcoin/pull/8608#discussion_r76508603,76508603,contrib/devtools/README.md
nomnombtc,2016-08-27T22:43:26Z,"Makes sense after looking at the other configure options. Would this be better:\n\n```\n+    [AS_HELP_STRING([--disable-man],\n+                    [do not install man pages (default is to install)])],,\n```\n\nAnd should I remove ""# Enable manpages"" comment? only --disable-wallet and --debug has a comment everything else doesn't.\n",https://github.com/bitcoin/bitcoin/pull/8608#discussion_r76523323,76523323,configure.ac
luke-jr,2016-08-28T00:21:02Z,Sounds good to me\n,https://github.com/bitcoin/bitcoin/pull/8608#discussion_r76524082,76524082,configure.ac
nomnombtc,2016-08-28T00:42:26Z,"Hmm, the script was already a bit ugly, but it was very short which was the good thing about it :)\nWould you like something like this better: http://pastebin.com/j6JFaiaq\n\nOr I could leave it like it is and write:\n\n> A small script to automatically create manpages in ../../doc/man by running binaries in $PATH with the --help option.\n",https://github.com/bitcoin/bitcoin/pull/8608#discussion_r76524234,76524234,contrib/devtools/README.md
theuni,2016-08-31T15:10:42Z,Why not use a makefile target instead? All of that info would be readily available there.\n,https://github.com/bitcoin/bitcoin/pull/8608#discussion_r77006145,77006145,contrib/devtools/README.md
nomnombtc,2016-09-01T16:52:07Z,"> Why not use a makefile target instead? All of that info would be readily available there.\n\nDo you mean something like [this](https://github.com/bitcoin/bitcoin/blob/master/contrib/devtools/split-debug.sh.in) where it fills in some stuff in the script, or do you mean integrating help2man into the make buildprocess?\n\nBecause you can do this: https://www.gnu.org/software/help2man/#Makefile-usag",https://github.com/bitcoin/bitcoin/pull/8608#discussion_r77211639,77211639,contrib/devtools/README.md
nomnombtc,2016-09-01T18:58:53Z,"@theuni \nI am playing around right now with the `help2man` Makefile method and it seems it indeed only\nruns `help2man`:  _if_ the manpage files don't exist yet **OR** a string in the source cpp file changed (I have no idea how it does this - blackmagic?).\n\nSo if the man pages exist and the help options matches the source files, the end user can build  without having `help2man` installed. If th",https://github.com/bitcoin/bitcoin/pull/8608#discussion_r77233502,77233502,contrib/devtools/README.md
theuni,2016-09-02T02:14:59Z,"@nomnombtc I think they're just saying that if you commit pre-generated files to the repo, users don't have to do it.\n\nFor a makefile target, i mean something like this: https://github.com/bitcoin/bitcoin/blob/master/src/Makefile.qt.include#L408\n\nIn this case, it would look something like (in src/Makefile.am):\n\n``` Makefile\nupdate-man: $(bin_PROGRAMS)\n       $(AM_V_at)echo ""[COPYRIGHT]"" > ",https://github.com/bitcoin/bitcoin/pull/8608#discussion_r77284353,77284353,contrib/devtools/README.md
nomnombtc,2016-09-02T11:54:56Z,"@theuni \n\nOh ok now I get it, I was playing around with something like this:\n\n```\nbitcoind.1: $(top_builddir)/src/bitcoind.cpp\n        -$(HELP2MAN) --no-info --version-string=$(PACKAGE_VERSION) \\n          --output=$@ --name='manual page for $(BITCOIN_DAEMON_NAME) $(PACKAGE_VERSION)' \\n          $(top_builddir)/src/$(BITCOIN_DAEMON_NAME)$(EXEEXT)\n        -sed -i 's/\-$(shell git rev-parse",https://github.com/bitcoin/bitcoin/pull/8608#discussion_r77334227,77334227,contrib/devtools/README.md
