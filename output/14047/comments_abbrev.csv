DrahtBot,2018-08-24T12:15:23Z,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#15649](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/15649.html) (Add ChaCha20Poly1305@Bitcoin AEAD by jonass",https://github.com/bitcoin/bitcoin/pull/14047#issuecomment-415741455,415741455,
jonasschnelli,2019-03-05T14:48:30Z,Rebased,https://github.com/bitcoin/bitcoin/pull/14047#issuecomment-469707371,469707371,
sipa,2019-03-26T22:50:08Z,utACK acf3debc6a2f8b80a5de1e71bc658086c6de77b4,https://github.com/bitcoin/bitcoin/pull/14047#issuecomment-476883263,476883263,
jonasschnelli,2019-03-27T16:40:29Z,rebased,https://github.com/bitcoin/bitcoin/pull/14047#issuecomment-477245058,477245058,
jonasschnelli,2019-05-11T07:14:54Z,Thanks for the review. Fixed the C++ cast nit.,https://github.com/bitcoin/bitcoin/pull/14047#issuecomment-491486827,491486827,
promag,2019-05-13T18:13:32Z,Restarted failed job.,https://github.com/bitcoin/bitcoin/pull/14047#issuecomment-491929368,491929368,
laanwj,2019-05-16T17:24:45Z,"utACK 8794a4b3ae4d34a4cd21a7dee9f694eef7726a4f\nDon't want to hold this up on a few last-minute style nits and empty lines.\n",https://github.com/bitcoin/bitcoin/pull/14047#issuecomment-493158632,493158632,
sipa,2018-08-26T18:09:15Z,"You can avoid the copy to `data` if you use `static const char one[1] = {1}; CHMAC_SHA256(m_prk, 32).Write(info.data(), info.size()).Write(one, 1).Finalize(out);` instead.",https://github.com/bitcoin/bitcoin/pull/14047#discussion_r212834280,212834280,src/crypto/hkdf_sha256_32.cpp
jonasschnelli,2018-08-27T11:42:43Z,Oh yes. That's more efficient. Fixed.,https://github.com/bitcoin/bitcoin/pull/14047#discussion_r212946915,212946915,src/crypto/hkdf_sha256_32.cpp
Sjors,2018-09-02T10:21:15Z,"Why not use `BitcoinSharedSecret`as the salt, like in the BIP?",https://github.com/bitcoin/bitcoin/pull/14047#discussion_r214535573,214535573,src/test/crypto_tests.cpp
practicalswift,2018-09-10T17:23:01Z,"```\nsrc/./crypto/hkdf_sha256_32.h:22:10: warning: function 'CHKDF_HMAC_SHA256_L32::Expand32' has a definition with different parameter names [readability-inconsistent-declaration-parameter-name]\n```",https://github.com/bitcoin/bitcoin/pull/14047#discussion_r216405562,216405562,src/crypto/hkdf_sha256_32.h
jonasschnelli,2018-09-11T19:34:48Z,Thanks. Fixed.,https://github.com/bitcoin/bitcoin/pull/14047#discussion_r216794543,216794543,src/crypto/hkdf_sha256_32.h
sipa,2019-03-25T23:25:43Z,"The test here could be a bit more extensive (for example, signing/verifying a fixed message with the corresponding private key, and checking that the private key roundtrips after 2 negations).",https://github.com/bitcoin/bitcoin/pull/14047#discussion_r268893196,268893196,src/test/key_tests.cpp
sipa,2019-03-25T23:33:58Z,I think shorter-length HMAC_HKDF can be obtained by truncating the output of a longer-length one. So you could take all of the RFC's test vectors and truncate them to 32 bytes?,https://github.com/bitcoin/bitcoin/pull/14047#discussion_r268894881,268894881,src/test/crypto_tests.cpp
jonasschnelli,2019-03-26T17:09:36Z,Good idea. Followed @sipa's advice and changed to the 3 rfc5869 SHA256 test vectors (truncated OKM to 32 bytes).,https://github.com/bitcoin/bitcoin/pull/14047#discussion_r269218336,269218336,src/test/crypto_tests.cpp
jonasschnelli,2019-03-26T17:10:15Z,Good point. Extended the test to cover the double negation signature comparison.,https://github.com/bitcoin/bitcoin/pull/14047#discussion_r269218675,269218675,src/test/key_tests.cpp
sipa,2019-05-10T21:53:29Z,Style nit: we don't usually use the C++ cast operators for primitive types (just `(const unsigned char*)salt.c_str()` works).,https://github.com/bitcoin/bitcoin/pull/14047#discussion_r283053636,283053636,src/crypto/hkdf_sha256_32.cpp
sipa,2019-05-10T21:54:54Z,Same here.,https://github.com/bitcoin/bitcoin/pull/14047#discussion_r283053921,283053921,src/crypto/hkdf_sha256_32.cpp
promag,2019-05-13T18:15:53Z,"nit, 2019?",https://github.com/bitcoin/bitcoin/pull/14047#discussion_r283472183,283472183,src/crypto/hkdf_sha256_32.cpp
promag,2019-05-13T18:16:49Z,"nit, remove 2nd empty line.",https://github.com/bitcoin/bitcoin/pull/14047#discussion_r283472572,283472572,src/test/crypto_tests.cpp
promag,2019-05-13T18:17:06Z,"nit, space after `&`, not before.",https://github.com/bitcoin/bitcoin/pull/14047#discussion_r283472685,283472685,src/test/crypto_tests.cpp
