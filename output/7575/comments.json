[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/186973441",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#issuecomment-186973441",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7575",
    "id": 186973441,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4Njk3MzQ0MQ==",
    "user": {
      "login": "btcdrak",
      "id": 7275704,
      "node_id": "MDQ6VXNlcjcyNzU3MDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7275704?u=578995010af9e1872285cb8e67bcb4f6052d52dd&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/btcdrak",
      "html_url": "https://github.com/btcdrak",
      "followers_url": "https://api.github.com/users/btcdrak/followers",
      "following_url": "https://api.github.com/users/btcdrak/following{/other_user}",
      "gists_url": "https://api.github.com/users/btcdrak/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/btcdrak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/btcdrak/subscriptions",
      "organizations_url": "https://api.github.com/users/btcdrak/orgs",
      "repos_url": "https://api.github.com/users/btcdrak/repos",
      "events_url": "https://api.github.com/users/btcdrak/events{/privacy}",
      "received_events_url": "https://api.github.com/users/btcdrak/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-02-22T02:30:42Z",
    "updated_at": "2016-02-22T02:30:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "Could you add deployment status to the `getblockchaininfo` RPC?\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/186973441/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/186993497",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#issuecomment-186993497",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7575",
    "id": 186993497,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4Njk5MzQ5Nw==",
    "user": {
      "login": "dcousens",
      "id": 413395,
      "node_id": "MDQ6VXNlcjQxMzM5NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/413395?u=034ef1433a0704d9c91b57b993009b0383d6b7c0&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dcousens",
      "html_url": "https://github.com/dcousens",
      "followers_url": "https://api.github.com/users/dcousens/followers",
      "following_url": "https://api.github.com/users/dcousens/following{/other_user}",
      "gists_url": "https://api.github.com/users/dcousens/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dcousens/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dcousens/subscriptions",
      "organizations_url": "https://api.github.com/users/dcousens/orgs",
      "repos_url": "https://api.github.com/users/dcousens/repos",
      "events_url": "https://api.github.com/users/dcousens/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dcousens/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-02-22T03:51:30Z",
    "updated_at": "2016-02-22T03:51:54Z",
    "author_association": "CONTRIBUTOR",
    "body": "@sipa any reason not to just extend #7566?\n\nonce-over utACK 50278bb,  concept ACK\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/186993497/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/186995999",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#issuecomment-186995999",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7575",
    "id": 186995999,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4Njk5NTk5OQ==",
    "user": {
      "login": "btcdrak",
      "id": 7275704,
      "node_id": "MDQ6VXNlcjcyNzU3MDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7275704?u=578995010af9e1872285cb8e67bcb4f6052d52dd&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/btcdrak",
      "html_url": "https://github.com/btcdrak",
      "followers_url": "https://api.github.com/users/btcdrak/followers",
      "following_url": "https://api.github.com/users/btcdrak/following{/other_user}",
      "gists_url": "https://api.github.com/users/btcdrak/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/btcdrak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/btcdrak/subscriptions",
      "organizations_url": "https://api.github.com/users/btcdrak/orgs",
      "repos_url": "https://api.github.com/users/btcdrak/repos",
      "events_url": "https://api.github.com/users/btcdrak/events{/privacy}",
      "received_events_url": "https://api.github.com/users/btcdrak/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-02-22T04:13:30Z",
    "updated_at": "2016-02-22T04:13:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "Concept ACK, I prefer this BIP9 implementation.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/186995999/reactions",
      "total_count": 3,
      "+1": 1,
      "-1": 2,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/186998247",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#issuecomment-186998247",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7575",
    "id": 186998247,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4Njk5ODI0Nw==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-02-22T04:19:06Z",
    "updated_at": "2016-02-22T04:19:06Z",
    "author_association": "MEMBER",
    "body": "@dcousens I wrote most of this before I saw #7566, which would need some\nrefactoring anyway to support the warning logic. I did use the params\nstructure from there.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/186998247/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/187250275",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#issuecomment-187250275",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7575",
    "id": 187250275,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4NzI1MDI3NQ==",
    "user": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?u=eab5d0cdbb6cc25087cb61d4ca4a6f85255f42a7&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-02-22T16:18:21Z",
    "updated_at": "2016-02-22T16:18:21Z",
    "author_association": "CONTRIBUTOR",
    "body": "There are some `versionbits_test.cpp` formatting/syntax issues (https://travis-ci.org/bitcoin/bitcoin/jobs/110833452#L1736) \n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/187250275/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/188464813",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#issuecomment-188464813",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7575",
    "id": 188464813,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE4ODQ2NDgxMw==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-02-24T21:43:29Z",
    "updated_at": "2016-02-24T21:43:29Z",
    "author_association": "MEMBER",
    "body": "Fixed tests.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/188464813/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/191581820",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#issuecomment-191581820",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7575",
    "id": 191581820,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5MTU4MTgyMA==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-03T04:51:03Z",
    "updated_at": "2016-03-03T04:51:03Z",
    "author_association": "MEMBER",
    "body": "Updated to correspond to latest BIP9 (see https://github.com/bitcoin/bips/pull/344, https://github.com/bitcoin/bips/pull/345, https://github.com/bitcoin/bips/pull/346), and fixed the tests.\n\nI also have an alternate version that factors out the cache, see https://github.com/sipa/bitcoin/commit/218d2fdcbfb207ed75f4f5a6fc7a1b5de6d791b8).\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/191581820/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/192024746",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#issuecomment-192024746",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7575",
    "id": 192024746,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5MjAyNDc0Ng==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-03T23:49:12Z",
    "updated_at": "2016-03-03T23:49:37Z",
    "author_association": "MEMBER",
    "body": "1) Moved the versionbits logic out of consensus, and make it not depend on it is\n2) Added (very basic) reporting of BIP9 deployment status through RPC\n3) Switched the window size from 2016 to 144 for regtest\n4) Factored the cache out of the versionbits logic classes\n\nShould be ready for review.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/192024746/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/192039041",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#issuecomment-192039041",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7575",
    "id": 192039041,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5MjAzOTA0MQ==",
    "user": {
      "login": "jtimon",
      "id": 1008458,
      "node_id": "MDQ6VXNlcjEwMDg0NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1008458?u=636a89c913ac407f52bb8d57c4fff384b98f421f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtimon",
      "html_url": "https://github.com/jtimon",
      "followers_url": "https://api.github.com/users/jtimon/followers",
      "following_url": "https://api.github.com/users/jtimon/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtimon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtimon/subscriptions",
      "organizations_url": "https://api.github.com/users/jtimon/orgs",
      "repos_url": "https://api.github.com/users/jtimon/repos",
      "events_url": "https://api.github.com/users/jtimon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtimon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-04T00:50:26Z",
    "updated_at": "2016-03-04T00:53:48Z",
    "author_association": "MEMBER",
    "body": "utACK 7662816\nEDIT: To be clear, I didn't meant to rename consensus/versionbits.o to versionbits.o, I was just talking about the \"consensus package\" in the makefile (because otherwise the whole package would depend on chain.o and its dependencies). I'm sorry for the misunderstanding and I understand if you don't want to change it back again. \n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/192039041/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/192445502",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#issuecomment-192445502",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7575",
    "id": 192445502,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5MjQ0NTUwMg==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-04T20:10:06Z",
    "updated_at": "2016-03-04T20:10:06Z",
    "author_association": "MEMBER",
    "body": "Fixed a few bugs:\n- typo in the warning logic which made it trigger all the time\n- newline at the end of unknown softfork warning log message\n- bip9_softforks was not being added to the getblockchaininfo output\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/192445502/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/192496392",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#issuecomment-192496392",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7575",
    "id": 192496392,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5MjQ5NjM5Mg==",
    "user": {
      "login": "btcdrak",
      "id": 7275704,
      "node_id": "MDQ6VXNlcjcyNzU3MDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7275704?u=578995010af9e1872285cb8e67bcb4f6052d52dd&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/btcdrak",
      "html_url": "https://github.com/btcdrak",
      "followers_url": "https://api.github.com/users/btcdrak/followers",
      "following_url": "https://api.github.com/users/btcdrak/following{/other_user}",
      "gists_url": "https://api.github.com/users/btcdrak/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/btcdrak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/btcdrak/subscriptions",
      "organizations_url": "https://api.github.com/users/btcdrak/orgs",
      "repos_url": "https://api.github.com/users/btcdrak/repos",
      "events_url": "https://api.github.com/users/btcdrak/events{/privacy}",
      "received_events_url": "https://api.github.com/users/btcdrak/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-04T22:19:47Z",
    "updated_at": "2016-03-04T22:19:47Z",
    "author_association": "CONTRIBUTOR",
    "body": "Would it be possible to emit debug logs for the softfork state changes?\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/192496392/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/192532465",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#issuecomment-192532465",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7575",
    "id": 192532465,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5MjUzMjQ2NQ==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-05T00:12:07Z",
    "updated_at": "2016-03-05T00:12:07Z",
    "author_association": "MEMBER",
    "body": "@btcdrak That would require breaking some layering, as the consensus logic never sees the transitions, and the threshold logic is used for both consensus and warnings.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/192532465/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/192532742",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#issuecomment-192532742",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7575",
    "id": 192532742,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5MjUzMjc0Mg==",
    "user": {
      "login": "btcdrak",
      "id": 7275704,
      "node_id": "MDQ6VXNlcjcyNzU3MDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7275704?u=578995010af9e1872285cb8e67bcb4f6052d52dd&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/btcdrak",
      "html_url": "https://github.com/btcdrak",
      "followers_url": "https://api.github.com/users/btcdrak/followers",
      "following_url": "https://api.github.com/users/btcdrak/following{/other_user}",
      "gists_url": "https://api.github.com/users/btcdrak/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/btcdrak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/btcdrak/subscriptions",
      "organizations_url": "https://api.github.com/users/btcdrak/orgs",
      "repos_url": "https://api.github.com/users/btcdrak/repos",
      "events_url": "https://api.github.com/users/btcdrak/events{/privacy}",
      "received_events_url": "https://api.github.com/users/btcdrak/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-05T00:13:57Z",
    "updated_at": "2016-03-05T00:13:57Z",
    "author_association": "CONTRIBUTOR",
    "body": "@sipa no problem, I drop the idea.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/192532742/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/192534616",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#issuecomment-192534616",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7575",
    "id": 192534616,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5MjUzNDYxNg==",
    "user": {
      "login": "btcdrak",
      "id": 7275704,
      "node_id": "MDQ6VXNlcjcyNzU3MDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7275704?u=578995010af9e1872285cb8e67bcb4f6052d52dd&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/btcdrak",
      "html_url": "https://github.com/btcdrak",
      "followers_url": "https://api.github.com/users/btcdrak/followers",
      "following_url": "https://api.github.com/users/btcdrak/following{/other_user}",
      "gists_url": "https://api.github.com/users/btcdrak/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/btcdrak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/btcdrak/subscriptions",
      "organizations_url": "https://api.github.com/users/btcdrak/orgs",
      "repos_url": "https://api.github.com/users/btcdrak/repos",
      "events_url": "https://api.github.com/users/btcdrak/events{/privacy}",
      "received_events_url": "https://api.github.com/users/btcdrak/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-05T00:24:39Z",
    "updated_at": "2016-03-05T00:24:39Z",
    "author_association": "CONTRIBUTOR",
    "body": "Tested ACK a7f15a6\n\nPart of my tests involved porting the softforks activation from #7561 and converting the RPC tests to check both enforcement and RPC bip9 status. Work done in https://github.com/bitcoin/bitcoin/compare/master...btcdrak:vb_68_112_113_1\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/192534616/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 1,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/193987892",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#issuecomment-193987892",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7575",
    "id": 193987892,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5Mzk4Nzg5Mg==",
    "user": {
      "login": "morcos",
      "id": 4360349,
      "node_id": "MDQ6VXNlcjQzNjAzNDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4360349?u=b7dd63827227d69794b5fe28797b1bd107b930dd&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/morcos",
      "html_url": "https://github.com/morcos",
      "followers_url": "https://api.github.com/users/morcos/followers",
      "following_url": "https://api.github.com/users/morcos/following{/other_user}",
      "gists_url": "https://api.github.com/users/morcos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/morcos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/morcos/subscriptions",
      "organizations_url": "https://api.github.com/users/morcos/orgs",
      "repos_url": "https://api.github.com/users/morcos/repos",
      "events_url": "https://api.github.com/users/morcos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/morcos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-08T22:07:09Z",
    "updated_at": "2016-03-08T22:07:09Z",
    "author_association": "MEMBER",
    "body": "@sipa see https://github.com/sipa/bitcoin/pull/58 for suggestions on how to rework the warning logic.\nIt separates it into two different things.  \n- Something similar to the old warnings which just runs in the steady state and lets you know when blocks are happening that aren't what you expect and triggers an alert if this is over 50%.  This could apply to unknown BIP 9 softforks or any other change to the use of nVersion.\n- Something actually detects activation of unknown BIP 9 soft forks.  This runs even during IBD.  I think this is important so old code doesn't miss the transient signaling of a new soft fork if it happened to not be online, or so that if someone accidentally downloads old code and syncs it, they can detect they are missing something.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/193987892/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/193995624",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#issuecomment-193995624",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7575",
    "id": 193995624,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5Mzk5NTYyNA==",
    "user": {
      "login": "gmaxwell",
      "id": 858454,
      "node_id": "MDQ6VXNlcjg1ODQ1NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/858454?u=63e5c438c242094837a9deeda775d77988b508bf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gmaxwell",
      "html_url": "https://github.com/gmaxwell",
      "followers_url": "https://api.github.com/users/gmaxwell/followers",
      "following_url": "https://api.github.com/users/gmaxwell/following{/other_user}",
      "gists_url": "https://api.github.com/users/gmaxwell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
      "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
      "repos_url": "https://api.github.com/users/gmaxwell/repos",
      "events_url": "https://api.github.com/users/gmaxwell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-08T22:21:49Z",
    "updated_at": "2016-03-08T22:21:49Z",
    "author_association": "CONTRIBUTOR",
    "body": "I think we want tracking during IBD for another reason: I think we'll want to disable mining (return error on GBT) after an unknown BIP9 fork locks in unless explicitly overridden (ignorebip9fork=height:bit in config); otherwise there is a rule-reversion-risk, where long after a fork locks some non-trivial portion of hashpower happens to downgrade to older code that doesn't support the existing locked forks.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/193995624/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/196640225",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#issuecomment-196640225",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7575",
    "id": 196640225,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5NjY0MDIyNQ==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-15T03:42:47Z",
    "updated_at": "2016-03-15T03:42:47Z",
    "author_association": "MEMBER",
    "body": "@gmaxwell The code now will only do checks after IBD, but it will detect unknown softforks that activated in the past.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/196640225/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/196727306",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#issuecomment-196727306",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7575",
    "id": 196727306,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5NjcyNzMwNg==",
    "user": {
      "login": "btcdrak",
      "id": 7275704,
      "node_id": "MDQ6VXNlcjcyNzU3MDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7275704?u=578995010af9e1872285cb8e67bcb4f6052d52dd&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/btcdrak",
      "html_url": "https://github.com/btcdrak",
      "followers_url": "https://api.github.com/users/btcdrak/followers",
      "following_url": "https://api.github.com/users/btcdrak/following{/other_user}",
      "gists_url": "https://api.github.com/users/btcdrak/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/btcdrak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/btcdrak/subscriptions",
      "organizations_url": "https://api.github.com/users/btcdrak/orgs",
      "repos_url": "https://api.github.com/users/btcdrak/repos",
      "events_url": "https://api.github.com/users/btcdrak/events{/privacy}",
      "received_events_url": "https://api.github.com/users/btcdrak/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-15T08:55:30Z",
    "updated_at": "2016-03-15T08:55:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "@sipa Now that there is a \"TESTDUMMY\" softfork, can I suggest removing `Add CHECKSEQUENCEVERIFY softfork through BIP9` sipa@2b4bb57 and we add it through #7648 separately (which has been rebase to this branch now).\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/196727306/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/196893712",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#issuecomment-196893712",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7575",
    "id": 196893712,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5Njg5MzcxMg==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-15T15:55:56Z",
    "updated_at": "2016-03-15T15:55:56Z",
    "author_association": "MEMBER",
    "body": "All comments addressed, I think.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/196893712/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/196952235",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#issuecomment-196952235",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7575",
    "id": 196952235,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5Njk1MjIzNQ==",
    "user": {
      "login": "btcdrak",
      "id": 7275704,
      "node_id": "MDQ6VXNlcjcyNzU3MDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7275704?u=578995010af9e1872285cb8e67bcb4f6052d52dd&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/btcdrak",
      "html_url": "https://github.com/btcdrak",
      "followers_url": "https://api.github.com/users/btcdrak/followers",
      "following_url": "https://api.github.com/users/btcdrak/following{/other_user}",
      "gists_url": "https://api.github.com/users/btcdrak/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/btcdrak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/btcdrak/subscriptions",
      "organizations_url": "https://api.github.com/users/btcdrak/orgs",
      "repos_url": "https://api.github.com/users/btcdrak/repos",
      "events_url": "https://api.github.com/users/btcdrak/events{/privacy}",
      "received_events_url": "https://api.github.com/users/btcdrak/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-15T18:05:07Z",
    "updated_at": "2016-03-15T18:05:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "Tested ACK 532cbb2\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/196952235/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/197001189",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#issuecomment-197001189",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7575",
    "id": 197001189,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5NzAwMTE4OQ==",
    "user": {
      "login": "sdaftuar",
      "id": 7463573,
      "node_id": "MDQ6VXNlcjc0NjM1NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sdaftuar",
      "html_url": "https://github.com/sdaftuar",
      "followers_url": "https://api.github.com/users/sdaftuar/followers",
      "following_url": "https://api.github.com/users/sdaftuar/following{/other_user}",
      "gists_url": "https://api.github.com/users/sdaftuar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
      "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
      "repos_url": "https://api.github.com/users/sdaftuar/repos",
      "events_url": "https://api.github.com/users/sdaftuar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-15T20:10:43Z",
    "updated_at": "2016-03-15T20:10:43Z",
    "author_association": "MEMBER",
    "body": "ACK\n\nIf anyone is interested I also tested the warning logic with an RPC test (https://github.com/sdaftuar/bitcoin/commit/4c2e8ba2282e0948aa8680ab5e8283e5f8ef12f5)\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/197001189/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/197348857",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#issuecomment-197348857",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7575",
    "id": 197348857,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5NzM0ODg1Nw==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-16T14:10:29Z",
    "updated_at": "2016-03-16T14:10:29Z",
    "author_association": "MEMBER",
    "body": "Included @sdaftuar's warning logic RPC test.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/197348857/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/197381968",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#issuecomment-197381968",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7575",
    "id": 197381968,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5NzM4MTk2OA==",
    "user": {
      "login": "jtimon",
      "id": 1008458,
      "node_id": "MDQ6VXNlcjEwMDg0NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1008458?u=636a89c913ac407f52bb8d57c4fff384b98f421f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtimon",
      "html_url": "https://github.com/jtimon",
      "followers_url": "https://api.github.com/users/jtimon/followers",
      "following_url": "https://api.github.com/users/jtimon/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtimon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtimon/subscriptions",
      "organizations_url": "https://api.github.com/users/jtimon/orgs",
      "repos_url": "https://api.github.com/users/jtimon/repos",
      "events_url": "https://api.github.com/users/jtimon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtimon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-16T15:26:15Z",
    "updated_at": "2016-03-16T15:40:26Z",
    "author_association": "MEMBER",
    "body": "re-utACK 8c74cedef53ab791ed333f25794f8b9d2e9f51aa ~~modulo last nit~~.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/197381968/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/197494142",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#issuecomment-197494142",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7575",
    "id": 197494142,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5NzQ5NDE0Mg==",
    "user": {
      "login": "morcos",
      "id": 4360349,
      "node_id": "MDQ6VXNlcjQzNjAzNDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4360349?u=b7dd63827227d69794b5fe28797b1bd107b930dd&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/morcos",
      "html_url": "https://github.com/morcos",
      "followers_url": "https://api.github.com/users/morcos/followers",
      "following_url": "https://api.github.com/users/morcos/following{/other_user}",
      "gists_url": "https://api.github.com/users/morcos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/morcos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/morcos/subscriptions",
      "organizations_url": "https://api.github.com/users/morcos/orgs",
      "repos_url": "https://api.github.com/users/morcos/repos",
      "events_url": "https://api.github.com/users/morcos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/morcos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-16T19:06:56Z",
    "updated_at": "2016-03-16T19:06:56Z",
    "author_association": "MEMBER",
    "body": "Code review ACK\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/197494142/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/197528184",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#issuecomment-197528184",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7575",
    "id": 197528184,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5NzUyODE4NA==",
    "user": {
      "login": "btcdrak",
      "id": 7275704,
      "node_id": "MDQ6VXNlcjcyNzU3MDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7275704?u=578995010af9e1872285cb8e67bcb4f6052d52dd&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/btcdrak",
      "html_url": "https://github.com/btcdrak",
      "followers_url": "https://api.github.com/users/btcdrak/followers",
      "following_url": "https://api.github.com/users/btcdrak/following{/other_user}",
      "gists_url": "https://api.github.com/users/btcdrak/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/btcdrak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/btcdrak/subscriptions",
      "organizations_url": "https://api.github.com/users/btcdrak/orgs",
      "repos_url": "https://api.github.com/users/btcdrak/repos",
      "events_url": "https://api.github.com/users/btcdrak/events{/privacy}",
      "received_events_url": "https://api.github.com/users/btcdrak/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-16T20:18:11Z",
    "updated_at": "2016-03-16T20:18:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "Tested ACK 8c74ced\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/197528184/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/197551895",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#issuecomment-197551895",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7575",
    "id": 197551895,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5NzU1MTg5NQ==",
    "user": {
      "login": "morcos",
      "id": 4360349,
      "node_id": "MDQ6VXNlcjQzNjAzNDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4360349?u=b7dd63827227d69794b5fe28797b1bd107b930dd&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/morcos",
      "html_url": "https://github.com/morcos",
      "followers_url": "https://api.github.com/users/morcos/followers",
      "following_url": "https://api.github.com/users/morcos/following{/other_user}",
      "gists_url": "https://api.github.com/users/morcos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/morcos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/morcos/subscriptions",
      "organizations_url": "https://api.github.com/users/morcos/orgs",
      "repos_url": "https://api.github.com/users/morcos/repos",
      "events_url": "https://api.github.com/users/morcos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/morcos/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-16T21:14:26Z",
    "updated_at": "2016-03-16T21:14:26Z",
    "author_association": "MEMBER",
    "body": "@sipa I realize you might still be changing this, but in the event that you're not, I backported it to 0.11 along with the soft fork for BIP 68,112,113 here: \nhttps://github.com/bitcoin/bitcoin/compare/0.11...morcos:backportBIP9SoftFork?expand=1\n\nThe RPC tests are annoying to backport, so I left 2 of them out, but tested using the recent RPC test bip68-112-113.py against the 0.11 binary.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/197551895/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/197605532",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#issuecomment-197605532",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7575",
    "id": 197605532,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5NzYwNTUzMg==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-16T23:35:01Z",
    "updated_at": "2016-03-16T23:35:01Z",
    "author_association": "MEMBER",
    "body": "@morcos I'm fine with the current state.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/197605532/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/198037159",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#issuecomment-198037159",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7575",
    "id": 198037159,
    "node_id": "MDEyOklzc3VlQ29tbWVudDE5ODAzNzE1OQ==",
    "user": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?u=eab5d0cdbb6cc25087cb61d4ca4a6f85255f42a7&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-03-17T19:07:48Z",
    "updated_at": "2016-03-17T19:07:48Z",
    "author_association": "CONTRIBUTOR",
    "body": "utACK\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/198037159/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54153581",
    "pull_request_review_id": null,
    "id": 54153581,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTUzNTgx",
    "diff_hunk": "@@ -2080,6 +2081,47 @@ void PartitionCheck(bool (*initialDownloadCheck)(), CCriticalSection& cs, const\n     }\n }\n \n+Consensus::VersionBitsConditionChecker checkCSV(Consensus::DEPLOYMENT_CSV);\n+Consensus::VersionBitsConditionChecker* const softforkcheck[] = {&checkCSV};\n+\n+int32_t ComputeBlockVersion(const CBlockIndex* pindexPrev, const Consensus::Params& params)\n+{\n+    LOCK(cs_main);\n+    int32_t nVersion = 0;\n+\n+    for (unsigned int i = 0; i < sizeof(softforkcheck) / sizeof(softforkcheck[0]); i++) {\n+        if (softforkcheck[i]->IsSetFor(pindexPrev, params)) {\n+            nVersion |= softforkcheck[i]->Mask(params);\n+        }\n+    }\n+\n+    if (nVersion == 0) {",
    "path": "src/main.cpp",
    "position": null,
    "original_position": 26,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "99f66325e83f8da3b5dfe38cad4f5fdc60bca05a",
    "user": {
      "login": "jtimon",
      "id": 1008458,
      "node_id": "MDQ6VXNlcjEwMDg0NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1008458?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtimon",
      "html_url": "https://github.com/jtimon",
      "followers_url": "https://api.github.com/users/jtimon/followers",
      "following_url": "https://api.github.com/users/jtimon/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtimon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtimon/subscriptions",
      "organizations_url": "https://api.github.com/users/jtimon/orgs",
      "repos_url": "https://api.github.com/users/jtimon/repos",
      "events_url": "https://api.github.com/users/jtimon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtimon/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Why not simply start using the versionbit prefix without voting for any concrete bit instead?\n",
    "created_at": "2016-02-25T19:53:39Z",
    "updated_at": "2016-03-16T14:10:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54153581",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54153581"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54153581"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54153581/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2098,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54153961",
    "pull_request_review_id": null,
    "id": 54153961,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTUzOTYx",
    "diff_hunk": "@@ -2451,20 +2498,14 @@ void static UpdateTip(CBlockIndex *pindexNew) {\n     static bool fWarned = false;\n     if (!IsInitialBlockDownload() && !fWarned)",
    "path": "src/main.cpp",
    "position": null,
    "original_position": 70,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "99f66325e83f8da3b5dfe38cad4f5fdc60bca05a",
    "user": {
      "login": "jtimon",
      "id": 1008458,
      "node_id": "MDQ6VXNlcjEwMDg0NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1008458?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtimon",
      "html_url": "https://github.com/jtimon",
      "followers_url": "https://api.github.com/users/jtimon/followers",
      "following_url": "https://api.github.com/users/jtimon/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtimon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtimon/subscriptions",
      "organizations_url": "https://api.github.com/users/jtimon/orgs",
      "repos_url": "https://api.github.com/users/jtimon/repos",
      "events_url": "https://api.github.com/users/jtimon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtimon/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "\"Unrelated\" question: I know this is not changed in this PR, but why don't we want these warnings on initial block download?\nWould it be a problem to make these checks in ConnectBlock() rather than UpdateTip() ?\n",
    "created_at": "2016-02-25T19:55:34Z",
    "updated_at": "2016-03-16T14:10:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54153961",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54153961"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54153961"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54153961/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2499,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54154107",
    "pull_request_review_id": null,
    "id": 54154107,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTU0MTA3",
    "diff_hunk": "@@ -2451,20 +2498,14 @@ void static UpdateTip(CBlockIndex *pindexNew) {\n     static bool fWarned = false;\n     if (!IsInitialBlockDownload() && !fWarned)\n     {\n-        int nUpgraded = 0;\n         const CBlockIndex* pindex = chainActive.Tip();\n-        for (int i = 0; i < 100 && pindex != NULL; i++)\n-        {\n-            if (pindex->nVersion > CBlock::CURRENT_VERSION)\n-                ++nUpgraded;\n-            pindex = pindex->pprev;\n-        }\n-        if (nUpgraded > 0)\n-            LogPrintf(\"%s: %d of last 100 blocks above version %d\\n\", __func__, nUpgraded, (int)CBlock::CURRENT_VERSION);\n-        if (nUpgraded > 100/2)\n-        {\n+        if (warningcheck.IsLockedIn(pindex, chainParams.GetConsensus())) {\n             // strMiscWarning is read by GetWarnings(), called by Qt and the JSON-RPC code to warn the user:\n-            strMiscWarning = _(\"Warning: This version is obsolete; upgrade required!\");\n+            if (warningcheck.IsActiveFor(pindex, chainParams.GetConsensus())) {\n+                strMiscWarning = _(\"Warning: unknown softfork has activated\");",
    "path": "src/main.cpp",
    "position": null,
    "original_position": 88,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "99f66325e83f8da3b5dfe38cad4f5fdc60bca05a",
    "user": {
      "login": "jtimon",
      "id": 1008458,
      "node_id": "MDQ6VXNlcjEwMDg0NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1008458?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtimon",
      "html_url": "https://github.com/jtimon",
      "followers_url": "https://api.github.com/users/jtimon/followers",
      "following_url": "https://api.github.com/users/jtimon/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtimon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtimon/subscriptions",
      "organizations_url": "https://api.github.com/users/jtimon/orgs",
      "repos_url": "https://api.github.com/users/jtimon/repos",
      "events_url": "https://api.github.com/users/jtimon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtimon/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Minor nit: Is it really worth it to notify this twice (once when is locked in and 2016 blocks later when it's activated)?\n",
    "created_at": "2016-02-25T19:56:37Z",
    "updated_at": "2016-03-16T14:10:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54154107",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54154107"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54154107"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54154107/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2505,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54154753",
    "pull_request_review_id": null,
    "id": 54154753,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTU0NzUz",
    "diff_hunk": "@@ -2451,20 +2498,14 @@ void static UpdateTip(CBlockIndex *pindexNew) {\n     static bool fWarned = false;\n     if (!IsInitialBlockDownload() && !fWarned)\n     {\n-        int nUpgraded = 0;\n         const CBlockIndex* pindex = chainActive.Tip();\n-        for (int i = 0; i < 100 && pindex != NULL; i++)\n-        {\n-            if (pindex->nVersion > CBlock::CURRENT_VERSION)\n-                ++nUpgraded;\n-            pindex = pindex->pprev;\n-        }\n-        if (nUpgraded > 0)\n-            LogPrintf(\"%s: %d of last 100 blocks above version %d\\n\", __func__, nUpgraded, (int)CBlock::CURRENT_VERSION);\n-        if (nUpgraded > 100/2)\n-        {\n+        if (warningcheck.IsLockedIn(pindex, chainParams.GetConsensus())) {\n             // strMiscWarning is read by GetWarnings(), called by Qt and the JSON-RPC code to warn the user:\n-            strMiscWarning = _(\"Warning: This version is obsolete; upgrade required!\");\n+            if (warningcheck.IsActiveFor(pindex, chainParams.GetConsensus())) {\n+                strMiscWarning = _(\"Warning: unknown softfork has activated\");",
    "path": "src/main.cpp",
    "position": null,
    "original_position": 88,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "99f66325e83f8da3b5dfe38cad4f5fdc60bca05a",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Well, one is before you're forked off and the other is after. The warning\ntexts here could certainly be more descriptive.\n",
    "created_at": "2016-02-25T20:00:34Z",
    "updated_at": "2016-03-16T14:10:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54154753",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54154753"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54154753"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54154753/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2505,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54155143",
    "pull_request_review_id": null,
    "id": 54155143,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTU1MTQz",
    "diff_hunk": "@@ -2080,6 +2081,47 @@ void PartitionCheck(bool (*initialDownloadCheck)(), CCriticalSection& cs, const\n     }\n }\n \n+Consensus::VersionBitsConditionChecker checkCSV(Consensus::DEPLOYMENT_CSV);\n+Consensus::VersionBitsConditionChecker* const softforkcheck[] = {&checkCSV};\n+\n+int32_t ComputeBlockVersion(const CBlockIndex* pindexPrev, const Consensus::Params& params)\n+{\n+    LOCK(cs_main);\n+    int32_t nVersion = 0;\n+\n+    for (unsigned int i = 0; i < sizeof(softforkcheck) / sizeof(softforkcheck[0]); i++) {\n+        if (softforkcheck[i]->IsSetFor(pindexPrev, params)) {\n+            nVersion |= softforkcheck[i]->Mask(params);\n+        }\n+    }\n+\n+    if (nVersion == 0) {",
    "path": "src/main.cpp",
    "position": null,
    "original_position": 26,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "99f66325e83f8da3b5dfe38cad4f5fdc60bca05a",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "> Why not simply start using the versionbit prefix without voting for any\n> concrete bit instead?\n\nThat would mean that versionbits on itself is a change, and lack of\nadoption of versionbits by miners would then cause the warning logic to\ntrigger on new nodes.\n\nUsing this logc here, versionbits gets rolled out simultaneously with the\nfirst fork that uses it.\n",
    "created_at": "2016-02-25T20:02:59Z",
    "updated_at": "2016-03-16T14:10:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54155143",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54155143"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54155143"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54155143/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2098,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54159317",
    "pull_request_review_id": null,
    "id": 54159317,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTU5MzE3",
    "diff_hunk": "@@ -0,0 +1,96 @@\n+// Copyright (c) 2016 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_CONSENSUS_VERSIONBITS\n+#define BITCOIN_CONSENSUS_VERSIONBITS\n+\n+#include \"chain.h\"\n+#include <map>\n+\n+namespace Consensus\n+{\n+\n+/** What block version to use for new blocks (pre versionbits) */\n+static const int32_t VERSIONBITS_LAST_OLD_BLOCK_VERSION = 4;\n+/** What bits to set in version for versionbits blocks */\n+static const int32_t VERSIONBITS_TOP_BITS = 0x20000000UL;\n+/** What bitmask determines whether versionbits is in use */\n+static const int32_t VERSIONBITS_TOP_MASK = 0x60000000UL;\n+\n+/**\n+ * Abstract class that implements BIP9-style threshold logic, and caches results.\n+ */\n+class AbstractThresholdConditionChecker {\n+protected:\n+    virtual bool Condition(const CBlockIndex* pindex, const Params& params) =0;\n+    virtual int64_t BeginTime(const Params& params) =0;\n+    virtual int64_t EndTime(const Params& params) =0;\n+    virtual int Period(const Params& params) =0;\n+    virtual int Threshold(const Params& params) =0;\n+\n+    enum State {\n+        UNDEFINED,\n+        DEFINED,\n+        LOCKEDIN,\n+        ACTIVE,\n+        FAILED,\n+        ABANDONED\n+    };\n+\n+    State GetStateFor(const CBlockIndex* pindexPrev, const Params& params);\n+\n+private:\n+    // A map that gives the state for blocks whose height is a multiple of Period().\n+    // The map is indexed by the block's parent, however, so all keys in the map\n+    // will either be NULL or a block with (height + 1) % Period() == 0.\n+    std::map<const CBlockIndex*, State> cache;",
    "path": "src/consensus/versionbits.h",
    "position": null,
    "original_position": 47,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "99f66325e83f8da3b5dfe38cad4f5fdc60bca05a",
    "user": {
      "login": "jtimon",
      "id": 1008458,
      "node_id": "MDQ6VXNlcjEwMDg0NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1008458?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtimon",
      "html_url": "https://github.com/jtimon",
      "followers_url": "https://api.github.com/users/jtimon/followers",
      "following_url": "https://api.github.com/users/jtimon/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtimon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtimon/subscriptions",
      "organizations_url": "https://api.github.com/users/jtimon/orgs",
      "repos_url": "https://api.github.com/users/jtimon/repos",
      "events_url": "https://api.github.com/users/jtimon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtimon/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This is the main difference between your implementation and mine. You have a separate Cache for each deployment while I have a single cache with containing the states of all the deployments. While mine should be more efficient (at least storage-wise), your code is more reusable (as shown in the way you implement the warnings checks).\nAnother goal for caching the states together is to simplify things in case libconsensus exposes (C API) the cache in the future to support concurrent calls.\n\nEDIT, the biggest difference is my CVersionBitsState::usedBitsMaskCache see the comment in the state machine.\n",
    "created_at": "2016-02-25T20:31:37Z",
    "updated_at": "2016-03-16T14:10:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54159317",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54159317"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54159317"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54159317/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 47,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54159556",
    "pull_request_review_id": null,
    "id": 54159556,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTU5NTU2",
    "diff_hunk": "@@ -0,0 +1,96 @@\n+// Copyright (c) 2016 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_CONSENSUS_VERSIONBITS\n+#define BITCOIN_CONSENSUS_VERSIONBITS\n+\n+#include \"chain.h\"\n+#include <map>\n+\n+namespace Consensus\n+{\n+\n+/** What block version to use for new blocks (pre versionbits) */\n+static const int32_t VERSIONBITS_LAST_OLD_BLOCK_VERSION = 4;\n+/** What bits to set in version for versionbits blocks */\n+static const int32_t VERSIONBITS_TOP_BITS = 0x20000000UL;\n+/** What bitmask determines whether versionbits is in use */\n+static const int32_t VERSIONBITS_TOP_MASK = 0x60000000UL;\n+\n+/**\n+ * Abstract class that implements BIP9-style threshold logic, and caches results.\n+ */\n+class AbstractThresholdConditionChecker {\n+protected:\n+    virtual bool Condition(const CBlockIndex* pindex, const Params& params) =0;\n+    virtual int64_t BeginTime(const Params& params) =0;\n+    virtual int64_t EndTime(const Params& params) =0;\n+    virtual int Period(const Params& params) =0;\n+    virtual int Threshold(const Params& params) =0;\n+\n+    enum State {\n+        UNDEFINED,\n+        DEFINED,",
    "path": "src/consensus/versionbits.h",
    "position": null,
    "original_position": 34,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "99f66325e83f8da3b5dfe38cad4f5fdc60bca05a",
    "user": {
      "login": "jtimon",
      "id": 1008458,
      "node_id": "MDQ6VXNlcjEwMDg0NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1008458?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtimon",
      "html_url": "https://github.com/jtimon",
      "followers_url": "https://api.github.com/users/jtimon/followers",
      "following_url": "https://api.github.com/users/jtimon/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtimon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtimon/subscriptions",
      "organizations_url": "https://api.github.com/users/jtimon/orgs",
      "repos_url": "https://api.github.com/users/jtimon/repos",
      "events_url": "https://api.github.com/users/jtimon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtimon/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Bike-shedding: I'm doing s/UNDEFINED/DEFINED s/DEFINED/STARTED isntead, which I think it's more clear:\nIf it's in the chainparams is defined, it just hasn't started yet. Undefined/unkown deployments are those which you don't have in your chainparams.\n",
    "created_at": "2016-02-25T20:33:29Z",
    "updated_at": "2016-03-16T14:10:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54159556",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54159556"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54159556"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54159556/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 34,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54159960",
    "pull_request_review_id": null,
    "id": 54159960,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTU5OTYw",
    "diff_hunk": "@@ -0,0 +1,96 @@\n+// Copyright (c) 2016 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_CONSENSUS_VERSIONBITS\n+#define BITCOIN_CONSENSUS_VERSIONBITS\n+\n+#include \"chain.h\"\n+#include <map>\n+\n+namespace Consensus\n+{\n+\n+/** What block version to use for new blocks (pre versionbits) */\n+static const int32_t VERSIONBITS_LAST_OLD_BLOCK_VERSION = 4;\n+/** What bits to set in version for versionbits blocks */\n+static const int32_t VERSIONBITS_TOP_BITS = 0x20000000UL;\n+/** What bitmask determines whether versionbits is in use */\n+static const int32_t VERSIONBITS_TOP_MASK = 0x60000000UL;\n+\n+/**\n+ * Abstract class that implements BIP9-style threshold logic, and caches results.\n+ */\n+class AbstractThresholdConditionChecker {\n+protected:\n+    virtual bool Condition(const CBlockIndex* pindex, const Params& params) =0;\n+    virtual int64_t BeginTime(const Params& params) =0;\n+    virtual int64_t EndTime(const Params& params) =0;\n+    virtual int Period(const Params& params) =0;\n+    virtual int Threshold(const Params& params) =0;\n+\n+    enum State {\n+        UNDEFINED,\n+        DEFINED,",
    "path": "src/consensus/versionbits.h",
    "position": null,
    "original_position": 34,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "99f66325e83f8da3b5dfe38cad4f5fdc60bca05a",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Makes sense.\n",
    "created_at": "2016-02-25T20:36:17Z",
    "updated_at": "2016-03-16T14:10:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54159960",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54159960"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54159960"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54159960/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 34,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54165956",
    "pull_request_review_id": null,
    "id": 54165956,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTY1OTU2",
    "diff_hunk": "@@ -2451,20 +2498,14 @@ void static UpdateTip(CBlockIndex *pindexNew) {\n     static bool fWarned = false;\n     if (!IsInitialBlockDownload() && !fWarned)\n     {\n-        int nUpgraded = 0;\n         const CBlockIndex* pindex = chainActive.Tip();\n-        for (int i = 0; i < 100 && pindex != NULL; i++)\n-        {\n-            if (pindex->nVersion > CBlock::CURRENT_VERSION)\n-                ++nUpgraded;\n-            pindex = pindex->pprev;\n-        }\n-        if (nUpgraded > 0)\n-            LogPrintf(\"%s: %d of last 100 blocks above version %d\\n\", __func__, nUpgraded, (int)CBlock::CURRENT_VERSION);\n-        if (nUpgraded > 100/2)\n-        {\n+        if (warningcheck.IsLockedIn(pindex, chainParams.GetConsensus())) {\n             // strMiscWarning is read by GetWarnings(), called by Qt and the JSON-RPC code to warn the user:\n-            strMiscWarning = _(\"Warning: This version is obsolete; upgrade required!\");\n+            if (warningcheck.IsActiveFor(pindex, chainParams.GetConsensus())) {\n+                strMiscWarning = _(\"Warning: unknown softfork has activated\");",
    "path": "src/main.cpp",
    "position": null,
    "original_position": 88,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "99f66325e83f8da3b5dfe38cad4f5fdc60bca05a",
    "user": {
      "login": "jtimon",
      "id": 1008458,
      "node_id": "MDQ6VXNlcjEwMDg0NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1008458?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtimon",
      "html_url": "https://github.com/jtimon",
      "followers_url": "https://api.github.com/users/jtimon/followers",
      "following_url": "https://api.github.com/users/jtimon/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtimon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtimon/subscriptions",
      "organizations_url": "https://api.github.com/users/jtimon/orgs",
      "repos_url": "https://api.github.com/users/jtimon/repos",
      "events_url": "https://api.github.com/users/jtimon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtimon/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "But unless there's a reorg, nothing is going to stop the locked in deployment from being activated.\nI guess more messages don't hurt, even if we need to repeat the check (states are cached anyway).\n",
    "created_at": "2016-02-25T21:16:47Z",
    "updated_at": "2016-03-16T14:10:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54165956",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54165956"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54165956"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54165956/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2505,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54167000",
    "pull_request_review_id": null,
    "id": 54167000,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTY3MDAw",
    "diff_hunk": "@@ -2080,6 +2081,47 @@ void PartitionCheck(bool (*initialDownloadCheck)(), CCriticalSection& cs, const\n     }\n }\n \n+Consensus::VersionBitsConditionChecker checkCSV(Consensus::DEPLOYMENT_CSV);\n+Consensus::VersionBitsConditionChecker* const softforkcheck[] = {&checkCSV};\n+\n+int32_t ComputeBlockVersion(const CBlockIndex* pindexPrev, const Consensus::Params& params)\n+{\n+    LOCK(cs_main);\n+    int32_t nVersion = 0;\n+\n+    for (unsigned int i = 0; i < sizeof(softforkcheck) / sizeof(softforkcheck[0]); i++) {\n+        if (softforkcheck[i]->IsSetFor(pindexPrev, params)) {\n+            nVersion |= softforkcheck[i]->Mask(params);\n+        }\n+    }\n+\n+    if (nVersion == 0) {",
    "path": "src/main.cpp",
    "position": null,
    "original_position": 26,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "99f66325e83f8da3b5dfe38cad4f5fdc60bca05a",
    "user": {
      "login": "jtimon",
      "id": 1008458,
      "node_id": "MDQ6VXNlcjEwMDg0NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1008458?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtimon",
      "html_url": "https://github.com/jtimon",
      "followers_url": "https://api.github.com/users/jtimon/followers",
      "following_url": "https://api.github.com/users/jtimon/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtimon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtimon/subscriptions",
      "organizations_url": "https://api.github.com/users/jtimon/orgs",
      "repos_url": "https://api.github.com/users/jtimon/repos",
      "events_url": "https://api.github.com/users/jtimon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtimon/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I mean, if we are going to wait to deploy the first SF to merge it, I think it makes even more sense that we never return Consensus::VERSIONBITS_LAST_OLD_BLOCK_VERSION here.\n\n> That would mean that versionbits on itself is a change, and lack of\n> adoption of versionbits by miners would then cause the warning logic to\n> trigger on new nodes.\n\nJust like changing the version to 8 without doing anything else would be. But it doesn't affect functionality.\nThe new nodes would only get warnings if the miners, apart from adopting this change were adopting or implementing other change to vote on concrete bits (if they only set nVersion to Consensus::VERSIONBITS_TOP_BITS), no warnings should be raised (unless an unknown SF has been deployed using versionbits, in which case is good that they get the warnings).\n",
    "created_at": "2016-02-25T21:23:59Z",
    "updated_at": "2016-03-16T14:10:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54167000",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54167000"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54167000"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54167000/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2098,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54169609",
    "pull_request_review_id": null,
    "id": 54169609,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTY5NjA5",
    "diff_hunk": "@@ -2080,6 +2081,47 @@ void PartitionCheck(bool (*initialDownloadCheck)(), CCriticalSection& cs, const\n     }\n }\n \n+Consensus::VersionBitsConditionChecker checkCSV(Consensus::DEPLOYMENT_CSV);\n+Consensus::VersionBitsConditionChecker* const softforkcheck[] = {&checkCSV};\n+\n+int32_t ComputeBlockVersion(const CBlockIndex* pindexPrev, const Consensus::Params& params)\n+{\n+    LOCK(cs_main);\n+    int32_t nVersion = 0;\n+\n+    for (unsigned int i = 0; i < sizeof(softforkcheck) / sizeof(softforkcheck[0]); i++) {\n+        if (softforkcheck[i]->IsSetFor(pindexPrev, params)) {\n+            nVersion |= softforkcheck[i]->Mask(params);\n+        }\n+    }\n+\n+    if (nVersion == 0) {",
    "path": "src/main.cpp",
    "position": null,
    "original_position": 26,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "99f66325e83f8da3b5dfe38cad4f5fdc60bca05a",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Assume the start date for the first bip9 softfork is april 1st, but we\nrelease code with bip9 and that softfork on march 1st.\n\nThat means that it's likely that during march no new-style nVersion will be\nmined. That also means that anyone who does run upgraded code will get\nwarnings, because the nVersion they expect (0x20000000) differs from the\none they see (4).\n",
    "created_at": "2016-02-25T21:42:14Z",
    "updated_at": "2016-03-16T14:10:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54169609",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54169609"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54169609"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54169609/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2098,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54172894",
    "pull_request_review_id": null,
    "id": 54172894,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTcyODk0",
    "diff_hunk": "@@ -2080,6 +2081,47 @@ void PartitionCheck(bool (*initialDownloadCheck)(), CCriticalSection& cs, const\n     }\n }\n \n+Consensus::VersionBitsConditionChecker checkCSV(Consensus::DEPLOYMENT_CSV);\n+Consensus::VersionBitsConditionChecker* const softforkcheck[] = {&checkCSV};\n+\n+int32_t ComputeBlockVersion(const CBlockIndex* pindexPrev, const Consensus::Params& params)\n+{\n+    LOCK(cs_main);\n+    int32_t nVersion = 0;\n+\n+    for (unsigned int i = 0; i < sizeof(softforkcheck) / sizeof(softforkcheck[0]); i++) {\n+        if (softforkcheck[i]->IsSetFor(pindexPrev, params)) {\n+            nVersion |= softforkcheck[i]->Mask(params);\n+        }\n+    }\n+\n+    if (nVersion == 0) {",
    "path": "src/main.cpp",
    "position": null,
    "original_position": 26,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "99f66325e83f8da3b5dfe38cad4f5fdc60bca05a",
    "user": {
      "login": "jtimon",
      "id": 1008458,
      "node_id": "MDQ6VXNlcjEwMDg0NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1008458?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtimon",
      "html_url": "https://github.com/jtimon",
      "followers_url": "https://api.github.com/users/jtimon/followers",
      "following_url": "https://api.github.com/users/jtimon/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtimon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtimon/subscriptions",
      "organizations_url": "https://api.github.com/users/jtimon/orgs",
      "repos_url": "https://api.github.com/users/jtimon/repos",
      "events_url": "https://api.github.com/users/jtimon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtimon/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Ok, I get it, it's the old nodes seeing the \"empty versionbits\" version which would get (unnecessarily?) be told to upgrade and it doesn't matter whether we introduce a SF with BIP9 or not because the start date will be after the miners start using the new code to produce their new versions.\n\nBut I think I still disagree, though.\nIf in march 15th 95% of the miners are ready to deploy a softfork scheduled for april 1st, I believe old nodes should actually receive the upgrade warning already, even if the message is not accurate.\n\nEDIT: anyway, this disagreement is minor in the sense that it cannot greatly affect the implementation, the  difference will be about 3-lines. So don't hurry to answer this.\n\nEDIT: nah, 95% of miner will use BIP9 later, never mind, question answered.\n",
    "created_at": "2016-02-25T22:04:04Z",
    "updated_at": "2016-03-16T14:10:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54172894",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54172894"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54172894"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54172894/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2098,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54179238",
    "pull_request_review_id": null,
    "id": 54179238,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTc5MjM4",
    "diff_hunk": "@@ -0,0 +1,95 @@\n+// Copyright (c) 2016 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"versionbits.h\"\n+\n+namespace Consensus\n+{\n+\n+AbstractThresholdConditionChecker::State AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex* pindexPrev, const Consensus::Params& params)\n+{\n+    int nPeriod = Period(params);\n+    int nThreshold = Threshold(params);\n+    int64_t nTimeDefined = BeginTime(params);\n+    int64_t nTimeTimeout = EndTime(params);\n+\n+    // A block's state is always the same as that of the first of its period, so it is computed based on a pindexPrev whose height equals a multiple of nPeriod - 1.\n+    if (pindexPrev != NULL) {\n+        pindexPrev = pindexPrev->GetAncestor(pindexPrev->nHeight - ((pindexPrev->nHeight + 1) % nPeriod));\n+    }\n+\n+    // Walk backwards in steps of nPeriod to find a pindexPrev whose information is known\n+    std::vector<const CBlockIndex*> vToCompute;\n+    while (cache.count(pindexPrev) == 0) {\n+        if (pindexPrev == NULL) {\n+            // The genesis block is by definition undefined.\n+            cache[pindexPrev] = UNDEFINED;\n+            break;\n+        }\n+        if (pindexPrev->GetMedianTimePast() < nTimeDefined) {\n+            // Optimizaton: don't recompute down further, as we know every earlier block will be before the start time\n+            cache[pindexPrev] = UNDEFINED;\n+            break;\n+        }\n+        vToCompute.push_back(pindexPrev);\n+        pindexPrev = pindexPrev->GetAncestor(pindexPrev->nHeight - nPeriod);\n+    }\n+\n+    // At this point, cache[pindexPrev] is known\n+    assert(cache.count(pindexPrev));\n+    State state = cache[pindexPrev];\n+\n+    // Now walk forward and compute the state of descendants of pindexPrev\n+    while (!vToCompute.empty()) {\n+        State stateNext = state;\n+        pindexPrev = vToCompute.back();\n+        vToCompute.pop_back();\n+\n+        switch (state) {\n+            case UNDEFINED: {\n+                if (pindexPrev->GetMedianTimePast() >= nTimeTimeout) {\n+                    stateNext = FAILED;\n+                } else if (pindexPrev->GetMedianTimePast() >= nTimeDefined) {\n+                    stateNext = DEFINED;",
    "path": "src/consensus/versionbits.cpp",
    "position": null,
    "original_position": 54,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "99f66325e83f8da3b5dfe38cad4f5fdc60bca05a",
    "user": {
      "login": "jtimon",
      "id": 1008458,
      "node_id": "MDQ6VXNlcjEwMDg0NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1008458?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtimon",
      "html_url": "https://github.com/jtimon",
      "followers_url": "https://api.github.com/users/jtimon/followers",
      "following_url": "https://api.github.com/users/jtimon/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtimon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtimon/subscriptions",
      "organizations_url": "https://api.github.com/users/jtimon/orgs",
      "repos_url": "https://api.github.com/users/jtimon/repos",
      "events_url": "https://api.github.com/users/jtimon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtimon/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Important concern: Shouldn't this check that the same bit is not currently being used by other deployment defined in chainparams for the same bit (and already started or locked in) before advancing to the next state?\n",
    "created_at": "2016-02-25T22:52:14Z",
    "updated_at": "2016-03-16T14:10:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54179238",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54179238"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54179238"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54179238/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 54,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54180005",
    "pull_request_review_id": null,
    "id": 54180005,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTgwMDA1",
    "diff_hunk": "@@ -0,0 +1,95 @@\n+// Copyright (c) 2016 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"versionbits.h\"\n+\n+namespace Consensus\n+{\n+\n+AbstractThresholdConditionChecker::State AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex* pindexPrev, const Consensus::Params& params)\n+{\n+    int nPeriod = Period(params);\n+    int nThreshold = Threshold(params);\n+    int64_t nTimeDefined = BeginTime(params);\n+    int64_t nTimeTimeout = EndTime(params);\n+\n+    // A block's state is always the same as that of the first of its period, so it is computed based on a pindexPrev whose height equals a multiple of nPeriod - 1.\n+    if (pindexPrev != NULL) {\n+        pindexPrev = pindexPrev->GetAncestor(pindexPrev->nHeight - ((pindexPrev->nHeight + 1) % nPeriod));\n+    }\n+\n+    // Walk backwards in steps of nPeriod to find a pindexPrev whose information is known\n+    std::vector<const CBlockIndex*> vToCompute;\n+    while (cache.count(pindexPrev) == 0) {\n+        if (pindexPrev == NULL) {\n+            // The genesis block is by definition undefined.\n+            cache[pindexPrev] = UNDEFINED;\n+            break;\n+        }\n+        if (pindexPrev->GetMedianTimePast() < nTimeDefined) {\n+            // Optimizaton: don't recompute down further, as we know every earlier block will be before the start time\n+            cache[pindexPrev] = UNDEFINED;\n+            break;\n+        }\n+        vToCompute.push_back(pindexPrev);\n+        pindexPrev = pindexPrev->GetAncestor(pindexPrev->nHeight - nPeriod);\n+    }\n+\n+    // At this point, cache[pindexPrev] is known\n+    assert(cache.count(pindexPrev));\n+    State state = cache[pindexPrev];\n+\n+    // Now walk forward and compute the state of descendants of pindexPrev\n+    while (!vToCompute.empty()) {\n+        State stateNext = state;\n+        pindexPrev = vToCompute.back();\n+        vToCompute.pop_back();\n+\n+        switch (state) {\n+            case UNDEFINED: {\n+                if (pindexPrev->GetMedianTimePast() >= nTimeTimeout) {",
    "path": "src/consensus/versionbits.cpp",
    "position": null,
    "original_position": 51,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "99f66325e83f8da3b5dfe38cad4f5fdc60bca05a",
    "user": {
      "login": "jtimon",
      "id": 1008458,
      "node_id": "MDQ6VXNlcjEwMDg0NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1008458?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtimon",
      "html_url": "https://github.com/jtimon",
      "followers_url": "https://api.github.com/users/jtimon/followers",
      "following_url": "https://api.github.com/users/jtimon/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtimon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtimon/subscriptions",
      "organizations_url": "https://api.github.com/users/jtimon/orgs",
      "repos_url": "https://api.github.com/users/jtimon/repos",
      "events_url": "https://api.github.com/users/jtimon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtimon/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This check is redundant with the similar one in the DEFINED state (assuming the check is done before counting upgrade confirmations). You could also remove the break, so that a deployment changing from UNDEFINED to DEFINED has the chance of moving to FAILED or LOCKED_IN in the same round.\n",
    "created_at": "2016-02-25T22:58:16Z",
    "updated_at": "2016-03-16T14:10:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54180005",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54180005"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54180005"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54180005/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 51,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54183870",
    "pull_request_review_id": null,
    "id": 54183870,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTgzODcw",
    "diff_hunk": "@@ -2080,6 +2081,47 @@ void PartitionCheck(bool (*initialDownloadCheck)(), CCriticalSection& cs, const\n     }\n }\n \n+Consensus::VersionBitsConditionChecker checkCSV(Consensus::DEPLOYMENT_CSV);",
    "path": "src/main.cpp",
    "position": null,
    "original_position": 12,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "99f66325e83f8da3b5dfe38cad4f5fdc60bca05a",
    "user": {
      "login": "jtimon",
      "id": 1008458,
      "node_id": "MDQ6VXNlcjEwMDg0NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1008458?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtimon",
      "html_url": "https://github.com/jtimon",
      "followers_url": "https://api.github.com/users/jtimon/followers",
      "following_url": "https://api.github.com/users/jtimon/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtimon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtimon/subscriptions",
      "organizations_url": "https://api.github.com/users/jtimon/orgs",
      "repos_url": "https://api.github.com/users/jtimon/repos",
      "events_url": "https://api.github.com/users/jtimon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtimon/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "These variables could be both static and be in consensus/versionbits.cpp instead of main.cpp by moving ComputeBlockVersion() to versionbits as well (of course, without cs_main).\n\nWarningBitsConditionChecker could be encapsulated behind a function there too. In a very far future in which Bitcoin Core only uses libconsensus through its C API, that `GetVersionBitsWarnings(const CBlockIndex* pindexPrev, const Consensus::Params&)` function seems much closer from being \"exposable\" in libconsensus than class `Consensus::AbstractThresholdConditionChecker`.\n\nI know that ComputeBlockVersion() and GetVersionBitsWarnings() are not strictly consensus code, but they heavily depend on consensus code, and I think it would be a wasted opportunity not to have this functionality as encapsulated as possible from birth.\n",
    "created_at": "2016-02-25T23:34:50Z",
    "updated_at": "2016-03-16T14:10:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54183870",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54183870"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54183870"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54183870/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2084,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54187861",
    "pull_request_review_id": null,
    "id": 54187861,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTg3ODYx",
    "diff_hunk": "@@ -2080,6 +2081,47 @@ void PartitionCheck(bool (*initialDownloadCheck)(), CCriticalSection& cs, const\n     }\n }\n \n+Consensus::VersionBitsConditionChecker checkCSV(Consensus::DEPLOYMENT_CSV);",
    "path": "src/main.cpp",
    "position": null,
    "original_position": 12,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "99f66325e83f8da3b5dfe38cad4f5fdc60bca05a",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "The reason I didn't put them in versionbits is exactly because the lock is\nin main. Post c++11 we can move locks to libconsensus, and the versionbits\ncache can have its own lock.\n",
    "created_at": "2016-02-26T00:20:32Z",
    "updated_at": "2016-03-16T14:10:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54187861",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54187861"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54187861"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54187861/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2084,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54188013",
    "pull_request_review_id": null,
    "id": 54188013,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTg4MDEz",
    "diff_hunk": "@@ -0,0 +1,95 @@\n+// Copyright (c) 2016 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"versionbits.h\"\n+\n+namespace Consensus\n+{\n+\n+AbstractThresholdConditionChecker::State AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex* pindexPrev, const Consensus::Params& params)\n+{\n+    int nPeriod = Period(params);\n+    int nThreshold = Threshold(params);\n+    int64_t nTimeDefined = BeginTime(params);\n+    int64_t nTimeTimeout = EndTime(params);\n+\n+    // A block's state is always the same as that of the first of its period, so it is computed based on a pindexPrev whose height equals a multiple of nPeriod - 1.\n+    if (pindexPrev != NULL) {\n+        pindexPrev = pindexPrev->GetAncestor(pindexPrev->nHeight - ((pindexPrev->nHeight + 1) % nPeriod));\n+    }\n+\n+    // Walk backwards in steps of nPeriod to find a pindexPrev whose information is known\n+    std::vector<const CBlockIndex*> vToCompute;\n+    while (cache.count(pindexPrev) == 0) {\n+        if (pindexPrev == NULL) {\n+            // The genesis block is by definition undefined.\n+            cache[pindexPrev] = UNDEFINED;\n+            break;\n+        }\n+        if (pindexPrev->GetMedianTimePast() < nTimeDefined) {\n+            // Optimizaton: don't recompute down further, as we know every earlier block will be before the start time\n+            cache[pindexPrev] = UNDEFINED;\n+            break;\n+        }\n+        vToCompute.push_back(pindexPrev);\n+        pindexPrev = pindexPrev->GetAncestor(pindexPrev->nHeight - nPeriod);\n+    }\n+\n+    // At this point, cache[pindexPrev] is known\n+    assert(cache.count(pindexPrev));\n+    State state = cache[pindexPrev];\n+\n+    // Now walk forward and compute the state of descendants of pindexPrev\n+    while (!vToCompute.empty()) {\n+        State stateNext = state;\n+        pindexPrev = vToCompute.back();\n+        vToCompute.pop_back();\n+\n+        switch (state) {\n+            case UNDEFINED: {\n+                if (pindexPrev->GetMedianTimePast() >= nTimeTimeout) {",
    "path": "src/consensus/versionbits.cpp",
    "position": null,
    "original_position": 51,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "99f66325e83f8da3b5dfe38cad4f5fdc60bca05a",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I think the semantics are simpler without the possibility of going from\nundefined to lockedin in one transition.\n",
    "created_at": "2016-02-26T00:22:17Z",
    "updated_at": "2016-03-16T14:10:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54188013",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54188013"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54188013"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54188013/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 51,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54188119",
    "pull_request_review_id": null,
    "id": 54188119,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTg4MTE5",
    "diff_hunk": "@@ -2176,6 +2218,11 @@ bool ConnectBlock(const CBlock& block, CValidationState& state, CBlockIndex* pin\n         flags |= SCRIPT_VERIFY_CHECKLOCKTIMEVERIFY;\n     }\n \n+    // Start enforcing CHECKSEQUENCEVERIFY using versionbits logic.",
    "path": "src/main.cpp",
    "position": null,
    "original_position": 60,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "99f66325e83f8da3b5dfe38cad4f5fdc60bca05a",
    "user": {
      "login": "jtimon",
      "id": 1008458,
      "node_id": "MDQ6VXNlcjEwMDg0NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1008458?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtimon",
      "html_url": "https://github.com/jtimon",
      "followers_url": "https://api.github.com/users/jtimon/followers",
      "following_url": "https://api.github.com/users/jtimon/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtimon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtimon/subscriptions",
      "organizations_url": "https://api.github.com/users/jtimon/orgs",
      "repos_url": "https://api.github.com/users/jtimon/repos",
      "events_url": "https://api.github.com/users/jtimon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtimon/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "please, please, please libconsensus refactor nit:\n\nCould you replace these lines with\n\n```\nflags |= Consensus::GetFlags(pindex, chainparams.GetConsensus());\n```\n\n?\n(is it `pindex->pprev` or just `pindex` here?)\n\nThen the function defined in consensus/versionbits.cpp can be extended for new deployments while avoiding new consensus code in main.\n\nThat implies, again, that checkCSV (and thus softforkcheck) would need to move to consensus/versionbits.cpp.\n",
    "created_at": "2016-02-26T00:23:34Z",
    "updated_at": "2016-03-16T14:10:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54188119",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54188119"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54188119"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54188119/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2221,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54263123",
    "pull_request_review_id": null,
    "id": 54263123,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjYzMTIz",
    "diff_hunk": "@@ -0,0 +1,95 @@\n+// Copyright (c) 2016 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"versionbits.h\"\n+\n+namespace Consensus\n+{\n+\n+AbstractThresholdConditionChecker::State AbstractThresholdConditionChecker::GetStateFor(const CBlockIndex* pindexPrev, const Consensus::Params& params)\n+{\n+    int nPeriod = Period(params);\n+    int nThreshold = Threshold(params);\n+    int64_t nTimeDefined = BeginTime(params);\n+    int64_t nTimeTimeout = EndTime(params);\n+\n+    // A block's state is always the same as that of the first of its period, so it is computed based on a pindexPrev whose height equals a multiple of nPeriod - 1.\n+    if (pindexPrev != NULL) {\n+        pindexPrev = pindexPrev->GetAncestor(pindexPrev->nHeight - ((pindexPrev->nHeight + 1) % nPeriod));\n+    }\n+\n+    // Walk backwards in steps of nPeriod to find a pindexPrev whose information is known\n+    std::vector<const CBlockIndex*> vToCompute;\n+    while (cache.count(pindexPrev) == 0) {\n+        if (pindexPrev == NULL) {\n+            // The genesis block is by definition undefined.\n+            cache[pindexPrev] = UNDEFINED;\n+            break;\n+        }\n+        if (pindexPrev->GetMedianTimePast() < nTimeDefined) {\n+            // Optimizaton: don't recompute down further, as we know every earlier block will be before the start time\n+            cache[pindexPrev] = UNDEFINED;\n+            break;\n+        }\n+        vToCompute.push_back(pindexPrev);\n+        pindexPrev = pindexPrev->GetAncestor(pindexPrev->nHeight - nPeriod);\n+    }\n+\n+    // At this point, cache[pindexPrev] is known\n+    assert(cache.count(pindexPrev));\n+    State state = cache[pindexPrev];\n+\n+    // Now walk forward and compute the state of descendants of pindexPrev\n+    while (!vToCompute.empty()) {\n+        State stateNext = state;\n+        pindexPrev = vToCompute.back();\n+        vToCompute.pop_back();\n+\n+        switch (state) {\n+            case UNDEFINED: {\n+                if (pindexPrev->GetMedianTimePast() >= nTimeTimeout) {",
    "path": "src/consensus/versionbits.cpp",
    "position": null,
    "original_position": 51,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "99f66325e83f8da3b5dfe38cad4f5fdc60bca05a",
    "user": {
      "login": "jtimon",
      "id": 1008458,
      "node_id": "MDQ6VXNlcjEwMDg0NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1008458?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtimon",
      "html_url": "https://github.com/jtimon",
      "followers_url": "https://api.github.com/users/jtimon/followers",
      "following_url": "https://api.github.com/users/jtimon/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtimon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtimon/subscriptions",
      "organizations_url": "https://api.github.com/users/jtimon/orgs",
      "repos_url": "https://api.github.com/users/jtimon/repos",
      "events_url": "https://api.github.com/users/jtimon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtimon/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "fair enough, we're talking about saving 3-4 lines to libconsensus or leave them as self-documentation. If I forget to copy you on this, please, remind me.\n",
    "created_at": "2016-02-26T16:12:10Z",
    "updated_at": "2016-03-16T14:10:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54263123",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54263123"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54263123"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54263123/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 51,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54264966",
    "pull_request_review_id": null,
    "id": 54264966,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjY0OTY2",
    "diff_hunk": "@@ -2080,6 +2081,47 @@ void PartitionCheck(bool (*initialDownloadCheck)(), CCriticalSection& cs, const\n     }\n }\n \n+Consensus::VersionBitsConditionChecker checkCSV(Consensus::DEPLOYMENT_CSV);",
    "path": "src/main.cpp",
    "position": null,
    "original_position": 12,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "99f66325e83f8da3b5dfe38cad4f5fdc60bca05a",
    "user": {
      "login": "jtimon",
      "id": 1008458,
      "node_id": "MDQ6VXNlcjEwMDg0NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1008458?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtimon",
      "html_url": "https://github.com/jtimon",
      "followers_url": "https://api.github.com/users/jtimon/followers",
      "following_url": "https://api.github.com/users/jtimon/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtimon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtimon/subscriptions",
      "organizations_url": "https://api.github.com/users/jtimon/orgs",
      "repos_url": "https://api.github.com/users/jtimon/repos",
      "events_url": "https://api.github.com/users/jtimon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtimon/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I don't think we want locks in libconsensus, not even post c++11. This reminds me of a previous conversation we had about concurrency and the cache. It seems a renounced to supporting concurrent calls without locks in libconsensus for the wrong reason. When you previously said \" no need to have locks in the internal cache, the caller can get cs_main\", it seems you meant something different than what I understood. I will go back to having a C API interface for the cache.\n\nIn this PR, can't the caller of GetFlags (), ComputeBlockVersion() and GetVersionBitsWarnings() take the lock (assuming you move this code behind those 3 functions to encapsulate the static vars)?\n",
    "created_at": "2016-02-26T16:25:04Z",
    "updated_at": "2016-03-16T14:10:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54264966",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54264966"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54264966"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54264966/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2084,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54518445",
    "pull_request_review_id": null,
    "id": 54518445,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTE4NDQ1",
    "diff_hunk": "@@ -0,0 +1,96 @@\n+// Copyright (c) 2016 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_CONSENSUS_VERSIONBITS\n+#define BITCOIN_CONSENSUS_VERSIONBITS\n+\n+#include \"chain.h\"\n+#include <map>\n+\n+namespace Consensus\n+{\n+\n+/** What block version to use for new blocks (pre versionbits) */\n+static const int32_t VERSIONBITS_LAST_OLD_BLOCK_VERSION = 4;\n+/** What bits to set in version for versionbits blocks */\n+static const int32_t VERSIONBITS_TOP_BITS = 0x20000000UL;\n+/** What bitmask determines whether versionbits is in use */\n+static const int32_t VERSIONBITS_TOP_MASK = 0x60000000UL;\n+\n+/**\n+ * Abstract class that implements BIP9-style threshold logic, and caches results.\n+ */\n+class AbstractThresholdConditionChecker {\n+protected:\n+    virtual bool Condition(const CBlockIndex* pindex, const Params& params) =0;\n+    virtual int64_t BeginTime(const Params& params) =0;\n+    virtual int64_t EndTime(const Params& params) =0;\n+    virtual int Period(const Params& params) =0;\n+    virtual int Threshold(const Params& params) =0;\n+\n+    enum State {\n+        UNDEFINED,\n+        DEFINED,",
    "path": "src/consensus/versionbits.h",
    "position": null,
    "original_position": 34,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "99f66325e83f8da3b5dfe38cad4f5fdc60bca05a",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "See https://github.com/bitcoin/bips/pull/344.\n",
    "created_at": "2016-03-01T03:26:11Z",
    "updated_at": "2016-03-16T14:10:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54518445",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54518445"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54518445"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54518445/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 34,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54518873",
    "pull_request_review_id": null,
    "id": 54518873,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTE4ODcz",
    "diff_hunk": "@@ -2080,6 +2081,47 @@ void PartitionCheck(bool (*initialDownloadCheck)(), CCriticalSection& cs, const\n     }\n }\n \n+Consensus::VersionBitsConditionChecker checkCSV(Consensus::DEPLOYMENT_CSV);",
    "path": "src/main.cpp",
    "position": null,
    "original_position": 12,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "99f66325e83f8da3b5dfe38cad4f5fdc60bca05a",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I'll try another implementation that does that. Separating the cache and the logic probably makes sense.\n",
    "created_at": "2016-03-01T03:34:09Z",
    "updated_at": "2016-03-16T14:10:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54518873",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54518873"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54518873"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54518873/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2084,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54920354",
    "pull_request_review_id": null,
    "id": 54920354,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTIwMzU0",
    "diff_hunk": "@@ -2176,6 +2218,11 @@ bool ConnectBlock(const CBlock& block, CValidationState& state, CBlockIndex* pin\n         flags |= SCRIPT_VERIFY_CHECKLOCKTIMEVERIFY;\n     }\n \n+    // Start enforcing CHECKSEQUENCEVERIFY using versionbits logic.",
    "path": "src/main.cpp",
    "position": null,
    "original_position": 60,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "99f66325e83f8da3b5dfe38cad4f5fdc60bca05a",
    "user": {
      "login": "sdaftuar",
      "id": 7463573,
      "node_id": "MDQ6VXNlcjc0NjM1NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sdaftuar",
      "html_url": "https://github.com/sdaftuar",
      "followers_url": "https://api.github.com/users/sdaftuar/followers",
      "following_url": "https://api.github.com/users/sdaftuar/following{/other_user}",
      "gists_url": "https://api.github.com/users/sdaftuar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
      "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
      "repos_url": "https://api.github.com/users/sdaftuar/repos",
      "events_url": "https://api.github.com/users/sdaftuar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I don't have a strong opinion here, but I don't know that it really makes sense to call a generic `GetFlags()` function, as I believe we will need to have a separate one of those to deploy BIP68 (which doesn't use a script flags variable, but uses a locktimeflags variable instead)\n",
    "created_at": "2016-03-03T18:03:36Z",
    "updated_at": "2016-03-16T14:10:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54920354",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54920354"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54920354"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54920354/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2221,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54973162",
    "pull_request_review_id": null,
    "id": 54973162,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTczMTYy",
    "diff_hunk": "@@ -2176,6 +2218,11 @@ bool ConnectBlock(const CBlock& block, CValidationState& state, CBlockIndex* pin\n         flags |= SCRIPT_VERIFY_CHECKLOCKTIMEVERIFY;\n     }\n \n+    // Start enforcing CHECKSEQUENCEVERIFY using versionbits logic.",
    "path": "src/main.cpp",
    "position": null,
    "original_position": 60,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "99f66325e83f8da3b5dfe38cad4f5fdc60bca05a",
    "user": {
      "login": "jtimon",
      "id": 1008458,
      "node_id": "MDQ6VXNlcjEwMDg0NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1008458?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtimon",
      "html_url": "https://github.com/jtimon",
      "followers_url": "https://api.github.com/users/jtimon/followers",
      "following_url": "https://api.github.com/users/jtimon/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtimon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtimon/subscriptions",
      "organizations_url": "https://api.github.com/users/jtimon/orgs",
      "repos_url": "https://api.github.com/users/jtimon/repos",
      "events_url": "https://api.github.com/users/jtimon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtimon/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I meant by unifying the consensus flags (currently only script and nSequence_and_nLockTime), see https://github.com/jtimon/bitcoin/commit/b77f1f21eda2329d99d7f2c3242be228db58b131 .\nEDIT: Anyway, if the last commit is an example that will be merged indepdently, this doesn't apply here.\n",
    "created_at": "2016-03-04T00:32:36Z",
    "updated_at": "2016-03-16T14:10:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54973162",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54973162"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54973162"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54973162/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2221,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54994056",
    "pull_request_review_id": null,
    "id": 54994056,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTk0MDU2",
    "diff_hunk": "@@ -2448,25 +2498,17 @@ void static UpdateTip(CBlockIndex *pindexNew) {\n     cvBlockChange.notify_all();\n \n     // Check the version of the last 100 blocks to see if we need to upgrade:\n-    static bool fWarned = false;\n-    if (!IsInitialBlockDownload() && !fWarned)\n+    if (!IsInitialBlockDownload())\n     {\n-        int nUpgraded = 0;\n         const CBlockIndex* pindex = chainActive.Tip();\n-        for (int i = 0; i < 100 && pindex != NULL; i++)\n-        {\n-            if (pindex->nVersion > CBlock::CURRENT_VERSION)\n-                ++nUpgraded;\n-            pindex = pindex->pprev;\n-        }\n-        if (nUpgraded > 0)\n-            LogPrintf(\"%s: %d of last 100 blocks above version %d\\n\", __func__, nUpgraded, (int)CBlock::CURRENT_VERSION);\n-        if (nUpgraded > 100/2)\n-        {\n-            // strMiscWarning is read by GetWarnings(), called by Qt and the JSON-RPC code to warn the user:\n-            strMiscWarning = _(\"Warning: This version is obsolete; upgrade required!\");\n-            CAlert::Notify(strMiscWarning, true);\n-            fWarned = true;\n+        ThresholdState state = warningcheck.GetStateFor(pindex, chainParams.GetConsensus(), warningcache);\n+        if (state == THRESHOLD_ACTIVE || THRESHOLD_LOCKED_IN) {\n+            if (state == THRESHOLD_ACTIVE) {\n+                strMiscWarning = _(\"Warning: unknown softfork has activated\");\n+                CAlert::Notify(strMiscWarning, true);\n+            } else {\n+                LogPrintf(\"Warning: An unknown softfork is about to activate\");",
    "path": "src/main.cpp",
    "position": null,
    "original_position": 101,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "766281655be3703f0f0de61563d0f029ab4ac6b6",
    "user": {
      "login": "btcdrak",
      "id": 7275704,
      "node_id": "MDQ6VXNlcjcyNzU3MDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7275704?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/btcdrak",
      "html_url": "https://github.com/btcdrak",
      "followers_url": "https://api.github.com/users/btcdrak/followers",
      "following_url": "https://api.github.com/users/btcdrak/following{/other_user}",
      "gists_url": "https://api.github.com/users/btcdrak/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/btcdrak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/btcdrak/subscriptions",
      "organizations_url": "https://api.github.com/users/btcdrak/orgs",
      "repos_url": "https://api.github.com/users/btcdrak/repos",
      "events_url": "https://api.github.com/users/btcdrak/events{/privacy}",
      "received_events_url": "https://api.github.com/users/btcdrak/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "missing a trailing `\\n`\n",
    "created_at": "2016-03-04T06:19:11Z",
    "updated_at": "2016-03-16T14:10:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54994056",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54994056"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r54994056"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/54994056/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2510,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/55083166",
    "pull_request_review_id": null,
    "id": 55083166,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDgzMTY2",
    "diff_hunk": "@@ -22,6 +43,14 @@ struct Params {\n     /** Block height and hash at which BIP34 becomes active */\n     int BIP34Height;\n     uint256 BIP34Hash;\n+    /**\n+     * Minimum blocks including miner confirmation of the total of 2016 blocks in a retargetting period,\n+     * (nPowTargetTimespan / nPowTargetSpacing) wich is also used for BIP9 deployments.",
    "path": "src/consensus/params.h",
    "position": null,
    "original_position": 36,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "8cbed80c316669402040b3337b4979cfed31d518",
    "user": {
      "login": "paveljanik",
      "id": 6848764,
      "node_id": "MDQ6VXNlcjY4NDg3NjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6848764?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/paveljanik",
      "html_url": "https://github.com/paveljanik",
      "followers_url": "https://api.github.com/users/paveljanik/followers",
      "following_url": "https://api.github.com/users/paveljanik/following{/other_user}",
      "gists_url": "https://api.github.com/users/paveljanik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/paveljanik/subscriptions",
      "organizations_url": "https://api.github.com/users/paveljanik/orgs",
      "repos_url": "https://api.github.com/users/paveljanik/repos",
      "events_url": "https://api.github.com/users/paveljanik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/paveljanik/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "wich -> which\n",
    "created_at": "2016-03-04T20:17:46Z",
    "updated_at": "2016-03-16T14:10:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r55083166",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/55083166"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r55083166"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/55083166/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 48,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/55088117",
    "pull_request_review_id": null,
    "id": 55088117,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDg4MTE3",
    "diff_hunk": "@@ -0,0 +1,185 @@\n+// Copyright (c) 2014-2015 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"chain.h\"\n+#include \"random.h\"\n+#include \"versionbits.h\"\n+#include \"test/test_bitcoin.h\"\n+\n+#include <boost/test/unit_test.hpp>\n+\n+/* Define a virtual block time, one block per 10 minutes after Nov 14 2014, 0:55:36am */\n+int32_t TestTime(int nHeight) { return 1415926536 + 600 * nHeight; }\n+\n+static const Consensus::Params paramsDummy = Consensus::Params();\n+\n+class TestConditionChecker : public AbstractThresholdConditionChecker\n+{\n+private:\n+    mutable ThresholdConditionCache cache;\n+\n+public:\n+    int64_t BeginTime(const Consensus::Params& params) const { return TestTime(10000); }\n+    int64_t EndTime(const Consensus::Params& params) const { return TestTime(20000); }\n+    int Period(const Consensus::Params& params) const { return 1000; }\n+    int Threshold(const Consensus::Params& params) const { return 900; }\n+    bool Condition(const CBlockIndex* pindex, const Consensus::Params& params) const { return (pindex->nVersion & 0x100); }\n+\n+    ThresholdState GetStateFor(const CBlockIndex* pindexPrev) const { return AbstractThresholdConditionChecker::GetStateFor(pindexPrev, paramsDummy, cache); }\n+};\n+\n+#define CHECKERS 6\n+\n+class VersionBitsTester\n+{\n+    // A fake blockchain\n+    std::vector<CBlockIndex*> vpblock;\n+\n+    // 6 independent checkers for the same bit.\n+    // The first one performs all checks, the second only 50%, the third only 25%, etc...\n+    // This is to test whether lack of cached information leads to the same results.\n+    TestConditionChecker checker[CHECKERS];\n+\n+    // Test counter (to identify failures)\n+    int num;\n+\n+public:\n+    VersionBitsTester() : num(0) {}\n+\n+    VersionBitsTester& Reset() {\n+        for (unsigned int i = 0; i < vpblock.size(); i++) {\n+            delete vpblock[i];\n+        }\n+        for (unsigned int  i = 0; i < CHECKERS; i++) {\n+            checker[i] = TestConditionChecker();\n+        }\n+        vpblock.clear();\n+        return *this;\n+    }\n+\n+    ~VersionBitsTester() {\n+         Reset();\n+    }\n+\n+    VersionBitsTester& Mine(unsigned int height, int32_t nTime, int32_t nVersion) {\n+        while (vpblock.size() < height) {\n+            CBlockIndex* pindex = new CBlockIndex();\n+            pindex->nHeight = vpblock.size();\n+            pindex->pprev = vpblock.size() > 0 ? vpblock.back() : NULL;\n+            pindex->nTime = nTime;\n+            pindex->nVersion = nVersion;\n+            pindex->BuildSkip();\n+            vpblock.push_back(pindex);\n+        }\n+        return *this;\n+    }\n+\n+    VersionBitsTester& TestDefined() {\n+        for (int i = 0; i < CHECKERS; i++) {\n+            if ((insecure_rand() & ((1 << i) - 1)) == 0) {\n+                BOOST_CHECK_MESSAGE(checker[i].GetStateFor(vpblock.empty() ? NULL : vpblock.back()) == THRESHOLD_DEFINED, strprintf(\"Test %i for DEFINED\", num));\n+            }\n+        }\n+        num++;\n+        return *this;\n+    }\n+\n+    VersionBitsTester& TestStarted() {\n+        for (int i = 0; i < CHECKERS; i++) {\n+            if ((insecure_rand() & ((1 << i) - 1)) == 0) {\n+                BOOST_CHECK_MESSAGE(checker[i].GetStateFor(vpblock.empty() ? NULL : vpblock.back()) == THRESHOLD_STARTED, strprintf(\"Test %i for DEFINED\", num));",
    "path": "src/test/versionbits_tests.cpp",
    "position": null,
    "original_position": 91,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "8cbed80c316669402040b3337b4979cfed31d518",
    "user": {
      "login": "sdaftuar",
      "id": 7463573,
      "node_id": "MDQ6VXNlcjc0NjM1NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sdaftuar",
      "html_url": "https://github.com/sdaftuar",
      "followers_url": "https://api.github.com/users/sdaftuar/followers",
      "following_url": "https://api.github.com/users/sdaftuar/following{/other_user}",
      "gists_url": "https://api.github.com/users/sdaftuar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
      "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
      "repos_url": "https://api.github.com/users/sdaftuar/repos",
      "events_url": "https://api.github.com/users/sdaftuar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "should be `strprintf(\"Test %i for STARTED\", num)`\n",
    "created_at": "2016-03-04T21:01:10Z",
    "updated_at": "2016-03-16T14:10:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r55088117",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/55088117"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r55088117"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/55088117/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 91,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/55089062",
    "pull_request_review_id": null,
    "id": 55089062,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDg5MDYy",
    "diff_hunk": "@@ -0,0 +1,185 @@\n+// Copyright (c) 2014-2015 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"chain.h\"\n+#include \"random.h\"\n+#include \"versionbits.h\"\n+#include \"test/test_bitcoin.h\"\n+\n+#include <boost/test/unit_test.hpp>\n+\n+/* Define a virtual block time, one block per 10 minutes after Nov 14 2014, 0:55:36am */\n+int32_t TestTime(int nHeight) { return 1415926536 + 600 * nHeight; }\n+\n+static const Consensus::Params paramsDummy = Consensus::Params();\n+\n+class TestConditionChecker : public AbstractThresholdConditionChecker\n+{\n+private:\n+    mutable ThresholdConditionCache cache;\n+\n+public:\n+    int64_t BeginTime(const Consensus::Params& params) const { return TestTime(10000); }\n+    int64_t EndTime(const Consensus::Params& params) const { return TestTime(20000); }\n+    int Period(const Consensus::Params& params) const { return 1000; }\n+    int Threshold(const Consensus::Params& params) const { return 900; }\n+    bool Condition(const CBlockIndex* pindex, const Consensus::Params& params) const { return (pindex->nVersion & 0x100); }\n+\n+    ThresholdState GetStateFor(const CBlockIndex* pindexPrev) const { return AbstractThresholdConditionChecker::GetStateFor(pindexPrev, paramsDummy, cache); }\n+};\n+\n+#define CHECKERS 6\n+\n+class VersionBitsTester\n+{\n+    // A fake blockchain\n+    std::vector<CBlockIndex*> vpblock;\n+\n+    // 6 independent checkers for the same bit.\n+    // The first one performs all checks, the second only 50%, the third only 25%, etc...\n+    // This is to test whether lack of cached information leads to the same results.\n+    TestConditionChecker checker[CHECKERS];\n+\n+    // Test counter (to identify failures)\n+    int num;\n+\n+public:\n+    VersionBitsTester() : num(0) {}\n+\n+    VersionBitsTester& Reset() {\n+        for (unsigned int i = 0; i < vpblock.size(); i++) {\n+            delete vpblock[i];\n+        }\n+        for (unsigned int  i = 0; i < CHECKERS; i++) {\n+            checker[i] = TestConditionChecker();\n+        }\n+        vpblock.clear();\n+        return *this;\n+    }\n+\n+    ~VersionBitsTester() {\n+         Reset();\n+    }\n+\n+    VersionBitsTester& Mine(unsigned int height, int32_t nTime, int32_t nVersion) {\n+        while (vpblock.size() < height) {\n+            CBlockIndex* pindex = new CBlockIndex();\n+            pindex->nHeight = vpblock.size();\n+            pindex->pprev = vpblock.size() > 0 ? vpblock.back() : NULL;\n+            pindex->nTime = nTime;\n+            pindex->nVersion = nVersion;\n+            pindex->BuildSkip();\n+            vpblock.push_back(pindex);\n+        }\n+        return *this;\n+    }\n+\n+    VersionBitsTester& TestDefined() {\n+        for (int i = 0; i < CHECKERS; i++) {\n+            if ((insecure_rand() & ((1 << i) - 1)) == 0) {\n+                BOOST_CHECK_MESSAGE(checker[i].GetStateFor(vpblock.empty() ? NULL : vpblock.back()) == THRESHOLD_DEFINED, strprintf(\"Test %i for DEFINED\", num));\n+            }\n+        }\n+        num++;\n+        return *this;\n+    }\n+\n+    VersionBitsTester& TestStarted() {\n+        for (int i = 0; i < CHECKERS; i++) {\n+            if ((insecure_rand() & ((1 << i) - 1)) == 0) {\n+                BOOST_CHECK_MESSAGE(checker[i].GetStateFor(vpblock.empty() ? NULL : vpblock.back()) == THRESHOLD_STARTED, strprintf(\"Test %i for DEFINED\", num));\n+            }\n+        }\n+        num++;\n+        return *this;\n+    }\n+\n+    VersionBitsTester& TestLockedIn() {\n+        for (int i = 0; i < CHECKERS; i++) {\n+            if ((insecure_rand() & ((1 << i) - 1)) == 0) {\n+                BOOST_CHECK_MESSAGE(checker[i].GetStateFor(vpblock.empty() ? NULL : vpblock.back()) == THRESHOLD_LOCKED_IN, strprintf(\"Test %i for LOCKED_IN\", num));\n+            }\n+        }\n+        num++;\n+        return *this;\n+    }\n+\n+    VersionBitsTester& TestActive() {\n+        for (int i = 0; i < CHECKERS; i++) {\n+            if ((insecure_rand() & ((1 << i) - 1)) == 0) {\n+                BOOST_CHECK_MESSAGE(checker[i].GetStateFor(vpblock.empty() ? NULL : vpblock.back()) == THRESHOLD_ACTIVE, strprintf(\"Test %i for ACTIVE\", num));\n+            }\n+        }\n+        num++;\n+        return *this;\n+    }\n+\n+    VersionBitsTester& TestFailed() {\n+        for (int i = 0; i < CHECKERS; i++) {\n+            if ((insecure_rand() & ((1 << i) - 1)) == 0) {\n+                BOOST_CHECK_MESSAGE(checker[i].GetStateFor(vpblock.empty() ? NULL : vpblock.back()) == THRESHOLD_FAILED, strprintf(\"Test %i for FAILED\", num));\n+            }\n+        }\n+        num++;\n+        return *this;\n+    }\n+};\n+\n+BOOST_FIXTURE_TEST_SUITE(versionbits_tests, TestingSetup)\n+\n+BOOST_AUTO_TEST_CASE(versionbits_test)\n+{\n+    for (int i = 0; i < 64; i++) {\n+        // UNDEFINED -> FAILED",
    "path": "src/test/versionbits_tests.cpp",
    "position": null,
    "original_position": 134,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "8cbed80c316669402040b3337b4979cfed31d518",
    "user": {
      "login": "sdaftuar",
      "id": 7463573,
      "node_id": "MDQ6VXNlcjc0NjM1NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sdaftuar",
      "html_url": "https://github.com/sdaftuar",
      "followers_url": "https://api.github.com/users/sdaftuar/followers",
      "following_url": "https://api.github.com/users/sdaftuar/following{/other_user}",
      "gists_url": "https://api.github.com/users/sdaftuar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
      "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
      "repos_url": "https://api.github.com/users/sdaftuar/repos",
      "events_url": "https://api.github.com/users/sdaftuar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Perhaps this comment and the ones below should be updated?  UNDEFINED is not a state.\n",
    "created_at": "2016-03-04T21:10:11Z",
    "updated_at": "2016-03-16T14:10:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r55089062",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/55089062"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r55089062"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/55089062/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 134,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/55097541",
    "pull_request_review_id": null,
    "id": 55097541,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDk3NTQx",
    "diff_hunk": "@@ -0,0 +1,185 @@\n+// Copyright (c) 2014-2015 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"chain.h\"\n+#include \"random.h\"\n+#include \"versionbits.h\"\n+#include \"test/test_bitcoin.h\"\n+\n+#include <boost/test/unit_test.hpp>\n+\n+/* Define a virtual block time, one block per 10 minutes after Nov 14 2014, 0:55:36am */\n+int32_t TestTime(int nHeight) { return 1415926536 + 600 * nHeight; }\n+\n+static const Consensus::Params paramsDummy = Consensus::Params();\n+\n+class TestConditionChecker : public AbstractThresholdConditionChecker\n+{\n+private:\n+    mutable ThresholdConditionCache cache;\n+\n+public:\n+    int64_t BeginTime(const Consensus::Params& params) const { return TestTime(10000); }\n+    int64_t EndTime(const Consensus::Params& params) const { return TestTime(20000); }\n+    int Period(const Consensus::Params& params) const { return 1000; }\n+    int Threshold(const Consensus::Params& params) const { return 900; }\n+    bool Condition(const CBlockIndex* pindex, const Consensus::Params& params) const { return (pindex->nVersion & 0x100); }\n+\n+    ThresholdState GetStateFor(const CBlockIndex* pindexPrev) const { return AbstractThresholdConditionChecker::GetStateFor(pindexPrev, paramsDummy, cache); }\n+};\n+\n+#define CHECKERS 6\n+\n+class VersionBitsTester\n+{\n+    // A fake blockchain\n+    std::vector<CBlockIndex*> vpblock;\n+\n+    // 6 independent checkers for the same bit.\n+    // The first one performs all checks, the second only 50%, the third only 25%, etc...\n+    // This is to test whether lack of cached information leads to the same results.\n+    TestConditionChecker checker[CHECKERS];\n+\n+    // Test counter (to identify failures)\n+    int num;\n+\n+public:\n+    VersionBitsTester() : num(0) {}\n+\n+    VersionBitsTester& Reset() {\n+        for (unsigned int i = 0; i < vpblock.size(); i++) {\n+            delete vpblock[i];\n+        }\n+        for (unsigned int  i = 0; i < CHECKERS; i++) {\n+            checker[i] = TestConditionChecker();\n+        }\n+        vpblock.clear();\n+        return *this;\n+    }\n+\n+    ~VersionBitsTester() {\n+         Reset();\n+    }\n+\n+    VersionBitsTester& Mine(unsigned int height, int32_t nTime, int32_t nVersion) {\n+        while (vpblock.size() < height) {\n+            CBlockIndex* pindex = new CBlockIndex();\n+            pindex->nHeight = vpblock.size();\n+            pindex->pprev = vpblock.size() > 0 ? vpblock.back() : NULL;\n+            pindex->nTime = nTime;\n+            pindex->nVersion = nVersion;\n+            pindex->BuildSkip();\n+            vpblock.push_back(pindex);\n+        }\n+        return *this;\n+    }\n+\n+    VersionBitsTester& TestDefined() {\n+        for (int i = 0; i < CHECKERS; i++) {\n+            if ((insecure_rand() & ((1 << i) - 1)) == 0) {\n+                BOOST_CHECK_MESSAGE(checker[i].GetStateFor(vpblock.empty() ? NULL : vpblock.back()) == THRESHOLD_DEFINED, strprintf(\"Test %i for DEFINED\", num));\n+            }\n+        }\n+        num++;\n+        return *this;\n+    }\n+\n+    VersionBitsTester& TestStarted() {\n+        for (int i = 0; i < CHECKERS; i++) {\n+            if ((insecure_rand() & ((1 << i) - 1)) == 0) {\n+                BOOST_CHECK_MESSAGE(checker[i].GetStateFor(vpblock.empty() ? NULL : vpblock.back()) == THRESHOLD_STARTED, strprintf(\"Test %i for DEFINED\", num));\n+            }\n+        }\n+        num++;\n+        return *this;\n+    }\n+\n+    VersionBitsTester& TestLockedIn() {\n+        for (int i = 0; i < CHECKERS; i++) {\n+            if ((insecure_rand() & ((1 << i) - 1)) == 0) {\n+                BOOST_CHECK_MESSAGE(checker[i].GetStateFor(vpblock.empty() ? NULL : vpblock.back()) == THRESHOLD_LOCKED_IN, strprintf(\"Test %i for LOCKED_IN\", num));\n+            }\n+        }\n+        num++;\n+        return *this;\n+    }\n+\n+    VersionBitsTester& TestActive() {\n+        for (int i = 0; i < CHECKERS; i++) {\n+            if ((insecure_rand() & ((1 << i) - 1)) == 0) {\n+                BOOST_CHECK_MESSAGE(checker[i].GetStateFor(vpblock.empty() ? NULL : vpblock.back()) == THRESHOLD_ACTIVE, strprintf(\"Test %i for ACTIVE\", num));\n+            }\n+        }\n+        num++;\n+        return *this;\n+    }\n+\n+    VersionBitsTester& TestFailed() {\n+        for (int i = 0; i < CHECKERS; i++) {\n+            if ((insecure_rand() & ((1 << i) - 1)) == 0) {\n+                BOOST_CHECK_MESSAGE(checker[i].GetStateFor(vpblock.empty() ? NULL : vpblock.back()) == THRESHOLD_FAILED, strprintf(\"Test %i for FAILED\", num));\n+            }\n+        }\n+        num++;\n+        return *this;\n+    }\n+};\n+\n+BOOST_FIXTURE_TEST_SUITE(versionbits_tests, TestingSetup)\n+\n+BOOST_AUTO_TEST_CASE(versionbits_test)\n+{\n+    for (int i = 0; i < 64; i++) {\n+        // UNDEFINED -> FAILED",
    "path": "src/test/versionbits_tests.cpp",
    "position": null,
    "original_position": 134,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "8cbed80c316669402040b3337b4979cfed31d518",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Fixed.\n",
    "created_at": "2016-03-04T22:19:41Z",
    "updated_at": "2016-03-16T14:10:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r55097541",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/55097541"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r55097541"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/55097541/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 134,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/55097549",
    "pull_request_review_id": null,
    "id": 55097549,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDk3NTQ5",
    "diff_hunk": "@@ -0,0 +1,185 @@\n+// Copyright (c) 2014-2015 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"chain.h\"\n+#include \"random.h\"\n+#include \"versionbits.h\"\n+#include \"test/test_bitcoin.h\"\n+\n+#include <boost/test/unit_test.hpp>\n+\n+/* Define a virtual block time, one block per 10 minutes after Nov 14 2014, 0:55:36am */\n+int32_t TestTime(int nHeight) { return 1415926536 + 600 * nHeight; }\n+\n+static const Consensus::Params paramsDummy = Consensus::Params();\n+\n+class TestConditionChecker : public AbstractThresholdConditionChecker\n+{\n+private:\n+    mutable ThresholdConditionCache cache;\n+\n+public:\n+    int64_t BeginTime(const Consensus::Params& params) const { return TestTime(10000); }\n+    int64_t EndTime(const Consensus::Params& params) const { return TestTime(20000); }\n+    int Period(const Consensus::Params& params) const { return 1000; }\n+    int Threshold(const Consensus::Params& params) const { return 900; }\n+    bool Condition(const CBlockIndex* pindex, const Consensus::Params& params) const { return (pindex->nVersion & 0x100); }\n+\n+    ThresholdState GetStateFor(const CBlockIndex* pindexPrev) const { return AbstractThresholdConditionChecker::GetStateFor(pindexPrev, paramsDummy, cache); }\n+};\n+\n+#define CHECKERS 6\n+\n+class VersionBitsTester\n+{\n+    // A fake blockchain\n+    std::vector<CBlockIndex*> vpblock;\n+\n+    // 6 independent checkers for the same bit.\n+    // The first one performs all checks, the second only 50%, the third only 25%, etc...\n+    // This is to test whether lack of cached information leads to the same results.\n+    TestConditionChecker checker[CHECKERS];\n+\n+    // Test counter (to identify failures)\n+    int num;\n+\n+public:\n+    VersionBitsTester() : num(0) {}\n+\n+    VersionBitsTester& Reset() {\n+        for (unsigned int i = 0; i < vpblock.size(); i++) {\n+            delete vpblock[i];\n+        }\n+        for (unsigned int  i = 0; i < CHECKERS; i++) {\n+            checker[i] = TestConditionChecker();\n+        }\n+        vpblock.clear();\n+        return *this;\n+    }\n+\n+    ~VersionBitsTester() {\n+         Reset();\n+    }\n+\n+    VersionBitsTester& Mine(unsigned int height, int32_t nTime, int32_t nVersion) {\n+        while (vpblock.size() < height) {\n+            CBlockIndex* pindex = new CBlockIndex();\n+            pindex->nHeight = vpblock.size();\n+            pindex->pprev = vpblock.size() > 0 ? vpblock.back() : NULL;\n+            pindex->nTime = nTime;\n+            pindex->nVersion = nVersion;\n+            pindex->BuildSkip();\n+            vpblock.push_back(pindex);\n+        }\n+        return *this;\n+    }\n+\n+    VersionBitsTester& TestDefined() {\n+        for (int i = 0; i < CHECKERS; i++) {\n+            if ((insecure_rand() & ((1 << i) - 1)) == 0) {\n+                BOOST_CHECK_MESSAGE(checker[i].GetStateFor(vpblock.empty() ? NULL : vpblock.back()) == THRESHOLD_DEFINED, strprintf(\"Test %i for DEFINED\", num));\n+            }\n+        }\n+        num++;\n+        return *this;\n+    }\n+\n+    VersionBitsTester& TestStarted() {\n+        for (int i = 0; i < CHECKERS; i++) {\n+            if ((insecure_rand() & ((1 << i) - 1)) == 0) {\n+                BOOST_CHECK_MESSAGE(checker[i].GetStateFor(vpblock.empty() ? NULL : vpblock.back()) == THRESHOLD_STARTED, strprintf(\"Test %i for DEFINED\", num));",
    "path": "src/test/versionbits_tests.cpp",
    "position": null,
    "original_position": 91,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "8cbed80c316669402040b3337b4979cfed31d518",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Fixed.\n",
    "created_at": "2016-03-04T22:19:47Z",
    "updated_at": "2016-03-16T14:10:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r55097549",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/55097549"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r55097549"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/55097549/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 91,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/55097560",
    "pull_request_review_id": null,
    "id": 55097560,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDk3NTYw",
    "diff_hunk": "@@ -22,6 +43,14 @@ struct Params {\n     /** Block height and hash at which BIP34 becomes active */\n     int BIP34Height;\n     uint256 BIP34Hash;\n+    /**\n+     * Minimum blocks including miner confirmation of the total of 2016 blocks in a retargetting period,\n+     * (nPowTargetTimespan / nPowTargetSpacing) wich is also used for BIP9 deployments.",
    "path": "src/consensus/params.h",
    "position": null,
    "original_position": 36,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "8cbed80c316669402040b3337b4979cfed31d518",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Fixed.\n",
    "created_at": "2016-03-04T22:19:54Z",
    "updated_at": "2016-03-16T14:10:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r55097560",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/55097560"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r55097560"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/55097560/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 48,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/55125020",
    "pull_request_review_id": null,
    "id": 55125020,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTI1MDIw",
    "diff_hunk": "@@ -2080,6 +2081,50 @@ void PartitionCheck(bool (*initialDownloadCheck)(), CCriticalSection& cs, const\n     }\n }\n \n+// Protected by cs_main\n+static VersionBitsCache versionbitscache;\n+\n+int32_t ComputeBlockVersion(const CBlockIndex* pindexPrev, const Consensus::Params& params)\n+{\n+    LOCK(cs_main);\n+    int32_t nVersion = 0;\n+\n+    for (int i = 0; i < (int)Consensus::MAX_VERSION_BITS_DEPLOYMENTS; i++) {\n+        ThresholdState state = VersionBitsState(pindexPrev, params, (Consensus::DeploymentPos)i, versionbitscache);\n+        if (state == THRESHOLD_LOCKED_IN || state == THRESHOLD_STARTED) {\n+            nVersion |= VersionBitsMask(params, (Consensus::DeploymentPos)i);\n+        }\n+    }\n+\n+    if (nVersion == 0) {\n+        // Pre-versionbits\n+        return VERSIONBITS_LAST_OLD_BLOCK_VERSION;\n+    } else {\n+        return nVersion | VERSIONBITS_TOP_BITS;\n+    }\n+}\n+\n+/**\n+ * Threshold condition checker that triggers when unknown versionbits are seen on the network.\n+ */\n+class WarningBitsConditionChecker : public AbstractThresholdConditionChecker\n+{\n+public:\n+    int64_t BeginTime(const Consensus::Params& params) const { return 0; }\n+    int64_t EndTime(const Consensus::Params& params) const { return std::numeric_limits<int64_t>::max(); }\n+    int Period(const Consensus::Params& params) const { return params.nMinerConfirmationWindow; }\n+    int Threshold(const Consensus::Params& params) const { return params.nRuleChangeActivationThreshold; }\n+\n+    bool Condition(const CBlockIndex* pindex, const Consensus::Params& params) const\n+    {\n+        return (pindex->nVersion & ~ComputeBlockVersion(pindex->pprev, params)) != 0;",
    "path": "src/main.cpp",
    "position": null,
    "original_position": 48,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "cf71c5360ac4b43ec6f13c956e5adde5b5e66ff0",
    "user": {
      "login": "sdaftuar",
      "id": 7463573,
      "node_id": "MDQ6VXNlcjc0NjM1NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sdaftuar",
      "html_url": "https://github.com/sdaftuar",
      "followers_url": "https://api.github.com/users/sdaftuar/followers",
      "following_url": "https://api.github.com/users/sdaftuar/following{/other_user}",
      "gists_url": "https://api.github.com/users/sdaftuar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
      "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
      "repos_url": "https://api.github.com/users/sdaftuar/repos",
      "events_url": "https://api.github.com/users/sdaftuar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Won't this have potential false alerts, if let's say half the blocks in a period are signaling some unknown bit i, while the other half are signaling some other unknown bit j?\n\nAnyway it occurred to me that it might be nice to record which bits are being set that are unknown and write that to the debug log when we warn an unknown softfork is about to activate (as a useful debugging/investigation aid), but I can see that is a little tricky.\n",
    "created_at": "2016-03-05T18:00:51Z",
    "updated_at": "2016-03-16T14:10:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r55125020",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/55125020"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r55125020"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/55125020/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2120,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/55125095",
    "pull_request_review_id": null,
    "id": 55125095,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTI1MDk1",
    "diff_hunk": "@@ -2080,6 +2081,50 @@ void PartitionCheck(bool (*initialDownloadCheck)(), CCriticalSection& cs, const\n     }\n }\n \n+// Protected by cs_main\n+static VersionBitsCache versionbitscache;\n+\n+int32_t ComputeBlockVersion(const CBlockIndex* pindexPrev, const Consensus::Params& params)\n+{\n+    LOCK(cs_main);\n+    int32_t nVersion = 0;\n+\n+    for (int i = 0; i < (int)Consensus::MAX_VERSION_BITS_DEPLOYMENTS; i++) {\n+        ThresholdState state = VersionBitsState(pindexPrev, params, (Consensus::DeploymentPos)i, versionbitscache);\n+        if (state == THRESHOLD_LOCKED_IN || state == THRESHOLD_STARTED) {\n+            nVersion |= VersionBitsMask(params, (Consensus::DeploymentPos)i);\n+        }\n+    }\n+\n+    if (nVersion == 0) {\n+        // Pre-versionbits\n+        return VERSIONBITS_LAST_OLD_BLOCK_VERSION;\n+    } else {\n+        return nVersion | VERSIONBITS_TOP_BITS;\n+    }\n+}\n+\n+/**\n+ * Threshold condition checker that triggers when unknown versionbits are seen on the network.\n+ */\n+class WarningBitsConditionChecker : public AbstractThresholdConditionChecker\n+{\n+public:\n+    int64_t BeginTime(const Consensus::Params& params) const { return 0; }\n+    int64_t EndTime(const Consensus::Params& params) const { return std::numeric_limits<int64_t>::max(); }\n+    int Period(const Consensus::Params& params) const { return params.nMinerConfirmationWindow; }\n+    int Threshold(const Consensus::Params& params) const { return params.nRuleChangeActivationThreshold; }\n+\n+    bool Condition(const CBlockIndex* pindex, const Consensus::Params& params) const\n+    {\n+        return (pindex->nVersion & ~ComputeBlockVersion(pindex->pprev, params)) != 0;",
    "path": "src/main.cpp",
    "position": null,
    "original_position": 48,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "cf71c5360ac4b43ec6f13c956e5adde5b5e66ff0",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "That's quite doable actually: have a 'warning' tracker per bit.\n",
    "created_at": "2016-03-05T18:03:41Z",
    "updated_at": "2016-03-16T14:10:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r55125095",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/55125095"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r55125095"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/55125095/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2120,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/55125326",
    "pull_request_review_id": null,
    "id": 55125326,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTI1MzI2",
    "diff_hunk": "@@ -2080,6 +2081,50 @@ void PartitionCheck(bool (*initialDownloadCheck)(), CCriticalSection& cs, const\n     }\n }\n \n+// Protected by cs_main\n+static VersionBitsCache versionbitscache;\n+\n+int32_t ComputeBlockVersion(const CBlockIndex* pindexPrev, const Consensus::Params& params)",
    "path": "src/main.cpp",
    "position": 15,
    "original_position": 15,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "cf71c5360ac4b43ec6f13c956e5adde5b5e66ff0",
    "user": {
      "login": "sdaftuar",
      "id": 7463573,
      "node_id": "MDQ6VXNlcjc0NjM1NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sdaftuar",
      "html_url": "https://github.com/sdaftuar",
      "followers_url": "https://api.github.com/users/sdaftuar/followers",
      "following_url": "https://api.github.com/users/sdaftuar/following{/other_user}",
      "gists_url": "https://api.github.com/users/sdaftuar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
      "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
      "repos_url": "https://api.github.com/users/sdaftuar/repos",
      "events_url": "https://api.github.com/users/sdaftuar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I think it'd be nice if we had test coverage for this function.  I believe that as it stands, if this code were busted, then I'm not sure any tests would necessarily fail?\n\nSo far the best idea I have is that when we deploy a new soft fork, we write a unit test that exercises this function and verifies the right bit will be set at the right time (using a fake mainnet chain like the one you built in the versionbits unit test). \n\nI think we should also have regtest RPC tests which exercise proposed soft forks as well, but I can't think of any way to write such tests to adequately test mainnet parameters...\n",
    "created_at": "2016-03-05T18:16:11Z",
    "updated_at": "2016-03-16T14:10:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r55125326",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/55125326"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r55125326"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/55125326/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2090,
    "original_line": 2087,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/55125466",
    "pull_request_review_id": null,
    "id": 55125466,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTI1NDY2",
    "diff_hunk": "@@ -2080,6 +2081,50 @@ void PartitionCheck(bool (*initialDownloadCheck)(), CCriticalSection& cs, const\n     }\n }\n \n+// Protected by cs_main\n+static VersionBitsCache versionbitscache;\n+\n+int32_t ComputeBlockVersion(const CBlockIndex* pindexPrev, const Consensus::Params& params)",
    "path": "src/main.cpp",
    "position": 15,
    "original_position": 15,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "cf71c5360ac4b43ec6f13c956e5adde5b5e66ff0",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Perhaps it would be useful to have a 'test' softfork that is disabled (end\ntime before genesis, for example) everywhere but regtest, and enables some\nvery easy to test condition (e.g. coinbase must have exactly one output)?\n",
    "created_at": "2016-03-05T18:23:09Z",
    "updated_at": "2016-03-16T14:10:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r55125466",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/55125466"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r55125466"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/55125466/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2090,
    "original_line": 2087,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/55140546",
    "pull_request_review_id": null,
    "id": 55140546,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTQwNTQ2",
    "diff_hunk": "@@ -2080,6 +2081,50 @@ void PartitionCheck(bool (*initialDownloadCheck)(), CCriticalSection& cs, const\n     }\n }\n \n+// Protected by cs_main\n+static VersionBitsCache versionbitscache;\n+\n+int32_t ComputeBlockVersion(const CBlockIndex* pindexPrev, const Consensus::Params& params)",
    "path": "src/main.cpp",
    "position": 15,
    "original_position": 15,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "cf71c5360ac4b43ec6f13c956e5adde5b5e66ff0",
    "user": {
      "login": "jtimon",
      "id": 1008458,
      "node_id": "MDQ6VXNlcjEwMDg0NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1008458?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtimon",
      "html_url": "https://github.com/jtimon",
      "followers_url": "https://api.github.com/users/jtimon/followers",
      "following_url": "https://api.github.com/users/jtimon/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtimon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtimon/subscriptions",
      "organizations_url": "https://api.github.com/users/jtimon/orgs",
      "repos_url": "https://api.github.com/users/jtimon/repos",
      "events_url": "https://api.github.com/users/jtimon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtimon/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "A testing deployment sounds like a good idea.\n",
    "created_at": "2016-03-06T14:44:31Z",
    "updated_at": "2016-03-16T14:10:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r55140546",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/55140546"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r55140546"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/55140546/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2090,
    "original_line": 2087,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/55206640",
    "pull_request_review_id": null,
    "id": 55206640,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjA2NjQw",
    "diff_hunk": "@@ -2080,6 +2081,50 @@ void PartitionCheck(bool (*initialDownloadCheck)(), CCriticalSection& cs, const\n     }\n }\n \n+// Protected by cs_main\n+static VersionBitsCache versionbitscache;\n+\n+int32_t ComputeBlockVersion(const CBlockIndex* pindexPrev, const Consensus::Params& params)\n+{\n+    LOCK(cs_main);\n+    int32_t nVersion = 0;\n+\n+    for (int i = 0; i < (int)Consensus::MAX_VERSION_BITS_DEPLOYMENTS; i++) {\n+        ThresholdState state = VersionBitsState(pindexPrev, params, (Consensus::DeploymentPos)i, versionbitscache);\n+        if (state == THRESHOLD_LOCKED_IN || state == THRESHOLD_STARTED) {\n+            nVersion |= VersionBitsMask(params, (Consensus::DeploymentPos)i);\n+        }\n+    }\n+\n+    if (nVersion == 0) {\n+        // Pre-versionbits\n+        return VERSIONBITS_LAST_OLD_BLOCK_VERSION;\n+    } else {\n+        return nVersion | VERSIONBITS_TOP_BITS;\n+    }\n+}\n+\n+/**\n+ * Threshold condition checker that triggers when unknown versionbits are seen on the network.\n+ */\n+class WarningBitsConditionChecker : public AbstractThresholdConditionChecker\n+{\n+public:\n+    int64_t BeginTime(const Consensus::Params& params) const { return 0; }\n+    int64_t EndTime(const Consensus::Params& params) const { return std::numeric_limits<int64_t>::max(); }\n+    int Period(const Consensus::Params& params) const { return params.nMinerConfirmationWindow; }\n+    int Threshold(const Consensus::Params& params) const { return params.nRuleChangeActivationThreshold; }\n+\n+    bool Condition(const CBlockIndex* pindex, const Consensus::Params& params) const\n+    {\n+        return (pindex->nVersion & ~ComputeBlockVersion(pindex->pprev, params)) != 0;",
    "path": "src/main.cpp",
    "position": null,
    "original_position": 48,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "cf71c5360ac4b43ec6f13c956e5adde5b5e66ff0",
    "user": {
      "login": "sdaftuar",
      "id": 7463573,
      "node_id": "MDQ6VXNlcjc0NjM1NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sdaftuar",
      "html_url": "https://github.com/sdaftuar",
      "followers_url": "https://api.github.com/users/sdaftuar/followers",
      "following_url": "https://api.github.com/users/sdaftuar/following{/other_user}",
      "gists_url": "https://api.github.com/users/sdaftuar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
      "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
      "repos_url": "https://api.github.com/users/sdaftuar/repos",
      "events_url": "https://api.github.com/users/sdaftuar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Oh it also occurs to me that we probably shouldn't count a block towards the warning unless its top bits match the `001` versionbits prefix?  Otherwise we could see warnings if we deploy versionbits+some soft fork, but miners are slow to pick it up and continue using old version numbers.\n\nAnyway I like the idea of a warning tracker per bit...\n",
    "created_at": "2016-03-07T14:04:07Z",
    "updated_at": "2016-03-16T14:10:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r55206640",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/55206640"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r55206640"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/55206640/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2120,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/55371649",
    "pull_request_review_id": null,
    "id": 55371649,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MzcxNjQ5",
    "diff_hunk": "@@ -2080,6 +2081,50 @@ void PartitionCheck(bool (*initialDownloadCheck)(), CCriticalSection& cs, const\n     }\n }\n \n+// Protected by cs_main\n+static VersionBitsCache versionbitscache;\n+\n+int32_t ComputeBlockVersion(const CBlockIndex* pindexPrev, const Consensus::Params& params)\n+{\n+    LOCK(cs_main);\n+    int32_t nVersion = 0;\n+\n+    for (int i = 0; i < (int)Consensus::MAX_VERSION_BITS_DEPLOYMENTS; i++) {\n+        ThresholdState state = VersionBitsState(pindexPrev, params, (Consensus::DeploymentPos)i, versionbitscache);\n+        if (state == THRESHOLD_LOCKED_IN || state == THRESHOLD_STARTED) {\n+            nVersion |= VersionBitsMask(params, (Consensus::DeploymentPos)i);\n+        }\n+    }\n+\n+    if (nVersion == 0) {\n+        // Pre-versionbits\n+        return VERSIONBITS_LAST_OLD_BLOCK_VERSION;",
    "path": "src/main.cpp",
    "position": null,
    "original_position": 29,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "cf71c5360ac4b43ec6f13c956e5adde5b5e66ff0",
    "user": {
      "login": "morcos",
      "id": 4360349,
      "node_id": "MDQ6VXNlcjQzNjAzNDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4360349?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/morcos",
      "html_url": "https://github.com/morcos",
      "followers_url": "https://api.github.com/users/morcos/followers",
      "following_url": "https://api.github.com/users/morcos/following{/other_user}",
      "gists_url": "https://api.github.com/users/morcos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/morcos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/morcos/subscriptions",
      "organizations_url": "https://api.github.com/users/morcos/orgs",
      "repos_url": "https://api.github.com/users/morcos/repos",
      "events_url": "https://api.github.com/users/morcos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/morcos/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I'm not really sure the intention here.  This will also happen after version bits is rolled out but between any active soft fork deployments.  Is there a reason not to just always `| VERSIONBITS_TOP_BITS` and forget about version 4 blocks.\n",
    "created_at": "2016-03-08T15:11:04Z",
    "updated_at": "2016-03-16T14:10:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r55371649",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/55371649"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r55371649"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/55371649/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2101,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/55689289",
    "pull_request_review_id": null,
    "id": 55689289,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Njg5Mjg5",
    "diff_hunk": "@@ -0,0 +1,185 @@\n+// Copyright (c) 2014-2015 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"chain.h\"\n+#include \"random.h\"\n+#include \"versionbits.h\"\n+#include \"test/test_bitcoin.h\"\n+\n+#include <boost/test/unit_test.hpp>\n+\n+/* Define a virtual block time, one block per 10 minutes after Nov 14 2014, 0:55:36am */\n+int32_t TestTime(int nHeight) { return 1415926536 + 600 * nHeight; }\n+\n+static const Consensus::Params paramsDummy = Consensus::Params();\n+\n+class TestConditionChecker : public AbstractThresholdConditionChecker\n+{\n+private:\n+    mutable ThresholdConditionCache cache;\n+\n+public:\n+    int64_t BeginTime(const Consensus::Params& params) const { return TestTime(10000); }\n+    int64_t EndTime(const Consensus::Params& params) const { return TestTime(20000); }\n+    int Period(const Consensus::Params& params) const { return 1000; }\n+    int Threshold(const Consensus::Params& params) const { return 900; }\n+    bool Condition(const CBlockIndex* pindex, const Consensus::Params& params) const { return (pindex->nVersion & 0x100); }\n+\n+    ThresholdState GetStateFor(const CBlockIndex* pindexPrev) const { return AbstractThresholdConditionChecker::GetStateFor(pindexPrev, paramsDummy, cache); }\n+};\n+\n+#define CHECKERS 6\n+\n+class VersionBitsTester\n+{\n+    // A fake blockchain\n+    std::vector<CBlockIndex*> vpblock;\n+\n+    // 6 independent checkers for the same bit.\n+    // The first one performs all checks, the second only 50%, the third only 25%, etc...\n+    // This is to test whether lack of cached information leads to the same results.\n+    TestConditionChecker checker[CHECKERS];\n+\n+    // Test counter (to identify failures)\n+    int num;\n+\n+public:\n+    VersionBitsTester() : num(0) {}\n+\n+    VersionBitsTester& Reset() {\n+        for (unsigned int i = 0; i < vpblock.size(); i++) {\n+            delete vpblock[i];\n+        }\n+        for (unsigned int  i = 0; i < CHECKERS; i++) {\n+            checker[i] = TestConditionChecker();\n+        }\n+        vpblock.clear();\n+        return *this;\n+    }\n+\n+    ~VersionBitsTester() {\n+         Reset();\n+    }\n+\n+    VersionBitsTester& Mine(unsigned int height, int32_t nTime, int32_t nVersion) {\n+        while (vpblock.size() < height) {\n+            CBlockIndex* pindex = new CBlockIndex();\n+            pindex->nHeight = vpblock.size();\n+            pindex->pprev = vpblock.size() > 0 ? vpblock.back() : NULL;\n+            pindex->nTime = nTime;\n+            pindex->nVersion = nVersion;\n+            pindex->BuildSkip();\n+            vpblock.push_back(pindex);\n+        }\n+        return *this;\n+    }\n+\n+    VersionBitsTester& TestDefined() {\n+        for (int i = 0; i < CHECKERS; i++) {\n+            if ((insecure_rand() & ((1 << i) - 1)) == 0) {\n+                BOOST_CHECK_MESSAGE(checker[i].GetStateFor(vpblock.empty() ? NULL : vpblock.back()) == THRESHOLD_DEFINED, strprintf(\"Test %i for DEFINED\", num));\n+            }\n+        }\n+        num++;\n+        return *this;\n+    }\n+\n+    VersionBitsTester& TestStarted() {\n+        for (int i = 0; i < CHECKERS; i++) {\n+            if ((insecure_rand() & ((1 << i) - 1)) == 0) {\n+                BOOST_CHECK_MESSAGE(checker[i].GetStateFor(vpblock.empty() ? NULL : vpblock.back()) == THRESHOLD_STARTED, strprintf(\"Test %i for STARTED\", num));\n+            }\n+        }\n+        num++;\n+        return *this;\n+    }\n+\n+    VersionBitsTester& TestLockedIn() {\n+        for (int i = 0; i < CHECKERS; i++) {\n+            if ((insecure_rand() & ((1 << i) - 1)) == 0) {\n+                BOOST_CHECK_MESSAGE(checker[i].GetStateFor(vpblock.empty() ? NULL : vpblock.back()) == THRESHOLD_LOCKED_IN, strprintf(\"Test %i for LOCKED_IN\", num));\n+            }\n+        }\n+        num++;\n+        return *this;\n+    }\n+\n+    VersionBitsTester& TestActive() {\n+        for (int i = 0; i < CHECKERS; i++) {\n+            if ((insecure_rand() & ((1 << i) - 1)) == 0) {\n+                BOOST_CHECK_MESSAGE(checker[i].GetStateFor(vpblock.empty() ? NULL : vpblock.back()) == THRESHOLD_ACTIVE, strprintf(\"Test %i for ACTIVE\", num));\n+            }\n+        }\n+        num++;\n+        return *this;\n+    }\n+\n+    VersionBitsTester& TestFailed() {\n+        for (int i = 0; i < CHECKERS; i++) {\n+            if ((insecure_rand() & ((1 << i) - 1)) == 0) {\n+                BOOST_CHECK_MESSAGE(checker[i].GetStateFor(vpblock.empty() ? NULL : vpblock.back()) == THRESHOLD_FAILED, strprintf(\"Test %i for FAILED\", num));\n+            }\n+        }\n+        num++;\n+        return *this;\n+    }\n+};\n+\n+BOOST_FIXTURE_TEST_SUITE(versionbits_tests, TestingSetup)\n+\n+BOOST_AUTO_TEST_CASE(versionbits_test)\n+{\n+    for (int i = 0; i < 64; i++) {\n+        // DEFINED -> FAILED\n+        VersionBitsTester().TestDefined()\n+                           .Mine(1, TestTime(1), 0x100).TestDefined()\n+                           .Mine(11, TestTime(11), 0x100).TestDefined()\n+                           .Mine(989, TestTime(989), 0x100).TestDefined()\n+                           .Mine(999, TestTime(20000), 0x100).TestDefined()\n+                           .Mine(1000, TestTime(20000), 0x100).TestFailed()\n+                           .Mine(1999, TestTime(30001), 0x100).TestFailed()\n+                           .Mine(2000, TestTime(30002), 0x100).TestFailed()\n+                           .Mine(2001, TestTime(30003), 0x100).TestFailed()\n+                           .Mine(2999, TestTime(30004), 0x100).TestFailed()\n+                           .Mine(3000, TestTime(30005), 0x100).TestFailed()\n+\n+        // DEFINED -> STARTED -> FAILED\n+                           .Reset().TestDefined()\n+                           .Mine(1, TestTime(1), 0).TestDefined()\n+                           .Mine(1000, TestTime(10000) - 1, 0x100).TestDefined() // One second more and it would be defined\n+                           .Mine(2000, TestTime(10000), 0x100).TestStarted() // So that's what happens the next period\n+                           .Mine(2051, TestTime(10010), 0).TestStarted() // 51 old blocks\n+                           .Mine(2950, TestTime(10020), 0x100).TestStarted() // 899 new blocks\n+                           .Mine(3000, TestTime(20000), 0).TestFailed() // 50 old blocks (so 899 out of the past 1000)\n+                           .Mine(4000, TestTime(20010), 0x100).TestFailed()\n+\n+        // DEFINED -> STARTED -> FAILED while threshold reached\n+                           .Reset().TestDefined()\n+                           .Mine(1, TestTime(1), 0).TestDefined()\n+                           .Mine(1000, TestTime(10000) - 1, 0x101).TestDefined() // One second more and it would be defined\n+                           .Mine(2000, TestTime(10000), 0x101).TestStarted() // So that's what happens the next period\n+                           .Mine(2999, TestTime(30000), 0x100).TestStarted() // 999 new blocks\n+                           .Mine(3000, TestTime(30000), 0x100).TestFailed() // 1 new block (so 1000 out of the past 1000 are new)\n+                           .Mine(3999, TestTime(30001), 0).TestFailed()\n+                           .Mine(4000, TestTime(30002), 0).TestFailed()\n+                           .Mine(14333, TestTime(30003), 0).TestFailed()\n+                           .Mine(24000, TestTime(40000), 0).TestFailed()\n+\n+        // DEFINED -> STARTED -> LOCKEDIN at the last minute -> ACTIVE\n+                           .Reset().TestDefined()\n+                           .Mine(1, TestTime(1), 0).TestDefined()\n+                           .Mine(1000, TestTime(10000) - 1, 0x101).TestDefined() // One second more and it would be defined\n+                           .Mine(2000, TestTime(10000), 0x101).TestStarted() // So that's what happens the next period\n+                           .Mine(2050, TestTime(10010), 0x200).TestStarted() // 50 old blocks\n+                           .Mine(2950, TestTime(10020), 0x100).TestStarted() // 900 new blocks\n+                           .Mine(2999, TestTime(19999), 0x200).TestStarted() // 49 old blocks\n+                           .Mine(3000, TestTime(29999), 0x200).TestLockedIn() // 1 old block (so 900 out of the past 1000)\n+                           .Mine(3999, TestTime(30001), 0).TestLockedIn()\n+                           .Mine(4000, TestTime(30002), 0).TestActive()\n+                           .Mine(14333, TestTime(30003), 0).TestActive()\n+                           .Mine(24000, TestTime(40000), 0).TestActive();\n+    }\n+}",
    "path": "src/test/versionbits_tests.cpp",
    "position": null,
    "original_position": 183,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "cf71c5360ac4b43ec6f13c956e5adde5b5e66ff0",
    "user": {
      "login": "sdaftuar",
      "id": 7463573,
      "node_id": "MDQ6VXNlcjc0NjM1NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sdaftuar",
      "html_url": "https://github.com/sdaftuar",
      "followers_url": "https://api.github.com/users/sdaftuar/followers",
      "following_url": "https://api.github.com/users/sdaftuar/following{/other_user}",
      "gists_url": "https://api.github.com/users/sdaftuar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
      "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
      "repos_url": "https://api.github.com/users/sdaftuar/repos",
      "events_url": "https://api.github.com/users/sdaftuar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I wrote up a couple additional tests to try sanity checking the mainnet deployments:\n\n```\ndiff --git a/src/test/versionbits_tests.cpp b/src/test/versionbits_tests.cpp\nindex 9de8461..c384f92 100644\n--- a/src/test/versionbits_tests.cpp\n+++ b/src/test/versionbits_tests.cpp\n@@ -6,6 +6,7 @@\n #include \"random.h\"\n #include \"versionbits.h\"\n #include \"test/test_bitcoin.h\"\n+#include \"chainparams.h\"\n\n #include <boost/test/unit_test.hpp>\n\n@@ -180,6 +181,28 @@ BOOST_AUTO_TEST_CASE(versionbits_test)\n                            .Mine(14333, TestTime(30003), 0).TestActive()\n                            .Mine(24000, TestTime(40000), 0).TestActive();\n     }\n+\n+    // Sanity checks of version bit deployments\n+    const Consensus::Params &mainnetParams = Params(CBaseChainParams::MAIN).GetConsensus();\n+    for (int i=0; i<(int) Consensus::MAX_VERSION_BITS_DEPLOYMENTS; i++) {\n+        uint32_t bitmask = VersionBitsMask(mainnetParams, (Consensus::DeploymentPos)i);\n+        // Make sure that no deployment tries to set an invalid bit.\n+        BOOST_CHECK(bitmask < (uint32_t)VERSIONBITS_TOP_BITS);\n+\n+        // Verify that the deployment windows of different deployment using the\n+        // same bit are disjoint.\n+        // This test may need modification at such time as a new deployment\n+        // is proposed that reuses the bit of an activated soft fork, before the\n+        // end time of that soft fork.  (Alternatively, the end time of that\n+        // activated soft fork could be later changed to be earlier to avoid\n+        // overlap.)\n+        for (int j=i+1; j<(int) Consensus::MAX_VERSION_BITS_DEPLOYMENTS; j++) {\n+            if (VersionBitsMask(mainnetParams, (Consensus::DeploymentPos)j) == bitmask) {\n+                BOOST_CHECK(mainnetParams.vDeployments[j].nStartTime > mainnetParams.vDeployments[i].nTimeout ||\n+                        mainnetParams.vDeployments[i].nStartTime > mainnetParams.vDeployments[j].nTimeout);\n+            }\n+        }\n+    }\n }\n\n BOOST_AUTO_TEST_SUITE_END()\n```\n\nPerhaps worth including something like that here?\n",
    "created_at": "2016-03-10T14:49:26Z",
    "updated_at": "2016-03-16T14:10:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r55689289",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/55689289"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r55689289"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/55689289/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 210,
    "original_line": 183,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/55689787",
    "pull_request_review_id": null,
    "id": 55689787,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Njg5Nzg3",
    "diff_hunk": "@@ -2080,6 +2081,50 @@ void PartitionCheck(bool (*initialDownloadCheck)(), CCriticalSection& cs, const\n     }\n }\n \n+// Protected by cs_main\n+static VersionBitsCache versionbitscache;",
    "path": "src/main.cpp",
    "position": 13,
    "original_position": 13,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "cf71c5360ac4b43ec6f13c956e5adde5b5e66ff0",
    "user": {
      "login": "sdaftuar",
      "id": 7463573,
      "node_id": "MDQ6VXNlcjc0NjM1NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sdaftuar",
      "html_url": "https://github.com/sdaftuar",
      "followers_url": "https://api.github.com/users/sdaftuar/followers",
      "following_url": "https://api.github.com/users/sdaftuar/following{/other_user}",
      "gists_url": "https://api.github.com/users/sdaftuar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
      "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
      "repos_url": "https://api.github.com/users/sdaftuar/repos",
      "events_url": "https://api.github.com/users/sdaftuar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I think we should probably clear out these caches in `UnloadBlockIndex()`.  In particular, I think that if we don't, then the miner_tests will pollute the versionbitscache with cached information that might be invalid in later tests (because the CBlockIndex pointers could be reused, potentially resulting in incorrect state calculations).\n",
    "created_at": "2016-03-10T14:52:41Z",
    "updated_at": "2016-03-16T14:10:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r55689787",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/55689787"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r55689787"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/55689787/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2088,
    "original_line": 2085,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/55847298",
    "pull_request_review_id": null,
    "id": 55847298,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1ODQ3Mjk4",
    "diff_hunk": "@@ -2080,6 +2081,50 @@ void PartitionCheck(bool (*initialDownloadCheck)(), CCriticalSection& cs, const\n     }\n }\n \n+// Protected by cs_main\n+static VersionBitsCache versionbitscache;\n+\n+int32_t ComputeBlockVersion(const CBlockIndex* pindexPrev, const Consensus::Params& params)",
    "path": "src/main.cpp",
    "position": 15,
    "original_position": 15,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "cf71c5360ac4b43ec6f13c956e5adde5b5e66ff0",
    "user": {
      "login": "sdaftuar",
      "id": 7463573,
      "node_id": "MDQ6VXNlcjc0NjM1NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sdaftuar",
      "html_url": "https://github.com/sdaftuar",
      "followers_url": "https://api.github.com/users/sdaftuar/followers",
      "following_url": "https://api.github.com/users/sdaftuar/following{/other_user}",
      "gists_url": "https://api.github.com/users/sdaftuar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
      "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
      "repos_url": "https://api.github.com/users/sdaftuar/repos",
      "events_url": "https://api.github.com/users/sdaftuar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "@sipa I tried implementing a unit test for `ComputeBlockVersion()` using a dummy deployment; not sure adding a dummy softfork for testing is something we want to do, but if you're interested the code for that is here:\n\nhttps://github.com/sdaftuar/bitcoin/commit/b8ec634651fbc5a41afc47a768de4357983d3b4f\n\nIf you think this is worth including in some form, feel free to grab it, or I am happy to separately PR this unit test later.\n",
    "created_at": "2016-03-11T15:54:02Z",
    "updated_at": "2016-03-16T14:10:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r55847298",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/55847298"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r55847298"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/55847298/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2090,
    "original_line": 2087,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/56111612",
    "pull_request_review_id": null,
    "id": 56111612,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MTExNjEy",
    "diff_hunk": "@@ -2080,6 +2081,50 @@ void PartitionCheck(bool (*initialDownloadCheck)(), CCriticalSection& cs, const\n     }\n }\n \n+// Protected by cs_main\n+static VersionBitsCache versionbitscache;",
    "path": "src/main.cpp",
    "position": 13,
    "original_position": 13,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "cf71c5360ac4b43ec6f13c956e5adde5b5e66ff0",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done.\n",
    "created_at": "2016-03-15T03:38:19Z",
    "updated_at": "2016-03-16T14:10:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r56111612",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/56111612"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r56111612"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/56111612/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2088,
    "original_line": 2085,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/56111799",
    "pull_request_review_id": null,
    "id": 56111799,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MTExNzk5",
    "diff_hunk": "@@ -0,0 +1,185 @@\n+// Copyright (c) 2014-2015 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"chain.h\"\n+#include \"random.h\"\n+#include \"versionbits.h\"\n+#include \"test/test_bitcoin.h\"\n+\n+#include <boost/test/unit_test.hpp>\n+\n+/* Define a virtual block time, one block per 10 minutes after Nov 14 2014, 0:55:36am */\n+int32_t TestTime(int nHeight) { return 1415926536 + 600 * nHeight; }\n+\n+static const Consensus::Params paramsDummy = Consensus::Params();\n+\n+class TestConditionChecker : public AbstractThresholdConditionChecker\n+{\n+private:\n+    mutable ThresholdConditionCache cache;\n+\n+public:\n+    int64_t BeginTime(const Consensus::Params& params) const { return TestTime(10000); }\n+    int64_t EndTime(const Consensus::Params& params) const { return TestTime(20000); }\n+    int Period(const Consensus::Params& params) const { return 1000; }\n+    int Threshold(const Consensus::Params& params) const { return 900; }\n+    bool Condition(const CBlockIndex* pindex, const Consensus::Params& params) const { return (pindex->nVersion & 0x100); }\n+\n+    ThresholdState GetStateFor(const CBlockIndex* pindexPrev) const { return AbstractThresholdConditionChecker::GetStateFor(pindexPrev, paramsDummy, cache); }\n+};\n+\n+#define CHECKERS 6\n+\n+class VersionBitsTester\n+{\n+    // A fake blockchain\n+    std::vector<CBlockIndex*> vpblock;\n+\n+    // 6 independent checkers for the same bit.\n+    // The first one performs all checks, the second only 50%, the third only 25%, etc...\n+    // This is to test whether lack of cached information leads to the same results.\n+    TestConditionChecker checker[CHECKERS];\n+\n+    // Test counter (to identify failures)\n+    int num;\n+\n+public:\n+    VersionBitsTester() : num(0) {}\n+\n+    VersionBitsTester& Reset() {\n+        for (unsigned int i = 0; i < vpblock.size(); i++) {\n+            delete vpblock[i];\n+        }\n+        for (unsigned int  i = 0; i < CHECKERS; i++) {\n+            checker[i] = TestConditionChecker();\n+        }\n+        vpblock.clear();\n+        return *this;\n+    }\n+\n+    ~VersionBitsTester() {\n+         Reset();\n+    }\n+\n+    VersionBitsTester& Mine(unsigned int height, int32_t nTime, int32_t nVersion) {\n+        while (vpblock.size() < height) {\n+            CBlockIndex* pindex = new CBlockIndex();\n+            pindex->nHeight = vpblock.size();\n+            pindex->pprev = vpblock.size() > 0 ? vpblock.back() : NULL;\n+            pindex->nTime = nTime;\n+            pindex->nVersion = nVersion;\n+            pindex->BuildSkip();\n+            vpblock.push_back(pindex);\n+        }\n+        return *this;\n+    }\n+\n+    VersionBitsTester& TestDefined() {\n+        for (int i = 0; i < CHECKERS; i++) {\n+            if ((insecure_rand() & ((1 << i) - 1)) == 0) {\n+                BOOST_CHECK_MESSAGE(checker[i].GetStateFor(vpblock.empty() ? NULL : vpblock.back()) == THRESHOLD_DEFINED, strprintf(\"Test %i for DEFINED\", num));\n+            }\n+        }\n+        num++;\n+        return *this;\n+    }\n+\n+    VersionBitsTester& TestStarted() {\n+        for (int i = 0; i < CHECKERS; i++) {\n+            if ((insecure_rand() & ((1 << i) - 1)) == 0) {\n+                BOOST_CHECK_MESSAGE(checker[i].GetStateFor(vpblock.empty() ? NULL : vpblock.back()) == THRESHOLD_STARTED, strprintf(\"Test %i for STARTED\", num));\n+            }\n+        }\n+        num++;\n+        return *this;\n+    }\n+\n+    VersionBitsTester& TestLockedIn() {\n+        for (int i = 0; i < CHECKERS; i++) {\n+            if ((insecure_rand() & ((1 << i) - 1)) == 0) {\n+                BOOST_CHECK_MESSAGE(checker[i].GetStateFor(vpblock.empty() ? NULL : vpblock.back()) == THRESHOLD_LOCKED_IN, strprintf(\"Test %i for LOCKED_IN\", num));\n+            }\n+        }\n+        num++;\n+        return *this;\n+    }\n+\n+    VersionBitsTester& TestActive() {\n+        for (int i = 0; i < CHECKERS; i++) {\n+            if ((insecure_rand() & ((1 << i) - 1)) == 0) {\n+                BOOST_CHECK_MESSAGE(checker[i].GetStateFor(vpblock.empty() ? NULL : vpblock.back()) == THRESHOLD_ACTIVE, strprintf(\"Test %i for ACTIVE\", num));\n+            }\n+        }\n+        num++;\n+        return *this;\n+    }\n+\n+    VersionBitsTester& TestFailed() {\n+        for (int i = 0; i < CHECKERS; i++) {\n+            if ((insecure_rand() & ((1 << i) - 1)) == 0) {\n+                BOOST_CHECK_MESSAGE(checker[i].GetStateFor(vpblock.empty() ? NULL : vpblock.back()) == THRESHOLD_FAILED, strprintf(\"Test %i for FAILED\", num));\n+            }\n+        }\n+        num++;\n+        return *this;\n+    }\n+};\n+\n+BOOST_FIXTURE_TEST_SUITE(versionbits_tests, TestingSetup)\n+\n+BOOST_AUTO_TEST_CASE(versionbits_test)\n+{\n+    for (int i = 0; i < 64; i++) {\n+        // DEFINED -> FAILED\n+        VersionBitsTester().TestDefined()\n+                           .Mine(1, TestTime(1), 0x100).TestDefined()\n+                           .Mine(11, TestTime(11), 0x100).TestDefined()\n+                           .Mine(989, TestTime(989), 0x100).TestDefined()\n+                           .Mine(999, TestTime(20000), 0x100).TestDefined()\n+                           .Mine(1000, TestTime(20000), 0x100).TestFailed()\n+                           .Mine(1999, TestTime(30001), 0x100).TestFailed()\n+                           .Mine(2000, TestTime(30002), 0x100).TestFailed()\n+                           .Mine(2001, TestTime(30003), 0x100).TestFailed()\n+                           .Mine(2999, TestTime(30004), 0x100).TestFailed()\n+                           .Mine(3000, TestTime(30005), 0x100).TestFailed()\n+\n+        // DEFINED -> STARTED -> FAILED\n+                           .Reset().TestDefined()\n+                           .Mine(1, TestTime(1), 0).TestDefined()\n+                           .Mine(1000, TestTime(10000) - 1, 0x100).TestDefined() // One second more and it would be defined\n+                           .Mine(2000, TestTime(10000), 0x100).TestStarted() // So that's what happens the next period\n+                           .Mine(2051, TestTime(10010), 0).TestStarted() // 51 old blocks\n+                           .Mine(2950, TestTime(10020), 0x100).TestStarted() // 899 new blocks\n+                           .Mine(3000, TestTime(20000), 0).TestFailed() // 50 old blocks (so 899 out of the past 1000)\n+                           .Mine(4000, TestTime(20010), 0x100).TestFailed()\n+\n+        // DEFINED -> STARTED -> FAILED while threshold reached\n+                           .Reset().TestDefined()\n+                           .Mine(1, TestTime(1), 0).TestDefined()\n+                           .Mine(1000, TestTime(10000) - 1, 0x101).TestDefined() // One second more and it would be defined\n+                           .Mine(2000, TestTime(10000), 0x101).TestStarted() // So that's what happens the next period\n+                           .Mine(2999, TestTime(30000), 0x100).TestStarted() // 999 new blocks\n+                           .Mine(3000, TestTime(30000), 0x100).TestFailed() // 1 new block (so 1000 out of the past 1000 are new)\n+                           .Mine(3999, TestTime(30001), 0).TestFailed()\n+                           .Mine(4000, TestTime(30002), 0).TestFailed()\n+                           .Mine(14333, TestTime(30003), 0).TestFailed()\n+                           .Mine(24000, TestTime(40000), 0).TestFailed()\n+\n+        // DEFINED -> STARTED -> LOCKEDIN at the last minute -> ACTIVE\n+                           .Reset().TestDefined()\n+                           .Mine(1, TestTime(1), 0).TestDefined()\n+                           .Mine(1000, TestTime(10000) - 1, 0x101).TestDefined() // One second more and it would be defined\n+                           .Mine(2000, TestTime(10000), 0x101).TestStarted() // So that's what happens the next period\n+                           .Mine(2050, TestTime(10010), 0x200).TestStarted() // 50 old blocks\n+                           .Mine(2950, TestTime(10020), 0x100).TestStarted() // 900 new blocks\n+                           .Mine(2999, TestTime(19999), 0x200).TestStarted() // 49 old blocks\n+                           .Mine(3000, TestTime(29999), 0x200).TestLockedIn() // 1 old block (so 900 out of the past 1000)\n+                           .Mine(3999, TestTime(30001), 0).TestLockedIn()\n+                           .Mine(4000, TestTime(30002), 0).TestActive()\n+                           .Mine(14333, TestTime(30003), 0).TestActive()\n+                           .Mine(24000, TestTime(40000), 0).TestActive();\n+    }\n+}",
    "path": "src/test/versionbits_tests.cpp",
    "position": null,
    "original_position": 183,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "cf71c5360ac4b43ec6f13c956e5adde5b5e66ff0",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Sure! Make a commit somewhere?\n",
    "created_at": "2016-03-15T03:42:00Z",
    "updated_at": "2016-03-16T14:10:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r56111799",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/56111799"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r56111799"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/56111799/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 210,
    "original_line": 183,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/56112245",
    "pull_request_review_id": null,
    "id": 56112245,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MTEyMjQ1",
    "diff_hunk": "@@ -2080,6 +2081,50 @@ void PartitionCheck(bool (*initialDownloadCheck)(), CCriticalSection& cs, const\n     }\n }\n \n+// Protected by cs_main\n+static VersionBitsCache versionbitscache;\n+\n+int32_t ComputeBlockVersion(const CBlockIndex* pindexPrev, const Consensus::Params& params)",
    "path": "src/main.cpp",
    "position": 15,
    "original_position": 15,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "cf71c5360ac4b43ec6f13c956e5adde5b5e66ff0",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Cherry-picked.\n",
    "created_at": "2016-03-15T03:51:43Z",
    "updated_at": "2016-03-16T14:10:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r56112245",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/56112245"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r56112245"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/56112245/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2090,
    "original_line": 2087,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/56157297",
    "pull_request_review_id": null,
    "id": 56157297,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MTU3Mjk3",
    "diff_hunk": "@@ -2456,18 +2507,32 @@ void static UpdateTip(CBlockIndex *pindexNew) {\n     {\n         int nUpgraded = 0;\n         const CBlockIndex* pindex = chainActive.Tip();\n+        for (int bit = 0; bit < 29; bit++) {\n+            WarningBitsConditionChecker checker(bit);\n+            ThresholdState state = checker.GetStateFor(pindex, chainParams.GetConsensus(), warningcache[bit]);\n+            if (state == THRESHOLD_ACTIVE || state == THRESHOLD_LOCKED_IN) {\n+                if (state == THRESHOLD_ACTIVE) {\n+                    strMiscWarning = strprintf(_(\"Warning: unknown new rules activated (versionbit %i)\"), bit);\n+                    CAlert::Notify(strMiscWarning, true);\n+                    fWarned = true;\n+                } else {\n+                    LogPrintf(\"%s: unknown new rules are about to activate (versionbit %i)\\n\", bit);\n+                }\n+            }\n+        }\n+        int32_t nExpectedVersion = ComputeBlockVersion(pindex->pprev, chainParams.GetConsensus());\n         for (int i = 0; i < 100 && pindex != NULL; i++)\n         {\n-            if (pindex->nVersion > CBlock::CURRENT_VERSION)\n+            if (pindex->nVersion > VERSIONBITS_LAST_OLD_BLOCK_VERSION && (pindex->nVersion & ~nExpectedVersion) != 0)\n                 ++nUpgraded;\n             pindex = pindex->pprev;\n         }\n         if (nUpgraded > 0)\n-            LogPrintf(\"%s: %d of last 100 blocks above version %d\\n\", __func__, nUpgraded, (int)CBlock::CURRENT_VERSION);\n-        if (nUpgraded > 100/2)\n+            LogPrintf(\"%s: %d of last 100 blocks have unexpected version\\n\", __func__, nUpgraded);\n+        if (nUpgraded > 100/2 && !fWarned)\n         {\n             // strMiscWarning is read by GetWarnings(), called by Qt and the JSON-RPC code to warn the user:\n-            strMiscWarning = _(\"Warning: This version is obsolete; upgrade required!\");\n+            strMiscWarning = _(\"Warning: unknown block versions being mined on the network!\");",
    "path": "src/main.cpp",
    "position": null,
    "original_position": 105,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "293e928bf3a69ed390d0a119e293c153f5252946",
    "user": {
      "login": "morcos",
      "id": 4360349,
      "node_id": "MDQ6VXNlcjQzNjAzNDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4360349?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/morcos",
      "html_url": "https://github.com/morcos",
      "followers_url": "https://api.github.com/users/morcos/followers",
      "following_url": "https://api.github.com/users/morcos/following{/other_user}",
      "gists_url": "https://api.github.com/users/morcos/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/morcos/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/morcos/subscriptions",
      "organizations_url": "https://api.github.com/users/morcos/orgs",
      "repos_url": "https://api.github.com/users/morcos/repos",
      "events_url": "https://api.github.com/users/morcos/events{/privacy}",
      "received_events_url": "https://api.github.com/users/morcos/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I'd prefer if this warning was a little bit stronger.  Perhaps you could change it to:\n`\"Warning: Unknown block versions being mined! It's possible unknown rules are in effect\"`  or something to that effect?\n",
    "created_at": "2016-03-15T12:56:04Z",
    "updated_at": "2016-03-16T14:10:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r56157297",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/56157297"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r56157297"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/56157297/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2535,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/56158323",
    "pull_request_review_id": null,
    "id": 56158323,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MTU4MzIz",
    "diff_hunk": "@@ -0,0 +1,185 @@\n+// Copyright (c) 2014-2015 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"chain.h\"\n+#include \"random.h\"\n+#include \"versionbits.h\"\n+#include \"test/test_bitcoin.h\"\n+\n+#include <boost/test/unit_test.hpp>\n+\n+/* Define a virtual block time, one block per 10 minutes after Nov 14 2014, 0:55:36am */\n+int32_t TestTime(int nHeight) { return 1415926536 + 600 * nHeight; }\n+\n+static const Consensus::Params paramsDummy = Consensus::Params();\n+\n+class TestConditionChecker : public AbstractThresholdConditionChecker\n+{\n+private:\n+    mutable ThresholdConditionCache cache;\n+\n+public:\n+    int64_t BeginTime(const Consensus::Params& params) const { return TestTime(10000); }\n+    int64_t EndTime(const Consensus::Params& params) const { return TestTime(20000); }\n+    int Period(const Consensus::Params& params) const { return 1000; }\n+    int Threshold(const Consensus::Params& params) const { return 900; }\n+    bool Condition(const CBlockIndex* pindex, const Consensus::Params& params) const { return (pindex->nVersion & 0x100); }\n+\n+    ThresholdState GetStateFor(const CBlockIndex* pindexPrev) const { return AbstractThresholdConditionChecker::GetStateFor(pindexPrev, paramsDummy, cache); }\n+};\n+\n+#define CHECKERS 6\n+\n+class VersionBitsTester\n+{\n+    // A fake blockchain\n+    std::vector<CBlockIndex*> vpblock;\n+\n+    // 6 independent checkers for the same bit.\n+    // The first one performs all checks, the second only 50%, the third only 25%, etc...\n+    // This is to test whether lack of cached information leads to the same results.\n+    TestConditionChecker checker[CHECKERS];\n+\n+    // Test counter (to identify failures)\n+    int num;\n+\n+public:\n+    VersionBitsTester() : num(0) {}\n+\n+    VersionBitsTester& Reset() {\n+        for (unsigned int i = 0; i < vpblock.size(); i++) {\n+            delete vpblock[i];\n+        }\n+        for (unsigned int  i = 0; i < CHECKERS; i++) {\n+            checker[i] = TestConditionChecker();\n+        }\n+        vpblock.clear();\n+        return *this;\n+    }\n+\n+    ~VersionBitsTester() {\n+         Reset();\n+    }\n+\n+    VersionBitsTester& Mine(unsigned int height, int32_t nTime, int32_t nVersion) {\n+        while (vpblock.size() < height) {\n+            CBlockIndex* pindex = new CBlockIndex();\n+            pindex->nHeight = vpblock.size();\n+            pindex->pprev = vpblock.size() > 0 ? vpblock.back() : NULL;\n+            pindex->nTime = nTime;\n+            pindex->nVersion = nVersion;\n+            pindex->BuildSkip();\n+            vpblock.push_back(pindex);\n+        }\n+        return *this;\n+    }\n+\n+    VersionBitsTester& TestDefined() {\n+        for (int i = 0; i < CHECKERS; i++) {\n+            if ((insecure_rand() & ((1 << i) - 1)) == 0) {\n+                BOOST_CHECK_MESSAGE(checker[i].GetStateFor(vpblock.empty() ? NULL : vpblock.back()) == THRESHOLD_DEFINED, strprintf(\"Test %i for DEFINED\", num));\n+            }\n+        }\n+        num++;\n+        return *this;\n+    }\n+\n+    VersionBitsTester& TestStarted() {\n+        for (int i = 0; i < CHECKERS; i++) {\n+            if ((insecure_rand() & ((1 << i) - 1)) == 0) {\n+                BOOST_CHECK_MESSAGE(checker[i].GetStateFor(vpblock.empty() ? NULL : vpblock.back()) == THRESHOLD_STARTED, strprintf(\"Test %i for STARTED\", num));\n+            }\n+        }\n+        num++;\n+        return *this;\n+    }\n+\n+    VersionBitsTester& TestLockedIn() {\n+        for (int i = 0; i < CHECKERS; i++) {\n+            if ((insecure_rand() & ((1 << i) - 1)) == 0) {\n+                BOOST_CHECK_MESSAGE(checker[i].GetStateFor(vpblock.empty() ? NULL : vpblock.back()) == THRESHOLD_LOCKED_IN, strprintf(\"Test %i for LOCKED_IN\", num));\n+            }\n+        }\n+        num++;\n+        return *this;\n+    }\n+\n+    VersionBitsTester& TestActive() {\n+        for (int i = 0; i < CHECKERS; i++) {\n+            if ((insecure_rand() & ((1 << i) - 1)) == 0) {\n+                BOOST_CHECK_MESSAGE(checker[i].GetStateFor(vpblock.empty() ? NULL : vpblock.back()) == THRESHOLD_ACTIVE, strprintf(\"Test %i for ACTIVE\", num));\n+            }\n+        }\n+        num++;\n+        return *this;\n+    }\n+\n+    VersionBitsTester& TestFailed() {\n+        for (int i = 0; i < CHECKERS; i++) {\n+            if ((insecure_rand() & ((1 << i) - 1)) == 0) {\n+                BOOST_CHECK_MESSAGE(checker[i].GetStateFor(vpblock.empty() ? NULL : vpblock.back()) == THRESHOLD_FAILED, strprintf(\"Test %i for FAILED\", num));\n+            }\n+        }\n+        num++;\n+        return *this;\n+    }\n+};\n+\n+BOOST_FIXTURE_TEST_SUITE(versionbits_tests, TestingSetup)\n+\n+BOOST_AUTO_TEST_CASE(versionbits_test)\n+{\n+    for (int i = 0; i < 64; i++) {\n+        // DEFINED -> FAILED\n+        VersionBitsTester().TestDefined()\n+                           .Mine(1, TestTime(1), 0x100).TestDefined()\n+                           .Mine(11, TestTime(11), 0x100).TestDefined()\n+                           .Mine(989, TestTime(989), 0x100).TestDefined()\n+                           .Mine(999, TestTime(20000), 0x100).TestDefined()\n+                           .Mine(1000, TestTime(20000), 0x100).TestFailed()\n+                           .Mine(1999, TestTime(30001), 0x100).TestFailed()\n+                           .Mine(2000, TestTime(30002), 0x100).TestFailed()\n+                           .Mine(2001, TestTime(30003), 0x100).TestFailed()\n+                           .Mine(2999, TestTime(30004), 0x100).TestFailed()\n+                           .Mine(3000, TestTime(30005), 0x100).TestFailed()\n+\n+        // DEFINED -> STARTED -> FAILED\n+                           .Reset().TestDefined()\n+                           .Mine(1, TestTime(1), 0).TestDefined()\n+                           .Mine(1000, TestTime(10000) - 1, 0x100).TestDefined() // One second more and it would be defined\n+                           .Mine(2000, TestTime(10000), 0x100).TestStarted() // So that's what happens the next period\n+                           .Mine(2051, TestTime(10010), 0).TestStarted() // 51 old blocks\n+                           .Mine(2950, TestTime(10020), 0x100).TestStarted() // 899 new blocks\n+                           .Mine(3000, TestTime(20000), 0).TestFailed() // 50 old blocks (so 899 out of the past 1000)\n+                           .Mine(4000, TestTime(20010), 0x100).TestFailed()\n+\n+        // DEFINED -> STARTED -> FAILED while threshold reached\n+                           .Reset().TestDefined()\n+                           .Mine(1, TestTime(1), 0).TestDefined()\n+                           .Mine(1000, TestTime(10000) - 1, 0x101).TestDefined() // One second more and it would be defined\n+                           .Mine(2000, TestTime(10000), 0x101).TestStarted() // So that's what happens the next period\n+                           .Mine(2999, TestTime(30000), 0x100).TestStarted() // 999 new blocks\n+                           .Mine(3000, TestTime(30000), 0x100).TestFailed() // 1 new block (so 1000 out of the past 1000 are new)\n+                           .Mine(3999, TestTime(30001), 0).TestFailed()\n+                           .Mine(4000, TestTime(30002), 0).TestFailed()\n+                           .Mine(14333, TestTime(30003), 0).TestFailed()\n+                           .Mine(24000, TestTime(40000), 0).TestFailed()\n+\n+        // DEFINED -> STARTED -> LOCKEDIN at the last minute -> ACTIVE\n+                           .Reset().TestDefined()\n+                           .Mine(1, TestTime(1), 0).TestDefined()\n+                           .Mine(1000, TestTime(10000) - 1, 0x101).TestDefined() // One second more and it would be defined\n+                           .Mine(2000, TestTime(10000), 0x101).TestStarted() // So that's what happens the next period\n+                           .Mine(2050, TestTime(10010), 0x200).TestStarted() // 50 old blocks\n+                           .Mine(2950, TestTime(10020), 0x100).TestStarted() // 900 new blocks\n+                           .Mine(2999, TestTime(19999), 0x200).TestStarted() // 49 old blocks\n+                           .Mine(3000, TestTime(29999), 0x200).TestLockedIn() // 1 old block (so 900 out of the past 1000)\n+                           .Mine(3999, TestTime(30001), 0).TestLockedIn()\n+                           .Mine(4000, TestTime(30002), 0).TestActive()\n+                           .Mine(14333, TestTime(30003), 0).TestActive()\n+                           .Mine(24000, TestTime(40000), 0).TestActive();\n+    }\n+}",
    "path": "src/test/versionbits_tests.cpp",
    "position": null,
    "original_position": 183,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "cf71c5360ac4b43ec6f13c956e5adde5b5e66ff0",
    "user": {
      "login": "sdaftuar",
      "id": 7463573,
      "node_id": "MDQ6VXNlcjc0NjM1NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sdaftuar",
      "html_url": "https://github.com/sdaftuar",
      "followers_url": "https://api.github.com/users/sdaftuar/followers",
      "following_url": "https://api.github.com/users/sdaftuar/following{/other_user}",
      "gists_url": "https://api.github.com/users/sdaftuar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
      "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
      "repos_url": "https://api.github.com/users/sdaftuar/repos",
      "events_url": "https://api.github.com/users/sdaftuar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "~~https://github.com/sdaftuar/bitcoin/commit/471d10583b197556ff7d9ae4c30a258a8f3061ff~~\n\n~~Actually, I rebased this, with a minor change to use VERSIONBITS_TOP_MASK rather than VERSIONBITS_TOP_BITS when checking the bitmask:\nhttps://github.com/sdaftuar/bitcoin/commit/6b7ec42549d75292719ca7f77a087c4f471de92f~~\n\nEdit: Ok I think this is what I intend: https://github.com/sdaftuar/bitcoin/commit/0e492acd62fa792f23e5400e810c7b8b1b13d7b9\n",
    "created_at": "2016-03-15T13:05:53Z",
    "updated_at": "2016-03-16T14:10:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r56158323",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/56158323"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r56158323"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/56158323/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 210,
    "original_line": 183,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/56162024",
    "pull_request_review_id": null,
    "id": 56162024,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MTYyMDI0",
    "diff_hunk": "@@ -2456,18 +2507,32 @@ void static UpdateTip(CBlockIndex *pindexNew) {\n     {\n         int nUpgraded = 0;\n         const CBlockIndex* pindex = chainActive.Tip();\n+        for (int bit = 0; bit < 29; bit++) {\n+            WarningBitsConditionChecker checker(bit);\n+            ThresholdState state = checker.GetStateFor(pindex, chainParams.GetConsensus(), warningcache[bit]);\n+            if (state == THRESHOLD_ACTIVE || state == THRESHOLD_LOCKED_IN) {\n+                if (state == THRESHOLD_ACTIVE) {\n+                    strMiscWarning = strprintf(_(\"Warning: unknown new rules activated (versionbit %i)\"), bit);\n+                    CAlert::Notify(strMiscWarning, true);\n+                    fWarned = true;\n+                } else {\n+                    LogPrintf(\"%s: unknown new rules are about to activate (versionbit %i)\\n\", bit);",
    "path": "src/main.cpp",
    "position": null,
    "original_position": 85,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "293e928bf3a69ed390d0a119e293c153f5252946",
    "user": {
      "login": "sdaftuar",
      "id": 7463573,
      "node_id": "MDQ6VXNlcjc0NjM1NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sdaftuar",
      "html_url": "https://github.com/sdaftuar",
      "followers_url": "https://api.github.com/users/sdaftuar/followers",
      "following_url": "https://api.github.com/users/sdaftuar/following{/other_user}",
      "gists_url": "https://api.github.com/users/sdaftuar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
      "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
      "repos_url": "https://api.github.com/users/sdaftuar/repos",
      "events_url": "https://api.github.com/users/sdaftuar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Is this missing a `__func__`?\n",
    "created_at": "2016-03-15T13:32:18Z",
    "updated_at": "2016-03-16T14:10:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r56162024",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/56162024"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r56162024"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/56162024/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2519,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/56164182",
    "pull_request_review_id": null,
    "id": 56164182,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MTY0MTgy",
    "diff_hunk": "@@ -2456,18 +2507,32 @@ void static UpdateTip(CBlockIndex *pindexNew) {\n     {\n         int nUpgraded = 0;\n         const CBlockIndex* pindex = chainActive.Tip();\n+        for (int bit = 0; bit < 29; bit++) {\n+            WarningBitsConditionChecker checker(bit);\n+            ThresholdState state = checker.GetStateFor(pindex, chainParams.GetConsensus(), warningcache[bit]);\n+            if (state == THRESHOLD_ACTIVE || state == THRESHOLD_LOCKED_IN) {\n+                if (state == THRESHOLD_ACTIVE) {\n+                    strMiscWarning = strprintf(_(\"Warning: unknown new rules activated (versionbit %i)\"), bit);\n+                    CAlert::Notify(strMiscWarning, true);\n+                    fWarned = true;\n+                } else {\n+                    LogPrintf(\"%s: unknown new rules are about to activate (versionbit %i)\\n\", bit);\n+                }\n+            }\n+        }\n+        int32_t nExpectedVersion = ComputeBlockVersion(pindex->pprev, chainParams.GetConsensus());",
    "path": "src/main.cpp",
    "position": null,
    "original_position": 89,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "293e928bf3a69ed390d0a119e293c153f5252946",
    "user": {
      "login": "sdaftuar",
      "id": 7463573,
      "node_id": "MDQ6VXNlcjc0NjM1NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sdaftuar",
      "html_url": "https://github.com/sdaftuar",
      "followers_url": "https://api.github.com/users/sdaftuar/followers",
      "following_url": "https://api.github.com/users/sdaftuar/following{/other_user}",
      "gists_url": "https://api.github.com/users/sdaftuar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
      "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
      "repos_url": "https://api.github.com/users/sdaftuar/repos",
      "events_url": "https://api.github.com/users/sdaftuar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "(Sorry if this is a repost, I think github ate my first attempt to comment)\n\nI think we should move this line into the for loop below; otherwise we'd generate a warning after a known soft-fork activates.\n",
    "created_at": "2016-03-15T13:42:42Z",
    "updated_at": "2016-03-16T14:10:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r56164182",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/56164182"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r56164182"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/56164182/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2523,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/56352954",
    "pull_request_review_id": null,
    "id": 56352954,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MzUyOTU0",
    "diff_hunk": "@@ -604,6 +604,20 @@ static UniValue SoftForkDesc(const std::string &name, int version, CBlockIndex*\n     return rv;\n }\n \n+static UniValue BIP9SoftForkDesc(const std::string& name, const Consensus::Params& consensusParams, Consensus::DeploymentPos id)",
    "path": "src/rpc/blockchain.cpp",
    "position": 4,
    "original_position": 4,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "user": {
      "login": "jtimon",
      "id": 1008458,
      "node_id": "MDQ6VXNlcjEwMDg0NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1008458?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtimon",
      "html_url": "https://github.com/jtimon",
      "followers_url": "https://api.github.com/users/jtimon/followers",
      "following_url": "https://api.github.com/users/jtimon/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtimon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtimon/subscriptions",
      "organizations_url": "https://api.github.com/users/jtimon/orgs",
      "repos_url": "https://api.github.com/users/jtimon/repos",
      "events_url": "https://api.github.com/users/jtimon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtimon/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Shouldn't this loop throught all the deployments defined in Consensus::Params and be called from somewhere?\nStyle: why is not indented?\n",
    "created_at": "2016-03-16T15:20:04Z",
    "updated_at": "2016-03-16T15:20:04Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r56352954",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/56352954"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r56352954"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/56352954/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 607,
    "original_line": 607,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/56353791",
    "pull_request_review_id": null,
    "id": 56353791,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MzUzNzkx",
    "diff_hunk": "@@ -604,6 +604,20 @@ static UniValue SoftForkDesc(const std::string &name, int version, CBlockIndex*\n     return rv;\n }\n \n+static UniValue BIP9SoftForkDesc(const std::string& name, const Consensus::Params& consensusParams, Consensus::DeploymentPos id)",
    "path": "src/rpc/blockchain.cpp",
    "position": 4,
    "original_position": 4,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "It's called once for every deployment below, similar to how SoftForkMajorityDesc is. There just are no deployments just yet.\n\nMaking this function iterate through all deployments would require putting knowledge of the names of all deployments in the consensus params, and would make it inevitable that the test deployment is listed.\n",
    "created_at": "2016-03-16T15:24:30Z",
    "updated_at": "2016-03-16T15:24:30Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r56353791",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/56353791"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r56353791"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/56353791/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 607,
    "original_line": 607,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/56354506",
    "pull_request_review_id": null,
    "id": 56354506,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MzU0NTA2",
    "diff_hunk": "@@ -604,6 +604,20 @@ static UniValue SoftForkDesc(const std::string &name, int version, CBlockIndex*\n     return rv;\n }\n \n+static UniValue BIP9SoftForkDesc(const std::string& name, const Consensus::Params& consensusParams, Consensus::DeploymentPos id)",
    "path": "src/rpc/blockchain.cpp",
    "position": 4,
    "original_position": 4,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Style: what do you mean by not indented?\n",
    "created_at": "2016-03-16T15:28:13Z",
    "updated_at": "2016-03-16T15:28:27Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r56354506",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/56354506"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r56354506"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/56354506/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 607,
    "original_line": 607,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/56354686",
    "pull_request_review_id": null,
    "id": 56354686,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MzU0Njg2",
    "diff_hunk": "@@ -604,6 +604,20 @@ static UniValue SoftForkDesc(const std::string &name, int version, CBlockIndex*\n     return rv;\n }\n \n+static UniValue BIP9SoftForkDesc(const std::string& name, const Consensus::Params& consensusParams, Consensus::DeploymentPos id)",
    "path": "src/rpc/blockchain.cpp",
    "position": 4,
    "original_position": 4,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "user": {
      "login": "jtimon",
      "id": 1008458,
      "node_id": "MDQ6VXNlcjEwMDg0NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1008458?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtimon",
      "html_url": "https://github.com/jtimon",
      "followers_url": "https://api.github.com/users/jtimon/followers",
      "following_url": "https://api.github.com/users/jtimon/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtimon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtimon/subscriptions",
      "organizations_url": "https://api.github.com/users/jtimon/orgs",
      "repos_url": "https://api.github.com/users/jtimon/repos",
      "events_url": "https://api.github.com/users/jtimon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtimon/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Mhmm, I can only find one instance of the string \"BIP9SoftForkDesc\" in the changes.\n\nre itarate with knowledge of the names, what's wrong with \n\n```\nfor (int i = 0; i < MAX_VERSION_BITS_DEPLOYMENTS; ++i)\n```\n\n?\n",
    "created_at": "2016-03-16T15:29:10Z",
    "updated_at": "2016-03-16T15:29:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r56354686",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/56354686"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r56354686"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/56354686/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 607,
    "original_line": 607,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/56356070",
    "pull_request_review_id": null,
    "id": 56356070,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MzU2MDcw",
    "diff_hunk": "@@ -604,6 +604,20 @@ static UniValue SoftForkDesc(const std::string &name, int version, CBlockIndex*\n     return rv;\n }\n \n+static UniValue BIP9SoftForkDesc(const std::string& name, const Consensus::Params& consensusParams, Consensus::DeploymentPos id)",
    "path": "src/rpc/blockchain.cpp",
    "position": 4,
    "original_position": 4,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "You don't know what string name to give to the Object entry inside \"bip9_softforks\".\n\nYes you can't find any calls to it yet, because there are no BIP9 softforks defined. Future deployments using BIP9 are supposed to be added below, just like ISM softforks were supposed to be added below to \"softforks\".\n",
    "created_at": "2016-03-16T15:36:22Z",
    "updated_at": "2016-03-16T15:36:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r56356070",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/56356070"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r56356070"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/56356070/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 607,
    "original_line": 607,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/56356629",
    "pull_request_review_id": null,
    "id": 56356629,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MzU2NjI5",
    "diff_hunk": "@@ -604,6 +604,20 @@ static UniValue SoftForkDesc(const std::string &name, int version, CBlockIndex*\n     return rv;\n }\n \n+static UniValue BIP9SoftForkDesc(const std::string& name, const Consensus::Params& consensusParams, Consensus::DeploymentPos id)",
    "path": "src/rpc/blockchain.cpp",
    "position": 4,
    "original_position": 4,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "user": {
      "login": "jtimon",
      "id": 1008458,
      "node_id": "MDQ6VXNlcjEwMDg0NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1008458?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtimon",
      "html_url": "https://github.com/jtimon",
      "followers_url": "https://api.github.com/users/jtimon/followers",
      "following_url": "https://api.github.com/users/jtimon/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtimon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtimon/subscriptions",
      "organizations_url": "https://api.github.com/users/jtimon/orgs",
      "repos_url": "https://api.github.com/users/jtimon/repos",
      "events_url": "https://api.github.com/users/jtimon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtimon/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Style, oh, never mind: https://github.com/bitcoin/bitcoin/blob/master/src/.clang-format#L27\n\nI see, I didn't thought about the name.\n",
    "created_at": "2016-03-16T15:39:03Z",
    "updated_at": "2016-03-16T15:39:03Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r56356629",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/56356629"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r56356629"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/56356629/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 607,
    "original_line": 607,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/57326422",
    "pull_request_review_id": null,
    "id": 57326422,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MzI2NDIy",
    "diff_hunk": "@@ -7,8 +7,29 @@\n #define BITCOIN_CONSENSUS_PARAMS_H\n \n #include \"uint256.h\"\n+#include <map>\n+#include <string>\n \n namespace Consensus {\n+\n+enum DeploymentPos",
    "path": "src/consensus/params.h",
    "position": 9,
    "original_position": 9,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "user": {
      "login": "petertodd",
      "id": 7042,
      "node_id": "MDQ6VXNlcjcwNDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7042?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/petertodd",
      "html_url": "https://github.com/petertodd",
      "followers_url": "https://api.github.com/users/petertodd/followers",
      "following_url": "https://api.github.com/users/petertodd/following{/other_user}",
      "gists_url": "https://api.github.com/users/petertodd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/petertodd/subscriptions",
      "organizations_url": "https://api.github.com/users/petertodd/orgs",
      "repos_url": "https://api.github.com/users/petertodd/repos",
      "events_url": "https://api.github.com/users/petertodd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/petertodd/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Why is this called \"DeploymentPos\"? It's not a bit position; the actual bit positions have another layer of indirection in the BIP9Deployment structure: https://github.com/sipa/bitcoin/blob/8c74cedef53ab791ed333f25794f8b9d2e9f51aa/src/consensus/params.h#L26\n\nWe should change this to DeploymentId\n",
    "created_at": "2016-03-24T14:41:34Z",
    "updated_at": "2016-03-24T14:41:34Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r57326422",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/57326422"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r57326422"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/57326422/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 15,
    "original_line": 15,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/57340389",
    "pull_request_review_id": null,
    "id": 57340389,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MzQwMzg5",
    "diff_hunk": "@@ -7,8 +7,29 @@\n #define BITCOIN_CONSENSUS_PARAMS_H\n \n #include \"uint256.h\"\n+#include <map>\n+#include <string>\n \n namespace Consensus {\n+\n+enum DeploymentPos",
    "path": "src/consensus/params.h",
    "position": 9,
    "original_position": 9,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "'position' is a very ambigious, yes. It's almost never a good choice.\nMade a similar comment here on another pull: https://github.com/bitcoin/bitcoin/pull/7541#discussion_r53135937\nAgree 'Id' seems be a better fit here.\n",
    "created_at": "2016-03-24T16:02:29Z",
    "updated_at": "2016-03-24T16:02:29Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r57340389",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/57340389"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r57340389"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/57340389/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 15,
    "original_line": 15,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/57379140",
    "pull_request_review_id": null,
    "id": 57379140,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3Mzc5MTQw",
    "diff_hunk": "@@ -7,8 +7,29 @@\n #define BITCOIN_CONSENSUS_PARAMS_H\n \n #include \"uint256.h\"\n+#include <map>\n+#include <string>\n \n namespace Consensus {\n+\n+enum DeploymentPos",
    "path": "src/consensus/params.h",
    "position": 9,
    "original_position": 9,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "user": {
      "login": "petertodd",
      "id": 7042,
      "node_id": "MDQ6VXNlcjcwNDI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7042?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/petertodd",
      "html_url": "https://github.com/petertodd",
      "followers_url": "https://api.github.com/users/petertodd/followers",
      "following_url": "https://api.github.com/users/petertodd/following{/other_user}",
      "gists_url": "https://api.github.com/users/petertodd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/petertodd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/petertodd/subscriptions",
      "organizations_url": "https://api.github.com/users/petertodd/orgs",
      "repos_url": "https://api.github.com/users/petertodd/repos",
      "events_url": "https://api.github.com/users/petertodd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/petertodd/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Alright, I'll do a pull-req to fix that - but next week after the long weekend!\n",
    "created_at": "2016-03-24T20:04:23Z",
    "updated_at": "2016-03-24T20:04:23Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r57379140",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/57379140"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r57379140"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/57379140/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 15,
    "original_line": 15,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/57511004",
    "pull_request_review_id": null,
    "id": 57511004,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NTExMDA0",
    "diff_hunk": "@@ -7,8 +7,29 @@\n #define BITCOIN_CONSENSUS_PARAMS_H\n \n #include \"uint256.h\"\n+#include <map>\n+#include <string>\n \n namespace Consensus {\n+\n+enum DeploymentPos",
    "path": "src/consensus/params.h",
    "position": 9,
    "original_position": 9,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "user": {
      "login": "jtimon",
      "id": 1008458,
      "node_id": "MDQ6VXNlcjEwMDg0NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1008458?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtimon",
      "html_url": "https://github.com/jtimon",
      "followers_url": "https://api.github.com/users/jtimon/followers",
      "following_url": "https://api.github.com/users/jtimon/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtimon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtimon/subscriptions",
      "organizations_url": "https://api.github.com/users/jtimon/orgs",
      "repos_url": "https://api.github.com/users/jtimon/repos",
      "events_url": "https://api.github.com/users/jtimon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtimon/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "It is the position in Consensus::Params::vDeployments. Id could have been another option, but O disagree there's anything to fix here. Seems too late for bike-shedding this.\n",
    "created_at": "2016-03-26T08:20:19Z",
    "updated_at": "2016-03-26T08:20:19Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r57511004",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/57511004"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r57511004"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/57511004/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 15,
    "original_line": 15,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/57512624",
    "pull_request_review_id": null,
    "id": 57512624,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NTEyNjI0",
    "diff_hunk": "@@ -7,8 +7,29 @@\n #define BITCOIN_CONSENSUS_PARAMS_H\n \n #include \"uint256.h\"\n+#include <map>\n+#include <string>\n \n namespace Consensus {\n+\n+enum DeploymentPos",
    "path": "src/consensus/params.h",
    "position": 9,
    "original_position": 9,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Adding a comment for doxygen would also help if the purpose is not immediately clear from the code alone.\n",
    "created_at": "2016-03-26T11:41:22Z",
    "updated_at": "2016-03-26T11:41:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r57512624",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/57512624"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r57512624"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/57512624/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 15,
    "original_line": 15,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/57513329",
    "pull_request_review_id": null,
    "id": 57513329,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NTEzMzI5",
    "diff_hunk": "@@ -7,8 +7,29 @@\n #define BITCOIN_CONSENSUS_PARAMS_H\n \n #include \"uint256.h\"\n+#include <map>\n+#include <string>\n \n namespace Consensus {\n+\n+enum DeploymentPos",
    "path": "src/consensus/params.h",
    "position": 9,
    "original_position": 9,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I had the same confusion as @petertodd when initially reading the code, so for new developers it must be worse. I do think at least a comment should be added.\n",
    "created_at": "2016-03-26T13:03:10Z",
    "updated_at": "2016-03-26T13:03:10Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r57513329",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/57513329"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r57513329"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/57513329/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 15,
    "original_line": 15,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/57513490",
    "pull_request_review_id": null,
    "id": 57513490,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NTEzNDkw",
    "diff_hunk": "@@ -7,8 +7,29 @@\n #define BITCOIN_CONSENSUS_PARAMS_H\n \n #include \"uint256.h\"\n+#include <map>\n+#include <string>\n \n namespace Consensus {\n+\n+enum DeploymentPos",
    "path": "src/consensus/params.h",
    "position": 9,
    "original_position": 9,
    "commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "original_commit_id": "8c74cedef53ab791ed333f25794f8b9d2e9f51aa",
    "user": {
      "login": "jtimon",
      "id": 1008458,
      "node_id": "MDQ6VXNlcjEwMDg0NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1008458?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtimon",
      "html_url": "https://github.com/jtimon",
      "followers_url": "https://api.github.com/users/jtimon/followers",
      "following_url": "https://api.github.com/users/jtimon/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtimon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtimon/subscriptions",
      "organizations_url": "https://api.github.com/users/jtimon/orgs",
      "repos_url": "https://api.github.com/users/jtimon/repos",
      "events_url": "https://api.github.com/users/jtimon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtimon/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "ACK on adding documentation.\n",
    "created_at": "2016-03-26T13:20:42Z",
    "updated_at": "2016-03-26T13:20:42Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r57513490",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/57513490"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/7575#discussion_r57513490"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/7575"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/57513490/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 15,
    "original_line": 15,
    "side": "RIGHT"
  }
]