[
  {
    "sha": "1b327daeb510d91c065ea3610c4b5740c743fffe",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoxYjMyN2RhZWI1MTBkOTFjMDY1ZWEzNjEwYzRiNTc0MGM3NDNmZmZl",
    "commit": {
      "author": {
        "name": "Matt Corallo",
        "email": "matt@bluematt.me",
        "date": "2012-03-25T20:17:39Z"
      },
      "committer": {
        "name": "Matt Corallo",
        "email": "matt@bluematt.me",
        "date": "2012-03-25T20:17:39Z"
      },
      "message": "Fix boost::interprocess::detail::winapi::get_last_bootup_time\n\nThis fixes #981 and should fix #956",
      "tree": {
        "sha": "2e75a831f4c9d84a8148a455ff31233d43e3b18b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2e75a831f4c9d84a8148a455ff31233d43e3b18b"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1b327daeb510d91c065ea3610c4b5740c743fffe",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1b327daeb510d91c065ea3610c4b5740c743fffe",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/1b327daeb510d91c065ea3610c4b5740c743fffe",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1b327daeb510d91c065ea3610c4b5740c743fffe/comments",
    "author": null,
    "committer": null,
    "parents": [
      {
        "sha": "b3dbab33ca00e6fe959898558bb59845ca246f21",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b3dbab33ca00e6fe959898558bb59845ca246f21",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/b3dbab33ca00e6fe959898558bb59845ca246f21"
      }
    ],
    "stats": {
      "total": 34,
      "additions": 30,
      "deletions": 4
    },
    "files": [
      {
        "sha": "5270c52359921989d13ef42b9f1bb0d8541f782c",
        "filename": "contrib/gitian-descriptors/boost-win32.yml",
        "status": "modified",
        "additions": 28,
        "deletions": 2,
        "changes": 30,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/1b327daeb510d91c065ea3610c4b5740c743fffe/contrib/gitian-descriptors/boost-win32.yml",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/1b327daeb510d91c065ea3610c4b5740c743fffe/contrib/gitian-descriptors/boost-win32.yml",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/gitian-descriptors/boost-win32.yml?ref=1b327daeb510d91c065ea3610c4b5740c743fffe",
        "patch": "@@ -17,6 +17,32 @@ script: |\n   mkdir -p $TMPDIR/bin/$GBUILD_BITS $TMPDIR/include\n   tar xjf boost_1_47_0.tar.bz2\n   cd boost_1_47_0\n+  echo \"--- win32_api.orig.hpp\t2012-03-25 16:08:28.932377422 -0400\n++++ win32_api.hpp\t2012-03-25 16:08:30.312377422 -0400\n+@@ -1572,14 +1572,21 @@\n+    return ret;\n+ }\n+ \n++static std::string strLastBootupTimeCache;\n+ inline bool get_last_bootup_time( std::string& str )\n+ {\n++   if (strLastBootupTimeCache.size() > 0) {\n++      str = strLastBootupTimeCache;\n++      return true;\n++   }\n+    std::wstring wstr;\n+    bool ret = get_last_bootup_time(wstr);\n+    str.resize(wstr.size());\n+    for(std::size_t i = 0, max = str.size(); i != max; ++i){\n+       str[i] = '0' + (wstr[i]-L'0');\n+    }\n++   if (ret)\n++      strLastBootupTimeCache = str;\n+    return ret;\n+ }\n+ \n+\" > fixbootuptime.patch\n+  patch boost/interprocess/detail/win32_api.hpp fixbootuptime.patch\n   echo \"using gcc : 4.4 : i586-mingw32msvc-g++\n         :\n         <rc>i586-mingw32msvc-windres\n@@ -34,5 +60,5 @@ script: |\n   cd $TMPDIR\n   export LD_PRELOAD=/usr/lib/faketime/libfaketime.so.1\n   export FAKETIME=$REFERENCE_DATETIME\n-  zip -r boost-win32-1.47.0-gitian.zip *\n-  cp boost-win32-1.47.0-gitian.zip $OUTDIR\n+  zip -r boost-win32-1.47.0-gitian2.zip *\n+  cp boost-win32-1.47.0-gitian2.zip $OUTDIR"
      },
      {
        "sha": "ecd3f208d1d15971d9e0db773e7a04b19338028a",
        "filename": "contrib/gitian-descriptors/gitian-win32.yml",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/1b327daeb510d91c065ea3610c4b5740c743fffe/contrib/gitian-descriptors/gitian-win32.yml",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/1b327daeb510d91c065ea3610c4b5740c743fffe/contrib/gitian-descriptors/gitian-win32.yml",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/gitian-descriptors/gitian-win32.yml?ref=1b327daeb510d91c065ea3610c4b5740c743fffe",
        "patch": "@@ -16,7 +16,7 @@ remotes:\n   \"dir\": \"bitcoin\"\n files:\n - \"qt-win32-4.7.4-gitian.zip\"\n-- \"boost-win32-1.47.0-gitian.zip\"\n+- \"boost-win32-1.47.0-gitian2.zip\"\n - \"bitcoin-deps-0.0.3.zip\"\n script: |\n   #\n@@ -29,7 +29,7 @@ script: |\n   mkdir boost_1_47_0\n   cd boost_1_47_0\n   mkdir -p stage/lib\n-  unzip ../boost-win32-1.47.0-gitian.zip\n+  unzip ../boost-win32-1.47.0-gitian2.zip\n   cd bin/$GBUILD_BITS\n   for lib in *; do\n     i586-mingw32msvc-ar rc ../../stage/lib/libboost_${lib}-mt-s.a $lib/*.o"
      }
    ]
  }
]