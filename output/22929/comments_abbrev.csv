DrahtBot,2021-09-09 12:48:28,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#23019](https://github.com/bitcoin/bitcoin/pull/23019) (rpc, wallet: Add listaddresses RPC by lsilva01)\n\nIf you conside",https://github.com/bitcoin/bitcoin/pull/22929#issuecomment-916060454,916060454,
achow101,2021-09-24 20:23:21,ACK c97c2a99bf5aed073cc28967c5d47a33ec618752,https://github.com/bitcoin/bitcoin/pull/22929#issuecomment-926898556,926898556,
achow101,2021-09-16 20:45:34,"In fec5ded232ca37b8a965ce09a3940ccb6ce43249 ""Return used destinations from ScriptPubKeyMan::MarkUnusedAddresses""\n\ntypo: makr - > mark\n\n```suggestion\n     * @param keypool_id determines the last key to mark as used\n```",https://github.com/bitcoin/bitcoin/pull/22929#discussion_r710464748,710464748,src/wallet/scriptpubkeyman.h
achow101,2021-09-16 20:47:04,"In fec5ded232ca37b8a965ce09a3940ccb6ce43249 ""Return used destinations from ScriptPubKeyMan::MarkUnusedAddresses""\n\nnit: space before `:`\n\n```suggestion\n                for (const auto& type : LEGACY_OUTPUT_TYPES) {\n```",https://github.com/bitcoin/bitcoin/pull/22929#discussion_r710466168,710466168,src/wallet/scriptpubkeyman.cpp
achow101,2021-09-16 20:53:24,"In cbb90fbc00e345100587cd47926c6c7fc5487628 ""Automatically add labels to detected receiving addresses""\n\nShouldn't we be marking everything that doesn't have `dest.internal` as a receiving address? i.e.\n\n```suggestion\n                   if (!dest.internal.value_or(false) && !FindAddressBookEntry(dest.dest, /* allow_change= */ false)) {\n```",https://github.com/bitcoin/bitcoin/pull/22929#discussion_r710472000,710472000,src/wallet/wallet.cpp
S3RK,2021-09-20 06:48:02,Done,https://github.com/bitcoin/bitcoin/pull/22929#discussion_r711910861,711910861,src/wallet/scriptpubkeyman.h
S3RK,2021-09-20 06:48:09,Done,https://github.com/bitcoin/bitcoin/pull/22929#discussion_r711910903,711910903,src/wallet/scriptpubkeyman.cpp
S3RK,2021-09-20 06:49:46,I want to be conservative and skip if we can't determine if that's a change or a receiving destination. But the code is not obvious and I restructured it to make it explicit.,https://github.com/bitcoin/bitcoin/pull/22929#discussion_r711911667,711911667,src/wallet/wallet.cpp
S3RK,2021-09-30 07:48:44,@achow101 I believe expanding from cache is enough here. But want to confirm.,https://github.com/bitcoin/bitcoin/pull/22929#discussion_r719146825,719146825,src/wallet/scriptpubkeyman.cpp
S3RK,2021-09-30 07:51:55,@achow101 I think it's technically possible to have two descriptors producing same scriptPubKey. Wdyt?,https://github.com/bitcoin/bitcoin/pull/22929#discussion_r719149474,719149474,src/wallet/wallet.cpp
achow101,2021-09-30 18:00:24,"Yes, that is.",https://github.com/bitcoin/bitcoin/pull/22929#discussion_r719639229,719639229,src/wallet/scriptpubkeyman.cpp
achow101,2021-09-30 18:04:09,"Ah, that is indeed possible. In that case, we should keep this loop.",https://github.com/bitcoin/bitcoin/pull/22929#discussion_r719641795,719641795,src/wallet/wallet.cpp
meshcollider,2021-10-04 02:32:52,Should check `if (type)` or `has_value()` to ensure it has a value before calling `*type`,https://github.com/bitcoin/bitcoin/pull/22929#discussion_r720998301,720998301,src/wallet/wallet.cpp
meshcollider,2021-10-04 02:39:12,I think this is better as `std::move(keypool)`?,https://github.com/bitcoin/bitcoin/pull/22929#discussion_r720999793,720999793,src/wallet/scriptpubkeyman.cpp
meshcollider,2021-10-04 02:49:33,"What does `N+2` mean here (and below)?\n(I understand based on the code that `N` is meant to be the ""first"" key that node[0] and therefore also node[2] generates but the comment is confusing).",https://github.com/bitcoin/bitcoin/pull/22929#discussion_r721002066,721002066,test/functional/wallet_listtransactions.py
S3RK,2021-10-06 06:24:53,Returned the cycle and removed `GetScriptPubKeyMan` function to avoid such mistakes in the future,https://github.com/bitcoin/bitcoin/pull/22929#discussion_r722921062,722921062,src/wallet/wallet.cpp
S3RK,2021-10-06 06:25:28,"Active descriptors always have `type` defined, added assertion",https://github.com/bitcoin/bitcoin/pull/22929#discussion_r722921332,722921332,src/wallet/wallet.cpp
S3RK,2021-10-06 06:25:37,Done,https://github.com/bitcoin/bitcoin/pull/22929#discussion_r722921402,722921402,src/wallet/scriptpubkeyman.cpp
S3RK,2021-10-06 06:26:01,Yes. I updated the comments,https://github.com/bitcoin/bitcoin/pull/22929#discussion_r722921591,722921591,test/functional/wallet_listtransactions.py
