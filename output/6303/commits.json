[
  {
    "sha": "d08cfc2bd752fdb1e8547f957f1c38275540df7a",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkMDhjZmMyYmQ3NTJmZGIxZTg1NDdmOTU3ZjFjMzgyNzU1NDBkZjdh",
    "commit": {
      "author": {
        "name": "Cory Fields",
        "email": "cory-nospam-@coryfields.com",
        "date": "2015-06-18T22:17:36Z"
      },
      "committer": {
        "name": "Cory Fields",
        "email": "cory-nospam-@coryfields.com",
        "date": "2015-06-18T22:17:36Z"
      },
      "message": "gitian: add a gitian-win-signer descriptor\n\nThis is exactly like the current OSX signing process.\n\nosslsigncode has been patched to detach and re-attach Windows signatures.\nThe changes can be seen here: https://github.com/theuni/osslsigncode/commits/attach-signature\n\nThere's a pull-request open upstream for the changes:\nhttps://sourceforge.net/p/osslsigncode/osslsigncode/merge-requests/3/\n\nThis work has been back-ported to the stable 1.7.1 release of osslsigncode, so\nthat a smaller patch can be reviewed.",
      "tree": {
        "sha": "53f0ad6cdc0fe43809627b4d8d6250a108e4e770",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/53f0ad6cdc0fe43809627b4d8d6250a108e4e770"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d08cfc2bd752fdb1e8547f957f1c38275540df7a",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d08cfc2bd752fdb1e8547f957f1c38275540df7a",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/d08cfc2bd752fdb1e8547f957f1c38275540df7a",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d08cfc2bd752fdb1e8547f957f1c38275540df7a/comments",
    "author": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "40400d53d3a0f5a11907fba610adabbe0975c9db",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/40400d53d3a0f5a11907fba610adabbe0975c9db",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/40400d53d3a0f5a11907fba610adabbe0975c9db"
      }
    ],
    "stats": {
      "total": 66,
      "additions": 54,
      "deletions": 12
    },
    "files": [
      {
        "sha": "0bf2ac9b2fe3dcdf7a155ed53d33104e830430ed",
        "filename": "contrib/gitian-descriptors/gitian-win-signer.yml",
        "status": "added",
        "additions": 34,
        "deletions": 0,
        "changes": 34,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d08cfc2bd752fdb1e8547f957f1c38275540df7a/contrib/gitian-descriptors/gitian-win-signer.yml",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d08cfc2bd752fdb1e8547f957f1c38275540df7a/contrib/gitian-descriptors/gitian-win-signer.yml",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/gitian-descriptors/gitian-win-signer.yml?ref=d08cfc2bd752fdb1e8547f957f1c38275540df7a",
        "patch": "@@ -0,0 +1,34 @@\n+---\n+name: \"bitcoin-win-signer\"\n+suites:\n+- \"precise\"\n+architectures:\n+- \"amd64\"\n+packages:\n+- \"libssl-dev\"\n+- \"autoconf\"\n+reference_datetime: \"2015-06-01 00:00:00\"\n+remotes:\n+- \"url\": \"https://github.com/bitcoin/bitcoin-detached-sigs.git\"\n+  \"dir\": \"signature\"\n+files:\n+- \"osslsigncode-1.7.1.tar.gz\"\n+- \"osslsigncode-Backports-to-1.7.1.patch\"\n+- \"bitcoin-win32-setup.exe\"\n+- \"bitcoin-win64-setup.exe\"\n+script: |\n+  BUILD_DIR=`pwd`\n+  SIGDIR=${BUILD_DIR}/signature/win\n+\n+  echo \"f9a8cdb38b9c309326764ebc937cba1523a3a751a7ab05df3ecc99d18ae466c9  osslsigncode-1.7.1.tar.gz\" | sha256sum -c\n+  echo \"a8c4e9cafba922f89de0df1f2152e7be286aba73f78505169bc351a7938dd911  osslsigncode-Backports-to-1.7.1.patch\" | sha256sum -c\n+\n+  tar xf osslsigncode-1.7.1.tar.gz\n+  cd osslsigncode-1.7.1\n+  patch -p1 < ${BUILD_DIR}/osslsigncode-Backports-to-1.7.1.patch\n+\n+  ./configure --without-gsf --without-curl --disable-dependency-tracking\n+  make\n+\n+  ./osslsigncode attach-signature -in ${BUILD_DIR}/bitcoin-win32-setup.exe -out ${OUTDIR}/bitcoin-win32-setup-signed.exe -sigin ${SIGDIR}/bitcoin-win32-setup.exe.pem\n+  ./osslsigncode attach-signature -in ${BUILD_DIR}/bitcoin-win64-setup.exe -out ${OUTDIR}/bitcoin-win64-setup-signed.exe -sigin ${SIGDIR}/bitcoin-win64-setup.exe.pem"
      },
      {
        "sha": "07005bfbb90acb48291fd670b4c071f84bd2cfb9",
        "filename": "doc/release-process.md",
        "status": "modified",
        "additions": 20,
        "deletions": 12,
        "changes": 32,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d08cfc2bd752fdb1e8547f957f1c38275540df7a/doc/release-process.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d08cfc2bd752fdb1e8547f957f1c38275540df7a/doc/release-process.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/doc/release-process.md?ref=d08cfc2bd752fdb1e8547f957f1c38275540df7a",
        "patch": "@@ -41,6 +41,8 @@ Release Process\n ###fetch and build inputs: (first time, or when dependency versions change)\n  \n \tmkdir -p inputs\n+\twget -P inputs https://bitcoincore.org/cfields/osslsigncode-Backports-to-1.7.1.patch\n+\twget -P inputs http://downloads.sourceforge.net/project/osslsigncode/osslsigncode/osslsigncode-1.7.1.tar.gz\n \n  Register and download the Apple SDK: (see OSX Readme for details)\n  \n@@ -65,7 +67,9 @@ Release Process\n \tmv build/out/bitcoin-*.tar.gz build/out/src/bitcoin-*.tar.gz ../\n \t./bin/gbuild --commit bitcoin=v${VERSION} ../bitcoin/contrib/gitian-descriptors/gitian-win.yml\n \t./bin/gsign --signer $SIGNER --release ${VERSION}-win --destination ../gitian.sigs/ ../bitcoin/contrib/gitian-descriptors/gitian-win.yml\n-\tmv build/out/bitcoin-*.zip build/out/bitcoin-*.exe ../\n+\tmv build/out/bitcoin-*.zip ../\n+\tmv build/out/bitcoin-*-win64-setup.exe inputs/bitcoin-win64-setup.exe\n+\tmv build/out/bitcoin-*-win32-setup.exe inputs/bitcoin-win32-setup.exe\n \t./bin/gbuild --commit bitcoin=v${VERSION} ../bitcoin/contrib/gitian-descriptors/gitian-osx.yml\n \t./bin/gsign --signer $SIGNER --release ${VERSION}-osx-unsigned --destination ../gitian.sigs/ ../bitcoin/contrib/gitian-descriptors/gitian-osx.yml\n \tmv build/out/bitcoin-*-unsigned.tar.gz inputs/bitcoin-osx-unsigned.tar.gz\n@@ -75,7 +79,7 @@ Release Process\n \n   1. source tarball (bitcoin-${VERSION}.tar.gz)\n   2. linux 32-bit and 64-bit binaries dist tarballs (bitcoin-${VERSION}-linux[32|64].tar.gz)\n-  3. windows 32-bit and 64-bit installers and dist zips (bitcoin-${VERSION}-win[32|64]-setup.exe, bitcoin-${VERSION}-win[32|64].zip)\n+  3. windows 32-bit and 64-bit unsigned installers and dist zips (bitcoin-${VERSION}-win[32|64]-setup.exe, bitcoin-${VERSION}-win[32|64].zip)\n   4. OSX unsigned installer (bitcoin-${VERSION}-osx-unsigned.dmg)\n   5. Gitian signatures (in gitian.sigs/${VERSION}-<linux|win|osx-unsigned>/(your gitian key)/\n \n@@ -91,9 +95,9 @@ Commit your signature to gitian.sigs:\n \tgit push  # Assuming you can push to the gitian.sigs tree\n \tpopd\n \n-  Wait for OSX detached signature:\n-\tOnce the OSX build has 3 matching signatures, it will be signed with the Apple App-Store key.\n-\tA detached signature will then be committed to the bitcoin-detached-sigs repository, which can be combined with the unsigned app to create a signed binary.\n+  Wait for Windows/OSX detached signatures:\n+\tOnce the Windows/OSX builds each have 3 matching signatures, they will be signed with their respective release keys.\n+\tDetached signatures will then be committed to the bitcoin-detached-sigs repository, which can be combined with the unsigned apps to create signed binaries.\n \n   Create the signed OSX binary:\n \n@@ -103,10 +107,20 @@ Commit your signature to gitian.sigs:\n \tmv build/out/bitcoin-osx-signed.dmg ../bitcoin-${VERSION}-osx.dmg\n \tpopd\n \n-Commit your signature for the signed OSX binary:\n+  Create the signed Windows binaries:\n+\n+\tpushd ./gitian-builder\n+\t./bin/gbuild -i --commit signature=v${VERSION} ../bitcoin/contrib/gitian-descriptors/gitian-win-signer.yml\n+\t./bin/gsign --signer $SIGNER --release ${VERSION}-win-signed --destination ../gitian.sigs/ ../bitcoin/contrib/gitian-descriptors/gitian-win-signer.yml\n+\tmv build/out/bitcoin-win64-setup-signed.exe ../bitcoin-${VERSION}-win64-setup.exe\n+\tmv build/out/bitcoin-win32-setup-signed.exe ../bitcoin-${VERSION}-win32-setup.exe\n+\tpopd\n+\n+Commit your signature for the signed OSX/Windows binaries:\n \n \tpushd gitian.sigs\n \tgit add ${VERSION}-osx-signed/${SIGNER}\n+\tgit add ${VERSION}-win-signed/${SIGNER}\n \tgit commit -a\n \tgit push  # Assuming you can push to the gitian.sigs tree\n \tpopd\n@@ -115,12 +129,6 @@ Commit your signature for the signed OSX binary:\n \n ### After 3 or more people have gitian-built and their results match:\n \n-- Perform code-signing.\n-\n-    - Code-sign Windows -setup.exe (in a Windows virtual machine using signtool)\n-\n-  Note: only Gavin has the code-signing keys currently.\n-\n - Create `SHA256SUMS.asc` for the builds, and GPG-sign it:\n ```bash\n sha256sum * > SHA256SUMS"
      }
    ]
  }
]