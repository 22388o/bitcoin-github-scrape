[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/644658419",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19292#issuecomment-644658419",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19292",
    "id": 644658419,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NDY1ODQxOQ==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-16T09:46:12Z",
    "updated_at": "2020-06-17T23:37:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #19137 (wallettool: Add dump and createfromdump commands by achow101)\n* #19102 (wallet: Introduce and use DummyDatabase instead of dummy BerkeleyDatabase by achow101)\n* #19077 (wallet: Add sqlite as an alternative wallet database and use it for new descriptor wallets by achow101)\n* #18971 (wallet: Refactor the classes in wallet/db.{cpp/h} by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/644658419/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/645360487",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19292#issuecomment-645360487",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19292",
    "id": 645360487,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NTM2MDQ4Nw==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-17T13:04:16Z",
    "updated_at": "2020-06-17T13:04:16Z",
    "author_association": "MEMBER",
    "body": "Needs some kind of force push to prod github",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/645360487/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/645361741",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19292#issuecomment-645361741",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19292",
    "id": 645361741,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NTM2MTc0MQ==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-17T13:06:53Z",
    "updated_at": "2020-06-17T13:06:53Z",
    "author_association": "MEMBER",
    "body": "Have you considered making a commit for each function? Would help with scrolling during review, but no big deal if it is too cumbersome to split up.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/645361741/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/645409808",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19292#issuecomment-645409808",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19292",
    "id": 645409808,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NTQwOTgwOA==",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?u=9791e96cd4268d48e3517bac41eaf2b1d09759fd&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-17T14:29:41Z",
    "updated_at": "2020-06-17T14:29:41Z",
    "author_association": "MEMBER",
    "body": "Rebased",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/645409808/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/441676380",
    "pull_request_review_id": 432575339,
    "id": 441676380,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTY3NjM4MA==",
    "diff_hunk": "@@ -207,6 +207,12 @@ class BerkeleyBatch\n         operator Dbt*();\n     };\n \n+private:\n+    bool ReadKey(CDataStream& key, CDataStream& value);",
    "path": "src/wallet/bdb.h",
    "position": 5,
    "original_position": 5,
    "commit_id": "a389ed52e8f4939ab5b4adcf93dcb7783d9006f1",
    "original_commit_id": "a389ed52e8f4939ab5b4adcf93dcb7783d9006f1",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This could use documentation. In particular the behavior when `pdb` is absent is not super intuitive, e.g. it returns `false` for ReadKey and `true` for `WriteKey`. ",
    "created_at": "2020-06-17T16:33:06Z",
    "updated_at": "2020-06-17T16:51:04Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19292#discussion_r441676380",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19292",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/441676380"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19292#discussion_r441676380"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19292"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/441676380/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 211,
    "original_line": 211,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/441680722",
    "pull_request_review_id": 432575339,
    "id": 441680722,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTY4MDcyMg==",
    "diff_hunk": "@@ -803,3 +803,67 @@ std::string BerkeleyDatabaseVersion()\n {\n     return DbEnv::version(nullptr, nullptr, nullptr);\n }\n+\n+bool BerkeleyBatch::ReadKey(CDataStream& key, CDataStream& value)\n+{\n+    if (!pdb)\n+        return false;\n+\n+    // Key\n+    SafeDbt datKey(key.data(), key.size());\n+\n+    // Read\n+    SafeDbt datValue;\n+    int ret = pdb->get(activeTxn, datKey, datValue, 0);",
    "path": "src/wallet/bdb.cpp",
    "position": 15,
    "original_position": 15,
    "commit_id": "a389ed52e8f4939ab5b4adcf93dcb7783d9006f1",
    "original_commit_id": "a389ed52e8f4939ab5b4adcf93dcb7783d9006f1",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Maybe just early return` false` here if `ret != 0 || datValue.get_data() == nullptr`? ",
    "created_at": "2020-06-17T16:40:17Z",
    "updated_at": "2020-06-17T16:51:04Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19292#discussion_r441680722",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19292",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/441680722"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19292#discussion_r441680722"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19292"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/441680722/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 817,
    "original_line": 817,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/441682618",
    "pull_request_review_id": 432575339,
    "id": 441682618,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTY4MjYxOA==",
    "diff_hunk": "@@ -803,3 +803,67 @@ std::string BerkeleyDatabaseVersion()\n {\n     return DbEnv::version(nullptr, nullptr, nullptr);\n }\n+\n+bool BerkeleyBatch::ReadKey(CDataStream& key, CDataStream& value)\n+{\n+    if (!pdb)\n+        return false;\n+\n+    // Key\n+    SafeDbt datKey(key.data(), key.size());\n+\n+    // Read\n+    SafeDbt datValue;\n+    int ret = pdb->get(activeTxn, datKey, datValue, 0);\n+    if (ret == 0 && datValue.get_data() != nullptr) {\n+        value.write((char*)datValue.get_data(), datValue.get_size());",
    "path": "src/wallet/bdb.cpp",
    "position": 17,
    "original_position": 17,
    "commit_id": "a389ed52e8f4939ab5b4adcf93dcb7783d9006f1",
    "original_commit_id": "a389ed52e8f4939ab5b4adcf93dcb7783d9006f1",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This is no longer inside a try-catch block, is that safe?",
    "created_at": "2020-06-17T16:43:11Z",
    "updated_at": "2020-06-17T16:51:04Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19292#discussion_r441682618",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19292",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/441682618"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19292#discussion_r441682618"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19292"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/441682618/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 819,
    "original_line": 819,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/441684435",
    "pull_request_review_id": 432575339,
    "id": 441684435,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTY4NDQzNQ==",
    "diff_hunk": "@@ -803,3 +803,67 @@ std::string BerkeleyDatabaseVersion()\n {\n     return DbEnv::version(nullptr, nullptr, nullptr);\n }\n+\n+bool BerkeleyBatch::ReadKey(CDataStream& key, CDataStream& value)\n+{\n+    if (!pdb)\n+        return false;\n+\n+    // Key\n+    SafeDbt datKey(key.data(), key.size());\n+\n+    // Read\n+    SafeDbt datValue;\n+    int ret = pdb->get(activeTxn, datKey, datValue, 0);\n+    if (ret == 0 && datValue.get_data() != nullptr) {\n+        value.write((char*)datValue.get_data(), datValue.get_size());\n+        return true;\n+    }\n+    return false;\n+}\n+\n+bool BerkeleyBatch::WriteKey(CDataStream& key, CDataStream& value, bool overwrite)\n+{\n+    if (!pdb)",
    "path": "src/wallet/bdb.cpp",
    "position": 25,
    "original_position": 25,
    "commit_id": "a389ed52e8f4939ab5b4adcf93dcb7783d9006f1",
    "original_commit_id": "a389ed52e8f4939ab5b4adcf93dcb7783d9006f1",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url": "https://api.github.com/users/Sjors/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "It's a non-trivial move, so might as well add brackets or make it inline.",
    "created_at": "2020-06-17T16:46:09Z",
    "updated_at": "2020-06-17T16:51:05Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19292#discussion_r441684435",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19292",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/441684435"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19292#discussion_r441684435"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19292"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/441684435/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 827,
    "original_line": 827,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/441701686",
    "pull_request_review_id": 432609416,
    "id": 441701686,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTcwMTY4Ng==",
    "diff_hunk": "@@ -803,3 +803,67 @@ std::string BerkeleyDatabaseVersion()\n {\n     return DbEnv::version(nullptr, nullptr, nullptr);\n }\n+\n+bool BerkeleyBatch::ReadKey(CDataStream& key, CDataStream& value)\n+{\n+    if (!pdb)\n+        return false;\n+\n+    // Key\n+    SafeDbt datKey(key.data(), key.size());\n+\n+    // Read\n+    SafeDbt datValue;\n+    int ret = pdb->get(activeTxn, datKey, datValue, 0);\n+    if (ret == 0 && datValue.get_data() != nullptr) {\n+        value.write((char*)datValue.get_data(), datValue.get_size());",
    "path": "src/wallet/bdb.cpp",
    "position": 17,
    "original_position": 17,
    "commit_id": "a389ed52e8f4939ab5b4adcf93dcb7783d9006f1",
    "original_commit_id": "a389ed52e8f4939ab5b4adcf93dcb7783d9006f1",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "The try-catch block is for the deserialization operation (the `>>` operator), not this `write`.",
    "created_at": "2020-06-17T17:14:38Z",
    "updated_at": "2020-06-17T17:14:39Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19292#discussion_r441701686",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19292",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/441701686"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19292#discussion_r441701686"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19292"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/441701686/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 819,
    "original_line": 819,
    "side": "RIGHT",
    "in_reply_to_id": 441682618
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/441704118",
    "pull_request_review_id": 432612734,
    "id": 441704118,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTcwNDExOA==",
    "diff_hunk": "@@ -207,6 +207,12 @@ class BerkeleyBatch\n         operator Dbt*();\n     };\n \n+private:\n+    bool ReadKey(CDataStream& key, CDataStream& value);",
    "path": "src/wallet/bdb.h",
    "position": 5,
    "original_position": 5,
    "commit_id": "a389ed52e8f4939ab5b4adcf93dcb7783d9006f1",
    "original_commit_id": "a389ed52e8f4939ab5b4adcf93dcb7783d9006f1",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "`WriteKey` returns `true` so that it works with dummy database. After #19102, this can (and probably should) be changed to `false`.",
    "created_at": "2020-06-17T17:19:02Z",
    "updated_at": "2020-06-17T17:19:02Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19292#discussion_r441704118",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19292",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/441704118"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19292#discussion_r441704118"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19292"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/441704118/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 211,
    "original_line": 211,
    "side": "RIGHT",
    "in_reply_to_id": 441676380
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/441704287",
    "pull_request_review_id": 432612958,
    "id": 441704287,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTcwNDI4Nw==",
    "diff_hunk": "@@ -803,3 +803,67 @@ std::string BerkeleyDatabaseVersion()\n {\n     return DbEnv::version(nullptr, nullptr, nullptr);\n }\n+\n+bool BerkeleyBatch::ReadKey(CDataStream& key, CDataStream& value)\n+{\n+    if (!pdb)\n+        return false;\n+\n+    // Key\n+    SafeDbt datKey(key.data(), key.size());\n+\n+    // Read\n+    SafeDbt datValue;\n+    int ret = pdb->get(activeTxn, datKey, datValue, 0);",
    "path": "src/wallet/bdb.cpp",
    "position": 15,
    "original_position": 15,
    "commit_id": "a389ed52e8f4939ab5b4adcf93dcb7783d9006f1",
    "original_commit_id": "a389ed52e8f4939ab5b4adcf93dcb7783d9006f1",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Meh. Will change if another push is needed.",
    "created_at": "2020-06-17T17:19:21Z",
    "updated_at": "2020-06-17T17:19:21Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19292#discussion_r441704287",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19292",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/441704287"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19292#discussion_r441704287"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19292"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/441704287/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 817,
    "original_line": 817,
    "side": "RIGHT",
    "in_reply_to_id": 441680722
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/441704341",
    "pull_request_review_id": 432613030,
    "id": 441704341,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTcwNDM0MQ==",
    "diff_hunk": "@@ -803,3 +803,67 @@ std::string BerkeleyDatabaseVersion()\n {\n     return DbEnv::version(nullptr, nullptr, nullptr);\n }\n+\n+bool BerkeleyBatch::ReadKey(CDataStream& key, CDataStream& value)\n+{\n+    if (!pdb)\n+        return false;\n+\n+    // Key\n+    SafeDbt datKey(key.data(), key.size());\n+\n+    // Read\n+    SafeDbt datValue;\n+    int ret = pdb->get(activeTxn, datKey, datValue, 0);\n+    if (ret == 0 && datValue.get_data() != nullptr) {\n+        value.write((char*)datValue.get_data(), datValue.get_size());\n+        return true;\n+    }\n+    return false;\n+}\n+\n+bool BerkeleyBatch::WriteKey(CDataStream& key, CDataStream& value, bool overwrite)\n+{\n+    if (!pdb)",
    "path": "src/wallet/bdb.cpp",
    "position": 25,
    "original_position": 25,
    "commit_id": "a389ed52e8f4939ab5b4adcf93dcb7783d9006f1",
    "original_commit_id": "a389ed52e8f4939ab5b4adcf93dcb7783d9006f1",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Will change if another push is needed.",
    "created_at": "2020-06-17T17:19:27Z",
    "updated_at": "2020-06-17T17:19:27Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19292#discussion_r441704341",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19292",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/441704341"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19292#discussion_r441704341"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19292"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/441704341/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 827,
    "original_line": 827,
    "side": "RIGHT",
    "in_reply_to_id": 441684435
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442219249",
    "pull_request_review_id": 433274103,
    "id": 442219249,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjIxOTI0OQ==",
    "diff_hunk": "@@ -207,6 +207,12 @@ class BerkeleyBatch\n         operator Dbt*();\n     };\n \n+private:\n+    bool ReadKey(CDataStream& key, CDataStream& value);\n+    bool WriteKey(CDataStream& key, CDataStream& value, bool overwrite=true);\n+    bool EraseKey(CDataStream& key);\n+    bool HasKey(CDataStream& key);",
    "path": "src/wallet/bdb.h",
    "position": 8,
    "original_position": 8,
    "commit_id": "a389ed52e8f4939ab5b4adcf93dcb7783d9006f1",
    "original_commit_id": "a389ed52e8f4939ab5b4adcf93dcb7783d9006f1",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I found it really confusing that all the `const&` are replaced by `&`. Is there any reason for that? If not, it could make sense to fix this up in a follow-up commit.",
    "created_at": "2020-06-18T13:19:40Z",
    "updated_at": "2020-06-18T13:19:46Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19292#discussion_r442219249",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19292",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442219249"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19292#discussion_r442219249"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19292"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442219249/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 214,
    "original_line": 214,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442230407",
    "pull_request_review_id": 433289160,
    "id": 442230407,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjIzMDQwNw==",
    "diff_hunk": "@@ -207,6 +207,12 @@ class BerkeleyBatch\n         operator Dbt*();\n     };\n \n+private:\n+    bool ReadKey(CDataStream& key, CDataStream& value);\n+    bool WriteKey(CDataStream& key, CDataStream& value, bool overwrite=true);\n+    bool EraseKey(CDataStream& key);\n+    bool HasKey(CDataStream& key);",
    "path": "src/wallet/bdb.h",
    "position": 8,
    "original_position": 8,
    "commit_id": "a389ed52e8f4939ab5b4adcf93dcb7783d9006f1",
    "original_commit_id": "a389ed52e8f4939ab5b4adcf93dcb7783d9006f1",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I agree. If nothing else, `const` is good documentation about what can potentially be modified and what not.",
    "created_at": "2020-06-18T13:35:42Z",
    "updated_at": "2020-06-18T13:36:04Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19292#discussion_r442230407",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19292",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442230407"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19292#discussion_r442230407"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19292"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442230407/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 214,
    "original_line": 214,
    "side": "RIGHT",
    "in_reply_to_id": 442219249
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442231029",
    "pull_request_review_id": 433289986,
    "id": 442231029,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjIzMTAyOQ==",
    "diff_hunk": "@@ -207,6 +207,12 @@ class BerkeleyBatch\n         operator Dbt*();\n     };\n \n+private:\n+    bool ReadKey(CDataStream& key, CDataStream& value);\n+    bool WriteKey(CDataStream& key, CDataStream& value, bool overwrite=true);\n+    bool EraseKey(CDataStream& key);\n+    bool HasKey(CDataStream& key);",
    "path": "src/wallet/bdb.h",
    "position": 8,
    "original_position": 8,
    "commit_id": "a389ed52e8f4939ab5b4adcf93dcb7783d9006f1",
    "original_commit_id": "a389ed52e8f4939ab5b4adcf93dcb7783d9006f1",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "re: https://github.com/bitcoin/bitcoin/pull/19292#discussion_r442219249\r\n\r\n> I found it really confusing that all the `const&` are replaced by `&`. Is there any reason for that? If not, it could make sense to fix this up in a follow-up commit.\r\n\r\nI assumed it was necessary to remove const from all the arguments because reading from CDataStream objects changes their internal real read position. This is a reason I suggested replacing all the CDataStream arguments with Spans https://github.com/bitcoin/bitcoin/pull/18971#discussion_r437342744. This could be done as a later followup.",
    "created_at": "2020-06-18T13:36:37Z",
    "updated_at": "2020-06-18T13:36:38Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19292#discussion_r442231029",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19292",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442231029"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19292#discussion_r442231029"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19292"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442231029/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 214,
    "original_line": 214,
    "side": "RIGHT",
    "in_reply_to_id": 442219249
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442239967",
    "pull_request_review_id": 433301942,
    "id": 442239967,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjIzOTk2Nw==",
    "diff_hunk": "@@ -207,6 +207,12 @@ class BerkeleyBatch\n         operator Dbt*();\n     };\n \n+private:\n+    bool ReadKey(CDataStream& key, CDataStream& value);\n+    bool WriteKey(CDataStream& key, CDataStream& value, bool overwrite=true);\n+    bool EraseKey(CDataStream& key);\n+    bool HasKey(CDataStream& key);",
    "path": "src/wallet/bdb.h",
    "position": 8,
    "original_position": 8,
    "commit_id": "a389ed52e8f4939ab5b4adcf93dcb7783d9006f1",
    "original_commit_id": "a389ed52e8f4939ab5b4adcf93dcb7783d9006f1",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Both `data` and `size` are marked `const` in the `CDataStream` class. How would this affect the read position anyway?\r\n\r\nI think the reason is that the in-memory key data needs to be purged (in case it is a private key)?",
    "created_at": "2020-06-18T13:49:13Z",
    "updated_at": "2020-06-18T13:49:14Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19292#discussion_r442239967",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19292",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442239967"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19292#discussion_r442239967"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19292"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442239967/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 214,
    "original_line": 214,
    "side": "RIGHT",
    "in_reply_to_id": 442219249
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442248932",
    "pull_request_review_id": 433313399,
    "id": 442248932,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjI0ODkzMg==",
    "diff_hunk": "@@ -207,6 +207,12 @@ class BerkeleyBatch\n         operator Dbt*();\n     };\n \n+private:\n+    bool ReadKey(CDataStream& key, CDataStream& value);\n+    bool WriteKey(CDataStream& key, CDataStream& value, bool overwrite=true);\n+    bool EraseKey(CDataStream& key);\n+    bool HasKey(CDataStream& key);",
    "path": "src/wallet/bdb.h",
    "position": 8,
    "original_position": 8,
    "commit_id": "a389ed52e8f4939ab5b4adcf93dcb7783d9006f1",
    "original_commit_id": "a389ed52e8f4939ab5b4adcf93dcb7783d9006f1",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "> Both `data` and `size` are marked `const` in the `CDataStream` class. How would this affect the read position anyway?\r\n\r\nGuess it wouldn't. I didn't check if these were const because I just remembered CDataStream being goofy about reading. Maybe it's less goofy than I thought but I still think Spans are better.",
    "created_at": "2020-06-18T14:00:39Z",
    "updated_at": "2020-06-18T14:00:39Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19292#discussion_r442248932",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19292",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442248932"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19292#discussion_r442248932"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19292"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442248932/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 214,
    "original_line": 214,
    "side": "RIGHT",
    "in_reply_to_id": 442219249
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442262477",
    "pull_request_review_id": 433331672,
    "id": 442262477,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjI2MjQ3Nw==",
    "diff_hunk": "@@ -207,6 +207,12 @@ class BerkeleyBatch\n         operator Dbt*();\n     };\n \n+private:\n+    bool ReadKey(CDataStream& key, CDataStream& value);\n+    bool WriteKey(CDataStream& key, CDataStream& value, bool overwrite=true);\n+    bool EraseKey(CDataStream& key);\n+    bool HasKey(CDataStream& key);",
    "path": "src/wallet/bdb.h",
    "position": 8,
    "original_position": 8,
    "commit_id": "a389ed52e8f4939ab5b4adcf93dcb7783d9006f1",
    "original_commit_id": "a389ed52e8f4939ab5b4adcf93dcb7783d9006f1",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I agree that spans are better when all that is needed is to pass down `data` and `size`. I'll leave this diff here up for grabs:\r\n\r\n```diff\r\ndiff --git a/src/wallet/bdb.cpp b/src/wallet/bdb.cpp\r\nindex 125bf004e4..46d12546c7 100644\r\n--- a/src/wallet/bdb.cpp\r\n+++ b/src/wallet/bdb.cpp\r\n@@ -804,7 +804,7 @@ std::string BerkeleyDatabaseVersion()\r\n     return DbEnv::version(nullptr, nullptr, nullptr);\r\n }\r\n \r\n-bool BerkeleyBatch::ReadKey(CDataStream& key, CDataStream& value)\r\n+bool BerkeleyBatch::ReadKey(Span<char> key, CDataStream& value)\r\n {\r\n     if (!pdb)\r\n         return false;\r\n@@ -822,7 +822,7 @@ bool BerkeleyBatch::ReadKey(CDataStream& key, CDataStream& value)\r\n     return false;\r\n }\r\n \r\n-bool BerkeleyBatch::WriteKey(CDataStream& key, CDataStream& value, bool overwrite)\r\n+bool BerkeleyBatch::WriteKey(Span<char> key, Span<char> value, bool overwrite)\r\n {\r\n     if (!pdb)\r\n         return true;\r\n@@ -840,7 +840,7 @@ bool BerkeleyBatch::WriteKey(CDataStream& key, CDataStream& value, bool overwrit\r\n     return (ret == 0);\r\n }\r\n \r\n-bool BerkeleyBatch::EraseKey(CDataStream& key)\r\n+bool BerkeleyBatch::EraseKey(Span<char> key)\r\n {\r\n     if (!pdb)\r\n         return false;\r\n@@ -855,7 +855,7 @@ bool BerkeleyBatch::EraseKey(CDataStream& key)\r\n     return (ret == 0 || ret == DB_NOTFOUND);\r\n }\r\n \r\n-bool BerkeleyBatch::HasKey(CDataStream& key)\r\n+bool BerkeleyBatch::HasKey(Span<char> key)\r\n {\r\n     if (!pdb)\r\n         return false;\r\ndiff --git a/src/wallet/bdb.h b/src/wallet/bdb.h\r\nindex 1e717b95be..f5fa2da76a 100644\r\n--- a/src/wallet/bdb.h\r\n+++ b/src/wallet/bdb.h\r\n@@ -208,10 +208,10 @@ class BerkeleyBatch\r\n     };\r\n \r\n private:\r\n-    bool ReadKey(CDataStream& key, CDataStream& value);\r\n-    bool WriteKey(CDataStream& key, CDataStream& value, bool overwrite=true);\r\n-    bool EraseKey(CDataStream& key);\r\n-    bool HasKey(CDataStream& key);\r\n+    bool ReadKey(Span<char> key, CDataStream& value);\r\n+    bool WriteKey(Span<char> key, Span<char> value, bool overwrite = true);\r\n+    bool EraseKey(Span<char> key);\r\n+    bool HasKey(Span<char> key);\r\n \r\n protected:\r\n     Db* pdb;\r\n",
    "created_at": "2020-06-18T14:19:29Z",
    "updated_at": "2020-06-18T14:19:29Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19292#discussion_r442262477",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19292",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442262477"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19292#discussion_r442262477"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19292"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442262477/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 214,
    "original_line": 214,
    "side": "RIGHT",
    "in_reply_to_id": 442219249
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442263426",
    "pull_request_review_id": 433332991,
    "id": 442263426,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjI2MzQyNg==",
    "diff_hunk": "@@ -207,6 +207,12 @@ class BerkeleyBatch\n         operator Dbt*();\n     };\n \n+private:\n+    bool ReadKey(CDataStream& key, CDataStream& value);\n+    bool WriteKey(CDataStream& key, CDataStream& value, bool overwrite=true);\n+    bool EraseKey(CDataStream& key);\n+    bool HasKey(CDataStream& key);",
    "path": "src/wallet/bdb.h",
    "position": 8,
    "original_position": 8,
    "commit_id": "a389ed52e8f4939ab5b4adcf93dcb7783d9006f1",
    "original_commit_id": "a389ed52e8f4939ab5b4adcf93dcb7783d9006f1",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "@achow101 Let us know if you want to change this to span or rather have the current version of the pr merged",
    "created_at": "2020-06-18T14:20:48Z",
    "updated_at": "2020-06-18T14:20:48Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19292#discussion_r442263426",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19292",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442263426"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19292#discussion_r442263426"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19292"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442263426/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 214,
    "original_line": 214,
    "side": "RIGHT",
    "in_reply_to_id": 442219249
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442266442",
    "pull_request_review_id": 433336863,
    "id": 442266442,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjI2NjQ0Mg==",
    "diff_hunk": "@@ -207,6 +207,12 @@ class BerkeleyBatch\n         operator Dbt*();\n     };\n \n+private:\n+    bool ReadKey(CDataStream& key, CDataStream& value);\n+    bool WriteKey(CDataStream& key, CDataStream& value, bool overwrite=true);\n+    bool EraseKey(CDataStream& key);\n+    bool HasKey(CDataStream& key);",
    "path": "src/wallet/bdb.h",
    "position": 8,
    "original_position": 8,
    "commit_id": "a389ed52e8f4939ab5b4adcf93dcb7783d9006f1",
    "original_commit_id": "a389ed52e8f4939ab5b4adcf93dcb7783d9006f1",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "It looks like my patch only compiles after commit b8740d6737b49229101fbce909ca3917929185b4 (Merge #18468: Span improvements)",
    "created_at": "2020-06-18T14:24:38Z",
    "updated_at": "2020-06-18T14:24:38Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19292#discussion_r442266442",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19292",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442266442"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19292#discussion_r442266442"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19292"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442266442/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 214,
    "original_line": 214,
    "side": "RIGHT",
    "in_reply_to_id": 442219249
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442269287",
    "pull_request_review_id": 433340631,
    "id": 442269287,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjI2OTI4Nw==",
    "diff_hunk": "@@ -207,6 +207,12 @@ class BerkeleyBatch\n         operator Dbt*();\n     };\n \n+private:\n+    bool ReadKey(CDataStream& key, CDataStream& value);\n+    bool WriteKey(CDataStream& key, CDataStream& value, bool overwrite=true);\n+    bool EraseKey(CDataStream& key);\n+    bool HasKey(CDataStream& key);",
    "path": "src/wallet/bdb.h",
    "position": 8,
    "original_position": 8,
    "commit_id": "a389ed52e8f4939ab5b4adcf93dcb7783d9006f1",
    "original_commit_id": "a389ed52e8f4939ab5b4adcf93dcb7783d9006f1",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I'll leave it for a followup.",
    "created_at": "2020-06-18T14:28:24Z",
    "updated_at": "2020-06-18T14:28:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19292#discussion_r442269287",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19292",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442269287"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19292#discussion_r442269287"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19292"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442269287/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 214,
    "original_line": 214,
    "side": "RIGHT",
    "in_reply_to_id": 442219249
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442283931",
    "pull_request_review_id": 433360070,
    "id": 442283931,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjI4MzkzMQ==",
    "diff_hunk": "@@ -207,6 +207,12 @@ class BerkeleyBatch\n         operator Dbt*();\n     };\n \n+private:\n+    bool ReadKey(CDataStream& key, CDataStream& value);\n+    bool WriteKey(CDataStream& key, CDataStream& value, bool overwrite=true);\n+    bool EraseKey(CDataStream& key);\n+    bool HasKey(CDataStream& key);",
    "path": "src/wallet/bdb.h",
    "position": 8,
    "original_position": 8,
    "commit_id": "a389ed52e8f4939ab5b4adcf93dcb7783d9006f1",
    "original_commit_id": "a389ed52e8f4939ab5b4adcf93dcb7783d9006f1",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "+1 on using spans\r\nI also thought about making `BerkeleyBatch::ReadKey` return an `Option<CDataStream>` instead of passing it in, but dunno.",
    "created_at": "2020-06-18T14:46:55Z",
    "updated_at": "2020-06-18T14:46:56Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19292#discussion_r442283931",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19292",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442283931"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19292#discussion_r442283931"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19292"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442283931/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 214,
    "original_line": 214,
    "side": "RIGHT",
    "in_reply_to_id": 442219249
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442286126",
    "pull_request_review_id": 433362943,
    "id": 442286126,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjI4NjEyNg==",
    "diff_hunk": "@@ -207,6 +207,12 @@ class BerkeleyBatch\n         operator Dbt*();\n     };\n \n+private:\n+    bool ReadKey(CDataStream& key, CDataStream& value);\n+    bool WriteKey(CDataStream& key, CDataStream& value, bool overwrite=true);\n+    bool EraseKey(CDataStream& key);\n+    bool HasKey(CDataStream& key);",
    "path": "src/wallet/bdb.h",
    "position": 8,
    "original_position": 8,
    "commit_id": "a389ed52e8f4939ab5b4adcf93dcb7783d9006f1",
    "original_commit_id": "a389ed52e8f4939ab5b4adcf93dcb7783d9006f1",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done in #19320 ",
    "created_at": "2020-06-18T14:49:43Z",
    "updated_at": "2020-06-18T14:49:44Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19292#discussion_r442286126",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19292",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442286126"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19292#discussion_r442286126"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19292"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442286126/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 214,
    "original_line": 214,
    "side": "RIGHT",
    "in_reply_to_id": 442219249
  }
]