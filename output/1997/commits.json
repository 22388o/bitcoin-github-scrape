[
  {
    "sha": "c74bae0fdf211551e5a45d1b6bbc766d91381ad9",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjNzRiYWUwZmRmMjExNTUxZTVhNDVkMWI2YmJjNzY2ZDkxMzgxYWQ5",
    "commit": {
      "author": {
        "name": "Philip Kaufmann",
        "email": "phil.kaufmann@t-online.de",
        "date": "2012-11-09T21:51:40Z"
      },
      "committer": {
        "name": "Philip Kaufmann",
        "email": "phil.kaufmann@t-online.de",
        "date": "2012-11-10T00:11:22Z"
      },
      "message": "simplify CDBEnv::Open() / fix small glitches\n\n- remove pathEnv from CDBEnv, as this attribute is not needed\n- change path parameter in ::Open() to a reference\n- make nDbCache variable an unsigned integer\n- remove a missplaced \";\" behin ::IsMock()",
      "tree": {
        "sha": "7e723245d1faf2082441ff70553d5c1122f267bf",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7e723245d1faf2082441ff70553d5c1122f267bf"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c74bae0fdf211551e5a45d1b6bbc766d91381ad9",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c74bae0fdf211551e5a45d1b6bbc766d91381ad9",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/c74bae0fdf211551e5a45d1b6bbc766d91381ad9",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c74bae0fdf211551e5a45d1b6bbc766d91381ad9/comments",
    "author": null,
    "committer": null,
    "parents": [
      {
        "sha": "20db1c099ecaa3793f5f3ad997326ffbdd7027cc",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/20db1c099ecaa3793f5f3ad997326ffbdd7027cc",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/20db1c099ecaa3793f5f3ad997326ffbdd7027cc"
      }
    ],
    "stats": {
      "total": 17,
      "additions": 7,
      "deletions": 10
    },
    "files": [
      {
        "sha": "60e1f6f280903a5ac460adba1fd55414fb52d08c",
        "filename": "src/db.cpp",
        "status": "modified",
        "additions": 5,
        "deletions": 7,
        "changes": 12,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c74bae0fdf211551e5a45d1b6bbc766d91381ad9/src/db.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c74bae0fdf211551e5a45d1b6bbc766d91381ad9/src/db.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/db.cpp?ref=c74bae0fdf211551e5a45d1b6bbc766d91381ad9",
        "patch": "@@ -55,26 +55,24 @@ void CDBEnv::Close()\n     EnvShutdown();\n }\n \n-bool CDBEnv::Open(boost::filesystem::path pathEnv_)\n+bool CDBEnv::Open(const boost::filesystem::path& path)\n {\n     if (fDbEnvInit)\n         return true;\n \n     if (fShutdown)\n         return false;\n \n-    pathEnv = pathEnv_;\n-    filesystem::path pathDataDir = pathEnv;\n-    filesystem::path pathLogDir = pathDataDir / \"database\";\n+    filesystem::path pathLogDir = path / \"database\";\n     filesystem::create_directory(pathLogDir);\n-    filesystem::path pathErrorFile = pathDataDir / \"db.log\";\n+    filesystem::path pathErrorFile = path / \"db.log\";\n     printf(\"dbenv.open LogDir=%s ErrorFile=%s\\n\", pathLogDir.string().c_str(), pathErrorFile.string().c_str());\n \n     unsigned int nEnvFlags = 0;\n     if (GetBoolArg(\"-privdb\", true))\n         nEnvFlags |= DB_PRIVATE;\n \n-    int nDbCache = GetArg(\"-dbcache\", 25);\n+    unsigned int nDbCache = GetArg(\"-dbcache\", 25);\n     dbenv.set_lg_dir(pathLogDir.string().c_str());\n     dbenv.set_cachesize(nDbCache / 1024, (nDbCache % 1024)*1048576, 1);\n     dbenv.set_lg_bsize(1048576);\n@@ -85,7 +83,7 @@ bool CDBEnv::Open(boost::filesystem::path pathEnv_)\n     dbenv.set_flags(DB_AUTO_COMMIT, 1);\n     dbenv.set_flags(DB_TXN_WRITE_NOSYNC, 1);\n     dbenv.log_set_config(DB_LOG_AUTO_REMOVE, 1);\n-    int ret = dbenv.open(pathDataDir.string().c_str(),\n+    int ret = dbenv.open(path.string().c_str(),\n                      DB_CREATE     |\n                      DB_INIT_LOCK  |\n                      DB_INIT_LOG   |"
      },
      {
        "sha": "0bcece78031c29eb7e7f045610771c6b80e3d4f9",
        "filename": "src/db.h",
        "status": "modified",
        "additions": 2,
        "deletions": 3,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c74bae0fdf211551e5a45d1b6bbc766d91381ad9/src/db.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c74bae0fdf211551e5a45d1b6bbc766d91381ad9/src/db.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/db.h?ref=c74bae0fdf211551e5a45d1b6bbc766d91381ad9",
        "patch": "@@ -33,7 +33,6 @@ class CDBEnv\n private:\n     bool fDbEnvInit;\n     bool fMockDb;\n-    boost::filesystem::path pathEnv;\n \n     void EnvShutdown();\n \n@@ -46,7 +45,7 @@ class CDBEnv\n     CDBEnv();\n     ~CDBEnv();\n     void MakeMock();\n-    bool IsMock() { return fMockDb; };\n+    bool IsMock() { return fMockDb; }\n \n     /*\n      * Verify that database file strFile is OK. If it is not,\n@@ -66,7 +65,7 @@ class CDBEnv\n     typedef std::pair<std::vector<unsigned char>, std::vector<unsigned char> > KeyValPair;\n     bool Salvage(std::string strFile, bool fAggressive, std::vector<KeyValPair>& vResult);\n \n-    bool Open(boost::filesystem::path pathEnv_);\n+    bool Open(const boost::filesystem::path &path);\n     void Close();\n     void Flush(bool fShutdown);\n     void CheckpointLSN(std::string strFile);"
      }
    ]
  }
]