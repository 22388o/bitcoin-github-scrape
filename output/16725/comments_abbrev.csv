NicolasDorier,2019-08-26 08:26:33,"Trying to refactor so that `ExtractDestination` don't return addresses is a can of worm... I will instead limit this change to RPC return only. It is enough to prevent people from copying this bad design, while making sure nothing else break.",https://github.com/bitcoin/bitcoin/pull/16725#issuecomment-524769949,524769949,
NicolasDorier,2019-08-26 09:44:08,This is ready to review.,https://github.com/bitcoin/bitcoin/pull/16725#issuecomment-524795990,524795990,
NicolasDorier,2019-08-26 09:45:24,Note that I keep `addresses` as empty array instead of removing the array completely. This will minimize chances to break clients.,https://github.com/bitcoin/bitcoin/pull/16725#issuecomment-524796405,524796405,
MarcoFalke,2019-08-26 12:38:45,Does it also remove addresses from getreceivedbylabel? https://github.com/bitcoin/bitcoin/pull/16655#issuecomment-522660482,https://github.com/bitcoin/bitcoin/pull/16725#issuecomment-524843725,524843725,
promag,2019-08-26 12:53:06,It doesn't break the interface but probably will break clients as they are expecting one address. Probably better is to remove the field and add a deprecation option?,https://github.com/bitcoin/bitcoin/pull/16725#issuecomment-524848464,524848464,
NicolasDorier,2019-08-26 13:44:46,"> It doesn't break the interface but probably will break clients as they are expecting one address. Probably better is to remove the field and add a deprecation option?\n\nThough call. I am unsure about the deprecation though, program using addresses and expecting one address are necessarily broken already anyway.\n\n> Does it also remove addresses from getreceivedbylabel?\n\nIt does not. I ",https://github.com/bitcoin/bitcoin/pull/16725#issuecomment-524866255,524866255,
Sjors,2019-08-27 16:51:03,"Concept ACK\n\nThe convention for outputs without an address is to remove the array, rather than make it empty. See e.g. this OP_RETURN example: 8bae12b5f4c088d940733dcd1455efc6a3a69cf9340e17a981286d3778615684. If we follow that pattern imo there's no need to deprecate anything.",https://github.com/bitcoin/bitcoin/pull/16725#issuecomment-525388405,525388405,
NicolasDorier,2019-08-28 04:11:27,"@Sjors good point, will do.",https://github.com/bitcoin/bitcoin/pull/16725#issuecomment-525576387,525576387,
NicolasDorier,2019-08-28 14:39:54,Ok I improved the PR as @Sjors suggested. It is actually less line of code changed and clearer.,https://github.com/bitcoin/bitcoin/pull/16725#issuecomment-525776173,525776173,
laanwj,2019-08-29 14:47:10,"Concept ACK. This is less risky than changing `ExtractDestinations`, of which it'd be much harder to oversee the consequences. On the other hand it's possible that addresses for P2PK still show up in other places.\n\nEdit: so it might be better to rename this PR to more specifically `don't show addresses or P2PK in decoderawtransaction`.",https://github.com/bitcoin/bitcoin/pull/16725#issuecomment-526219981,526219981,
NicolasDorier,2019-08-30 02:30:37,Changed commit and PR title. That's fine if it still show at other place. I am trying at least to change the most obvious to prevent the mistake to spread into the mind of new devs.,https://github.com/bitcoin/bitcoin/pull/16725#issuecomment-526431382,526431382,
Sjors,2019-08-30 12:18:50,"Code review ACK 6d80349.\n\nIn the future we could add the inferred descriptor (though not always useful, without looking at the transaction that spent it to see the full script).",https://github.com/bitcoin/bitcoin/pull/16725#issuecomment-526579726,526579726,
sipa,2019-08-31 01:24:57,"Code review ACK, and Concept ACK on moving away from showing P2PK as addresses. However, Does this need an RPC deprecation flag? I think it's unlikely, but someone may be relying on this odd behavior.\n\n@Sjors Inferring descriptors isn't expensive; we should indeed just do that.\n\nAlso, I think we should get rid entirely of the 'addresses' field in `decode*` RPCs; it's very confusing that  U",https://github.com/bitcoin/bitcoin/pull/16725#issuecomment-526788456,526788456,
NicolasDorier,2019-08-31 06:02:49,"I don't think depreciation flag is needed, as people relying on this behavior (if any) were necessarily broken.\n\nAlso, `addresses` does not exists already for some types of script like OP_RETURN, so I suppose consumer are already handling well the case where this field does not exist.\n\n> Also, I think we should get rid entirely of the 'addresses' field in decode* RPCs\n\nI agree, but I p",https://github.com/bitcoin/bitcoin/pull/16725#issuecomment-526803726,526803726,
DrahtBot,2019-09-03 17:39:57,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#16795](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/16795.html) (rpc: have raw transaction decoding infer ou",https://github.com/bitcoin/bitcoin/pull/16725#issuecomment-527562982,527562982,
instagibbs,2019-09-03 20:19:45,"> In the future we could add the inferred descriptor (though not always useful, without looking at the transaction that spent it to see the full script).\n\nI went ahead and implemented this in https://github.com/bitcoin/bitcoin/pull/16795 since it's relatively orthogonal. ",https://github.com/bitcoin/bitcoin/pull/16725#issuecomment-527623019,527623019,
sipa,2019-09-04 00:19:45,"> Also, addresses does not exists already for some types of script like OP_RETURN, so I suppose consumer are already handling well the case where this field does not exist.\n\nI think you're incorrectly assuming that the hypothetical person using this functionality is using it on arbitrary transactions, instead of perhaps just transactions he knows are paying to P2PK already.\n\nThat said, I a",https://github.com/bitcoin/bitcoin/pull/16725#issuecomment-527688647,527688647,
MarcoFalke,2019-09-05 00:34:52,"ACK 6d803494b59ab5520079b6a72d97790d86d2a015\n\n<details><summary>Show signature and timestamp</summary>\n\nSignature:\n\n```\n-----BEGIN PGP SIGNED MESSAGE-----\nHash: SHA512\n\nACK 6d803494b59ab5520079b6a72d97790d86d2a015\n-----BEGIN PGP SIGNATURE-----\n\niQGzBAEBCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUizSwv8D4wzMx6dwvUplbocsmZ/+nDCENN8oGB/dhu5VFLZRMh8thvClCVnHw",https://github.com/bitcoin/bitcoin/pull/16725#issuecomment-528145806,528145806,
meshcollider,2019-09-09 23:40:43,utACK 6d803494b59ab5520079b6a72d97790d86d2a015,https://github.com/bitcoin/bitcoin/pull/16725#issuecomment-529708090,529708090,
MarcoFalke,2020-03-23 14:55:24,We forgot to add release notes for this. Now it is too late.,https://github.com/bitcoin/bitcoin/pull/16725#issuecomment-602650868,602650868,
andronoob,2020-06-03 16:27:49,"It seems that I'm too late...\n\n@NicolasDorier\n\n>because bitcoin address was not existing at the time.\n\n\n![screen3](https://user-images.githubusercontent.com/4075106/83661919-6a795e00-a5f9-11ea-96c2-04571b804ad3.png)\nSource: https://web.archive.org/web/20090303195936im_/http://bitcoin.org/screen3.png\n\n>significant amount of time explaining\n\nIMHO it's probably better to put s",https://github.com/bitcoin/bitcoin/pull/16725#issuecomment-638308523,638308523,
andronoob,2020-06-04 04:58:01,"Besides, this ""ambiguous"" ""confusion"" logic exists not only in the decoderawtransaction RPC call (oh it has been removed in this pr), but also in the GUI.\n\nI didn't do a full rescan, but it's already enough to illustrate (taken from the freshly released Bitcoin Core 0.20.0):\n\n![fakesatoshiwallet](https://user-images.githubusercontent.com/4075106/83716724-43577680-a663-11ea-95d1-6d8c0105676",https://github.com/bitcoin/bitcoin/pull/16725#issuecomment-638602633,638602633,
NicolasDorier,2020-06-22 05:29:12,"I think this should be fixed at the Bitcoin QT level as well, addresses for P2PK should not show up there.\n\n> I don't think it's good to treat this problem in such an aggressive way.\n\nI had to deal with situations where one address receive a P2PK payment and wallet just crash unable to sign it. Then people see that difference ""balances"" show up on different block explorers, as some of them",https://github.com/bitcoin/bitcoin/pull/16725#issuecomment-647287889,647287889,
andronoob,2020-06-22 06:10:53,">P2PK is dead\n\nOf course P2PK is ancient thing which is no longer used at all nowadays. However, those ancient P2PK UTXOs still consist of significant fraction of all existing bitcoins. There are also many historical posts mentioning them as 1-starting Base58Check-encoded addresses. Therefore I think it's still necessary to treat them properly. I don't think simply refusing to display them is ",https://github.com/bitcoin/bitcoin/pull/16725#issuecomment-647305096,647305096,
achow101,2020-06-22 06:40:17,">  Therefore I think it's still necessary to treat them properly.\n\nWe are treating them properly. The proper way to treat P2PK output is to not show a P2PKH address for them. To show a P2PKH address for a P2PK script is literally incorrect and improper.\n\n> There are also many historical posts mentioning them as 1-starting Base58Check-encoded addresses.\n\nAnd these should be corrected. J",https://github.com/bitcoin/bitcoin/pull/16725#issuecomment-647318167,647318167,
NicolasDorier,2020-06-22 06:42:45,"> Is P2PK still spendable? If the answer is still ""yes"", then probably it's the fault of that crashing wallet itself \n\nThe problem with this argument is that the number of spendable scripts by a public key is unlimited.\nWhat about `OP_NOP <pubkey> OP_CHECKSIG` ? What about `1 <pubkey> 1 OP_MULTISIG` ? Why those should not be spendable as well by the wallet and be treated as address?",https://github.com/bitcoin/bitcoin/pull/16725#issuecomment-647319258,647319258,
andronoob,2020-06-22 07:26:51,">The problem with this argument is that the number of spendable scripts by a public key is unlimited.\n\nOf course.\n\nThen why is Bitcoin Core still scanning out both P2PK and P2PKH transactions & counting them into the balance, in the case that the corresponding pubkey or privkey is imported? Is this a bug which needs to be fixed as well, by considering P2PK ""nonstandard"" so that they should",https://github.com/bitcoin/bitcoin/pull/16725#issuecomment-647337989,647337989,
NicolasDorier,2020-06-22 07:36:22,"> contradict the history, thus making much more confusion & harming usability.\n\nThe addresses that you were seeing in the satoshi's version were P2PKH, not P2PK by the way.\n\n> Then why is Bitcoin Core still scanning out both P2PK and P2PKH transactions & counting them into the balance, in the case that the corresponding pubkey or privkey is imported? \n\nBackward compatibility, new walle",https://github.com/bitcoin/bitcoin/pull/16725#issuecomment-647342309,647342309,
andronoob,2020-06-22 07:58:47,">The addresses that you were seeing in the satoshi's version were P2PKH, not P2PK by the way.\n\nYeah, to my knowledge P2PK only appears in ancient coinbase/generating transactions and pay-to-IP transactions (which was a deprecated & then removed feature). However it's still unclear how Satoshi himself would consider this problem.\n\nBut, anyway, just like what I have said multiple times, the ",https://github.com/bitcoin/bitcoin/pull/16725#issuecomment-647352889,647352889,
MarcoFalke,2020-06-22 11:04:17,There is always the descriptor for raw bytes that can be used for any scriptPubKey,https://github.com/bitcoin/bitcoin/pull/16725#issuecomment-647446804,647446804,
andronoob,2020-06-22 13:44:50,">There is always the descriptor for raw bytes that can be used for any scriptPubKey\n\nThe problem is that the pubkey itself is not yet known, what's known is only its HASH160.",https://github.com/bitcoin/bitcoin/pull/16725#issuecomment-647528987,647528987,
MarcoFalke,2020-06-25 13:45:23,"Not sure what you mean. The raw descriptor works fine for me locally:\n\n```\ngetdescriptorinfo ""raw(4104678afdb0fe5548271967f1a67130b7105cd6a828e03909a67962e0ea1f61deb649f6bc3f4cef38c4f35504e51ec112de5c384df7ba0b8d578a4c702b6bf11d5fac)""\n\n{\n  ""descriptor"": ""raw(4104678afdb0fe5548271967f1a67130b7105cd6a828e03909a67962e0ea1f61deb649f6bc3f4cef38c4f35504e51ec112de5c384df7ba0b8d578a4c702b6bf11",https://github.com/bitcoin/bitcoin/pull/16725#issuecomment-649550711,649550711,
andronoob,2020-06-26 02:49:11,">The raw descriptor works fine for me\n\nOf course, but only if you know the pubkey itself. If you only know corresponding P2PKH address, which is the *hash* of the pubkey, I can't see how the current defined output descriptors can match it.",https://github.com/bitcoin/bitcoin/pull/16725#issuecomment-649922614,649922614,
sipa,2020-06-26 02:53:21,"@andronoob Descriptors (apart from addr() and raw()) are designed to encapsulate all information necessary to spend an output (apart from secret keys). As such, a descriptor for a P2PK output without knowing the full pubkey makes no sense - you'll need the pubkey to spend it.\n\nAnd if you don't have the pubkey, why do you care about the output in the first place?",https://github.com/bitcoin/bitcoin/pull/16725#issuecomment-649924170,649924170,
andronoob,2020-06-26 02:57:07,">don't have the pubkey\n\nObviously it can be known if any corresponding P2PK output does exist. It will be known once the corresponding P2PK output is matched.\n\n>why do you care about the output\n\nBecause P2PK and P2PKH share exactly the same ownership.",https://github.com/bitcoin/bitcoin/pull/16725#issuecomment-649925757,649925757,
andronoob,2020-06-26 03:18:19,"To be short, pk(1A1zP1eP5QGefi2DMPTfTL5SLmv7DivfNa) **distinguishes** from addr(1A1zP1eP5QGefi2DMPTfTL5SLmv7DivfNa). That's it.",https://github.com/bitcoin/bitcoin/pull/16725#issuecomment-649933845,649933845,
andronoob,2020-06-26 04:34:46,"I tried `decodescript <compressed_p2pk_output_script>` and then I found that the response data contained SegWit addresses converted from the pubkey,\n\n```\ndecodescript 21037be71bdada01429453828831bdedc9a8b773ca9b7cb806a5c7eb9b1520504cbfac\n```\n\n```\n{\n  ""asm"": ""037be71bdada01429453828831bdedc9a8b773ca9b7cb806a5c7eb9b1520504cbf OP_CHECKSIG"",\n  ""type"": ""pubkey"",\n  ""p2sh"": ""3E74dX1Lv",https://github.com/bitcoin/bitcoin/pull/16725#issuecomment-649958007,649958007,
shesek,2020-06-26 06:06:40,Related: #19236,https://github.com/bitcoin/bitcoin/pull/16725#issuecomment-649991053,649991053,
fairglu,2020-06-30 19:23:17,"As a coder of blockchain explorers, I would like to chime in: would it be possible to decide on a standard way to represent these outputs ?\n\nIf no standard is defined, then this will just breed confusion with every wallet or explorer picking their own representations.\n\nIMHO the RPC API is a good place to establish such a standard, as it is common ground (while QT UI f.i., is not)\nThanks ",https://github.com/bitcoin/bitcoin/pull/16725#issuecomment-651994544,651994544,
sipa,2020-06-30 21:08:10,"The only reasonable and unambiguous way to represent those is as a raw hex script, in my opinion.",https://github.com/bitcoin/bitcoin/pull/16725#issuecomment-652044443,652044443,
fairglu,2020-07-01 06:57:51,"Raw hex could work, but while these are not addresses, the public key can be the same as the one behind an address (and which becomes ""public"" when an address output is spent), so maintaining some relationship could be useful in terms of user comprehension.\n\nAddress reuse is problematic but it it is widespread (with miners, exchanges or PoS in alts), so it is common for the pubkey behind an ad",https://github.com/bitcoin/bitcoin/pull/16725#issuecomment-652230970,652230970,
andronoob,2020-07-01 08:54:27,"In my opinion, P2PK should be represent as output descriptor like `pk(PUBKEY)`, because that's what it technically is.\n\nI think it's also good to allow the user to match P2PK output with its corresponding P2PKH address like (this is not yet supported) `pk(ADDR)`. However `pk(ADDR)` is not so ""transparent"" like `pk(PUBKEY)`.",https://github.com/bitcoin/bitcoin/pull/16725#issuecomment-652287826,652287826,
andronoob,2020-07-01 08:59:59,"`pk(1A1zP1eP5QGefi2DMPTfTL5SLmv7DivfNa)` distinguishes from `addr(1A1zP1eP5QGefi2DMPTfTL5SLmv7DivfNa)` or `1A1zP1eP5QGefi2DMPTfTL5SLmv7DivfNa`. I think that's good enough, although it still requires some explaination.",https://github.com/bitcoin/bitcoin/pull/16725#issuecomment-652290973,652290973,
etherx-dev,2021-11-16 22:45:08,"wait so if i import a pubkey into the client and it says ""solvable"" true does this mean the wallet client can spend the funds? if so why does it contradict and not show up in the balance but on watch only?",https://github.com/bitcoin/bitcoin/pull/16725#issuecomment-970754164,970754164,
sipa,2021-11-16 22:47:02,"@etherx-dev Please don't ask questions on random, unrelated, old, closed, pull requests. You'll probably find better information on https://bitcoin.stackexchange.com.",https://github.com/bitcoin/bitcoin/pull/16725#issuecomment-970757220,970757220,
MarcoFalke,2019-09-05 00:34:20,This code branch is never exercised in the tests. Would be nice to add one or at the very least some release notes.,https://github.com/bitcoin/bitcoin/pull/16725#discussion_r321032316,321032316,src/core_write.cpp
NicolasDorier,2019-09-05 02:37:34,"`ScriptToUniv` and `ScriptPubKeyToUniv` are almost similar. The only real difference is that one has `reqSigs` and `addresses`, but the other only has `address`.\n\nI think the best way to fix this issue is just modify `ScriptPubKeyToUniv` to stop returning an array (it makes no sense to show the individual P2PKH of multisig pubkeys) and returning `address` instead, and then removing `ScriptToUn",https://github.com/bitcoin/bitcoin/pull/16725#discussion_r321052940,321052940,src/core_write.cpp
