sipa,2015-04-27T16:05:24Z,"Do you really want to call a script several times per second? You're better\noff polling getrawmempool, I would think.\n\nNot saying polling is better than a callback, but the script-execution\nmechanism is very inefficient. With zeromq notifications, things may be\ndifferent.\n",https://github.com/bitcoin/bitcoin/pull/6072#issuecomment-96725334,96725334,
promag,2015-04-27T16:14:07Z,"I think RPC pooling is not the way to go. Having an incremental notification is definitely the best option.\n\nI also think having a script-execution mechanism is not that good, but it is the existing solution, therefore I just followed the same implementation.\n\nAs discussed in #1974, I would also prefer a named pipe. This way it should be easier to integrate with different MQs other than zeromq",https://github.com/bitcoin/bitcoin/pull/6072#issuecomment-96728490,96728490,
jgarzik,2015-04-27T17:04:37Z,"Yes, we really just need to add a notification socket for local listeners that need high volume data like this.  It also solves related problems such as notification storms during tx storms etc.\n",https://github.com/bitcoin/bitcoin/pull/6072#issuecomment-96741868,96741868,
sipa,2015-04-27T17:07:21Z,"I understand that you just want to continue the existing mechanism, that is\ngenerally a very reasonable thing to do.\n\nHowever, no matter what, forking off up to several dozen shell scripts per\nsecond is just not a good idea. That has nothing to do with not wanting\nnotification, but just with the current notification mechanism sucks (for\nhigh volume events, but also for other reasons). As jga",https://github.com/bitcoin/bitcoin/pull/6072#issuecomment-96742447,96742447,
promag,2015-04-27T17:15:35Z,"In the case of staying with script-execution, bitcoind could just fork once when starting and then write to stdin of each script (instead of script arguments).\n",https://github.com/bitcoin/bitcoin/pull/6072#issuecomment-96744860,96744860,
jgarzik,2015-04-27T20:19:45Z,Sure; piping a high volume stream of events to a single program is reasonable as well.  The point is to avoid initiating fresh executions of a script upon each new event.\n\nThis is the same problem as CGI per-hit execution in the mid-1990s.  There is a large menu of solutions from which to choose.\n,https://github.com/bitcoin/bitcoin/pull/6072#issuecomment-96804551,96804551,
promag,2015-04-27T20:56:33Z,"Piping sounds the best for me as a low term, cheap solution. It has no external dependency, can handle script crash (a plugin like system can't) and allows great integration in 3rd infrastructures.\n",https://github.com/bitcoin/bitcoin/pull/6072#issuecomment-96817258,96817258,
jgarzik,2015-04-28T02:24:45Z,"Sockets are the easiest, least complex solution.  Getting pipes to work correctly on all platforms is not easy.\n",https://github.com/bitcoin/bitcoin/pull/6072#issuecomment-96884919,96884919,
promag,2015-04-28T09:08:51Z,"In the case of using sockets, should bitcoind listen/accept connections or connect to a given host:port?\n",https://github.com/bitcoin/bitcoin/pull/6072#issuecomment-96983759,96983759,
jgarzik,2015-04-28T11:02:08Z,"@promag The standard pattern is a listen socket for bitcoind.  Processes attach to a localhost port and receive events.  If that process dies, the socket automatically closes.  The admin is responsible for installing whatever watchdog processes.  \n",https://github.com/bitcoin/bitcoin/pull/6072#issuecomment-97016593,97016593,
jonasschnelli,2015-04-28T11:40:37Z,I think ZMQ could be the long term perspective of these *notify features (especially for rapid I/O stuff like mempool).\n\nZMQ supports asynchronous I/O over sockets. It runs on POSIX bases OSs and windows.\nThe wallet (process) separation could also be done over ZMQ.\nIMO it would make more sense to continue at https://github.com/bitcoin/bitcoin/pull/5303 instead of adding `-mempoolnotify`.\n,https://github.com/bitcoin/bitcoin/pull/6072#issuecomment-97029935,97029935,
jgarzik,2015-04-28T11:45:02Z,"@jonasschnelli Agreed and #5303 does that.\n\nHowever, sockets do not require a library so sometimes that is chosen.\n",https://github.com/bitcoin/bitcoin/pull/6072#issuecomment-97032380,97032380,
jgarzik,2015-05-02T16:07:07Z,"Closing.  Consensus is to NAK as-is, as execution storms etc. are possible.\n\nHowever, it is OK to provide this event signal via some other means, such as zmq or socket.\n",https://github.com/bitcoin/bitcoin/pull/6072#issuecomment-98374021,98374021,
promag,2015-05-04T13:39:36Z,Noticed another PR similar to this one #5328\n,https://github.com/bitcoin/bitcoin/pull/6072#issuecomment-98706600,98706600,
