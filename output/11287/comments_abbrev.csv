danra,2017-09-08T11:24:29Z,@promag I think that would be 1) confusing to readers 2) brittle to include paths changes,https://github.com/bitcoin/bitcoin/pull/11287#issuecomment-328078324,328078324,
promag,2017-09-08T11:34:14Z,"> brittle to include paths changes\n\nI believe there is a plan to make all includes relative to `src/` cc @laanwj. \n\nAnother option is to change the generated to, for instance\n```\nAC_CONFIG_HEADERS([src/config/bitcoin-config-gen.h])\n```\nAnd always have `config/bitcoin-config.h` which checks for that.",https://github.com/bitcoin/bitcoin/pull/11287#issuecomment-328080090,328080090,
danra,2017-09-08T11:39:50Z,"> Another option is to change the generated to, for instance\n> \n> AC_CONFIG_HEADERS([src/config/bitcoin-config-gen.h])\n> And always have config/bitcoin-config.h which checks for that.\n\nThat's fine with me if more people agree that's preferable.\n\nPersonally I think \n`""#include ""config/bitcoin-config-if-exists.h""`\nor\n`""#include ""bitcoin-config-if-exists.h""`\nreads nice and expli",https://github.com/bitcoin/bitcoin/pull/11287#issuecomment-328081013,328081013,
meshcollider,2017-09-08T11:59:22Z,"Other than refactoring, does this have any benefit? I'm not too keen on this idea tbh",https://github.com/bitcoin/bitcoin/pull/11287#issuecomment-328084471,328084471,
danra,2017-09-08T12:05:17Z,"@MeshCollider In general, refactoring in order to DRY code has benefits.\n1) Less overhead to reading and understanding the code. Especially important for security-conscious projects.\n2) Less chance of being wrong when writing new code (e.g. see 3aa60b7ff9587637dcb3e646c2448bf75495a1f4)\n\nAnd more. But I think that's enough.\n\nAlso, any particular reason why you are not keen on the idea?",https://github.com/bitcoin/bitcoin/pull/11287#issuecomment-328085558,328085558,
meshcollider,2017-09-08T12:57:21Z,"@danra, not exactly sure, its just something about creating an entire new file just for 3 lines to import another file. IMO its clear enough as it is, because its just an if-statement, and anyone who would currently forget the ifdef would probably also forget to use this file, and just include bitcoin-config.h directly. Yes DRY is better, but I think this is taking it a bit far, that's all :)",https://github.com/bitcoin/bitcoin/pull/11287#issuecomment-328096030,328096030,
danra,2017-09-08T17:26:12Z,"@MeshCollider In addition to the considerations I mentioned, it's a macro if, easy to either misspell or get wrong (checking for value instead of just being defined, etc.)\nBetter contain it to a single file and forget about it.",https://github.com/bitcoin/bitcoin/pull/11287#issuecomment-328165215,328165215,
achow101,2017-09-08T19:45:22Z,@danra can you do the bulk of this as a scripted diff? That would make review easier and also less likely for you to have accidentally missed an include.,https://github.com/bitcoin/bitcoin/pull/11287#issuecomment-328196781,328196781,
danra,2017-09-08T20:49:42Z,"@achow101 It's fine. I didn't miss anything :P\n\nSeriously, I'm not sure a script would help very much, since there're subtle variations of the original ifdefs as you can see in the diff. So at best the script would show handling of some variations, and the rest of the code would have to be checked anyway for any other variations not covered by the script.\n\nAt best, the script would prove n",https://github.com/bitcoin/bitcoin/pull/11287#issuecomment-328210478,328210478,
achow101,2017-09-08T21:10:30Z,"A scripted diff is easier to review and verify that the changes are correct, especially for such a change like this which is basically a scripted diff.",https://github.com/bitcoin/bitcoin/pull/11287#issuecomment-328214712,328214712,
danra,2017-09-09T10:40:04Z,"DAK why Travis is failing to find ""config/bitcoin-config-if-present.h"" in the build? Is this some cache issue? It builds fine on my local machine.",https://github.com/bitcoin/bitcoin/pull/11287#issuecomment-328269234,328269234,
MarcoFalke,2017-09-10T02:42:36Z,@danra I haven't looked by it could be that out of tree builds are failing.,https://github.com/bitcoin/bitcoin/pull/11287#issuecomment-328315832,328315832,
danra,2017-09-10T20:22:20Z,@MarcoFalke Tested out of tree build on my local machine - works fine. Would appreciate any other pointers as to what else might be causing the travis build to fail.,https://github.com/bitcoin/bitcoin/pull/11287#issuecomment-328369253,328369253,
sipa,2017-09-10T20:23:16Z,Run `make distcheck`.,https://github.com/bitcoin/bitcoin/pull/11287#issuecomment-328369298,328369298,
danra,2017-09-10T20:49:53Z,@sipa That reproduced the build error locally. Thanks!,https://github.com/bitcoin/bitcoin/pull/11287#issuecomment-328370975,328370975,
danra,2017-09-29T12:40:28Z,"@achow101 Added scripted diff.\nRebased",https://github.com/bitcoin/bitcoin/pull/11287#issuecomment-333115392,333115392,
danra,2017-09-30T09:57:15Z,"Does anyone know if `GLOBIGNORE` is supported in the shell on the Travis host which fails the scripted-diff check? It works on my local bash but I can't get it to work here, tried multiple variations.",https://github.com/bitcoin/bitcoin/pull/11287#issuecomment-333297926,333297926,
laanwj,2017-11-28T12:11:42Z,"Closing this for now, I don't think there is agreement to do this, and rebasing it will be a ton of work.",https://github.com/bitcoin/bitcoin/pull/11287#issuecomment-347504446,347504446,
