[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/790715972",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21359#issuecomment-790715972",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21359",
    "id": 790715972,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc5MDcxNTk3Mg==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-04T15:49:34Z",
    "updated_at": "2021-05-10T16:50:03Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #21207 (MOVEONLY: CWallet transaction code out of wallet.cpp/.h by ryanofsky)\n* #21206 (refactor: Make CWalletTx sync state type-safe by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/790715972/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/801302994",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21359#issuecomment-801302994",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21359",
    "id": 801302994,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgwMTMwMjk5NA==",
    "user": {
      "login": "t-bast",
      "id": 31281497,
      "node_id": "MDQ6VXNlcjMxMjgxNDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/31281497?u=9baf85664fb647e1bca36fd972723566ea9ded21&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/t-bast",
      "html_url": "https://github.com/t-bast",
      "followers_url": "https://api.github.com/users/t-bast/followers",
      "following_url": "https://api.github.com/users/t-bast/following{/other_user}",
      "gists_url": "https://api.github.com/users/t-bast/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/t-bast/subscriptions",
      "organizations_url": "https://api.github.com/users/t-bast/orgs",
      "repos_url": "https://api.github.com/users/t-bast/repos",
      "events_url": "https://api.github.com/users/t-bast/events{/privacy}",
      "received_events_url": "https://api.github.com/users/t-bast/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-17T18:14:18Z",
    "updated_at": "2021-03-17T18:14:18Z",
    "author_association": "CONTRIBUTOR",
    "body": "@achow101 @luke-jr would you have some time to give a quick pass to this hopefully very simple PR and let me know if there's a concept ACK and it's worth pursuing? :pray: \r\n\r\nI know, Taproot is happening (is it?), I understand if you don't have much time available :smile: ",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/801302994/reactions",
      "total_count": 4,
      "+1": 4,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/801481178",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21359#issuecomment-801481178",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21359",
    "id": 801481178,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgwMTQ4MTE3OA==",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?u=9791e96cd4268d48e3517bac41eaf2b1d09759fd&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-17T22:24:02Z",
    "updated_at": "2021-03-17T22:24:02Z",
    "author_association": "MEMBER",
    "body": "ACK 16076bb2a8517c6a8b101ad04e220ad3b3f71bcf",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/801481178/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/806557732",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21359#issuecomment-806557732",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21359",
    "id": 806557732,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgwNjU1NzczMg==",
    "user": {
      "login": "t-bast",
      "id": 31281497,
      "node_id": "MDQ6VXNlcjMxMjgxNDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/31281497?u=9baf85664fb647e1bca36fd972723566ea9ded21&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/t-bast",
      "html_url": "https://github.com/t-bast",
      "followers_url": "https://api.github.com/users/t-bast/followers",
      "following_url": "https://api.github.com/users/t-bast/following{/other_user}",
      "gists_url": "https://api.github.com/users/t-bast/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/t-bast/subscriptions",
      "organizations_url": "https://api.github.com/users/t-bast/orgs",
      "repos_url": "https://api.github.com/users/t-bast/repos",
      "events_url": "https://api.github.com/users/t-bast/events{/privacy}",
      "received_events_url": "https://api.github.com/users/t-bast/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-25T11:03:50Z",
    "updated_at": "2021-03-25T11:03:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "Is there something I can do to help this PR move forward?\r\n\r\nWe really need it to unblock anchor outputs in lightning (we can run a modified `bitcoind` with this patch applied for our own node, but we can't ask our users to run a non-release `bitcoind` version).",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/806557732/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/809187431",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21359#issuecomment-809187431",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21359",
    "id": 809187431,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgwOTE4NzQzMQ==",
    "user": {
      "login": "renepickhardt",
      "id": 1926816,
      "node_id": "MDQ6VXNlcjE5MjY4MTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1926816?u=9fae95271077b9ab6356fbbea308dfc154ab53b1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/renepickhardt",
      "html_url": "https://github.com/renepickhardt",
      "followers_url": "https://api.github.com/users/renepickhardt/followers",
      "following_url": "https://api.github.com/users/renepickhardt/following{/other_user}",
      "gists_url": "https://api.github.com/users/renepickhardt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/renepickhardt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/renepickhardt/subscriptions",
      "organizations_url": "https://api.github.com/users/renepickhardt/orgs",
      "repos_url": "https://api.github.com/users/renepickhardt/repos",
      "events_url": "https://api.github.com/users/renepickhardt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/renepickhardt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-29T08:36:23Z",
    "updated_at": "2021-03-29T08:36:23Z",
    "author_association": "NONE",
    "body": "Looks good to me.\r\n\r\nCould there go anything other wrong than a transaction becoming invalid because an input disappeared? (this of course would not be really wrong) ",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/809187431/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/809203584",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21359#issuecomment-809203584",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21359",
    "id": 809203584,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgwOTIwMzU4NA==",
    "user": {
      "login": "t-bast",
      "id": 31281497,
      "node_id": "MDQ6VXNlcjMxMjgxNDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/31281497?u=9baf85664fb647e1bca36fd972723566ea9ded21&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/t-bast",
      "html_url": "https://github.com/t-bast",
      "followers_url": "https://api.github.com/users/t-bast/followers",
      "following_url": "https://api.github.com/users/t-bast/following{/other_user}",
      "gists_url": "https://api.github.com/users/t-bast/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/t-bast/subscriptions",
      "organizations_url": "https://api.github.com/users/t-bast/orgs",
      "repos_url": "https://api.github.com/users/t-bast/repos",
      "events_url": "https://api.github.com/users/t-bast/events{/privacy}",
      "received_events_url": "https://api.github.com/users/t-bast/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-29T08:59:12Z",
    "updated_at": "2021-03-29T08:59:12Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Could there go anything other wrong than a transaction becoming invalid because an input disappeared?\r\n\r\nIt's a very good question, it's part of my \"unknown unknowns\" and why I'm curious to get feedback from more people here.\r\nIt seems to me that there isn't anything else, but there are many things I don't know so I wouldn't rely on my instincts only \u00af\\_(\u30c4)_/\u00af",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/809203584/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/809259702",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21359#issuecomment-809259702",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21359",
    "id": 809259702,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgwOTI1OTcwMg==",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?u=3f68150a5f30acd541d1ed279376cd20b78046b1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-29T10:15:39Z",
    "updated_at": "2021-03-29T10:15:39Z",
    "author_association": "MEMBER",
    "body": "This would need a release note.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/809259702/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/810088058",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21359#issuecomment-810088058",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21359",
    "id": 810088058,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxMDA4ODA1OA==",
    "user": {
      "login": "t-bast",
      "id": 31281497,
      "node_id": "MDQ6VXNlcjMxMjgxNDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/31281497?u=9baf85664fb647e1bca36fd972723566ea9ded21&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/t-bast",
      "html_url": "https://github.com/t-bast",
      "followers_url": "https://api.github.com/users/t-bast/followers",
      "following_url": "https://api.github.com/users/t-bast/following{/other_user}",
      "gists_url": "https://api.github.com/users/t-bast/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/t-bast/subscriptions",
      "organizations_url": "https://api.github.com/users/t-bast/orgs",
      "repos_url": "https://api.github.com/users/t-bast/repos",
      "events_url": "https://api.github.com/users/t-bast/events{/privacy}",
      "received_events_url": "https://api.github.com/users/t-bast/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-30T09:58:07Z",
    "updated_at": "2021-03-30T09:58:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "> This would need a release note.\r\n\r\nAdded in https://github.com/bitcoin/bitcoin/pull/21359/commits/c3eb1994c24167bedb114e34b53dc7cbeb9ff403, let me know if that's how it should be done.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/810088058/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/826836728",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21359#issuecomment-826836728",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21359",
    "id": 826836728,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyNjgzNjcyOA==",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?u=3f68150a5f30acd541d1ed279376cd20b78046b1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-26T13:29:54Z",
    "updated_at": "2021-04-26T13:29:54Z",
    "author_association": "MEMBER",
    "body": "ACK 0709545365d045b24563b4683881f65a2b34afdd",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/826836728/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/829975137",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21359#issuecomment-829975137",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21359",
    "id": 829975137,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgyOTk3NTEzNw==",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?u=3f68150a5f30acd541d1ed279376cd20b78046b1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-30T09:42:03Z",
    "updated_at": "2021-04-30T09:42:03Z",
    "author_association": "MEMBER",
    "body": "re-ACK 1b1dad3efbbdf86f5426bf9c43902f40cb9a06c0",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/829975137/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/831142483",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21359#issuecomment-831142483",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21359",
    "id": 831142483,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgzMTE0MjQ4Mw==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-03T09:33:36Z",
    "updated_at": "2021-05-03T09:33:36Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--4a62be1de6b64f3ed646cdc7932c8cf5-->\n\ud83d\udd75\ufe0f @harding has been requested to review this pull request as specified in the REVIEWERS file.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/831142483/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/836738934",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21359#issuecomment-836738934",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21359",
    "id": 836738934,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgzNjczODkzNA==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-10T14:01:30Z",
    "updated_at": "2021-05-10T14:01:30Z",
    "author_association": "MEMBER",
    "body": "Code review ACK 11d6459b6e101f05f36e13799c400bef82d2fc21",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/836738934/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/590627297",
    "pull_request_review_id": 607743434,
    "id": 590627297,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MDYyNzI5Nw==",
    "diff_hunk": "@@ -2613,7 +2614,7 @@ SigningResult CWallet::SignMessage(const std::string& message, const PKHash& pkh\n     return SigningResult::PRIVATE_KEY_NOT_AVAILABLE;\n }\n \n-bool CWallet::FundTransaction(CMutableTransaction& tx, CAmount& nFeeRet, int& nChangePosInOut, bilingual_str& error, bool lockUnspents, const std::set<int>& setSubtractFeeFromOutputs, CCoinControl coinControl)\n+bool CWallet::FundTransaction(CMutableTransaction& tx, CAmount& nFeeRet, int& nChangePosInOut, bilingual_str& error, bool includeUnsafe, bool lockUnspents, const std::set<int>& setSubtractFeeFromOutputs, CCoinControl coinControl)",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 22,
    "commit_id": "11d6459b6e101f05f36e13799c400bef82d2fc21",
    "original_commit_id": "92e5b3addc87452ad671d9d8b22ca1ed6e08c318",
    "user": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I suggest adding `includeUnsafe` into `CCoinControl` instead.",
    "created_at": "2021-03-09T18:44:02Z",
    "updated_at": "2021-04-30T16:53:59Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r590627297",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/590627297"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r590627297"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/590627297/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2617,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/590635836",
    "pull_request_review_id": 607754571,
    "id": 590635836,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MDYzNTgzNg==",
    "diff_hunk": "@@ -2613,7 +2614,7 @@ SigningResult CWallet::SignMessage(const std::string& message, const PKHash& pkh\n     return SigningResult::PRIVATE_KEY_NOT_AVAILABLE;\n }\n \n-bool CWallet::FundTransaction(CMutableTransaction& tx, CAmount& nFeeRet, int& nChangePosInOut, bilingual_str& error, bool lockUnspents, const std::set<int>& setSubtractFeeFromOutputs, CCoinControl coinControl)\n+bool CWallet::FundTransaction(CMutableTransaction& tx, CAmount& nFeeRet, int& nChangePosInOut, bilingual_str& error, bool includeUnsafe, bool lockUnspents, const std::set<int>& setSubtractFeeFromOutputs, CCoinControl coinControl)",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 22,
    "commit_id": "11d6459b6e101f05f36e13799c400bef82d2fc21",
    "original_commit_id": "92e5b3addc87452ad671d9d8b22ca1ed6e08c318",
    "user": {
      "login": "t-bast",
      "id": 31281497,
      "node_id": "MDQ6VXNlcjMxMjgxNDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/31281497?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/t-bast",
      "html_url": "https://github.com/t-bast",
      "followers_url": "https://api.github.com/users/t-bast/followers",
      "following_url": "https://api.github.com/users/t-bast/following{/other_user}",
      "gists_url": "https://api.github.com/users/t-bast/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/t-bast/subscriptions",
      "organizations_url": "https://api.github.com/users/t-bast/orgs",
      "repos_url": "https://api.github.com/users/t-bast/repos",
      "events_url": "https://api.github.com/users/t-bast/events{/privacy}",
      "received_events_url": "https://api.github.com/users/t-bast/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I completely agree, I mentioned that in the PR description. If there's a concept ACK, `CCoinControl` would be a good place to store that bool. Do you prefer `includeUnsafe` (more consistent with the RPC) or `fSafeOnly` (more consistent with the inner codebase)?",
    "created_at": "2021-03-09T18:56:28Z",
    "updated_at": "2021-04-30T16:53:59Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r590635836",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/590635836"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r590635836"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/590635836/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2617,
    "side": "RIGHT",
    "in_reply_to_id": 590627297
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/591575237",
    "pull_request_review_id": 608783826,
    "id": 591575237,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MTU3NTIzNw==",
    "diff_hunk": "@@ -2613,7 +2614,7 @@ SigningResult CWallet::SignMessage(const std::string& message, const PKHash& pkh\n     return SigningResult::PRIVATE_KEY_NOT_AVAILABLE;\n }\n \n-bool CWallet::FundTransaction(CMutableTransaction& tx, CAmount& nFeeRet, int& nChangePosInOut, bilingual_str& error, bool lockUnspents, const std::set<int>& setSubtractFeeFromOutputs, CCoinControl coinControl)\n+bool CWallet::FundTransaction(CMutableTransaction& tx, CAmount& nFeeRet, int& nChangePosInOut, bilingual_str& error, bool includeUnsafe, bool lockUnspents, const std::set<int>& setSubtractFeeFromOutputs, CCoinControl coinControl)",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 22,
    "commit_id": "11d6459b6e101f05f36e13799c400bef82d2fc21",
    "original_commit_id": "92e5b3addc87452ad671d9d8b22ca1ed6e08c318",
    "user": {
      "login": "t-bast",
      "id": 31281497,
      "node_id": "MDQ6VXNlcjMxMjgxNDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/31281497?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/t-bast",
      "html_url": "https://github.com/t-bast",
      "followers_url": "https://api.github.com/users/t-bast/followers",
      "following_url": "https://api.github.com/users/t-bast/following{/other_user}",
      "gists_url": "https://api.github.com/users/t-bast/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/t-bast/subscriptions",
      "organizations_url": "https://api.github.com/users/t-bast/orgs",
      "repos_url": "https://api.github.com/users/t-bast/repos",
      "events_url": "https://api.github.com/users/t-bast/events{/privacy}",
      "received_events_url": "https://api.github.com/users/t-bast/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done in https://github.com/bitcoin/bitcoin/pull/21359/commits/0dc8808230160e2da2b2f5aa943f5a3bac7dcb60",
    "created_at": "2021-03-10T14:37:50Z",
    "updated_at": "2021-04-30T16:53:59Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r591575237",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/591575237"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r591575237"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/591575237/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2617,
    "side": "RIGHT",
    "in_reply_to_id": 590627297
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/591578684",
    "pull_request_review_id": 608788400,
    "id": 591578684,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MTU3ODY4NA==",
    "diff_hunk": "@@ -2797,7 +2798,7 @@ bool CWallet::CreateTransactionInternal(\n         txNew.nLockTime = GetLocktimeForNewTransaction(chain(), GetLastBlockHash(), GetLastBlockHeight());\n         {\n             std::vector<COutput> vAvailableCoins;\n-            AvailableCoins(vAvailableCoins, true, &coin_control, 1, MAX_MONEY, MAX_MONEY, 0);\n+            AvailableCoins(vAvailableCoins, !coin_control.m_include_unsafe_inputs, &coin_control, 1, MAX_MONEY, MAX_MONEY, 0);",
    "path": "src/wallet/wallet.cpp",
    "position": 30,
    "original_position": 13,
    "commit_id": "11d6459b6e101f05f36e13799c400bef82d2fc21",
    "original_commit_id": "0dc8808230160e2da2b2f5aa943f5a3bac7dcb60",
    "user": {
      "login": "t-bast",
      "id": 31281497,
      "node_id": "MDQ6VXNlcjMxMjgxNDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/31281497?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/t-bast",
      "html_url": "https://github.com/t-bast",
      "followers_url": "https://api.github.com/users/t-bast/followers",
      "following_url": "https://api.github.com/users/t-bast/following{/other_user}",
      "gists_url": "https://api.github.com/users/t-bast/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/t-bast/subscriptions",
      "organizations_url": "https://api.github.com/users/t-bast/orgs",
      "repos_url": "https://api.github.com/users/t-bast/repos",
      "events_url": "https://api.github.com/users/t-bast/events{/privacy}",
      "received_events_url": "https://api.github.com/users/t-bast/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "We could remove the `fOnlySafe` argument to `AvailableCoins` now that this is provided by `coin_control`.\r\n\r\nThe only gotcha is that `AvailableCoins` can be called without a `coin_control`, but I checked the codebase and in all the places where that happens `fOnlySafe` is set to `true`, so we could set it inside `AvailableCoins` to `const bool only_safe = {coinControl ? !coinControl->m_include_unsafe_inputs : true};`.\r\n\r\nDo you want me to apply that change in this PR?",
    "created_at": "2021-03-10T14:41:47Z",
    "updated_at": "2021-04-30T16:53:59Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r591578684",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/591578684"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r591578684"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/591578684/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2846,
    "original_line": 2846,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603135834",
    "pull_request_review_id": 623021184,
    "id": 603135834,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMzEzNTgzNA==",
    "diff_hunk": "@@ -928,6 +929,29 @@ def test_transaction_too_large(self):\n         self.nodes[0].generate(10)\n         assert_raises_rpc_error(-4, \"Transaction too large\", recipient.fundrawtransaction, rawtx)\n \n+    def test_include_unsafe(self):",
    "path": "test/functional/rpc_fundrawtransaction.py",
    "position": 12,
    "original_position": 12,
    "commit_id": "11d6459b6e101f05f36e13799c400bef82d2fc21",
    "original_commit_id": "16076bb2a8517c6a8b101ad04e220ad3b3f71bcf",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "As `FundTransaction()` has other callers like the `walletcreatefundedpsbt` and `send` RPCs, might be a good idea to have `test_include_unsafe` tests that guard against present/future regressions in `rpc_test_psbt.py` and `wallet_send.py`.",
    "created_at": "2021-03-29T09:16:16Z",
    "updated_at": "2021-04-30T16:53:59Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r603135834",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603135834"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r603135834"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603135834/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 932,
    "original_line": 932,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603138827",
    "pull_request_review_id": 623024956,
    "id": 603138827,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMzEzODgyNw==",
    "diff_hunk": "@@ -3203,6 +3208,9 @@ static RPCHelpMan fundrawtransaction()\n                     {\"options\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED_NAMED_ARG, \"for backward compatibility: passing in a true instead of an object will result in {\\\"includeWatching\\\":true}\",\n                         {\n                             {\"add_inputs\", RPCArg::Type::BOOL, /* default */ \"true\", \"For a transaction with existing inputs, automatically include more if they are not enough.\"},\n+                            {\"include_unsafe\", RPCArg::Type::BOOL, /* default */ \"false\", \"Include inputs that are not safe to spend.\\n\"\n+                                                          \"Beware that the resulting transaction may become invalid if one of the unsafe inputs disappears.\\n\"",
    "path": "src/wallet/rpcwallet.cpp",
    "position": null,
    "original_position": 24,
    "commit_id": "11d6459b6e101f05f36e13799c400bef82d2fc21",
    "original_commit_id": "16076bb2a8517c6a8b101ad04e220ad3b3f71bcf",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "s/Beware/Be aware/ or s/Beware that/Warning:/\r\n",
    "created_at": "2021-03-29T09:20:39Z",
    "updated_at": "2021-04-30T16:53:59Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r603138827",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603138827"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r603138827"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603138827/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 3212,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603159097",
    "pull_request_review_id": 623051726,
    "id": 603159097,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMzE1OTA5Nw==",
    "diff_hunk": "@@ -928,6 +929,29 @@ def test_transaction_too_large(self):\n         self.nodes[0].generate(10)\n         assert_raises_rpc_error(-4, \"Transaction too large\", recipient.fundrawtransaction, rawtx)\n \n+    def test_include_unsafe(self):",
    "path": "test/functional/rpc_fundrawtransaction.py",
    "position": 12,
    "original_position": 12,
    "commit_id": "11d6459b6e101f05f36e13799c400bef82d2fc21",
    "original_commit_id": "16076bb2a8517c6a8b101ad04e220ad3b3f71bcf",
    "user": {
      "login": "t-bast",
      "id": 31281497,
      "node_id": "MDQ6VXNlcjMxMjgxNDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/31281497?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/t-bast",
      "html_url": "https://github.com/t-bast",
      "followers_url": "https://api.github.com/users/t-bast/followers",
      "following_url": "https://api.github.com/users/t-bast/following{/other_user}",
      "gists_url": "https://api.github.com/users/t-bast/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/t-bast/subscriptions",
      "organizations_url": "https://api.github.com/users/t-bast/orgs",
      "repos_url": "https://api.github.com/users/t-bast/repos",
      "events_url": "https://api.github.com/users/t-bast/events{/privacy}",
      "received_events_url": "https://api.github.com/users/t-bast/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Good idea, will do.",
    "created_at": "2021-03-29T09:51:09Z",
    "updated_at": "2021-04-30T16:53:59Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r603159097",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603159097"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r603159097"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603159097/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 932,
    "original_line": 932,
    "side": "RIGHT",
    "in_reply_to_id": 603135834
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603954612",
    "pull_request_review_id": 624068559,
    "id": 603954612,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMzk1NDYxMg==",
    "diff_hunk": "@@ -3203,6 +3208,9 @@ static RPCHelpMan fundrawtransaction()\n                     {\"options\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED_NAMED_ARG, \"for backward compatibility: passing in a true instead of an object will result in {\\\"includeWatching\\\":true}\",\n                         {\n                             {\"add_inputs\", RPCArg::Type::BOOL, /* default */ \"true\", \"For a transaction with existing inputs, automatically include more if they are not enough.\"},\n+                            {\"include_unsafe\", RPCArg::Type::BOOL, /* default */ \"false\", \"Include inputs that are not safe to spend.\\n\"\n+                                                          \"Beware that the resulting transaction may become invalid if one of the unsafe inputs disappears.\\n\"",
    "path": "src/wallet/rpcwallet.cpp",
    "position": null,
    "original_position": 24,
    "commit_id": "11d6459b6e101f05f36e13799c400bef82d2fc21",
    "original_commit_id": "16076bb2a8517c6a8b101ad04e220ad3b3f71bcf",
    "user": {
      "login": "t-bast",
      "id": 31281497,
      "node_id": "MDQ6VXNlcjMxMjgxNDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/31281497?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/t-bast",
      "html_url": "https://github.com/t-bast",
      "followers_url": "https://api.github.com/users/t-bast/followers",
      "following_url": "https://api.github.com/users/t-bast/following{/other_user}",
      "gists_url": "https://api.github.com/users/t-bast/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/t-bast/subscriptions",
      "organizations_url": "https://api.github.com/users/t-bast/orgs",
      "repos_url": "https://api.github.com/users/t-bast/repos",
      "events_url": "https://api.github.com/users/t-bast/events{/privacy}",
      "received_events_url": "https://api.github.com/users/t-bast/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done in https://github.com/bitcoin/bitcoin/pull/21359/commits/c3eb1994c24167bedb114e34b53dc7cbeb9ff403",
    "created_at": "2021-03-30T09:57:20Z",
    "updated_at": "2021-04-30T16:53:59Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r603954612",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603954612"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r603954612"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603954612/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 3212,
    "side": "RIGHT",
    "in_reply_to_id": 603138827
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603954890",
    "pull_request_review_id": 624068871,
    "id": 603954890,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMzk1NDg5MA==",
    "diff_hunk": "@@ -928,6 +929,29 @@ def test_transaction_too_large(self):\n         self.nodes[0].generate(10)\n         assert_raises_rpc_error(-4, \"Transaction too large\", recipient.fundrawtransaction, rawtx)\n \n+    def test_include_unsafe(self):",
    "path": "test/functional/rpc_fundrawtransaction.py",
    "position": 12,
    "original_position": 12,
    "commit_id": "11d6459b6e101f05f36e13799c400bef82d2fc21",
    "original_commit_id": "16076bb2a8517c6a8b101ad04e220ad3b3f71bcf",
    "user": {
      "login": "t-bast",
      "id": 31281497,
      "node_id": "MDQ6VXNlcjMxMjgxNDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/31281497?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/t-bast",
      "html_url": "https://github.com/t-bast",
      "followers_url": "https://api.github.com/users/t-bast/followers",
      "following_url": "https://api.github.com/users/t-bast/following{/other_user}",
      "gists_url": "https://api.github.com/users/t-bast/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/t-bast/subscriptions",
      "organizations_url": "https://api.github.com/users/t-bast/orgs",
      "repos_url": "https://api.github.com/users/t-bast/repos",
      "events_url": "https://api.github.com/users/t-bast/events{/privacy}",
      "received_events_url": "https://api.github.com/users/t-bast/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done in https://github.com/bitcoin/bitcoin/pull/21359/commits/c3eb1994c24167bedb114e34b53dc7cbeb9ff403\r\nI also added explicit support for these APIs, it makes more sense that way.",
    "created_at": "2021-03-30T09:57:40Z",
    "updated_at": "2021-04-30T16:53:59Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r603954890",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603954890"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r603954890"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603954890/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 932,
    "original_line": 932,
    "side": "RIGHT",
    "in_reply_to_id": 603135834
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604107952",
    "pull_request_review_id": 624273291,
    "id": 604107952,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwNDEwNzk1Mg==",
    "diff_hunk": "@@ -133,6 +139,11 @@ def test_send(self, from_wallet, to_wallet=None, amount=None, data=None,\n             assert not \"txid\" in res\n             assert \"psbt\" in res\n \n+        if include_unsafe:\n+            from_balance = from_wallet.getbalances()[\"mine\"][\"untrusted_pending\"]\n+        else:\n+            from_balance = from_wallet.getbalance()",
    "path": "test/functional/wallet_send.py",
    "position": null,
    "original_position": 35,
    "commit_id": "11d6459b6e101f05f36e13799c400bef82d2fc21",
    "original_commit_id": "c3eb1994c24167bedb114e34b53dc7cbeb9ff403",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "will review soon, the release note LGTM\r\n```suggestion\r\n            from_balance = from_wallet.getbalances()[\"mine\"][\"trusted\"]\r\n```\r\nas IIRC we are moving away from `getbalance` in favor of `getbalances`... so it's good that you have abstracted it out to this one place (edit: it's not just one place, but could make it one in a function)\r\n\r\nshould `from_balance` when `include_unsafe` is true not also include \"trusted\"?",
    "created_at": "2021-03-30T13:42:21Z",
    "updated_at": "2021-04-30T16:53:59Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r604107952",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604107952"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r604107952"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604107952/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 145,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/611561495",
    "pull_request_review_id": 633445688,
    "id": 611561495,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxMTU2MTQ5NQ==",
    "diff_hunk": "@@ -133,6 +139,11 @@ def test_send(self, from_wallet, to_wallet=None, amount=None, data=None,\n             assert not \"txid\" in res\n             assert \"psbt\" in res\n \n+        if include_unsafe:\n+            from_balance = from_wallet.getbalances()[\"mine\"][\"untrusted_pending\"]\n+        else:\n+            from_balance = from_wallet.getbalance()",
    "path": "test/functional/wallet_send.py",
    "position": null,
    "original_position": 35,
    "commit_id": "11d6459b6e101f05f36e13799c400bef82d2fc21",
    "original_commit_id": "c3eb1994c24167bedb114e34b53dc7cbeb9ff403",
    "user": {
      "login": "t-bast",
      "id": 31281497,
      "node_id": "MDQ6VXNlcjMxMjgxNDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/31281497?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/t-bast",
      "html_url": "https://github.com/t-bast",
      "followers_url": "https://api.github.com/users/t-bast/followers",
      "following_url": "https://api.github.com/users/t-bast/following{/other_user}",
      "gists_url": "https://api.github.com/users/t-bast/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/t-bast/subscriptions",
      "organizations_url": "https://api.github.com/users/t-bast/orgs",
      "repos_url": "https://api.github.com/users/t-bast/repos",
      "events_url": "https://api.github.com/users/t-bast/events{/privacy}",
      "received_events_url": "https://api.github.com/users/t-bast/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I'm not sure that change should be done in this PR.\r\nIt may be worth sweeping all uses of `getbalance()` to replace them with `getbalances()[\"mine\"][\"trusted\"]` in a separate PR, don't you think?\r\nI volunteer to make that follow-up PR right after this one if that sounds good to you.",
    "created_at": "2021-04-12T11:52:44Z",
    "updated_at": "2021-04-30T16:53:59Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r611561495",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/611561495"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r611561495"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/611561495/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 145,
    "side": "RIGHT",
    "in_reply_to_id": 604107952
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/615562749",
    "pull_request_review_id": 638486988,
    "id": 615562749,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNTU2Mjc0OQ==",
    "diff_hunk": "@@ -133,6 +139,11 @@ def test_send(self, from_wallet, to_wallet=None, amount=None, data=None,\n             assert not \"txid\" in res\n             assert \"psbt\" in res\n \n+        if include_unsafe:\n+            from_balance = from_wallet.getbalances()[\"mine\"][\"untrusted_pending\"]\n+        else:\n+            from_balance = from_wallet.getbalance()",
    "path": "test/functional/wallet_send.py",
    "position": null,
    "original_position": 35,
    "commit_id": "11d6459b6e101f05f36e13799c400bef82d2fc21",
    "original_commit_id": "c3eb1994c24167bedb114e34b53dc7cbeb9ff403",
    "user": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "it's new code, if you don't mind conforming to the newer standard for new code makes any future PR to \"sweep\" it up smaller?",
    "created_at": "2021-04-19T06:07:08Z",
    "updated_at": "2021-04-30T16:53:59Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r615562749",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/615562749"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r615562749"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/615562749/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 145,
    "side": "RIGHT",
    "in_reply_to_id": 604107952
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/615563258",
    "pull_request_review_id": 638487631,
    "id": 615563258,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNTU2MzI1OA==",
    "diff_hunk": "@@ -3203,6 +3208,9 @@ static RPCHelpMan fundrawtransaction()\n                     {\"options\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED_NAMED_ARG, \"for backward compatibility: passing in a true instead of an object will result in {\\\"includeWatching\\\":true}\",\n                         {\n                             {\"add_inputs\", RPCArg::Type::BOOL, /* default */ \"true\", \"For a transaction with existing inputs, automatically include more if they are not enough.\"},\n+                            {\"include_unsafe\", RPCArg::Type::BOOL, /* default */ \"false\", \"Include inputs that are not safe to spend.\\n\"",
    "path": "src/wallet/rpcwallet.cpp",
    "position": null,
    "original_position": 23,
    "commit_id": "11d6459b6e101f05f36e13799c400bef82d2fc21",
    "original_commit_id": "378ced96ecd26c5e82fe2600bb01750bdec07346",
    "user": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Might want to explain what is unsafe about them speifically, otherwise it seems to lead to the \"why are you allowing it\" question. ",
    "created_at": "2021-04-19T06:08:30Z",
    "updated_at": "2021-04-30T16:53:59Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r615563258",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/615563258"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r615563258"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/615563258/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 3211,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/615649850",
    "pull_request_review_id": 638600870,
    "id": 615649850,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNTY0OTg1MA==",
    "diff_hunk": "@@ -133,6 +139,11 @@ def test_send(self, from_wallet, to_wallet=None, amount=None, data=None,\n             assert not \"txid\" in res\n             assert \"psbt\" in res\n \n+        if include_unsafe:\n+            from_balance = from_wallet.getbalances()[\"mine\"][\"untrusted_pending\"]\n+        else:\n+            from_balance = from_wallet.getbalance()",
    "path": "test/functional/wallet_send.py",
    "position": null,
    "original_position": 35,
    "commit_id": "11d6459b6e101f05f36e13799c400bef82d2fc21",
    "original_commit_id": "c3eb1994c24167bedb114e34b53dc7cbeb9ff403",
    "user": {
      "login": "t-bast",
      "id": 31281497,
      "node_id": "MDQ6VXNlcjMxMjgxNDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/31281497?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/t-bast",
      "html_url": "https://github.com/t-bast",
      "followers_url": "https://api.github.com/users/t-bast/followers",
      "following_url": "https://api.github.com/users/t-bast/following{/other_user}",
      "gists_url": "https://api.github.com/users/t-bast/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/t-bast/subscriptions",
      "organizations_url": "https://api.github.com/users/t-bast/orgs",
      "repos_url": "https://api.github.com/users/t-bast/repos",
      "events_url": "https://api.github.com/users/t-bast/events{/privacy}",
      "received_events_url": "https://api.github.com/users/t-bast/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Fair enough, and this is quite simple, done in https://github.com/bitcoin/bitcoin/pull/21359/commits/1bb252669dc5e8feb41e4975d609108eb28c8667",
    "created_at": "2021-04-19T08:35:17Z",
    "updated_at": "2021-04-30T16:53:59Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r615649850",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/615649850"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r615649850"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/615649850/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 145,
    "side": "RIGHT",
    "in_reply_to_id": 604107952
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/615650417",
    "pull_request_review_id": 638601679,
    "id": 615650417,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNTY1MDQxNw==",
    "diff_hunk": "@@ -3203,6 +3208,9 @@ static RPCHelpMan fundrawtransaction()\n                     {\"options\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED_NAMED_ARG, \"for backward compatibility: passing in a true instead of an object will result in {\\\"includeWatching\\\":true}\",\n                         {\n                             {\"add_inputs\", RPCArg::Type::BOOL, /* default */ \"true\", \"For a transaction with existing inputs, automatically include more if they are not enough.\"},\n+                            {\"include_unsafe\", RPCArg::Type::BOOL, /* default */ \"false\", \"Include inputs that are not safe to spend.\\n\"",
    "path": "src/wallet/rpcwallet.cpp",
    "position": null,
    "original_position": 23,
    "commit_id": "11d6459b6e101f05f36e13799c400bef82d2fc21",
    "original_commit_id": "378ced96ecd26c5e82fe2600bb01750bdec07346",
    "user": {
      "login": "t-bast",
      "id": 31281497,
      "node_id": "MDQ6VXNlcjMxMjgxNDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/31281497?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/t-bast",
      "html_url": "https://github.com/t-bast",
      "followers_url": "https://api.github.com/users/t-bast/followers",
      "following_url": "https://api.github.com/users/t-bast/following{/other_user}",
      "gists_url": "https://api.github.com/users/t-bast/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/t-bast/subscriptions",
      "organizations_url": "https://api.github.com/users/t-bast/orgs",
      "repos_url": "https://api.github.com/users/t-bast/repos",
      "events_url": "https://api.github.com/users/t-bast/events{/privacy}",
      "received_events_url": "https://api.github.com/users/t-bast/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Makes sense, anything that can improve documentation is worth adding.\r\nI copied the explanation from the `safe` flag in https://github.com/bitcoin/bitcoin/pull/21359/commits/1bb252669dc5e8feb41e4975d609108eb28c8667, let me know if you think the wording should be updated to be clearer.",
    "created_at": "2021-04-19T08:36:10Z",
    "updated_at": "2021-04-30T16:53:59Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r615650417",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/615650417"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r615650417"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/615650417/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 3211,
    "side": "RIGHT",
    "in_reply_to_id": 615563258
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/620213267",
    "pull_request_review_id": 644566079,
    "id": 620213267,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMDIxMzI2Nw==",
    "diff_hunk": "@@ -394,6 +394,14 @@ def run_test(self):\n         # We don't care about the decode result, but decoding must succeed.\n         self.nodes[0].decodepsbt(double_processed_psbt[\"psbt\"])\n \n+        # Make sure unsafe inputs are included if specified\n+        self.nodes[2].createwallet(wallet_name=\"unsafe\")\n+        wunsafe = self.nodes[2].get_wallet_rpc(\"unsafe\")\n+        self.nodes[0].sendtoaddress(wunsafe.getnewaddress(), 2)\n+        self.sync_mempools()\n+        assert_raises_rpc_error(-4, \"Insufficient funds\", wunsafe.walletcreatefundedpsbt, [], [{self.nodes[0].getnewaddress():1}])\n+        wunsafe.walletcreatefundedpsbt([], [{self.nodes[0].getnewaddress():1}], 0, {\"include_unsafe\": True})",
    "path": "test/functional/rpc_psbt.py",
    "position": null,
    "original_position": 10,
    "commit_id": "11d6459b6e101f05f36e13799c400bef82d2fc21",
    "original_commit_id": "4e4d7c01b4134ea3b920345ee2a62e2b06cd458e",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "style nit if you need to retouch (same on previous line)\r\n```suggestion\r\n        wunsafe.walletcreatefundedpsbt([], [{self.nodes[0].getnewaddress(): 1}], 0, {\"include_unsafe\": True})\r\n```\r\n",
    "created_at": "2021-04-26T11:35:46Z",
    "updated_at": "2021-04-30T16:53:59Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r620213267",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/620213267"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r620213267"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/620213267/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 403,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/620217836",
    "pull_request_review_id": 644566079,
    "id": 620217836,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMDIxNzgzNg==",
    "diff_hunk": "@@ -33,12 +33,16 @@ def skip_test_if_missing_module(self):\n     def test_send(self, from_wallet, to_wallet=None, amount=None, data=None,\n                   arg_conf_target=None, arg_estimate_mode=None, arg_fee_rate=None,\n                   conf_target=None, estimate_mode=None, fee_rate=None, add_to_wallet=None, psbt=None,\n-                  inputs=None, add_inputs=None, change_address=None, change_position=None, change_type=None,\n+                  inputs=None, add_inputs=None, include_unsafe=None, change_address=None, change_position=None, change_type=None,\n                   include_watching=None, locktime=None, lock_unspents=None, replaceable=None, subtract_fee_from_outputs=None,\n                   expect_error=None):\n         assert (amount is None) != (data is None)\n \n-        from_balance_before = from_wallet.getbalance()\n+        if include_unsafe:\n+            from_balance_before = from_wallet.getbalances()[\"mine\"][\"untrusted_pending\"]\n+        else:\n+            from_balance_before = from_wallet.getbalances()[\"mine\"][\"trusted\"]",
    "path": "test/functional/wallet_send.py",
    "position": null,
    "original_position": 14,
    "commit_id": "11d6459b6e101f05f36e13799c400bef82d2fc21",
    "original_commit_id": "4e4d7c01b4134ea3b920345ee2a62e2b06cd458e",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "While this works for the purposes of the test, should `from_balance_before` always include \"trusted\":\r\n```python\r\n        from_balance_before = from_wallet.getbalances()[\"mine\"][\"trusted\"]\r\n        if include_unsafe:\r\n            from_balance_before += from_wallet.getbalances()[\"mine\"][\"untrusted_pending\"]\r\n```\r\n",
    "created_at": "2021-04-26T11:42:50Z",
    "updated_at": "2021-04-30T16:53:59Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r620217836",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/620217836"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r620217836"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/620217836/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 44,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/620218301",
    "pull_request_review_id": 644566079,
    "id": 620218301,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMDIxODMwMQ==",
    "diff_hunk": "@@ -133,6 +139,11 @@ def test_send(self, from_wallet, to_wallet=None, amount=None, data=None,\n             assert not \"txid\" in res\n             assert \"psbt\" in res\n \n+        if include_unsafe:\n+            from_balance = from_wallet.getbalances()[\"mine\"][\"untrusted_pending\"]\n+        else:\n+            from_balance = from_wallet.getbalances()[\"mine\"][\"trusted\"]",
    "path": "test/functional/wallet_send.py",
    "position": null,
    "original_position": 35,
    "commit_id": "11d6459b6e101f05f36e13799c400bef82d2fc21",
    "original_commit_id": "4e4d7c01b4134ea3b920345ee2a62e2b06cd458e",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "same here\r\n```python\r\n        from_balance = from_wallet.getbalances()[\"mine\"][\"trusted\"]\r\n        if include_unsafe:\r\n            from_balance += from_wallet.getbalances()[\"mine\"][\"untrusted_pending\"]\r\n```",
    "created_at": "2021-04-26T11:43:38Z",
    "updated_at": "2021-04-30T16:53:59Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r620218301",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/620218301"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r620218301"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/620218301/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 145,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/620267575",
    "pull_request_review_id": 644634773,
    "id": 620267575,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMDI2NzU3NQ==",
    "diff_hunk": "@@ -33,12 +33,16 @@ def skip_test_if_missing_module(self):\n     def test_send(self, from_wallet, to_wallet=None, amount=None, data=None,\n                   arg_conf_target=None, arg_estimate_mode=None, arg_fee_rate=None,\n                   conf_target=None, estimate_mode=None, fee_rate=None, add_to_wallet=None, psbt=None,\n-                  inputs=None, add_inputs=None, change_address=None, change_position=None, change_type=None,\n+                  inputs=None, add_inputs=None, include_unsafe=None, change_address=None, change_position=None, change_type=None,\n                   include_watching=None, locktime=None, lock_unspents=None, replaceable=None, subtract_fee_from_outputs=None,\n                   expect_error=None):\n         assert (amount is None) != (data is None)\n \n-        from_balance_before = from_wallet.getbalance()\n+        if include_unsafe:\n+            from_balance_before = from_wallet.getbalances()[\"mine\"][\"untrusted_pending\"]\n+        else:\n+            from_balance_before = from_wallet.getbalances()[\"mine\"][\"trusted\"]",
    "path": "test/functional/wallet_send.py",
    "position": null,
    "original_position": 14,
    "commit_id": "11d6459b6e101f05f36e13799c400bef82d2fc21",
    "original_commit_id": "4e4d7c01b4134ea3b920345ee2a62e2b06cd458e",
    "user": {
      "login": "t-bast",
      "id": 31281497,
      "node_id": "MDQ6VXNlcjMxMjgxNDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/31281497?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/t-bast",
      "html_url": "https://github.com/t-bast",
      "followers_url": "https://api.github.com/users/t-bast/followers",
      "following_url": "https://api.github.com/users/t-bast/following{/other_user}",
      "gists_url": "https://api.github.com/users/t-bast/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/t-bast/subscriptions",
      "organizations_url": "https://api.github.com/users/t-bast/orgs",
      "repos_url": "https://api.github.com/users/t-bast/repos",
      "events_url": "https://api.github.com/users/t-bast/events{/privacy}",
      "received_events_url": "https://api.github.com/users/t-bast/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "That makes more sense indeed, done in https://github.com/bitcoin/bitcoin/pull/21359/commits/0709545365d045b24563b4683881f65a2b34afdd",
    "created_at": "2021-04-26T12:54:23Z",
    "updated_at": "2021-04-30T16:53:59Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r620267575",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/620267575"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r620267575"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/620267575/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 44,
    "side": "RIGHT",
    "in_reply_to_id": 620217836
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/620267747",
    "pull_request_review_id": 644634976,
    "id": 620267747,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMDI2Nzc0Nw==",
    "diff_hunk": "@@ -133,6 +139,11 @@ def test_send(self, from_wallet, to_wallet=None, amount=None, data=None,\n             assert not \"txid\" in res\n             assert \"psbt\" in res\n \n+        if include_unsafe:\n+            from_balance = from_wallet.getbalances()[\"mine\"][\"untrusted_pending\"]\n+        else:\n+            from_balance = from_wallet.getbalances()[\"mine\"][\"trusted\"]",
    "path": "test/functional/wallet_send.py",
    "position": null,
    "original_position": 35,
    "commit_id": "11d6459b6e101f05f36e13799c400bef82d2fc21",
    "original_commit_id": "4e4d7c01b4134ea3b920345ee2a62e2b06cd458e",
    "user": {
      "login": "t-bast",
      "id": 31281497,
      "node_id": "MDQ6VXNlcjMxMjgxNDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/31281497?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/t-bast",
      "html_url": "https://github.com/t-bast",
      "followers_url": "https://api.github.com/users/t-bast/followers",
      "following_url": "https://api.github.com/users/t-bast/following{/other_user}",
      "gists_url": "https://api.github.com/users/t-bast/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/t-bast/subscriptions",
      "organizations_url": "https://api.github.com/users/t-bast/orgs",
      "repos_url": "https://api.github.com/users/t-bast/repos",
      "events_url": "https://api.github.com/users/t-bast/events{/privacy}",
      "received_events_url": "https://api.github.com/users/t-bast/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done in https://github.com/bitcoin/bitcoin/pull/21359/commits/0709545365d045b24563b4683881f65a2b34afdd",
    "created_at": "2021-04-26T12:54:33Z",
    "updated_at": "2021-04-30T16:53:59Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r620267747",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/620267747"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r620267747"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/620267747/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 145,
    "side": "RIGHT",
    "in_reply_to_id": 620218301
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/620268625",
    "pull_request_review_id": 644636156,
    "id": 620268625,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMDI2ODYyNQ==",
    "diff_hunk": "@@ -394,6 +394,14 @@ def run_test(self):\n         # We don't care about the decode result, but decoding must succeed.\n         self.nodes[0].decodepsbt(double_processed_psbt[\"psbt\"])\n \n+        # Make sure unsafe inputs are included if specified\n+        self.nodes[2].createwallet(wallet_name=\"unsafe\")\n+        wunsafe = self.nodes[2].get_wallet_rpc(\"unsafe\")\n+        self.nodes[0].sendtoaddress(wunsafe.getnewaddress(), 2)\n+        self.sync_mempools()\n+        assert_raises_rpc_error(-4, \"Insufficient funds\", wunsafe.walletcreatefundedpsbt, [], [{self.nodes[0].getnewaddress():1}])\n+        wunsafe.walletcreatefundedpsbt([], [{self.nodes[0].getnewaddress():1}], 0, {\"include_unsafe\": True})",
    "path": "test/functional/rpc_psbt.py",
    "position": null,
    "original_position": 10,
    "commit_id": "11d6459b6e101f05f36e13799c400bef82d2fc21",
    "original_commit_id": "4e4d7c01b4134ea3b920345ee2a62e2b06cd458e",
    "user": {
      "login": "t-bast",
      "id": 31281497,
      "node_id": "MDQ6VXNlcjMxMjgxNDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/31281497?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/t-bast",
      "html_url": "https://github.com/t-bast",
      "followers_url": "https://api.github.com/users/t-bast/followers",
      "following_url": "https://api.github.com/users/t-bast/following{/other_user}",
      "gists_url": "https://api.github.com/users/t-bast/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/t-bast/subscriptions",
      "organizations_url": "https://api.github.com/users/t-bast/orgs",
      "repos_url": "https://api.github.com/users/t-bast/repos",
      "events_url": "https://api.github.com/users/t-bast/events{/privacy}",
      "received_events_url": "https://api.github.com/users/t-bast/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "The rest of that file doesn't put a whitespace in that case, this is why I used this format to stay coherent across the file, but if you think it makes sense to fix I should change it everywhere in the file, right?",
    "created_at": "2021-04-26T12:55:41Z",
    "updated_at": "2021-04-30T16:53:59Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r620268625",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/620268625"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r620268625"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/620268625/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 403,
    "side": "RIGHT",
    "in_reply_to_id": 620213267
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/620294628",
    "pull_request_review_id": 644669091,
    "id": 620294628,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMDI5NDYyOA==",
    "diff_hunk": "@@ -394,6 +394,14 @@ def run_test(self):\n         # We don't care about the decode result, but decoding must succeed.\n         self.nodes[0].decodepsbt(double_processed_psbt[\"psbt\"])\n \n+        # Make sure unsafe inputs are included if specified\n+        self.nodes[2].createwallet(wallet_name=\"unsafe\")\n+        wunsafe = self.nodes[2].get_wallet_rpc(\"unsafe\")\n+        self.nodes[0].sendtoaddress(wunsafe.getnewaddress(), 2)\n+        self.sync_mempools()\n+        assert_raises_rpc_error(-4, \"Insufficient funds\", wunsafe.walletcreatefundedpsbt, [], [{self.nodes[0].getnewaddress():1}])\n+        wunsafe.walletcreatefundedpsbt([], [{self.nodes[0].getnewaddress():1}], 0, {\"include_unsafe\": True})",
    "path": "test/functional/rpc_psbt.py",
    "position": null,
    "original_position": 10,
    "commit_id": "11d6459b6e101f05f36e13799c400bef82d2fc21",
    "original_commit_id": "4e4d7c01b4134ea3b920345ee2a62e2b06cd458e",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I wouldn't worry about it apart from the new code and even then it's a pico nit.",
    "created_at": "2021-04-26T13:26:40Z",
    "updated_at": "2021-04-30T16:53:59Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r620294628",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/620294628"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r620294628"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/620294628/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 403,
    "side": "RIGHT",
    "in_reply_to_id": 620213267
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623679159",
    "pull_request_review_id": 648960673,
    "id": 623679159,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMzY3OTE1OQ==",
    "diff_hunk": "@@ -2535,6 +2534,13 @@ bool CWallet::SelectCoins(const std::vector<COutput>& vAvailableCoins, const CAm\n                                    vCoins, setCoinsRet, nValueRet, coin_selection_params, bnb_used)) {\n                 return true;\n             }\n+            // Try with unsafe inputs if they are allowed. This may spend unconfirmed outputs\n+            // received from other wallets.\n+            if (coin_control.m_include_unsafe_inputs && SelectCoinsMinConf(value_to_select,\n+                                                        CoinEligibilityFilter(0, 0, max_ancestors-1, max_descendants-1, true /* include_partial_groups */),\n+                                                        vCoins, setCoinsRet, nValueRet, coin_selection_params, bnb_used)) {",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 18,
    "commit_id": "11d6459b6e101f05f36e13799c400bef82d2fc21",
    "original_commit_id": "a5c3d9cc4cafef3434c97656ab0d4b4fe4727d51",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "nit, I think it's best to not indent arguments the same as the function they are a part of. Maybe something like\r\n```diff\r\n-            if (coin_control.m_include_unsafe_inputs && SelectCoinsMinConf(value_to_select,\r\n-                                                        CoinEligibilityFilter(0, 0, max_ancestors-1, max_descendants-1, true /* include_partial_groups */),\r\n-                                                        vCoins, setCoinsRet, nValueRet, coin_selection_params, bnb_used)) {\r\n+            if (coin_control.m_include_unsafe_inputs\r\n+                && SelectCoinsMinConf(\r\n+                    value_to_select,\r\n+                    CoinEligibilityFilter(0, 0, max_ancestors-1, max_descendants-1, true /* include_partial_groups */),\r\n+                    vCoins, setCoinsRet, nValueRet, coin_selection_params, bnb_used)) {\r\n                 return true;\r\n```\r\n ",
    "created_at": "2021-04-30T07:40:03Z",
    "updated_at": "2021-04-30T16:53:59Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r623679159",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623679159"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r623679159"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623679159/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2541,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623699569",
    "pull_request_review_id": 648987146,
    "id": 623699569,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMzY5OTU2OQ==",
    "diff_hunk": "@@ -2535,6 +2534,13 @@ bool CWallet::SelectCoins(const std::vector<COutput>& vAvailableCoins, const CAm\n                                    vCoins, setCoinsRet, nValueRet, coin_selection_params, bnb_used)) {\n                 return true;\n             }\n+            // Try with unsafe inputs if they are allowed. This may spend unconfirmed outputs\n+            // received from other wallets.\n+            if (coin_control.m_include_unsafe_inputs && SelectCoinsMinConf(value_to_select,\n+                                                        CoinEligibilityFilter(0, 0, max_ancestors-1, max_descendants-1, true /* include_partial_groups */),\n+                                                        vCoins, setCoinsRet, nValueRet, coin_selection_params, bnb_used)) {",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 18,
    "commit_id": "11d6459b6e101f05f36e13799c400bef82d2fc21",
    "original_commit_id": "a5c3d9cc4cafef3434c97656ab0d4b4fe4727d51",
    "user": {
      "login": "t-bast",
      "id": 31281497,
      "node_id": "MDQ6VXNlcjMxMjgxNDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/31281497?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/t-bast",
      "html_url": "https://github.com/t-bast",
      "followers_url": "https://api.github.com/users/t-bast/followers",
      "following_url": "https://api.github.com/users/t-bast/following{/other_user}",
      "gists_url": "https://api.github.com/users/t-bast/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/t-bast/subscriptions",
      "organizations_url": "https://api.github.com/users/t-bast/orgs",
      "repos_url": "https://api.github.com/users/t-bast/repos",
      "events_url": "https://api.github.com/users/t-bast/events{/privacy}",
      "received_events_url": "https://api.github.com/users/t-bast/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done in https://github.com/bitcoin/bitcoin/pull/21359/commits/2bf0b1e7ee28dbc06aebf832c0480d257dad7294",
    "created_at": "2021-04-30T08:16:54Z",
    "updated_at": "2021-04-30T16:53:59Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r623699569",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623699569"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r623699569"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623699569/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2541,
    "side": "RIGHT",
    "in_reply_to_id": 623679159
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623699746",
    "pull_request_review_id": 648987324,
    "id": 623699746,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMzY5OTc0Ng==",
    "diff_hunk": "@@ -394,6 +394,14 @@ def run_test(self):\n         # We don't care about the decode result, but decoding must succeed.\n         self.nodes[0].decodepsbt(double_processed_psbt[\"psbt\"])\n \n+        # Make sure unsafe inputs are included if specified\n+        self.nodes[2].createwallet(wallet_name=\"unsafe\")\n+        wunsafe = self.nodes[2].get_wallet_rpc(\"unsafe\")\n+        self.nodes[0].sendtoaddress(wunsafe.getnewaddress(), 2)\n+        self.sync_mempools()\n+        assert_raises_rpc_error(-4, \"Insufficient funds\", wunsafe.walletcreatefundedpsbt, [], [{self.nodes[0].getnewaddress():1}])\n+        wunsafe.walletcreatefundedpsbt([], [{self.nodes[0].getnewaddress():1}], 0, {\"include_unsafe\": True})",
    "path": "test/functional/rpc_psbt.py",
    "position": null,
    "original_position": 10,
    "commit_id": "11d6459b6e101f05f36e13799c400bef82d2fc21",
    "original_commit_id": "4e4d7c01b4134ea3b920345ee2a62e2b06cd458e",
    "user": {
      "login": "t-bast",
      "id": 31281497,
      "node_id": "MDQ6VXNlcjMxMjgxNDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/31281497?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/t-bast",
      "html_url": "https://github.com/t-bast",
      "followers_url": "https://api.github.com/users/t-bast/followers",
      "following_url": "https://api.github.com/users/t-bast/following{/other_user}",
      "gists_url": "https://api.github.com/users/t-bast/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/t-bast/subscriptions",
      "organizations_url": "https://api.github.com/users/t-bast/orgs",
      "repos_url": "https://api.github.com/users/t-bast/repos",
      "events_url": "https://api.github.com/users/t-bast/events{/privacy}",
      "received_events_url": "https://api.github.com/users/t-bast/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done in https://github.com/bitcoin/bitcoin/pull/21359/commits/2bf0b1e7ee28dbc06aebf832c0480d257dad7294",
    "created_at": "2021-04-30T08:17:09Z",
    "updated_at": "2021-04-30T16:53:59Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r623699746",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623699746"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r623699746"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623699746/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 403,
    "side": "RIGHT",
    "in_reply_to_id": 620213267
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623718756",
    "pull_request_review_id": 649011218,
    "id": 623718756,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMzcxODc1Ng==",
    "diff_hunk": "@@ -2535,6 +2534,14 @@ bool CWallet::SelectCoins(const std::vector<COutput>& vAvailableCoins, const CAm\n                                    vCoins, setCoinsRet, nValueRet, coin_selection_params, bnb_used)) {\n                 return true;\n             }\n+            // Try with unsafe inputs if they are allowed. This may spend unconfirmed outputs\n+            // received from other wallets.\n+            if (coin_control.m_include_unsafe_inputs ",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 16,
    "commit_id": "11d6459b6e101f05f36e13799c400bef82d2fc21",
    "original_commit_id": "2bf0b1e7ee28dbc06aebf832c0480d257dad7294",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "linter appeasement time (sorry about that if it's from my suggestion)\r\n```suggestion\r\n            if (coin_control.m_include_unsafe_inputs\r\n```",
    "created_at": "2021-04-30T08:48:23Z",
    "updated_at": "2021-04-30T16:53:59Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r623718756",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623718756"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r623718756"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623718756/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2539,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623733654",
    "pull_request_review_id": 649030300,
    "id": 623733654,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMzczMzY1NA==",
    "diff_hunk": "@@ -2535,6 +2534,14 @@ bool CWallet::SelectCoins(const std::vector<COutput>& vAvailableCoins, const CAm\n                                    vCoins, setCoinsRet, nValueRet, coin_selection_params, bnb_used)) {\n                 return true;\n             }\n+            // Try with unsafe inputs if they are allowed. This may spend unconfirmed outputs\n+            // received from other wallets.\n+            if (coin_control.m_include_unsafe_inputs ",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 16,
    "commit_id": "11d6459b6e101f05f36e13799c400bef82d2fc21",
    "original_commit_id": "2bf0b1e7ee28dbc06aebf832c0480d257dad7294",
    "user": {
      "login": "t-bast",
      "id": 31281497,
      "node_id": "MDQ6VXNlcjMxMjgxNDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/31281497?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/t-bast",
      "html_url": "https://github.com/t-bast",
      "followers_url": "https://api.github.com/users/t-bast/followers",
      "following_url": "https://api.github.com/users/t-bast/following{/other_user}",
      "gists_url": "https://api.github.com/users/t-bast/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/t-bast/subscriptions",
      "organizations_url": "https://api.github.com/users/t-bast/orgs",
      "repos_url": "https://api.github.com/users/t-bast/repos",
      "events_url": "https://api.github.com/users/t-bast/events{/privacy}",
      "received_events_url": "https://api.github.com/users/t-bast/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "My bad! Fixed in https://github.com/bitcoin/bitcoin/pull/21359/commits/ce70f322ceb79fe8449d20967c810efcae4881f0",
    "created_at": "2021-04-30T09:13:12Z",
    "updated_at": "2021-04-30T16:53:59Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r623733654",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623733654"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r623733654"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623733654/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2539,
    "side": "RIGHT",
    "in_reply_to_id": 623718756
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623912236",
    "pull_request_review_id": 649262089,
    "id": 623912236,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMzkxMjIzNg==",
    "diff_hunk": "@@ -928,6 +929,29 @@ def test_transaction_too_large(self):\n         self.nodes[0].generate(10)\n         assert_raises_rpc_error(-4, \"Transaction too large\", recipient.fundrawtransaction, rawtx)\n \n+    def test_include_unsafe(self):\n+        self.log.info(\"Test fundrawtxn with unsafe inputs\")\n+\n+        self.nodes[0].createwallet(\"unsafe\")\n+        wallet = self.nodes[0].get_wallet_rpc(\"unsafe\")\n+\n+        # We receive unconfirmed funds from external keys (unsafe output).\n+        addr = wallet.getnewaddress()\n+        txid = self.nodes[2].sendtoaddress(addr, 10)\n+        self.sync_all()\n+        vout = find_vout_for_address(wallet, txid, addr)\n+\n+        # Unsafe inputs are ignored by default.\n+        rawtx = wallet.createrawtransaction([], [{wallet.getnewaddress(): 5}])\n+        assert_raises_rpc_error(-4, \"Insufficient funds\", wallet.fundrawtransaction, rawtx)\n+\n+        # But we can opt-in to use them for funding.\n+        fundedtx = wallet.fundrawtransaction(rawtx, {\"include_unsafe\": True})\n+        tx_dec = wallet.decoderawtransaction(fundedtx['hex'])\n+        assert any([txin['txid'] == txid and txin['vout'] == vout for txin in tx_dec['vin']])\n+        signedtx = wallet.signrawtransactionwithwallet(fundedtx['hex'])\n+        wallet.sendrawtransaction(signedtx['hex'])",
    "path": "test/functional/rpc_fundrawtransaction.py",
    "position": 44,
    "original_position": 33,
    "commit_id": "11d6459b6e101f05f36e13799c400bef82d2fc21",
    "original_commit_id": "1b1dad3efbbdf86f5426bf9c43902f40cb9a06c0",
    "user": {
      "login": "ariard",
      "id": 23310655,
      "node_id": "MDQ6VXNlcjIzMzEwNjU1",
      "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ariard",
      "html_url": "https://github.com/ariard",
      "followers_url": "https://api.github.com/users/ariard/followers",
      "following_url": "https://api.github.com/users/ariard/following{/other_user}",
      "gists_url": "https://api.github.com/users/ariard/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ariard/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
      "organizations_url": "https://api.github.com/users/ariard/orgs",
      "repos_url": "https://api.github.com/users/ariard/repos",
      "events_url": "https://api.github.com/users/ariard/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ariard/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Can you extend the test with a case where the unsafe input has been confirmed to observe that \"include_safe=True\" also consider confirmed inputs ?",
    "created_at": "2021-04-30T14:16:50Z",
    "updated_at": "2021-04-30T16:53:59Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r623912236",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623912236"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r623912236"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623912236/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 964,
    "original_line": 964,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623915716",
    "pull_request_review_id": 649262089,
    "id": 623915716,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMzkxNTcxNg==",
    "diff_hunk": "@@ -3205,6 +3210,9 @@ static RPCHelpMan fundrawtransaction()\n                     {\"options\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED_NAMED_ARG, \"for backward compatibility: passing in a true instead of an object will result in {\\\"includeWatching\\\":true}\",\n                         {\n                             {\"add_inputs\", RPCArg::Type::BOOL, RPCArg::Default{true}, \"For a transaction with existing inputs, automatically include more if they are not enough.\"},\n+                            {\"include_unsafe\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"Include inputs that are not safe to spend (unconfirmed transactions from outside keys and unconfirmed replacement transactions).\\n\"",
    "path": "src/wallet/rpcwallet.cpp",
    "position": 23,
    "original_position": 23,
    "commit_id": "11d6459b6e101f05f36e13799c400bef82d2fc21",
    "original_commit_id": "1b1dad3efbbdf86f5426bf9c43902f40cb9a06c0",
    "user": {
      "login": "ariard",
      "id": 23310655,
      "node_id": "MDQ6VXNlcjIzMzEwNjU1",
      "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ariard",
      "html_url": "https://github.com/ariard",
      "followers_url": "https://api.github.com/users/ariard/followers",
      "following_url": "https://api.github.com/users/ariard/following{/other_user}",
      "gists_url": "https://api.github.com/users/ariard/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ariard/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
      "organizations_url": "https://api.github.com/users/ariard/orgs",
      "repos_url": "https://api.github.com/users/ariard/repos",
      "events_url": "https://api.github.com/users/ariard/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ariard/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I think \"opt-in RBF\" is better than \"replacement\" to qualify transactions which may be evicted of the mempool due to bip 125 rules.",
    "created_at": "2021-04-30T14:21:32Z",
    "updated_at": "2021-04-30T16:53:59Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r623915716",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623915716"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r623915716"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623915716/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 3213,
    "original_line": 3213,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623943839",
    "pull_request_review_id": 649262089,
    "id": 623943839,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMzk0MzgzOQ==",
    "diff_hunk": "@@ -2535,6 +2534,14 @@ bool CWallet::SelectCoins(const std::vector<COutput>& vAvailableCoins, const CAm\n                                    vCoins, setCoinsRet, nValueRet, coin_selection_params, bnb_used)) {\n                 return true;\n             }\n+            // Try with unsafe inputs if they are allowed. This may spend unconfirmed outputs\n+            // received from other wallets.\n+            if (coin_control.m_include_unsafe_inputs\n+                && SelectCoinsMinConf(\n+                    value_to_select, CoinEligibilityFilter(0, 0, max_ancestors-1, max_descendants-1, true /* include_partial_groups */),",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 18,
    "commit_id": "11d6459b6e101f05f36e13799c400bef82d2fc21",
    "original_commit_id": "1b1dad3efbbdf86f5426bf9c43902f40cb9a06c0",
    "user": {
      "login": "ariard",
      "id": 23310655,
      "node_id": "MDQ6VXNlcjIzMzEwNjU1",
      "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ariard",
      "html_url": "https://github.com/ariard",
      "followers_url": "https://api.github.com/users/ariard/followers",
      "following_url": "https://api.github.com/users/ariard/following{/other_user}",
      "gists_url": "https://api.github.com/users/ariard/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ariard/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
      "organizations_url": "https://api.github.com/users/ariard/orgs",
      "repos_url": "https://api.github.com/users/ariard/repos",
      "events_url": "https://api.github.com/users/ariard/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ariard/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Have a look on `CoinEligibilityFilter`, it says \"We never spend of unconfirmed foreign outputs as we cannot rely on it on these funds yet\". I don't think it's true anymore ?\r\n\r\nFurther, maybe add in-line comments about `CoinEligibilityFilter` parameters \"/* conf_mine */ 0, /* conf_theirs */ 1\", good for readabilty",
    "created_at": "2021-04-30T14:58:13Z",
    "updated_at": "2021-04-30T16:53:59Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r623943839",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623943839"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r623943839"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623943839/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2541,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623954742",
    "pull_request_review_id": 649262089,
    "id": 623954742,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMzk1NDc0Mg==",
    "diff_hunk": "@@ -4030,6 +4038,9 @@ static RPCHelpMan send()\n             {\"options\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED_NAMED_ARG, \"\",\n                 {\n                     {\"add_inputs\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"If inputs are specified, automatically include more if they are not enough.\"},\n+                    {\"include_unsafe\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"Include inputs that are not safe to spend (unconfirmed transactions from outside keys and unconfirmed replacement transactions).\\n\"",
    "path": "src/wallet/rpcwallet.cpp",
    "position": 33,
    "original_position": 33,
    "commit_id": "11d6459b6e101f05f36e13799c400bef82d2fc21",
    "original_commit_id": "1b1dad3efbbdf86f5426bf9c43902f40cb9a06c0",
    "user": {
      "login": "ariard",
      "id": 23310655,
      "node_id": "MDQ6VXNlcjIzMzEwNjU1",
      "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ariard",
      "html_url": "https://github.com/ariard",
      "followers_url": "https://api.github.com/users/ariard/followers",
      "following_url": "https://api.github.com/users/ariard/following{/other_user}",
      "gists_url": "https://api.github.com/users/ariard/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ariard/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
      "organizations_url": "https://api.github.com/users/ariard/orgs",
      "repos_url": "https://api.github.com/users/ariard/repos",
      "events_url": "https://api.github.com/users/ariard/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ariard/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Did we already consider for spending replacement transactions from our wallets before this PR ? `isRBFOptIn`doesn't seem used in `FundTransaction` path. Unsafe inputs definition doesn't seem to be tied to replaceability only key externality ?",
    "created_at": "2021-04-30T15:07:32Z",
    "updated_at": "2021-04-30T16:53:59Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r623954742",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623954742"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r623954742"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/623954742/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 4041,
    "original_line": 4041,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/624009230",
    "pull_request_review_id": 649388842,
    "id": 624009230,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNDAwOTIzMA==",
    "diff_hunk": "@@ -3205,6 +3210,9 @@ static RPCHelpMan fundrawtransaction()\n                     {\"options\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED_NAMED_ARG, \"for backward compatibility: passing in a true instead of an object will result in {\\\"includeWatching\\\":true}\",\n                         {\n                             {\"add_inputs\", RPCArg::Type::BOOL, RPCArg::Default{true}, \"For a transaction with existing inputs, automatically include more if they are not enough.\"},\n+                            {\"include_unsafe\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"Include inputs that are not safe to spend (unconfirmed transactions from outside keys and unconfirmed replacement transactions).\\n\"",
    "path": "src/wallet/rpcwallet.cpp",
    "position": 23,
    "original_position": 23,
    "commit_id": "11d6459b6e101f05f36e13799c400bef82d2fc21",
    "original_commit_id": "1b1dad3efbbdf86f5426bf9c43902f40cb9a06c0",
    "user": {
      "login": "t-bast",
      "id": 31281497,
      "node_id": "MDQ6VXNlcjMxMjgxNDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/31281497?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/t-bast",
      "html_url": "https://github.com/t-bast",
      "followers_url": "https://api.github.com/users/t-bast/followers",
      "following_url": "https://api.github.com/users/t-bast/following{/other_user}",
      "gists_url": "https://api.github.com/users/t-bast/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/t-bast/subscriptions",
      "organizations_url": "https://api.github.com/users/t-bast/orgs",
      "repos_url": "https://api.github.com/users/t-bast/repos",
      "events_url": "https://api.github.com/users/t-bast/events{/privacy}",
      "received_events_url": "https://api.github.com/users/t-bast/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "It took the definition of `fSafe` here: https://github.com/bitcoin/bitcoin/blob/2b45cf0bcdb3d2c1de46899e30885c953b57b475/src/wallet/wallet.h#L595\r\nIs there consensus on updating this in every place where it's used?",
    "created_at": "2021-04-30T16:30:25Z",
    "updated_at": "2021-04-30T16:53:59Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r624009230",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/624009230"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r624009230"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/624009230/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 3213,
    "original_line": 3213,
    "side": "RIGHT",
    "in_reply_to_id": 623915716
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/624023687",
    "pull_request_review_id": 649407228,
    "id": 624023687,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNDAyMzY4Nw==",
    "diff_hunk": "@@ -2535,6 +2534,14 @@ bool CWallet::SelectCoins(const std::vector<COutput>& vAvailableCoins, const CAm\n                                    vCoins, setCoinsRet, nValueRet, coin_selection_params, bnb_used)) {\n                 return true;\n             }\n+            // Try with unsafe inputs if they are allowed. This may spend unconfirmed outputs\n+            // received from other wallets.\n+            if (coin_control.m_include_unsafe_inputs\n+                && SelectCoinsMinConf(\n+                    value_to_select, CoinEligibilityFilter(0, 0, max_ancestors-1, max_descendants-1, true /* include_partial_groups */),",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 18,
    "commit_id": "11d6459b6e101f05f36e13799c400bef82d2fc21",
    "original_commit_id": "1b1dad3efbbdf86f5426bf9c43902f40cb9a06c0",
    "user": {
      "login": "t-bast",
      "id": 31281497,
      "node_id": "MDQ6VXNlcjMxMjgxNDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/31281497?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/t-bast",
      "html_url": "https://github.com/t-bast",
      "followers_url": "https://api.github.com/users/t-bast/followers",
      "following_url": "https://api.github.com/users/t-bast/following{/other_user}",
      "gists_url": "https://api.github.com/users/t-bast/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/t-bast/subscriptions",
      "organizations_url": "https://api.github.com/users/t-bast/orgs",
      "repos_url": "https://api.github.com/users/t-bast/repos",
      "events_url": "https://api.github.com/users/t-bast/events{/privacy}",
      "received_events_url": "https://api.github.com/users/t-bast/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Fixed in https://github.com/bitcoin/bitcoin/pull/21359/commits/11d6459b6e101f05f36e13799c400bef82d2fc21",
    "created_at": "2021-04-30T16:54:12Z",
    "updated_at": "2021-04-30T16:54:12Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r624023687",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/624023687"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r624023687"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/624023687/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2541,
    "side": "RIGHT",
    "in_reply_to_id": 623943839
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/624023780",
    "pull_request_review_id": 649407351,
    "id": 624023780,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNDAyMzc4MA==",
    "diff_hunk": "@@ -928,6 +929,29 @@ def test_transaction_too_large(self):\n         self.nodes[0].generate(10)\n         assert_raises_rpc_error(-4, \"Transaction too large\", recipient.fundrawtransaction, rawtx)\n \n+    def test_include_unsafe(self):\n+        self.log.info(\"Test fundrawtxn with unsafe inputs\")\n+\n+        self.nodes[0].createwallet(\"unsafe\")\n+        wallet = self.nodes[0].get_wallet_rpc(\"unsafe\")\n+\n+        # We receive unconfirmed funds from external keys (unsafe output).\n+        addr = wallet.getnewaddress()\n+        txid = self.nodes[2].sendtoaddress(addr, 10)\n+        self.sync_all()\n+        vout = find_vout_for_address(wallet, txid, addr)\n+\n+        # Unsafe inputs are ignored by default.\n+        rawtx = wallet.createrawtransaction([], [{wallet.getnewaddress(): 5}])\n+        assert_raises_rpc_error(-4, \"Insufficient funds\", wallet.fundrawtransaction, rawtx)\n+\n+        # But we can opt-in to use them for funding.\n+        fundedtx = wallet.fundrawtransaction(rawtx, {\"include_unsafe\": True})\n+        tx_dec = wallet.decoderawtransaction(fundedtx['hex'])\n+        assert any([txin['txid'] == txid and txin['vout'] == vout for txin in tx_dec['vin']])\n+        signedtx = wallet.signrawtransactionwithwallet(fundedtx['hex'])\n+        wallet.sendrawtransaction(signedtx['hex'])",
    "path": "test/functional/rpc_fundrawtransaction.py",
    "position": 44,
    "original_position": 33,
    "commit_id": "11d6459b6e101f05f36e13799c400bef82d2fc21",
    "original_commit_id": "1b1dad3efbbdf86f5426bf9c43902f40cb9a06c0",
    "user": {
      "login": "t-bast",
      "id": 31281497,
      "node_id": "MDQ6VXNlcjMxMjgxNDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/31281497?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/t-bast",
      "html_url": "https://github.com/t-bast",
      "followers_url": "https://api.github.com/users/t-bast/followers",
      "following_url": "https://api.github.com/users/t-bast/following{/other_user}",
      "gists_url": "https://api.github.com/users/t-bast/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/t-bast/subscriptions",
      "organizations_url": "https://api.github.com/users/t-bast/orgs",
      "repos_url": "https://api.github.com/users/t-bast/repos",
      "events_url": "https://api.github.com/users/t-bast/events{/privacy}",
      "received_events_url": "https://api.github.com/users/t-bast/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done in https://github.com/bitcoin/bitcoin/pull/21359/commits/11d6459b6e101f05f36e13799c400bef82d2fc21",
    "created_at": "2021-04-30T16:54:23Z",
    "updated_at": "2021-04-30T16:54:23Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r624023780",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/624023780"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r624023780"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/624023780/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 964,
    "original_line": 964,
    "side": "RIGHT",
    "in_reply_to_id": 623912236
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/624026671",
    "pull_request_review_id": 649411015,
    "id": 624026671,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyNDAyNjY3MQ==",
    "diff_hunk": "@@ -4030,6 +4038,9 @@ static RPCHelpMan send()\n             {\"options\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED_NAMED_ARG, \"\",\n                 {\n                     {\"add_inputs\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"If inputs are specified, automatically include more if they are not enough.\"},\n+                    {\"include_unsafe\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"Include inputs that are not safe to spend (unconfirmed transactions from outside keys and unconfirmed replacement transactions).\\n\"",
    "path": "src/wallet/rpcwallet.cpp",
    "position": 33,
    "original_position": 33,
    "commit_id": "11d6459b6e101f05f36e13799c400bef82d2fc21",
    "original_commit_id": "1b1dad3efbbdf86f5426bf9c43902f40cb9a06c0",
    "user": {
      "login": "t-bast",
      "id": 31281497,
      "node_id": "MDQ6VXNlcjMxMjgxNDk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/31281497?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/t-bast",
      "html_url": "https://github.com/t-bast",
      "followers_url": "https://api.github.com/users/t-bast/followers",
      "following_url": "https://api.github.com/users/t-bast/following{/other_user}",
      "gists_url": "https://api.github.com/users/t-bast/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/t-bast/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/t-bast/subscriptions",
      "organizations_url": "https://api.github.com/users/t-bast/orgs",
      "repos_url": "https://api.github.com/users/t-bast/repos",
      "events_url": "https://api.github.com/users/t-bast/events{/privacy}",
      "received_events_url": "https://api.github.com/users/t-bast/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I'm not 100% I understand your comment. Are you saying that `FundTransaction` doesn't check `isRBFOptIn`, which means that the wallet may currently use unconfirmed outputs from replaceable txs if they're our own txs (which could be an issue because we could replace that tx and invalidate its children)?",
    "created_at": "2021-04-30T16:58:56Z",
    "updated_at": "2021-04-30T16:58:56Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r624026671",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/624026671"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21359#discussion_r624026671"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21359"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/624026671/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 4041,
    "original_line": 4041,
    "side": "RIGHT",
    "in_reply_to_id": 623954742
  }
]