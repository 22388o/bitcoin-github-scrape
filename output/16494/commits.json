[
  {
    "sha": "6df41644cfb7d50ab5d77f7209a54b835f555c76",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo2ZGY0MTY0NGNmYjdkNTBhYjVkNzdmNzIwOWE1NGI4MzVmNTU1Yzc2",
    "commit": {
      "author": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2019-07-30T16:09:00Z"
      },
      "committer": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2019-07-30T16:09:00Z"
      },
      "message": "wallet: Drop support to serialize OldKey",
      "tree": {
        "sha": "be29368f288f929e8facc5fd13296eaa4db0ee18",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/be29368f288f929e8facc5fd13296eaa4db0ee18"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6df41644cfb7d50ab5d77f7209a54b835f555c76",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6df41644cfb7d50ab5d77f7209a54b835f555c76",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/6df41644cfb7d50ab5d77f7209a54b835f555c76",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6df41644cfb7d50ab5d77f7209a54b835f555c76/comments",
    "author": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "74f1a27f2f45af7dafcc34df766cf76d29c7c6ed",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/74f1a27f2f45af7dafcc34df766cf76d29c7c6ed",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/74f1a27f2f45af7dafcc34df766cf76d29c7c6ed"
      }
    ],
    "stats": {
      "total": 13,
      "additions": 4,
      "deletions": 9
    },
    "files": [
      {
        "sha": "9bcf8391401d85a6d89d1c5f5eb8c57f1a20e7ab",
        "filename": "src/wallet/wallet.h",
        "status": "modified",
        "additions": 4,
        "deletions": 9,
        "changes": 13,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6df41644cfb7d50ab5d77f7209a54b835f555c76/src/wallet/wallet.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6df41644cfb7d50ab5d77f7209a54b835f555c76/src/wallet/wallet.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.h?ref=6df41644cfb7d50ab5d77f7209a54b835f555c76",
        "patch": "@@ -679,22 +679,17 @@ class COutput\n /** Private key that was serialized by an old wallet (only used for deserialization) */\n struct OldKey {\n     CPrivKey vchPrivKey;\n-    ADD_SERIALIZE_METHODS;\n \n-    template <typename Stream, typename Operation>\n-    inline void SerializationOp(Stream& s, Operation ser_action) {\n+    template <typename Stream>\n+    inline void Unserialize(Stream& s) {\n         // no longer used by the wallet, thus dropped after deserialization:\n         int64_t nTimeCreated;\n         int64_t nTimeExpires;\n         std::string strComment;\n \n         int nVersion = s.GetVersion();\n-        if (!(s.GetType() & SER_GETHASH))\n-            READWRITE(nVersion);\n-        READWRITE(vchPrivKey);\n-        READWRITE(nTimeCreated);\n-        READWRITE(nTimeExpires);\n-        READWRITE(LIMITED_STRING(strComment, 65536));\n+        if (!(s.GetType() & SER_GETHASH)) s >> nVersion;\n+        s >> vchPrivKey >> nTimeCreated >> nTimeExpires >> LIMITED_STRING(strComment, 65536);\n     }\n };\n "
      }
    ]
  },
  {
    "sha": "d7855d0a445ea0d82bd22252876496250be7cd8e",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkNzg1NWQwYTQ0NWVhMGQ4MmJkMjIyNTI4NzY0OTYyNTBiZTdjZDhl",
    "commit": {
      "author": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2019-07-30T16:25:25Z"
      },
      "committer": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2019-07-30T16:25:25Z"
      },
      "message": "wallet: Move OldKey to walletdb.h",
      "tree": {
        "sha": "04fafe20d3a34a8e1e175645f5f40263292cd424",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/04fafe20d3a34a8e1e175645f5f40263292cd424"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d7855d0a445ea0d82bd22252876496250be7cd8e",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d7855d0a445ea0d82bd22252876496250be7cd8e",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/d7855d0a445ea0d82bd22252876496250be7cd8e",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d7855d0a445ea0d82bd22252876496250be7cd8e/comments",
    "author": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "6df41644cfb7d50ab5d77f7209a54b835f555c76",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6df41644cfb7d50ab5d77f7209a54b835f555c76",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/6df41644cfb7d50ab5d77f7209a54b835f555c76"
      }
    ],
    "stats": {
      "total": 34,
      "additions": 17,
      "deletions": 17
    },
    "files": [
      {
        "sha": "3e66f982250a4d2c6aa8ef99218cfb19eb12cc4b",
        "filename": "src/wallet/wallet.h",
        "status": "modified",
        "additions": 0,
        "deletions": 17,
        "changes": 17,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d7855d0a445ea0d82bd22252876496250be7cd8e/src/wallet/wallet.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d7855d0a445ea0d82bd22252876496250be7cd8e/src/wallet/wallet.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.h?ref=d7855d0a445ea0d82bd22252876496250be7cd8e",
        "patch": "@@ -676,23 +676,6 @@ class COutput\n     }\n };\n \n-/** Private key that was serialized by an old wallet (only used for deserialization) */\n-struct OldKey {\n-    CPrivKey vchPrivKey;\n-\n-    template <typename Stream>\n-    inline void Unserialize(Stream& s) {\n-        // no longer used by the wallet, thus dropped after deserialization:\n-        int64_t nTimeCreated;\n-        int64_t nTimeExpires;\n-        std::string strComment;\n-\n-        int nVersion = s.GetVersion();\n-        if (!(s.GetType() & SER_GETHASH)) s >> nVersion;\n-        s >> vchPrivKey >> nTimeCreated >> nTimeExpires >> LIMITED_STRING(strComment, 65536);\n-    }\n-};\n-\n struct CoinSelectionParams\n {\n     bool use_bnb = true;"
      },
      {
        "sha": "e0669e15d85464afeeaf18d2555f074624396a17",
        "filename": "src/wallet/walletdb.h",
        "status": "modified",
        "additions": 17,
        "deletions": 0,
        "changes": 17,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d7855d0a445ea0d82bd22252876496250be7cd8e/src/wallet/walletdb.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d7855d0a445ea0d82bd22252876496250be7cd8e/src/wallet/walletdb.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/walletdb.h?ref=d7855d0a445ea0d82bd22252876496250be7cd8e",
        "patch": "@@ -168,6 +168,23 @@ class CKeyMetadata\n     }\n };\n \n+/** Private key that was serialized by an old wallet (only used for deserialization) */\n+struct OldKey {\n+    CPrivKey vchPrivKey;\n+\n+    template <typename Stream>\n+    inline void Unserialize(Stream& s) {\n+        // no longer used by the wallet, thus dropped after deserialization:\n+        int64_t nTimeCreated;\n+        int64_t nTimeExpires;\n+        std::string strComment;\n+\n+        int nVersion = s.GetVersion();\n+        if (!(s.GetType() & SER_GETHASH)) s >> nVersion;\n+        s >> vchPrivKey >> nTimeCreated >> nTimeExpires >> LIMITED_STRING(strComment, 65536);\n+    }\n+};\n+\n /** Access to the wallet database.\n  * Opens the database and provides read and write access to it. Each read and write is its own transaction.\n  * Multiple operation transactions can be started using TxnBegin() and committed using TxnCommit()"
      }
    ]
  }
]