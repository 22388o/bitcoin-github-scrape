jnewbery,2021-02-16 15:57:48,"Thanks for reviewing #20721 @ajtowns @amitiuttarwar @MarcoFalke. Here are your suggested changes.\n\n~I've marked as draft for now and will rebase on main once #21015 is merged so I can take @MarcoFalke's suggestion here: https://github.com/bitcoin/bitcoin/pull/20721#discussion_r576774527.~\n\nEDIT: That suggestion was taken in #21015, which has now been merged.",https://github.com/bitcoin/bitcoin/pull/21198#issuecomment-779931096,779931096,
jnewbery,2021-02-22 08:46:00,Rebased on master to pick up fix for interface_zmq.py in #21008.,https://github.com/bitcoin/bitcoin/pull/21198#issuecomment-783203197,783203197,
DrahtBot,2021-03-04 16:33:26,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #21563 (net: Drop cs_sendProcessing mutex that guards nothing by hebasto)\n* #21236 (net processing: Extract `addr` send f",https://github.com/bitcoin/bitcoin/pull/21198#issuecomment-790749274,790749274,
jnewbery,2021-03-30 09:52:10,Rebased and moved out of draft.,https://github.com/bitcoin/bitcoin/pull/21198#issuecomment-810084084,810084084,
DrahtBot,2021-04-01 09:05:46,"<!--cf906140f33d8803c4a75a2196329ecb-->\nüêô This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a ""draft"".</sub>",https://github.com/bitcoin/bitcoin/pull/21198#issuecomment-811767726,811767726,
jnewbery,2021-04-01 10:35:37,Rebased,https://github.com/bitcoin/bitcoin/pull/21198#issuecomment-811818121,811818121,
laanwj,2021-04-01 14:36:01,Code review ACK 5ed535a02f8f0a6f65bbe19f48a8c81f43298393,https://github.com/bitcoin/bitcoin/pull/21198#issuecomment-811951990,811951990,
MarcoFalke,2021-02-16 16:33:49,"I think you can use `std::optional<uint64_t>::value_or(uint64_t)` instead of passing pointers, no?",https://github.com/bitcoin/bitcoin/pull/21198#discussion_r576963891,576963891,src/net.h
ajtowns,2021-02-17 06:43:37,"Was there any reason to move this from net.cpp to net.h? (Coding guidelines say stuff should be in the .cpp unless inlining is critical [EDIT: I assumed the coding guidelines were why you didn't make it inline in the first place])\n\nI don't think `optnow.value_or(GetSystemTimeInseconds())` would be a good idea -- that would mean always invoking `GetSystemTimeInSeconds` and throwing away the res",https://github.com/bitcoin/bitcoin/pull/21198#discussion_r577361023,577361023,src/net.h
MarcoFalke,2021-02-17 07:01:37,"Ah good point on the arg to value_or always being evaluated. Though, keeping the ternary as is and changing the type to optional would work?",https://github.com/bitcoin/bitcoin/pull/21198#discussion_r577368098,577368098,src/net.h
jnewbery,2021-02-17 09:43:57,"> Was there any reason to move this from net.cpp to net.h? (Coding guidelines say stuff should be in the .cpp unless inlining is critical [EDIT: I assumed the coding guidelines were why you didn't make it inline in the first place])\n\nOnly because you and amiti seemed to want it inlined. I didn't realise that this guidance was in the developer notes, but I completely agree. net.h is included in",https://github.com/bitcoin/bitcoin/pull/21198#discussion_r577464260,577464260,src/net.h
ajtowns,2021-02-17 09:46:54,"@jnewbery Having it inline means the `?:` can be resolved at compile time for every use case, and I couldn't resist the temptation.\n\n@MarcoFalke Yes, keeping the `?:` should work fine with optional instead of pointer.",https://github.com/bitcoin/bitcoin/pull/21198#discussion_r577466358,577466358,src/net.h
jnewbery,2021-02-17 10:04:05,"I don't have a strong opinion about any of this. My default is to implement things in the cpp file unless the function is in a tight loop where performance really matters and the function call overhead is meaningful. Your suggestion in the previous PR was to inline it, and amiti mentioned the same thing to me, so I made that change here.\n\nI've now moved it back to the cpp and made the optional",https://github.com/bitcoin/bitcoin/pull/21198#discussion_r577479197,577479197,src/net.h
ajtowns,2021-02-18 03:09:22,"Yeah, it wouldn't surprise me if it gets optimised during linking these days anyway. My bad habits don't need to be yours!",https://github.com/bitcoin/bitcoin/pull/21198#discussion_r578101941,578101941,src/net.h
ajtowns,2021-02-18 03:10:23,`if (   !    ShouldRunInactivityChecks())`,https://github.com/bitcoin/bitcoin/pull/21198#discussion_r578102337,578102337,src/net.cpp
jnewbery,2021-02-18 08:17:16,":flushed: \n\nfixed",https://github.com/bitcoin/bitcoin/pull/21198#discussion_r578212689,578212689,src/net.cpp
jnewbery,2021-02-18 08:18:17,"I don't think we have link time optimization enabled yet, but hopefully in the future!",https://github.com/bitcoin/bitcoin/pull/21198#discussion_r578213352,578213352,src/net.h
