[
  {
    "sha": "7bb45e4b7a71e0ff0e2bbeba5367022758efa5d4",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo3YmI0NWU0YjdhNzFlMGZmMGUyYmJlYmE1MzY3MDIyNzU4ZWZhNWQ0",
    "commit": {
      "author": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2019-01-03T21:34:38Z"
      },
      "committer": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2019-01-04T18:52:22Z"
      },
      "message": "Qt: update header count regardless of update delay",
      "tree": {
        "sha": "f810aa97af76432549d5c9f46e6811f98bcb62cb",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f810aa97af76432549d5c9f46e6811f98bcb62cb"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7bb45e4b7a71e0ff0e2bbeba5367022758efa5d4",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEyhopCNzi8TB0xizeHrd2uwPHki0FAlwvq2cACgkQHrd2uwPH\nki1ETRAA1uIPrwn7axd9LhJIRnG9cTqI2ATtycIn7EoQutWfmnMk8HkVZbuXDa9a\n+fYDDbJ31F3Igi4hT4g9RRGpIupGKvghxgAcjFbIfYSFmSN4wDo5ISsRPjHgOioB\nmcdVJrY16oN6hkFNvSVjUobXdJXiwjPP7pr7Yp3szRYy9ulSRj9teUFtKIYuf50d\nkDyqdS/x56N+XowNb+CRiSNbI8fX8HZW9fTtn9UBl/Kck+6RFCW85rKgsOiAMyNW\nkZ0/5hndKC38gIOLT1BDKhxghQn1IO97Esls++xbomQInm1q5SZy8gDKmZQAV7Hd\nqdkcRCzrLTAuiYEVcO1KXpfKk38o/K1fbzf36bhAsjCaNYaf/I0Gph3lI2DjgAvY\nOOLeSRUhfLuA9fTqp5hb9M3/tlVuyp7hRYKmlc8iv3uVMP4M9gswxeLk8DlgRHof\npeA+gBUwbDCwfxtQEzY6CWhHywnTchu1ULEHbi/bokAtBv5quuWPw279jHDA76Pl\nRjfsmCMl2fZEE9uZzvRA1/e/7YxWMZPo16iUL3ydjSISUT+lq7z851LATvWH+4ia\nP2ELzksB3EEbl1oq03nF1LctSoulWucNgPl0ZTXIqPBvyyvZp4VDXcejxKlz4Iwi\n1j7Ni8xBjb18R6YnGRFtT0vVV2NxLT/BWAkMwh020m/2LcNnXz8=\n=FiL5\n-----END PGP SIGNATURE-----",
        "payload": "tree f810aa97af76432549d5c9f46e6811f98bcb62cb\nparent 1d73636fdf1ef85c1f62841953e1cf01a6c3bfd0\nauthor Jonas Schnelli <dev@jonasschnelli.ch> 1546551278 -1000\ncommitter Jonas Schnelli <dev@jonasschnelli.ch> 1546627942 -1000\n\nQt: update header count regardless of update delay\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7bb45e4b7a71e0ff0e2bbeba5367022758efa5d4",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/7bb45e4b7a71e0ff0e2bbeba5367022758efa5d4",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7bb45e4b7a71e0ff0e2bbeba5367022758efa5d4/comments",
    "author": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "1d73636fdf1ef85c1f62841953e1cf01a6c3bfd0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1d73636fdf1ef85c1f62841953e1cf01a6c3bfd0",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/1d73636fdf1ef85c1f62841953e1cf01a6c3bfd0"
      }
    ],
    "stats": {
      "total": 4,
      "additions": 2,
      "deletions": 2
    },
    "files": [
      {
        "sha": "1b411f518d03a7d33a06398b60d9662786da7c3c",
        "filename": "src/qt/clientmodel.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/7bb45e4b7a71e0ff0e2bbeba5367022758efa5d4/src/qt/clientmodel.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/7bb45e4b7a71e0ff0e2bbeba5367022758efa5d4/src/qt/clientmodel.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/clientmodel.cpp?ref=7bb45e4b7a71e0ff0e2bbeba5367022758efa5d4",
        "patch": "@@ -237,8 +237,8 @@ static void BlockTipChanged(ClientModel *clientmodel, bool initialSync, int heig\n         clientmodel->cachedBestHeaderHeight = height;\n         clientmodel->cachedBestHeaderTime = blockTime;\n     }\n-    // if we are in-sync, update the UI regardless of last update time\n-    if (!initialSync || now - nLastUpdateNotification > MODEL_UPDATE_DELAY) {\n+    // if we are in-sync or if we notify a header update, update the UI regardless of last update time\n+    if (fHeader || !initialSync || now - nLastUpdateNotification > MODEL_UPDATE_DELAY) {\n         //pass an async signal to the UI thread\n         QMetaObject::invokeMethod(clientmodel, \"numBlocksChanged\", Qt::QueuedConnection,\n                                   Q_ARG(int, height),"
      }
    ]
  },
  {
    "sha": "e8db6b8044424a6fbb4b0a80acffc8c7fbf6be8b",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzplOGRiNmI4MDQ0NDI0YTZmYmI0YjBhODBhY2ZmYzhjN2ZiZjZiZThi",
    "commit": {
      "author": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2019-01-03T21:37:18Z"
      },
      "committer": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2019-01-04T18:52:27Z"
      },
      "message": "Qt: Fix update headers-count",
      "tree": {
        "sha": "aadca608f667f55ebf9e644485c5d12f109870d7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/aadca608f667f55ebf9e644485c5d12f109870d7"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e8db6b8044424a6fbb4b0a80acffc8c7fbf6be8b",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEyhopCNzi8TB0xizeHrd2uwPHki0FAlwvq2sACgkQHrd2uwPH\nki19fQ//b+0CnYFeNhiw9riGPGVkU9hH3wdJSIGg7i06fyar0YrxFAH8rciVTERT\nnbVkifF6MaI4iwNt3JkP/7j5mXvim+ntYc08adW1Cnrx90YJJ9fvuHl0iPA5PnV6\nHe4Bs1EMbHzIesh8KAv3nOAlOPAHfpkz8bKRxR/h8eZdzWaj+5XfZkmgF6n2B4MU\nBDp64rh/Eayoy3tVzm6+0+AZN5lGhuHvkltw5eOioUCZlLtnX2f96bIHbYfhFqwp\nAax0ag9pke83eT5KO47zXZnVJO11nhkkjgnZuvnMv37zC54jinzFaA7vLgO1Im/K\nVUi1ofONfiK0ck2EyRe8yBeG1TAhsWPup06b0ua0rIBZnXIR78ggKIyq3GeVmzhK\n5dA4h0ZfDI0GMvxedqRKKEJGOAI5hkjwPMuqNfUbC70oMePObwoJ2/eUloHXofr1\ngqqAiqMis5BhtuvtfxMBYccckTZLpa6qWEeQpHKJbY96zMN7aDwML6N4ejs/Dea8\nwQI76b3Lx1SYQHkmeQfOfscoaj1aS/Mc1bQDgCLCvs6fJ1qCAPd96jQdxPWYIlgn\n12tTzooznw8SHdhF4U9/gTe6FVafTjGi4/uOGzL8LkyHbawvBElZcEipyEaGVujo\nWnThf/CbkrKeIPs5mlFxxlCLMetKGOj0OeImqrO+aNJvWMB/7lA=\n=yaDk\n-----END PGP SIGNATURE-----",
        "payload": "tree aadca608f667f55ebf9e644485c5d12f109870d7\nparent 7bb45e4b7a71e0ff0e2bbeba5367022758efa5d4\nauthor Jonas Schnelli <dev@jonasschnelli.ch> 1546551438 -1000\ncommitter Jonas Schnelli <dev@jonasschnelli.ch> 1546627947 -1000\n\nQt: Fix update headers-count\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e8db6b8044424a6fbb4b0a80acffc8c7fbf6be8b",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/e8db6b8044424a6fbb4b0a80acffc8c7fbf6be8b",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e8db6b8044424a6fbb4b0a80acffc8c7fbf6be8b/comments",
    "author": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "7bb45e4b7a71e0ff0e2bbeba5367022758efa5d4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7bb45e4b7a71e0ff0e2bbeba5367022758efa5d4",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/7bb45e4b7a71e0ff0e2bbeba5367022758efa5d4"
      }
    ],
    "stats": {
      "total": 9,
      "additions": 8,
      "deletions": 1
    },
    "files": [
      {
        "sha": "8ecc33da849cd24d9d5e05bd28e44ab9feecfb6f",
        "filename": "src/qt/modaloverlay.cpp",
        "status": "modified",
        "additions": 7,
        "deletions": 1,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e8db6b8044424a6fbb4b0a80acffc8c7fbf6be8b/src/qt/modaloverlay.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e8db6b8044424a6fbb4b0a80acffc8c7fbf6be8b/src/qt/modaloverlay.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/modaloverlay.cpp?ref=e8db6b8044424a6fbb4b0a80acffc8c7fbf6be8b",
        "patch": "@@ -71,6 +71,7 @@ void ModalOverlay::setKnownBestHeight(int count, const QDateTime& blockDate)\n     if (count > bestHeaderHeight) {\n         bestHeaderHeight = count;\n         bestHeaderDate = blockDate;\n+        UpdateHeaderSyncLabel();\n     }\n }\n \n@@ -136,11 +137,16 @@ void ModalOverlay::tipUpdate(int count, const QDateTime& blockDate, double nVeri\n     if (estimateNumHeadersLeft < HEADER_HEIGHT_DELTA_SYNC && hasBestHeader) {\n         ui->numberOfBlocksLeft->setText(QString::number(bestHeaderHeight - count));\n     } else {\n-        ui->numberOfBlocksLeft->setText(tr(\"Unknown. Syncing Headers (%1)...\").arg(bestHeaderHeight));\n+        UpdateHeaderSyncLabel();\n         ui->expectedTimeLeft->setText(tr(\"Unknown...\"));\n     }\n }\n \n+void ModalOverlay::UpdateHeaderSyncLabel() {\n+    int est_headers_left = bestHeaderDate.secsTo(QDateTime::currentDateTime()) / Params().GetConsensus().nPowTargetSpacing;\n+    ui->numberOfBlocksLeft->setText(tr(\"Unknown. Syncing Headers (%1, %2%)...\").arg(bestHeaderHeight).arg(QString::number(100.0 / (bestHeaderHeight + est_headers_left) * bestHeaderHeight, 'f', 1)));\n+}\n+\n void ModalOverlay::toggleVisibility()\n {\n     showHide(layerIsVisible, true);"
      },
      {
        "sha": "cf8b53f2b35fb0ffe9b6bee29b09b756839bc652",
        "filename": "src/qt/modaloverlay.h",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e8db6b8044424a6fbb4b0a80acffc8c7fbf6be8b/src/qt/modaloverlay.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e8db6b8044424a6fbb4b0a80acffc8c7fbf6be8b/src/qt/modaloverlay.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/modaloverlay.h?ref=e8db6b8044424a6fbb4b0a80acffc8c7fbf6be8b",
        "patch": "@@ -45,6 +45,7 @@ public Q_SLOTS:\n     QVector<QPair<qint64, double> > blockProcessTime;\n     bool layerIsVisible;\n     bool userClosed;\n+    void UpdateHeaderSyncLabel();\n };\n \n #endif // BITCOIN_QT_MODALOVERLAY_H"
      }
    ]
  }
]