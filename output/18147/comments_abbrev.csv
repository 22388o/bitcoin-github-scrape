luke-jr,2020-02-14 17:16:08,"Concept NACK.\n\nLocale-enabled functions *should* be using the user's locale. If we don't want that, we should use locale-independent equivalents.",https://github.com/bitcoin/bitcoin/pull/18147#issuecomment-586382736,586382736,
practicalswift,2020-02-15 16:30:17,"@luke-jr \n\nI'm unable to parse your message.\n\nIn `bitcoin-qt` we have no less than three(!) locales to consider:\n* The C locale (`std::string{setlocale(LC_ALL, nullptr)}`)\n* The global C++ locale (`std::locale{}.name()`)\n* The Qt locale (`QLocale::system().name().toStdString()`)\n\nWhich of these are you suggesting should be set according to what the user has specified in his/hers ",https://github.com/bitcoin/bitcoin/pull/18147#issuecomment-586615984,586615984,
luke-jr,2020-02-15 17:15:44,"@practicalswift The user-specified locale should affect all locale code, so all 3 should be set correctly...",https://github.com/bitcoin/bitcoin/pull/18147#issuecomment-586621537,586621537,
practicalswift,2020-02-15 17:17:00,@luke-jr Are you aware that it does not work like that today?,https://github.com/bitcoin/bitcoin/pull/18147#issuecomment-586621664,586621664,
practicalswift,2020-02-23 10:58:38,@luke-jr Are you aware that we never set the global C++ locale to the user-specified locale in any of the programs we produce?,https://github.com/bitcoin/bitcoin/pull/18147#issuecomment-590056175,590056175,
practicalswift,2020-03-06 15:28:32,@luke-jr Friendly ping. Could you clarify? :)  I'm trying to make sense of the feedback.,https://github.com/bitcoin/bitcoin/pull/18147#issuecomment-595819590,595819590,
DrahtBot,2020-03-09 22:38:05,<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.,https://github.com/bitcoin/bitcoin/pull/18147#issuecomment-596812416,596812416,
laanwj,2020-03-26 15:38:22,"> Locale-enabled functions should be using the user's locale. If we don't want that, we should use locale-independent equivalents.\n\nI agree with Luke-Jr for a change.\n\nWe should move to locale-independent functions for locale-independent formatting and functionality (RPC and command line handling and logging and such), not add more and more layers of these kind of increasingly obscure glob",https://github.com/bitcoin/bitcoin/pull/18147#issuecomment-604501866,604501866,
practicalswift,2020-03-26 16:04:35,"@laanwj \n\nI agree that we should use locale-independent functions, but I think you're misunderstanding what I am suggesting.\n\nI think that the implicit `setlocale(LC_NUMERIC, """")` call we're doing in the current code via Qt is purely unintentional.\n\nAFAICT we rely on `QLocale` everywhere we want locale dependence, so there is no reason to do `setlocale(LC_NUMERIC, """")`.\n\nFrom what ",https://github.com/bitcoin/bitcoin/pull/18147#issuecomment-604517472,604517472,
practicalswift,2020-03-26 21:28:40,Rebased :),https://github.com/bitcoin/bitcoin/pull/18147#issuecomment-604696465,604696465,
sipa,2020-03-26 22:50:19,"@practicalswift My preference (and I suspect that's what @laanwj means as well) is that in the parts of the codebase that are supposed to be locale-independent, simply *no* locale-related operations are present (including locale-dependent formatting, or checks of, or setting of, any global locale). That would make those pieces of code maximally reusable.",https://github.com/bitcoin/bitcoin/pull/18147#issuecomment-604727148,604727148,
practicalswift,2020-03-27 15:30:42,"@sipa I understand that and I agree with that: I've worked extensively with getting rid of the use of locale-dependent functions in our code base :)\n\nWhat I still don't understand is how we would be better off by **opting in** to locale dependence that we do not want.\n\nI don't see how a.) getting rid of usage of locale independent functions and b.) not opting in to locale dependence we do ",https://github.com/bitcoin/bitcoin/pull/18147#issuecomment-605063536,605063536,
practicalswift,2020-03-27 15:39:19,"I guess this is like mitigations in general -- an example:\n\n- a. We want to avoid buffer overflows in our code. We do that by auditing code and fix it as we discover issues.\n- b. If we one day discovered that we were accidentally and globally opted in to a certain subset of buffer overflows via the logic in a third party dependency then we would like to correct that by restoring the default ",https://github.com/bitcoin/bitcoin/pull/18147#issuecomment-605067872,605067872,
practicalswift,2020-04-29 14:40:16,"Closing this issue. Seems like I was unable to gather consensus support for permanently killing off the locale dependency bug class by fixing the root cause (unintended Qt interference with POSIX `LC_NUMERIC` during Qt initialisation) :)\n\nI guess we'll have to live with locale issues also in the future, but now the root cause is documented at least and this PR can be referenced when we hit loc",https://github.com/bitcoin/bitcoin/pull/18147#issuecomment-621254974,621254974,
