[
  {
    "sha": "bab683acb3712726ecfb156c4af1011b1eb20def",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiYWI2ODNhY2IzNzEyNzI2ZWNmYjE1NmM0YWYxMDExYjFlYjIwZGVm",
    "commit": {
      "author": {
        "name": "Dmitry Goncharov",
        "email": "dgoncharov@users.sf.net",
        "date": "2021-06-02T12:04:09Z"
      },
      "committer": {
        "name": "Dmitry Goncharov",
        "email": "dgoncharov@users.sf.net",
        "date": "2021-06-02T12:04:09Z"
      },
      "message": "Disable make builtin rules.\n\nWhen there is no rule to build a target in the makefile, make looks\nfor a builtin rule.\nWhen -r is specified make no longer performs this lookup.\n\nE.g. the following in an excerpt from make -d output.\nHere, make looks for a rule to build 'all'.\n\nConsidering target file 'all'.\n File 'all' does not exist.\n Looking for an implicit rule for 'all'.\n Trying pattern rule with stem 'all'.\n Trying implicit prerequisite 'all.o'.\n Trying pattern rule with stem 'all'.\n Trying implicit prerequisite 'all.c'.\n Trying pattern rule with stem 'all'.\n Trying implicit prerequisite 'all.cc'.\n Trying pattern rule with stem 'all'.\n Trying implicit prerequisite 'all.C'.\n Trying pattern rule with stem 'all'.\n Trying implicit prerequisite 'all.cpp'.\n Trying pattern rule with stem 'all'.\n Trying implicit prerequisite 'all.p'.\n Trying pattern rule with stem 'all'.\n Trying implicit prerequisite 'all.f'.\n...\nMany more lines like this are omitted.\n\nBecause this build system does not use make builtin rules or suffixes,\nthere is no benefit in having builtin rules enabled.\n\nThere are 2 benefits in having builtin rules disabled.\n\n1. Improves performance by eliminating redundant lookups.\n2. Simplifies troubleshooting by reducing the output of make -d or\nmake -p.",
      "tree": {
        "sha": "e86827fd1ed173de2522196e5605887d820eaa1b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e86827fd1ed173de2522196e5605887d820eaa1b"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/bab683acb3712726ecfb156c4af1011b1eb20def",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/bab683acb3712726ecfb156c4af1011b1eb20def",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/bab683acb3712726ecfb156c4af1011b1eb20def",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/bab683acb3712726ecfb156c4af1011b1eb20def/comments",
    "author": {
      "login": "gtkiller",
      "id": 328089,
      "node_id": "MDQ6VXNlcjMyODA4OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/328089?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gtkiller",
      "html_url": "https://github.com/gtkiller",
      "followers_url": "https://api.github.com/users/gtkiller/followers",
      "following_url": "https://api.github.com/users/gtkiller/following{/other_user}",
      "gists_url": "https://api.github.com/users/gtkiller/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gtkiller/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gtkiller/subscriptions",
      "organizations_url": "https://api.github.com/users/gtkiller/orgs",
      "repos_url": "https://api.github.com/users/gtkiller/repos",
      "events_url": "https://api.github.com/users/gtkiller/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gtkiller/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "gtkiller",
      "id": 328089,
      "node_id": "MDQ6VXNlcjMyODA4OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/328089?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gtkiller",
      "html_url": "https://github.com/gtkiller",
      "followers_url": "https://api.github.com/users/gtkiller/followers",
      "following_url": "https://api.github.com/users/gtkiller/following{/other_user}",
      "gists_url": "https://api.github.com/users/gtkiller/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gtkiller/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gtkiller/subscriptions",
      "organizations_url": "https://api.github.com/users/gtkiller/orgs",
      "repos_url": "https://api.github.com/users/gtkiller/repos",
      "events_url": "https://api.github.com/users/gtkiller/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gtkiller/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "e3d644a127e1432fbaf1c9d719edb28301943c60",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e3d644a127e1432fbaf1c9d719edb28301943c60",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/e3d644a127e1432fbaf1c9d719edb28301943c60"
      }
    ],
    "stats": {
      "total": 1,
      "additions": 1,
      "deletions": 0
    },
    "files": [
      {
        "sha": "10bf69579fc07185009fbceed97286bf3ba80105",
        "filename": "depends/Makefile",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/bab683acb3712726ecfb156c4af1011b1eb20def/depends/Makefile",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/bab683acb3712726ecfb156c4af1011b1eb20def/depends/Makefile",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/Makefile?ref=bab683acb3712726ecfb156c4af1011b1eb20def",
        "patch": "@@ -1,4 +1,5 @@\n .NOTPARALLEL :\n+MAKEFLAGS+=-r\n \n # Pattern rule to print variables, e.g. make print-top_srcdir\n print-%:"
      }
    ]
  },
  {
    "sha": "62ff4c34a0c32b3c156d72d81bc608c8e9cffba7",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo2MmZmNGMzNGEwYzMyYjNjMTU2ZDcyZDgxYmM2MDhjOGU5Y2ZmYmE3",
    "commit": {
      "author": {
        "name": "Dmitry Goncharov",
        "email": "dgoncharov@users.sf.net",
        "date": "2021-06-08T20:36:09Z"
      },
      "committer": {
        "name": "Dmitry Goncharov",
        "email": "dgoncharov@users.sf.net",
        "date": "2021-06-08T22:24:24Z"
      },
      "message": "Disable builtin rules and suffixes.\n\nConstruct mflags to ensure -r is not passed down to children.\nSome packages use builtin rules.\n\nThere is no need to handle\n$ make MAKEFLAGS=<value>\nuse case, because this makefile filters out everything from MAKEOVERRIDES,\naside from V=%.\nIf the filtering of MAKEOVERRIDES is removed, then the code which modifies\nMAKEFLAGS and sets mflags should be conditional e.g.\n\nifeq (,$(filter MAKEFLAGS=%,$(MAKEOVERRIDES)))\n# Modify MAKEFLAGS and set mflags here.\nendif",
      "tree": {
        "sha": "99ed1388bdd36fab8cd64434fd8254afc30476ae",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/99ed1388bdd36fab8cd64434fd8254afc30476ae"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/62ff4c34a0c32b3c156d72d81bc608c8e9cffba7",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/62ff4c34a0c32b3c156d72d81bc608c8e9cffba7",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/62ff4c34a0c32b3c156d72d81bc608c8e9cffba7",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/62ff4c34a0c32b3c156d72d81bc608c8e9cffba7/comments",
    "author": {
      "login": "gtkiller",
      "id": 328089,
      "node_id": "MDQ6VXNlcjMyODA4OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/328089?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gtkiller",
      "html_url": "https://github.com/gtkiller",
      "followers_url": "https://api.github.com/users/gtkiller/followers",
      "following_url": "https://api.github.com/users/gtkiller/following{/other_user}",
      "gists_url": "https://api.github.com/users/gtkiller/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gtkiller/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gtkiller/subscriptions",
      "organizations_url": "https://api.github.com/users/gtkiller/orgs",
      "repos_url": "https://api.github.com/users/gtkiller/repos",
      "events_url": "https://api.github.com/users/gtkiller/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gtkiller/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "gtkiller",
      "id": 328089,
      "node_id": "MDQ6VXNlcjMyODA4OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/328089?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gtkiller",
      "html_url": "https://github.com/gtkiller",
      "followers_url": "https://api.github.com/users/gtkiller/followers",
      "following_url": "https://api.github.com/users/gtkiller/following{/other_user}",
      "gists_url": "https://api.github.com/users/gtkiller/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gtkiller/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gtkiller/subscriptions",
      "organizations_url": "https://api.github.com/users/gtkiller/orgs",
      "repos_url": "https://api.github.com/users/gtkiller/repos",
      "events_url": "https://api.github.com/users/gtkiller/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gtkiller/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "bab683acb3712726ecfb156c4af1011b1eb20def",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/bab683acb3712726ecfb156c4af1011b1eb20def",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/bab683acb3712726ecfb156c4af1011b1eb20def"
      }
    ],
    "stats": {
      "total": 22,
      "additions": 18,
      "deletions": 4
    },
    "files": [
      {
        "sha": "2fe5c2c062ebca9d3d381fd4b3b453d2df6cfef7",
        "filename": "depends/Makefile",
        "status": "modified",
        "additions": 15,
        "deletions": 1,
        "changes": 16,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/62ff4c34a0c32b3c156d72d81bc608c8e9cffba7/depends/Makefile",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/62ff4c34a0c32b3c156d72d81bc608c8e9cffba7/depends/Makefile",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/Makefile?ref=62ff4c34a0c32b3c156d72d81bc608c8e9cffba7",
        "patch": "@@ -1,5 +1,4 @@\n .NOTPARALLEL :\n-MAKEFLAGS+=-r\n \n # Pattern rule to print variables, e.g. make print-top_srcdir\n print-%:\n@@ -29,6 +28,21 @@ print-%:\n # this means that sub-makes will be invoked as if:\n #   $(MAKE) A=1 blah blah\n MAKEOVERRIDES := $(filter V=%,$(MAKEOVERRIDES))\n+\n+# Disable builtin rules and suffixes.\n+# Construct mflags to ensure -r is not passed down to children. Some packages\n+# use builtin rules.\n+# Long options which have no short form (--trace, ---warn-undefined-variables)\n+# are present in MAKEFLAGS with both dashes. Filter them out here, to avoid\n+# benign duplication when these options are added again when mflags is\n+# constructed.\n+# After expansion in the recipe mflags will contain all user specified options\n+# and command line variable definitions, but it won't contain the change\n+# introduced here.\n+oldmflags := $(filter-out -%,$(MAKEFLAGS))\n+MAKEFLAGS += -r\n+mflags = MAKEFLAGS=\"$(oldmflags) $(filter -%,$(MAKEFLAGS)) $(MAKEOVERRIDES)\"\n+\n SOURCES_PATH ?= $(BASEDIR)/sources\n WORK_PATH = $(BASEDIR)/work\n BASE_CACHE ?= $(BASEDIR)/built"
      },
      {
        "sha": "eee5b14212f084250dcb6d0c8f52114de4c258ce",
        "filename": "depends/funcs.mk",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/62ff4c34a0c32b3c156d72d81bc608c8e9cffba7/depends/funcs.mk",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/62ff4c34a0c32b3c156d72d81bc608c8e9cffba7/depends/funcs.mk",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/funcs.mk?ref=62ff4c34a0c32b3c156d72d81bc608c8e9cffba7",
        "patch": "@@ -209,17 +209,17 @@ $($(1)_configured): | $($(1)_dependencies) $($(1)_preprocessed)\n \t$(AT)echo Configuring $(1)...\n \t$(AT)rm -rf $(host_prefix); mkdir -p $(host_prefix)/lib; cd $(host_prefix); $(foreach package,$($(1)_all_dependencies), tar --no-same-owner -xf $($(package)_cached); )\n \t$(AT)mkdir -p $$(@D)\n-\t$(AT)+cd $$(@D); $($(1)_config_env) $(call $(1)_config_cmds, $(1))\n+\t$(AT)+cd $$(@D); $$(mflags) $($(1)_config_env) $(call $(1)_config_cmds, $(1))\n \t$(AT)touch $$@\n $($(1)_built): | $($(1)_configured)\n \t$(AT)echo Building $(1)...\n \t$(AT)mkdir -p $$(@D)\n-\t$(AT)+cd $$(@D); $($(1)_build_env) $(call $(1)_build_cmds, $(1))\n+\t$(AT)+cd $$(@D); $$(mflags) $($(1)_build_env) $(call $(1)_build_cmds, $(1))\n \t$(AT)touch $$@\n $($(1)_staged): | $($(1)_built)\n \t$(AT)echo Staging $(1)...\n \t$(AT)mkdir -p $($(1)_staging_dir)/$(host_prefix)\n-\t$(AT)cd $($(1)_build_dir); $($(1)_stage_env) $(call $(1)_stage_cmds, $(1))\n+\t$(AT)cd $($(1)_build_dir); $$(mflags) $($(1)_stage_env) $(call $(1)_stage_cmds, $(1))\n \t$(AT)rm -rf $($(1)_extract_dir)\n \t$(AT)touch $$@\n $($(1)_postprocessed): | $($(1)_staged)"
      }
    ]
  }
]