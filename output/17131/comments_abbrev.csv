hebasto,2019-10-14 07:02:42,"@fjahr  Thank you\n\n> ...  if 0 is given as an argument, the fallback that is being used is the libevent default of 50 seconds...\n\nIs it documented somewhere?",https://github.com/bitcoin/bitcoin/pull/17131#issuecomment-541525141,541525141,
laanwj,2019-10-14 09:49:11,"> Actually adding the feature as described in the help string\n\nIt would be nice if it actually worked. For long operations (such as `getutxosetinfo`) it can be undesirable to have a timeout at all.\n\nThen again, ACK 6810956191f8dd26e918c6991f95dbc1a05af3e9 on fixing the documentation first.\nIt can always be re-added.",https://github.com/bitcoin/bitcoin/pull/17131#issuecomment-541583879,541583879,
MarcoFalke,2019-10-14 12:36:27,According to https://github.com/bitcoin/bitcoin/pull/9903#issuecomment-283937055 it used to work at some point,https://github.com/bitcoin/bitcoin/pull/17131#issuecomment-541652292,541652292,
fjahr,2019-10-14 21:56:17,"Unfortunately, there is nothing on this in the docs and due to this [issue of libevent](https://github.com/libevent/libevent/issues/87) I guess they were not aware of this behavior either. This code is now changed in master but not in any release, [here it is in the code of 2.1.11 which is the latest stable release](https://github.com/libevent/libevent/blob/4c908dde58ef780eeefcc9df4db3063ca62ea862",https://github.com/bitcoin/bitcoin/pull/17131#issuecomment-541945224,541945224,
laanwj,2019-10-15 07:05:04,"I also have a vague recollection that it used to work at some point. As a workaround I guess we could change it to give libevent an absurd timeout of say, four years if the value `0` is provided.",https://github.com/bitcoin/bitcoin/pull/17131#issuecomment-542070430,542070430,
hebasto,2019-10-15 07:22:40,"> Is it documented somewhere?\n\n- https://github.com/libevent/libevent/blob/dda8968c71f684235abb3cf6c26810751bf2c31a/http-internal.h#L19\n\n```\n#define HTTP_READ_TIMEOUT	50\n```\n\n- https://github.com/libevent/libevent/blob/dda8968c71f684235abb3cf6c26810751bf2c31a/include/event2/http.h#L601-L604\n\n```\n * Connection also has default timeouts for the following events:\n * - connect ",https://github.com/bitcoin/bitcoin/pull/17131#issuecomment-542076334,542076334,
fjahr,2019-10-15 12:26:20,Changed to fix the feature by setting timeout to 5 years when 0 is passed to `-rpcclienttimeout`.,https://github.com/bitcoin/bitcoin/pull/17131#issuecomment-542186027,542186027,
fjahr,2019-10-15 16:04:21,Added comment hint to `libevent` work-around and applied improvement suggestions from @hebasto ,https://github.com/bitcoin/bitcoin/pull/17131#issuecomment-542287072,542287072,
MarcoFalke,2019-10-15 16:06:10,unsigned ACK b3b26e149c34fee9c7ae8548c6e547ec6254b441,https://github.com/bitcoin/bitcoin/pull/17131#issuecomment-542287858,542287858,
hebasto,2019-10-15 12:30:09,"```suggestion\n        constexpr int YEAR_IN_SECONDS = 31556952; // Average length of year in Gregorian calendar\n```",https://github.com/bitcoin/bitcoin/pull/17131#discussion_r334920403,334920403,src/bitcoin-cli.cpp
hebasto,2019-10-15 12:30:40,"```suggestion\n        evhttp_connection_set_timeout(evcon.get(), 5 * YEAR_IN_SECONDS);\n```",https://github.com/bitcoin/bitcoin/pull/17131#discussion_r334920657,334920657,src/bitcoin-cli.cpp
hebasto,2019-10-15 12:33:13,"```suggestion\n    const int timeout = gArgs.GetArg(""-rpcclienttimeout"", DEFAULT_HTTP_CLIENT_TIMEOUT);\n```",https://github.com/bitcoin/bitcoin/pull/17131#discussion_r334921817,334921817,src/bitcoin-cli.cpp
laanwj,2019-10-15 12:33:50,maybe add a comment that this is a workaround for libevent-http having no way to set an infinite timeout,https://github.com/bitcoin/bitcoin/pull/17131#discussion_r334922100,334922100,src/bitcoin-cli.cpp
fjahr,2019-10-15 16:02:27,done,https://github.com/bitcoin/bitcoin/pull/17131#discussion_r335043058,335043058,src/bitcoin-cli.cpp
fjahr,2019-10-15 16:02:35,done,https://github.com/bitcoin/bitcoin/pull/17131#discussion_r335043132,335043132,src/bitcoin-cli.cpp
fjahr,2019-10-15 16:02:44,done,https://github.com/bitcoin/bitcoin/pull/17131#discussion_r335043217,335043217,src/bitcoin-cli.cpp
fjahr,2019-10-15 16:02:56,done,https://github.com/bitcoin/bitcoin/pull/17131#discussion_r335043306,335043306,src/bitcoin-cli.cpp
