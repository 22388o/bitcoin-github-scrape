laanwj,2018-04-12T05:57:32Z,"Concept ACK, splitting the logging functionality out of util makes sense, util.cpp is large, haphazard and this is a clearly distinguishable concern from the rest.\n",https://github.com/bitcoin/bitcoin/pull/12954#issuecomment-380687818,380687818,
MarcoFalke,2018-04-13T13:51:30Z,Concept ACK. Needs rebase,https://github.com/bitcoin/bitcoin/pull/12954#issuecomment-381141887,381141887,
MarcoFalke,2018-04-17T15:26:52Z,"Needs rebase again. (Since this has some Concept ACKs, but is somewhat largish, it might be easier to merge in two steps. First the move-only commit in a separate pull request and then the refactoring in this pull request)",https://github.com/bitcoin/bitcoin/pull/12954#issuecomment-382034468,382034468,
jnewbery,2018-04-30T13:17:37Z,utACK 8c2d695c4. Only difference is changing to range based for loops per https://github.com/bitcoin/bitcoin/pull/12954#discussion_r184163863,https://github.com/bitcoin/bitcoin/pull/12954#issuecomment-385395179,385395179,
sipa,2018-05-01T02:10:51Z,utACK 8c2d695c4a45bdd9378c7970b0fcba6e1efc01f9. Nice to see this encapsulated.,https://github.com/bitcoin/bitcoin/pull/12954#issuecomment-385582132,385582132,
sipa,2018-04-16T02:32:19Z,"I think this should move to logging as well, so the cyclic dependency between logging and util can be avoided.",https://github.com/bitcoin/bitcoin/pull/12954#discussion_r181610827,181610827,src/util.h
jimpo,2018-04-16T02:47:39Z,"`LogPrintf` is also used in TraceThread, and I don't think either of them actually belong in logging (the whole point of this PR is to create a more cohesive separation). I can very easily imagine another method that gets added to util.h in the future requiring logging as well.\n\nThe dependency isn't really cyclic -- `logging.cpp` includes `util.h`, and `util.h` includes `logging.h`, but `loggi",https://github.com/bitcoin/bitcoin/pull/12954#discussion_r181612082,181612082,src/util.h
sipa,2018-04-16T06:04:15Z,"My view is that you should always treat the .h and the .cpp file as one unit. While this may indeed not be a cyclic dependency for the compiler, it is certainly one between the two modules semantically: logging can't work without util, and util can't work without logging. Finding out why that is the case helps creating a cleaner separation.\n\nYou're right that util is going to depend on logging",https://github.com/bitcoin/bitcoin/pull/12954#discussion_r181628843,181628843,src/util.h
Empact,2018-04-20T03:03:42Z,"Last I looked, when reviewing #13021, I saw another approach to solving the cyclic dependency is to include utiltime.h in logging.cpp and splitting out args and path handling from util.h. Didn’t go all the way to implementing that but would be happy to as a follow-on to #13021.",https://github.com/bitcoin/bitcoin/pull/12954#discussion_r182935595,182935595,src/util.h
Empact,2018-04-20T03:08:03Z,"Lol, didn’t finish reading your comment @sipa. Anyway I’m for it.",https://github.com/bitcoin/bitcoin/pull/12954#discussion_r182936010,182936010,src/util.h
jimpo,2018-04-20T08:16:24Z,Fixed with d903273cf8e51d2789ba8a88c608a66e63dcdc14.,https://github.com/bitcoin/bitcoin/pull/12954#discussion_r182976829,182976829,src/util.h
jnewbery,2018-04-20T14:29:18Z,"Note that this maintains the old (broken) behaviour:\n- two threads are running. Thread A logs a line that doesn't terminate with a newline (ie a 'continuing' log)\n- thread B then logs a line. This is treated as a 'continuation' log of thread A's previous log, and is printed on the same line, without a timestamp\n- thread A's 'continuation' log is printed on a new line, with a timestamp\n\nN",https://github.com/bitcoin/bitcoin/pull/12954#discussion_r183068634,183068634,src/logging.h
jnewbery,2018-04-20T15:13:58Z,In commit _util: Establish global logger object._ : any reason to exclude `fLogIPs` from `g_logger`?,https://github.com/bitcoin/bitcoin/pull/12954#discussion_r183082956,183082956,src/logging.h
MarcoFalke,2018-04-21T21:17:11Z,"Unrelated nit: Could change `int` to `size_t` here, so that it doesn't break when someone changes `RECENT_DEBUG_HISTORY_SIZE` to 5GB.",https://github.com/bitcoin/bitcoin/pull/12954#discussion_r183219507,183219507,src/logging.cpp
jimpo,2018-04-23T06:50:51Z,"It's not actually used by the logger, it's just used in the net code. Arguably it should live there instead.",https://github.com/bitcoin/bitcoin/pull/12954#discussion_r183289911,183289911,src/logging.h
jamesob,2018-04-25T18:31:23Z,"nit: seems like you could phrase this more simply as\n```cpp\nfor (CLogCategoryDesc& cat : LogCategories) { ... }\n```\nThere doesn't seem to be a need to have the index on hand.",https://github.com/bitcoin/bitcoin/pull/12954#discussion_r184163863,184163863,src/logging.cpp
jimpo,2018-04-30T03:58:04Z,"Nice, fixed. Also gets rid of the dependency of logging on utilstrencodings.",https://github.com/bitcoin/bitcoin/pull/12954#discussion_r184908897,184908897,src/logging.cpp
