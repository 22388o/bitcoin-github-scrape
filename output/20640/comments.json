[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/743962460",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20640#issuecomment-743962460",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20640",
    "id": 743962460,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0Mzk2MjQ2MA==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-13T06:45:06Z",
    "updated_at": "2021-12-01T08:04:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#23497](https://github.com/bitcoin/bitcoin/pull/23497) (Add `src/node/` and `src/wallet/` code to `node::` and `wallet::` namespaces by ryanofsky)\n* [#23367](https://github.com/bitcoin/bitcoin/pull/23367) (Optimize coin selection by dropping BnB upper limit by S3RK)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/743962460/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/751506956",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20640#issuecomment-751506956",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20640",
    "id": 751506956,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1MTUwNjk1Ng==",
    "user": {
      "login": "theStack",
      "id": 91535,
      "node_id": "MDQ6VXNlcjkxNTM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theStack",
      "html_url": "https://github.com/theStack",
      "followers_url": "https://api.github.com/users/theStack/followers",
      "following_url": "https://api.github.com/users/theStack/following{/other_user}",
      "gists_url": "https://api.github.com/users/theStack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theStack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
      "organizations_url": "https://api.github.com/users/theStack/orgs",
      "repos_url": "https://api.github.com/users/theStack/repos",
      "events_url": "https://api.github.com/users/theStack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theStack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-27T19:29:22Z",
    "updated_at": "2020-12-27T19:29:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "Force-pushed with the proposed changes by @pox (see https://github.com/bitcoin/bitcoin/pull/20640#discussion_r546194751), introducing new constants `RANDOM_CHANGE_POSITION` to be used as second parameter for `CWallet::CreateTransaction`.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/751506956/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/751575553",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20640#issuecomment-751575553",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20640",
    "id": 751575553,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1MTU3NTU1Mw==",
    "user": {
      "login": "pox",
      "id": 47615825,
      "node_id": "MDQ6VXNlcjQ3NjE1ODI1",
      "avatar_url": "https://avatars.githubusercontent.com/u/47615825?u=6e0afc1bfb95d303c022eebf86f7ad3f017db2f0&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pox",
      "html_url": "https://github.com/pox",
      "followers_url": "https://api.github.com/users/pox/followers",
      "following_url": "https://api.github.com/users/pox/following{/other_user}",
      "gists_url": "https://api.github.com/users/pox/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pox/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pox/subscriptions",
      "organizations_url": "https://api.github.com/users/pox/orgs",
      "repos_url": "https://api.github.com/users/pox/repos",
      "events_url": "https://api.github.com/users/pox/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pox/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-28T05:02:26Z",
    "updated_at": "2020-12-28T05:02:26Z",
    "author_association": "NONE",
    "body": "reACK 5865c38\r\n\ud83d\ude4f",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/751575553/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/752754743",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20640#issuecomment-752754743",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20640",
    "id": 752754743,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1Mjc1NDc0Mw==",
    "user": {
      "login": "theStack",
      "id": 91535,
      "node_id": "MDQ6VXNlcjkxNTM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theStack",
      "html_url": "https://github.com/theStack",
      "followers_url": "https://api.github.com/users/theStack/followers",
      "following_url": "https://api.github.com/users/theStack/following{/other_user}",
      "gists_url": "https://api.github.com/users/theStack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theStack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
      "organizations_url": "https://api.github.com/users/theStack/orgs",
      "repos_url": "https://api.github.com/users/theStack/repos",
      "events_url": "https://api.github.com/users/theStack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theStack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-30T20:52:30Z",
    "updated_at": "2020-12-30T20:52:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "Force-pushed with changes [as suggested by practicalswift](https://github.com/bitcoin/bitcoin/pull/20640#discussion_r549173268), using explicit datatype `std::optional<CreatedTransactionalResult>` rather instead of `auto` for storing return values of `CreateTransaction{Internal}()`. Should be straight-forward to re-review, see [range-diff](https://github.com/bitcoin/bitcoin/compare/5865c38c6a3dd6a98ff3d03ad5e49c550db49a21..c32e2b1ccd1145082c29d80e62affa66e246e2fc).",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/752754743/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/787552800",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20640#issuecomment-787552800",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20640",
    "id": 787552800,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4NzU1MjgwMA==",
    "user": {
      "login": "theStack",
      "id": 91535,
      "node_id": "MDQ6VXNlcjkxNTM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theStack",
      "html_url": "https://github.com/theStack",
      "followers_url": "https://api.github.com/users/theStack/followers",
      "following_url": "https://api.github.com/users/theStack/following{/other_user}",
      "gists_url": "https://api.github.com/users/theStack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theStack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
      "organizations_url": "https://api.github.com/users/theStack/orgs",
      "repos_url": "https://api.github.com/users/theStack/repos",
      "events_url": "https://api.github.com/users/theStack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theStack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-01T00:11:11Z",
    "updated_at": "2021-03-01T00:11:11Z",
    "author_association": "CONTRIBUTOR",
    "body": "Rebased on master.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/787552800/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/811327725",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20640#issuecomment-811327725",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20640",
    "id": 811327725,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxMTMyNzcyNQ==",
    "user": {
      "login": "theStack",
      "id": 91535,
      "node_id": "MDQ6VXNlcjkxNTM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theStack",
      "html_url": "https://github.com/theStack",
      "followers_url": "https://api.github.com/users/theStack/followers",
      "following_url": "https://api.github.com/users/theStack/following{/other_user}",
      "gists_url": "https://api.github.com/users/theStack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theStack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
      "organizations_url": "https://api.github.com/users/theStack/orgs",
      "repos_url": "https://api.github.com/users/theStack/repos",
      "events_url": "https://api.github.com/users/theStack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theStack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-03-31T18:38:38Z",
    "updated_at": "2021-03-31T18:38:38Z",
    "author_association": "CONTRIBUTOR",
    "body": "Rebased on master and changed code to return uninitialized values explicitely via `return std::nullopt` rather than `return {}` (see https://github.com/bitcoin/bitcoin/pull/21498, https://github.com/bitcoin/bitcoin/pull/21415#issuecomment-800236640 for further explanation why this is preferred).",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/811327725/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/850823401",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20640#issuecomment-850823401",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20640",
    "id": 850823401,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1MDgyMzQwMQ==",
    "user": {
      "login": "theStack",
      "id": 91535,
      "node_id": "MDQ6VXNlcjkxNTM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theStack",
      "html_url": "https://github.com/theStack",
      "followers_url": "https://api.github.com/users/theStack/followers",
      "following_url": "https://api.github.com/users/theStack/following{/other_user}",
      "gists_url": "https://api.github.com/users/theStack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theStack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
      "organizations_url": "https://api.github.com/users/theStack/orgs",
      "repos_url": "https://api.github.com/users/theStack/repos",
      "events_url": "https://api.github.com/users/theStack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theStack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-29T12:17:43Z",
    "updated_at": "2021-05-29T12:17:43Z",
    "author_association": "CONTRIBUTOR",
    "body": "Rebased on master.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/850823401/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/857817383",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20640#issuecomment-857817383",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20640",
    "id": 857817383,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1NzgxNzM4Mw==",
    "user": {
      "login": "theStack",
      "id": 91535,
      "node_id": "MDQ6VXNlcjkxNTM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theStack",
      "html_url": "https://github.com/theStack",
      "followers_url": "https://api.github.com/users/theStack/followers",
      "following_url": "https://api.github.com/users/theStack/following{/other_user}",
      "gists_url": "https://api.github.com/users/theStack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theStack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
      "organizations_url": "https://api.github.com/users/theStack/orgs",
      "repos_url": "https://api.github.com/users/theStack/repos",
      "events_url": "https://api.github.com/users/theStack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theStack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-09T15:44:18Z",
    "updated_at": "2021-06-09T15:44:18Z",
    "author_association": "CONTRIBUTOR",
    "body": "Rebased on master again. (This time it was a bit more complex, as the involved methods have moved from `wallet/wallet.cpp` to `wallet/spend.cpp`).",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/857817383/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/917193358",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20640#issuecomment-917193358",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20640",
    "id": 917193358,
    "node_id": "IC_kwDOABII5842q0KO",
    "user": {
      "login": "theStack",
      "id": 91535,
      "node_id": "MDQ6VXNlcjkxNTM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theStack",
      "html_url": "https://github.com/theStack",
      "followers_url": "https://api.github.com/users/theStack/followers",
      "following_url": "https://api.github.com/users/theStack/following{/other_user}",
      "gists_url": "https://api.github.com/users/theStack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theStack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
      "organizations_url": "https://api.github.com/users/theStack/orgs",
      "repos_url": "https://api.github.com/users/theStack/repos",
      "events_url": "https://api.github.com/users/theStack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theStack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-10T20:31:42Z",
    "updated_at": "2021-09-10T20:31:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "Rebased on master.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/917193358/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/954310439",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20640#issuecomment-954310439",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20640",
    "id": 954310439,
    "node_id": "IC_kwDOABII58444Z8n",
    "user": {
      "login": "theStack",
      "id": 91535,
      "node_id": "MDQ6VXNlcjkxNTM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theStack",
      "html_url": "https://github.com/theStack",
      "followers_url": "https://api.github.com/users/theStack/followers",
      "following_url": "https://api.github.com/users/theStack/following{/other_user}",
      "gists_url": "https://api.github.com/users/theStack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theStack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
      "organizations_url": "https://api.github.com/users/theStack/orgs",
      "repos_url": "https://api.github.com/users/theStack/repos",
      "events_url": "https://api.github.com/users/theStack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theStack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-29T00:08:02Z",
    "updated_at": "2021-10-29T00:08:02Z",
    "author_association": "CONTRIBUTOR",
    "body": "Rebased on master again.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/954310439/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/546194751",
    "pull_request_review_id": 555918142,
    "id": 546194751,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjE5NDc1MQ==",
    "diff_hunk": "@@ -215,21 +215,19 @@ Result CreateRateBumpTransaction(CWallet& wallet, const uint256& txid, const CCo\n     // We cannot source new unconfirmed inputs(bip125 rule 2)\n     new_coin_control.m_min_depth = 1;\n \n-    CTransactionRef tx_new;\n-    CAmount fee_ret;\n-    int change_pos_in_out = -1; // No requested location for change\n     bilingual_str fail_reason;\n     FeeCalculation fee_calc_out;\n-    if (!wallet.CreateTransaction(recipients, tx_new, fee_ret, change_pos_in_out, fail_reason, new_coin_control, fee_calc_out, false)) {\n+    auto txr = wallet.CreateTransaction(recipients, /* No requested location for change */ -1, fail_reason, new_coin_control, fee_calc_out, false);",
    "path": "src/wallet/feebumper.cpp",
    "position": null,
    "original_position": 10,
    "commit_id": "d0d89f0d69c5aa338152935f46f3c4abe77b3f4c",
    "original_commit_id": "8e9266fb7ec8577c989d09937f3de958b2a0332f",
    "user": {
      "login": "pox",
      "id": 47615825,
      "node_id": "MDQ6VXNlcjQ3NjE1ODI1",
      "avatar_url": "https://avatars.githubusercontent.com/u/47615825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pox",
      "html_url": "https://github.com/pox",
      "followers_url": "https://api.github.com/users/pox/followers",
      "following_url": "https://api.github.com/users/pox/following{/other_user}",
      "gists_url": "https://api.github.com/users/pox/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pox/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pox/subscriptions",
      "organizations_url": "https://api.github.com/users/pox/orgs",
      "repos_url": "https://api.github.com/users/pox/repos",
      "events_url": "https://api.github.com/users/pox/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pox/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "While it's arguably not, strictly speaking, part of the proposed change, the comment about the change position parameter that's being maintained here is a bit misleading. This is a bit nit-picky, so bare with me please, but I think it's more appropriate to:\r\n1. Use a const instead of inline comment in order to convey the meaning. e.g. `const int RANDOM_CHANGE_POSITION = -1`). This value is used more than once, so another reason to use a const.\r\n2. Convey that passing `-1` means \"actively set the position to a random one\" rather than \"no requested location\" which doesn't really let the reader know what's going to happen.",
    "created_at": "2020-12-19T05:27:43Z",
    "updated_at": "2021-03-31T18:35:30Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20640#discussion_r546194751",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20640",
    "author_association": "NONE",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/546194751"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/20640#discussion_r546194751"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20640"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/546194751/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 220,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/546195248",
    "pull_request_review_id": 555918142,
    "id": 546195248,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjE5NTI0OA==",
    "diff_hunk": "@@ -3099,42 +3103,34 @@ bool CWallet::CreateTransactionInternal(\n               feeCalc.est.fail.start, feeCalc.est.fail.end,\n               (feeCalc.est.fail.totalConfirmed + feeCalc.est.fail.inMempool + feeCalc.est.fail.leftMempool) > 0.0 ? 100 * feeCalc.est.fail.withinTarget / (feeCalc.est.fail.totalConfirmed + feeCalc.est.fail.inMempool + feeCalc.est.fail.leftMempool) : 0.0,\n               feeCalc.est.fail.withinTarget, feeCalc.est.fail.totalConfirmed, feeCalc.est.fail.inMempool, feeCalc.est.fail.leftMempool);\n-    return true;\n+    return CreatedTransactionResult(tx, nFeeRet, nChangePosInOut);\n }\n \n-bool CWallet::CreateTransaction(\n+std::optional<CreatedTransactionResult> CWallet::CreateTransaction(\n         const std::vector<CRecipient>& vecSend,\n-        CTransactionRef& tx,\n-        CAmount& nFeeRet,\n-        int& nChangePosInOut,\n+        int nChangePos,\n         bilingual_str& error,\n         const CCoinControl& coin_control,\n         FeeCalculation& fee_calc_out,\n         bool sign)\n {\n-    int nChangePosIn = nChangePosInOut;\n-    Assert(!tx); // tx is an out-param. TODO change the return type from bool to tx (or nullptr)\n-    bool res = CreateTransactionInternal(vecSend, tx, nFeeRet, nChangePosInOut, error, coin_control, fee_calc_out, sign);\n+    auto txr_ungrouped = CreateTransactionInternal(vecSend, nChangePos, error, coin_control, fee_calc_out, sign);\n+    if (!txr_ungrouped) return {};\n     // try with avoidpartialspends unless it's enabled already\n-    if (res && nFeeRet > 0 /* 0 means non-functional fee rate estimation */ && m_max_aps_fee > -1 && !coin_control.m_avoid_partial_spends) {\n+    if (txr_ungrouped->fee > 0 /* 0 means non-functional fee rate estimation */ && m_max_aps_fee > -1 && !coin_control.m_avoid_partial_spends) {\n         CCoinControl tmp_cc = coin_control;\n         tmp_cc.m_avoid_partial_spends = true;\n-        CAmount nFeeRet2;\n-        CTransactionRef tx2;\n-        int nChangePosInOut2 = nChangePosIn;\n         bilingual_str error2; // fired and forgotten; if an error occurs, we discard the results\n-        if (CreateTransactionInternal(vecSend, tx2, nFeeRet2, nChangePosInOut2, error2, tmp_cc, fee_calc_out, sign)) {\n+        auto txr_grouped = CreateTransactionInternal(vecSend, nChangePos, error2, tmp_cc, fee_calc_out, sign);\n+        if (txr_grouped) {\n             // if fee of this alternative one is within the range of the max fee, we use this one\n-            const bool use_aps = nFeeRet2 <= nFeeRet + m_max_aps_fee;\n-            WalletLogPrintf(\"Fee non-grouped = %lld, grouped = %lld, using %s\\n\", nFeeRet, nFeeRet2, use_aps ? \"grouped\" : \"non-grouped\");\n-            if (use_aps) {\n-                tx = tx2;\n-                nFeeRet = nFeeRet2;\n-                nChangePosInOut = nChangePosInOut2;\n-            }\n+            const bool use_aps = txr_grouped->fee <= txr_ungrouped->fee + m_max_aps_fee;",
    "path": "src/wallet/wallet.cpp",
    "position": null,
    "original_position": 208,
    "commit_id": "d0d89f0d69c5aa338152935f46f3c4abe77b3f4c",
    "original_commit_id": "8e9266fb7ec8577c989d09937f3de958b2a0332f",
    "user": {
      "login": "pox",
      "id": 47615825,
      "node_id": "MDQ6VXNlcjQ3NjE1ODI1",
      "avatar_url": "https://avatars.githubusercontent.com/u/47615825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pox",
      "html_url": "https://github.com/pox",
      "followers_url": "https://api.github.com/users/pox/followers",
      "following_url": "https://api.github.com/users/pox/following{/other_user}",
      "gists_url": "https://api.github.com/users/pox/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pox/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pox/subscriptions",
      "organizations_url": "https://api.github.com/users/pox/orgs",
      "repos_url": "https://api.github.com/users/pox/repos",
      "events_url": "https://api.github.com/users/pox/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pox/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This is a lot more readable indeed! \ud83d\udc4d",
    "created_at": "2020-12-19T05:33:54Z",
    "updated_at": "2021-03-31T18:35:30Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20640#discussion_r546195248",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20640",
    "author_association": "NONE",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/546195248"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/20640#discussion_r546195248"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20640"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/546195248/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 3132,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/549154793",
    "pull_request_review_id": 558954188,
    "id": 549154793,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTE1NDc5Mw==",
    "diff_hunk": "@@ -215,21 +215,19 @@ Result CreateRateBumpTransaction(CWallet& wallet, const uint256& txid, const CCo\n     // We cannot source new unconfirmed inputs(bip125 rule 2)\n     new_coin_control.m_min_depth = 1;\n \n-    CTransactionRef tx_new;\n-    CAmount fee_ret;\n-    int change_pos_in_out = -1; // No requested location for change\n     bilingual_str fail_reason;\n     FeeCalculation fee_calc_out;\n-    if (!wallet.CreateTransaction(recipients, tx_new, fee_ret, change_pos_in_out, fail_reason, new_coin_control, fee_calc_out, false)) {\n+    auto txr = wallet.CreateTransaction(recipients, /* No requested location for change */ -1, fail_reason, new_coin_control, fee_calc_out, false);",
    "path": "src/wallet/feebumper.cpp",
    "position": null,
    "original_position": 10,
    "commit_id": "d0d89f0d69c5aa338152935f46f3c4abe77b3f4c",
    "original_commit_id": "8e9266fb7ec8577c989d09937f3de958b2a0332f",
    "user": {
      "login": "theStack",
      "id": 91535,
      "node_id": "MDQ6VXNlcjkxNTM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theStack",
      "html_url": "https://github.com/theStack",
      "followers_url": "https://api.github.com/users/theStack/followers",
      "following_url": "https://api.github.com/users/theStack/following{/other_user}",
      "gists_url": "https://api.github.com/users/theStack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theStack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
      "organizations_url": "https://api.github.com/users/theStack/orgs",
      "repos_url": "https://api.github.com/users/theStack/repos",
      "events_url": "https://api.github.com/users/theStack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theStack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Thanks a lot for reviewing, good point! I probably was a bit over-enthusiastic in getting rid of as many variables as possible before the call to `CreateTransaction` ;-) Introducing a `RANDOM_CHANGE_POSITION` constant makes a lot of sense to me, see latest force-push of the second commit. Not sure yet if putting the constant into the header is a good idea, as it is only used for one single method and hence many modules that don't need the constant would see it as well. Probably a candidate for a follow-up PR?",
    "created_at": "2020-12-27T19:26:21Z",
    "updated_at": "2021-03-31T18:35:30Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20640#discussion_r549154793",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20640",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/549154793"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/20640#discussion_r549154793"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20640"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/549154793/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 220,
    "side": "RIGHT",
    "in_reply_to_id": 546194751
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/549173268",
    "pull_request_review_id": 558963146,
    "id": 549173268,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTE3MzI2OA==",
    "diff_hunk": "@@ -215,21 +215,20 @@ Result CreateRateBumpTransaction(CWallet& wallet, const uint256& txid, const CCo\n     // We cannot source new unconfirmed inputs(bip125 rule 2)\n     new_coin_control.m_min_depth = 1;\n \n-    CTransactionRef tx_new;\n-    CAmount fee_ret;\n-    int change_pos_in_out = -1; // No requested location for change\n+    constexpr int RANDOM_CHANGE_POSITION = -1;\n     bilingual_str fail_reason;\n     FeeCalculation fee_calc_out;\n-    if (!wallet.CreateTransaction(recipients, tx_new, fee_ret, change_pos_in_out, fail_reason, new_coin_control, fee_calc_out, false)) {\n+    auto txr = wallet.CreateTransaction(recipients, RANDOM_CHANGE_POSITION, fail_reason, new_coin_control, fee_calc_out, false);",
    "path": "src/wallet/feebumper.cpp",
    "position": null,
    "original_position": 11,
    "commit_id": "d0d89f0d69c5aa338152935f46f3c4abe77b3f4c",
    "original_commit_id": "5865c38c6a3dd6a98ff3d03ad5e49c550db49a21",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Nit: Using `auto` here obscures the fact that `txr` is an optional. I think being explicit about the optionality is better in order to avoid mistakes in the future.\r\n\r\nApplies throughout this PR.",
    "created_at": "2020-12-27T22:50:30Z",
    "updated_at": "2021-03-31T18:35:30Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20640#discussion_r549173268",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20640",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/549173268"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/20640#discussion_r549173268"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20640"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/549173268/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 221,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550322819",
    "pull_request_review_id": 560195916,
    "id": 550322819,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDMyMjgxOQ==",
    "diff_hunk": "@@ -215,21 +215,20 @@ Result CreateRateBumpTransaction(CWallet& wallet, const uint256& txid, const CCo\n     // We cannot source new unconfirmed inputs(bip125 rule 2)\n     new_coin_control.m_min_depth = 1;\n \n-    CTransactionRef tx_new;\n-    CAmount fee_ret;\n-    int change_pos_in_out = -1; // No requested location for change\n+    constexpr int RANDOM_CHANGE_POSITION = -1;\n     bilingual_str fail_reason;\n     FeeCalculation fee_calc_out;\n-    if (!wallet.CreateTransaction(recipients, tx_new, fee_ret, change_pos_in_out, fail_reason, new_coin_control, fee_calc_out, false)) {\n+    auto txr = wallet.CreateTransaction(recipients, RANDOM_CHANGE_POSITION, fail_reason, new_coin_control, fee_calc_out, false);",
    "path": "src/wallet/feebumper.cpp",
    "position": null,
    "original_position": 11,
    "commit_id": "d0d89f0d69c5aa338152935f46f3c4abe77b3f4c",
    "original_commit_id": "5865c38c6a3dd6a98ff3d03ad5e49c550db49a21",
    "user": {
      "login": "theStack",
      "id": 91535,
      "node_id": "MDQ6VXNlcjkxNTM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theStack",
      "html_url": "https://github.com/theStack",
      "followers_url": "https://api.github.com/users/theStack/followers",
      "following_url": "https://api.github.com/users/theStack/following{/other_user}",
      "gists_url": "https://api.github.com/users/theStack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theStack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
      "organizations_url": "https://api.github.com/users/theStack/orgs",
      "repos_url": "https://api.github.com/users/theStack/repos",
      "events_url": "https://api.github.com/users/theStack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theStack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Thanks for reviewing! Agree that being explicit is better here. Done.",
    "created_at": "2020-12-30T20:47:52Z",
    "updated_at": "2021-03-31T18:35:30Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20640#discussion_r550322819",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20640",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550322819"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/20640#discussion_r550322819"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20640"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/550322819/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 221,
    "side": "RIGHT",
    "in_reply_to_id": 549173268
  }
]