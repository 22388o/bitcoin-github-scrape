MarcoFalke,2018-05-11T14:42:14Z,"I can't see any downside, so Concept ACK.",https://github.com/bitcoin/bitcoin/pull/13215#issuecomment-388384443,388384443,
promag,2018-05-11T14:45:10Z,Can you elaborate the motivation behind this change?,https://github.com/bitcoin/bitcoin/pull/13215#issuecomment-388385277,388385277,
MarcoFalke,2018-05-11T14:54:25Z,"@promag I presume the motivation is that gitian will (soon) use bionic, so having a similar configuration run on travis isn't that bad. Also, it untangles us a bit from the travis environments and changes, as we use the vanilla bionic docker. So reproducing issues could potentially be easier or harder because it uses docker ...\n\nI have no strong opinion based on that, but since the new qt ""req",https://github.com/bitcoin/bitcoin/pull/13215#issuecomment-388388087,388388087,
ken2812221,2018-05-11T14:57:00Z,">Can you elaborate the motivation behind this change?\n\nWe will bump our gitian build system to Ubuntu 18.04 since 0.17, so I think we might need to have the same build environment as the gitian build. Also, once we've merged the back-compat code, we could run the executable both on 14.04 and 18.04 to test if the back-compat code would work.",https://github.com/bitcoin/bitcoin/pull/13215#issuecomment-388388835,388388835,
jamesob,2018-05-11T14:59:47Z,"This will likely fix the build on https://github.com/bitcoin/bitcoin/pull/12873 by (inadvertently) using a more recent version of SSL that doesn't cause the deadlock warning system to flare up.\n\nThe job duration times don't seem adversely affected by this change.\n\nConcept ACK",https://github.com/bitcoin/bitcoin/pull/13215#issuecomment-388389680,388389680,
MarcoFalke,2018-05-11T15:15:19Z,Please remove the [WIP] from the commit title when this is ready for review.,https://github.com/bitcoin/bitcoin/pull/13215#issuecomment-388394325,388394325,
jamesob,2018-05-11T16:38:41Z,utACK https://github.com/bitcoin/bitcoin/pull/13215/commits/9e7924c0cb0995f8df6cca5d04b576e5b56038a9,https://github.com/bitcoin/bitcoin/pull/13215#issuecomment-388417791,388417791,
ken2812221,2018-05-12T00:36:41Z,"> Maybe it should also cache docker layers? Similar to http://circleci.com/docs/1.0/docker/#caching-docker-layers.\n\nI've tested this, `docker save` took more time than `apt install`, so we don't need to cache it.",https://github.com/bitcoin/bitcoin/pull/13215#issuecomment-388517252,388517252,
promag,2018-05-12T09:41:57Z,"@ken2812221 indeed in travis it's fast.\n\nutACK 9e7924c.",https://github.com/bitcoin/bitcoin/pull/13215#issuecomment-388543366,388543366,
laanwj,2018-05-14T13:54:18Z,utACK 9e7924c0cb0995f8df6cca5d04b576e5b56038a9,https://github.com/bitcoin/bitcoin/pull/13215#issuecomment-388824815,388824815,
MarcoFalke,2018-05-17T02:47:48Z,"Tested ACK 9e7924c0cb0995f8df6cca5d04b576e5b56038a9 (after fixing the failure)\n\nAlso left a couple of nits in the process, you can safely ignore them.",https://github.com/bitcoin/bitcoin/pull/13215#issuecomment-389727542,389727542,
MarcoFalke,2018-05-17T03:35:25Z,re-ACK 09b26751e0,https://github.com/bitcoin/bitcoin/pull/13215#issuecomment-389734245,389734245,
theuni,2018-05-17T03:55:38Z,Playing around with this now.,https://github.com/bitcoin/bitcoin/pull/13215#issuecomment-389736857,389736857,
theuni,2018-05-17T06:33:44Z,"Thanks for addressing my questions. utACK.\n\n@laanwj I'd like to have a chance to look at the qt/gitian changes as well. Mind giving me until the end of this week to get to them? Ideally we'd get all of those in at once so everything remains in sync.",https://github.com/bitcoin/bitcoin/pull/13215#issuecomment-389759938,389759938,
ken2812221,2018-05-17T16:44:56Z,Update: also expose CONFIG_SHELL into docker,https://github.com/bitcoin/bitcoin/pull/13215#issuecomment-389932842,389932842,
jamesob,2018-05-21T15:12:00Z,re-utACK https://github.com/bitcoin/bitcoin/pull/13215/commits/67cfb4537ae7ca360f1b0cfb7e625aff9b59d8d7,https://github.com/bitcoin/bitcoin/pull/13215#issuecomment-390684137,390684137,
MarcoFalke,2018-05-21T15:27:26Z,re-ACK 67cfb4537a,https://github.com/bitcoin/bitcoin/pull/13215#issuecomment-390688766,390688766,
ken2812221,2018-05-21T17:02:55Z,@jnewbery Because I just modify the enviroment variable on that one and travis read caches based on enviroment variable. So it needs to recompile everything.,https://github.com/bitcoin/bitcoin/pull/13215#issuecomment-390717144,390717144,
ken2812221,2018-05-24T05:29:04Z,"How about add `DOCKER_EXEC () { docker exec $DOCKER_ID bash -c ""cd $PWD && $*""; }` as a bash funtion, so we don't need to `cd` all the time.",https://github.com/bitcoin/bitcoin/pull/13215#issuecomment-391593007,391593007,
MarcoFalke,2018-05-24T21:46:23Z,re-utACK a182c9d,https://github.com/bitcoin/bitcoin/pull/13215#issuecomment-391874885,391874885,
MarcoFalke,2018-05-29T16:51:43Z,re-utACK 59e9688eda4c4b01ee1713625632cd766c1a7ca9,https://github.com/bitcoin/bitcoin/pull/13215#issuecomment-392849948,392849948,
promag,2018-05-11T14:46:40Z,Remove double space.,https://github.com/bitcoin/bitcoin/pull/13215#discussion_r187636811,187636811,.travis.yml
ken2812221,2018-05-11T15:03:37Z,Done.,https://github.com/bitcoin/bitcoin/pull/13215#discussion_r187642013,187642013,.travis.yml
jamesob,2018-05-11T15:44:45Z,"Small thing, but could we add \n```yaml\n- DOCKER_EXEC=""docker exec ${DOCKER_ID}""\n```\nto cut down on some of the boilerplate below?",https://github.com/bitcoin/bitcoin/pull/13215#discussion_r187653977,187653977,.travis.yml
ken2812221,2018-05-11T16:04:55Z,Sure,https://github.com/bitcoin/bitcoin/pull/13215#discussion_r187659562,187659562,.travis.yml
MarcoFalke,2018-05-17T01:36:02Z,"nit: I'd prefer if we only write the environment variables that are specified in the yaml (global env and job env). Currently this also exports a lot of travis specific junk, which shouldn't be necessary. No strong opinion, though, as I am not aware how to achieve this.",https://github.com/bitcoin/bitcoin/pull/13215#discussion_r188818197,188818197,.travis.yml
MarcoFalke,2018-05-17T01:40:35Z,"nits:\n* Please replace the `-v` with the more verbose `--mount type=bind,src=....,dst=....`, which is suggested in the docker docs\n* You overwrite the `CCACHE_DIR` some lines above, but don't use that value here. Any reason for that?\n* Please replace the privliledged flag with just `--cap-add SYS_ADMIN` and add a comment why this is required or make it specific to the windows build.",https://github.com/bitcoin/bitcoin/pull/13215#discussion_r188818789,188818789,.travis.yml
MarcoFalke,2018-05-17T02:46:42Z,"This fails, since it is executed on the host, not via DOCKER_EXEC.",https://github.com/bitcoin/bitcoin/pull/13215#discussion_r188826027,188826027,.travis.yml
MarcoFalke,2018-05-17T03:06:57Z,I assume `BOOST_TEST_RANDOM` and `DISPLAY` needs to be passed down as well?,https://github.com/bitcoin/bitcoin/pull/13215#discussion_r188828273,188828273,.travis.yml
theuni,2018-05-17T05:46:47Z,Why is this needed?,https://github.com/bitcoin/bitcoin/pull/13215#discussion_r188844195,188844195,.travis.yml
ken2812221,2018-05-17T05:53:42Z,In order to set wine-binfmt,https://github.com/bitcoin/bitcoin/pull/13215#discussion_r188845013,188845013,.travis.yml
theuni,2018-05-17T06:02:29Z,Is this still needed? IIRC it was an artifact of needing a non-default wine.,https://github.com/bitcoin/bitcoin/pull/13215#discussion_r188846271,188846271,.travis.yml
ken2812221,2018-05-17T06:08:16Z,"Yes, this is needed. `wine32` is only available on i386 platform. Here is the link: https://packages.ubuntu.com/bionic/wine32",https://github.com/bitcoin/bitcoin/pull/13215#discussion_r188847110,188847110,.travis.yml
theuni,2018-05-17T06:14:11Z,"This dropped the ""travis_wait 50"", but I guess we're ok without it now?",https://github.com/bitcoin/bitcoin/pull/13215#discussion_r188847884,188847884,.travis.yml
ken2812221,2018-05-17T06:18:48Z,travis_wait is incompitable with docker. This is a known [issue](https://github.com/travis-ci/travis-ci/issues/6934).,https://github.com/bitcoin/bitcoin/pull/13215#discussion_r188848645,188848645,.travis.yml
MarcoFalke,2018-05-17T16:33:32Z,"I incorrectly assumed that apt is an alias for apt-get and asked you to change it. This was wrong, so feel free to change it back to apt-get. Sorry.",https://github.com/bitcoin/bitcoin/pull/13215#discussion_r189023565,189023565,.travis.yml
ken2812221,2018-05-17T16:44:00Z,Never mind ,https://github.com/bitcoin/bitcoin/pull/13215#discussion_r189026572,189026572,.travis.yml
MarcoFalke,2018-05-21T15:26:37Z,nit: Could reuse `CONFIG_SHELL` as below and skip exporting `USE_SHELL` or is there a reason to have two separate env vars with the same value?,https://github.com/bitcoin/bitcoin/pull/13215#discussion_r189624027,189624027,.travis.yml
ken2812221,2018-05-21T15:42:31Z,Done,https://github.com/bitcoin/bitcoin/pull/13215#discussion_r189628681,189628681,.travis.yml
sipa,2018-05-21T17:06:09Z,"I think we may not need this `travis_wait` anymore, due to several improvements to the unit tests' runtimes.",https://github.com/bitcoin/bitcoin/pull/13215#discussion_r189652111,189652111,.travis.yml
MarcoFalke,2018-05-21T17:19:47Z,"@sipa is correct. See https://github.com/bitcoin/bitcoin/pull/12970#issuecomment-380952998 for background. The current run time (on the windows jobs) in this pull:\n\n`i686-w64-mingw32`: 245.895077045 s\n`x86_64-w64-mingw32`: 95.965838938 s",https://github.com/bitcoin/bitcoin/pull/13215#discussion_r189655613,189655613,.travis.yml
jnewbery,2018-05-21T17:35:24Z,Can we remove this now?,https://github.com/bitcoin/bitcoin/pull/13215#discussion_r189659615,189659615,.travis.yml
MarcoFalke,2018-05-21T20:04:48Z,"I think we mirror the pwd for the travis vm and the docker container. Otherwise a `cat config.log` on the travis vm wouldn't work, I presume.",https://github.com/bitcoin/bitcoin/pull/13215#discussion_r189698060,189698060,.travis.yml
MarcoFalke,2018-05-21T20:06:12Z,"Oh yeah, it seems this one can be removed. Though, no harm in leaving it in, I guess.",https://github.com/bitcoin/bitcoin/pull/13215#discussion_r189698367,189698367,.travis.yml
ken2812221,2018-05-22T01:10:43Z,"No, `cat config.log` below would not work then.",https://github.com/bitcoin/bitcoin/pull/13215#discussion_r189753838,189753838,.travis.yml
jnewbery,2018-05-22T14:11:54Z,"ah, makes sense. Thanks",https://github.com/bitcoin/bitcoin/pull/13215#discussion_r189916109,189916109,.travis.yml
MarcoFalke,2018-05-24T21:48:58Z,bash: CONFIG_SHELL: command not found,https://github.com/bitcoin/bitcoin/pull/13215#discussion_r190741084,190741084,.travis.yml
ken2812221,2018-05-25T03:14:32Z,Fixed.,https://github.com/bitcoin/bitcoin/pull/13215#discussion_r190781905,190781905,.travis.yml
