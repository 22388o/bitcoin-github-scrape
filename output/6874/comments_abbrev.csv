laanwj,2015-10-23T08:17:12Z,For those wondering what this is about (I did): [TCP_CORK: More than you ever wanted to know](http://baus.net/on-tcp_cork/)\n,https://github.com/bitcoin/bitcoin/pull/6874#issuecomment-150506048,150506048,
theuni,2015-10-23T14:57:52Z,"After looking into the options here, I think writing with scatter/gather (sendmsg/writev/etc) would be simpler and just as effective now that NODELAY is set.\n",https://github.com/bitcoin/bitcoin/pull/6874#issuecomment-150598465,150598465,
pstratem,2015-10-23T23:08:00Z,"I agree but there does not seem to be a reasonable cross platform way to do\nthat.\nOn Oct 23, 2015 7:58 AM, ""Cory Fields"" notifications@github.com wrote:\n\n> After looking into the options here, I think writing with scatter/gather\n> (sendmsg/writev/etc) would be simpler and just as effective now that\n> NODELAY is set.\n> \n> â€”\n> Reply to this email directly or view it on GitHub\n> https://git",https://github.com/bitcoin/bitcoin/pull/6874#issuecomment-150712820,150712820,
laanwj,2015-10-26T07:18:33Z,Concept ACK - but I think we should hold back on doing a lot of work here unless the impact is immediate and obvious (such as for TCP_NODELAY). With libevent we will get a few advanced networking features for free - including use of readv/writev where available.\n,https://github.com/bitcoin/bitcoin/pull/6874#issuecomment-151047963,151047963,
pstratem,2015-10-26T23:46:47Z,@laanwj this is now cross platform afaict\n,https://github.com/bitcoin/bitcoin/pull/6874#issuecomment-151315977,151315977,
sipa,2015-10-28T01:56:25Z,@gavinandresen Feel like testing this on your 5-hop setup?\n,https://github.com/bitcoin/bitcoin/pull/6874#issuecomment-151696231,151696231,
gavinandresen,2015-10-28T15:10:32Z,"ACK, tested on OSX and Linux. Timing for 5-node 4-hop is the same as for just the TCP_NODELAY fix:\n\n```\nFirst node that found the block:\n50.638 UpdateTip: new best=226860e92c853c45cd9afc571353be9cbf8e4116b586ae1481c32e2adb8ffb65  height=4  log2_work=3.3219281  tx=5  date=2015-10-28 15:04:40 progress=1.000000  cache=0.0MiB(4tx)\n50.649 AddToWallet 86ef5c25a58631da87d6199fae5ebd82f55311e37e6c9bc",https://github.com/bitcoin/bitcoin/pull/6874#issuecomment-151876067,151876067,
laanwj,2015-10-29T11:19:17Z,"If it is the same, TBH I don't see the point in this extra complication.\n",https://github.com/bitcoin/bitcoin/pull/6874#issuecomment-152150108,152150108,
pstratem,2015-10-29T11:27:37Z,@laanwj there was no expectation of this improving latency\n\nthis is to improve the bandwidth used\n,https://github.com/bitcoin/bitcoin/pull/6874#issuecomment-152152145,152152145,
laanwj,2015-10-29T11:38:20Z,"Can we measure that too, then?\n",https://github.com/bitcoin/bitcoin/pull/6874#issuecomment-152154196,152154196,
pstratem,2015-11-16T12:47:29Z,@laanwj it's actually more about packets per second rather than bandwidth or latency\n\nI could measure that\n,https://github.com/bitcoin/bitcoin/pull/6874#issuecomment-157016970,157016970,
laanwj,2015-11-16T15:35:59Z,"Great! \nI'm just wary of merging this if we can't measure any clear improvement. Could see it breaking (or cancelling the NO_DELAY improvement) on obscure platforms which don't allow for high-frequency switching of NO_DELAY mode, if those exist...\n",https://github.com/bitcoin/bitcoin/pull/6874#issuecomment-157070643,157070643,
morcos,2015-11-16T21:54:30Z,"If you're new to this PR, see discussion here for background:\nhttp://bitcoinstats.com/irc/bitcoin-dev/logs/2015/10/23\n",https://github.com/bitcoin/bitcoin/pull/6874#issuecomment-157182622,157182622,
sipa,2015-11-28T13:28:05Z,"Ok, I missed too that this was mostly about reducing unnecessary packets. That seems less urgent than latency reductions, and numbers would indeed be nice.\n",https://github.com/bitcoin/bitcoin/pull/6874#issuecomment-160296103,160296103,
