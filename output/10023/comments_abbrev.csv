fanquake,2017-03-22T22:57:23Z,Needs a rebase.,https://github.com/bitcoin/bitcoin/pull/10023#issuecomment-288565442,288565442,
jnewbery,2017-04-12T14:00:13Z,rebased,https://github.com/bitcoin/bitcoin/pull/10023#issuecomment-293586052,293586052,
sdaftuar,2017-04-12T21:19:19Z,"Restructuring this sounds good, but now that we don't send getdata's in response to inv's anymore, perhaps this test should be rewritten to use headers for announcements instead?",https://github.com/bitcoin/bitcoin/pull/10023#issuecomment-293710921,293710921,
jnewbery,2017-04-12T23:12:19Z,"You're correct. On closer inspection, this test case is actually testing nothing. The only thing it asserts on is that the node hasn't sent us too many getdata requests, but since nodes no longer sends getdata messages in response to block invs, it's just testing that 0 < 256:\n\n```\n./maxblocksinflight.py\n2017-04-12 22:07:31.285000 TestFramework (INFO): Initializing test directory /tmp/user",https://github.com/bitcoin/bitcoin/pull/10023#issuecomment-293732948,293732948,
sdaftuar,2017-04-13T00:29:33Z,"Well, I'd say that if it's not too much work, we should just fix this test case to test the maxblocksinflight behavior correctly.  Ie, announce 17 or more block headers, and verify we only get 16 getdata requests.",https://github.com/bitcoin/bitcoin/pull/10023#issuecomment-293744099,293744099,
jnewbery,2017-04-13T13:15:08Z,"This line: https://github.com/bitcoin/bitcoin/blob/70f6f56e9dde0d0eb1a51e70c051b8fa3ba9535f/test/functional/sendheaders.py#L517 and the block below test that when there are more than 16 headers messages sent, the peer will only send get_data for 16 of them.\n\nI think that covers the maxblocksinflight test, but let me know if you think it needs expanding.",https://github.com/bitcoin/bitcoin/pull/10023#issuecomment-293891932,293891932,
jnewbery,2017-04-13T15:51:55Z,"@sdaftuar - as discussed, we can remove maxblocksinflight entirely.",https://github.com/bitcoin/bitcoin/pull/10023#issuecomment-293935901,293935901,
jimmysong,2017-04-20T19:56:40Z,"If I'm understanding correctly, this method doesn't get called anymore since `getdata` isn't the response to `inv`?",https://github.com/bitcoin/bitcoin/pull/10023#discussion_r112546267,112546267,test/functional/maxblocksinflight.py
jimmysong,2017-04-20T19:57:14Z,"And this should be an empty dict, correct?",https://github.com/bitcoin/bitcoin/pull/10023#discussion_r112546374,112546374,test/functional/maxblocksinflight.py
jimmysong,2017-04-20T19:57:42Z,"And finally, `total_requests` is 0 every time?",https://github.com/bitcoin/bitcoin/pull/10023#discussion_r112546478,112546478,test/functional/maxblocksinflight.py
jnewbery,2017-04-25T13:10:47Z,correct,https://github.com/bitcoin/bitcoin/pull/10023#discussion_r113189998,113189998,test/functional/maxblocksinflight.py
jnewbery,2017-04-25T13:11:28Z,yes,https://github.com/bitcoin/bitcoin/pull/10023#discussion_r113190162,113190162,test/functional/maxblocksinflight.py
jnewbery,2017-04-25T13:12:09Z,"exactly, and 0 <= 128 last time I checked, so this test always passes.",https://github.com/bitcoin/bitcoin/pull/10023#discussion_r113190315,113190315,test/functional/maxblocksinflight.py
