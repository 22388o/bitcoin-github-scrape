[
  {
    "sha": "facede18a42ccbf45cb5156bd4e5c9cabb359821",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYWNlZGUxOGE0MmNjYmY0NWNiNTE1NmJkNGU1YzljYWJiMzU5ODIx",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2020-05-14T12:40:23Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2020-05-14T13:36:51Z"
      },
      "message": "test: Check that invalid witness destinations can not be imported",
      "tree": {
        "sha": "3a3e2d39230b69430a6fff0bcba26a41eb14e6f2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3a3e2d39230b69430a6fff0bcba26a41eb14e6f2"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/facede18a42ccbf45cb5156bd4e5c9cabb359821",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUh6OAwApHiRuOWgtQTG3+JHBVVBqTJqnKX07dUdAfh4jcdxs5wd1vAPO5i2n9XK\nAgDVwmGI72T5fYvj0K+ct86h5RHJSEPu+KyIj43hRVFSFAyvd0uV+ptgsqk1+Jlx\nVPmDH+NVoTznMvQakREBpHlEhTQCv8iusjGQhaozZgvMj+V09MCbhnOmq0qrehTg\nSrW3K4lhTGBTQyb6Er1/YXVho4USY8CipXI3cZSvjbFCgrnKv7JRTKBEj16duEVS\nlIOyZPhPkpNnH23TxQtRAb0Ve6ChCjRsb2PcV+lr+mocrLUOko7U7clz7fn46UWb\naHPn+AjaaUSAR+ghSLvQPOTxeK60LFDNAoZ75WHTwA0HuLBBQH+dufIyhIGpL+kF\nx8Xxf1gGea4ocfAZncFEfeJ8oL/dtX6ExNK39metPjkr0TU9+3ptXL/PQ++/CgNB\n58EpqexRswKvSID6hfI3dFm829K5ekWJ7pMnQpAIoG89/dUWuZveKJASNjevO+6u\n11Z0t0HX\n=PWQw\n-----END PGP SIGNATURE-----",
        "payload": "tree 3a3e2d39230b69430a6fff0bcba26a41eb14e6f2\nparent a9a6d946e41b459d3d04ab79df85ce0b31304948\nauthor MarcoFalke <falke.marco@gmail.com> 1589460023 -0400\ncommitter MarcoFalke <falke.marco@gmail.com> 1589463411 -0400\n\ntest: Check that invalid witness destinations can not be imported\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/facede18a42ccbf45cb5156bd4e5c9cabb359821",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/facede18a42ccbf45cb5156bd4e5c9cabb359821",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/facede18a42ccbf45cb5156bd4e5c9cabb359821/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "a9a6d946e41b459d3d04ab79df85ce0b31304948",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a9a6d946e41b459d3d04ab79df85ce0b31304948",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/a9a6d946e41b459d3d04ab79df85ce0b31304948"
      }
    ],
    "stats": {
      "total": 27,
      "additions": 27,
      "deletions": 0
    },
    "files": [
      {
        "sha": "fb4a1f9792610f130a2783d788399838e413c2f9",
        "filename": "test/functional/wallet_labels.py",
        "status": "modified",
        "additions": 27,
        "deletions": 0,
        "changes": 27,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/facede18a42ccbf45cb5156bd4e5c9cabb359821/test/functional/wallet_labels.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/facede18a42ccbf45cb5156bd4e5c9cabb359821/test/functional/wallet_labels.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/wallet_labels.py?ref=facede18a42ccbf45cb5156bd4e5c9cabb359821",
        "patch": "@@ -134,6 +134,33 @@ def run_test(self):\n         # in the label. This is a no-op.\n         change_label(node, labels[2].addresses[0], labels[2], labels[2])\n \n+        self.log.info('Check watchonly labels')\n+        node.createwallet(wallet_name='watch_only', disable_private_keys=True, descriptors=False)\n+        wallet_watch_only = node.get_wallet_rpc('watch_only')\n+        BECH32_VALID = {\n+            '\u2714\ufe0f_VER15_PROG40': 'bcrt10qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqn2cjv3',\n+            '\u2714\ufe0f_VER16_PROG03': 'bcrt1sqqqqqjq8pdp',\n+            '\u2714\ufe0f_VER16_PROB02': 'bcrt1sqqqqqjq8pv',\n+        }\n+        BECH32_INVALID = {\n+            '\u274c_VER15_PROG41': 'bcrt10qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqzc7xyq',\n+            '\u274c_VER16_PROB01': 'bcrt1sqqpl9r5c',\n+        }\n+        for l in BECH32_VALID:\n+            ad = BECH32_VALID[l]\n+            wallet_watch_only.importaddress(label=l, rescan=False, address=ad)\n+            node.generatetoaddress(1, ad)\n+            assert_equal(wallet_watch_only.getaddressesbylabel(label=l), {ad: {'purpose': 'receive'}})\n+            assert_equal(wallet_watch_only.getreceivedbylabel(label=l), 0)\n+        for l in BECH32_INVALID:\n+            ad = BECH32_INVALID[l]\n+            assert_raises_rpc_error(\n+                -5,\n+                \"Invalid Bitcoin address or script\",\n+                lambda: wallet_watch_only.importaddress(label=l, rescan=False, address=ad),\n+            )\n+\n+\n class Label:\n     def __init__(self, name):\n         # Label name"
      }
    ]
  }
]