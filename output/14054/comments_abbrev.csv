jnewbery,2018-08-24T20:41:42Z,"Concept ACK!\n\nThe changes to the test framework remove all testing of the p2p REJECT message. Shouldn't we maintain at least some minor testing of REJECT, unless(/until) REJECT is removed entirely?",https://github.com/bitcoin/bitcoin/pull/14054#issuecomment-415876820,415876820,
gmaxwell,2018-08-24T22:19:02Z,Concept ACK.,https://github.com/bitcoin/bitcoin/pull/14054#issuecomment-415897051,415897051,
MarcoFalke,2018-08-24T22:37:45Z,@jnewbery Added back one test case for `-enablebip61`,https://github.com/bitcoin/bitcoin/pull/14054#issuecomment-415900363,415900363,
laanwj,2018-08-27T09:16:22Z,"Concept ACK\n\nI'm not convinced about removing REJECT completely, I think it is useful for testing and development (and have used it for that purpose a few times, for example during development of [bitcoin-submittx](https://github.com/laanwj/bitcoin-submittx)).\n\nHowever I fully agree on the reasoning behind disabling it by default.",https://github.com/bitcoin/bitcoin/pull/14054#issuecomment-416166729,416166729,
DrahtBot,2018-08-29T17:32:38Z,<!--e57a25ab6845829454e8d69fc972939a-->No more conflicts as of last run.,https://github.com/bitcoin/bitcoin/pull/14054#issuecomment-417038684,417038684,
luke-jr,2018-08-30T12:48:09Z,"Reject may be useful (necessary) for tracking the best-block of peers and making sure our ""essential"" peers are using the same consensus rules as we are. Until we have reliable peer best-block tracking implemented, I suggest we leave reject alone.",https://github.com/bitcoin/bitcoin/pull/14054#issuecomment-417307107,417307107,
jnewbery,2018-09-06T20:51:08Z,"> Reject may be useful (necessary) for tracking the best-block of peers and making sure our ""essential"" peers are using the same consensus rules as we are.\n\nbitcoind does not track peers' best blocks or consensus rules using REJECT messages. In fact, all it does with REJECT messages is log (if NET logging is enabled) and drop.\n\nI don't think it makes sense to continue sending REJECT messag",https://github.com/bitcoin/bitcoin/pull/14054#issuecomment-419237029,419237029,
MarcoFalke,2018-09-06T21:40:14Z,"@jnewbery I will rebase this on \n*    #14119 (qa: Read reject reasons from debug log, not p2p messages by MarcoFalke)\n\nto get rid of all test changes and leave this a one-line change. Please help review that first.\n",https://github.com/bitcoin/bitcoin/pull/14054#issuecomment-419250343,419250343,
jnewbery,2018-09-07T11:42:37Z,"> Please help review that first.\n\nYes, fine (although a note to say that this PR isn't seeking review would have been helpful!)",https://github.com/bitcoin/bitcoin/pull/14054#issuecomment-419414033,419414033,
ken2812221,2018-09-10T02:15:39Z,utACK faea5bf,https://github.com/bitcoin/bitcoin/pull/14054#issuecomment-419768071,419768071,
jnewbery,2018-09-10T14:26:45Z,tested ACK faea5bfc5a975874acf763082852ed532ed81a95,https://github.com/bitcoin/bitcoin/pull/14054#issuecomment-419932417,419932417,
jnewbery,2018-08-27T14:53:45Z,s/reject_code and reject_reason are/reject_reason is,https://github.com/bitcoin/bitcoin/pull/14054#discussion_r213004604,213004604,test/functional/test_framework/mininode.py
jnewbery,2018-08-27T14:56:28Z,s/reject_code and reject_reason are/reject_reason is,https://github.com/bitcoin/bitcoin/pull/14054#discussion_r213005579,213005579,test/functional/test_framework/mininode.py
jnewbery,2018-08-27T15:13:01Z,"This whole sub-test can be removed (everything from `# restart node with sending BIP61 messages disabled, check that it disconnects without sending the reject message` onward)\n\nYou could also update L71 higher up to test the reject reason:\n\n```\n+++ b/test/functional/p2p_invalid_tx.py\n@@ -68,7 +68,8 @@ class InvalidTxRequestTest(BitcoinTestFramework):\n         # and we get disconnecte",https://github.com/bitcoin/bitcoin/pull/14054#discussion_r213011063,213011063,test/functional/p2p_invalid_tx.py
jnewbery,2018-08-27T15:14:41Z,"I have a mild preference to test reject messages in their own test case (`p2p_reject.py`), but not strongly enough to block this PR.",https://github.com/bitcoin/bitcoin/pull/14054#discussion_r213011618,213011618,test/functional/feature_dersig.py
jnewbery,2018-08-27T15:18:11Z,"None of the calls to this function actually use the optional parameters, so this can be simplified to:\n\n```\n+++ b/test/functional/feature_csv_activation.py\n@@ -165,11 +165,11 @@ class BIP68_112_113Test(BitcoinTestFramework):\n         block.solve()\n         return block\n \n-    def sync_blocks(self, blocks, success=True, *, reject_reason=None, request_block=True):\n+    def sync_blo",https://github.com/bitcoin/bitcoin/pull/14054#discussion_r213012722,213012722,test/functional/feature_csv_activation.py
jnewbery,2018-08-27T15:25:16Z,Please add a comment to explain why `par=1` is needed.,https://github.com/bitcoin/bitcoin/pull/14054#discussion_r213014998,213014998,test/functional/feature_cltv.py
jnewbery,2018-08-27T15:30:37Z,"Would be nice if all calls to `sync_blocks` used named argument for `reject_reason`, but that change should be in a future PR.",https://github.com/bitcoin/bitcoin/pull/14054#discussion_r213016909,213016909,test/functional/feature_block.py
