fanquake,2019-06-28 12:52:02,cc @IlyasRidhuan,https://github.com/bitcoin/bitcoin/pull/16302#issuecomment-506722588,506722588,
promag,2019-06-29 22:07:10,"Still not using `sync_all` as OP suggests, although I think `sync_blocks` and `syncwithvalidationinterfacequeue` is enough. If you keep current commit please update PR.\n\nJust to be clear about the problem, there's a race between `getbalance` and `CWallet::BlockConnected`.\n\nACK fa81525. This can be tested by adding sleep in `CWallet::BlockConnected` just before `LOCK(cs_wallet)` - master wi",https://github.com/bitcoin/bitcoin/pull/16302#issuecomment-506990534,506990534,
