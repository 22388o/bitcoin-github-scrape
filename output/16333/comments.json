[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/508195628",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16333#issuecomment-508195628",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16333",
    "id": 508195628,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwODE5NTYyOA==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-03T17:57:12Z",
    "updated_at": "2021-06-19T05:04:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/508195628/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/508522150",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16333#issuecomment-508522150",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16333",
    "id": 508522150,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwODUyMjE1MA==",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?u=4a9af998e1a560b3f49c3827f453e1bcbe6a5cfb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-04T15:38:46Z",
    "updated_at": "2019-07-04T15:38:46Z",
    "author_association": "MEMBER",
    "body": "Fails with `Assertion failed: lock cs_main not held in ./validation.h:411`",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/508522150/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 1
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/508604071",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16333#issuecomment-508604071",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16333",
    "id": 508604071,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUwODYwNDA3MQ==",
    "user": {
      "login": "ajtowns",
      "id": 127186,
      "node_id": "MDQ6VXNlcjEyNzE4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajtowns",
      "html_url": "https://github.com/ajtowns",
      "followers_url": "https://api.github.com/users/ajtowns/followers",
      "following_url": "https://api.github.com/users/ajtowns/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajtowns/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
      "organizations_url": "https://api.github.com/users/ajtowns/orgs",
      "repos_url": "https://api.github.com/users/ajtowns/repos",
      "events_url": "https://api.github.com/users/ajtowns/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajtowns/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-05T01:51:52Z",
    "updated_at": "2019-07-05T01:51:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "> I changed the BIP34 height to `2`, so that the block at height=1 may be used to mine a duplicate coinbase. (Needed to test mainnet behaviour)\r\n\r\nThis didn't quite make sense to me, but I think it works. I think the two behaviours that warrant testing are:\r\n\r\n * block 1 coinbase txid = X, block 2 spends X, block 3 coinbase txid = X, block 4 spends X again; all okay\r\n * block 1 coinbase txid = X, block 2 at most partially spends X, block 3 coinbase txid = X, should be prevented by BIP30 enforcement\r\n\r\nI think this adds a test for the second case (with X completely unspent), but not the first? (And duplicates are at block 120 not block 3)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/508604071/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/511683294",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16333#issuecomment-511683294",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16333",
    "id": 511683294,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxMTY4MzI5NA==",
    "user": {
      "login": "ajtowns",
      "id": 127186,
      "node_id": "MDQ6VXNlcjEyNzE4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajtowns",
      "html_url": "https://github.com/ajtowns",
      "followers_url": "https://api.github.com/users/ajtowns/followers",
      "following_url": "https://api.github.com/users/ajtowns/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajtowns/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
      "organizations_url": "https://api.github.com/users/ajtowns/orgs",
      "repos_url": "https://api.github.com/users/ajtowns/repos",
      "events_url": "https://api.github.com/users/ajtowns/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajtowns/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-07-16T06:25:30Z",
    "updated_at": "2019-07-16T06:27:10Z",
    "author_association": "CONTRIBUTOR",
    "body": "Based on the comments in #14633 our implementation doesn't match BIP34 for blocks at heights lower than 17 (since we do `OP_1..OP_16` instead of non-minimal `0x01 [0x01...0x10]` as per BIP34); maybe it might be better to only test BIP34 from block 17 rather than block 2? FWIW, tests look like they work unchanged with `BIP34Height = 17` instead of 2.\r\n\r\nIf so, could be worth adding `assert(globalChainParams->GetConsensus().BIP34Height > 16);` to `SelectParams()` along with a comment about divergence from BIP34 if that assertion were violated.\r\n\r\nAlternatively, seems like BIP34 probably should be updated to at least note the divergence to the original specification for bitcoind's regtest (and potentially signet or \"tapnet\" or similar, which might actually require interoperability with other clients).\r\n\r\n(Edited to add: ACK once the above is dealt with one way or another, fwiw)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/511683294/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/518213529",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16333#issuecomment-518213529",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16333",
    "id": 518213529,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUxODIxMzUyOQ==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-08-05T12:27:09Z",
    "updated_at": "2019-08-05T12:27:09Z",
    "author_association": "MEMBER",
    "body": "> maybe it might be better to only test BIP34 from block 17 rather than block 2\r\n> If so, could be worth adding assert(globalChainParams->GetConsensus().BIP34Height > 16);\r\n\r\nAdding this assert would break existing test networks such as\r\n* signet\r\nhttps://github.com/bitcoin/bitcoin/blob/542b66b3588c779b21b128c694c2f60ab2a81382/src/chainparams.cpp#L299\r\n* liquid\r\nhttps://github.com/ElementsProject/elements/blob/c67ef2938c7f59ff263c13efe5f87fd0f835c34c/src/chainparams.cpp#L642\r\n\r\nSo I will keep this pull request as-is for now.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/518213529/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/540821175",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16333#issuecomment-540821175",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16333",
    "id": 540821175,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0MDgyMTE3NQ==",
    "user": {
      "login": "jtimon",
      "id": 1008458,
      "node_id": "MDQ6VXNlcjEwMDg0NTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1008458?u=636a89c913ac407f52bb8d57c4fff384b98f421f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jtimon",
      "html_url": "https://github.com/jtimon",
      "followers_url": "https://api.github.com/users/jtimon/followers",
      "following_url": "https://api.github.com/users/jtimon/following{/other_user}",
      "gists_url": "https://api.github.com/users/jtimon/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jtimon/subscriptions",
      "organizations_url": "https://api.github.com/users/jtimon/orgs",
      "repos_url": "https://api.github.com/users/jtimon/repos",
      "events_url": "https://api.github.com/users/jtimon/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jtimon/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-10-10T22:12:50Z",
    "updated_at": "2019-10-10T22:12:50Z",
    "author_association": "MEMBER",
    "body": "Concept ACK\r\nJust a question, the second commit won't pass the tests until the next commit is applied too, will it?\r\nIf that's the case, perhaps we should consider a squash for \"git bisect\" purposes.\r\nIf all commits pass all tests independently, I said nothing.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/540821175/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/541177422",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16333#issuecomment-541177422",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16333",
    "id": 541177422,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0MTE3NzQyMg==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-10-11T18:37:12Z",
    "updated_at": "2019-10-11T18:37:12Z",
    "author_association": "MEMBER",
    "body": "Huh, the second commit changes nothing other than that the tests mine version 4 blocks instead of version 1 blocks. If version 1 blocks were accepted, then version 4 blocks are accepted as well under our current consensus rules. So the second commit should pass. And I am pretty sure I did check that it passed.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/541177422/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/886275631",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16333#issuecomment-886275631",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16333",
    "id": 886275631,
    "node_id": "IC_kwDOABII5840034v",
    "user": {
      "login": "theStack",
      "id": 91535,
      "node_id": "MDQ6VXNlcjkxNTM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theStack",
      "html_url": "https://github.com/theStack",
      "followers_url": "https://api.github.com/users/theStack/followers",
      "following_url": "https://api.github.com/users/theStack/following{/other_user}",
      "gists_url": "https://api.github.com/users/theStack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theStack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
      "organizations_url": "https://api.github.com/users/theStack/orgs",
      "repos_url": "https://api.github.com/users/theStack/repos",
      "events_url": "https://api.github.com/users/theStack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theStack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-25T23:35:27Z",
    "updated_at": "2021-07-25T23:35:27Z",
    "author_association": "CONTRIBUTOR",
    "body": "Concept ACK",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/886275631/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/890536205",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16333#issuecomment-890536205",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16333",
    "id": 890536205,
    "node_id": "IC_kwDOABII5841FIEN",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-01T15:05:50Z",
    "updated_at": "2021-08-01T15:05:50Z",
    "author_association": "MEMBER",
    "body": "> This confused me a little.\r\n\r\nEdited OP comment",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/890536205/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/890921758",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16333#issuecomment-890921758",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16333",
    "id": 890921758,
    "node_id": "IC_kwDOABII5841GmMe",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-02T10:40:15Z",
    "updated_at": "2021-08-02T10:40:15Z",
    "author_association": "MEMBER",
    "body": "@ajtowns Mind to re-ACK/NACK based on your \r\n\r\n> (Edited to add: ACK once the above is dealt with one way or another, fwiw) (https://github.com/bitcoin/bitcoin/pull/16333#issuecomment-511683294)\r\n\r\n?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/890921758/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/891062895",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16333#issuecomment-891062895",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16333",
    "id": 891062895,
    "node_id": "IC_kwDOABII5841HIpv",
    "user": {
      "login": "ajtowns",
      "id": 127186,
      "node_id": "MDQ6VXNlcjEyNzE4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajtowns",
      "html_url": "https://github.com/ajtowns",
      "followers_url": "https://api.github.com/users/ajtowns/followers",
      "following_url": "https://api.github.com/users/ajtowns/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajtowns/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
      "organizations_url": "https://api.github.com/users/ajtowns/orgs",
      "repos_url": "https://api.github.com/users/ajtowns/repos",
      "events_url": "https://api.github.com/users/ajtowns/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajtowns/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-08-02T14:13:40Z",
    "updated_at": "2021-08-02T14:13:40Z",
    "author_association": "CONTRIBUTOR",
    "body": "ACK 222290f54388270937cb6c174195717e2214ec0d\r\n\r\nStill seems sad this isn't documented accurately outside the source, but bip34's final and a new bip just for the first ~16 blocks on signet or regtest seems weak too.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/891062895/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/299975273",
    "pull_request_review_id": 257511187,
    "id": 299975273,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5OTk3NTI3Mw==",
    "diff_hunk": "@@ -91,29 +92,22 @@ def add_witness_commitment(block, nonce=0):\n     block.hashMerkleRoot = block.calc_merkle_root()\n     block.rehash()\n \n-def serialize_script_num(value):\n-    r = bytearray(0)\n-    if value == 0:\n-        return r\n-    neg = value < 0\n-    absvalue = -value if neg else value\n-    while (absvalue):\n-        r.append(int(absvalue & 0xff))\n-        absvalue >>= 8\n-    if r[-1] & 0x80:\n-        r.append(0x80 if neg else 0)\n-    elif neg:\n-        r[-1] |= 0x80\n-    return r\n+\n+def script_BIP34_coinbase_height(height):\n+    if height <= 16:\n+        res = CScriptOp.encode_op_n(height)\n+        # Append dummy to increase scriptSig size above 2",
    "path": "test/functional/test_framework/blocktools.py",
    "position": null,
    "original_position": 38,
    "commit_id": "222290f54388270937cb6c174195717e2214ec0d",
    "original_commit_id": "faa2e0d668b2568021a3872ae0d48ec161781605",
    "user": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "please document why",
    "created_at": "2019-07-03T14:06:00Z",
    "updated_at": "2020-10-27T17:26:00Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16333#discussion_r299975273",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16333",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/299975273"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16333#discussion_r299975273"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16333"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/299975273/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 99,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/299987349",
    "pull_request_review_id": 257526826,
    "id": 299987349,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5OTk4NzM0OQ==",
    "diff_hunk": "@@ -91,29 +92,22 @@ def add_witness_commitment(block, nonce=0):\n     block.hashMerkleRoot = block.calc_merkle_root()\n     block.rehash()\n \n-def serialize_script_num(value):\n-    r = bytearray(0)\n-    if value == 0:\n-        return r\n-    neg = value < 0\n-    absvalue = -value if neg else value\n-    while (absvalue):\n-        r.append(int(absvalue & 0xff))\n-        absvalue >>= 8\n-    if r[-1] & 0x80:\n-        r.append(0x80 if neg else 0)\n-    elif neg:\n-        r[-1] |= 0x80\n-    return r\n+\n+def script_BIP34_coinbase_height(height):\n+    if height <= 16:\n+        res = CScriptOp.encode_op_n(height)\n+        # Append dummy to increase scriptSig size above 2",
    "path": "test/functional/test_framework/blocktools.py",
    "position": null,
    "original_position": 38,
    "commit_id": "222290f54388270937cb6c174195717e2214ec0d",
    "original_commit_id": "faa2e0d668b2568021a3872ae0d48ec161781605",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I don't know the reason for this. The rule was added by satoshi in the first commit https://github.com/bitcoin/bitcoin/blame/5b721607b1057df4dfe97f80d235ed372312f398/main.h#L495",
    "created_at": "2019-07-03T14:27:58Z",
    "updated_at": "2020-10-27T17:26:00Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16333#discussion_r299987349",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16333",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/299987349"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16333#discussion_r299987349"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16333"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/299987349/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 99,
    "side": "RIGHT",
    "in_reply_to_id": 299975273
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/299988583",
    "pull_request_review_id": 257528430,
    "id": 299988583,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5OTk4ODU4Mw==",
    "diff_hunk": "@@ -46,39 +46,26 @@ static BlockAssembler AssemblerForTest(const CChainParams& params) {\n     return BlockAssembler(params, options);\n }\n \n-static\n-struct {\n+constexpr static struct {\n     unsigned char extranonce;\n     unsigned int nonce;\n-} blockinfo[] = {\n-    {4, 0xa4a3e223}, {2, 0x15c32f9e}, {1, 0x0375b547}, {1, 0x7004a8a5},\n-    {2, 0xce440296}, {2, 0x52cfe198}, {1, 0x77a72cd0}, {2, 0xbb5d6f84},\n-    {2, 0x83f30c2c}, {1, 0x48a73d5b}, {1, 0xef7dcd01}, {2, 0x6809c6c4},\n-    {2, 0x0883ab3c}, {1, 0x087bbbe2}, {2, 0x2104a814}, {2, 0xdffb6daa},\n-    {1, 0xee8a0a08}, {2, 0xba4237c1}, {1, 0xa70349dc}, {1, 0x344722bb},\n-    {3, 0xd6294733}, {2, 0xec9f5c94}, {2, 0xca2fbc28}, {1, 0x6ba4f406},\n-    {2, 0x015d4532}, {1, 0x6e119b7c}, {2, 0x43e8f314}, {2, 0x27962f38},\n-    {2, 0xb571b51b}, {2, 0xb36bee23}, {2, 0xd17924a8}, {2, 0x6bc212d9},\n-    {1, 0x630d4948}, {2, 0x9a4c4ebb}, {2, 0x554be537}, {1, 0xd63ddfc7},\n-    {2, 0xa10acc11}, {1, 0x759a8363}, {2, 0xfb73090d}, {1, 0xe82c6a34},\n-    {1, 0xe33e92d7}, {3, 0x658ef5cb}, {2, 0xba32ff22}, {5, 0x0227a10c},\n-    {1, 0xa9a70155}, {5, 0xd096d809}, {1, 0x37176174}, {1, 0x830b8d0f},\n-    {1, 0xc6e3910e}, {2, 0x823f3ca8}, {1, 0x99850849}, {1, 0x7521fb81},\n-    {1, 0xaacaabab}, {1, 0xd645a2eb}, {5, 0x7aea1781}, {5, 0x9d6e4b78},\n-    {1, 0x4ce90fd8}, {1, 0xabdc832d}, {6, 0x4a34f32a}, {2, 0xf2524c1c},\n-    {2, 0x1bbeb08a}, {1, 0xad47f480}, {1, 0x9f026aeb}, {1, 0x15a95049},\n-    {2, 0xd1cb95b2}, {2, 0xf84bbda5}, {1, 0x0fa62cd1}, {1, 0xe05f9169},\n-    {1, 0x78d194a9}, {5, 0x3e38147b}, {5, 0x737ba0d4}, {1, 0x63378e10},\n-    {1, 0x6d5f91cf}, {2, 0x88612eb8}, {2, 0xe9639484}, {1, 0xb7fabc9d},\n-    {2, 0x19b01592}, {1, 0x5a90dd31}, {2, 0x5bd7e028}, {2, 0x94d00323},\n-    {1, 0xa9b9c01a}, {1, 0x3a40de61}, {1, 0x56e7eec7}, {5, 0x859f7ef6},\n-    {1, 0xfd8e5630}, {1, 0x2b0c9f7f}, {1, 0xba700e26}, {1, 0x7170a408},\n-    {1, 0x70de86a8}, {1, 0x74d64cd5}, {1, 0x49e738a1}, {2, 0x6910b602},\n-    {0, 0x643c565f}, {1, 0x54264b3f}, {2, 0x97ea6396}, {2, 0x55174459},\n-    {2, 0x03e8779a}, {1, 0x98f34d8f}, {1, 0xc07b2b07}, {1, 0xdfe29668},\n-    {1, 0x3141c7c1}, {1, 0xb3b595f4}, {1, 0x735abf08}, {5, 0x623bfbce},\n-    {2, 0xd351e722}, {1, 0xf4ca48c9}, {1, 0x5b19c670}, {1, 0xa164bf0e},\n-    {2, 0xbbbeb305}, {2, 0xfe1c810a},\n+} BLOCKINFO[] = {\n+    {8, 582909131}, {0, 971462344}, {2, 1169481553}, {6, 66147495}, {7, 427785981}, {8, 80538907}, {8, 207348013}, {2,",
    "path": "src/test/miner_tests.cpp",
    "position": null,
    "original_position": 39,
    "commit_id": "222290f54388270937cb6c174195717e2214ec0d",
    "original_commit_id": "faa2e0d668b2568021a3872ae0d48ec161781605",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "this doesn't look like an improvement in readability, might want to surround this table with `// clang-format off` and `// clang-format on`",
    "created_at": "2019-07-03T14:30:02Z",
    "updated_at": "2020-10-27T17:26:00Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16333#discussion_r299988583",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16333",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/299988583"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16333#discussion_r299988583"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16333"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/299988583/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 56,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/299991209",
    "pull_request_review_id": 257531720,
    "id": 299991209,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI5OTk5MTIwOQ==",
    "diff_hunk": "@@ -46,39 +46,26 @@ static BlockAssembler AssemblerForTest(const CChainParams& params) {\n     return BlockAssembler(params, options);\n }\n \n-static\n-struct {\n+constexpr static struct {\n     unsigned char extranonce;\n     unsigned int nonce;\n-} blockinfo[] = {\n-    {4, 0xa4a3e223}, {2, 0x15c32f9e}, {1, 0x0375b547}, {1, 0x7004a8a5},\n-    {2, 0xce440296}, {2, 0x52cfe198}, {1, 0x77a72cd0}, {2, 0xbb5d6f84},\n-    {2, 0x83f30c2c}, {1, 0x48a73d5b}, {1, 0xef7dcd01}, {2, 0x6809c6c4},\n-    {2, 0x0883ab3c}, {1, 0x087bbbe2}, {2, 0x2104a814}, {2, 0xdffb6daa},\n-    {1, 0xee8a0a08}, {2, 0xba4237c1}, {1, 0xa70349dc}, {1, 0x344722bb},\n-    {3, 0xd6294733}, {2, 0xec9f5c94}, {2, 0xca2fbc28}, {1, 0x6ba4f406},\n-    {2, 0x015d4532}, {1, 0x6e119b7c}, {2, 0x43e8f314}, {2, 0x27962f38},\n-    {2, 0xb571b51b}, {2, 0xb36bee23}, {2, 0xd17924a8}, {2, 0x6bc212d9},\n-    {1, 0x630d4948}, {2, 0x9a4c4ebb}, {2, 0x554be537}, {1, 0xd63ddfc7},\n-    {2, 0xa10acc11}, {1, 0x759a8363}, {2, 0xfb73090d}, {1, 0xe82c6a34},\n-    {1, 0xe33e92d7}, {3, 0x658ef5cb}, {2, 0xba32ff22}, {5, 0x0227a10c},\n-    {1, 0xa9a70155}, {5, 0xd096d809}, {1, 0x37176174}, {1, 0x830b8d0f},\n-    {1, 0xc6e3910e}, {2, 0x823f3ca8}, {1, 0x99850849}, {1, 0x7521fb81},\n-    {1, 0xaacaabab}, {1, 0xd645a2eb}, {5, 0x7aea1781}, {5, 0x9d6e4b78},\n-    {1, 0x4ce90fd8}, {1, 0xabdc832d}, {6, 0x4a34f32a}, {2, 0xf2524c1c},\n-    {2, 0x1bbeb08a}, {1, 0xad47f480}, {1, 0x9f026aeb}, {1, 0x15a95049},\n-    {2, 0xd1cb95b2}, {2, 0xf84bbda5}, {1, 0x0fa62cd1}, {1, 0xe05f9169},\n-    {1, 0x78d194a9}, {5, 0x3e38147b}, {5, 0x737ba0d4}, {1, 0x63378e10},\n-    {1, 0x6d5f91cf}, {2, 0x88612eb8}, {2, 0xe9639484}, {1, 0xb7fabc9d},\n-    {2, 0x19b01592}, {1, 0x5a90dd31}, {2, 0x5bd7e028}, {2, 0x94d00323},\n-    {1, 0xa9b9c01a}, {1, 0x3a40de61}, {1, 0x56e7eec7}, {5, 0x859f7ef6},\n-    {1, 0xfd8e5630}, {1, 0x2b0c9f7f}, {1, 0xba700e26}, {1, 0x7170a408},\n-    {1, 0x70de86a8}, {1, 0x74d64cd5}, {1, 0x49e738a1}, {2, 0x6910b602},\n-    {0, 0x643c565f}, {1, 0x54264b3f}, {2, 0x97ea6396}, {2, 0x55174459},\n-    {2, 0x03e8779a}, {1, 0x98f34d8f}, {1, 0xc07b2b07}, {1, 0xdfe29668},\n-    {1, 0x3141c7c1}, {1, 0xb3b595f4}, {1, 0x735abf08}, {5, 0x623bfbce},\n-    {2, 0xd351e722}, {1, 0xf4ca48c9}, {1, 0x5b19c670}, {1, 0xa164bf0e},\n-    {2, 0xbbbeb305}, {2, 0xfe1c810a},\n+} BLOCKINFO[] = {\n+    {8, 582909131}, {0, 971462344}, {2, 1169481553}, {6, 66147495}, {7, 427785981}, {8, 80538907}, {8, 207348013}, {2,",
    "path": "src/test/miner_tests.cpp",
    "position": null,
    "original_position": 39,
    "commit_id": "222290f54388270937cb6c174195717e2214ec0d",
    "original_commit_id": "faa2e0d668b2568021a3872ae0d48ec161781605",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "clang format will put them in separate lines, which is wasteful. So I ran the \"paragraph formatter\" in vim for extra compaction. I don't think this needs to be human-readable, so should be fine as is.",
    "created_at": "2019-07-03T14:34:33Z",
    "updated_at": "2020-10-27T17:26:00Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16333#discussion_r299991209",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16333",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/299991209"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16333#discussion_r299991209"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16333"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/299991209/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 56,
    "side": "RIGHT",
    "in_reply_to_id": 299988583
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/300002280",
    "pull_request_review_id": 257545371,
    "id": 300002280,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwMDAwMjI4MA==",
    "diff_hunk": "@@ -91,29 +92,22 @@ def add_witness_commitment(block, nonce=0):\n     block.hashMerkleRoot = block.calc_merkle_root()\n     block.rehash()\n \n-def serialize_script_num(value):\n-    r = bytearray(0)\n-    if value == 0:\n-        return r\n-    neg = value < 0\n-    absvalue = -value if neg else value\n-    while (absvalue):\n-        r.append(int(absvalue & 0xff))\n-        absvalue >>= 8\n-    if r[-1] & 0x80:\n-        r.append(0x80 if neg else 0)\n-    elif neg:\n-        r[-1] |= 0x80\n-    return r\n+\n+def script_BIP34_coinbase_height(height):\n+    if height <= 16:\n+        res = CScriptOp.encode_op_n(height)\n+        # Append dummy to increase scriptSig size above 2",
    "path": "test/functional/test_framework/blocktools.py",
    "position": null,
    "original_position": 38,
    "commit_id": "222290f54388270937cb6c174195717e2214ec0d",
    "original_commit_id": "faa2e0d668b2568021a3872ae0d48ec161781605",
    "user": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Ok then just document it's a check in `CheckTransaction`, I just couldn't recall this rule.",
    "created_at": "2019-07-03T14:53:44Z",
    "updated_at": "2020-10-27T17:26:00Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16333#discussion_r300002280",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16333",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/300002280"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16333#discussion_r300002280"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16333"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/300002280/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 99,
    "side": "RIGHT",
    "in_reply_to_id": 299975273
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/300005333",
    "pull_request_review_id": 257549132,
    "id": 300005333,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwMDAwNTMzMw==",
    "diff_hunk": "@@ -91,29 +92,22 @@ def add_witness_commitment(block, nonce=0):\n     block.hashMerkleRoot = block.calc_merkle_root()\n     block.rehash()\n \n-def serialize_script_num(value):\n-    r = bytearray(0)\n-    if value == 0:\n-        return r\n-    neg = value < 0\n-    absvalue = -value if neg else value\n-    while (absvalue):\n-        r.append(int(absvalue & 0xff))\n-        absvalue >>= 8\n-    if r[-1] & 0x80:\n-        r.append(0x80 if neg else 0)\n-    elif neg:\n-        r[-1] |= 0x80\n-    return r\n+\n+def script_BIP34_coinbase_height(height):\n+    if height <= 16:\n+        res = CScriptOp.encode_op_n(height)\n+        # Append dummy to increase scriptSig size above 2",
    "path": "test/functional/test_framework/blocktools.py",
    "position": null,
    "original_position": 38,
    "commit_id": "222290f54388270937cb6c174195717e2214ec0d",
    "original_commit_id": "faa2e0d668b2568021a3872ae0d48ec161781605",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done",
    "created_at": "2019-07-03T14:58:58Z",
    "updated_at": "2020-10-27T17:26:00Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16333#discussion_r300005333",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16333",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/300005333"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16333#discussion_r300005333"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16333"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/300005333/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 99,
    "side": "RIGHT",
    "in_reply_to_id": 299975273
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/300816304",
    "pull_request_review_id": 258572959,
    "id": 300816304,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMwMDgxNjMwNA==",
    "diff_hunk": "@@ -221,21 +208,19 @@ BOOST_AUTO_TEST_CASE(CreateNewBlock_validity)\n     BOOST_CHECK(pblocktemplate = AssemblerForTest(chainparams).CreateNewBlock(scriptPubKey));\n \n     // We can't make transactions until we have inputs\n-    // Therefore, load 100 blocks :)\n+    // Therefore, load 110 blocks :)\n+    static_assert(110 == sizeof(BLOCKINFO) / sizeof(*BLOCKINFO));",
    "path": "src/test/miner_tests.cpp",
    "position": null,
    "original_position": 64,
    "commit_id": "222290f54388270937cb6c174195717e2214ec0d",
    "original_commit_id": "fa1a949bf368528b9f350961a9e5ac0aa6f40bfb",
    "user": {
      "login": "fqlx",
      "id": 1562849,
      "node_id": "MDQ6VXNlcjE1NjI4NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1562849?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fqlx",
      "html_url": "https://github.com/fqlx",
      "followers_url": "https://api.github.com/users/fqlx/followers",
      "following_url": "https://api.github.com/users/fqlx/following{/other_user}",
      "gists_url": "https://api.github.com/users/fqlx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fqlx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fqlx/subscriptions",
      "organizations_url": "https://api.github.com/users/fqlx/orgs",
      "repos_url": "https://api.github.com/users/fqlx/repos",
      "events_url": "https://api.github.com/users/fqlx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fqlx/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I'd prefer not to use Yoda conditions",
    "created_at": "2019-07-06T01:44:41Z",
    "updated_at": "2020-10-27T17:26:00Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16333#discussion_r300816304",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16333",
    "author_association": "NONE",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/300816304"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16333#discussion_r300816304"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16333"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/300816304/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 212,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310581808",
    "pull_request_review_id": 270737793,
    "id": 310581808,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMxMDU4MTgwOA==",
    "diff_hunk": "@@ -46,39 +46,26 @@ static BlockAssembler AssemblerForTest(const CChainParams& params) {\n     return BlockAssembler(params, options);\n }\n \n-static\n-struct {\n+constexpr static struct {\n     unsigned char extranonce;\n     unsigned int nonce;\n-} blockinfo[] = {\n-    {4, 0xa4a3e223}, {2, 0x15c32f9e}, {1, 0x0375b547}, {1, 0x7004a8a5},\n-    {2, 0xce440296}, {2, 0x52cfe198}, {1, 0x77a72cd0}, {2, 0xbb5d6f84},\n-    {2, 0x83f30c2c}, {1, 0x48a73d5b}, {1, 0xef7dcd01}, {2, 0x6809c6c4},\n-    {2, 0x0883ab3c}, {1, 0x087bbbe2}, {2, 0x2104a814}, {2, 0xdffb6daa},\n-    {1, 0xee8a0a08}, {2, 0xba4237c1}, {1, 0xa70349dc}, {1, 0x344722bb},\n-    {3, 0xd6294733}, {2, 0xec9f5c94}, {2, 0xca2fbc28}, {1, 0x6ba4f406},\n-    {2, 0x015d4532}, {1, 0x6e119b7c}, {2, 0x43e8f314}, {2, 0x27962f38},\n-    {2, 0xb571b51b}, {2, 0xb36bee23}, {2, 0xd17924a8}, {2, 0x6bc212d9},\n-    {1, 0x630d4948}, {2, 0x9a4c4ebb}, {2, 0x554be537}, {1, 0xd63ddfc7},\n-    {2, 0xa10acc11}, {1, 0x759a8363}, {2, 0xfb73090d}, {1, 0xe82c6a34},\n-    {1, 0xe33e92d7}, {3, 0x658ef5cb}, {2, 0xba32ff22}, {5, 0x0227a10c},\n-    {1, 0xa9a70155}, {5, 0xd096d809}, {1, 0x37176174}, {1, 0x830b8d0f},\n-    {1, 0xc6e3910e}, {2, 0x823f3ca8}, {1, 0x99850849}, {1, 0x7521fb81},\n-    {1, 0xaacaabab}, {1, 0xd645a2eb}, {5, 0x7aea1781}, {5, 0x9d6e4b78},\n-    {1, 0x4ce90fd8}, {1, 0xabdc832d}, {6, 0x4a34f32a}, {2, 0xf2524c1c},\n-    {2, 0x1bbeb08a}, {1, 0xad47f480}, {1, 0x9f026aeb}, {1, 0x15a95049},\n-    {2, 0xd1cb95b2}, {2, 0xf84bbda5}, {1, 0x0fa62cd1}, {1, 0xe05f9169},\n-    {1, 0x78d194a9}, {5, 0x3e38147b}, {5, 0x737ba0d4}, {1, 0x63378e10},\n-    {1, 0x6d5f91cf}, {2, 0x88612eb8}, {2, 0xe9639484}, {1, 0xb7fabc9d},\n-    {2, 0x19b01592}, {1, 0x5a90dd31}, {2, 0x5bd7e028}, {2, 0x94d00323},\n-    {1, 0xa9b9c01a}, {1, 0x3a40de61}, {1, 0x56e7eec7}, {5, 0x859f7ef6},\n-    {1, 0xfd8e5630}, {1, 0x2b0c9f7f}, {1, 0xba700e26}, {1, 0x7170a408},\n-    {1, 0x70de86a8}, {1, 0x74d64cd5}, {1, 0x49e738a1}, {2, 0x6910b602},\n-    {0, 0x643c565f}, {1, 0x54264b3f}, {2, 0x97ea6396}, {2, 0x55174459},\n-    {2, 0x03e8779a}, {1, 0x98f34d8f}, {1, 0xc07b2b07}, {1, 0xdfe29668},\n-    {1, 0x3141c7c1}, {1, 0xb3b595f4}, {1, 0x735abf08}, {5, 0x623bfbce},\n-    {2, 0xd351e722}, {1, 0xf4ca48c9}, {1, 0x5b19c670}, {1, 0xa164bf0e},\n-    {2, 0xbbbeb305}, {2, 0xfe1c810a},\n+} BLOCKINFO[] = {\n+    {8, 582909131}, {0, 971462344}, {2, 1169481553}, {6, 66147495}, {7, 427785981}, {8, 80538907}, {8, 207348013}, {2,",
    "path": "src/test/miner_tests.cpp",
    "position": null,
    "original_position": 39,
    "commit_id": "222290f54388270937cb6c174195717e2214ec0d",
    "original_commit_id": "faa2e0d668b2568021a3872ae0d48ec161781605",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done. Added `// clang-format {off,on}`",
    "created_at": "2019-08-05T12:36:26Z",
    "updated_at": "2020-10-27T17:26:00Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16333#discussion_r310581808",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16333",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310581808"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16333#discussion_r310581808"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16333"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/310581808/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 56,
    "side": "RIGHT",
    "in_reply_to_id": 299988583
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/678293077",
    "pull_request_review_id": 716990078,
    "id": 678293077,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3ODI5MzA3Nw==",
    "diff_hunk": "@@ -615,7 +615,7 @@ def __init__(self, header=None):\n             self.calc_sha256()\n \n     def set_null(self):\n-        self.nVersion = 1\n+        self.nVersion = 4",
    "path": "test/functional/test_framework/messages.py",
    "position": 5,
    "original_position": 5,
    "commit_id": "222290f54388270937cb6c174195717e2214ec0d",
    "original_commit_id": "222290f54388270937cb6c174195717e2214ec0d",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "fac90c55be478f0323eafa1d560e it seems that using `from test_framework.blocktools import VERSIONBITS_LAST_OLD_BLOCK_VERSION` in `messages.py` would be a circular import, but perhaps\r\n```suggestion\r\n        self.nVersion = 4  # VERSIONBITS_LAST_OLD_BLOCK_VERSION in test_framework.blocktools\r\n```",
    "created_at": "2021-07-28T13:20:03Z",
    "updated_at": "2021-07-28T13:56:58Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16333#discussion_r678293077",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16333",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/678293077"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16333#discussion_r678293077"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16333"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/678293077/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 618,
    "original_line": 618,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/678322450",
    "pull_request_review_id": 716990078,
    "id": 678322450,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3ODMyMjQ1MA==",
    "diff_hunk": "@@ -77,22 +77,29 @@ std::shared_ptr<CBlock> MinerTestingSetup::Block(const uint256& prev_hash)\n     txCoinbase.vout[1].nValue = txCoinbase.vout[0].nValue;\n     txCoinbase.vout[0].nValue = 0;\n     txCoinbase.vin[0].scriptWitness.SetNull();\n+    // Always pad with OP_0 at the end to avoid bad-cb-length error\n+    txCoinbase.vin[0].scriptSig = CScript{} << WITH_LOCK(::cs_main, return m_node.chainman->m_blockman.LookupBlockIndex(prev_hash)->nHeight + 1) << OP_0;\n     pblock->vtx[0] = MakeTransactionRef(std::move(txCoinbase));\n \n     return pblock;\n }\n \n std::shared_ptr<CBlock> MinerTestingSetup::FinalizeBlock(std::shared_ptr<CBlock> pblock)\n {\n-    LOCK(cs_main); // For m_node.chainman->m_blockman.LookupBlockIndex\n-    GenerateCoinbaseCommitment(*pblock, m_node.chainman->m_blockman.LookupBlockIndex(pblock->hashPrevBlock), Params().GetConsensus());\n+    const CBlockIndex* prev_block{WITH_LOCK(::cs_main, return m_node.chainman->m_blockman.LookupBlockIndex(pblock->hashPrevBlock))};\n+    GenerateCoinbaseCommitment(*pblock, prev_block, Params().GetConsensus());\n \n     pblock->hashMerkleRoot = BlockMerkleRoot(*pblock);\n \n     while (!CheckProofOfWork(pblock->GetHash(), pblock->nBits, Params().GetConsensus())) {\n         ++(pblock->nNonce);\n     }\n \n+    // submit block header, so that miner can get the block height from the\n+    // global state and the node has the topology of the chain\n+    BlockValidationState ignored;\n+    BOOST_CHECK(Assert(m_node.chainman)->ProcessNewBlockHeaders({pblock->GetBlockHeader()}, ignored, Params()));",
    "path": "src/test/validation_block_tests.cpp",
    "position": 27,
    "original_position": 27,
    "commit_id": "222290f54388270937cb6c174195717e2214ec0d",
    "original_commit_id": "222290f54388270937cb6c174195717e2214ec0d",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "222290f5438827093 clever simplification. nit, feel free to ignore\r\n```suggestion\r\n    BOOST_CHECK(Assert(m_node.chainman)->ProcessNewBlockHeaders({pblock->GetBlockHeader()}, /* state */ ignored, Params()));\r\n```",
    "created_at": "2021-07-28T13:52:45Z",
    "updated_at": "2021-07-28T13:56:58Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16333#discussion_r678322450",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16333",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/678322450"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16333#discussion_r678322450"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16333"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/678322450/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 101,
    "original_line": 101,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/678341135",
    "pull_request_review_id": 717054512,
    "id": 678341135,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3ODM0MTEzNQ==",
    "diff_hunk": "@@ -77,22 +77,29 @@ std::shared_ptr<CBlock> MinerTestingSetup::Block(const uint256& prev_hash)\n     txCoinbase.vout[1].nValue = txCoinbase.vout[0].nValue;\n     txCoinbase.vout[0].nValue = 0;\n     txCoinbase.vin[0].scriptWitness.SetNull();\n+    // Always pad with OP_0 at the end to avoid bad-cb-length error\n+    txCoinbase.vin[0].scriptSig = CScript{} << WITH_LOCK(::cs_main, return m_node.chainman->m_blockman.LookupBlockIndex(prev_hash)->nHeight + 1) << OP_0;\n     pblock->vtx[0] = MakeTransactionRef(std::move(txCoinbase));\n \n     return pblock;\n }\n \n std::shared_ptr<CBlock> MinerTestingSetup::FinalizeBlock(std::shared_ptr<CBlock> pblock)\n {\n-    LOCK(cs_main); // For m_node.chainman->m_blockman.LookupBlockIndex\n-    GenerateCoinbaseCommitment(*pblock, m_node.chainman->m_blockman.LookupBlockIndex(pblock->hashPrevBlock), Params().GetConsensus());\n+    const CBlockIndex* prev_block{WITH_LOCK(::cs_main, return m_node.chainman->m_blockman.LookupBlockIndex(pblock->hashPrevBlock))};\n+    GenerateCoinbaseCommitment(*pblock, prev_block, Params().GetConsensus());\n \n     pblock->hashMerkleRoot = BlockMerkleRoot(*pblock);\n \n     while (!CheckProofOfWork(pblock->GetHash(), pblock->nBits, Params().GetConsensus())) {\n         ++(pblock->nNonce);\n     }\n \n+    // submit block header, so that miner can get the block height from the\n+    // global state and the node has the topology of the chain\n+    BlockValidationState ignored;\n+    BOOST_CHECK(Assert(m_node.chainman)->ProcessNewBlockHeaders({pblock->GetBlockHeader()}, ignored, Params()));",
    "path": "src/test/validation_block_tests.cpp",
    "position": 27,
    "original_position": 27,
    "commit_id": "222290f54388270937cb6c174195717e2214ec0d",
    "original_commit_id": "222290f54388270937cb6c174195717e2214ec0d",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I don't think named args are useful for args whose meaning is already clear. Otherwise we could add the comment to every arg. So leaving as-is.",
    "created_at": "2021-07-28T14:12:33Z",
    "updated_at": "2021-07-28T14:12:34Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16333#discussion_r678341135",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16333",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/678341135"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16333#discussion_r678341135"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16333"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/678341135/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 101,
    "original_line": 101,
    "side": "RIGHT",
    "in_reply_to_id": 678322450
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/678343892",
    "pull_request_review_id": 717058368,
    "id": 678343892,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3ODM0Mzg5Mg==",
    "diff_hunk": "@@ -615,7 +615,7 @@ def __init__(self, header=None):\n             self.calc_sha256()\n \n     def set_null(self):\n-        self.nVersion = 1\n+        self.nVersion = 4",
    "path": "test/functional/test_framework/messages.py",
    "position": 5,
    "original_position": 5,
    "commit_id": "222290f54388270937cb6c174195717e2214ec0d",
    "original_commit_id": "222290f54388270937cb6c174195717e2214ec0d",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Might do if I have to re-touch",
    "created_at": "2021-07-28T14:15:31Z",
    "updated_at": "2021-07-28T14:15:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/16333#discussion_r678343892",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16333",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/678343892"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/16333#discussion_r678343892"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16333"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/678343892/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 618,
    "original_line": 618,
    "side": "RIGHT",
    "in_reply_to_id": 678293077
  }
]