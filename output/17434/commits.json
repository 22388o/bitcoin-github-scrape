[
  {
    "sha": "eec8608577323536b55e75268a66b8c5657529d0",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzplZWM4NjA4NTc3MzIzNTM2YjU1ZTc1MjY4YTY2YjhjNTY1NzUyOWQw",
    "commit": {
      "author": {
        "name": "Mark Erhardt",
        "email": "mark@bitgo.com",
        "date": "2019-11-11T22:55:50Z"
      },
      "committer": {
        "name": "Mark Erhardt",
        "email": "mark@bitgo.com",
        "date": "2019-11-11T23:02:31Z"
      },
      "message": "Move CheckBlockIndex to validation.cpp\n\nThe global fCheckBlockIndex is only used once and has no interaction.",
      "tree": {
        "sha": "da57ead7174084184c5c172a612d57cfb845400d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/da57ead7174084184c5c172a612d57cfb845400d"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/eec8608577323536b55e75268a66b8c5657529d0",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "no_user",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEENfStpiPrn+OjvH72e6A1yluQFxMFAl3J6IkACgkQe6A1yluQ\nFxP1rQ//Xlg6nFu1TBT2gy8jjUcCj38vkhaXZSF8g2b7ZHIAvV5dkrhG3Du7FKMM\n0YYpiTVcYu7pmXC6+mHiv1Vi2y8IRv/J0tgRf+6ADZKo0WZNU8hxFdFDGoFkNEJA\nW/pDXF3wFoK7NsJBIJ2UnqBsh0nT0AUs00plDz9JvlEc6Jzg8cnC4Ca9Wbi+TUo8\nH+I9CrQ2Nmb2bJIcBHjSeOMmy3b1HMU6ZwOGmgBW5bWyukAtN+TyaK5MlftR1tAr\ncQ3PCZW+1GPUDdntiFKRLfDPziFRetkaNkQfuYbhovuSe5459HYXmjj8CHexaYsl\nvssOnBPFpzIsNuJduKicL0gPw6KG86h4VikwtVvpP0HObRq66dfqH1NXwTr2BedO\ni3EXB7Dh0vxAPPR/rv1kVWW1QKkt9vTozo2x8h1c5p+ouFXTOczLq6jnFVVrNk3a\nWuab118yK1wZOc1nJ0I4319wO0mFHfBytaBBLTRGk2LueAcU8y0r368D+DrZ7Dug\n+8P8GaUVsYMMn9tS+kLUWqjn5pObmTc82lt5vCUCu+3ts0GHNwfdxq6IbvIIsbo+\nK/gKhLJBK+GiBNIxKJn/eDkVSWtkO5mOQIl/W/rcs4eFOEYUNfG3FrzgZgzYhXJs\nHVQE3prGBKkxdDngVQ2y1o91XMbMwy95cfZydcZ9vJJBIcqmZfg=\n=mUJZ\n-----END PGP SIGNATURE-----",
        "payload": "tree da57ead7174084184c5c172a612d57cfb845400d\nparent a7aec7ad97949a82f870c033d8fd8b65d772eacb\nauthor Mark Erhardt <mark@bitgo.com> 1573512950 -0500\ncommitter Mark Erhardt <mark@bitgo.com> 1573513351 -0500\n\nMove CheckBlockIndex to validation.cpp\n\nThe global fCheckBlockIndex is only used once and has no interaction.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/eec8608577323536b55e75268a66b8c5657529d0",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/eec8608577323536b55e75268a66b8c5657529d0",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/eec8608577323536b55e75268a66b8c5657529d0/comments",
    "author": null,
    "committer": null,
    "parents": [
      {
        "sha": "a7aec7ad97949a82f870c033d8fd8b65d772eacb",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a7aec7ad97949a82f870c033d8fd8b65d772eacb",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/a7aec7ad97949a82f870c033d8fd8b65d772eacb"
      }
    ],
    "stats": {
      "total": 14,
      "additions": 11,
      "deletions": 3
    },
    "files": [
      {
        "sha": "9470b354f3fac2a77263fbcba870631b0f5a99df",
        "filename": "src/init.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 1,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/eec8608577323536b55e75268a66b8c5657529d0/src/init.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/eec8608577323536b55e75268a66b8c5657529d0/src/init.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/init.cpp?ref=eec8608577323536b55e75268a66b8c5657529d0",
        "patch": "@@ -1009,7 +1009,6 @@ bool AppInitParameterInteraction()\n     if (ratio != 0) {\n         mempool.setSanityCheck(1.0 / ratio);\n     }\n-    fCheckBlockIndex = gArgs.GetBoolArg(\"-checkblockindex\", chainparams.DefaultConsistencyChecks());\n     fCheckpointsEnabled = gArgs.GetBoolArg(\"-checkpoints\", DEFAULT_CHECKPOINTS_ENABLED);\n \n     hashAssumeValid = uint256S(gArgs.GetArg(\"-assumevalid\", chainparams.GetConsensus().defaultAssumeValid.GetHex()));\n@@ -1133,6 +1132,8 @@ bool AppInitParameterInteraction()\n \n     nMaxTipAge = gArgs.GetArg(\"-maxtipage\", DEFAULT_MAX_TIP_AGE);\n \n+    ValidationParameterInteraction(chainparams);\n+\n     return true;\n }\n "
      },
      {
        "sha": "a017a20402d828dc36000433fa5de86aa77bd3f7",
        "filename": "src/test/util/setup_common.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/eec8608577323536b55e75268a66b8c5657529d0/src/test/util/setup_common.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/eec8608577323536b55e75268a66b8c5657529d0/src/test/util/setup_common.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/util/setup_common.cpp?ref=eec8608577323536b55e75268a66b8c5657529d0",
        "patch": "@@ -68,6 +68,7 @@ BasicTestingSetup::BasicTestingSetup(const std::string& chainName)\n     fs::create_directories(m_path_root);\n     gArgs.ForceSetArg(\"-datadir\", m_path_root.string());\n     ClearDatadirCache();\n+    gArgs.ForceSetArg(\"-checkblockindex\", \"1\");\n     SelectParams(chainName);\n     SeedInsecureRand();\n     gArgs.ForceSetArg(\"-printtoconsole\", \"0\");\n@@ -79,7 +80,6 @@ BasicTestingSetup::BasicTestingSetup(const std::string& chainName)\n     SetupNetworking();\n     InitSignatureCache();\n     InitScriptExecutionCache();\n-    fCheckBlockIndex = true;\n     static bool noui_connected = false;\n     if (!noui_connected) {\n         noui_connect();"
      },
      {
        "sha": "e8efc7fe1b2ffa3c320a776b2dcd9f5e5e9bf646",
        "filename": "src/validation.cpp",
        "status": "modified",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/eec8608577323536b55e75268a66b8c5657529d0/src/validation.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/eec8608577323536b55e75268a66b8c5657529d0/src/validation.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/validation.cpp?ref=eec8608577323536b55e75268a66b8c5657529d0",
        "patch": "@@ -180,6 +180,11 @@ CBlockIndex* FindForkInGlobalIndex(const CChain& chain, const CBlockLocator& loc\n \n std::unique_ptr<CBlockTreeDB> pblocktree;\n \n+void ValidationParameterInteraction(const CChainParams& chainparams)\n+{\n+    fCheckBlockIndex = gArgs.GetBoolArg(\"-checkblockindex\", chainparams.DefaultConsistencyChecks());\n+}\n+\n // See definition for documentation\n static void FindFilesToPruneManual(std::set<int>& setFilesToPrune, int nManualPruneHeight);\n static void FindFilesToPrune(std::set<int>& setFilesToPrune, uint64_t nPruneAfterHeight);"
      },
      {
        "sha": "745c1397c2da767e1a4c2427b103f517b2281e18",
        "filename": "src/validation.h",
        "status": "modified",
        "additions": 3,
        "deletions": 1,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/eec8608577323536b55e75268a66b8c5657529d0/src/validation.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/eec8608577323536b55e75268a66b8c5657529d0/src/validation.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/validation.h?ref=eec8608577323536b55e75268a66b8c5657529d0",
        "patch": "@@ -152,7 +152,6 @@ extern std::atomic_bool fReindex;\n  */\n extern bool g_parallel_script_checks;\n extern bool fRequireStandard;\n-extern bool fCheckBlockIndex;\n extern bool fCheckpointsEnabled;\n extern size_t nCoinCacheUsage;\n /** A fee rate smaller than this is considered zero fee (for relaying, mining and transaction creation) */\n@@ -293,6 +292,9 @@ int VersionBitsTipStateSinceHeight(const Consensus::Params& params, Consensus::D\n /** Apply the effects of this transaction on the UTXO set represented by view */\n void UpdateCoins(const CTransaction& tx, CCoinsViewCache& inputs, int nHeight);\n \n+/** Parse and validate parameters only used in validation.cpp */\n+void ValidationParameterInteraction(const CChainParams& chainparams);\n+\n /** Transaction validation functions */\n \n /**"
      }
    ]
  }
]