[
  {
    "sha": "9113784bd6055e51703306a23fbcefba343f018a",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo5MTEzNzg0YmQ2MDU1ZTUxNzAzMzA2YTIzZmJjZWZiYTM0M2YwMThh",
    "commit": {
      "author": {
        "name": "CryptAxe",
        "email": "cryptaxe@gmail.com",
        "date": "2017-02-08T06:12:39Z"
      },
      "committer": {
        "name": "CryptAxe",
        "email": "cryptaxe@gmail.com",
        "date": "2017-02-08T06:26:36Z"
      },
      "message": "GUI: Display warning when attempting address reuse\n\nAdded address reuse key 'au' to destdata\n\nAdded informative QMessageBox popup warning when user attempts address reuse",
      "tree": {
        "sha": "ca76b8de9d170cf33af0c83bf13f3ae383abc614",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ca76b8de9d170cf33af0c83bf13f3ae383abc614"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9113784bd6055e51703306a23fbcefba343f018a",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "expired_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIcBAABCAAGBQJYmrogAAoJEJHwhYy7m2V014QP/2FUFT8mqZHW6tPY2GfdmX6Z\ndGECPpTWiWqBUorKT4dJo0go96sBEoYhw2M2q9BQgiy3p/INoC7KqoX6O/+uWeMQ\n6VLyOSsnWx4cDGBLoVTkkpjHp0/agpLTGokMR0IA6NaqpTAeWURpbxJwxDW4FQ6Z\nT7kqOfartqbf4N3a9uJDjnml0fqZr0Y29MO6V05G2DDxGWygs2JbD7Q5+ejskzrG\nk0lV37lCtLi78mkimuaDRN096RaFwht8zaSeulNOqZcUd9KanEBy9IpUOkU6pR0X\nq84xxvV2dMte/UjhX7iLc/g75obWb/EHl2YBK+YwY1Jdk57l7c/7GOelIn/OuYKJ\nwPiB4eZRZCL/7s5woRw/u37eqmy4pvtepzlcuwPxB2qMX9luv0P/CRaH3BWB/JNL\ngvmD7LtftkqmCVrB8s3MGeoF4yR/aKmYNEgo3vBihxbjcVok9R43jKUHC/2oFhhV\n4Ae5fdBHh5fRzOYT8bEmDK2ja4bPZhiEJj60lK62ZV6FbrAkZfipItyrrPaqHUrg\nfnMV90mc3NkAO/futUQhVYP0pcy1DUGGf6Am5adgqvYMqjwKh66udKEbDXHmMNcR\nkFLlKHgxE8lxKoR8h6d+fXy9U6yOV3gB33wnOH6TISk6MxRNfYyhXPmdbuA8SHHH\nG13s+HJv5BbcwOmOvBiF\n=dqGA\n-----END PGP SIGNATURE-----",
        "payload": "tree ca76b8de9d170cf33af0c83bf13f3ae383abc614\nparent b709fe7ffc44ae14bbd2403cdfbfa4fcf94cef6b\nauthor CryptAxe <cryptaxe@gmail.com> 1486534359 -0800\ncommitter CryptAxe <cryptaxe@gmail.com> 1486535196 -0800\n\nGUI: Display warning when attempting address reuse\n\nAdded address reuse key 'au' to destdata\n\nAdded informative QMessageBox popup warning when user attempts address reuse\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9113784bd6055e51703306a23fbcefba343f018a",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/9113784bd6055e51703306a23fbcefba343f018a",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9113784bd6055e51703306a23fbcefba343f018a/comments",
    "author": {
      "login": "CryptAxe",
      "id": 8107318,
      "node_id": "MDQ6VXNlcjgxMDczMTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8107318?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CryptAxe",
      "html_url": "https://github.com/CryptAxe",
      "followers_url": "https://api.github.com/users/CryptAxe/followers",
      "following_url": "https://api.github.com/users/CryptAxe/following{/other_user}",
      "gists_url": "https://api.github.com/users/CryptAxe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CryptAxe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CryptAxe/subscriptions",
      "organizations_url": "https://api.github.com/users/CryptAxe/orgs",
      "repos_url": "https://api.github.com/users/CryptAxe/repos",
      "events_url": "https://api.github.com/users/CryptAxe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CryptAxe/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "CryptAxe",
      "id": 8107318,
      "node_id": "MDQ6VXNlcjgxMDczMTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8107318?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CryptAxe",
      "html_url": "https://github.com/CryptAxe",
      "followers_url": "https://api.github.com/users/CryptAxe/followers",
      "following_url": "https://api.github.com/users/CryptAxe/following{/other_user}",
      "gists_url": "https://api.github.com/users/CryptAxe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CryptAxe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CryptAxe/subscriptions",
      "organizations_url": "https://api.github.com/users/CryptAxe/orgs",
      "repos_url": "https://api.github.com/users/CryptAxe/repos",
      "events_url": "https://api.github.com/users/CryptAxe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CryptAxe/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "b709fe7ffc44ae14bbd2403cdfbfa4fcf94cef6b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b709fe7ffc44ae14bbd2403cdfbfa4fcf94cef6b",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/b709fe7ffc44ae14bbd2403cdfbfa4fcf94cef6b"
      }
    ],
    "stats": {
      "total": 43,
      "additions": 43,
      "deletions": 0
    },
    "files": [
      {
        "sha": "567445439b39a2501afd026b0622777c6694e858",
        "filename": "src/qt/sendcoinsdialog.cpp",
        "status": "modified",
        "additions": 21,
        "deletions": 0,
        "changes": 21,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/9113784bd6055e51703306a23fbcefba343f018a/src/qt/sendcoinsdialog.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/9113784bd6055e51703306a23fbcefba343f018a/src/qt/sendcoinsdialog.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/sendcoinsdialog.cpp?ref=9113784bd6055e51703306a23fbcefba343f018a",
        "patch": "@@ -263,6 +263,27 @@ void SendCoinsDialog::on_sendButton_clicked()\n     QStringList formatted;\n     Q_FOREACH(const SendCoinsRecipient &rcp, currentTransaction.getRecipients())\n     {\n+        // If user is attempting address reuse, show an informative warning\n+        if (model->isUsed(rcp.address.toStdString()))\n+        {\n+            QString reuseWarningText = tr(\n+                        \"You have sent to the Bitcoin address %1 already!\\n\\n\"\n+                        \"Sending to the same address twice is technically not supported and \"\n+                        \"will reduce your own security as well as the privacy of all Bitcoin users.\"\n+                    ).arg(rcp.address) + \"\\n\";\n+\n+            QMessageBox reuseMessage(\"Warning: address reuse!\",\n+                                     reuseWarningText,\n+                                     QMessageBox::Warning,\n+                                     QMessageBox::Yes | QMessageBox::Escape,\n+                                     QMessageBox::Cancel | QMessageBox::Default,\n+                                     QMessageBox::NoButton,\n+                                     this);\n+\n+            if (reuseMessage.exec() != QMessageBox::Yes)\n+                return;\n+        }\n+\n         // generate bold amount string\n         QString amount = \"<b>\" + BitcoinUnits::formatHtmlWithUnit(model->getOptionsModel()->getDisplayUnit(), rcp.amount);\n         amount.append(\"</b>\");"
      },
      {
        "sha": "714ff4f2a7b58e578076e11e1728e0102eb9df86",
        "filename": "src/qt/walletmodel.cpp",
        "status": "modified",
        "additions": 21,
        "deletions": 0,
        "changes": 21,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/9113784bd6055e51703306a23fbcefba343f018a/src/qt/walletmodel.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/9113784bd6055e51703306a23fbcefba343f018a/src/qt/walletmodel.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/walletmodel.cpp?ref=9113784bd6055e51703306a23fbcefba343f018a",
        "patch": "@@ -355,6 +355,9 @@ WalletModel::SendCoinsReturn WalletModel::sendCoins(WalletModelTransaction &tran\n \n                 std::map<CTxDestination, CAddressBookData>::iterator mi = wallet->mapAddressBook.find(dest);\n \n+                std::string key = \"au\"; // \"au\" prefix = \"address used\" in destdata\n+                wallet->AddDestData(mi->first, key, \"1\");\n+\n                 // Check if we have a new address or an updated label\n                 if (mi == wallet->mapAddressBook.end())\n                 {\n@@ -591,6 +594,24 @@ bool WalletModel::isSpent(const COutPoint& outpoint) const\n     return wallet->IsSpent(outpoint.hash, outpoint.n);\n }\n \n+bool WalletModel::isUsed(const std::string& address) const\n+{\n+    LOCK2(cs_main, wallet->cs_wallet);\n+    for (const std::pair<CTxDestination, CAddressBookData>& item : wallet->mapAddressBook)\n+    {\n+        CBitcoinAddress addr(item.first);\n+        if (addr.IsValid() && addr.ToString() == address)\n+        {\n+            for (const std::pair<std::string, std::string>& item2 : item.second.destdata)\n+            {\n+                if (item2.first.size() == 2 && item2.first.substr(0,2) == \"au\")\n+                    return (item2.second == \"1\");\n+            }\n+        }\n+    }\n+    return false;\n+}\n+\n // AvailableCoins + LockedCoins grouped by wallet address (put change in one group with wallet address)\n void WalletModel::listCoins(std::map<QString, std::vector<COutput> >& mapCoins) const\n {"
      },
      {
        "sha": "8cb98adb68a5eb658f0f097dfede58bdea0b14da",
        "filename": "src/qt/walletmodel.h",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/9113784bd6055e51703306a23fbcefba343f018a/src/qt/walletmodel.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/9113784bd6055e51703306a23fbcefba343f018a/src/qt/walletmodel.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/walletmodel.h?ref=9113784bd6055e51703306a23fbcefba343f018a",
        "patch": "@@ -194,6 +194,7 @@ class WalletModel : public QObject\n     bool getPrivKey(const CKeyID &address, CKey& vchPrivKeyOut) const;\n     void getOutputs(const std::vector<COutPoint>& vOutpoints, std::vector<COutput>& vOutputs);\n     bool isSpent(const COutPoint& outpoint) const;\n+    bool isUsed(const std::string& address) const;\n     void listCoins(std::map<QString, std::vector<COutput> >& mapCoins) const;\n \n     bool isLockedCoin(uint256 hash, unsigned int n) const;"
      }
    ]
  },
  {
    "sha": "8f01b1f8f6e918b0a52397e12257cdc1f47dfc9d",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo4ZjAxYjFmOGY2ZTkxOGIwYTUyMzk3ZTEyMjU3Y2RjMWY0N2RmYzlk",
    "commit": {
      "author": {
        "name": "CryptAxe",
        "email": "cryptaxe@gmail.com",
        "date": "2017-02-09T06:38:34Z"
      },
      "committer": {
        "name": "CryptAxe",
        "email": "cryptaxe@gmail.com",
        "date": "2017-02-09T06:38:34Z"
      },
      "message": "Update isUsed, destdata used key, warning text",
      "tree": {
        "sha": "304c5d6ecd014a31098e111571e42f784f9a72be",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/304c5d6ecd014a31098e111571e42f784f9a72be"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8f01b1f8f6e918b0a52397e12257cdc1f47dfc9d",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "expired_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIcBAABCAAGBQJYnBM2AAoJEJHwhYy7m2V0i/8P/1RodRC692Qw5ygKemixVLF7\nk96WPvmzM5TbUuzdyAfsVAihhNS8u8vZh6c+4C8KRMvP5OWqNUulxxlabuACD6rN\nlEbvtK49i5GNi2xfkMuwy6SimqgyhYEiogRKGFdNqxjuwWa8cBbS8KG8YAMNCbVt\nZZRdxnWlZGtMzX8vGsd74AFV8rWkul939iQ0qKekiArqbCME07C8Qvd6+kcvZv7R\n3uwmyB8GHVhQ0voHEmmxPjwe2iJrvHUF2X37uvmzLdHZ4Su8mVRwvdIaWxLbVL6p\nS5G9p8V1lRp3MWminI0p2SpXirBoVSwjJZi+dqQVtTzvgROX38D3mTnzTFn6JUnW\ny6g4UrptUkaFbSG+N67xOyAeadMML0WIRV7wA8yj2eUIPdsvPTH1s1I6D/cxuFqw\nawSPQZ7bAJUZH1IIyNZQcwHeh8VCc5kPLuo1UugUXZ9U3rE3JXPsqWHMeuM7RxyL\nL4DV28o4sXidAhjm4MQwFm1FSntEIkzkNeb/RkoTPMQ0Xb/WmI/Zhw1dVfWwh7Ly\nRZ2+Oe598BRfA8OQf6r7uwwuEdC/GcBqBFL+COu7dRR4IyZybCsljL0luMj/I83H\nItVku47+leOMgwTr6VmBYmFeN2/eP5xGeujxOrslkKA7tOlsKIRcg58D2wKUZhMo\nhojVAKuf7QPzJNaI6GyS\n=iTwk\n-----END PGP SIGNATURE-----",
        "payload": "tree 304c5d6ecd014a31098e111571e42f784f9a72be\nparent 9113784bd6055e51703306a23fbcefba343f018a\nauthor CryptAxe <cryptaxe@gmail.com> 1486622314 -0800\ncommitter CryptAxe <cryptaxe@gmail.com> 1486622314 -0800\n\nUpdate isUsed, destdata used key, warning text\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8f01b1f8f6e918b0a52397e12257cdc1f47dfc9d",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/8f01b1f8f6e918b0a52397e12257cdc1f47dfc9d",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8f01b1f8f6e918b0a52397e12257cdc1f47dfc9d/comments",
    "author": {
      "login": "CryptAxe",
      "id": 8107318,
      "node_id": "MDQ6VXNlcjgxMDczMTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8107318?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CryptAxe",
      "html_url": "https://github.com/CryptAxe",
      "followers_url": "https://api.github.com/users/CryptAxe/followers",
      "following_url": "https://api.github.com/users/CryptAxe/following{/other_user}",
      "gists_url": "https://api.github.com/users/CryptAxe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CryptAxe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CryptAxe/subscriptions",
      "organizations_url": "https://api.github.com/users/CryptAxe/orgs",
      "repos_url": "https://api.github.com/users/CryptAxe/repos",
      "events_url": "https://api.github.com/users/CryptAxe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CryptAxe/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "CryptAxe",
      "id": 8107318,
      "node_id": "MDQ6VXNlcjgxMDczMTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8107318?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CryptAxe",
      "html_url": "https://github.com/CryptAxe",
      "followers_url": "https://api.github.com/users/CryptAxe/followers",
      "following_url": "https://api.github.com/users/CryptAxe/following{/other_user}",
      "gists_url": "https://api.github.com/users/CryptAxe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CryptAxe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CryptAxe/subscriptions",
      "organizations_url": "https://api.github.com/users/CryptAxe/orgs",
      "repos_url": "https://api.github.com/users/CryptAxe/repos",
      "events_url": "https://api.github.com/users/CryptAxe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CryptAxe/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "9113784bd6055e51703306a23fbcefba343f018a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9113784bd6055e51703306a23fbcefba343f018a",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/9113784bd6055e51703306a23fbcefba343f018a"
      }
    ],
    "stats": {
      "total": 40,
      "additions": 18,
      "deletions": 22
    },
    "files": [
      {
        "sha": "591379a94bcb4fc969d8f45c98c740d366c4a1b2",
        "filename": "src/qt/sendcoinsdialog.cpp",
        "status": "modified",
        "additions": 6,
        "deletions": 7,
        "changes": 13,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8f01b1f8f6e918b0a52397e12257cdc1f47dfc9d/src/qt/sendcoinsdialog.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8f01b1f8f6e918b0a52397e12257cdc1f47dfc9d/src/qt/sendcoinsdialog.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/sendcoinsdialog.cpp?ref=8f01b1f8f6e918b0a52397e12257cdc1f47dfc9d",
        "patch": "@@ -268,16 +268,15 @@ void SendCoinsDialog::on_sendButton_clicked()\n         {\n             QString reuseWarningText = tr(\n                         \"You have sent to the Bitcoin address %1 already!\\n\\n\"\n-                        \"Sending to the same address twice is technically not supported and \"\n-                        \"will reduce your own security as well as the privacy of all Bitcoin users.\"\n+                        \"Address reuse is highly discouraged and will reduce \"\n+                        \"your own security as well as the privacy of all Bitcoin users.\"\n+                        \"\\n\\nAre you sure you want to do this?\"\n                     ).arg(rcp.address) + \"\\n\";\n \n-            QMessageBox reuseMessage(\"Warning: address reuse!\",\n+            QMessageBox reuseMessage(QMessageBox::Warning,\n+                                     \"Warning: address reuse!\",\n                                      reuseWarningText,\n-                                     QMessageBox::Warning,\n-                                     QMessageBox::Yes | QMessageBox::Escape,\n-                                     QMessageBox::Cancel | QMessageBox::Default,\n-                                     QMessageBox::NoButton,\n+                                     QMessageBox::Cancel | QMessageBox::Yes,\n                                      this);\n \n             if (reuseMessage.exec() != QMessageBox::Yes)"
      },
      {
        "sha": "f69275f14fb21a47134fa62c25e301ea080221ac",
        "filename": "src/qt/walletmodel.cpp",
        "status": "modified",
        "additions": 7,
        "deletions": 15,
        "changes": 22,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8f01b1f8f6e918b0a52397e12257cdc1f47dfc9d/src/qt/walletmodel.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8f01b1f8f6e918b0a52397e12257cdc1f47dfc9d/src/qt/walletmodel.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/walletmodel.cpp?ref=8f01b1f8f6e918b0a52397e12257cdc1f47dfc9d",
        "patch": "@@ -355,8 +355,7 @@ WalletModel::SendCoinsReturn WalletModel::sendCoins(WalletModelTransaction &tran\n \n                 std::map<CTxDestination, CAddressBookData>::iterator mi = wallet->mapAddressBook.find(dest);\n \n-                std::string key = \"au\"; // \"au\" prefix = \"address used\" in destdata\n-                wallet->AddDestData(mi->first, key, \"1\");\n+                wallet->AddDestData(mi->first, DESTDATA_USED, \"1\");\n \n                 // Check if we have a new address or an updated label\n                 if (mi == wallet->mapAddressBook.end())\n@@ -597,19 +596,12 @@ bool WalletModel::isSpent(const COutPoint& outpoint) const\n bool WalletModel::isUsed(const std::string& address) const\n {\n     LOCK2(cs_main, wallet->cs_wallet);\n-    for (const std::pair<CTxDestination, CAddressBookData>& item : wallet->mapAddressBook)\n-    {\n-        CBitcoinAddress addr(item.first);\n-        if (addr.IsValid() && addr.ToString() == address)\n-        {\n-            for (const std::pair<std::string, std::string>& item2 : item.second.destdata)\n-            {\n-                if (item2.first.size() == 2 && item2.first.substr(0,2) == \"au\")\n-                    return (item2.second == \"1\");\n-            }\n-        }\n-    }\n-    return false;\n+\n+    const CTxDestination& dest = CBitcoinAddress(address).Get();\n+    std::string ret = \"\";\n+    wallet->GetDestData(dest, DESTDATA_USED, &ret);\n+\n+    return (ret == \"1\");\n }\n \n // AvailableCoins + LockedCoins grouped by wallet address (put change in one group with wallet address)"
      },
      {
        "sha": "57cf6df681e8158288fc2e102bdb4c93d5e51148",
        "filename": "src/wallet/wallet.h",
        "status": "modified",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8f01b1f8f6e918b0a52397e12257cdc1f47dfc9d/src/wallet/wallet.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8f01b1f8f6e918b0a52397e12257cdc1f47dfc9d/src/wallet/wallet.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.h?ref=8f01b1f8f6e918b0a52397e12257cdc1f47dfc9d",
        "patch": "@@ -74,6 +74,11 @@ static const bool DEFAULT_USE_HD_WALLET = true;\n \n extern const char * DEFAULT_WALLET_DAT;\n \n+/**\n+ * destdata keys\n+ */\n+static const char * const DESTDATA_USED = \"used\";\n+\n class CBlockIndex;\n class CCoinControl;\n class COutput;"
      }
    ]
  },
  {
    "sha": "18c1325dcdb2eb2f2119bd558c111ed439038cc6",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoxOGMxMzI1ZGNkYjJlYjJmMjExOWJkNTU4YzExMWVkNDM5MDM4Y2M2",
    "commit": {
      "author": {
        "name": "CryptAxe",
        "email": "cryptaxe@gmail.com",
        "date": "2017-02-09T18:50:19Z"
      },
      "committer": {
        "name": "CryptAxe",
        "email": "cryptaxe@gmail.com",
        "date": "2017-02-09T18:50:19Z"
      },
      "message": "Add destdata after updating address book",
      "tree": {
        "sha": "18cdfe728f6082a80b19406be6987d9c87026aef",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/18cdfe728f6082a80b19406be6987d9c87026aef"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/18c1325dcdb2eb2f2119bd558c111ed439038cc6",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "expired_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIcBAABCAAGBQJYnLnrAAoJEJHwhYy7m2V0DpgP/jV9YylEZodma/ywTIyx5xbC\nHWPw8QQfj4DR3h7ataqBk2//Tu9j/kr+kFdm1s871teva/de9yEX3dK8FtLwyQaW\nMD+Jjk2P9PhjNm7LFrsJZK518Qnm38zgbKUHoZcDlPZdgH8dXzMoQA2jqFWDcMbI\nEgbCTcrv2rrp517Z4tgzdYsNr0Og+ht/V7qQ5Av3CZSXisfse48vqqW+HnktoQ5x\nOOEV3/c5JTkj+BI4ksuJfeVHbiKV5GtiikZ6Z7BvVOl/CXeCtrorPFoTRypPPgWE\nBPJrw1Hv51HyJqak8jGQmO4iTG+4qWgs38gWavEDmrhy6jFslrzH1NQF53PLFd+a\nEiqLU0FKth1M4Ws22NetpEy2WOzk7Vc4Tg3bwzjSyMvE03M+U3OC/Vq9h7OphhMD\n124Q6tx8lgDWONPGuZDVsamqZ65JkrftT9bg+Ix6oWe9PysSgIS5tHQPpweVJwzk\n3bAYkPJTzW1UFhxCjJ2HO2c6V1MrRFt2yU+dIjcFhMYHHXeVqjVWmGC6l0pbVjOT\nvXalS/2BNwTT7G4rPY5kHZHCEIdRhVdC2cAp/Wx5NTKJmvaR7pTvrUEWEa9tvlah\nOKOFaIzZYzi1ywER7zl9FKY2UX6iLl73mC546lJBo7pv0ctCROlR2kOZaNKW/RkM\nDkarWEdzSqqiDu834aiR\n=T1O/\n-----END PGP SIGNATURE-----",
        "payload": "tree 18cdfe728f6082a80b19406be6987d9c87026aef\nparent 8f01b1f8f6e918b0a52397e12257cdc1f47dfc9d\nauthor CryptAxe <cryptaxe@gmail.com> 1486666219 -0800\ncommitter CryptAxe <cryptaxe@gmail.com> 1486666219 -0800\n\nAdd destdata after updating address book\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/18c1325dcdb2eb2f2119bd558c111ed439038cc6",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/18c1325dcdb2eb2f2119bd558c111ed439038cc6",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/18c1325dcdb2eb2f2119bd558c111ed439038cc6/comments",
    "author": {
      "login": "CryptAxe",
      "id": 8107318,
      "node_id": "MDQ6VXNlcjgxMDczMTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8107318?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CryptAxe",
      "html_url": "https://github.com/CryptAxe",
      "followers_url": "https://api.github.com/users/CryptAxe/followers",
      "following_url": "https://api.github.com/users/CryptAxe/following{/other_user}",
      "gists_url": "https://api.github.com/users/CryptAxe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CryptAxe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CryptAxe/subscriptions",
      "organizations_url": "https://api.github.com/users/CryptAxe/orgs",
      "repos_url": "https://api.github.com/users/CryptAxe/repos",
      "events_url": "https://api.github.com/users/CryptAxe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CryptAxe/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "CryptAxe",
      "id": 8107318,
      "node_id": "MDQ6VXNlcjgxMDczMTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8107318?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CryptAxe",
      "html_url": "https://github.com/CryptAxe",
      "followers_url": "https://api.github.com/users/CryptAxe/followers",
      "following_url": "https://api.github.com/users/CryptAxe/following{/other_user}",
      "gists_url": "https://api.github.com/users/CryptAxe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CryptAxe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CryptAxe/subscriptions",
      "organizations_url": "https://api.github.com/users/CryptAxe/orgs",
      "repos_url": "https://api.github.com/users/CryptAxe/repos",
      "events_url": "https://api.github.com/users/CryptAxe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CryptAxe/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "8f01b1f8f6e918b0a52397e12257cdc1f47dfc9d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8f01b1f8f6e918b0a52397e12257cdc1f47dfc9d",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/8f01b1f8f6e918b0a52397e12257cdc1f47dfc9d"
      }
    ],
    "stats": {
      "total": 4,
      "additions": 2,
      "deletions": 2
    },
    "files": [
      {
        "sha": "463d545bd70987464a3e06581e321294484d4246",
        "filename": "src/qt/walletmodel.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/18c1325dcdb2eb2f2119bd558c111ed439038cc6/src/qt/walletmodel.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/18c1325dcdb2eb2f2119bd558c111ed439038cc6/src/qt/walletmodel.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/walletmodel.cpp?ref=18c1325dcdb2eb2f2119bd558c111ed439038cc6",
        "patch": "@@ -355,8 +355,6 @@ WalletModel::SendCoinsReturn WalletModel::sendCoins(WalletModelTransaction &tran\n \n                 std::map<CTxDestination, CAddressBookData>::iterator mi = wallet->mapAddressBook.find(dest);\n \n-                wallet->AddDestData(mi->first, DESTDATA_USED, \"1\");\n-\n                 // Check if we have a new address or an updated label\n                 if (mi == wallet->mapAddressBook.end())\n                 {\n@@ -366,6 +364,8 @@ WalletModel::SendCoinsReturn WalletModel::sendCoins(WalletModelTransaction &tran\n                 {\n                     wallet->SetAddressBook(dest, strLabel, \"\"); // \"\" means don't change purpose\n                 }\n+\n+                wallet->AddDestData(dest, DESTDATA_USED, \"1\");\n             }\n         }\n         Q_EMIT coinsSent(wallet, rcp, transaction_array);"
      }
    ]
  }
]