[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/468404792",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15463#issuecomment-468404792",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15463",
    "id": 468404792,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2ODQwNDc5Mg==",
    "user": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-28T19:28:11Z",
    "updated_at": "2019-02-28T19:28:11Z",
    "author_association": "MEMBER",
    "body": "tag 0.18?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/468404792/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/475368896",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15463#issuecomment-475368896",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15463",
    "id": 475368896,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NTM2ODg5Ng==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-21T19:22:17Z",
    "updated_at": "2019-04-18T17:32:12Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/475368896/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/485840036",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15463#issuecomment-485840036",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15463",
    "id": 485840036,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NTg0MDAzNg==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-23T14:58:19Z",
    "updated_at": "2019-04-23T14:58:19Z",
    "author_association": "MEMBER",
    "body": "utACK 710a7136f93133bf256d37dc8c8faf5a6b9ba89d",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/485840036/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/259421690",
    "pull_request_review_id": 206917380,
    "id": 259421690,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1OTQyMTY5MA==",
    "diff_hunk": "@@ -3792,7 +3792,11 @@ static UniValue getaddressesbylabel(const JSONRPCRequest& request)\n     UniValue ret(UniValue::VOBJ);\n     for (const std::pair<const CTxDestination, CAddressBookData>& item : pwallet->mapAddressBook) {\n         if (item.second.name == label) {\n-            ret.pushKV(EncodeDestination(item.first), AddressBookDataToJSON(item.second, false));\n+            UniValue address(UniValue::VOBJ);\n+            address.pushKV(EncodeDestination(item.first), AddressBookDataToJSON(item.second, false));",
    "path": "src/wallet/rpcwallet.cpp",
    "position": null,
    "original_position": 6,
    "commit_id": "710a7136f93133bf256d37dc8c8faf5a6b9ba89d",
    "original_commit_id": "a84d80dc6d606d8da41984967e769ba556f7153b",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "While `item.first` might be unique, `EncodeDestination()` of it might not be unique. You could work around that by creating a temporary `map<string,type(item.second)>`, fill it and then convert to univalue. It would still be cheaper, since insertion into a map is faster O(log(N)) than insertion into an univalue O(N)",
    "created_at": "2019-02-22T16:44:29Z",
    "updated_at": "2019-04-22T09:00:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15463#discussion_r259421690",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15463",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/259421690"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15463#discussion_r259421690"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15463"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/259421690/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 3796,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/259423040",
    "pull_request_review_id": 206918699,
    "id": 259423040,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1OTQyMzA0MA==",
    "diff_hunk": "@@ -3792,7 +3792,11 @@ static UniValue getaddressesbylabel(const JSONRPCRequest& request)\n     UniValue ret(UniValue::VOBJ);\n     for (const std::pair<const CTxDestination, CAddressBookData>& item : pwallet->mapAddressBook) {\n         if (item.second.name == label) {\n-            ret.pushKV(EncodeDestination(item.first), AddressBookDataToJSON(item.second, false));\n+            UniValue address(UniValue::VOBJ);\n+            address.pushKV(EncodeDestination(item.first), AddressBookDataToJSON(item.second, false));",
    "path": "src/wallet/rpcwallet.cpp",
    "position": null,
    "original_position": 6,
    "commit_id": "710a7136f93133bf256d37dc8c8faf5a6b9ba89d",
    "original_commit_id": "a84d80dc6d606d8da41984967e769ba556f7153b",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Got it, and also would allow to reduce wallet lock scope.\r\n\r\nHowever what happens with duplicate results of `EncodeDestination()` ?",
    "created_at": "2019-02-22T16:47:00Z",
    "updated_at": "2019-04-22T09:00:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15463#discussion_r259423040",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15463",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/259423040"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15463#discussion_r259423040"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15463"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/259423040/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 3796,
    "side": "RIGHT",
    "in_reply_to_id": 259421690
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/259484592",
    "pull_request_review_id": 206994362,
    "id": 259484592,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1OTQ4NDU5Mg==",
    "diff_hunk": "@@ -3792,7 +3792,11 @@ static UniValue getaddressesbylabel(const JSONRPCRequest& request)\n     UniValue ret(UniValue::VOBJ);\n     for (const std::pair<const CTxDestination, CAddressBookData>& item : pwallet->mapAddressBook) {\n         if (item.second.name == label) {\n-            ret.pushKV(EncodeDestination(item.first), AddressBookDataToJSON(item.second, false));\n+            UniValue address(UniValue::VOBJ);\n+            address.pushKV(EncodeDestination(item.first), AddressBookDataToJSON(item.second, false));",
    "path": "src/wallet/rpcwallet.cpp",
    "position": null,
    "original_position": 6,
    "commit_id": "710a7136f93133bf256d37dc8c8faf5a6b9ba89d",
    "original_commit_id": "a84d80dc6d606d8da41984967e769ba556f7153b",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "in univalue they'd be replaced, in std::map::insert, they'd be skipped",
    "created_at": "2019-02-22T19:40:19Z",
    "updated_at": "2019-04-22T09:00:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15463#discussion_r259484592",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15463",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/259484592"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15463#discussion_r259484592"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15463"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/259484592/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 3796,
    "side": "RIGHT",
    "in_reply_to_id": 259421690
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/259655966",
    "pull_request_review_id": 207189474,
    "id": 259655966,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1OTY1NTk2Ng==",
    "diff_hunk": "@@ -3792,7 +3792,11 @@ static UniValue getaddressesbylabel(const JSONRPCRequest& request)\n     UniValue ret(UniValue::VOBJ);\n     for (const std::pair<const CTxDestination, CAddressBookData>& item : pwallet->mapAddressBook) {\n         if (item.second.name == label) {\n-            ret.pushKV(EncodeDestination(item.first), AddressBookDataToJSON(item.second, false));\n+            UniValue address(UniValue::VOBJ);\n+            address.pushKV(EncodeDestination(item.first), AddressBookDataToJSON(item.second, false));",
    "path": "src/wallet/rpcwallet.cpp",
    "position": null,
    "original_position": 6,
    "commit_id": "710a7136f93133bf256d37dc8c8faf5a6b9ba89d",
    "original_commit_id": "a84d80dc6d606d8da41984967e769ba556f7153b",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done.\r\n\r\nI could reverse the iteration to keep the behaviour, WDYT?",
    "created_at": "2019-02-25T01:44:08Z",
    "updated_at": "2019-04-22T09:00:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15463#discussion_r259655966",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15463",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/259655966"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15463#discussion_r259655966"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15463"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/259655966/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 3796,
    "side": "RIGHT",
    "in_reply_to_id": 259421690
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/262080190",
    "pull_request_review_id": 210166663,
    "id": 262080190,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI2MjA4MDE5MA==",
    "diff_hunk": "@@ -3790,9 +3790,17 @@ static UniValue getaddressesbylabel(const JSONRPCRequest& request)\n \n     // Find all addresses that have the given label\n     UniValue ret(UniValue::VOBJ);\n+    std::set<std::string> addresses;\n     for (const std::pair<const CTxDestination, CAddressBookData>& item : pwallet->mapAddressBook) {\n         if (item.second.name == label) {\n-            ret.pushKV(EncodeDestination(item.first), AddressBookDataToJSON(item.second, false));\n+            std::string address = EncodeDestination(item.first);\n+            if (addresses.emplace(address).second) {",
    "path": "src/wallet/rpcwallet.cpp",
    "position": null,
    "original_position": 9,
    "commit_id": "710a7136f93133bf256d37dc8c8faf5a6b9ba89d",
    "original_commit_id": "643eba0aa262ead636d5de18ced31b6f166ec033",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "It would be good to have a comment like \"Should always be true\" if this is just a defensive check for a theoretical thing that should never happen. Or if there's an actual case where this could be false it would be good to note an example of what could cause this. Also if this can be false, it would be good to note the change in behavior in the commit message, since this code now keeps the first dup entry instead of the last dup entry.",
    "created_at": "2019-03-04T14:29:21Z",
    "updated_at": "2019-04-22T09:00:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15463#discussion_r262080190",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15463",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/262080190"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15463#discussion_r262080190"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15463"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/262080190/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 3797,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/264946765",
    "pull_request_review_id": 213725755,
    "id": 264946765,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI2NDk0Njc2NQ==",
    "diff_hunk": "@@ -3790,9 +3790,17 @@ static UniValue getaddressesbylabel(const JSONRPCRequest& request)\n \n     // Find all addresses that have the given label\n     UniValue ret(UniValue::VOBJ);\n+    std::set<std::string> addresses;\n     for (const std::pair<const CTxDestination, CAddressBookData>& item : pwallet->mapAddressBook) {\n         if (item.second.name == label) {\n-            ret.pushKV(EncodeDestination(item.first), AddressBookDataToJSON(item.second, false));\n+            std::string address = EncodeDestination(item.first);\n+            if (addresses.emplace(address).second) {",
    "path": "src/wallet/rpcwallet.cpp",
    "position": null,
    "original_position": 9,
    "commit_id": "710a7136f93133bf256d37dc8c8faf5a6b9ba89d",
    "original_commit_id": "643eba0aa262ead636d5de18ced31b6f166ec033",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "> Or if there's an actual case where this could be false it would be good to note an example of what could cause this.\r\n\r\nNot really sure, maybe @MeshCollider can help?\r\n\r\n> since this code now keeps the first dup entry instead of the last dup entry.\r\n\r\nI've mentioned above https://github.com/bitcoin/bitcoin/pull/15463#discussion_r259655966 that the behavior could be preserved.",
    "created_at": "2019-03-13T01:33:27Z",
    "updated_at": "2019-04-22T09:00:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15463#discussion_r264946765",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15463",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/264946765"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15463#discussion_r264946765"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15463"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/264946765/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 3797,
    "side": "RIGHT",
    "in_reply_to_id": 262080190
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/265178067",
    "pull_request_review_id": 214016865,
    "id": 265178067,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI2NTE3ODA2Nw==",
    "diff_hunk": "@@ -3790,9 +3790,17 @@ static UniValue getaddressesbylabel(const JSONRPCRequest& request)\n \n     // Find all addresses that have the given label\n     UniValue ret(UniValue::VOBJ);\n+    std::set<std::string> addresses;\n     for (const std::pair<const CTxDestination, CAddressBookData>& item : pwallet->mapAddressBook) {\n         if (item.second.name == label) {\n-            ret.pushKV(EncodeDestination(item.first), AddressBookDataToJSON(item.second, false));\n+            std::string address = EncodeDestination(item.first);\n+            if (addresses.emplace(address).second) {",
    "path": "src/wallet/rpcwallet.cpp",
    "position": null,
    "original_position": 9,
    "commit_id": "710a7136f93133bf256d37dc8c8faf5a6b9ba89d",
    "original_commit_id": "643eba0aa262ead636d5de18ced31b6f166ec033",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "No need to go down a rabbit hole, but the code here is surprising, and adding a simple comment saying what the intention is (whatever it is) would make be an improvement, in my opinion. Would suggest: \"mapAddressBook is not expected to contain duplicate address strings, but build a separate set as a precaution just in case it does.\" or \"It is unclear whether mapAddressBook may contain duplicate address strings, so build a separate set as a precaution just in case it does.\"",
    "created_at": "2019-03-13T15:11:38Z",
    "updated_at": "2019-04-22T09:00:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15463#discussion_r265178067",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15463",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/265178067"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15463#discussion_r265178067"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15463"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/265178067/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 3797,
    "side": "RIGHT",
    "in_reply_to_id": 262080190
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/265224426",
    "pull_request_review_id": 214076605,
    "id": 265224426,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI2NTIyNDQyNg==",
    "diff_hunk": "@@ -3790,9 +3790,17 @@ static UniValue getaddressesbylabel(const JSONRPCRequest& request)\n \n     // Find all addresses that have the given label\n     UniValue ret(UniValue::VOBJ);\n+    std::set<std::string> addresses;\n     for (const std::pair<const CTxDestination, CAddressBookData>& item : pwallet->mapAddressBook) {\n         if (item.second.name == label) {\n-            ret.pushKV(EncodeDestination(item.first), AddressBookDataToJSON(item.second, false));\n+            std::string address = EncodeDestination(item.first);\n+            if (addresses.emplace(address).second) {",
    "path": "src/wallet/rpcwallet.cpp",
    "position": null,
    "original_position": 9,
    "commit_id": "710a7136f93133bf256d37dc8c8faf5a6b9ba89d",
    "original_commit_id": "643eba0aa262ead636d5de18ced31b6f166ec033",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I can add the comment, but I'd love to know if duplicate it could hit duplicate keys.",
    "created_at": "2019-03-13T16:42:20Z",
    "updated_at": "2019-04-22T09:00:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15463#discussion_r265224426",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15463",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/265224426"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15463#discussion_r265224426"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15463"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/265224426/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 3797,
    "side": "RIGHT",
    "in_reply_to_id": 262080190
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/266346541",
    "pull_request_review_id": 215481982,
    "id": 266346541,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI2NjM0NjU0MQ==",
    "diff_hunk": "@@ -3790,9 +3790,17 @@ static UniValue getaddressesbylabel(const JSONRPCRequest& request)\n \n     // Find all addresses that have the given label\n     UniValue ret(UniValue::VOBJ);\n+    std::set<std::string> addresses;\n     for (const std::pair<const CTxDestination, CAddressBookData>& item : pwallet->mapAddressBook) {\n         if (item.second.name == label) {\n-            ret.pushKV(EncodeDestination(item.first), AddressBookDataToJSON(item.second, false));\n+            std::string address = EncodeDestination(item.first);\n+            if (addresses.emplace(address).second) {",
    "path": "src/wallet/rpcwallet.cpp",
    "position": null,
    "original_position": 9,
    "commit_id": "710a7136f93133bf256d37dc8c8faf5a6b9ba89d",
    "original_commit_id": "643eba0aa262ead636d5de18ced31b6f166ec033",
    "user": {
      "login": "meshcollider",
      "id": 3211283,
      "node_id": "MDQ6VXNlcjMyMTEyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3211283?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/meshcollider",
      "html_url": "https://github.com/meshcollider",
      "followers_url": "https://api.github.com/users/meshcollider/followers",
      "following_url": "https://api.github.com/users/meshcollider/following{/other_user}",
      "gists_url": "https://api.github.com/users/meshcollider/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/meshcollider/subscriptions",
      "organizations_url": "https://api.github.com/users/meshcollider/orgs",
      "repos_url": "https://api.github.com/users/meshcollider/repos",
      "events_url": "https://api.github.com/users/meshcollider/events{/privacy}",
      "received_events_url": "https://api.github.com/users/meshcollider/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I don't think its possible to have duplicates, I think it should always be true in theory",
    "created_at": "2019-03-18T09:10:33Z",
    "updated_at": "2019-04-22T09:00:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15463#discussion_r266346541",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15463",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/266346541"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15463#discussion_r266346541"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15463"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/266346541/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 3797,
    "side": "RIGHT",
    "in_reply_to_id": 262080190
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/277186049",
    "pull_request_review_id": 228931475,
    "id": 277186049,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI3NzE4NjA0OQ==",
    "diff_hunk": "@@ -3790,9 +3790,17 @@ static UniValue getaddressesbylabel(const JSONRPCRequest& request)\n \n     // Find all addresses that have the given label\n     UniValue ret(UniValue::VOBJ);\n+    std::set<std::string> addresses;\n     for (const std::pair<const CTxDestination, CAddressBookData>& item : pwallet->mapAddressBook) {\n         if (item.second.name == label) {\n-            ret.pushKV(EncodeDestination(item.first), AddressBookDataToJSON(item.second, false));\n+            std::string address = EncodeDestination(item.first);\n+            if (addresses.emplace(address).second) {",
    "path": "src/wallet/rpcwallet.cpp",
    "position": null,
    "original_position": 9,
    "commit_id": "710a7136f93133bf256d37dc8c8faf5a6b9ba89d",
    "original_commit_id": "643eba0aa262ead636d5de18ced31b6f166ec033",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Comment added, thanks @ryanofsky.\r\n\r\nAlso changed to `assert()`, after all duplicate addresses are unexpected.",
    "created_at": "2019-04-22T00:08:22Z",
    "updated_at": "2019-04-22T09:00:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15463#discussion_r277186049",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15463",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/277186049"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15463#discussion_r277186049"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15463"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/277186049/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 3797,
    "side": "RIGHT",
    "in_reply_to_id": 262080190
  }
]