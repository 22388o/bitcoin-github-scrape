[
  {
    "sha": "f1a0314c537791f202dfb7c1209f0e04ba7988c3",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmMWEwMzE0YzUzNzc5MWYyMDJkZmI3YzEyMDlmMGUwNGJhNzk4OGMz",
    "commit": {
      "author": {
        "name": "Cory Fields",
        "email": "cory-nospam-@coryfields.com",
        "date": "2020-05-26T17:43:54Z"
      },
      "committer": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2020-07-01T13:40:51Z"
      },
      "message": "gui: change combiner for signals to optional_last_value\n\noptional_last_value, which does not throw, has replaced optional_value as\nboost's default combiner. Besides being better supported, it also doesn't\ntrigger gcc's -Wmaybe-unitialized warning, presumably because exceptions no\nlonger bubble-up out of signals:\n\n```bash\nboost/signals2/last_value.hpp:54:36: warning: '*((void*)& value +1)' may be used uninitialized in this function [-Wmaybe-uninitialized]\n\tif(value) return value.get();\n```\n\nThe change in default happened in Boost 1.39.0 (along with the\nintroduction of the signals 2 library. More information is available here:\n\nhttps://www.boost.org/doc/libs/1_73_0/doc/html/signals2/rationale.html#id-1.3.36.9.4\n\nand here:\n\nhttps://www.boost.org/doc/libs/1_73_0/doc/html/boost/signals2/optional_last_value.html\n\nCo-authored-by: fanquake <fanquake@gmail.com>",
      "tree": {
        "sha": "64e3cba6dc9d7650b8788c342c0fc57a942e5e2a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/64e3cba6dc9d7650b8788c342c0fc57a942e5e2a"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f1a0314c537791f202dfb7c1209f0e04ba7988c3",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEz7FuIclQ9n+pXlWPLuufXMCVJsEFAl78kmQACgkQLuufXMCV\nJsEloxAAiWFgXh352AqIs3/GuJ9aMkLGTysNnMbVcUrklJfJ/1vFAIp/rWEju+Qs\nt7yn7RWCbKgpNrx8kRagKy2Ufh8A+RuASBVSo+s5e39FhMoQMzI/YnGnIAYObGUV\nA2WUKRdaH7w5lW3qPol5lnIkfOWANyIkofeUKaKAtG7BM7P4oHeDGd9RcuQbzSTD\nHMlscEZO2zuFq9BdNR117qSKdF/2EtOGz2flWgYR/+isuG3QwkgU/8/EKrr6XWSg\n1nwW7zrXWr0/sUGix2kL9k8efhuQAg+wIUjcSXpj6Xq4ife07oUJzJjrXovYPGsO\nC5NbPx++ZneCeMdeh8nqYs2YOm0Qkg5uaptgv3LnDsRBxXPSkDARMHRt4YBQ5lxq\nyDdO0alO8Y57uRNhD4s44k7CEFkQ7SDORfMt15sA29BXDYsro2yw6KL3XIalE/pY\nJPs2HVAAEJ9DzgVItokUQhMB3/0e6HZlRytR09NuYk/y1h6EUqqP/e2DRbfM4ZtQ\n9sgVMxXM9tJBJDekWFZs7AZi316X6vqyDHyfb9wtS7+iCBDU3eebgKPiwwJS4iE0\nLWATtvOVcPSM5DDaekL6KPl3a8ueJwwSBFcqLUzhNFOqNqsD1d4MpmlBrDMhO0kw\nnjAYHbsfPlsxrODgBP68UwPV/SZrK8vZADFQP42noCCrtnCodJk=\n=tmOr\n-----END PGP SIGNATURE-----",
        "payload": "tree 64e3cba6dc9d7650b8788c342c0fc57a942e5e2a\nparent bb588669f9e84011969b67f807f12c3480489955\nauthor Cory Fields <cory-nospam-@coryfields.com> 1590515034 -0400\ncommitter fanquake <fanquake@gmail.com> 1593610851 +0800\n\ngui: change combiner for signals to optional_last_value\n\noptional_last_value, which does not throw, has replaced optional_value as\nboost's default combiner. Besides being better supported, it also doesn't\ntrigger gcc's -Wmaybe-unitialized warning, presumably because exceptions no\nlonger bubble-up out of signals:\n\n```bash\nboost/signals2/last_value.hpp:54:36: warning: '*((void*)& value +1)' may be used uninitialized in this function [-Wmaybe-uninitialized]\n\tif(value) return value.get();\n```\n\nThe change in default happened in Boost 1.39.0 (along with the\nintroduction of the signals 2 library. More information is available here:\n\nhttps://www.boost.org/doc/libs/1_73_0/doc/html/signals2/rationale.html#id-1.3.36.9.4\n\nand here:\n\nhttps://www.boost.org/doc/libs/1_73_0/doc/html/boost/signals2/optional_last_value.html\n\nCo-authored-by: fanquake <fanquake@gmail.com>\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f1a0314c537791f202dfb7c1209f0e04ba7988c3",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/f1a0314c537791f202dfb7c1209f0e04ba7988c3",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f1a0314c537791f202dfb7c1209f0e04ba7988c3/comments",
    "author": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "bb588669f9e84011969b67f807f12c3480489955",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/bb588669f9e84011969b67f807f12c3480489955",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/bb588669f9e84011969b67f807f12c3480489955"
      }
    ],
    "stats": {
      "total": 12,
      "additions": 6,
      "deletions": 6
    },
    "files": [
      {
        "sha": "8d3665975dc45ea40d8674f1c94f519ec43eecab",
        "filename": "src/node/ui_interface.cpp",
        "status": "modified",
        "additions": 5,
        "deletions": 5,
        "changes": 10,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/f1a0314c537791f202dfb7c1209f0e04ba7988c3/src/node/ui_interface.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/f1a0314c537791f202dfb7c1209f0e04ba7988c3/src/node/ui_interface.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/node/ui_interface.cpp?ref=f1a0314c537791f202dfb7c1209f0e04ba7988c3",
        "patch": "@@ -6,14 +6,14 @@\n \n #include <util/translation.h>\n \n-#include <boost/signals2/last_value.hpp>\n+#include <boost/signals2/optional_last_value.hpp>\n #include <boost/signals2/signal.hpp>\n \n CClientUIInterface uiInterface;\n \n struct UISignals {\n-    boost::signals2::signal<CClientUIInterface::ThreadSafeMessageBoxSig, boost::signals2::last_value<bool>> ThreadSafeMessageBox;\n-    boost::signals2::signal<CClientUIInterface::ThreadSafeQuestionSig, boost::signals2::last_value<bool>> ThreadSafeQuestion;\n+    boost::signals2::signal<CClientUIInterface::ThreadSafeMessageBoxSig, boost::signals2::optional_last_value<bool>> ThreadSafeMessageBox;\n+    boost::signals2::signal<CClientUIInterface::ThreadSafeQuestionSig, boost::signals2::optional_last_value<bool>> ThreadSafeQuestion;\n     boost::signals2::signal<CClientUIInterface::InitMessageSig> InitMessage;\n     boost::signals2::signal<CClientUIInterface::NotifyNumConnectionsChangedSig> NotifyNumConnectionsChanged;\n     boost::signals2::signal<CClientUIInterface::NotifyNetworkActiveChangedSig> NotifyNetworkActiveChanged;\n@@ -42,8 +42,8 @@ ADD_SIGNALS_IMPL_WRAPPER(NotifyBlockTip);\n ADD_SIGNALS_IMPL_WRAPPER(NotifyHeaderTip);\n ADD_SIGNALS_IMPL_WRAPPER(BannedListChanged);\n \n-bool CClientUIInterface::ThreadSafeMessageBox(const bilingual_str& message, const std::string& caption, unsigned int style) { return g_ui_signals.ThreadSafeMessageBox(message, caption, style); }\n-bool CClientUIInterface::ThreadSafeQuestion(const bilingual_str& message, const std::string& non_interactive_message, const std::string& caption, unsigned int style) { return g_ui_signals.ThreadSafeQuestion(message, non_interactive_message, caption, style); }\n+bool CClientUIInterface::ThreadSafeMessageBox(const bilingual_str& message, const std::string& caption, unsigned int style) { return g_ui_signals.ThreadSafeMessageBox(message, caption, style).value_or(false);}\n+bool CClientUIInterface::ThreadSafeQuestion(const bilingual_str& message, const std::string& non_interactive_message, const std::string& caption, unsigned int style) { return g_ui_signals.ThreadSafeQuestion(message, non_interactive_message, caption, style).value_or(false);}\n void CClientUIInterface::InitMessage(const std::string& message) { return g_ui_signals.InitMessage(message); }\n void CClientUIInterface::NotifyNumConnectionsChanged(int newNumConnections) { return g_ui_signals.NotifyNumConnectionsChanged(newNumConnections); }\n void CClientUIInterface::NotifyNetworkActiveChanged(bool networkActive) { return g_ui_signals.NotifyNetworkActiveChanged(networkActive); }"
      },
      {
        "sha": "611bd4a8c46035e866abdfc6ac6d027332116663",
        "filename": "test/lint/lint-includes.sh",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/f1a0314c537791f202dfb7c1209f0e04ba7988c3/test/lint/lint-includes.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/f1a0314c537791f202dfb7c1209f0e04ba7988c3/test/lint/lint-includes.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/lint/lint-includes.sh?ref=f1a0314c537791f202dfb7c1209f0e04ba7988c3",
        "patch": "@@ -64,7 +64,7 @@ EXPECTED_BOOST_INCLUDES=(\n     boost/preprocessor/cat.hpp\n     boost/preprocessor/stringize.hpp\n     boost/signals2/connection.hpp\n-    boost/signals2/last_value.hpp\n+    boost/signals2/optional_last_value.hpp\n     boost/signals2/signal.hpp\n     boost/test/unit_test.hpp\n     boost/thread/condition_variable.hpp"
      }
    ]
  }
]