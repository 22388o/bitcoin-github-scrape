[
  {
    "sha": "68288ef0c15522799d4bf6239d2ae1e8086b5abf",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo2ODI4OGVmMGMxNTUyMjc5OWQ0YmY2MjM5ZDJhZTFlODA4NmI1YWJm",
    "commit": {
      "author": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2020-05-05T02:56:50Z"
      },
      "committer": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2020-05-05T02:56:50Z"
      },
      "message": "qt: Overhaul ReceiveRequestDialog",
      "tree": {
        "sha": "d9ad4aa110119a66fdab5c0f82bf9c2ac503ab05",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d9ad4aa110119a66fdab5c0f82bf9c2ac503ab05"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/68288ef0c15522799d4bf6239d2ae1e8086b5abf",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE0dvyxLlvLev0wWZUQQEIES5+qB8FAl6w1fIACgkQQQEIES5+\nqB/+VRAAjcUB26YRjw3jLNVCYG83XEw7ju3X1wholbZbWvrWPQbvNRr4I1PvYPc9\nhWIFP552WamQOO+idgrxTK33HfLPSdcLdIDnUDk7SyysPoVLPhJfXX/DNwRZPFri\nxs/mh215Ib74trhmPhY4wAQ92e8fyIw1W/hDsHlGeTWaZ658kGeAzUuh91mMKaJV\n4EzSXH0DqZ6z2A1inSp8IS6FAqtrEX6Ni5pS6joRQsYvxQtlthWBQ2tAj8xsJmd7\nOgDyz9B5zv3kxZInXNx3TxodELG9rVnvBACoauyquoE4oD/7mS5GaBXQCxswbDoP\ntFTqXqSqygCR/+pD/Pwa4qWiPUM5QonlQ459On8eK+3OWsweEGEKU96QiskeW2vi\nYHsMyls5g468oEdKf8q7Y93iej7vtsy+JYe5BWLgyOGRJ9N19Mbis0iYgZIin5LF\nw5uWv8aIeedNGGcDn5K4s0hMBPmTCkT+fqsPEpmQbzUY1heZw4uEE59X9R00JNfQ\nhtm5R5VMN8Iu7VkJE31Y57eAg2Adg7W/8TvqICmyXikBliZAmAhXX0LtcpdGPySY\npx+PmJZLKarcv+oVpgIS7yFHHFHnFmeMa+GpTT+Lj+NEDqVhHEO+xVAYSfau7ewi\n3yeUXJpTqaYQYspJKHT0ZCJqJiOKFh+vy4AnUBqPmCPrRL5ruxE=\n=CkSj\n-----END PGP SIGNATURE-----",
        "payload": "tree d9ad4aa110119a66fdab5c0f82bf9c2ac503ab05\nparent e727c2bdcab3660297f452c76c6f877038015c02\nauthor Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1588647410 +0300\ncommitter Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1588647410 +0300\n\nqt: Overhaul ReceiveRequestDialog\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/68288ef0c15522799d4bf6239d2ae1e8086b5abf",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/68288ef0c15522799d4bf6239d2ae1e8086b5abf",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/68288ef0c15522799d4bf6239d2ae1e8086b5abf/comments",
    "author": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "e727c2bdcab3660297f452c76c6f877038015c02",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e727c2bdcab3660297f452c76c6f877038015c02",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/e727c2bdcab3660297f452c76c6f877038015c02"
      }
    ],
    "stats": {
      "total": 398,
      "additions": 286,
      "deletions": 112
    },
    "files": [
      {
        "sha": "f6d47234655e5c4890ebf4fcf3a446a8bdaf5e49",
        "filename": "src/qt/forms/receiverequestdialog.ui",
        "status": "modified",
        "additions": 223,
        "deletions": 65,
        "changes": 288,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/68288ef0c15522799d4bf6239d2ae1e8086b5abf/src/qt/forms/receiverequestdialog.ui",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/68288ef0c15522799d4bf6239d2ae1e8086b5abf/src/qt/forms/receiverequestdialog.ui",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/forms/receiverequestdialog.ui?ref=68288ef0c15522799d4bf6239d2ae1e8086b5abf",
        "patch": "@@ -6,68 +6,233 @@\n    <rect>\n     <x>0</x>\n     <y>0</y>\n-    <width>487</width>\n-    <height>597</height>\n+    <width>413</width>\n+    <height>229</height>\n    </rect>\n   </property>\n-  <layout class=\"QVBoxLayout\" name=\"verticalLayout_3\">\n-   <item>\n-    <widget class=\"QRImageWidget\" name=\"lblQRCode\">\n-     <property name=\"sizePolicy\">\n-      <sizepolicy hsizetype=\"Expanding\" vsizetype=\"Fixed\">\n-       <horstretch>0</horstretch>\n-       <verstretch>0</verstretch>\n-      </sizepolicy>\n-     </property>\n-     <property name=\"minimumSize\">\n-      <size>\n-       <width>300</width>\n-       <height>320</height>\n-      </size>\n-     </property>\n-     <property name=\"toolTip\">\n-      <string>QR Code</string>\n+  <property name=\"windowTitle\">\n+   <string>Request payment to ...</string>\n+  </property>\n+  <layout class=\"QGridLayout\" name=\"gridLayout\" columnstretch=\"0,1\">\n+   <property name=\"sizeConstraint\">\n+    <enum>QLayout::SetFixedSize</enum>\n+   </property>\n+   <item row=\"0\" column=\"0\" colspan=\"2\" alignment=\"Qt::AlignHCenter\">\n+    <widget class=\"QRImageWidget\" name=\"qr_code\">\n+     <property name=\"text\">\n+      <string notr=\"true\">QR image</string>\n+     </property>\n+     <property name=\"textInteractionFlags\">\n+      <set>Qt::NoTextInteraction</set>\n+     </property>\n+    </widget>\n+   </item>\n+   <item row=\"1\" column=\"0\" colspan=\"2\">\n+    <widget class=\"QLabel\" name=\"payment_header\">\n+     <property name=\"font\">\n+      <font>\n+       <weight>75</weight>\n+       <bold>true</bold>\n+      </font>\n+     </property>\n+     <property name=\"text\">\n+      <string>Payment information</string>\n+     </property>\n+     <property name=\"textInteractionFlags\">\n+      <set>Qt::NoTextInteraction</set>\n+     </property>\n+    </widget>\n+   </item>\n+   <item row=\"2\" column=\"0\" alignment=\"Qt::AlignRight|Qt::AlignTop\">\n+    <widget class=\"QLabel\" name=\"uri_tag\">\n+     <property name=\"font\">\n+      <font>\n+       <weight>75</weight>\n+       <bold>true</bold>\n+      </font>\n+     </property>\n+     <property name=\"text\">\n+      <string notr=\"true\">URI:</string>\n      </property>\n      <property name=\"textFormat\">\n       <enum>Qt::PlainText</enum>\n      </property>\n-     <property name=\"alignment\">\n-      <set>Qt::AlignCenter</set>\n+     <property name=\"textInteractionFlags\">\n+      <set>Qt::NoTextInteraction</set>\n+     </property>\n+    </widget>\n+   </item>\n+   <item row=\"2\" column=\"1\" alignment=\"Qt::AlignTop\">\n+    <widget class=\"QLabel\" name=\"uri_content\">\n+     <property name=\"text\">\n+      <string notr=\"true\">bitcoin:BC1...</string>\n+     </property>\n+     <property name=\"textFormat\">\n+      <enum>Qt::RichText</enum>\n      </property>\n      <property name=\"wordWrap\">\n       <bool>true</bool>\n      </property>\n+     <property name=\"textInteractionFlags\">\n+      <set>Qt::TextSelectableByMouse</set>\n+     </property>\n+    </widget>\n+   </item>\n+   <item row=\"3\" column=\"0\" alignment=\"Qt::AlignRight|Qt::AlignTop\">\n+    <widget class=\"QLabel\" name=\"address_tag\">\n+     <property name=\"font\">\n+      <font>\n+       <weight>75</weight>\n+       <bold>true</bold>\n+      </font>\n+     </property>\n+     <property name=\"text\">\n+      <string>Address:</string>\n+     </property>\n+     <property name=\"textInteractionFlags\">\n+      <set>Qt::NoTextInteraction</set>\n+     </property>\n     </widget>\n    </item>\n-   <item>\n-    <widget class=\"QTextEdit\" name=\"outUri\">\n-     <property name=\"sizePolicy\">\n-      <sizepolicy hsizetype=\"Expanding\" vsizetype=\"Expanding\">\n-       <horstretch>0</horstretch>\n-       <verstretch>0</verstretch>\n-      </sizepolicy>\n-     </property>\n-     <property name=\"minimumSize\">\n-      <size>\n-       <width>0</width>\n-       <height>50</height>\n-      </size>\n-     </property>\n-     <property name=\"frameShape\">\n-      <enum>QFrame::NoFrame</enum>\n-     </property>\n-     <property name=\"frameShadow\">\n-      <enum>QFrame::Plain</enum>\n-     </property>\n-     <property name=\"tabChangesFocus\">\n+   <item row=\"3\" column=\"1\" alignment=\"Qt::AlignTop\">\n+    <widget class=\"QLabel\" name=\"address_content\">\n+     <property name=\"text\">\n+      <string notr=\"true\">bc1...</string>\n+     </property>\n+     <property name=\"textFormat\">\n+      <enum>Qt::PlainText</enum>\n+     </property>\n+     <property name=\"textInteractionFlags\">\n+      <set>Qt::TextSelectableByMouse</set>\n+     </property>\n+    </widget>\n+   </item>\n+   <item row=\"4\" column=\"0\" alignment=\"Qt::AlignRight|Qt::AlignTop\">\n+    <widget class=\"QLabel\" name=\"amount_tag\">\n+     <property name=\"font\">\n+      <font>\n+       <weight>75</weight>\n+       <bold>true</bold>\n+      </font>\n+     </property>\n+     <property name=\"text\">\n+      <string>Amount:</string>\n+     </property>\n+     <property name=\"textInteractionFlags\">\n+      <set>Qt::NoTextInteraction</set>\n+     </property>\n+    </widget>\n+   </item>\n+   <item row=\"4\" column=\"1\" alignment=\"Qt::AlignTop\">\n+    <widget class=\"QLabel\" name=\"amount_content\">\n+     <property name=\"text\">\n+      <string notr=\"true\">0.00000000 BTC</string>\n+     </property>\n+     <property name=\"textFormat\">\n+      <enum>Qt::PlainText</enum>\n+     </property>\n+     <property name=\"textInteractionFlags\">\n+      <set>Qt::TextSelectableByMouse</set>\n+     </property>\n+    </widget>\n+   </item>\n+   <item row=\"5\" column=\"0\" alignment=\"Qt::AlignRight|Qt::AlignTop\">\n+    <widget class=\"QLabel\" name=\"label_tag\">\n+     <property name=\"font\">\n+      <font>\n+       <weight>75</weight>\n+       <bold>true</bold>\n+      </font>\n+     </property>\n+     <property name=\"text\">\n+      <string>Label:</string>\n+     </property>\n+     <property name=\"textInteractionFlags\">\n+      <set>Qt::NoTextInteraction</set>\n+     </property>\n+    </widget>\n+   </item>\n+   <item row=\"5\" column=\"1\" alignment=\"Qt::AlignTop\">\n+    <widget class=\"QLabel\" name=\"label_content\">\n+     <property name=\"text\">\n+      <string notr=\"true\">label content</string>\n+     </property>\n+     <property name=\"textFormat\">\n+      <enum>Qt::PlainText</enum>\n+     </property>\n+     <property name=\"wordWrap\">\n+      <bool>true</bool>\n+     </property>\n+     <property name=\"textInteractionFlags\">\n+      <set>Qt::TextSelectableByMouse</set>\n+     </property>\n+    </widget>\n+   </item>\n+   <item row=\"6\" column=\"0\" alignment=\"Qt::AlignRight|Qt::AlignTop\">\n+    <widget class=\"QLabel\" name=\"message_tag\">\n+     <property name=\"font\">\n+      <font>\n+       <weight>75</weight>\n+       <bold>true</bold>\n+      </font>\n+     </property>\n+     <property name=\"text\">\n+      <string>Message:</string>\n+     </property>\n+     <property name=\"textInteractionFlags\">\n+      <set>Qt::NoTextInteraction</set>\n+     </property>\n+    </widget>\n+   </item>\n+   <item row=\"6\" column=\"1\" alignment=\"Qt::AlignTop\">\n+    <widget class=\"QLabel\" name=\"message_content\">\n+     <property name=\"text\">\n+      <string notr=\"true\">message content</string>\n+     </property>\n+     <property name=\"textFormat\">\n+      <enum>Qt::PlainText</enum>\n+     </property>\n+     <property name=\"wordWrap\">\n+      <bool>true</bool>\n+     </property>\n+     <property name=\"textInteractionFlags\">\n+      <set>Qt::TextSelectableByMouse</set>\n+     </property>\n+    </widget>\n+   </item>\n+   <item row=\"7\" column=\"0\" alignment=\"Qt::AlignRight|Qt::AlignTop\">\n+    <widget class=\"QLabel\" name=\"wallet_tag\">\n+     <property name=\"font\">\n+      <font>\n+       <weight>75</weight>\n+       <bold>true</bold>\n+      </font>\n+     </property>\n+     <property name=\"text\">\n+      <string>Wallet:</string>\n+     </property>\n+     <property name=\"textInteractionFlags\">\n+      <set>Qt::NoTextInteraction</set>\n+     </property>\n+    </widget>\n+   </item>\n+   <item row=\"7\" column=\"1\" alignment=\"Qt::AlignTop\">\n+    <widget class=\"QLabel\" name=\"wallet_content\">\n+     <property name=\"text\">\n+      <string notr=\"true\">wallet name</string>\n+     </property>\n+     <property name=\"textFormat\">\n+      <enum>Qt::PlainText</enum>\n+     </property>\n+     <property name=\"wordWrap\">\n       <bool>true</bool>\n      </property>\n      <property name=\"textInteractionFlags\">\n-      <set>Qt::TextSelectableByKeyboard|Qt::TextSelectableByMouse</set>\n+      <set>Qt::TextSelectableByMouse</set>\n      </property>\n     </widget>\n    </item>\n-   <item>\n+   <item row=\"8\" column=\"0\" colspan=\"2\">\n     <layout class=\"QHBoxLayout\" name=\"horizontalLayout\">\n      <item>\n       <widget class=\"QPushButton\" name=\"btnCopyURI\">\n@@ -114,8 +279,11 @@\n      </item>\n      <item>\n       <widget class=\"QDialogButtonBox\" name=\"buttonBox\">\n+       <property name=\"focusPolicy\">\n+        <enum>Qt::StrongFocus</enum>\n+       </property>\n        <property name=\"standardButtons\">\n-        <set>QDialogButtonBox::Close</set>\n+        <set>QDialogButtonBox::Ok</set>\n        </property>\n       </widget>\n      </item>\n@@ -130,37 +298,27 @@\n    <header>qt/qrimagewidget.h</header>\n   </customwidget>\n  </customwidgets>\n+ <tabstops>\n+  <tabstop>buttonBox</tabstop>\n+  <tabstop>btnCopyURI</tabstop>\n+  <tabstop>btnCopyAddress</tabstop>\n+  <tabstop>btnSaveAs</tabstop>\n+ </tabstops>\n  <resources/>\n  <connections>\n-  <connection>\n-   <sender>buttonBox</sender>\n-   <signal>rejected()</signal>\n-   <receiver>ReceiveRequestDialog</receiver>\n-   <slot>reject()</slot>\n-   <hints>\n-    <hint type=\"sourcelabel\">\n-     <x>452</x>\n-     <y>573</y>\n-    </hint>\n-    <hint type=\"destinationlabel\">\n-     <x>243</x>\n-     <y>298</y>\n-    </hint>\n-   </hints>\n-  </connection>\n   <connection>\n    <sender>buttonBox</sender>\n    <signal>accepted()</signal>\n    <receiver>ReceiveRequestDialog</receiver>\n    <slot>accept()</slot>\n    <hints>\n     <hint type=\"sourcelabel\">\n-     <x>452</x>\n-     <y>573</y>\n+     <x>135</x>\n+     <y>230</y>\n     </hint>\n     <hint type=\"destinationlabel\">\n-     <x>243</x>\n-     <y>298</y>\n+     <x>135</x>\n+     <y>126</y>\n     </hint>\n    </hints>\n   </connection>"
      },
      {
        "sha": "0366d62753f471a7de347cc5bbcecef3f8ac4f43",
        "filename": "src/qt/receiverequestdialog.cpp",
        "status": "modified",
        "additions": 46,
        "deletions": 38,
        "changes": 84,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/68288ef0c15522799d4bf6239d2ae1e8086b5abf/src/qt/receiverequestdialog.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/68288ef0c15522799d4bf6239d2ae1e8086b5abf/src/qt/receiverequestdialog.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/receiverequestdialog.cpp?ref=68288ef0c15522799d4bf6239d2ae1e8086b5abf",
        "patch": "@@ -8,10 +8,11 @@\n #include <qt/bitcoinunits.h>\n #include <qt/guiutil.h>\n #include <qt/optionsmodel.h>\n+#include <qt/qrimagewidget.h>\n #include <qt/walletmodel.h>\n \n-#include <QClipboard>\n-#include <QPixmap>\n+#include <QDialog>\n+#include <QString>\n \n #if defined(HAVE_CONFIG_H)\n #include <config/bitcoin-config.h> /* for USE_QRCODE */\n@@ -23,14 +24,6 @@ ReceiveRequestDialog::ReceiveRequestDialog(QWidget *parent) :\n     model(nullptr)\n {\n     ui->setupUi(this);\n-\n-#ifndef USE_QRCODE\n-    ui->btnSaveAs->setVisible(false);\n-    ui->lblQRCode->setVisible(false);\n-#endif\n-\n-    connect(ui->btnSaveAs, &QPushButton::clicked, ui->lblQRCode, &QRImageWidget::saveImage);\n-\n     GUIUtil::handleCloseWindowShortcut(this);\n }\n \n@@ -53,42 +46,57 @@ void ReceiveRequestDialog::setModel(WalletModel *_model)\n void ReceiveRequestDialog::setInfo(const SendCoinsRecipient &_info)\n {\n     this->info = _info;\n+    setWindowTitle(tr(\"Request payment to %1\").arg(info.label.isEmpty() ? info.address : info.label));\n+    QString uri = GUIUtil::formatBitcoinURI(info);\n+\n+#ifdef USE_QRCODE\n+    if (ui->qr_code->setQR(uri, info.address)) {\n+        connect(ui->btnSaveAs, &QPushButton::clicked, ui->qr_code, &QRImageWidget::saveImage);\n+    } else {\n+        ui->btnSaveAs->setEnabled(false);\n+    }\n+#else\n+    ui->btnSaveAs->hide();\n+    ui->qr_code->hide();\n+#endif\n+\n+    ui->uri_content->setText(\"<a href=\\\"\" + uri + \"\\\">\" + GUIUtil::HtmlEscape(uri) + \"</a>\");\n+    ui->address_content->setText(info.address);\n+\n+    if (!info.amount) {\n+        ui->amount_tag->hide();\n+        ui->amount_content->hide();\n+    } // Amount is set in update() slot.\n     update();\n-}\n \n-void ReceiveRequestDialog::update()\n-{\n-    if(!model)\n-        return;\n-    QString target = info.label;\n-    if(target.isEmpty())\n-        target = info.address;\n-    setWindowTitle(tr(\"Request payment to %1\").arg(target));\n+    if (!info.label.isEmpty()) {\n+        ui->label_content->setText(info.label);\n+    } else {\n+        ui->label_tag->hide();\n+        ui->label_content->hide();\n+    }\n \n-    QString uri = GUIUtil::formatBitcoinURI(info);\n-    ui->btnSaveAs->setEnabled(false);\n-    QString html;\n-    html += \"<html><font face='verdana, arial, helvetica, sans-serif'>\";\n-    html += \"<b>\"+tr(\"Payment information\")+\"</b><br>\";\n-    html += \"<b>\"+tr(\"URI\")+\"</b>: \";\n-    html += \"<a href=\\\"\"+uri+\"\\\">\" + GUIUtil::HtmlEscape(uri) + \"</a><br>\";\n-    html += \"<b>\"+tr(\"Address\")+\"</b>: \" + GUIUtil::HtmlEscape(info.address) + \"<br>\";\n-    if(info.amount)\n-        html += \"<b>\"+tr(\"Amount\")+\"</b>: \" + BitcoinUnits::formatHtmlWithUnit(model->getOptionsModel()->getDisplayUnit(), info.amount) + \"<br>\";\n-    if(!info.label.isEmpty())\n-        html += \"<b>\"+tr(\"Label\")+\"</b>: \" + GUIUtil::HtmlEscape(info.label) + \"<br>\";\n-    if(!info.message.isEmpty())\n-        html += \"<b>\"+tr(\"Message\")+\"</b>: \" + GUIUtil::HtmlEscape(info.message) + \"<br>\";\n-    if(model->isMultiwallet()) {\n-        html += \"<b>\"+tr(\"Wallet\")+\"</b>: \" + GUIUtil::HtmlEscape(model->getWalletName()) + \"<br>\";\n+    if (!info.message.isEmpty()) {\n+        ui->message_content->setText(info.message);\n+    } else {\n+        ui->message_tag->hide();\n+        ui->message_content->hide();\n     }\n-    ui->outUri->setText(html);\n \n-    if (ui->lblQRCode->setQR(uri, info.address)) {\n-        ui->btnSaveAs->setEnabled(true);\n+    if (!model->getWalletName().isEmpty()) {\n+        ui->wallet_content->setText(model->getWalletName());\n+    } else {\n+        ui->wallet_tag->hide();\n+        ui->wallet_content->hide();\n     }\n }\n \n+void ReceiveRequestDialog::update()\n+{\n+    if (!model) return;\n+    ui->amount_content->setText(BitcoinUnits::formatWithUnit(model->getOptionsModel()->getDisplayUnit(), info.amount));\n+}\n+\n void ReceiveRequestDialog::on_btnCopyURI_clicked()\n {\n     GUIUtil::setClipboard(GUIUtil::formatBitcoinURI(info));"
      },
      {
        "sha": "2670d26251fc778b195f8dcb1812381a26f17088",
        "filename": "src/qt/test/wallettests.cpp",
        "status": "modified",
        "additions": 17,
        "deletions": 9,
        "changes": 26,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/68288ef0c15522799d4bf6239d2ae1e8086b5abf/src/qt/test/wallettests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/68288ef0c15522799d4bf6239d2ae1e8086b5abf/src/qt/test/wallettests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/test/wallettests.cpp?ref=68288ef0c15522799d4bf6239d2ae1e8086b5abf",
        "patch": "@@ -229,15 +229,23 @@ void TestGUI(interfaces::Node& node)\n     for (QWidget* widget : QApplication::topLevelWidgets()) {\n         if (widget->inherits(\"ReceiveRequestDialog\")) {\n             ReceiveRequestDialog* receiveRequestDialog = qobject_cast<ReceiveRequestDialog*>(widget);\n-            QTextEdit* rlist = receiveRequestDialog->QObject::findChild<QTextEdit*>(\"outUri\");\n-            QString paymentText = rlist->toPlainText();\n-            QStringList paymentTextList = paymentText.split('\\n');\n-            QCOMPARE(paymentTextList.at(0), QString(\"Payment information\"));\n-            QVERIFY(paymentTextList.at(1).indexOf(QString(\"URI: bitcoin:\")) != -1);\n-            QVERIFY(paymentTextList.at(2).indexOf(QString(\"Address:\")) != -1);\n-            QCOMPARE(paymentTextList.at(3), QString(\"Amount: 0.00000001 \") + QString::fromStdString(CURRENCY_UNIT));\n-            QCOMPARE(paymentTextList.at(4), QString(\"Label: TEST_LABEL_1\"));\n-            QCOMPARE(paymentTextList.at(5), QString(\"Message: TEST_MESSAGE_1\"));\n+            QCOMPARE(receiveRequestDialog->QObject::findChild<QLabel*>(\"payment_header\")->text(), QString(\"Payment information\"));\n+            QCOMPARE(receiveRequestDialog->QObject::findChild<QLabel*>(\"uri_tag\")->text(), QString(\"URI:\"));\n+            QString uri = receiveRequestDialog->QObject::findChild<QLabel*>(\"uri_content\")->text();\n+            QCOMPARE(uri.count(\"bitcoin:\"), 2);\n+            QCOMPARE(receiveRequestDialog->QObject::findChild<QLabel*>(\"address_tag\")->text(), QString(\"Address:\"));\n+\n+            QCOMPARE(uri.count(\"amount=0.00000001\"), 2);\n+            QCOMPARE(receiveRequestDialog->QObject::findChild<QLabel*>(\"amount_tag\")->text(), QString(\"Amount:\"));\n+            QCOMPARE(receiveRequestDialog->QObject::findChild<QLabel*>(\"amount_content\")->text(), QString(\"0.00000001 \") + QString::fromStdString(CURRENCY_UNIT));\n+\n+            QCOMPARE(uri.count(\"label=TEST_LABEL_1\"), 2);\n+            QCOMPARE(receiveRequestDialog->QObject::findChild<QLabel*>(\"label_tag\")->text(), QString(\"Label:\"));\n+            QCOMPARE(receiveRequestDialog->QObject::findChild<QLabel*>(\"label_content\")->text(), QString(\"TEST_LABEL_1\"));\n+\n+            QCOMPARE(uri.count(\"message=TEST_MESSAGE_1\"), 2);\n+            QCOMPARE(receiveRequestDialog->QObject::findChild<QLabel*>(\"message_tag\")->text(), QString(\"Message:\"));\n+            QCOMPARE(receiveRequestDialog->QObject::findChild<QLabel*>(\"message_content\")->text(), QString(\"TEST_MESSAGE_1\"));\n         }\n     }\n "
      }
    ]
  },
  {
    "sha": "73529f0859c060087dd41e9e176fd4198d0f385f",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo3MzUyOWYwODU5YzA2MDA4N2RkNDFlOWUxNzZmZDQxOThkMGYzODVm",
    "commit": {
      "author": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2020-05-05T02:57:08Z"
      },
      "committer": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2020-05-05T02:57:08Z"
      },
      "message": "qt: Rename slot to updateDisplayUnit()\n\nThis commit does not change behavior.",
      "tree": {
        "sha": "386b54d3d940d3e6a357d3ac8f3c1d4f0fa4bd66",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/386b54d3d940d3e6a357d3ac8f3c1d4f0fa4bd66"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/73529f0859c060087dd41e9e176fd4198d0f385f",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE0dvyxLlvLev0wWZUQQEIES5+qB8FAl6w1gQACgkQQQEIES5+\nqB+zhg/9FnttJ7ezJ/e3A3HX2Gj6/sEifP24hltC6XOAYv+l9lIXnh3fDCjRno6z\nglXnAJ6kor4nERXeMAiV2Y0QYgHt6rV+OyRHJlNAV+nD2ONkqOE6P9/yX8NbVAGb\nL4xiyFSmBhgW5Bc7s8l2qhyVfAkq5KDtMK+J7NOF0q0XPl8kKdz51V26+nk5My7d\nBYM9jU5r5FfN+XDrUUqmKCJBEvbd2K0F7MtqSwiF1CACZpL9iAjuc1JbJ6rqQOUz\n1wNpPGo5pVAfH4fkW3b6VYCokvfOFembG4wD0JlSTpFCJJ2uSQL9uKRjoni9agYX\nD+VwI/IaY/1te2jH/SK1/2qMwFVsV5P2xrv0SZUK6WxmbmM8DBdoV8nNad/SeONl\nnxSeLh6VHbJNJZcJm3WFv5QZPcc/LLp9EN9tM0L86b/ndcanjTu/dRbPfcyqdzdU\nm6ow2oJ1bgldKb1s4upaZyO2g9h+kk0b5f1MBU4FKpd7mo9dGEJHXAYhlFoK7lAl\nbf2S7J/s8H643WGs9cZAZZhyCWMtZ2SlRlODj/GChOakhMOl04Ibi2mQbRNhvMfP\noQG9/WkJFPv2saKACODVmWUevNrlZ8oq+Y7wM9SXkde8aaNynilkmTJLrRdb20ll\nDz+WUmdPfvNnKh/T5iV/3smLQMq2BjargozZWZCTDHgc9xGRjn0=\n=yUEz\n-----END PGP SIGNATURE-----",
        "payload": "tree 386b54d3d940d3e6a357d3ac8f3c1d4f0fa4bd66\nparent 68288ef0c15522799d4bf6239d2ae1e8086b5abf\nauthor Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1588647428 +0300\ncommitter Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1588647428 +0300\n\nqt: Rename slot to updateDisplayUnit()\n\nThis commit does not change behavior.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/73529f0859c060087dd41e9e176fd4198d0f385f",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/73529f0859c060087dd41e9e176fd4198d0f385f",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/73529f0859c060087dd41e9e176fd4198d0f385f/comments",
    "author": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "68288ef0c15522799d4bf6239d2ae1e8086b5abf",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/68288ef0c15522799d4bf6239d2ae1e8086b5abf",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/68288ef0c15522799d4bf6239d2ae1e8086b5abf"
      }
    ],
    "stats": {
      "total": 11,
      "additions": 5,
      "deletions": 6
    },
    "files": [
      {
        "sha": "d385c428215d75805229ccde2db575698302bcae",
        "filename": "src/qt/receiverequestdialog.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 4,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/73529f0859c060087dd41e9e176fd4198d0f385f/src/qt/receiverequestdialog.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/73529f0859c060087dd41e9e176fd4198d0f385f/src/qt/receiverequestdialog.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/receiverequestdialog.cpp?ref=73529f0859c060087dd41e9e176fd4198d0f385f",
        "patch": "@@ -37,7 +37,7 @@ void ReceiveRequestDialog::setModel(WalletModel *_model)\n     this->model = _model;\n \n     if (_model)\n-        connect(_model->getOptionsModel(), &OptionsModel::displayUnitChanged, this, &ReceiveRequestDialog::update);\n+        connect(_model->getOptionsModel(), &OptionsModel::displayUnitChanged, this, &ReceiveRequestDialog::updateDisplayUnit);\n \n     // update the display unit if necessary\n     update();\n@@ -66,8 +66,8 @@ void ReceiveRequestDialog::setInfo(const SendCoinsRecipient &_info)\n     if (!info.amount) {\n         ui->amount_tag->hide();\n         ui->amount_content->hide();\n-    } // Amount is set in update() slot.\n-    update();\n+    } // Amount is set in updateDisplayUnit() slot.\n+    updateDisplayUnit();\n \n     if (!info.label.isEmpty()) {\n         ui->label_content->setText(info.label);\n@@ -91,7 +91,7 @@ void ReceiveRequestDialog::setInfo(const SendCoinsRecipient &_info)\n     }\n }\n \n-void ReceiveRequestDialog::update()\n+void ReceiveRequestDialog::updateDisplayUnit()\n {\n     if (!model) return;\n     ui->amount_content->setText(BitcoinUnits::formatWithUnit(model->getOptionsModel()->getDisplayUnit(), info.amount));"
      },
      {
        "sha": "846478643d819d282cc4b14892ac98c28eb37369",
        "filename": "src/qt/receiverequestdialog.h",
        "status": "modified",
        "additions": 1,
        "deletions": 2,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/73529f0859c060087dd41e9e176fd4198d0f385f/src/qt/receiverequestdialog.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/73529f0859c060087dd41e9e176fd4198d0f385f/src/qt/receiverequestdialog.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/receiverequestdialog.h?ref=73529f0859c060087dd41e9e176fd4198d0f385f",
        "patch": "@@ -29,8 +29,7 @@ class ReceiveRequestDialog : public QDialog\n private Q_SLOTS:\n     void on_btnCopyURI_clicked();\n     void on_btnCopyAddress_clicked();\n-\n-    void update();\n+    void updateDisplayUnit();\n \n private:\n     Ui::ReceiveRequestDialog *ui;"
      }
    ]
  }
]