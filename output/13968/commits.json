[
  {
    "sha": "2252ec50085c151e7998ca9a30cda6a33ee862b6",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyMjUyZWM1MDA4NWMxNTFlNzk5OGNhOWEzMGNkYTZhMzNlZTg2MmI2",
    "commit": {
      "author": {
        "name": "Gregory Sanders",
        "email": "gsanders87@gmail.com",
        "date": "2018-08-14T18:28:29Z"
      },
      "committer": {
        "name": "Gregory Sanders",
        "email": "gsanders87@gmail.com",
        "date": "2018-08-14T18:28:29Z"
      },
      "message": "Allow ConstructTransaction to not throw error with 0-input txn",
      "tree": {
        "sha": "40762e8bb7acaeb08ac337a38c8c8a7b76e2e858",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/40762e8bb7acaeb08ac337a38c8c8a7b76e2e858"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2252ec50085c151e7998ca9a30cda6a33ee862b6",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2252ec50085c151e7998ca9a30cda6a33ee862b6",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/2252ec50085c151e7998ca9a30cda6a33ee862b6",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2252ec50085c151e7998ca9a30cda6a33ee862b6/comments",
    "author": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "63f8b0128b2aac3b25c6ec4d2f5bda213033162a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/63f8b0128b2aac3b25c6ec4d2f5bda213033162a",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/63f8b0128b2aac3b25c6ec4d2f5bda213033162a"
      }
    ],
    "stats": {
      "total": 2,
      "additions": 1,
      "deletions": 1
    },
    "files": [
      {
        "sha": "314184ab066ef671087789300a23449598598e95",
        "filename": "src/rpc/rawtransaction.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2252ec50085c151e7998ca9a30cda6a33ee862b6/src/rpc/rawtransaction.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2252ec50085c151e7998ca9a30cda6a33ee862b6/src/rpc/rawtransaction.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/rawtransaction.cpp?ref=2252ec50085c151e7998ca9a30cda6a33ee862b6",
        "patch": "@@ -436,7 +436,7 @@ CMutableTransaction ConstructTransaction(const UniValue& inputs_in, const UniVal\n         }\n     }\n \n-    if (!rbf.isNull() && rbfOptIn != SignalsOptInRBF(rawTx)) {\n+    if (!rbf.isNull() && rawTx.vin.size() > 0 && rbfOptIn != SignalsOptInRBF(rawTx)) {\n         throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter combination: Sequence number(s) contradict replaceable option\");\n     }\n "
      }
    ]
  },
  {
    "sha": "1f18d7b591ffcc8bb9422a9b728bd9a0d8da6a2a",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoxZjE4ZDdiNTkxZmZjYzhiYjk0MjJhOWI3MjhiZDlhMGQ4ZGE2YTJh",
    "commit": {
      "author": {
        "name": "Gregory Sanders",
        "email": "gsanders87@gmail.com",
        "date": "2018-08-15T01:12:33Z"
      },
      "committer": {
        "name": "Gregory Sanders",
        "email": "gsanders87@gmail.com",
        "date": "2018-08-20T17:02:20Z"
      },
      "message": "walletcreatefundedpsbt: remove duplicate replaceable arg",
      "tree": {
        "sha": "cd956cd0a4710ac56098d54a5ab0677c89a0becd",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/cd956cd0a4710ac56098d54a5ab0677c89a0becd"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1f18d7b591ffcc8bb9422a9b728bd9a0d8da6a2a",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1f18d7b591ffcc8bb9422a9b728bd9a0d8da6a2a",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/1f18d7b591ffcc8bb9422a9b728bd9a0d8da6a2a",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1f18d7b591ffcc8bb9422a9b728bd9a0d8da6a2a/comments",
    "author": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "2252ec50085c151e7998ca9a30cda6a33ee862b6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2252ec50085c151e7998ca9a30cda6a33ee862b6",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/2252ec50085c151e7998ca9a30cda6a33ee862b6"
      }
    ],
    "stats": {
      "total": 21,
      "additions": 9,
      "deletions": 12
    },
    "files": [
      {
        "sha": "c7f3e38ac098ed8d5a0cbb9635403286861c31db",
        "filename": "src/rpc/client.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 3,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/1f18d7b591ffcc8bb9422a9b728bd9a0d8da6a2a/src/rpc/client.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/1f18d7b591ffcc8bb9422a9b728bd9a0d8da6a2a/src/rpc/client.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/client.cpp?ref=1f18d7b591ffcc8bb9422a9b728bd9a0d8da6a2a",
        "patch": "@@ -113,9 +113,8 @@ static const CRPCConvertParam vRPCConvertParams[] =\n     { \"walletcreatefundedpsbt\", 0, \"inputs\" },\n     { \"walletcreatefundedpsbt\", 1, \"outputs\" },\n     { \"walletcreatefundedpsbt\", 2, \"locktime\" },\n-    { \"walletcreatefundedpsbt\", 3, \"replaceable\" },\n-    { \"walletcreatefundedpsbt\", 4, \"options\" },\n-    { \"walletcreatefundedpsbt\", 5, \"bip32derivs\" },\n+    { \"walletcreatefundedpsbt\", 3, \"options\" },\n+    { \"walletcreatefundedpsbt\", 4, \"bip32derivs\" },\n     { \"walletprocesspsbt\", 1, \"sign\" },\n     { \"walletprocesspsbt\", 3, \"bip32derivs\" },\n     { \"createpsbt\", 0, \"inputs\" },"
      },
      {
        "sha": "03c1a0f62ca1da0f15f0f7a81ce355cb8bea6638",
        "filename": "src/wallet/rpcwallet.cpp",
        "status": "modified",
        "additions": 7,
        "deletions": 9,
        "changes": 16,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/1f18d7b591ffcc8bb9422a9b728bd9a0d8da6a2a/src/wallet/rpcwallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/1f18d7b591ffcc8bb9422a9b728bd9a0d8da6a2a/src/wallet/rpcwallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/rpcwallet.cpp?ref=1f18d7b591ffcc8bb9422a9b728bd9a0d8da6a2a",
        "patch": "@@ -4643,7 +4643,7 @@ UniValue walletcreatefundedpsbt(const JSONRPCRequest& request)\n         return NullUniValue;\n     }\n \n-    if (request.fHelp || request.params.size() < 2 || request.params.size() > 6)\n+    if (request.fHelp || request.params.size() < 2 || request.params.size() > 5)\n         throw std::runtime_error(\n                             \"walletcreatefundedpsbt [{\\\"txid\\\":\\\"id\\\",\\\"vout\\\":n},...] [{\\\"address\\\":amount},{\\\"data\\\":\\\"hex\\\"},...] ( locktime ) ( replaceable ) ( options bip32derivs )\\n\"\n                             \"\\nCreates and funds a transaction in the Partially Signed Transaction format. Inputs will be added if supplied inputs are not enough\\n\"\n@@ -4670,9 +4670,8 @@ UniValue walletcreatefundedpsbt(const JSONRPCRequest& request)\n                             \"                             accepted as second parameter.\\n\"\n                             \"   ]\\n\"\n                             \"3. locktime                  (numeric, optional, default=0) Raw locktime. Non-0 value also locktime-activates inputs\\n\"\n-                            \"4. replaceable               (boolean, optional, default=false) Marks this transaction as BIP125 replaceable.\\n\"\n                             \"                             Allows this transaction to be replaced by a transaction with higher fees. If provided, it is an error if explicit sequence numbers are incompatible.\\n\"\n-                            \"5. options                 (object, optional)\\n\"\n+                            \"4. options                 (object, optional)\\n\"\n                             \"   {\\n\"\n                             \"     \\\"changeAddress\\\"          (string, optional, default pool address) The bitcoin address to receive the change\\n\"\n                             \"     \\\"changePosition\\\"         (numeric, optional, default random) The index of the change output\\n\"\n@@ -4694,7 +4693,7 @@ UniValue walletcreatefundedpsbt(const JSONRPCRequest& request)\n                             \"         \\\"ECONOMICAL\\\"\\n\"\n                             \"         \\\"CONSERVATIVE\\\"\\n\"\n                             \"   }\\n\"\n-                            \"6. bip32derivs                    (boolean, optiona, default=false) If true, includes the BIP 32 derivation paths for public keys if we know them\\n\"\n+                            \"5. bip32derivs                    (boolean, optiona, default=false) If true, includes the BIP 32 derivation paths for public keys if we know them\\n\"\n                             \"\\nResult:\\n\"\n                             \"{\\n\"\n                             \"  \\\"psbt\\\": \\\"value\\\",        (string)  The resulting raw transaction (base64-encoded string)\\n\"\n@@ -4710,15 +4709,14 @@ UniValue walletcreatefundedpsbt(const JSONRPCRequest& request)\n         UniValue::VARR,\n         UniValueType(), // ARR or OBJ, checked later\n         UniValue::VNUM,\n-        UniValue::VBOOL,\n         UniValue::VOBJ\n         }, true\n     );\n \n     CAmount fee;\n     int change_position;\n-    CMutableTransaction rawTx = ConstructTransaction(request.params[0], request.params[1], request.params[2], request.params[3]);\n-    FundTransaction(pwallet, rawTx, fee, change_position, request.params[4]);\n+    CMutableTransaction rawTx = ConstructTransaction(request.params[0], request.params[1], request.params[2], request.params[3][\"replaceable\"]);\n+    FundTransaction(pwallet, rawTx, fee, change_position, request.params[3]);\n \n     // Make a blank psbt\n     PartiallySignedTransaction psbtx;\n@@ -4735,7 +4733,7 @@ UniValue walletcreatefundedpsbt(const JSONRPCRequest& request)\n     const CTransaction txConst(*psbtx.tx);\n \n     // Fill transaction with out data but don't sign\n-    bool bip32derivs = request.params[5].isNull() ? false : request.params[5].get_bool();\n+    bool bip32derivs = request.params[4].isNull() ? false : request.params[5].get_bool();\n     FillPSBT(pwallet, psbtx, &txConst, 1, false, bip32derivs);\n \n     // Serialize the PSBT\n@@ -4765,7 +4763,7 @@ static const CRPCCommand commands[] =\n     //  --------------------- ------------------------          -----------------------         ----------\n     { \"rawtransactions\",    \"fundrawtransaction\",               &fundrawtransaction,            {\"hexstring\",\"options\",\"iswitness\"} },\n     { \"wallet\",             \"walletprocesspsbt\",                &walletprocesspsbt,             {\"psbt\",\"sign\",\"sighashtype\",\"bip32derivs\"} },\n-    { \"wallet\",             \"walletcreatefundedpsbt\",           &walletcreatefundedpsbt,        {\"inputs\",\"outputs\",\"locktime\",\"replaceable\",\"options\",\"bip32derivs\"} },\n+    { \"wallet\",             \"walletcreatefundedpsbt\",           &walletcreatefundedpsbt,        {\"inputs\",\"outputs\",\"locktime\",\"options\",\"bip32derivs\"} },\n     { \"hidden\",             \"resendwallettransactions\",         &resendwallettransactions,      {} },\n     { \"wallet\",             \"abandontransaction\",               &abandontransaction,            {\"txid\"} },\n     { \"wallet\",             \"abortrescan\",                      &abortrescan,                   {} },"
      }
    ]
  },
  {
    "sha": "1f0c4282e961baea85d5f74d7493bd7459784391",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoxZjBjNDI4MmU5NjFiYWVhODVkNWY3NGQ3NDkzYmQ3NDU5Nzg0Mzkx",
    "commit": {
      "author": {
        "name": "Gregory Sanders",
        "email": "gsanders87@gmail.com",
        "date": "2018-08-15T01:52:16Z"
      },
      "committer": {
        "name": "Gregory Sanders",
        "email": "gsanders87@gmail.com",
        "date": "2018-08-20T17:02:20Z"
      },
      "message": "QA: add basic walletcreatefunded optional arg test",
      "tree": {
        "sha": "6cde81ce9c959a180c2e45b2257bb0bd573d7f90",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6cde81ce9c959a180c2e45b2257bb0bd573d7f90"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1f0c4282e961baea85d5f74d7493bd7459784391",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1f0c4282e961baea85d5f74d7493bd7459784391",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/1f0c4282e961baea85d5f74d7493bd7459784391",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1f0c4282e961baea85d5f74d7493bd7459784391/comments",
    "author": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "1f18d7b591ffcc8bb9422a9b728bd9a0d8da6a2a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1f18d7b591ffcc8bb9422a9b728bd9a0d8da6a2a",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/1f18d7b591ffcc8bb9422a9b728bd9a0d8da6a2a"
      }
    ],
    "stats": {
      "total": 29,
      "additions": 29,
      "deletions": 0
    },
    "files": [
      {
        "sha": "f847a01e59ea12424edc14bf7cad6d4c4a23636f",
        "filename": "test/functional/rpc_psbt.py",
        "status": "modified",
        "additions": 29,
        "deletions": 0,
        "changes": 29,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/1f0c4282e961baea85d5f74d7493bd7459784391/test/functional/rpc_psbt.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/1f0c4282e961baea85d5f74d7493bd7459784391/test/functional/rpc_psbt.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/rpc_psbt.py?ref=1f0c4282e961baea85d5f74d7493bd7459784391",
        "patch": "@@ -11,6 +11,8 @@\n import json\n import os\n \n+MAX_BIP125_RBF_SEQUENCE = 0xfffffffd\n+\n # Create one-input, one-output, no-fee transaction:\n class PSBTTest(BitcoinTestFramework):\n \n@@ -135,6 +137,33 @@ def run_test(self):\n         self.nodes[0].generate(6)\n         self.sync_all()\n \n+        # Test additional args in walletcreatepsbt\n+        # Make sure both pre-included and funded inputs\n+        # have the correct sequence numbers based on\n+        # replaceable arg\n+        block_height = self.nodes[0].getblockcount()\n+        unspent = self.nodes[0].listunspent()[0]\n+        psbtx_info = self.nodes[0].walletcreatefundedpsbt([{\"txid\":unspent[\"txid\"], \"vout\":unspent[\"vout\"]}], [{self.nodes[2].getnewaddress():unspent[\"amount\"]+1}], block_height+2, {\"replaceable\":True})\n+        decoded_psbt = self.nodes[0].decodepsbt(psbtx_info[\"psbt\"])\n+        for tx_in in decoded_psbt[\"tx\"][\"vin\"]:\n+           assert_equal(tx_in[\"sequence\"], MAX_BIP125_RBF_SEQUENCE)\n+        assert_equal(decoded_psbt[\"tx\"][\"locktime\"], block_height+2)\n+\n+        # Same construction with only locktime set\n+        psbtx_info = self.nodes[0].walletcreatefundedpsbt([{\"txid\":unspent[\"txid\"], \"vout\":unspent[\"vout\"]}], [{self.nodes[2].getnewaddress():unspent[\"amount\"]+1}], block_height)\n+        decoded_psbt = self.nodes[0].decodepsbt(psbtx_info[\"psbt\"])\n+        for tx_in in decoded_psbt[\"tx\"][\"vin\"]:\n+            assert tx_in[\"sequence\"] > MAX_BIP125_RBF_SEQUENCE\n+        assert_equal(decoded_psbt[\"tx\"][\"locktime\"], block_height)\n+\n+        # Same construction without optional arguments\n+        psbtx_info = self.nodes[0].walletcreatefundedpsbt([{\"txid\":unspent[\"txid\"], \"vout\":unspent[\"vout\"]}], [{self.nodes[2].getnewaddress():unspent[\"amount\"]+1}])\n+        decoded_psbt = self.nodes[0].decodepsbt(psbtx_info[\"psbt\"])\n+        for tx_in in decoded_psbt[\"tx\"][\"vin\"]:\n+            assert tx_in[\"sequence\"] > MAX_BIP125_RBF_SEQUENCE\n+        assert_equal(decoded_psbt[\"tx\"][\"locktime\"], 0)\n+\n+\n         # BIP 174 Test Vectors\n \n         # Check that unknown values are just passed through"
      }
    ]
  },
  {
    "sha": "faaac5caaab4d5131040292f4ef2404074ad268b",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYWFhYzVjYWFhYjRkNTEzMTA0MDI5MmY0ZWYyNDA0MDc0YWQyNjhi",
    "commit": {
      "author": {
        "name": "Gregory Sanders",
        "email": "gsanders87@gmail.com",
        "date": "2018-08-20T16:57:06Z"
      },
      "committer": {
        "name": "Gregory Sanders",
        "email": "gsanders87@gmail.com",
        "date": "2018-08-20T17:02:20Z"
      },
      "message": "RPCTypeCheck bip32derivs arg in walletcreatefunded",
      "tree": {
        "sha": "e368c53f620cc0383d2aff2cb4234dc87535522f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e368c53f620cc0383d2aff2cb4234dc87535522f"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/faaac5caaab4d5131040292f4ef2404074ad268b",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/faaac5caaab4d5131040292f4ef2404074ad268b",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/faaac5caaab4d5131040292f4ef2404074ad268b",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/faaac5caaab4d5131040292f4ef2404074ad268b/comments",
    "author": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "1f0c4282e961baea85d5f74d7493bd7459784391",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1f0c4282e961baea85d5f74d7493bd7459784391",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/1f0c4282e961baea85d5f74d7493bd7459784391"
      }
    ],
    "stats": {
      "total": 3,
      "additions": 2,
      "deletions": 1
    },
    "files": [
      {
        "sha": "0966334b828e2d3a047fc8d8b5adb74d6f747203",
        "filename": "src/wallet/rpcwallet.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 1,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/faaac5caaab4d5131040292f4ef2404074ad268b/src/wallet/rpcwallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/faaac5caaab4d5131040292f4ef2404074ad268b/src/wallet/rpcwallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/rpcwallet.cpp?ref=faaac5caaab4d5131040292f4ef2404074ad268b",
        "patch": "@@ -4709,7 +4709,8 @@ UniValue walletcreatefundedpsbt(const JSONRPCRequest& request)\n         UniValue::VARR,\n         UniValueType(), // ARR or OBJ, checked later\n         UniValue::VNUM,\n-        UniValue::VOBJ\n+        UniValue::VOBJ,\n+        UniValue::VBOOL\n         }, true\n     );\n "
      }
    ]
  }
]