DrahtBot,2018-10-23T22:05:06Z,"<!--e57a25ab6845829454e8d69fc972939a-->Reviewers, this pull request conflicts with the following ones:\n\n* #14485 (Try to use posix_fadvise with CBufferedFile by luke-jr)\n* #14320 ([bugfix] wallet: Fix duplicate fileid detection by ken2812221)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merge",https://github.com/bitcoin/bitcoin/pull/14531#issuecomment-432438862,432438862,
promag,2018-10-24T12:13:44Z,Alternative approach in #14561.,https://github.com/bitcoin/bitcoin/pull/14531#issuecomment-432630646,432630646,
ryanofsky,2018-10-24T14:10:50Z,Would suggest closing this. I think the fix in #14561 is simpler and more correct.,https://github.com/bitcoin/bitcoin/pull/14531#issuecomment-432673536,432673536,
promag,2018-10-24T14:18:30Z,Agree @ryanofsky.,https://github.com/bitcoin/bitcoin/pull/14531#issuecomment-432676572,432676572,
laanwj,2018-10-20T13:49:19Z,please add a unit test for this function,https://github.com/bitcoin/bitcoin/pull/14531#discussion_r226827703,226827703,src/wallet/walletutil.cpp
promag,2018-10-22T23:44:45Z,Done.,https://github.com/bitcoin/bitcoin/pull/14531#discussion_r227175529,227175529,src/wallet/walletutil.cpp
promag,2018-10-24T09:53:14Z,"Note to reviewers, I've removed the `set()` because it removes duplicate and that's not the point — `w7` was duplicate — `sorted()` is what's needed. ",https://github.com/bitcoin/bitcoin/pull/14531#discussion_r227720552,227720552,test/functional/wallet_multiwallet.py
ken2812221,2018-10-24T10:10:47Z,"On Windows, `std::filesystem::path(""C:\\"").parent_path() == std::filesystem::path(""C:\\"")`. It would be an infinity loop. (Only test std::filesystem in MSVC, doesn't test boost::filesystem)",https://github.com/bitcoin/bitcoin/pull/14531#discussion_r227726370,227726370,src/util.cpp
ken2812221,2018-10-24T10:29:16Z,"I assume this would cause infinity loop on Windows if  base / ""bar"" exist.\n```\nGetRelativePath(path, base, base / ""bar"");",https://github.com/bitcoin/bitcoin/pull/14531#discussion_r227731814,227731814,src/test/util_tests.cpp
ken2812221,2018-10-24T10:29:49Z,Use `SetDataDir` instead,https://github.com/bitcoin/bitcoin/pull/14531#discussion_r227731979,227731979,src/test/util_tests.cpp
promag,2018-10-24T10:49:36Z,I had that but `datadir` seemed unrelated to this function. I can revert if there is a reason to do that.,https://github.com/bitcoin/bitcoin/pull/14531#discussion_r227737578,227737578,src/test/util_tests.cpp
promag,2018-10-24T10:50:32Z,Added `parent != parent.root_path()` condition to the loop.,https://github.com/bitcoin/bitcoin/pull/14531#discussion_r227737843,227737843,src/util.cpp
laanwj,2018-10-24T12:19:43Z,BerkeleyFileId?,https://github.com/bitcoin/bitcoin/pull/14531#discussion_r227762656,227762656,src/wallet/db.h
laanwj,2018-10-24T12:44:28Z,"what are ""wild pointers""?",https://github.com/bitcoin/bitcoin/pull/14531#discussion_r227770685,227770685,src/wallet/db.cpp
promag,2018-10-24T12:53:31Z,"This is based on #14559, should comment there.",https://github.com/bitcoin/bitcoin/pull/14531#discussion_r227773972,227773972,src/wallet/db.cpp
ryanofsky,2018-10-24T13:43:15Z,"> On Windows, std::filesystem::path(""C:\\"").parent_path() == std::filesystem::path(""C:\\"")\n\nWorkaround seems ok, but is this is a bug? Both boost filesystem and std::filesystem are supposed to return empty if the path contains a single element:\n\nhttps://en.cppreference.com/w/cpp/experimental/fs/path/parent_path\nhttps://www.boost.org/doc/libs/1_68_0/libs/filesystem/doc/reference.html#path",https://github.com/bitcoin/bitcoin/pull/14531#discussion_r227793679,227793679,src/util.cpp
ken2812221,2018-10-24T13:48:48Z,"https://en.cppreference.com/w/cpp/filesystem/path/parent_path\nThe C++17 standard one is a little different from the experimental one.",https://github.com/bitcoin/bitcoin/pull/14531#discussion_r227796041,227796041,src/util.cpp
ken2812221,2018-10-24T13:50:47Z,Actually it's #14320,https://github.com/bitcoin/bitcoin/pull/14531#discussion_r227796854,227796854,src/wallet/db.cpp
promag,2018-10-24T14:18:11Z,aka prchain.,https://github.com/bitcoin/bitcoin/pull/14531#discussion_r227808522,227808522,src/wallet/db.cpp
