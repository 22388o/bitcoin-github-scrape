hebasto,2021-02-17 07:31:55,"Concept ACK.\n\nAre there steps to reproduce the bug, that was fixed in https://github.com/miniupnp/libnatpmp/pull/13, on a Windows 10 machine?",https://github.com/bitcoin/bitcoin/pull/21209#issuecomment-780365203,780365203,
hebasto,2021-02-17 08:36:27,"On macOS https://github.com/bitcoin/bitcoin/blob/6d3d7ac8d0db758b422fab811a3cafd93eee3a6a/depends/packages/libnatpmp.mk#L12 becomes (https://cirrus-ci.com/task/4969862553403392?command=ci#L1115)\n```\nstatic -o libnatpmp.a natpmp.o getgateway.o\n```\n\nDoes it related to some recent changes in the build system?",https://github.com/bitcoin/bitcoin/pull/21209#issuecomment-780395244,780395244,
fanquake,2021-02-17 09:02:58,"> Does it related to some recent changes in the build system?\n\nOops. Thanks. We just now have to tell it how to find `libtool`. The macOS cross build should be ok now.",https://github.com/bitcoin/bitcoin/pull/21209#issuecomment-780409496,780409496,
hebasto,2021-02-17 12:57:25,"@fanquake \n> We just now have to tell it how to find `libtool`.\n\nOut of curiosity, what does cause this need now?",https://github.com/bitcoin/bitcoin/pull/21209#issuecomment-780538475,780538475,
fanquake,2021-02-17 13:28:13,"> Out of curiosity, what does cause this need now?\n\nLooks like it's the changes: https://github.com/miniupnp/libnatpmp/commit/73968c934dc9d90226b18fb596c5e611c947c461. \n\nPrior to this commit, `ar crs` was being used unconditionally for building the static library. After this change, the Makefile uses `libtool` for macOS builds, with libtool being set via `LIBTOOL ?= $(shell which libtool)`",https://github.com/bitcoin/bitcoin/pull/21209#issuecomment-780555740,780555740,
hebasto,2021-02-17 13:31:42,"> > Out of curiosity, what does cause this need now?\n> \n> Looks like it's the changes: [miniupnp/libnatpmp@73968c9](https://github.com/miniupnp/libnatpmp/commit/73968c934dc9d90226b18fb596c5e611c947c461).\n\nMany thanks for explanation.\n\n---\n\nSorry for re-iterating:\n\n> Are there steps to reproduce the bug, that was fixed in [miniupnp/libnatpmp#13](https://github.com/miniupnp/libna",https://github.com/bitcoin/bitcoin/pull/21209#issuecomment-780557715,780557715,
fanquake,2021-02-17 14:16:04,"> Sorry for re-iterating:\n\nNo worries. I don't currently have any steps to reproduce the issue. ",https://github.com/bitcoin/bitcoin/pull/21209#issuecomment-780585275,780585275,
hebasto,2021-02-17 19:03:49,"The patch is correct, but I'm a bit reluctant to ACK update to a branch that:\n- is not a [proved](https://github.com/bitcoin/bitcoin/pull/21209#issuecomment-780585275) bugfix\n- has no long history of wide testing",https://github.com/bitcoin/bitcoin/pull/21209#issuecomment-780780095,780780095,
laanwj,2021-02-26 10:03:50,"> The patch is correct, but I'm a bit reluctant to ACK update to a branch that:\n\nYou have a point, though if the maintainer has stopped tagging releases but otherwise the project is still making fixes, we have to switch to tracking commits at some point. Still it is good to be careful and see if the gain outweighs the risk.",https://github.com/bitcoin/bitcoin/pull/21209#issuecomment-786545064,786545064,
hebasto,2021-02-26 19:24:40,"Just for the reference, Homebrew [suggests](https://formulae.brew.sh/formula/libnatpmp) the `20150609` version (which is our current version).",https://github.com/bitcoin/bitcoin/pull/21209#issuecomment-786846548,786846548,
DrahtBot,2021-03-01 13:29:56,<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.,https://github.com/bitcoin/bitcoin/pull/21209#issuecomment-787949481,787949481,
fanquake,2021-03-04 04:45:02,"I've updated this PR to also fix  the issue described in #21350. We define and use `NATPMP_STATICLIB`, similar to how we use `MINIUPNP_STATICLIB`. `STATICLIB` is also included, because both of these defines used to be `STATICLIB`, so if someone wass using an older source (actually the commit after what is in our current tarball, https://github.com/miniupnp/libnatpmp/commit/d5d2d6d74a25f019c367c4a1",https://github.com/bitcoin/bitcoin/pull/21209#issuecomment-790286908,790286908,
fanquake,2021-03-04 06:34:47,"Guix  builds at 7af25024e9563241c72797d4eeabdf660e548f53:\n```bash\nbash-5.1# find output/ -type f -print0 | env LC_ALL=C sort -z | xargs -r0 sha256sum\n1ff0a38e72aba62097e0dc1232104542a9d363e577c25b710b250db78cd876a2  output/bitcoin-7af25024e956-aarch64-linux-gnu-debug.tar.gz\nc53e3b36343053fd99794232147a01c4b6742a8fd62005804e6b47c8b6b05933  output/bitcoin-7af25024e956-aarch64-linux-gnu.tar.g",https://github.com/bitcoin/bitcoin/pull/21209#issuecomment-790344695,790344695,
laanwj,2021-03-04 09:56:21,"Concept/Approach ACK, agree with @fanquake's reasoning",https://github.com/bitcoin/bitcoin/pull/21209#issuecomment-790488588,790488588,
laanwj,2021-03-05 15:24:47,I get the same Guix output as @hebasto.,https://github.com/bitcoin/bitcoin/pull/21209#issuecomment-791488770,791488770,
DrahtBot,2021-03-07 04:03:15,<!--9cd9c72976c961c55c7acef8f6ba82cd-->\n### Guix builds\n\n| File | commit b4d22654fe9e90093e643cb7beb896c48a274d47<br>(master) | commit 765be8dc13020897eb8a15b7e4aea93109906062<br>(master and this pull) |\n|--|--|--|\n| *-aarch64-linux-gnu-debug.tar.gz | [`6a823a1f747b82d7...`](https://drahtbot.space/guix/bitcoin/bitcoin/b4d22654fe9e90093e643cb7beb896c48a274d47/bitcoin-b4d22654fe9e-aarch64-linux,https://github.com/bitcoin/bitcoin/pull/21209#issuecomment-792197267,792197267,
hebasto,2021-03-04 07:16:47,"> `STATICLIB` is also included, because both of these defines used to be `STATICLIB`, so if someone wass using an older source (actually the commit after what is in our current tarball, [miniupnp/libnatpmp@d5d2d6d](https://github.com/miniupnp/libnatpmp/commit/d5d2d6d74a25f019c367c4a1942e98906b97cb89)) , they would need that defined instead.\n\nI'm not follow why do we need `-DSTATICLIB` now?",https://github.com/bitcoin/bitcoin/pull/21209#discussion_r587208910,587208910,configure.ac
