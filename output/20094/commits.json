[
  {
    "sha": "729b5775bc52fcd16ee7853a340e3407ad645a65",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo3MjliNTc3NWJjNTJmY2QxNmVlNzg1M2EzNDBlMzQwN2FkNjQ1YTY1",
    "commit": {
      "author": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2020-10-06T16:47:26Z"
      },
      "committer": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2020-10-29T15:14:39Z"
      },
      "message": "wallet, log, qa: Unify wallet directory lock error message\n\nThis change removes redundant LogPrintf call, and unifies error message\nwording with the similar datadir lock error message.",
      "tree": {
        "sha": "55185dde57f1beebdd94dd5e014cb31a4871402e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/55185dde57f1beebdd94dd5e014cb31a4871402e"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/729b5775bc52fcd16ee7853a340e3407ad645a65",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE0dvyxLlvLev0wWZUQQEIES5+qB8FAl+a3F8ACgkQQQEIES5+\nqB/hdhAAvYunsXuiD6wvW/3C/oj20RJKS8Vour1TCwX9cs3og3CAOeTjZW8cezFv\nRrYB4GIPGnjR88pa3QYdfYJ/W3wWaK6bTv/J2h+k/9iVrmabmabat1KnVM9/T8r8\nvPs/sbfAozmzUjR1k00cXKr0L76kMdG7duntaTI575CGKMH9HqMY+EkVh0t4lf5e\nPQSv4bceQJikFODJVtLY2+2pDlTDCzwIYVou5QCRBxcc3FAOAAOEG0EHM3GG+19D\nw6Jydt2FApbT9FaZCo4XIZvGIGEyZoAG9UkTN1qQT6w3fTk1IWRe+wGSeTbRxEA7\npJS+uJ5s9Zc6vryY4SnO54B8htuB0CSjUW6FaESYFTEgBHqH0ur8by09rGrb/xlY\nAIZAoyhMgZaeCa1AcFiVF6/IZPwPb8tnHGz7l9GUJRL51xT9I5ww2N0nagxgv0/L\nuDlJQig4eTvBTo0HupEB6i9Etu9z6y8viJWmr3MwfsISqzJPjCO7QClpje/pQ2iI\nBKFH+zCECYSS281lrlk4VAvv8t+nTg58zNFvHD63UlzdCutAczE6cJyKx2OtLKWI\n7nA+6A4r8TT+E5zgF9OQG+MnMh7Lx4wJUr5y/GBar9V4lWBtFC1qzBSoMQfXP8pd\nxJrGsPgEbltd/VfyMUccTkKz9WYHn7zc8GMh8dZSgootjxjD+rM=\n=1jSS\n-----END PGP SIGNATURE-----",
        "payload": "tree 55185dde57f1beebdd94dd5e014cb31a4871402e\nparent 42b66a6b814bca130a9ccf0a3f747cf33d628232\nauthor Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1602002846 +0300\ncommitter Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1603984479 +0200\n\nwallet, log, qa: Unify wallet directory lock error message\n\nThis change removes redundant LogPrintf call, and unifies error message\nwording with the similar datadir lock error message.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/729b5775bc52fcd16ee7853a340e3407ad645a65",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/729b5775bc52fcd16ee7853a340e3407ad645a65",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/729b5775bc52fcd16ee7853a340e3407ad645a65/comments",
    "author": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "42b66a6b814bca130a9ccf0a3f747cf33d628232",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/42b66a6b814bca130a9ccf0a3f747cf33d628232",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/42b66a6b814bca130a9ccf0a3f747cf33d628232"
      }
    ],
    "stats": {
      "total": 17,
      "additions": 8,
      "deletions": 9
    },
    "files": [
      {
        "sha": "1e39f5be043cf97f86a3e50c411d6e804e36328f",
        "filename": "src/wallet/bdb.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 2,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/729b5775bc52fcd16ee7853a340e3407ad645a65/src/wallet/bdb.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/729b5775bc52fcd16ee7853a340e3407ad645a65/src/wallet/bdb.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/bdb.cpp?ref=729b5775bc52fcd16ee7853a340e3407ad645a65",
        "patch": "@@ -135,8 +135,7 @@ bool BerkeleyEnvironment::Open(bilingual_str& err)\n     fs::path pathIn = strPath;\n     TryCreateDirectories(pathIn);\n     if (!LockDirectory(pathIn, \".walletlock\")) {\n-        LogPrintf(\"Cannot obtain a lock on wallet directory %s. Another instance of bitcoin may be using it.\\n\", strPath);\n-        err = strprintf(_(\"Error initializing wallet database environment %s!\"), Directory());\n+        err = strprintf(_(\"Cannot obtain a lock on wallet directory %s. %s is probably already running.\"), pathIn.string(), PACKAGE_NAME);\n         return false;\n     }\n "
      },
      {
        "sha": "dc6e77dd2a3d82ed8305244b8f3a8dadc3b0d756",
        "filename": "src/wallet/load.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/729b5775bc52fcd16ee7853a340e3407ad645a65/src/wallet/load.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/729b5775bc52fcd16ee7853a340e3407ad645a65/src/wallet/load.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/load.cpp?ref=729b5775bc52fcd16ee7853a340e3407ad645a65",
        "patch": "@@ -22,7 +22,7 @@ bool VerifyWallets(interfaces::Chain& chain)\n         fs::path wallet_dir = gArgs.GetArg(\"-walletdir\", \"\");\n         boost::system::error_code error;\n         // The canonical path cleans the path, preventing >1 Berkeley environment instances for the same directory\n-        fs::path canonical_wallet_dir = fs::canonical(wallet_dir, error);\n+        fs::path canonical_wallet_dir = fs::canonical(wallet_dir, error).make_preferred();\n         if (error || !fs::exists(wallet_dir)) {\n             chain.initError(strprintf(_(\"Specified -walletdir \\\"%s\\\" does not exist\"), wallet_dir.string()));\n             return false;"
      },
      {
        "sha": "59a95513f5e78c10258ed533383741f329dbfacd",
        "filename": "test/functional/feature_filelock.py",
        "status": "modified",
        "additions": 2,
        "deletions": 3,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/729b5775bc52fcd16ee7853a340e3407ad645a65/test/functional/feature_filelock.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/729b5775bc52fcd16ee7853a340e3407ad645a65/test/functional/feature_filelock.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/feature_filelock.py?ref=729b5775bc52fcd16ee7853a340e3407ad645a65",
        "patch": "@@ -6,7 +6,6 @@\n import os\n \n from test_framework.test_framework import BitcoinTestFramework\n-from test_framework.test_node import ErrorMatch\n \n class FilelockTest(BitcoinTestFramework):\n     def set_test_params(self):\n@@ -30,8 +29,8 @@ def run_test(self):\n             self.nodes[0].createwallet(self.default_wallet_name)\n             wallet_dir = os.path.join(datadir, 'wallets')\n             self.log.info(\"Check that we can't start a second bitcoind instance using the same wallet\")\n-            expected_msg = \"Error: Error initializing wallet database environment\"\n-            self.nodes[1].assert_start_raises_init_error(extra_args=['-walletdir={}'.format(wallet_dir), '-wallet=' + self.default_wallet_name, '-noserver'], expected_msg=expected_msg, match=ErrorMatch.PARTIAL_REGEX)\n+            expected_msg = \"Error: Cannot obtain a lock on wallet directory {0}. {1} is probably already running.\".format(wallet_dir, self.config['environment']['PACKAGE_NAME'])\n+            self.nodes[1].assert_start_raises_init_error(extra_args=['-walletdir={}'.format(wallet_dir), '-wallet=' + self.default_wallet_name, '-noserver'], expected_msg=expected_msg)\n \n if __name__ == '__main__':\n     FilelockTest().main()"
      },
      {
        "sha": "478dd79761f96379226b40ff8bfeda60623cb369",
        "filename": "test/functional/tool_wallet.py",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/729b5775bc52fcd16ee7853a340e3407ad645a65/test/functional/tool_wallet.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/729b5775bc52fcd16ee7853a340e3407ad645a65/test/functional/tool_wallet.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/tool_wallet.py?ref=729b5775bc52fcd16ee7853a340e3407ad645a65",
        "patch": "@@ -72,7 +72,7 @@ def test_invalid_tool_commands_and_args(self):\n         self.assert_raises_tool_error('Error parsing command line arguments: Invalid parameter -foo', '-foo')\n         locked_dir = os.path.join(self.options.tmpdir, \"node0\", \"regtest\", \"wallets\")\n         self.assert_raises_tool_error(\n-            'Error initializing wallet database environment \"{}\"!'.format(locked_dir),\n+            'Cannot obtain a lock on wallet directory {0}. {1} is probably already running.'.format(locked_dir, self.config['environment']['PACKAGE_NAME']),\n             '-wallet=' + self.default_wallet_name,\n             'info',\n         )"
      },
      {
        "sha": "c352bdc3d1b4b541e03991fe7d55ea297d16fdb3",
        "filename": "test/functional/wallet_multiwallet.py",
        "status": "modified",
        "additions": 3,
        "deletions": 2,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/729b5775bc52fcd16ee7853a340e3407ad645a65/test/functional/wallet_multiwallet.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/729b5775bc52fcd16ee7853a340e3407ad645a65/test/functional/wallet_multiwallet.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/wallet_multiwallet.py?ref=729b5775bc52fcd16ee7853a340e3407ad645a65",
        "patch": "@@ -168,7 +168,7 @@ def wallet_file(name):\n         os.mkdir(competing_wallet_dir)\n         self.restart_node(0, ['-nowallet', '-walletdir=' + competing_wallet_dir])\n         self.nodes[0].createwallet(self.default_wallet_name, descriptors=False)\n-        exp_stderr = r\"Error: Error initializing wallet database environment \\\"\\S+competing_walletdir\\S*\\\"!\"\n+        exp_stderr = \"Error: Cannot obtain a lock on wallet directory {0}. {1} is probably already running.\".format(competing_wallet_dir, self.config['environment']['PACKAGE_NAME'])\n         self.nodes[1].assert_start_raises_init_error(['-walletdir=' + competing_wallet_dir], exp_stderr, match=ErrorMatch.PARTIAL_REGEX)\n \n         self.restart_node(0)\n@@ -373,7 +373,8 @@ def wallet_file(name):\n         if self.options.descriptors:\n             assert_raises_rpc_error(-4, \"Unable to obtain an exclusive lock\", self.nodes[1].loadwallet, wallet)\n         else:\n-            assert_raises_rpc_error(-4, \"Error initializing wallet database environment\", self.nodes[1].loadwallet, wallet)\n+            expected_rpc_error = \"Cannot obtain a lock on wallet directory {0}. {1} is probably already running.\".format(wallet, self.config['environment']['PACKAGE_NAME'])\n+            assert_raises_rpc_error(-4, expected_rpc_error, self.nodes[1].loadwallet, wallet)\n         self.nodes[0].unloadwallet(wallet)\n         self.nodes[1].loadwallet(wallet)\n "
      }
    ]
  },
  {
    "sha": "7504cac0a2975d91cea55211e804c4a32e1f1328",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo3NTA0Y2FjMGEyOTc1ZDkxY2VhNTUyMTFlODA0YzRhMzJlMWYxMzI4",
    "commit": {
      "author": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2020-10-07T10:00:10Z"
      },
      "committer": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2020-10-29T15:14:40Z"
      },
      "message": "[DO NOT MERGE] ci: Temporarily enable the functional tests on AppVeyor",
      "tree": {
        "sha": "b70f547bb1fa6967b1c5b2c41c0425c43f77258b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b70f547bb1fa6967b1c5b2c41c0425c43f77258b"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7504cac0a2975d91cea55211e804c4a32e1f1328",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE0dvyxLlvLev0wWZUQQEIES5+qB8FAl+a3GAACgkQQQEIES5+\nqB+bKhAAsndsHVW5VegfRn+0kL+g1l5AJf1ejKQI5BN6OGUeDj3h4DjO5511IVLl\ntR2qL7CXZHDFp+zQP34PgBYd82//HWtPkzzr7zNXjpmDGJNilr589fypa+qJDZYz\n4mNGXVrAs5Imayk9MfO9cm3gXmDFfZBqGUhW7ln4b0UOKGP9q4q2z4e/kSM3dC23\nD1fsQ3LLS3RQVggKckJVEPQNhxxAyCPAh2nAc5ESx6BqXalgtpKRcWdrhfMZqf3U\n6Ba7/sLFwbhXDwIA1PFNq5keNijx/uSOiAdfViHT726AVtWgZ4xPugCuJLjHYFQA\nbtbjq0xde3uwnu9IKKcFs3edeqmuEx6Slf/HU43AKW7x2praVRjxVqPYGs6RnE5+\n2LqTsliS7g/CYEIAKgyugAHkJtbD282M2CglxfwPVMVEw/xEFGrFYr/IrOm+FXVq\nwV2q7ss7PDToWAlqiOouLvqGGSLlwq2OVbX0f0+TsMVEh0gO58UYcjNcpuo6abUU\nqbrP51mbTGtjssUTTvxGE+TF+nWg8O4gb6m89GJvBbWaHYyWZbJ3j2TUaQxrXl+6\nAYaFhyACyN42J5jni0QT76oxcXCPsbUX+XyZHu5QG08J4HYF6HO2PnqhoiHxfT7C\nbZzaVahnwy3PAvNN+2ez2MJIxgWxYRZUudmKIv4LfjzbEOMkRAo=\n=lx8s\n-----END PGP SIGNATURE-----",
        "payload": "tree b70f547bb1fa6967b1c5b2c41c0425c43f77258b\nparent 729b5775bc52fcd16ee7853a340e3407ad645a65\nauthor Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1602064810 +0300\ncommitter Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1603984480 +0200\n\n[DO NOT MERGE] ci: Temporarily enable the functional tests on AppVeyor\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7504cac0a2975d91cea55211e804c4a32e1f1328",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/7504cac0a2975d91cea55211e804c4a32e1f1328",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7504cac0a2975d91cea55211e804c4a32e1f1328/comments",
    "author": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "729b5775bc52fcd16ee7853a340e3407ad645a65",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/729b5775bc52fcd16ee7853a340e3407ad645a65",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/729b5775bc52fcd16ee7853a340e3407ad645a65"
      }
    ],
    "stats": {
      "total": 5,
      "additions": 1,
      "deletions": 4
    },
    "files": [
      {
        "sha": "d10b68a34ac46e13e31c639739167d0c5ce8739c",
        "filename": ".appveyor.yml",
        "status": "modified",
        "additions": 1,
        "deletions": 4,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/7504cac0a2975d91cea55211e804c4a32e1f1328/.appveyor.yml",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/7504cac0a2975d91cea55211e804c4a32e1f1328/.appveyor.yml",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/.appveyor.yml?ref=7504cac0a2975d91cea55211e804c4a32e1f1328",
        "patch": "@@ -53,10 +53,7 @@ test_script:\n - ps:  python test\\util\\bitcoin-util-test.py\n - cmd: python test\\util\\rpcauth-test.py\n # Fee estimation test failing on appveyor with: WinError 10048] Only one usage of each socket address (protocol/network address/port) is normally permitted.\n-# functional tests disabled for now. See\n-# https://github.com/bitcoin/bitcoin/pull/18626#issuecomment-613396202\n-# https://github.com/bitcoin/bitcoin/issues/18623\n-# - cmd: python test\\functional\\test_runner.py --ci --quiet --combinedlogslen=4000 --failfast --exclude feature_fee_estimation\n+- cmd: python test\\functional\\test_runner.py --ci --quiet --combinedlogslen=4000 --exclude feature_fee_estimation\n artifacts:\n #- path: bitcoin-%APPVEYOR_BUILD_VERSION%.zip\n deploy: off"
      }
    ]
  }
]