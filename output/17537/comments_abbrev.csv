ryanofsky,2019-11-20 18:34:06,"To round this out I think it could also be good:\n\n- To move TopUp call up the stack from `LegacyScriptPubKeyMan::MarkUnusedAddresses` by having that method return whether it removed any keypool entries.\n- To add a note to `ScriptPubKeyMan::TopUp` header declaration saying that after initialization, individual ScriptPubKeyMan implementations shouldn't need to call this internally. External wa",https://github.com/bitcoin/bitcoin/pull/17537#issuecomment-556219306,556219306,
DrahtBot,2019-11-20 19:18:09,<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.,https://github.com/bitcoin/bitcoin/pull/17537#issuecomment-556271091,556271091,
achow101,2019-11-20 20:42:03,">     * To move TopUp call up the stack from `LegacyScriptPubKeyMan::MarkUnusedAddresses` by having that method return whether it removed any keypool entries.\n\nThat would be a behavior change. Since the TopUp is currently done as each key is checked, it would be possible that the next key to be checked is added by the TopUp from the previous key.\n\n>     * To add a note to `ScriptPubKeyMan:",https://github.com/bitcoin/bitcoin/pull/17537#issuecomment-556368007,556368007,
meshcollider,2019-11-22 20:19:37,Code review ACK a805c97b83d99ec3e0f48272131cfec92aaf82f5,https://github.com/bitcoin/bitcoin/pull/17537#issuecomment-557679620,557679620,
instagibbs,2019-12-05 16:56:11,utACK https://github.com/bitcoin/bitcoin/pull/17537/commits/6e77a7b65cda1b46ce42f0c99ca91562255aeb28 only change is slight elaboration on comment,https://github.com/bitcoin/bitcoin/pull/17537#issuecomment-562217193,562217193,
ryanofsky,2019-11-20 18:01:57,"In commit ""keypool: Move opportunistic TopUps from LegacyScriptPubKeyMan to CWallet and ReserveDestination"" (5921040b61bb5bdceddfbb94e58d51852f403232)\n\nI think you forgot to remove corresponding topup from LegacyScriptPubKeyMan::GetNewDestination",https://github.com/bitcoin/bitcoin/pull/17537#discussion_r348661153,348661153,src/wallet/wallet.cpp
achow101,2019-11-20 20:02:44,Oops. Fixed.,https://github.com/bitcoin/bitcoin/pull/17537#discussion_r348717969,348717969,src/wallet/wallet.cpp
instagibbs,2019-12-05 16:07:04,"This is a vaguely unactionable comment.\n\nCan we give a positive statement about when it's to be used? The last two uses appear to be when the old keypool is being blown away.",https://github.com/bitcoin/bitcoin/pull/17537#discussion_r354403141,354403141,src/wallet/scriptpubkeyman.h
achow101,2019-12-05 16:54:05,"Expanded the comment a bit more.\n\nIt's kind of hard to say when it should and should not be used. I'm just trying to avoid the previous behavior of sprinkling TopUps everywhere.",https://github.com/bitcoin/bitcoin/pull/17537#discussion_r354430434,354430434,src/wallet/scriptpubkeyman.h
instagibbs,2019-12-05 16:55:53,fair enough.,https://github.com/bitcoin/bitcoin/pull/17537#discussion_r354431521,354431521,src/wallet/scriptpubkeyman.h
