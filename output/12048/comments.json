[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/355214237",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12048#issuecomment-355214237",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12048",
    "id": 355214237,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NTIxNDIzNw==",
    "user": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?u=eab5d0cdbb6cc25087cb61d4ca4a6f85255f42a7&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-04T07:16:03Z",
    "updated_at": "2018-01-04T07:16:03Z",
    "author_association": "CONTRIBUTOR",
    "body": "Context: `LockedPool` is used for the `secure_allocator` which is used to allocate memory for private keys (mainly wallet, but also signrawtransactions and some import commands).\r\n\r\nPR makes sense to me.\r\nConcept ACK.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/355214237/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/370950939",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12048#issuecomment-370950939",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12048",
    "id": 370950939,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDk1MDkzOQ==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-06T22:24:21Z",
    "updated_at": "2018-03-06T22:24:21Z",
    "author_association": "MEMBER",
    "body": "Concept ACK - this is a great improvement, thanks! will need to review in detail that various data structures stay consistent, though.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/370950939/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/375304697",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12048#issuecomment-375304697",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12048",
    "id": 375304697,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM3NTMwNDY5Nw==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-03-22T13:26:20Z",
    "updated_at": "2018-03-22T13:26:20Z",
    "author_association": "MEMBER",
    "body": "I can find no problems with this, utACK 5fbf7c478a996974502d5d787b2ccf2fcc91ac78",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/375304697/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/159594718",
    "pull_request_review_id": 86568297,
    "id": 159594718,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1OTU5NDcxOA==",
    "diff_hunk": "@@ -97,16 +103,30 @@ void Arena::free(void *ptr)\n     if (i == chunks_used.end()) {\n         throw std::runtime_error(\"Arena: invalid or double free\");\n     }\n-    auto freed = *i;\n+    std::pair<char*, size_t> freed = *i;\n     chunks_used.erase(i);\n \n-    // Add space to free map, coalescing contiguous chunks\n-    auto next = chunks_free.upper_bound(freed.first);\n-    auto prev = (next == chunks_free.begin()) ? chunks_free.end() : std::prev(next);\n-    if (prev == chunks_free.end() || !extend(prev, freed))\n-        prev = chunks_free.emplace_hint(next, freed);\n-    if (next != chunks_free.end() && extend(prev, *next))\n+    // Coalesc freed with previous chunk",
    "path": "src/support/lockedpool.cpp",
    "position": null,
    "original_position": 72,
    "commit_id": "5fbf7c478a996974502d5d787b2ccf2fcc91ac78",
    "original_commit_id": "1e0ee9095ce87a3cee0b44a120f6297ac672f5d0",
    "user": {
      "login": "jimpo",
      "id": 881253,
      "node_id": "MDQ6VXNlcjg4MTI1Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jimpo",
      "html_url": "https://github.com/jimpo",
      "followers_url": "https://api.github.com/users/jimpo/followers",
      "following_url": "https://api.github.com/users/jimpo/following{/other_user}",
      "gists_url": "https://api.github.com/users/jimpo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jimpo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
      "organizations_url": "https://api.github.com/users/jimpo/orgs",
      "repos_url": "https://api.github.com/users/jimpo/repos",
      "events_url": "https://api.github.com/users/jimpo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jimpo/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "typo: Coalesce",
    "created_at": "2018-01-04T07:49:50Z",
    "updated_at": "2018-01-06T08:14:41Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12048#discussion_r159594718",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12048",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/159594718"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12048#discussion_r159594718"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12048"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/159594718/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 109,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/159596074",
    "pull_request_review_id": 86568297,
    "id": 159596074,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1OTU5NjA3NA==",
    "diff_hunk": "@@ -97,16 +103,30 @@ void Arena::free(void *ptr)\n     if (i == chunks_used.end()) {\n         throw std::runtime_error(\"Arena: invalid or double free\");\n     }\n-    auto freed = *i;\n+    std::pair<char*, size_t> freed = *i;\n     chunks_used.erase(i);\n \n-    // Add space to free map, coalescing contiguous chunks\n-    auto next = chunks_free.upper_bound(freed.first);\n-    auto prev = (next == chunks_free.begin()) ? chunks_free.end() : std::prev(next);\n-    if (prev == chunks_free.end() || !extend(prev, freed))\n-        prev = chunks_free.emplace_hint(next, freed);\n-    if (next != chunks_free.end() && extend(prev, *next))\n+    // Coalesc freed with previous chunk\n+    auto prev = chunks_free_end.find(freed.first);",
    "path": "src/support/lockedpool.cpp",
    "position": null,
    "original_position": 73,
    "commit_id": "5fbf7c478a996974502d5d787b2ccf2fcc91ac78",
    "original_commit_id": "1e0ee9095ce87a3cee0b44a120f6297ac672f5d0",
    "user": {
      "login": "jimpo",
      "id": 881253,
      "node_id": "MDQ6VXNlcjg4MTI1Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jimpo",
      "html_url": "https://github.com/jimpo",
      "followers_url": "https://api.github.com/users/jimpo/followers",
      "following_url": "https://api.github.com/users/jimpo/following{/other_user}",
      "gists_url": "https://api.github.com/users/jimpo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jimpo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
      "organizations_url": "https://api.github.com/users/jimpo/orgs",
      "repos_url": "https://api.github.com/users/jimpo/repos",
      "events_url": "https://api.github.com/users/jimpo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jimpo/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Why is the `chunks_free_end` map required instead of iterating one backwards from `next` as is done in the current code?",
    "created_at": "2018-01-04T08:02:51Z",
    "updated_at": "2018-01-06T08:14:41Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12048#discussion_r159596074",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12048",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/159596074"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12048#discussion_r159596074"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12048"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/159596074/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 110,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/159596248",
    "pull_request_review_id": 86568297,
    "id": 159596248,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1OTU5NjI0OA==",
    "diff_hunk": "@@ -63,26 +65,30 @@ void* Arena::alloc(size_t size)\n     if (size == 0)\n         return nullptr;\n \n-    // Pick a large enough free-chunk\n-    auto it = std::find_if(chunks_free.begin(), chunks_free.end(),\n-        [=](const std::map<char*, size_t>::value_type& chunk){ return chunk.second >= size; });\n-    if (it == chunks_free.end())\n+    // Pick a large enough free-chunk. Returns an iterator pointing to the first element that is not less than key.\n+    // This allocation strategy is best-fit. According to \"Dynamic Storage Allocation: A Survey and Critical Review\",\n+    // Wilson et. al. 1995, http://www.scs.stanford.edu/14wi-cs140/sched/readings/wilson.pdf, best-fit and first-fit\n+    // policies seem to work well in practice.\n+    auto sizePtrIt = size_to_free_chunk.lower_bound(size);",
    "path": "src/support/lockedpool.cpp",
    "position": null,
    "original_position": 23,
    "commit_id": "5fbf7c478a996974502d5d787b2ccf2fcc91ac78",
    "original_commit_id": "1e0ee9095ce87a3cee0b44a120f6297ac672f5d0",
    "user": {
      "login": "jimpo",
      "id": 881253,
      "node_id": "MDQ6VXNlcjg4MTI1Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jimpo",
      "html_url": "https://github.com/jimpo",
      "followers_url": "https://api.github.com/users/jimpo/followers",
      "following_url": "https://api.github.com/users/jimpo/following{/other_user}",
      "gists_url": "https://api.github.com/users/jimpo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jimpo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
      "organizations_url": "https://api.github.com/users/jimpo/orgs",
      "repos_url": "https://api.github.com/users/jimpo/repos",
      "events_url": "https://api.github.com/users/jimpo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jimpo/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "nit: Variable names are snake_case, per [developer guidelines](https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md). Fix `sizePtrIt`, `sizeRemaining`, `itRemaining`.",
    "created_at": "2018-01-04T08:04:33Z",
    "updated_at": "2018-01-06T08:14:41Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12048#discussion_r159596248",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12048",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/159596248"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12048#discussion_r159596248"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12048"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/159596248/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 72,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/159608353",
    "pull_request_review_id": 86584121,
    "id": 159608353,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1OTYwODM1Mw==",
    "diff_hunk": "@@ -97,16 +103,30 @@ void Arena::free(void *ptr)\n     if (i == chunks_used.end()) {\n         throw std::runtime_error(\"Arena: invalid or double free\");\n     }\n-    auto freed = *i;\n+    std::pair<char*, size_t> freed = *i;\n     chunks_used.erase(i);\n \n-    // Add space to free map, coalescing contiguous chunks\n-    auto next = chunks_free.upper_bound(freed.first);\n-    auto prev = (next == chunks_free.begin()) ? chunks_free.end() : std::prev(next);\n-    if (prev == chunks_free.end() || !extend(prev, freed))\n-        prev = chunks_free.emplace_hint(next, freed);\n-    if (next != chunks_free.end() && extend(prev, *next))\n+    // Coalesc freed with previous chunk\n+    auto prev = chunks_free_end.find(freed.first);",
    "path": "src/support/lockedpool.cpp",
    "position": null,
    "original_position": 73,
    "commit_id": "5fbf7c478a996974502d5d787b2ccf2fcc91ac78",
    "original_commit_id": "1e0ee9095ce87a3cee0b44a120f6297ac672f5d0",
    "user": {
      "login": "martinus",
      "id": 14386,
      "node_id": "MDQ6VXNlcjE0Mzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/14386?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/martinus",
      "html_url": "https://github.com/martinus",
      "followers_url": "https://api.github.com/users/martinus/followers",
      "following_url": "https://api.github.com/users/martinus/following{/other_user}",
      "gists_url": "https://api.github.com/users/martinus/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/martinus/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/martinus/subscriptions",
      "organizations_url": "https://api.github.com/users/martinus/orgs",
      "repos_url": "https://api.github.com/users/martinus/repos",
      "events_url": "https://api.github.com/users/martinus/events{/privacy}",
      "received_events_url": "https://api.github.com/users/martinus/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "the `cunks_free` used to be an `std::map` that was sorted by `char*`. There it was possible to use `std::prev` to just find what memory address came before. I have replaced this sorted map with an `std::unordered_map`, then it's not possible any more to just find the previous address quickly within the same map. That's why I have added another map that contains the back links. So this change replaces one O(log(n)) lookup + std::prev() call with two O(1) lookups.\r\n  ",
    "created_at": "2018-01-04T09:25:10Z",
    "updated_at": "2018-01-06T08:14:41Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12048#discussion_r159608353",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12048",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/159608353"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12048#discussion_r159608353"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12048"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/159608353/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 110,
    "side": "RIGHT",
    "in_reply_to_id": 159596074
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/160021061",
    "pull_request_review_id": 87070891,
    "id": 160021061,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MDAyMTA2MQ==",
    "diff_hunk": "@@ -63,26 +65,30 @@ void* Arena::alloc(size_t size)\n     if (size == 0)\n         return nullptr;\n \n-    // Pick a large enough free-chunk\n-    auto it = std::find_if(chunks_free.begin(), chunks_free.end(),\n-        [=](const std::map<char*, size_t>::value_type& chunk){ return chunk.second >= size; });\n-    if (it == chunks_free.end())\n+    // Pick a large enough free-chunk. Returns an iterator pointing to the first element that is not less than key.\n+    // This allocation strategy is best-fit. According to \"Dynamic Storage Allocation: A Survey and Critical Review\",\n+    // Wilson et. al. 1995, http://www.scs.stanford.edu/14wi-cs140/sched/readings/wilson.pdf, best-fit and first-fit\n+    // policies seem to work well in practice.\n+    auto sizePtrIt = size_to_free_chunk.lower_bound(size);",
    "path": "src/support/lockedpool.cpp",
    "position": null,
    "original_position": 23,
    "commit_id": "5fbf7c478a996974502d5d787b2ccf2fcc91ac78",
    "original_commit_id": "1e0ee9095ce87a3cee0b44a120f6297ac672f5d0",
    "user": {
      "login": "martinus",
      "id": 14386,
      "node_id": "MDQ6VXNlcjE0Mzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/14386?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/martinus",
      "html_url": "https://github.com/martinus",
      "followers_url": "https://api.github.com/users/martinus/followers",
      "following_url": "https://api.github.com/users/martinus/following{/other_user}",
      "gists_url": "https://api.github.com/users/martinus/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/martinus/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/martinus/subscriptions",
      "organizations_url": "https://api.github.com/users/martinus/orgs",
      "repos_url": "https://api.github.com/users/martinus/repos",
      "events_url": "https://api.github.com/users/martinus/events{/privacy}",
      "received_events_url": "https://api.github.com/users/martinus/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "done!",
    "created_at": "2018-01-06T08:38:58Z",
    "updated_at": "2018-01-06T08:38:58Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12048#discussion_r160021061",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12048",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/160021061"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12048#discussion_r160021061"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12048"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/160021061/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 72,
    "side": "RIGHT",
    "in_reply_to_id": 159596248
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/160021099",
    "pull_request_review_id": 87070897,
    "id": 160021099,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MDAyMTA5OQ==",
    "diff_hunk": "@@ -97,16 +103,30 @@ void Arena::free(void *ptr)\n     if (i == chunks_used.end()) {\n         throw std::runtime_error(\"Arena: invalid or double free\");\n     }\n-    auto freed = *i;\n+    std::pair<char*, size_t> freed = *i;\n     chunks_used.erase(i);\n \n-    // Add space to free map, coalescing contiguous chunks\n-    auto next = chunks_free.upper_bound(freed.first);\n-    auto prev = (next == chunks_free.begin()) ? chunks_free.end() : std::prev(next);\n-    if (prev == chunks_free.end() || !extend(prev, freed))\n-        prev = chunks_free.emplace_hint(next, freed);\n-    if (next != chunks_free.end() && extend(prev, *next))\n+    // Coalesc freed with previous chunk",
    "path": "src/support/lockedpool.cpp",
    "position": null,
    "original_position": 72,
    "commit_id": "5fbf7c478a996974502d5d787b2ccf2fcc91ac78",
    "original_commit_id": "1e0ee9095ce87a3cee0b44a120f6297ac672f5d0",
    "user": {
      "login": "martinus",
      "id": 14386,
      "node_id": "MDQ6VXNlcjE0Mzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/14386?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/martinus",
      "html_url": "https://github.com/martinus",
      "followers_url": "https://api.github.com/users/martinus/followers",
      "following_url": "https://api.github.com/users/martinus/following{/other_user}",
      "gists_url": "https://api.github.com/users/martinus/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/martinus/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/martinus/subscriptions",
      "organizations_url": "https://api.github.com/users/martinus/orgs",
      "repos_url": "https://api.github.com/users/martinus/repos",
      "events_url": "https://api.github.com/users/martinus/events{/privacy}",
      "received_events_url": "https://api.github.com/users/martinus/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "thanks, fixed",
    "created_at": "2018-01-06T08:39:11Z",
    "updated_at": "2018-01-06T08:39:11Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12048#discussion_r160021099",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12048",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/160021099"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12048#discussion_r160021099"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12048"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/160021099/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 109,
    "side": "RIGHT",
    "in_reply_to_id": 159594718
  }
]