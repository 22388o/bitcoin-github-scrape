laanwj,2016-06-30T08:38:34Z,"Yes I think this is an improvement, utACK\n",https://github.com/bitcoin/bitcoin/pull/8291#issuecomment-229597644,229597644,
MarcoFalke,2016-07-18T09:13:54Z,"Test 1:\n\n``` diff\n define(_COPYRIGHT_YEAR, 2016)\n-define(_COPYRIGHT_HOLDERS,[The %s developers])\n+define(_COPYRIGHT_HOLDERS,[The %s and other developers])\n define(_COPYRIGHT_HOLDERS_SUBSTITUTION,[[Bitcoin Core]])\n```\n\nResult 1: :white_check_mark: \n\n``` shell\n src/bitcoind -version | head -2\nBitcoin Core Daemon version v0.12.99.0-33336e1-dirty\nCopyright (C) 2009-2016 The Bitcoin Core ",https://github.com/bitcoin/bitcoin/pull/8291#issuecomment-233280692,233280692,
laanwj,2016-08-31T14:17:17Z,utACK 33336e1\n,https://github.com/bitcoin/bitcoin/pull/8291#issuecomment-243778348,243778348,
laanwj,2016-06-30T08:38:13Z,"or just:\n`if (std::string(""Bitcoin Core"") != COPYRIGHT_HOLDERS_SUBSTITUTION)`\nNo need to use compare() if you don't need to know the relative sorting.\n",https://github.com/bitcoin/bitcoin/pull/8291#discussion_r69093493,69093493,src/util.cpp
roques,2016-07-01T09:56:12Z,"Why not `if (""Bitcoin Core"" != COPYRIGHT_HOLDERS_SUBSTITUTION) {`?  At least `g++(1)` is able to evaluate that during compilation. When using `std::string` it generates code to create a `std::string` object and then calls the comparison function on that. The right hand side of the comparison is a `""…""` and not a `std::string` anyway.\nOr is there a style-reason for using `std::string`? This code i",https://github.com/bitcoin/bitcoin/pull/8291#discussion_r69276141,69276141,src/util.cpp
MarcoFalke,2016-07-01T10:18:25Z,"I have no background in cpp but the compiler tells me on your suggestion\n\n``` cpp\nutil.cpp: In function ‘std::__cxx11::string CopyrightHolders(const string&)’:\nutil.cpp:805:27: warning: comparison with string literal results in unspecified behaviour [-Waddress]\n     if (""Bitcoin Core"" != COPYRIGHT_HOLDERS_SUBSTITUTION) {\n                           ^\n```\n",https://github.com/bitcoin/bitcoin/pull/8291#discussion_r69279209,69279209,src/util.cpp
laanwj,2016-07-01T10:33:22Z,"Noooo please keep the std::string, comparing char*'s will not do what you want it to.\n",https://github.com/bitcoin/bitcoin/pull/8291#discussion_r69280845,69280845,src/util.cpp
sipa,2016-07-01T10:37:06Z,Comparing two string literals will likely do what you want due to the compiler merging the constants to the same memory location. This is not behaviour to rely on though.\n,https://github.com/bitcoin/bitcoin/pull/8291#discussion_r69281198,69281198,src/util.cpp
roques,2016-07-01T11:18:27Z,"@sipa, definitely.\nPlease, don't do what I suggested.\n`if (strcmp(""Bitcoin Core"", COPYRIGHT_HOLDERS_SUBSTITUTION) != 0)` can also be evaluated at compile time, but that's C, not C++ and is harder to read than what the patch currently does. Thus, just forget my suggestion.\n",https://github.com/bitcoin/bitcoin/pull/8291#discussion_r69285135,69285135,src/util.cpp
laanwj,2016-07-01T11:33:00Z,"> Comparing two string literals will likely do what you want due to the compiler merging the constants to the same memory location. This is not behaviour to rely on though.\n\nLOL yes 'it will mostly work' is the worst kind of working.\n\n> if (strcmp(""Bitcoin Core"", COPYRIGHT_HOLDERS_SUBSTITUTION) != 0) can also be evaluated at compile time\n\nI don't think we care here, it's not like this is a p",https://github.com/bitcoin/bitcoin/pull/8291#discussion_r69286398,69286398,src/util.cpp
luke-jr,2016-07-01T16:49:04Z,"This will break when COPYRIGHT_HOLDERS might not have ""%s"" to be replaced.\n",https://github.com/bitcoin/bitcoin/pull/8291#discussion_r69327113,69327113,src/util.cpp
luke-jr,2016-07-01T16:50:52Z,"Bitcoin Core developers could very well  be mentioned in COPYRIGHT_HOLDERS rather than COPYRIGHT_HOLDERS_SUBSTITUTION. For example:\n\n``` C++\n define(_COPYRIGHT_HOLDERS,[The %s and Bitcoin Core developers])\n define(_COPYRIGHT_HOLDERS_SUBSTITUTION,[Altcoin Core])\n```\n",https://github.com/bitcoin/bitcoin/pull/8291#discussion_r69327296,69327296,src/util.cpp
MarcoFalke,2016-07-02T08:49:06Z,"I don't think we support COPYRIGHT_HOLDERS with no ""%s"" in it. (If you really wanted to do that you'd also have to assert that COPYRIGHT_HOLDERS_SUBSTITUTION is empty? etc)\n\nIf someone feels like breaking that, they can figure out a fix for themselves. There is no need to keep unused code in our repo because someday someone might or might not use it.\n",https://github.com/bitcoin/bitcoin/pull/8291#discussion_r69375093,69375093,src/util.cpp
laanwj,2016-07-07T07:39:08Z,"@luke-jr In that case strprintf will explode in your face\nBut I don't see that as a problem, really. We support with %s, if you really want to do something differently you have to change this code too.\n",https://github.com/bitcoin/bitcoin/pull/8291#discussion_r69863083,69863083,src/util.cpp
MarcoFalke,2016-07-07T07:52:46Z,"It will only explode during run time, but I still think we should not keep fancy logic and several unused lines of code.\n",https://github.com/bitcoin/bitcoin/pull/8291#discussion_r69864509,69864509,src/util.cpp
MarcoFalke,2016-07-15T18:08:26Z,"@luke-jr Ideally there should be documentation (and commented out sample code) in configure.ac about the preferred method of adding a copyright string. Adding some heuristics to detect such additional string in some downstream helper method is good intention but doesn't really help, imo.\n",https://github.com/bitcoin/bitcoin/pull/8291#discussion_r71016445,71016445,src/util.cpp
laanwj,2016-07-18T08:53:02Z,"> Adding some heuristics to detect such additional string in some downstream helper method is good intention but doesn't really help, imo. Add a line note\n\nThe point here was to make it impossible to get rid of our copyright by just changing a build system variable. It feels incredibly brittle if all of the copyright string hinges on is something that is passed to the compiler as `-D` define.\n\",https://github.com/bitcoin/bitcoin/pull/8291#discussion_r71115697,71115697,src/util.cpp
MarcoFalke,2016-07-18T09:01:12Z,"I think with heuristic I meant ""try to handle strings with no %s correctly""\n",https://github.com/bitcoin/bitcoin/pull/8291#discussion_r71116672,71116672,src/util.cpp
laanwj,2016-07-18T09:12:18Z,Agree in that case.\n,https://github.com/bitcoin/bitcoin/pull/8291#discussion_r71117860,71117860,src/util.cpp
