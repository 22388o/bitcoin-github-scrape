meshcollider,2017-11-20T22:44:28Z,"Concept ACK\nIf only one file moves, I'd prefer just -log rather than logdir though",https://github.com/bitcoin/bitcoin/pull/11741#issuecomment-345856775,345856775,
eklitzke,2017-11-20T23:55:16Z,"@MeshCollider Do you think it's possible there would be other log files in the future? I'm interested in the future on working on a multi-process architecture for bitcoind, so that parts of the process could be sandboxed on Linux using seccomp(). In that world I'd want a log directory so there could be a log file per process, but maybe I'm overthinking things since there's just one log file today.",https://github.com/bitcoin/bitcoin/pull/11741#issuecomment-345870760,345870760,
promag,2017-11-21T00:00:42Z,Running regtest and testnet will use the same log file?,https://github.com/bitcoin/bitcoin/pull/11741#issuecomment-345871743,345871743,
eklitzke,2017-11-21T04:19:45Z,"@promag Can you explain further? That may be the case, but I am somewhat new and don't understand the issue you're describing.",https://github.com/bitcoin/bitcoin/pull/11741#issuecomment-345912466,345912466,
jonasschnelli,2017-11-21T06:12:53Z,"@eklitzke. I think what @promag means is, that in the default configuration (without the PR), the `debug.log` file is placed in `<datadir>/testnet/` or `<datadir>/regtest/` in case of testnet / regtest. Your logdir command would required one to switch the logdir when switching to -regtest, etc. Not sure if it's a real problem...",https://github.com/bitcoin/bitcoin/pull/11741#issuecomment-345927506,345927506,
laanwj,2017-11-21T07:34:51Z,"> If only one file moves, I'd prefer just -log rather than logdir though\n\nWould prefer just `-logfile` or such too. The log is just a text file, it needs to claim no environment, and a directory is not a good abstraction for it. If someone wants bitcoin to log to an existing directory with other log files e.g. `/var/log/bitcoinlog` that should be possible. The only requirement is write access.",https://github.com/bitcoin/bitcoin/pull/11741#issuecomment-345941364,345941364,
promag,2017-11-21T15:37:25Z,"> it needs to claim no environment\n\n@laanwj what do you mean? Currently there is `debug.log`, `testnet3/debug.log` and `regtest/debug.log`.",https://github.com/bitcoin/bitcoin/pull/11741#issuecomment-346064864,346064864,
laanwj,2017-11-21T15:47:44Z,"> @laanwj what do you mean? Currently there is debug.log, testnet3/debug.log and regtest/debug.log.\n\nYes, the regtest/testnet edge case again. It really sucks that we have these configuration options shared between networks.\nIt's not clear that users even want that layout when they manually specify the logfile! A similar issue to #11726.\nIf we can get per-network configuration in (e.g. #10",https://github.com/bitcoin/bitcoin/pull/11741#issuecomment-346068403,346068403,
ajtowns,2017-11-23T03:43:52Z,"I'm not sure per-network configuration gets the nonsense to go away :( There's three ways that it could work, I think:\n\n * logs always go in -logdir, if you start a regtest/testnet instance having specified it in bitcoin.conf, your logs get messy, you get told to RTFM, and cry bitter tears\n * if specified in bitcoin.conf, logdir only affects mainnet; but you can specify logdir via network.co",https://github.com/bitcoin/bitcoin/pull/11741#issuecomment-346526427,346526427,
meshcollider,2017-11-23T10:47:04Z,"@ajtowns I definitely prefer the first or second of those 3 options, I don't want to see a -regtest-logdir and -testnet-logdir argument as well, I think that's much too messy. Alternatively if we stick with -logdir instead of -logfile, we just call the log chain.log e.g. regtest.log, testnet3.log",https://github.com/bitcoin/bitcoin/pull/11741#issuecomment-346585161,346585161,
laanwj,2017-11-28T09:09:38Z,"> logs always go in -logdir, if you start a regtest/testnet instance having specified it in bitcoin.conf, your logs get messy, you get told to RTFM, and cry bitter tears\n\nFor the log it'd be remotely acceptable, but you'd never want a similar thing to happen for wallets.\n\nThis is nothing new, by the way!\n\n`-port` `-bind` `-rpcport` `-rpcbind` already suffer from this. They are really o",https://github.com/bitcoin/bitcoin/pull/11741#issuecomment-347458820,347458820,
laanwj,2017-12-06T14:16:10Z,Closing because #11781 was merged which covers this.,https://github.com/bitcoin/bitcoin/pull/11741#issuecomment-349651870,349651870,
jonasschnelli,2017-11-20T22:51:53Z,"Not sure if it should create directories,.. though if it does, in case the creation failed, it should not return an empty path, should rather return `GetDataDir()` in any failed case.",https://github.com/bitcoin/bitcoin/pull/11741#discussion_r152134344,152134344,src/util.cpp
eklitzke,2017-11-20T23:51:13Z,"I don't think the code (as written) can return an empty path. If `-logdir` is unset the outer if statement is skipped completely, the inner if statement is to handle the case where `-logdir` is set to the empty string. As I understand the boost::filesystem docs, if the `mkdir` fails then `fs::create_directories` will actually throw an exception.\n\nI'm OK with removing the `fs::create_directorie",https://github.com/bitcoin/bitcoin/pull/11741#discussion_r152144442,152144442,src/util.cpp
jonasschnelli,2017-11-21T00:04:05Z,"Hmm.. not sure. I just found this in the docs: `Returns: true if a new directory was created, otherwise false.`",https://github.com/bitcoin/bitcoin/pull/11741#discussion_r152146384,152146384,src/util.cpp
eklitzke,2017-11-21T04:18:11Z,"As I understand the documentation: `fs::create_directories` returns true if it actually had to issue a `mkdir(2)` call, and returns false if it did not (because the directory already existed). If the directory needs to be created and the underlying `mkdir(2)` call failed, then an exception is raised.",https://github.com/bitcoin/bitcoin/pull/11741#discussion_r152176089,152176089,src/util.cpp
jonasschnelli,2017-11-21T06:10:28Z,Oh.. yes.. your completely right. Nevermind then.,https://github.com/bitcoin/bitcoin/pull/11741#discussion_r152186186,152186186,src/util.cpp
