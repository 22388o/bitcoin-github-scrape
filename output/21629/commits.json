[
  {
    "sha": "a5491882a06d3bf7c486033037edd9c9203ecaed",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzphNTQ5MTg4MmEwNmQzYmY3YzQ4NjAzMzAzN2VkZDljOTIwM2VjYWVk",
    "commit": {
      "author": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2021-04-07T07:22:49Z"
      },
      "committer": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2021-04-07T12:50:10Z"
      },
      "message": "build: fix configuring when building depends with NO_BDB=1\n\nCurrently, if you build depends using `NO_BDB=1` (only sqlite wallets),\n./configure will fail as it still tries to find bdb. i.e:\n```bash\nchecking for Berkeley DB C++ headers... default\nconfigure: error: Found Berkeley DB other than 4.8, required for portable BDB wallets (--with-incompatible-bdb to ignore or --without-bdb to disable BDB wallet support)\n```\n\nThis PR fixes the build such that you can build depends, opting out of\nbdb without opting out of wallets entirely, and still configure\nsuccessfully.",
      "tree": {
        "sha": "cb5d9c0dc090af301dd7dea41d3233e0260ce9c1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/cb5d9c0dc090af301dd7dea41d3233e0260ce9c1"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a5491882a06d3bf7c486033037edd9c9203ecaed",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEz7FuIclQ9n+pXlWPLuufXMCVJsEFAmBtqoIACgkQLuufXMCV\nJsH9zxAAkI1l1bg+/64ar3irhJ/eKQYJqURxzzZkJBS7w5COfvZKLLp0p9pE90YB\nOAwEGi2B9KO29yGx4ltKl9ch8kUJMXkyKAwC+zy+MvyIVfpWGIhRGTaWiq55GxgX\n97hMDmHeWtkxZUKDKuOuhaO5g45+ZcKr1oDKpYV1J9p0d7HPYzp/oBPA5+tu9Prn\nvEeeKQWQiVMf+Bms9VYCfFB9px3loCVndyYE76uZ5R0ttaf8yOBMx7uoYaa8Auj8\nTbl6fmvyyYsj1t+Sz9Lu5WArSAlzD/c7Q5pGVraHjoX9x/Cb0LYWv7zVsXhYe5F0\nqCuNbkZh7Q+iQ7WvQHvPg/nGnyBGFvyO5OSAGm12NjIY9LYOlpyB6mFdG9yY1cZv\nyh+vXomn7nlcHKiaG6sSH3tYI7bayJx533mtY7kfD5y02yns4jIJQXuo/Hy/F5j5\nw2lrgBgy+D9R7ZYF/gT4Ytqc/mRxZwXl3AKgtQJ82me+EhG6oMeBCcLy1oGXbPQ1\nLIGQcvfU9omE2JsVmQY6gah8wCqYsXs850Sjdca/Z8UsnFIg+SpjrOwTBHHgVX+J\nDAYSPNjq+AlH/NH62jzUb0x/Wbmj7dQizl9gkra4UBQU+IE6cuba8jSTN3THlcM0\nDCHlDFTrgH4ipQxvENx8XbRKTlYr+ekmCKiMpQT+IxhLXVzLFGM=\n=7WYD\n-----END PGP SIGNATURE-----",
        "payload": "tree cb5d9c0dc090af301dd7dea41d3233e0260ce9c1\nparent aa69471ecd553dbcd7dd6d1b2e59dfb69d6a0cf3\nauthor fanquake <fanquake@gmail.com> 1617780169 +0800\ncommitter fanquake <fanquake@gmail.com> 1617799810 +0800\n\nbuild: fix configuring when building depends with NO_BDB=1\n\nCurrently, if you build depends using `NO_BDB=1` (only sqlite wallets),\n./configure will fail as it still tries to find bdb. i.e:\n```bash\nchecking for Berkeley DB C++ headers... default\nconfigure: error: Found Berkeley DB other than 4.8, required for portable BDB wallets (--with-incompatible-bdb to ignore or --without-bdb to disable BDB wallet support)\n```\n\nThis PR fixes the build such that you can build depends, opting out of\nbdb without opting out of wallets entirely, and still configure\nsuccessfully.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a5491882a06d3bf7c486033037edd9c9203ecaed",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/a5491882a06d3bf7c486033037edd9c9203ecaed",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a5491882a06d3bf7c486033037edd9c9203ecaed/comments",
    "author": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "aa69471ecd553dbcd7dd6d1b2e59dfb69d6a0cf3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/aa69471ecd553dbcd7dd6d1b2e59dfb69d6a0cf3",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/aa69471ecd553dbcd7dd6d1b2e59dfb69d6a0cf3"
      }
    ],
    "stats": {
      "total": 18,
      "additions": 16,
      "deletions": 2
    },
    "files": [
      {
        "sha": "014798d337d7c1f235818156bb1ed30a2fd4d481",
        "filename": "configure.ac",
        "status": "modified",
        "additions": 4,
        "deletions": 2,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a5491882a06d3bf7c486033037edd9c9203ecaed/configure.ac",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a5491882a06d3bf7c486033037edd9c9203ecaed/configure.ac",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/configure.ac?ref=a5491882a06d3bf7c486033037edd9c9203ecaed",
        "patch": "@@ -1326,9 +1326,11 @@ fi\n \n if test x$enable_wallet != xno; then\n     dnl Check for libdb_cxx only if wallet enabled\n-    BITCOIN_FIND_BDB48\n-    if test x$suppress_external_warnings != xno ; then\n+    if test \"x$use_bdb\" != \"xno\"; then\n+      BITCOIN_FIND_BDB48\n+      if test x$suppress_external_warnings != xno ; then\n         BDB_CPPFLAGS=SUPPRESS_WARNINGS($BDB_CPPFLAGS)\n+      fi\n     fi\n \n     dnl Check for sqlite3"
      },
      {
        "sha": "356a17591233c3cc9e7937777a862b3a332e0807",
        "filename": "depends/Makefile",
        "status": "modified",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a5491882a06d3bf7c486033037edd9c9203ecaed/depends/Makefile",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a5491882a06d3bf7c486033037edd9c9203ecaed/depends/Makefile",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/Makefile?ref=a5491882a06d3bf7c486033037edd9c9203ecaed",
        "patch": "@@ -34,6 +34,8 @@ BASE_CACHE ?= $(BASEDIR)/built\n SDK_PATH ?= $(BASEDIR)/SDKs\n NO_QT ?=\n NO_QR ?=\n+NO_BDB ?=\n+NO_SQLITE ?=\n NO_WALLET ?=\n NO_ZMQ ?=\n NO_UPNP ?=\n@@ -233,6 +235,8 @@ $(host_prefix)/share/config.site : config.site.in $(host_prefix)/.stamp_$(final_\n             -e 's|@no_qr@|$(NO_QR)|' \\\n             -e 's|@no_zmq@|$(NO_ZMQ)|' \\\n             -e 's|@no_wallet@|$(NO_WALLET)|' \\\n+            -e 's|@no_bdb@|$(NO_BDB)|' \\\n+            -e 's|@no_sqlite@|$(NO_SQLITE)|' \\\n             -e 's|@no_upnp@|$(NO_UPNP)|' \\\n             -e 's|@no_natpmp@|$(NO_NATPMP)|' \\\n             -e 's|@multiprocess@|$(MULTIPROCESS)|' \\"
      },
      {
        "sha": "bcc2850a534cd6e43602baec6ab6541f0a6ce0e4",
        "filename": "depends/config.site.in",
        "status": "modified",
        "additions": 8,
        "deletions": 0,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a5491882a06d3bf7c486033037edd9c9203ecaed/depends/config.site.in",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a5491882a06d3bf7c486033037edd9c9203ecaed/depends/config.site.in",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/config.site.in?ref=a5491882a06d3bf7c486033037edd9c9203ecaed",
        "patch": "@@ -38,6 +38,14 @@ if test -z \"$enable_wallet\" && test -n \"@no_wallet@\"; then\n   enable_wallet=no\n fi\n \n+if test -z \"$with_bdb\" && test -n \"@no_bdb@\"; then\n+  with_bdb=no\n+fi\n+\n+if test -z \"$with_sqlite\" && test -n \"@no_sqlite@\"; then\n+  with_sqlite=no\n+fi\n+\n if test -z \"$enable_multiprocess\" && test -n \"@multiprocess@\"; then\n   enable_multiprocess=yes\n fi"
      }
    ]
  }
]