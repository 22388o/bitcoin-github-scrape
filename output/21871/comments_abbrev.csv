hebasto,2021-05-06 12:55:35,Concep ACK. Was working on similar preventing #21771 right now :),https://github.com/bitcoin/bitcoin/pull/21871#issuecomment-833499448,833499448,
fanquake,2021-05-07 05:33:24,"Updated to fix a typo, and address the CI failure.",https://github.com/bitcoin/bitcoin/pull/21871#issuecomment-834080033,834080033,
hebasto,2021-05-08 14:10:33,"@fanquake \n> I would add a check for the version of the macOS SDK using during compilation (which should help prevent issues like #21771), however there seems to be a bug in LIEF when accessing `binary.build_version.sdk` (although not when `sdk` is printed as part of `build_version`). I have opened an issue upstream: [lief-project/LIEF#577](https://github.com/lief-project/LIEF/issues/577).\n\n",https://github.com/bitcoin/bitcoin/pull/21871#issuecomment-835378893,835378893,
fanquake,2021-05-09 08:39:34,"> Are we going to wait for LIEF 0.12 with a fix, or macOS SDK version check could be added in a separated PR?\n\nI've just added one here. Apparently LIEF 0.12 wont be released until September / October.",https://github.com/bitcoin/bitcoin/pull/21871#issuecomment-835746527,835746527,
hebasto,2021-05-09 11:55:31,"https://cirrus-ci.com/task/5407569322704896?logs=lint#L855:\n```\ncontrib/devtools/symbol-check.py:232: error: Item ""None"" of ""Optional[Match[str]]"" has no attribute ""groups""\nFound 1 error in 1 file (checked 200 source files)\n^---- failure generated from test/lint/lint-python.sh\n```",https://github.com/bitcoin/bitcoin/pull/21871#issuecomment-835791315,835791315,
hebasto,2021-05-09 14:15:53,"How about to check the solely `MIN_OS` error firing:\n```diff\n--- a/contrib/devtools/test-symbol-check.py\n+++ b/contrib/devtools/test-symbol-check.py\n@@ -142,6 +142,19 @@ class TestSymbolChecks(unittest.TestCase):\n         self.assertEqual(call_symbol_check(cc, source, executable, ['-mmacosx-version-min=10.14', '-Wl,-platform_version', '-Wl,macos', '-Wl,10.14', '-Wl,10.15.6']),\n        ",https://github.com/bitcoin/bitcoin/pull/21871#issuecomment-835816098,835816098,
hebasto,2021-05-09 14:23:11,Maybe add a test for the `SUBSYSTEM_VERSION` error to the `test_PE` function of the `test-symbol-check.py`?,https://github.com/bitcoin/bitcoin/pull/21871#issuecomment-835817371,835817371,
laanwj,2021-05-10 12:22:47,"```\ncontrib/devtools/symbol-check.py:232: error: Item ""None"" of ""Optional[Match[str]]"" has no attribute ""groups""\nFound 1 error in 1 file (checked 200 source files)\n```",https://github.com/bitcoin/bitcoin/pull/21871#issuecomment-836631393,836631393,
fanquake,2021-05-12 02:35:06,"> contrib/devtools/symbol-check.py:232: error: Item ""None"" of ""Optional[Match[str]]"" has no attribute ""groups""\n\nAddressed.\n\n> How about to check the solely MIN_OS error firing:\n\nThere is  some  overlap between the `MIN_OS` and `SDK` test. I think we have enough coverage in this regard.\n\n> Maybe add a test for the SUBSYSTEM_VERSION error to the test_PE function of the test-symbol-ch",https://github.com/bitcoin/bitcoin/pull/21871#issuecomment-839388061,839388061,
hebasto,2021-05-12 21:20:16,"Assuming that `test-symbol-check.py` could and should be ran for cross builds, I see this PR closely related to #20980.\n\nAt least #20980 allows to `make test-security-check` for macOS cross builds on Linux.\n\nAfter rebasing this PR on top of #20980 getting an error:\n```\n$ make test-security-check\n.\n----------------------------------------------------------------------\nRan 1 test i",https://github.com/bitcoin/bitcoin/pull/21871#issuecomment-840104559,840104559,
hebasto,2021-05-23 08:32:39,"@fanquake \n> > Are we going to wait for LIEF 0.12 with a fix, or macOS SDK version check could be added in a separated PR?\n> \n> I've just added one here. Apparently LIEF 0.12 wont be released until September / October.\n\nThe fix is included in LIEF [0.11.5](https://github.com/lief-project/LIEF/releases/tag/0.11.5).\nFrom the [changelog](https://github.com/lief-project/LIEF/blob/551ede538",https://github.com/bitcoin/bitcoin/pull/21871#issuecomment-846526031,846526031,
fanquake,2021-05-24 03:30:25,"> At least #20980 allows to make test-security-check for macOS cross builds on Linux.\n> After rebasing this PR on top of #20980 getting an error:\n\nOk. What is the actual error though?\n\n> The fix is included in LIEF 0.11.5.\n\nI've included an update to 0.11.5 in this PR, and simplified the SDK check.",https://github.com/bitcoin/bitcoin/pull/21871#issuecomment-846706916,846706916,
hebasto,2021-05-24 06:04:29,"> > At least #20980 allows to make test-security-check for macOS cross builds on Linux.\n> > After rebasing this PR on top of #20980 getting an error:\n> \n> Ok. What is the actual error though?\n\nWell, not an error, but changed behavior: `make test-security-check` fails (this PR on top of the master + #20980), while it passed before (this PR on top of the master).",https://github.com/bitcoin/bitcoin/pull/21871#issuecomment-846770938,846770938,
fanquake,2021-05-24 06:28:16,"> Well, not an error, but changed behavior:\n\nI understand. I'm asking is what is the underlying cause of the failure. I assume it's the compiler/linker not accepting some of the newly added flags.",https://github.com/bitcoin/bitcoin/pull/21871#issuecomment-846787493,846787493,
hebasto,2021-05-24 06:32:43,"> > Well, not an error, but changed behavior:\n> \n> I understand. I'm asking is what is the underlying cause of the failure. I assume it's the compiler/linker not accepting some of the newly added flags.\n\nFrom #bitcoin-builds channel on 2021-03-13:\n> 21:23:32 \<dongcarl> Oh huh... I'm guessing the test-*-check.py scripts don't expect the CC to be set with an SDK?",https://github.com/bitcoin/bitcoin/pull/21871#issuecomment-846790444,846790444,
fanquake,2021-06-10 03:22:19,"I've removed the macOS SDK check from test-security-check. I don't think it adds much value, and given we don't control the SDK version being used in the CI, we can't necessarily test for/using the same SDK version we expect in our binaries.",https://github.com/bitcoin/bitcoin/pull/21871#issuecomment-858249456,858249456,
practicalswift,2021-06-17 20:51:58,Concept ACK,https://github.com/bitcoin/bitcoin/pull/21871#issuecomment-863555447,863555447,
hebasto,2021-05-09 14:21:57,"typo:\n```suggestion\n    ('SUBSYSTEM_VERSION', check_PE_subsystem_version),\n```",https://github.com/bitcoin/bitcoin/pull/21871#discussion_r628897291,628897291,contrib/devtools/symbol-check.py
fanquake,2021-05-10 06:48:16,Fixed in next pushed.,https://github.com/bitcoin/bitcoin/pull/21871#discussion_r629087058,629087058,contrib/devtools/symbol-check.py
