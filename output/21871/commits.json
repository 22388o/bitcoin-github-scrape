[
  {
    "sha": "8732f7b6c92f9dcf37f3ab618e9daab0c52fc781",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo4NzMyZjdiNmM5MmY5ZGNmMzdmM2FiNjE4ZTlkYWFiMGM1MmZjNzgx",
    "commit": {
      "author": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2021-05-24T03:10:54Z"
      },
      "committer": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2021-06-10T02:40:52Z"
      },
      "message": "scripts: LIEF 0.11.5",
      "tree": {
        "sha": "5483a43d1d114f9d88ac23d295166768ceff0aa3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5483a43d1d114f9d88ac23d295166768ceff0aa3"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8732f7b6c92f9dcf37f3ab618e9daab0c52fc781",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEz7FuIclQ9n+pXlWPLuufXMCVJsEFAmDBe7QACgkQLuufXMCV\nJsHxOg/9Gs4Z15h9fSOtrUSKrAxr8HcxoQXKxNX0hTVBxGzqbjbRhKW2p70BbsMp\neDuTavbFHv5Lbgby5Mu1ijEhBeapg7/MeM/PDi7jl2TVY41x60vyoRpaVeletdJE\nrSpUS0XEIDmyHw7J0SsRjocR7pT4p7WIGBN6OXPrSlZzCwfZWB02O+hST1t8kmHE\nEHn7UBQoCRZ6dWrBnK1u8u9sUHGtRiAYor7SIyvZtPNJIcOtBnZV1bCt0Fdlx4jr\nFS/Jtu0Z7RkxnZpKyNwGX8h2ThGj4MZ/yNEqmr9KjkrsDJu0t5/NgPnmzpjzD1Ej\nMhDvki9VhnfWEUMjt/g+fUuUdNCezZUMNjF4s2eDFYvts60sPCjFhs+kJbafOPpC\ny3b30ltaVKrpCVv0f6Fh/98zUY5kMIMJLtCyHDBHjrX2V9FgbaUDZ+teAHT8b7rJ\nGWD4VeetP4VMAIDFm6KtCrZis8015tFX1e+0TByGtsRfgC9JVMSo0tUY++srI1YG\nIpMshCJUanvufMpAoF+bEWZzZSYgoVVc7UoX66wOekyNgujCDlZ6x/4VCuq6l8FW\nltj6iW2DA17V2BlxvpAVZlAab/y/VaAV1vfTg5ZA7UkzozRy0CLrC3f6h2Sun/5X\nuoXG9xqbp8J2CmTSbI97KzP6hbLlNborqpmXPIL4H+RtNo0BueQ=\n=iFRV\n-----END PGP SIGNATURE-----",
        "payload": "tree 5483a43d1d114f9d88ac23d295166768ceff0aa3\nparent 92584d29cee307249c22d9e244eff10fce068178\nauthor fanquake <fanquake@gmail.com> 1621825854 +0800\ncommitter fanquake <fanquake@gmail.com> 1623292852 +0800\n\nscripts: LIEF 0.11.5\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8732f7b6c92f9dcf37f3ab618e9daab0c52fc781",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/8732f7b6c92f9dcf37f3ab618e9daab0c52fc781",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8732f7b6c92f9dcf37f3ab618e9daab0c52fc781/comments",
    "author": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "92584d29cee307249c22d9e244eff10fce068178",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/92584d29cee307249c22d9e244eff10fce068178",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/92584d29cee307249c22d9e244eff10fce068178"
      }
    ],
    "stats": {
      "total": 10,
      "additions": 5,
      "deletions": 5
    },
    "files": [
      {
        "sha": "e6dce7a8c664fc102b06f281eb1fc33a75670992",
        "filename": "contrib/gitian-descriptors/gitian-linux.yml",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8732f7b6c92f9dcf37f3ab618e9daab0c52fc781/contrib/gitian-descriptors/gitian-linux.yml",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8732f7b6c92f9dcf37f3ab618e9daab0c52fc781/contrib/gitian-descriptors/gitian-linux.yml",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/gitian-descriptors/gitian-linux.yml?ref=8732f7b6c92f9dcf37f3ab618e9daab0c52fc781",
        "patch": "@@ -99,7 +99,7 @@ script: |\n   done\n   }\n \n-  pip3 install lief==0.11.4\n+  pip3 install lief==0.11.5\n \n   # Faketime for depends so intermediate results are comparable\n   export PATH_orig=${PATH}"
      },
      {
        "sha": "a39618adb78d5c3403c9f47e0b58111a6811bbec",
        "filename": "contrib/gitian-descriptors/gitian-osx.yml",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8732f7b6c92f9dcf37f3ab618e9daab0c52fc781/contrib/gitian-descriptors/gitian-osx.yml",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8732f7b6c92f9dcf37f3ab618e9daab0c52fc781/contrib/gitian-descriptors/gitian-osx.yml",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/gitian-descriptors/gitian-osx.yml?ref=8732f7b6c92f9dcf37f3ab618e9daab0c52fc781",
        "patch": "@@ -78,7 +78,7 @@ script: |\n   done\n   }\n \n-  pip3 install lief==0.11.4\n+  pip3 install lief==0.11.5\n \n   # Faketime for depends so intermediate results are comparable\n   export PATH_orig=${PATH}"
      },
      {
        "sha": "ffe228a032e6dd72af86ea2187c3737f3783e1f8",
        "filename": "contrib/gitian-descriptors/gitian-win.yml",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8732f7b6c92f9dcf37f3ab618e9daab0c52fc781/contrib/gitian-descriptors/gitian-win.yml",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8732f7b6c92f9dcf37f3ab618e9daab0c52fc781/contrib/gitian-descriptors/gitian-win.yml",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/gitian-descriptors/gitian-win.yml?ref=8732f7b6c92f9dcf37f3ab618e9daab0c52fc781",
        "patch": "@@ -86,7 +86,7 @@ script: |\n   done\n   }\n \n-  pip3 install lief==0.11.4\n+  pip3 install lief==0.11.5\n \n   # Faketime for depends so intermediate results are comparable\n   export PATH_orig=${PATH}"
      },
      {
        "sha": "e4950c0e28310aafb1d6d311db33971f476707a7",
        "filename": "contrib/guix/manifest.scm",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8732f7b6c92f9dcf37f3ab618e9daab0c52fc781/contrib/guix/manifest.scm",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8732f7b6c92f9dcf37f3ab618e9daab0c52fc781/contrib/guix/manifest.scm",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/manifest.scm?ref=8732f7b6c92f9dcf37f3ab618e9daab0c52fc781",
        "patch": "@@ -205,7 +205,7 @@ chain for \" target \" development.\"))\n (define-public lief\n   (package\n    (name \"python-lief\")\n-   (version \"0.11.4\")\n+   (version \"0.11.5\")\n    (source\n     (origin\n      (method git-fetch)\n@@ -215,7 +215,7 @@ chain for \" target \" development.\"))\n      (file-name (git-file-name name version))\n      (sha256\n       (base32\n-       \"0h4kcwr9z478almjqhmils8imfpflzk0r7d05g4xbkdyknn162qf\"))))\n+       \"0qahjfg1n0x76ps2mbyljvws1l3qhkqvmxqbahps4qgywl2hbdkj\"))))\n    (build-system python-build-system)\n    (native-inputs\n     `((\"cmake\" ,cmake)))"
      }
    ]
  },
  {
    "sha": "29615aef52d7f1a29a87a29dfe4d39bf0e9867f3",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyOTYxNWFlZjUyZDdmMWEyOWE4N2EyOWRmZTRkMzliZjBlOTg2N2Yz",
    "commit": {
      "author": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2021-05-05T07:59:09Z"
      },
      "committer": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2021-06-10T02:40:53Z"
      },
      "message": "scripts: check minimum required macOS vesion is set\n\nWe use a compile flag (-mmacosx-version-min) to set the minimum required\nversion of macOS needed to run our binaries. This adds a sanity check\nthat the version is being set as expected.",
      "tree": {
        "sha": "d761b6a1af00e6bf7ac6fdcfd541d7010dac9c1a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d761b6a1af00e6bf7ac6fdcfd541d7010dac9c1a"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/29615aef52d7f1a29a87a29dfe4d39bf0e9867f3",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEz7FuIclQ9n+pXlWPLuufXMCVJsEFAmDBe7UACgkQLuufXMCV\nJsEDGA/9HLej8cnsr2i7suH6DuvKGMBt0d0XRrF0hlM6FDH5cAYfciof9eiJktF+\nsMjA0FIuYDn6NrwdPqadY6bm/W9tJQzt2SZyDyb4fX9MR2PgeaDtOg5zc6eVEEuh\n/H27pB17QqMQyuVfcTBiMmWl96PYXqcaPPlRcixta9gPwmU0iCFXMTvcqehak9FL\neN6sfziJS4xcGCV94XgBTHZTj0DpoQfl9CD7nwLvxJSNLRJJstcWG7+MPC8jcYij\n8Uz7EhpVk5RRZnLYnDf7Tqi4xKtH1yTD4j1ozZ/zAjXFe8GgrTg9uTsOihsRpOl5\nfus/+6COPzH4h6m/EeI7H+X5zV5uMCmroDgrFTI6v5dYqACJU83hC2sOQr1eIeE1\ncyQxiyEKKI+5sNgwm/BkWanBZQAVc3Hu/1Bn8qH6ZqXSIJYW3Cnyy6RGTAAr1d3e\np4NvOoLGodc6T6FmlkGkrBvxeXBw8cWyGJUVEDZFkjNYHoEevlIamgbacw+hJZdN\nYWgOApNn/S7VqXqwqEKJAmarNRCDoDoaen2OsJiwevLGx+ocRNobmSYVW1nJaN6o\nyPEUZEd18XLNRoRJf038BkCbCkxJZrOVYWspSQMzPs6c96soXj+MFGhnYLRjctGq\nhCoA8qF1aJZNSFrr3VaVsA6f/l6C+ewdA329e7NrMHHIGwrxHQo=\n=YklL\n-----END PGP SIGNATURE-----",
        "payload": "tree d761b6a1af00e6bf7ac6fdcfd541d7010dac9c1a\nparent 8732f7b6c92f9dcf37f3ab618e9daab0c52fc781\nauthor fanquake <fanquake@gmail.com> 1620201549 +0800\ncommitter fanquake <fanquake@gmail.com> 1623292853 +0800\n\nscripts: check minimum required macOS vesion is set\n\nWe use a compile flag (-mmacosx-version-min) to set the minimum required\nversion of macOS needed to run our binaries. This adds a sanity check\nthat the version is being set as expected.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/29615aef52d7f1a29a87a29dfe4d39bf0e9867f3",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/29615aef52d7f1a29a87a29dfe4d39bf0e9867f3",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/29615aef52d7f1a29a87a29dfe4d39bf0e9867f3/comments",
    "author": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "8732f7b6c92f9dcf37f3ab618e9daab0c52fc781",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8732f7b6c92f9dcf37f3ab618e9daab0c52fc781",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/8732f7b6c92f9dcf37f3ab618e9daab0c52fc781"
      }
    ],
    "stats": {
      "total": 24,
      "additions": 22,
      "deletions": 2
    },
    "files": [
      {
        "sha": "5fab2b328522b387f6236eebb50d46077825f46e",
        "filename": "contrib/devtools/symbol-check.py",
        "status": "modified",
        "additions": 8,
        "deletions": 1,
        "changes": 9,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/29615aef52d7f1a29a87a29dfe4d39bf0e9867f3/contrib/devtools/symbol-check.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/29615aef52d7f1a29a87a29dfe4d39bf0e9867f3/contrib/devtools/symbol-check.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/devtools/symbol-check.py?ref=29615aef52d7f1a29a87a29dfe4d39bf0e9867f3",
        "patch": "@@ -212,6 +212,12 @@ def check_MACHO_libraries(filename) -> bool:\n             ok = False\n     return ok\n \n+def check_MACHO_min_os(filename) -> bool:\n+    binary = lief.parse(filename)\n+    if binary.build_version.minos == [10,14,0]:\n+        return True\n+    return False\n+\n def check_PE_libraries(filename) -> bool:\n     ok: bool = True\n     binary = lief.parse(filename)\n@@ -228,7 +234,8 @@ def check_PE_libraries(filename) -> bool:\n     ('LIBRARY_DEPENDENCIES', check_ELF_libraries)\n ],\n 'MACHO': [\n-    ('DYNAMIC_LIBRARIES', check_MACHO_libraries)\n+    ('DYNAMIC_LIBRARIES', check_MACHO_libraries),\n+    ('MIN_OS', check_MACHO_min_os),\n ],\n 'PE' : [\n     ('DYNAMIC_LIBRARIES', check_PE_libraries)"
      },
      {
        "sha": "7cbe55f91db3d2176ded003b4b5c592c14410280",
        "filename": "contrib/devtools/test-symbol-check.py",
        "status": "modified",
        "additions": 14,
        "deletions": 1,
        "changes": 15,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/29615aef52d7f1a29a87a29dfe4d39bf0e9867f3/contrib/devtools/test-symbol-check.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/29615aef52d7f1a29a87a29dfe4d39bf0e9867f3/contrib/devtools/test-symbol-check.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/devtools/test-symbol-check.py?ref=29615aef52d7f1a29a87a29dfe4d39bf0e9867f3",
        "patch": "@@ -98,7 +98,7 @@ def test_MACHO(self):\n \n         self.assertEqual(call_symbol_check(cc, source, executable, ['-lexpat']),\n             (1, 'libexpat.1.dylib is not in ALLOWED_LIBRARIES!\\n' +\n-                executable + ': failed DYNAMIC_LIBRARIES'))\n+                executable + ': failed DYNAMIC_LIBRARIES MIN_OS'))\n \n         source = 'test2.c'\n         executable = 'test2'\n@@ -114,6 +114,19 @@ def test_MACHO(self):\n         ''')\n \n         self.assertEqual(call_symbol_check(cc, source, executable, ['-framework', 'CoreGraphics']),\n+                (1, executable + ': failed MIN_OS'))\n+\n+        source = 'test3.c'\n+        executable = 'test3'\n+        with open(source, 'w', encoding=\"utf8\") as f:\n+            f.write('''\n+                int main()\n+                {\n+                    return 0;\n+                }\n+        ''')\n+\n+        self.assertEqual(call_symbol_check(cc, source, executable, ['-mmacosx-version-min=10.14']),\n                 (0, ''))\n \n     def test_PE(self):"
      }
    ]
  },
  {
    "sha": "c972345bacd0cb01371b3f00941e81dce16278e1",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjOTcyMzQ1YmFjZDBjYjAxMzcxYjNmMDA5NDFlODFkY2UxNjI3OGUx",
    "commit": {
      "author": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2021-05-05T08:38:04Z"
      },
      "committer": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2021-06-10T02:40:53Z"
      },
      "message": "scripts: check minimum required Windows version is set\n\nWe use linker flags (-Wl,--major/minor-subsystem-version) to set the\nminimum required version of Windows needed to run our binaries. This\nadds a sanity check that the version is being set as expected.",
      "tree": {
        "sha": "34fe54c35daf4e26e285d6a79ec25a37d6efd86b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/34fe54c35daf4e26e285d6a79ec25a37d6efd86b"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c972345bacd0cb01371b3f00941e81dce16278e1",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEz7FuIclQ9n+pXlWPLuufXMCVJsEFAmDBe7UACgkQLuufXMCV\nJsEgcxAApLcMIzPDt7biQcdpMuWY3Ss68a3fIgsJeR4w8gGynHISSDBm0X7bGOQe\nelMU7GsarjklmJ22qQAnYJlSY3Lz6yWb2gzzCkeoLbJwc2qbwPnR43Vj149HaoTN\nmcYwvuZN7xdnaAQdF04fZAWSdp0+4rl+oW+tOeW+Gz7HoZKyM9NU5xZ4uQiI8hSq\nxyZP1qcePOI0Ujsl+vi48JCXZ7QK/YH8WAkvs0ZjozdyiYwoOyvQZIJZJ4Tkfldh\nEeeTtI7+0j9vps1AOCFspbTMLS7Hh/EwJ0zRNk3C2Od+Cn8AOszxbaEqBpXi+CmU\nkvguBx67WgYIBvD4eg4XRMJiZ8pOX4ZB0bUcnsQtpP6bpM+vfPm9A6+7u5V3mEzz\nUqoqz038yMBV9JXjLGda4Up+EuS6S/NuzMiwRzxf+mihSWccwa+Li3ofEZvOJ2In\nO2tmNZKLshtlvtqY6cEkhuInZCqs763XhhrchNZUa6dz4Ct6cJMTF+bq2uLFWKw3\nNUJRMoodT/grJvpVi2JW4c26r6ze0DTFiUlbMhARefe+wSXfGfkIgVbH8TX63iSI\n5E4tI5mFFd1S90RReT4CCHpDrr9m8wOnfPGzG8vRX+btYe63paW8jkVbhH4pEoZq\nPHdWjzbO7QTYXzLuJTGTslCaGE6tjATg/Pu1/Gmx543cYkNeEdg=\n=75Ce\n-----END PGP SIGNATURE-----",
        "payload": "tree 34fe54c35daf4e26e285d6a79ec25a37d6efd86b\nparent 29615aef52d7f1a29a87a29dfe4d39bf0e9867f3\nauthor fanquake <fanquake@gmail.com> 1620203884 +0800\ncommitter fanquake <fanquake@gmail.com> 1623292853 +0800\n\nscripts: check minimum required Windows version is set\n\nWe use linker flags (-Wl,--major/minor-subsystem-version) to set the\nminimum required version of Windows needed to run our binaries. This\nadds a sanity check that the version is being set as expected.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c972345bacd0cb01371b3f00941e81dce16278e1",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/c972345bacd0cb01371b3f00941e81dce16278e1",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c972345bacd0cb01371b3f00941e81dce16278e1/comments",
    "author": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "29615aef52d7f1a29a87a29dfe4d39bf0e9867f3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/29615aef52d7f1a29a87a29dfe4d39bf0e9867f3",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/29615aef52d7f1a29a87a29dfe4d39bf0e9867f3"
      }
    ],
    "stats": {
      "total": 29,
      "additions": 26,
      "deletions": 3
    },
    "files": [
      {
        "sha": "aa189003c67c22b3fbd7fdb1fb93802e642ad1ab",
        "filename": "contrib/devtools/symbol-check.py",
        "status": "modified",
        "additions": 10,
        "deletions": 1,
        "changes": 11,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c972345bacd0cb01371b3f00941e81dce16278e1/contrib/devtools/symbol-check.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c972345bacd0cb01371b3f00941e81dce16278e1/contrib/devtools/symbol-check.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/devtools/symbol-check.py?ref=c972345bacd0cb01371b3f00941e81dce16278e1",
        "patch": "@@ -227,6 +227,14 @@ def check_PE_libraries(filename) -> bool:\n             ok = False\n     return ok\n \n+def check_PE_subsystem_version(filename) -> bool:\n+    binary = lief.parse(filename)\n+    major: int = binary.optional_header.major_subsystem_version\n+    minor: int = binary.optional_header.minor_subsystem_version\n+    if major == 6 and minor == 1:\n+        return True\n+    return False\n+\n CHECKS = {\n 'ELF': [\n     ('IMPORTED_SYMBOLS', check_imported_symbols),\n@@ -238,7 +246,8 @@ def check_PE_libraries(filename) -> bool:\n     ('MIN_OS', check_MACHO_min_os),\n ],\n 'PE' : [\n-    ('DYNAMIC_LIBRARIES', check_PE_libraries)\n+    ('DYNAMIC_LIBRARIES', check_PE_libraries),\n+    ('SUBSYSTEM_VERSION', check_PE_subsystem_version),\n ]\n }\n "
      },
      {
        "sha": "f888621619e0ad6642e655bcb3ff3b1c1442c266",
        "filename": "contrib/devtools/test-symbol-check.py",
        "status": "modified",
        "additions": 16,
        "deletions": 2,
        "changes": 18,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c972345bacd0cb01371b3f00941e81dce16278e1/contrib/devtools/test-symbol-check.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c972345bacd0cb01371b3f00941e81dce16278e1/contrib/devtools/test-symbol-check.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/devtools/test-symbol-check.py?ref=c972345bacd0cb01371b3f00941e81dce16278e1",
        "patch": "@@ -145,12 +145,26 @@ def test_PE(self):\n                 }\n         ''')\n \n-        self.assertEqual(call_symbol_check(cc, source, executable, ['-lpdh']),\n+        self.assertEqual(call_symbol_check(cc, source, executable, ['-lpdh', '-Wl,--major-subsystem-version', '-Wl,6', '-Wl,--minor-subsystem-version', '-Wl,1']),\n             (1, 'pdh.dll is not in ALLOWED_LIBRARIES!\\n' +\n                  executable + ': failed DYNAMIC_LIBRARIES'))\n \n         source = 'test2.c'\n         executable = 'test2.exe'\n+\n+        with open(source, 'w', encoding=\"utf8\") as f:\n+            f.write('''\n+                int main()\n+                {\n+                    return 0;\n+                }\n+        ''')\n+\n+        self.assertEqual(call_symbol_check(cc, source, executable, ['-Wl,--major-subsystem-version', '-Wl,9', '-Wl,--minor-subsystem-version', '-Wl,9']),\n+            (1, executable + ': failed SUBSYSTEM_VERSION'))\n+\n+        source = 'test3.c'\n+        executable = 'test3.exe'\n         with open(source, 'w', encoding=\"utf8\") as f:\n             f.write('''\n                 #include <windows.h>\n@@ -162,7 +176,7 @@ def test_PE(self):\n                 }\n         ''')\n \n-        self.assertEqual(call_symbol_check(cc, source, executable, ['-lole32']),\n+        self.assertEqual(call_symbol_check(cc, source, executable, ['-lole32', '-Wl,--major-subsystem-version', '-Wl,6', '-Wl,--minor-subsystem-version', '-Wl,1']),\n                 (0, ''))\n \n "
      }
    ]
  },
  {
    "sha": "aa80b5759dfa613780a99801641519dd78bb3eca",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzphYTgwYjU3NTlkZmE2MTM3ODBhOTk4MDE2NDE1MTlkZDc4YmIzZWNh",
    "commit": {
      "author": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2021-05-09T08:18:53Z"
      },
      "committer": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2021-06-10T07:43:50Z"
      },
      "message": "scripts: check macOS SDK version is set\n\nClangs Darwin driver should infer the SDK version used during compilation, and\nforward that through to the linker. Add a check that this has been done, and the\nexpected SDK version is set.\n\nShould help prevent issues like #21771 in future.",
      "tree": {
        "sha": "78334822f6d283c3dd39956f188965000325fe28",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/78334822f6d283c3dd39956f188965000325fe28"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/aa80b5759dfa613780a99801641519dd78bb3eca",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEz7FuIclQ9n+pXlWPLuufXMCVJsEFAmDBwrYACgkQLuufXMCV\nJsESTA/5AUljdiAIubUoAO5zsGgOIz7Jb+qDbktap1h5VjGasFrtb3JYiLC1U5m/\nLIjCUpb0u3vhwhZ7bXnLNZ/QQcvDy1HduBg0xGoKBqI1Zkx2o/FPD+198U33RAmy\nHpkm2BVL6Uvx7uzIS0BqmsnFag77Ob8vbQB0Dq1Q7ZPaDuXGIb3tOOLdz94YGV3B\nZbY2j7uS0dm/iFV0N9VteEQn1YKNfaeKY3ftGyZR0x0CDcqeTv61ztluQLkyuWnG\nTi9i+SC1qGQGQpU2d6vj22UpjgPS2Zln6LbQoWc90qQ6Gi3dw8HnFXjIH+7dc3j6\nvWjLL61t8VT48WyJDhnvrpSE4ClnVRPe5etSBYToelFu3Ne4py9gow3ZBh/5zUH5\noopfdHrYE4S3cwJVgiRguUR2yman+4smluLs3mLrkX57CUBtNydb8vQ0nsoPBeWr\nRDxzWQxn0bnsqi8tETgJngoZX3XOqQNFLU4AoguXo2FOLJC7p9NMSqe4u2n5n2Oc\nWL1NnOz0qcDM97iQXBN/ehQTNQyRMwwwqlOOZYF7MuUivo/t5qhIA4htOZyZyXay\n+rQLpvFOakYDFXqfV6Gi+yhy8ZibsJfAthnRRVjXPkoW6Ui7SGiPlq8jN4+diWAM\nH+IMRqmuP10S6KevL7RftPUByYmAEjo5nfsf9BgFY8Ol4xtGMXE=\n=AXP9\n-----END PGP SIGNATURE-----",
        "payload": "tree 78334822f6d283c3dd39956f188965000325fe28\nparent c972345bacd0cb01371b3f00941e81dce16278e1\nauthor fanquake <fanquake@gmail.com> 1620548333 +0800\ncommitter fanquake <fanquake@gmail.com> 1623311030 +0800\n\nscripts: check macOS SDK version is set\n\nClangs Darwin driver should infer the SDK version used during compilation, and\nforward that through to the linker. Add a check that this has been done, and the\nexpected SDK version is set.\n\nShould help prevent issues like #21771 in future.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/aa80b5759dfa613780a99801641519dd78bb3eca",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/aa80b5759dfa613780a99801641519dd78bb3eca",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/aa80b5759dfa613780a99801641519dd78bb3eca/comments",
    "author": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "c972345bacd0cb01371b3f00941e81dce16278e1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c972345bacd0cb01371b3f00941e81dce16278e1",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/c972345bacd0cb01371b3f00941e81dce16278e1"
      }
    ],
    "stats": {
      "total": 13,
      "additions": 10,
      "deletions": 3
    },
    "files": [
      {
        "sha": "7a5a42c5d2a4989a1dc1a8ca2fe1ed2def1bd9f7",
        "filename": "contrib/devtools/symbol-check.py",
        "status": "modified",
        "additions": 7,
        "deletions": 0,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/aa80b5759dfa613780a99801641519dd78bb3eca/contrib/devtools/symbol-check.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/aa80b5759dfa613780a99801641519dd78bb3eca/contrib/devtools/symbol-check.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/devtools/symbol-check.py?ref=aa80b5759dfa613780a99801641519dd78bb3eca",
        "patch": "@@ -218,6 +218,12 @@ def check_MACHO_min_os(filename) -> bool:\n         return True\n     return False\n \n+def check_MACHO_sdk(filename) -> bool:\n+    binary = lief.parse(filename)\n+    if binary.build_version.sdk == [10, 15, 6]:\n+        return True\n+    return False\n+\n def check_PE_libraries(filename) -> bool:\n     ok: bool = True\n     binary = lief.parse(filename)\n@@ -244,6 +250,7 @@ def check_PE_subsystem_version(filename) -> bool:\n 'MACHO': [\n     ('DYNAMIC_LIBRARIES', check_MACHO_libraries),\n     ('MIN_OS', check_MACHO_min_os),\n+    ('SDK', check_MACHO_sdk),\n ],\n 'PE' : [\n     ('DYNAMIC_LIBRARIES', check_PE_libraries),"
      },
      {
        "sha": "6ce2fa356039cf23954879b6c2f8878010c310b3",
        "filename": "contrib/devtools/test-symbol-check.py",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/aa80b5759dfa613780a99801641519dd78bb3eca/contrib/devtools/test-symbol-check.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/aa80b5759dfa613780a99801641519dd78bb3eca/contrib/devtools/test-symbol-check.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/devtools/test-symbol-check.py?ref=aa80b5759dfa613780a99801641519dd78bb3eca",
        "patch": "@@ -98,7 +98,7 @@ def test_MACHO(self):\n \n         self.assertEqual(call_symbol_check(cc, source, executable, ['-lexpat']),\n             (1, 'libexpat.1.dylib is not in ALLOWED_LIBRARIES!\\n' +\n-                executable + ': failed DYNAMIC_LIBRARIES MIN_OS'))\n+                f'{executable}: failed DYNAMIC_LIBRARIES MIN_OS SDK'))\n \n         source = 'test2.c'\n         executable = 'test2'\n@@ -114,7 +114,7 @@ def test_MACHO(self):\n         ''')\n \n         self.assertEqual(call_symbol_check(cc, source, executable, ['-framework', 'CoreGraphics']),\n-                (1, executable + ': failed MIN_OS'))\n+                (1, f'{executable}: failed MIN_OS SDK'))\n \n         source = 'test3.c'\n         executable = 'test3'\n@@ -127,7 +127,7 @@ def test_MACHO(self):\n         ''')\n \n         self.assertEqual(call_symbol_check(cc, source, executable, ['-mmacosx-version-min=10.14']),\n-                (0, ''))\n+                (1, f'{executable}: failed SDK'))\n \n     def test_PE(self):\n         source = 'test1.c'"
      }
    ]
  }
]