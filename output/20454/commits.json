[
  {
    "sha": "ac5e771f44c3c090f8ec4d62ec8cae764f06fed0",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzphYzVlNzcxZjQ0YzNjMDkwZjhlYzRkNjJlYzhjYWU3NjRmMDZmZWQw",
    "commit": {
      "author": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2020-11-22T22:24:34Z"
      },
      "committer": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2021-03-11T11:34:52Z"
      },
      "message": "build: Bump clang version to fix non-determinism\n\nLLVM 8 has inherent nondeterminism in the compiler, fixed in LLVM 9.",
      "tree": {
        "sha": "29cbe3cd93ef9b75f3ce205362eed66fc6680d57",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/29cbe3cd93ef9b75f3ce205362eed66fc6680d57"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ac5e771f44c3c090f8ec4d62ec8cae764f06fed0",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE0dvyxLlvLev0wWZUQQEIES5+qB8FAmBKAFwACgkQQQEIES5+\nqB+06BAAmSWg4BPLNtTDIhzrSl6n9Ao7QyurlFXky1PbsnFQMJzm+SARVSygQBjV\n5xHzWztG4iJuEAxzBvJqozU40LA11XjqgCZipAMfv3dCz/3i44RfLUg8psL0aBv/\nnHSdwZ70HfUXxu3V/IYHlxgaz+YOggA5eBbnYtMI4+d3p8DUeImEDQ5OowgMveP3\nIwBWnznlikE0TjTNiNuVGiI1PbHd2YmNSDqcjFvgDGuYJDEX7Onys/6i9jl3mNtJ\n+t/hxhXMdAZY+XbjrEO1tuPMYWxEG9dBShv7IhzyhnChK/R9OT6q2f1vmS+mt2qE\nVAMLvYN2+JmKDBJWUMEXNNA5+rocfIfScXPz7i4Q6uZGs6M3vsGQOx820jxZLwqn\nX/4XUoA/HdDCb3Yf2a0+JW1x9wizMyqPZqKLqnANgukk34742+Eg7v+2r62C9osx\nc45YLc00lyQClXqhlrnzm9Wbi/wPFNrvnZEiIAIwWnzHgxvQhMZNezT1+JPGKxYw\nfAp4AiMYGlYaXB26lkMv7XktEEAe++xrrWav63eLx4r8dAFMVSouzadkW0ikLCLs\nbFw8d5dt215y3U9lLPYmYL8JjVgzAP46zi8+h5XWLYorf5sDIUiOHpG/0oiyufdM\ns8uLd1rluw8xtx3KjyuQUijiGSqAOKNbkJRHnxLtZDNtIpE+LhI=\n=VhvZ\n-----END PGP SIGNATURE-----",
        "payload": "tree 29cbe3cd93ef9b75f3ce205362eed66fc6680d57\nparent e828fc8f528dbb5425c3e3d1c1d4f1485f045241\nauthor Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1606083874 +0200\ncommitter Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1615462492 +0200\n\nbuild: Bump clang version to fix non-determinism\n\nLLVM 8 has inherent nondeterminism in the compiler, fixed in LLVM 9.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ac5e771f44c3c090f8ec4d62ec8cae764f06fed0",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/ac5e771f44c3c090f8ec4d62ec8cae764f06fed0",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ac5e771f44c3c090f8ec4d62ec8cae764f06fed0/comments",
    "author": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "e828fc8f528dbb5425c3e3d1c1d4f1485f045241",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e828fc8f528dbb5425c3e3d1c1d4f1485f045241",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/e828fc8f528dbb5425c3e3d1c1d4f1485f045241"
      }
    ],
    "stats": {
      "total": 8,
      "additions": 4,
      "deletions": 4
    },
    "files": [
      {
        "sha": "9a947d02f38a2cdf98d1016cb145ba13ac5a84fc",
        "filename": "depends/packages/native_cctools.mk",
        "status": "modified",
        "additions": 4,
        "deletions": 4,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/ac5e771f44c3c090f8ec4d62ec8cae764f06fed0/depends/packages/native_cctools.mk",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/ac5e771f44c3c090f8ec4d62ec8cae764f06fed0/depends/packages/native_cctools.mk",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/packages/native_cctools.mk?ref=ac5e771f44c3c090f8ec4d62ec8cae764f06fed0",
        "patch": "@@ -7,11 +7,11 @@ $(package)_build_subdir=cctools\n $(package)_patches=ld64_disable_threading.patch\n \n ifeq ($(strip $(FORCE_USE_SYSTEM_CLANG)),)\n-$(package)_clang_version=8.0.0\n+$(package)_clang_version=9.0.0\n $(package)_clang_download_path=https://releases.llvm.org/$($(package)_clang_version)\n-$(package)_clang_download_file=clang+llvm-$($(package)_clang_version)-x86_64-linux-gnu-ubuntu-14.04.tar.xz\n-$(package)_clang_file_name=clang-llvm-$($(package)_clang_version)-x86_64-linux-gnu-ubuntu-14.04.tar.xz\n-$(package)_clang_sha256_hash=9ef854b71949f825362a119bf2597f744836cb571131ae6b721cd102ffea8cd0\n+$(package)_clang_download_file=clang+llvm-$($(package)_clang_version)-x86_64-linux-gnu-ubuntu-18.04.tar.xz\n+$(package)_clang_file_name=clang-llvm-$($(package)_clang_version)-x86_64-linux-gnu-ubuntu-18.04.tar.xz\n+$(package)_clang_sha256_hash=a23b082b30c128c9831dbdd96edad26b43f56624d0ad0ea9edec506f5385038d\n endif\n \n $(package)_libtapi_version=3efb201881e7a76a21e0554906cf306432539cef"
      }
    ]
  },
  {
    "sha": "8df1170895690f69b6cbfd296f9e8f826086614a",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo4ZGYxMTcwODk1NjkwZjY5YjZjYmZkMjk2ZjllOGY4MjYwODY2MTRh",
    "commit": {
      "author": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2021-03-11T11:38:19Z"
      },
      "committer": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2021-03-11T11:38:19Z"
      },
      "message": "Revert \"Fix QPainter non-determinism on macOS\"\n\nThis reverts commit 8f7d1b39efbe65ab2747c593cc3560d4a449a333.",
      "tree": {
        "sha": "dcce6ec08e5edaf93d30d4f4778df4a315120c36",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/dcce6ec08e5edaf93d30d4f4778df4a315120c36"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8df1170895690f69b6cbfd296f9e8f826086614a",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE0dvyxLlvLev0wWZUQQEIES5+qB8FAmBKASsACgkQQQEIES5+\nqB9DCw//Qh7ubFCZaof3/kYPDJsUR/6QCFv9YaVuY2nvaCDiBBG8EKRfnGaRRbSl\ndBSr1qutFosppYQPId8/jM9a7cqMY+sIgqXpTfXNbp12MAKOiZvYAEfX4IN7YQee\nnDuocrvrLdhA+gxNW/SDCySxWQd6HGe9854aqFkz0BKlQlKxLAHutdICN0Yq36rp\nLRTcZkFbqk7l7shGBFWjz+pMIFwU1Iy8e63Xq2y4CH8qjWxrQyy2T4vkCvnNleXz\nnx425AqImEDiMqXk7NCptBwlWlFHH1hlplrJW/UPF4+edsBFEyLUrxoh7UZQe+J7\nGo9WyIp2Zj1TMP2IcNWu57y4jtGQ6nZPmjyfi1XqfVYOrMlReaXrWQacpwgPX44p\nphhfzumnRbe/5dINqKWk7HN5mJhCDRCH/598kQcVLUgnrlW+snLyr66Qsg9I81qf\nFgCqHvDn/hR2Tfn4T7zKLmzLylbmen0zHpa4FieCf9i9D/rifbgtmszeOq4NYnuQ\n4ENxywa93LReoeFizzmYJeZ0CMYJoAXeDSldxnMuBr+0ivxLeBxrLphgFKZ7d8Ej\nexBJfCgjuEXJZCUDF0q4Y24LNtTttvCgKfvGN6zx3PyC/bG9AVoGWyhv4bqTAQom\nuC2YfvbF5nka+BKheKPJUIaaJwcwYmGRPGKpDWXO3zwoPRFiTWg=\n=ehaH\n-----END PGP SIGNATURE-----",
        "payload": "tree dcce6ec08e5edaf93d30d4f4778df4a315120c36\nparent ac5e771f44c3c090f8ec4d62ec8cae764f06fed0\nauthor Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1615462699 +0200\ncommitter Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1615462699 +0200\n\nRevert \"Fix QPainter non-determinism on macOS\"\n\nThis reverts commit 8f7d1b39efbe65ab2747c593cc3560d4a449a333.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8df1170895690f69b6cbfd296f9e8f826086614a",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/8df1170895690f69b6cbfd296f9e8f826086614a",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8df1170895690f69b6cbfd296f9e8f826086614a/comments",
    "author": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "ac5e771f44c3c090f8ec4d62ec8cae764f06fed0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ac5e771f44c3c090f8ec4d62ec8cae764f06fed0",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/ac5e771f44c3c090f8ec4d62ec8cae764f06fed0"
      }
    ],
    "stats": {
      "total": 66,
      "additions": 1,
      "deletions": 65
    },
    "files": [
      {
        "sha": "6d4017fb3f1cca002ec20e778dbefbde7b528128",
        "filename": "depends/packages/qt.mk",
        "status": "modified",
        "additions": 1,
        "deletions": 2,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8df1170895690f69b6cbfd296f9e8f826086614a/depends/packages/qt.mk",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8df1170895690f69b6cbfd296f9e8f826086614a/depends/packages/qt.mk",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/packages/qt.mk?ref=8df1170895690f69b6cbfd296f9e8f826086614a",
        "patch": "@@ -9,7 +9,7 @@ $(package)_qt_libs=corelib network widgets gui plugins testlib\n $(package)_patches=fix_qt_pkgconfig.patch mac-qmake.conf fix_no_printer.patch no-xlib.patch\n $(package)_patches+= fix_android_qmake_conf.patch fix_android_jni_static.patch dont_hardcode_pwd.patch\n $(package)_patches+= drop_lrelease_dependency.patch no_sdk_version_check.patch\n-$(package)_patches+= fix_qpainter_non_determinism.patch fix_lib_paths.patch\n+$(package)_patches+= fix_lib_paths.patch\n \n $(package)_qttranslations_file_name=qttranslations-$($(package)_suffix)\n $(package)_qttranslations_sha256_hash=e1de58ed108b7e0a138815ea60fd46a2c4e1fc31396a707e5630e92de79c53de\n@@ -224,7 +224,6 @@ define $(package)_preprocess_cmds\n   patch -p1 -i $($(package)_patch_dir)/fix_android_qmake_conf.patch && \\\n   patch -p1 -i $($(package)_patch_dir)/fix_android_jni_static.patch && \\\n   patch -p1 -i $($(package)_patch_dir)/no-xlib.patch && \\\n-  patch -p1 -i $($(package)_patch_dir)/fix_qpainter_non_determinism.patch &&\\\n   patch -p1 -i $($(package)_patch_dir)/no_sdk_version_check.patch && \\\n   patch -p1 -i $($(package)_patch_dir)/fix_lib_paths.patch && \\\n   sed -i.old \"s|updateqm.commands = \\$$$$\\$$$$LRELEASE|updateqm.commands = $($(package)_extract_dir)/qttools/bin/lrelease|\" qttranslations/translations/translations.pro && \\"
      },
      {
        "sha": "44c45187c51ef036414d0c8575e2d1b0c953541d",
        "filename": "depends/patches/qt/fix_qpainter_non_determinism.patch",
        "status": "removed",
        "additions": 0,
        "deletions": 63,
        "changes": 63,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/ac5e771f44c3c090f8ec4d62ec8cae764f06fed0/depends/patches/qt/fix_qpainter_non_determinism.patch",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/ac5e771f44c3c090f8ec4d62ec8cae764f06fed0/depends/patches/qt/fix_qpainter_non_determinism.patch",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/patches/qt/fix_qpainter_non_determinism.patch?ref=ac5e771f44c3c090f8ec4d62ec8cae764f06fed0",
        "patch": "@@ -1,63 +0,0 @@\n-commit 2a8f7dc6ddfc414a66491522501c1574a1343ee1\n-Author: Andrew Chow <achow101-github@achow101.com>\n-Date:   Sat Nov 21 01:11:04 2020 -0500\n-\n-    build: Fix determinism issue when building with Clang 8\n-\n-    When building Qt with LLVM/Clang 8 under -O3 (the default), we run into\n-    a determinism issue in `qt_interset_spans`. The issue has been fixed for\n-    LLVM/Clang 9, see\n-    https://github.com/llvm/llvm-project/commit/db101864bdc938deb1d63fe4f7da761bd38e5cae\n-    and https://reviews.llvm.org/D64601, however this fix was not backported\n-    to 8.x. Once LLVM/Clang 9 is used, this patch can be dropped.\n-\n-    The particular issue appears to be an optimization done by -O3 which\n-    adds a temporary variable for `spans->y` in `qt_intersect_spans`. When\n-    it does this, sometimes it chooses to use a 32-bit movs instruction\n-    (movswl), and other times it chooses a 64-bit movs instruction (movswq).\n-    By patching `qt_intersect_spans` to always make a temporary variable for\n-    `spans->y`, we are able to sidestep this problem.\n-\n-diff --git a/qtbase/src/gui/painting/qpaintengine_raster.cpp b/qtbase/src/gui/painting/qpaintengine_raster.cpp\n-index 92ab6e8375..f018009e0b 100644\n---- a/qtbase/src/gui/painting/qpaintengine_raster.cpp\n-+++ b/qtbase/src/gui/painting/qpaintengine_raster.cpp\n-@@ -4128,22 +4128,23 @@ static const QSpan *qt_intersect_spans(const QClipData *clip, int *currentClip,\n-     const QSpan *clipEnd = clip->m_spans + clip->count;\n- \n-     while (available && spans < end ) {\n-+        const short spans_y = spans->y;\n-         if (clipSpans >= clipEnd) {\n-             spans = end;\n-             break;\n-         }\n--        if (clipSpans->y > spans->y) {\n-+        if (clipSpans->y > spans_y) {\n-             ++spans;\n-             continue;\n-         }\n--        if (spans->y != clipSpans->y) {\n--            if (spans->y < clip->count && clip->m_clipLines[spans->y].spans)\n--                clipSpans = clip->m_clipLines[spans->y].spans;\n-+        if (spans_y != clipSpans->y) {\n-+            if (spans_y < clip->count && clip->m_clipLines[spans_y].spans)\n-+                clipSpans = clip->m_clipLines[spans_y].spans;\n-             else\n-                 ++clipSpans;\n-             continue;\n-         }\n--        Q_ASSERT(spans->y == clipSpans->y);\n-+        Q_ASSERT(spans_y == clipSpans->y);\n- \n-         int sx1 = spans->x;\n-         int sx2 = sx1 + spans->len;\n-@@ -4162,7 +4163,7 @@ static const QSpan *qt_intersect_spans(const QClipData *clip, int *currentClip,\n-         if (len) {\n-             out->x = qMax(sx1, cx1);\n-             out->len = qMin(sx2, cx2) - out->x;\n--            out->y = spans->y;\n-+            out->y = spans_y;\n-             out->coverage = qt_div_255(spans->coverage * clipSpans->coverage);\n-             ++out;\n-             --available;\n-"
      }
    ]
  }
]