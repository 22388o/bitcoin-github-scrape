practicalswift,2020-05-28 13:16:02,Concept ACK,https://github.com/bitcoin/bitcoin/pull/19090#issuecomment-635343332,635343332,
MarcoFalke,2020-05-28 18:26:42,Removed some more code as requested by @jnewbery ,https://github.com/bitcoin/bitcoin/pull/19090#issuecomment-635518938,635518938,
MarcoFalke,2020-05-28 23:31:38,Reverted back to the previous version for a smaller diff,https://github.com/bitcoin/bitcoin/pull/19090#issuecomment-635670795,635670795,
jnewbery,2020-05-29 02:17:29,"reACK fa197f1d1119346b8980cf1a8b34ceee07f30a6a\n\nonly change is renaming `StopImmediately()` to `stop()` (presumably so `StopWhenDrained()` can be removed in a follow-up PR.\n\n> Reverted back to the previous version for a smaller diff\n\nGood. My original suggestion was to remove `StopWhenDrained()` in a follow-up. No need to do everything in one PR.",https://github.com/bitcoin/bitcoin/pull/19090#issuecomment-635717262,635717262,
MarcoFalke,2020-06-21 10:07:10,"Force pushed last commit, but should be trivial to re-review with `git range-diff bitcoin-core/master --word-diff-regex=. A B`",https://github.com/bitcoin/bitcoin/pull/19090#issuecomment-647107374,647107374,
jnewbery,2020-06-22 13:27:52,utACK fa8337fcdbcab8368d5bf111c4b2e5acf25e6e22,https://github.com/bitcoin/bitcoin/pull/19090#issuecomment-647519122,647519122,
ajtowns,2020-05-28 13:17:25,"Might be better to have something like:\n\n```c++\n    // Tell any threads running serviceQueue to stop as soon as they are\n    // done servicing whatever task they are currently servicing.\n    void stop_immediately();\n\n    // Tell any threads running serviceQueue to stop as soon as\n    // there is no work left to be done.\n    void stop_when_drained();\n```",https://github.com/bitcoin/bitcoin/pull/19090#discussion_r431826785,431826785,src/scheduler.h
ajtowns,2020-05-28 13:19:34,"Hmm, I kind-of think that comment's helpful.",https://github.com/bitcoin/bitcoin/pull/19090#discussion_r431828224,431828224,src/scheduler.h
MarcoFalke,2020-05-28 13:25:16,"This should be clear from our general policy that everything should be as minimal as possible and that unused features should not be implemented.\n\nIf the comment is brought back, I'd prefer the alternative version:\n\n```cpp\n     // To keep things as simple as possible, there is no unschedule and the scheduler can not schedule events on your electronic barista",https://github.com/bitcoin/bitcoin/pull/19090#discussion_r431831911,431831911,src/scheduler.h
MarcoFalke,2020-05-28 13:25:39,"Sure, will do that",https://github.com/bitcoin/bitcoin/pull/19090#discussion_r431832161,431832161,src/scheduler.h
MarcoFalke,2020-05-28 14:39:34,Done,https://github.com/bitcoin/bitcoin/pull/19090#discussion_r431889410,431889410,src/scheduler.h
jnewbery,2020-05-28 15:23:28,"If you're changing this, perhaps make it a unique_ptr to indicate unique ownership?",https://github.com/bitcoin/bitcoin/pull/19090#discussion_r431922496,431922496,src/scheduler.h
jnewbery,2020-05-28 15:55:46,"This is a really good change. Explicitly naming these functions makes it much clearer at the call site.\n\nDo you think a follow-up should remove the `StopWhenDrained()` function entirely? It's only used in tests.",https://github.com/bitcoin/bitcoin/pull/19090#discussion_r431945705,431945705,src/scheduler.h
jnewbery,2020-05-28 16:17:58,"I find it more readable to to have the arguments split over multiple lines, though I guess that means I should open a PR to remove `AllowAllParametersOfDeclarationOnNextLine: false` from `.clang-format`?",https://github.com/bitcoin/bitcoin/pull/19090#discussion_r431961148,431961148,src/scheduler.h
MarcoFalke,2020-05-28 16:27:57,"Not sure how to preserve this part of the comment then:\n\n```\ndelete s; // Must be done after thread is interrupted/joined.\n```\n\nIf this is changed, I'd rather just\n\n```\nCScheduler s{};\ns.scheduleFromNow(doSomething, std::chrono::milliseconds{11}); // Assuming a: void doSomething() { }\ns.scheduleFromNow([=] { this->func(argument); }, std::chrono::milliseconds{3});\nstd::threa",https://github.com/bitcoin/bitcoin/pull/19090#discussion_r431967728,431967728,src/scheduler.h
MarcoFalke,2020-05-28 16:53:50,"In this case splitting over multiple lines is allowed because `BinPack...` is already set to `false`. However, unless `AlignAfterOpenBracket` is changed to `Align` I find it less readable.\n\nIn any case changing `.clang-format` should be done in a separate pr, and I might object changing `AlignAfterOpenBracket` to `Align` because it wastes so much whitespace.",https://github.com/bitcoin/bitcoin/pull/19090#discussion_r431983182,431983182,src/scheduler.h
jnewbery,2020-05-28 17:18:44,"That looks reasonable to me, although I don't think it's _that_ important. If you don't think it matters, leave it as is to avoid bikeshedding.\n\nHowever, I do think that you should s/stop()/StopImmediately()/ in this comment now that you're removing the `stop()` function.",https://github.com/bitcoin/bitcoin/pull/19090#discussion_r431998325,431998325,src/scheduler.h
jnewbery,2020-05-28 17:38:49,https://github.com/bitcoin/bitcoin/pull/19095,https://github.com/bitcoin/bitcoin/pull/19090#discussion_r432010042,432010042,src/scheduler.h
MarcoFalke,2020-05-28 18:26:13,Left as is for now.,https://github.com/bitcoin/bitcoin/pull/19090#discussion_r432035864,432035864,src/scheduler.h
MarcoFalke,2020-05-28 18:26:21,Done,https://github.com/bitcoin/bitcoin/pull/19090#discussion_r432035936,432035936,src/scheduler.h
MarcoFalke,2020-06-21 10:06:40,thx fixed,https://github.com/bitcoin/bitcoin/pull/19090#discussion_r443203639,443203639,src/scheduler.h
