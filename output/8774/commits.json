[
  {
    "sha": "1880aeb0336324ed543c7d181c7b1509bc1cce7a",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoxODgwYWViMDMzNjMyNGVkNTQzYzdkMTgxYzdiMTUwOWJjMWNjZTdh",
    "commit": {
      "author": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2016-09-08T07:17:33Z"
      },
      "committer": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2016-10-04T20:30:10Z"
      },
      "message": "Qt: Get the private key for signing messages via WalletModel",
      "tree": {
        "sha": "1a9f1cb4e841d5c3256bea034ddb04343283e1e8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/1a9f1cb4e841d5c3256bea034ddb04343283e1e8"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1880aeb0336324ed543c7d181c7b1509bc1cce7a",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1880aeb0336324ed543c7d181c7b1509bc1cce7a",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/1880aeb0336324ed543c7d181c7b1509bc1cce7a",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1880aeb0336324ed543c7d181c7b1509bc1cce7a/comments",
    "author": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "3cd836c1d855b92e7c73ab31979f471c4f8dad68",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3cd836c1d855b92e7c73ab31979f471c4f8dad68",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/3cd836c1d855b92e7c73ab31979f471c4f8dad68"
      }
    ],
    "stats": {
      "total": 8,
      "additions": 7,
      "deletions": 1
    },
    "files": [
      {
        "sha": "fa8cf9d6866e551e4f4af4fbea319bbb8b78003a",
        "filename": "src/qt/signverifymessagedialog.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/1880aeb0336324ed543c7d181c7b1509bc1cce7a/src/qt/signverifymessagedialog.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/1880aeb0336324ed543c7d181c7b1509bc1cce7a/src/qt/signverifymessagedialog.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/signverifymessagedialog.cpp?ref=1880aeb0336324ed543c7d181c7b1509bc1cce7a",
        "patch": "@@ -142,7 +142,7 @@ void SignVerifyMessageDialog::on_signMessageButton_SM_clicked()\n     }\n \n     CKey key;\n-    if (!pwalletMain->GetKey(keyID, key))\n+    if (!model->getPrivKey(keyID, key))\n     {\n         ui->statusLabel_SM->setStyleSheet(\"QLabel { color: red; }\");\n         ui->statusLabel_SM->setText(tr(\"Private key for the entered address is not available.\"));"
      },
      {
        "sha": "62655be5178e8acd380cfd45dc8eb7e3b2385de1",
        "filename": "src/qt/walletmodel.cpp",
        "status": "modified",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/1880aeb0336324ed543c7d181c7b1509bc1cce7a/src/qt/walletmodel.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/1880aeb0336324ed543c7d181c7b1509bc1cce7a/src/qt/walletmodel.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/walletmodel.cpp?ref=1880aeb0336324ed543c7d181c7b1509bc1cce7a",
        "patch": "@@ -563,6 +563,11 @@ bool WalletModel::havePrivKey(const CKeyID &address) const\n     return wallet->HaveKey(address);\n }\n \n+bool WalletModel::getPrivKey(const CKeyID &address, CKey& vchPrivKeyOut) const\n+{\n+    return wallet->GetKey(address, vchPrivKeyOut);\n+}\n+\n // returns a list of COutputs from COutPoints\n void WalletModel::getOutputs(const std::vector<COutPoint>& vOutpoints, std::vector<COutput>& vOutputs)\n {"
      },
      {
        "sha": "f15e5fc6f4d64d92012c335c301bed9f8c4d6b36",
        "filename": "src/qt/walletmodel.h",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/1880aeb0336324ed543c7d181c7b1509bc1cce7a/src/qt/walletmodel.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/1880aeb0336324ed543c7d181c7b1509bc1cce7a/src/qt/walletmodel.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/walletmodel.h?ref=1880aeb0336324ed543c7d181c7b1509bc1cce7a",
        "patch": "@@ -188,6 +188,7 @@ class WalletModel : public QObject\n \n     bool getPubKey(const CKeyID &address, CPubKey& vchPubKeyOut) const;\n     bool havePrivKey(const CKeyID &address) const;\n+    bool getPrivKey(const CKeyID &address, CKey& vchPrivKeyOut) const;\n     void getOutputs(const std::vector<COutPoint>& vOutpoints, std::vector<COutput>& vOutputs);\n     bool isSpent(const COutPoint& outpoint) const;\n     void listCoins(std::map<QString, std::vector<COutput> >& mapCoins) const;"
      }
    ]
  },
  {
    "sha": "178cd887eca1123fde39f530ee2b198db48363fe",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoxNzhjZDg4N2VjYTExMjNmZGUzOWY1MzBlZTJiMTk4ZGI0ODM2M2Zl",
    "commit": {
      "author": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2016-09-08T19:58:30Z"
      },
      "committer": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2016-10-04T20:30:10Z"
      },
      "message": "Qt/splash: Specifically keep track of which wallet(s) we are connected to for later disconnecting",
      "tree": {
        "sha": "dc6642222bed128752411e9d3465a490bc6a4572",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/dc6642222bed128752411e9d3465a490bc6a4572"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/178cd887eca1123fde39f530ee2b198db48363fe",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/178cd887eca1123fde39f530ee2b198db48363fe",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/178cd887eca1123fde39f530ee2b198db48363fe",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/178cd887eca1123fde39f530ee2b198db48363fe/comments",
    "author": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "1880aeb0336324ed543c7d181c7b1509bc1cce7a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1880aeb0336324ed543c7d181c7b1509bc1cce7a",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/1880aeb0336324ed543c7d181c7b1509bc1cce7a"
      }
    ],
    "stats": {
      "total": 17,
      "additions": 12,
      "deletions": 5
    },
    "files": [
      {
        "sha": "69ed44b81f9dff247b0d398b3f345c7c5d9115b8",
        "filename": "src/qt/splashscreen.cpp",
        "status": "modified",
        "additions": 7,
        "deletions": 5,
        "changes": 12,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/178cd887eca1123fde39f530ee2b198db48363fe/src/qt/splashscreen.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/178cd887eca1123fde39f530ee2b198db48363fe/src/qt/splashscreen.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/splashscreen.cpp?ref=178cd887eca1123fde39f530ee2b198db48363fe",
        "patch": "@@ -151,9 +151,10 @@ static void ShowProgress(SplashScreen *splash, const std::string &title, int nPr\n }\n \n #ifdef ENABLE_WALLET\n-static void ConnectWallet(SplashScreen *splash, CWallet* wallet)\n+void SplashScreen::ConnectWallet(CWallet* wallet)\n {\n-    wallet->ShowProgress.connect(boost::bind(ShowProgress, splash, _1, _2));\n+    wallet->ShowProgress.connect(boost::bind(ShowProgress, this, _1, _2));\n+    connectedWallets.push_back(wallet);\n }\n #endif\n \n@@ -163,7 +164,7 @@ void SplashScreen::subscribeToCoreSignals()\n     uiInterface.InitMessage.connect(boost::bind(InitMessage, this, _1));\n     uiInterface.ShowProgress.connect(boost::bind(ShowProgress, this, _1, _2));\n #ifdef ENABLE_WALLET\n-    uiInterface.LoadWallet.connect(boost::bind(ConnectWallet, this, _1));\n+    uiInterface.LoadWallet.connect(boost::bind(&SplashScreen::ConnectWallet, this, _1));\n #endif\n }\n \n@@ -173,8 +174,9 @@ void SplashScreen::unsubscribeFromCoreSignals()\n     uiInterface.InitMessage.disconnect(boost::bind(InitMessage, this, _1));\n     uiInterface.ShowProgress.disconnect(boost::bind(ShowProgress, this, _1, _2));\n #ifdef ENABLE_WALLET\n-    if(pwalletMain)\n-        pwalletMain->ShowProgress.disconnect(boost::bind(ShowProgress, this, _1, _2));\n+    Q_FOREACH(CWallet* const & pwallet, connectedWallets) {\n+        pwallet->ShowProgress.disconnect(boost::bind(ShowProgress, this, _1, _2));\n+    }\n #endif\n }\n "
      },
      {
        "sha": "8761343a7aafa6ac3b40e20b2ae9ac0c86a4461c",
        "filename": "src/qt/splashscreen.h",
        "status": "modified",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/178cd887eca1123fde39f530ee2b198db48363fe/src/qt/splashscreen.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/178cd887eca1123fde39f530ee2b198db48363fe/src/qt/splashscreen.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/splashscreen.h?ref=178cd887eca1123fde39f530ee2b198db48363fe",
        "patch": "@@ -7,6 +7,7 @@\n \n #include <QSplashScreen>\n \n+class CWallet;\n class NetworkStyle;\n \n /** Class for the splashscreen with information of the running client.\n@@ -39,11 +40,15 @@ public Q_SLOTS:\n     void subscribeToCoreSignals();\n     /** Disconnect core signals to splash screen */\n     void unsubscribeFromCoreSignals();\n+    /** Connect wallet signals to splash screen */\n+    void ConnectWallet(CWallet*);\n \n     QPixmap pixmap;\n     QString curMessage;\n     QColor curColor;\n     int curAlignment;\n+\n+    QList<CWallet*> connectedWallets;\n };\n \n #endif // BITCOIN_QT_SPLASHSCREEN_H"
      }
    ]
  }
]