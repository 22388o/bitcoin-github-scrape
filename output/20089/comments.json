[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/703889492",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20089#issuecomment-703889492",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20089",
    "id": 703889492,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMzg4OTQ5Mg==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-05T21:07:41Z",
    "updated_at": "2020-10-08T22:08:27Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #19381 (Fix UBSan warnings triggered when loading corrupt mempool.dat files by rajarshimaitra)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/703889492/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/706011655",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20089#issuecomment-706011655",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20089",
    "id": 706011655,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNjAxMTY1NQ==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-09T07:07:08Z",
    "updated_at": "2020-10-09T07:07:08Z",
    "author_association": "MEMBER",
    "body": "review ACK 5693d5ad4a1ea862b82b25a3194569bfb66bc67d",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/706011655/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/706902182",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20089#issuecomment-706902182",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20089",
    "id": 706902182,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNjkwMjE4Mg==",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?u=5ff13e375b40ea55ecd3c108337dd6a23f68eddf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-12T06:35:13Z",
    "updated_at": "2020-10-12T06:35:13Z",
    "author_association": "CONTRIBUTOR",
    "body": "@theStack Now printing a log message. Please re-review :)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/706902182/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/707732785",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20089#issuecomment-707732785",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20089",
    "id": 707732785,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNzczMjc4NQ==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-13T13:19:55Z",
    "updated_at": "2020-10-13T13:19:55Z",
    "author_association": "MEMBER",
    "body": "review ACK 875a2c3149f6f94b198c7c24230375d27410f422",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/707732785/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/712416470",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20089#issuecomment-712416470",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20089",
    "id": 712416470,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxMjQxNjQ3MA==",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?u=5ff13e375b40ea55ecd3c108337dd6a23f68eddf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-19T20:15:02Z",
    "updated_at": "2020-10-19T20:15:02Z",
    "author_association": "CONTRIBUTOR",
    "body": "Could someone restart Cirrus please? :)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/712416470/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/500812519",
    "pull_request_review_id": 503617701,
    "id": 500812519,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDgxMjUxOQ==",
    "diff_hunk": "@@ -5037,6 +5038,14 @@ int VersionBitsTipStateSinceHeight(const Consensus::Params& params, Consensus::D\n \n static const uint64_t MEMPOOL_DUMP_VERSION = 1;\n \n+// Check if an amount is a valid fee delta.\n+//\n+// Like MoneyRange(...), but allows for negative money amounts.\n+static bool FeeDeltaRange(const CAmount fee_delta)\n+{\n+    return fee_delta >= -MAX_MONEY && fee_delta <= MAX_MONEY;",
    "path": "src/validation.cpp",
    "position": null,
    "original_position": 17,
    "commit_id": "8953ff96581d51a1e05c467f39c68f06e40a4c89",
    "original_commit_id": "6d3ffd566a4f5d300c77f15608b1dff80db84aac",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "nit, `MoneyRange(abs(fee_delta))`?",
    "created_at": "2020-10-07T07:59:39Z",
    "updated_at": "2020-11-11T21:25:08Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20089#discussion_r500812519",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20089",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/500812519"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/20089#discussion_r500812519"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20089"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/500812519/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 5046,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/500846086",
    "pull_request_review_id": 503660839,
    "id": 500846086,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDg0NjA4Ng==",
    "diff_hunk": "@@ -5037,6 +5038,14 @@ int VersionBitsTipStateSinceHeight(const Consensus::Params& params, Consensus::D\n \n static const uint64_t MEMPOOL_DUMP_VERSION = 1;\n \n+// Check if an amount is a valid fee delta.\n+//\n+// Like MoneyRange(...), but allows for negative money amounts.\n+static bool FeeDeltaRange(const CAmount fee_delta)\n+{\n+    return fee_delta >= -MAX_MONEY && fee_delta <= MAX_MONEY;",
    "path": "src/validation.cpp",
    "position": null,
    "original_position": 17,
    "commit_id": "8953ff96581d51a1e05c467f39c68f06e40a4c89",
    "original_commit_id": "6d3ffd566a4f5d300c77f15608b1dff80db84aac",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "No that would be very dangerous! :)\r\n\r\nI'm intentionally avoiding `abs` here.\r\n\r\n`FeeDeltaRange(fee_delta)` is not equivalent to `MoneyRange(abs(fee_delta))` :)\r\n\r\nLive demo:\r\n\r\nAt first sight they might _appear_ to be equivalent:\r\n\r\n```\r\n$ cling\r\n[cling]$ #include <cstdint>\r\n[cling]$ using CAmount = int64_t;\r\n[cling]$ static const CAmount COIN = 100000000;\r\n[cling]$ static const CAmount MAX_MONEY = 21000000 * COIN;\r\n[cling]$ bool FeeDeltaRange(const CAmount fee_delta) { return fee_delta >= -MAX_MONEY && fee_delta <= MAX_MONEY; }\r\n[cling]$ bool MoneyRange(const CAmount& nValue) { return (nValue >= 0 && nValue <= MAX_MONEY); }\r\n[cling]$ FeeDeltaRange(-12345)\r\n(bool) true\r\n[cling]$ MoneyRange(abs(-12345))\r\n(bool) true\r\n```\r\n\r\nBut let's test with the amount -9223372036854775808 (`std::numeric_limits<int64_t>::min()`):\r\n\r\n```\r\n[cling]$ #include <limits>\r\n[cling]$ CAmount counterexample = std::numeric_limits<int64_t>::min();\r\n[cling]$ counterexample\r\n(long) -9223372036854775808\r\n[cling]$ FeeDeltaRange(counterexample)\r\n(bool) false\r\n[cling]$ MoneyRange(abs(counterexample))\r\n(bool) true\r\n```\r\n\r\nNote that the behaviour of `abs` is undefined if the result cannot be represented by the return type.\r\n\r\nThe same goes for `std::abs` which is *not* equivalent to `abs` :)\r\n\r\nAnother `std::abs`/`abs` gotcha:\r\n\r\n```\r\n[cling]$ abs(std::numeric_limits<int64_t>::min())\r\n(int) 0\r\n[cling]$ std::abs(std::numeric_limits<int64_t>::min())\r\n(long) -9223372036854775808\r\n```\r\n\r\nNote also that the result of `std::abs` is not guaranteed to be positive as shown in the latter case :)",
    "created_at": "2020-10-07T08:52:28Z",
    "updated_at": "2020-11-11T21:25:08Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20089#discussion_r500846086",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20089",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/500846086"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/20089#discussion_r500846086"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20089"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/500846086/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 5046,
    "side": "RIGHT",
    "in_reply_to_id": 500812519
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/501681148",
    "pull_request_review_id": 504729579,
    "id": 501681148,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTY4MTE0OA==",
    "diff_hunk": "@@ -5037,6 +5038,14 @@ int VersionBitsTipStateSinceHeight(const Consensus::Params& params, Consensus::D\n \n static const uint64_t MEMPOOL_DUMP_VERSION = 1;\n \n+// Check if an amount is a valid fee delta.\n+//\n+// Like MoneyRange(...), but allows for negative money amounts.\n+static bool FeeDeltaRange(const CAmount fee_delta)",
    "path": "src/validation.cpp",
    "position": null,
    "original_position": 15,
    "commit_id": "8953ff96581d51a1e05c467f39c68f06e40a4c89",
    "original_commit_id": "6d3ffd566a4f5d300c77f15608b1dff80db84aac",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This helper could be moved to the amount module?",
    "created_at": "2020-10-08T12:29:46Z",
    "updated_at": "2020-11-11T21:25:08Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20089#discussion_r501681148",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20089",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/501681148"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/20089#discussion_r501681148"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20089"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/501681148/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 5044,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/501974214",
    "pull_request_review_id": 505115916,
    "id": 501974214,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTk3NDIxNA==",
    "diff_hunk": "@@ -5037,6 +5038,14 @@ int VersionBitsTipStateSinceHeight(const Consensus::Params& params, Consensus::D\n \n static const uint64_t MEMPOOL_DUMP_VERSION = 1;\n \n+// Check if an amount is a valid fee delta.\n+//\n+// Like MoneyRange(...), but allows for negative money amounts.\n+static bool FeeDeltaRange(const CAmount fee_delta)",
    "path": "src/validation.cpp",
    "position": null,
    "original_position": 15,
    "commit_id": "8953ff96581d51a1e05c467f39c68f06e40a4c89",
    "original_commit_id": "6d3ffd566a4f5d300c77f15608b1dff80db84aac",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Good idea! Done! :)",
    "created_at": "2020-10-08T19:51:31Z",
    "updated_at": "2020-11-11T21:25:08Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20089#discussion_r501974214",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20089",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/501974214"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/20089#discussion_r501974214"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20089"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/501974214/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 5044,
    "side": "RIGHT",
    "in_reply_to_id": 501681148
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/503437961",
    "pull_request_review_id": 506801028,
    "id": 503437961,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzQzNzk2MQ==",
    "diff_hunk": "@@ -5106,6 +5110,10 @@ bool LoadMempool(CTxMemPool& pool)\n         for (const auto& i : mapDeltas) {\n             if (FeeDeltaRange(i.second)) {\n                 pool.PrioritiseTransaction(i.first, i.second);\n+            } else {\n+                if (i.second != 0) {",
    "path": "src/validation.cpp",
    "position": null,
    "original_position": 20,
    "commit_id": "8953ff96581d51a1e05c467f39c68f06e40a4c89",
    "original_commit_id": "89ab5c24586dfb2bcde34ed4b9d706a4cdde3bc8",
    "user": {
      "login": "theStack",
      "id": 91535,
      "node_id": "MDQ6VXNlcjkxNTM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theStack",
      "html_url": "https://github.com/theStack",
      "followers_url": "https://api.github.com/users/theStack/followers",
      "following_url": "https://api.github.com/users/theStack/following{/other_user}",
      "gists_url": "https://api.github.com/users/theStack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theStack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
      "organizations_url": "https://api.github.com/users/theStack/orgs",
      "repos_url": "https://api.github.com/users/theStack/repos",
      "events_url": "https://api.github.com/users/theStack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theStack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This condition is always true, isn't it? 0 is a valid fee delta, hence the else-branch wouldn't be taken in the case that i.second is zero.",
    "created_at": "2020-10-12T17:31:59Z",
    "updated_at": "2020-11-11T21:25:08Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20089#discussion_r503437961",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20089",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/503437961"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/20089#discussion_r503437961"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20089"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/503437961/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 5114,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/503519957",
    "pull_request_review_id": 506902115,
    "id": 503519957,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzUxOTk1Nw==",
    "diff_hunk": "@@ -5106,6 +5110,10 @@ bool LoadMempool(CTxMemPool& pool)\n         for (const auto& i : mapDeltas) {\n             if (FeeDeltaRange(i.second)) {\n                 pool.PrioritiseTransaction(i.first, i.second);\n+            } else {\n+                if (i.second != 0) {",
    "path": "src/validation.cpp",
    "position": null,
    "original_position": 20,
    "commit_id": "8953ff96581d51a1e05c467f39c68f06e40a4c89",
    "original_commit_id": "89ab5c24586dfb2bcde34ed4b9d706a4cdde3bc8",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "You're absolutely right: the conditional is redundant. Thanks for noticing! Redundancy removed :)\r\n\r\nPlease re-review! :)",
    "created_at": "2020-10-12T20:36:29Z",
    "updated_at": "2020-11-11T21:25:08Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20089#discussion_r503519957",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20089",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/503519957"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/20089#discussion_r503519957"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20089"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/503519957/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 5114,
    "side": "RIGHT",
    "in_reply_to_id": 503437961
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/511499384",
    "pull_request_review_id": 516296876,
    "id": 511499384,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTQ5OTM4NA==",
    "diff_hunk": "@@ -25,4 +25,12 @@ static const CAmount COIN = 100000000;\n static const CAmount MAX_MONEY = 21000000 * COIN;\n inline bool MoneyRange(const CAmount& nValue) { return (nValue >= 0 && nValue <= MAX_MONEY); }\n \n+/** Check if an amount is a valid fee delta.\n+ *\n+ * Like MoneyRange(...), but allows for negative money amounts.\n+ */\n+inline bool FeeDeltaRange(const CAmount fee_delta) {\n+    return fee_delta >= -MAX_MONEY && fee_delta <= MAX_MONEY;",
    "path": "src/amount.h",
    "position": 9,
    "original_position": 9,
    "commit_id": "8953ff96581d51a1e05c467f39c68f06e40a4c89",
    "original_commit_id": "875a2c3149f6f94b198c7c24230375d27410f422",
    "user": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Fee deltas outside `MAX_MONEY` are valid and have at least a conceptual use case (consider that fee rate is divided by transaction size: a larger transaction would need `>MAX_MONEY` feerate to go before a `MAX_MONEY` smaller tx).",
    "created_at": "2020-10-24T18:16:57Z",
    "updated_at": "2020-11-11T21:25:08Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20089#discussion_r511499384",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20089",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/511499384"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/20089#discussion_r511499384"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20089"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/511499384/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 33,
    "original_line": 33,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/511519957",
    "pull_request_review_id": 516310552,
    "id": 511519957,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTUxOTk1Nw==",
    "diff_hunk": "@@ -25,4 +25,12 @@ static const CAmount COIN = 100000000;\n static const CAmount MAX_MONEY = 21000000 * COIN;\n inline bool MoneyRange(const CAmount& nValue) { return (nValue >= 0 && nValue <= MAX_MONEY); }\n \n+/** Check if an amount is a valid fee delta.\n+ *\n+ * Like MoneyRange(...), but allows for negative money amounts.\n+ */\n+inline bool FeeDeltaRange(const CAmount fee_delta) {\n+    return fee_delta >= -MAX_MONEY && fee_delta <= MAX_MONEY;",
    "path": "src/amount.h",
    "position": 9,
    "original_position": 9,
    "commit_id": "8953ff96581d51a1e05c467f39c68f06e40a4c89",
    "original_commit_id": "875a2c3149f6f94b198c7c24230375d27410f422",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "@luke-jr What is the valid fee delta range in your opinion?",
    "created_at": "2020-10-24T22:13:42Z",
    "updated_at": "2020-11-11T21:25:08Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20089#discussion_r511519957",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20089",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/511519957"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/20089#discussion_r511519957"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20089"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/511519957/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 33,
    "original_line": 33,
    "side": "RIGHT",
    "in_reply_to_id": 511499384
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/519212383",
    "pull_request_review_id": 525677598,
    "id": 519212383,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTIxMjM4Mw==",
    "diff_hunk": "@@ -25,4 +25,12 @@ static const CAmount COIN = 100000000;\n static const CAmount MAX_MONEY = 21000000 * COIN;\n inline bool MoneyRange(const CAmount& nValue) { return (nValue >= 0 && nValue <= MAX_MONEY); }\n \n+/** Check if an amount is a valid fee delta.\n+ *\n+ * Like MoneyRange(...), but allows for negative money amounts.\n+ */\n+inline bool FeeDeltaRange(const CAmount fee_delta) {\n+    return fee_delta >= -MAX_MONEY && fee_delta <= MAX_MONEY;",
    "path": "src/amount.h",
    "position": 9,
    "original_position": 9,
    "commit_id": "8953ff96581d51a1e05c467f39c68f06e40a4c89",
    "original_commit_id": "875a2c3149f6f94b198c7c24230375d27410f422",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I'm not sure this is actionable unless we can establish what the valid range should be.",
    "created_at": "2020-11-07T19:54:57Z",
    "updated_at": "2020-11-11T21:25:08Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20089#discussion_r519212383",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20089",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/519212383"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/20089#discussion_r519212383"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20089"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/519212383/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 33,
    "original_line": 33,
    "side": "RIGHT",
    "in_reply_to_id": 511499384
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/557249710",
    "pull_request_review_id": 568047632,
    "id": 557249710,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NzI0OTcxMA==",
    "diff_hunk": "@@ -25,4 +25,12 @@ static const CAmount COIN = 100000000;\n static const CAmount MAX_MONEY = 21000000 * COIN;\n inline bool MoneyRange(const CAmount& nValue) { return (nValue >= 0 && nValue <= MAX_MONEY); }\n \n+/** Check if an amount is a valid fee delta.\n+ *\n+ * Like MoneyRange(...), but allows for negative money amounts.\n+ */\n+inline bool FeeDeltaRange(const CAmount fee_delta) {\n+    return fee_delta >= -MAX_MONEY && fee_delta <= MAX_MONEY;",
    "path": "src/amount.h",
    "position": 9,
    "original_position": 9,
    "commit_id": "8953ff96581d51a1e05c467f39c68f06e40a4c89",
    "original_commit_id": "875a2c3149f6f94b198c7c24230375d27410f422",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This is not a feerate, but an absolute amount in satoshis",
    "created_at": "2021-01-14T09:21:20Z",
    "updated_at": "2021-01-14T09:21:20Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20089#discussion_r557249710",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20089",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/557249710"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/20089#discussion_r557249710"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20089"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/557249710/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 33,
    "original_line": 33,
    "side": "RIGHT",
    "in_reply_to_id": 511499384
  }
]