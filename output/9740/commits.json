[
  {
    "sha": "9f821347793b6523fd0b609a198e0e83e76affbf",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo5ZjgyMTM0Nzc5M2I2NTIzZmQwYjYwOWExOThlMGU4M2U3NmFmZmJm",
    "commit": {
      "author": {
        "name": "aideca",
        "email": "aideca@users.noreply.github.com",
        "date": "2017-02-10T12:47:53Z"
      },
      "committer": {
        "name": "aideca",
        "email": "aideca@users.noreply.github.com",
        "date": "2017-04-13T08:39:07Z"
      },
      "message": "Add friendly output to dumpwallet refs #9564",
      "tree": {
        "sha": "0caeef62f6d1364f9f077be74d148bfb9cb99dcb",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/0caeef62f6d1364f9f077be74d148bfb9cb99dcb"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9f821347793b6523fd0b609a198e0e83e76affbf",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9f821347793b6523fd0b609a198e0e83e76affbf",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/9f821347793b6523fd0b609a198e0e83e76affbf",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9f821347793b6523fd0b609a198e0e83e76affbf/comments",
    "author": {
      "login": "aideca",
      "id": 5959514,
      "node_id": "MDQ6VXNlcjU5NTk1MTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5959514?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aideca",
      "html_url": "https://github.com/aideca",
      "followers_url": "https://api.github.com/users/aideca/followers",
      "following_url": "https://api.github.com/users/aideca/following{/other_user}",
      "gists_url": "https://api.github.com/users/aideca/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aideca/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aideca/subscriptions",
      "organizations_url": "https://api.github.com/users/aideca/orgs",
      "repos_url": "https://api.github.com/users/aideca/repos",
      "events_url": "https://api.github.com/users/aideca/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aideca/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "aideca",
      "id": 5959514,
      "node_id": "MDQ6VXNlcjU5NTk1MTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5959514?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aideca",
      "html_url": "https://github.com/aideca",
      "followers_url": "https://api.github.com/users/aideca/followers",
      "following_url": "https://api.github.com/users/aideca/following{/other_user}",
      "gists_url": "https://api.github.com/users/aideca/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aideca/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aideca/subscriptions",
      "organizations_url": "https://api.github.com/users/aideca/orgs",
      "repos_url": "https://api.github.com/users/aideca/repos",
      "events_url": "https://api.github.com/users/aideca/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aideca/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "de01da7cad32c505624e7ddcf9b062374fe17b95",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/de01da7cad32c505624e7ddcf9b062374fe17b95",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/de01da7cad32c505624e7ddcf9b062374fe17b95"
      }
    ],
    "stats": {
      "total": 16,
      "additions": 13,
      "deletions": 3
    },
    "files": [
      {
        "sha": "60666718e3f115cf61a05bbd75b1d0ac020f8d9f",
        "filename": "src/wallet/rpcdump.cpp",
        "status": "modified",
        "additions": 13,
        "deletions": 3,
        "changes": 16,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/9f821347793b6523fd0b609a198e0e83e76affbf/src/wallet/rpcdump.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/9f821347793b6523fd0b609a198e0e83e76affbf/src/wallet/rpcdump.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/rpcdump.cpp?ref=9f821347793b6523fd0b609a198e0e83e76affbf",
        "patch": "@@ -579,7 +579,11 @@ UniValue dumpwallet(const JSONRPCRequest& request)\n             \"dumpwallet \\\"filename\\\"\\n\"\n             \"\\nDumps all wallet keys in a human-readable format.\\n\"\n             \"\\nArguments:\\n\"\n-            \"1. \\\"filename\\\"    (string, required) The filename\\n\"\n+            \"1. \\\"filename\\\"    (string, required) The filename with path (either absolute or relative to bitcoind)\\n\"\n+            \"\\nResult:\\n\"\n+            \"{                           (json object)\\n\"\n+            \"  \\\"filename\\\" : {        (string) The filename with full absolute path\\n\"\n+            \"}\\n\"\n             \"\\nExamples:\\n\"\n             + HelpExampleCli(\"dumpwallet\", \"\\\"test\\\"\")\n             + HelpExampleRpc(\"dumpwallet\", \"\\\"test\\\"\")\n@@ -590,7 +594,9 @@ UniValue dumpwallet(const JSONRPCRequest& request)\n     EnsureWalletIsUnlocked(pwallet);\n \n     std::ofstream file;\n-    file.open(request.params[0].get_str().c_str());\n+    boost::filesystem::path filepath = request.params[0].get_str();\n+    filepath = boost::filesystem::absolute(filepath);\n+    file.open(filepath.string().c_str());\n     if (!file.is_open())\n         throw JSONRPCError(RPC_INVALID_PARAMETER, \"Cannot open wallet dump file\");\n \n@@ -655,7 +661,11 @@ UniValue dumpwallet(const JSONRPCRequest& request)\n     file << \"\\n\";\n     file << \"# End of dump\\n\";\n     file.close();\n-    return NullUniValue;\n+\n+    UniValue reply(UniValue::VOBJ);\n+    reply.push_back(Pair(\"filename\", filepath.string()));\n+\n+    return reply;\n }\n \n "
      }
    ]
  },
  {
    "sha": "164019d611e9d67fd3e66eb7f18033c9249764d4",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoxNjQwMTlkNjExZTlkNjdmZDNlNjZlYjdmMTgwMzNjOTI0OTc2NGQ0",
    "commit": {
      "author": {
        "name": "aideca",
        "email": "aideca@users.noreply.github.com",
        "date": "2017-02-11T05:43:28Z"
      },
      "committer": {
        "name": "aideca",
        "email": "aideca@users.noreply.github.com",
        "date": "2017-04-13T08:39:07Z"
      },
      "message": "Add dumpwallet output test",
      "tree": {
        "sha": "52574d7359a6004231f371b43aabd12ea0934730",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/52574d7359a6004231f371b43aabd12ea0934730"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/164019d611e9d67fd3e66eb7f18033c9249764d4",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/164019d611e9d67fd3e66eb7f18033c9249764d4",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/164019d611e9d67fd3e66eb7f18033c9249764d4",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/164019d611e9d67fd3e66eb7f18033c9249764d4/comments",
    "author": {
      "login": "aideca",
      "id": 5959514,
      "node_id": "MDQ6VXNlcjU5NTk1MTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5959514?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aideca",
      "html_url": "https://github.com/aideca",
      "followers_url": "https://api.github.com/users/aideca/followers",
      "following_url": "https://api.github.com/users/aideca/following{/other_user}",
      "gists_url": "https://api.github.com/users/aideca/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aideca/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aideca/subscriptions",
      "organizations_url": "https://api.github.com/users/aideca/orgs",
      "repos_url": "https://api.github.com/users/aideca/repos",
      "events_url": "https://api.github.com/users/aideca/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aideca/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "aideca",
      "id": 5959514,
      "node_id": "MDQ6VXNlcjU5NTk1MTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5959514?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/aideca",
      "html_url": "https://github.com/aideca",
      "followers_url": "https://api.github.com/users/aideca/followers",
      "following_url": "https://api.github.com/users/aideca/following{/other_user}",
      "gists_url": "https://api.github.com/users/aideca/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/aideca/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/aideca/subscriptions",
      "organizations_url": "https://api.github.com/users/aideca/orgs",
      "repos_url": "https://api.github.com/users/aideca/repos",
      "events_url": "https://api.github.com/users/aideca/events{/privacy}",
      "received_events_url": "https://api.github.com/users/aideca/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "9f821347793b6523fd0b609a198e0e83e76affbf",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9f821347793b6523fd0b609a198e0e83e76affbf",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/9f821347793b6523fd0b609a198e0e83e76affbf"
      }
    ],
    "stats": {
      "total": 5,
      "additions": 4,
      "deletions": 1
    },
    "files": [
      {
        "sha": "352add28fb0855859af09003f169489b1f864c06",
        "filename": "test/functional/wallet-dump.py",
        "status": "modified",
        "additions": 4,
        "deletions": 1,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/164019d611e9d67fd3e66eb7f18033c9249764d4/test/functional/wallet-dump.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/164019d611e9d67fd3e66eb7f18033c9249764d4/test/functional/wallet-dump.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/wallet-dump.py?ref=164019d611e9d67fd3e66eb7f18033c9249764d4",
        "patch": "@@ -4,6 +4,8 @@\n # file COPYING or http://www.opensource.org/licenses/mit-license.php.\n \"\"\"Test the dumpwallet RPC.\"\"\"\n \n+import os\n+\n from test_framework.test_framework import BitcoinTestFramework\n from test_framework.util import (start_nodes, start_node, assert_equal, bitcoind_processes)\n \n@@ -82,7 +84,8 @@ def run_test (self):\n         self.nodes[0].keypoolrefill()\n \n         # dump unencrypted wallet\n-        self.nodes[0].dumpwallet(tmpdir + \"/node0/wallet.unencrypted.dump\")\n+        result = self.nodes[0].dumpwallet(tmpdir + \"/node0/wallet.unencrypted.dump\")\n+        assert_equal(result['filename'], os.path.abspath(tmpdir + \"/node0/wallet.unencrypted.dump\"))\n \n         found_addr, found_addr_chg, found_addr_rsv, hd_master_addr_unenc = \\\n             read_dump(tmpdir + \"/node0/wallet.unencrypted.dump\", addrs, None)"
      }
    ]
  }
]