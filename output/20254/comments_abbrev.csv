DrahtBot,2020-10-27 12:26:16,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #20120 (net, rpc, test, bugfix: update GetNetworkName, GetNetworksInfo, regression tests by jonatack)\n* #18766 (Disable f",https://github.com/bitcoin/bitcoin/pull/20254#issuecomment-717208517,717208517,
Saibato,2020-10-27 14:15:02," ̶p̶l̶s̶ ̶n̶o̶t̶e̶ ̶t̶h̶e̶ ̶i̶2̶p̶ ̶p̶r̶o̶x̶y̶ ̶t̶a̶k̶e̶s̶ ̶a̶d̶d̶r̶e̶s̶s̶e̶s̶ ̶i̶n̶ ̶t̶h̶e̶ ̶f̶o̶r̶m̶ ̶y̶f̶s̶v̶s̶y̶4̶6̶7̶m̶t̶5̶x̶a̶f̶a̶q̶7̶z̶a̶u̶k̶k̶j̶y̶z̶e̶h̶v̶m̶e̶w̶4̶4̶5̶y̶a̶a̶e̶j̶v̶r̶w̶p̶k̶5̶3̶a̶c̶e̶j̶q̶.̶i̶2̶p̶\n̶w̶i̶t̶h̶o̶u̶t̶ ̶.̶b̶3̶2̶.̶ ̶A̶F̶A̶I̶K̶\n@vasild is ur node up? I was unable to reach from remote or is it by now just local?\nAnd by what directory is it published, AFAIK one has",https://github.com/bitcoin/bitcoin/pull/20254#issuecomment-717273719,717273719,
vasild,2020-10-27 14:39:03,"Yes, it is up. From another computer:\n\n```\n2020-10-27T14:31:09Z New outbound peer connected: version: 70015, blocks=654455, peer=0, peeraddr=yfsvsy467mt5xafaq7zaukkjyzehvmew445yaaejvrwpk53acejq.b32.i2p:31872 (full-relay)\n```\n\nThe `.b32` must be present. See ""B32"" in https://i2pplus.com/glossary/. The port seems to be irrelevant. I guess we can skip it altogether.",https://github.com/bitcoin/bitcoin/pull/20254#issuecomment-717290115,717290115,
Saibato,2020-10-27 14:51:58,"> Yes, it is up. From another computer:\n\nthx, maybe i must update my version i use  i2pd 2.29.0 ?\n\nediit@saibato\n@vasild \nWas able to connect  :+1: \nI had forgot to create a fixed i2p client tunnel in i2pd for port 31872. \n\nconcept tACK \n\ncmd line  `-connect=yfsvsy467mt5xafaq7zaukkjyzehvmew445yaaejvrwpk53acejq.b32.i2p:31872  `then worked. ",https://github.com/bitcoin/bitcoin/pull/20254#issuecomment-717298847,717298847,
vasild,2020-10-27 17:37:38,"> Was able to connect\n\nExcellent!\n\nHowever I got:\n\n```\npid 82450 (i2pd), jid 0, uid 255: exited on signal 10\npid 19775 (i2pd), jid 0, uid 255: exited on signal 6\npid 19909 (i2pd), jid 0, uid 255: exited on signal 6\npid 20207 (i2pd), jid 0, uid 255: exited on signal 6\n```\nI stopped it until I figure out what's going on.",https://github.com/bitcoin/bitcoin/pull/20254#issuecomment-717408597,717408597,
Saibato,2020-10-27 17:53:05,"> I stopped it until I figure out what's going on.\n\ntyi, while testing i also direct connected with netcat and connect-proxy without the bitcoin client and hammered on my keyboard, happy fuzzing! Maybe something @practicalswift might want to look in? \n\n",https://github.com/bitcoin/bitcoin/pull/20254#issuecomment-717417464,717417464,
jonatack,2020-11-03 21:55:39,"@vasild Yay! My node is connected to your I2P peer and you even sent me a block.\n\nIf you pull the last commit of https://github.com/jonatack/bitcoin/commits/netinfo-add-i2p into this draft PR, `-netinfo` will display I2P peers.\n\n```\nPeer connections sorted by direction and min ping\n<-> relay   net  mping   ping send recv  txn  blk  age  asmap id address                                 ",https://github.com/bitcoin/bitcoin/pull/20254#issuecomment-721394637,721394637,
vasild,2020-11-13 15:23:52,"> `pid 82450 (i2pd), jid 0, uid 255: exited on signal 10`\n> I stopped it until I figure out what's going on.\n\nhttps://github.com/PurpleI2P/i2pd/issues/1568",https://github.com/bitcoin/bitcoin/pull/20254#issuecomment-726825473,726825473,
luke-jr,2020-11-27 00:52:26,Is it intentional that this (alone) ignores the bare `-proxy` setting?,https://github.com/bitcoin/bitcoin/pull/20254#issuecomment-734520166,734520166,
vasild,2020-11-27 09:11:43,"@luke-jr yes, usually an I2P socks5 proxy can be used only for connecting to I2P addresses<sup>*</sup>, so if we point `-proxy` to such a proxy, then one will not be able to make connections to IPv4, IPv6 or Tor addresses.\n\n<sup>*</sup>there could be exceptions and there may be out-routers for going out of the I2P network, but that is unreliable.",https://github.com/bitcoin/bitcoin/pull/20254#issuecomment-734729806,734729806,
vasild,2020-12-16 10:01:38,"> You could take the UTs from here...\n\nDone in https://github.com/vasild/bitcoin/commit/2f493235200a7bc3353b75379ff03a6f729e25c9 (part of [the I2P SAM implementation](https://github.com/vasild/bitcoin/commits/i2p_sam) which I am going to PR soon to supersede this PR).\n\nThanks!",https://github.com/bitcoin/bitcoin/pull/20254#issuecomment-746016983,746016983,
vasild,2020-12-17 12:50:48,Closing this as superseded by https://github.com/bitcoin/bitcoin/pull/20685,https://github.com/bitcoin/bitcoin/pull/20254#issuecomment-747420322,747420322,
luke-jr,2020-11-13 14:51:35,I wonder if `-proxy=<ip:port>=i2p` would make more sense,https://github.com/bitcoin/bitcoin/pull/20254#discussion_r522999084,522999084,src/init.cpp
luke-jr,2020-11-13 14:55:12,This comment is outdated?,https://github.com/bitcoin/bitcoin/pull/20254#discussion_r523001463,523001463,src/util/strencodings.h
vasild,2020-11-13 15:08:15,"Indeed! I renamed the parameter so that the default behavior is with a `true` argument, to be in line with `EncodeBase32()`.",https://github.com/bitcoin/bitcoin/pull/20254#discussion_r523010004,523010004,src/util/strencodings.h
vasild,2020-11-13 15:15:26,"Hmm, maybe yes. Anyway, I am working on a support for the [I2P SAM](https://geti2p.net/en/docs/api/samv3) protocol which would be used to accept incoming connections - it allows us to know that it is an I2P incoming connection and also to know the peer's I2P address. That will be `-i2psam=<addr:port>`. Once we have that we can use it also for making outgoing connections, so `-i2pproxy=` will not b",https://github.com/bitcoin/bitcoin/pull/20254#discussion_r523014855,523014855,src/init.cpp
lontivero,2020-12-15 18:27:44,"Validating the string is common to both. It could be moved here maybe.\n \n```suggestion\nbool CNetAddr::SetSpecial(const std::string& name)\n{\n    if (!ValidAsCString(name)) {\n         return false;\n    }\n    if (SetTor(name)) {\n```",https://github.com/bitcoin/bitcoin/pull/20254#discussion_r543583852,543583852,src/netaddress.cpp
lontivero,2020-12-15 18:32:29,"There are (or there will be) more than one base32 encoded addresses, or at least that's what I found reading the i2p specs. The ""traditional"" one is 52 chars length while the `Encrypted LS with Base 32 Addresses` is 56 chars length (https://geti2p.net/spec/encryptedleaseset.txt)\n\nIt seems we only support the 32 bytes addresses (52 chars) so, it could make sense to validate it.\n \n```suggest",https://github.com/bitcoin/bitcoin/pull/20254#discussion_r543586946,543586946,src/netaddress.cpp
vasild,2020-12-16 10:00:38,Done in https://github.com/vasild/bitcoin/commit/2f493235200a7bc3353b75379ff03a6f729e25c9 (part of [the I2P SAM implementation](https://github.com/vasild/bitcoin/commits/i2p_sam) which I am going to PR soon).,https://github.com/bitcoin/bitcoin/pull/20254#discussion_r544165520,544165520,src/netaddress.cpp
vasild,2020-12-16 10:04:05,"We already do that below: `address_bytes.size() != ADDR_I2P_SIZE`. It would be a minuscule optimization to invalidate it before Base32-decoding, but I will skip it for now (same applies when parsing Tor addresses).",https://github.com/bitcoin/bitcoin/pull/20254#discussion_r544167863,544167863,src/netaddress.cpp
lontivero,2020-12-16 16:06:37,Make sense.,https://github.com/bitcoin/bitcoin/pull/20254#discussion_r544422779,544422779,src/netaddress.cpp
lontivero,2020-12-16 16:17:35,It seems I2P software support addresses that use uppercase characters but they make sure to convert them to lowercase before processing them everywhere. Take a look at this for example: https://github.com/i2p/i2p.i2p/blob/9ba86e86aa1f320a9ddbb644e09afcdf0d1b01ba/apps/i2ptunnel/java/src/net/i2p/i2ptunnel/I2PTunnelHTTPClient.java#L814  ,https://github.com/bitcoin/bitcoin/pull/20254#discussion_r544431918,544431918,src/netaddress.cpp
vasild,2020-12-29 13:05:22,"Added such a check, see https://github.com/bitcoin/bitcoin/pull/20685#discussion_r549161698 for details.",https://github.com/bitcoin/bitcoin/pull/20254#discussion_r549697298,549697298,src/netaddress.cpp
vasild,2020-12-29 13:28:34,"Done in https://github.com/bitcoin/bitcoin/pull/20685, thanks!",https://github.com/bitcoin/bitcoin/pull/20254#discussion_r549704629,549704629,src/netaddress.cpp
