jonasschnelli,2017-04-19T17:23:03Z,"Concept ACK.\nIdeally we should have been implemented this in the first place, but the code diff was already huge without this.",https://github.com/bitcoin/bitcoin/pull/10235#issuecomment-295354146,295354146,
NicolasDorier,2017-04-20T03:56:33Z,"I really like this PR. This is simpler than before, utACK. You should remove `KeypoolCountExternalKeys()` though.",https://github.com/bitcoin/bitcoin/pull/10235#issuecomment-295570829,295570829,
NicolasDorier,2017-04-20T03:59:06Z,"@jonasschnelli the line count is almost the same. But it was better to not break the reviews, this was already a big PR.",https://github.com/bitcoin/bitcoin/pull/10235#issuecomment-295571585,295571585,
TheBlueMatt,2017-05-05T21:49:06Z,Addressed @ryanofsky's comments and rebased.,https://github.com/bitcoin/bitcoin/pull/10235#issuecomment-299583821,299583821,
ryanofsky,2017-06-08T18:14:44Z,"@jonasschnelli, do you want to review this? It seems like it simplifies some things and could interact nicely with #10240 and #10238.",https://github.com/bitcoin/bitcoin/pull/10235#issuecomment-307184560,307184560,
jonasschnelli,2017-06-08T18:27:29Z,"Reviewed.\nutACK f4390a7c11d7bdaf772b2fd44ee11fdbc1b85d86 modulo nits (although merge seems okay at this stage).",https://github.com/bitcoin/bitcoin/pull/10235#issuecomment-307187956,307187956,
TheBlueMatt,2017-06-21T15:41:22Z,"Rebased and addressed all the comments, I believe.",https://github.com/bitcoin/bitcoin/pull/10235#issuecomment-310119776,310119776,
NicolasDorier,2017-06-22T01:37:28Z,utACK 435c2722289162f852090ca9f6a66df7392cf036,https://github.com/bitcoin/bitcoin/pull/10235#issuecomment-310251280,310251280,
TheBlueMatt,2017-07-10T17:45:00Z,Would be nice to get this for 15 to avoid some minor performance regressions.,https://github.com/bitcoin/bitcoin/pull/10235#issuecomment-314181349,314181349,
ryanofsky,2017-07-10T17:54:40Z,"> Would be nice to get this for 15 to avoid some minor performance regressions.\n\nThis seems like it could be merged now. I don't see anything that would hold it up.",https://github.com/bitcoin/bitcoin/pull/10235#issuecomment-314183984,314183984,
TheBlueMatt,2017-07-11T22:29:57Z,"@ryanofsky OK, I restored it closer to where it was. That code goes away in #10795 anyway.",https://github.com/bitcoin/bitcoin/pull/10235#issuecomment-314590538,314590538,
morcos,2017-07-12T20:13:12Z,"utACK bdf6ba8 \nassuming we also merge #10795 ",https://github.com/bitcoin/bitcoin/pull/10235#issuecomment-314883269,314883269,
sipa,2017-07-13T00:05:05Z,"utACK bdf6ba87dd1cb04d4aa33662287285a0481e78c4. I started reviewing the first commit, made two review comments, and your two further commits exactly fixed those issues :)",https://github.com/bitcoin/bitcoin/pull/10235#issuecomment-314931957,314931957,
sipa,2017-07-15T01:28:46Z,"utACK d40a72ccbb71d61b43cbf4d222ca2ab5d3ca7510, only change is the keypool size logging.",https://github.com/bitcoin/bitcoin/pull/10235#issuecomment-315500365,315500365,
morcos,2017-07-15T03:56:53Z,utACK d40a72c,https://github.com/bitcoin/bitcoin/pull/10235#issuecomment-315507396,315507396,
jonasschnelli,2017-07-18T08:25:39Z,Post merge ACK,https://github.com/bitcoin/bitcoin/pull/10235#issuecomment-315994326,315994326,
NicolasDorier,2017-04-20T03:41:17Z,I think you can also remove this one completely,https://github.com/bitcoin/bitcoin/pull/10235#discussion_r112359841,112359841,src/wallet/wallet.cpp
TheBlueMatt,2017-04-20T13:30:41Z,rpcwallet uses it? Might as well leave it.,https://github.com/bitcoin/bitcoin/pull/10235#discussion_r112453101,112453101,src/wallet/wallet.cpp
ryanofsky,2017-05-02T19:34:57Z,Having both `internal` and `fInternal` variables in the same scope with slightly different meanings seems error prone. Consider renaming one or both. I might go with `requestedInternal` and `actuallyInternal`.,https://github.com/bitcoin/bitcoin/pull/10235#discussion_r114405303,114405303,src/wallet/wallet.cpp
ryanofsky,2017-05-02T19:53:50Z,Could use iterator version of erase to avoid another lookup,https://github.com/bitcoin/bitcoin/pull/10235#discussion_r114409427,114409427,src/wallet/wallet.cpp
ryanofsky,2017-05-02T19:57:00Z,Maybe assert !setKeyPool.empty(),https://github.com/bitcoin/bitcoin/pull/10235#discussion_r114410071,114410071,src/wallet/wallet.cpp
ryanofsky,2017-05-02T20:06:49Z,"This new code doesn't seem equivalent to the old code. Previously, if HD_SPLIT were true but there were 0 internal keys, it would return current timestamp `now`. Now it will return oldest external key time. Also vice versa (swapping internal/external).",https://github.com/bitcoin/bitcoin/pull/10235#discussion_r114412095,114412095,src/wallet/wallet.cpp
ryanofsky,2017-05-10T16:54:12Z,"In commit ""Track keypool entries as internal vs external in memory""\n\nThe previous name `GetOldestKeyPoolTime` might be better name for this since it is returning a time.",https://github.com/bitcoin/bitcoin/pull/10235#discussion_r115794442,115794442,src/wallet/wallet.cpp
ryanofsky,2017-05-10T17:02:15Z,"In commit ""Track keypool entries as internal vs external in memory""\n\nYou could initialize this to `GetOldest(external)` to save a line of code and get rid of the -1 magic value.",https://github.com/bitcoin/bitcoin/pull/10235#discussion_r115796191,115796191,src/wallet/wallet.cpp
jonasschnelli,2017-06-08T18:16:39Z,"nit: `amountExternal` is not longer required, `setExternalKeyPool.size()` can be used directly at L2991+. ",https://github.com/bitcoin/bitcoin/pull/10235#discussion_r120961210,120961210,src/wallet/wallet.cpp
jonasschnelli,2017-06-08T18:21:37Z,Ideally `setKeyPool.erase()` happens after the DB read and HaveKey/fInternal check? No?,https://github.com/bitcoin/bitcoin/pull/10235#discussion_r120962511,120962511,src/wallet/wallet.cpp
jonasschnelli,2017-06-08T18:22:52Z,Maybe `GetOldestKeyBirthdayInPool` or `GetOldestKeyTimeInPool`,https://github.com/bitcoin/bitcoin/pull/10235#discussion_r120962818,120962818,src/wallet/wallet.cpp
TheBlueMatt,2017-06-21T15:39:40Z,"If there are any issues with that key, best to get it out of the pool so that future calls succeed (though, really, those should be fatal StartShutdown() issues, not just runtime_errors that the RPC interface will return).",https://github.com/bitcoin/bitcoin/pull/10235#discussion_r123286116,123286116,src/wallet/wallet.cpp
laanwj,2017-07-11T15:55:47Z,"This looks really strange, why the infix subtract to an iterator here?\n",https://github.com/bitcoin/bitcoin/pull/10235#discussion_r126732354,126732354,src/wallet/wallet.cpp
ryanofsky,2017-07-11T17:56:18Z,s/uint64_t/int64_t/,https://github.com/bitcoin/bitcoin/pull/10235#discussion_r126763006,126763006,src/wallet/wallet.cpp
morcos,2017-07-12T20:07:09Z,nit: print external and internal sizes or only size for keypool you're adding to,https://github.com/bitcoin/bitcoin/pull/10235#discussion_r127057751,127057751,src/wallet/wallet.cpp
TheBlueMatt,2017-07-14T15:20:01Z,Done,https://github.com/bitcoin/bitcoin/pull/10235#discussion_r127481399,127481399,src/wallet/wallet.cpp
