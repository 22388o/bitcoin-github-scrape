[
  {
    "sha": "9ba7c44265a47880585e39d0167d057ba935ff16",
    "node_id": "C_kwDOABII59oAKDliYTdjNDQyNjVhNDc4ODA1ODVlMzlkMDE2N2QwNTdiYTkzNWZmMTY",
    "commit": {
      "author": {
        "name": "Michael Dietz",
        "email": "michael.dietz@waya.ai",
        "date": "2021-10-29T03:03:37Z"
      },
      "committer": {
        "name": "Michael Dietz",
        "email": "michael.dietz@waya.ai",
        "date": "2021-10-29T14:36:32Z"
      },
      "message": "refactor: get wallet path relative to wallet_dir\n\nNow that boost has been updated > 1.60, we can simplify how we get\nwallet path relative to wallet_dir by using:\n`boost::filesystem::lexically_relative`",
      "tree": {
        "sha": "10878331898a85026fff49d5d767837b51a752f2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/10878331898a85026fff49d5d767837b51a752f2"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9ba7c44265a47880585e39d0167d057ba935ff16",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEENKwpEUV32QrrIOeYc3/VzfHRRrkFAmF8BvwACgkQc3/VzfHR\nRrm3bw//eXlyk1GAdqh7jkCTFPooPQN5Y8Q5zhrgNdU5uW8Hawg09+gg2RFIrsgm\n+KA7a+vCDkqJqmNeiuN4vmsUZR1Dbqvc61rtSNzi10zMfX1Fery095atdMS+1pBD\nzKOzigs9mh1ILrN3M0xvzSQJFtVQyfF0cSmnKXqPQ/IaiiGv9ZVbVe3dpooPRK52\n2FzBh895BOxIviSOfeKZw4WXB9XI0Zx5LaUsdPJ/BW7ot4Ydc66BLBp9i+A0bikO\n4CjJu3XIxqLzRfaFY0gqQ5f/3YpYLghDw6yI8c61QmpQbCjw05yzslQD+2epjPzp\nTIrEF9f0cCU28AxJmtLBefinh6qMGYsdSqR1Jw4vHbd2AdQmz4YGgpI+rc7DVADx\nsfd47HjH32M3beti4yddzaBVr5uum+mmI12Pm6Ui2sfg6epvIoSpdEpNcZJ8UlIh\nI01QztUn0TRlPXX10APlWTa5TD6X9FSRgHRZwRAA6ABYpEVDXccQ0X9ag++Jnhmy\nFiiHGPl9pp0WuP4XdWx5+x6+a0o+sFfjZBGkFh7zdq5ioQ4DxKwzPTvOyRgLtZH+\naPwLYRuEvkLk7sLkCT9H7/s1KvZRM/9GdgKAmaOj9iaLHLihMK1FGIxoToTJnClp\nTikRrJA8WSIvUvEGlLLC+VF9JkSBD2qk+WWyzAIHkoafqMk1X6Y=\n=hG45\n-----END PGP SIGNATURE-----",
        "payload": "tree 10878331898a85026fff49d5d767837b51a752f2\nparent ab25ef8c7f767258d5fe44f53b35ad8bd51ed5cd\nauthor Michael Dietz <michael.dietz@waya.ai> 1635476617 -0500\ncommitter Michael Dietz <michael.dietz@waya.ai> 1635518192 -0500\n\nrefactor: get wallet path relative to wallet_dir\n\nNow that boost has been updated > 1.60, we can simplify how we get\nwallet path relative to wallet_dir by using:\n`boost::filesystem::lexically_relative`\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9ba7c44265a47880585e39d0167d057ba935ff16",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/9ba7c44265a47880585e39d0167d057ba935ff16",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9ba7c44265a47880585e39d0167d057ba935ff16/comments",
    "author": {
      "login": "mjdietzx",
      "id": 7217256,
      "node_id": "MDQ6VXNlcjcyMTcyNTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7217256?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mjdietzx",
      "html_url": "https://github.com/mjdietzx",
      "followers_url": "https://api.github.com/users/mjdietzx/followers",
      "following_url": "https://api.github.com/users/mjdietzx/following{/other_user}",
      "gists_url": "https://api.github.com/users/mjdietzx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mjdietzx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mjdietzx/subscriptions",
      "organizations_url": "https://api.github.com/users/mjdietzx/orgs",
      "repos_url": "https://api.github.com/users/mjdietzx/repos",
      "events_url": "https://api.github.com/users/mjdietzx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mjdietzx/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "mjdietzx",
      "id": 7217256,
      "node_id": "MDQ6VXNlcjcyMTcyNTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7217256?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mjdietzx",
      "html_url": "https://github.com/mjdietzx",
      "followers_url": "https://api.github.com/users/mjdietzx/followers",
      "following_url": "https://api.github.com/users/mjdietzx/following{/other_user}",
      "gists_url": "https://api.github.com/users/mjdietzx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mjdietzx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mjdietzx/subscriptions",
      "organizations_url": "https://api.github.com/users/mjdietzx/orgs",
      "repos_url": "https://api.github.com/users/mjdietzx/repos",
      "events_url": "https://api.github.com/users/mjdietzx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mjdietzx/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "ab25ef8c7f767258d5fe44f53b35ad8bd51ed5cd",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ab25ef8c7f767258d5fe44f53b35ad8bd51ed5cd",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/ab25ef8c7f767258d5fe44f53b35ad8bd51ed5cd"
      }
    ],
    "stats": {
      "total": 6,
      "additions": 1,
      "deletions": 5
    },
    "files": [
      {
        "sha": "305f6c31fcfb6ede58fcc9e199cc724b2c65b560",
        "filename": "src/wallet/db.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 5,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/9ba7c44265a47880585e39d0167d057ba935ff16/src/wallet/db.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/9ba7c44265a47880585e39d0167d057ba935ff16/src/wallet/db.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/db.cpp?ref=9ba7c44265a47880585e39d0167d057ba935ff16",
        "patch": "@@ -12,7 +12,6 @@\n \n std::vector<fs::path> ListDatabases(const fs::path& wallet_dir)\n {\n-    const size_t offset = wallet_dir.native().size() + (wallet_dir == wallet_dir.root_name() ? 0 : 1);\n     std::vector<fs::path> paths;\n     boost::system::error_code ec;\n \n@@ -28,10 +27,7 @@ std::vector<fs::path> ListDatabases(const fs::path& wallet_dir)\n         }\n \n         try {\n-            // Get wallet path relative to walletdir by removing walletdir from the wallet path.\n-            // This can be replaced by boost::filesystem::lexically_relative once boost is bumped to 1.60.\n-            const auto path_str = it->path().native().substr(offset);\n-            const fs::path path{path_str.begin(), path_str.end()};\n+            const fs::path path{it->path().lexically_relative(wallet_dir)};\n \n             if (it->status().type() == fs::directory_file &&\n                 (IsBDBFile(BDBDataFile(it->path())) || IsSQLiteFile(SQLiteDataFile(it->path())))) {"
      }
    ]
  }
]