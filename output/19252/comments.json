[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/643558529",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19252#issuecomment-643558529",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19252",
    "id": 643558529,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MzU1ODUyOQ==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-13T02:56:47Z",
    "updated_at": "2020-06-16T22:43:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #19134 (test: Replace global wait_until with BitcoinTestFramework.wait_until and mininode.wait_until by dboures)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/643558529/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/643651533",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19252#issuecomment-643651533",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19252",
    "id": 643651533,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MzY1MTUzMw==",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?u=3e27bc6589085f3450be1b0e969d04008cc77565&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-13T17:13:50Z",
    "updated_at": "2020-06-13T17:13:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jonatack addressed your comments on #19083 in [`afad631`](https://github.com/bitcoin/bitcoin/pull/19252/commits/afad631b1c48e475eba85053332fa9e3b62f9478) if you have time to take a look :)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/643651533/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/643789840",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19252#issuecomment-643789840",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19252",
    "id": 643789840,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0Mzc4OTg0MA==",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?u=3f68150a5f30acd541d1ed279376cd20b78046b1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-14T16:28:46Z",
    "updated_at": "2020-06-14T16:28:46Z",
    "author_association": "MEMBER",
    "body": "(The number of test run samples is too small, but it might be interesting to look further into it.)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/643789840/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/644256756",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19252#issuecomment-644256756",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19252",
    "id": 644256756,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NDI1Njc1Ng==",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?u=3e27bc6589085f3450be1b0e969d04008cc77565&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-15T17:05:23Z",
    "updated_at": "2020-06-15T17:06:19Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Concern: possible slowdown in test run times of ~10% in tests with `wait_for_disconnect`.\r\n\r\nHm :/ that slowdown seems pretty significant. I've thought of 2 possible solutions:\r\n\r\n1. What about an optional argument `wait_for_disconnect`, then allowing tests to decide if waiting isn't necessary (similar to `wait_for_verack` in `add_p2p_connection`)? \r\n2. I've also noticed that `disconnect_p2ps` is pretty over-used.\r\nFor example, looks like p2p_invalid_messages.py slowed down by 23 seconds, probably because it calls `disconnect_p2ps` 10+ times. But actually, that test (and many others) wouldn't need to wait or even call `disconnect_p2ps` if it just didn't use `node.p2p`. [Here](https://github.com/gzhao408/bitcoin/blob/remove-unnecessary-disconnect-p2ps/test/functional/p2p_invalid_messages.py) is a refactored p2p_invalid_messages.py without any `disconnect_p2ps`.\r\n\r\nIt's a common pattern to test using multiple mininodes, one at a time, and call `disconnect_p2ps` at the end to make sure they don't affect each other. In general, the `p2p` property is [supposed to be](https://github.com/bitcoin/bitcoin/blob/1c86ed41483471929840eec09b93d7de3a4aeacf/test/functional/test_framework/test_node.py#L547) a shortcut for `node.p2ps[0]` when tests only use 1 mininode. \r\n\r\nThus, I think it would be better to use `conn = node.add_p2p_connection()` and then use `conn` to refer to the mininode. We could take out a lot of unnecessary `disconnect_p2ps` to reduce the performance issue. But it would be a pretty big diff.\r\n\r\nWhat I suggest, for this PR, is to add a default `wait_for_disconnect=False` and then make it True for all the tests that need to wait (i.e. the ones I'm already touching here, and I'll search through the tests to see if any others need it). Would that be a good idea?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/644256756/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/644268610",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19252#issuecomment-644268610",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19252",
    "id": 644268610,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NDI2ODYxMA==",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?u=3f68150a5f30acd541d1ed279376cd20b78046b1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-15T17:29:54Z",
    "updated_at": "2020-06-15T17:29:54Z",
    "author_association": "MEMBER",
    "body": "@gzhao408 I've been reworking `p2p_invalid_messages.py` lately in #19272. I'll apply this patch to it and test avoiding `disconnect_p2ps`.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/644268610/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/644428355",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19252#issuecomment-644428355",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19252",
    "id": 644428355,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NDQyODM1NQ==",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?u=3e27bc6589085f3450be1b0e969d04008cc77565&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-15T22:48:09Z",
    "updated_at": "2020-06-15T22:48:09Z",
    "author_association": "CONTRIBUTOR",
    "body": "Ok, I made waiting optional/default False which should theoretically make a good dent in the performance problems. Went through and added a couple `wait_for_disconnect=True`s to where I think it's needed. \r\nI accidentally left the PR link in the https://github.com/bitcoin/bitcoin/pull/19252/commits/81e82070b7c37b2a73e985bdef11e2bcb902d48c commit message, so I'll fix with next round of edits. Otherwise it's ready for another look :)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/644428355/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/644442680",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19252#issuecomment-644442680",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19252",
    "id": 644442680,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NDQ0MjY4MA==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-15T23:29:11Z",
    "updated_at": "2020-06-15T23:29:11Z",
    "author_association": "MEMBER",
    "body": "Maybe the node.p2p property should be removed if it is causing so much trouble and complexity. There should be no downside to removing it unless I am missing something. Moreover, writing `conn = add_conn()` everywhere (even in the case of only one peer) even seems preferable for consistency anyway. Also, it is making code more clear at negative cost in complexity, since a reviewer/author doesn't have to look up what the property does.\r\n\r\nIf a connection is used in multiple sub-tests, a member variable could be used like `self.conn = add_conn()`.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/644442680/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/644467904",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19252#issuecomment-644467904",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19252",
    "id": 644467904,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NDQ2NzkwNA==",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-16T00:59:51Z",
    "updated_at": "2020-06-16T00:59:51Z",
    "author_association": "MEMBER",
    "body": "@jonatack your test runs seem extraordinarily slow. Are you running under bitcoind with some additional debug instrumentation?\r\n\r\nHere are the same tests in my vm for comparison:\r\n\r\n<details><summary>test run times</summary><p>\r\n\r\nMaster:\r\n\r\n```\r\n1/11 - p2p_dos_header_tree.py passed, Duration: 2 s\r\n2/11 - p2p_blocksonly.py passed, Duration: 3 s\r\n3/11 - p2p_invalid_locator.py passed, Duration: 2 s\r\n4/11 - p2p_leak.py passed, Duration: 6 s\r\n5/11 - p2p_blockfilters.py passed, Duration: 11 s\r\n6/11 - p2p_nobloomfilter_messages.py passed, Duration: 1 s\r\n7/11 - p2p_node_network_limited.py passed, Duration: 9 s\r\nRemaining jobs: [feature_maxuploadtarget.py, p2p_invalid_messages.py, p2p_sendheaders.py, p2p_unrequested_blocks.py]\r\n8/11 - p2p_unrequested_blocks.py passed, Duration: 4 s\r\nRemaining jobs: [feature_maxuploadtarget.py, p2p_invalid_messages.py, p2p_sendheaders.py]\r\n9/11 - p2p_sendheaders.py passed, Duration: 13 s\r\nRemaining jobs: [feature_maxuploadtarget.py, p2p_invalid_messages.py]\r\n10/11 - p2p_invalid_messages.py passed, Duration: 28 s\r\nRemaining jobs: [feature_maxuploadtarget.py]\r\n11/11 - feature_maxuploadtarget.py passed, Duration: 69 s                \r\n\r\nTEST                          | STATUS    | DURATION\r\n\r\nfeature_maxuploadtarget.py    | \u2713 Passed  | 69 s\r\np2p_blockfilters.py           | \u2713 Passed  | 11 s\r\np2p_blocksonly.py             | \u2713 Passed  | 3 s\r\np2p_dos_header_tree.py        | \u2713 Passed  | 2 s\r\np2p_invalid_locator.py        | \u2713 Passed  | 2 s\r\np2p_invalid_messages.py       | \u2713 Passed  | 28 s\r\np2p_leak.py                   | \u2713 Passed  | 6 s\r\np2p_nobloomfilter_messages.py | \u2713 Passed  | 1 s\r\np2p_node_network_limited.py   | \u2713 Passed  | 9 s\r\np2p_sendheaders.py            | \u2713 Passed  | 13 s\r\np2p_unrequested_blocks.py     | \u2713 Passed  | 4 s\r\n\r\nALL                           | \u2713 Passed  | 148 s (accumulated) \r\n```\r\n\r\nThis branch (with the default `wait_for_disconnect` set to `True`):\r\n\r\n```\r\nTEST                          | STATUS    | DURATION\r\n\r\nfeature_maxuploadtarget.py    | \u2713 Passed  | 62 s\r\np2p_blockfilters.py           | \u2713 Passed  | 13 s\r\np2p_blocksonly.py             | \u2713 Passed  | 6 s\r\np2p_dos_header_tree.py        | \u2713 Passed  | 3 s\r\np2p_invalid_locator.py        | \u2713 Passed  | 2 s\r\np2p_invalid_messages.py       | \u2713 Passed  | 27 s\r\np2p_leak.py                   | \u2713 Passed  | 7 s\r\np2p_nobloomfilter_messages.py | \u2713 Passed  | 1 s\r\np2p_node_network_limited.py   | \u2713 Passed  | 9 s\r\np2p_sendheaders.py            | \u2713 Passed  | 13 s\r\np2p_unrequested_blocks.py     | \u2713 Passed  | 4 s\r\n\r\nALL                           | \u2713 Passed  | 147 s (accumulated) \r\nRuntime: 62 s\r\n```\r\n</details>\r\n\r\nso with a sample size of 1, there' no observable difference.\r\n\r\nIf your bitcoinds are generally slow, then disconnecting peers may be slow, but generally it should be pretty quick and not contribute to test times significantly.\r\n\r\nI think this needs more testing, but if others are able to replicate my results, then I'd vote for not adding the `wait_for_disconnect` parameter and keeping this simple.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/644467904/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/644530432",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19252#issuecomment-644530432",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19252",
    "id": 644530432,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NDUzMDQzMg==",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?u=3f68150a5f30acd541d1ed279376cd20b78046b1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-16T04:55:05Z",
    "updated_at": "2020-06-16T04:58:55Z",
    "author_association": "MEMBER",
    "body": "Isolated the issue :facepalm: Rebasing this PR onto 49236be or current master, `p2p_invalid_messages` runs much faster, with or without this change. John's PR made a huge improvement in its run time.\r\n\r\nre-ACK 628227ff8b0409546a0176a39a5491c069749fef (without the extra param)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/644530432/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/645024297",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19252#issuecomment-645024297",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19252",
    "id": 645024297,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NTAyNDI5Nw==",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?u=3e27bc6589085f3450be1b0e969d04008cc77565&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-16T21:35:10Z",
    "updated_at": "2020-06-16T21:35:10Z",
    "author_association": "CONTRIBUTOR",
    "body": "Rebased and addressed comments. Got rid of `wait_for_disconnect` \ud83d\ude42 \r\n<details>\r\n<summary>My run times \u00af\\_(\u30c4)_/\u00af </summary>\r\n\r\nMaster:\r\n\r\n```\r\nTEST                          | STATUS    | DURATION\r\n\r\nfeature_maxuploadtarget.py    | \u2713 Passed  | 66 s\r\np2p_blockfilters.py           | \u2713 Passed  | 28 s\r\np2p_blocksonly.py             | \u2713 Passed  | 9 s\r\np2p_dos_header_tree.py        | \u2713 Passed  | 6 s\r\np2p_invalid_locator.py        | \u2713 Passed  | 2 s\r\np2p_invalid_messages.py       | \u2713 Passed  | 10 s\r\np2p_leak.py                   | \u2713 Passed  | 7 s\r\np2p_nobloomfilter_messages.py | \u2713 Passed  | 4 s\r\np2p_node_network_limited.py   | \u2713 Passed  | 10 s\r\np2p_sendheaders.py            | \u2713 Passed  | 17 s\r\np2p_unrequested_blocks.py     | \u2713 Passed  | 5 s\r\n\r\nALL                           | \u2713 Passed  | 164 s (accumulated) \r\nRuntime: 66 s\r\n```\r\n\r\nThis branch:\r\n\r\n```\r\nTEST                          | STATUS    | DURATION\r\n\r\nfeature_maxuploadtarget.py    | \u2713 Passed  | 67 s\r\np2p_blockfilters.py           | \u2713 Passed  | 18 s\r\np2p_blocksonly.py             | \u2713 Passed  | 9 s\r\np2p_dos_header_tree.py        | \u2713 Passed  | 6 s\r\np2p_invalid_locator.py        | \u2713 Passed  | 3 s\r\np2p_invalid_messages.py       | \u2713 Passed  | 11 s\r\np2p_leak.py                   | \u2713 Passed  | 7 s\r\np2p_nobloomfilter_messages.py | \u2713 Passed  | 3 s\r\np2p_node_network_limited.py   | \u2713 Passed  | 11 s\r\np2p_sendheaders.py            | \u2713 Passed  | 15 s\r\np2p_unrequested_blocks.py     | \u2713 Passed  | 5 s\r\n\r\nALL                           | \u2713 Passed  | 155 s (accumulated) \r\nRuntime: 67 s\r\n```\r\n</details>\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/645024297/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/645243466",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19252#issuecomment-645243466",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19252",
    "id": 645243466,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NTI0MzQ2Ng==",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?u=3f68150a5f30acd541d1ed279376cd20b78046b1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-17T08:49:04Z",
    "updated_at": "2020-06-17T08:49:04Z",
    "author_association": "MEMBER",
    "body": "Code review ACK 9a40cfc from re-reviewing the diff and `git range-diff 5cafb46 8386ad5 9a40cfc`",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/645243466/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/645287796",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19252#issuecomment-645287796",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19252",
    "id": 645287796,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NTI4Nzc5Ng==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-17T10:19:44Z",
    "updated_at": "2020-06-17T10:19:44Z",
    "author_association": "MEMBER",
    "body": "ACK 9a40cfc558b3f7fa4fff1270f969582af17479a5 \ud83d\udc02\r\n\r\n<details><summary>Show signature and timestamp</summary>\r\n\r\nSignature:\r\n\r\n```\r\n-----BEGIN PGP SIGNED MESSAGE-----\r\nHash: SHA512\r\n\r\nACK 9a40cfc558b3f7fa4fff1270f969582af17479a5 \ud83d\udc02\r\n-----BEGIN PGP SIGNATURE-----\r\n\r\niQGzBAEBCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\r\npUi2dgv+OVPePBmXNQ90EcBVrvDet1CHNODyKbSS713qREEOfhwi9KN+2pU3eAcy\r\ndLfsOWCEe1QSlT+OXDXmjYnQon7OI4U3+KMIiaPW3wV/jcPMkP6TcrwIRzlDYmt9\r\nKw81TTq6rjKByYnib5MNy4JP/tFBxcw822JxfkqV8lCwWyiPg6LANzP8fIg8kU9L\r\neb8bmDN1nzDrPEHdNrcWJG7byWNFIwCuScCZGXUlWnuDVj+HKU1n6vLN+v5O4Gj+\r\nNHYKWvSMa/+rLfyh/d13/f92HYObTnrNuHG4/6Wk4hszXgA16SivFfwrTIeewGMG\r\n0jcr49IcOAmMxnUiSLCEYba1f/weM4Kt0iDC6ryRoLyYsnEoQ3TJ8tEEQQCOKng1\r\ny8VvvHeI3r4Y3A0ELUWNe3qVtySozLDo+zR3dop04iBUD/DIZBOlUNIqZLGYn9Xa\r\n22FEWJbQF2EpTJX+vze9Wz9OfhnZTiVJRcqCoTCUcdBqPov9mES+xt0x0il7CsWv\r\nFwlNXkKL\r\n=60oC\r\n-----END PGP SIGNATURE-----\r\n```\r\n\r\n[Timestamp of file with hash `60c563acc039d017e59fc85afcc06dea3c4ec236d394ece2f361f3fc7252dfb6  -`](https://opentimestamps.org/info/?004f70656e54696d657374616d7073000050726f6f6600bf89e2e884e89294010860c563acc039d017e59fc85afcc06dea3c4ec236d394ece2f361f3fc7252dfb6f01077b33c8ad3a93c80c9e189f4ee14081308fff01027934ac79adf0ec1a71af9da84a8e72608f1045ee9ee36f008cb8ebcdeecb411c80083dfe30d2ef90c8e292868747470733a2f2f66696e6e65792e63616c656e6461722e657465726e69747977616c6c2e636f6dfff0107335c9aaccb1906161fcf8d7e5d06bcf08f1045ee9ee36f00842d7ef714ec146f40083dfe30d2ef90c8e2e2d68747470733a2f2f616c6963652e6274632e63616c656e6461722e6f70656e74696d657374616d70732e6f7267fff010b4a292f1b07b9cb23ae71e3c936ad0ce08f1045ee9ee36f008f0228e5613b98f8d0083dfe30d2ef90c8e2c2b68747470733a2f2f626f622e6274632e63616c656e6461722e6f70656e74696d657374616d70732e6f7267f010dce041a7511ce79bc23d48fe7f1e05a908f1045ee9ee36f008952a150a2afab7260083dfe30d2ef90c8e232268747470733a2f2f6274632e63616c656e6461722e636174616c6c6178792e636f6d)\r\n\r\n</details>\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/645287796/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/439781009",
    "pull_request_review_id": 430179238,
    "id": 439781009,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MTAwOQ==",
    "diff_hunk": "@@ -549,11 +550,17 @@ def p2p(self):\n         assert self.p2ps, self._node_msg(\"No p2p connection\")\n         return self.p2ps[0]\n \n+    def num_connected_mininodes(self):\n+        \"\"\"Return number of p2ps that are connected to the node. Excludes test nodes.\"\"\"\n+        peer_subversions = [peer['subver'] for peer in self.getpeerinfo()]\n+        return peer_subversions.count(MY_SUBVERSION)",
    "path": "test/functional/test_framework/test_node.py",
    "position": null,
    "original_position": 15,
    "commit_id": "9a40cfc558b3f7fa4fff1270f969582af17479a5",
    "original_commit_id": "628227ff8b0409546a0176a39a5491c069749fef",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Alternatively, use a conditional in the list comprehension:\r\n\r\n```\r\nreturn len([peer for peer in self.getpeerinfo() if peer['subver'] == MY_SUBVERSION])\r\n```\r\n\r\nI think that's slightly clearer, but it's probably just a personal preference thing.",
    "created_at": "2020-06-14T00:47:01Z",
    "updated_at": "2020-06-16T15:56:21Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19252#discussion_r439781009",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19252",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/439781009"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19252#discussion_r439781009"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19252"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/439781009/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": 555,
    "start_side": "RIGHT",
    "line": null,
    "original_line": 556,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/439781078",
    "pull_request_review_id": 430179238,
    "id": 439781078,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MTA3OA==",
    "diff_hunk": "@@ -549,11 +550,17 @@ def p2p(self):\n         assert self.p2ps, self._node_msg(\"No p2p connection\")\n         return self.p2ps[0]\n \n+    def num_connected_mininodes(self):\n+        \"\"\"Return number of p2ps that are connected to the node. Excludes test nodes.\"\"\"",
    "path": "test/functional/test_framework/test_node.py",
    "position": null,
    "original_position": 13,
    "commit_id": "9a40cfc558b3f7fa4fff1270f969582af17479a5",
    "original_commit_id": "628227ff8b0409546a0176a39a5491c069749fef",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I think this would be slightly more concise if you say what you *are* counting (rather than saying what you're excluding):\r\n\r\n```suggestion\r\n        \"\"\"Return number of test framework p2p connections to the node.\"\"\"\r\n```",
    "created_at": "2020-06-14T00:48:43Z",
    "updated_at": "2020-06-16T15:56:21Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19252#discussion_r439781078",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19252",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/439781078"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19252#discussion_r439781078"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19252"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/439781078/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 554,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/440728663",
    "pull_request_review_id": 431342623,
    "id": 440728663,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDcyODY2Mw==",
    "diff_hunk": "@@ -549,11 +550,17 @@ def p2p(self):\n         assert self.p2ps, self._node_msg(\"No p2p connection\")\n         return self.p2ps[0]\n \n-    def disconnect_p2ps(self):\n+    def num_connected_mininodes(self):\n+        \"\"\"Return number of test framework p2p connections to the node.\"\"\"\n+        return len([peer for peer in self.getpeerinfo() if peer['subver'] == MY_SUBVERSION])\n+\n+    def disconnect_p2ps(self, wait_for_disconnect=False):",
    "path": "test/functional/test_framework/test_node.py",
    "position": null,
    "original_position": 17,
    "commit_id": "9a40cfc558b3f7fa4fff1270f969582af17479a5",
    "original_commit_id": "8386ad52e99eb6ba99f6f3a2eb9de49a6a76df4f",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Also agree with John that this should not be a configurable parameter to keep the complexity down",
    "created_at": "2020-06-16T09:52:22Z",
    "updated_at": "2020-06-16T15:56:21Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19252#discussion_r440728663",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19252",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/440728663"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19252#discussion_r440728663"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19252"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/440728663/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 557,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/440935519",
    "pull_request_review_id": 431621418,
    "id": 440935519,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDkzNTUxOQ==",
    "diff_hunk": "@@ -549,11 +550,17 @@ def p2p(self):\n         assert self.p2ps, self._node_msg(\"No p2p connection\")\n         return self.p2ps[0]\n \n-    def disconnect_p2ps(self):\n+    def num_connected_mininodes(self):\n+        \"\"\"Return number of test framework p2p connections to the node.\"\"\"\n+        return len([peer for peer in self.getpeerinfo() if peer['subver'] == MY_SUBVERSION])\n+\n+    def disconnect_p2ps(self, wait_for_disconnect=False):",
    "path": "test/functional/test_framework/test_node.py",
    "position": null,
    "original_position": 17,
    "commit_id": "9a40cfc558b3f7fa4fff1270f969582af17479a5",
    "original_commit_id": "8386ad52e99eb6ba99f6f3a2eb9de49a6a76df4f",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Ok! \ud83d\udc4d  will update with the rebase since it seems like the performance issue isn't too bad",
    "created_at": "2020-06-16T15:19:57Z",
    "updated_at": "2020-06-16T15:56:21Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19252#discussion_r440935519",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19252",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/440935519"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19252#discussion_r440935519"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19252"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/440935519/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 557,
    "side": "RIGHT",
    "in_reply_to_id": 440728663
  }
]