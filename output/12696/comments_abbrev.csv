eklitzke,2018-03-15T16:45:24Z,"Apparently macOS erroneously reports that it has `fdatasync()`, discussion here: https://github.com/haskell/unix/issues/37",https://github.com/bitcoin/bitcoin/pull/12696#issuecomment-373444063,373444063,
donaloconnor,2018-03-15T22:13:33Z,Just in case (I'm not very familiar with this part of Bitcoin): is there a reason this isn't done for the undo data also? If it makes sense there then maybe it's okay to do it once at the end of the function instead of in both?,https://github.com/bitcoin/bitcoin/pull/12696#issuecomment-373539720,373539720,
eklitzke,2018-03-16T08:58:09Z,"While I was looking at this again (originally to commit the undo data as @donaloconnor  suggested) I decided it would be nice if we could only sync the parent directory if we know there's actually a new block file on disk. The block files are 128 MB, so most of the time we're flushing we don't need to sync the parent directory.\n\nThe full logic for all of the paths that can cause a file to be c",https://github.com/bitcoin/bitcoin/pull/12696#issuecomment-373646326,373646326,
fanquake,2018-07-25T15:01:10Z,"Closing with `""Up for grabs""`.",https://github.com/bitcoin/bitcoin/pull/12696#issuecomment-407785762,407785762,
promag,2018-03-15T21:02:59Z,"nit, `fs:path& dirname`. The same in the implementation.",https://github.com/bitcoin/bitcoin/pull/12696#discussion_r174931724,174931724,src/util.h
ryanofsky,2018-03-22T14:38:05Z,"Realize you are currently working on this, but if you decide to go with this code as is, you should definitely comment here that call this isn't needed in the case where new files aren't being added, in case somebody wants to try to optimize this later.",https://github.com/bitcoin/bitcoin/pull/12696#discussion_r176443544,176443544,src/validation.cpp
ryanofsky,2018-03-22T14:43:15Z,"You aren't changing this, but it would be nice if these functions returned errors so failures could be logged.",https://github.com/bitcoin/bitcoin/pull/12696#discussion_r176445438,176445438,src/util.cpp
luke-jr,2018-06-12T16:29:17Z,"Is `fsync` really enough here, or should we be calling `FileCommit` on it?",https://github.com/bitcoin/bitcoin/pull/12696#discussion_r194806284,194806284,src/util.cpp
luke-jr,2018-06-12T16:30:26Z,Won't it be a reasonably fast noop if the directory hasn't changed?,https://github.com/bitcoin/bitcoin/pull/12696#discussion_r194806659,194806659,src/validation.cpp
