gmaxwell,2018-11-25T21:17:22Z,"<3  I like this direction, certainly having a RPC that requires txindex is unfortunate, as does having rpcs that don't work (well) with pruning.  I don't think it would have been worth it to store extra data to make stats fast, but since we already are...",https://github.com/bitcoin/bitcoin/pull/14802#issuecomment-441474132,441474132,
DrahtBot,2018-11-25T23:25:24Z,<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.,https://github.com/bitcoin/bitcoin/pull/14802#issuecomment-441483494,441483494,
jonasschnelli,2018-12-09T23:21:00Z,"Clever idea!\nConcept ACK",https://github.com/bitcoin/bitcoin/pull/14802#issuecomment-445583342,445583342,
ajtowns,2019-01-02T00:17:56Z,"ConceptACK, code looks good at first glance",https://github.com/bitcoin/bitcoin/pull/14802#issuecomment-450767760,450767760,
laanwj,2019-01-22T13:00:17Z,"Good to remove reliance on the transaction index.\nutACK 602dd542a80d76225285ad9d52ebfc2a4d4e7c54\n",https://github.com/bitcoin/bitcoin/pull/14802#issuecomment-456390754,456390754,
MarcoFalke,2019-03-25T17:04:17Z,@FelixWeis Are you still working on this?,https://github.com/bitcoin/bitcoin/pull/14802#issuecomment-476290636,476290636,
jonasschnelli,2019-04-17T05:40:48Z,Don't let this go down unmaintained... please pick this up @FelixWeis,https://github.com/bitcoin/bitcoin/pull/14802#issuecomment-483944488,483944488,
MarcoFalke,2019-05-03T12:55:59Z,"@FelixWeis You don't actually need to rebase. If you address my style-nits, the conflict will solve itself.",https://github.com/bitcoin/bitcoin/pull/14802#issuecomment-489085694,489085694,
MarcoFalke,2019-05-10T12:18:39Z,Please squash your commits according to https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#squashing-commits,https://github.com/bitcoin/bitcoin/pull/14802#issuecomment-491268848,491268848,
MarcoFalke,2019-05-10T17:19:55Z,"re-utACK d20d7567528e216badb8475df298bb3cec008985\n\nOnly changes are:\n* Make tests more deterministic\n* Add and use GetUndoChecked\n* Minor stylistic changes\n\n<details><summary>Show signature and timestamp</summary>\n\nSignature:\n\n```\n-----BEGIN PGP SIGNED MESSAGE-----\nHash: SHA512\n\nre-utACK d20d7567528e216badb8475df298bb3cec008985\n\nOnly changes are:\n* Make tests mo",https://github.com/bitcoin/bitcoin/pull/14802#issuecomment-491365336,491365336,
MarcoFalke,2018-11-25T22:59:46Z,"The getblockstats code seems to no longer call into any txindex code (not even as fallback), so might as well remove the txindexed node from the whole test?",https://github.com/bitcoin/bitcoin/pull/14802#discussion_r236094841,236094841,test/functional/rpc_getblockstats.py
promag,2018-11-26T12:00:45Z,Could split move only to a different commit.,https://github.com/bitcoin/bitcoin/pull/14802#discussion_r236226425,236226425,src/validation.cpp
promag,2018-11-26T12:01:36Z,Remove change.,https://github.com/bitcoin/bitcoin/pull/14802#discussion_r236226765,236226765,src/validation.h
FelixWeis,2019-02-09T05:21:37Z,test and testdata changed,https://github.com/bitcoin/bitcoin/pull/14802#discussion_r255288234,255288234,test/functional/rpc_getblockstats.py
FelixWeis,2019-02-09T05:22:03Z,it will get squashed anyway no?,https://github.com/bitcoin/bitcoin/pull/14802#discussion_r255288240,255288240,src/validation.cpp
MarcoFalke,2019-02-09T14:40:50Z,style-nit: Could use a forward decl instead?,https://github.com/bitcoin/bitcoin/pull/14802#discussion_r255300668,255300668,src/validation.h
marcinja,2019-02-14T01:21:23Z,"nit: This could be `throw JSONRPCError` to stay consistent with `GetBlockChecked` and most of the other functions in this file. I'm not sure if there is a preferred approach though, so feel free to ignore.",https://github.com/bitcoin/bitcoin/pull/14802#discussion_r256658400,256658400,src/rpc/blockchain.cpp
marcinja,2019-02-14T02:03:47Z,nit: This should be a full sentence. ,https://github.com/bitcoin/bitcoin/pull/14802#discussion_r256666262,256666262,doc/release-notes.md
MarcoFalke,2019-03-02T14:19:27Z,And a separate file `./doc/release-notes-14802.md`,https://github.com/bitcoin/bitcoin/pull/14802#discussion_r261828570,261828570,doc/release-notes.md
MarcoFalke,2019-03-19T18:49:13Z,"looks fragile. (If some paths in the for loop `continue`, this would be skipped)\n\n",https://github.com/bitcoin/bitcoin/pull/14802#discussion_r267046601,267046601,src/rpc/blockchain.cpp
MarcoFalke,2019-03-19T18:51:29Z,"style-nit:\n\n```suggestion\n    for (size_t i = 0; i < block.vtx.size(); ++i) {\n        const auto& tx = block.vtx.at(i);\n        ...// after coinbase check\n        const auto& txundo = blockUndo.vtxundo.at(i + 1);\n```",https://github.com/bitcoin/bitcoin/pull/14802#discussion_r267047482,267047482,src/rpc/blockchain.cpp
MarcoFalke,2019-04-28T12:43:13Z,"style-nit in commit ab4ed66cab35f5339921721cb85b57a1fd378f12:\n\nCould you please add `{}` according to the developer notes and then squash the fixup commit into the first one?\n\nhttps://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#squashing-commits",https://github.com/bitcoin/bitcoin/pull/14802#discussion_r279193175,279193175,src/rpc/blockchain.cpp
FelixWeis,2019-04-29T12:36:57Z,addressed in https://github.com/bitcoin/bitcoin/commit/a565355d8f543cf158138f12130960863736bff3,https://github.com/bitcoin/bitcoin/pull/14802#discussion_r279344124,279344124,src/rpc/blockchain.cpp
MarcoFalke,2019-04-29T12:43:19Z,"```suggestion\n    }\n```",https://github.com/bitcoin/bitcoin/pull/14802#discussion_r279346255,279346255,src/rpc/blockchain.cpp
MarcoFalke,2019-04-29T17:49:30Z,"```suggestion\nThe `getblockstats` RPC is faster for fee calculation by using BlockUndo data. Also, `-txindex` is no longer required and `getblockstats` works for all non-pruned blocks.\n```",https://github.com/bitcoin/bitcoin/pull/14802#discussion_r279468984,279468984,doc/release-notes-14802.md
MarcoFalke,2019-04-29T17:50:55Z,"Move the code into a helper and call\n\n```suggestion\n    const CBlockUndo = GetUndoChecked(pindex);\n```",https://github.com/bitcoin/bitcoin/pull/14802#discussion_r279469582,279469582,src/rpc/blockchain.cpp
MarcoFalke,2019-04-29T17:58:26Z,"```suggestion\n            for (const Coin& coin : txundo.vprevout) {\n                const CTxOut& prevoutput = coin.out;\n```",https://github.com/bitcoin/bitcoin/pull/14802#discussion_r279472630,279472630,src/rpc/blockchain.cpp
MarcoFalke,2019-04-29T17:58:49Z,"```suggestion\n```\n\nWhy include this here?",https://github.com/bitcoin/bitcoin/pull/14802#discussion_r279472771,279472771,src/rpc/blockchain.h
MarcoFalke,2019-04-29T18:10:06Z,"```suggestion\n        mocktime = 1525107225\n```\n\nnit: could set mocktime to the previous value, so that similar data is generated?",https://github.com/bitcoin/bitcoin/pull/14802#discussion_r279476692,279476692,test/functional/rpc_getblockstats.py
MarcoFalke,2019-04-29T18:20:54Z,"nit could make data gen (slightly more) deterministic:\n```suggestion\n        self.nodes[0].sendtoaddress(address=self.nodes[0].get_deterministic_priv_key().address, amount=1, subtractfeefromamount=True)\n```",https://github.com/bitcoin/bitcoin/pull/14802#discussion_r279480686,279480686,test/functional/rpc_getblockstats.py
