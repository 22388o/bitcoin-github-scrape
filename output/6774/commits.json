[
  {
    "sha": "bfbba3952feadb8643d74d4d3d2c887bb545ee34",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiZmJiYTM5NTJmZWFkYjg2NDNkNzRkNGQzZDJjODg3YmI1NDVlZTM0",
    "commit": {
      "author": {
        "name": "Eric Lombrozo",
        "email": "elombrozo@gmail.com",
        "date": "2015-10-07T13:26:49Z"
      },
      "committer": {
        "name": "Eric Lombrozo",
        "email": "elombrozo@gmail.com",
        "date": "2015-10-09T01:07:52Z"
      },
      "message": "Created a SoftForks unit containing only IsSuperMajority() function.",
      "tree": {
        "sha": "4c8357539ca8668c8d3d0ce9bd3bc3ccb7f26266",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/4c8357539ca8668c8d3d0ce9bd3bc3ccb7f26266"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/bfbba3952feadb8643d74d4d3d2c887bb545ee34",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/bfbba3952feadb8643d74d4d3d2c887bb545ee34",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/bfbba3952feadb8643d74d4d3d2c887bb545ee34",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/bfbba3952feadb8643d74d4d3d2c887bb545ee34/comments",
    "author": {
      "login": "CodeShark",
      "id": 894059,
      "node_id": "MDQ6VXNlcjg5NDA1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/894059?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CodeShark",
      "html_url": "https://github.com/CodeShark",
      "followers_url": "https://api.github.com/users/CodeShark/followers",
      "following_url": "https://api.github.com/users/CodeShark/following{/other_user}",
      "gists_url": "https://api.github.com/users/CodeShark/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CodeShark/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CodeShark/subscriptions",
      "organizations_url": "https://api.github.com/users/CodeShark/orgs",
      "repos_url": "https://api.github.com/users/CodeShark/repos",
      "events_url": "https://api.github.com/users/CodeShark/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CodeShark/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "CodeShark",
      "id": 894059,
      "node_id": "MDQ6VXNlcjg5NDA1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/894059?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CodeShark",
      "html_url": "https://github.com/CodeShark",
      "followers_url": "https://api.github.com/users/CodeShark/followers",
      "following_url": "https://api.github.com/users/CodeShark/following{/other_user}",
      "gists_url": "https://api.github.com/users/CodeShark/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CodeShark/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CodeShark/subscriptions",
      "organizations_url": "https://api.github.com/users/CodeShark/orgs",
      "repos_url": "https://api.github.com/users/CodeShark/repos",
      "events_url": "https://api.github.com/users/CodeShark/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CodeShark/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "d479311dba25d6a697a0c5bebbb1e913a0121b9f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d479311dba25d6a697a0c5bebbb1e913a0121b9f",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/d479311dba25d6a697a0c5bebbb1e913a0121b9f"
      }
    ],
    "stats": {
      "total": 50,
      "additions": 50,
      "deletions": 0
    },
    "files": [
      {
        "sha": "3de0a8f9b691f5d3e0103bef838aad3431b64d48",
        "filename": "src/Makefile.am",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/bfbba3952feadb8643d74d4d3d2c887bb545ee34/src/Makefile.am",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/bfbba3952feadb8643d74d4d3d2c887bb545ee34/src/Makefile.am",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/Makefile.am?ref=bfbba3952feadb8643d74d4d3d2c887bb545ee34",
        "patch": "@@ -99,6 +99,7 @@ BITCOIN_CORE_H = \\\n   compressor.h \\\n   consensus/consensus.h \\\n   consensus/params.h \\\n+  consensus/softforks.h \\\n   consensus/validation.h \\\n   core_io.h \\\n   core_memusage.h \\\n@@ -185,6 +186,7 @@ libbitcoin_server_a_SOURCES = \\\n   bloom.cpp \\\n   chain.cpp \\\n   checkpoints.cpp \\\n+  consensus/softforks.cpp \\\n   httprpc.cpp \\\n   httpserver.cpp \\\n   init.cpp \\"
      },
      {
        "sha": "42ca875555ea3f8e34f17dfd654ba1cbe8dc6c31",
        "filename": "src/consensus/softforks.cpp",
        "status": "added",
        "additions": 25,
        "deletions": 0,
        "changes": 25,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/bfbba3952feadb8643d74d4d3d2c887bb545ee34/src/consensus/softforks.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/bfbba3952feadb8643d74d4d3d2c887bb545ee34/src/consensus/softforks.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/consensus/softforks.cpp?ref=bfbba3952feadb8643d74d4d3d2c887bb545ee34",
        "patch": "@@ -0,0 +1,25 @@\n+// Copyright (c) 2009-2015 Eric Lombrozo, The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"chain.h\"\n+#include \"consensus/params.h\"\n+#include \"softforks.h\"\n+\n+using namespace Consensus::SoftForks;\n+\n+/**\n+ * Returns true if there are nRequired or more blocks of minVersion or above\n+ * in the last Consensus::Params::nMajorityWindow blocks, starting at pstart and going backwards.\n+ */\n+bool Consensus::SoftForks::IsSuperMajority(int minVersion, const CBlockIndex* pstart, unsigned nRequired, const Consensus::Params& consensusParams)\n+{\n+    unsigned int nFound = 0;\n+    for (int i = 0; i < consensusParams.nMajorityWindow && nFound < nRequired && pstart != NULL; i++)\n+    {\n+        if (pstart->nVersion >= minVersion)\n+            ++nFound;\n+        pstart = pstart->pprev;\n+    }\n+    return (nFound >= nRequired);\n+}"
      },
      {
        "sha": "1316c73c66ab1dbb2f0efd25a73c33de5a36eaf8",
        "filename": "src/consensus/softforks.h",
        "status": "added",
        "additions": 23,
        "deletions": 0,
        "changes": 23,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/bfbba3952feadb8643d74d4d3d2c887bb545ee34/src/consensus/softforks.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/bfbba3952feadb8643d74d4d3d2c887bb545ee34/src/consensus/softforks.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/consensus/softforks.h?ref=bfbba3952feadb8643d74d4d3d2c887bb545ee34",
        "patch": "@@ -0,0 +1,23 @@\n+// Copyright (c) 2009-2015 Eric Lombrozo, The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_SOFTFORKS_H\n+#define BITCOIN_SOFTFORKS_H\n+\n+class CBlockIndex;\n+namespace Consensus {\n+\n+struct Params;\n+namespace SoftForks {\n+\n+/**\n+ * Returns true if there are nRequired or more blocks of minVersion or above\n+ * in the last Consensus::Params::nMajorityWindow blocks, starting at pstart and going backwards.\n+ */\n+bool IsSuperMajority(int minVersion, const CBlockIndex* pstart, unsigned nRequired, const Consensus::Params& consensusParams);\n+\n+}\n+}\n+\n+#endif // BITCOIN_SOFTFORKS_H"
      }
    ]
  },
  {
    "sha": "4dea8e3cbc8f82cea66a7539d559bfccfff7d43a",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo0ZGVhOGUzY2JjOGY4MmNlYTY2YTc1MzlkNTU5YmZjY2ZmZjdkNDNh",
    "commit": {
      "author": {
        "name": "Eric Lombrozo",
        "email": "elombrozo@gmail.com",
        "date": "2015-10-07T13:32:20Z"
      },
      "committer": {
        "name": "Eric Lombrozo",
        "email": "elombrozo@gmail.com",
        "date": "2015-10-09T01:07:52Z"
      },
      "message": "Calling IsSuperMajority() inside SoftForks unit in main.cpp",
      "tree": {
        "sha": "e6df59f4c7820206ba740ac6aca712d1e440b967",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e6df59f4c7820206ba740ac6aca712d1e440b967"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4dea8e3cbc8f82cea66a7539d559bfccfff7d43a",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4dea8e3cbc8f82cea66a7539d559bfccfff7d43a",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/4dea8e3cbc8f82cea66a7539d559bfccfff7d43a",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4dea8e3cbc8f82cea66a7539d559bfccfff7d43a/comments",
    "author": {
      "login": "CodeShark",
      "id": 894059,
      "node_id": "MDQ6VXNlcjg5NDA1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/894059?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CodeShark",
      "html_url": "https://github.com/CodeShark",
      "followers_url": "https://api.github.com/users/CodeShark/followers",
      "following_url": "https://api.github.com/users/CodeShark/following{/other_user}",
      "gists_url": "https://api.github.com/users/CodeShark/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CodeShark/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CodeShark/subscriptions",
      "organizations_url": "https://api.github.com/users/CodeShark/orgs",
      "repos_url": "https://api.github.com/users/CodeShark/repos",
      "events_url": "https://api.github.com/users/CodeShark/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CodeShark/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "CodeShark",
      "id": 894059,
      "node_id": "MDQ6VXNlcjg5NDA1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/894059?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CodeShark",
      "html_url": "https://github.com/CodeShark",
      "followers_url": "https://api.github.com/users/CodeShark/followers",
      "following_url": "https://api.github.com/users/CodeShark/following{/other_user}",
      "gists_url": "https://api.github.com/users/CodeShark/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CodeShark/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CodeShark/subscriptions",
      "organizations_url": "https://api.github.com/users/CodeShark/orgs",
      "repos_url": "https://api.github.com/users/CodeShark/repos",
      "events_url": "https://api.github.com/users/CodeShark/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CodeShark/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "bfbba3952feadb8643d74d4d3d2c887bb545ee34",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/bfbba3952feadb8643d74d4d3d2c887bb545ee34",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/bfbba3952feadb8643d74d4d3d2c887bb545ee34"
      }
    ],
    "stats": {
      "total": 9,
      "additions": 5,
      "deletions": 4
    },
    "files": [
      {
        "sha": "b38aef908605babc0a585ab77a8ca71b2b2e9a0f",
        "filename": "src/main.cpp",
        "status": "modified",
        "additions": 5,
        "deletions": 4,
        "changes": 9,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/4dea8e3cbc8f82cea66a7539d559bfccfff7d43a/src/main.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/4dea8e3cbc8f82cea66a7539d559bfccfff7d43a/src/main.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/main.cpp?ref=4dea8e3cbc8f82cea66a7539d559bfccfff7d43a",
        "patch": "@@ -12,6 +12,7 @@\n #include \"checkpoints.h\"\n #include \"checkqueue.h\"\n #include \"consensus/consensus.h\"\n+#include \"consensus/softforks.h\"\n #include \"consensus/validation.h\"\n #include \"hash.h\"\n #include \"init.h\"\n@@ -1741,7 +1742,7 @@ bool ConnectBlock(const CBlock& block, CValidationState& state, CBlockIndex* pin\n     unsigned int flags = fStrictPayToScriptHash ? SCRIPT_VERIFY_P2SH : SCRIPT_VERIFY_NONE;\n \n     // Start enforcing the DERSIG (BIP66) rules, for block.nVersion=3 blocks, when 75% of the network has upgraded:\n-    if (block.nVersion >= 3 && IsSuperMajority(3, pindex->pprev, chainparams.GetConsensus().nMajorityEnforceBlockUpgrade, chainparams.GetConsensus())) {\n+    if (block.nVersion >= 3 && Consensus::SoftForks::IsSuperMajority(3, pindex->pprev, chainparams.GetConsensus().nMajorityEnforceBlockUpgrade, chainparams.GetConsensus())) {\n         flags |= SCRIPT_VERIFY_DERSIG;\n     }\n \n@@ -2675,12 +2676,12 @@ bool ContextualCheckBlockHeader(const CBlockHeader& block, CValidationState& sta\n                              REJECT_INVALID, \"time-too-old\");\n \n     // Reject block.nVersion=1 blocks when 95% (75% on testnet) of the network has upgraded:\n-    if (block.nVersion < 2 && IsSuperMajority(2, pindexPrev, consensusParams.nMajorityRejectBlockOutdated, consensusParams))\n+    if (block.nVersion < 2 && Consensus::SoftForks::IsSuperMajority(2, pindexPrev, consensusParams.nMajorityRejectBlockOutdated, consensusParams))\n         return state.Invalid(error(\"%s: rejected nVersion=1 block\", __func__),\n                              REJECT_OBSOLETE, \"bad-version\");\n \n     // Reject block.nVersion=2 blocks when 95% (75% on testnet) of the network has upgraded:\n-    if (block.nVersion < 3 && IsSuperMajority(3, pindexPrev, consensusParams.nMajorityRejectBlockOutdated, consensusParams))\n+    if (block.nVersion < 3 && Consensus::SoftForks::IsSuperMajority(3, pindexPrev, consensusParams.nMajorityRejectBlockOutdated, consensusParams))\n         return state.Invalid(error(\"%s : rejected nVersion=2 block\", __func__),\n                              REJECT_OBSOLETE, \"bad-version\");\n \n@@ -2700,7 +2701,7 @@ bool ContextualCheckBlock(const CBlock& block, CValidationState& state, CBlockIn\n \n     // Enforce block.nVersion=2 rule that the coinbase starts with serialized block height\n     // if 750 of the last 1,000 blocks are version 2 or greater (51/100 if testnet):\n-    if (block.nVersion >= 2 && IsSuperMajority(2, pindexPrev, consensusParams.nMajorityEnforceBlockUpgrade, consensusParams))\n+    if (block.nVersion >= 2 && Consensus::SoftForks::IsSuperMajority(2, pindexPrev, consensusParams.nMajorityEnforceBlockUpgrade, consensusParams))\n     {\n         CScript expect = CScript() << nHeight;\n         if (block.vtx[0].vin[0].scriptSig.size() < expect.size() ||"
      }
    ]
  },
  {
    "sha": "df089cf1f6761cbbe88b5dd152519a85f928860b",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkZjA4OWNmMWY2NzYxY2JiZTg4YjVkZDE1MjUxOWE4NWY5Mjg4NjBi",
    "commit": {
      "author": {
        "name": "Eric Lombrozo",
        "email": "elombrozo@gmail.com",
        "date": "2015-10-07T13:42:00Z"
      },
      "committer": {
        "name": "Eric Lombrozo",
        "email": "elombrozo@gmail.com",
        "date": "2015-10-09T01:07:52Z"
      },
      "message": "Removed IsSuperMajority() from main.cpp",
      "tree": {
        "sha": "d6fae040868d95360305ddf267fe96f1edf9c7a2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d6fae040868d95360305ddf267fe96f1edf9c7a2"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/df089cf1f6761cbbe88b5dd152519a85f928860b",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/df089cf1f6761cbbe88b5dd152519a85f928860b",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/df089cf1f6761cbbe88b5dd152519a85f928860b",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/df089cf1f6761cbbe88b5dd152519a85f928860b/comments",
    "author": {
      "login": "CodeShark",
      "id": 894059,
      "node_id": "MDQ6VXNlcjg5NDA1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/894059?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CodeShark",
      "html_url": "https://github.com/CodeShark",
      "followers_url": "https://api.github.com/users/CodeShark/followers",
      "following_url": "https://api.github.com/users/CodeShark/following{/other_user}",
      "gists_url": "https://api.github.com/users/CodeShark/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CodeShark/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CodeShark/subscriptions",
      "organizations_url": "https://api.github.com/users/CodeShark/orgs",
      "repos_url": "https://api.github.com/users/CodeShark/repos",
      "events_url": "https://api.github.com/users/CodeShark/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CodeShark/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "CodeShark",
      "id": 894059,
      "node_id": "MDQ6VXNlcjg5NDA1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/894059?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CodeShark",
      "html_url": "https://github.com/CodeShark",
      "followers_url": "https://api.github.com/users/CodeShark/followers",
      "following_url": "https://api.github.com/users/CodeShark/following{/other_user}",
      "gists_url": "https://api.github.com/users/CodeShark/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CodeShark/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CodeShark/subscriptions",
      "organizations_url": "https://api.github.com/users/CodeShark/orgs",
      "repos_url": "https://api.github.com/users/CodeShark/repos",
      "events_url": "https://api.github.com/users/CodeShark/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CodeShark/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "4dea8e3cbc8f82cea66a7539d559bfccfff7d43a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4dea8e3cbc8f82cea66a7539d559bfccfff7d43a",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/4dea8e3cbc8f82cea66a7539d559bfccfff7d43a"
      }
    ],
    "stats": {
      "total": 17,
      "additions": 0,
      "deletions": 17
    },
    "files": [
      {
        "sha": "e947b5af180cdd10e946851e36172d730e1b3dea",
        "filename": "src/main.cpp",
        "status": "modified",
        "additions": 0,
        "deletions": 17,
        "changes": 17,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/df089cf1f6761cbbe88b5dd152519a85f928860b/src/main.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/df089cf1f6761cbbe88b5dd152519a85f928860b/src/main.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/main.cpp?ref=df089cf1f6761cbbe88b5dd152519a85f928860b",
        "patch": "@@ -88,11 +88,6 @@ map<uint256, COrphanTx> mapOrphanTransactions GUARDED_BY(cs_main);;\n map<uint256, set<uint256> > mapOrphanTransactionsByPrev GUARDED_BY(cs_main);;\n void EraseOrphansFor(NodeId peer) EXCLUSIVE_LOCKS_REQUIRED(cs_main);\n \n-/**\n- * Returns true if there are nRequired or more blocks of minVersion or above\n- * in the last Consensus::Params::nMajorityWindow blocks, starting at pstart and going backwards.\n- */\n-static bool IsSuperMajority(int minVersion, const CBlockIndex* pstart, unsigned nRequired, const Consensus::Params& consensusParams);\n static void CheckBlockIndex();\n \n /** Constant stuff for coinbase transactions we create: */\n@@ -2825,18 +2820,6 @@ bool AcceptBlock(const CBlock& block, CValidationState& state, CBlockIndex** ppi\n     return true;\n }\n \n-static bool IsSuperMajority(int minVersion, const CBlockIndex* pstart, unsigned nRequired, const Consensus::Params& consensusParams)\n-{\n-    unsigned int nFound = 0;\n-    for (int i = 0; i < consensusParams.nMajorityWindow && nFound < nRequired && pstart != NULL; i++)\n-    {\n-        if (pstart->nVersion >= minVersion)\n-            ++nFound;\n-        pstart = pstart->pprev;\n-    }\n-    return (nFound >= nRequired);\n-}\n-\n \n bool ProcessNewBlock(CValidationState &state, const CNode* pfrom, const CBlock* pblock, bool fForceProcessing, CDiskBlockPos *dbp)\n {"
      }
    ]
  }
]