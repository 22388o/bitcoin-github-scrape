[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/687235269",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19872#issuecomment-687235269",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19872",
    "id": 687235269,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NzIzNTI2OQ==",
    "user": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?u=7297e8aaf9188c0cb98bc549a8a02a1dc8d59e4c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-04T15:53:31Z",
    "updated_at": "2020-09-04T15:53:31Z",
    "author_association": "MEMBER",
    "body": "cc @ajtowns @jnewbery @promag @vasild",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/687235269/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/687299772",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19872#issuecomment-687299772",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19872",
    "id": 687299772,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NzI5OTc3Mg==",
    "user": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?u=7297e8aaf9188c0cb98bc549a8a02a1dc8d59e4c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-04T18:03:08Z",
    "updated_at": "2020-09-04T18:03:08Z",
    "author_association": "MEMBER",
    "body": "Updated c22c4d2320f288f57fd04515d29b72d6342ea11a -> e79bc0f275977fafcb98a3065256222639a46328 ([pr19872.01](https://github.com/hebasto/bitcoin/commits/pr19872.01) -> [pr19872.02](https://github.com/hebasto/bitcoin/commits/pr19872.02), [diff](https://github.com/hebasto/bitcoin/compare/pr19872.01..pr19872.02)):\r\n- fixed CentOS 32-bit build on Travis CI\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/687299772/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/687326233",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19872#issuecomment-687326233",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19872",
    "id": 687326233,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NzMyNjIzMw==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-04T19:01:28Z",
    "updated_at": "2020-09-04T19:01:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #19848 (Remove mempool global from interfaces by MarcoFalke)\n* #19791 ([net processing] Move Misbehaving() to PeerManager by jnewbery)\n* #19753 (p2p: don't add AlreadyHave transactions to recentRejects by troygiorshev)\n* #19645 (Allow updating mempool-txn with cheaper witnesses by ariard)\n* #19572 (ZMQ: Create \"sequence\" notifier, enabling client-side mempool tracking by instagibbs)\n* #19556 (Remove mempool global by MarcoFalke)\n* #19498 (Tidy up ProcessOrphanTx by jnewbery)\n* #19488 (Refactor mempool.dat to be extensible, and store missing info by luke-jr)\n* #19478 (Remove CTxMempool::mapLinks data structure member by JeremyRubin)\n* #19339 (validation: re-delegate absurd fee checking from mempool to clients by gzhao408)\n* #12677 (RPC: Add ancestor{count,size,fees} to listunspent output by luke-jr)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/687326233/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/687626362",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19872#issuecomment-687626362",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19872",
    "id": 687626362,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4NzYyNjM2Mg==",
    "user": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?u=7297e8aaf9188c0cb98bc549a8a02a1dc8d59e4c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-05T15:33:41Z",
    "updated_at": "2020-09-05T15:33:41Z",
    "author_association": "MEMBER",
    "body": "Rebased e79bc0f275977fafcb98a3065256222639a46328 -> 2a3e7cb01f4004310e0853d182e08574698db111 ([pr19872.02](https://github.com/hebasto/bitcoin/commits/pr19872.02) -> [pr19872.03](https://github.com/hebasto/bitcoin/commits/pr19872.03)) due to the conflict with #19848.\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/687626362/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/688262898",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19872#issuecomment-688262898",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19872",
    "id": 688262898,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4ODI2Mjg5OA==",
    "user": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?u=7297e8aaf9188c0cb98bc549a8a02a1dc8d59e4c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-07T11:26:16Z",
    "updated_at": "2020-09-07T11:26:16Z",
    "author_association": "MEMBER",
    "body": "Rebased 2a3e7cb01f4004310e0853d182e08574698db111 -> f594b9a4a2957b7ad2e95ad7b17cab858e15282f ([pr19872.03](https://github.com/hebasto/bitcoin/commits/pr19872.03) -> [pr19872.04](https://github.com/hebasto/bitcoin/commits/pr19872.04)) due to the conflicts with #19478 and #19556.\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/688262898/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/688463265",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19872#issuecomment-688463265",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19872",
    "id": 688463265,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4ODQ2MzI2NQ==",
    "user": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?u=7297e8aaf9188c0cb98bc549a8a02a1dc8d59e4c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-07T18:16:29Z",
    "updated_at": "2020-09-07T18:16:29Z",
    "author_association": "MEMBER",
    "body": "Rebased f594b9a4a2957b7ad2e95ad7b17cab858e15282f -> ff19c7ddb8b8b076e5c538be434abd53af572b8d ([pr19872.04](https://github.com/hebasto/bitcoin/commits/pr19872.04) -> [pr19872.05](https://github.com/hebasto/bitcoin/commits/pr19872.05)) due to the conflict with #19791.\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/688463265/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/688830051",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19872#issuecomment-688830051",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19872",
    "id": 688830051,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4ODgzMDA1MQ==",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?u=d06d2903ce6ad8b9d0c66ef9225fa21adfe22c7f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-08T12:20:55Z",
    "updated_at": "2020-09-08T12:20:55Z",
    "author_association": "CONTRIBUTOR",
    "body": "Concept ACK.\r\n\r\nSimilar changes are justified, assuming we want to get rid of recursive mutexes.\r\n\r\nRecursive mutexes are used by functions that need to own a mutex to do their stuff, but some of the callers of those functions own the mutex and some don't. So the function does not have a clear interface wrt the mutex, rather it has a vague interface like \"the caller may own the mutex and I will lock it myself anyway\".\r\n\r\nIMO the cleaner interface is if the mutex is acquired inside the function and none of the callers own it. If that is [not possible](https://github.com/bitcoin/bitcoin/blob/147d50d63e07f600b414273a9f6b84f9f4ad9696/src/rpc/blockchain.cpp#L1408-L1419) then the function must not lock it and mandate that the callers own it. If that is too verbose for the callers, then two functions could be used - one that locks and another that does not:\r\n\r\n```cpp\r\nfuncUnprotected() EXCLUSIVE_LOCKS_REQUIRED(cs)\r\n{\r\n    AssertLockHeld(cs);\r\n    ...\r\n}\r\n\r\nfunc() EXCLUSIVE_LOCKS_REQUIRED(!cs)\r\n{\r\n    LOCK(cs);\r\n    funcUnprotected();\r\n}\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/688830051/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/688852261",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19872#issuecomment-688852261",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19872",
    "id": 688852261,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4ODg1MjI2MQ==",
    "user": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?u=7297e8aaf9188c0cb98bc549a8a02a1dc8d59e4c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-08T13:05:04Z",
    "updated_at": "2020-09-08T13:05:04Z",
    "author_association": "MEMBER",
    "body": "Many thanks to @jnewbery, @promag and @vasild for your attention to thread safety design!\r\n\r\nLet me summarize the two approaches to preventing recursive locking of a mutex that are suggested/discussed/used in the repo:\r\n\r\n1) \"move the lock up the stack if it prevents unnecessary unlocks/locks\" (credits to @promag)\r\nE.g., #19833, this PR (in its current state, ff19c7ddb8b8b076e5c538be434abd53af572b8d)\r\n\r\n2) \"two functions could be used - one that locks and another that does not\" (credits to @vasild)\r\nE.g., #19238\r\n\r\nI believe we should reach the consensus about approach we will use while migrating from `RecursiveMutex` to `Mutex` before any further step.\r\n\r\nIs it a topic for meeting?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/688852261/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/688855441",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19872#issuecomment-688855441",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19872",
    "id": 688855441,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4ODg1NTQ0MQ==",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?u=d06d2903ce6ad8b9d0c66ef9225fa21adfe22c7f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-08T13:10:38Z",
    "updated_at": "2020-09-08T13:10:38Z",
    "author_association": "CONTRIBUTOR",
    "body": "0. (most preferred, if possible) lock the mutex only inside the function that needs it",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/688855441/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/688856953",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19872#issuecomment-688856953",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19872",
    "id": 688856953,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4ODg1Njk1Mw==",
    "user": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?u=7297e8aaf9188c0cb98bc549a8a02a1dc8d59e4c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-08T13:13:16Z",
    "updated_at": "2020-09-08T13:13:16Z",
    "author_association": "MEMBER",
    "body": "> 0. (most preferred, if possible) lock the mutex only inside the function that needs it\r\n\r\nSure! I just described variants when this is not possible :)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/688856953/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/688863897",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19872#issuecomment-688863897",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19872",
    "id": 688863897,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4ODg2Mzg5Nw==",
    "user": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?u=7297e8aaf9188c0cb98bc549a8a02a1dc8d59e4c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-08T13:25:03Z",
    "updated_at": "2020-09-08T13:29:03Z",
    "author_association": "MEMBER",
    "body": "@promag \r\n> IMO we should move the lock up the stack if it prevents unnecessary unlocks/locks. That's not the case, for instance in `CTxMemPool::exists`. Looks like it's a premature change.\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/147d50d63e07f600b414273a9f6b84f9f4ad9696/src/txmempool.h#L755-L761\r\n\r\nand `mempool_tests.cpp`",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/688863897/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/688875922",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19872#issuecomment-688875922",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19872",
    "id": 688875922,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4ODg3NTkyMg==",
    "user": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?u=7297e8aaf9188c0cb98bc549a8a02a1dc8d59e4c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-08T13:36:32Z",
    "updated_at": "2020-09-08T13:36:32Z",
    "author_association": "MEMBER",
    "body": "For unit tests also there is @MarcoFalke's approach (fad3a7c5b9118d4d190401c0fbbd3e2068dffadc from #19909) to subclass `CTxMemPool`, and add member functions with locking required for tests.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/688875922/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/693095500",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19872#issuecomment-693095500",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19872",
    "id": 693095500,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY5MzA5NTUwMA==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-16T00:14:20Z",
    "updated_at": "2020-09-16T00:14:20Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--cf906140f33d8803c4a75a2196329ecb-->\n\ud83d\udc19 This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/693095500/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/484828890",
    "pull_request_review_id": 484019855,
    "id": 484828890,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDgyODg5MA==",
    "diff_hunk": "@@ -615,7 +615,7 @@ static void CheckInputsAndUpdateCoins(const CTransaction& tx, CCoinsViewCache& m\n \n void CTxMemPool::check(const CCoinsViewCache *pcoins) const\n {\n-    LOCK(cs);\n+    AssertLockHeld(cs);",
    "path": "src/txmempool.cpp",
    "position": 5,
    "original_position": 5,
    "commit_id": "ff19c7ddb8b8b076e5c538be434abd53af572b8d",
    "original_commit_id": "ff19c7ddb8b8b076e5c538be434abd53af572b8d",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I don't understand why this change is necessary. `check()` is never currently called with the lock held.",
    "created_at": "2020-09-08T10:55:23Z",
    "updated_at": "2020-09-08T11:20:57Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19872#discussion_r484828890",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19872",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/484828890"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19872#discussion_r484828890"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19872"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/484828890/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 618,
    "original_line": 618,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/484840897",
    "pull_request_review_id": 484019855,
    "id": 484840897,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDg0MDg5Nw==",
    "diff_hunk": "@@ -615,7 +615,7 @@ static void CheckInputsAndUpdateCoins(const CTransaction& tx, CCoinsViewCache& m\n \n void CTxMemPool::check(const CCoinsViewCache *pcoins) const\n {\n-    LOCK(cs);\n+    AssertLockHeld(cs);",
    "path": "src/txmempool.cpp",
    "position": 5,
    "original_position": 5,
    "commit_id": "ff19c7ddb8b8b076e5c538be434abd53af572b8d",
    "original_commit_id": "ff19c7ddb8b8b076e5c538be434abd53af572b8d",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I don't think this change is necessary. `check()` isn't currently called anywhere with the lock held.",
    "created_at": "2020-09-08T11:19:40Z",
    "updated_at": "2020-09-08T11:20:57Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19872#discussion_r484840897",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19872",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/484840897"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19872#discussion_r484840897"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19872"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/484840897/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 618,
    "original_line": 618,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/484841181",
    "pull_request_review_id": 484019855,
    "id": 484841181,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDg0MTE4MQ==",
    "diff_hunk": "@@ -1090,8 +1090,9 @@ uint64_t CTxMemPool::CalculateDescendantMaximum(txiter entry) const {\n     return maximum;\n }\n \n-void CTxMemPool::GetTransactionAncestry(const uint256& txid, size_t& ancestors, size_t& descendants) const {\n-    LOCK(cs);\n+void CTxMemPool::GetTransactionAncestry(const uint256& txid, size_t& ancestors, size_t& descendants) const\n+{\n+    AssertLockHeld(cs);",
    "path": "src/txmempool.cpp",
    "position": 63,
    "original_position": 63,
    "commit_id": "ff19c7ddb8b8b076e5c538be434abd53af572b8d",
    "original_commit_id": "ff19c7ddb8b8b076e5c538be434abd53af572b8d",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Again, I don't think this change is necessary. `GetTransactionAncestry()` is only called with the lock held in the tests, which can be updated.",
    "created_at": "2020-09-08T11:20:16Z",
    "updated_at": "2020-09-08T11:20:57Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19872#discussion_r484841181",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19872",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/484841181"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19872#discussion_r484841181"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19872"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/484841181/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1095,
    "original_line": 1095,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/484857676",
    "pull_request_review_id": 484057253,
    "id": 484857676,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDg1NzY3Ng==",
    "diff_hunk": "@@ -615,7 +615,7 @@ static void CheckInputsAndUpdateCoins(const CTransaction& tx, CCoinsViewCache& m\n \n void CTxMemPool::check(const CCoinsViewCache *pcoins) const\n {\n-    LOCK(cs);\n+    AssertLockHeld(cs);",
    "path": "src/txmempool.cpp",
    "position": 5,
    "original_position": 5,
    "commit_id": "ff19c7ddb8b8b076e5c538be434abd53af572b8d",
    "original_commit_id": "ff19c7ddb8b8b076e5c538be434abd53af572b8d",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "It is [here](https://github.com/bitcoin/bitcoin/blob/147d50d/src/validation.cpp#L2803) (mutex locked a [little bit earlier](https://github.com/bitcoin/bitcoin/blob/147d50d/src/validation.cpp#L2728)).",
    "created_at": "2020-09-08T11:53:35Z",
    "updated_at": "2020-09-08T11:53:35Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19872#discussion_r484857676",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19872",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/484857676"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19872#discussion_r484857676"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19872"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/484857676/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 618,
    "original_line": 618,
    "side": "RIGHT",
    "in_reply_to_id": 484828890
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/484861382",
    "pull_request_review_id": 484061880,
    "id": 484861382,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDg2MTM4Mg==",
    "diff_hunk": "@@ -1090,8 +1090,9 @@ uint64_t CTxMemPool::CalculateDescendantMaximum(txiter entry) const {\n     return maximum;\n }\n \n-void CTxMemPool::GetTransactionAncestry(const uint256& txid, size_t& ancestors, size_t& descendants) const {\n-    LOCK(cs);\n+void CTxMemPool::GetTransactionAncestry(const uint256& txid, size_t& ancestors, size_t& descendants) const\n+{\n+    AssertLockHeld(cs);",
    "path": "src/txmempool.cpp",
    "position": 63,
    "original_position": 63,
    "commit_id": "ff19c7ddb8b8b076e5c538be434abd53af572b8d",
    "original_commit_id": "ff19c7ddb8b8b076e5c538be434abd53af572b8d",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Right, I also saw that. I guess @hebasto preferred this approach because the changes to tests would be too big and ugly? (if we mandate that `GetTransactionAncestry()` will lock the mutex itself and the callers should not be holding it)",
    "created_at": "2020-09-08T12:00:27Z",
    "updated_at": "2020-09-08T12:00:27Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19872#discussion_r484861382",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19872",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/484861382"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19872#discussion_r484861382"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19872"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/484861382/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1095,
    "original_line": 1095,
    "side": "RIGHT",
    "in_reply_to_id": 484841181
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/484908665",
    "pull_request_review_id": 484130356,
    "id": 484908665,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDkwODY2NQ==",
    "diff_hunk": "@@ -1090,8 +1090,9 @@ uint64_t CTxMemPool::CalculateDescendantMaximum(txiter entry) const {\n     return maximum;\n }\n \n-void CTxMemPool::GetTransactionAncestry(const uint256& txid, size_t& ancestors, size_t& descendants) const {\n-    LOCK(cs);\n+void CTxMemPool::GetTransactionAncestry(const uint256& txid, size_t& ancestors, size_t& descendants) const\n+{\n+    AssertLockHeld(cs);",
    "path": "src/txmempool.cpp",
    "position": 63,
    "original_position": 63,
    "commit_id": "ff19c7ddb8b8b076e5c538be434abd53af572b8d",
    "original_commit_id": "ff19c7ddb8b8b076e5c538be434abd53af572b8d",
    "user": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "@vasild Correct.",
    "created_at": "2020-09-08T13:19:45Z",
    "updated_at": "2020-09-08T13:19:46Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19872#discussion_r484908665",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19872",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/484908665"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19872#discussion_r484908665"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19872"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/484908665/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1095,
    "original_line": 1095,
    "side": "RIGHT",
    "in_reply_to_id": 484841181
  }
]