[
  {
    "sha": "caac39b0ace38aa088d88c1a5a9a9dbb4d2e893f",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjYWFjMzliMGFjZTM4YWEwODhkODhjMWE1YTlhOWRiYjRkMmU4OTNm",
    "commit": {
      "author": {
        "name": "Daniel Kraft",
        "email": "d@domob.eu",
        "date": "2018-06-29T13:16:31Z"
      },
      "committer": {
        "name": "Daniel Kraft",
        "email": "d@domob.eu",
        "date": "2018-06-29T13:16:31Z"
      },
      "message": "Make ZMQ notification interface instance global.\n\nThis moves the used instance of CZMQNotificationInterface from a static\nvariable in init.cpp to a globally-accessible one declared in\nzmq/zmqnotificationinterface.h.  The variable is also renamed to\ng_zmq_notification_interface, to be consistent with other globals.\n\nWe need this to implement a new RPC method \"getzmqnotifications\" (see\nhttps://github.com/bitcoin/bitcoin/issues/13526) in a follow up.",
      "tree": {
        "sha": "2d9ed99589f634d257f7c8fc644a2b9456785ba0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2d9ed99589f634d257f7c8fc644a2b9456785ba0"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/caac39b0ace38aa088d88c1a5a9a9dbb4d2e893f",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/caac39b0ace38aa088d88c1a5a9a9dbb4d2e893f",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/caac39b0ace38aa088d88c1a5a9a9dbb4d2e893f",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/caac39b0ace38aa088d88c1a5a9a9dbb4d2e893f/comments",
    "author": {
      "login": "domob1812",
      "id": 4943644,
      "node_id": "MDQ6VXNlcjQ5NDM2NDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4943644?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/domob1812",
      "html_url": "https://github.com/domob1812",
      "followers_url": "https://api.github.com/users/domob1812/followers",
      "following_url": "https://api.github.com/users/domob1812/following{/other_user}",
      "gists_url": "https://api.github.com/users/domob1812/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/domob1812/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/domob1812/subscriptions",
      "organizations_url": "https://api.github.com/users/domob1812/orgs",
      "repos_url": "https://api.github.com/users/domob1812/repos",
      "events_url": "https://api.github.com/users/domob1812/events{/privacy}",
      "received_events_url": "https://api.github.com/users/domob1812/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "domob1812",
      "id": 4943644,
      "node_id": "MDQ6VXNlcjQ5NDM2NDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4943644?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/domob1812",
      "html_url": "https://github.com/domob1812",
      "followers_url": "https://api.github.com/users/domob1812/followers",
      "following_url": "https://api.github.com/users/domob1812/following{/other_user}",
      "gists_url": "https://api.github.com/users/domob1812/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/domob1812/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/domob1812/subscriptions",
      "organizations_url": "https://api.github.com/users/domob1812/orgs",
      "repos_url": "https://api.github.com/users/domob1812/repos",
      "events_url": "https://api.github.com/users/domob1812/events{/privacy}",
      "received_events_url": "https://api.github.com/users/domob1812/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "2643fa50869f22672cbc72ac497d9c30234075b8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2643fa50869f22672cbc72ac497d9c30234075b8",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/2643fa50869f22672cbc72ac497d9c30234075b8"
      }
    ],
    "stats": {
      "total": 22,
      "additions": 11,
      "deletions": 11
    },
    "files": [
      {
        "sha": "299b478e851421e01c18e347a00790bd6f51c614",
        "filename": "src/init.cpp",
        "status": "modified",
        "additions": 7,
        "deletions": 11,
        "changes": 18,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/caac39b0ace38aa088d88c1a5a9a9dbb4d2e893f/src/init.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/caac39b0ace38aa088d88c1a5a9a9dbb4d2e893f/src/init.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/init.cpp?ref=caac39b0ace38aa088d88c1a5a9a9dbb4d2e893f",
        "patch": "@@ -99,10 +99,6 @@ void DummyWalletInit::AddWalletOptions() const\n const WalletInitInterface& g_wallet_init_interface = DummyWalletInit();\n #endif\n \n-#if ENABLE_ZMQ\n-static CZMQNotificationInterface* pzmqNotificationInterface = nullptr;\n-#endif\n-\n #ifdef WIN32\n // Win32 LevelDB doesn't use filedescriptors, and the ones used for\n // accessing block files don't count towards the fd_set size limit\n@@ -279,10 +275,10 @@ void Shutdown()\n     g_wallet_init_interface.Stop();\n \n #if ENABLE_ZMQ\n-    if (pzmqNotificationInterface) {\n-        UnregisterValidationInterface(pzmqNotificationInterface);\n-        delete pzmqNotificationInterface;\n-        pzmqNotificationInterface = nullptr;\n+    if (g_zmq_notification_interface) {\n+        UnregisterValidationInterface(g_zmq_notification_interface);\n+        delete g_zmq_notification_interface;\n+        g_zmq_notification_interface = nullptr;\n     }\n #endif\n \n@@ -1409,10 +1405,10 @@ bool AppInitMain()\n     }\n \n #if ENABLE_ZMQ\n-    pzmqNotificationInterface = CZMQNotificationInterface::Create();\n+    g_zmq_notification_interface = CZMQNotificationInterface::Create();\n \n-    if (pzmqNotificationInterface) {\n-        RegisterValidationInterface(pzmqNotificationInterface);\n+    if (g_zmq_notification_interface) {\n+        RegisterValidationInterface(g_zmq_notification_interface);\n     }\n #endif\n     uint64_t nMaxOutboundLimit = 0; //unlimited unless -maxuploadtarget is set"
      },
      {
        "sha": "89ae62f4cb5c81d16b623329386b860d652b22a8",
        "filename": "src/zmq/zmqnotificationinterface.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/caac39b0ace38aa088d88c1a5a9a9dbb4d2e893f/src/zmq/zmqnotificationinterface.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/caac39b0ace38aa088d88c1a5a9a9dbb4d2e893f/src/zmq/zmqnotificationinterface.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/zmq/zmqnotificationinterface.cpp?ref=caac39b0ace38aa088d88c1a5a9a9dbb4d2e893f",
        "patch": "@@ -180,3 +180,5 @@ void CZMQNotificationInterface::BlockDisconnected(const std::shared_ptr<const CB\n         TransactionAddedToMempool(ptx);\n     }\n }\n+\n+CZMQNotificationInterface* g_zmq_notification_interface = nullptr;"
      },
      {
        "sha": "3fcc96ce24ab5b25cf3a006f01c49e12a20600c1",
        "filename": "src/zmq/zmqnotificationinterface.h",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/caac39b0ace38aa088d88c1a5a9a9dbb4d2e893f/src/zmq/zmqnotificationinterface.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/caac39b0ace38aa088d88c1a5a9a9dbb4d2e893f/src/zmq/zmqnotificationinterface.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/zmq/zmqnotificationinterface.h?ref=caac39b0ace38aa088d88c1a5a9a9dbb4d2e893f",
        "patch": "@@ -37,4 +37,6 @@ class CZMQNotificationInterface final : public CValidationInterface\n     std::list<CZMQAbstractNotifier*> notifiers;\n };\n \n+extern CZMQNotificationInterface* g_zmq_notification_interface;\n+\n #endif // BITCOIN_ZMQ_ZMQNOTIFICATIONINTERFACE_H"
      }
    ]
  },
  {
    "sha": "161e8d40a4e4c0e701b6c8142b8dcacf2190545e",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoxNjFlOGQ0MGE0ZTRjMGU3MDFiNmM4MTQyYjhkY2FjZjIxOTA1NDVl",
    "commit": {
      "author": {
        "name": "Daniel Kraft",
        "email": "d@domob.eu",
        "date": "2018-06-29T14:10:01Z"
      },
      "committer": {
        "name": "Daniel Kraft",
        "email": "d@domob.eu",
        "date": "2018-07-05T06:02:22Z"
      },
      "message": "RPC: Add new getzmqnotifications method.\n\nThis adds a new RPC method \"getzmqnotifications\", which returns\ninformation about all active ZMQ notification endpoints.  This is useful\nfor software that layers on top of bitcoind, so it can verify that\nZeroMQ is enabled and also figure out where it should listen.\n\nSee https://github.com/bitcoin/bitcoin/issues/13526.",
      "tree": {
        "sha": "1a897ac73c6e7c6d60b0f46f9624481f1b854af3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/1a897ac73c6e7c6d60b0f46f9624481f1b854af3"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/161e8d40a4e4c0e701b6c8142b8dcacf2190545e",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/161e8d40a4e4c0e701b6c8142b8dcacf2190545e",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/161e8d40a4e4c0e701b6c8142b8dcacf2190545e",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/161e8d40a4e4c0e701b6c8142b8dcacf2190545e/comments",
    "author": {
      "login": "domob1812",
      "id": 4943644,
      "node_id": "MDQ6VXNlcjQ5NDM2NDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4943644?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/domob1812",
      "html_url": "https://github.com/domob1812",
      "followers_url": "https://api.github.com/users/domob1812/followers",
      "following_url": "https://api.github.com/users/domob1812/following{/other_user}",
      "gists_url": "https://api.github.com/users/domob1812/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/domob1812/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/domob1812/subscriptions",
      "organizations_url": "https://api.github.com/users/domob1812/orgs",
      "repos_url": "https://api.github.com/users/domob1812/repos",
      "events_url": "https://api.github.com/users/domob1812/events{/privacy}",
      "received_events_url": "https://api.github.com/users/domob1812/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "domob1812",
      "id": 4943644,
      "node_id": "MDQ6VXNlcjQ5NDM2NDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4943644?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/domob1812",
      "html_url": "https://github.com/domob1812",
      "followers_url": "https://api.github.com/users/domob1812/followers",
      "following_url": "https://api.github.com/users/domob1812/following{/other_user}",
      "gists_url": "https://api.github.com/users/domob1812/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/domob1812/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/domob1812/subscriptions",
      "organizations_url": "https://api.github.com/users/domob1812/orgs",
      "repos_url": "https://api.github.com/users/domob1812/repos",
      "events_url": "https://api.github.com/users/domob1812/events{/privacy}",
      "received_events_url": "https://api.github.com/users/domob1812/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "caac39b0ace38aa088d88c1a5a9a9dbb4d2e893f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/caac39b0ace38aa088d88c1a5a9a9dbb4d2e893f",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/caac39b0ace38aa088d88c1a5a9a9dbb4d2e893f"
      }
    ],
    "stats": {
      "total": 134,
      "additions": 130,
      "deletions": 4
    },
    "files": [
      {
        "sha": "57f93abe037d80a43da40a0f93fd5297d198b7f4",
        "filename": "doc/release-notes.md",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/161e8d40a4e4c0e701b6c8142b8dcacf2190545e/doc/release-notes.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/161e8d40a4e4c0e701b6c8142b8dcacf2190545e/doc/release-notes.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/doc/release-notes.md?ref=161e8d40a4e4c0e701b6c8142b8dcacf2190545e",
        "patch": "@@ -79,6 +79,8 @@ RPC changes\n    `getmempoolentry` when verbosity is set to `true` with sub-fields `ancestor`, `base`, `modified`\n    and `descendant` denominated in BTC. This new field deprecates previous fee fields, such as\n    `fee`, `modifiedfee`, `ancestorfee` and `descendantfee`.\n+- The new RPC `getzmqnotifications` returns information about active ZMQ\n+  notifications.\n \n External wallet files\n ---------------------"
      },
      {
        "sha": "d78f75e2004d8f86d8c36efee1820381e4fcb6b1",
        "filename": "src/Makefile.am",
        "status": "modified",
        "additions": 4,
        "deletions": 2,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/161e8d40a4e4c0e701b6c8142b8dcacf2190545e/src/Makefile.am",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/161e8d40a4e4c0e701b6c8142b8dcacf2190545e/src/Makefile.am",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/Makefile.am?ref=161e8d40a4e4c0e701b6c8142b8dcacf2190545e",
        "patch": "@@ -193,7 +193,8 @@ BITCOIN_CORE_H = \\\n   zmq/zmqabstractnotifier.h \\\n   zmq/zmqconfig.h\\\n   zmq/zmqnotificationinterface.h \\\n-  zmq/zmqpublishnotifier.h\n+  zmq/zmqpublishnotifier.h \\\n+  zmq/zmqrpc.h\n \n \n obj/build.h: FORCE\n@@ -253,7 +254,8 @@ libbitcoin_zmq_a_CXXFLAGS = $(AM_CXXFLAGS) $(PIE_FLAGS)\n libbitcoin_zmq_a_SOURCES = \\\n   zmq/zmqabstractnotifier.cpp \\\n   zmq/zmqnotificationinterface.cpp \\\n-  zmq/zmqpublishnotifier.cpp\n+  zmq/zmqpublishnotifier.cpp \\\n+  zmq/zmqrpc.cpp\n endif\n \n "
      },
      {
        "sha": "79f1ba91b7846fe7818ce290710284ea111d3a92",
        "filename": "src/init.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/161e8d40a4e4c0e701b6c8142b8dcacf2190545e/src/init.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/161e8d40a4e4c0e701b6c8142b8dcacf2190545e/src/init.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/init.cpp?ref=161e8d40a4e4c0e701b6c8142b8dcacf2190545e",
        "patch": "@@ -62,6 +62,7 @@\n \n #if ENABLE_ZMQ\n #include <zmq/zmqnotificationinterface.h>\n+#include <zmq/zmqrpc.h>\n #endif\n \n bool fFeeEstimatesInitialized = false;\n@@ -1287,6 +1288,9 @@ bool AppInitMain()\n      */\n     RegisterAllCoreRPCCommands(tableRPC);\n     g_wallet_init_interface.RegisterRPC(tableRPC);\n+#if ENABLE_ZMQ\n+    RegisterZMQRPCCommands(tableRPC);\n+#endif\n \n     /* Start the RPC server already.  It will be started in \"warmup\" mode\n      * and not really process calls already (but it will signify connections"
      },
      {
        "sha": "8cbc9699729505e43fb2c3f63523c3927d5913f8",
        "filename": "src/zmq/zmqnotificationinterface.cpp",
        "status": "modified",
        "additions": 10,
        "deletions": 1,
        "changes": 11,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/161e8d40a4e4c0e701b6c8142b8dcacf2190545e/src/zmq/zmqnotificationinterface.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/161e8d40a4e4c0e701b6c8142b8dcacf2190545e/src/zmq/zmqnotificationinterface.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/zmq/zmqnotificationinterface.cpp?ref=161e8d40a4e4c0e701b6c8142b8dcacf2190545e",
        "patch": "@@ -1,4 +1,4 @@\n-// Copyright (c) 2015-2017 The Bitcoin Core developers\n+// Copyright (c) 2015-2018 The Bitcoin Core developers\n // Distributed under the MIT software license, see the accompanying\n // file COPYING or http://www.opensource.org/licenses/mit-license.php.\n \n@@ -29,6 +29,15 @@ CZMQNotificationInterface::~CZMQNotificationInterface()\n     }\n }\n \n+std::list<const CZMQAbstractNotifier*> CZMQNotificationInterface::GetActiveNotifiers() const\n+{\n+    std::list<const CZMQAbstractNotifier*> result;\n+    for (const auto* n : notifiers) {\n+        result.push_back(n);\n+    }\n+    return result;\n+}\n+\n CZMQNotificationInterface* CZMQNotificationInterface::Create()\n {\n     CZMQNotificationInterface* notificationInterface = nullptr;"
      },
      {
        "sha": "a0cc26a162b8fff0ffab25578f2b875adc762ade",
        "filename": "src/zmq/zmqnotificationinterface.h",
        "status": "modified",
        "additions": 3,
        "deletions": 1,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/161e8d40a4e4c0e701b6c8142b8dcacf2190545e/src/zmq/zmqnotificationinterface.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/161e8d40a4e4c0e701b6c8142b8dcacf2190545e/src/zmq/zmqnotificationinterface.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/zmq/zmqnotificationinterface.h?ref=161e8d40a4e4c0e701b6c8142b8dcacf2190545e",
        "patch": "@@ -1,4 +1,4 @@\n-// Copyright (c) 2015-2017 The Bitcoin Core developers\n+// Copyright (c) 2015-2018 The Bitcoin Core developers\n // Distributed under the MIT software license, see the accompanying\n // file COPYING or http://www.opensource.org/licenses/mit-license.php.\n \n@@ -18,6 +18,8 @@ class CZMQNotificationInterface final : public CValidationInterface\n public:\n     virtual ~CZMQNotificationInterface();\n \n+    std::list<const CZMQAbstractNotifier*> GetActiveNotifiers() const;\n+\n     static CZMQNotificationInterface* Create();\n \n protected:"
      },
      {
        "sha": "4f88bf4eb96f2eaf3d69562487e4b8a8dd6e03be",
        "filename": "src/zmq/zmqrpc.cpp",
        "status": "added",
        "additions": 61,
        "deletions": 0,
        "changes": 61,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/161e8d40a4e4c0e701b6c8142b8dcacf2190545e/src/zmq/zmqrpc.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/161e8d40a4e4c0e701b6c8142b8dcacf2190545e/src/zmq/zmqrpc.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/zmq/zmqrpc.cpp?ref=161e8d40a4e4c0e701b6c8142b8dcacf2190545e",
        "patch": "@@ -0,0 +1,61 @@\n+// Copyright (c) 2018 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <zmq/zmqrpc.h>\n+\n+#include <rpc/server.h>\n+#include <zmq/zmqabstractnotifier.h>\n+#include <zmq/zmqnotificationinterface.h>\n+\n+#include <univalue.h>\n+\n+namespace {\n+\n+UniValue getzmqnotifications(const JSONRPCRequest& request)\n+{\n+    if (request.fHelp || request.params.size() != 0) {\n+        throw std::runtime_error(\n+            \"getzmqnotifications\\n\"\n+            \"\\nReturns information about the active ZeroMQ notifications.\\n\"\n+            \"\\nResult:\\n\"\n+            \"[\\n\"\n+            \"  {                        (json object)\\n\"\n+            \"    \\\"type\\\": \\\"pubhashtx\\\",   (string) Type of notification\\n\"\n+            \"    \\\"address\\\": \\\"...\\\"       (string) Address of the publisher\\n\"\n+            \"  },\\n\"\n+            \"  ...\\n\"\n+            \"]\\n\"\n+            \"\\nExamples:\\n\"\n+            + HelpExampleCli(\"getzmqnotifications\", \"\")\n+            + HelpExampleRpc(\"getzmqnotifications\", \"\")\n+        );\n+    }\n+\n+    UniValue result(UniValue::VARR);\n+    if (g_zmq_notification_interface != nullptr) {\n+        for (const auto* n : g_zmq_notification_interface->GetActiveNotifiers()) {\n+            UniValue obj(UniValue::VOBJ);\n+            obj.pushKV(\"type\", n->GetType());\n+            obj.pushKV(\"address\", n->GetAddress());\n+            result.push_back(obj);\n+        }\n+    }\n+\n+    return result;\n+}\n+\n+const CRPCCommand commands[] =\n+{ //  category              name                                actor (function)                argNames\n+  //  -----------------     ------------------------            -----------------------         ----------\n+    { \"zmq\",                \"getzmqnotifications\",              &getzmqnotifications,           {} },\n+};\n+\n+} // anonymous namespace\n+\n+void RegisterZMQRPCCommands(CRPCTable& t)\n+{\n+    for (const auto& c : commands) {\n+        t.appendCommand(c.name, &c);\n+    }\n+}"
      },
      {
        "sha": "5a810a16fb23afe3c79dff57bdecb6a51fc66f08",
        "filename": "src/zmq/zmqrpc.h",
        "status": "added",
        "additions": 12,
        "deletions": 0,
        "changes": 12,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/161e8d40a4e4c0e701b6c8142b8dcacf2190545e/src/zmq/zmqrpc.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/161e8d40a4e4c0e701b6c8142b8dcacf2190545e/src/zmq/zmqrpc.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/zmq/zmqrpc.h?ref=161e8d40a4e4c0e701b6c8142b8dcacf2190545e",
        "patch": "@@ -0,0 +1,12 @@\n+// Copyright (c) 2018 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_ZMQ_ZMQRPC_H\n+#define BITCOIN_ZMQ_ZMQRPC_H\n+\n+class CRPCTable;\n+\n+void RegisterZMQRPCCommands(CRPCTable& t);\n+\n+#endif // BITCOIN_ZMQ_ZMRRPC_H"
      },
      {
        "sha": "eb789face2d011613603f8c2266d78559d0653ec",
        "filename": "test/functional/rpc_zmq.py",
        "status": "added",
        "additions": 33,
        "deletions": 0,
        "changes": 33,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/161e8d40a4e4c0e701b6c8142b8dcacf2190545e/test/functional/rpc_zmq.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/161e8d40a4e4c0e701b6c8142b8dcacf2190545e/test/functional/rpc_zmq.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/rpc_zmq.py?ref=161e8d40a4e4c0e701b6c8142b8dcacf2190545e",
        "patch": "@@ -0,0 +1,33 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2018 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test for the ZMQ RPC methods.\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal\n+\n+\n+class RPCZMQTest(BitcoinTestFramework):\n+\n+    address = \"tcp://127.0.0.1:28332\"\n+\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+        self.setup_clean_chain = True\n+\n+    def run_test(self):\n+        self._test_getzmqnotifications()\n+\n+    def _test_getzmqnotifications(self):\n+        self.restart_node(0, extra_args=[])\n+        assert_equal(self.nodes[0].getzmqnotifications(), [])\n+\n+        self.restart_node(0, extra_args=[\"-zmqpubhashtx=%s\" % self.address])\n+        assert_equal(self.nodes[0].getzmqnotifications(), [\n+            {\"type\": \"pubhashtx\", \"address\": self.address},\n+        ])\n+\n+\n+if __name__ == '__main__':\n+    RPCZMQTest().main()"
      },
      {
        "sha": "c3a5468296dd87b66588816b6535751cd40807c6",
        "filename": "test/functional/test_runner.py",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/161e8d40a4e4c0e701b6c8142b8dcacf2190545e/test/functional/test_runner.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/161e8d40a4e4c0e701b6c8142b8dcacf2190545e/test/functional/test_runner.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/test_runner.py?ref=161e8d40a4e4c0e701b6c8142b8dcacf2190545e",
        "patch": "@@ -116,6 +116,7 @@\n     'feature_versionbits_warning.py',\n     'rpc_preciousblock.py',\n     'wallet_importprunedfunds.py',\n+    'rpc_zmq.py',\n     'rpc_signmessage.py',\n     'feature_nulldummy.py',\n     'mempool_accept.py',"
      }
    ]
  }
]