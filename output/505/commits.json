[
  {
    "sha": "3a8029f0335dbdb039eccb7bddc88fb0cd1ff971",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzozYTgwMjlmMDMzNWRiZGIwMzllY2NiN2JkZGM4OGZiMGNkMWZmOTcx",
    "commit": {
      "author": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2011-05-11T20:50:14Z"
      },
      "committer": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2011-05-11T20:50:18Z"
      },
      "message": "Update nTime after nExtraNonce to avoid potential race\n(extraNonce being reset due to just-occurred time change after nTime is set)",
      "tree": {
        "sha": "cbc16005e90290d3eb60fcbcf79507ef9124463a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/cbc16005e90290d3eb60fcbcf79507ef9124463a"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3a8029f0335dbdb039eccb7bddc88fb0cd1ff971",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3a8029f0335dbdb039eccb7bddc88fb0cd1ff971",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/3a8029f0335dbdb039eccb7bddc88fb0cd1ff971",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3a8029f0335dbdb039eccb7bddc88fb0cd1ff971/comments",
    "author": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "64ad448adc67f3c32fe0dfe074c82a8377f67ee7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/64ad448adc67f3c32fe0dfe074c82a8377f67ee7",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/64ad448adc67f3c32fe0dfe074c82a8377f67ee7"
      }
    ],
    "stats": {
      "total": 8,
      "additions": 4,
      "deletions": 4
    },
    "files": [
      {
        "sha": "2175dddb4b23d30cb3ee21231717b4bea9d53710",
        "filename": "rpc.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 4,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/3a8029f0335dbdb039eccb7bddc88fb0cd1ff971/rpc.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/3a8029f0335dbdb039eccb7bddc88fb0cd1ff971/rpc.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/rpc.cpp?ref=3a8029f0335dbdb039eccb7bddc88fb0cd1ff971",
        "patch": "@@ -1330,15 +1330,15 @@ Value getwork(const Array& params, bool fHelp)\n             vNewBlock.push_back(pblock);\n         }\n \n-        // Update nTime\n-        pblock->nTime = max(pindexPrev->GetMedianTimePast()+1, GetAdjustedTime());\n-        pblock->nNonce = 0;\n-\n         // Update nExtraNonce\n         static unsigned int nExtraNonce = 0;\n         static int64 nPrevTime = 0;\n         IncrementExtraNonce(pblock, pindexPrev, nExtraNonce, nPrevTime);\n \n+        // Update nTime\n+        pblock->nTime = max(pindexPrev->GetMedianTimePast()+1, GetAdjustedTime());\n+        pblock->nNonce = 0;\n+\n         // Save\n         mapNewBlock[pblock->hashMerkleRoot] = make_pair(pblock, nExtraNonce);\n "
      }
    ]
  },
  {
    "sha": "aa4a9c5250f94c82a9e4077a1b56ba634a9841fa",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzphYTRhOWM1MjUwZjk0YzgyYTllNDA3N2ExYjU2YmE2MzRhOTg0MWZh",
    "commit": {
      "author": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2011-05-11T21:12:47Z"
      },
      "committer": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2011-05-11T21:13:04Z"
      },
      "message": "Reset extraNonce only every 15 seconds, just in case some miner is updating time himself and stuff",
      "tree": {
        "sha": "63db54924d30f5eaf5580d8722277437cf511267",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/63db54924d30f5eaf5580d8722277437cf511267"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/aa4a9c5250f94c82a9e4077a1b56ba634a9841fa",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/aa4a9c5250f94c82a9e4077a1b56ba634a9841fa",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/aa4a9c5250f94c82a9e4077a1b56ba634a9841fa",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/aa4a9c5250f94c82a9e4077a1b56ba634a9841fa/comments",
    "author": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "3a8029f0335dbdb039eccb7bddc88fb0cd1ff971",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3a8029f0335dbdb039eccb7bddc88fb0cd1ff971",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/3a8029f0335dbdb039eccb7bddc88fb0cd1ff971"
      }
    ],
    "stats": {
      "total": 2,
      "additions": 1,
      "deletions": 1
    },
    "files": [
      {
        "sha": "bf7c99349da2b76f4f53c359db869d2af8283ad9",
        "filename": "main.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/aa4a9c5250f94c82a9e4077a1b56ba634a9841fa/main.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/aa4a9c5250f94c82a9e4077a1b56ba634a9841fa/main.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/main.cpp?ref=aa4a9c5250f94c82a9e4077a1b56ba634a9841fa",
        "patch": "@@ -3448,7 +3448,7 @@ void IncrementExtraNonce(CBlock* pblock, CBlockIndex* pindexPrev, unsigned int&\n {\n     // Update nExtraNonce\n     int64 nNow = max(pindexPrev->GetMedianTimePast()+1, GetAdjustedTime());\n-    if (++nExtraNonce >= 0x7f && nNow > nPrevTime+1)\n+    if (++nExtraNonce >= 0x7f && nNow > nPrevTime+15)\n     {\n         nExtraNonce = 1;\n         nPrevTime = nNow;"
      }
    ]
  },
  {
    "sha": "02d87b3aa375810bcd63dcf72637e788a75fc7d4",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowMmQ4N2IzYWEzNzU4MTBiY2Q2M2RjZjcyNjM3ZTc4OGE3NWZjN2Q0",
    "commit": {
      "author": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2011-06-13T00:16:54Z"
      },
      "committer": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2011-06-13T00:17:01Z"
      },
      "message": "Reset extraNonce only when prevBlock changes, so miners can continue updating the time on their work until it's stale",
      "tree": {
        "sha": "2ed3f254ae58f99b476286a54219b70677341a29",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2ed3f254ae58f99b476286a54219b70677341a29"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/02d87b3aa375810bcd63dcf72637e788a75fc7d4",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/02d87b3aa375810bcd63dcf72637e788a75fc7d4",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/02d87b3aa375810bcd63dcf72637e788a75fc7d4",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/02d87b3aa375810bcd63dcf72637e788a75fc7d4/comments",
    "author": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "aa4a9c5250f94c82a9e4077a1b56ba634a9841fa",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/aa4a9c5250f94c82a9e4077a1b56ba634a9841fa",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/aa4a9c5250f94c82a9e4077a1b56ba634a9841fa"
      }
    ],
    "stats": {
      "total": 9,
      "additions": 5,
      "deletions": 4
    },
    "files": [
      {
        "sha": "d71d411644988f19db170aaab857a5df8ca3b243",
        "filename": "main.cpp",
        "status": "modified",
        "additions": 5,
        "deletions": 4,
        "changes": 9,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/02d87b3aa375810bcd63dcf72637e788a75fc7d4/main.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/02d87b3aa375810bcd63dcf72637e788a75fc7d4/main.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/main.cpp?ref=02d87b3aa375810bcd63dcf72637e788a75fc7d4",
        "patch": "@@ -3447,12 +3447,13 @@ CBlock* CreateNewBlock(CReserveKey& reservekey)\n void IncrementExtraNonce(CBlock* pblock, CBlockIndex* pindexPrev, unsigned int& nExtraNonce, int64& nPrevTime)\n {\n     // Update nExtraNonce\n-    int64 nNow = max(pindexPrev->GetMedianTimePast()+1, GetAdjustedTime());\n-    if (++nExtraNonce >= 0x7f && nNow > nPrevTime+15)\n+    static uint256 hashPrevBlock;\n+    if (hashPrevBlock != pblock->hashPrevBlock)\n     {\n-        nExtraNonce = 1;\n-        nPrevTime = nNow;\n+        nExtraNonce = 0;\n+        hashPrevBlock = pblock->hashPrevBlock;\n     }\n+    ++nExtraNonce;\n     pblock->vtx[0].vin[0].scriptSig = CScript() << pblock->nBits << CBigNum(nExtraNonce);\n     pblock->hashMerkleRoot = pblock->BuildMerkleTree();\n }"
      }
    ]
  },
  {
    "sha": "b760e254584a85db7195a4b1a67731a8cc12f9ed",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiNzYwZTI1NDU4NGE4NWRiNzE5NWE0YjFhNjc3MzFhOGNjMTJmOWVk",
    "commit": {
      "author": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2011-09-06T20:43:32Z"
      },
      "committer": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2011-09-06T20:43:32Z"
      },
      "message": "Merge branch 'getwork_dedupe' into unique_coinbase",
      "tree": {
        "sha": "38de6d2be604a3212a39b460649511555f771cf1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/38de6d2be604a3212a39b460649511555f771cf1"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b760e254584a85db7195a4b1a67731a8cc12f9ed",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b760e254584a85db7195a4b1a67731a8cc12f9ed",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/b760e254584a85db7195a4b1a67731a8cc12f9ed",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b760e254584a85db7195a4b1a67731a8cc12f9ed/comments",
    "author": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "829e21733b1c232c79c1a2d10598eb47b2f5f7f9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/829e21733b1c232c79c1a2d10598eb47b2f5f7f9",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/829e21733b1c232c79c1a2d10598eb47b2f5f7f9"
      },
      {
        "sha": "02d87b3aa375810bcd63dcf72637e788a75fc7d4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/02d87b3aa375810bcd63dcf72637e788a75fc7d4",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/02d87b3aa375810bcd63dcf72637e788a75fc7d4"
      }
    ],
    "stats": {
      "total": 17,
      "additions": 9,
      "deletions": 8
    },
    "files": [
      {
        "sha": "480d2d8bbfd0409f58f3b16a03f0d9fb66a33ba1",
        "filename": "src/main.cpp",
        "status": "modified",
        "additions": 5,
        "deletions": 4,
        "changes": 9,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b760e254584a85db7195a4b1a67731a8cc12f9ed/src/main.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b760e254584a85db7195a4b1a67731a8cc12f9ed/src/main.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/main.cpp?ref=b760e254584a85db7195a4b1a67731a8cc12f9ed",
        "patch": "@@ -2797,12 +2797,13 @@ CBlock* CreateNewBlock(CReserveKey& reservekey)\n void IncrementExtraNonce(CBlock* pblock, CBlockIndex* pindexPrev, unsigned int& nExtraNonce, int64& nPrevTime)\n {\n     // Update nExtraNonce\n-    int64 nNow = max(pindexPrev->GetMedianTimePast()+1, GetAdjustedTime());\n-    if (++nExtraNonce >= 0x7f && nNow > nPrevTime+1)\n+    static uint256 hashPrevBlock;\n+    if (hashPrevBlock != pblock->hashPrevBlock)\n     {\n-        nExtraNonce = 1;\n-        nPrevTime = nNow;\n+        nExtraNonce = 0;\n+        hashPrevBlock = pblock->hashPrevBlock;\n     }\n+    ++nExtraNonce;\n     pblock->vtx[0].vin[0].scriptSig = CScript() << pblock->nBits << CBigNum(nExtraNonce);\n     pblock->hashMerkleRoot = pblock->BuildMerkleTree();\n }"
      },
      {
        "sha": "9e7cfc5b3c836f91c849e317fef1a43116d34538",
        "filename": "src/rpc.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 4,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b760e254584a85db7195a4b1a67731a8cc12f9ed/src/rpc.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b760e254584a85db7195a4b1a67731a8cc12f9ed/src/rpc.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc.cpp?ref=b760e254584a85db7195a4b1a67731a8cc12f9ed",
        "patch": "@@ -1614,15 +1614,15 @@ Value getwork(const Array& params, bool fHelp)\n             vNewBlock.push_back(pblock);\n         }\n \n-        // Update nTime\n-        pblock->nTime = max(pindexPrev->GetMedianTimePast()+1, GetAdjustedTime());\n-        pblock->nNonce = 0;\n-\n         // Update nExtraNonce\n         static unsigned int nExtraNonce = 0;\n         static int64 nPrevTime = 0;\n         IncrementExtraNonce(pblock, pindexPrev, nExtraNonce, nPrevTime);\n \n+        // Update nTime\n+        pblock->nTime = max(pindexPrev->GetMedianTimePast()+1, GetAdjustedTime());\n+        pblock->nNonce = 0;\n+\n         // Save\n         mapNewBlock[pblock->hashMerkleRoot] = make_pair(pblock, nExtraNonce);\n "
      }
    ]
  },
  {
    "sha": "49c8e53ee2c2705fd0a8731458cb776dad7e1f6e",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo0OWM4ZTUzZWUyYzI3MDVmZDBhODczMTQ1OGNiNzc2ZGFkN2UxZjZl",
    "commit": {
      "author": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2011-07-25T15:59:41Z"
      },
      "committer": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2011-09-06T20:43:35Z"
      },
      "message": "Save coinbase, not just extraNonce",
      "tree": {
        "sha": "7945b36ee89ee31136cb18a0d0385b90877318a7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7945b36ee89ee31136cb18a0d0385b90877318a7"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/49c8e53ee2c2705fd0a8731458cb776dad7e1f6e",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/49c8e53ee2c2705fd0a8731458cb776dad7e1f6e",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/49c8e53ee2c2705fd0a8731458cb776dad7e1f6e",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/49c8e53ee2c2705fd0a8731458cb776dad7e1f6e/comments",
    "author": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "b760e254584a85db7195a4b1a67731a8cc12f9ed",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b760e254584a85db7195a4b1a67731a8cc12f9ed",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/b760e254584a85db7195a4b1a67731a8cc12f9ed"
      }
    ],
    "stats": {
      "total": 8,
      "additions": 4,
      "deletions": 4
    },
    "files": [
      {
        "sha": "2a458423ce02ad2dbbfd9287e77f7ee97d3782a5",
        "filename": "src/rpc.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 4,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/49c8e53ee2c2705fd0a8731458cb776dad7e1f6e/src/rpc.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/49c8e53ee2c2705fd0a8731458cb776dad7e1f6e/src/rpc.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc.cpp?ref=49c8e53ee2c2705fd0a8731458cb776dad7e1f6e",
        "patch": "@@ -1581,7 +1581,8 @@ Value getwork(const Array& params, bool fHelp)\n     if (IsInitialBlockDownload())\n         throw JSONRPCError(-10, \"Bitcoin is downloading blocks...\");\n \n-    static map<uint256, pair<CBlock*, unsigned int> > mapNewBlock;\n+    typedef map<uint256, pair<CBlock*, CScript> > mapNewBlock_t;\n+    static mapNewBlock_t mapNewBlock;\n     static vector<CBlock*> vNewBlock;\n     static CReserveKey reservekey(pwalletMain);\n \n@@ -1624,7 +1625,7 @@ Value getwork(const Array& params, bool fHelp)\n         pblock->nNonce = 0;\n \n         // Save\n-        mapNewBlock[pblock->hashMerkleRoot] = make_pair(pblock, nExtraNonce);\n+        mapNewBlock[pblock->hashMerkleRoot] = make_pair(pblock, pblock->vtx[0].vin[0].scriptSig);\n \n         // Prebuild hash buffers\n         char pmidstate[32];\n@@ -1657,11 +1658,10 @@ Value getwork(const Array& params, bool fHelp)\n         if (!mapNewBlock.count(pdata->hashMerkleRoot))\n             return false;\n         CBlock* pblock = mapNewBlock[pdata->hashMerkleRoot].first;\n-        unsigned int nExtraNonce = mapNewBlock[pdata->hashMerkleRoot].second;\n \n         pblock->nTime = pdata->nTime;\n         pblock->nNonce = pdata->nNonce;\n-        pblock->vtx[0].vin[0].scriptSig = CScript() << pblock->nBits << CBigNum(nExtraNonce);\n+        pblock->vtx[0].vin[0].scriptSig = mapNewBlock[pdata->hashMerkleRoot].second;\n         pblock->hashMerkleRoot = pblock->BuildMerkleTree();\n \n         return CheckWork(pblock, *pwalletMain, reservekey);"
      }
    ]
  },
  {
    "sha": "83f4cd156e9d52bd7c4351336dfa4806a43ee4e4",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo4M2Y0Y2QxNTZlOWQ1MmJkN2M0MzUxMzM2ZGZhNDgwNmE0M2VlNGU0",
    "commit": {
      "author": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2011-09-06T20:39:05Z"
      },
      "committer": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2011-09-06T20:43:40Z"
      },
      "message": "Bugfix: Use timestamp in coinbase rather than \"bits\", needed to ensure coinbase txn is unique even if address is the same",
      "tree": {
        "sha": "f4e2cd9e0f8be15977e3e2e9a224719fd195f8f1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f4e2cd9e0f8be15977e3e2e9a224719fd195f8f1"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/83f4cd156e9d52bd7c4351336dfa4806a43ee4e4",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/83f4cd156e9d52bd7c4351336dfa4806a43ee4e4",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/83f4cd156e9d52bd7c4351336dfa4806a43ee4e4",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/83f4cd156e9d52bd7c4351336dfa4806a43ee4e4/comments",
    "author": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "49c8e53ee2c2705fd0a8731458cb776dad7e1f6e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/49c8e53ee2c2705fd0a8731458cb776dad7e1f6e",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/49c8e53ee2c2705fd0a8731458cb776dad7e1f6e"
      }
    ],
    "stats": {
      "total": 18,
      "additions": 8,
      "deletions": 10
    },
    "files": [
      {
        "sha": "10308bc9dd9335e568e823a76f08c502deccc8d1",
        "filename": "src/main.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 4,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/83f4cd156e9d52bd7c4351336dfa4806a43ee4e4/src/main.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/83f4cd156e9d52bd7c4351336dfa4806a43ee4e4/src/main.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/main.cpp?ref=83f4cd156e9d52bd7c4351336dfa4806a43ee4e4",
        "patch": "@@ -2794,7 +2794,7 @@ CBlock* CreateNewBlock(CReserveKey& reservekey)\n }\n \n \n-void IncrementExtraNonce(CBlock* pblock, CBlockIndex* pindexPrev, unsigned int& nExtraNonce, int64& nPrevTime)\n+void IncrementExtraNonce(CBlock* pblock, CBlockIndex* pindexPrev, unsigned int& nExtraNonce)\n {\n     // Update nExtraNonce\n     static uint256 hashPrevBlock;\n@@ -2804,7 +2804,7 @@ void IncrementExtraNonce(CBlock* pblock, CBlockIndex* pindexPrev, unsigned int&\n         hashPrevBlock = pblock->hashPrevBlock;\n     }\n     ++nExtraNonce;\n-    pblock->vtx[0].vin[0].scriptSig = CScript() << pblock->nBits << CBigNum(nExtraNonce);\n+    pblock->vtx[0].vin[0].scriptSig = CScript() << pblock->nTime << CBigNum(nExtraNonce);\n     pblock->hashMerkleRoot = pblock->BuildMerkleTree();\n }\n \n@@ -2902,7 +2902,6 @@ void static BitcoinMiner(CWallet *pwallet)\n     // Each thread has its own key and counter\n     CReserveKey reservekey(pwallet);\n     unsigned int nExtraNonce = 0;\n-    int64 nPrevTime = 0;\n \n     while (fGenerateBitcoins)\n     {\n@@ -2929,7 +2928,7 @@ void static BitcoinMiner(CWallet *pwallet)\n         auto_ptr<CBlock> pblock(CreateNewBlock(reservekey));\n         if (!pblock.get())\n             return;\n-        IncrementExtraNonce(pblock.get(), pindexPrev, nExtraNonce, nPrevTime);\n+        IncrementExtraNonce(pblock.get(), pindexPrev, nExtraNonce);\n \n         printf(\"Running BitcoinMiner with %d transactions in block\\n\", pblock->vtx.size());\n "
      },
      {
        "sha": "0b05febb4d01b41a54507d63cbeeee818817c1b4",
        "filename": "src/main.h",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/83f4cd156e9d52bd7c4351336dfa4806a43ee4e4/src/main.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/83f4cd156e9d52bd7c4351336dfa4806a43ee4e4/src/main.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/main.h?ref=83f4cd156e9d52bd7c4351336dfa4806a43ee4e4",
        "patch": "@@ -96,7 +96,7 @@ bool ProcessMessages(CNode* pfrom);\n bool SendMessages(CNode* pto, bool fSendTrickle);\n void GenerateBitcoins(bool fGenerate, CWallet* pwallet);\n CBlock* CreateNewBlock(CReserveKey& reservekey);\n-void IncrementExtraNonce(CBlock* pblock, CBlockIndex* pindexPrev, unsigned int& nExtraNonce, int64& nPrevTime);\n+void IncrementExtraNonce(CBlock* pblock, CBlockIndex* pindexPrev, unsigned int& nExtraNonce);\n void FormatHashBuffers(CBlock* pblock, char* pmidstate, char* pdata, char* phash1);\n bool CheckWork(CBlock* pblock, CWallet& wallet, CReserveKey& reservekey);\n bool CheckProofOfWork(uint256 hash, unsigned int nBits);"
      },
      {
        "sha": "33cfa77b40055b1f3a227cd154155cc767d991c6",
        "filename": "src/rpc.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 5,
        "changes": 9,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/83f4cd156e9d52bd7c4351336dfa4806a43ee4e4/src/rpc.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/83f4cd156e9d52bd7c4351336dfa4806a43ee4e4/src/rpc.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc.cpp?ref=83f4cd156e9d52bd7c4351336dfa4806a43ee4e4",
        "patch": "@@ -1615,15 +1615,14 @@ Value getwork(const Array& params, bool fHelp)\n             vNewBlock.push_back(pblock);\n         }\n \n-        // Update nExtraNonce\n-        static unsigned int nExtraNonce = 0;\n-        static int64 nPrevTime = 0;\n-        IncrementExtraNonce(pblock, pindexPrev, nExtraNonce, nPrevTime);\n-\n         // Update nTime\n         pblock->nTime = max(pindexPrev->GetMedianTimePast()+1, GetAdjustedTime());\n         pblock->nNonce = 0;\n \n+        // Update nExtraNonce\n+        static unsigned int nExtraNonce = 0;\n+        IncrementExtraNonce(pblock, pindexPrev, nExtraNonce);\n+\n         // Save\n         mapNewBlock[pblock->hashMerkleRoot] = make_pair(pblock, pblock->vtx[0].vin[0].scriptSig);\n "
      }
    ]
  },
  {
    "sha": "5a3dea451d8a53ec87cbd7a7d1405a970fb1b263",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo1YTNkZWE0NTFkOGE1M2VjODdjYmQ3YTdkMTQwNWE5NzBmYjFiMjYz",
    "commit": {
      "author": {
        "name": "Gavin Andresen",
        "email": "gavinandresen@gmail.com",
        "date": "2011-09-07T14:51:57Z"
      },
      "committer": {
        "name": "Gavin Andresen",
        "email": "gavinandresen@gmail.com",
        "date": "2011-09-07T14:51:57Z"
      },
      "message": "Merge branch 'unique_coinbase' of git://gitorious.org/~Luke-Jr/bitcoin/luke-jr-bitcoin into unique_coinbase",
      "tree": {
        "sha": "84a47b03eb615c8d8a4c3df2f7d0dbb0ad698dc0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/84a47b03eb615c8d8a4c3df2f7d0dbb0ad698dc0"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5a3dea451d8a53ec87cbd7a7d1405a970fb1b263",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5a3dea451d8a53ec87cbd7a7d1405a970fb1b263",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/5a3dea451d8a53ec87cbd7a7d1405a970fb1b263",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5a3dea451d8a53ec87cbd7a7d1405a970fb1b263/comments",
    "author": {
      "login": "gavinandresen",
      "id": 331997,
      "node_id": "MDQ6VXNlcjMzMTk5Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/331997?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gavinandresen",
      "html_url": "https://github.com/gavinandresen",
      "followers_url": "https://api.github.com/users/gavinandresen/followers",
      "following_url": "https://api.github.com/users/gavinandresen/following{/other_user}",
      "gists_url": "https://api.github.com/users/gavinandresen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gavinandresen/subscriptions",
      "organizations_url": "https://api.github.com/users/gavinandresen/orgs",
      "repos_url": "https://api.github.com/users/gavinandresen/repos",
      "events_url": "https://api.github.com/users/gavinandresen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gavinandresen/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "gavinandresen",
      "id": 331997,
      "node_id": "MDQ6VXNlcjMzMTk5Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/331997?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gavinandresen",
      "html_url": "https://github.com/gavinandresen",
      "followers_url": "https://api.github.com/users/gavinandresen/followers",
      "following_url": "https://api.github.com/users/gavinandresen/following{/other_user}",
      "gists_url": "https://api.github.com/users/gavinandresen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gavinandresen/subscriptions",
      "organizations_url": "https://api.github.com/users/gavinandresen/orgs",
      "repos_url": "https://api.github.com/users/gavinandresen/repos",
      "events_url": "https://api.github.com/users/gavinandresen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gavinandresen/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "f92f022edaa2f14951b9ce8304a304ff9693ae16",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f92f022edaa2f14951b9ce8304a304ff9693ae16",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/f92f022edaa2f14951b9ce8304a304ff9693ae16"
      },
      {
        "sha": "83f4cd156e9d52bd7c4351336dfa4806a43ee4e4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/83f4cd156e9d52bd7c4351336dfa4806a43ee4e4",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/83f4cd156e9d52bd7c4351336dfa4806a43ee4e4"
      }
    ],
    "stats": {
      "total": 29,
      "additions": 14,
      "deletions": 15
    },
    "files": [
      {
        "sha": "5b159fe41545fe730467580f9a442f0ccf50cc60",
        "filename": "src/main.cpp",
        "status": "modified",
        "additions": 8,
        "deletions": 8,
        "changes": 16,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5a3dea451d8a53ec87cbd7a7d1405a970fb1b263/src/main.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5a3dea451d8a53ec87cbd7a7d1405a970fb1b263/src/main.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/main.cpp?ref=5a3dea451d8a53ec87cbd7a7d1405a970fb1b263",
        "patch": "@@ -2798,16 +2798,17 @@ CBlock* CreateNewBlock(CReserveKey& reservekey)\n }\n \n \n-void IncrementExtraNonce(CBlock* pblock, CBlockIndex* pindexPrev, unsigned int& nExtraNonce, int64& nPrevTime)\n+void IncrementExtraNonce(CBlock* pblock, CBlockIndex* pindexPrev, unsigned int& nExtraNonce)\n {\n     // Update nExtraNonce\n-    int64 nNow = max(pindexPrev->GetMedianTimePast()+1, GetAdjustedTime());\n-    if (++nExtraNonce >= 0x7f && nNow > nPrevTime+1)\n+    static uint256 hashPrevBlock;\n+    if (hashPrevBlock != pblock->hashPrevBlock)\n     {\n-        nExtraNonce = 1;\n-        nPrevTime = nNow;\n+        nExtraNonce = 0;\n+        hashPrevBlock = pblock->hashPrevBlock;\n     }\n-    pblock->vtx[0].vin[0].scriptSig = CScript() << pblock->nBits << CBigNum(nExtraNonce);\n+    ++nExtraNonce;\n+    pblock->vtx[0].vin[0].scriptSig = CScript() << pblock->nTime << CBigNum(nExtraNonce);\n     pblock->hashMerkleRoot = pblock->BuildMerkleTree();\n }\n \n@@ -2905,7 +2906,6 @@ void static BitcoinMiner(CWallet *pwallet)\n     // Each thread has its own key and counter\n     CReserveKey reservekey(pwallet);\n     unsigned int nExtraNonce = 0;\n-    int64 nPrevTime = 0;\n \n     while (fGenerateBitcoins)\n     {\n@@ -2932,7 +2932,7 @@ void static BitcoinMiner(CWallet *pwallet)\n         auto_ptr<CBlock> pblock(CreateNewBlock(reservekey));\n         if (!pblock.get())\n             return;\n-        IncrementExtraNonce(pblock.get(), pindexPrev, nExtraNonce, nPrevTime);\n+        IncrementExtraNonce(pblock.get(), pindexPrev, nExtraNonce);\n \n         printf(\"Running BitcoinMiner with %d transactions in block\\n\", pblock->vtx.size());\n "
      },
      {
        "sha": "c400145d015bc1eb7a6cbd1db2fb5ed8e03aecc6",
        "filename": "src/main.h",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5a3dea451d8a53ec87cbd7a7d1405a970fb1b263/src/main.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5a3dea451d8a53ec87cbd7a7d1405a970fb1b263/src/main.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/main.h?ref=5a3dea451d8a53ec87cbd7a7d1405a970fb1b263",
        "patch": "@@ -94,7 +94,7 @@ bool ProcessMessages(CNode* pfrom);\n bool SendMessages(CNode* pto, bool fSendTrickle);\n void GenerateBitcoins(bool fGenerate, CWallet* pwallet);\n CBlock* CreateNewBlock(CReserveKey& reservekey);\n-void IncrementExtraNonce(CBlock* pblock, CBlockIndex* pindexPrev, unsigned int& nExtraNonce, int64& nPrevTime);\n+void IncrementExtraNonce(CBlock* pblock, CBlockIndex* pindexPrev, unsigned int& nExtraNonce);\n void FormatHashBuffers(CBlock* pblock, char* pmidstate, char* pdata, char* phash1);\n bool CheckWork(CBlock* pblock, CWallet& wallet, CReserveKey& reservekey);\n bool CheckProofOfWork(uint256 hash, unsigned int nBits);"
      },
      {
        "sha": "885ffd1f2b7598f998b79885fcdb2c84322fef8b",
        "filename": "src/rpc.cpp",
        "status": "modified",
        "additions": 5,
        "deletions": 6,
        "changes": 11,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5a3dea451d8a53ec87cbd7a7d1405a970fb1b263/src/rpc.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5a3dea451d8a53ec87cbd7a7d1405a970fb1b263/src/rpc.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc.cpp?ref=5a3dea451d8a53ec87cbd7a7d1405a970fb1b263",
        "patch": "@@ -1498,7 +1498,8 @@ Value getwork(const Array& params, bool fHelp)\n     if (IsInitialBlockDownload())\n         throw JSONRPCError(-10, \"Bitcoin is downloading blocks...\");\n \n-    static map<uint256, pair<CBlock*, unsigned int> > mapNewBlock;\n+    typedef map<uint256, pair<CBlock*, CScript> > mapNewBlock_t;\n+    static mapNewBlock_t mapNewBlock;\n     static vector<CBlock*> vNewBlock;\n     static CReserveKey reservekey(pwalletMain);\n \n@@ -1537,11 +1538,10 @@ Value getwork(const Array& params, bool fHelp)\n \n         // Update nExtraNonce\n         static unsigned int nExtraNonce = 0;\n-        static int64 nPrevTime = 0;\n-        IncrementExtraNonce(pblock, pindexPrev, nExtraNonce, nPrevTime);\n+        IncrementExtraNonce(pblock, pindexPrev, nExtraNonce);\n \n         // Save\n-        mapNewBlock[pblock->hashMerkleRoot] = make_pair(pblock, nExtraNonce);\n+        mapNewBlock[pblock->hashMerkleRoot] = make_pair(pblock, pblock->vtx[0].vin[0].scriptSig);\n \n         // Prebuild hash buffers\n         char pmidstate[32];\n@@ -1574,11 +1574,10 @@ Value getwork(const Array& params, bool fHelp)\n         if (!mapNewBlock.count(pdata->hashMerkleRoot))\n             return false;\n         CBlock* pblock = mapNewBlock[pdata->hashMerkleRoot].first;\n-        unsigned int nExtraNonce = mapNewBlock[pdata->hashMerkleRoot].second;\n \n         pblock->nTime = pdata->nTime;\n         pblock->nNonce = pdata->nNonce;\n-        pblock->vtx[0].vin[0].scriptSig = CScript() << pblock->nBits << CBigNum(nExtraNonce);\n+        pblock->vtx[0].vin[0].scriptSig = mapNewBlock[pdata->hashMerkleRoot].second;\n         pblock->hashMerkleRoot = pblock->BuildMerkleTree();\n \n         return CheckWork(pblock, *pwalletMain, reservekey);"
      }
    ]
  }
]