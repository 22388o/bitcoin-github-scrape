laanwj,2012-02-14T12:38:49Z,"I'm not sure whether it's correct or not, but FYI locking isn't done around the call to `BackupWallet` in `bitcoinrpc.cpp` either.\n",https://github.com/bitcoin/bitcoin/pull/834#issuecomment-3959987,3959987,
sipa,2012-02-14T15:28:09Z,All RPC calls already lock cs_main and cs_wallet already...\n,https://github.com/bitcoin/bitcoin/pull/834#issuecomment-3962993,3962993,
laanwj,2012-02-14T15:55:53Z,Ok yeah I see now in ThreadRPCServer2... ok locking it is then\n,https://github.com/bitcoin/bitcoin/pull/834#issuecomment-3963572,3963572,
sipa,2012-02-14T15:59:27Z,"Actually, that is not necessary I think. BackupWallet() locks cs_db, flushes wallet.dat, and copies it at a stable time. Concurrent modifications to the wallet structure (which do not touch the database) are harmless.\n",https://github.com/bitcoin/bitcoin/pull/834#issuecomment-3963653,3963653,
sipa,2012-02-14T16:32:55Z,"One minor problem: in the select file dialog, .dat is not added automatically?\n",https://github.com/bitcoin/bitcoin/pull/834#issuecomment-3964395,3964395,
laanwj,2012-02-14T16:46:03Z,"Seems to be a common problem with Qt file save dialogs (see also #833). According to this stack overflow answer, the behavior with respect to automatically adding a suffix (when using the static functions such as getSaveFilename) is dependent on the platform:\n\nhttp://stackoverflow.com/questions/2609119/qt-qfiledialog-native-dialogs-only-with-static-functions\n\nYou could use QFileDialog::setDefa",https://github.com/bitcoin/bitcoin/pull/834#issuecomment-3964693,3964693,
laanwj,2012-02-14T17:24:03Z,"I think the cleanest would be to define our own static `getSaveFileName` (for example, in guiutil.cpp) that handles the default suffix properly, and use it everywhere we use `QFileDialog::getSaveFileName` now (saving .csv in export, .png in qrcode and .dat in wallet backup).\n",https://github.com/bitcoin/bitcoin/pull/834#issuecomment-3965475,3965475,
TheBlueMatt,2012-02-14T20:50:10Z,Can you update doc/assets-attribution.txt and contrib/debian/copyright with the new copyright info for new icons?\n,https://github.com/bitcoin/bitcoin/pull/834#issuecomment-3969382,3969382,
TheBlueMatt,2012-02-14T20:52:22Z,"Other than that, code looks good (though I havent tested or built anything)\n",https://github.com/bitcoin/bitcoin/pull/834#issuecomment-3969410,3969410,
sje397,2012-02-15T12:04:11Z,I updated the copyright info and resquashed.\n,https://github.com/bitcoin/bitcoin/pull/834#issuecomment-3979140,3979140,
laanwj,2012-02-15T13:25:57Z,"@sipa: I'm working on the default suffix issue, and will issue a pull request when finished. Please don't let it block this one from accepting it into 0.6.0. \n",https://github.com/bitcoin/bitcoin/pull/834#issuecomment-3980113,3980113,
sje397,2012-02-15T13:31:52Z,"@laanwj: fyi, the extension works fine on my kubuntu (built with qt 4.7.4)\n",https://github.com/bitcoin/bitcoin/pull/834#issuecomment-3980178,3980178,
laanwj,2012-02-15T13:37:29Z,"Yes the problem is that getSaveFileName gets a native file dialog, which does the right thing in Windows (and KDE, seemingly) but not in GNOME. So I'm working around this by making a wrapper that adds the default suffix when the native file dialog fails to do so... This is used in multiple places in the program so shouldn't hold up this pull.\n",https://github.com/bitcoin/bitcoin/pull/834#issuecomment-3980247,3980247,
sipa,2012-02-15T14:44:42Z,ACK\n,https://github.com/bitcoin/bitcoin/pull/834#issuecomment-3981395,3981395,
TheBlueMatt,2012-02-16T18:56:36Z,Record keeping: this fixes #370\n,https://github.com/bitcoin/bitcoin/pull/834#issuecomment-4006834,4006834,
gavinandresen,2012-02-17T18:24:35Z,ACK\n,https://github.com/bitcoin/bitcoin/pull/834#issuecomment-4025121,4025121,
