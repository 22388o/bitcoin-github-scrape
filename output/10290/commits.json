[
  {
    "sha": "b297426c9670fa83a12096f9db5666c15e1bb806",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiMjk3NDI2Yzk2NzBmYTgzYTEyMDk2ZjlkYjU2NjZjMTVlMWJiODA2",
    "commit": {
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter.wuille@gmail.com",
        "date": "2017-04-27T19:25:13Z"
      },
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter.wuille@gmail.com",
        "date": "2017-04-27T21:39:27Z"
      },
      "message": "Add -stopatheight for benchmarking",
      "tree": {
        "sha": "8f2a561a4c7e7bab59750330c3af8288bcf161bd",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/8f2a561a4c7e7bab59750330c3af8288bcf161bd"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b297426c9670fa83a12096f9db5666c15e1bb806",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b297426c9670fa83a12096f9db5666c15e1bb806",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/b297426c9670fa83a12096f9db5666c15e1bb806",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b297426c9670fa83a12096f9db5666c15e1bb806/comments",
    "author": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "a550f6e415fd8aec8c45d4704712a408c37ecd18",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a550f6e415fd8aec8c45d4704712a408c37ecd18",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/a550f6e415fd8aec8c45d4704712a408c37ecd18"
      }
    ],
    "stats": {
      "total": 8,
      "additions": 8,
      "deletions": 0
    },
    "files": [
      {
        "sha": "64f571f284295d03c99f8563d6325a40fc7c46d6",
        "filename": "src/init.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b297426c9670fa83a12096f9db5666c15e1bb806/src/init.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b297426c9670fa83a12096f9db5666c15e1bb806/src/init.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/init.cpp?ref=b297426c9670fa83a12096f9db5666c15e1bb806",
        "patch": "@@ -436,6 +436,8 @@ std::string HelpMessage(HelpMessageMode mode)\n         strUsage += HelpMessageOpt(\"-dropmessagestest=<n>\", \"Randomly drop 1 of every <n> network messages\");\n         strUsage += HelpMessageOpt(\"-fuzzmessagestest=<n>\", \"Randomly fuzz 1 of every <n> network messages\");\n         strUsage += HelpMessageOpt(\"-stopafterblockimport\", strprintf(\"Stop running after importing blocks from disk (default: %u)\", DEFAULT_STOPAFTERBLOCKIMPORT));\n+        strUsage += HelpMessageOpt(\"-stopatheight\", strprintf(\"Stop running after reaching the given height in the main chain (default: %u)\", DEFAULT_STOPATHEIGHT));\n+\n         strUsage += HelpMessageOpt(\"-limitancestorcount=<n>\", strprintf(\"Do not accept transactions if number of in-mempool ancestors is <n> or more (default: %u)\", DEFAULT_ANCESTOR_LIMIT));\n         strUsage += HelpMessageOpt(\"-limitancestorsize=<n>\", strprintf(\"Do not accept transactions whose size with all in-mempool ancestors exceeds <n> kilobytes (default: %u)\", DEFAULT_ANCESTOR_SIZE_LIMIT));\n         strUsage += HelpMessageOpt(\"-limitdescendantcount=<n>\", strprintf(\"Do not accept transactions if any ancestor would have <n> or more in-mempool descendants (default: %u)\", DEFAULT_DESCENDANT_LIMIT));"
      },
      {
        "sha": "8613241d681ea6d933e20add4f93321fee6fab87",
        "filename": "src/validation.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b297426c9670fa83a12096f9db5666c15e1bb806/src/validation.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b297426c9670fa83a12096f9db5666c15e1bb806/src/validation.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/validation.cpp?ref=b297426c9670fa83a12096f9db5666c15e1bb806",
        "patch": "@@ -2537,6 +2537,9 @@ bool ActivateBestChain(CValidationState &state, const CChainParams& chainparams,\n         return false;\n     }\n \n+    int nStopAtHeight = GetArg(\"-stopatheight\", DEFAULT_STOPATHEIGHT);\n+    if (nStopAtHeight && pindexNewTip->nHeight >= nStopAtHeight) StartShutdown();\n+\n     return true;\n }\n "
      },
      {
        "sha": "24ebf238df863f15609412ea1d4f2ce18caeff91",
        "filename": "src/validation.h",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b297426c9670fa83a12096f9db5666c15e1bb806/src/validation.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b297426c9670fa83a12096f9db5666c15e1bb806/src/validation.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/validation.h?ref=b297426c9670fa83a12096f9db5666c15e1bb806",
        "patch": "@@ -145,6 +145,9 @@ static const int MAX_UNCONNECTING_HEADERS = 10;\n \n static const bool DEFAULT_PEERBLOOMFILTERS = true;\n \n+/** Default for -stopatheight */\n+static const int DEFAULT_STOPATHEIGHT = 0;\n+\n struct BlockHasher\n {\n     size_t operator()(const uint256& hash) const { return hash.GetCheapHash(); }"
      }
    ]
  }
]