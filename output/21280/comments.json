[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/784303981",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21280#issuecomment-784303981",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21280",
    "id": 784303981,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4NDMwMzk4MQ==",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?u=3e27bc6589085f3450be1b0e969d04008cc77565&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-23T15:55:41Z",
    "updated_at": "2021-02-23T15:55:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "@MarcoFalke thanks for catching the bug - this should fix it",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/784303981/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/784456759",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21280#issuecomment-784456759",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21280",
    "id": 784456759,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4NDQ1Njc1OQ==",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?u=3e27bc6589085f3450be1b0e969d04008cc77565&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-23T19:33:44Z",
    "updated_at": "2021-03-03T15:43:42Z",
    "author_association": "CONTRIBUTOR",
    "body": "Cirrus failure is in feature_blockfilterindex_prune.py, which I'm pretty sure is unrelated, given that this is only touching the unit tests",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/784456759/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/813504912",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21280#issuecomment-813504912",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21280",
    "id": 813504912,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxMzUwNDkxMg==",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?u=3e27bc6589085f3450be1b0e969d04008cc77565&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-05T17:00:30Z",
    "updated_at": "2021-04-05T17:00:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "Updates:\r\nIterate through the values in `mapFlagNames` instead of all bits from 1 to size().\r\nCheck that all flags in `STANDARD_SCRIPT_VERIFY_FLAGS` are present in `mapFlagNames`. This would cover all relevant flags used for consensus and policy checks.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/813504912/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/815391728",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21280#issuecomment-815391728",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21280",
    "id": 815391728,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxNTM5MTcyOA==",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?u=3e27bc6589085f3450be1b0e969d04008cc77565&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-08T02:04:00Z",
    "updated_at": "2021-04-08T02:04:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "Addressed the compiler warning about unused variable and @jnewbery's comments - thanks!",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/815391728/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/815548255",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21280#issuecomment-815548255",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21280",
    "id": 815548255,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgxNTU0ODI1NQ==",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-04-08T08:05:16Z",
    "updated_at": "2021-04-08T08:05:16Z",
    "author_association": "MEMBER",
    "body": "utACK b109bde46a8730afbc09c107b802a2c321293f4b",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/815548255/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/581173990",
    "pull_request_review_id": 596515898,
    "id": 581173990,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MTE3Mzk5MA==",
    "diff_hunk": "@@ -62,10 +62,6 @@\n   [\"c76168ef1a272a4f176e55e73157ecfce040cfad16a5272f6296eb7089dca846\", 1, \"DUP HASH160 0x14 0x34fea2c5a75414fd945273ae2d029ce1f28dafcf EQUALVERIFY CHECKSIG\"]],\n \"010000000390d31c6107013d754529d8818eff285fe40a3e7635f6930fec5d12eb02107a43010000006b483045022100f40815ae3c81a0dd851cc8d376d6fd226c88416671346a9033468cca2cdcc6c202204f764623903e6c4bed1b734b75d82c40f1725e4471a55ad4f51218f86130ac038321033d710ab45bb54ac99618ad23b3c1da661631aa25f23bfe9d22b41876f1d46e4effffffff3ff04a68e22bdd52e7c8cb848156d2d158bd5515b3c50adabc87d0ca2cd3482d010000006a4730440220598d263c107004008e9e26baa1e770be30fd31ee55ded1898f7c00da05a75977022045536bead322ca246779698b9c3df3003377090f41afeca7fb2ce9e328ec4af2832102b738b531def73020bd637f32935924cc88549c8206976226d968edd3a42fc2d7ffffffff46a8dc8970eb96622f27a516adcf40e0fcec5731e7556e174f2a271aef6861c7010000006b483045022100c5b90a777a9fdc90c208dbef7290d1fc1be651f47151ee4ccff646872a454cf90220640cfbc4550446968fbbe9d12528f3adf7d87b31541569c59e790db8a220482583210391332546e22bbe8fe3af54addfad6f8b83d05fa4f5e047593d4c07ae938795beffffffff028036be26000000001976a914ddfb29efad43a667465ac59ff14dc6442a1adfca88ac3d5cba01000000001976a914b64dde7a505a13ca986c40e86e984a8dc81368b688ac00000000\", \"NONE\"],\n \n-[\"An invalid P2SH Transaction\"],\n-[[[\"0000000000000000000000000000000000000000000000000000000000000100\", 0, \"HASH160 0x14 0x7a052c840ba73af26755de42cf01cc9e0a49fef0 EQUAL\"]],\n-\"010000000100010000000000000000000000000000000000000000000000000000000000000000000009085768617420697320ffffffff010000000000000000015100000000\", \"P2SH,CLEANSTACK,WITNESS\"],",
    "path": "src/test/data/tx_valid.json",
    "position": 6,
    "original_position": 6,
    "commit_id": "b109bde46a8730afbc09c107b802a2c321293f4b",
    "original_commit_id": "8a8fe6af9303d8f991f71f343b2637d1c747fbcf",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I think the test is testing that an invalid p2sh tx is valid before p2sh activation?",
    "created_at": "2021-02-23T16:11:29Z",
    "updated_at": "2021-04-08T02:02:09Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r581173990",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/581173990"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r581173990"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/581173990/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 67,
    "original_line": 67,
    "side": "LEFT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/581174313",
    "pull_request_review_id": 596515898,
    "id": 581174313,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MTE3NDMxMw==",
    "diff_hunk": "@@ -158,7 +158,7 @@ std::vector<unsigned int> ExcludeIndividualFlags(unsigned int flags)\n     std::vector<unsigned int> flags_combos;\n     for (unsigned int i = 0; i < mapFlagNames.size(); ++i) {\n         const unsigned int flags_excluding_i = TrimFlags(flags & ~(1U << i));\n-        if (flags != flags_excluding_i && std::find(flags_combos.begin(), flags_combos.end(), flags_excluding_i) != flags_combos.end()) {\n+        if (flags != flags_excluding_i && std::find(flags_combos.begin(), flags_combos.end(), flags_excluding_i) == flags_combos.end()) {",
    "path": "src/test/transaction_tests.cpp",
    "position": null,
    "original_position": 5,
    "commit_id": "b109bde46a8730afbc09c107b802a2c321293f4b",
    "original_commit_id": "834f22e64a0f3f0fa36bf509b3255d86ebd88576",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Any reason to re-invent the wheel and avoid `std::set`?",
    "created_at": "2021-02-23T16:11:53Z",
    "updated_at": "2021-04-08T02:02:09Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r581174313",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/581174313"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r581174313"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/581174313/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 161,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/581186635",
    "pull_request_review_id": 596532594,
    "id": 581186635,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MTE4NjYzNQ==",
    "diff_hunk": "@@ -158,7 +158,7 @@ std::vector<unsigned int> ExcludeIndividualFlags(unsigned int flags)\n     std::vector<unsigned int> flags_combos;\n     for (unsigned int i = 0; i < mapFlagNames.size(); ++i) {\n         const unsigned int flags_excluding_i = TrimFlags(flags & ~(1U << i));\n-        if (flags != flags_excluding_i && std::find(flags_combos.begin(), flags_combos.end(), flags_excluding_i) != flags_combos.end()) {\n+        if (flags != flags_excluding_i && std::find(flags_combos.begin(), flags_combos.end(), flags_excluding_i) == flags_combos.end()) {",
    "path": "src/test/transaction_tests.cpp",
    "position": null,
    "original_position": 5,
    "commit_id": "b109bde46a8730afbc09c107b802a2c321293f4b",
    "original_commit_id": "834f22e64a0f3f0fa36bf509b3255d86ebd88576",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Nope, I could change it to set.",
    "created_at": "2021-02-23T16:26:34Z",
    "updated_at": "2021-04-08T02:02:09Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r581186635",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/581186635"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r581186635"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/581186635/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 161,
    "side": "RIGHT",
    "in_reply_to_id": 581174313
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/581199181",
    "pull_request_review_id": 596548821,
    "id": 581199181,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MTE5OTE4MQ==",
    "diff_hunk": "@@ -62,10 +62,6 @@\n   [\"c76168ef1a272a4f176e55e73157ecfce040cfad16a5272f6296eb7089dca846\", 1, \"DUP HASH160 0x14 0x34fea2c5a75414fd945273ae2d029ce1f28dafcf EQUALVERIFY CHECKSIG\"]],\n \"010000000390d31c6107013d754529d8818eff285fe40a3e7635f6930fec5d12eb02107a43010000006b483045022100f40815ae3c81a0dd851cc8d376d6fd226c88416671346a9033468cca2cdcc6c202204f764623903e6c4bed1b734b75d82c40f1725e4471a55ad4f51218f86130ac038321033d710ab45bb54ac99618ad23b3c1da661631aa25f23bfe9d22b41876f1d46e4effffffff3ff04a68e22bdd52e7c8cb848156d2d158bd5515b3c50adabc87d0ca2cd3482d010000006a4730440220598d263c107004008e9e26baa1e770be30fd31ee55ded1898f7c00da05a75977022045536bead322ca246779698b9c3df3003377090f41afeca7fb2ce9e328ec4af2832102b738b531def73020bd637f32935924cc88549c8206976226d968edd3a42fc2d7ffffffff46a8dc8970eb96622f27a516adcf40e0fcec5731e7556e174f2a271aef6861c7010000006b483045022100c5b90a777a9fdc90c208dbef7290d1fc1be651f47151ee4ccff646872a454cf90220640cfbc4550446968fbbe9d12528f3adf7d87b31541569c59e790db8a220482583210391332546e22bbe8fe3af54addfad6f8b83d05fa4f5e047593d4c07ae938795beffffffff028036be26000000001976a914ddfb29efad43a667465ac59ff14dc6442a1adfca88ac3d5cba01000000001976a914b64dde7a505a13ca986c40e86e984a8dc81368b688ac00000000\", \"NONE\"],\n \n-[\"An invalid P2SH Transaction\"],\n-[[[\"0000000000000000000000000000000000000000000000000000000000000100\", 0, \"HASH160 0x14 0x7a052c840ba73af26755de42cf01cc9e0a49fef0 EQUAL\"]],\n-\"010000000100010000000000000000000000000000000000000000000000000000000000000000000009085768617420697320ffffffff010000000000000000015100000000\", \"P2SH,CLEANSTACK,WITNESS\"],",
    "path": "src/test/data/tx_valid.json",
    "position": 6,
    "original_position": 6,
    "commit_id": "b109bde46a8730afbc09c107b802a2c321293f4b",
    "original_commit_id": "8a8fe6af9303d8f991f71f343b2637d1c747fbcf",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "With #19698, transaction_tests will check that excluding the `P2SH` flag will cause this test to pass, so it would still be a duplicate test.",
    "created_at": "2021-02-23T16:41:26Z",
    "updated_at": "2021-04-08T02:02:09Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r581199181",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/581199181"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r581199181"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/581199181/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 67,
    "original_line": 67,
    "side": "LEFT",
    "in_reply_to_id": 581173990
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/581210120",
    "pull_request_review_id": 596563182,
    "id": 581210120,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MTIxMDEyMA==",
    "diff_hunk": "@@ -158,7 +158,7 @@ std::vector<unsigned int> ExcludeIndividualFlags(unsigned int flags)\n     std::vector<unsigned int> flags_combos;\n     for (unsigned int i = 0; i < mapFlagNames.size(); ++i) {\n         const unsigned int flags_excluding_i = TrimFlags(flags & ~(1U << i));\n-        if (flags != flags_excluding_i && std::find(flags_combos.begin(), flags_combos.end(), flags_excluding_i) != flags_combos.end()) {\n+        if (flags != flags_excluding_i && std::find(flags_combos.begin(), flags_combos.end(), flags_excluding_i) == flags_combos.end()) {",
    "path": "src/test/transaction_tests.cpp",
    "position": null,
    "original_position": 5,
    "commit_id": "b109bde46a8730afbc09c107b802a2c321293f4b",
    "original_commit_id": "834f22e64a0f3f0fa36bf509b3255d86ebd88576",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I've changed it to use a `std::set`",
    "created_at": "2021-02-23T16:54:36Z",
    "updated_at": "2021-04-08T02:02:09Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r581210120",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/581210120"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r581210120"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/581210120/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 161,
    "side": "RIGHT",
    "in_reply_to_id": 581174313
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/581210306",
    "pull_request_review_id": 596563433,
    "id": 581210306,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MTIxMDMwNg==",
    "diff_hunk": "@@ -62,10 +62,6 @@\n   [\"c76168ef1a272a4f176e55e73157ecfce040cfad16a5272f6296eb7089dca846\", 1, \"DUP HASH160 0x14 0x34fea2c5a75414fd945273ae2d029ce1f28dafcf EQUALVERIFY CHECKSIG\"]],\n \"010000000390d31c6107013d754529d8818eff285fe40a3e7635f6930fec5d12eb02107a43010000006b483045022100f40815ae3c81a0dd851cc8d376d6fd226c88416671346a9033468cca2cdcc6c202204f764623903e6c4bed1b734b75d82c40f1725e4471a55ad4f51218f86130ac038321033d710ab45bb54ac99618ad23b3c1da661631aa25f23bfe9d22b41876f1d46e4effffffff3ff04a68e22bdd52e7c8cb848156d2d158bd5515b3c50adabc87d0ca2cd3482d010000006a4730440220598d263c107004008e9e26baa1e770be30fd31ee55ded1898f7c00da05a75977022045536bead322ca246779698b9c3df3003377090f41afeca7fb2ce9e328ec4af2832102b738b531def73020bd637f32935924cc88549c8206976226d968edd3a42fc2d7ffffffff46a8dc8970eb96622f27a516adcf40e0fcec5731e7556e174f2a271aef6861c7010000006b483045022100c5b90a777a9fdc90c208dbef7290d1fc1be651f47151ee4ccff646872a454cf90220640cfbc4550446968fbbe9d12528f3adf7d87b31541569c59e790db8a220482583210391332546e22bbe8fe3af54addfad6f8b83d05fa4f5e047593d4c07ae938795beffffffff028036be26000000001976a914ddfb29efad43a667465ac59ff14dc6442a1adfca88ac3d5cba01000000001976a914b64dde7a505a13ca986c40e86e984a8dc81368b688ac00000000\", \"NONE\"],\n \n-[\"An invalid P2SH Transaction\"],\n-[[[\"0000000000000000000000000000000000000000000000000000000000000100\", 0, \"HASH160 0x14 0x7a052c840ba73af26755de42cf01cc9e0a49fef0 EQUAL\"]],\n-\"010000000100010000000000000000000000000000000000000000000000000000000000000000000009085768617420697320ffffffff010000000000000000015100000000\", \"P2SH,CLEANSTACK,WITNESS\"],",
    "path": "src/test/data/tx_valid.json",
    "position": 6,
    "original_position": 6,
    "commit_id": "b109bde46a8730afbc09c107b802a2c321293f4b",
    "original_commit_id": "8a8fe6af9303d8f991f71f343b2637d1c747fbcf",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Added this comment to the commit log^",
    "created_at": "2021-02-23T16:54:49Z",
    "updated_at": "2021-04-08T02:02:09Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r581210306",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/581210306"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r581210306"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/581210306/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 67,
    "original_line": 67,
    "side": "LEFT",
    "in_reply_to_id": 581173990
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603986455",
    "pull_request_review_id": 624110268,
    "id": 603986455,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMzk4NjQ1NQ==",
    "diff_hunk": "@@ -152,14 +152,16 @@ unsigned int FillFlags(unsigned int flags)\n     return flags;\n }\n \n-// Return valid flags that are all except one flag for each flag\n-std::vector<unsigned int> ExcludeIndividualFlags(unsigned int flags)\n+// Exclude each possible script verify flag from flags. Returns a list of these flag combinations\n+// that are valid and without duplicates. For example: if flags=1111 and there are 4 possible flags,\n+// this should return the vector [0111, 1011, 1101, 1110].\n+std::set<unsigned int> ExcludeIndividualFlags(unsigned int flags)\n {\n-    std::vector<unsigned int> flags_combos;\n+    std::set<unsigned int> flags_combos;\n     for (unsigned int i = 0; i < mapFlagNames.size(); ++i) {",
    "path": "src/test/transaction_tests.cpp",
    "position": null,
    "original_position": 13,
    "commit_id": "b109bde46a8730afbc09c107b802a2c321293f4b",
    "original_commit_id": "b1ea5c5bf761bd2ef446b177ad7c654ac6f836af",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "how is the map supposed to be kept up to date? Looks like it is missing SCRIPT_VERIFY_DISCOURAGE_UPGRADABLE_PUBKEYTYPE?",
    "created_at": "2021-03-30T10:46:02Z",
    "updated_at": "2021-04-08T02:02:09Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r603986455",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603986455"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r603986455"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603986455/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 167,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603987931",
    "pull_request_review_id": 624110268,
    "id": 603987931,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwMzk4NzkzMQ==",
    "diff_hunk": "@@ -152,14 +152,16 @@ unsigned int FillFlags(unsigned int flags)\n     return flags;",
    "path": "src/test/transaction_tests.cpp",
    "position": 48,
    "original_position": 1,
    "commit_id": "b109bde46a8730afbc09c107b802a2c321293f4b",
    "original_commit_id": "0f6d0ffc8a5482a1b44298ca4755e908fce4b1b6",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "unrelated nit: Could `Assert(IsValidFlagCombination(flags));`? (Needs #21553)",
    "created_at": "2021-03-30T10:48:22Z",
    "updated_at": "2021-04-08T02:02:09Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r603987931",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603987931"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r603987931"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/603987931/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 168,
    "original_line": 168,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604187375",
    "pull_request_review_id": 624383527,
    "id": 604187375,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwNDE4NzM3NQ==",
    "diff_hunk": "@@ -152,14 +152,16 @@ unsigned int FillFlags(unsigned int flags)\n     return flags;",
    "path": "src/test/transaction_tests.cpp",
    "position": 48,
    "original_position": 1,
    "commit_id": "b109bde46a8730afbc09c107b802a2c321293f4b",
    "original_commit_id": "0f6d0ffc8a5482a1b44298ca4755e908fce4b1b6",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "~There are places where we need to fill the flags as well as check that they're a valid combination~",
    "created_at": "2021-03-30T15:08:43Z",
    "updated_at": "2021-04-08T02:02:09Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r604187375",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604187375"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r604187375"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604187375/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 168,
    "original_line": 168,
    "side": "RIGHT",
    "in_reply_to_id": 603987931
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604196975",
    "pull_request_review_id": 624396297,
    "id": 604196975,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwNDE5Njk3NQ==",
    "diff_hunk": "@@ -152,14 +152,16 @@ unsigned int FillFlags(unsigned int flags)\n     return flags;\n }\n \n-// Return valid flags that are all except one flag for each flag\n-std::vector<unsigned int> ExcludeIndividualFlags(unsigned int flags)\n+// Exclude each possible script verify flag from flags. Returns a list of these flag combinations\n+// that are valid and without duplicates. For example: if flags=1111 and there are 4 possible flags,\n+// this should return the vector [0111, 1011, 1101, 1110].\n+std::set<unsigned int> ExcludeIndividualFlags(unsigned int flags)\n {\n-    std::vector<unsigned int> flags_combos;\n+    std::set<unsigned int> flags_combos;\n     for (unsigned int i = 0; i < mapFlagNames.size(); ++i) {",
    "path": "src/test/transaction_tests.cpp",
    "position": null,
    "original_position": 13,
    "commit_id": "b109bde46a8730afbc09c107b802a2c321293f4b",
    "original_commit_id": "b1ea5c5bf761bd2ef446b177ad7c654ac6f836af",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Hm, is it possible to iterate through all the script verify flags? Could add an assert that they're all present in `mapFlagNames`",
    "created_at": "2021-03-30T15:19:39Z",
    "updated_at": "2021-04-08T02:02:09Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r604196975",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604196975"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r604196975"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604196975/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 167,
    "side": "RIGHT",
    "in_reply_to_id": 603986455
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604197281",
    "pull_request_review_id": 624396675,
    "id": 604197281,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwNDE5NzI4MQ==",
    "diff_hunk": "@@ -152,14 +152,16 @@ unsigned int FillFlags(unsigned int flags)\n     return flags;\n }\n \n-// Return valid flags that are all except one flag for each flag\n-std::vector<unsigned int> ExcludeIndividualFlags(unsigned int flags)\n+// Exclude each possible script verify flag from flags. Returns a list of these flag combinations\n+// that are valid and without duplicates. For example: if flags=1111 and there are 4 possible flags,\n+// this should return the vector [0111, 1011, 1101, 1110].\n+std::set<unsigned int> ExcludeIndividualFlags(unsigned int flags)\n {\n-    std::vector<unsigned int> flags_combos;\n+    std::set<unsigned int> flags_combos;\n     for (unsigned int i = 0; i < mapFlagNames.size(); ++i) {",
    "path": "src/test/transaction_tests.cpp",
    "position": null,
    "original_position": 13,
    "commit_id": "b109bde46a8730afbc09c107b802a2c321293f4b",
    "original_commit_id": "b1ea5c5bf761bd2ef446b177ad7c654ac6f836af",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "> Looks like it is missing SCRIPT_VERIFY_DISCOURAGE_UPGRADABLE_PUBKEYTYPE?\r\n\r\nOop, will add",
    "created_at": "2021-03-30T15:19:57Z",
    "updated_at": "2021-04-08T02:02:09Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r604197281",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604197281"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r604197281"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604197281/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 167,
    "side": "RIGHT",
    "in_reply_to_id": 603986455
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604307793",
    "pull_request_review_id": 624542538,
    "id": 604307793,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwNDMwNzc5Mw==",
    "diff_hunk": "@@ -152,14 +152,16 @@ unsigned int FillFlags(unsigned int flags)\n     return flags;\n }\n \n-// Return valid flags that are all except one flag for each flag\n-std::vector<unsigned int> ExcludeIndividualFlags(unsigned int flags)\n+// Exclude each possible script verify flag from flags. Returns a list of these flag combinations\n+// that are valid and without duplicates. For example: if flags=1111 and there are 4 possible flags,\n+// this should return the vector [0111, 1011, 1101, 1110].\n+std::set<unsigned int> ExcludeIndividualFlags(unsigned int flags)\n {\n-    std::vector<unsigned int> flags_combos;\n+    std::set<unsigned int> flags_combos;\n     for (unsigned int i = 0; i < mapFlagNames.size(); ++i) {",
    "path": "src/test/transaction_tests.cpp",
    "position": null,
    "original_position": 13,
    "commit_id": "b109bde46a8730afbc09c107b802a2c321293f4b",
    "original_commit_id": "b1ea5c5bf761bd2ef446b177ad7c654ac6f836af",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Oh, my comment was just an example. There are more missing than just the one, IIRC",
    "created_at": "2021-03-30T17:46:21Z",
    "updated_at": "2021-04-08T02:02:09Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r604307793",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604307793"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r604307793"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604307793/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 167,
    "side": "RIGHT",
    "in_reply_to_id": 603986455
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604505210",
    "pull_request_review_id": 624791669,
    "id": 604505210,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwNDUwNTIxMA==",
    "diff_hunk": "@@ -152,14 +152,16 @@ unsigned int FillFlags(unsigned int flags)\n     return flags;\n }\n \n-// Return valid flags that are all except one flag for each flag\n-std::vector<unsigned int> ExcludeIndividualFlags(unsigned int flags)\n+// Exclude each possible script verify flag from flags. Returns a list of these flag combinations\n+// that are valid and without duplicates. For example: if flags=1111 and there are 4 possible flags,\n+// this should return the vector [0111, 1011, 1101, 1110].\n+std::set<unsigned int> ExcludeIndividualFlags(unsigned int flags)\n {\n-    std::vector<unsigned int> flags_combos;\n+    std::set<unsigned int> flags_combos;\n     for (unsigned int i = 0; i < mapFlagNames.size(); ++i) {",
    "path": "src/test/transaction_tests.cpp",
    "position": null,
    "original_position": 13,
    "commit_id": "b109bde46a8730afbc09c107b802a2c321293f4b",
    "original_commit_id": "b1ea5c5bf761bd2ef446b177ad7c654ac6f836af",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "should all be there now",
    "created_at": "2021-03-30T23:56:34Z",
    "updated_at": "2021-04-08T02:02:09Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r604505210",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604505210"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r604505210"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604505210/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 167,
    "side": "RIGHT",
    "in_reply_to_id": 603986455
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604900643",
    "pull_request_review_id": 625293573,
    "id": 604900643,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwNDkwMDY0Mw==",
    "diff_hunk": "@@ -152,14 +152,16 @@ unsigned int FillFlags(unsigned int flags)\n     return flags;",
    "path": "src/test/transaction_tests.cpp",
    "position": 48,
    "original_position": 1,
    "commit_id": "b109bde46a8730afbc09c107b802a2c321293f4b",
    "original_commit_id": "0f6d0ffc8a5482a1b44298ca4755e908fce4b1b6",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I completely misread this for some reason \ud83e\udd26 sorry about that\r\nJust rebased on top of #21553 and added the asserts",
    "created_at": "2021-03-31T13:33:07Z",
    "updated_at": "2021-04-08T02:02:09Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r604900643",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604900643"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r604900643"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/604900643/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 168,
    "original_line": 168,
    "side": "RIGHT",
    "in_reply_to_id": 603987931
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/605690662",
    "pull_request_review_id": 626312330,
    "id": 605690662,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwNTY5MDY2Mg==",
    "diff_hunk": "@@ -149,17 +154,20 @@ unsigned int FillFlags(unsigned int flags)\n \n     // WITNESS implies P2SH (and transitively CLEANSTACK implies P2SH)\n     if (flags & SCRIPT_VERIFY_WITNESS) flags |= SCRIPT_VERIFY_P2SH;\n+    Assert(IsValidFlagCombination(flags));\n     return flags;\n }\n \n-// Return valid flags that are all except one flag for each flag\n-std::vector<unsigned int> ExcludeIndividualFlags(unsigned int flags)\n+// Exclude each possible script verify flag from flags. Returns a list of these flag combinations",
    "path": "src/test/transaction_tests.cpp",
    "position": null,
    "original_position": 36,
    "commit_id": "b109bde46a8730afbc09c107b802a2c321293f4b",
    "original_commit_id": "a944a21be41d1e5469822b1858c304c983010880",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This returns a set, not a list.\r\n\r\nYou could copy the set into a vector to avoid changing the return type if you really felt like it.\r\n\r\n```diff\r\ndiff --git a/src/test/transaction_tests.cpp b/src/test/transaction_tests.cpp\r\nindex 3d6ad20b85..235862ec7a 100644\r\n--- a/src/test/transaction_tests.cpp\r\n+++ b/src/test/transaction_tests.cpp\r\n@@ -161,7 +161,7 @@ unsigned int FillFlags(unsigned int flags)\r\n // Exclude each possible script verify flag from flags. Returns a list of these flag combinations\r\n // that are valid and without duplicates. For example: if flags=1111 and there are 4 possible flags,\r\n // this should return the vector [0111, 1011, 1101, 1110].\r\n-std::set<unsigned int> ExcludeIndividualFlags(unsigned int flags)\r\n+std::vector<unsigned int> ExcludeIndividualFlags(unsigned int flags)\r\n {\r\n     std::set<unsigned int> flags_combos;\r\n     for (unsigned int i = 0; i < mapFlagNames.size(); ++i) {\r\n@@ -170,7 +170,7 @@ std::set<unsigned int> ExcludeIndividualFlags(unsigned int flags)\r\n             flags_combos.insert(flags_excluding_i);\r\n         }\r\n     }\r\n-    return flags_combos;\r\n+    return {flags_combos.begin(), flags_combos.end()};\r\n }\r\n \r\n BOOST_FIXTURE_TEST_SUITE(transaction_tests, BasicTestingSetup)\r\n```",
    "created_at": "2021-04-01T14:12:26Z",
    "updated_at": "2021-04-08T02:02:09Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r605690662",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/605690662"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r605690662"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/605690662/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 161,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/605761818",
    "pull_request_review_id": 626407924,
    "id": 605761818,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwNTc2MTgxOA==",
    "diff_hunk": "@@ -149,17 +154,20 @@ unsigned int FillFlags(unsigned int flags)\n \n     // WITNESS implies P2SH (and transitively CLEANSTACK implies P2SH)\n     if (flags & SCRIPT_VERIFY_WITNESS) flags |= SCRIPT_VERIFY_P2SH;\n+    Assert(IsValidFlagCombination(flags));\n     return flags;\n }\n \n-// Return valid flags that are all except one flag for each flag\n-std::vector<unsigned int> ExcludeIndividualFlags(unsigned int flags)\n+// Exclude each possible script verify flag from flags. Returns a list of these flag combinations",
    "path": "src/test/transaction_tests.cpp",
    "position": null,
    "original_position": 36,
    "commit_id": "b109bde46a8730afbc09c107b802a2c321293f4b",
    "original_commit_id": "a944a21be41d1e5469822b1858c304c983010880",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "True, although hopefully it's obvious - will update if I need to retouch. Thanks!",
    "created_at": "2021-04-01T15:46:11Z",
    "updated_at": "2021-04-08T02:02:09Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r605761818",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/605761818"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r605761818"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/605761818/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 161,
    "side": "RIGHT",
    "in_reply_to_id": 605690662
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/605822413",
    "pull_request_review_id": 626488415,
    "id": 605822413,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwNTgyMjQxMw==",
    "diff_hunk": "@@ -149,17 +154,20 @@ unsigned int FillFlags(unsigned int flags)\n \n     // WITNESS implies P2SH (and transitively CLEANSTACK implies P2SH)\n     if (flags & SCRIPT_VERIFY_WITNESS) flags |= SCRIPT_VERIFY_P2SH;\n+    Assert(IsValidFlagCombination(flags));\n     return flags;\n }\n \n-// Return valid flags that are all except one flag for each flag\n-std::vector<unsigned int> ExcludeIndividualFlags(unsigned int flags)\n+// Exclude each possible script verify flag from flags. Returns a list of these flag combinations\n+// that are valid and without duplicates. For example: if flags=1111 and there are 4 possible flags,\n+// this should return the vector [0111, 1011, 1101, 1110].\n+std::set<unsigned int> ExcludeIndividualFlags(unsigned int flags)\n {\n-    std::vector<unsigned int> flags_combos;\n+    std::set<unsigned int> flags_combos;\n     for (unsigned int i = 0; i < mapFlagNames.size(); ++i) {\n         const unsigned int flags_excluding_i = TrimFlags(flags & ~(1U << i));",
    "path": "src/test/transaction_tests.cpp",
    "position": null,
    "original_position": 44,
    "commit_id": "b109bde46a8730afbc09c107b802a2c321293f4b",
    "original_commit_id": "a944a21be41d1e5469822b1858c304c983010880",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I still don't think this is right. A std::map doesn't order its elements based on the order they were inserted. \r\n\r\nEven if it did, the values aren't guaranteed to never miss a power of two.\r\n",
    "created_at": "2021-04-01T17:20:17Z",
    "updated_at": "2021-04-08T02:02:09Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r605822413",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/605822413"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r605822413"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/605822413/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 168,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/605822610",
    "pull_request_review_id": 626488415,
    "id": 605822610,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwNTgyMjYxMA==",
    "diff_hunk": "@@ -314,11 +321,15 @@ BOOST_AUTO_TEST_CASE(tx_invalid)\n             PrecomputedTransactionData txdata(tx);\n             unsigned int verify_flags = ParseScriptFlags(test[2].get_str());\n \n-            // Not using FillFlags() in the main test, in order to detect invalid verifyFlags combination\n-            if (!CheckTxScripts(tx, mapprevOutScriptPubKeys, mapprevOutValues, verify_flags, txdata, strTest, /* expect_valid */ false)) {\n-                BOOST_ERROR(\"Tx unexpectedly passed: \" << strTest);\n+            // Check that the test gives a valid combination of flags (otherwise VerifyScript will throw). Don't edit the flags.\n+            if (verify_flags != FillFlags(verify_flags)) {\n+                BOOST_ERROR(\"Bad test flags: \" << strTest);\n             }\n \n+            // Not using FillFlags() in the main test, in order to detect invalid verifyFlags combination\n+            BOOST_CHECK_MESSAGE(CheckTxScripts(tx, mapprevOutScriptPubKeys, mapprevOutValues, verify_flags, txdata, strTest, /* expect_valid */ false),\n+                                \"Tx unexpectedly passed: \" << strTest);\n+\n             // Backwards compatibility of script verification flags: Adding any flag(s) should not validate an invalid transaction\n             for (size_t i = 0; i < mapFlagNames.size(); i++) {\n                 unsigned int flags = FillFlags(verify_flags | (1U << i));",
    "path": "src/test/transaction_tests.cpp",
    "position": null,
    "original_position": 91,
    "commit_id": "b109bde46a8730afbc09c107b802a2c321293f4b",
    "original_commit_id": "a944a21be41d1e5469822b1858c304c983010880",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "same (and everywhere else)",
    "created_at": "2021-04-01T17:20:35Z",
    "updated_at": "2021-04-08T02:02:09Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r605822610",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/605822610"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r605822610"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/605822610/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 347,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/606322892",
    "pull_request_review_id": 627120394,
    "id": 606322892,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwNjMyMjg5Mg==",
    "diff_hunk": "@@ -149,17 +154,20 @@ unsigned int FillFlags(unsigned int flags)\n \n     // WITNESS implies P2SH (and transitively CLEANSTACK implies P2SH)\n     if (flags & SCRIPT_VERIFY_WITNESS) flags |= SCRIPT_VERIFY_P2SH;\n+    Assert(IsValidFlagCombination(flags));\n     return flags;\n }\n \n-// Return valid flags that are all except one flag for each flag\n-std::vector<unsigned int> ExcludeIndividualFlags(unsigned int flags)\n+// Exclude each possible script verify flag from flags. Returns a list of these flag combinations\n+// that are valid and without duplicates. For example: if flags=1111 and there are 4 possible flags,\n+// this should return the vector [0111, 1011, 1101, 1110].\n+std::set<unsigned int> ExcludeIndividualFlags(unsigned int flags)\n {\n-    std::vector<unsigned int> flags_combos;\n+    std::set<unsigned int> flags_combos;\n     for (unsigned int i = 0; i < mapFlagNames.size(); ++i) {\n         const unsigned int flags_excluding_i = TrimFlags(flags & ~(1U << i));",
    "path": "src/test/transaction_tests.cpp",
    "position": null,
    "original_position": 44,
    "commit_id": "b109bde46a8730afbc09c107b802a2c321293f4b",
    "original_commit_id": "a944a21be41d1e5469822b1858c304c983010880",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Sorry, what do you mean? The map `mapFlagNames` is just to identify the flags from strings in the json files. I guess if there wasn't a script verify flag for `1 << i` for some `i`, it would get ignored by the interpreter if we added it. So as long as we have the leftmost flag we should be okay?",
    "created_at": "2021-04-02T16:54:04Z",
    "updated_at": "2021-04-08T02:02:09Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r606322892",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/606322892"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r606322892"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/606322892/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 168,
    "side": "RIGHT",
    "in_reply_to_id": 605822413
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/606326624",
    "pull_request_review_id": 627123934,
    "id": 606326624,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwNjMyNjYyNA==",
    "diff_hunk": "@@ -149,17 +154,20 @@ unsigned int FillFlags(unsigned int flags)\n \n     // WITNESS implies P2SH (and transitively CLEANSTACK implies P2SH)\n     if (flags & SCRIPT_VERIFY_WITNESS) flags |= SCRIPT_VERIFY_P2SH;\n+    Assert(IsValidFlagCombination(flags));\n     return flags;\n }\n \n-// Return valid flags that are all except one flag for each flag\n-std::vector<unsigned int> ExcludeIndividualFlags(unsigned int flags)\n+// Exclude each possible script verify flag from flags. Returns a list of these flag combinations\n+// that are valid and without duplicates. For example: if flags=1111 and there are 4 possible flags,\n+// this should return the vector [0111, 1011, 1101, 1110].\n+std::set<unsigned int> ExcludeIndividualFlags(unsigned int flags)\n {\n-    std::vector<unsigned int> flags_combos;\n+    std::set<unsigned int> flags_combos;\n     for (unsigned int i = 0; i < mapFlagNames.size(); ++i) {\n         const unsigned int flags_excluding_i = TrimFlags(flags & ~(1U << i));",
    "path": "src/test/transaction_tests.cpp",
    "position": null,
    "original_position": 44,
    "commit_id": "b109bde46a8730afbc09c107b802a2c321293f4b",
    "original_commit_id": "a944a21be41d1e5469822b1858c304c983010880",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Let's assume mapFlagNames is only a single entry `{\"EXAMPLE\", 1U << 4}` (because for some reason other flags are no longer needed and have been removed).\r\n\r\nThe loop will only cover `1U << 1`, a non-existent flag.",
    "created_at": "2021-04-02T16:59:00Z",
    "updated_at": "2021-04-08T02:02:09Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r606326624",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/606326624"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r606326624"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/606326624/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 168,
    "side": "RIGHT",
    "in_reply_to_id": 605822413
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/606443484",
    "pull_request_review_id": 627385833,
    "id": 606443484,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwNjQ0MzQ4NA==",
    "diff_hunk": "@@ -149,17 +154,20 @@ unsigned int FillFlags(unsigned int flags)\n \n     // WITNESS implies P2SH (and transitively CLEANSTACK implies P2SH)\n     if (flags & SCRIPT_VERIFY_WITNESS) flags |= SCRIPT_VERIFY_P2SH;\n+    Assert(IsValidFlagCombination(flags));\n     return flags;\n }\n \n-// Return valid flags that are all except one flag for each flag\n-std::vector<unsigned int> ExcludeIndividualFlags(unsigned int flags)\n+// Exclude each possible script verify flag from flags. Returns a list of these flag combinations\n+// that are valid and without duplicates. For example: if flags=1111 and there are 4 possible flags,\n+// this should return the vector [0111, 1011, 1101, 1110].\n+std::set<unsigned int> ExcludeIndividualFlags(unsigned int flags)\n {\n-    std::vector<unsigned int> flags_combos;\n+    std::set<unsigned int> flags_combos;\n     for (unsigned int i = 0; i < mapFlagNames.size(); ++i) {\n         const unsigned int flags_excluding_i = TrimFlags(flags & ~(1U << i));",
    "path": "src/test/transaction_tests.cpp",
    "position": null,
    "original_position": 44,
    "commit_id": "b109bde46a8730afbc09c107b802a2c321293f4b",
    "original_commit_id": "a944a21be41d1e5469822b1858c304c983010880",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Ah true. Is there a way of checking whether an unsigned int corresponds to a script verify flag?",
    "created_at": "2021-04-02T22:00:30Z",
    "updated_at": "2021-04-08T02:02:09Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r606443484",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/606443484"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r606443484"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/606443484/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 168,
    "side": "RIGHT",
    "in_reply_to_id": 605822413
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/606625407",
    "pull_request_review_id": 627435872,
    "id": 606625407,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwNjYyNTQwNw==",
    "diff_hunk": "@@ -149,17 +154,20 @@ unsigned int FillFlags(unsigned int flags)\n \n     // WITNESS implies P2SH (and transitively CLEANSTACK implies P2SH)\n     if (flags & SCRIPT_VERIFY_WITNESS) flags |= SCRIPT_VERIFY_P2SH;\n+    Assert(IsValidFlagCombination(flags));\n     return flags;\n }\n \n-// Return valid flags that are all except one flag for each flag\n-std::vector<unsigned int> ExcludeIndividualFlags(unsigned int flags)\n+// Exclude each possible script verify flag from flags. Returns a list of these flag combinations\n+// that are valid and without duplicates. For example: if flags=1111 and there are 4 possible flags,\n+// this should return the vector [0111, 1011, 1101, 1110].\n+std::set<unsigned int> ExcludeIndividualFlags(unsigned int flags)\n {\n-    std::vector<unsigned int> flags_combos;\n+    std::set<unsigned int> flags_combos;\n     for (unsigned int i = 0; i < mapFlagNames.size(); ++i) {\n         const unsigned int flags_excluding_i = TrimFlags(flags & ~(1U << i));",
    "path": "src/test/transaction_tests.cpp",
    "position": null,
    "original_position": 44,
    "commit_id": "b109bde46a8730afbc09c107b802a2c321293f4b",
    "original_commit_id": "a944a21be41d1e5469822b1858c304c983010880",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Just iterate over the map and use the value of the key-value pair?",
    "created_at": "2021-04-03T06:09:41Z",
    "updated_at": "2021-04-08T02:02:09Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r606625407",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/606625407"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r606625407"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/606625407/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 168,
    "side": "RIGHT",
    "in_reply_to_id": 605822413
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/607194919",
    "pull_request_review_id": 627982803,
    "id": 607194919,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwNzE5NDkxOQ==",
    "diff_hunk": "@@ -149,17 +154,20 @@ unsigned int FillFlags(unsigned int flags)\n \n     // WITNESS implies P2SH (and transitively CLEANSTACK implies P2SH)\n     if (flags & SCRIPT_VERIFY_WITNESS) flags |= SCRIPT_VERIFY_P2SH;\n+    Assert(IsValidFlagCombination(flags));\n     return flags;\n }\n \n-// Return valid flags that are all except one flag for each flag\n-std::vector<unsigned int> ExcludeIndividualFlags(unsigned int flags)\n+// Exclude each possible script verify flag from flags. Returns a list of these flag combinations",
    "path": "src/test/transaction_tests.cpp",
    "position": null,
    "original_position": 36,
    "commit_id": "b109bde46a8730afbc09c107b802a2c321293f4b",
    "original_commit_id": "a944a21be41d1e5469822b1858c304c983010880",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Fixed",
    "created_at": "2021-04-05T16:46:43Z",
    "updated_at": "2021-04-08T02:02:09Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r607194919",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/607194919"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r607194919"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/607194919/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 161,
    "side": "RIGHT",
    "in_reply_to_id": 605690662
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/608466620",
    "pull_request_review_id": 629757309,
    "id": 608466620,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwODQ2NjYyMA==",
    "diff_hunk": "@@ -78,6 +82,16 @@ unsigned int ParseScriptFlags(std::string strFlags)\n     return flags;\n }\n \n+// Check that all flags in STANDARD_SCRIPT_VERIFY_FLAGS are present in mapFlagNames.\n+bool CheckMapFlagNames()\n+{\n+    unsigned int standard_flags_missing{STANDARD_SCRIPT_VERIFY_FLAGS};\n+    for (const auto & [_, flag] : mapFlagNames) {",
    "path": "src/test/transaction_tests.cpp",
    "position": null,
    "original_position": 26,
    "commit_id": "b109bde46a8730afbc09c107b802a2c321293f4b",
    "original_commit_id": "24f2951e11d0aa88e3b45271ec457abaadc6fde0",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "```suggestion\r\n    for (const auto& [_, flag] : mapFlagNames) {\r\n```",
    "created_at": "2021-04-07T08:53:46Z",
    "updated_at": "2021-04-08T02:02:09Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r608466620",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/608466620"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r608466620"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/608466620/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 89,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/608467016",
    "pull_request_review_id": 629757309,
    "id": 608467016,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwODQ2NzAxNg==",
    "diff_hunk": "@@ -149,17 +164,21 @@ unsigned int FillFlags(unsigned int flags)\n \n     // WITNESS implies P2SH (and transitively CLEANSTACK implies P2SH)\n     if (flags & SCRIPT_VERIFY_WITNESS) flags |= SCRIPT_VERIFY_P2SH;\n+    Assert(IsValidFlagCombination(flags));\n     return flags;\n }\n \n-// Return valid flags that are all except one flag for each flag\n-std::vector<unsigned int> ExcludeIndividualFlags(unsigned int flags)\n+// Exclude each possible script verify flag from flags. Returns a set of these flag combinations\n+// that are valid and without duplicates. For example: if flags=1111 and the 4 possible flags are\n+// 0001, 0010, 0100, and 1000, this should return the set {0111, 1011, 1101, 1110}.\n+// Requires mapFlagNames to contain all script verify flags.\n+std::set<unsigned int> ExcludeIndividualFlags(unsigned int flags)\n {\n-    std::vector<unsigned int> flags_combos;\n-    for (unsigned int i = 0; i < mapFlagNames.size(); ++i) {\n-        const unsigned int flags_excluding_i = TrimFlags(flags & ~(1U << i));\n-        if (flags != flags_excluding_i && std::find(flags_combos.begin(), flags_combos.end(), flags_excluding_i) != flags_combos.end()) {\n-            flags_combos.push_back(flags_excluding_i);\n+    std::set<unsigned int> flags_combos;\n+    for (const auto & [_, flag] : mapFlagNames) {",
    "path": "src/test/transaction_tests.cpp",
    "position": null,
    "original_position": 65,
    "commit_id": "b109bde46a8730afbc09c107b802a2c321293f4b",
    "original_commit_id": "24f2951e11d0aa88e3b45271ec457abaadc6fde0",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "```suggestion\r\n    for (const auto& [_, flag] : mapFlagNames) {\r\n```",
    "created_at": "2021-04-07T08:54:17Z",
    "updated_at": "2021-04-08T02:02:09Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r608467016",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/608467016"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r608467016"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/608467016/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 178,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/608530055",
    "pull_request_review_id": 629757309,
    "id": 608530055,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwODUzMDA1NQ==",
    "diff_hunk": "@@ -228,16 +248,15 @@ BOOST_AUTO_TEST_CASE(tx_valid)\n                 BOOST_ERROR(\"Bad test flags: \" << strTest);\n             }\n \n-            if (!CheckTxScripts(tx, mapprevOutScriptPubKeys, mapprevOutValues, ~verify_flags, txdata, strTest, /* expect_valid */ true)) {\n-                BOOST_ERROR(\"Tx unexpectedly failed: \" << strTest);\n-            }\n+            BOOST_CHECK_MESSAGE(CheckTxScripts(tx, mapprevOutScriptPubKeys, mapprevOutValues, ~verify_flags, txdata, strTest, /* expect_valid */ true),\n+                                \"Tx unexpectedly failed: \" << strTest);\n \n             // Backwards compatibility of script verification flags: Removing any flag(s) should not invalidate a valid transaction\n-            for (size_t i = 0; i < mapFlagNames.size(); ++i) {\n+            for (const auto & [_, flag] : mapFlagNames) {\n                 // Removing individual flags\n-                unsigned int flags = TrimFlags(~(verify_flags | (1U << i)));\n+                unsigned int flags = TrimFlags(~(verify_flags | flag));\n                 if (!CheckTxScripts(tx, mapprevOutScriptPubKeys, mapprevOutValues, flags, txdata, strTest, /* expect_valid */ true)) {\n-                    BOOST_ERROR(\"Tx unexpectedly failed with flag \" << ToString(i) << \" unset: \" << strTest);\n+                    BOOST_ERROR(\"Tx unexpectedly failed with flag \" << ToString(flag) << \" unset: \" << strTest);",
    "path": "src/test/transaction_tests.cpp",
    "position": null,
    "original_position": 98,
    "commit_id": "b109bde46a8730afbc09c107b802a2c321293f4b",
    "original_commit_id": "24f2951e11d0aa88e3b45271ec457abaadc6fde0",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This doesn't need `ToString()`:\r\n\r\n```suggestion\r\n                    BOOST_ERROR(\"Tx unexpectedly failed with flag \" << flag << \" unset: \" << strTest);\r\n```\r\n\r\nor alternatively, print the name of the flag:\r\n\r\n```suggestion\r\n                    BOOST_ERROR(\"Tx unexpectedly failed with flag \" << _ << \" unset: \" << strTest);\r\n```\r\n\r\n(but probably change `_` to `flag_name` or similar)",
    "created_at": "2021-04-07T10:24:47Z",
    "updated_at": "2021-04-08T02:02:09Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r608530055",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/608530055"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r608530055"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/608530055/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 259,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/608530251",
    "pull_request_review_id": 629757309,
    "id": 608530251,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwODUzMDI1MQ==",
    "diff_hunk": "@@ -314,17 +333,21 @@ BOOST_AUTO_TEST_CASE(tx_invalid)\n             PrecomputedTransactionData txdata(tx);\n             unsigned int verify_flags = ParseScriptFlags(test[2].get_str());\n \n-            // Not using FillFlags() in the main test, in order to detect invalid verifyFlags combination\n-            if (!CheckTxScripts(tx, mapprevOutScriptPubKeys, mapprevOutValues, verify_flags, txdata, strTest, /* expect_valid */ false)) {\n-                BOOST_ERROR(\"Tx unexpectedly passed: \" << strTest);\n+            // Check that the test gives a valid combination of flags (otherwise VerifyScript will throw). Don't edit the flags.\n+            if (verify_flags != FillFlags(verify_flags)) {\n+                BOOST_ERROR(\"Bad test flags: \" << strTest);\n             }\n \n+            // Not using FillFlags() in the main test, in order to detect invalid verifyFlags combination\n+            BOOST_CHECK_MESSAGE(CheckTxScripts(tx, mapprevOutScriptPubKeys, mapprevOutValues, verify_flags, txdata, strTest, /* expect_valid */ false),\n+                                \"Tx unexpectedly passed: \" << strTest);\n+\n             // Backwards compatibility of script verification flags: Adding any flag(s) should not validate an invalid transaction\n-            for (size_t i = 0; i < mapFlagNames.size(); i++) {\n-                unsigned int flags = FillFlags(verify_flags | (1U << i));\n+            for (const auto & [_, flag] : mapFlagNames) {",
    "path": "src/test/transaction_tests.cpp",
    "position": null,
    "original_position": 130,
    "commit_id": "b109bde46a8730afbc09c107b802a2c321293f4b",
    "original_commit_id": "24f2951e11d0aa88e3b45271ec457abaadc6fde0",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "```suggestion\r\n            for (const auto& [_, flag] : mapFlagNames) {\r\n```",
    "created_at": "2021-04-07T10:25:06Z",
    "updated_at": "2021-04-08T02:02:09Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r608530251",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/608530251"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r608530251"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/608530251/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 346,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/608530364",
    "pull_request_review_id": 629757309,
    "id": 608530364,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwODUzMDM2NA==",
    "diff_hunk": "@@ -314,17 +333,21 @@ BOOST_AUTO_TEST_CASE(tx_invalid)\n             PrecomputedTransactionData txdata(tx);\n             unsigned int verify_flags = ParseScriptFlags(test[2].get_str());\n \n-            // Not using FillFlags() in the main test, in order to detect invalid verifyFlags combination\n-            if (!CheckTxScripts(tx, mapprevOutScriptPubKeys, mapprevOutValues, verify_flags, txdata, strTest, /* expect_valid */ false)) {\n-                BOOST_ERROR(\"Tx unexpectedly passed: \" << strTest);\n+            // Check that the test gives a valid combination of flags (otherwise VerifyScript will throw). Don't edit the flags.\n+            if (verify_flags != FillFlags(verify_flags)) {\n+                BOOST_ERROR(\"Bad test flags: \" << strTest);\n             }\n \n+            // Not using FillFlags() in the main test, in order to detect invalid verifyFlags combination\n+            BOOST_CHECK_MESSAGE(CheckTxScripts(tx, mapprevOutScriptPubKeys, mapprevOutValues, verify_flags, txdata, strTest, /* expect_valid */ false),\n+                                \"Tx unexpectedly passed: \" << strTest);\n+\n             // Backwards compatibility of script verification flags: Adding any flag(s) should not validate an invalid transaction\n-            for (size_t i = 0; i < mapFlagNames.size(); i++) {\n-                unsigned int flags = FillFlags(verify_flags | (1U << i));\n+            for (const auto & [_, flag] : mapFlagNames) {\n+                unsigned int flags = FillFlags(verify_flags | flag);\n                 // Adding individual flags\n                 if (!CheckTxScripts(tx, mapprevOutScriptPubKeys, mapprevOutValues, flags, txdata, strTest, /* expect_valid */ false)) {\n-                    BOOST_ERROR(\"Tx unexpectedly passed with flag \" << ToString(i) << \" set: \" << strTest);\n+                    BOOST_ERROR(\"Tx unexpectedly passed with flag \" << ToString(flag) << \" set: \" << strTest);",
    "path": "src/test/transaction_tests.cpp",
    "position": null,
    "original_position": 135,
    "commit_id": "b109bde46a8730afbc09c107b802a2c321293f4b",
    "original_commit_id": "24f2951e11d0aa88e3b45271ec457abaadc6fde0",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Again, `ToString()` is not necessary.",
    "created_at": "2021-04-07T10:25:19Z",
    "updated_at": "2021-04-08T02:02:09Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r608530364",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/608530364"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r608530364"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/608530364/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 350,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/609207075",
    "pull_request_review_id": 630919643,
    "id": 609207075,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYwOTIwNzA3NQ==",
    "diff_hunk": "@@ -228,16 +248,15 @@ BOOST_AUTO_TEST_CASE(tx_valid)\n                 BOOST_ERROR(\"Bad test flags: \" << strTest);\n             }\n \n-            if (!CheckTxScripts(tx, mapprevOutScriptPubKeys, mapprevOutValues, ~verify_flags, txdata, strTest, /* expect_valid */ true)) {\n-                BOOST_ERROR(\"Tx unexpectedly failed: \" << strTest);\n-            }\n+            BOOST_CHECK_MESSAGE(CheckTxScripts(tx, mapprevOutScriptPubKeys, mapprevOutValues, ~verify_flags, txdata, strTest, /* expect_valid */ true),\n+                                \"Tx unexpectedly failed: \" << strTest);\n \n             // Backwards compatibility of script verification flags: Removing any flag(s) should not invalidate a valid transaction\n-            for (size_t i = 0; i < mapFlagNames.size(); ++i) {\n+            for (const auto & [_, flag] : mapFlagNames) {\n                 // Removing individual flags\n-                unsigned int flags = TrimFlags(~(verify_flags | (1U << i)));\n+                unsigned int flags = TrimFlags(~(verify_flags | flag));\n                 if (!CheckTxScripts(tx, mapprevOutScriptPubKeys, mapprevOutValues, flags, txdata, strTest, /* expect_valid */ true)) {\n-                    BOOST_ERROR(\"Tx unexpectedly failed with flag \" << ToString(i) << \" unset: \" << strTest);\n+                    BOOST_ERROR(\"Tx unexpectedly failed with flag \" << ToString(flag) << \" unset: \" << strTest);",
    "path": "src/test/transaction_tests.cpp",
    "position": null,
    "original_position": 98,
    "commit_id": "b109bde46a8730afbc09c107b802a2c321293f4b",
    "original_commit_id": "24f2951e11d0aa88e3b45271ec457abaadc6fde0",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "printing name of flag! :D ",
    "created_at": "2021-04-08T02:03:42Z",
    "updated_at": "2021-04-08T02:03:42Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r609207075",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/609207075"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r609207075"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/609207075/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 259,
    "side": "RIGHT",
    "in_reply_to_id": 608530055
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/615687816",
    "pull_request_review_id": 638652263,
    "id": 615687816,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYxNTY4NzgxNg==",
    "diff_hunk": "@@ -124,15 +124,15 @@\n [\"CHECKLOCKTIMEVERIFY tests\"],\n \n [\"By-height locks, with argument just beyond tx nLockTime\"],\n-[[[\"0000000000000000000000000000000000000000000000000000000000000100\", 0, \"1 CHECKLOCKTIMEVERIFY 1\"]],\n+[[[\"0000000000000000000000000000000000000000000000000000000000000100\", 0, \"1 CHECKLOCKTIMEVERIFY\"]],\n \"010000000100010000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000\", \"CHECKLOCKTIMEVERIFY\"],\n-[[[\"0000000000000000000000000000000000000000000000000000000000000100\", 0, \"499999999 CHECKLOCKTIMEVERIFY 1\"]],\n+[[[\"0000000000000000000000000000000000000000000000000000000000000100\", 0, \"499999999 CHECKLOCKTIMEVERIFY\"]],\n \"0100000001000100000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000fe64cd1d\", \"CHECKLOCKTIMEVERIFY\"],\n \n [\"By-time locks, with argument just beyond tx nLockTime (but within numerical boundaries)\"],\n-[[[\"0000000000000000000000000000000000000000000000000000000000000100\", 0, \"500000001 CHECKLOCKTIMEVERIFY 1\"]],\n+[[[\"0000000000000000000000000000000000000000000000000000000000000100\", 0, \"500000001 CHECKLOCKTIMEVERIFY\"]],\n \"01000000010001000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000065cd1d\", \"CHECKLOCKTIMEVERIFY\"],\n-[[[\"0000000000000000000000000000000000000000000000000000000000000100\", 0, \"4294967295 CHECKLOCKTIMEVERIFY 1\"]],\n+[[[\"0000000000000000000000000000000000000000000000000000000000000100\", 0, \"4294967295 CHECKLOCKTIMEVERIFY\"]],",
    "path": "src/test/data/tx_invalid.json",
    "position": 16,
    "original_position": 16,
    "commit_id": "b109bde46a8730afbc09c107b802a2c321293f4b",
    "original_commit_id": "5d3ced72f9b5f36db1a76bd8bc918d11b87dfd72",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "It might be nice to check the exact script reject reason instead of just failure",
    "created_at": "2021-04-19T09:27:38Z",
    "updated_at": "2021-04-19T09:27:38Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r615687816",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/615687816"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21280#discussion_r615687816"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21280"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/615687816/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 135,
    "original_line": 135,
    "side": "RIGHT"
  }
]