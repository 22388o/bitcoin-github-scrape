laanwj,2018-02-13T11:19:54Z,Concept ACK,https://github.com/bitcoin/bitcoin/pull/12421#issuecomment-365237664,365237664,
MarcoFalke,2018-02-13T13:10:21Z,utACK ddbc5aaee1bdb69583eb711ad3145fa5f8b67933,https://github.com/bitcoin/bitcoin/pull/12421#issuecomment-365262058,365262058,
promag,2018-02-13T18:04:47Z,"> just remained on the Send tab, which I found confusing\n\nIMHO this is more confusing, having such sudden UI change. What if he wants to do multiple sends?\n\nHow about adding a checkbox like `[x] View transaction after sending` and remembering the checkbox state in settings?",https://github.com/bitcoin/bitcoin/pull/12421#issuecomment-365352043,365352043,
Sjors,2018-02-14T09:28:28Z,"@promag I don't think I've ever seen an online banking application that doesn't take the user to the transaction overview page after sending money.\n\nIn most financial applications Send is a modal experience, where the Send screen is pushed on top of the transaction screen and popped when the user is done. In a desktop browser that's usually a modal window, on an iPhone it's a window that anima",https://github.com/bitcoin/bitcoin/pull/12421#issuecomment-365545505,365545505,
jonasschnelli,2018-02-14T09:33:39Z,utACK ddbc5aaee1bdb69583eb711ad3145fa5f8b67933,https://github.com/bitcoin/bitcoin/pull/12421#issuecomment-365546800,365546800,
practicalswift,2018-02-14T17:55:50Z,Concept ACK,https://github.com/bitcoin/bitcoin/pull/12421#issuecomment-365690923,365690923,
randolf,2018-02-15T02:31:41Z,Concept ACK.,https://github.com/bitcoin/bitcoin/pull/12421#issuecomment-365809328,365809328,
Sjors,2018-02-15T17:57:32Z,It now highlights the transaction.,https://github.com/bitcoin/bitcoin/pull/12421#issuecomment-366009550,366009550,
Sjors,2018-02-19T15:29:03Z,Now passing the transaction hash as `uint256`.,https://github.com/bitcoin/bitcoin/pull/12421#issuecomment-366726107,366726107,
promag,2018-02-20T14:09:49Z,"reACK b7ebe39, only changes are the suggested above.",https://github.com/bitcoin/bitcoin/pull/12421#issuecomment-366988413,366988413,
luke-jr,2018-02-27T15:25:11Z,"> What if he wants to do multiple sends?\n\n@promag Then he should do them all at once...",https://github.com/bitcoin/bitcoin/pull/12421#issuecomment-368915084,368915084,
promag,2018-02-27T15:33:41Z,"@luke-jr agree, came to the same conclusion little after.",https://github.com/bitcoin/bitcoin/pull/12421#issuecomment-368918404,368918404,
Sjors,2018-02-27T17:39:18Z,"I'd like to select both entries on the transaction screen when a user sends to two addresses. Unfortunately:\n* `this->model->getTransactionTableModel()->match(...` only returns one entry.  \n* `transactionView->selectRow(...)` deselects whichever row was previously selected (even though the user can manually select multiple transactions) ",https://github.com/bitcoin/bitcoin/pull/12421#issuecomment-368962375,368962375,
luke-jr,2018-02-27T18:34:13Z,"https://doc.qt.io/qt-5/qtableview.html#setSelection with `QItemSelectionModel::Rows` (and probably `QItemSelectionModel::ClearAndSelect`).\n\nWhy would match only return one entry??",https://github.com/bitcoin/bitcoin/pull/12421#issuecomment-368979953,368979953,
Sjors,2018-02-28T09:37:18Z,"> Why would match only return one entry??\n\nI don't know. Here's a [WIP commit](https://github.com/Sjors/bitcoin/commit/8167cfd3de27da2be5852fe9561d4ae47ed361e3). The `fprintf(stderr, ""row:` line is only called once.\n\nI'm confused about the relation between `this->model->getTransactionTableModel()`, `transactionView` and `transactionProxyModel`. E.g. what does `QModelIndex targetIdx = trans",https://github.com/bitcoin/bitcoin/pull/12421#issuecomment-369180386,369180386,
Sjors,2018-02-28T11:21:17Z,"I added @promag's commit to enable multi row selection. Note that if the user scrolls down, it won't scroll up. And if the user orders transactions by ascending date and scrolls down, it won't scroll further down to reveal the new transaction.",https://github.com/bitcoin/bitcoin/pull/12421#issuecomment-369209394,369209394,
laanwj,2018-02-28T12:42:59Z,"> @promag I don't think I've ever seen an online banking application that doesn't take the user to the transaction overview page after sending money.\n> @promag Then he should do them all at once...\n\n+1",https://github.com/bitcoin/bitcoin/pull/12421#issuecomment-369227919,369227919,
promag,2018-02-13T18:07:15Z,"If the idea is to highlight the transaction, adding the txid or like can help.",https://github.com/bitcoin/bitcoin/pull/12421#discussion_r167951594,167951594,src/qt/sendcoinsdialog.h
Sjors,2018-02-14T09:42:56Z,I can extract the tx id and pass it along as a string. The part I couldn't figure out is how to convert that to whatever `focusTransaction(const QModelIndex &idx)` needs.,https://github.com/bitcoin/bitcoin/pull/12421#discussion_r168120827,168120827,src/qt/sendcoinsdialog.h
promag,2018-02-14T16:48:30Z,Remove comment? It's only relevant below when connecting.,https://github.com/bitcoin/bitcoin/pull/12421#discussion_r168238020,168238020,src/qt/sendcoinsdialog.cpp
promag,2018-02-14T16:49:31Z,"Nit, rename to `coinsSent()`.\n\nRegarding row focus, see https://stackoverflow.com/a/35154534.",https://github.com/bitcoin/bitcoin/pull/12421#discussion_r168238389,168238389,src/qt/sendcoinsdialog.h
promag,2018-02-14T17:00:23Z,"BTW, add\n```cpp\n    ui->checkBoxCoinControlChange->setChecked(false);\n    ui->lineEditCoinControlChange->clear();\n```\nlike #12432?",https://github.com/bitcoin/bitcoin/pull/12421#discussion_r168242199,168242199,src/qt/sendcoinsdialog.cpp
Sjors,2018-02-15T16:24:51Z,"Coin control fields, custom change address and selected inputs, are already cleared after you send.",https://github.com/bitcoin/bitcoin/pull/12421#discussion_r168528681,168528681,src/qt/sendcoinsdialog.cpp
promag,2018-02-15T16:36:27Z,Please verify custom change address checkbox and line edit because here they are not cleared.,https://github.com/bitcoin/bitcoin/pull/12421#discussion_r168532793,168532793,src/qt/sendcoinsdialog.cpp
Sjors,2018-02-15T17:57:05Z,Done,https://github.com/bitcoin/bitcoin/pull/12421#discussion_r168557353,168557353,src/qt/sendcoinsdialog.h
Sjors,2018-02-15T17:57:13Z,Removed,https://github.com/bitcoin/bitcoin/pull/12421#discussion_r168557397,168557397,src/qt/sendcoinsdialog.cpp
Sjors,2018-02-15T18:01:48Z,"You're right. Turns out #12432 fixes that, because  `SendCoinsDialog::accept()` is called when the transaction is sent, which in turn calls `clear()`.",https://github.com/bitcoin/bitcoin/pull/12421#discussion_r168558673,168558673,src/qt/sendcoinsdialog.cpp
promag,2018-02-15T18:21:26Z,"```cpp\nif (results.isEmpty()) return;",https://github.com/bitcoin/bitcoin/pull/12421#discussion_r168563986,168563986,src/qt/transactionview.cpp
promag,2018-02-15T18:21:42Z,"Space after `if`, one line.",https://github.com/bitcoin/bitcoin/pull/12421#discussion_r168564079,168564079,src/qt/transactionview.cpp
promag,2018-02-15T18:22:19Z,`const QString& txid` so that it's clear what the argument is?,https://github.com/bitcoin/bitcoin/pull/12421#discussion_r168564258,168564258,src/qt/sendcoinsdialog.h
promag,2018-02-15T18:29:04Z,IIRC this performs linear search. Probably something worth to optimise in case of bigger wallets in the future.,https://github.com/bitcoin/bitcoin/pull/12421#discussion_r168566201,168566201,src/qt/transactionview.cpp
Sjors,2018-02-16T15:19:26Z,"Are transactions in reverse chronological order? In that case it should be pretty quick, unless some race condition causes the new transaction to be missing.",https://github.com/bitcoin/bitcoin/pull/12421#discussion_r168784247,168784247,src/qt/transactionview.cpp
Sjors,2018-02-16T15:46:48Z,Fixed.,https://github.com/bitcoin/bitcoin/pull/12421#discussion_r168792418,168792418,src/qt/transactionview.cpp
Sjors,2018-02-16T15:46:49Z,Fixed.,https://github.com/bitcoin/bitcoin/pull/12421#discussion_r168792424,168792424,src/qt/transactionview.cpp
Sjors,2018-02-16T15:46:51Z,Done.,https://github.com/bitcoin/bitcoin/pull/12421#discussion_r168792435,168792435,src/qt/sendcoinsdialog.h
jonasschnelli,2018-02-17T11:00:28Z,"Meh on using strings for internal uint256 transport.\nWhy not uint256? Could also register the type if not yet supported.",https://github.com/bitcoin/bitcoin/pull/12421#discussion_r168918984,168918984,src/qt/sendcoinsdialog.cpp
Sjors,2018-02-19T11:46:25Z,I tried passing the uint256 directly and got a bloodbath of compiler errors. How do I go about registering the type? ,https://github.com/bitcoin/bitcoin/pull/12421#discussion_r169052932,169052932,src/qt/sendcoinsdialog.cpp
promag,2018-02-19T15:00:52Z,"With `Q_DECLARE_METATYPE`, see https://github.com/bitcoin/bitcoin/blob/dcfe218626b05204e9fbc95ba5d95ca0eb72ec9b/src/qt/bitcoin.cpp#L80-L82",https://github.com/bitcoin/bitcoin/pull/12421#discussion_r169099565,169099565,src/qt/sendcoinsdialog.cpp
promag,2018-02-19T16:03:39Z,Can be removed.,https://github.com/bitcoin/bitcoin/pull/12421#discussion_r169116623,169116623,src/qt/sendcoinsdialog.cpp
promag,2018-02-19T16:04:22Z,Use reference? `const uint256& txid`.,https://github.com/bitcoin/bitcoin/pull/12421#discussion_r169116809,169116809,src/qt/sendcoinsdialog.h
promag,2018-02-19T16:04:41Z,Use reference? `const uint256& txid`.,https://github.com/bitcoin/bitcoin/pull/12421#discussion_r169116892,169116892,src/qt/transactionview.cpp
Sjors,2018-02-20T12:22:01Z,Fixed,https://github.com/bitcoin/bitcoin/pull/12421#discussion_r169301697,169301697,src/qt/sendcoinsdialog.h
Sjors,2018-02-20T12:22:03Z,Fixed,https://github.com/bitcoin/bitcoin/pull/12421#discussion_r169301705,169301705,src/qt/sendcoinsdialog.cpp
luke-jr,2018-02-27T15:26:12Z,"Transactions are *displayed* in whatever order the user chooses. I'm not sure what order is internally used, however...",https://github.com/bitcoin/bitcoin/pull/12421#discussion_r170959325,170959325,src/qt/transactionview.cpp
luke-jr,2018-02-27T15:27:42Z,"We support selecting multiple transactions, so this ought to select all of them...",https://github.com/bitcoin/bitcoin/pull/12421#discussion_r170959878,170959878,src/qt/transactionview.cpp
Sjors,2018-02-27T16:01:36Z,"I consider more than 1 result an error, given that we're passing a single tx id. I could replace the `isEmpty()` with a check that length is 1.",https://github.com/bitcoin/bitcoin/pull/12421#discussion_r170972387,170972387,src/qt/transactionview.cpp
luke-jr,2018-02-27T16:13:33Z,"It's definitely not an error. The transaction list shows logical transactions, not blockchain transactions. There is 1 txid per blockchain transaction, but that could be many logical transactions.",https://github.com/bitcoin/bitcoin/pull/12421#discussion_r170976638,170976638,src/qt/transactionview.cpp
Sjors,2018-02-27T16:58:39Z,"Ah, I see what you mean. E.g. sending to two destinations in one transaction results in two rows in the transactions tab.",https://github.com/bitcoin/bitcoin/pull/12421#discussion_r170993028,170993028,src/qt/transactionview.cpp
Sjors,2018-02-28T11:32:25Z,"I created a fresh wallet and then called `generate 10000`. I didn't notice any delay when sending transactions, although my machine is relatively fast. I also tried reversing transaction order in the view.",https://github.com/bitcoin/bitcoin/pull/12421#discussion_r171216787,171216787,src/qt/transactionview.cpp
promag,2018-02-28T12:21:16Z,"We could ensure first row is visible:\n```cpp\nfor (...) {\n    if (index == results[0]) transactionView->scrollTo(index);\n```",https://github.com/bitcoin/bitcoin/pull/12421#discussion_r171227266,171227266,src/qt/transactionview.cpp
promag,2018-02-28T12:22:42Z,"Nit, add space after `if`.",https://github.com/bitcoin/bitcoin/pull/12421#discussion_r171227585,171227585,src/qt/transactionview.cpp
promag,2018-02-28T12:23:53Z,"Avoid copy here:\n```cpp\nconst uint256& txid = ...\n```",https://github.com/bitcoin/bitcoin/pull/12421#discussion_r171227817,171227817,src/qt/sendcoinsdialog.cpp
promag,2018-02-28T12:26:18Z,@luke-jr :+1:,https://github.com/bitcoin/bitcoin/pull/12421#discussion_r171228420,171228420,src/qt/transactionview.cpp
laanwj,2018-02-28T12:47:39Z,"Or roll it into the Q_EMIT, as txid is not used after this. YMMV. For performance I'd be surprised it makes any difference.\n```\nQ_EMIT coinsSent(currentTransaction.getTransaction()->GetHash());\n```",https://github.com/bitcoin/bitcoin/pull/12421#discussion_r171233254,171233254,src/qt/sendcoinsdialog.cpp
Sjors,2018-02-28T14:46:12Z,That worked (using `transactionProxyModel->mapFromSource`) when transactions are ordered by date. Unfortunately when they're ordered in reverse it doesn't scroll all the way to the bottom. Maybe we need to wait a little bit for `transactionView` to become aware of its new size?,https://github.com/bitcoin/bitcoin/pull/12421#discussion_r171267042,171267042,src/qt/transactionview.cpp
Sjors,2018-02-28T14:46:42Z,Fixed,https://github.com/bitcoin/bitcoin/pull/12421#discussion_r171267205,171267205,src/qt/transactionview.cpp
Sjors,2018-02-28T14:46:59Z,Rolled into `Q_EMIT`.,https://github.com/bitcoin/bitcoin/pull/12421#discussion_r171267291,171267291,src/qt/sendcoinsdialog.cpp
promag,2018-02-28T16:49:23Z,"On my system calling `transactionView->scrollTo(targetIndex)` for every model index fixes it (not sure why). It also works in the default order because scroll hint is `QAbstractItemView::EnsureVisible`, so focusing the 2nd row will not remove the 1st from the viewport (the 2nd row is already visible).\n\nBut it's also possible to order by other column (for instance address), and in that case it ",https://github.com/bitcoin/bitcoin/pull/12421#discussion_r171310629,171310629,src/qt/transactionview.cpp
Sjors,2018-03-01T09:26:55Z,"When I call `scrollTo` for every model index and transactions are sort by ascending date, things get weird: if I send to two destinations it scrolls correctly, but if I send to one destination it won't scroll far enough.\n\nCalling `scollTo()` twice ""fixes"" it. Seems suspiciously similar to [this](https://forum.qt.io/topic/81671/scrollto-not-working-properly/4) ~I'll poke around a bit~.\n\nI p",https://github.com/bitcoin/bitcoin/pull/12421#discussion_r171501469,171501469,src/qt/transactionview.cpp
