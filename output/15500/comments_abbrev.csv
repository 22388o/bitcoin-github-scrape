DrahtBot,2019-02-28T07:00:30Z,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#15367](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/15367.html) (feature: Added ability for users to add a s",https://github.com/bitcoin/bitcoin/pull/15500#issuecomment-468160835,468160835,
practicalswift,2019-02-28T10:26:30Z,"@murrayn Is it worth writing the PID to the readiness file to allow the consumer to verify that the file is not stale?\n\nWould it be worth to allow for also the ""waiting for startup"" scenario by writing to say `.bitcoind-state.initializing` immediately on startup-up and then rename it to `.bitcoind-state.ready` when the initialization is done?",https://github.com/bitcoin/bitcoin/pull/15500#issuecomment-468220094,468220094,
murrayn,2019-03-01T08:52:52Z,"@practicalswift Thanks for the comments. I did consider both of those approaches. But the PID is already available in `bitcoind.pid`, so doing so here seems redundant. I also considered having a **'status'** file of some type, instead of **'ready'**, but I think the only interesting status is likely to be **'ready'** anyway.",https://github.com/bitcoin/bitcoin/pull/15500#issuecomment-468591455,468591455,
promag,2019-03-03T16:51:17Z,"NACK, sorry.\n\n> the idea is to indicate, via creation of a file, that `bitcoind` is not only running but ready to actually use\n\nI'd say just use it. A good script should handle retrying, not only when it's starting up, but also when it crashed or it's being updated or something. This approach also works if the other service is not in the same host, which this PR can't handle. See the test ",https://github.com/bitcoin/bitcoin/pull/15500#issuecomment-469040931,469040931,
dongcarl,2019-03-04T02:38:16Z,@murrayn I think a better modification is perhaps adding support for `sd_notify` (behind a configure flag) that would tell systemd when things are ready. Or doing something like a systemd socket configuration. But of course all of those are systemd specific.,https://github.com/bitcoin/bitcoin/pull/15500#issuecomment-469098481,469098481,
murrayn,2019-03-28T06:09:41Z,"Doesn't seem to be much traction for this, so I'll close it.",https://github.com/bitcoin/bitcoin/pull/15500#issuecomment-477462142,477462142,
luke-jr,2019-02-28T09:15:35Z,"If the computer crashes, the file won't get deleted...",https://github.com/bitcoin/bitcoin/pull/15500#discussion_r261104201,261104201,src/init.cpp
practicalswift,2019-02-28T20:42:10Z,Should be const ref? :-),https://github.com/bitcoin/bitcoin/pull/15500#discussion_r261374597,261374597,src/init.cpp
murrayn,2019-03-01T08:44:27Z,"Yes, fixed.",https://github.com/bitcoin/bitcoin/pull/15500#discussion_r261518275,261518275,src/init.cpp
murrayn,2019-03-01T09:10:46Z,"Fair point, but the external command approach would likely have the same limitation. Perhaps we could remove any existing `ready` file early in `AppInitMain()` (or earlier) to mitigate this?\n\nI am very uncomfortable with adding the ability to `exec()` external programs. It just feels like an attack vector.\n",https://github.com/bitcoin/bitcoin/pull/15500#discussion_r261526351,261526351,src/init.cpp
luke-jr,2019-03-03T10:42:18Z,`-blocknotify` and `-walletnotify` already exist.,https://github.com/bitcoin/bitcoin/pull/15500#discussion_r261861222,261861222,src/init.cpp
