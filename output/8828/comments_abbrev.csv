paveljanik,2016-09-30T13:36:29Z,"test_bitcoin fails here:\n\n```\nRunning 210 test cases...\nunknown location:0: fatal error in ""acc_orderupgrade"": signal: illegal opcode; address of failing instruction: 0x10988a98a\nwallet/test/accounting_tests.cpp:24: last checkpoint\n\n*** 1 failure detected in test suite ""Bitcoin Test Suite""\nDatabase handles still open at environment close\nOpen database handle: unnamed/wallet_test.dat\n```\",https://github.com/bitcoin/bitcoin/pull/8828#issuecomment-250745912,250745912,
laanwj,2016-09-30T16:37:25Z,Concept ACK\n,https://github.com/bitcoin/bitcoin/pull/8828#issuecomment-250792078,250792078,
laanwj,2016-09-30T17:23:20Z,"Regarding the Travis issue, I can reproduce this locally simply by running test_bitcoin:\n\n```\nThread 1 ""test_bitcoin"" received signal SIGILL, Illegal instruction.\nCWallet::ReorderTransactions (this=<optimized out>) at /.../bitcoin/bitcoin/src/wallet/wallet.cpp:681\n681         nOrderPosNext = 0;\n(gdb) bt\n#0  CWallet::ReorderTransactions (this=<optimized out>) at /.../bitcoin/bitcoin/src/wall",https://github.com/bitcoin/bitcoin/pull/8828#issuecomment-250802812,250802812,
paveljanik,2016-09-30T13:30:12Z,Move this a line down because of the comment?\n,https://github.com/bitcoin/bitcoin/pull/8828#discussion_r81338503,81338503,src/wallet/walletdb.h
paveljanik,2016-09-30T18:07:39Z,```\n+wallet/wallet.cpp:684:14: warning: declaration shadows a field of 'CWallet' [-Wshadow]\n+    int64_t& nOrderPosNext = nOrderPosNext;\n+             ^\n+./wallet/wallet.h:659:13: note: previous declaration is here\n+    int64_t nOrderPosNext;\n+            ^\n+wallet/wallet.cpp:684:30: warning: reference 'nOrderPosNext' is not yet bound to a value when used within its own initialization [-Wun,https://github.com/bitcoin/bitcoin/pull/8828#discussion_r81389089,81389089,src/wallet/wallet.cpp
paveljanik,2016-09-30T18:09:47Z,What is this?\n,https://github.com/bitcoin/bitcoin/pull/8828#discussion_r81389469,81389469,src/wallet/wallet.cpp
laanwj,2016-09-30T18:17:51Z,"Yes, I think this is the culprit. It's creating a strange circular reference.\n\nWith this line removed it passes the tests.\n",https://github.com/bitcoin/bitcoin/pull/8828#discussion_r81390849,81390849,src/wallet/wallet.cpp
MarcoFalke,2016-10-18T15:28:00Z,@pstratem Are you still working on this?\n,https://github.com/bitcoin/bitcoin/pull/8828#discussion_r83881200,83881200,src/wallet/wallet.cpp
pstratem,2016-10-30T10:10:54Z,indeed that is the issue\n,https://github.com/bitcoin/bitcoin/pull/8828#discussion_r85656776,85656776,src/wallet/wallet.cpp
