[
  {
    "sha": "f9d60febdc265824d5f183ef6e0756875869ddb0",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmOWQ2MGZlYmRjMjY1ODI0ZDVmMTgzZWY2ZTA3NTY4NzU4NjlkZGIw",
    "commit": {
      "author": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2018-06-18T22:28:10Z"
      },
      "committer": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2018-10-05T22:23:59Z"
      },
      "message": "bugfix: Correctly terminate HTTP server",
      "tree": {
        "sha": "5be0722c812804c53746a67d3bcea349cea6bf59",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5be0722c812804c53746a67d3bcea349cea6bf59"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f9d60febdc265824d5f183ef6e0756875869ddb0",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f9d60febdc265824d5f183ef6e0756875869ddb0",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/f9d60febdc265824d5f183ef6e0756875869ddb0",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f9d60febdc265824d5f183ef6e0756875869ddb0/comments",
    "author": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "4b4e9486af9a9b46997ebb579c58bf8d5f83a276",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4b4e9486af9a9b46997ebb579c58bf8d5f83a276",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/4b4e9486af9a9b46997ebb579c58bf8d5f83a276"
      }
    ],
    "stats": {
      "total": 53,
      "additions": 35,
      "deletions": 18
    },
    "files": [
      {
        "sha": "1c836062fd05a2cd1bae8c86482f804723267ad5",
        "filename": "src/httpserver.cpp",
        "status": "modified",
        "additions": 35,
        "deletions": 18,
        "changes": 53,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/f9d60febdc265824d5f183ef6e0756875869ddb0/src/httpserver.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/f9d60febdc265824d5f183ef6e0756875869ddb0/src/httpserver.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/httpserver.cpp?ref=f9d60febdc265824d5f183ef6e0756875869ddb0",
        "patch": "@@ -14,6 +14,7 @@\n #include <ui_interface.h>\n \n #include <memory>\n+#include <set>\n #include <stdio.h>\n #include <stdlib.h>\n #include <string.h>\n@@ -144,6 +145,9 @@ struct evhttp* eventHTTP = nullptr;\n static std::vector<CSubNet> rpc_allow_subnets;\n //! Work queue for handling longer requests off the event loop thread\n static WorkQueue<HTTPClosure>* workQueue = nullptr;\n+//! Set of current HTTP connections\n+static Mutex g_http_connections_cs;\n+static std::set<evhttp_connection*> g_http_connections GUARDED_BY(g_http_connections_cs);\n //! Handlers for (sub)paths\n std::vector<HTTPPathHandler> pathHandlers;\n //! Bound listening sockets\n@@ -209,9 +213,24 @@ static std::string RequestMethodString(HTTPRequest::RequestMethod m)\n     }\n }\n \n+/** HTTP connection close callback */\n+static void http_connection_close_cb(struct evhttp_connection* conn, void* /* arg */)\n+{\n+    LOCK(g_http_connections_cs);\n+    g_http_connections.erase(conn);\n+}\n+\n /** HTTP request callback */\n-static void http_request_cb(struct evhttp_request* req, void* arg)\n+static void http_request_cb(struct evhttp_request* req, void* /* arg */)\n {\n+    {\n+        LOCK(g_http_connections_cs);\n+        evhttp_connection* conn = evhttp_request_get_connection(req);\n+        if (g_http_connections.insert(conn).second) {\n+            evhttp_connection_set_closecb(conn, http_connection_close_cb, nullptr);\n+        }\n+    }\n+\n     // Disable reading to work around a libevent bug, fixed in 2.2.0.\n     if (event_get_version_number() >= 0x02010600 && event_get_version_number() < 0x02020001) {\n         evhttp_connection* conn = evhttp_request_get_connection(req);\n@@ -284,7 +303,6 @@ static bool ThreadHTTP(struct event_base* base)\n     RenameThread(\"bitcoin-http\");\n     LogPrint(BCLog::HTTP, \"Entering http event loop\\n\");\n     event_base_dispatch(base);\n-    // Event loop will be interrupted by InterruptHTTPServer()\n     LogPrint(BCLog::HTTP, \"Exited http event loop\\n\");\n     return event_base_got_break(base) == 0;\n }\n@@ -457,21 +475,21 @@ void StopHTTPServer()\n         delete workQueue;\n         workQueue = nullptr;\n     }\n+    {\n+        LogPrint(BCLog::HTTP, \"Disabling reading on current connections\\n\");\n+        LOCK(g_http_connections_cs);\n+        for (evhttp_connection* conn : g_http_connections) {\n+            bufferevent* bev = evhttp_connection_get_bufferevent(conn);\n+            if (bev) bufferevent_disable(bev, EV_READ);\n+        }\n+        g_http_connections.clear();\n+    }\n     if (eventBase) {\n         LogPrint(BCLog::HTTP, \"Waiting for HTTP event thread to exit\\n\");\n-        // Exit the event loop as soon as there are no active events.\n-        event_base_loopexit(eventBase, nullptr);\n-        // Give event loop a few seconds to exit (to send back last RPC responses), then break it\n-        // Before this was solved with event_base_loopexit, but that didn't work as expected in\n-        // at least libevent 2.0.21 and always introduced a delay. In libevent\n-        // master that appears to be solved, so in the future that solution\n-        // could be used again (if desirable).\n-        // (see discussion in https://github.com/bitcoin/bitcoin/pull/6990)\n-        if (threadResult.valid() && threadResult.wait_for(std::chrono::milliseconds(2000)) == std::future_status::timeout) {\n-            LogPrintf(\"HTTP event loop did not exit within allotted time, sending loopbreak\\n\");\n-            event_base_loopbreak(eventBase);\n-        }\n+        event_base_loopbreak(eventBase);\n         threadHTTP.join();\n+        // Process remaining events.\n+        event_base_dispatch(eventBase);\n     }\n     if (eventHTTP) {\n         evhttp_free(eventHTTP);\n@@ -586,11 +604,10 @@ void HTTPRequest::WriteReply(int nStatus, const std::string& strReply)\n         // workaround above.\n         if (event_get_version_number() >= 0x02010600 && event_get_version_number() < 0x02020001) {\n             evhttp_connection* conn = evhttp_request_get_connection(req_copy);\n-            if (conn) {\n+            LOCK(g_http_connections_cs);\n+            if (conn && g_http_connections.count(conn)) {\n                 bufferevent* bev = evhttp_connection_get_bufferevent(conn);\n-                if (bev) {\n-                    bufferevent_enable(bev, EV_READ | EV_WRITE);\n-                }\n+                if (bev) bufferevent_enable(bev, EV_READ | EV_WRITE);\n             }\n         }\n     });"
      }
    ]
  },
  {
    "sha": "b28ed684ace55766c1f65b5b7644dcd32e1828e8",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiMjhlZDY4NGFjZTU1NzY2YzFmNjViNWI3NjQ0ZGNkMzJlMTgyOGU4",
    "commit": {
      "author": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2018-11-01T23:07:54Z"
      },
      "committer": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2018-11-01T23:07:54Z"
      },
      "message": "rename to g_http_connections_mutex",
      "tree": {
        "sha": "4e31e98156c8f02813579ad38364057349b9f683",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/4e31e98156c8f02813579ad38364057349b9f683"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b28ed684ace55766c1f65b5b7644dcd32e1828e8",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b28ed684ace55766c1f65b5b7644dcd32e1828e8",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/b28ed684ace55766c1f65b5b7644dcd32e1828e8",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b28ed684ace55766c1f65b5b7644dcd32e1828e8/comments",
    "author": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "f9d60febdc265824d5f183ef6e0756875869ddb0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f9d60febdc265824d5f183ef6e0756875869ddb0",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/f9d60febdc265824d5f183ef6e0756875869ddb0"
      }
    ],
    "stats": {
      "total": 12,
      "additions": 6,
      "deletions": 6
    },
    "files": [
      {
        "sha": "c47d263eacf3cfa0888fd714e4d99a8aacf88b79",
        "filename": "src/httpserver.cpp",
        "status": "modified",
        "additions": 6,
        "deletions": 6,
        "changes": 12,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b28ed684ace55766c1f65b5b7644dcd32e1828e8/src/httpserver.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b28ed684ace55766c1f65b5b7644dcd32e1828e8/src/httpserver.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/httpserver.cpp?ref=b28ed684ace55766c1f65b5b7644dcd32e1828e8",
        "patch": "@@ -146,8 +146,8 @@ static std::vector<CSubNet> rpc_allow_subnets;\n //! Work queue for handling longer requests off the event loop thread\n static WorkQueue<HTTPClosure>* workQueue = nullptr;\n //! Set of current HTTP connections\n-static Mutex g_http_connections_cs;\n-static std::set<evhttp_connection*> g_http_connections GUARDED_BY(g_http_connections_cs);\n+static Mutex g_http_connections_mutex;\n+static std::set<evhttp_connection*> g_http_connections GUARDED_BY(g_http_connections_mutex);\n //! Handlers for (sub)paths\n std::vector<HTTPPathHandler> pathHandlers;\n //! Bound listening sockets\n@@ -216,15 +216,15 @@ static std::string RequestMethodString(HTTPRequest::RequestMethod m)\n /** HTTP connection close callback */\n static void http_connection_close_cb(struct evhttp_connection* conn, void* /* arg */)\n {\n-    LOCK(g_http_connections_cs);\n+    LOCK(g_http_connections_mutex);\n     g_http_connections.erase(conn);\n }\n \n /** HTTP request callback */\n static void http_request_cb(struct evhttp_request* req, void* /* arg */)\n {\n     {\n-        LOCK(g_http_connections_cs);\n+        LOCK(g_http_connections_mutex);\n         evhttp_connection* conn = evhttp_request_get_connection(req);\n         if (g_http_connections.insert(conn).second) {\n             evhttp_connection_set_closecb(conn, http_connection_close_cb, nullptr);\n@@ -477,7 +477,7 @@ void StopHTTPServer()\n     }\n     {\n         LogPrint(BCLog::HTTP, \"Disabling reading on current connections\\n\");\n-        LOCK(g_http_connections_cs);\n+        LOCK(g_http_connections_mutex);\n         for (evhttp_connection* conn : g_http_connections) {\n             bufferevent* bev = evhttp_connection_get_bufferevent(conn);\n             if (bev) bufferevent_disable(bev, EV_READ);\n@@ -604,7 +604,7 @@ void HTTPRequest::WriteReply(int nStatus, const std::string& strReply)\n         // workaround above.\n         if (event_get_version_number() >= 0x02010600 && event_get_version_number() < 0x02020001) {\n             evhttp_connection* conn = evhttp_request_get_connection(req_copy);\n-            LOCK(g_http_connections_cs);\n+            LOCK(g_http_connections_mutex);\n             if (conn && g_http_connections.count(conn)) {\n                 bufferevent* bev = evhttp_connection_get_bufferevent(conn);\n                 if (bev) bufferevent_enable(bev, EV_READ | EV_WRITE);"
      }
    ]
  },
  {
    "sha": "a826493a9e6a65b0c792b6c69b4424004a3d804c",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzphODI2NDkzYTllNmE2NWIwYzc5MmI2YzY5YjQ0MjQwMDRhM2Q4MDRj",
    "commit": {
      "author": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2018-11-01T23:08:06Z"
      },
      "committer": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2018-11-01T23:08:06Z"
      },
      "message": "add comment",
      "tree": {
        "sha": "df43107f48e8249b9bc3a121f799074a67743a26",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/df43107f48e8249b9bc3a121f799074a67743a26"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a826493a9e6a65b0c792b6c69b4424004a3d804c",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a826493a9e6a65b0c792b6c69b4424004a3d804c",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/a826493a9e6a65b0c792b6c69b4424004a3d804c",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a826493a9e6a65b0c792b6c69b4424004a3d804c/comments",
    "author": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "b28ed684ace55766c1f65b5b7644dcd32e1828e8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b28ed684ace55766c1f65b5b7644dcd32e1828e8",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/b28ed684ace55766c1f65b5b7644dcd32e1828e8"
      }
    ],
    "stats": {
      "total": 3,
      "additions": 3,
      "deletions": 0
    },
    "files": [
      {
        "sha": "b769851a62a7b030ffbd1e31d06f710ff0cdb10b",
        "filename": "src/httpserver.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a826493a9e6a65b0c792b6c69b4424004a3d804c/src/httpserver.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a826493a9e6a65b0c792b6c69b4424004a3d804c/src/httpserver.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/httpserver.cpp?ref=a826493a9e6a65b0c792b6c69b4424004a3d804c",
        "patch": "@@ -226,6 +226,9 @@ static void http_request_cb(struct evhttp_request* req, void* /* arg */)\n     {\n         LOCK(g_http_connections_mutex);\n         evhttp_connection* conn = evhttp_request_get_connection(req);\n+        // One connection can be used for multiple requests (HTTP 1.1 or\n+        // Connection: Keep-Alive header) so set the close callback on the first\n+        // request only.\n         if (g_http_connections.insert(conn).second) {\n             evhttp_connection_set_closecb(conn, http_connection_close_cb, nullptr);\n         }"
      }
    ]
  },
  {
    "sha": "ca43f55b0b48c650a2c5ae8506947338003b09dc",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjYTQzZjU1YjBiNDhjNjUwYTJjNWFlODUwNjk0NzMzODAwM2IwOWRj",
    "commit": {
      "author": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2018-11-01T23:08:49Z"
      },
      "committer": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2018-11-01T23:08:49Z"
      },
      "message": "add comment",
      "tree": {
        "sha": "a15faaffe491b9aeca777e0c380069fe8acb47d3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a15faaffe491b9aeca777e0c380069fe8acb47d3"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ca43f55b0b48c650a2c5ae8506947338003b09dc",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ca43f55b0b48c650a2c5ae8506947338003b09dc",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/ca43f55b0b48c650a2c5ae8506947338003b09dc",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ca43f55b0b48c650a2c5ae8506947338003b09dc/comments",
    "author": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "a826493a9e6a65b0c792b6c69b4424004a3d804c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a826493a9e6a65b0c792b6c69b4424004a3d804c",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/a826493a9e6a65b0c792b6c69b4424004a3d804c"
      }
    ],
    "stats": {
      "total": 3,
      "additions": 3,
      "deletions": 0
    },
    "files": [
      {
        "sha": "0da950419b24fae9e20dd3180df888e2c0022d55",
        "filename": "src/httpserver.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/ca43f55b0b48c650a2c5ae8506947338003b09dc/src/httpserver.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/ca43f55b0b48c650a2c5ae8506947338003b09dc/src/httpserver.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/httpserver.cpp?ref=ca43f55b0b48c650a2c5ae8506947338003b09dc",
        "patch": "@@ -480,6 +480,9 @@ void StopHTTPServer()\n     }\n     {\n         LogPrint(BCLog::HTTP, \"Disabling reading on current connections\\n\");\n+        // Workers completed their job but there can be events to process\n+        // related to their response in the event loop. For now just disable\n+        // reading on each connection, keep writes enabled.\n         LOCK(g_http_connections_mutex);\n         for (evhttp_connection* conn : g_http_connections) {\n             bufferevent* bev = evhttp_connection_get_bufferevent(conn);"
      }
    ]
  },
  {
    "sha": "d14515001bb2bf87602af7553def5ebe0f6bcdbb",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkMTQ1MTUwMDFiYjJiZjg3NjAyYWY3NTUzZGVmNWViZTBmNmJjZGJi",
    "commit": {
      "author": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2018-11-01T23:09:27Z"
      },
      "committer": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2018-11-01T23:09:27Z"
      },
      "message": "remove unnecessary check",
      "tree": {
        "sha": "99b5d8916b81b134bc7f5e327c9e616eb42a2686",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/99b5d8916b81b134bc7f5e327c9e616eb42a2686"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d14515001bb2bf87602af7553def5ebe0f6bcdbb",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d14515001bb2bf87602af7553def5ebe0f6bcdbb",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/d14515001bb2bf87602af7553def5ebe0f6bcdbb",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d14515001bb2bf87602af7553def5ebe0f6bcdbb/comments",
    "author": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "ca43f55b0b48c650a2c5ae8506947338003b09dc",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ca43f55b0b48c650a2c5ae8506947338003b09dc",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/ca43f55b0b48c650a2c5ae8506947338003b09dc"
      }
    ],
    "stats": {
      "total": 2,
      "additions": 1,
      "deletions": 1
    },
    "files": [
      {
        "sha": "cc3cad6a1ae96f206668618ef79f176c3c0be9d4",
        "filename": "src/httpserver.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d14515001bb2bf87602af7553def5ebe0f6bcdbb/src/httpserver.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d14515001bb2bf87602af7553def5ebe0f6bcdbb/src/httpserver.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/httpserver.cpp?ref=d14515001bb2bf87602af7553def5ebe0f6bcdbb",
        "patch": "@@ -486,7 +486,7 @@ void StopHTTPServer()\n         LOCK(g_http_connections_mutex);\n         for (evhttp_connection* conn : g_http_connections) {\n             bufferevent* bev = evhttp_connection_get_bufferevent(conn);\n-            if (bev) bufferevent_disable(bev, EV_READ);\n+            bufferevent_disable(bev, EV_READ);\n         }\n         g_http_connections.clear();\n     }"
      }
    ]
  }
]