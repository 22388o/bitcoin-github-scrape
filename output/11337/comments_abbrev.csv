sipa,2017-09-15T23:28:36Z,utACK b4058ed9c6e1f23720afa0b383c56a9aaed86dcd. I think the nearby style change is fine.,https://github.com/bitcoin/bitcoin/pull/11337#issuecomment-329926087,329926087,
practicalswift,2017-09-16T18:33:59Z,utACK b4058ed9c6e1f23720afa0b383c56a9aaed86dcd,https://github.com/bitcoin/bitcoin/pull/11337#issuecomment-329986851,329986851,
laanwj,2017-12-01T14:19:25Z,agree it's slightly better utACK b4058ed,https://github.com/bitcoin/bitcoin/pull/11337#issuecomment-348506030,348506030,
promag,2017-09-15T09:22:14Z,"Nit, kind of unrelated since this is not touched.",https://github.com/bitcoin/bitcoin/pull/11337#discussion_r139101637,139101637,src/chain.cpp
danra,2017-09-15T09:33:27Z,"True, but from what I've seen so far it's much easier to get style improvements (even those following the Developer Notes) approved in pull requests which actually also change functionality. Usually I would do that in a separate commit, but this is such a small change that I thought it made sense to just add it to the single commit.",https://github.com/bitcoin/bitcoin/pull/11337#discussion_r139104145,139104145,src/chain.cpp
TheBlueMatt,2017-09-15T19:12:09Z,Shouldnt the new cast also be a const_cast?,https://github.com/bitcoin/bitcoin/pull/11337#discussion_r139228708,139228708,src/chain.cpp
danra,2017-09-15T21:05:35Z,"Both `static_cast` and `const_cast` work for casting an object of a type to an object of the same type with added `const`. Personally, I prefer `static_cast` for that case, since `const_cast`, when encountered in code, always has to be examined for its more dangerous use case - removing `const`ness.",https://github.com/bitcoin/bitcoin/pull/11337#discussion_r139249993,139249993,src/chain.cpp
sipa,2017-09-15T23:27:43Z,"Interesting, I wasn't aware, but makes perfect sense.",https://github.com/bitcoin/bitcoin/pull/11337#discussion_r139268293,139268293,src/chain.cpp
TheBlueMatt,2017-09-19T19:52:34Z,"Gah, but static_cast could do something crazy like call a constructor or create a temporary. In this case its not like a reader is confused if the resulting type will be const or not.",https://github.com/bitcoin/bitcoin/pull/11337#discussion_r139800045,139800045,src/chain.cpp
danra,2017-09-28T17:47:56Z,"Indeed. So both types of casts here have some disadvantage.\nI went to have a look at what the C++ Core Guidelines have to say on the matter, and found the exact same usage (with `static_cast`) in their example here: https://github.com/isocpp/CppCoreGuidelines/blob/master/CppCoreGuidelines.md#example-219\n\nHowever they list an even better way to do it, which I am going to amend this pull reque",https://github.com/bitcoin/bitcoin/pull/11337#discussion_r141689093,141689093,src/chain.cpp
TheBlueMatt,2017-09-28T17:52:16Z,"Gah holy shit lets not use their insane unreadable suggestion there, please. I'd prefer static_cast or const_cast over that.",https://github.com/bitcoin/bitcoin/pull/11337#discussion_r141690259,141690259,src/chain.cpp
danra,2017-09-28T18:03:02Z,"Oh dear, that's the second 'Gah' I've elicited in a single thread :)",https://github.com/bitcoin/bitcoin/pull/11337#discussion_r141693194,141693194,src/chain.cpp
TheBlueMatt,2017-09-28T18:06:52Z,"Heh, I mean I'm OK with static_cast, its not a huge deal...I find const_cast more readable, but its somewhat obvious. The CppCore guidelines there are unreadable garbage, IMO, and would be a step back from the original version.",https://github.com/bitcoin/bitcoin/pull/11337#discussion_r141694182,141694182,src/chain.cpp
danra,2017-09-28T18:13:33Z,"The author of the preferred snippet there is Herb Sutter (commit 2d8377aab56354f7fc9bf759ab134c983a10293e). So in an appeal to authority, I suggest we do use that proposed solution, rather than the multiple casts solution.\n\nPersonally, I also think it's a better solution.\n\nNeed more opinions here.",https://github.com/bitcoin/bitcoin/pull/11337#discussion_r141695950,141695950,src/chain.cpp
TheBlueMatt,2017-09-28T23:28:25Z,"Please, lets not add a template, decltype gook and a private function just to avoid an obvious const_cast, its not only harder to read but its another function call away instead of direct. Maybe its ""the correct way"" in that it avoids some casts and magically deduces what you felt like doing, but magic also makes it unreadable to determine exactly what something *does* instead of what it looks lik",https://github.com/bitcoin/bitcoin/pull/11337#discussion_r141760022,141760022,src/chain.cpp
