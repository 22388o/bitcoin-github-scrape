instagibbs,2019-09-09 21:12:36,">  This is a naive fix for the issue where we fail to attempt any outbound Tor\nconnections when our regular network is being censored\n\nIs there an associated issue with this for tracking/discussion?\n\ni.e., What is the current behavior with respect to outbound Tor?",https://github.com/bitcoin/bitcoin/pull/16825#issuecomment-529669133,529669133,
sipa,2019-09-09 21:24:49,"Just some thoughts.\n\nThe Tor onion network range is far easier to Sybil attack than IPv4 and IPv6 (especially after #16702), so under attack scenarios this doesn't contribute much (not privacy for transactions as it's blocks only, not propagation speed for blocks as Tor is high latency, and not partition resistance as an attacker can trivially become ~all onion services).\n\nThis may also dr",https://github.com/bitcoin/bitcoin/pull/16825#issuecomment-529673187,529673187,
TheBlueMatt,2019-09-09 22:46:12,"Right, a few notes:\n\na) Probably should swap this to make the initial connections bias a bit towards Tor instead of only doing it at the end, to ensure connections come up quick, also worth discussing whether they should be non-blocks-only.\n\nb) Indeed, Tor is very sybil'able, though our slight bias towards older nodes (thanks to feelers) helps with that, the goal would more be to force any",https://github.com/bitcoin/bitcoin/pull/16825#issuecomment-529696043,529696043,
TheBlueMatt,2019-09-26 18:39:51,"On second thought I might have gotten a bit over-excited here - indeed I think more default connections over Tor would be nice, but just making two more is unlikely to really solve an issue. A few ideas going forward here include: (a) using the blocks-over-REST/HTTP module in Rust to fetch over Tor, (b) same with headers-over-DNS, (c) quickly rotating through a huge set of known Tor hidden service",https://github.com/bitcoin/bitcoin/pull/16825#issuecomment-535633932,535633932,
sdaftuar,2019-09-18 16:02:54,"Not sure how all this tor stuff works, but I was only able to get this code to trigger by explicitly setting `-onion=<>` as part of my bitcoind config, even though I *think* bitcoind will listen for inbound over tor by default if it can connect to the control port even without that command-line option?  Does that sound right?",https://github.com/bitcoin/bitcoin/pull/16825#discussion_r325762618,325762618,src/init.cpp
sdaftuar,2019-09-18 16:04:30,"This logic appears to allow more than 2 block_relay_tor_only connections (we'd start off with 2 tor, but then if other block-relay peers are disconnected one by one, we'd only look to replace them with tor connections).  That seems like unintended behavior?",https://github.com/bitcoin/bitcoin/pull/16825#discussion_r325763385,325763385,src/net.cpp
Sjors,2019-09-19 09:04:18,"@sdaftuar if Tor is correctly configured on your machine and if `listen` isn't 0 then you should see a hidden service announced in your debug log, and it should be listening on that.\nhttps://github.com/bitcoin/bitcoin/blob/master/doc/tor.md#3-automatically-listen-on-tor",https://github.com/bitcoin/bitcoin/pull/16825#discussion_r326065749,326065749,src/init.cpp
dongcarl,2019-09-19 20:21:52,"TorControl is started as a thread by default a few lines above this one, and sets `NET_ONION` to be ""reachable"" if it starts up correctly:\nhttps://github.com/bitcoin/bitcoin/blob/65d12110d43ac89bc0320477bfea6b375fc2134b/src/torcontrol.cpp#L525-L531\n\nWhich means that if `NET_ONION` is deemed ""unreachable"" before TorControl is started (as is the default), then the behavior here would not be de",https://github.com/bitcoin/bitcoin/pull/16825#discussion_r326366418,326366418,src/init.cpp
