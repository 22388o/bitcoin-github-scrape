skeees,2018-05-10T17:40:29Z,"Oh cool - if you are going to split into platform dependent code - you can post to a pthreads semaphore from a unix signal handler. \nWould also suggest that anyone waiting/reading from the semaphore/pipe immediately post/write back that way you could have multiple threads listening for shutdown as opposed to restricting it to only one as you do currently",https://github.com/bitcoin/bitcoin/pull/13211#issuecomment-388128166,388128166,
laanwj,2018-05-10T17:43:38Z,">  you can post to a pthreads semaphore from a unix signal handler.\n\nI'm fairly sure none of the pthreads-api is signal safe, at least on all platforms.\n\n> Would also suggest that anyone waiting/reading from the semaphore/pipe immediately post/write back that way you could have multiple threads listening for shutdown as opposed to restricting it to only one as you do currently\n\nWe only",https://github.com/bitcoin/bitcoin/pull/13211#issuecomment-388129054,388129054,
laanwj,2018-05-10T18:17:31Z,"Added a commit that reverts 793667a  (#11006) to hopefully make travis pass. Likely, this has to be conditional on libevent version to prevent adding a delay on shutdown in another place while fixing another.\n\nEdit: that worked locally, but not on travis- weird.",https://github.com/bitcoin/bitcoin/pull/13211#issuecomment-388139315,388139315,
ken2812221,2018-05-14T01:18:34Z,"Maybe that shutdown is too quick, add 50ms delay? It failed on my machine occasionally",https://github.com/bitcoin/bitcoin/pull/13211#issuecomment-388671592,388671592,
laanwj,2018-06-04T14:07:17Z,"> Maybe that shutdown is too quick, add 50ms delay? It failed on my machine occasionally\n\nAdding a fixed delay is never a valid solution.",https://github.com/bitcoin/bitcoin/pull/13211#issuecomment-394367191,394367191,
ken2812221,2018-06-16T16:01:04Z,"Once `StopHTTPServer` has been called in main thread ,the event loop in http thread exit. But http workqueue thread needs to use the event loop to call `evhttp_send_reply`, this could happen after the http thread event loop has already exit.\nhttps://github.com/bitcoin/bitcoin/blob/be27048a1842b76de5b230383c1466b72dfd8cc5/src/httpserver.cpp#L591",https://github.com/bitcoin/bitcoin/pull/13211#issuecomment-397821933,397821933,
laanwj,2018-06-24T16:32:54Z,"Closing this for now, I don't think it's that important, the current way works fine.",https://github.com/bitcoin/bitcoin/pull/13211#issuecomment-399769117,399769117,
