[
  {
    "sha": "5e3862b1765fcd1b0d5bcd1a254c89a253118580",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo1ZTM4NjJiMTc2NWZjZDFiMGQ1YmNkMWEyNTRjODlhMjUzMTE4NTgw",
    "commit": {
      "author": {
        "name": "Steven Hudson",
        "email": "randomproof@fastmail.us",
        "date": "2012-05-06T05:04:13Z"
      },
      "committer": {
        "name": "Steven Hudson",
        "email": "randomproof@fastmail.us",
        "date": "2012-05-06T05:04:13Z"
      },
      "message": "Fixes how the number of connections icon is shown.  Now connect_4 icon is used when there are MAX_OUTBOUND_CONNECTIONS connections.  Also MAX_OUTBOUND_CONNECTIONS is no longer static.  This had to be done so that it could be made extern for reading in bitcoingui.cpp, though this hopefully will not hurt anything else.",
      "tree": {
        "sha": "3f98702293ebf5c83ea815222904119781bfb884",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3f98702293ebf5c83ea815222904119781bfb884"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5e3862b1765fcd1b0d5bcd1a254c89a253118580",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5e3862b1765fcd1b0d5bcd1a254c89a253118580",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/5e3862b1765fcd1b0d5bcd1a254c89a253118580",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5e3862b1765fcd1b0d5bcd1a254c89a253118580/comments",
    "author": null,
    "committer": null,
    "parents": [
      {
        "sha": "5b8def797cb88c95a3d2a1c0a5a97a3c6e6ef3c4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5b8def797cb88c95a3d2a1c0a5a97a3c6e6ef3c4",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/5b8def797cb88c95a3d2a1c0a5a97a3c6e6ef3c4"
      }
    ],
    "stats": {
      "total": 22,
      "additions": 13,
      "deletions": 9
    },
    "files": [
      {
        "sha": "1d6216340c0c3e07abbb1c3f5009b46a8fe38f85",
        "filename": "src/net.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5e3862b1765fcd1b0d5bcd1a254c89a253118580/src/net.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5e3862b1765fcd1b0d5bcd1a254c89a253118580/src/net.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/net.cpp?ref=5e3862b1765fcd1b0d5bcd1a254c89a253118580",
        "patch": "@@ -25,7 +25,7 @@\n using namespace std;\n using namespace boost;\n \n-static const int MAX_OUTBOUND_CONNECTIONS = 8;\n+extern const int MAX_OUTBOUND_CONNECTIONS = 8;\n \n void ThreadMessageHandler2(void* parg);\n void ThreadSocketHandler2(void* parg);"
      },
      {
        "sha": "dd3434b40629fd129c0d548a15dceff8150d333a",
        "filename": "src/qt/bitcoingui.cpp",
        "status": "modified",
        "additions": 12,
        "deletions": 8,
        "changes": 20,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5e3862b1765fcd1b0d5bcd1a254c89a253118580/src/qt/bitcoingui.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5e3862b1765fcd1b0d5bcd1a254c89a253118580/src/qt/bitcoingui.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoingui.cpp?ref=5e3862b1765fcd1b0d5bcd1a254c89a253118580",
        "patch": "@@ -457,17 +457,21 @@ void BitcoinGUI::aboutClicked()\n     dlg.exec();\n }\n \n+extern const int MAX_OUTBOUND_CONNECTIONS;\n+\n void BitcoinGUI::setNumConnections(int count)\n {\n     QString icon;\n-    switch(count)\n-    {\n-    case 0: icon = \":/icons/connect_0\"; break;\n-    case 1: case 2: case 3: icon = \":/icons/connect_1\"; break;\n-    case 4: case 5: case 6: icon = \":/icons/connect_2\"; break;\n-    case 7: case 8: case 9: icon = \":/icons/connect_3\"; break;\n-    default: icon = \":/icons/connect_4\"; break;\n-    }\n+    if (count == 0)\n+        icon = \":/icons/connect_0\";\n+    else if (count < (MAX_OUTBOUND_CONNECTIONS/3))\n+        icon = \":/icons/connect_1\";\n+    else if (count < 2*(MAX_OUTBOUND_CONNECTIONS/3.0))\n+        icon = \":/icons/connect_2\";\n+    else if (count < (MAX_OUTBOUND_CONNECTIONS))\n+        icon = \":/icons/connect_3\";\n+    else\n+        icon = \":/icons/connect_4\";\n     labelConnectionsIcon->setPixmap(QIcon(icon).pixmap(STATUSBAR_ICONSIZE,STATUSBAR_ICONSIZE));\n     labelConnectionsIcon->setToolTip(tr(\"%n active connection(s) to Bitcoin network\", \"\", count));\n }"
      }
    ]
  }
]