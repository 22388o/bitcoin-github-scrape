laanwj,2018-05-02T10:56:27Z,"Failure if I try to build locally - :\n```\n/home/orion/projects/bitcoin/bitcoin/src/test/dbwrapper_tests.cpp:30:80: error: no member named 'full_name' in 'boost::unit_test::test_case'\n        fs::path ph = getPath(boost::unit_test::framework::current_test_case().full_name().append(obfuscate?""_true"":""_false""));\n                              ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ^",https://github.com/bitcoin/bitcoin/pull/13145#issuecomment-385939509,385939509,
winder,2018-05-02T12:38:12Z,"Looks like `full_name()` might be new in boost v1.60 which is much higher than the 1.47 minimum [listed here](https://github.com/bitcoin/bitcoin/blob/master/doc/dependencies.md).\n\n`__func__` doesn't work, after the macro is done it always returned `test_method`.\n\nI'll go ahead and hardcode the names.",https://github.com/bitcoin/bitcoin/pull/13145#issuecomment-385963296,385963296,
winder,2018-05-02T15:49:54Z,"All the feedback should be implemented now:\n* Moved temp directory business into `BasicTestingSetup`\n* Switched from `boost::unit_test::framework::current_test_case().full_name()` to a hard coded name.\n* Style recommendations.\n\nIt looked like moving the temp directory business into `BasicTestingSetup` created quite a bit of overhead since directories were created/deleted for every test. ",https://github.com/bitcoin/bitcoin/pull/13145#issuecomment-386025861,386025861,
MarcoFalke,2018-05-02T16:08:35Z,"Note that you only set the datadir when calling `getPath`, so I'd assume that the test fails because `TxIndexDB` is set up with the wrong datadir?\n\nC.f. https://dev.visucore.com/bitcoin/doxygen/txdb_8cpp_source.html#l00429",https://github.com/bitcoin/bitcoin/pull/13145#issuecomment-386032111,386032111,
winder,2018-05-02T16:47:21Z,"@MarcoFalke thanks, that fixed it.",https://github.com/bitcoin/bitcoin/pull/13145#issuecomment-386044257,386044257,
laanwj,2018-05-03T12:39:42Z,"> It looked like moving the temp directory business into BasicTestingSetup created quite a bit of overhead since directories were created/deleted for every test. So I added a flag and now that is only done if getPath is called.\n\nOkay, whoops - maybe that wasn't such a good idea then. I was confused. Maybe the test fixture isn't a good place because indeed, it's re-created for every suite (or m",https://github.com/bitcoin/bitcoin/pull/13145#issuecomment-386281606,386281606,
winder,2018-05-03T13:47:40Z,"@laanwj I think my latest changes accomplish this with these two additions:\n1. the directory is now only created if `getPath` is called, and `getPath` is available to any test using anything extending the basic fixture.\n2. the default root path now starts with `fs::temp_directory_path() / ""test_bitcoin""`, so all temp directories will be nested under the same path. This means that multiple invo",https://github.com/bitcoin/bitcoin/pull/13145#issuecomment-386301315,386301315,
MarcoFalke,2018-06-11T12:23:54Z,Needs rebase,https://github.com/bitcoin/bitcoin/pull/13145#issuecomment-396225151,396225151,
MarcoFalke,2018-06-11T14:42:06Z,"Could you please squash the merge commit:\n\n```\ngit reset --soft origin/master\ngit commit -m '$The original commit title\nand text\n...'\n```",https://github.com/bitcoin/bitcoin/pull/13145#issuecomment-396268038,396268038,
winder,2018-06-11T16:28:18Z,"@MarcoFalke all commits have been squashed, and the branch rebased.",https://github.com/bitcoin/bitcoin/pull/13145#issuecomment-396303536,396303536,
winder,2018-06-30T17:43:06Z,"@laanwj Are there any additional changes needed to get this merged/closed? If this isn't the right approach, and the reasoning I mentioned on May 3 doesn't seem sufficient, please go ahead and close the PR. Thanks!",https://github.com/bitcoin/bitcoin/pull/13145#issuecomment-401555874,401555874,
laanwj,2018-06-30T19:02:11Z,"Sorry, kind of lost track of this, will take a new look soon.",https://github.com/bitcoin/bitcoin/pull/13145#issuecomment-401560009,401560009,
MarcoFalke,2018-07-11T14:18:59Z,"Feel free to just apply the diff, if you agree with it, and squash it into your commit.",https://github.com/bitcoin/bitcoin/pull/13145#issuecomment-404186528,404186528,
winder,2018-07-11T20:23:55Z,"@MarcoFalke sounds good. My only question is that you put `SetDataDir(""tempdir"");` in the testing setup, so a directory will be created/deleted for every test regardless of whether or not it's needed. Do you think that matters?",https://github.com/bitcoin/bitcoin/pull/13145#issuecomment-404298283,404298283,
MarcoFalke,2018-07-11T23:00:28Z,"I am pretty sure that this is already being done in current master c.f. `fs::create_directories(pathTemp);` or the part in your patch where you initialize `m_path_temp(getPath(""tempdir""))` in the constructor, no?",https://github.com/bitcoin/bitcoin/pull/13145#issuecomment-404336713,404336713,
winder,2018-07-12T03:45:16Z,True. Patch applied.,https://github.com/bitcoin/bitcoin/pull/13145#issuecomment-404380147,404380147,
MarcoFalke,2018-07-12T11:48:42Z,"Excellent first-time contribution! Thanks for sticking with this!\n\nre-ACK 075429a482",https://github.com/bitcoin/bitcoin/pull/13145#issuecomment-404485360,404485360,
practicalswift,2018-05-02T09:17:19Z,"Nit: `obfuscate ? ""_true"" : ""_false""` instead of `obfuscate?""_true"":""_false""` to increase readability. Also below :-)",https://github.com/bitcoin/bitcoin/pull/13145#discussion_r185436999,185436999,src/test/dbwrapper_tests.cpp
laanwj,2018-05-02T09:56:03Z,"I suppose if you move getPath to BasicTestingSetup, you don't have to move `util_tests` and `dbwrapper_tests` to `TestingSetup`? (or am I missing something here?)",https://github.com/bitcoin/bitcoin/pull/13145#discussion_r185446483,185446483,src/test/test_bitcoin.h
winder,2018-05-02T12:09:17Z,"I was using the existing (unused?) `pathTemp` in `TestingSetup` as a root directory, I could move that and the new method to `BasicTestingSetup` if that would be more appropriate.",https://github.com/bitcoin/bitcoin/pull/13145#discussion_r185474238,185474238,src/test/test_bitcoin.h
MarcoFalke,2018-05-02T16:52:29Z,"nit: New members should follow the naming guidelines:\n\n```cpp\nm_path_root;\nm_cleanup_root;",https://github.com/bitcoin/bitcoin/pull/13145#discussion_r185565235,185565235,src/test/test_bitcoin.h
MarcoFalke,2018-05-02T16:52:34Z,Should be done in the constructor to make sure `m_path_root` is properly initialized?,https://github.com/bitcoin/bitcoin/pull/13145#discussion_r185565258,185565258,src/test/test_bitcoin.h
MarcoFalke,2018-05-02T16:53:40Z,"Also, the members should probably be const and initialized in the constructor initializer list?",https://github.com/bitcoin/bitcoin/pull/13145#discussion_r185565603,185565603,src/test/test_bitcoin.h
MarcoFalke,2018-05-02T16:54:14Z,"Also, could be const if possible?",https://github.com/bitcoin/bitcoin/pull/13145#discussion_r185565758,185565758,src/test/test_bitcoin.h
MarcoFalke,2018-07-10T13:36:26Z,"nit: no need for `m_cleanup_root`, since `remove_all` is a noop on if the dir doesn't exist.",https://github.com/bitcoin/bitcoin/pull/13145#discussion_r201344255,201344255,src/test/test_bitcoin.cpp
MarcoFalke,2018-07-10T13:36:57Z,"No need for this member, since it is never read?",https://github.com/bitcoin/bitcoin/pull/13145#discussion_r201344451,201344451,src/test/test_bitcoin.h
MarcoFalke,2018-07-10T13:37:40Z,"""system tmp dir"" should be ""datadir"", now.",https://github.com/bitcoin/bitcoin/pull/13145#discussion_r201344739,201344739,src/test/util_tests.cpp
MarcoFalke,2018-07-10T13:38:22Z,"This is not a dir, but a wallet backup file name",https://github.com/bitcoin/bitcoin/pull/13145#discussion_r201344972,201344972,src/wallet/test/wallet_tests.cpp
MarcoFalke,2018-07-10T13:40:11Z,Should rename this to `SetDataDir()`?,https://github.com/bitcoin/bitcoin/pull/13145#discussion_r201345681,201345681,src/test/test_bitcoin.cpp
