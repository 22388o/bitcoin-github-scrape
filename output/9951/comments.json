[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/285281844",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9951#issuecomment-285281844",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9951",
    "id": 285281844,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NTI4MTg0NA==",
    "user": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?u=eab5d0cdbb6cc25087cb61d4ca4a6f85255f42a7&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-09T08:02:52Z",
    "updated_at": "2017-03-09T08:02:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "Great!\r\nConcept ACK.\r\nNeeds rebase.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/285281844/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/285284819",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9951#issuecomment-285284819",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9951",
    "id": 285284819,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NTI4NDgxOQ==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-09T08:18:53Z",
    "updated_at": "2017-03-09T08:18:53Z",
    "author_association": "MEMBER",
    "body": "Yep needed trivial rebase for #9643.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/285284819/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/285408213",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9951#issuecomment-285408213",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9951",
    "id": 285408213,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NTQwODIxMw==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-09T16:46:53Z",
    "updated_at": "2017-03-09T16:46:53Z",
    "author_association": "MEMBER",
    "body": "Fixed @benma's nits.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/285408213/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/285431311",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9951#issuecomment-285431311",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9951",
    "id": 285431311,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NTQzMTMxMQ==",
    "user": {
      "login": "benma",
      "id": 1225267,
      "node_id": "MDQ6VXNlcjEyMjUyNjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1225267?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/benma",
      "html_url": "https://github.com/benma",
      "followers_url": "https://api.github.com/users/benma/followers",
      "following_url": "https://api.github.com/users/benma/following{/other_user}",
      "gists_url": "https://api.github.com/users/benma/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/benma/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/benma/subscriptions",
      "organizations_url": "https://api.github.com/users/benma/orgs",
      "repos_url": "https://api.github.com/users/benma/repos",
      "events_url": "https://api.github.com/users/benma/events{/privacy}",
      "received_events_url": "https://api.github.com/users/benma/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-09T18:06:13Z",
    "updated_at": "2017-03-09T18:06:13Z",
    "author_association": "NONE",
    "body": "For my understanding: the refactor to support a different db backend than BerkeleyDB is not finished with this PR, right? It is a bit hard to see through `CDBEnv`, `CDB` and `CWalletDBWrapper`, but `CDB` looks half-finished: it still refers to the walletFile string in most functions instead of going through `CWalletDBWrapper`.\r\n\r\nAlso, berkeley-specific fields are in `CWalletDBWrapper`. If you want to use a different backend that doesn't rely on a filename, where would that fit in? Would that end up in two classes inheriting from `CWalletDBWrapper`, and moving the berkeley-specific stuff out of it?\r\n\r\n> The eventual goal of \"CWalletDBWrapper\" is like \"CDBWrapper\", to move further database functionality there from \"CDB\" (which is really a \"CDBBatch\", a database transaction object). Not renaming it nor CWalletDB here to not interfere unduly much with other open wallet pull\r\n\r\nIn the end, is there even a need for the class `CDB` anymore? ",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/285431311/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/285468120",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9951#issuecomment-285468120",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9951",
    "id": 285468120,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NTQ2ODEyMA==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-09T20:15:16Z",
    "updated_at": "2017-03-09T20:21:06Z",
    "author_association": "MEMBER",
    "body": "> For my understanding: the refactor to support a different db backend than BerkeleyDB is not finished with this PR, right? It is a bit hard to see through CDBEnv, CDB and CWalletDBWrapper, but CDB looks half-finished: it still refers to the walletFile string in most functions instead of going through CWalletDBWrapper.\r\n\r\nTo be clear: CDB and CWalletDBWrapper and CDBEnv are database specific. You need to replace those if you want to change the backend (though you should keep the interface of the first two the same). In many cases you can do without CDBEnv (for LevelDB I could just delete it). So `db.h/cpp` is database specific, `walletdb.h/cpp` and `wallet.h/cpp` are not.\r\n\r\nOn top of this I have a patch that switches the backend to LevelDB, mostly changing only `db.cpp`/`db.h` (completely)  and CWalletDB constructor. I need this for testing, to be clear I'm not going to PR that for merging.\r\n\r\nIt's not quite as easy as switching the `dbwrapper.h` backend yet, but much easier than before.\r\n\r\n> In the end, is there even a need for the class CDB anymore?\r\n\r\nYes, it is a database transaction / batch. It's simlar to `CDBBatch`.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/285468120/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/285591688",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9951#issuecomment-285591688",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9951",
    "id": 285591688,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NTU5MTY4OA==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-10T06:46:56Z",
    "updated_at": "2017-03-12T08:18:06Z",
    "author_association": "MEMBER",
    "body": "@benma FYI not for review but if you're interested  https://github.com/laanwj/bitcoin/tree/20170310_experiment_leveldb_wallet is a leveldb wallet on top of this (edit: rebased, is on top of this version now). It passes the unit and QA tests apart from `backupwallet` which isn't implemented.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/285591688/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/285925761",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9951#issuecomment-285925761",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9951",
    "id": 285925761,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4NTkyNTc2MQ==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-12T06:35:47Z",
    "updated_at": "2017-03-12T06:35:47Z",
    "author_association": "MEMBER",
    "body": "Concept ACK",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/285925761/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/289456020",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9951#issuecomment-289456020",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9951",
    "id": 289456020,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI4OTQ1NjAyMA==",
    "user": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?u=eab5d0cdbb6cc25087cb61d4ca4a6f85255f42a7&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-03-27T13:39:40Z",
    "updated_at": "2017-03-27T13:39:40Z",
    "author_association": "CONTRIBUTOR",
    "body": "Tested ACK e3e51fdd3a9491ab4a07baed0a0f52b47ef70140\r\n(https://bitcoin.jonasschnelli.ch/build/PR/9951)\r\n\r\nThough needs a \"trivial\" rebase.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/289456020/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/295205370",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9951#issuecomment-295205370",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9951",
    "id": 295205370,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5NTIwNTM3MA==",
    "user": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?u=eab5d0cdbb6cc25087cb61d4ca4a6f85255f42a7&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-04-19T10:23:18Z",
    "updated_at": "2017-04-19T10:23:18Z",
    "author_association": "CONTRIBUTOR",
    "body": "Needs rebase (Imo this is ready for merge).",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/295205370/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/295212770",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9951#issuecomment-295212770",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9951",
    "id": 295212770,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI5NTIxMjc3MA==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-04-19T10:44:22Z",
    "updated_at": "2017-04-19T10:44:22Z",
    "author_association": "MEMBER",
    "body": "Yes, will rebase this soon(TM) and fix the nits.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/295212770/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105120742",
    "pull_request_review_id": 25983520,
    "id": 105120742,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNTEyMDc0Mg==",
    "diff_hunk": "@@ -112,11 +112,19 @@ class CKeyMetadata\n     }\n };\n \n-/** Access to the wallet database */\n-class CWalletDB : public CDB\n+/** Access to the wallet database.\n+ * This should really be named CWalletDBBatch, as it represents a single transaction at the\n+ * database. It will be committed when the object goes out of scope.\n+ * Optionally (on by default) it will flush to disk as well.\n+ */\n+class CWalletDB\n {\n public:\n-    CWalletDB(const std::string& strFilename, const char* pszMode = \"r+\", bool _fFlushOnClose = true) : CDB(strFilename, pszMode, _fFlushOnClose)\n+    /** Takes a std::unique_ptr reference to avoid having to use",
    "path": "src/wallet/walletdb.h",
    "position": null,
    "original_position": 15,
    "commit_id": "911a4808fb8d9c73463f9686ca4c26b8556ce53b",
    "original_commit_id": "4ab3a72687c67379df0634c7c62ff88477b2af15",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This unique_ptr here bothers me. The interface shouldn't care what kind of pointer is used. I think I'm going to change this to take a `CWalletDBWrapper&`, then replace the call sites with `CWalletDB(*dbw)`. That's better than `CWalletDB(dbw.get())` at least.\r\nEdit: done",
    "created_at": "2017-03-09T09:35:17Z",
    "updated_at": "2017-04-21T14:04:46Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r105120742",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105120742"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r105120742"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105120742/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 123,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105191282",
    "pull_request_review_id": 26058623,
    "id": 105191282,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNTE5MTI4Mg==",
    "diff_hunk": "@@ -359,13 +359,12 @@ void CDBEnv::CheckpointLSN(const std::string& strFile)\n }\n \n \n-CDB::CDB(const std::string& strFilename, const char* pszMode, bool fFlushOnCloseIn) : pdb(NULL), activeTxn(NULL)\n+CDB::CDB(CWalletDBWrapper &dbw, const char* pszMode, bool fFlushOnCloseIn) : pdb(NULL), activeTxn(NULL)\n {\n     int ret;\n     fReadOnly = (!strchr(pszMode, '+') && !strchr(pszMode, 'w'));\n     fFlushOnClose = fFlushOnCloseIn;\n-    if (strFilename.empty())\n-        return;\n+    std::string strFilename = dbw.strWalletFile;",
    "path": "src/wallet/db.cpp",
    "position": null,
    "original_position": 12,
    "commit_id": "911a4808fb8d9c73463f9686ca4c26b8556ce53b",
    "original_commit_id": "757f0a7261c0b23f26aa9cf76eea8e83d9097d7d",
    "user": {
      "login": "benma",
      "id": 1225267,
      "node_id": "MDQ6VXNlcjEyMjUyNjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1225267?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/benma",
      "html_url": "https://github.com/benma",
      "followers_url": "https://api.github.com/users/benma/followers",
      "following_url": "https://api.github.com/users/benma/following{/other_user}",
      "gists_url": "https://api.github.com/users/benma/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/benma/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/benma/subscriptions",
      "organizations_url": "https://api.github.com/users/benma/orgs",
      "repos_url": "https://api.github.com/users/benma/repos",
      "events_url": "https://api.github.com/users/benma/events{/privacy}",
      "received_events_url": "https://api.github.com/users/benma/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Better to use `const std::string& strFileName`, no copying and it's clear it won't be modified.",
    "created_at": "2017-03-09T15:32:39Z",
    "updated_at": "2017-04-21T14:04:46Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r105191282",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951",
    "author_association": "NONE",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105191282"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r105191282"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105191282/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 367,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105191328",
    "pull_request_review_id": 26058623,
    "id": 105191328,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNTE5MTMyOA==",
    "diff_hunk": "@@ -472,8 +471,11 @@ bool CDBEnv::RemoveDb(const std::string& strFile)\n     return (rc == 0);\n }\n \n-bool CDB::Rewrite(const std::string& strFile, const char* pszSkip)\n+bool CDB::Rewrite(CWalletDBWrapper &dbw, const char* pszSkip)\n {\n+    if (!dbw.env)\n+        return true;\n+    std::string strFile = dbw.strWalletFile;",
    "path": "src/wallet/db.cpp",
    "position": null,
    "original_position": 25,
    "commit_id": "911a4808fb8d9c73463f9686ca4c26b8556ce53b",
    "original_commit_id": "757f0a7261c0b23f26aa9cf76eea8e83d9097d7d",
    "user": {
      "login": "benma",
      "id": 1225267,
      "node_id": "MDQ6VXNlcjEyMjUyNjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1225267?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/benma",
      "html_url": "https://github.com/benma",
      "followers_url": "https://api.github.com/users/benma/followers",
      "following_url": "https://api.github.com/users/benma/following{/other_user}",
      "gists_url": "https://api.github.com/users/benma/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/benma/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/benma/subscriptions",
      "organizations_url": "https://api.github.com/users/benma/orgs",
      "repos_url": "https://api.github.com/users/benma/repos",
      "events_url": "https://api.github.com/users/benma/events{/privacy}",
      "received_events_url": "https://api.github.com/users/benma/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "same",
    "created_at": "2017-03-09T15:32:47Z",
    "updated_at": "2017-04-21T14:04:46Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r105191328",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951",
    "author_association": "NONE",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105191328"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r105191328"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105191328/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 478,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105191387",
    "pull_request_review_id": 26058623,
    "id": 105191387,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNTE5MTM4Nw==",
    "diff_hunk": "@@ -596,9 +598,13 @@ void CDBEnv::Flush(bool fShutdown)\n     }\n }\n \n-bool CDB::PeriodicFlush(std::string strFile)\n+bool CDB::PeriodicFlush(CWalletDBWrapper *dbw)\n {\n     bool ret = false;\n+    if (!dbw) {\n+        return true;\n+    }\n+    std::string strFile = dbw->strWalletFile;",
    "path": "src/wallet/db.cpp",
    "position": null,
    "original_position": 49,
    "commit_id": "911a4808fb8d9c73463f9686ca4c26b8556ce53b",
    "original_commit_id": "757f0a7261c0b23f26aa9cf76eea8e83d9097d7d",
    "user": {
      "login": "benma",
      "id": 1225267,
      "node_id": "MDQ6VXNlcjEyMjUyNjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1225267?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/benma",
      "html_url": "https://github.com/benma",
      "followers_url": "https://api.github.com/users/benma/followers",
      "following_url": "https://api.github.com/users/benma/following{/other_user}",
      "gists_url": "https://api.github.com/users/benma/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/benma/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/benma/subscriptions",
      "organizations_url": "https://api.github.com/users/benma/orgs",
      "repos_url": "https://api.github.com/users/benma/repos",
      "events_url": "https://api.github.com/users/benma/events{/privacy}",
      "received_events_url": "https://api.github.com/users/benma/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "same",
    "created_at": "2017-03-09T15:32:58Z",
    "updated_at": "2017-04-21T14:04:46Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r105191387",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951",
    "author_association": "NONE",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105191387"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r105191387"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105191387/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 607,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105191688",
    "pull_request_review_id": 26058623,
    "id": 105191688,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNTE5MTY4OA==",
    "diff_hunk": "@@ -596,9 +598,13 @@ void CDBEnv::Flush(bool fShutdown)\n     }\n }\n \n-bool CDB::PeriodicFlush(std::string strFile)\n+bool CDB::PeriodicFlush(CWalletDBWrapper *dbw)\n {\n     bool ret = false;\n+    if (!dbw) {",
    "path": "src/wallet/db.cpp",
    "position": null,
    "original_position": 46,
    "commit_id": "911a4808fb8d9c73463f9686ca4c26b8556ce53b",
    "original_commit_id": "757f0a7261c0b23f26aa9cf76eea8e83d9097d7d",
    "user": {
      "login": "benma",
      "id": 1225267,
      "node_id": "MDQ6VXNlcjEyMjUyNjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1225267?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/benma",
      "html_url": "https://github.com/benma",
      "followers_url": "https://api.github.com/users/benma/followers",
      "following_url": "https://api.github.com/users/benma/following{/other_user}",
      "gists_url": "https://api.github.com/users/benma/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/benma/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/benma/subscriptions",
      "organizations_url": "https://api.github.com/users/benma/orgs",
      "repos_url": "https://api.github.com/users/benma/repos",
      "events_url": "https://api.github.com/users/benma/events{/privacy}",
      "received_events_url": "https://api.github.com/users/benma/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Better to move the check to the top, above `bool ret`.",
    "created_at": "2017-03-09T15:34:08Z",
    "updated_at": "2017-04-21T14:04:46Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r105191688",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951",
    "author_association": "NONE",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105191688"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r105191688"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105191688/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 604,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105191969",
    "pull_request_review_id": 26058623,
    "id": 105191969,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNTE5MTk2OQ==",
    "diff_hunk": "@@ -633,3 +639,44 @@ bool CDB::PeriodicFlush(std::string strFile)\n \n     return ret;\n }\n+\n+bool CWalletDBWrapper::Rewrite(const char* pszSkip)\n+{\n+    return CDB::Rewrite(*this, pszSkip);\n+}\n+\n+bool CWalletDBWrapper::Backup(const std::string& strDest)\n+{\n+    if (!env)",
    "path": "src/wallet/db.cpp",
    "position": null,
    "original_position": 65,
    "commit_id": "911a4808fb8d9c73463f9686ca4c26b8556ce53b",
    "original_commit_id": "757f0a7261c0b23f26aa9cf76eea8e83d9097d7d",
    "user": {
      "login": "benma",
      "id": 1225267,
      "node_id": "MDQ6VXNlcjEyMjUyNjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1225267?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/benma",
      "html_url": "https://github.com/benma",
      "followers_url": "https://api.github.com/users/benma/followers",
      "following_url": "https://api.github.com/users/benma/following{/other_user}",
      "gists_url": "https://api.github.com/users/benma/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/benma/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/benma/subscriptions",
      "organizations_url": "https://api.github.com/users/benma/orgs",
      "repos_url": "https://api.github.com/users/benma/repos",
      "events_url": "https://api.github.com/users/benma/events{/privacy}",
      "received_events_url": "https://api.github.com/users/benma/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Inconsistent style with using/skipping braces (above, you used braces, here, you don't). I'd add them.",
    "created_at": "2017-03-09T15:35:16Z",
    "updated_at": "2017-04-21T14:04:46Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r105191969",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951",
    "author_association": "NONE",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105191969"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r105191969"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105191969/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 650,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105192424",
    "pull_request_review_id": 26058623,
    "id": 105192424,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNTE5MjQyNA==",
    "diff_hunk": "@@ -87,6 +87,33 @@ class CDBEnv\n \n extern CDBEnv bitdb;\n \n+/** An instance of this class represents one database.\n+ * For BerkeleyDB this is just a (env, strWalletFile) tuple.\n+ **/\n+class CWalletDBWrapper\n+{\n+public:\n+    CWalletDBWrapper(CDBEnv *env_in, const std::string &strWalletFile_in):\n+        env(env_in), strWalletFile(strWalletFile_in)\n+    {\n+    }\n+\n+    /** Rewrite the entire database on disk, with the exception of key pszSkip if non-zero\n+     */\n+    bool Rewrite(const char* pszSkip=nullptr);\n+\n+    /** Back up the entire database to a file.\n+     */\n+    bool Backup(const std::string& strDest);\n+\n+    /** Get a name for this database, for debugging etc.\n+     */\n+    std::string GetName() { return strWalletFile; }\n+\n+    CDBEnv *env;\n+    std::string strWalletFile;",
    "path": "src/wallet/db.h",
    "position": null,
    "original_position": 28,
    "commit_id": "911a4808fb8d9c73463f9686ca4c26b8556ce53b",
    "original_commit_id": "757f0a7261c0b23f26aa9cf76eea8e83d9097d7d",
    "user": {
      "login": "benma",
      "id": 1225267,
      "node_id": "MDQ6VXNlcjEyMjUyNjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1225267?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/benma",
      "html_url": "https://github.com/benma",
      "followers_url": "https://api.github.com/users/benma/followers",
      "following_url": "https://api.github.com/users/benma/following{/other_user}",
      "gists_url": "https://api.github.com/users/benma/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/benma/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/benma/subscriptions",
      "organizations_url": "https://api.github.com/users/benma/orgs",
      "repos_url": "https://api.github.com/users/benma/repos",
      "events_url": "https://api.github.com/users/benma/events{/privacy}",
      "received_events_url": "https://api.github.com/users/benma/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "const std::string",
    "created_at": "2017-03-09T15:37:01Z",
    "updated_at": "2017-04-21T14:04:46Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r105192424",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951",
    "author_association": "NONE",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105192424"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r105192424"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105192424/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 114,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105192897",
    "pull_request_review_id": 26058623,
    "id": 105192897,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNTE5Mjg5Nw==",
    "diff_hunk": "@@ -87,6 +87,33 @@ class CDBEnv\n \n extern CDBEnv bitdb;\n \n+/** An instance of this class represents one database.\n+ * For BerkeleyDB this is just a (env, strWalletFile) tuple.\n+ **/\n+class CWalletDBWrapper\n+{\n+public:\n+    CWalletDBWrapper(CDBEnv *env_in, const std::string &strWalletFile_in):\n+        env(env_in), strWalletFile(strWalletFile_in)\n+    {\n+    }\n+\n+    /** Rewrite the entire database on disk, with the exception of key pszSkip if non-zero\n+     */\n+    bool Rewrite(const char* pszSkip=nullptr);\n+\n+    /** Back up the entire database to a file.\n+     */\n+    bool Backup(const std::string& strDest);\n+\n+    /** Get a name for this database, for debugging etc.\n+     */\n+    std::string GetName() { return strWalletFile; }",
    "path": "src/wallet/db.h",
    "position": null,
    "original_position": 25,
    "commit_id": "911a4808fb8d9c73463f9686ca4c26b8556ce53b",
    "original_commit_id": "757f0a7261c0b23f26aa9cf76eea8e83d9097d7d",
    "user": {
      "login": "benma",
      "id": 1225267,
      "node_id": "MDQ6VXNlcjEyMjUyNjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1225267?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/benma",
      "html_url": "https://github.com/benma",
      "followers_url": "https://api.github.com/users/benma/followers",
      "following_url": "https://api.github.com/users/benma/following{/other_user}",
      "gists_url": "https://api.github.com/users/benma/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/benma/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/benma/subscriptions",
      "organizations_url": "https://api.github.com/users/benma/orgs",
      "repos_url": "https://api.github.com/users/benma/repos",
      "events_url": "https://api.github.com/users/benma/events{/privacy}",
      "received_events_url": "https://api.github.com/users/benma/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "`std::string GetName() const`\r\n\r\nYou have this function, and the public `strWalletFile`, which you access directly in other places. Maybe `strWalletFile` should be made private, or alternatively, this function removed.",
    "created_at": "2017-03-09T15:38:31Z",
    "updated_at": "2017-04-21T14:04:46Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r105192897",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951",
    "author_association": "NONE",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105192897"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r105192897"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105192897/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 111,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105193519",
    "pull_request_review_id": 26058623,
    "id": 105193519,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNTE5MzUxOQ==",
    "diff_hunk": "@@ -653,17 +653,35 @@ class CWallet : public CCryptoKeyStore, public CValidationInterface\n      */\n     bool AddWatchOnly(const CScript& dest) override;\n \n+    std::unique_ptr<CWalletDBWrapper> dbw;\n+\n public:\n     /*\n      * Main wallet lock.\n      * This lock protects all the fields added by CWallet\n      *   except for:\n      *      fFileBacked (immutable after instantiation)\n-     *      strWalletFile (immutable after instantiation)\n      */\n     mutable CCriticalSection cs_wallet;\n \n-    const std::string strWalletFile;\n+    /** Get database handle used by this wallet. Ideally this function would\n+     * not be necessary.\n+     */\n+    CWalletDBWrapper *GetDBHandle()\n+    {\n+        return dbw.get();\n+    }\n+\n+    /** Get a name for this wallet for logging/debugging purposes.\n+     */\n+    std::string GetName()",
    "path": "src/wallet/wallet.h",
    "position": null,
    "original_position": 27,
    "commit_id": "911a4808fb8d9c73463f9686ca4c26b8556ce53b",
    "original_commit_id": "757f0a7261c0b23f26aa9cf76eea8e83d9097d7d",
    "user": {
      "login": "benma",
      "id": 1225267,
      "node_id": "MDQ6VXNlcjEyMjUyNjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1225267?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/benma",
      "html_url": "https://github.com/benma",
      "followers_url": "https://api.github.com/users/benma/followers",
      "following_url": "https://api.github.com/users/benma/following{/other_user}",
      "gists_url": "https://api.github.com/users/benma/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/benma/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/benma/subscriptions",
      "organizations_url": "https://api.github.com/users/benma/orgs",
      "repos_url": "https://api.github.com/users/benma/repos",
      "events_url": "https://api.github.com/users/benma/events{/privacy}",
      "received_events_url": "https://api.github.com/users/benma/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "`GetName() const`",
    "created_at": "2017-03-09T15:40:52Z",
    "updated_at": "2017-04-21T14:04:46Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r105193519",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951",
    "author_association": "NONE",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105193519"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r105193519"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105193519/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 677,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105193794",
    "pull_request_review_id": 26058623,
    "id": 105193794,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNTE5Mzc5NA==",
    "diff_hunk": "@@ -653,17 +653,35 @@ class CWallet : public CCryptoKeyStore, public CValidationInterface\n      */\n     bool AddWatchOnly(const CScript& dest) override;\n \n+    std::unique_ptr<CWalletDBWrapper> dbw;\n+\n public:\n     /*\n      * Main wallet lock.\n      * This lock protects all the fields added by CWallet\n      *   except for:\n      *      fFileBacked (immutable after instantiation)\n-     *      strWalletFile (immutable after instantiation)\n      */\n     mutable CCriticalSection cs_wallet;\n \n-    const std::string strWalletFile;\n+    /** Get database handle used by this wallet. Ideally this function would\n+     * not be necessary.\n+     */\n+    CWalletDBWrapper *GetDBHandle()\n+    {\n+        return dbw.get();\n+    }\n+\n+    /** Get a name for this wallet for logging/debugging purposes.\n+     */\n+    std::string GetName()\n+    {\n+        if (dbw) {\n+            return dbw->GetName();\n+        } else {",
    "path": "src/wallet/wallet.h",
    "position": null,
    "original_position": 31,
    "commit_id": "911a4808fb8d9c73463f9686ca4c26b8556ce53b",
    "original_commit_id": "757f0a7261c0b23f26aa9cf76eea8e83d9097d7d",
    "user": {
      "login": "benma",
      "id": 1225267,
      "node_id": "MDQ6VXNlcjEyMjUyNjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1225267?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/benma",
      "html_url": "https://github.com/benma",
      "followers_url": "https://api.github.com/users/benma/followers",
      "following_url": "https://api.github.com/users/benma/following{/other_user}",
      "gists_url": "https://api.github.com/users/benma/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/benma/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/benma/subscriptions",
      "organizations_url": "https://api.github.com/users/benma/orgs",
      "repos_url": "https://api.github.com/users/benma/repos",
      "events_url": "https://api.github.com/users/benma/events{/privacy}",
      "received_events_url": "https://api.github.com/users/benma/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Maybe it is a matter of personal preference, but I always find it odd to put an `else` when the `if` returns.",
    "created_at": "2017-03-09T15:41:48Z",
    "updated_at": "2017-04-21T14:04:46Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r105193794",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951",
    "author_association": "NONE",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105193794"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r105193794"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105193794/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 681,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105200324",
    "pull_request_review_id": 26068144,
    "id": 105200324,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNTIwMDMyNA==",
    "diff_hunk": "@@ -87,6 +87,33 @@ class CDBEnv\n \n extern CDBEnv bitdb;\n \n+/** An instance of this class represents one database.\n+ * For BerkeleyDB this is just a (env, strWalletFile) tuple.\n+ **/\n+class CWalletDBWrapper\n+{\n+public:\n+    CWalletDBWrapper(CDBEnv *env_in, const std::string &strWalletFile_in):\n+        env(env_in), strWalletFile(strWalletFile_in)\n+    {\n+    }\n+\n+    /** Rewrite the entire database on disk, with the exception of key pszSkip if non-zero\n+     */\n+    bool Rewrite(const char* pszSkip=nullptr);\n+\n+    /** Back up the entire database to a file.\n+     */\n+    bool Backup(const std::string& strDest);\n+\n+    /** Get a name for this database, for debugging etc.\n+     */\n+    std::string GetName() { return strWalletFile; }",
    "path": "src/wallet/db.h",
    "position": null,
    "original_position": 25,
    "commit_id": "911a4808fb8d9c73463f9686ca4c26b8556ce53b",
    "original_commit_id": "757f0a7261c0b23f26aa9cf76eea8e83d9097d7d",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "They are subtly different, only happen to be the same for BerkeleyDB: \r\n\r\n- `GetName` is an an abstract name to refer to the database object for logging or troubleshooting. It should exist for any version of CDBWrapper.\r\n- `strWalletFile` is an implementation detail that only exists for BerkeleyDB. Other databases may have completely different connection descriptions, which do not involve simply a string. So this is private to the low-level implementation (CDB, CWalletDBWrapper), the higher-level stuff (such as CWallet) should not refer to it.",
    "created_at": "2017-03-09T16:04:32Z",
    "updated_at": "2017-04-21T14:04:46Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r105200324",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105200324"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r105200324"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105200324/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 111,
    "side": "RIGHT",
    "in_reply_to_id": 105192897
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105200892",
    "pull_request_review_id": 26068751,
    "id": 105200892,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNTIwMDg5Mg==",
    "diff_hunk": "@@ -653,17 +653,35 @@ class CWallet : public CCryptoKeyStore, public CValidationInterface\n      */\n     bool AddWatchOnly(const CScript& dest) override;\n \n+    std::unique_ptr<CWalletDBWrapper> dbw;\n+\n public:\n     /*\n      * Main wallet lock.\n      * This lock protects all the fields added by CWallet\n      *   except for:\n      *      fFileBacked (immutable after instantiation)\n-     *      strWalletFile (immutable after instantiation)\n      */\n     mutable CCriticalSection cs_wallet;\n \n-    const std::string strWalletFile;\n+    /** Get database handle used by this wallet. Ideally this function would\n+     * not be necessary.\n+     */\n+    CWalletDBWrapper *GetDBHandle()\n+    {\n+        return dbw.get();\n+    }\n+\n+    /** Get a name for this wallet for logging/debugging purposes.\n+     */\n+    std::string GetName()\n+    {\n+        if (dbw) {\n+            return dbw->GetName();\n+        } else {",
    "path": "src/wallet/wallet.h",
    "position": null,
    "original_position": 31,
    "commit_id": "911a4808fb8d9c73463f9686ca4c26b8556ce53b",
    "original_commit_id": "757f0a7261c0b23f26aa9cf76eea8e83d9097d7d",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I prefer to keep it this way. We have no guideline on this in `doc/developer-notes.md`, and I personally find it easier to follow the control flow this way.",
    "created_at": "2017-03-09T16:06:30Z",
    "updated_at": "2017-04-21T14:04:46Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r105200892",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105200892"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r105200892"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105200892/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 681,
    "side": "RIGHT",
    "in_reply_to_id": 105193794
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105201207",
    "pull_request_review_id": 26069122,
    "id": 105201207,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNTIwMTIwNw==",
    "diff_hunk": "@@ -87,6 +87,33 @@ class CDBEnv\n \n extern CDBEnv bitdb;\n \n+/** An instance of this class represents one database.\n+ * For BerkeleyDB this is just a (env, strWalletFile) tuple.\n+ **/\n+class CWalletDBWrapper\n+{\n+public:\n+    CWalletDBWrapper(CDBEnv *env_in, const std::string &strWalletFile_in):\n+        env(env_in), strWalletFile(strWalletFile_in)\n+    {\n+    }\n+\n+    /** Rewrite the entire database on disk, with the exception of key pszSkip if non-zero\n+     */\n+    bool Rewrite(const char* pszSkip=nullptr);\n+\n+    /** Back up the entire database to a file.\n+     */\n+    bool Backup(const std::string& strDest);\n+\n+    /** Get a name for this database, for debugging etc.\n+     */\n+    std::string GetName() { return strWalletFile; }",
    "path": "src/wallet/db.h",
    "position": null,
    "original_position": 25,
    "commit_id": "911a4808fb8d9c73463f9686ca4c26b8556ce53b",
    "original_commit_id": "757f0a7261c0b23f26aa9cf76eea8e83d9097d7d",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Could make this clearer using \"friend\" I guess.",
    "created_at": "2017-03-09T16:07:43Z",
    "updated_at": "2017-04-21T14:04:46Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r105201207",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105201207"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r105201207"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105201207/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 111,
    "side": "RIGHT",
    "in_reply_to_id": 105192897
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105201563",
    "pull_request_review_id": 26069514,
    "id": 105201563,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNTIwMTU2Mw==",
    "diff_hunk": "@@ -359,13 +359,12 @@ void CDBEnv::CheckpointLSN(const std::string& strFile)\n }\n \n \n-CDB::CDB(const std::string& strFilename, const char* pszMode, bool fFlushOnCloseIn) : pdb(NULL), activeTxn(NULL)\n+CDB::CDB(CWalletDBWrapper &dbw, const char* pszMode, bool fFlushOnCloseIn) : pdb(NULL), activeTxn(NULL)\n {\n     int ret;\n     fReadOnly = (!strchr(pszMode, '+') && !strchr(pszMode, 'w'));\n     fFlushOnClose = fFlushOnCloseIn;\n-    if (strFilename.empty())\n-        return;\n+    std::string strFilename = dbw.strWalletFile;",
    "path": "src/wallet/db.cpp",
    "position": null,
    "original_position": 12,
    "commit_id": "911a4808fb8d9c73463f9686ca4c26b8556ce53b",
    "original_commit_id": "757f0a7261c0b23f26aa9cf76eea8e83d9097d7d",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Agreed.",
    "created_at": "2017-03-09T16:09:01Z",
    "updated_at": "2017-04-21T14:04:46Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r105201563",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105201563"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r105201563"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105201563/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 367,
    "side": "RIGHT",
    "in_reply_to_id": 105191282
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105201911",
    "pull_request_review_id": 26069855,
    "id": 105201911,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNTIwMTkxMQ==",
    "diff_hunk": "@@ -633,3 +639,44 @@ bool CDB::PeriodicFlush(std::string strFile)\n \n     return ret;\n }\n+\n+bool CWalletDBWrapper::Rewrite(const char* pszSkip)\n+{\n+    return CDB::Rewrite(*this, pszSkip);\n+}\n+\n+bool CWalletDBWrapper::Backup(const std::string& strDest)\n+{\n+    if (!env)",
    "path": "src/wallet/db.cpp",
    "position": null,
    "original_position": 65,
    "commit_id": "911a4808fb8d9c73463f9686ca4c26b8556ce53b",
    "original_commit_id": "757f0a7261c0b23f26aa9cf76eea8e83d9097d7d",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Yes the brace should be after",
    "created_at": "2017-03-09T16:10:20Z",
    "updated_at": "2017-04-21T14:04:46Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r105201911",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105201911"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r105201911"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105201911/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 650,
    "side": "RIGHT",
    "in_reply_to_id": 105191969
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105202223",
    "pull_request_review_id": 26070180,
    "id": 105202223,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNTIwMjIyMw==",
    "diff_hunk": "@@ -653,17 +653,35 @@ class CWallet : public CCryptoKeyStore, public CValidationInterface\n      */\n     bool AddWatchOnly(const CScript& dest) override;\n \n+    std::unique_ptr<CWalletDBWrapper> dbw;\n+\n public:\n     /*\n      * Main wallet lock.\n      * This lock protects all the fields added by CWallet\n      *   except for:\n      *      fFileBacked (immutable after instantiation)\n-     *      strWalletFile (immutable after instantiation)\n      */\n     mutable CCriticalSection cs_wallet;\n \n-    const std::string strWalletFile;\n+    /** Get database handle used by this wallet. Ideally this function would\n+     * not be necessary.\n+     */\n+    CWalletDBWrapper *GetDBHandle()\n+    {\n+        return dbw.get();\n+    }\n+\n+    /** Get a name for this wallet for logging/debugging purposes.\n+     */\n+    std::string GetName()",
    "path": "src/wallet/wallet.h",
    "position": null,
    "original_position": 27,
    "commit_id": "911a4808fb8d9c73463f9686ca4c26b8556ce53b",
    "original_commit_id": "757f0a7261c0b23f26aa9cf76eea8e83d9097d7d",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Yes good catch.",
    "created_at": "2017-03-09T16:11:29Z",
    "updated_at": "2017-04-21T14:04:46Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r105202223",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105202223"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r105202223"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105202223/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 677,
    "side": "RIGHT",
    "in_reply_to_id": 105193519
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105220521",
    "pull_request_review_id": 26089636,
    "id": 105220521,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNTIyMDUyMQ==",
    "diff_hunk": "@@ -87,6 +87,36 @@ class CDBEnv\n \n extern CDBEnv bitdb;\n \n+/** An instance of this class represents one database.\n+ * For BerkeleyDB this is just a (env, strFile) tuple.\n+ **/\n+class CWalletDBWrapper\n+{\n+    friend class CDB;\n+public:\n+    CWalletDBWrapper(CDBEnv *env_in, const std::string &strFile_in):\n+        env(env_in), strFile(strFile_in)\n+    {\n+    }\n+\n+    /** Rewrite the entire database on disk, with the exception of key pszSkip if non-zero\n+     */\n+    bool Rewrite(const char* pszSkip=nullptr);\n+\n+    /** Back up the entire database to a file.\n+     */\n+    bool Backup(const std::string& strDest);\n+\n+    /** Get a name for this database, for debugging etc.\n+     */\n+    std::string GetName() const { return strFile; }\n+\n+private:\n+    /** BerkeleyDB specific */\n+    CDBEnv *env;\n+    std::string strFile;",
    "path": "src/wallet/db.h",
    "position": 41,
    "original_position": 31,
    "commit_id": "911a4808fb8d9c73463f9686ca4c26b8556ce53b",
    "original_commit_id": "b2db6c3a08811f509bb9a848144343816d11bf20",
    "user": {
      "login": "benma",
      "id": 1225267,
      "node_id": "MDQ6VXNlcjEyMjUyNjc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1225267?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/benma",
      "html_url": "https://github.com/benma",
      "followers_url": "https://api.github.com/users/benma/followers",
      "following_url": "https://api.github.com/users/benma/following{/other_user}",
      "gists_url": "https://api.github.com/users/benma/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/benma/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/benma/subscriptions",
      "organizations_url": "https://api.github.com/users/benma/orgs",
      "repos_url": "https://api.github.com/users/benma/repos",
      "events_url": "https://api.github.com/users/benma/events{/privacy}",
      "received_events_url": "https://api.github.com/users/benma/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "`const std::string strFile;` ?",
    "created_at": "2017-03-09T17:20:47Z",
    "updated_at": "2017-04-21T14:04:46Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r105220521",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951",
    "author_association": "NONE",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105220521"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r105220521"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105220521/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 126,
    "original_line": 117,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105480243",
    "pull_request_review_id": 26367482,
    "id": 105480243,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNTQ4MDI0Mw==",
    "diff_hunk": "@@ -118,7 +165,7 @@ class CDB\n     CDB(const CDB&);",
    "path": "src/wallet/db.h",
    "position": 77,
    "original_position": 77,
    "commit_id": "911a4808fb8d9c73463f9686ca4c26b8556ce53b",
    "original_commit_id": "e3e51fdd3a9491ab4a07baed0a0f52b47ef70140",
    "user": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Can you go ahead and =delete these, since we have C++11?",
    "created_at": "2017-03-10T20:16:45Z",
    "updated_at": "2017-04-21T14:04:46Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r105480243",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105480243"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r105480243"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105480243/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 164,
    "original_line": 165,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105550526",
    "pull_request_review_id": 26438686,
    "id": 105550526,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNTU1MDUyNg==",
    "diff_hunk": "@@ -118,7 +165,7 @@ class CDB\n     CDB(const CDB&);",
    "path": "src/wallet/db.h",
    "position": 77,
    "original_position": 77,
    "commit_id": "911a4808fb8d9c73463f9686ca4c26b8556ce53b",
    "original_commit_id": "e3e51fdd3a9491ab4a07baed0a0f52b47ef70140",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Good idea",
    "created_at": "2017-03-12T07:04:07Z",
    "updated_at": "2017-04-21T14:04:46Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r105550526",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105550526"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r105550526"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/105550526/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 164,
    "original_line": 165,
    "side": "RIGHT",
    "in_reply_to_id": 105480243
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/109969545",
    "pull_request_review_id": 31106750,
    "id": 109969545,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwOTk2OTU0NQ==",
    "diff_hunk": "@@ -94,6 +94,12 @@ class CWalletDBWrapper\n {\n     friend class CDB;\n public:\n+    /** Create dummy DB handle */\n+    CWalletDBWrapper(): env(nullptr)",
    "path": "src/wallet/db.h",
    "position": null,
    "original_position": 5,
    "commit_id": "911a4808fb8d9c73463f9686ca4c26b8556ce53b",
    "original_commit_id": "58ad2ead8b753952f700cabf9b84be6492a9584f",
    "user": {
      "login": "JeremyRubin",
      "id": 886523,
      "node_id": "MDQ6VXNlcjg4NjUyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JeremyRubin",
      "html_url": "https://github.com/JeremyRubin",
      "followers_url": "https://api.github.com/users/JeremyRubin/followers",
      "following_url": "https://api.github.com/users/JeremyRubin/following{/other_user}",
      "gists_url": "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
      "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
      "repos_url": "https://api.github.com/users/JeremyRubin/repos",
      "events_url": "https://api.github.com/users/JeremyRubin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I think there's a small benefit to not making a CWalletDBWrapper the default constructor. Maybe delete the default, and have `struct MockTag{}; CWalletDBWrapper(MockTag);` to make a dummy explicitly constructed.",
    "created_at": "2017-04-05T16:51:57Z",
    "updated_at": "2017-04-21T14:04:46Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r109969545",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/109969545"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r109969545"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/109969545/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 97,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/109999052",
    "pull_request_review_id": 31106750,
    "id": 109999052,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwOTk5OTA1Mg==",
    "diff_hunk": "@@ -359,13 +359,12 @@ void CDBEnv::CheckpointLSN(const std::string& strFile)\n }\n \n \n-CDB::CDB(const std::string& strFilename, const char* pszMode, bool fFlushOnCloseIn) : pdb(NULL), activeTxn(NULL)\n+CDB::CDB(CWalletDBWrapper& dbw, const char* pszMode, bool fFlushOnCloseIn) : pdb(NULL), activeTxn(NULL)\n {\n     int ret;\n     fReadOnly = (!strchr(pszMode, '+') && !strchr(pszMode, 'w'));\n     fFlushOnClose = fFlushOnCloseIn;\n-    if (strFilename.empty())\n-        return;\n+    const std::string& strFilename = dbw.strFile;",
    "path": "src/wallet/db.cpp",
    "position": null,
    "original_position": 12,
    "commit_id": "911a4808fb8d9c73463f9686ca4c26b8556ce53b",
    "original_commit_id": "b2db6c3a08811f509bb9a848144343816d11bf20",
    "user": {
      "login": "JeremyRubin",
      "id": 886523,
      "node_id": "MDQ6VXNlcjg4NjUyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JeremyRubin",
      "html_url": "https://github.com/JeremyRubin",
      "followers_url": "https://api.github.com/users/JeremyRubin/followers",
      "following_url": "https://api.github.com/users/JeremyRubin/following{/other_user}",
      "gists_url": "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
      "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
      "repos_url": "https://api.github.com/users/JeremyRubin/repos",
      "events_url": "https://api.github.com/users/JeremyRubin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Previously, an empty strFilename would return immediately. Also, given that we initialize strFile to copy strFileName, we may as well just toss this into the constructor's initialize list. If it's empty, it's free. If it's not empty, we were going to copy it anyways.",
    "created_at": "2017-04-05T18:53:23Z",
    "updated_at": "2017-04-21T14:04:46Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r109999052",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/109999052"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r109999052"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/109999052/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 367,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/110002885",
    "pull_request_review_id": 31106750,
    "id": 110002885,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExMDAwMjg4NQ==",
    "diff_hunk": "@@ -359,13 +359,12 @@ void CDBEnv::CheckpointLSN(const std::string& strFile)\n }\n \n \n-CDB::CDB(const std::string& strFilename, const char* pszMode, bool fFlushOnCloseIn) : pdb(NULL), activeTxn(NULL)\n+CDB::CDB(CWalletDBWrapper& dbw, const char* pszMode, bool fFlushOnCloseIn) : pdb(NULL), activeTxn(NULL)",
    "path": "src/wallet/db.cpp",
    "position": 5,
    "original_position": 5,
    "commit_id": "911a4808fb8d9c73463f9686ca4c26b8556ce53b",
    "original_commit_id": "b2db6c3a08811f509bb9a848144343816d11bf20",
    "user": {
      "login": "JeremyRubin",
      "id": 886523,
      "node_id": "MDQ6VXNlcjg4NjUyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JeremyRubin",
      "html_url": "https://github.com/JeremyRubin",
      "followers_url": "https://api.github.com/users/JeremyRubin/followers",
      "following_url": "https://api.github.com/users/JeremyRubin/following{/other_user}",
      "gists_url": "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
      "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
      "repos_url": "https://api.github.com/users/JeremyRubin/repos",
      "events_url": "https://api.github.com/users/JeremyRubin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I'm a little confused on the API here.\r\n\r\nI feel like the unwrapped version of CDB shouldn't be compatible with the wrapped version of CWalletDB?",
    "created_at": "2017-04-05T19:10:31Z",
    "updated_at": "2017-04-21T14:04:46Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r110002885",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/110002885"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r110002885"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/110002885/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 362,
    "original_line": 362,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/110003734",
    "pull_request_review_id": 31106750,
    "id": 110003734,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExMDAwMzczNA==",
    "diff_hunk": "@@ -111,6 +117,12 @@ class CWalletDBWrapper\n      */\n     std::string GetName() const { return strFile; }\n \n+    /** Return whether this database handle is a dummy for testing.\n+     * Only to be used at a low level, application should ideally not care\n+     * about this.\n+     */\n+    bool IsDummy() { return env == nullptr; }",
    "path": "src/wallet/db.h",
    "position": 47,
    "original_position": 21,
    "commit_id": "911a4808fb8d9c73463f9686ca4c26b8556ce53b",
    "original_commit_id": "58ad2ead8b753952f700cabf9b84be6492a9584f",
    "user": {
      "login": "JeremyRubin",
      "id": 886523,
      "node_id": "MDQ6VXNlcjg4NjUyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JeremyRubin",
      "html_url": "https://github.com/JeremyRubin",
      "followers_url": "https://api.github.com/users/JeremyRubin/followers",
      "following_url": "https://api.github.com/users/JeremyRubin/following{/other_user}",
      "gists_url": "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
      "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
      "repos_url": "https://api.github.com/users/JeremyRubin/repos",
      "events_url": "https://api.github.com/users/JeremyRubin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "If it's only to be used by low level stuff, maybe friend the function specifically to those classes...",
    "created_at": "2017-04-05T19:14:32Z",
    "updated_at": "2017-04-21T14:04:46Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r110003734",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/110003734"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r110003734"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/110003734/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 124,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/110004989",
    "pull_request_review_id": 31106750,
    "id": 110004989,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExMDAwNDk4OQ==",
    "diff_hunk": "@@ -33,46 +33,46 @@ static std::atomic<unsigned int> nWalletDBUpdateCounter;\n bool CWalletDB::WriteName(const std::string& strAddress, const std::string& strName)\n {\n     nWalletDBUpdateCounter++;\n-    return Write(make_pair(std::string(\"name\"), strAddress), strName);\n+    return batch.Write(make_pair(std::string(\"name\"), strAddress), strName);",
    "path": "src/wallet/walletdb.cpp",
    "position": null,
    "original_position": 5,
    "commit_id": "911a4808fb8d9c73463f9686ca4c26b8556ce53b",
    "original_commit_id": "e3e51fdd3a9491ab4a07baed0a0f52b47ef70140",
    "user": {
      "login": "JeremyRubin",
      "id": 886523,
      "node_id": "MDQ6VXNlcjg4NjUyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JeremyRubin",
      "html_url": "https://github.com/JeremyRubin",
      "followers_url": "https://api.github.com/users/JeremyRubin/followers",
      "following_url": "https://api.github.com/users/JeremyRubin/following{/other_user}",
      "gists_url": "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
      "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
      "repos_url": "https://api.github.com/users/JeremyRubin/repos",
      "events_url": "https://api.github.com/users/JeremyRubin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "missing std::",
    "created_at": "2017-04-05T19:20:46Z",
    "updated_at": "2017-04-21T14:04:46Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r110004989",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/110004989"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r110004989"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/110004989/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 36,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112477989",
    "pull_request_review_id": 33796460,
    "id": 112477989,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExMjQ3Nzk4OQ==",
    "diff_hunk": "@@ -359,13 +359,12 @@ void CDBEnv::CheckpointLSN(const std::string& strFile)\n }\n \n \n-CDB::CDB(const std::string& strFilename, const char* pszMode, bool fFlushOnCloseIn) : pdb(NULL), activeTxn(NULL)\n+CDB::CDB(CWalletDBWrapper& dbw, const char* pszMode, bool fFlushOnCloseIn) : pdb(NULL), activeTxn(NULL)",
    "path": "src/wallet/db.cpp",
    "position": 5,
    "original_position": 5,
    "commit_id": "911a4808fb8d9c73463f9686ca4c26b8556ce53b",
    "original_commit_id": "b2db6c3a08811f509bb9a848144343816d11bf20",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "CWalletDBWrapper is not a wrapper around CWalletDB. We kind of have a naming problem with the wallet:\r\n- `CDBEnv` is an environment in which the database exists (has no analog in `dbwrapper.h`)\r\n- `CWalletDBWrapper` represents a wallet database (similar to `CDBWrapper` in `dbwrapper.h`)\r\n- `CDB` is a low-level database transaction (similar to `CDBBatch` in `dbwrapper.h`)\r\n- `CWalletDB` is a modifier object for the wallet, and encapsulates a database transaction as well as methods to act on the database (no analog in `dbwrapper.h`)\r\n\r\nThe latter two are named badly, should be renamed at some point but didn't want to do it here.\r\n",
    "created_at": "2017-04-20T15:06:32Z",
    "updated_at": "2017-04-21T14:04:46Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r112477989",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112477989"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r112477989"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112477989/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 362,
    "original_line": 362,
    "side": "RIGHT",
    "in_reply_to_id": 110002885
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112489193",
    "pull_request_review_id": 33808727,
    "id": 112489193,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExMjQ4OTE5Mw==",
    "diff_hunk": "@@ -111,6 +117,12 @@ class CWalletDBWrapper\n      */\n     std::string GetName() const { return strFile; }\n \n+    /** Return whether this database handle is a dummy for testing.\n+     * Only to be used at a low level, application should ideally not care\n+     * about this.\n+     */\n+    bool IsDummy() { return env == nullptr; }",
    "path": "src/wallet/db.h",
    "position": 47,
    "original_position": 21,
    "commit_id": "911a4808fb8d9c73463f9686ca4c26b8556ce53b",
    "original_commit_id": "58ad2ead8b753952f700cabf9b84be6492a9584f",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Yes, good point. CDB is already a friend and should be the only user of this, moving it to private.",
    "created_at": "2017-04-20T15:47:26Z",
    "updated_at": "2017-04-21T14:04:46Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r112489193",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112489193"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r112489193"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112489193/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 124,
    "side": "RIGHT",
    "in_reply_to_id": 110003734
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112490394",
    "pull_request_review_id": 33810049,
    "id": 112490394,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExMjQ5MDM5NA==",
    "diff_hunk": "@@ -33,46 +33,46 @@ static std::atomic<unsigned int> nWalletDBUpdateCounter;\n bool CWalletDB::WriteName(const std::string& strAddress, const std::string& strName)\n {\n     nWalletDBUpdateCounter++;\n-    return Write(make_pair(std::string(\"name\"), strAddress), strName);\n+    return batch.Write(make_pair(std::string(\"name\"), strAddress), strName);",
    "path": "src/wallet/walletdb.cpp",
    "position": null,
    "original_position": 5,
    "commit_id": "911a4808fb8d9c73463f9686ca4c26b8556ce53b",
    "original_commit_id": "e3e51fdd3a9491ab4a07baed0a0f52b47ef70140",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I don't understand why this doesn't cause a compile error. We've removed all the \"using namespace std\".",
    "created_at": "2017-04-20T15:52:12Z",
    "updated_at": "2017-04-21T14:04:46Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r112490394",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112490394"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r112490394"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112490394/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 36,
    "side": "RIGHT",
    "in_reply_to_id": 110004989
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112694482",
    "pull_request_review_id": 34031246,
    "id": 112694482,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDExMjY5NDQ4Mg==",
    "diff_hunk": "@@ -359,13 +359,12 @@ void CDBEnv::CheckpointLSN(const std::string& strFile)\n }\n \n \n-CDB::CDB(const std::string& strFilename, const char* pszMode, bool fFlushOnCloseIn) : pdb(NULL), activeTxn(NULL)\n+CDB::CDB(CWalletDBWrapper& dbw, const char* pszMode, bool fFlushOnCloseIn) : pdb(NULL), activeTxn(NULL)",
    "path": "src/wallet/db.cpp",
    "position": 5,
    "original_position": 5,
    "commit_id": "911a4808fb8d9c73463f9686ca4c26b8556ce53b",
    "original_commit_id": "b2db6c3a08811f509bb9a848144343816d11bf20",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I added a commit that adds this as a comment, as it will be something that confuses everyone reading this code.",
    "created_at": "2017-04-21T14:05:04Z",
    "updated_at": "2017-04-21T14:05:05Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r112694482",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112694482"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/9951#discussion_r112694482"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9951"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/112694482/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 362,
    "original_line": 362,
    "side": "RIGHT",
    "in_reply_to_id": 110002885
  }
]