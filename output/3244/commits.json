[
  {
    "sha": "d6f690f7da2712b79550d909c5cd53432302517c",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkNmY2OTBmN2RhMjcxMmI3OTU1MGQ5MDljNWNkNTM0MzIzMDI1MTdj",
    "commit": {
      "author": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2013-11-13T09:58:31Z"
      },
      "committer": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2013-11-13T16:02:27Z"
      },
      "message": "Use C99 printf statements in mingw\n\nOtherwise, format specifiers such as %llu will not work on XP or\nearlier.\nThis bug was introduced with 51ed9ec9.\nhttp://sourceforge.net/apps/trac/mingw-w64/wiki/gnu%20printf",
      "tree": {
        "sha": "e29a0fb7fbeed0c0194ea64a6759e8bd504937a9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e29a0fb7fbeed0c0194ea64a6759e8bd504937a9"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d6f690f7da2712b79550d909c5cd53432302517c",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d6f690f7da2712b79550d909c5cd53432302517c",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/d6f690f7da2712b79550d909c5cd53432302517c",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d6f690f7da2712b79550d909c5cd53432302517c/comments",
    "author": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "b3e579713f14309a330a44171abd47c2e851a7b0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b3e579713f14309a330a44171abd47c2e851a7b0",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/b3e579713f14309a330a44171abd47c2e851a7b0"
      }
    ],
    "stats": {
      "total": 35,
      "additions": 9,
      "deletions": 26
    },
    "files": [
      {
        "sha": "1b3d91890c7be64d9c6d301d43161ea43f3ffaef",
        "filename": "configure.ac",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d6f690f7da2712b79550d909c5cd53432302517c/configure.ac",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d6f690f7da2712b79550d909c5cd53432302517c/configure.ac",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/configure.ac?ref=d6f690f7da2712b79550d909c5cd53432302517c",
        "patch": "@@ -221,7 +221,7 @@ case $host in\n        AC_MSG_ERROR(\"windres not found\")\n      fi\n \n-     CPPFLAGS=\"$CPPFLAGS -D_MT -DWIN32 -D_WINDOWS -DBOOST_THREAD_USE_LIB\"\n+     CPPFLAGS=\"$CPPFLAGS -D_MT -DWIN32 -D_WINDOWS -DBOOST_THREAD_USE_LIB -D__USE_MINGW_ANSI_STDIO\"\n      LEVELDB_TARGET_FLAGS=\"TARGET_OS=OS_WINDOWS_CROSSCOMPILE\"\n      CXXFLAGS=\"$CXXFLAGS -w\"\n      ;;"
      },
      {
        "sha": "44186b73258447f7d345e335de1f47e239a6933e",
        "filename": "src/util.cpp",
        "status": "modified",
        "additions": 0,
        "deletions": 4,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d6f690f7da2712b79550d909c5cd53432302517c/src/util.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d6f690f7da2712b79550d909c5cd53432302517c/src/util.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/util.cpp?ref=d6f690f7da2712b79550d909c5cd53432302517c",
        "patch": "@@ -336,11 +336,7 @@ string vstrprintf(const char *format, va_list ap)\n     {\n         va_list arg_ptr;\n         va_copy(arg_ptr, ap);\n-#ifdef WIN32\n-        ret = _vsnprintf(p, limit, format, arg_ptr);\n-#else\n         ret = vsnprintf(p, limit, format, arg_ptr);\n-#endif\n         va_end(arg_ptr);\n         if (ret >= 0 && ret < limit)\n             break;"
      },
      {
        "sha": "9c7f185f13d8070b4e69574e0cacd66d215130b3",
        "filename": "src/util.h",
        "status": "modified",
        "additions": 8,
        "deletions": 21,
        "changes": 29,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d6f690f7da2712b79550d909c5cd53432302517c/src/util.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d6f690f7da2712b79550d909c5cd53432302517c/src/util.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/util.h?ref=d6f690f7da2712b79550d909c5cd53432302517c",
        "patch": "@@ -44,26 +44,13 @@ static const int64_t CENT = 1000000;\n #define UEND(a)             ((unsigned char*)&((&(a))[1]))\n #define ARRAYLEN(array)     (sizeof(array)/sizeof((array)[0]))\n \n-/* Format characters for (s)size_t and ptrdiff_t */\n-#if defined(_MSC_VER) || defined(__MSVCRT__)\n-  /* (s)size_t and ptrdiff_t have the same size specifier in MSVC:\n-     http://msdn.microsoft.com/en-us/library/tcxf1dw6%28v=vs.100%29.aspx\n-   */\n-  #define PRIszx    \"Ix\"\n-  #define PRIszu    \"Iu\"\n-  #define PRIszd    \"Id\"\n-  #define PRIpdx    \"Ix\"\n-  #define PRIpdu    \"Iu\"\n-  #define PRIpdd    \"Id\"\n-#else /* C99 standard */\n-  #define PRIszx    \"zx\"\n-  #define PRIszu    \"zu\"\n-  #define PRIszd    \"zd\"\n-  #define PRIpdx    \"tx\"\n-  #define PRIpdu    \"tu\"\n-  #define PRIpdd    \"td\"\n-#endif\n-\n+/* Format characters for (s)size_t and ptrdiff_t (C99 standard) */\n+#define PRIszx    \"zx\"\n+#define PRIszu    \"zu\"\n+#define PRIszd    \"zd\"\n+#define PRIpdx    \"tx\"\n+#define PRIpdu    \"tu\"\n+#define PRIpdd    \"td\"\n \n // This is needed because the foreach macro can't get over the comma in pair<t1, t2>\n #define PAIRTYPE(t1, t2)    std::pair<t1, t2>\n@@ -117,7 +104,7 @@ inline void MilliSleep(int64_t n)\n  * Parameters count from 1.\n  */\n #ifdef __GNUC__\n-#define ATTR_WARN_PRINTF(X,Y) __attribute__((format(printf,X,Y)))\n+#define ATTR_WARN_PRINTF(X,Y) __attribute__((format(gnu_printf,X,Y)))\n #else\n #define ATTR_WARN_PRINTF(X,Y)\n #endif"
      }
    ]
  },
  {
    "sha": "c82788effffda0758de20880b2925b42044ce08d",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjODI3ODhlZmZmZmRhMDc1OGRlMjA4ODBiMjkyNWI0MjA0NGNlMDhk",
    "commit": {
      "author": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2013-11-13T11:18:16Z"
      },
      "committer": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2013-11-13T16:02:27Z"
      },
      "message": "tests: add testcases for strprintf",
      "tree": {
        "sha": "cd38bc049f21f1467f84ddf3c3129de1425dc025",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/cd38bc049f21f1467f84ddf3c3129de1425dc025"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c82788effffda0758de20880b2925b42044ce08d",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c82788effffda0758de20880b2925b42044ce08d",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/c82788effffda0758de20880b2925b42044ce08d",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c82788effffda0758de20880b2925b42044ce08d/comments",
    "author": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "d6f690f7da2712b79550d909c5cd53432302517c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d6f690f7da2712b79550d909c5cd53432302517c",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/d6f690f7da2712b79550d909c5cd53432302517c"
      }
    ],
    "stats": {
      "total": 27,
      "additions": 27,
      "deletions": 0
    },
    "files": [
      {
        "sha": "b57945d0612ce7ce92a9faebf457c4c186900576",
        "filename": "src/test/util_tests.cpp",
        "status": "modified",
        "additions": 27,
        "deletions": 0,
        "changes": 27,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c82788effffda0758de20880b2925b42044ce08d/src/test/util_tests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c82788effffda0758de20880b2925b42044ce08d/src/test/util_tests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/util_tests.cpp?ref=c82788effffda0758de20880b2925b42044ce08d",
        "patch": "@@ -303,4 +303,31 @@ BOOST_AUTO_TEST_CASE(util_TimingResistantEqual)\n     BOOST_CHECK(!TimingResistantEqual(std::string(\"abc\"), std::string(\"aba\")));\n }\n \n+/* Test strprintf formatting directives.\n+ * Put a string before and after to ensure sanity of element sizes on stack. */\n+#define B \"check_prefix\"\n+#define E \"check_postfix\"\n+BOOST_AUTO_TEST_CASE(strprintf_numbers)\n+{\n+    int64_t s64t = -9223372036854775807LL; /* signed 64 bit test value */\n+    uint64_t u64t = 18446744073709551615ULL; /* unsigned 64 bit test value */\n+    BOOST_CHECK(strprintf(\"%s %\"PRId64\" %s\", B, s64t, E) == B\" -9223372036854775807 \"E);\n+    BOOST_CHECK(strprintf(\"%s %\"PRIu64\" %s\", B, u64t, E) == B\" 18446744073709551615 \"E);\n+    BOOST_CHECK(strprintf(\"%s %\"PRIx64\" %s\", B, u64t, E) == B\" ffffffffffffffff \"E);\n+\n+    size_t st = 12345678; /* unsigned size_t test value */\n+    ssize_t sst = -12345678; /* signed size_t test value */\n+    BOOST_CHECK(strprintf(\"%s %\"PRIszd\" %s\", B, sst, E) == B\" -12345678 \"E);\n+    BOOST_CHECK(strprintf(\"%s %\"PRIszu\" %s\", B, st, E) == B\" 12345678 \"E);\n+    BOOST_CHECK(strprintf(\"%s %\"PRIszx\" %s\", B, st, E) == B\" bc614e \"E);\n+\n+    ptrdiff_t pt = 87654321; /* positive ptrdiff_t test value */\n+    ptrdiff_t spt = -87654321; /* negative ptrdiff_t test value */\n+    BOOST_CHECK(strprintf(\"%s %\"PRIpdd\" %s\", B, spt, E) == B\" -87654321 \"E);\n+    BOOST_CHECK(strprintf(\"%s %\"PRIpdu\" %s\", B, pt, E) == B\" 87654321 \"E);\n+    BOOST_CHECK(strprintf(\"%s %\"PRIpdx\" %s\", B, pt, E) == B\" 5397fb1 \"E);\n+}\n+#undef B\n+#undef E\n+\n BOOST_AUTO_TEST_SUITE_END()"
      }
    ]
  }
]