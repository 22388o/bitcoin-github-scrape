[
  {
    "sha": "d76353e790ece4b30c5f2206b75b442711f4a569",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkNzYzNTNlNzkwZWNlNGIzMGM1ZjIyMDZiNzViNDQyNzExZjRhNTY5",
    "commit": {
      "author": {
        "name": "Cory Fields",
        "email": "cory-nospam-@coryfields.com",
        "date": "2015-02-18T22:32:52Z"
      },
      "committer": {
        "name": "Cory Fields",
        "email": "cory-nospam-@coryfields.com",
        "date": "2015-02-18T23:09:16Z"
      },
      "message": "osx: enable app-nap to be controlled at runtime\n\nFor now, disable for the life of bitcoind and bitcon-qt to achieve the same\nbehavior as before. More fine-grained behavior can come after more testing.",
      "tree": {
        "sha": "100801a53b669328d9592ece9556786d9065b1da",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/100801a53b669328d9592ece9556786d9065b1da"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d76353e790ece4b30c5f2206b75b442711f4a569",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d76353e790ece4b30c5f2206b75b442711f4a569",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/d76353e790ece4b30c5f2206b75b442711f4a569",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d76353e790ece4b30c5f2206b75b442711f4a569/comments",
    "author": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "47a79bb880fa7dceafdbdc5df50a36173fe74de9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/47a79bb880fa7dceafdbdc5df50a36173fe74de9",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/47a79bb880fa7dceafdbdc5df50a36173fe74de9"
      }
    ],
    "stats": {
      "total": 81,
      "additions": 81,
      "deletions": 0
    },
    "files": [
      {
        "sha": "12935b9875911519eb43cd4d7cd6a812a28f550b",
        "filename": "configure.ac",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d76353e790ece4b30c5f2206b75b442711f4a569/configure.ac",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d76353e790ece4b30c5f2206b75b442711f4a569/configure.ac",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/configure.ac?ref=d76353e790ece4b30c5f2206b75b442711f4a569",
        "patch": "@@ -304,6 +304,7 @@ case $host in\n            old_striplib=\n            ;;\n        esac\n+     AX_CHECK_LINK_FLAG([[-framework Foundation]], [LDFLAGS=\"$LDFLAGS -framework Foundation\"])\n      fi\n \n      AX_CHECK_LINK_FLAG([[-Wl,-headerpad_max_install_names]], [LDFLAGS=\"$LDFLAGS -Wl,-headerpad_max_install_names\"])"
      },
      {
        "sha": "914be3e00f89f73c9f4126c6a4bb1afd88cb0c86",
        "filename": "src/Makefile.am",
        "status": "modified",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d76353e790ece4b30c5f2206b75b442711f4a569/src/Makefile.am",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d76353e790ece4b30c5f2206b75b442711f4a569/src/Makefile.am",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/Makefile.am?ref=d76353e790ece4b30c5f2206b75b442711f4a569",
        "patch": "@@ -70,6 +70,7 @@ endif\n .PHONY: FORCE\n # bitcoin core #\n BITCOIN_CORE_H = \\\n+  appnap.h \\\n   addrman.h \\\n   alert.h \\\n   allocators.h \\\n@@ -189,6 +190,10 @@ libbitcoin_server_a_SOURCES = \\\n   $(JSON_H) \\\n   $(BITCOIN_CORE_H)\n \n+if TARGET_DARWIN\n+  libbitcoin_server_a_SOURCES += appnap.mm\n+endif\n+\n # wallet: shared between bitcoind and bitcoin-qt, but only linked\n # when wallet enabled\n libbitcoin_wallet_a_CPPFLAGS = $(BITCOIN_INCLUDES)"
      },
      {
        "sha": "edb093650883243270a2071f76b5fd32c85bca22",
        "filename": "src/appnap.h",
        "status": "added",
        "additions": 20,
        "deletions": 0,
        "changes": 20,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d76353e790ece4b30c5f2206b75b442711f4a569/src/appnap.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d76353e790ece4b30c5f2206b75b442711f4a569/src/appnap.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/appnap.h?ref=d76353e790ece4b30c5f2206b75b442711f4a569",
        "patch": "@@ -0,0 +1,20 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2014 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_APPNAPINHIBITOR_H\n+#define BITCOIN_APPNAPINHIBITOR_H\n+\n+class CAppNapInhibitorInt;\n+\n+class CAppNapInhibitor\n+{\n+public:\n+    CAppNapInhibitor(const char* strReason);\n+    ~CAppNapInhibitor();\n+private:\n+    CAppNapInhibitorInt *priv;\n+};\n+\n+#endif // BITCOIN_APPNAPINHIBITOR_H"
      },
      {
        "sha": "99bcfb5a0cffbe0416242670e6c9f0d6a80afca0",
        "filename": "src/appnap.mm",
        "status": "added",
        "additions": 28,
        "deletions": 0,
        "changes": 28,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d76353e790ece4b30c5f2206b75b442711f4a569/src/appnap.mm",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d76353e790ece4b30c5f2206b75b442711f4a569/src/appnap.mm",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/appnap.mm?ref=d76353e790ece4b30c5f2206b75b442711f4a569",
        "patch": "@@ -0,0 +1,28 @@\n+#include \"appnap.h\"\n+\n+#include <AvailabilityMacros.h>\n+#include <Foundation/NSProcessInfo.h>\n+#include <Foundation/Foundation.h>\n+\n+class CAppNapInhibitorInt\n+{\n+public:\n+    id<NSObject> activityId;\n+};\n+\n+CAppNapInhibitor::CAppNapInhibitor(const char* strReason) : priv(new CAppNapInhibitorInt)\n+{\n+#if defined(MAC_OS_X_VERSION_MAX_ALLOWED) &&  MAC_OS_X_VERSION_MAX_ALLOWED >= 1090\n+    if ([[NSProcessInfo processInfo] respondsToSelector:@selector(beginActivityWithOptions:reason:)])\n+        priv->activityId = [[NSProcessInfo processInfo ] beginActivityWithOptions: NSActivityUserInitiatedAllowingIdleSystemSleep reason:@(strReason)];\n+#endif\n+}\n+\n+CAppNapInhibitor::~CAppNapInhibitor()\n+{\n+#if defined(MAC_OS_X_VERSION_MAX_ALLOWED) &&  MAC_OS_X_VERSION_MAX_ALLOWED >= 1090\n+    if ([[NSProcessInfo processInfo] respondsToSelector:@selector(endActivity:)])\n+        [[NSProcessInfo processInfo] endActivity:priv->activityId];\n+#endif\n+    delete priv;\n+}"
      },
      {
        "sha": "eb775f94b0e200045b90c8a2b5e59c1c5c5c009d",
        "filename": "src/bitcoind.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d76353e790ece4b30c5f2206b75b442711f4a569/src/bitcoind.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d76353e790ece4b30c5f2206b75b442711f4a569/src/bitcoind.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/bitcoind.cpp?ref=d76353e790ece4b30c5f2206b75b442711f4a569",
        "patch": "@@ -59,6 +59,8 @@ bool AppInit(int argc, char* argv[])\n \n     bool fRet = false;\n \n+    CIdleInhibitor noIdle(\"bitcoind\");\n+\n     //\n     // Parameters\n     //"
      },
      {
        "sha": "b2a2bdbf028a1fdf18ce926064c7d360b0796ffb",
        "filename": "src/qt/bitcoin.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d76353e790ece4b30c5f2206b75b442711f4a569/src/qt/bitcoin.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d76353e790ece4b30c5f2206b75b442711f4a569/src/qt/bitcoin.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoin.cpp?ref=d76353e790ece4b30c5f2206b75b442711f4a569",
        "patch": "@@ -490,6 +490,8 @@ int main(int argc, char *argv[])\n {\n     SetupEnvironment();\n \n+    CIdleInhibitor noIdle(\"bitcoin-qt\");\n+\n     /// 1. Parse command-line options. These take precedence over anything else.\n     // Command-line options take precedence:\n     ParseParameters(argc, argv);"
      },
      {
        "sha": "1955aac506c7db965cf6301babd0d4d939e500f4",
        "filename": "src/util.h",
        "status": "modified",
        "additions": 23,
        "deletions": 0,
        "changes": 23,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d76353e790ece4b30c5f2206b75b442711f4a569/src/util.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d76353e790ece4b30c5f2206b75b442711f4a569/src/util.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/util.h?ref=d76353e790ece4b30c5f2206b75b442711f4a569",
        "patch": "@@ -18,6 +18,10 @@\n #include \"tinyformat.h\"\n #include \"utiltime.h\"\n \n+#ifdef MAC_OSX\n+#include \"appnap.h\"\n+#endif\n+\n #include <exception>\n #include <map>\n #include <stdint.h>\n@@ -229,4 +233,23 @@ template <typename Callable> void TraceThread(const char* name,  Callable func)\n     }\n }\n \n+// A RAII wrapper around calls to forbid and re-allow entering into\n+// low-priority states, specifically OSX's app-nap. For the scope of\n+// the object, napping is disabled. Several objects may co-exist, napping is\n+// allowed when the last one is destroyed.\n+\n+class CIdleInhibitor\n+{\n+public:\n+#ifdef MAC_OSX\n+    CIdleInhibitor(const char* strReason) : inhibit(strReason){}\n+#else\n+    CIdleInhibitor(const char*){}\n+#endif\n+private:\n+#ifdef MAC_OSX\n+    CAppNapInhibitor inhibit;\n+#endif\n+};\n+\n #endif // BITCOIN_UTIL_H"
      }
    ]
  },
  {
    "sha": "0fff6b7e9b3d48453fff5f406575d3904eede3a2",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowZmZmNmI3ZTliM2Q0ODQ1M2ZmZjVmNDA2NTc1ZDM5MDRlZWRlM2Ey",
    "commit": {
      "author": {
        "name": "Cory Fields",
        "email": "cory-nospam-@coryfields.com",
        "date": "2015-02-18T22:36:59Z"
      },
      "committer": {
        "name": "Cory Fields",
        "email": "cory-nospam-@coryfields.com",
        "date": "2015-02-18T23:09:17Z"
      },
      "message": "osx: remove hard-coded app-nap setting",
      "tree": {
        "sha": "e5e6a31b1d738f5f6102839e5a67811c886c894c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e5e6a31b1d738f5f6102839e5a67811c886c894c"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0fff6b7e9b3d48453fff5f406575d3904eede3a2",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0fff6b7e9b3d48453fff5f406575d3904eede3a2",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/0fff6b7e9b3d48453fff5f406575d3904eede3a2",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0fff6b7e9b3d48453fff5f406575d3904eede3a2/comments",
    "author": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "d76353e790ece4b30c5f2206b75b442711f4a569",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d76353e790ece4b30c5f2206b75b442711f4a569",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/d76353e790ece4b30c5f2206b75b442711f4a569"
      }
    ],
    "stats": {
      "total": 5,
      "additions": 1,
      "deletions": 4
    },
    "files": [
      {
        "sha": "7a0725aecf6201b2e99d73b7997a69755b087416",
        "filename": "configure.ac",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0fff6b7e9b3d48453fff5f406575d3904eede3a2/configure.ac",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0fff6b7e9b3d48453fff5f406575d3904eede3a2/configure.ac",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/configure.ac?ref=0fff6b7e9b3d48453fff5f406575d3904eede3a2",
        "patch": "@@ -304,9 +304,9 @@ case $host in\n            old_striplib=\n            ;;\n        esac\n-     AX_CHECK_LINK_FLAG([[-framework Foundation]], [LDFLAGS=\"$LDFLAGS -framework Foundation\"])\n      fi\n \n+     AX_CHECK_LINK_FLAG([[-framework Foundation]], [LDFLAGS=\"$LDFLAGS -framework Foundation\"])\n      AX_CHECK_LINK_FLAG([[-Wl,-headerpad_max_install_names]], [LDFLAGS=\"$LDFLAGS -Wl,-headerpad_max_install_names\"])\n      CPPFLAGS=\"$CPPFLAGS -DMAC_OSX\"\n      ;;"
      },
      {
        "sha": "e79e59a568feb757637ac08cf655cd3e9a7e9994",
        "filename": "share/qt/Info.plist.in",
        "status": "modified",
        "additions": 0,
        "deletions": 3,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0fff6b7e9b3d48453fff5f406575d3904eede3a2/share/qt/Info.plist.in",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0fff6b7e9b3d48453fff5f406575d3904eede3a2/share/qt/Info.plist.in",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/share/qt/Info.plist.in?ref=0fff6b7e9b3d48453fff5f406575d3904eede3a2",
        "patch": "@@ -91,9 +91,6 @@\n   <key>NSHighResolutionCapable</key>\n     <string>True</string>\n \n-  <key>LSAppNapIsDisabled</key>\n-    <string>True</string>\n-  \n   <key>LSApplicationCategoryType</key>\n     <string>public.app-category.finance</string>\n </dict>"
      }
    ]
  }
]