GChuf,2019-08-31 12:07:18,"We talked about the uninstall.exe icon here: https://github.com/bitcoin/bitcoin/pull/16760\n\nThe uninstall.exe icon looks like it's from 2010 (horrible) and the previous PR didn't really change that - it was more of a quick fix, but only for newer versions of Windows (maybe only Windows 10 and 8).\nAdding an extra black bitcoin icon or not is to be decided - personally I'd like to include it, ",https://github.com/bitcoin/bitcoin/pull/16769#issuecomment-526825345,526825345,
fanquake,2019-08-31 13:20:47,"You can split this into two commits, each with a more descriptive commit message. i.e One for the registry modifications, with an explanation of the values being removed, and one for updating the uninstaller icon.\n\ncc @sipsorcery @NicolasDorier ",https://github.com/bitcoin/bitcoin/pull/16769#issuecomment-526830198,526830198,
GChuf,2019-09-01 15:12:16,"@fanquake got it, done.\n--> updated commit message and pushed commits again",https://github.com/bitcoin/bitcoin/pull/16769#issuecomment-526927106,526927106,
sipsorcery,2019-09-04 16:49:13,"@GChuf you are missing a double quote:\n\n`DeleteRegKey HKLM ""SOFTWARE\Bitcoin Core (@WINDOWS_BITS@-bit)`\n",https://github.com/bitcoin/bitcoin/pull/16769#issuecomment-527987876,527987876,
sipsorcery,2019-09-04 17:33:07,@GChuf the registry keys on my machine under HKCU and HKLM are both `Bitcoin Core (64-bit)`. Is there any reason you've deleted them with different names? How do they appear on your machine?,https://github.com/bitcoin/bitcoin/pull/16769#issuecomment-528004592,528004592,
GChuf,2019-09-05 09:48:37,"@sipsorcery nice catch on double quotes, thank you.\n\nWhich windows version are you using?\nAlso, which bitcoin version? Can you post some registry screenshots?\n\nKeys on my Win10 (1709) and my Windows 7 (I just tested) appear just how I've set to delete them.\n\nThis is from my Win7 machine after uninstall:\n![untitled4](https://user-images.githubusercontent.com/42591821/64331188-a5028b",https://github.com/bitcoin/bitcoin/pull/16769#issuecomment-528288484,528288484,
sipsorcery,2019-09-05 18:33:08,"@GChuf I think we should only delete registry keys in the uninstall script that are explicitly set in the install script. If there is somewhere in the Bitcoin app that is setting an additional registry key then IMHO we should add it to the install script.\n\nIt seems a bit dangerous to simply delete keys that use the word Bitcoin. There are some other notable products that may have very similar ",https://github.com/bitcoin/bitcoin/pull/16769#issuecomment-528516348,528516348,
GChuf,2019-09-05 19:01:21,"Well the registry keys deleted don't just contain the word ""bitcoin"", they're exactly specified. If there is no key named `Bitcoin Core (64-bit)` under `HKLM\SOFTWARE`, nothing gets deleted.\n\nOther products would be wise to avoid naming registry keys (or anything else) exactly `Bitcoin Core` anyway.\n\nThe fact is that the installer generates these keys and does not delete them, unlike other",https://github.com/bitcoin/bitcoin/pull/16769#issuecomment-528527395,528527395,
sipsorcery,2019-09-05 19:38:12,"Windows 10 Pro Insider Preview Build 18956.rs_prerelease.190803-1414.\nBitcoin version was built from master with your patch included.\n\n> Well the registry keys deleted don't just contain the word ""bitcoin"", they're exactly specified. If there is no key named Bitcoin Core (64-bit) under HKLM\SOFTWARE, nothing gets deleted.\n\nThis delete command from your PR is just ""Bitcoin"".\n\n`DeleteR",https://github.com/bitcoin/bitcoin/pull/16769#issuecomment-528546259,528546259,
GChuf,2019-09-05 20:28:54,"Whatever is specified, _that exact thing_ will be deleted. Be it ""Bitcoin"" or ""Bitcoin Core (64-bit)"".\n\nIn the case of `DeleteRegKey HKCU ""SOFTWARE\Bitcoin""`, only one key will ever be deleted. If a key with the name of ""Bitcoin XXXX"" existed there, it would be left untouched.\n\n\nI have to agree on leaving `HKCU\SOFTWARE\Bitcoin` as is. User settings are indeed there. (does this mean you ",https://github.com/bitcoin/bitcoin/pull/16769#issuecomment-528567995,528567995,
GChuf,2019-09-06 10:37:53,Updated,https://github.com/bitcoin/bitcoin/pull/16769#issuecomment-528804939,528804939,
sipsorcery,2019-09-07 10:04:47,"Next suggestion now is to follow the existing convention in the file for specifying the keys to delete.\n\nInstead of:\n\n`DeleteRegKey HKLM ""SOFTWARE\Bitcoin Core (@WINDOWS_BITS@-bit)""`\n\nit should be:\n\n`DeleteRegKey /IfEmpty HKLM ""${REGKEY}""`\n\nThat way if the name of the installer package ever changes it will automatically get applied without needing the additional  step of also c",https://github.com/bitcoin/bitcoin/pull/16769#issuecomment-529093373,529093373,
GChuf,2019-09-07 12:25:32,"Agreed. No subkeys on my machine as well.\nWill change to `DeleteRegKey /IfEmpty HKLM ""${REGKEY}""`.\n\n\nDo you think we could also **remove** these entries which delete values?\n```\nDeleteRegValue HKCU ""${REGKEY}"" StartMenuGroup\nDeleteRegValue HKCU ""${REGKEY}"" Path\n```\n\nThese values should automatically be deleted when deleting keys anyway:\n `DeleteRegKey /IfEmpty HKCU ""${REGKEY}",https://github.com/bitcoin/bitcoin/pull/16769#issuecomment-529103762,529103762,
sipsorcery,2019-09-07 12:34:29,"> Do you think we could also remove these entries which delete values?\n>\n````\nDeleteRegValue HKCU ""${REGKEY}"" StartMenuGroup\nDeleteRegValue HKCU ""${REGKEY}"" Path\n````\n\nNo they should be left as is. The original author has decided that it's safe to explicitly delete those sub keys no matter what they contain. If the commands are removed and the keys do exist then the command below wil",https://github.com/bitcoin/bitcoin/pull/16769#issuecomment-529104358,529104358,
GChuf,2019-09-07 13:01:01,"It is true that the command will fail if there are subkeys. However these are values (!) being deleted, not subkeys. Therefore, deleting values and keys afterwards is doing the same thing twice. ",https://github.com/bitcoin/bitcoin/pull/16769#issuecomment-529106209,529106209,
GChuf,2019-09-11 11:44:44,"@sipsorcery @fanquake \nI was able to build bitcoin-qt.exe following [this guide](https://github.com/bitcoin/bitcoin/blob/master/doc/build-windows.md) but I wasn't able to build the windows installer. I'd like to build the installer (and uninstaller) to test a few things in the registry - can you point me out to some resources?\nI'm pretty sure we can remove the values being deleted and just del",https://github.com/bitcoin/bitcoin/pull/16769#issuecomment-530343791,530343791,
sipsorcery,2019-09-11 12:03:27,@GChuf I can confirm the Windows installer builds correctly on an Ubuntu 18.04 VM using those instructions. What OS were you using?,https://github.com/bitcoin/bitcoin/pull/16769#issuecomment-530349798,530349798,
GChuf,2019-09-12 12:35:45,"@sipsorcery using Ubuntu 18.04 VM as well. I get some .exe files when the process is finished, but bitcoin-qt.exe appears to be **portable** install.\n\n![Screenshot_107](https://user-images.githubusercontent.com/42591821/64784490-c4149680-d559-11e9-89fa-13ba8b5336ee.png)\n",https://github.com/bitcoin/bitcoin/pull/16769#issuecomment-530804340,530804340,
sipsorcery,2019-09-12 12:47:21,"The bitcoin-qt.exe isn't an installer. That's solely the GUI application. It's big because it's a static build and pulls in the all Qt dependencies.\n\nDid you definitely do the `sudo apt install nsis` and `make deploy` steps? If so the build should have produced the installer executable.",https://github.com/bitcoin/bitcoin/pull/16769#issuecomment-530808684,530808684,
GChuf,2019-09-12 21:02:09,"@sipsorcery thank you. I was missing `make deploy`, I only did `make` and thought I might have done something wrong - obviously I should have looked at the instructions again.\n\nI've made sure that deleting registry values is useless since registry keys are deleted anyway.\nI was not able to delete the key under HKLM - not sure why. Deleting it manually in regedit works.\n\nAnd this is how t",https://github.com/bitcoin/bitcoin/pull/16769#issuecomment-531005393,531005393,
sipsorcery,2019-09-13 22:15:30,"The icon change looks ok to me but removing the delete of the registry keys isn't justified. Those instructions may not have an effect on yours or my Win10 systems but maybe they do on Win7 or Vista, XP etc. \n\nGeneral rule of thumb with Bitcoin Core changes is that the impacts need to be very well understood or they shouldn't be applied. Not saying it would have to go as far back as Windows 3.",https://github.com/bitcoin/bitcoin/pull/16769#issuecomment-531407617,531407617,
GChuf,2019-09-14 11:57:36,"Let's clear some things out.\n1. Windows 2000 and Windows XP use the same registry structure as Windows 10 (version 5.00). Of course Windows 7/8/Vista also use v5.00.\nMore info [here](https://support.microsoft.com/en-us/help/310516/how-to-add-modify-or-delete-registry-subkeys-and-values-by-using-a-reg).\n\n\n2. Registry keys are like folders, while registry values are like files within folde",https://github.com/bitcoin/bitcoin/pull/16769#issuecomment-531473909,531473909,
fanquake,2019-09-16 09:28:01,"> The icon change looks ok to me\n\nI agree. This PR could be just that change.\n\nI don't have experience working with the Windows registry or unisntall process, however I think we're getting bogged down into a change where, if we leave everything as is, in the worse case a registry key that doesn't exist doesn't get deleted? Will defer to others that have an opinion.",https://github.com/bitcoin/bitcoin/pull/16769#issuecomment-531703039,531703039,
GChuf,2019-09-16 14:30:07,"> If we leave everything as is, in the worse case a registry key that doesn't exist doesn't get deleted?\n\nI'm not sure how you got here. The result will be the same if we make the change or not. I simply deleted unnecessary lines and made the uninstall process cleaner. So, this is an optimization.\n\nI believe I explained everything in my previous comment (and commit message), but to hopeful",https://github.com/bitcoin/bitcoin/pull/16769#issuecomment-531803435,531803435,
sipsorcery,2019-09-16 14:48:19,">  If registry keys (which contain values) are deleted, those values are automatically deleted as well.\n\nExcept if the `/IfEmpty` flag is specified.\n\nThe existing logic that's relevant here seems pretty clear to me:\n\nWhere the install is on Windows 64bit:\n\n1. Delete value HKCU\Bitcoin Core (64-bit)\Components | Main\n2. Delete value HKCU\Bitcoin Core (64-bit) | StartMenuGroup\n3.",https://github.com/bitcoin/bitcoin/pull/16769#issuecomment-531811329,531811329,
GChuf,2019-09-16 15:04:09,@sipsorcery I've explained 2 times already that /IfEmpty flag looks for **subkeys not values**. I don't know what else to say. Read the NSIS link again.,https://github.com/bitcoin/bitcoin/pull/16769#issuecomment-531818540,531818540,
sipsorcery,2019-09-16 15:13:32,"> @sipsorcery I've explained 2 times already that /IfEmpty flag looks for **subkeys not values**. I don't know what else to say. Read the NSIS link again.\n\nYes but what about the case where there are subkeys that exist under `HKCU\Bitcoin Core (64-bit)`. In that case it's still desirable that the values get removed but not the parent `HKCU\Bitcoin Core (64-bit)` key.",https://github.com/bitcoin/bitcoin/pull/16769#issuecomment-531822710,531822710,
GChuf,2019-09-16 18:58:12,"> Yes but what about the case where there are subkeys that exist under `HKCU\Bitcoin Core (64-bit)`. In that case it's still desirable that the values get removed but not the parent `HKCU\Bitcoin Core (64-bit)` key.\n\nI don't understand where you're getting at.\n\nFirst, do we agree that deleting registry values specifically is not needed in the script? Have we established that `/IfEmpty` com",https://github.com/bitcoin/bitcoin/pull/16769#issuecomment-531911444,531911444,
GChuf,2019-09-20 20:02:09,"@NicolasDorier would you be willing to take another look? In particular, the registry values? We've already talked about the icon in the previous PR if you remember.",https://github.com/bitcoin/bitcoin/pull/16769#issuecomment-533690932,533690932,
luke-jr,2019-09-20 21:33:47,"Uh, won't this change the Start Menu icon for the uninstaller? People looking through their Start Menu to run Bitcoin don't want to get the icons confused IMO. Having the icon itself reflect uninstallation is therefore important.",https://github.com/bitcoin/bitcoin/pull/16769#issuecomment-533715854,533715854,
GChuf,2019-09-26 14:31:48,"@luke-jr yes, it will change the start menu icon, but since for most users the first icon will be `bitcoin-qt` anyway, I don't think it will be an issue. The bitcoin testnet icon is also exactly the same except the green colour and it doesn't seem to cause any problems.\n![Screenshot_71](https://user-images.githubusercontent.com/42591821/65697355-52187300-e06a-11e9-8312-9bf6de689807.png)\n",https://github.com/bitcoin/bitcoin/pull/16769#issuecomment-535531071,535531071,
laanwj,2019-09-30 11:14:06,">  Having the icon itself reflect uninstallation is therefore important.\n\nThis is a very good point why the icon for uninstallation needs to be qualitatively different and not just, say, the bitcoin icon in a different color.",https://github.com/bitcoin/bitcoin/pull/16769#issuecomment-536516031,536516031,
laanwj,2019-11-02 10:23:22,Closing this as it seems controversial.,https://github.com/bitcoin/bitcoin/pull/16769#issuecomment-549030467,549030467,
MarcoFalke,2019-09-16 13:50:02,Where is this file from and how was it created?,https://github.com/bitcoin/bitcoin/pull/16769#discussion_r324685724,324685724,share/setup.nsi.in
GChuf,2019-09-16 14:14:42,"This icon file was created by me with the help of Adobe Photoshop and another program for making .ico files on Windows (Axialis IconWorkshop).\nThe original file I used was this: https://raw.githubusercontent.com/bitcoin/bitcoin/0.18/src/qt/res/icons/about.png",https://github.com/bitcoin/bitcoin/pull/16769#discussion_r324698953,324698953,share/setup.nsi.in
