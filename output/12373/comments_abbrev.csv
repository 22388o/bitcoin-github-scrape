laanwj,2018-02-15T16:12:39Z,"Should this mention in the help message that this is specifically for profiling with `gprof`? E.g. Valgrind is also used quite frequently for profiling.\n\nAdded @theuni as reviewer because of build system change.",https://github.com/bitcoin/bitcoin/pull/12373#issuecomment-365976552,365976552,
murrayn,2018-02-15T23:58:26Z,"\nOn 2/15/2018 8:14 AM, Wladimir J. van der Laan wrote:\n> Should this mention in the help message that this is specifically for \n> profiling with |gprof|? E.g. Valgrind is also used quite frequently for \n> profiling.\n\nYes, it should. I will make the change.\n\nMurray\n\n",https://github.com/bitcoin/bitcoin/pull/12373#issuecomment-366102724,366102724,
jamesob,2018-02-20T17:32:03Z,"Unsure if this is working with clang; getting some warnings:\n\n```\n $ ./configure LDFLAGS=""-L${BDB_PREFIX}/lib/"" CPPFLAGS=""-I${BDB_PREFIX}/include/"" CXXFLAGS=""${CXXFLAGS}"" --enable-wallet --enable-gprof --with-daemon\n[...]\nOptions used to compile and link:\n  with wallet   = yes\n  with gui / qt = yes\n    qt version  = 5\n    with qr     = auto\n  with zmq      = yes\n  with test  ",https://github.com/bitcoin/bitcoin/pull/12373#issuecomment-367054851,367054851,
theuni,2018-02-20T18:04:36Z,@jamesob The suggestion above should take care of it.,https://github.com/bitcoin/bitcoin/pull/12373#issuecomment-367065175,367065175,
murrayn,2018-02-22T11:38:58Z,"@theuni If this latest change (or any related assignment to LDFLAGS as was done with CXXFLAGS) occurs later in configure.ac, gprof profiling fails. Perhaps there is some order of arguments issue with ld.",https://github.com/bitcoin/bitcoin/pull/12373#issuecomment-367654697,367654697,
theuni,2018-02-22T21:41:18Z,@murrayn Please try this on top of yours: https://github.com/theuni/bitcoin/commit/bb91da4122852c7ac3a054d383e9bbb7a1139d4a. Works for me.,https://github.com/bitcoin/bitcoin/pull/12373#issuecomment-367831729,367831729,
murrayn,2018-02-23T00:23:12Z,"@theuni This doesn't work for me. It compiles, and the binaries run, but if you look at the gprof output, it is empty. My test case:\n\n$ make\n$ cd src/qt\n$ ./bitcoin-qt --help\n$ gprof bitcoin-qt\n",https://github.com/bitcoin/bitcoin/pull/12373#issuecomment-367868618,367868618,
theuni,2018-02-23T23:30:01Z,@murrayn turns out the problem is that -pg is incompatible with -pie. Could you please give https://github.com/theuni/bitcoin/commit/38450db901ce21a2e3c595026583033bb3bf6d78 a try on top of yours? I believe that now accounts for everything.,https://github.com/bitcoin/bitcoin/pull/12373#issuecomment-368169000,368169000,
murrayn,2018-02-24T03:29:15Z,"Works for me now.\n",https://github.com/bitcoin/bitcoin/pull/12373#issuecomment-368195690,368195690,
theuni,2018-02-26T22:55:47Z,@murrayn Could you please squash all of our changes into your first commit?,https://github.com/bitcoin/bitcoin/pull/12373#issuecomment-368680910,368680910,
theuni,2018-03-05T20:39:47Z,Thanks for sticking with this! utACK cfaac2a60f3ac63ae8deccb03d88bd559449b78c,https://github.com/bitcoin/bitcoin/pull/12373#issuecomment-370557080,370557080,
jonasschnelli,2018-02-17T10:43:11Z,nit: alignment,https://github.com/bitcoin/bitcoin/pull/12373#discussion_r168918674,168918674,configure.ac
theuni,2018-02-20T14:46:08Z,"Please use AX_CHECK_LINK_FLAG here to make sure that it actually works. Also, let's stash -pg in PROFILE_LDFLAGS rather than LDFLAGS. Otherwise, the rest of the configure checks will be linked with -pg. So something like:\n\n Something like:\n```\nAX_CHECK_LINK_FLAG([[-pg]],[PROFILE_LDFLAGS=""$PROFILE_LDFLAGS -pg""],[AC_MSG_ERROR(""profiling requested but not available""])\n```\n\nThen the same",https://github.com/bitcoin/bitcoin/pull/12373#discussion_r169339950,169339950,configure.ac
