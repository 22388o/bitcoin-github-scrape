sipa,2015-03-27T23:31:37Z,Ready for review.\n\nPing @morcos.\n,https://github.com/bitcoin/bitcoin/pull/5900#issuecomment-87120939,87120939,
laanwj,2015-03-30T10:54:46Z,"I wanted to do a full sync with this enabled, but the extra checking is slow, even at the lower blocks it takes about a second per block (executing the test twice, sometimes it happens more often);\n\n```\n2015-03-30 10:51:32 Checked block index in 645ms\n2015-03-30 10:51:32 Checked block index in 565ms\n2015-03-30 10:51:32 UpdateTip: new best=00000000bc55e94d87fc6f2565abb2b781cf0b588b2c65f5fcb91e",https://github.com/bitcoin/bitcoin/pull/5900#issuecomment-87634414,87634414,
sdaftuar,2015-03-31T21:40:01Z,"I've been looking at this in the context of #5863 and so far this code has found one bug we introduced there, in LoadBlockIndexDB (we have an incorrect test for adding things to mapBlocksUnlinked). Still working my way through to determine if this catches any other bugs.\n\nI've also started to identify the tests/assumptions introduced in this code which would need to change to support autoprune, ",https://github.com/bitcoin/bitcoin/pull/5900#issuecomment-88258657,88258657,
sipa,2015-04-01T01:34:09Z,"@laanwj A full sync is probably not very interesting, as it's mostly a single linear synchronization run.\n\nWe could perhaps have -checkblockindex=[float] to only run the test with the specified frequency, or have it only check blocks with height above a certain number or not in the main chain.\n",https://github.com/bitcoin/bitcoin/pull/5900#issuecomment-88305462,88305462,
laanwj,2015-04-01T07:07:36Z,"@sipa OK, I don't think that needs to be changed, likely this is based on a misunderstanding. I was assuming it was just another level of checking that can be enabled relatively innocuously during normal use, but it has too much impact for that.\n\nCould use a little bit of documentation (maybe in -help-debug?) about when and how to use this mode. \n",https://github.com/bitcoin/bitcoin/pull/5900#issuecomment-88373387,88373387,
morcos,2015-04-02T03:01:25Z,Belated ACK\n,https://github.com/bitcoin/bitcoin/pull/5900#issuecomment-88709226,88709226,
sdaftuar,2015-04-01T14:59:16Z,"It looks like there aren't any explicit consistency checks for BLOCK_VALID_TRANSACTIONS.  As I understand it there are two properties:\n- BLOCK_VALID_TRANSACTIONS implies all parents are at least TREE.  We get this test implicitly since we already check that for everything TREE or greater, all its parents are at least TREE, so I don't think an additional test is needed for this condition.\n- If pi",https://github.com/bitcoin/bitcoin/pull/5900#discussion_r27576853,27576853,src/main.cpp
sipa,2015-04-01T17:56:53Z,This sounds correct to me. Feel free to PR an extra check for this?\n,https://github.com/bitcoin/bitcoin/pull/5900#discussion_r27593676,27593676,src/main.cpp
sdaftuar,2015-04-01T19:38:47Z,Yep -- please see #5959 \n,https://github.com/bitcoin/bitcoin/pull/5900#discussion_r27603635,27603635,src/main.cpp
