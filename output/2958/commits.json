[
  {
    "sha": "9e8904f6aeb6e98b4781fcf408b0a2bee550051d",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo5ZTg5MDRmNmFlYjZlOThiNDc4MWZjZjQwOGIwYTJiZWU1NTAwNTFk",
    "commit": {
      "author": {
        "name": "Jonas Schnelli",
        "email": "jonas.schnelli@include7.ch",
        "date": "2013-08-30T18:04:48Z"
      },
      "committer": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2013-08-31T10:41:47Z"
      },
      "message": "qt: Display txfee in first sendCoinsDialog message box\n\nSigned-off-by: Jonas Schnelli <jonas.schnelli@include7.ch>",
      "tree": {
        "sha": "233f2785fa70fcc5f3d7d0661281d7c1d98fe2d0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/233f2785fa70fcc5f3d7d0661281d7c1d98fe2d0"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9e8904f6aeb6e98b4781fcf408b0a2bee550051d",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9e8904f6aeb6e98b4781fcf408b0a2bee550051d",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/9e8904f6aeb6e98b4781fcf408b0a2bee550051d",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9e8904f6aeb6e98b4781fcf408b0a2bee550051d/comments",
    "author": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "329de9bb64755fa6fd798a02df0fa6a494864c43",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/329de9bb64755fa6fd798a02df0fa6a494864c43",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/329de9bb64755fa6fd798a02df0fa6a494864c43"
      }
    ],
    "stats": {
      "total": 254,
      "additions": 207,
      "deletions": 47
    },
    "files": [
      {
        "sha": "00dd02da58d8ca9761b50e976077eac1252ac504",
        "filename": "bitcoin-qt.pro",
        "status": "modified",
        "additions": 4,
        "deletions": 2,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/9e8904f6aeb6e98b4781fcf408b0a2bee550051d/bitcoin-qt.pro",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/9e8904f6aeb6e98b4781fcf408b0a2bee550051d/bitcoin-qt.pro",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/bitcoin-qt.pro?ref=9e8904f6aeb6e98b4781fcf408b0a2bee550051d",
        "patch": "@@ -240,7 +240,8 @@ HEADERS += src/qt/bitcoingui.h \\\n     src/threadsafety.h \\\n     src/limitedmap.h \\\n     src/qt/splashscreen.h \\\n-    src/qt/intro.h\n+    src/qt/intro.h \\\n+    src/qt/walletmodeltransaction.h\n \n SOURCES += src/qt/bitcoin.cpp \\\n     src/qt/bitcoingui.cpp \\\n@@ -313,7 +314,8 @@ SOURCES += src/qt/bitcoin.cpp \\\n     src/leveldb.cpp \\\n     src/txdb.cpp \\\n     src/qt/splashscreen.cpp \\\n-    src/qt/intro.cpp\n+    src/qt/intro.cpp \\\n+    src/qt/walletmodeltransaction.cpp\n \n RESOURCES += src/qt/bitcoin.qrc\n "
      },
      {
        "sha": "809eff9c27358303526135a56dc2df8b4429ff1b",
        "filename": "src/qt/sendcoinsdialog.cpp",
        "status": "modified",
        "additions": 65,
        "deletions": 16,
        "changes": 81,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/9e8904f6aeb6e98b4781fcf408b0a2bee550051d/src/qt/sendcoinsdialog.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/9e8904f6aeb6e98b4781fcf408b0a2bee550051d/src/qt/sendcoinsdialog.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/sendcoinsdialog.cpp?ref=9e8904f6aeb6e98b4781fcf408b0a2bee550051d",
        "patch": "@@ -97,9 +97,18 @@ void SendCoinsDialog::on_sendButton_clicked()\n         QString amount = BitcoinUnits::formatWithUnit(model->getOptionsModel()->getDisplayUnit(), rcp.amount);\n         if (rcp.authenticatedMerchant.isEmpty())\n         {\n-            QString address = rcp.address;\n-            QString to = GUIUtil::HtmlEscape(rcp.label);\n-            formatted.append(tr(\"<b>%1</b> to %2 (%3)\").arg(amount, to, address));\n+            QString recipientElement = QString(\"<b>%1</b> \").arg(BitcoinUnits::formatWithUnit(model->getOptionsModel()->getDisplayUnit(), rcp.amount));\n+            recipientElement.append(tr(\"to\"));\n+\n+            if(rcp.label.length() > 0)\n+            {\n+                recipientElement.append(QString(\" %1 <span style='font-size:8px;'>%2</span><br />\").arg(GUIUtil::HtmlEscape(rcp.label), rcp.address)); // add address with label\n+            }\n+            else\n+            {\n+                recipientElement.append(QString(\" %1<br />\").arg(rcp.address)); // add address WITHOUT label\n+            }\n+            formatted.append(recipientElement);\n         }\n         else\n         {\n@@ -110,16 +119,6 @@ void SendCoinsDialog::on_sendButton_clicked()\n \n     fNewRecipientAllowed = false;\n \n-    QMessageBox::StandardButton retval = QMessageBox::question(this, tr(\"Confirm send coins\"),\n-                          tr(\"Are you sure you want to send %1?\").arg(formatted.join(tr(\" and \"))),\n-          QMessageBox::Yes|QMessageBox::Cancel,\n-          QMessageBox::Cancel);\n-\n-    if(retval != QMessageBox::Yes)\n-    {\n-        fNewRecipientAllowed = true;\n-        return;\n-    }\n \n     WalletModel::UnlockContext ctx(model->requestUnlock());\n     if(!ctx.isValid())\n@@ -129,8 +128,11 @@ void SendCoinsDialog::on_sendButton_clicked()\n         return;\n     }\n \n-    WalletModel::SendCoinsReturn sendstatus = model->sendCoins(recipients);\n-    switch(sendstatus.status)\n+    // prepare transaction for getting txFee earlier\n+    WalletModelTransaction currentTransaction(recipients);\n+    WalletModel::SendCoinsReturn prepareStatus = model->prepareTransaction(currentTransaction);\n+\n+    switch(prepareStatus.status)\n     {\n     case WalletModel::InvalidAddress:\n         QMessageBox::warning(this, tr(\"Send Coins\"),\n@@ -150,7 +152,7 @@ void SendCoinsDialog::on_sendButton_clicked()\n     case WalletModel::AmountWithFeeExceedsBalance:\n         QMessageBox::warning(this, tr(\"Send Coins\"),\n             tr(\"The total exceeds your balance when the %1 transaction fee is included.\").\n-            arg(BitcoinUnits::formatWithUnit(model->getOptionsModel()->getDisplayUnit(), sendstatus.fee)),\n+            arg(BitcoinUnits::formatWithUnit(model->getOptionsModel()->getDisplayUnit(), currentTransaction.getTransactionFee())),\n             QMessageBox::Ok, QMessageBox::Ok);\n         break;\n     case WalletModel::DuplicateAddress:\n@@ -163,6 +165,51 @@ void SendCoinsDialog::on_sendButton_clicked()\n             tr(\"Error: Transaction creation failed!\"),\n             QMessageBox::Ok, QMessageBox::Ok);\n         break;\n+    case WalletModel::Aborted: // User aborted, nothing to do\n+    case WalletModel::OK:\n+    case WalletModel::TransactionCommitFailed:\n+        break;\n+    }\n+\n+    if(prepareStatus.status != WalletModel::OK) {\n+        fNewRecipientAllowed = true;\n+        return;\n+    }\n+\n+    qint64 txFee = currentTransaction.getTransactionFee();\n+    QString questionString = tr(\"Are you sure you want to send?\");\n+    questionString.append(\"<br /><br />%1\");\n+\n+    if(txFee > 0)\n+    {\n+        // append fee string if a fee is required\n+        questionString.append(\"<hr /><span style='color:#aa0000;'>\");\n+        questionString.append(BitcoinUnits::formatWithUnit(model->getOptionsModel()->getDisplayUnit(), txFee));\n+        questionString.append(\"</span> \");\n+        questionString.append(tr(\"added as transaction fee\"));\n+    }\n+    if(txFee > 0 || recipients.count() > 1)\n+    {\n+        // add total amount string if there are more then one recipients or a fee is required\n+        questionString.append(\"<hr />\");\n+        questionString.append(tr(\"Total Amount %1\").arg(BitcoinUnits::formatWithUnit(model->getOptionsModel()->getDisplayUnit(), currentTransaction.getTotalTransactionAmount()+txFee)));\n+    }\n+\n+    QMessageBox::StandardButton retval = QMessageBox::question(this, tr(\"Confirm send coins\"),\n+        questionString.arg(formatted.join(\"<br />\")),\n+        QMessageBox::Yes|QMessageBox::Cancel,\n+        QMessageBox::Cancel);\n+\n+    if(retval != QMessageBox::Yes)\n+    {\n+        fNewRecipientAllowed = true;\n+        return;\n+    }\n+\n+    // now send the prepared transaction\n+    WalletModel::SendCoinsReturn sendstatus = model->sendCoins(currentTransaction);\n+    switch(sendstatus.status)\n+    {\n     case WalletModel::TransactionCommitFailed:\n         QMessageBox::warning(this, tr(\"Send Coins\"),\n             tr(\"Error: The transaction was rejected. This might happen if some of the coins in your wallet were already spent, such as if you used a copy of wallet.dat and coins were spent in the copy but not marked as spent here.\"),\n@@ -173,6 +220,8 @@ void SendCoinsDialog::on_sendButton_clicked()\n     case WalletModel::OK:\n         accept();\n         break;\n+    default:\n+        break;\n     }\n     fNewRecipientAllowed = true;\n }"
      },
      {
        "sha": "f4bffedc9ba5d112e86e0ba149b8f6447c15b8cd",
        "filename": "src/qt/sendcoinsdialog.h",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/9e8904f6aeb6e98b4781fcf408b0a2bee550051d/src/qt/sendcoinsdialog.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/9e8904f6aeb6e98b4781fcf408b0a2bee550051d/src/qt/sendcoinsdialog.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/sendcoinsdialog.h?ref=9e8904f6aeb6e98b4781fcf408b0a2bee550051d",
        "patch": "@@ -10,6 +10,7 @@ namespace Ui {\n class WalletModel;\n class SendCoinsEntry;\n class SendCoinsRecipient;\n+class OptionsModel;\n \n QT_BEGIN_NAMESPACE\n class QUrl;"
      },
      {
        "sha": "cdc7ae3874c10a885875ba1c963bb61209cf4009",
        "filename": "src/qt/walletmodel.cpp",
        "status": "modified",
        "additions": 35,
        "deletions": 24,
        "changes": 59,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/9e8904f6aeb6e98b4781fcf408b0a2bee550051d/src/qt/walletmodel.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/9e8904f6aeb6e98b4781fcf408b0a2bee550051d/src/qt/walletmodel.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/walletmodel.cpp?ref=9e8904f6aeb6e98b4781fcf408b0a2bee550051d",
        "patch": "@@ -5,7 +5,6 @@\n #include \"transactiontablemodel.h\"\n \n #include \"ui_interface.h\"\n-#include \"wallet.h\"\n #include \"walletdb.h\" // for BackupWallet\n #include \"base58.h\"\n \n@@ -124,11 +123,11 @@ bool WalletModel::validateAddress(const QString &address)\n     return addressParsed.IsValid();\n }\n \n-WalletModel::SendCoinsReturn WalletModel::sendCoins(const QList<SendCoinsRecipient> &recipients)\n+WalletModel::SendCoinsReturn WalletModel::prepareTransaction(WalletModelTransaction &transaction)\n {\n     qint64 total = 0;\n+    QList<SendCoinsRecipient> recipients = transaction.getRecipients();\n     std::vector<std::pair<CScript, int64> > vecSend;\n-    QByteArray transaction;\n \n     if(recipients.empty())\n     {\n@@ -192,58 +191,70 @@ WalletModel::SendCoinsReturn WalletModel::sendCoins(const QList<SendCoinsRecipie\n \n     if((total + nTransactionFee) > getBalance())\n     {\n-        return SendCoinsReturn(AmountWithFeeExceedsBalance, nTransactionFee);\n+        transaction.setTransactionFee(nTransactionFee);\n+        return SendCoinsReturn(AmountWithFeeExceedsBalance);\n     }\n \n     {\n         LOCK2(cs_main, wallet->cs_wallet);\n \n-        CReserveKey keyChange(wallet);\n+        transaction.newPossibleKeyChange(wallet);\n         int64 nFeeRequired = 0;\n         std::string strFailReason;\n-        CWalletTx wtx;\n-        bool fCreated = wallet->CreateTransaction(vecSend, wtx, keyChange, nFeeRequired, strFailReason);\n+\n+        CWalletTx *newTx = transaction.getTransaction();\n+        CReserveKey *keyChange = transaction.getPossibleKeyChange();\n+        bool fCreated = wallet->CreateTransaction(vecSend, *newTx, *keyChange, nFeeRequired, strFailReason);\n+        transaction.setTransactionFee(nFeeRequired);\n \n         if(!fCreated)\n         {\n             if((total + nFeeRequired) > wallet->GetBalance())\n             {\n-                return SendCoinsReturn(AmountWithFeeExceedsBalance, nFeeRequired);\n+                return SendCoinsReturn(AmountWithFeeExceedsBalance);\n             }\n             emit message(tr(\"Send Coins\"), QString::fromStdString(strFailReason),\n                          CClientUIInterface::MSG_ERROR);\n             return TransactionCreationFailed;\n         }\n+    }\n+\n+    return SendCoinsReturn(OK);\n+}\n+\n+WalletModel::SendCoinsReturn WalletModel::sendCoins(WalletModelTransaction &transaction)\n+{\n+    QByteArray transaction_array; /* store serialized transaction */\n+\n+    {\n+        LOCK2(cs_main, wallet->cs_wallet);\n+        CWalletTx *newTx = transaction.getTransaction();\n+\n         // Store PaymentRequests in wtx.vOrderForm in wallet.\n-        foreach(const SendCoinsRecipient &rcp, recipients)\n+        foreach(const SendCoinsRecipient &rcp, transaction.getRecipients())\n         {\n             if (rcp.paymentRequest.IsInitialized())\n             {\n                 std::string key(\"PaymentRequest\");\n                 std::string value;\n                 rcp.paymentRequest.SerializeToString(&value);\n-                wtx.vOrderForm.push_back(make_pair(key, value));\n+                newTx->vOrderForm.push_back(make_pair(key, value));\n             }\n-        }        \n-\n-        if(!uiInterface.ThreadSafeAskFee(nFeeRequired))\n-        {\n-            return Aborted;\n         }\n-        if(!wallet->CommitTransaction(wtx, keyChange))\n-        {\n+\n+        CReserveKey *keyChange = transaction.getPossibleKeyChange();\n+        if(!wallet->CommitTransaction(*newTx, *keyChange))\n             return TransactionCommitFailed;\n-        }\n \n-        CTransaction* t = (CTransaction*)&wtx;\n+        CTransaction* t = (CTransaction*)newTx;\n         CDataStream ssTx(SER_NETWORK, PROTOCOL_VERSION);\n         ssTx << *t;\n-        transaction.append(&(ssTx[0]), ssTx.size());\n+        transaction_array.append(&(ssTx[0]), ssTx.size());\n     }\n \n     // Add addresses / update labels that we've sent to to the address book,\n-    // and emit coinsSent signal\n-    foreach(const SendCoinsRecipient &rcp, recipients)\n+    // and emit coinsSent signal for each recipient\n+    foreach(const SendCoinsRecipient &rcp, transaction.getRecipients())\n     {\n         std::string strAddress = rcp.address.toStdString();\n         CTxDestination dest = CBitcoinAddress(strAddress).Get();\n@@ -263,10 +274,10 @@ WalletModel::SendCoinsReturn WalletModel::sendCoins(const QList<SendCoinsRecipie\n                 wallet->SetAddressBook(dest, strLabel, \"\"); // \"\" means don't change purpose\n             }\n         }\n-        emit coinsSent(wallet, rcp, transaction);\n+        emit coinsSent(wallet, rcp, transaction_array);\n     }\n \n-    return SendCoinsReturn(OK, 0);\n+    return SendCoinsReturn(OK);\n }\n \n OptionsModel *WalletModel::getOptionsModel()"
      },
      {
        "sha": "f8eee45249c534da1dac4813e08e2357664eb8d0",
        "filename": "src/qt/walletmodel.h",
        "status": "modified",
        "additions": 9,
        "deletions": 5,
        "changes": 14,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/9e8904f6aeb6e98b4781fcf408b0a2bee550051d/src/qt/walletmodel.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/9e8904f6aeb6e98b4781fcf408b0a2bee550051d/src/qt/walletmodel.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/walletmodel.h?ref=9e8904f6aeb6e98b4781fcf408b0a2bee550051d",
        "patch": "@@ -4,12 +4,15 @@\n #include <QObject>\n \n #include \"allocators.h\" /* for SecureString */\n+#include \"wallet.h\"\n+#include \"walletmodeltransaction.h\"\n #include \"paymentrequestplus.h\"\n \n class OptionsModel;\n class AddressTableModel;\n class TransactionTableModel;\n class CWallet;\n+class WalletModelTransaction;\n \n QT_BEGIN_NAMESPACE\n class QTimer;\n@@ -74,15 +77,16 @@ class WalletModel : public QObject\n     // Return status record for SendCoins, contains error id + information\n     struct SendCoinsReturn\n     {\n-        SendCoinsReturn(StatusCode status,\n-                        qint64 fee=0):\n-            status(status), fee(fee) {}\n+        SendCoinsReturn(StatusCode status):\n+            status(status) {}\n         StatusCode status;\n-        qint64 fee; // is used in case status is \"AmountWithFeeExceedsBalance\"\n     };\n \n+    // prepare transaction for getting txfee before sending coins\n+    SendCoinsReturn prepareTransaction(WalletModelTransaction &transaction);\n+\n     // Send coins to a list of recipients\n-    SendCoinsReturn sendCoins(const QList<SendCoinsRecipient> &recipients);\n+    SendCoinsReturn sendCoins(WalletModelTransaction &transaction);\n \n     // Wallet encryption\n     bool setWalletEncrypted(bool encrypted, const SecureString &passphrase);"
      },
      {
        "sha": "96fc3edbb21cf20fde07275a8d0d574de058db7e",
        "filename": "src/qt/walletmodeltransaction.cpp",
        "status": "added",
        "additions": 56,
        "deletions": 0,
        "changes": 56,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/9e8904f6aeb6e98b4781fcf408b0a2bee550051d/src/qt/walletmodeltransaction.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/9e8904f6aeb6e98b4781fcf408b0a2bee550051d/src/qt/walletmodeltransaction.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/walletmodeltransaction.cpp?ref=9e8904f6aeb6e98b4781fcf408b0a2bee550051d",
        "patch": "@@ -0,0 +1,56 @@\n+#include \"walletmodeltransaction.h\"\n+\n+WalletModelTransaction::WalletModelTransaction(const QList<SendCoinsRecipient> &recipients) :\n+    recipients(recipients),\n+    walletTransaction(0),\n+    keyChange(0),\n+    fee(0)\n+{\n+    walletTransaction = new CWalletTx();\n+}\n+\n+WalletModelTransaction::~WalletModelTransaction()\n+{\n+    delete keyChange;\n+    delete walletTransaction;\n+}\n+\n+QList<SendCoinsRecipient> WalletModelTransaction::getRecipients()\n+{\n+    return recipients;\n+}\n+\n+CWalletTx *WalletModelTransaction::getTransaction()\n+{\n+    return walletTransaction;\n+}\n+\n+qint64 WalletModelTransaction::getTransactionFee()\n+{\n+    return fee;\n+}\n+\n+void WalletModelTransaction::setTransactionFee(qint64 newFee)\n+{\n+    fee=newFee;\n+}\n+\n+qint64 WalletModelTransaction::getTotalTransactionAmount()\n+{\n+    qint64 totalTransactionAmount = 0;\n+    foreach(const SendCoinsRecipient &rcp, recipients)\n+    {\n+        totalTransactionAmount+=rcp.amount;\n+    }\n+    return totalTransactionAmount;\n+}\n+\n+void WalletModelTransaction::newPossibleKeyChange(CWallet *wallet)\n+{\n+    keyChange = new CReserveKey(wallet);\n+}\n+\n+CReserveKey *WalletModelTransaction::getPossibleKeyChange()\n+{\n+    return keyChange;\n+}"
      },
      {
        "sha": "c4848fb12df0e1367c7ee8b29bdec97c1219ef19",
        "filename": "src/qt/walletmodeltransaction.h",
        "status": "added",
        "additions": 37,
        "deletions": 0,
        "changes": 37,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/9e8904f6aeb6e98b4781fcf408b0a2bee550051d/src/qt/walletmodeltransaction.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/9e8904f6aeb6e98b4781fcf408b0a2bee550051d/src/qt/walletmodeltransaction.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/walletmodeltransaction.h?ref=9e8904f6aeb6e98b4781fcf408b0a2bee550051d",
        "patch": "@@ -0,0 +1,37 @@\n+#ifndef WALLETMODELTRANSACTION_H\n+#define WALLETMODELTRANSACTION_H\n+\n+#include \"walletmodel.h\"\n+\n+class SendCoinsRecipient;\n+\n+/** Data model for a walletmodel transaction. */\n+class WalletModelTransaction\n+{\n+public:\n+    explicit WalletModelTransaction(const QList<SendCoinsRecipient> &recipients);\n+    ~WalletModelTransaction();\n+\n+    QList<SendCoinsRecipient> getRecipients();\n+\n+    CWalletTx *getTransaction();\n+\n+    void setTransactionFee(qint64 newFee);\n+    qint64 getTransactionFee();\n+\n+    qint64 getTotalTransactionAmount();\n+\n+    void newPossibleKeyChange(CWallet *wallet);\n+    CReserveKey *getPossibleKeyChange();\n+\n+private:\n+    const QList<SendCoinsRecipient> recipients;\n+    CWalletTx *walletTransaction;\n+    CReserveKey *keyChange;\n+    qint64 fee;\n+\n+public slots:\n+\n+};\n+\n+#endif // WALLETMODELTRANSACTION_H"
      }
    ]
  }
]