[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/627622428",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18961#issuecomment-627622428",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18961",
    "id": 627622428,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyNzYyMjQyOA==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-12T22:02:48Z",
    "updated_at": "2020-05-12T22:02:48Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #18948 (qt: Do not call setParent() for WalletModel instances by hebasto)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/627622428/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/424090127",
    "pull_request_review_id": 410491229,
    "id": 424090127,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA5MDEyNw==",
    "diff_hunk": "@@ -137,11 +135,24 @@ WalletModel* WalletController::getOrCreateWallet(std::unique_ptr<interfaces::Wal\n     connect(wallet_model, &WalletModel::coinsSent, this, &WalletController::coinsSent);\n \n     // Notify walletAdded signal on the GUI thread.\n-    Q_EMIT walletAdded(wallet_model);\n-\n+    if (QThread::currentThread() == thread()) {\n+        addWallet(wallet_model);\n+    } else {\n+        // Handler callback runs in a different thread so fix wallet model thread affinity.\n+        wallet_model->moveToThread(thread());\n+        bool invoked = QMetaObject::invokeMethod(this, \"addWallet\", Qt::QueuedConnection, Q_ARG(WalletModel*, wallet_model));",
    "path": "src/qt/walletcontroller.cpp",
    "position": 22,
    "original_position": 22,
    "commit_id": "6dc30947fceefbd58d16e5aaf274eac41c0158d6",
    "original_commit_id": "970e2ffa647911b22cf8e6bc96a554264a4e23f9",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I was going to suggest to use `Qt::BlockingQueuedConnection` instead, so that the caller gets the wallet model with the parent already set.",
    "created_at": "2020-05-12T23:27:19Z",
    "updated_at": "2020-05-15T17:36:18Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18961#discussion_r424090127",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18961",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/424090127"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18961#discussion_r424090127"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18961"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/424090127/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 143,
    "original_line": 143,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/424090521",
    "pull_request_review_id": 410491229,
    "id": 424090521,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA5MDUyMQ==",
    "diff_hunk": "@@ -108,9 +108,7 @@ WalletModel* WalletController::getOrCreateWallet(std::unique_ptr<interfaces::Wal\n \n     // Instantiate model and register it.\n     WalletModel* wallet_model = new WalletModel(std::move(wallet), m_client_model, m_platform_style, nullptr);\n-    // Handler callback runs in a different thread so fix wallet model thread affinity.\n-    wallet_model->moveToThread(thread());\n-    wallet_model->setParent(this);\n+",
    "path": "src/qt/walletcontroller.cpp",
    "position": 7,
    "original_position": 7,
    "commit_id": "6dc30947fceefbd58d16e5aaf274eac41c0158d6",
    "original_commit_id": "970e2ffa647911b22cf8e6bc96a554264a4e23f9",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "nit, remove (IMO).",
    "created_at": "2020-05-12T23:28:32Z",
    "updated_at": "2020-05-15T17:36:18Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18961#discussion_r424090521",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18961",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/424090521"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18961#discussion_r424090521"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18961"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/424090521/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 111,
    "original_line": 111,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/424091779",
    "pull_request_review_id": 410491229,
    "id": 424091779,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA5MTc3OQ==",
    "diff_hunk": "@@ -137,11 +135,24 @@ WalletModel* WalletController::getOrCreateWallet(std::unique_ptr<interfaces::Wal\n     connect(wallet_model, &WalletModel::coinsSent, this, &WalletController::coinsSent);\n \n     // Notify walletAdded signal on the GUI thread.\n-    Q_EMIT walletAdded(wallet_model);\n-\n+    if (QThread::currentThread() == thread()) {\n+        addWallet(wallet_model);\n+    } else {\n+        // Handler callback runs in a different thread so fix wallet model thread affinity.\n+        wallet_model->moveToThread(thread());\n+        bool invoked = QMetaObject::invokeMethod(this, \"addWallet\", Qt::QueuedConnection, Q_ARG(WalletModel*, wallet_model));\n+        assert(invoked);\n+    }\n     return wallet_model;\n }\n \n+void WalletController::addWallet(WalletModel* wallet_model)\n+{\n+    // Take ownership of the wallet model and register it.",
    "path": "src/qt/walletcontroller.cpp",
    "position": 30,
    "original_position": 30,
    "commit_id": "6dc30947fceefbd58d16e5aaf274eac41c0158d6",
    "original_commit_id": "970e2ffa647911b22cf8e6bc96a554264a4e23f9",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "s/register/notify?",
    "created_at": "2020-05-12T23:32:32Z",
    "updated_at": "2020-05-15T17:36:18Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18961#discussion_r424091779",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18961",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/424091779"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18961#discussion_r424091779"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18961"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/424091779/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 151,
    "original_line": 151,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/424191089",
    "pull_request_review_id": 410609946,
    "id": 424191089,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDE5MTA4OQ==",
    "diff_hunk": "@@ -137,11 +135,24 @@ WalletModel* WalletController::getOrCreateWallet(std::unique_ptr<interfaces::Wal\n     connect(wallet_model, &WalletModel::coinsSent, this, &WalletController::coinsSent);\n \n     // Notify walletAdded signal on the GUI thread.\n-    Q_EMIT walletAdded(wallet_model);\n-\n+    if (QThread::currentThread() == thread()) {\n+        addWallet(wallet_model);\n+    } else {\n+        // Handler callback runs in a different thread so fix wallet model thread affinity.\n+        wallet_model->moveToThread(thread());\n+        bool invoked = QMetaObject::invokeMethod(this, \"addWallet\", Qt::QueuedConnection, Q_ARG(WalletModel*, wallet_model));\n+        assert(invoked);\n+    }\n     return wallet_model;\n }\n \n+void WalletController::addWallet(WalletModel* wallet_model)\n+{\n+    // Take ownership of the wallet model and register it.",
    "path": "src/qt/walletcontroller.cpp",
    "position": 30,
    "original_position": 30,
    "commit_id": "6dc30947fceefbd58d16e5aaf274eac41c0158d6",
    "original_commit_id": "970e2ffa647911b22cf8e6bc96a554264a4e23f9",
    "user": {
      "login": "tarboss",
      "id": 30550163,
      "node_id": "MDQ6VXNlcjMwNTUwMTYz",
      "avatar_url": "https://avatars.githubusercontent.com/u/30550163?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tarboss",
      "html_url": "https://github.com/tarboss",
      "followers_url": "https://api.github.com/users/tarboss/followers",
      "following_url": "https://api.github.com/users/tarboss/following{/other_user}",
      "gists_url": "https://api.github.com/users/tarboss/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tarboss/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tarboss/subscriptions",
      "organizations_url": "https://api.github.com/users/tarboss/orgs",
      "repos_url": "https://api.github.com/users/tarboss/repos",
      "events_url": "https://api.github.com/users/tarboss/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tarboss/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "comment must be updated,too (setparent & emit to update gui), ownership already done in if-clause and register was in  m_wallets.push_back(wallet_model) - if u change more in walletcontroller.cpp, u should change it.",
    "created_at": "2020-05-13T06:03:20Z",
    "updated_at": "2020-05-15T17:36:18Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18961#discussion_r424191089",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18961",
    "author_association": "NONE",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/424191089"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18961#discussion_r424191089"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18961"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/424191089/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 151,
    "original_line": 151,
    "side": "RIGHT",
    "in_reply_to_id": 424091779
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/424692694",
    "pull_request_review_id": 411250211,
    "id": 424692694,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDY5MjY5NA==",
    "diff_hunk": "@@ -137,11 +135,24 @@ WalletModel* WalletController::getOrCreateWallet(std::unique_ptr<interfaces::Wal\n     connect(wallet_model, &WalletModel::coinsSent, this, &WalletController::coinsSent);\n \n     // Notify walletAdded signal on the GUI thread.\n-    Q_EMIT walletAdded(wallet_model);\n-\n+    if (QThread::currentThread() == thread()) {\n+        addWallet(wallet_model);\n+    } else {\n+        // Handler callback runs in a different thread so fix wallet model thread affinity.\n+        wallet_model->moveToThread(thread());\n+        bool invoked = QMetaObject::invokeMethod(this, \"addWallet\", Qt::QueuedConnection, Q_ARG(WalletModel*, wallet_model));",
    "path": "src/qt/walletcontroller.cpp",
    "position": 22,
    "original_position": 22,
    "commit_id": "6dc30947fceefbd58d16e5aaf274eac41c0158d6",
    "original_commit_id": "970e2ffa647911b22cf8e6bc96a554264a4e23f9",
    "user": {
      "login": "tarboss",
      "id": 30550163,
      "node_id": "MDQ6VXNlcjMwNTUwMTYz",
      "avatar_url": "https://avatars.githubusercontent.com/u/30550163?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tarboss",
      "html_url": "https://github.com/tarboss",
      "followers_url": "https://api.github.com/users/tarboss/followers",
      "following_url": "https://api.github.com/users/tarboss/following{/other_user}",
      "gists_url": "https://api.github.com/users/tarboss/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tarboss/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tarboss/subscriptions",
      "organizations_url": "https://api.github.com/users/tarboss/orgs",
      "repos_url": "https://api.github.com/users/tarboss/repos",
      "events_url": "https://api.github.com/users/tarboss/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tarboss/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "i think - it stucks on windows if u do Blocking. Need to check more, but not today.",
    "created_at": "2020-05-13T19:52:48Z",
    "updated_at": "2020-05-15T17:36:18Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18961#discussion_r424692694",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18961",
    "author_association": "NONE",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/424692694"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18961#discussion_r424692694"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18961"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/424692694/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 143,
    "original_line": 143,
    "side": "RIGHT",
    "in_reply_to_id": 424090127
  }
]