gmaxwell,2012-05-17T23:10:08Z,I haven't had a chance to review this yetâ€”  though I see you are using GetNumBlocksOfPeers()...\n\nIt's perfectly possible for nodes to send insane values for the heights and some have done so. It should be treated as untrustworthy.  This function is currently only used in the GUI... and I think it should probably stay there.  At the very least every caller needs to give consideration to the possi,https://github.com/bitcoin/bitcoin/pull/1326#issuecomment-5776458,5776458,
rebroad,2012-05-18T08:18:47Z,"I've closed this pull for now, as it was opened for comments, but it's not ready to pull. It still needs: 1) stuck management, and 2a) either a separate AskFor function for txs and blocks, as as it's currently written, it'll getdata the same tx from many nodes at the same time, or 2b) the same treatment of txs, i.e. don't download the same tx from another peer.\n\n2b isn't so ideal as it will prod",https://github.com/bitcoin/bitcoin/pull/1326#issuecomment-5781630,5781630,
rebroad,2012-05-29T13:41:20Z,"https://github.com/rebroad/bitcoin/commit/f11b01d6c3f0c8eeeca06ba210af08a51887acbc is an update of this pull request, and for some reason has ""detached"" from this pull request, so I'll have to raise another for this commit once I've done enough testing....\n",https://github.com/bitcoin/bitcoin/pull/1326#issuecomment-5983705,5983705,
Diapolo,2012-05-17T15:25:09Z,That should not be here I guess.\n,https://github.com/bitcoin/bitcoin/pull/1326#discussion_r838976,838976,.gitignore
rebroad,2012-05-17T15:28:13Z,"If i don't add this line, git complains. How do you manage without git wanting this directory added or ignored?\n",https://github.com/bitcoin/bitcoin/pull/1326#discussion_r839004,839004,.gitignore
Diapolo,2012-05-17T15:29:06Z,"You could use just: <pre>return (nBestHeight >= GetNumBlocksOfPeers());</pre> or even just use <pre>(nBestHeight >= GetNumBlocksOfPeers())</pre> directly, as you currently use CaughtUp() only once.\n",https://github.com/bitcoin/bitcoin/pull/1326#discussion_r839013,839013,src/main.cpp
rebroad,2012-05-17T15:31:35Z,"True, this is done because CaughtUp is used extensively in other branches/pull requests and doing this at this stage i think helps things to merge easier.\n",https://github.com/bitcoin/bitcoin/pull/1326#discussion_r839027,839027,src/main.cpp
Diapolo,2012-05-17T15:36:20Z,What use has this line?\n,https://github.com/bitcoin/bitcoin/pull/1326#discussion_r839048,839048,src/main.cpp
Diapolo,2012-05-17T15:37:43Z,"OK, but you could at least remove the variable I guess.\n",https://github.com/bitcoin/bitcoin/pull/1326#discussion_r839055,839055,src/main.cpp
Diapolo,2012-05-17T15:38:45Z,"Sorry, I'm no GIT master :-/. But I never had a pull or commit, where I needed to include .gitignore.\n",https://github.com/bitcoin/bitcoin/pull/1326#discussion_r839063,839063,.gitignore
rebroad,2012-05-17T15:39:23Z,"It's needed since the AskForBlocks code is now outside the code for the version message. It runs immediatelly after it, so for all the elses to work this line is needed, otherwise the unknown command section is executed.\n",https://github.com/bitcoin/bitcoin/pull/1326#discussion_r839068,839068,src/main.cpp
rebroad,2012-05-17T15:40:55Z,"Strangely, i can't add .gitignore to .gitignore. It ignores that line! \n",https://github.com/bitcoin/bitcoin/pull/1326#discussion_r839081,839081,.gitignore
Diapolo,2012-05-17T15:41:00Z,But in the end this pull is not mergable like it is?\n,https://github.com/bitcoin/bitcoin/pull/1326#discussion_r839082,839082,src/main.cpp
rebroad,2012-05-17T15:42:51Z,"It'r rebased to upstream master, so it should be. Why do you think it isn't?\n",https://github.com/bitcoin/bitcoin/pull/1326#discussion_r839091,839091,src/main.cpp
rebroad,2012-05-17T15:44:47Z,I'd say it's not ready to pull until i add the code to check for stuck block downloads. I wasn't sure if a pull request was the correct way to go about soliciting comments or if there was a better way. Stuck code has been written and tested for about a month but not combined with this code yet.\n,https://github.com/bitcoin/bitcoin/pull/1326#discussion_r839100,839100,src/main.cpp
Diapolo,2012-05-17T15:47:09Z,"I missread this file and had the impression the code for == ""version"" was moved or removed ... I was wrong, sorry :).\n",https://github.com/bitcoin/bitcoin/pull/1326#discussion_r839107,839107,src/main.cpp
Diapolo,2012-05-17T15:48:29Z,May I suggest when answering from a mobile don't quote the inital message :D. This makes things unreadable here.\n,https://github.com/bitcoin/bitcoin/pull/1326#discussion_r839115,839115,src/main.cpp
rebroad,2012-05-17T16:20:13Z,ah... I didn't realise it was doing that!  Thanks for pointing that out :)\n,https://github.com/bitcoin/bitcoin/pull/1326#discussion_r839314,839314,src/main.cpp
rebroad,2012-05-17T16:30:02Z,ah. I see what you mean now. fixed. thanks.\n,https://github.com/bitcoin/bitcoin/pull/1326#discussion_r839388,839388,src/main.cpp
