[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/5776458",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/1326#issuecomment-5776458",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/1326",
    "id": 5776458,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3NzY0NTg=",
    "user": {
      "login": "gmaxwell",
      "id": 858454,
      "node_id": "MDQ6VXNlcjg1ODQ1NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/858454?u=63e5c438c242094837a9deeda775d77988b508bf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gmaxwell",
      "html_url": "https://github.com/gmaxwell",
      "followers_url": "https://api.github.com/users/gmaxwell/followers",
      "following_url": "https://api.github.com/users/gmaxwell/following{/other_user}",
      "gists_url": "https://api.github.com/users/gmaxwell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
      "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
      "repos_url": "https://api.github.com/users/gmaxwell/repos",
      "events_url": "https://api.github.com/users/gmaxwell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-05-17T23:10:08Z",
    "updated_at": "2012-05-17T23:10:08Z",
    "author_association": "CONTRIBUTOR",
    "body": "I haven't had a chance to review this yet\u2014  though I see you are using GetNumBlocksOfPeers()...\n\nIt's perfectly possible for nodes to send insane values for the heights and some have done so. It should be treated as untrustworthy.  This function is currently only used in the GUI... and I think it should probably stay there.  At the very least every caller needs to give consideration to the possibility that a majority of your peers may be malicious and may give values chosen to make your day maximally bad.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/5776458/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/5781630",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/1326#issuecomment-5781630",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/1326",
    "id": 5781630,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU3ODE2MzA=",
    "user": {
      "login": "rebroad",
      "id": 1530283,
      "node_id": "MDQ6VXNlcjE1MzAyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1530283?u=6a4a31aaddbc438e053c52d084a698a5f622f1ea&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rebroad",
      "html_url": "https://github.com/rebroad",
      "followers_url": "https://api.github.com/users/rebroad/followers",
      "following_url": "https://api.github.com/users/rebroad/following{/other_user}",
      "gists_url": "https://api.github.com/users/rebroad/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rebroad/subscriptions",
      "organizations_url": "https://api.github.com/users/rebroad/orgs",
      "repos_url": "https://api.github.com/users/rebroad/repos",
      "events_url": "https://api.github.com/users/rebroad/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rebroad/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-05-18T08:18:47Z",
    "updated_at": "2012-05-18T08:20:03Z",
    "author_association": "CONTRIBUTOR",
    "body": "I've closed this pull for now, as it was opened for comments, but it's not ready to pull. It still needs: 1) stuck management, and 2a) either a separate AskFor function for txs and blocks, as as it's currently written, it'll getdata the same tx from many nodes at the same time, or 2b) the same treatment of txs, i.e. don't download the same tx from another peer.\n\n2b isn't so ideal as it will produce more getdatas as with the way it's written, it'll only have 1 inv per every getdata. This is ok for blocks (IMHO), but perhaps not so suitable for txs, so I'd be inclined to go with 2a rather than 2b.\n\nFeedback much appreciated.\n\n@gmaxwell, re your last comment, no worries, it's not finished anyway, so perhaps it's better to wait until I've completed bits 1 and 2a first - although your comments on whether 2a or 2b or 3c (something else) are suitable would be welcome.\n\nRe CaughtUp() not being reliable. Well, true, but if one is connected to misbehaving peers such as this, then one'd (!) probably not want to be downloading from them anyway. The reason I created CaughtUp() is so that it can be refined to be more reliable. It serves a different purpose to IsInitialDownload() from what I've been told by others that that function is for. I do think CaughtUp(), based on your comments above, does need refining given the risk you mention. Perhaps it can factor in the timestamp of the last block received also as a sanity check.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/5781630/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/5983705",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/1326#issuecomment-5983705",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/1326",
    "id": 5983705,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5ODM3MDU=",
    "user": {
      "login": "rebroad",
      "id": 1530283,
      "node_id": "MDQ6VXNlcjE1MzAyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1530283?u=6a4a31aaddbc438e053c52d084a698a5f622f1ea&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rebroad",
      "html_url": "https://github.com/rebroad",
      "followers_url": "https://api.github.com/users/rebroad/followers",
      "following_url": "https://api.github.com/users/rebroad/following{/other_user}",
      "gists_url": "https://api.github.com/users/rebroad/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rebroad/subscriptions",
      "organizations_url": "https://api.github.com/users/rebroad/orgs",
      "repos_url": "https://api.github.com/users/rebroad/repos",
      "events_url": "https://api.github.com/users/rebroad/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rebroad/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-05-29T13:41:20Z",
    "updated_at": "2012-05-29T13:41:20Z",
    "author_association": "CONTRIBUTOR",
    "body": "https://github.com/rebroad/bitcoin/commit/f11b01d6c3f0c8eeeca06ba210af08a51887acbc is an update of this pull request, and for some reason has \"detached\" from this pull request, so I'll have to raise another for this commit once I've done enough testing....\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/5983705/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/838976",
    "pull_request_review_id": null,
    "id": 838976,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDgzODk3Ng==",
    "diff_hunk": "@@ -20,3 +20,4 @@ qrc_*.cpp\n *.pro.user\n #mac specific\n .DS_Store\n+build/",
    "path": ".gitignore",
    "position": 4,
    "original_position": 4,
    "commit_id": "ea3271b7dd0173e004eba8e39240f10d2b2e1d70",
    "original_commit_id": "cf79c8a9e8fef1413cfe74e5b13c4bf5125571f7",
    "user": {
      "login": "Diapolo",
      "id": 1419649,
      "node_id": "MDQ6VXNlcjE0MTk2NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1419649?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Diapolo",
      "html_url": "https://github.com/Diapolo",
      "followers_url": "https://api.github.com/users/Diapolo/followers",
      "following_url": "https://api.github.com/users/Diapolo/following{/other_user}",
      "gists_url": "https://api.github.com/users/Diapolo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Diapolo/subscriptions",
      "organizations_url": "https://api.github.com/users/Diapolo/orgs",
      "repos_url": "https://api.github.com/users/Diapolo/repos",
      "events_url": "https://api.github.com/users/Diapolo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Diapolo/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "That should not be here I guess.\n",
    "created_at": "2012-05-17T15:25:09Z",
    "updated_at": "2012-05-17T16:29:44Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/1326#discussion_r838976",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/1326",
    "author_association": "NONE",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/838976"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/1326#discussion_r838976"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/1326"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/838976/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 23,
    "original_line": 23,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/839004",
    "pull_request_review_id": null,
    "id": 839004,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDgzOTAwNA==",
    "diff_hunk": "@@ -20,3 +20,4 @@ qrc_*.cpp\n *.pro.user\n #mac specific\n .DS_Store\n+build/",
    "path": ".gitignore",
    "position": 4,
    "original_position": 4,
    "commit_id": "ea3271b7dd0173e004eba8e39240f10d2b2e1d70",
    "original_commit_id": "cf79c8a9e8fef1413cfe74e5b13c4bf5125571f7",
    "user": {
      "login": "rebroad",
      "id": 1530283,
      "node_id": "MDQ6VXNlcjE1MzAyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1530283?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rebroad",
      "html_url": "https://github.com/rebroad",
      "followers_url": "https://api.github.com/users/rebroad/followers",
      "following_url": "https://api.github.com/users/rebroad/following{/other_user}",
      "gists_url": "https://api.github.com/users/rebroad/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rebroad/subscriptions",
      "organizations_url": "https://api.github.com/users/rebroad/orgs",
      "repos_url": "https://api.github.com/users/rebroad/repos",
      "events_url": "https://api.github.com/users/rebroad/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rebroad/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "If i don't add this line, git complains. How do you manage without git wanting this directory added or ignored?\n",
    "created_at": "2012-05-17T15:28:13Z",
    "updated_at": "2012-05-17T16:29:44Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/1326#discussion_r839004",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/1326",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/839004"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/1326#discussion_r839004"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/1326"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/839004/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 23,
    "original_line": 23,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/839013",
    "pull_request_review_id": null,
    "id": 839013,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDgzOTAxMw==",
    "diff_hunk": "@@ -925,6 +927,12 @@ int GetNumBlocksOfPeers()\n     return std::max(cPeerBlockCounts.median(), Checkpoints::GetTotalBlocksEstimate());\n }\n \n+bool CaughtUp()",
    "path": "src/main.cpp",
    "position": 13,
    "original_position": 13,
    "commit_id": "ea3271b7dd0173e004eba8e39240f10d2b2e1d70",
    "original_commit_id": "cf79c8a9e8fef1413cfe74e5b13c4bf5125571f7",
    "user": {
      "login": "Diapolo",
      "id": 1419649,
      "node_id": "MDQ6VXNlcjE0MTk2NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1419649?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Diapolo",
      "html_url": "https://github.com/Diapolo",
      "followers_url": "https://api.github.com/users/Diapolo/followers",
      "following_url": "https://api.github.com/users/Diapolo/following{/other_user}",
      "gists_url": "https://api.github.com/users/Diapolo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Diapolo/subscriptions",
      "organizations_url": "https://api.github.com/users/Diapolo/orgs",
      "repos_url": "https://api.github.com/users/Diapolo/repos",
      "events_url": "https://api.github.com/users/Diapolo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Diapolo/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "You could use just: <pre>return (nBestHeight >= GetNumBlocksOfPeers());</pre> or even just use <pre>(nBestHeight >= GetNumBlocksOfPeers())</pre> directly, as you currently use CaughtUp() only once.\n",
    "created_at": "2012-05-17T15:29:06Z",
    "updated_at": "2012-05-17T16:29:44Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/1326#discussion_r839013",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/1326",
    "author_association": "NONE",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/839013"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/1326#discussion_r839013"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/1326"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/839013/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 930,
    "original_line": 930,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/839027",
    "pull_request_review_id": null,
    "id": 839027,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDgzOTAyNw==",
    "diff_hunk": "@@ -925,6 +927,12 @@ int GetNumBlocksOfPeers()\n     return std::max(cPeerBlockCounts.median(), Checkpoints::GetTotalBlocksEstimate());\n }\n \n+bool CaughtUp()",
    "path": "src/main.cpp",
    "position": 13,
    "original_position": 13,
    "commit_id": "ea3271b7dd0173e004eba8e39240f10d2b2e1d70",
    "original_commit_id": "cf79c8a9e8fef1413cfe74e5b13c4bf5125571f7",
    "user": {
      "login": "rebroad",
      "id": 1530283,
      "node_id": "MDQ6VXNlcjE1MzAyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1530283?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rebroad",
      "html_url": "https://github.com/rebroad",
      "followers_url": "https://api.github.com/users/rebroad/followers",
      "following_url": "https://api.github.com/users/rebroad/following{/other_user}",
      "gists_url": "https://api.github.com/users/rebroad/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rebroad/subscriptions",
      "organizations_url": "https://api.github.com/users/rebroad/orgs",
      "repos_url": "https://api.github.com/users/rebroad/repos",
      "events_url": "https://api.github.com/users/rebroad/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rebroad/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "True, this is done because CaughtUp is used extensively in other branches/pull requests and doing this at this stage i think helps things to merge easier.\n",
    "created_at": "2012-05-17T15:31:35Z",
    "updated_at": "2012-05-17T16:29:44Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/1326#discussion_r839027",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/1326",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/839027"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/1326#discussion_r839027"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/1326"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/839027/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 930,
    "original_line": 930,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/839048",
    "pull_request_review_id": null,
    "id": 839048,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDgzOTA0OA==",
    "diff_hunk": "@@ -2396,6 +2393,21 @@ bool static ProcessMessage(CNode* pfrom, string strCommand, CDataStream& vRecv)\n     }\n \n \n+    // Ask a connected node for block updates\n+    if (!pfrom->fClient && !pfrom->fOneShot &&\n+        //(pfrom->nVersion < NOBLKS_VERSION_START ||\n+        // pfrom->nVersion >= NOBLKS_VERSION_END) &&\n+         nAskedForBlocks < 8 && !pfrom->fAskedForBlocks && !CaughtUp()) // TODO - tune\n+    {\n+        nAskedForBlocks++;\n+        pfrom->fAskedForBlocks = true;\n+        printf(\"initial getblocks to %s\\n\", pfrom->addr.ToString().c_str());\n+        pfrom->PushGetBlocks(pindexBest, uint256(0));\n+        NodeSummary();\n+    }\n+\n+\n+    if (strCommand == \"version\") ;",
    "path": "src/main.cpp",
    "position": 57,
    "original_position": 58,
    "commit_id": "ea3271b7dd0173e004eba8e39240f10d2b2e1d70",
    "original_commit_id": "cf79c8a9e8fef1413cfe74e5b13c4bf5125571f7",
    "user": {
      "login": "Diapolo",
      "id": 1419649,
      "node_id": "MDQ6VXNlcjE0MTk2NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1419649?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Diapolo",
      "html_url": "https://github.com/Diapolo",
      "followers_url": "https://api.github.com/users/Diapolo/followers",
      "following_url": "https://api.github.com/users/Diapolo/following{/other_user}",
      "gists_url": "https://api.github.com/users/Diapolo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Diapolo/subscriptions",
      "organizations_url": "https://api.github.com/users/Diapolo/orgs",
      "repos_url": "https://api.github.com/users/Diapolo/repos",
      "events_url": "https://api.github.com/users/Diapolo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Diapolo/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "What use has this line?\n",
    "created_at": "2012-05-17T15:36:20Z",
    "updated_at": "2012-05-17T16:29:44Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/1326#discussion_r839048",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/1326",
    "author_association": "NONE",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/839048"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/1326#discussion_r839048"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/1326"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/839048/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2409,
    "original_line": 2410,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/839055",
    "pull_request_review_id": null,
    "id": 839055,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDgzOTA1NQ==",
    "diff_hunk": "@@ -925,6 +927,12 @@ int GetNumBlocksOfPeers()\n     return std::max(cPeerBlockCounts.median(), Checkpoints::GetTotalBlocksEstimate());\n }\n \n+bool CaughtUp()",
    "path": "src/main.cpp",
    "position": 13,
    "original_position": 13,
    "commit_id": "ea3271b7dd0173e004eba8e39240f10d2b2e1d70",
    "original_commit_id": "cf79c8a9e8fef1413cfe74e5b13c4bf5125571f7",
    "user": {
      "login": "Diapolo",
      "id": 1419649,
      "node_id": "MDQ6VXNlcjE0MTk2NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1419649?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Diapolo",
      "html_url": "https://github.com/Diapolo",
      "followers_url": "https://api.github.com/users/Diapolo/followers",
      "following_url": "https://api.github.com/users/Diapolo/following{/other_user}",
      "gists_url": "https://api.github.com/users/Diapolo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Diapolo/subscriptions",
      "organizations_url": "https://api.github.com/users/Diapolo/orgs",
      "repos_url": "https://api.github.com/users/Diapolo/repos",
      "events_url": "https://api.github.com/users/Diapolo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Diapolo/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "OK, but you could at least remove the variable I guess.\n",
    "created_at": "2012-05-17T15:37:43Z",
    "updated_at": "2012-05-17T16:29:44Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/1326#discussion_r839055",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/1326",
    "author_association": "NONE",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/839055"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/1326#discussion_r839055"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/1326"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/839055/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 930,
    "original_line": 930,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/839063",
    "pull_request_review_id": null,
    "id": 839063,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDgzOTA2Mw==",
    "diff_hunk": "@@ -20,3 +20,4 @@ qrc_*.cpp\n *.pro.user\n #mac specific\n .DS_Store\n+build/",
    "path": ".gitignore",
    "position": 4,
    "original_position": 4,
    "commit_id": "ea3271b7dd0173e004eba8e39240f10d2b2e1d70",
    "original_commit_id": "cf79c8a9e8fef1413cfe74e5b13c4bf5125571f7",
    "user": {
      "login": "Diapolo",
      "id": 1419649,
      "node_id": "MDQ6VXNlcjE0MTk2NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1419649?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Diapolo",
      "html_url": "https://github.com/Diapolo",
      "followers_url": "https://api.github.com/users/Diapolo/followers",
      "following_url": "https://api.github.com/users/Diapolo/following{/other_user}",
      "gists_url": "https://api.github.com/users/Diapolo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Diapolo/subscriptions",
      "organizations_url": "https://api.github.com/users/Diapolo/orgs",
      "repos_url": "https://api.github.com/users/Diapolo/repos",
      "events_url": "https://api.github.com/users/Diapolo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Diapolo/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Sorry, I'm no GIT master :-/. But I never had a pull or commit, where I needed to include .gitignore.\n",
    "created_at": "2012-05-17T15:38:45Z",
    "updated_at": "2012-05-17T16:29:45Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/1326#discussion_r839063",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/1326",
    "author_association": "NONE",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/839063"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/1326#discussion_r839063"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/1326"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/839063/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 23,
    "original_line": 23,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/839068",
    "pull_request_review_id": null,
    "id": 839068,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDgzOTA2OA==",
    "diff_hunk": "@@ -2396,6 +2393,21 @@ bool static ProcessMessage(CNode* pfrom, string strCommand, CDataStream& vRecv)\n     }\n \n \n+    // Ask a connected node for block updates\n+    if (!pfrom->fClient && !pfrom->fOneShot &&\n+        //(pfrom->nVersion < NOBLKS_VERSION_START ||\n+        // pfrom->nVersion >= NOBLKS_VERSION_END) &&\n+         nAskedForBlocks < 8 && !pfrom->fAskedForBlocks && !CaughtUp()) // TODO - tune\n+    {\n+        nAskedForBlocks++;\n+        pfrom->fAskedForBlocks = true;\n+        printf(\"initial getblocks to %s\\n\", pfrom->addr.ToString().c_str());\n+        pfrom->PushGetBlocks(pindexBest, uint256(0));\n+        NodeSummary();\n+    }\n+\n+\n+    if (strCommand == \"version\") ;",
    "path": "src/main.cpp",
    "position": 57,
    "original_position": 58,
    "commit_id": "ea3271b7dd0173e004eba8e39240f10d2b2e1d70",
    "original_commit_id": "cf79c8a9e8fef1413cfe74e5b13c4bf5125571f7",
    "user": {
      "login": "rebroad",
      "id": 1530283,
      "node_id": "MDQ6VXNlcjE1MzAyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1530283?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rebroad",
      "html_url": "https://github.com/rebroad",
      "followers_url": "https://api.github.com/users/rebroad/followers",
      "following_url": "https://api.github.com/users/rebroad/following{/other_user}",
      "gists_url": "https://api.github.com/users/rebroad/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rebroad/subscriptions",
      "organizations_url": "https://api.github.com/users/rebroad/orgs",
      "repos_url": "https://api.github.com/users/rebroad/repos",
      "events_url": "https://api.github.com/users/rebroad/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rebroad/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "It's needed since the AskForBlocks code is now outside the code for the version message. It runs immediatelly after it, so for all the elses to work this line is needed, otherwise the unknown command section is executed.\n",
    "created_at": "2012-05-17T15:39:23Z",
    "updated_at": "2012-05-17T16:29:45Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/1326#discussion_r839068",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/1326",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/839068"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/1326#discussion_r839068"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/1326"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/839068/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2409,
    "original_line": 2410,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/839081",
    "pull_request_review_id": null,
    "id": 839081,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDgzOTA4MQ==",
    "diff_hunk": "@@ -20,3 +20,4 @@ qrc_*.cpp\n *.pro.user\n #mac specific\n .DS_Store\n+build/",
    "path": ".gitignore",
    "position": 4,
    "original_position": 4,
    "commit_id": "ea3271b7dd0173e004eba8e39240f10d2b2e1d70",
    "original_commit_id": "cf79c8a9e8fef1413cfe74e5b13c4bf5125571f7",
    "user": {
      "login": "rebroad",
      "id": 1530283,
      "node_id": "MDQ6VXNlcjE1MzAyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1530283?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rebroad",
      "html_url": "https://github.com/rebroad",
      "followers_url": "https://api.github.com/users/rebroad/followers",
      "following_url": "https://api.github.com/users/rebroad/following{/other_user}",
      "gists_url": "https://api.github.com/users/rebroad/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rebroad/subscriptions",
      "organizations_url": "https://api.github.com/users/rebroad/orgs",
      "repos_url": "https://api.github.com/users/rebroad/repos",
      "events_url": "https://api.github.com/users/rebroad/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rebroad/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Strangely, i can't add .gitignore to .gitignore. It ignores that line! \n",
    "created_at": "2012-05-17T15:40:55Z",
    "updated_at": "2012-05-17T16:29:45Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/1326#discussion_r839081",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/1326",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/839081"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/1326#discussion_r839081"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/1326"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/839081/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 23,
    "original_line": 23,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/839082",
    "pull_request_review_id": null,
    "id": 839082,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDgzOTA4Mg==",
    "diff_hunk": "@@ -2396,6 +2393,21 @@ bool static ProcessMessage(CNode* pfrom, string strCommand, CDataStream& vRecv)\n     }\n \n \n+    // Ask a connected node for block updates\n+    if (!pfrom->fClient && !pfrom->fOneShot &&\n+        //(pfrom->nVersion < NOBLKS_VERSION_START ||\n+        // pfrom->nVersion >= NOBLKS_VERSION_END) &&\n+         nAskedForBlocks < 8 && !pfrom->fAskedForBlocks && !CaughtUp()) // TODO - tune\n+    {\n+        nAskedForBlocks++;\n+        pfrom->fAskedForBlocks = true;\n+        printf(\"initial getblocks to %s\\n\", pfrom->addr.ToString().c_str());\n+        pfrom->PushGetBlocks(pindexBest, uint256(0));\n+        NodeSummary();\n+    }\n+\n+\n+    if (strCommand == \"version\") ;",
    "path": "src/main.cpp",
    "position": 57,
    "original_position": 58,
    "commit_id": "ea3271b7dd0173e004eba8e39240f10d2b2e1d70",
    "original_commit_id": "cf79c8a9e8fef1413cfe74e5b13c4bf5125571f7",
    "user": {
      "login": "Diapolo",
      "id": 1419649,
      "node_id": "MDQ6VXNlcjE0MTk2NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1419649?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Diapolo",
      "html_url": "https://github.com/Diapolo",
      "followers_url": "https://api.github.com/users/Diapolo/followers",
      "following_url": "https://api.github.com/users/Diapolo/following{/other_user}",
      "gists_url": "https://api.github.com/users/Diapolo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Diapolo/subscriptions",
      "organizations_url": "https://api.github.com/users/Diapolo/orgs",
      "repos_url": "https://api.github.com/users/Diapolo/repos",
      "events_url": "https://api.github.com/users/Diapolo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Diapolo/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "But in the end this pull is not mergable like it is?\n",
    "created_at": "2012-05-17T15:41:00Z",
    "updated_at": "2012-05-17T16:29:45Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/1326#discussion_r839082",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/1326",
    "author_association": "NONE",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/839082"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/1326#discussion_r839082"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/1326"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/839082/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2409,
    "original_line": 2410,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/839091",
    "pull_request_review_id": null,
    "id": 839091,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDgzOTA5MQ==",
    "diff_hunk": "@@ -2396,6 +2393,21 @@ bool static ProcessMessage(CNode* pfrom, string strCommand, CDataStream& vRecv)\n     }\n \n \n+    // Ask a connected node for block updates\n+    if (!pfrom->fClient && !pfrom->fOneShot &&\n+        //(pfrom->nVersion < NOBLKS_VERSION_START ||\n+        // pfrom->nVersion >= NOBLKS_VERSION_END) &&\n+         nAskedForBlocks < 8 && !pfrom->fAskedForBlocks && !CaughtUp()) // TODO - tune\n+    {\n+        nAskedForBlocks++;\n+        pfrom->fAskedForBlocks = true;\n+        printf(\"initial getblocks to %s\\n\", pfrom->addr.ToString().c_str());\n+        pfrom->PushGetBlocks(pindexBest, uint256(0));\n+        NodeSummary();\n+    }\n+\n+\n+    if (strCommand == \"version\") ;",
    "path": "src/main.cpp",
    "position": 57,
    "original_position": 58,
    "commit_id": "ea3271b7dd0173e004eba8e39240f10d2b2e1d70",
    "original_commit_id": "cf79c8a9e8fef1413cfe74e5b13c4bf5125571f7",
    "user": {
      "login": "rebroad",
      "id": 1530283,
      "node_id": "MDQ6VXNlcjE1MzAyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1530283?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rebroad",
      "html_url": "https://github.com/rebroad",
      "followers_url": "https://api.github.com/users/rebroad/followers",
      "following_url": "https://api.github.com/users/rebroad/following{/other_user}",
      "gists_url": "https://api.github.com/users/rebroad/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rebroad/subscriptions",
      "organizations_url": "https://api.github.com/users/rebroad/orgs",
      "repos_url": "https://api.github.com/users/rebroad/repos",
      "events_url": "https://api.github.com/users/rebroad/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rebroad/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "It'r rebased to upstream master, so it should be. Why do you think it isn't?\n",
    "created_at": "2012-05-17T15:42:51Z",
    "updated_at": "2012-05-17T16:29:45Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/1326#discussion_r839091",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/1326",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/839091"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/1326#discussion_r839091"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/1326"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/839091/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2409,
    "original_line": 2410,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/839100",
    "pull_request_review_id": null,
    "id": 839100,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDgzOTEwMA==",
    "diff_hunk": "@@ -2396,6 +2393,21 @@ bool static ProcessMessage(CNode* pfrom, string strCommand, CDataStream& vRecv)\n     }\n \n \n+    // Ask a connected node for block updates\n+    if (!pfrom->fClient && !pfrom->fOneShot &&\n+        //(pfrom->nVersion < NOBLKS_VERSION_START ||\n+        // pfrom->nVersion >= NOBLKS_VERSION_END) &&\n+         nAskedForBlocks < 8 && !pfrom->fAskedForBlocks && !CaughtUp()) // TODO - tune\n+    {\n+        nAskedForBlocks++;\n+        pfrom->fAskedForBlocks = true;\n+        printf(\"initial getblocks to %s\\n\", pfrom->addr.ToString().c_str());\n+        pfrom->PushGetBlocks(pindexBest, uint256(0));\n+        NodeSummary();\n+    }\n+\n+\n+    if (strCommand == \"version\") ;",
    "path": "src/main.cpp",
    "position": 57,
    "original_position": 58,
    "commit_id": "ea3271b7dd0173e004eba8e39240f10d2b2e1d70",
    "original_commit_id": "cf79c8a9e8fef1413cfe74e5b13c4bf5125571f7",
    "user": {
      "login": "rebroad",
      "id": 1530283,
      "node_id": "MDQ6VXNlcjE1MzAyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1530283?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rebroad",
      "html_url": "https://github.com/rebroad",
      "followers_url": "https://api.github.com/users/rebroad/followers",
      "following_url": "https://api.github.com/users/rebroad/following{/other_user}",
      "gists_url": "https://api.github.com/users/rebroad/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rebroad/subscriptions",
      "organizations_url": "https://api.github.com/users/rebroad/orgs",
      "repos_url": "https://api.github.com/users/rebroad/repos",
      "events_url": "https://api.github.com/users/rebroad/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rebroad/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I'd say it's not ready to pull until i add the code to check for stuck block downloads. I wasn't sure if a pull request was the correct way to go about soliciting comments or if there was a better way. Stuck code has been written and tested for about a month but not combined with this code yet.\n",
    "created_at": "2012-05-17T15:44:47Z",
    "updated_at": "2012-05-17T16:29:45Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/1326#discussion_r839100",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/1326",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/839100"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/1326#discussion_r839100"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/1326"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/839100/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2409,
    "original_line": 2410,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/839107",
    "pull_request_review_id": null,
    "id": 839107,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDgzOTEwNw==",
    "diff_hunk": "@@ -2396,6 +2393,21 @@ bool static ProcessMessage(CNode* pfrom, string strCommand, CDataStream& vRecv)\n     }\n \n \n+    // Ask a connected node for block updates\n+    if (!pfrom->fClient && !pfrom->fOneShot &&\n+        //(pfrom->nVersion < NOBLKS_VERSION_START ||\n+        // pfrom->nVersion >= NOBLKS_VERSION_END) &&\n+         nAskedForBlocks < 8 && !pfrom->fAskedForBlocks && !CaughtUp()) // TODO - tune\n+    {\n+        nAskedForBlocks++;\n+        pfrom->fAskedForBlocks = true;\n+        printf(\"initial getblocks to %s\\n\", pfrom->addr.ToString().c_str());\n+        pfrom->PushGetBlocks(pindexBest, uint256(0));\n+        NodeSummary();\n+    }\n+\n+\n+    if (strCommand == \"version\") ;",
    "path": "src/main.cpp",
    "position": 57,
    "original_position": 58,
    "commit_id": "ea3271b7dd0173e004eba8e39240f10d2b2e1d70",
    "original_commit_id": "cf79c8a9e8fef1413cfe74e5b13c4bf5125571f7",
    "user": {
      "login": "Diapolo",
      "id": 1419649,
      "node_id": "MDQ6VXNlcjE0MTk2NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1419649?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Diapolo",
      "html_url": "https://github.com/Diapolo",
      "followers_url": "https://api.github.com/users/Diapolo/followers",
      "following_url": "https://api.github.com/users/Diapolo/following{/other_user}",
      "gists_url": "https://api.github.com/users/Diapolo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Diapolo/subscriptions",
      "organizations_url": "https://api.github.com/users/Diapolo/orgs",
      "repos_url": "https://api.github.com/users/Diapolo/repos",
      "events_url": "https://api.github.com/users/Diapolo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Diapolo/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I missread this file and had the impression the code for == \"version\" was moved or removed ... I was wrong, sorry :).\n",
    "created_at": "2012-05-17T15:47:09Z",
    "updated_at": "2012-05-17T16:29:45Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/1326#discussion_r839107",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/1326",
    "author_association": "NONE",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/839107"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/1326#discussion_r839107"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/1326"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/839107/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2409,
    "original_line": 2410,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/839115",
    "pull_request_review_id": null,
    "id": 839115,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDgzOTExNQ==",
    "diff_hunk": "@@ -2396,6 +2393,21 @@ bool static ProcessMessage(CNode* pfrom, string strCommand, CDataStream& vRecv)\n     }\n \n \n+    // Ask a connected node for block updates\n+    if (!pfrom->fClient && !pfrom->fOneShot &&\n+        //(pfrom->nVersion < NOBLKS_VERSION_START ||\n+        // pfrom->nVersion >= NOBLKS_VERSION_END) &&\n+         nAskedForBlocks < 8 && !pfrom->fAskedForBlocks && !CaughtUp()) // TODO - tune\n+    {\n+        nAskedForBlocks++;\n+        pfrom->fAskedForBlocks = true;\n+        printf(\"initial getblocks to %s\\n\", pfrom->addr.ToString().c_str());\n+        pfrom->PushGetBlocks(pindexBest, uint256(0));\n+        NodeSummary();\n+    }\n+\n+\n+    if (strCommand == \"version\") ;",
    "path": "src/main.cpp",
    "position": 57,
    "original_position": 58,
    "commit_id": "ea3271b7dd0173e004eba8e39240f10d2b2e1d70",
    "original_commit_id": "cf79c8a9e8fef1413cfe74e5b13c4bf5125571f7",
    "user": {
      "login": "Diapolo",
      "id": 1419649,
      "node_id": "MDQ6VXNlcjE0MTk2NDk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1419649?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Diapolo",
      "html_url": "https://github.com/Diapolo",
      "followers_url": "https://api.github.com/users/Diapolo/followers",
      "following_url": "https://api.github.com/users/Diapolo/following{/other_user}",
      "gists_url": "https://api.github.com/users/Diapolo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Diapolo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Diapolo/subscriptions",
      "organizations_url": "https://api.github.com/users/Diapolo/orgs",
      "repos_url": "https://api.github.com/users/Diapolo/repos",
      "events_url": "https://api.github.com/users/Diapolo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Diapolo/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "May I suggest when answering from a mobile don't quote the inital message :D. This makes things unreadable here.\n",
    "created_at": "2012-05-17T15:48:29Z",
    "updated_at": "2012-05-17T16:29:45Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/1326#discussion_r839115",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/1326",
    "author_association": "NONE",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/839115"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/1326#discussion_r839115"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/1326"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/839115/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2409,
    "original_line": 2410,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/839314",
    "pull_request_review_id": null,
    "id": 839314,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDgzOTMxNA==",
    "diff_hunk": "@@ -2396,6 +2393,21 @@ bool static ProcessMessage(CNode* pfrom, string strCommand, CDataStream& vRecv)\n     }\n \n \n+    // Ask a connected node for block updates\n+    if (!pfrom->fClient && !pfrom->fOneShot &&\n+        //(pfrom->nVersion < NOBLKS_VERSION_START ||\n+        // pfrom->nVersion >= NOBLKS_VERSION_END) &&\n+         nAskedForBlocks < 8 && !pfrom->fAskedForBlocks && !CaughtUp()) // TODO - tune\n+    {\n+        nAskedForBlocks++;\n+        pfrom->fAskedForBlocks = true;\n+        printf(\"initial getblocks to %s\\n\", pfrom->addr.ToString().c_str());\n+        pfrom->PushGetBlocks(pindexBest, uint256(0));\n+        NodeSummary();\n+    }\n+\n+\n+    if (strCommand == \"version\") ;",
    "path": "src/main.cpp",
    "position": 57,
    "original_position": 58,
    "commit_id": "ea3271b7dd0173e004eba8e39240f10d2b2e1d70",
    "original_commit_id": "cf79c8a9e8fef1413cfe74e5b13c4bf5125571f7",
    "user": {
      "login": "rebroad",
      "id": 1530283,
      "node_id": "MDQ6VXNlcjE1MzAyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1530283?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rebroad",
      "html_url": "https://github.com/rebroad",
      "followers_url": "https://api.github.com/users/rebroad/followers",
      "following_url": "https://api.github.com/users/rebroad/following{/other_user}",
      "gists_url": "https://api.github.com/users/rebroad/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rebroad/subscriptions",
      "organizations_url": "https://api.github.com/users/rebroad/orgs",
      "repos_url": "https://api.github.com/users/rebroad/repos",
      "events_url": "https://api.github.com/users/rebroad/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rebroad/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "ah... I didn't realise it was doing that!  Thanks for pointing that out :)\n",
    "created_at": "2012-05-17T16:20:13Z",
    "updated_at": "2012-05-17T16:29:45Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/1326#discussion_r839314",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/1326",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/839314"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/1326#discussion_r839314"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/1326"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/839314/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2409,
    "original_line": 2410,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/839388",
    "pull_request_review_id": null,
    "id": 839388,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDgzOTM4OA==",
    "diff_hunk": "@@ -925,6 +927,12 @@ int GetNumBlocksOfPeers()\n     return std::max(cPeerBlockCounts.median(), Checkpoints::GetTotalBlocksEstimate());\n }\n \n+bool CaughtUp()",
    "path": "src/main.cpp",
    "position": 13,
    "original_position": 13,
    "commit_id": "ea3271b7dd0173e004eba8e39240f10d2b2e1d70",
    "original_commit_id": "cf79c8a9e8fef1413cfe74e5b13c4bf5125571f7",
    "user": {
      "login": "rebroad",
      "id": 1530283,
      "node_id": "MDQ6VXNlcjE1MzAyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1530283?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rebroad",
      "html_url": "https://github.com/rebroad",
      "followers_url": "https://api.github.com/users/rebroad/followers",
      "following_url": "https://api.github.com/users/rebroad/following{/other_user}",
      "gists_url": "https://api.github.com/users/rebroad/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rebroad/subscriptions",
      "organizations_url": "https://api.github.com/users/rebroad/orgs",
      "repos_url": "https://api.github.com/users/rebroad/repos",
      "events_url": "https://api.github.com/users/rebroad/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rebroad/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "ah. I see what you mean now. fixed. thanks.\n",
    "created_at": "2012-05-17T16:30:02Z",
    "updated_at": "2012-05-17T16:30:02Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/1326#discussion_r839388",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/1326",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/839388"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/1326#discussion_r839388"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/1326"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/839388/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 930,
    "original_line": 930,
    "side": "RIGHT"
  }
]