[
  {
    "sha": "5b0028cab66f0169001fdd81d8c7d81a3bb65fdf",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo1YjAwMjhjYWI2NmYwMTY5MDAxZmRkODFkOGM3ZDgxYTNiYjY1ZmRm",
    "commit": {
      "author": {
        "name": "Emil Engler",
        "email": "me@emilengler.com",
        "date": "2020-01-01T19:49:58Z"
      },
      "committer": {
        "name": "Emil Engler",
        "email": "me@emilengler.com",
        "date": "2020-01-01T20:09:53Z"
      },
      "message": "util: Check for curl in Posix PATH",
      "tree": {
        "sha": "7ccbcb34c3df69d8d55c9096dcd5f3fa061df7e4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7ccbcb34c3df69d8d55c9096dcd5f3fa061df7e4"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5b0028cab66f0169001fdd81d8c7d81a3bb65fdf",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE82XmVEpcmrEyk0LUL21BRcVfx8cFAl4M/JQACgkQL21BRcVf\nx8cyABAAyiT70IPkb8Pizuwgf3ElFCadktQ2GOJn5T1CMqfpy4Un7lQG+eeF2QgV\n6PgKQB6psecFzpsqKHmJhWAEz4jRiMAmi3cQqLJYeAAUkqpNEvSAJ0pxRbm062GX\nCv5erBp+9pIjeO3MYzVL4M7bb28H7LdnLdxa3Bvvlp6CyBhBlzs/juWWK2720ZTt\nGEQZ/zL3O1a7nmC2OuhcIN+DDO4KV9xrbyO1PNRomYOyFTErcvSY6HxEFpyTsPyP\nElT6GfqIgVF46MD8qIy5tAmSak8j6lZSBClSbQ835a3tqnJGBZru3CLYJ4w51yKw\naIgQRZJVKghvJyOYXHzgy/JaJLuHmFGIAzRlKe9vVe0tokpVyX+Ah66sQmqN5qqH\nqY+VwOukkeJ/ngEt7Lph0fboZKBNGHYFK81khEw1OP7RpiAe+gSfi8U+WRBVL3AL\njqcG7z40Wy6YtLA/kP+E5wS1i8td76EBdk3GnKg7rWLQu17CdYwHoUGQddcrGrMx\n40UKFEbcBs3453XchyhLav9h4XV+dFk/X//u7s1vNikpgPBd63GLYweZuGpuaDHW\neB2n1qh5KTq5fx00S4isbPHFknOBtm235eytd/oeXEmoltYxMaWfZYgodFAGvnOM\noWJ+ydAj7uWGpHAgo54t/gi5VcldDrtI7UpSga8k87YSapvWi3k=\n=cbb2\n-----END PGP SIGNATURE-----",
        "payload": "tree 7ccbcb34c3df69d8d55c9096dcd5f3fa061df7e4\nparent 35fff5be60e853455abc24713481544e91adfedb\nauthor Emil Engler <me@emilengler.com> 1577908198 +0100\ncommitter Emil Engler <me@emilengler.com> 1577909393 +0100\n\nutil: Check for curl in Posix PATH\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5b0028cab66f0169001fdd81d8c7d81a3bb65fdf",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/5b0028cab66f0169001fdd81d8c7d81a3bb65fdf",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5b0028cab66f0169001fdd81d8c7d81a3bb65fdf/comments",
    "author": {
      "login": "emilengler",
      "id": 12272949,
      "node_id": "MDQ6VXNlcjEyMjcyOTQ5",
      "avatar_url": "https://avatars.githubusercontent.com/u/12272949?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/emilengler",
      "html_url": "https://github.com/emilengler",
      "followers_url": "https://api.github.com/users/emilengler/followers",
      "following_url": "https://api.github.com/users/emilengler/following{/other_user}",
      "gists_url": "https://api.github.com/users/emilengler/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/emilengler/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/emilengler/subscriptions",
      "organizations_url": "https://api.github.com/users/emilengler/orgs",
      "repos_url": "https://api.github.com/users/emilengler/repos",
      "events_url": "https://api.github.com/users/emilengler/events{/privacy}",
      "received_events_url": "https://api.github.com/users/emilengler/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "emilengler",
      "id": 12272949,
      "node_id": "MDQ6VXNlcjEyMjcyOTQ5",
      "avatar_url": "https://avatars.githubusercontent.com/u/12272949?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/emilengler",
      "html_url": "https://github.com/emilengler",
      "followers_url": "https://api.github.com/users/emilengler/followers",
      "following_url": "https://api.github.com/users/emilengler/following{/other_user}",
      "gists_url": "https://api.github.com/users/emilengler/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/emilengler/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/emilengler/subscriptions",
      "organizations_url": "https://api.github.com/users/emilengler/orgs",
      "repos_url": "https://api.github.com/users/emilengler/repos",
      "events_url": "https://api.github.com/users/emilengler/events{/privacy}",
      "received_events_url": "https://api.github.com/users/emilengler/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "35fff5be60e853455abc24713481544e91adfedb",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/35fff5be60e853455abc24713481544e91adfedb",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/35fff5be60e853455abc24713481544e91adfedb"
      }
    ],
    "stats": {
      "total": 28,
      "additions": 26,
      "deletions": 2
    },
    "files": [
      {
        "sha": "696c5a17c614157059697de4de80b9f5730aa9b0",
        "filename": "src/rpc/util.cpp",
        "status": "modified",
        "additions": 22,
        "deletions": 2,
        "changes": 24,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5b0028cab66f0169001fdd81d8c7d81a3bb65fdf/src/rpc/util.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5b0028cab66f0169001fdd81d8c7d81a3bb65fdf/src/rpc/util.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/util.cpp?ref=5b0028cab66f0169001fdd81d8c7d81a3bb65fdf",
        "patch": "@@ -115,8 +115,28 @@ std::string HelpExampleCli(const std::string& methodname, const std::string& arg\n \n std::string HelpExampleRpc(const std::string& methodname, const std::string& args)\n {\n-    return \"> curl --user myusername --data-binary '{\\\"jsonrpc\\\": \\\"1.0\\\", \\\"id\\\":\\\"curltest\\\", \"\n-        \"\\\"method\\\": \\\"\" + methodname + \"\\\", \\\"params\\\": [\" + args + \"] }' -H 'content-type: text/plain;' http://127.0.0.1:8332/\\n\";\n+    bool curl_installed = false;\n+    // Check if curl is installed\n+    const char *path = getenv(\"PATH\");\n+    // If PATH is not set or it can't be fetched for some reason, return curl just in case\n+    if (path == NULL)\n+        curl_installed = true;\n+\n+    // Parse PATH and look into every directory if the file \"curl\" exists\n+    std::vector<std::string> pathdirs;\n+    boost::split(pathdirs, path, [](char c){return c == ':';});\n+    for(unsigned long i = 0; i < pathdirs.size(); ++i) {\n+        std::ifstream f(pathdirs[i] + \"/curl\");\n+        if (f.good()) {\n+            curl_installed = true;\n+            break;\n+        }\n+    }\n+    if (curl_installed)\n+        return \"> curl --user myusername --data-binary '{\\\"jsonrpc\\\": \\\"1.0\\\", \\\"id\\\":\\\"curltest\\\", \"\n+            \"\\\"method\\\": \\\"\" + methodname + \"\\\", \\\"params\\\": [\" + args + \"] }' -H 'content-type: text/plain;' http://127.0.0.1:8332/\\n\";\n+    // If cURL isn't installed\n+    return \"\";\n }\n \n // Converts a hex string to a public key if possible"
      },
      {
        "sha": "bb293462d47bf0f9c5632e481d9ae860f237d704",
        "filename": "src/rpc/util.h",
        "status": "modified",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5b0028cab66f0169001fdd81d8c7d81a3bb65fdf/src/rpc/util.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5b0028cab66f0169001fdd81d8c7d81a3bb65fdf/src/rpc/util.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/util.h?ref=5b0028cab66f0169001fdd81d8c7d81a3bb65fdf",
        "patch": "@@ -19,8 +19,12 @@\n \n #include <string>\n #include <vector>\n+#include <fstream>\n+\n+#include <stdlib.h>\n \n #include <boost/variant.hpp>\n+#include <boost/algorithm/string.hpp>\n \n /**\n  * String used to describe UNIX epoch time in documentation, factored out to a"
      }
    ]
  }
]