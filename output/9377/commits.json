[
  {
    "sha": "9aa4e6a6c2cb9b4465d014c8efa672a919ff8f89",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo5YWE0ZTZhNmMyY2I5YjQ0NjVkMDE0YzhlZmE2NzJhOTE5ZmY4Zjg5",
    "commit": {
      "author": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2016-12-19T08:04:05Z"
      },
      "committer": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2017-01-19T19:38:37Z"
      },
      "message": "[Wallet] Add an option to keep the change address key, true by default",
      "tree": {
        "sha": "6e7eb37a4f2697417f84e3c3029e328132c7ad59",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6e7eb37a4f2697417f84e3c3029e328132c7ad59"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9aa4e6a6c2cb9b4465d014c8efa672a919ff8f89",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "expired_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEMu5cTD+hXMrbRqvlKdS8tkFvU+wFAliBFb0ACgkQKdS8tkFv\nU+xQEBAAgtSKhLSvuygJhVYK3bVdvgVDcEETsl5rOHUcep4L31uv9pjXYxnl751A\nYKbuLGq9xdqwI6MUPbzL4WxwYGqVQEVsHpV5+krMCxNRke1KpE3SuHTA3DfYhB+Q\naLXNzhIGxh1tFd1UyBgWfx5wpdXvRsIq4FYMmBo2aPcJPr5P2FYsVjV55LQz24Lf\n9ejTVZsiUiVeBjXZS0M+4r53eKuxaM4EDAG3neLG3jIJ2uZot66zRV0Mr+jefRWY\nDq13FfJo/zxdO+R1RN5r5tgCx4t0ybBbPpc57YIVm/D/JvIvPp76uCZ0F6wsPXxA\nPc2SGLewYAAs3XNgcjxWJoo1j2ABXVJzTvhG1x4XN7elqYOh1FF+d1cTn4TNEmZs\n+D8CyHGPptAW9Yign3FMvjzZ1P5B4+zKawrW7/7j+hlpqmMhZDo+NcJW6wdnBuHm\nuzaaqxHkq8+/WhUOTugirUxJTT3LDmIuwvxbHqRiyMl1qoEIyvawqTVyqyzdZgfB\nT+ESr9er0QKYCUdNYbQQ9crenuYEm/r+M5mAito8C+cAwXPdStFb7+AXShHOL2uH\nzXmkYMqtZEhOj1fX5LuP78pQGzRhy1kqgawhJOATU/czQcm8eDBUMq/i7d6/zXPA\ntsFC+Od0Aggdtvvwuk662di3eHvs1jHoEO6tJYhPPMsLdCaPaPs=\n=CaVx\n-----END PGP SIGNATURE-----",
        "payload": "tree 6e7eb37a4f2697417f84e3c3029e328132c7ad59\nparent 9c9af5ab2d9e461bb6f2dee1390025ce82a3625b\nauthor Jonas Schnelli <dev@jonasschnelli.ch> 1482134645 +0100\ncommitter Jonas Schnelli <dev@jonasschnelli.ch> 1484854717 +0100\n\n[Wallet] Add an option to keep the change address key, true by default\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9aa4e6a6c2cb9b4465d014c8efa672a919ff8f89",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/9aa4e6a6c2cb9b4465d014c8efa672a919ff8f89",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9aa4e6a6c2cb9b4465d014c8efa672a919ff8f89/comments",
    "author": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "9c9af5ab2d9e461bb6f2dee1390025ce82a3625b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9c9af5ab2d9e461bb6f2dee1390025ce82a3625b",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/9c9af5ab2d9e461bb6f2dee1390025ce82a3625b"
      }
    ],
    "stats": {
      "total": 16,
      "additions": 13,
      "deletions": 3
    },
    "files": [
      {
        "sha": "fa54197e7554c1caa8f581ff9d8472b3ca799df7",
        "filename": "src/wallet/rpcwallet.cpp",
        "status": "modified",
        "additions": 7,
        "deletions": 1,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/9aa4e6a6c2cb9b4465d014c8efa672a919ff8f89/src/wallet/rpcwallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/9aa4e6a6c2cb9b4465d014c8efa672a919ff8f89/src/wallet/rpcwallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/rpcwallet.cpp?ref=9aa4e6a6c2cb9b4465d014c8efa672a919ff8f89",
        "patch": "@@ -2496,6 +2496,7 @@ UniValue fundrawtransaction(const JSONRPCRequest& request)\n                             \"     \\\"changePosition\\\"         (numeric, optional, default random) The index of the change output\\n\"\n                             \"     \\\"includeWatching\\\"        (boolean, optional, default false) Also select inputs which are watch only\\n\"\n                             \"     \\\"lockUnspents\\\"           (boolean, optional, default false) Lock selected unspent outputs\\n\"\n+                            \"     \\\"reserveChangeKey\\\"       (boolean, optional, default true) Reserves the change output key from the keypool\\n\"\n                             \"     \\\"feeRate\\\"                (numeric, optional, default not set: makes wallet determine the fee) Set a specific feerate (\" + CURRENCY_UNIT + \" per KB)\\n\"\n                             \"     \\\"subtractFeeFromOutputs\\\" (array, optional) A json array of integers.\\n\"\n                             \"                              The fee will be equally deducted from the amount of each specified output.\\n\"\n@@ -2528,6 +2529,7 @@ UniValue fundrawtransaction(const JSONRPCRequest& request)\n     int changePosition = -1;\n     bool includeWatching = false;\n     bool lockUnspents = false;\n+    bool reserveChangeKey = true;\n     CFeeRate feeRate = CFeeRate(0);\n     bool overrideEstimatedFeerate = false;\n     UniValue subtractFeeFromOutputs;\n@@ -2549,6 +2551,7 @@ UniValue fundrawtransaction(const JSONRPCRequest& request)\n                 {\"changePosition\", UniValueType(UniValue::VNUM)},\n                 {\"includeWatching\", UniValueType(UniValue::VBOOL)},\n                 {\"lockUnspents\", UniValueType(UniValue::VBOOL)},\n+                {\"reserveChangeKey\", UniValueType(UniValue::VBOOL)},\n                 {\"feeRate\", UniValueType()}, // will be checked below\n                 {\"subtractFeeFromOutputs\", UniValueType(UniValue::VARR)},\n             },\n@@ -2572,6 +2575,9 @@ UniValue fundrawtransaction(const JSONRPCRequest& request)\n         if (options.exists(\"lockUnspents\"))\n             lockUnspents = options[\"lockUnspents\"].get_bool();\n \n+        if (options.exists(\"reserveChangeKey\"))\n+            reserveChangeKey = options[\"reserveChangeKey\"].get_bool();\n+\n         if (options.exists(\"feeRate\"))\n         {\n             feeRate = CFeeRate(AmountFromValue(options[\"feeRate\"]));\n@@ -2608,7 +2614,7 @@ UniValue fundrawtransaction(const JSONRPCRequest& request)\n     CAmount nFeeOut;\n     string strFailReason;\n \n-    if(!pwalletMain->FundTransaction(tx, nFeeOut, overrideEstimatedFeerate, feeRate, changePosition, strFailReason, includeWatching, lockUnspents, setSubtractFeeFromOutputs, changeAddress))\n+    if(!pwalletMain->FundTransaction(tx, nFeeOut, overrideEstimatedFeerate, feeRate, changePosition, strFailReason, includeWatching, lockUnspents, setSubtractFeeFromOutputs, reserveChangeKey, changeAddress))\n         throw JSONRPCError(RPC_INTERNAL_ERROR, strFailReason);\n \n     UniValue result(UniValue::VOBJ);"
      },
      {
        "sha": "06382af1847f8eefd29005e86f33c4ae96efee4d",
        "filename": "src/wallet/wallet.cpp",
        "status": "modified",
        "additions": 5,
        "deletions": 1,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/9aa4e6a6c2cb9b4465d014c8efa672a919ff8f89/src/wallet/wallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/9aa4e6a6c2cb9b4465d014c8efa672a919ff8f89/src/wallet/wallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.cpp?ref=9aa4e6a6c2cb9b4465d014c8efa672a919ff8f89",
        "patch": "@@ -2192,7 +2192,7 @@ bool CWallet::SelectCoins(const vector<COutput>& vAvailableCoins, const CAmount&\n     return res;\n }\n \n-bool CWallet::FundTransaction(CMutableTransaction& tx, CAmount& nFeeRet, bool overrideEstimatedFeeRate, const CFeeRate& specificFeeRate, int& nChangePosInOut, std::string& strFailReason, bool includeWatching, bool lockUnspents, const std::set<int>& setSubtractFeeFromOutputs, const CTxDestination& destChange)\n+bool CWallet::FundTransaction(CMutableTransaction& tx, CAmount& nFeeRet, bool overrideEstimatedFeeRate, const CFeeRate& specificFeeRate, int& nChangePosInOut, std::string& strFailReason, bool includeWatching, bool lockUnspents, const std::set<int>& setSubtractFeeFromOutputs, bool keepReserveKey, const CTxDestination& destChange)\n {\n     vector<CRecipient> vecSend;\n \n@@ -2241,6 +2241,10 @@ bool CWallet::FundTransaction(CMutableTransaction& tx, CAmount& nFeeRet, bool ov\n         }\n     }\n \n+    // optionally keep the change output key\n+    if (keepReserveKey)\n+        reservekey.KeepKey();\n+\n     return true;\n }\n "
      },
      {
        "sha": "fb20062b965cb07349a397404bf976469f926d35",
        "filename": "src/wallet/wallet.h",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/9aa4e6a6c2cb9b4465d014c8efa672a919ff8f89/src/wallet/wallet.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/9aa4e6a6c2cb9b4465d014c8efa672a919ff8f89/src/wallet/wallet.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.h?ref=9aa4e6a6c2cb9b4465d014c8efa672a919ff8f89",
        "patch": "@@ -780,7 +780,7 @@ class CWallet : public CCryptoKeyStore, public CValidationInterface\n      * Insert additional inputs into the transaction by\n      * calling CreateTransaction();\n      */\n-    bool FundTransaction(CMutableTransaction& tx, CAmount& nFeeRet, bool overrideEstimatedFeeRate, const CFeeRate& specificFeeRate, int& nChangePosInOut, std::string& strFailReason, bool includeWatching, bool lockUnspents, const std::set<int>& setSubtractFeeFromOutputs, const CTxDestination& destChange = CNoDestination());\n+    bool FundTransaction(CMutableTransaction& tx, CAmount& nFeeRet, bool overrideEstimatedFeeRate, const CFeeRate& specificFeeRate, int& nChangePosInOut, std::string& strFailReason, bool includeWatching, bool lockUnspents, const std::set<int>& setSubtractFeeFromOutputs, bool keepReserveKey = true, const CTxDestination& destChange = CNoDestination());\n \n     /**\n      * Create a new transaction paying the recipients with a set of coins"
      }
    ]
  },
  {
    "sha": "9eb325d079c7bbce749abe79d0bbac34d8ef5806",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo5ZWIzMjVkMDc5YzdiYmNlNzQ5YWJlNzlkMGJiYWMzNGQ4ZWY1ODA2",
    "commit": {
      "author": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2016-12-19T08:10:33Z"
      },
      "committer": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2017-01-19T19:45:29Z"
      },
      "message": "[QA] Add test for fundrawtransactions new reserveChangeKey option",
      "tree": {
        "sha": "075ae0d35c8ff1edde86ef91b31841dc9d93a16b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/075ae0d35c8ff1edde86ef91b31841dc9d93a16b"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9eb325d079c7bbce749abe79d0bbac34d8ef5806",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "expired_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEMu5cTD+hXMrbRqvlKdS8tkFvU+wFAliBF1oACgkQKdS8tkFv\nU+w4lw/+MSWfWLmVZBDw/VSs3UDRL5Y2tIW/YNXF+KEhSURmzg6386CVbihsRpbJ\ntgFLPqKPGOFnYzt3VpJgoIDiSMWQD7sam9u4GBTK4jDyFhp1/Jr6q+QkgoKM4R3u\nSXJ4OF/Dtc/0dD8EZ7ggCE9jGB8jbbW8YLQjBumYDSlz630FGpD5avo34LhvGVZS\nXArOPRIAK7hi/S5Rk4CLOksETCd3S5RuQfZpKfw4Ric+eZI9BTQrQwlQpP678/u5\nyPf3Upp96qNZc8zSXHDQqjCPpmimbFQXnGBB7FPpiOlMhyTp6sP/d4j8ON7GQOZ3\naS+oJ4enE8q3PljHGrKv+PZQCnh07Sxj0+b9qQS7ydOKgozh75g7TMI9CgDviPAd\nvvo+1X7X9RNw0t3jnAVdDuLVJraw6URxMBsZQnXgpkX559wfKVf/aloNlChT0J7t\n4yimbPHYN/N1I6IFkdNvkqab51aQJwH4GMl/KCZ/YJxzQnETZM/zs1oRWsuNih9i\nPIbNwXUSs3daKhtIrAY9ZMfUj2utT62P4MB+yXGd9F/VGN4ijJGsdnBULkXeUxKD\ndH1wRQ7mbIpx7HTg00R9YDwuEoFwAu8iZ7ba1W6gCzTsE/xy5OgFznQU6S3/LdBQ\nqVZzdD1+XfHagBZukzl7G0kvWciOPTllW+rqzUuyRsBfTDWSm18=\n=J+TU\n-----END PGP SIGNATURE-----",
        "payload": "tree 075ae0d35c8ff1edde86ef91b31841dc9d93a16b\nparent 9aa4e6a6c2cb9b4465d014c8efa672a919ff8f89\nauthor Jonas Schnelli <dev@jonasschnelli.ch> 1482135033 +0100\ncommitter Jonas Schnelli <dev@jonasschnelli.ch> 1484855129 +0100\n\n[QA] Add test for fundrawtransactions new reserveChangeKey option\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9eb325d079c7bbce749abe79d0bbac34d8ef5806",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/9eb325d079c7bbce749abe79d0bbac34d8ef5806",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9eb325d079c7bbce749abe79d0bbac34d8ef5806/comments",
    "author": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "9aa4e6a6c2cb9b4465d014c8efa672a919ff8f89",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9aa4e6a6c2cb9b4465d014c8efa672a919ff8f89",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/9aa4e6a6c2cb9b4465d014c8efa672a919ff8f89"
      }
    ],
    "stats": {
      "total": 28,
      "additions": 27,
      "deletions": 1
    },
    "files": [
      {
        "sha": "b279c0b9d65694302fe20b2929762d0270b8ef28",
        "filename": "qa/rpc-tests/fundrawtransaction.py",
        "status": "modified",
        "additions": 27,
        "deletions": 1,
        "changes": 28,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/9eb325d079c7bbce749abe79d0bbac34d8ef5806/qa/rpc-tests/fundrawtransaction.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/9eb325d079c7bbce749abe79d0bbac34d8ef5806/qa/rpc-tests/fundrawtransaction.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/qa/rpc-tests/fundrawtransaction.py?ref=9eb325d079c7bbce749abe79d0bbac34d8ef5806",
        "patch": "@@ -651,7 +651,7 @@ def run_test(self):\n         assert_equal(len(self.nodes[3].listunspent(1)), 1)\n \n         inputs = []\n-        outputs = {self.nodes[2].getnewaddress() : 1}\n+        outputs = {self.nodes[3].getnewaddress() : 1}\n         rawtx = self.nodes[3].createrawtransaction(inputs, outputs)\n         result = self.nodes[3].fundrawtransaction(rawtx) # uses min_relay_tx_fee (set by settxfee)\n         result2 = self.nodes[3].fundrawtransaction(rawtx, {\"feeRate\": 2*min_relay_tx_fee})\n@@ -660,6 +660,32 @@ def run_test(self):\n         assert_fee_amount(result2['fee'], count_bytes(result2['hex']), 2 * result_fee_rate)\n         assert_fee_amount(result3['fee'], count_bytes(result3['hex']), 10 * result_fee_rate)\n \n+        #############################\n+        # Test address reuse option #\n+        #############################\n+\n+        result3 = self.nodes[3].fundrawtransaction(rawtx, {\"reserveChangeKey\": False})\n+        res_dec = self.nodes[0].decoderawtransaction(result3[\"hex\"])\n+        changeaddress = \"\"\n+        for out in res_dec['vout']:\n+            if out['value'] > 1.0:\n+                changeaddress += out['scriptPubKey']['addresses'][0]\n+        assert(changeaddress != \"\")\n+        nextaddr = self.nodes[3].getnewaddress()\n+        # frt should not have removed the key from the keypool\n+        assert(changeaddress == nextaddr)\n+\n+        result3 = self.nodes[3].fundrawtransaction(rawtx)\n+        res_dec = self.nodes[0].decoderawtransaction(result3[\"hex\"])\n+        changeaddress = \"\"\n+        for out in res_dec['vout']:\n+            if out['value'] > 1.0:\n+                changeaddress += out['scriptPubKey']['addresses'][0]\n+        assert(changeaddress != \"\")\n+        nextaddr = self.nodes[3].getnewaddress()\n+        # Now the change address key should be removed from the keypool\n+        assert(changeaddress != nextaddr)\n+\n         ######################################\n         # Test subtractFeeFromOutputs option #\n         ######################################"
      }
    ]
  },
  {
    "sha": "c9f3062d551823f006d400dddb54c12620cd29c4",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjOWYzMDYyZDU1MTgyM2YwMDZkNDAwZGRkYjU0YzEyNjIwY2QyOWM0",
    "commit": {
      "author": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2016-12-19T08:12:28Z"
      },
      "committer": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2017-01-19T19:45:34Z"
      },
      "message": "Add fundrawtransactions new reserveChangeKey option to the release notes",
      "tree": {
        "sha": "78235a4b0954aba96d65695398a903b9fee13604",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/78235a4b0954aba96d65695398a903b9fee13604"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c9f3062d551823f006d400dddb54c12620cd29c4",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "expired_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEMu5cTD+hXMrbRqvlKdS8tkFvU+wFAliBF14ACgkQKdS8tkFv\nU+xnlg/+NrBdGporlOsVeyDLgGozVz9cvXC9RXlv+wsMlVEkgIJokVy8oz5beuAD\nn636TXe8bL06eBzlrfHb/j7B0h1LU3lU4KQB2QR3kasiIp3yduUsbDHZLsnS17s2\nyn6liOjpy46nd3WXB93XKFx+LOtH+0svy4r781vOukVoD3TV7gea2pGACEJPlnWW\nzxCzqxkrpF2pEWMt5blNeb5OR5rFHHr+gdZUeaw9t/cYK7GfO/MZ2FDKRbTQalGW\nsHRNQlXrhANqk1AwJlvdDoqPg4ZElF4jU3fhOoennyZYYFWX8OLrMvoGiRV9al1V\n0s/1wAe7vh7GId+47L0o01y2v/ugGokf0ra5UTwuDWu87YQuZUE8YnpGks1tzXjk\nw7EwQl1q1HA17ToPhLW094CSw5HEdIlnyCIaWLanKNCz61+zhDbRiLaLxue1lx+f\nY0EFolwGdjhUqWnTjKTadZluHyXfBCs+Xo2mU6WtvCUIGL+1Y687xwzYPJ4gJh1r\nbDTDdBdSV79CGjJx6m/uxK7I2KWdnKUQxbtSLgkO0PquRaqSeWa+ofnosFCDpBAy\ne/bDnVweHeQ/WRAh2qCJIWIIRfIj4QeuG9rTj99xVqyXxpDaoUIgq9fE/B8AGACM\nWSau9Sda89r+MmIGuLlR7v4FVxxIMCdHSHoCOMzAZYsSmywRixI=\n=/J8Y\n-----END PGP SIGNATURE-----",
        "payload": "tree 78235a4b0954aba96d65695398a903b9fee13604\nparent 9eb325d079c7bbce749abe79d0bbac34d8ef5806\nauthor Jonas Schnelli <dev@jonasschnelli.ch> 1482135148 +0100\ncommitter Jonas Schnelli <dev@jonasschnelli.ch> 1484855134 +0100\n\nAdd fundrawtransactions new reserveChangeKey option to the release notes\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c9f3062d551823f006d400dddb54c12620cd29c4",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/c9f3062d551823f006d400dddb54c12620cd29c4",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c9f3062d551823f006d400dddb54c12620cd29c4/comments",
    "author": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "9eb325d079c7bbce749abe79d0bbac34d8ef5806",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9eb325d079c7bbce749abe79d0bbac34d8ef5806",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/9eb325d079c7bbce749abe79d0bbac34d8ef5806"
      }
    ],
    "stats": {
      "total": 10,
      "additions": 10,
      "deletions": 0
    },
    "files": [
      {
        "sha": "0ea9e1949e381695c6f3977d8c978d8a937c65bd",
        "filename": "doc/release-notes.md",
        "status": "modified",
        "additions": 10,
        "deletions": 0,
        "changes": 10,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c9f3062d551823f006d400dddb54c12620cd29c4/doc/release-notes.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c9f3062d551823f006d400dddb54c12620cd29c4/doc/release-notes.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/doc/release-notes.md?ref=c9f3062d551823f006d400dddb54c12620cd29c4",
        "patch": "@@ -128,6 +128,16 @@ Call \"getmininginfo\" loses the \"testnet\" field in favor of the more generic \"cha\n \n ### Wallet\n \n+0.14.0 Fundrawtransaction change address reuse\n+==============================================\n+\n+Before 0.14, `fundrawtransaction` was by default wallet stateless. In almost all cases `fundrawtransaction` does add a change-output to the outputs of the funded transaction. Before 0.14, the used keypool key was never marked as change-address key and directly returned to the keypool (leading to address reuse).\n+Before 0.14, calling `getnewaddress` directly after `fundrawtransaction` did generate the same address as the change-output address.\n+\n+Since 0.14, fundrawtransaction does reserve the change-output-key from the keypool by default (optional by setting  `reserveChangeKey`, default = `true`)\n+\n+Users should also consider using `getrawchangeaddress()` in conjunction with `fundrawtransaction`'s `changeAddress` option.\n+\n ### GUI\n \n ### Tests"
      }
    ]
  }
]