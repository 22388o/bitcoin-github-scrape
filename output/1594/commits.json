[
  {
    "sha": "ce2f66d9bfd2040753b1af93dc520a8a3f7a5213",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjZTJmNjZkOWJmZDIwNDA3NTNiMWFmOTNkYzUyMGE4YTNmN2E1MjEz",
    "commit": {
      "author": {
        "name": "Philip Kaufmann",
        "email": "phil.kaufmann@t-online.de",
        "date": "2012-07-13T07:01:27Z"
      },
      "committer": {
        "name": "Philip Kaufmann",
        "email": "phil.kaufmann@t-online.de",
        "date": "2012-07-17T12:54:01Z"
      },
      "message": "small update for BitcoinGUI::setNumBlocks() function\n\n- re-work code parts that check if we have a Statusbar warning\n- use same variable names in the header",
      "tree": {
        "sha": "0c0aededd0c27bec11bb99f77254e0a197a6282d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/0c0aededd0c27bec11bb99f77254e0a197a6282d"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ce2f66d9bfd2040753b1af93dc520a8a3f7a5213",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ce2f66d9bfd2040753b1af93dc520a8a3f7a5213",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/ce2f66d9bfd2040753b1af93dc520a8a3f7a5213",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ce2f66d9bfd2040753b1af93dc520a8a3f7a5213/comments",
    "author": null,
    "committer": null,
    "parents": [
      {
        "sha": "ce652affe0ffec114bceb2e2c20ae1d015faca53",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ce652affe0ffec114bceb2e2c20ae1d015faca53",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/ce652affe0ffec114bceb2e2c20ae1d015faca53"
      }
    ],
    "stats": {
      "total": 31,
      "additions": 15,
      "deletions": 16
    },
    "files": [
      {
        "sha": "afb829e08a61c9b9d163a2e41d062c4f60b35fc4",
        "filename": "src/qt/bitcoingui.cpp",
        "status": "modified",
        "additions": 14,
        "deletions": 15,
        "changes": 29,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/ce2f66d9bfd2040753b1af93dc520a8a3f7a5213/src/qt/bitcoingui.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/ce2f66d9bfd2040753b1af93dc520a8a3f7a5213/src/qt/bitcoingui.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoingui.cpp?ref=ce2f66d9bfd2040753b1af93dc520a8a3f7a5213",
        "patch": "@@ -501,14 +501,15 @@ void BitcoinGUI::setNumBlocks(int count, int nTotalBlocks)\n         return;\n     }\n \n+    QString strStatusBarWarnings = clientModel->getStatusBarWarnings();\n     QString tooltip;\n \n     if(count < nTotalBlocks)\n     {\n         int nRemainingBlocks = nTotalBlocks - count;\n         float nPercentageDone = count / (nTotalBlocks * 0.01f);\n \n-        if (clientModel->getStatusBarWarnings() == \"\")\n+        if (strStatusBarWarnings.isEmpty())\n         {\n             progressBarLabel->setText(tr(\"Synchronizing with network...\"));\n             progressBarLabel->setVisible(true);\n@@ -517,30 +518,28 @@ void BitcoinGUI::setNumBlocks(int count, int nTotalBlocks)\n             progressBar->setValue(count);\n             progressBar->setVisible(true);\n         }\n-        else\n-        {\n-            progressBarLabel->setText(clientModel->getStatusBarWarnings());\n-            progressBarLabel->setVisible(true);\n-            progressBar->setVisible(false);\n-        }\n+\n         tooltip = tr(\"Downloaded %1 of %2 blocks of transaction history (%3% done).\").arg(count).arg(nTotalBlocks).arg(nPercentageDone, 0, 'f', 2);\n     }\n     else\n     {\n-        if (clientModel->getStatusBarWarnings() == \"\")\n+        if (strStatusBarWarnings.isEmpty())\n             progressBarLabel->setVisible(false);\n-        else\n-        {\n-            progressBarLabel->setText(clientModel->getStatusBarWarnings());\n-            progressBarLabel->setVisible(true);\n-        }\n+\n         progressBar->setVisible(false);\n         tooltip = tr(\"Downloaded %1 blocks of transaction history.\").arg(count);\n     }\n \n-    QDateTime now = QDateTime::currentDateTime();\n+    // Override progressBarLabel text and hide progressBar, when we have warnings to display\n+    if (!strStatusBarWarnings.isEmpty())\n+    {\n+        progressBarLabel->setText(strStatusBarWarnings);\n+        progressBarLabel->setVisible(true);\n+        progressBar->setVisible(false);\n+    }\n+\n     QDateTime lastBlockDate = clientModel->getLastBlockDate();\n-    int secs = lastBlockDate.secsTo(now);\n+    int secs = lastBlockDate.secsTo(QDateTime::currentDateTime());\n     QString text;\n \n     // Represent time from last generated block in human readable text"
      },
      {
        "sha": "adc75b048113983b7b7d7149d5639c19d1e26544",
        "filename": "src/qt/bitcoingui.h",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/ce2f66d9bfd2040753b1af93dc520a8a3f7a5213/src/qt/bitcoingui.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/ce2f66d9bfd2040753b1af93dc520a8a3f7a5213/src/qt/bitcoingui.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoingui.h?ref=ce2f66d9bfd2040753b1af93dc520a8a3f7a5213",
        "patch": "@@ -112,7 +112,7 @@ public slots:\n     /** Set number of connections shown in the UI */\n     void setNumConnections(int count);\n     /** Set number of blocks shown in the UI */\n-    void setNumBlocks(int count, int countOfPeers);\n+    void setNumBlocks(int count, int nTotalBlocks);\n     /** Set the encryption status as shown in the UI.\n        @param[in] status            current encryption status\n        @see WalletModel::EncryptionStatus"
      }
    ]
  }
]