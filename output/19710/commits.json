[
  {
    "sha": "ce3e6a7cb21d1aa455513970846e1f70c01472a4",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjZTNlNmE3Y2IyMWQxYWE0NTU1MTM5NzA4NDZlMWY3MGMwMTQ3MmE0",
    "commit": {
      "author": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2020-08-14T11:56:18Z"
      },
      "committer": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2020-08-14T11:56:18Z"
      },
      "message": "bench: Allow skip benchmark\n\nCo-authored-by: Martin Ankerl <Martin.Ankerl@gmail.com>",
      "tree": {
        "sha": "d3e0ab0c10cb170475cb9ea2594626e68c9eb27c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d3e0ab0c10cb170475cb9ea2594626e68c9eb27c"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ce3e6a7cb21d1aa455513970846e1f70c01472a4",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE0dvyxLlvLev0wWZUQQEIES5+qB8FAl82e+IACgkQQQEIES5+\nqB8S8hAAl34Dfm4g2GvQ66s7mCHAmwBr6aax6uJLwStjZ9nOtFm++7OpygRUlmOI\nDyaJVxspJMnEhDIiSgq2lJVAEsT6fnn5UgiFRjAOJCDZvaImGj3A3pLh9bW3HnVS\n6WCdyu8hAYiuG9P/Sn0NPxISi8HTEg9wTP2j5wBgfTaN5/n1R1s1JMj+fzdw5fSK\n6IKsvobNRddXtQbxHbR40cXCvDpYs5GN1Nb0M7/lpp9lm2Sg2TyQI6EkXh9vqiML\nl5Bh7fGxdFizLxIniOXGU1ZABJ6Cfb3W4ANDA2TpdIKhNWEbOYcl0qXeoB+xMEQR\n+7QRa7SQXzUXnIOarP7htIm9oWBLe4l0h9RNIeA+b3FVPIWPVWiSf8/sLfr0JJzJ\nWFsQ8JOLUgGeIiHvuM/uWetJ7vmg9d3IhWHyOQZXOakyf0YCT8N7kyGdgCbF/U0w\noW5mT2YoRCCsyXNql2JXSmuie1mJ6FrZlW8uBRHKoEG4yQR8I0GPo7EbAgR5eRAP\nkP6TY3RJjiVoLJTyL5I3HjI4kAkFIlOPhtJJbuVtkSrfn3QesFnnU+mvamqpBU6R\nbdkOTtWb64Akf1kI6odyPPLk/ywTxp2o/X3gytQWJ3ZEZhmgNbXij5JuUbXiqgun\nPO9KfAgxvO57kMMUqzSvYNraIzdDQq32gwDlJT7QbXfPg03Pegc=\n=dpJx\n-----END PGP SIGNATURE-----",
        "payload": "tree d3e0ab0c10cb170475cb9ea2594626e68c9eb27c\nparent b4d0366b47dd9b8fe29cc9a100dcdf6ca1d3cabf\nauthor Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1597406178 +0300\ncommitter Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1597406178 +0300\n\nbench: Allow skip benchmark\n\nCo-authored-by: Martin Ankerl <Martin.Ankerl@gmail.com>\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ce3e6a7cb21d1aa455513970846e1f70c01472a4",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/ce3e6a7cb21d1aa455513970846e1f70c01472a4",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ce3e6a7cb21d1aa455513970846e1f70c01472a4/comments",
    "author": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "b4d0366b47dd9b8fe29cc9a100dcdf6ca1d3cabf",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b4d0366b47dd9b8fe29cc9a100dcdf6ca1d3cabf",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/b4d0366b47dd9b8fe29cc9a100dcdf6ca1d3cabf"
      }
    ],
    "stats": {
      "total": 5,
      "additions": 4,
      "deletions": 1
    },
    "files": [
      {
        "sha": "012057e792d2754bb6c3adf247ed77c296b53ad4",
        "filename": "src/bench/bench.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 1,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/ce3e6a7cb21d1aa455513970846e1f70c01472a4/src/bench/bench.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/ce3e6a7cb21d1aa455513970846e1f70c01472a4/src/bench/bench.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/bench/bench.cpp?ref=ce3e6a7cb21d1aa455513970846e1f70c01472a4",
        "patch": "@@ -70,7 +70,10 @@ void benchmark::BenchRunner::RunAll(const Args& args)\n             }\n             std::cout << bench.complexityBigO() << std::endl;\n         }\n-        benchmarkResults.push_back(bench.results().back());\n+\n+        if (!bench.results().empty()) {\n+            benchmarkResults.push_back(bench.results().back());\n+        }\n     }\n \n     GenerateTemplateResults(benchmarkResults, args.output_csv, \"# Benchmark, evals, iterations, total, min, max, median\\n\""
      }
    ]
  },
  {
    "sha": "3edc4e34fe2f92e7066c1455f5e42af2fdb43b99",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzozZWRjNGUzNGZlMmY5MmU3MDY2YzE0NTVmNWU0MmFmMmZkYjQzYjk5",
    "commit": {
      "author": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2020-08-14T11:58:27Z"
      },
      "committer": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2020-08-26T10:00:00Z"
      },
      "message": "bench: Prevent thread oversubscription\n\nThis change decreases the variance of benchmark results.",
      "tree": {
        "sha": "6c7aa67be3dd264348c4cc2db549ab31ec919b13",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6c7aa67be3dd264348c4cc2db549ab31ec919b13"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3edc4e34fe2f92e7066c1455f5e42af2fdb43b99",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE0dvyxLlvLev0wWZUQQEIES5+qB8FAl9GMqAACgkQQQEIES5+\nqB9UHxAAqSb/JKgnWaa1RCKeEbSpSEPxoUhrNVzDE4QkAPXEJnF0Skbi8VaBhkfD\n6s1oDjr1n/sFzkTCiEWVjkwiRg1OgxITWVpfC2ITIzB5Xxwvz/cvVQD4/RZnIcST\nHJxGcX3MaPJ1X4Pxn52iQ3rTjCx2wdz5NGoyAJARjUXMU9nIWY5ABbKnkT0t0iqG\n3H3nEWh6IP/+b1/a3qzozk2R/Gwyly9S6C5NfE0o72XdirGMzdOVPqWrnobt1Hns\nXy3QV9MFeRv7+p8VFSEsDTs/92H8ArIgjGPRkbV2+GMwUUUPXZ5XM4tyVemBALgk\nf0uNmEIg52wXk/rQqlmpgyaph4Ig5OWyIPZqK5UcHj+FYSHqZ20ToObVwD2zp9qc\n0VFfOfjDfffF7RttYioVxKFXHjBzMeU/MFxlbe5lijvul90savqw9/W582JSGgrf\nf3ue6QvDrQ6KG/77Hv70Birib79jX9oQcB0VGNoJU9m0+KHgZYffTA7OLz7v74Si\n9jazKRnthb5Eq+UvpwS7Lr/t+MLvsWtKEyJL2eMQykCLcSrqec6GcRy4ez69a3dn\nAHsqEUAystAPNXLoqSJUOAD9E8dAy2fImO/y3d8HUsSGwXgM7uXawd01KU2aWzKK\nlCCD1KYCL8SorN/WfbO5DkRJfPYFDPaiRUNr71MZz7f2aXpTILg=\n=7Iq4\n-----END PGP SIGNATURE-----",
        "payload": "tree 6c7aa67be3dd264348c4cc2db549ab31ec919b13\nparent ce3e6a7cb21d1aa455513970846e1f70c01472a4\nauthor Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1597406307 +0300\ncommitter Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1598436000 +0300\n\nbench: Prevent thread oversubscription\n\nThis change decreases the variance of benchmark results.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3edc4e34fe2f92e7066c1455f5e42af2fdb43b99",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/3edc4e34fe2f92e7066c1455f5e42af2fdb43b99",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3edc4e34fe2f92e7066c1455f5e42af2fdb43b99/comments",
    "author": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "ce3e6a7cb21d1aa455513970846e1f70c01472a4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ce3e6a7cb21d1aa455513970846e1f70c01472a4",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/ce3e6a7cb21d1aa455513970846e1f70c01472a4"
      }
    ],
    "stats": {
      "total": 9,
      "additions": 6,
      "deletions": 3
    },
    "files": [
      {
        "sha": "ffa772d8c10a9c74aa2d898ec22adbd1c4a02582",
        "filename": "src/bench/checkqueue.cpp",
        "status": "modified",
        "additions": 6,
        "deletions": 3,
        "changes": 9,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/3edc4e34fe2f92e7066c1455f5e42af2fdb43b99/src/bench/checkqueue.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/3edc4e34fe2f92e7066c1455f5e42af2fdb43b99/src/bench/checkqueue.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/bench/checkqueue.cpp?ref=3edc4e34fe2f92e7066c1455f5e42af2fdb43b99",
        "patch": "@@ -14,8 +14,6 @@\n \n #include <vector>\n \n-\n-static const int MIN_CORES = 2;\n static const size_t BATCHES = 101;\n static const size_t BATCH_SIZE = 30;\n static const int PREVECTOR_SIZE = 28;\n@@ -26,6 +24,9 @@ static const unsigned int QUEUE_BATCH_SIZE = 128;\n // and there is a little bit of work done between calls to Add.\n static void CCheckQueueSpeedPrevectorJob(benchmark::Bench& bench)\n {\n+    // We shouldn't ever be running with the checkqueue on a single core machine.\n+    if (GetNumCores() <= 1) return;\n+\n     const ECCVerifyHandle verify_handle;\n     ECC_Start();\n \n@@ -44,7 +45,9 @@ static void CCheckQueueSpeedPrevectorJob(benchmark::Bench& bench)\n     };\n     CCheckQueue<PrevectorJob> queue {QUEUE_BATCH_SIZE};\n     boost::thread_group tg;\n-    for (auto x = 0; x < std::max(MIN_CORES, GetNumCores()); ++x) {\n+    // The main thread should be counted to prevent thread oversubscription, and\n+    // to decrease the variance of benchmark results.\n+    for (auto x = 0; x < GetNumCores() - 1; ++x) {\n        tg.create_thread([&]{queue.Thread();});\n     }\n "
      }
    ]
  }
]