hebasto,2020-08-13 14:26:59,cc @martinus @JeremyRubin ,https://github.com/bitcoin/bitcoin/pull/19710#issuecomment-673511155,673511155,
JeremyRubin,2020-08-13 15:31:32,"Hmmmm...\n\nI'd maybe rather just abort the test and return early if only 1 thread gets made because we shouldn't ever be running with the checkqueue on a single core machine...",https://github.com/bitcoin/bitcoin/pull/19710#issuecomment-673547482,673547482,
hebasto,2020-08-13 16:43:17,"@JeremyRubin \n> Hmmmm...\n> \n> I'd maybe rather just abort the test and return early if only 1 thread gets made because we shouldn't ever be running with the checkqueue on a single core machine...\n\nWe do not know for sure who many CPU cores/threads users dedicate to Bitcoin Core :)\n\nWith this PR benchmark results are quite consistent:\n```\n$ taskset --cpu-list 0-7 src/bench/bench_b",https://github.com/bitcoin/bitcoin/pull/19710#issuecomment-673585027,673585027,
laanwj,2020-08-14 10:50:32,"If it's a benchmark that benchmarks thread synchronization/interaction (which is, I think, the only valid reason to run a benchmark multi-threaded) then I agree running it without threads makes little sense.\n\n(And if so you could even see the ""two threads on a single-core machine"" case as a realistic case, because bitcoind will create threads on such a machine)",https://github.com/bitcoin/bitcoin/pull/19710#issuecomment-674016320,674016320,
hebasto,2020-08-14 12:17:21,"Updated d786765721e02e7d2c888c8276c02064e5056593 -> a65c1adc7638c2b6f2038cbe11a637b285dd8dd2 ([pr19710.01](https://github.com/hebasto/bitcoin/commits/pr19710.01) -> [pr19710.02](https://github.com/hebasto/bitcoin/commits/pr19710.02), [diff](https://github.com/hebasto/bitcoin/compare/pr19710.01..pr19710.02)).\n\nAddressed:\n- @JeremyRubin's [comment](https://github.com/bitcoin/bitcoin/pull/19710",https://github.com/bitcoin/bitcoin/pull/19710#issuecomment-674046344,674046344,
DrahtBot,2020-08-20 20:36:14,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #18731 (refactor: Make CCheckQueue RAII-styled by hebasto)\n* #18710 (Add local thread pool to CCheckQueue by hebasto)\n\n",https://github.com/bitcoin/bitcoin/pull/19710#issuecomment-677890523,677890523,
MarcoFalke,2020-08-21 06:56:49,cr ACK a65c1adc7638c2b6f2038cbe11a637b285dd8dd2,https://github.com/bitcoin/bitcoin/pull/19710#issuecomment-678077933,678077933,
hebasto,2020-08-25 19:45:53,"Updated a65c1adc7638c2b6f2038cbe11a637b285dd8dd2 -> 4f9164389a078f64258f3d7f2ecda5ab68968e8c ([pr19710.02](https://github.com/hebasto/bitcoin/commits/pr19710.02) -> [pr19710.03](https://github.com/hebasto/bitcoin/commits/pr19710.03), [diff](https://github.com/hebasto/bitcoin/compare/pr19710.02..pr19710.03)).\n\nAddressed @vasild's comments:\n- https://github.com/bitcoin/bitcoin/pull/19710#discu",https://github.com/bitcoin/bitcoin/pull/19710#issuecomment-680233439,680233439,
hebasto,2020-08-25 20:46:39,"Updated 4f9164389a078f64258f3d7f2ecda5ab68968e8c -> 5e7acd65443d3fc7be084ea81be3089e4b28bc9a ([pr19710.03](https://github.com/hebasto/bitcoin/commits/pr19710.03) -> [pr19710.04](https://github.com/hebasto/bitcoin/commits/pr19710.04), [diff](https://github.com/hebasto/bitcoin/compare/pr19710.03..pr19710.04)).\n\nAddressed @promag's [comment](https://github.com/bitcoin/bitcoin/pull/19710#discussio",https://github.com/bitcoin/bitcoin/pull/19710#issuecomment-680261215,680261215,
promag,2020-08-25 21:48:15,Code review ACK 5e7acd65443d3fc7be084ea81be3089e4b28bc9a.,https://github.com/bitcoin/bitcoin/pull/19710#issuecomment-680286377,680286377,
hebasto,2020-08-26 09:31:48,@MarcoFalke Mind having another look at this PR?,https://github.com/bitcoin/bitcoin/pull/19710#issuecomment-680770387,680770387,
hebasto,2020-08-26 10:02:31,"Updated 5e7acd65443d3fc7be084ea81be3089e4b28bc9a -> 3edc4e34fe2f92e7066c1455f5e42af2fdb43b99 ([pr19710.04](https://github.com/hebasto/bitcoin/commits/pr19710.04) -> [pr19710.05](https://github.com/hebasto/bitcoin/commits/pr19710.05), [diff](https://github.com/hebasto/bitcoin/compare/pr19710.04..pr19710.05)).\n\nAddressed @promag's [comment](https://github.com/bitcoin/bitcoin/pull/19710#discussio",https://github.com/bitcoin/bitcoin/pull/19710#issuecomment-680785136,680785136,
fjahr,2020-08-30 15:25:54,Code review ACK 3edc4e34fe2f92e7066c1455f5e42af2fdb43b99,https://github.com/bitcoin/bitcoin/pull/19710#issuecomment-683433780,683433780,
promag,2020-08-31 10:10:55,ACK,https://github.com/bitcoin/bitcoin/pull/19710#issuecomment-683690304,683690304,
vasild,2020-08-25 16:26:37,"I think this warrants a comment explaining ""why?"".\n\nAlso, maybe don't drop the `MIN_CORES` constant and use it here instead of the magic number ""2""?",https://github.com/bitcoin/bitcoin/pull/19710#discussion_r476578354,476578354,src/bench/checkqueue.cpp
vasild,2020-08-25 16:27:56,"Maybe also comment here ""why we do - 1"".",https://github.com/bitcoin/bitcoin/pull/19710#discussion_r476579234,476579234,src/bench/checkqueue.cpp
promag,2020-08-25 20:38:10,"4f9164389a078f64258f3d7f2ecda5ab68968e8c\n\nnit, single line and also add comment.",https://github.com/bitcoin/bitcoin/pull/19710#discussion_r476722701,476722701,src/bench/checkqueue.cpp
hebasto,2020-08-25 20:47:01,Thanks! [Updated](https://github.com/bitcoin/bitcoin/pull/19710#issuecomment-680261215).,https://github.com/bitcoin/bitcoin/pull/19710#discussion_r476727154,476727154,src/bench/checkqueue.cpp
promag,2020-08-26 09:40:19,Maybe ditch `MIN_CORES` and change this to `GetNumCores() == 1`?,https://github.com/bitcoin/bitcoin/pull/19710#discussion_r477172550,477172550,src/bench/checkqueue.cpp
hebasto,2020-08-26 09:48:37,"https://en.cppreference.com/w/cpp/thread/thread/hardware_concurrency:\n> If the value is not well defined or not computable, returns ​`0`​.",https://github.com/bitcoin/bitcoin/pull/19710#discussion_r477177385,477177385,src/bench/checkqueue.cpp
hebasto,2020-08-26 09:48:57,Maybe `<=1` ?,https://github.com/bitcoin/bitcoin/pull/19710#discussion_r477177580,477177580,src/bench/checkqueue.cpp
hebasto,2020-08-26 10:02:57,Thanks! [Updated](https://github.com/bitcoin/bitcoin/pull/19710#issuecomment-680785136).,https://github.com/bitcoin/bitcoin/pull/19710#discussion_r477185658,477185658,src/bench/checkqueue.cpp
