NikhilBartwal,2021-07-27 20:41:51,"In addition to the above, since the faucet limit is once per 24 hrs for each IP address (for the script), getcoins.py can only be used once for each IP. However, using it twice gives a vague output like this:\n\n```\n[nikhilb@nikhil-PC bitcoin]$ contrib/signet/getcoins.py \nCaptcha required (reload page)\n\n```\nIt would be better if the output provided is something on the lines of:\n```\",https://github.com/bitcoin/bitcoin/pull/22565#issuecomment-887820382,887820382,
NikhilBartwal,2021-07-28 20:18:23,"Currently, there are some scenarios where the faucet transaction can fail, some of which are:\n\n* If the script is run with the same IP within 24hrs (Status code 400)\n* If the specified faucet URL is invalid (Status code 404)\n* If the provided signet address is invalid (Status code 504)\n\nOriginally, the script outputs a vague `Captcha required (reload page)` error for the first scenario",https://github.com/bitcoin/bitcoin/pull/22565#issuecomment-888593639,888593639,
prayank23,2021-07-29 11:57:56,"Agree with most of the comments by 0xb10c. Adding few more things which may help in improving this script:\n\n>In addition to the above, since the faucet limit is once per 24 hrs for each IP address, getcoins.py can only be used once for each IP. However, using it twice gives a vague output like this:\nCaptcha required (reload page)\n\n> It would be better if the output provided is something ",https://github.com/bitcoin/bitcoin/pull/22565#issuecomment-889056047,889056047,
0xB10C,2021-07-29 12:35:00,"> I think there is no limit and users don't need to wait for 24 hours. They just need to enter captcha or use new IP. As a user or dev I would solve this problem with one of the below solutions:\n> * Use new IP for each request. Maybe new tor circuit while using `torsocks`.\n> * Show captcha image with python code.\n> * Not use script. Open website in browser with new IP and get some coins.\n",https://github.com/bitcoin/bitcoin/pull/22565#issuecomment-889083726,889083726,
prayank23,2021-07-29 12:48:57,"> There is no need to game these limits or to make the script more complex than it has to be (with e.g. tor or rendering the captcha SVGs via python)\n\nThen maybe 3 can be used. And no need to mislead users that they should wait for 24 hours.",https://github.com/bitcoin/bitcoin/pull/22565#issuecomment-889113739,889113739,
theStack,2021-07-31 20:26:29,Concept ACK,https://github.com/bitcoin/bitcoin/pull/22565#issuecomment-890400518,890400518,
0xB10C,2021-08-03 10:08:44,"cc @kallewoof you might be interested in reviewing this as it touches your signet faucet.\n\nDo you have the time to work on the faucet (or review a PR to the faucet) at the moment? See e.g. https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679049280. ",https://github.com/bitcoin/bitcoin/pull/22565#issuecomment-891717157,891717157,
kallewoof,2021-08-03 10:24:49,"Will review. Some general comments:\n\n* I am willing to change the faucet if it's warranted.\n* I do think 1 no-captcha request/day/IP is reasonable. The getcoins script gets you enough coins to get started, and I don't see a point in needing to do multiple requests each day, especially if you are automating the process.\n* If you're not automating the process, open a browser and answer the c",https://github.com/bitcoin/bitcoin/pull/22565#issuecomment-891728383,891728383,
NikhilBartwal,2021-08-03 12:52:42,"@kallewoof I agree with the points mentioned and the rate limiting. The PR, in its current form gives a somewhat better error message in case the Faucet Transaction fails. \n\nHowever, I think it might be even better if we could update the faucet to return a Code **'429 Too many requests'** error when accessing the faucet more than once with the script, as suggested by @0xB10C [here](https://git",https://github.com/bitcoin/bitcoin/pull/22565#issuecomment-891821877,891821877,
kallewoof,2021-08-04 00:08:46,"I've changed to return code 429 in two places:\n* when user tries to get coins a *second* time without providing a captcha answer\n* when user tries to get coins so much that they hit the daily limit (even with captcha's)\n",https://github.com/bitcoin/bitcoin/pull/22565#issuecomment-892251308,892251308,
NikhilBartwal,2021-08-04 11:02:46,Thanks for the update @kallewoof. I've added an explicit error message for multiple-payouts from script and a common one for other possible scenarios. Let me know if it needs any updates @0xB10C.,https://github.com/bitcoin/bitcoin/pull/22565#issuecomment-892566433,892566433,
prayank23,2021-08-04 21:54:21,utACK https://github.com/bitcoin/bitcoin/pull/22565/commits/b0c8246cac97b7792a50afc22ef1fe39c5028e00,https://github.com/bitcoin/bitcoin/pull/22565#issuecomment-893000366,893000366,
kallewoof,2021-08-17 07:07:38,"ACK b0c8246cac97b7792a50afc22ef1fe39c5028e00\n",https://github.com/bitcoin/bitcoin/pull/22565#issuecomment-900049510,900049510,
arnabsen1729,2021-08-18 14:10:49,utACK b0c8246,https://github.com/bitcoin/bitcoin/pull/22565#issuecomment-901148544,901148544,
prakash1512,2021-08-18 14:25:31,utACK b0c8246,https://github.com/bitcoin/bitcoin/pull/22565#issuecomment-901160345,901160345,
0xB10C,2021-07-29 10:35:57,"nit: I find the following comment clearer: \n```python\n# Get the hash of the block at height 1 of the currently active signet chain\n```",https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679033508,679033508,contrib/signet/getcoins.py
0xB10C,2021-07-29 10:37:59,nit: comment not needed,https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679034751,679034751,contrib/signet/getcoins.py
0xB10C,2021-07-29 10:42:01,"[en.bitcoin.it/wiki/Signet](https://en.bitcoin.it/wiki/Signet) only lists two faucet repositories, but does not provide setup instructions. Might be better to drop this message.",https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679037279,679037279,contrib/signet/getcoins.py
0xB10C,2021-07-29 10:42:31,should be in the first commit,https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679037579,679037579,contrib/signet/getcoins.py
0xB10C,2021-07-29 10:48:59,"This catch-all could have a broader error message. It's not always the transaction that can't be processed.\n\nMaybe `The request could not be processed.` and then print the server response.",https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679041545,679041545,contrib/signet/getcoins.py
0xB10C,2021-07-29 11:01:15,"The faucet should return [""429 Too Many Requests""](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/429) which indicates rate-limiting. Returning ""400 Bad Request"" is incorrect HTTP. [Could be changed here](https://github.com/kallewoof/bitcoin-faucet/blob/8575d3dc38341561551635793e892be913e3a27d/src/index.ts#L188).\n",https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679049280,679049280,contrib/signet/getcoins.py
0xB10C,2021-07-29 11:06:01,"The faucet returns ""400 Bad Request"" in [multiple places](https://github.com/kallewoof/bitcoin-faucet/blob/8575d3dc38341561551635793e892be913e3a27d/src/index.ts). So status 400 doesn't have to be rate limiting. Better not match on it.",https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679052084,679052084,contrib/signet/getcoins.py
0xB10C,2021-07-29 11:06:24,Not sure about printing `address not valid` for a status code that should be `504 Gateway Timeout`. There might be different reasons for a 504.,https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679052302,679052302,contrib/signet/getcoins.py
prayank23,2021-07-29 13:27:36,"```suggestion\nwebbrowser.open('https://signetfaucet.com/', new = 1)\n```",https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679149658,679149658,contrib/signet/getcoins.py
NikhilBartwal,2021-07-30 06:48:55,"Sure, block height makes sense :)",https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679689416,679689416,contrib/signet/getcoins.py
NikhilBartwal,2021-07-30 06:49:20,"Ah, alright!",https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679689684,679689684,contrib/signet/getcoins.py
NikhilBartwal,2021-07-30 06:51:29,"Yes, I agree that having such detailed error handling might be confusing and not the best to have. Maybe we can have an explicit one for 404 and a common one for all others for now.",https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679690803,679690803,contrib/signet/getcoins.py
NikhilBartwal,2021-07-30 06:52:16,Makes sense :),https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679691227,679691227,contrib/signet/getcoins.py
NikhilBartwal,2021-07-30 06:57:47,"Actually, when 504 happens, it returns a huge chunk of raw HTML which might look weird if we print it as output.",https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679693800,679693800,contrib/signet/getcoins.py
prayank23,2021-07-30 10:14:33,"There is no such thing. Error is misleading.\n\nUsed the same IP for these 2 transactions:\nhttps://explorer.bc-2.jp/tx/e18da1b1df25376ace8b75fcab9c54c72a601cb52c04568da2b52dfc61ebec18\nhttps://explorer.bc-2.jp/tx/17770112c1939212bcc20903a686335296a7713eb80654ac6ef411a96c747bbd\n\nJust had to open https://signetfaucet.com/ in browser and enter details.\n\nIf the error isn't changed, it's a",https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679814438,679814438,contrib/signet/getcoins.py
NikhilBartwal,2021-07-30 11:12:04,"Actually, the faucet only asks for the captcha for the second (or more) time usage from the same IP, not the first time. Hence, the script in its current form cannot be used more than once in a while (as the faucet needs some hours before being used without captcha from the same IP).\n\nThat's why it kindof acts like a rate limiter (for the current script). The actual rate limits are 1 btc per h",https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679844826,679844826,contrib/signet/getcoins.py
0xB10C,2021-07-30 11:17:21,"> Just had to open https://signetfaucet.com/ in browser and enter details.\n\nThis is missing the point. This changes the `getcoins.py` script. You can't assume that because something works in the browser, it works in the script. The script might be used automatically where you can't open a browser.\n\nFurthermore, this is in an else branch and **only printed IF an error occurs**. Additionally",https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679847709,679847709,contrib/signet/getcoins.py
0xB10C,2021-07-30 11:19:15,`getcoins.py` is a script for a reason. You can't assume that every machine has a GUI or even a browser installed. Especially if this script is used in some automated way.,https://github.com/bitcoin/bitcoin/pull/22565#discussion_r679848687,679848687,contrib/signet/getcoins.py
0xB10C,2021-08-04 16:29:43,"During the `getblockhash 1` RPC call `-signet` isn't set in `args.bitcoin_cli_args` yet. `bitcoin-cli` tries to reach the mainnet RPC port 8332. \n\nYou need to set the `-signet` argument before you do the first RPC call. Probably just move the following up:\n``` python\n if args.bitcoin_cli_args == []:\n        args.bitcoin_cli_args = ['-signet']\n```\n        \n(I guess this works fine i",https://github.com/bitcoin/bitcoin/pull/22565#discussion_r682776280,682776280,contrib/signet/getcoins.py
NikhilBartwal,2021-08-04 21:31:56,"Absolutely! I guess I missed this edge case, thanks for mentioning! I've included this in the first commit and pushed the changes :)",https://github.com/bitcoin/bitcoin/pull/22565#discussion_r682974040,682974040,contrib/signet/getcoins.py
prayank23,2021-08-04 21:53:41,This looks better. Thanks for adding that last sentence.,https://github.com/bitcoin/bitcoin/pull/22565#discussion_r682985352,682985352,contrib/signet/getcoins.py
0xB10C,2021-08-05 20:10:12,"nit: When using a SigNet with a chain length of 1 (chain = only the Genesis block), this will fail with a `Block height out of range` error message. This might be confusing for someone unfamiliar with the `getcoins.py` code. If you happen to touch this again, you could add catch-all except handling here mentioning that checking the hash of the first block to determine the SigNet chain failed. This",https://github.com/bitcoin/bitcoin/pull/22565#discussion_r683754875,683754875,contrib/signet/getcoins.py
