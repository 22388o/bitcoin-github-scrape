[
  {
    "sha": "fa00393bce0c6128c6188afc7a1d50cc01b0277f",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYTAwMzkzYmNlMGM2MTI4YzYxODhhZmM3YTFkNTBjYzAxYjAyNzdm",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2019-11-09T14:16:16Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2019-11-09T14:11:32Z"
      },
      "message": "ci: Make all filesystem operations inside docker",
      "tree": {
        "sha": "fa907219591bf761ba6707a52177026875980f0f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/fa907219591bf761ba6707a52177026875980f0f"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa00393bce0c6128c6188afc7a1d50cc01b0277f",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUjYIQwAhHYxE9pVMzAlQHePNLW8/a5IfY6KMWKWNGgBJ7kKjjNcvXob570qc+xH\nP1EtLcZkUKBHqDaZDsn/2dugU1Js3ce37zu7gnFpqOzB0ck2qzG9DacaUdaKzjXH\nH7iF0uuJX3JnSZvTa9e1DN0qDCMeptOINlmmI48+VyPp85naxmxUn9P8JUTVWhqZ\nrxTNf8ahqAAeq43Ah7uSjZg1y8dRVQSZBWubW/akpJVa2Y3uwBNPxf3tqzX0wHN9\nkq1O3eEelk/z2tfZm3k+cJf2m/4hZuPKsD2kvm1AHJkiA9tTurtswSIL2t4Q8pMB\nD+MjBR0HB5s5jr+ftlHEQ31vBDZnW8hHc/IwcrfuF5058HdPRpWnbHoGb6SQa9NH\nVhdVt+/9Kb9pFP939EPZXz8fWVqjwhIk+h6PNXLfkLNjEtbBa+8G9PjXO7azDeqh\nFyhrdXVi7G0EZ1KxY5xLhy7pphB0wa/R6Wt/MfWlhd9JJ1MIhVMs2yVBCuGlyJfZ\n4M4OJdbq\n=dykf\n-----END PGP SIGNATURE-----",
        "payload": "tree fa907219591bf761ba6707a52177026875980f0f\nparent 8021392b825c74312173f15eb937ba6d4aec3841\nauthor MarcoFalke <falke.marco@gmail.com> 1573308976 -0500\ncommitter MarcoFalke <falke.marco@gmail.com> 1573308692 -0500\n\nci: Make all filesystem operations inside docker\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa00393bce0c6128c6188afc7a1d50cc01b0277f",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fa00393bce0c6128c6188afc7a1d50cc01b0277f",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa00393bce0c6128c6188afc7a1d50cc01b0277f/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "8021392b825c74312173f15eb937ba6d4aec3841",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8021392b825c74312173f15eb937ba6d4aec3841",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/8021392b825c74312173f15eb937ba6d4aec3841"
      }
    ],
    "stats": {
      "total": 19,
      "additions": 10,
      "deletions": 9
    },
    "files": [
      {
        "sha": "b394bd897d59275b08ef353360ab8a86863f3b20",
        "filename": "ci/test/04_install.sh",
        "status": "modified",
        "additions": 2,
        "deletions": 1,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa00393bce0c6128c6188afc7a1d50cc01b0277f/ci/test/04_install.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa00393bce0c6128c6188afc7a1d50cc01b0277f/ci/test/04_install.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/ci/test/04_install.sh?ref=fa00393bce0c6128c6188afc7a1d50cc01b0277f",
        "patch": "@@ -40,7 +40,6 @@ if [ ! -d ${DIR_QA_ASSETS} ]; then\n fi\n export DIR_FUZZ_IN=${DIR_QA_ASSETS}/fuzz_seed_corpus/\n \n-mkdir -p \"${BASE_BUILD_DIR}/sanitizer-output/\"\n export ASAN_OPTIONS=\"detect_stack_use_after_return=1\"\n export LSAN_OPTIONS=\"suppressions=${BASE_BUILD_DIR}/test/sanitizer_suppressions/lsan\"\n export TSAN_OPTIONS=\"suppressions=${BASE_BUILD_DIR}/test/sanitizer_suppressions/tsan:log_path=${BASE_BUILD_DIR}/sanitizer-output/tsan\"\n@@ -85,6 +84,8 @@ if [ \"$TRAVIS_OS_NAME\" != \"osx\" ]; then\n   ${CI_RETRY_EXE} DOCKER_EXEC apt-get install --no-install-recommends --no-upgrade -y $PACKAGES $DOCKER_PACKAGES\n fi\n \n+DOCKER_EXEC mkdir -p \"${BASE_BUILD_DIR}/sanitizer-output/\"\n+\n if [ \"$USE_BUSY_BOX\" = \"true\" ]; then\n   echo \"Setup to use BusyBox utils\"\n   DOCKER_EXEC mkdir -p $BASE_SCRATCH_DIR/bins/"
      },
      {
        "sha": "3f0bba19ac8e1b85aaec50159754b79c859681da",
        "filename": "ci/test/05_before_script.sh",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa00393bce0c6128c6188afc7a1d50cc01b0277f/ci/test/05_before_script.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa00393bce0c6128c6188afc7a1d50cc01b0277f/ci/test/05_before_script.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/ci/test/05_before_script.sh?ref=fa00393bce0c6128c6188afc7a1d50cc01b0277f",
        "patch": "@@ -13,13 +13,13 @@ else\n   DOCKER_EXEC echo \\> \\$HOME/.bitcoin\n fi\n \n-mkdir -p depends/SDKs depends/sdk-sources\n+DOCKER_EXEC mkdir -p depends/SDKs depends/sdk-sources\n \n if [ -n \"$OSX_SDK\" ] && [ ! -f depends/sdk-sources/MacOSX${OSX_SDK}.sdk.tar.gz ]; then\n   curl --location --fail $SDK_URL/MacOSX${OSX_SDK}.sdk.tar.gz -o depends/sdk-sources/MacOSX${OSX_SDK}.sdk.tar.gz\n fi\n if [ -n \"$OSX_SDK\" ] && [ -f depends/sdk-sources/MacOSX${OSX_SDK}.sdk.tar.gz ]; then\n-  tar -C depends/SDKs -xf depends/sdk-sources/MacOSX${OSX_SDK}.sdk.tar.gz\n+  DOCKER_EXEC tar -C depends/SDKs -xf depends/sdk-sources/MacOSX${OSX_SDK}.sdk.tar.gz\n fi\n if [[ $HOST = *-mingw32 ]]; then\n   DOCKER_EXEC update-alternatives --set $HOST-g++ \\$\\(which $HOST-g++-posix\\)"
      },
      {
        "sha": "34b8477197e45b1497b7db91f94d9f9d57eebf79",
        "filename": "ci/test/06_script_a.sh",
        "status": "modified",
        "additions": 6,
        "deletions": 2,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa00393bce0c6128c6188afc7a1d50cc01b0277f/ci/test/06_script_a.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa00393bce0c6128c6188afc7a1d50cc01b0277f/ci/test/06_script_a.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/ci/test/06_script_a.sh?ref=fa00393bce0c6128c6188afc7a1d50cc01b0277f",
        "patch": "@@ -19,18 +19,22 @@ else\n fi\n END_FOLD\n \n+# Create folder on host and docker, so that `cd` works\n mkdir -p build\n+DOCKER_EXEC mkdir -p build\n \n # Temporarily disable errexit, because Travis macOS fails without error message\n set +o errexit\n cd build || (echo \"could not enter build directory\"; exit 1)\n set -o errexit\n \n BEGIN_FOLD configure\n-DOCKER_EXEC ../configure --cache-file=config.cache $BITCOIN_CONFIG_ALL $BITCOIN_CONFIG || ( cat config.log && false)\n+DOCKER_EXEC ../configure --cache-file=config.cache $BITCOIN_CONFIG_ALL $BITCOIN_CONFIG || ( (DOCKER_EXEC cat config.log) && false)\n END_FOLD\n \n BEGIN_FOLD distdir\n+# Create folder on host and docker, so that `cd` works\n+mkdir -p \"bitcoin-$HOST\"\n DOCKER_EXEC make distdir VERSION=$HOST\n END_FOLD\n \n@@ -39,7 +43,7 @@ cd \"bitcoin-$HOST\" || (echo \"could not enter distdir bitcoin-$HOST\"; exit 1)\n set -o errexit\n \n BEGIN_FOLD configure\n-DOCKER_EXEC ./configure --cache-file=../config.cache $BITCOIN_CONFIG_ALL $BITCOIN_CONFIG || ( cat config.log && false)\n+DOCKER_EXEC ./configure --cache-file=../config.cache $BITCOIN_CONFIG_ALL $BITCOIN_CONFIG || ( (DOCKER_EXEC cat config.log) && false)\n END_FOLD\n \n set -o errtrace"
      },
      {
        "sha": "fa2a0f2f0e198bd26eed050bd594bac051c56978",
        "filename": "ci/test/06_script_b.sh",
        "status": "modified",
        "additions": 0,
        "deletions": 4,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa00393bce0c6128c6188afc7a1d50cc01b0277f/ci/test/06_script_b.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa00393bce0c6128c6188afc7a1d50cc01b0277f/ci/test/06_script_b.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/ci/test/06_script_b.sh?ref=fa00393bce0c6128c6188afc7a1d50cc01b0277f",
        "patch": "@@ -48,7 +48,3 @@ if [ \"$RUN_FUZZ_TESTS\" = \"true\" ]; then\n   DOCKER_EXEC test/fuzz/test_runner.py -l DEBUG ${DIR_FUZZ_IN}\n   END_FOLD\n fi\n-\n-set +o errexit\n-cd ${BASE_BUILD_DIR} || (echo \"could not enter travis build dir $BASE_BUILD_DIR\"; exit 1)\n-set -o errexit"
      }
    ]
  },
  {
    "sha": "fab133329281cdaa3804585a2cdadd0478fefa4f",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYWIxMzMzMjkyODFjZGFhMzgwNDU4NWEyY2RhZGQwNDc4ZmVmYTRm",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2019-11-09T14:13:30Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2019-11-09T14:12:24Z"
      },
      "message": "ci: Remove git from required packages on host",
      "tree": {
        "sha": "6b6d2c9c7fdb8306012e3d25e1feb81f28630d05",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6b6d2c9c7fdb8306012e3d25e1feb81f28630d05"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fab133329281cdaa3804585a2cdadd0478fefa4f",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUgU4gwAkfgre7QQRHYvv9L/G9xWtvzoc2bxN8OOIne28OJo1oR5xfpma3ltDDYc\n+pehPGtzBjam2jiIuNmx+zrhTulG/wbGlvQ3PXAgdLYXTo8NRfakz848BD+Vyyhg\nJgo+ML98YD9soG9eNE1eItOTpEYnruJNIx4MBT9yCcl0zx7CwgZQy5zbrcu4mkQm\nkVnP13lN3iAolSdYNOVwTiyA+ZNBXH4urNPqK7nf+rPETf0Aj08brJou9u2xod8i\nBkiILTxbYxIpgsvSuELMNhlwOIQ/egN68xHOd8EO1vHLVqYt1JpEPtcSQ80pQc8t\nQ9GJjdqiXnjHlNtoArzDg3eGp30Qm0gSONiCV9fjBhEScRQC/S3BSPB/m4oO6iss\njNDTsiNO98j8cG3p7aRbBwZ78scSYSVWXKi772s3JdofefsfqYM65LmUfMDH+W3g\n40fpmaxk8xN3Ozbbu0JCLmHUOCYadBnfT15IiNHwGHvSg1rHt+Hchb5p4zsoFzvA\nKF7LB+uI\n=0IF4\n-----END PGP SIGNATURE-----",
        "payload": "tree 6b6d2c9c7fdb8306012e3d25e1feb81f28630d05\nparent fa00393bce0c6128c6188afc7a1d50cc01b0277f\nauthor MarcoFalke <falke.marco@gmail.com> 1573308810 -0500\ncommitter MarcoFalke <falke.marco@gmail.com> 1573308744 -0500\n\nci: Remove git from required packages on host\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fab133329281cdaa3804585a2cdadd0478fefa4f",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fab133329281cdaa3804585a2cdadd0478fefa4f",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fab133329281cdaa3804585a2cdadd0478fefa4f/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "fa00393bce0c6128c6188afc7a1d50cc01b0277f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa00393bce0c6128c6188afc7a1d50cc01b0277f",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/fa00393bce0c6128c6188afc7a1d50cc01b0277f"
      }
    ],
    "stats": {
      "total": 14,
      "additions": 7,
      "deletions": 7
    },
    "files": [
      {
        "sha": "c1c7a0c8510284cc9d0ec23bf97be017cfbbe9d9",
        "filename": "ci/README.md",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fab133329281cdaa3804585a2cdadd0478fefa4f/ci/README.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fab133329281cdaa3804585a2cdadd0478fefa4f/ci/README.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/ci/README.md?ref=fab133329281cdaa3804585a2cdadd0478fefa4f",
        "patch": "@@ -12,7 +12,7 @@ To allow for a wide range of tested environments, but also ensure reproducibilit\n requires `docker` to be installed. To install all requirements on Ubuntu, run\n \n ```\n-sudo apt install docker.io bash git\n+sudo apt install docker.io bash\n ```\n \n To run the default test stage,"
      },
      {
        "sha": "2cd2085d013ac4b2b2313376e439dc65729fd933",
        "filename": "ci/test/00_setup_env.sh",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fab133329281cdaa3804585a2cdadd0478fefa4f/ci/test/00_setup_env.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fab133329281cdaa3804585a2cdadd0478fefa4f/ci/test/00_setup_env.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/ci/test/00_setup_env.sh?ref=fab133329281cdaa3804585a2cdadd0478fefa4f",
        "patch": "@@ -41,7 +41,7 @@ export BASE_BUILD_DIR=${BASE_BUILD_DIR:-$BASE_ROOT_DIR}\n export BASE_OUTDIR=${BASE_OUTDIR:-$BASE_BUILD_DIR/out/$HOST}\n export SDK_URL=${SDK_URL:-https://bitcoincore.org/depends-sources/sdks}\n export WINEDEBUG=${WINEDEBUG:-fixme-all}\n-export DOCKER_PACKAGES=${DOCKER_PACKAGES:-build-essential libtool autotools-dev automake pkg-config bsdmainutils curl ca-certificates ccache python3}\n+export DOCKER_PACKAGES=${DOCKER_PACKAGES:-build-essential libtool autotools-dev automake pkg-config bsdmainutils curl ca-certificates ccache python3 git}\n export GOAL=${GOAL:-install}\n export DIR_QA_ASSETS=${DIR_QA_ASSETS:-${BASE_BUILD_DIR}/qa-assets}\n export PATH=${BASE_ROOT_DIR}/ci/retry:$PATH"
      },
      {
        "sha": "109f9c0b27297b01e03f0f4c2567c2fd211180e8",
        "filename": "ci/test/04_install.sh",
        "status": "modified",
        "additions": 5,
        "deletions": 5,
        "changes": 10,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fab133329281cdaa3804585a2cdadd0478fefa4f/ci/test/04_install.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fab133329281cdaa3804585a2cdadd0478fefa4f/ci/test/04_install.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/ci/test/04_install.sh?ref=fab133329281cdaa3804585a2cdadd0478fefa4f",
        "patch": "@@ -35,11 +35,6 @@ fi\n mkdir -p \"${BASE_SCRATCH_DIR}\"\n mkdir -p \"${CCACHE_DIR}\"\n \n-if [ ! -d ${DIR_QA_ASSETS} ]; then\n-  git clone https://github.com/bitcoin-core/qa-assets ${DIR_QA_ASSETS}\n-fi\n-export DIR_FUZZ_IN=${DIR_QA_ASSETS}/fuzz_seed_corpus/\n-\n export ASAN_OPTIONS=\"detect_stack_use_after_return=1\"\n export LSAN_OPTIONS=\"suppressions=${BASE_BUILD_DIR}/test/sanitizer_suppressions/lsan\"\n export TSAN_OPTIONS=\"suppressions=${BASE_BUILD_DIR}/test/sanitizer_suppressions/tsan:log_path=${BASE_BUILD_DIR}/sanitizer-output/tsan\"\n@@ -84,6 +79,11 @@ if [ \"$TRAVIS_OS_NAME\" != \"osx\" ]; then\n   ${CI_RETRY_EXE} DOCKER_EXEC apt-get install --no-install-recommends --no-upgrade -y $PACKAGES $DOCKER_PACKAGES\n fi\n \n+if [ ! -d ${DIR_QA_ASSETS} ]; then\n+  DOCKER_EXEC git clone https://github.com/bitcoin-core/qa-assets ${DIR_QA_ASSETS}\n+fi\n+export DIR_FUZZ_IN=${DIR_QA_ASSETS}/fuzz_seed_corpus/\n+\n DOCKER_EXEC mkdir -p \"${BASE_BUILD_DIR}/sanitizer-output/\"\n \n if [ \"$USE_BUSY_BOX\" = \"true\" ]; then"
      }
    ]
  },
  {
    "sha": "fa493ef08830efe493150d07411af85518959804",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYTQ5M2VmMDg4MzBlZmU0OTMxNTBkMDc0MTFhZjg1NTE4OTU5ODA0",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2019-11-09T14:20:41Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2019-11-09T14:13:41Z"
      },
      "message": "ci: Make ci system read-only on the git work tree",
      "tree": {
        "sha": "2a86533d2c5f332482b6c764af42f3267faeb263",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2a86533d2c5f332482b6c764af42f3267faeb263"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa493ef08830efe493150d07411af85518959804",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUgu1QwAkGW3HgWdD038TBza590Ru+CNrWMq5N6qBm+ERnBFXsnURrniE9OkcjNx\nAJaogrrLt7q9+CP+h8ymKGyFxrUMfN5rV1d7biIc18dC1FF8vPg2ZmPJdzXdkZjo\nqdoHe4cNX7UpfmmoF0Maf7VCb0BR16K7U6PkkwIWdvs5z54mZPEE5XN3X37xQc+j\ncXeDbfkLXLIGWVQOIpu1Y9celSLv/ggXrt+7hFg3EiUzUr6ClEIN8RLt5LBbAYZQ\n+9Tn++9yjoi6E3+pP862D2jEIBJZqIl5fXdcvMpiqp+Rg6GQDfyvgnBau7X3ot0E\nZ9jAEGx7h1yKPPaWHBGuMLqGfwSlgIvf7LB1H1lIyY8ZKPe4b0S/7Gt6SXinSSvX\ndChyoULAKSvbV203148/GN87ChTNhtpsQAt9MLh42awKX039V3G1yG95Dc0mqQ+C\nkU8JQRIn0bhUhtdIdCWYbQtwG6uWIc6Ul7TJz2l9ngOuFQi8/5J/4hMlGGPEWXJ8\nWP34MnH4\n=XAxj\n-----END PGP SIGNATURE-----",
        "payload": "tree 2a86533d2c5f332482b6c764af42f3267faeb263\nparent fab133329281cdaa3804585a2cdadd0478fefa4f\nauthor MarcoFalke <falke.marco@gmail.com> 1573309241 -0500\ncommitter MarcoFalke <falke.marco@gmail.com> 1573308821 -0500\n\nci: Make ci system read-only on the git work tree\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa493ef08830efe493150d07411af85518959804",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fa493ef08830efe493150d07411af85518959804",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa493ef08830efe493150d07411af85518959804/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "fab133329281cdaa3804585a2cdadd0478fefa4f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fab133329281cdaa3804585a2cdadd0478fefa4f",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/fab133329281cdaa3804585a2cdadd0478fefa4f"
      }
    ],
    "stats": {
      "total": 15,
      "additions": 13,
      "deletions": 2
    },
    "files": [
      {
        "sha": "58206dab59b54774e45b130b6ca471f1462e2b56",
        "filename": "ci/test/00_setup_env.sh",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa493ef08830efe493150d07411af85518959804/ci/test/00_setup_env.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa493ef08830efe493150d07411af85518959804/ci/test/00_setup_env.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/ci/test/00_setup_env.sh?ref=fa493ef08830efe493150d07411af85518959804",
        "patch": "@@ -41,7 +41,7 @@ export BASE_BUILD_DIR=${BASE_BUILD_DIR:-$BASE_ROOT_DIR}\n export BASE_OUTDIR=${BASE_OUTDIR:-$BASE_BUILD_DIR/out/$HOST}\n export SDK_URL=${SDK_URL:-https://bitcoincore.org/depends-sources/sdks}\n export WINEDEBUG=${WINEDEBUG:-fixme-all}\n-export DOCKER_PACKAGES=${DOCKER_PACKAGES:-build-essential libtool autotools-dev automake pkg-config bsdmainutils curl ca-certificates ccache python3 git}\n+export DOCKER_PACKAGES=${DOCKER_PACKAGES:-build-essential libtool autotools-dev automake pkg-config bsdmainutils curl ca-certificates ccache python3 rsync git}\n export GOAL=${GOAL:-install}\n export DIR_QA_ASSETS=${DIR_QA_ASSETS:-${BASE_BUILD_DIR}/qa-assets}\n export PATH=${BASE_ROOT_DIR}/ci/retry:$PATH"
      },
      {
        "sha": "8f8317f93da21709874aee369689ec28608264a4",
        "filename": "ci/test/04_install.sh",
        "status": "modified",
        "additions": 12,
        "deletions": 1,
        "changes": 13,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa493ef08830efe493150d07411af85518959804/ci/test/04_install.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa493ef08830efe493150d07411af85518959804/ci/test/04_install.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/ci/test/04_install.sh?ref=fa493ef08830efe493150d07411af85518959804",
        "patch": "@@ -50,7 +50,13 @@ if [ -z \"$RUN_CI_ON_HOST\" ]; then\n   echo \"Creating $DOCKER_NAME_TAG container to run in\"\n   ${CI_RETRY_EXE} docker pull \"$DOCKER_NAME_TAG\"\n \n-  DOCKER_ID=$(docker run $DOCKER_ADMIN -idt --mount type=bind,src=$BASE_BUILD_DIR,dst=$BASE_BUILD_DIR --mount type=bind,src=$CCACHE_DIR,dst=$CCACHE_DIR -w $BASE_BUILD_DIR --env-file /tmp/env $DOCKER_NAME_TAG)\n+  DOCKER_ID=$(docker run $DOCKER_ADMIN -idt \\\n+                  --mount type=bind,src=$BASE_BUILD_DIR,dst=/ro_base,readonly \\\n+                  --mount type=bind,src=$CCACHE_DIR,dst=$CCACHE_DIR \\\n+                  --mount type=bind,src=$BASE_BUILD_DIR/depends,dst=$BASE_BUILD_DIR/depends \\\n+                  -w $BASE_BUILD_DIR \\\n+                  --env-file /tmp/env \\\n+                  $DOCKER_NAME_TAG)\n \n   DOCKER_EXEC () {\n     docker exec $DOCKER_ID bash -c \"export PATH=$BASE_SCRATCH_DIR/bins/:\\$PATH && cd $PWD && $*\"\n@@ -86,6 +92,11 @@ export DIR_FUZZ_IN=${DIR_QA_ASSETS}/fuzz_seed_corpus/\n \n DOCKER_EXEC mkdir -p \"${BASE_BUILD_DIR}/sanitizer-output/\"\n \n+if [ -z \"$RUN_CI_ON_HOST\" ]; then\n+  echo \"Create $BASE_BUILD_DIR\"\n+  DOCKER_EXEC rsync -a /ro_base/ $BASE_BUILD_DIR\n+fi\n+\n if [ \"$USE_BUSY_BOX\" = \"true\" ]; then\n   echo \"Setup to use BusyBox utils\"\n   DOCKER_EXEC mkdir -p $BASE_SCRATCH_DIR/bins/"
      }
    ]
  },
  {
    "sha": "fa7523d3aa75b0266015af59901c2397b52265b5",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYTc1MjNkM2FhNzViMDI2NjAxNWFmNTk5MDFjMjM5N2I1MjI2NWI1",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2019-11-11T03:38:02Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2019-11-11T03:30:13Z"
      },
      "message": "ci: Extend docs",
      "tree": {
        "sha": "d68757b2b75423406476da8fd7bf13de74e5a41c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d68757b2b75423406476da8fd7bf13de74e5a41c"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa7523d3aa75b0266015af59901c2397b52265b5",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUgFyAv/YC2aWb6aahMHjdzL8Pdldy05IeMcvlfG5u7JY/EPAhlwPLsB3h1ckzZ+\nvWxfSVtsdVW17d2DTYXO67so9bEnhU9ERVG5zfpTqPTWUOqtx/T1/Jia08oLNx0X\nDfzFM3hTkYQ0lxAYcC+SIhauEZYZe/gUn1/L4NZhgfiWo4iLKh+60N6uH7d2JQAp\nZjSWhBFRVn63u+X89aaEbgR21qehq+ksBLrY0s1QEzyEKmmYbU1usWlunebFiyHv\n8A3bRp2NlPrzcW/D5gsbjGmRvcWbJ+ZdY4aZdGqRiqo253uPgqvHuFnlEjO1F1Hq\nPflCZsGTvwYnPgdVfnznMB8E6FB8R65H+oBEc5fWkVDkocbWDnx4d6D8rS+RdK69\n2emypehhdLzzK1ISmPRS9qXm0abdgIof7owTZunwPpnTpv5q9HFGfJAMO0XvmN21\nS6peDk8VKo9h+r3je2Dx9lbLFQhKLwj1uNRaZ2yxzzrnkTYNWSWvq0iM3ciR/eg+\nnaXbhv2l\n=HvNy\n-----END PGP SIGNATURE-----",
        "payload": "tree d68757b2b75423406476da8fd7bf13de74e5a41c\nparent fa493ef08830efe493150d07411af85518959804\nauthor MarcoFalke <falke.marco@gmail.com> 1573443482 -0500\ncommitter MarcoFalke <falke.marco@gmail.com> 1573443013 -0500\n\nci: Extend docs\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa7523d3aa75b0266015af59901c2397b52265b5",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fa7523d3aa75b0266015af59901c2397b52265b5",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa7523d3aa75b0266015af59901c2397b52265b5/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "fa493ef08830efe493150d07411af85518959804",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa493ef08830efe493150d07411af85518959804",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/fa493ef08830efe493150d07411af85518959804"
      }
    ],
    "stats": {
      "total": 13,
      "additions": 10,
      "deletions": 3
    },
    "files": [
      {
        "sha": "880e49b4595a3fcb92ffd580d56ebe173af2575b",
        "filename": "ci/README.md",
        "status": "modified",
        "additions": 10,
        "deletions": 3,
        "changes": 13,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa7523d3aa75b0266015af59901c2397b52265b5/ci/README.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa7523d3aa75b0266015af59901c2397b52265b5/ci/README.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/ci/README.md?ref=fa7523d3aa75b0266015af59901c2397b52265b5",
        "patch": "@@ -8,6 +8,16 @@ and numbered according to which stage and lifecycle step it belongs to.\n \n ### Running a stage locally\n \n+Be aware that the tests will be built and run in-place, so please run at your own risk.\n+If the repository is not a fresh git clone, you might have to clean files from previous builds or test runs first.\n+\n+The ci needs to perform various sysadmin tasks such as installing packages or writing to the user's home directory.\n+While most of the actions are done inside a docker container, this is not possible for all. Thus, cache directories,\n+such as the depends cache or ccache, are mounted as read-write into the docker container. While it should be fine to run\n+the ci system locally on you development box, the ci scripts can generally be assumed to have received less review and\n+testing compared to other parts of the codebase. If you want to keep the work tree clean, you might want to run the ci\n+system in a virtual machine with a Linux operating system of your choice.\n+\n To allow for a wide range of tested environments, but also ensure reproducibility to some extent, the test stage\n requires `docker` to be installed. To install all requirements on Ubuntu, run\n \n@@ -26,6 +36,3 @@ To run the test stage with a specific configuration,\n ```\n FILE_ENV=\"./ci/test/00_setup_env_arm.sh\" ./ci/test_run_all.sh\n ```\n-\n-Be aware that the tests will be build and run in-place, so please run at your own risk.\n-If the repository is not a fresh git clone, you might have to clean files from previous builds or test runs first."
      }
    ]
  }
]