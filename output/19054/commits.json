[
  {
    "sha": "3a03a11e8c696e2164b8bb221a4a35a7c3ac4d6d",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzozYTAzYTExZThjNjk2ZTIxNjRiOGJiMjIxYTRhMzVhN2MzYWM0ZDZk",
    "commit": {
      "author": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2020-05-22T17:42:35Z"
      },
      "committer": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2020-06-15T14:58:31Z"
      },
      "message": "Skip hdKeypath of 'm'\n\nPreviously the seed was stored with keypath 'm' so we need to skip this\nas well when determining inactive seeds.",
      "tree": {
        "sha": "73d5d165c2ec75219a930ac7fa1287367bc674c3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/73d5d165c2ec75219a930ac7fa1287367bc674c3"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3a03a11e8c696e2164b8bb221a4a35a7c3ac4d6d",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3a03a11e8c696e2164b8bb221a4a35a7c3ac4d6d",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/3a03a11e8c696e2164b8bb221a4a35a7c3ac4d6d",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3a03a11e8c696e2164b8bb221a4a35a7c3ac4d6d/comments",
    "author": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "b5c423c48e094bd098e11c3d1f57acae7502a4da",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b5c423c48e094bd098e11c3d1f57acae7502a4da",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/b5c423c48e094bd098e11c3d1f57acae7502a4da"
      }
    ],
    "stats": {
      "total": 5,
      "additions": 3,
      "deletions": 2
    },
    "files": [
      {
        "sha": "23993a3a53907181ce8351a4330c92263fd37506",
        "filename": "src/wallet/walletdb.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 2,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/3a03a11e8c696e2164b8bb221a4a35a7c3ac4d6d/src/wallet/walletdb.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/3a03a11e8c696e2164b8bb221a4a35a7c3ac4d6d/src/wallet/walletdb.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/walletdb.cpp?ref=3a03a11e8c696e2164b8bb221a4a35a7c3ac4d6d",
        "patch": "@@ -441,10 +441,11 @@ ReadKeyValue(CWallet* pwallet, CDataStream& ssKey, CDataStream& ssValue,\n             // Extract some CHDChain info from this metadata if it has any\n             if (keyMeta.nVersion >= CKeyMetadata::VERSION_WITH_HDDATA && !keyMeta.hd_seed_id.IsNull() && keyMeta.hdKeypath.size() > 0) {\n                 // Get the path from the key origin or from the path string\n-                // Not applicable when path is \"s\" as that indicates a seed\n+                // Not applicable when path is \"s\" or \"m\" as those indicate a seed\n+                // See https://github.com/bitcoin/bitcoin/pull/12924\n                 bool internal = false;\n                 uint32_t index = 0;\n-                if (keyMeta.hdKeypath != \"s\") {\n+                if (keyMeta.hdKeypath != \"s\" && keyMeta.hdKeypath != \"m\") {\n                     std::vector<uint32_t> path;\n                     if (keyMeta.has_key_origin) {\n                         // We have a key origin, so pull it from its path vector"
      }
    ]
  },
  {
    "sha": "951bca61d7376be44fad0775e8abb06ff667e4bf",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo5NTFiY2E2MWQ3Mzc2YmU0NGZhZDA3NzVlOGFiYjA2ZmY2NjdlNGJm",
    "commit": {
      "author": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2020-05-22T18:39:52Z"
      },
      "committer": {
        "name": "Andrew Chow",
        "email": "achow101-github@achow101.com",
        "date": "2020-06-15T15:01:57Z"
      },
      "message": "tests: feature_backwards_compatibility.py test 0.16 up/downgrade",
      "tree": {
        "sha": "b11ee901c6e21a867ffb059a614d0a85f7612ef6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b11ee901c6e21a867ffb059a614d0a85f7612ef6"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/951bca61d7376be44fad0775e8abb06ff667e4bf",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/951bca61d7376be44fad0775e8abb06ff667e4bf",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/951bca61d7376be44fad0775e8abb06ff667e4bf",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/951bca61d7376be44fad0775e8abb06ff667e4bf/comments",
    "author": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "3a03a11e8c696e2164b8bb221a4a35a7c3ac4d6d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3a03a11e8c696e2164b8bb221a4a35a7c3ac4d6d",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/3a03a11e8c696e2164b8bb221a4a35a7c3ac4d6d"
      }
    ],
    "stats": {
      "total": 33,
      "additions": 33,
      "deletions": 0
    },
    "files": [
      {
        "sha": "bac38811251ade0de86173b8388e8e862d5cc40c",
        "filename": "test/functional/feature_backwards_compatibility.py",
        "status": "modified",
        "additions": 33,
        "deletions": 0,
        "changes": 33,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/951bca61d7376be44fad0775e8abb06ff667e4bf/test/functional/feature_backwards_compatibility.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/951bca61d7376be44fad0775e8abb06ff667e4bf/test/functional/feature_backwards_compatibility.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/feature_backwards_compatibility.py?ref=951bca61d7376be44fad0775e8abb06ff667e4bf",
        "patch": "@@ -322,6 +322,15 @@ def run_test(self):\n         info = wallet.getwalletinfo()\n         assert info['keypoolsize'] == 1\n \n+        # Create upgrade wallet in v0.16\n+        self.stop_node(-1)\n+        self.start_node(-1, extra_args=[\"-wallet=u1_v16\"])\n+        wallet = node_v16.get_wallet_rpc(\"u1_v16\")\n+        v16_addr = wallet.getnewaddress('', \"bech32\")\n+        v16_info = wallet.validateaddress(v16_addr)\n+        v16_pubkey = v16_info['pubkey']\n+        self.stop_node(-1)\n+\n         self.log.info(\"Test wallet upgrade path...\")\n         # u1: regular wallet, created with v0.17\n         node_v17.rpc.createwallet(wallet_name=\"u1_v17\")\n@@ -331,6 +340,30 @@ def run_test(self):\n         hdkeypath = v17_info[\"hdkeypath\"]\n         pubkey = v17_info[\"pubkey\"]\n \n+        # Copy the 0.16 wallet to the last Bitcoin Core version and open it:\n+        shutil.copyfile(\n+            os.path.join(node_v16_wallets_dir, \"wallets/u1_v16\"),\n+            os.path.join(node_master_wallets_dir, \"u1_v16\")\n+        )\n+        load_res = node_master.loadwallet(\"u1_v16\")\n+        # Make sure this wallet opens without warnings. See https://github.com/bitcoin/bitcoin/pull/19054\n+        assert_equal(load_res['warning'], '')\n+        wallet = node_master.get_wallet_rpc(\"u1_v16\")\n+        info = wallet.getaddressinfo(v16_addr)\n+        descriptor = \"wpkh([\" + info[\"hdmasterfingerprint\"] + hdkeypath[1:] + \"]\" + v16_pubkey + \")\"\n+        assert_equal(info[\"desc\"], descsum_create(descriptor))\n+\n+        # Now copy that same wallet back to 0.16 to make sure no automatic upgrade breaks it\n+        os.remove(os.path.join(node_v16_wallets_dir, \"wallets/u1_v16\"))\n+        shutil.copyfile(\n+            os.path.join(node_master_wallets_dir, \"u1_v16\"),\n+            os.path.join(node_v16_wallets_dir, \"wallets/u1_v16\")\n+        )\n+        self.start_node(-1, extra_args=[\"-wallet=u1_v16\"])\n+        wallet = node_v16.get_wallet_rpc(\"u1_v16\")\n+        info = wallet.validateaddress(v16_addr)\n+        assert_equal(info, v16_info)\n+\n         # Copy the 0.17 wallet to the last Bitcoin Core version and open it:\n         node_v17.unloadwallet(\"u1_v17\")\n         shutil.copytree("
      }
    ]
  }
]