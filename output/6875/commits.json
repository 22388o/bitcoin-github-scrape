[
  {
    "sha": "27252b73894d00f9dbe27b664159b2a999683069",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyNzI1MmI3Mzg5NGQwMGY5ZGJlMjdiNjY0MTU5YjJhOTk5NjgzMDY5",
    "commit": {
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2015-10-23T02:50:01Z"
      },
      "committer": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2015-10-23T02:50:01Z"
      },
      "message": "Fix pre-push-hook regexes",
      "tree": {
        "sha": "ae6de034486e9a3b01c058a998b56474238c3752",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ae6de034486e9a3b01c058a998b56474238c3752"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/27252b73894d00f9dbe27b664159b2a999683069",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/27252b73894d00f9dbe27b664159b2a999683069",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/27252b73894d00f9dbe27b664159b2a999683069",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/27252b73894d00f9dbe27b664159b2a999683069/comments",
    "author": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "f2c869aef2e717ba61b9335f198322f6a4d1a12d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f2c869aef2e717ba61b9335f198322f6a4d1a12d",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/f2c869aef2e717ba61b9335f198322f6a4d1a12d"
      }
    ],
    "stats": {
      "total": 2,
      "additions": 1,
      "deletions": 1
    },
    "files": [
      {
        "sha": "c57222818ab8a3deb8a78a338e6792f204f97c91",
        "filename": "contrib/verify-commits/pre-push-hook.sh",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/27252b73894d00f9dbe27b664159b2a999683069/contrib/verify-commits/pre-push-hook.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/27252b73894d00f9dbe27b664159b2a999683069/contrib/verify-commits/pre-push-hook.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/verify-commits/pre-push-hook.sh?ref=27252b73894d00f9dbe27b664159b2a999683069",
        "patch": "@@ -1,5 +1,5 @@\n #!/bin/bash\n-if ! [[ \"$2\" =~ [git@]?[www.]?github.com[:|/]bitcoin/bitcoin[.git]? ]]; then\n+if ! [[ \"$2\" =~ ^(git@)?(www.)?github.com(:|/)bitcoin/bitcoin(.git)?$ ]]; then\n     exit 0\n fi\n "
      }
    ]
  },
  {
    "sha": "1d94b72019e31066b33947af5709383b8075e43a",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoxZDk0YjcyMDE5ZTMxMDY2YjMzOTQ3YWY1NzA5MzgzYjgwNzVlNDNh",
    "commit": {
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2015-10-23T09:05:42Z"
      },
      "committer": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2015-10-23T09:05:42Z"
      },
      "message": "Whitelist commits signed with Pieter's now-revoked key",
      "tree": {
        "sha": "e83ac333adc4b84830cc4482bcee2abde9a15e26",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e83ac333adc4b84830cc4482bcee2abde9a15e26"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1d94b72019e31066b33947af5709383b8075e43a",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1d94b72019e31066b33947af5709383b8075e43a",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/1d94b72019e31066b33947af5709383b8075e43a",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1d94b72019e31066b33947af5709383b8075e43a/comments",
    "author": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "27252b73894d00f9dbe27b664159b2a999683069",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/27252b73894d00f9dbe27b664159b2a999683069",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/27252b73894d00f9dbe27b664159b2a999683069"
      }
    ],
    "stats": {
      "total": 36,
      "additions": 34,
      "deletions": 2
    },
    "files": [
      {
        "sha": "31aeb8f3d38bb6004a891cea0aa04ed51a4a5973",
        "filename": "contrib/verify-commits/allow-revsig-commits",
        "status": "added",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/1d94b72019e31066b33947af5709383b8075e43a/contrib/verify-commits/allow-revsig-commits",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/1d94b72019e31066b33947af5709383b8075e43a/contrib/verify-commits/allow-revsig-commits",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/verify-commits/allow-revsig-commits?ref=1d94b72019e31066b33947af5709383b8075e43a",
        "patch": "@@ -0,0 +1,2 @@\n+586a29253dabec3ca0f1ccba9091daabd16b8411\n+eddaba7b5692288087a926da5733e86b47274e4e"
      },
      {
        "sha": "0218b82e11dd3bf8cc1fb8f5d24f4704c9a2cfc0",
        "filename": "contrib/verify-commits/gpg.sh",
        "status": "modified",
        "additions": 20,
        "deletions": 2,
        "changes": 22,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/1d94b72019e31066b33947af5709383b8075e43a/contrib/verify-commits/gpg.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/1d94b72019e31066b33947af5709383b8075e43a/contrib/verify-commits/gpg.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/verify-commits/gpg.sh?ref=1d94b72019e31066b33947af5709383b8075e43a",
        "patch": "@@ -1,15 +1,33 @@\n #!/bin/sh\n INPUT=$(</dev/stdin)\n VALID=false\n+REVSIG=false\n IFS=$'\\n'\n for LINE in $(echo \"$INPUT\" | gpg --trust-model always \"$@\" 2>/dev/null); do\n-\tcase \"$LINE\" in \"[GNUPG:] VALIDSIG\"*)\n+\tcase \"$LINE\" in\n+\t\"[GNUPG:] VALIDSIG \"*)\n \t\twhile read KEY; do\n \t\t\tcase \"$LINE\" in \"[GNUPG:] VALIDSIG $KEY \"*) VALID=true;; esac\n \t\tdone < ./contrib/verify-commits/trusted-keys\n+\t\t;;\n+\t\"[GNUPG:] REVKEYSIG \"*)\n+\t\t[ \"$BITCOIN_VERIFY_COMMITS_ALLOW_REVSIG\" != 1 ] && exit 1\n+\t\twhile read KEY; do\n+\t\t\tcase \"$LINE\" in \"[GNUPG:] REVKEYSIG ${KEY:24:40} \"*)\n+\t\t\t\tREVSIG=true\n+\t\t\t\tGOODREVSIG=\"[GNUPG:] GOODSIG ${KEY:24:40} \"\n+\t\t\t\t;;\n+\t\t\tesac\n+\t\tdone < ./contrib/verify-commits/trusted-keys\n+\t\t;;\n \tesac\n done\n if ! $VALID; then\n \texit 1\n fi\n-echo \"$INPUT\" | gpg --trust-model always \"$@\" 2>/dev/null\n+if $VALID && $REVSIG; then\n+\techo \"$INPUT\" | gpg --trust-model always \"$@\" | grep \"\\[GNUPG:\\] \\(NEWSIG\\|SIG_ID\\|VALIDSIG\\)\" 2>/dev/null\n+\techo \"$GOODREVSIG\"\n+else\n+\techo \"$INPUT\" | gpg --trust-model always \"$@\" 2>/dev/null\n+fi"
      },
      {
        "sha": "9ba781008a6585699bdf515a52e340f9c56d10a8",
        "filename": "contrib/verify-commits/verify-commits.sh",
        "status": "modified",
        "additions": 12,
        "deletions": 0,
        "changes": 12,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/1d94b72019e31066b33947af5709383b8075e43a/contrib/verify-commits/verify-commits.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/1d94b72019e31066b33947af5709383b8075e43a/contrib/verify-commits/verify-commits.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/verify-commits/verify-commits.sh?ref=1d94b72019e31066b33947af5709383b8075e43a",
        "patch": "@@ -7,11 +7,23 @@ git log \"$DIR\"\n \n VERIFIED_ROOT=$(cat \"${DIR}/trusted-git-root\")\n \n+IS_REVSIG_ALLOWED () {\n+\twhile read LINE; do\n+\t\t[ \"$LINE\" = \"$1\" ] && return 0\n+\tdone < \"${DIR}/allow-revsig-commits\"\n+\treturn 1\n+}\n+\n HAVE_FAILED=false\n IS_SIGNED () {\n \tif [ $1 = $VERIFIED_ROOT ]; then\n \t\treturn 0;\n \tfi\n+\tif IS_REVSIG_ALLOWED \"$1\"; then\n+\t\texport BITCOIN_VERIFY_COMMITS_ALLOW_REVSIG=1\n+\telse\n+\t\texport BITCOIN_VERIFY_COMMITS_ALLOW_REVSIG=0\n+\tfi\n \tif ! git -c \"gpg.program=${DIR}/gpg.sh\" verify-commit $1 > /dev/null 2>&1; then\n \t\treturn 1;\n \tfi"
      }
    ]
  },
  {
    "sha": "6e800c2b41aca7e4a22d341f1e6dcf722d94e6e1",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo2ZTgwMGMyYjQxYWNhN2U0YTIyZDM0MWYxZTZkY2Y3MjJkOTRlNmUx",
    "commit": {
      "author": {
        "name": "Matt Corallo",
        "email": "matt@mattcorallo.com",
        "date": "2015-10-28T00:06:13Z"
      },
      "committer": {
        "name": "Matt Corallo (laptop - only while traveling)",
        "email": "matt@mattcorallo.com",
        "date": "2015-10-28T00:06:13Z"
      },
      "message": "Add Pieter's new PGP key to verify-commits/trusted-keys",
      "tree": {
        "sha": "d3b3943fb5a30ffd7415c5cccc2b7e406e195f5e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d3b3943fb5a30ffd7415c5cccc2b7e406e195f5e"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6e800c2b41aca7e4a22d341f1e6dcf722d94e6e1",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "no_user",
        "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v2\n\niQEcBAABCAAGBQJWMBF1AAoJECr+by8oF5mAPi0H/0GzoykiSYLtKvv0YApZrcv2\nGrnM6lLCzwkdyEpNRrHu4GaiWsSzbzhXgWtZ9ads3XmLC3/xp3RZLyHr906HO7zS\nUVJbhaHQSm5mb35U2nsTOHAn8M8Pl+0IvTl32aIFg/gdzc4iG9sYNmWUzzqTumPS\noc2l7b2wyCJ6uHWKtiUvPeiqf/+7bUzx4nBtDAmuvWH4TD4+0EPNrtZGKQFqEDXB\nrgfO4Fv/WWSpAaA5uHy6SSPfrqqUFrMTwhgqXEwNoE8gYslUlXfcbEtxIb9nDAkm\n6O2w/EHYE2/qrn7TF1Ft0O7G2oN+SROJvV88dGD165g209eFpa2UeDdcxt1qCEU=\n=0A5Z\n-----END PGP SIGNATURE-----",
        "payload": "tree d3b3943fb5a30ffd7415c5cccc2b7e406e195f5e\nparent 1d94b72019e31066b33947af5709383b8075e43a\nauthor Matt Corallo <matt@mattcorallo.com> 1445990773 -0700\ncommitter Matt Corallo (laptop - only while traveling) <matt@mattcorallo.com> 1445990773 -0700\n\nAdd Pieter's new PGP key to verify-commits/trusted-keys\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6e800c2b41aca7e4a22d341f1e6dcf722d94e6e1",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/6e800c2b41aca7e4a22d341f1e6dcf722d94e6e1",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6e800c2b41aca7e4a22d341f1e6dcf722d94e6e1/comments",
    "author": null,
    "committer": null,
    "parents": [
      {
        "sha": "1d94b72019e31066b33947af5709383b8075e43a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1d94b72019e31066b33947af5709383b8075e43a",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/1d94b72019e31066b33947af5709383b8075e43a"
      }
    ],
    "stats": {
      "total": 1,
      "additions": 1,
      "deletions": 0
    },
    "files": [
      {
        "sha": "a0dce7a8a527303445fc530a64e327b697006a6a",
        "filename": "contrib/verify-commits/trusted-keys",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6e800c2b41aca7e4a22d341f1e6dcf722d94e6e1/contrib/verify-commits/trusted-keys",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6e800c2b41aca7e4a22d341f1e6dcf722d94e6e1/contrib/verify-commits/trusted-keys",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/verify-commits/trusted-keys?ref=6e800c2b41aca7e4a22d341f1e6dcf722d94e6e1",
        "patch": "@@ -3,3 +3,4 @@\n 01CDF4627A3B88AAE4A571C87588242FBE38D3A8\n AF8BE07C7049F3A26B239D5325B3083201782B2F\n 81291FA67D2C379A006A053FEAB5AF94D9E9ABE7\n+133EAC179436F14A5CF1B794860FEB804E669320"
      }
    ]
  }
]