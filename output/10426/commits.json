[
  {
    "sha": "8b22af3ee59f48298b5203b9a38549a0d1dfd326",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo4YjIyYWYzZWU1OWY0ODI5OGI1MjAzYjlhMzg1NDlhMGQxZGZkMzI2",
    "commit": {
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter.wuille@gmail.com",
        "date": "2017-05-18T23:29:29Z"
      },
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter.wuille@gmail.com",
        "date": "2017-06-05T19:43:45Z"
      },
      "message": "Replace bytes_serialized with bogosize",
      "tree": {
        "sha": "f336f8506aa55d37d7ac28936f3cc2ab8a9ce339",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f336f8506aa55d37d7ac28936f3cc2ab8a9ce339"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8b22af3ee59f48298b5203b9a38549a0d1dfd326",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8b22af3ee59f48298b5203b9a38549a0d1dfd326",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/8b22af3ee59f48298b5203b9a38549a0d1dfd326",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8b22af3ee59f48298b5203b9a38549a0d1dfd326/comments",
    "author": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "7cc2c670e3d7cf26454ac8547a94ec2c8ca90b34",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7cc2c670e3d7cf26454ac8547a94ec2c8ca90b34",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/7cc2c670e3d7cf26454ac8547a94ec2c8ca90b34"
      }
    ],
    "stats": {
      "total": 18,
      "additions": 16,
      "deletions": 2
    },
    "files": [
      {
        "sha": "a13ede2dd584c7950287b50186844db9a269d6ab",
        "filename": "doc/release-notes.md",
        "status": "modified",
        "additions": 6,
        "deletions": 0,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8b22af3ee59f48298b5203b9a38549a0d1dfd326/doc/release-notes.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8b22af3ee59f48298b5203b9a38549a0d1dfd326/doc/release-notes.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/doc/release-notes.md?ref=8b22af3ee59f48298b5203b9a38549a0d1dfd326",
        "patch": "@@ -42,9 +42,15 @@ Low-level RPC changes\n   - The `gettxoutsetinfo` RPC reports `hash_serialized_2` instead of `hash_serialized`,\n     which does not commit to the transaction versions of unspent outputs, but does\n     commit to the height and coinbase information.\n+  - The `gettxoutsetinfo` response now contains `disk_size` and `bogosize` instead of\n+    `bytes_serialized`. The first is a more accurate estimate of actual disk usage, but\n+    is not deterministic. The second is unrelated to disk usage, but is a\n+    database-independent metric of UTXO set size: it counts every UTXO entry as 50 + the\n+    length of its scriptPubKey.\n   - The `getutxos` REST path no longer reports the `txvers` field in JSON format,\n     and always reports 0 for transaction versions in the binary format\n \n+\n - Error codes have been updated to be more accurate for the following error cases:\n   - `getblock` now returns RPC_MISC_ERROR if the block can't be found on disk (for\n   example if the block has been pruned). Previously returned RPC_INTERNAL_ERROR."
      },
      {
        "sha": "b66c1c2b64c79893cac1cbe506590dff1eb822cf",
        "filename": "src/rpc/blockchain.cpp",
        "status": "modified",
        "additions": 7,
        "deletions": 2,
        "changes": 9,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8b22af3ee59f48298b5203b9a38549a0d1dfd326/src/rpc/blockchain.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8b22af3ee59f48298b5203b9a38549a0d1dfd326/src/rpc/blockchain.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/blockchain.cpp?ref=8b22af3ee59f48298b5203b9a38549a0d1dfd326",
        "patch": "@@ -781,11 +781,12 @@ struct CCoinsStats\n     uint256 hashBlock;\n     uint64_t nTransactions;\n     uint64_t nTransactionOutputs;\n+    uint64_t nBogoSize;\n     uint256 hashSerialized;\n     uint64_t nDiskSize;\n     CAmount nTotalAmount;\n \n-    CCoinsStats() : nHeight(0), nTransactions(0), nTransactionOutputs(0), nTotalAmount(0) {}\n+    CCoinsStats() : nHeight(0), nTransactions(0), nTransactionOutputs(0), nBogoSize(0), nDiskSize(0), nTotalAmount(0) {}\n };\n \n static void ApplyStats(CCoinsStats &stats, CHashWriter& ss, const uint256& hash, const std::map<uint32_t, Coin>& outputs)\n@@ -800,6 +801,8 @@ static void ApplyStats(CCoinsStats &stats, CHashWriter& ss, const uint256& hash,\n         ss << VARINT(output.second.out.nValue);\n         stats.nTransactionOutputs++;\n         stats.nTotalAmount += output.second.out.nValue;\n+        stats.nBogoSize += 32 /* txid */ + 4 /* vout index */ + 4 /* height + coinbase */ + 8 /* amount */ +\n+                           2 /* scriptPubKey len */ + output.second.out.scriptPubKey.size() /* scriptPubKey */;\n     }\n     ss << VARINT(0);\n }\n@@ -904,7 +907,8 @@ UniValue gettxoutsetinfo(const JSONRPCRequest& request)\n             \"  \\\"bestblock\\\": \\\"hex\\\",   (string) the best block hash hex\\n\"\n             \"  \\\"transactions\\\": n,      (numeric) The number of transactions\\n\"\n             \"  \\\"txouts\\\": n,            (numeric) The number of output transactions\\n\"\n-            \"  \\\"hash_serialized\\\": \\\"hash\\\",   (string) The serialized hash\\n\"\n+            \"  \\\"bogosize\\\": n,          (numeric) A meaningless metric for UTXO set size\\n\"\n+            \"  \\\"hash_serialized_2\\\": \\\"hash\\\", (string) The serialized hash\\n\"\n             \"  \\\"disk_size\\\": n,         (numeric) The estimated size of the chainstate on disk\\n\"\n             \"  \\\"total_amount\\\": x.xxx          (numeric) The total amount\\n\"\n             \"}\\n\"\n@@ -922,6 +926,7 @@ UniValue gettxoutsetinfo(const JSONRPCRequest& request)\n         ret.push_back(Pair(\"bestblock\", stats.hashBlock.GetHex()));\n         ret.push_back(Pair(\"transactions\", (int64_t)stats.nTransactions));\n         ret.push_back(Pair(\"txouts\", (int64_t)stats.nTransactionOutputs));\n+        ret.push_back(Pair(\"bogosize\", (int64_t)stats.nBogoSize));\n         ret.push_back(Pair(\"hash_serialized_2\", stats.hashSerialized.GetHex()));\n         ret.push_back(Pair(\"disk_size\", stats.nDiskSize));\n         ret.push_back(Pair(\"total_amount\", ValueFromAmount(stats.nTotalAmount)));"
      },
      {
        "sha": "2a260b6ed3d0e09c3ed47c3f68d213167c994116",
        "filename": "test/functional/blockchain.py",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8b22af3ee59f48298b5203b9a38549a0d1dfd326/test/functional/blockchain.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8b22af3ee59f48298b5203b9a38549a0d1dfd326/test/functional/blockchain.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/blockchain.py?ref=8b22af3ee59f48298b5203b9a38549a0d1dfd326",
        "patch": "@@ -49,6 +49,7 @@ def _test_gettxoutsetinfo(self):\n         assert_equal(res['transactions'], 200)\n         assert_equal(res['height'], 200)\n         assert_equal(res['txouts'], 200)\n+        assert_equal(res['bogosize'], 17000),\n         assert_equal(res['bestblock'], node.getblockhash(200))\n         size = res['disk_size']\n         assert size > 6400\n@@ -65,6 +66,7 @@ def _test_gettxoutsetinfo(self):\n         assert_equal(res2['total_amount'], Decimal('0'))\n         assert_equal(res2['height'], 0)\n         assert_equal(res2['txouts'], 0)\n+        assert_equal(res2['bogosize'], 0),\n         assert_equal(res2['bestblock'], node.getblockhash(0))\n         assert_equal(len(res2['hash_serialized_2']), 64)\n \n@@ -76,6 +78,7 @@ def _test_gettxoutsetinfo(self):\n         assert_equal(res['transactions'], res3['transactions'])\n         assert_equal(res['height'], res3['height'])\n         assert_equal(res['txouts'], res3['txouts'])\n+        assert_equal(res['bogosize'], res3['bogosize'])\n         assert_equal(res['bestblock'], res3['bestblock'])\n         assert_equal(res['hash_serialized_2'], res3['hash_serialized_2'])\n "
      }
    ]
  }
]