jonasschnelli,2017-03-09T07:47:20Z,"Concept ACK.\nWhat about using ...\n```\n|--test\n   |---rpc-tests\n```\ninstead of\n```\n|--test\n   |---qa\n```\n?\n",https://github.com/bitcoin/bitcoin/pull/9956#issuecomment-285278982,285278982,
sipa,2017-03-09T07:57:04Z,@jonasschnelli It doesn't contain purely RPC tests anymore (also P2P and REST).\n\n@jnewberry Why is runner separate? My #1 complaint about the current structure is that the runner is in a separate directory.,https://github.com/bitcoin/bitcoin/pull/9956#issuecomment-285280792,285280792,
laanwj,2017-03-09T08:52:30Z,"Concept ACK. New structure looks good to me.\n\nAgree that there's no need for the runner to be separate. It can go with the other Python code.\n\n> @jonasschnelli It doesn't contain purely RPC tests anymore (also P2P and REST).\n\nIndeed. These are ""functional tests"" or ""integration tests"" in contrast to the ""unit tests"" which are part of the C++ source code. They make use of RPC, but that ",https://github.com/bitcoin/bitcoin/pull/9956#issuecomment-285291504,285291504,
jonasschnelli,2017-03-09T10:21:13Z,"> Indeed. These are ""functional tests"" or ""integration tests"" in contrast to the ""unit tests"" which are part of the C++ source code. They make use of RPC, but that doesn't define them, ideally they should test every interface.\n\nOkay. That makes sense.\n\n@jnewbery: I think you need to update `.travis.yml`.\nTested a bit and it seems to work well.",https://github.com/bitcoin/bitcoin/pull/9956#issuecomment-285312746,285312746,
jnewbery,2017-03-09T15:18:10Z,"Thanks everyone for the feedback. I've made the following changes:\n\n- commit 1 renames qa to test\n- commit 2 renames the rpc-tests directory to ~qa~ **functional**\n- commit 3 renames test/pull-tester/rpc-tests.py to ~test/runner/runner.py~ **test/functional/test_runner.py and renames test/pull-tester/tests_config.ini.in to test/functional/config.ini.in. It also updates .travis.yml so travi",https://github.com/bitcoin/bitcoin/pull/9956#issuecomment-285380052,285380052,
jnewbery,2017-03-09T22:41:47Z,rebased,https://github.com/bitcoin/bitcoin/pull/9956#issuecomment-285507291,285507291,
fanquake,2017-03-10T03:48:55Z,"Needs .gitignore updated to include `test/functional/config.ini` and `test/util/buildenv.py`. You can probably drop the old `qa/pull-tester/tests_config.py` entry now as well.\n\nCurrently failing with:\n```\n==============================================\n   Bitcoin Core 0.14.99: src/test-suite.log\n==============================================\n\n# TOTAL: 2\n# PASS:  1\n# SKIP:  0\n#",https://github.com/bitcoin/bitcoin/pull/9956#issuecomment-285565998,285565998,
sipa,2017-03-12T06:30:21Z,Needs rebase.,https://github.com/bitcoin/bitcoin/pull/9956#issuecomment-285925540,285925540,
theuni,2017-03-13T21:38:14Z,"@jnewbery Other than the rebase, is this now ready for review? Travis is happy, at least.",https://github.com/bitcoin/bitcoin/pull/9956#issuecomment-286251995,286251995,
jnewbery,2017-03-15T15:20:48Z,"@theuni thanks for your help on this. I've rebased and squashed, so assuming travis passes, this is now ready for review. The two parts which I'm a little unsure of and I'd especially like reviewers to look at are:\n\n- changes to /contrib/rpm/bitcoin.spec. I actually think we can remove the line:\n```srcdir=. test/bitcoin-util-test.py```\nentirely, since bitcoin-util-test.py is run as part of",https://github.com/bitcoin/bitcoin/pull/9956#issuecomment-286775636,286775636,
jonasschnelli,2017-03-16T13:33:23Z,Needs rebase.,https://github.com/bitcoin/bitcoin/pull/9956#issuecomment-287057726,287057726,
MarcoFalke,2017-03-16T13:57:00Z,"No need to rebase this until the merge is scheduled. Needs review first.\n\nOn Thu, Mar 16, 2017 at 2:33 PM, Jonas Schnelli <notifications@github.com>\nwrote:\n\n> Needs rebase.\n>\n> ‚Äî\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/bitcoin/bitcoin/pull/9956#issuecomment-287057726>, or mute\n> the threa",https://github.com/bitcoin/bitcoin/pull/9956#issuecomment-287064213,287064213,
theuni,2017-03-16T18:57:27Z,"Looks good to me other than a few little nits. Passes Travis' out-of-tree-distdir gauntlet.\n\nI'd like to move the related stuff to a new Makefile.include, but as a next step.\n\nI'm unsure about the bitcoin.spec, but we probably can't assume they're running it from inside our tree?",https://github.com/bitcoin/bitcoin/pull/9956#issuecomment-287157873,287157873,
jtimon,2017-03-16T20:16:02Z,"Could you update the struct on the top instead of only the comments? It still says tests/runner and test/qa.\nConcept ACK. Needs rebase.\n\nI think ""qa"" instead of ""functional"" was just fine, but I guess ""functional"", or ""integration"" or ""tests"" or ""py"" would be fine as well. Maybe I just prefer qa because it's shorter. Anyway, bikeshedding.\n\nAbout the runner and the config, what about just",https://github.com/bitcoin/bitcoin/pull/9956#issuecomment-287178061,287178061,
jnewbery,2017-03-16T20:52:02Z,"> Could you update the struct on the top instead of only the comments? It still says tests/runner and test/qa.\n\nApologies. Now updated.\n\n> I think ""qa"" instead of ""functional"" was just fine, but I guess ""functional"", or ""integration"" or ""tests"" or ""py"" would be fine as well. Maybe I just prefer qa because it's shorter. Anyway, bikeshedding.\n\nI think functional or integration are best b",https://github.com/bitcoin/bitcoin/pull/9956#issuecomment-287187225,287187225,
jnewbery,2017-03-16T20:56:11Z,"@theuni's comments addressed, and rebased.\n\nOld tip: https://github.com/jnewbery/bitcoin/tree/pr9956.2 / https://github.com/jnewbery/bitcoin/commit/3d42c4e508ae0fa73eef5ae6584be3a624d5d129\nnew tip: https://github.com/jnewbery/bitcoin/tree/pr9956.3 / https://github.com/jnewbery/bitcoin/commit/f1653606a6c5803c4711ddaa4fea8242c78393e3 \n\nI've built from distdir locally, so hopefully this wil",https://github.com/bitcoin/bitcoin/pull/9956#issuecomment-287188332,287188332,
jtimon,2017-03-17T23:29:35Z,"Random thought, maybe create a subdirectory for the extended tests? That would make it more clear I think.\n",https://github.com/bitcoin/bitcoin/pull/9956#issuecomment-287495644,287495644,
fanquake,2017-03-19T09:58:28Z,"I've been testing this, looks good so far üëç . However, needs another rebase.",https://github.com/bitcoin/bitcoin/pull/9956#issuecomment-287605759,287605759,
laanwj,2017-03-20T11:05:44Z,As soon as there is agreement on this we should probably merge this. Otherwise it will continue to be outdated by every single change in the tests.,https://github.com/bitcoin/bitcoin/pull/9956#issuecomment-287729928,287729928,
MarcoFalke,2017-03-20T11:10:03Z,"I plan to merge this after the next rebase, so if someone disagrees with anything, please raise your voice.",https://github.com/bitcoin/bitcoin/pull/9956#issuecomment-287730757,287730757,
jnewbery,2017-03-20T14:43:29Z,"I've addressed @MarcoFalke's comments and rebased. New tip: https://github.com/jnewbery/bitcoin/tree/pr9956.4 / https://github.com/jnewbery/bitcoin/commit/63d66ba20a634b54f6d5e8b051fb4a106f2cef6c\n\n@jtimon - re: extended tests in a subdirectory: Interesting idea. I'm not convinced that it's necessary, but it's orthognal to this move, so let's not hold this PR up on that.",https://github.com/bitcoin/bitcoin/pull/9956#issuecomment-287780415,287780415,
fanquake,2017-03-20T15:34:42Z,"Merged and ran `test/functional/test_runner.py` with no arguments:\n```\nTEST                           | PASSED | DURATION\n\nfundrawtransaction.py          | True   | 192 s\nwalletbackup.py                | True   | 311 s\np2p-compactblocks.py           | True   | 166 s\nsegwit.py                      | True   | 83 s\nwallet-accounts.py             | True   | 65 s\nwallet.py            ",https://github.com/bitcoin/bitcoin/pull/9956#issuecomment-287797403,287797403,
MarcoFalke,2017-03-20T16:41:56Z,"utACK 63d66ba\n\nand thanks @fanquake for testing!\n\nOn Mon, Mar 20, 2017 at 4:35 PM, Michael <notifications@github.com> wrote:\n\n> Merged and ran test/functional/test_runner.py with no arguments:\n>\n> TEST                           | PASSED | DURATION\n>\n> fundrawtransaction.py          | True   | 192 s\n> walletbackup.py                | True   | 311 s\n> p2p-compactblocks.py           | Tru",https://github.com/bitcoin/bitcoin/pull/9956#issuecomment-287819901,287819901,
theuni,2017-03-20T20:57:16Z,"utACK 63d66ba since it works, any cleanups can happen as a next step.",https://github.com/bitcoin/bitcoin/pull/9956#issuecomment-287895462,287895462,
theuni,2017-03-16T17:21:58Z,runner -> test_runner from here down?,https://github.com/bitcoin/bitcoin/pull/9956#discussion_r106479493,106479493,test/functional/test_runner.py
theuni,2017-03-16T18:47:52Z,Do these really need +x?,https://github.com/bitcoin/bitcoin/pull/9956#discussion_r106501412,106501412,configure.ac
theuni,2017-03-16T18:55:28Z,"Please update Makefile.am to match. I'm pretty sure the cov stuff is busted atm, but at least this part won't be busted too.\n\nActually, it'd make sense to use this in test/functional/config.ini.in directly if you'd prefer to skip to that.",https://github.com/bitcoin/bitcoin/pull/9956#discussion_r106503222,106503222,configure.ac
MarcoFalke,2017-03-20T10:18:01Z,This should be `--extended` with two dashes?,https://github.com/bitcoin/bitcoin/pull/9956#discussion_r106866501,106866501,configure.ac
MarcoFalke,2017-03-20T10:24:34Z,Also double dash?,https://github.com/bitcoin/bitcoin/pull/9956#discussion_r106867669,106867669,contrib/rpm/bitcoin.spec
MarcoFalke,2017-03-20T10:31:25Z,'test/runner/runner.py': No such file or directory,https://github.com/bitcoin/bitcoin/pull/9956#discussion_r106868905,106868905,test/functional/config.ini.in
MarcoFalke,2017-03-20T10:36:33Z,Can you mention `test/util/bitcoin-util-test.py` in this file as well?,https://github.com/bitcoin/bitcoin/pull/9956#discussion_r106869892,106869892,test/README.md
