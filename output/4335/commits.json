[
  {
    "sha": "aa6767c5a21299e9d55ffdfbd465ebc630419a2a",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzphYTY3NjdjNWEyMTI5OWU5ZDU1ZmZkZmJkNDY1ZWJjNjMwNDE5YTJh",
    "commit": {
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter.wuille@gmail.com",
        "date": "2014-06-12T21:49:20Z"
      },
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter.wuille@gmail.com",
        "date": "2014-06-12T22:00:11Z"
      },
      "message": "Make mining support optional",
      "tree": {
        "sha": "b922dcbf817a44adb8eda345ed837f68b218c216",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b922dcbf817a44adb8eda345ed837f68b218c216"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/aa6767c5a21299e9d55ffdfbd465ebc630419a2a",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/aa6767c5a21299e9d55ffdfbd465ebc630419a2a",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/aa6767c5a21299e9d55ffdfbd465ebc630419a2a",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/aa6767c5a21299e9d55ffdfbd465ebc630419a2a/comments",
    "author": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "8047fb04ed38f94782221a9724e59a4300460a5e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8047fb04ed38f94782221a9724e59a4300460a5e",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/8047fb04ed38f94782221a9724e59a4300460a5e"
      }
    ],
    "stats": {
      "total": 58,
      "additions": 55,
      "deletions": 3
    },
    "files": [
      {
        "sha": "673e5b5ae69879f5038092547e449d498fa6bb55",
        "filename": "configure.ac",
        "status": "modified",
        "additions": 17,
        "deletions": 0,
        "changes": 17,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/aa6767c5a21299e9d55ffdfbd465ebc630419a2a/configure.ac",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/aa6767c5a21299e9d55ffdfbd465ebc630419a2a/configure.ac",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/configure.ac?ref=aa6767c5a21299e9d55ffdfbd465ebc630419a2a",
        "patch": "@@ -50,6 +50,13 @@ AC_ARG_ENABLE([wallet],\n   [enable_wallet=$enableval],\n   [enable_wallet=yes])\n \n+# Enable mining\n+AC_ARG_ENABLE([mining],\n+  [AS_HELP_STRING([--enable-mining],\n+  [enable mining (default is yes)])],\n+  [enable_mining=$enableval],\n+  [enable_mining=yes])\n+\n AC_ARG_WITH([miniupnpc],\n   [AS_HELP_STRING([--with-miniupnpc],\n   [enable UPNP (default is yes if libminiupnpc is found)])],\n@@ -583,6 +590,15 @@ else\n   AC_MSG_RESULT(no)\n fi\n \n+dnl enable mining\n+AC_MSG_CHECKING([if mining should be enabled])\n+if test x$enable_mining != xno; then\n+  AC_MSG_RESULT(yes)\n+  AC_DEFINE_UNQUOTED([ENABLE_MINING],[1],[Define to 1 to enable mining functions])\n+else\n+  AC_MSG_RESULT(no)\n+fi\n+\n dnl enable upnp support\n AC_MSG_CHECKING([whether to build with support for UPnP])\n if test x$have_miniupnpc = xno; then\n@@ -666,6 +682,7 @@ AM_CONDITIONAL([TARGET_DARWIN], [test x$TARGET_OS = xdarwin])\n AM_CONDITIONAL([BUILD_DARWIN], [test x$BUILD_OS = xdarwin])\n AM_CONDITIONAL([TARGET_WINDOWS], [test x$TARGET_OS = xwindows])\n AM_CONDITIONAL([ENABLE_WALLET],[test x$enable_wallet == xyes])\n+AM_CONDITIONAL([ENABLE_MINING],[test x$enable_mining == xyes])\n AM_CONDITIONAL([ENABLE_TESTS],[test x$use_tests == xyes])\n AM_CONDITIONAL([ENABLE_QT],[test x$bitcoin_enable_qt == xyes])\n AM_CONDITIONAL([ENABLE_QT_TESTS],[test x$use_tests$bitcoin_enable_qt_test = xyesyes])"
      },
      {
        "sha": "4f044183395457582fe9365f960eac74ee75ab30",
        "filename": "src/Makefile.am",
        "status": "modified",
        "additions": 13,
        "deletions": 2,
        "changes": 15,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/aa6767c5a21299e9d55ffdfbd465ebc630419a2a/src/Makefile.am",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/aa6767c5a21299e9d55ffdfbd465ebc630419a2a/src/Makefile.am",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/Makefile.am?ref=aa6767c5a21299e9d55ffdfbd465ebc630419a2a",
        "patch": "@@ -27,6 +27,9 @@ if ENABLE_WALLET\n BITCOIN_INCLUDES += $(BDB_CPPFLAGS)\n noinst_LIBRARIES += libbitcoin_wallet.a\n endif\n+if ENABLE_MINING\n+noinst_LIBRARIES += libbitcoin_mining.a\n+endif\n \n bin_PROGRAMS =\n TESTS =\n@@ -115,11 +118,9 @@ libbitcoin_server_a_SOURCES = \\\n   keystore.cpp \\\n   leveldbwrapper.cpp \\\n   main.cpp \\\n-  miner.cpp \\\n   net.cpp \\\n   noui.cpp \\\n   rpcblockchain.cpp \\\n-  rpcmining.cpp \\\n   rpcmisc.cpp \\\n   rpcnet.cpp \\\n   rpcrawtransaction.cpp \\\n@@ -139,6 +140,12 @@ libbitcoin_wallet_a_SOURCES = \\\n   walletdb.cpp \\\n   $(BITCOIN_CORE_H)\n \n+libbitcoin_mining_a_CPPFLAGS = $(BITCOIN_INCLUDES)\n+libbitcoin_mining_a_SOURCES = \\\n+  miner.cpp \\\n+  rpcmining.cpp \\\n+  $(BITCOIN_CORE_H)\n+\n libbitcoin_common_a_CPPFLAGS = $(BITCOIN_INCLUDES)\n libbitcoin_common_a_SOURCES = \\\n   base58.cpp \\\n@@ -178,6 +185,9 @@ bitcoind_LDADD = \\\n if ENABLE_WALLET\n bitcoind_LDADD += libbitcoin_wallet.a\n endif\n+if ENABLE_MINING\n+bitcoind_LDADD += libbitcoin_mining.a\n+endif\n bitcoind_SOURCES = bitcoind.cpp\n #\n \n@@ -226,6 +236,7 @@ clean-local:\n LIBBITCOIN_SERVER=libbitcoin_server.a\n LIBBITCOIN_WALLET=libbitcoin_wallet.a\n LIBBITCOIN_COMMON=libbitcoin_common.a\n+LIBBITCOIN_MINING=libbitcoin_mining.a\n LIBBITCOIN_CLI=libbitcoin_cli.a\n LIBBITCOINQT=qt/libbitcoinqt.a\n "
      },
      {
        "sha": "194527f65803b41b6e4d7cb9ecac4b2f165e7aa7",
        "filename": "src/Makefile.qt.include",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/aa6767c5a21299e9d55ffdfbd465ebc630419a2a/src/Makefile.qt.include",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/aa6767c5a21299e9d55ffdfbd465ebc630419a2a/src/Makefile.qt.include",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/Makefile.qt.include?ref=aa6767c5a21299e9d55ffdfbd465ebc630419a2a",
        "patch": "@@ -355,6 +355,9 @@ qt_bitcoin_qt_LDADD = qt/libbitcoinqt.a $(LIBBITCOIN_SERVER)\n if ENABLE_WALLET\n qt_bitcoin_qt_LDADD += $(LIBBITCOIN_WALLET)\n endif\n+if ENABLE_MINING\n+qt_bitcoin_qt_LDADD += $(LIBBITCOIN_MINING)\n+endif\n qt_bitcoin_qt_LDADD += $(LIBBITCOIN_CLI) $(LIBBITCOIN_COMMON) $(LIBLEVELDB) $(LIBMEMENV) \\\n   $(BOOST_LIBS) $(QT_LIBS) $(QT_DBUS_LIBS) $(QR_LIBS) $(PROTOBUF_LIBS) $(BDB_LIBS)\n qt_bitcoin_qt_LDFLAGS = $(QT_LDFLAGS)"
      },
      {
        "sha": "07ce8afdeec6ec8a0f72cb15b3397fd768230a48",
        "filename": "src/Makefile.qttest.include",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/aa6767c5a21299e9d55ffdfbd465ebc630419a2a/src/Makefile.qttest.include",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/aa6767c5a21299e9d55ffdfbd465ebc630419a2a/src/Makefile.qttest.include",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/Makefile.qttest.include?ref=aa6767c5a21299e9d55ffdfbd465ebc630419a2a",
        "patch": "@@ -30,6 +30,9 @@ qt_test_test_bitcoin_qt_LDADD = $(LIBBITCOINQT) $(LIBBITCOIN_SERVER)\n if ENABLE_WALLET\n qt_test_test_bitcoin_qt_LDADD += $(LIBBITCOIN_WALLET)\n endif\n+if ENABLE_MINING\n+qt_test_test_bitcoin_qt_LDADD += $(LIBBITCOIN_MINING)\n+endif\n qt_test_test_bitcoin_qt_LDADD += $(LIBBITCOIN_CLI) $(LIBBITCOIN_COMMON) $(LIBLEVELDB) \\\n   $(LIBMEMENV) $(BOOST_LIBS) $(QT_DBUS_LIBS) $(QT_TEST_LIBS) $(QT_LIBS) \\\n   $(QR_LIBS) $(PROTOBUF_LIBS) $(BDB_LIBS)"
      },
      {
        "sha": "c9b31692137d5fc161b4acafeeeb4499a1cd6a8c",
        "filename": "src/Makefile.test.include",
        "status": "modified",
        "additions": 5,
        "deletions": 1,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/aa6767c5a21299e9d55ffdfbd465ebc630419a2a/src/Makefile.test.include",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/aa6767c5a21299e9d55ffdfbd465ebc630419a2a/src/Makefile.test.include",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/Makefile.test.include?ref=aa6767c5a21299e9d55ffdfbd465ebc630419a2a",
        "patch": "@@ -35,7 +35,6 @@ BITCOIN_TESTS =\\\n   test/getarg_tests.cpp \\\n   test/key_tests.cpp \\\n   test/main_tests.cpp \\\n-  test/miner_tests.cpp \\\n   test/mruset_tests.cpp \\\n   test/multisig_tests.cpp \\\n   test/netbase_tests.cpp \\\n@@ -59,6 +58,11 @@ BITCOIN_TESTS += \\\n   test/rpc_wallet_tests.cpp\n endif\n \n+if ENABLE_MINING\n+BITCOIN_TESTS += \\\n+  test/miner_tests.cpp\n+endif\n+\n test_test_bitcoin_SOURCES = $(BITCOIN_TESTS) $(JSON_TEST_FILES) $(RAW_TEST_FILES)\n test_test_bitcoin_CPPFLAGS = $(BITCOIN_INCLUDES) -I$(builddir)/test/ $(TESTDEFS)\n test_test_bitcoin_LDADD = $(LIBBITCOIN_SERVER) $(LIBBITCOIN_CLI) $(LIBBITCOIN_COMMON) $(LIBLEVELDB) $(LIBMEMENV) \\"
      },
      {
        "sha": "7c9be2866f35c78ee3e25e8881175db6e35d6151",
        "filename": "src/init.cpp",
        "status": "modified",
        "additions": 8,
        "deletions": 0,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/aa6767c5a21299e9d55ffdfbd465ebc630419a2a/src/init.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/aa6767c5a21299e9d55ffdfbd465ebc630419a2a/src/init.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/init.cpp?ref=aa6767c5a21299e9d55ffdfbd465ebc630419a2a",
        "patch": "@@ -115,11 +115,15 @@ void Shutdown()\n     RenameThread(\"bitcoin-shutoff\");\n     mempool.AddTransactionsUpdated(1);\n     StopRPCThreads();\n+#ifdef ENABLE_MINING\n     ShutdownRPCMining();\n+#endif\n #ifdef ENABLE_WALLET\n     if (pwalletMain)\n         bitdb.Flush(false);\n+#ifdef ENABLE_MINING\n     GenerateBitcoins(false, NULL, 0);\n+#endif\n #endif\n     StopNode();\n     UnregisterNodeSignals(GetNodeSignals());\n@@ -1140,15 +1144,19 @@ bool AppInit2(boost::thread_group& threadGroup)\n #endif\n \n     StartNode(threadGroup);\n+#ifdef ENABLE_MINING\n     // InitRPCMining is needed here so getwork/getblocktemplate in the GUI debug console works properly.\n     InitRPCMining();\n+#endif\n     if (fServer)\n         StartRPCThreads();\n \n #ifdef ENABLE_WALLET\n+#ifdef ENABLE_MINING\n     // Generate coins in the background\n     if (pwalletMain)\n         GenerateBitcoins(GetBoolArg(\"-gen\", false), pwalletMain, GetArg(\"-genproclimit\", -1));\n+#endif\n #endif\n \n     // ********************************************************* Step 12: finished"
      },
      {
        "sha": "3bf84c0ae5fb40c8d7dc08914c3bec83ba9f58ea",
        "filename": "src/rpcserver.cpp",
        "status": "modified",
        "additions": 6,
        "deletions": 0,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/aa6767c5a21299e9d55ffdfbd465ebc630419a2a/src/rpcserver.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/aa6767c5a21299e9d55ffdfbd465ebc630419a2a/src/rpcserver.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpcserver.cpp?ref=aa6767c5a21299e9d55ffdfbd465ebc630419a2a",
        "patch": "@@ -250,11 +250,13 @@ static const CRPCCommand vRPCCommands[] =\n     { \"gettxoutsetinfo\",        &gettxoutsetinfo,        true,      false,      false },\n     { \"verifychain\",            &verifychain,            true,      false,      false },\n \n+#ifdef ENABLE_MINING\n     /* Mining */\n     { \"getblocktemplate\",       &getblocktemplate,       true,      false,      false },\n     { \"getmininginfo\",          &getmininginfo,          true,      false,      false },\n     { \"getnetworkhashps\",       &getnetworkhashps,       true,      false,      false },\n     { \"submitblock\",            &submitblock,            false,     true,       false },\n+#endif // ENABLE_MINING\n \n     /* Raw transactions */\n     { \"createrawtransaction\",   &createrawtransaction,   false,     false,      false },\n@@ -268,8 +270,10 @@ static const CRPCCommand vRPCCommands[] =\n     { \"createmultisig\",         &createmultisig,         true,      true ,      false },\n     { \"validateaddress\",        &validateaddress,        true,      false,      false }, /* uses wallet if enabled */\n     { \"verifymessage\",          &verifymessage,          false,     false,      false },\n+#ifdef ENABLE_MINING\n     { \"estimatefee\",            &estimatefee,            true,      true,       false },\n     { \"estimatepriority\",       &estimatepriority,       true,      true,       false },\n+#endif\n \n #ifdef ENABLE_WALLET\n     /* Wallet */\n@@ -312,11 +316,13 @@ static const CRPCCommand vRPCCommands[] =\n     { \"walletpassphrasechange\", &walletpassphrasechange, false,     false,      true },\n     { \"walletpassphrase\",       &walletpassphrase,       true,      false,      true },\n \n+#ifdef ENABLE_MINING\n     /* Wallet-enabled mining */\n     { \"getgenerate\",            &getgenerate,            true,      false,      false },\n     { \"gethashespersec\",        &gethashespersec,        true,      false,      false },\n     { \"getwork\",                &getwork,                true,      false,      true  },\n     { \"setgenerate\",            &setgenerate,            true,      true,       false },\n+#endif // ENABLE_MINING\n #endif // ENABLE_WALLET\n };\n "
      }
    ]
  }
]