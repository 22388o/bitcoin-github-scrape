[
  {
    "sha": "30daf76a97c57a5f74c8dad1da282dcc0ff8b3fb",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzozMGRhZjc2YTk3YzU3YTVmNzRjOGRhZDFkYTI4MmRjYzBmZjhiM2Zi",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-03-17T17:49:04Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-05-03T17:18:19Z"
      },
      "message": "guix: Add guix-attest script",
      "tree": {
        "sha": "01fae42a35c1d946877271112a1a3bcc0fe14dd1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/01fae42a35c1d946877271112a1a3bcc0fe14dd1"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/30daf76a97c57a5f74c8dad1da282dcc0ff8b3fb",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/30daf76a97c57a5f74c8dad1da282dcc0ff8b3fb",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/30daf76a97c57a5f74c8dad1da282dcc0ff8b3fb",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/30daf76a97c57a5f74c8dad1da282dcc0ff8b3fb/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "0c9597ce7db28f5272a69bf0fbb36ce6b2520566",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0c9597ce7db28f5272a69bf0fbb36ce6b2520566",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/0c9597ce7db28f5272a69bf0fbb36ce6b2520566"
      }
    ],
    "stats": {
      "total": 170,
      "additions": 170,
      "deletions": 0
    },
    "files": [
      {
        "sha": "d7604dd75f7dc27e9d714517f5e48b433f769841",
        "filename": "contrib/guix/guix-attest",
        "status": "added",
        "additions": 170,
        "deletions": 0,
        "changes": 170,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/30daf76a97c57a5f74c8dad1da282dcc0ff8b3fb/contrib/guix/guix-attest",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/30daf76a97c57a5f74c8dad1da282dcc0ff8b3fb/contrib/guix/guix-attest",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/guix-attest?ref=30daf76a97c57a5f74c8dad1da282dcc0ff8b3fb",
        "patch": "@@ -0,0 +1,170 @@\n+#!/usr/bin/env bash\n+export LC_ALL=C\n+set -e -o pipefail\n+\n+# Source the common prelude, which:\n+#   1. Checks if we're at the top directory of the Bitcoin Core repository\n+#   2. Defines a few common functions and variables\n+#\n+# shellcheck source=libexec/prelude.bash\n+source \"$(dirname \"${BASH_SOURCE[0]}\")/libexec/prelude.bash\"\n+\n+\n+###################\n+## Sanity Checks ##\n+###################\n+\n+################\n+# Required non-builtin commands should be invokable\n+################\n+\n+check_tools cat env basename mkdir xargs find gpg\n+\n+################\n+# Required env vars should be non-empty\n+################\n+\n+cmd_usage() {\n+cat <<EOF\n+Synopsis:\n+\n+    env GUIX_SIGS_REPO=<path/to/guix.sigs> \\\\\n+        SIGNER=GPG_KEY_NAME[=SIGNER_NAME] \\\\\n+      ./contrib/guix/guix-attest\n+\n+Example w/o overriding signing name:\n+\n+    env GUIX_SIGS_REPO=/home/achow101/guix.sigs \\\\\n+        SIGNER=achow101 \\\\\n+      ./contrib/guix/guix-attest\n+\n+Example overriding signing name:\n+\n+    env GUIX_SIGS_REPO=/home/dongcarl/guix.sigs \\\\\n+        SIGNER=0x96AB007F1A7ED999=dongcarl \\\\\n+      ./contrib/guix/guix-attest\n+\n+EOF\n+}\n+\n+if [ -z \"$GUIX_SIGS_REPO\" ] || [ -z \"$SIGNER\" ]; then\n+    cmd_usage\n+    exit 1\n+fi\n+\n+################\n+# GUIX_SIGS_REPO should exist as a directory\n+################\n+\n+if [ ! -d \"$GUIX_SIGS_REPO\" ]; then\n+cat << EOF\n+ERR: The specified GUIX_SIGS_REPO is not an existent directory:\n+\n+    '$GUIX_SIGS_REPO'\n+\n+Hint: Please clone the guix.sigs repository and point to it with the\n+      GUIX_SIGS_REPO environment variable.\n+\n+EOF\n+cmd_usage\n+exit 1\n+fi\n+\n+################\n+# The key specified in SIGNER should be usable\n+################\n+\n+IFS='=' read -r gpg_key_name signer_name <<< \"$SIGNER\"\n+if [ -z \"${signer_name}\" ]; then\n+    signer_name=\"$gpg_key_name\"\n+fi\n+\n+if ! gpg --dry-run --list-secret-keys \"${gpg_key_name}\" >/dev/null 2>&1; then\n+    echo \"ERR: GPG can't seem to find any key named '${gpg_key_name}'\"\n+    exit 1\n+fi\n+\n+################\n+# We should be able to find at least one output\n+################\n+\n+echo \"Looking for build output directories in ${OUTDIR_BASE}\"\n+\n+shopt -s nullglob\n+OUTDIRS=( \"${OUTDIR_BASE}\"/* ) # This expands to an array of directories...\n+shopt -u nullglob\n+\n+if (( ${#OUTDIRS[@]} )); then\n+    echo \"Found build output directories:\"\n+    for outdir in \"${OUTDIRS[@]}\"; do\n+        echo \"    '$outdir'\"\n+    done\n+    echo\n+else\n+    echo \"ERR: Could not find any build output directories in ${OUTDIR_BASE}\"\n+    exit 1\n+fi\n+\n+\n+##############\n+##  Attest  ##\n+##############\n+\n+# Usage: out_name $outdir\n+#\n+#   HOST: The output directory being attested\n+#\n+out_name() {\n+    basename \"$1\"\n+}\n+\n+# Usage: out_sig_dir $outdir\n+#\n+#   outdir: The output directory being attested\n+#\n+out_sig_dir() {\n+    echo \"$GUIX_SIGS_REPO/$VERSION/$(out_name \"$1\")/$signer_name\"\n+}\n+\n+# Accumulate a list of signature directories that already exist...\n+outdirs_already_attested_to=()\n+\n+echo \"Attesting to build outputs for version: '${VERSION}'\"\n+echo \"\"\n+\n+# MAIN LOGIC: Loop through each output for VERSION and attest to output in\n+#             GUIX_SIGS_REPO as SIGNER, if attestation does not exist\n+for outdir in \"${OUTDIRS[@]}\"; do\n+    outname=\"$(out_name \"$outdir\")\"\n+    outsigdir=\"$(out_sig_dir \"$outdir\")\"\n+    if [ -e \"$outsigdir\" ]; then\n+        echo \"${outname}: SKIPPING: Signature directory already exists in the specified guix.sigs repository\"\n+        outdirs_already_attested_to+=(\"$outdir\")\n+    else\n+        mkdir -p \"$outsigdir\"\n+        echo \"${outname}: Hashing build outputs to produce SHA256SUMS\"\n+        (\n+            cd \"$outdir\"\n+            find . -type f -printf '%P\\0' | env LC_ALL=C sort -z | xargs -r0 sha256sum >> \"$outsigdir\"/SHA256SUMS\n+        )\n+        echo \"${outname}: Signing SHA256SUMS to produce SHA256SUMS.asc\"\n+        gpg --detach-sign --local-user \"$gpg_key_name\" --output \"$outsigdir\"/SHA256SUMS.asc \"$outsigdir\"/SHA256SUMS\n+        echo \"\"\n+    fi\n+done\n+\n+if (( ${#outdirs_already_attested_to[@]} )); then\n+# ...so that we can print them out nicely in a warning message\n+cat << EOF\n+\n+WARN: Signature directories from '$signer_name' already exist in the specified\n+      guix.sigs repository for the following output directories and were\n+      skipped:\n+\n+EOF\n+for outdir in \"${outdirs_already_attested_to[@]}\"; do\n+    echo \"    '${outdir}'\"\n+    echo \"    Corresponds to: '$(out_sig_dir \"$outdir\")'\"\n+    echo \"\"\n+done\n+fi"
      }
    ]
  },
  {
    "sha": "5926432ba68ba154df6c8eaa74adb18cc0123167",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo1OTI2NDMyYmE2OGJhMTU0ZGY2YzhlYWE3NGFkYjE4Y2MwMTIzMTY3",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-03-17T17:49:17Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-05-03T17:18:19Z"
      },
      "message": "guix: Add guix-verify script",
      "tree": {
        "sha": "4ff2707a9a2e64ce54211d25fe2b4f09abcc6c06",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/4ff2707a9a2e64ce54211d25fe2b4f09abcc6c06"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5926432ba68ba154df6c8eaa74adb18cc0123167",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5926432ba68ba154df6c8eaa74adb18cc0123167",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/5926432ba68ba154df6c8eaa74adb18cc0123167",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5926432ba68ba154df6c8eaa74adb18cc0123167/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "30daf76a97c57a5f74c8dad1da282dcc0ff8b3fb",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/30daf76a97c57a5f74c8dad1da282dcc0ff8b3fb",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/30daf76a97c57a5f74c8dad1da282dcc0ff8b3fb"
      }
    ],
    "stats": {
      "total": 113,
      "additions": 113,
      "deletions": 0
    },
    "files": [
      {
        "sha": "629050956cb5a6bd3c7c0b701a430437fdf21d36",
        "filename": "contrib/guix/guix-verify",
        "status": "added",
        "additions": 113,
        "deletions": 0,
        "changes": 113,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5926432ba68ba154df6c8eaa74adb18cc0123167/contrib/guix/guix-verify",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5926432ba68ba154df6c8eaa74adb18cc0123167/contrib/guix/guix-verify",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/guix-verify?ref=5926432ba68ba154df6c8eaa74adb18cc0123167",
        "patch": "@@ -0,0 +1,113 @@\n+#!/usr/bin/env bash\n+export LC_ALL=C\n+set -e -o pipefail\n+\n+# Source the common prelude, which:\n+#   1. Checks if we're at the top directory of the Bitcoin Core repository\n+#   2. Defines a few common functions and variables\n+#\n+# shellcheck source=libexec/prelude.bash\n+source \"$(dirname \"${BASH_SOURCE[0]}\")/libexec/prelude.bash\"\n+\n+\n+###################\n+## Sanity Checks ##\n+###################\n+\n+################\n+# Required non-builtin commands should be invokable\n+################\n+\n+check_tools cat diff gpg\n+\n+################\n+# Required env vars should be non-empty\n+################\n+\n+cmd_usage() {\n+cat <<EOF\n+Synopsis:\n+\n+    env GUIX_SIGS_REPO=<path/to/guix.sigs> ./contrib/guix/guix-verify\n+\n+EOF\n+}\n+\n+if [ -z \"$GUIX_SIGS_REPO\" ]; then\n+    cmd_usage\n+    exit 1\n+fi\n+\n+################\n+# GUIX_SIGS_REPO should exist as a directory\n+################\n+\n+if [ ! -d \"$GUIX_SIGS_REPO\" ]; then\n+cat << EOF\n+ERR: The specified GUIX_SIGS_REPO is not an existent directory:\n+\n+    '$GUIX_SIGS_REPO'\n+\n+Hint: Please clone the guix.sigs repository and point to it with the\n+      GUIX_SIGS_REPO environment variable.\n+\n+EOF\n+cmd_usage\n+exit 1\n+fi\n+\n+################\n+# We should be able to find at least one output\n+################\n+\n+OUTSIGDIR_BASE=\"${GUIX_SIGS_REPO}/${VERSION}\"\n+echo \"Looking for output signature directories in '${OUTSIGDIR_BASE}'\"\n+\n+shopt -s nullglob\n+OUTSIGDIRS=( \"$OUTSIGDIR_BASE\"/* ) # This expands to an array of directories...\n+shopt -u nullglob\n+\n+if (( ${#OUTSIGDIRS[@]} )); then\n+    echo \"Found output signature directories:\"\n+    for outsigdir in \"${OUTSIGDIRS[@]}\"; do\n+        echo \"    '$outsigdir'\"\n+    done\n+    echo\n+else\n+    echo \"ERR: Could not find any output signature directories in ${OUTSIGDIR_BASE}\"\n+    exit 1\n+fi\n+\n+\n+##############\n+##  Verify  ##\n+##############\n+\n+# MAIN LOGIC: Loop through each output for VERSION and check that the SHA256SUMS\n+#             and SHA256SUMS.asc file match between signers, using the first\n+#             available signer as the arbitrary comparison base.\n+for outsigdir in \"${OUTSIGDIRS[@]}\"; do\n+    echo \"BEGIN: Checking output signatures for $(basename \"$outsigdir\")\"\n+    echo \"\"\n+    signer_dirs=( \"$outsigdir\"/* ) # This expands to an array of directories...\n+    compare_signer_dir=\"${signer_dirs[0]}\" # ...we just want the first one\n+    for current_signer_dir in \"${signer_dirs[@]}\"; do\n+        if ! gpg --quiet --batch --verify \"$current_signer_dir\"/SHA256SUMS.asc \"$current_signer_dir\"/SHA256SUMS; then\n+            echo \"ERR: Failed to verify GPG signature in '${current_signer_dir}/SHA256SUMS.asc'\"\n+            echo \"\"\n+            echo \"Hint: Either the signature is invalid or the public key is missing\"\n+            echo \"\"\n+        elif ! diff --report-identical \"$compare_signer_dir\"/SHA256SUMS \"$current_signer_dir\"/SHA256SUMS; then\n+            echo \"ERR: The SHA256SUMS attestation in these two directories differ:\"\n+            echo \"    '${compare_signer_dir}'\"\n+            echo \"    '${current_signer_dir}'\"\n+            echo \"\"\n+        else\n+            echo \"Verified: '${current_signer_dir}'\"\n+            echo \"\"\n+        fi\n+    done\n+    echo \"DONE: Checking output signatures for $(basename \"$outsigdir\")\"\n+    echo \"\"\n+    echo \"\"\n+done"
      }
    ]
  },
  {
    "sha": "b5fd89c4c89136007429688601ce4fa497f5f09e",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiNWZkODljNGM4OTEzNjAwNzQyOTY4ODYwMWNlNGZhNDk3ZjVmMDll",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-04-12T16:21:00Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-05-03T17:18:19Z"
      },
      "message": "guix-attest: Only use cross-platform flags for find+xargs",
      "tree": {
        "sha": "44a53b9f9823c70f4011b6b568eb9f072ce350d6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/44a53b9f9823c70f4011b6b568eb9f072ce350d6"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b5fd89c4c89136007429688601ce4fa497f5f09e",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b5fd89c4c89136007429688601ce4fa497f5f09e",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/b5fd89c4c89136007429688601ce4fa497f5f09e",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b5fd89c4c89136007429688601ce4fa497f5f09e/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "5926432ba68ba154df6c8eaa74adb18cc0123167",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5926432ba68ba154df6c8eaa74adb18cc0123167",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/5926432ba68ba154df6c8eaa74adb18cc0123167"
      }
    ],
    "stats": {
      "total": 8,
      "additions": 7,
      "deletions": 1
    },
    "files": [
      {
        "sha": "fbb4b73c71a20693ba74810f7921093bf03ca848",
        "filename": "contrib/guix/guix-attest",
        "status": "modified",
        "additions": 7,
        "deletions": 1,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b5fd89c4c89136007429688601ce4fa497f5f09e/contrib/guix/guix-attest",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b5fd89c4c89136007429688601ce4fa497f5f09e/contrib/guix/guix-attest",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/guix-attest?ref=b5fd89c4c89136007429688601ce4fa497f5f09e",
        "patch": "@@ -145,7 +145,13 @@ for outdir in \"${OUTDIRS[@]}\"; do\n         echo \"${outname}: Hashing build outputs to produce SHA256SUMS\"\n         (\n             cd \"$outdir\"\n-            find . -type f -printf '%P\\0' | env LC_ALL=C sort -z | xargs -r0 sha256sum >> \"$outsigdir\"/SHA256SUMS\n+            files=\"$(find . -type f)\"\n+            if [ -n \"$files\" ]; then\n+                cut -c3- <<< \"$files\" | env LC_ALL=C sort | xargs sha256sum >> \"$outsigdir\"/SHA256SUMS\n+            else\n+                echo \"ERR: ${outname}: No outputs found in '${outdir}'\"\n+                exit 1\n+            fi\n         )\n         echo \"${outname}: Signing SHA256SUMS to produce SHA256SUMS.asc\"\n         gpg --detach-sign --local-user \"$gpg_key_name\" --output \"$outsigdir\"/SHA256SUMS.asc \"$outsigdir\"/SHA256SUMS"
      }
    ]
  },
  {
    "sha": "0e1c2e448c25568f276e4f022128870c76ca216b",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowZTFjMmU0NDhjMjU1NjhmMjc2ZTRmMDIyMTI4ODcwYzc2Y2EyMTZi",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-04-12T16:29:01Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-05-03T17:18:19Z"
      },
      "message": "guix-attest: Use ascii-armor signatures",
      "tree": {
        "sha": "6b74ba6596f7fe01ad2e917cc094086952bf4266",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6b74ba6596f7fe01ad2e917cc094086952bf4266"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0e1c2e448c25568f276e4f022128870c76ca216b",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0e1c2e448c25568f276e4f022128870c76ca216b",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/0e1c2e448c25568f276e4f022128870c76ca216b",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0e1c2e448c25568f276e4f022128870c76ca216b/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "b5fd89c4c89136007429688601ce4fa497f5f09e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b5fd89c4c89136007429688601ce4fa497f5f09e",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/b5fd89c4c89136007429688601ce4fa497f5f09e"
      }
    ],
    "stats": {
      "total": 2,
      "additions": 1,
      "deletions": 1
    },
    "files": [
      {
        "sha": "78c6a83fe65cc066f75de03c4edbaeafe819f2e3",
        "filename": "contrib/guix/guix-attest",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0e1c2e448c25568f276e4f022128870c76ca216b/contrib/guix/guix-attest",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0e1c2e448c25568f276e4f022128870c76ca216b/contrib/guix/guix-attest",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/guix-attest?ref=0e1c2e448c25568f276e4f022128870c76ca216b",
        "patch": "@@ -154,7 +154,7 @@ for outdir in \"${OUTDIRS[@]}\"; do\n             fi\n         )\n         echo \"${outname}: Signing SHA256SUMS to produce SHA256SUMS.asc\"\n-        gpg --detach-sign --local-user \"$gpg_key_name\" --output \"$outsigdir\"/SHA256SUMS.asc \"$outsigdir\"/SHA256SUMS\n+        gpg --detach-sign --local-user \"$gpg_key_name\" --armor --output \"$outsigdir\"/SHA256SUMS.asc \"$outsigdir\"/SHA256SUMS\n         echo \"\"\n     fi\n done"
      }
    ]
  },
  {
    "sha": "c83c4fa5b78aef33bba36b3a0d273422297bd630",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjODNjNGZhNWI3OGFlZjMzYmJhMzZiM2EwZDI3MzQyMjI5N2JkNjMw",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-04-12T16:29:34Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-05-03T17:18:19Z"
      },
      "message": "guix-attest: Allow skipping GPG signing with NO_SIGN",
      "tree": {
        "sha": "493e99e58cad1b4f6804316599d6667463ab3de2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/493e99e58cad1b4f6804316599d6667463ab3de2"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c83c4fa5b78aef33bba36b3a0d273422297bd630",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c83c4fa5b78aef33bba36b3a0d273422297bd630",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/c83c4fa5b78aef33bba36b3a0d273422297bd630",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c83c4fa5b78aef33bba36b3a0d273422297bd630/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "0e1c2e448c25568f276e4f022128870c76ca216b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0e1c2e448c25568f276e4f022128870c76ca216b",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/0e1c2e448c25568f276e4f022128870c76ca216b"
      }
    ],
    "stats": {
      "total": 23,
      "additions": 19,
      "deletions": 4
    },
    "files": [
      {
        "sha": "6aa6ce4716d740ef06d3f342ec016bed3a56de85",
        "filename": "contrib/guix/guix-attest",
        "status": "modified",
        "additions": 19,
        "deletions": 4,
        "changes": 23,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c83c4fa5b78aef33bba36b3a0d273422297bd630/contrib/guix/guix-attest",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c83c4fa5b78aef33bba36b3a0d273422297bd630/contrib/guix/guix-attest",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/guix-attest?ref=c83c4fa5b78aef33bba36b3a0d273422297bd630",
        "patch": "@@ -18,7 +18,10 @@ source \"$(dirname \"${BASH_SOURCE[0]}\")/libexec/prelude.bash\"\n # Required non-builtin commands should be invokable\n ################\n \n-check_tools cat env basename mkdir xargs find gpg\n+check_tools cat env basename mkdir xargs find\n+if [ -z \"$NO_SIGN\" ]; then\n+    check_tools gpg\n+fi\n \n ################\n # Required env vars should be non-empty\n@@ -30,6 +33,7 @@ Synopsis:\n \n     env GUIX_SIGS_REPO=<path/to/guix.sigs> \\\\\n         SIGNER=GPG_KEY_NAME[=SIGNER_NAME] \\\\\n+        [ NO_SIGN=1 ]\n       ./contrib/guix/guix-attest\n \n Example w/o overriding signing name:\n@@ -44,6 +48,13 @@ Example overriding signing name:\n         SIGNER=0x96AB007F1A7ED999=dongcarl \\\\\n       ./contrib/guix/guix-attest\n \n+Example w/o signing, just creating SHA256SUMS:\n+\n+    env GUIX_SIGS_REPO=/home/achow101/guix.sigs \\\\\n+        SIGNER=achow101 \\\\\n+        NO_SIGN=1 \\\\\n+      ./contrib/guix/guix-attest\n+\n EOF\n }\n \n@@ -79,7 +90,7 @@ if [ -z \"${signer_name}\" ]; then\n     signer_name=\"$gpg_key_name\"\n fi\n \n-if ! gpg --dry-run --list-secret-keys \"${gpg_key_name}\" >/dev/null 2>&1; then\n+if [ -z \"$NO_SIGN\" ] && ! gpg --dry-run --list-secret-keys \"${gpg_key_name}\" >/dev/null 2>&1; then\n     echo \"ERR: GPG can't seem to find any key named '${gpg_key_name}'\"\n     exit 1\n fi\n@@ -153,8 +164,12 @@ for outdir in \"${OUTDIRS[@]}\"; do\n                 exit 1\n             fi\n         )\n-        echo \"${outname}: Signing SHA256SUMS to produce SHA256SUMS.asc\"\n-        gpg --detach-sign --local-user \"$gpg_key_name\" --armor --output \"$outsigdir\"/SHA256SUMS.asc \"$outsigdir\"/SHA256SUMS\n+        if [ -z \"$NO_SIGN\" ]; then\n+            echo \"${outname}: Signing SHA256SUMS to produce SHA256SUMS.asc\"\n+            gpg --detach-sign --local-user \"$gpg_key_name\" --armor --output \"$outsigdir\"/SHA256SUMS.asc \"$outsigdir\"/SHA256SUMS\n+        else\n+            echo \"${outname}: Not signing SHA256SUMS as \\$NO_SIGN is not empty\"\n+        fi\n         echo \"\"\n     fi\n done"
      }
    ]
  },
  {
    "sha": "022abc85fc7e711a900fed8e5071919a151c0a63",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowMjJhYmM4NWZjN2U3MTFhOTAwZmVkOGU1MDcxOTE5YTE1MWMwYTYz",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-04-20T14:32:54Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-05-03T17:18:19Z"
      },
      "message": "guix: Minor quoting fix in libexec/build.sh",
      "tree": {
        "sha": "cc48ba47ac4c836f51675f25002e3bc01cd072f5",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/cc48ba47ac4c836f51675f25002e3bc01cd072f5"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/022abc85fc7e711a900fed8e5071919a151c0a63",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/022abc85fc7e711a900fed8e5071919a151c0a63",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/022abc85fc7e711a900fed8e5071919a151c0a63",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/022abc85fc7e711a900fed8e5071919a151c0a63/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "c83c4fa5b78aef33bba36b3a0d273422297bd630",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c83c4fa5b78aef33bba36b3a0d273422297bd630",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/c83c4fa5b78aef33bba36b3a0d273422297bd630"
      }
    ],
    "stats": {
      "total": 3,
      "additions": 2,
      "deletions": 1
    },
    "files": [
      {
        "sha": "21062751abfc90a4a3534de0c4bfff64a6c7a286",
        "filename": "contrib/guix/libexec/build.sh",
        "status": "modified",
        "additions": 2,
        "deletions": 1,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/022abc85fc7e711a900fed8e5071919a151c0a63/contrib/guix/libexec/build.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/022abc85fc7e711a900fed8e5071919a151c0a63/contrib/guix/libexec/build.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/libexec/build.sh?ref=022abc85fc7e711a900fed8e5071919a151c0a63",
        "patch": "@@ -293,7 +293,8 @@ mkdir -p \"$DISTSRC\"\n     # version symbols for Linux distro back-compatibility.\n     make -C src --jobs=1 check-symbols  ${V:+V=1}\n \n-    mkdir -p ${OUTDIR}\n+    mkdir -p \"$OUTDIR\"\n+\n     # Make the os-specific installers\n     case \"$HOST\" in\n         *mingw*)"
      }
    ]
  },
  {
    "sha": "f9e2960c018103be756a7f8a506816b49d662514",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmOWUyOTYwYzAxODEwM2JlNzU2YTdmOGE1MDY4MTZiNDlkNjYyNTE0",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-04-20T19:44:38Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-05-03T17:18:19Z"
      },
      "message": "guix: Construct $OUTDIR in ${DISTSRC}/output\n\nWhile files are being output to $OUTDIR, it will be under\n${DISTSRC}/output, and only when everything is done, will\n${DISTSRC}/output be moved to the actual $OUTDIR.\n\nThis makes it so that a Ctrl-C in the middle of a build is less likely\nto result in a partially-constructed $OUTDIR. In fact, if I understand\ncorrectly, if $OUTDIR and $DISTSRC reside on the same filesystem, the\nmove (rename) is likely atomic.\n\nAlso, since the \"working $OUTDIR\" is under ${DISTSRC}/output, it will be\ncleaned properly by the guix-clean script.",
      "tree": {
        "sha": "6e15d5618786c3267c3a3501c2a5e8e6ee0d2cdd",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6e15d5618786c3267c3a3501c2a5e8e6ee0d2cdd"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f9e2960c018103be756a7f8a506816b49d662514",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f9e2960c018103be756a7f8a506816b49d662514",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/f9e2960c018103be756a7f8a506816b49d662514",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f9e2960c018103be756a7f8a506816b49d662514/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "022abc85fc7e711a900fed8e5071919a151c0a63",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/022abc85fc7e711a900fed8e5071919a151c0a63",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/022abc85fc7e711a900fed8e5071919a151c0a63"
      }
    ],
    "stats": {
      "total": 5,
      "additions": 5,
      "deletions": 0
    },
    "files": [
      {
        "sha": "1bd4fee8841dbb6f18ece3d6261f89e1628b5358",
        "filename": "contrib/guix/libexec/build.sh",
        "status": "modified",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/f9e2960c018103be756a7f8a506816b49d662514/contrib/guix/libexec/build.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/f9e2960c018103be756a7f8a506816b49d662514/contrib/guix/libexec/build.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/libexec/build.sh?ref=f9e2960c018103be756a7f8a506816b49d662514",
        "patch": "@@ -33,6 +33,9 @@ Required environment variables as seen inside the container:\n     OUTDIR: ${OUTDIR:?not set}\n EOF\n \n+ACTUAL_OUTDIR=\"${OUTDIR}\"\n+OUTDIR=\"${DISTSRC}/output\"\n+\n #####################\n # Environment Setup #\n #####################\n@@ -429,3 +432,5 @@ mkdir -p \"$DISTSRC\"\n             ;;\n     esac\n )  # $DISTSRC\n+\n+mv --no-target-directory \"$OUTDIR\" \"$ACTUAL_OUTDIR\""
      }
    ]
  },
  {
    "sha": "d522d8006b891eccd7901faf391f9c041ddf8e38",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkNTIyZDgwMDZiODkxZWNjZDc5MDFmYWYzOTFmOWMwNDFkZGY4ZTM4",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-04-20T19:53:08Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-05-03T17:18:19Z"
      },
      "message": "guix: Attest to inputs in inputs.SHA256SUMS\n\nAt build/codesigning-time, hash build inputs and output the digest to\n${OUTDIR}/inputs.SHA256SUMS, which gets included in the final SHA256SUMS\nconstructed by guix-attest.\n\nExample final SHA256SUMS:\nee832d2a35b7701bff581dea05a536118b118e3ad0a587a2855b6ee8cd6fba20  inputs/bitcoin-78199266af7b.tar.gz\nca765e70a0c12866dd63c0be228b675278a26329e5f8f5b5c52fd09200fedf21  bitcoin-78199266af7b-powerpc64le-linux-gnu-debug.tar.gz\ndae95327d7f2c324e2728c4b73627be6cb2c0d2f2e5bea940d1d5e6463939327  bitcoin-78199266af7b-powerpc64le-linux-gnu.tar.gz",
      "tree": {
        "sha": "6196e4a8400167e71b5570fb7b4aa17d5b1f4bc8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6196e4a8400167e71b5570fb7b4aa17d5b1f4bc8"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d522d8006b891eccd7901faf391f9c041ddf8e38",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d522d8006b891eccd7901faf391f9c041ddf8e38",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/d522d8006b891eccd7901faf391f9c041ddf8e38",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d522d8006b891eccd7901faf391f9c041ddf8e38/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "f9e2960c018103be756a7f8a506816b49d662514",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f9e2960c018103be756a7f8a506816b49d662514",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/f9e2960c018103be756a7f8a506816b49d662514"
      }
    ],
    "stats": {
      "total": 26,
      "additions": 24,
      "deletions": 2
    },
    "files": [
      {
        "sha": "5093dcb69d39760b6d4faec7ed5cd4125f68cf90",
        "filename": "contrib/guix/guix-attest",
        "status": "modified",
        "additions": 9,
        "deletions": 2,
        "changes": 11,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d522d8006b891eccd7901faf391f9c041ddf8e38/contrib/guix/guix-attest",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d522d8006b891eccd7901faf391f9c041ddf8e38/contrib/guix/guix-attest",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/guix-attest?ref=d522d8006b891eccd7901faf391f9c041ddf8e38",
        "patch": "@@ -153,10 +153,17 @@ for outdir in \"${OUTDIRS[@]}\"; do\n         outdirs_already_attested_to+=(\"$outdir\")\n     else\n         mkdir -p \"$outsigdir\"\n-        echo \"${outname}: Hashing build outputs to produce SHA256SUMS\"\n+\n         (\n             cd \"$outdir\"\n-            files=\"$(find . -type f)\"\n+\n+            if [ -e inputs.SHA256SUMS ]; then\n+                echo \"${outname}: Including existent input SHA256SUMS\"\n+                cat inputs.SHA256SUMS >> \"$outsigdir\"/SHA256SUMS\n+            fi\n+\n+            echo \"${outname}: Hashing build outputs to produce SHA256SUMS\"\n+            files=\"$(find -L . -type f ! -iname '*.SHA256SUMS')\"\n             if [ -n \"$files\" ]; then\n                 cut -c3- <<< \"$files\" | env LC_ALL=C sort | xargs sha256sum >> \"$outsigdir\"/SHA256SUMS\n             else"
      },
      {
        "sha": "ce61cd52c7a4aee35b5a8aee26415e4a47204d9c",
        "filename": "contrib/guix/libexec/build.sh",
        "status": "modified",
        "additions": 15,
        "deletions": 0,
        "changes": 15,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d522d8006b891eccd7901faf391f9c041ddf8e38/contrib/guix/libexec/build.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d522d8006b891eccd7901faf391f9c041ddf8e38/contrib/guix/libexec/build.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/libexec/build.sh?ref=d522d8006b891eccd7901faf391f9c041ddf8e38",
        "patch": "@@ -231,6 +231,21 @@ if [ ! -e \"$GIT_ARCHIVE\" ]; then\n     git archive --prefix=\"${DISTNAME}/\" --output=\"$GIT_ARCHIVE\" HEAD\n fi\n \n+# tmpdir=\"$(mktemp -d)\"\n+# (\n+#     cd \"$tmpdir\"\n+#     mkdir -p inputs\n+#     ln -sf --target-directory=inputs \"$GIT_ARCHIVE\"\n+\n+#     mkdir -p \"$OUTDIR\"\n+#     find -L inputs -type f -print0 | xargs -0 sha256sum > \"${OUTDIR}/inputs.SHA256SUMS\"\n+# )\n+\n+mkdir -p \"$OUTDIR\"\n+cat << EOF > \"$OUTDIR\"/inputs.SHA256SUMS\n+$(sha256sum \"$GIT_ARCHIVE\" | cut -d' ' -f1)  inputs/$(basename \"$GIT_ARCHIVE\")\n+EOF\n+\n ###########################\n # Binary Tarball Building #\n ###########################"
      }
    ]
  },
  {
    "sha": "feda2c8e3180cb983c35976d4440cea23a155b7f",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmZWRhMmM4ZTMxODBjYjk4M2MzNTk3NmQ0NDQwY2VhMjNhMTU1Yjdm",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-05-03T17:12:15Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-05-03T17:18:19Z"
      },
      "message": "guix: Skip attesting to dist-archive\n\nWe already attest to the relevant dist-archive in inputs.SHA256SUMS,\nwhich is recorded at build-time.\n\nWe use a SKIPATTEST.TAG file to indicate output directories which do not\nrequire attestation (much like the CACHEDIR.TAG specification).\nGenerally, it's better to have build scripts declare properties of\ndirectories instead of introducing name-based special cases in attest\nscripts since build scripts have a more detailed context of what is\ngoing on.",
      "tree": {
        "sha": "7510401f056e7905b115862de543a6ac80a91fb7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7510401f056e7905b115862de543a6ac80a91fb7"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/feda2c8e3180cb983c35976d4440cea23a155b7f",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/feda2c8e3180cb983c35976d4440cea23a155b7f",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/feda2c8e3180cb983c35976d4440cea23a155b7f",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/feda2c8e3180cb983c35976d4440cea23a155b7f/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "d522d8006b891eccd7901faf391f9c041ddf8e38",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d522d8006b891eccd7901faf391f9c041ddf8e38",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/d522d8006b891eccd7901faf391f9c041ddf8e38"
      }
    ],
    "stats": {
      "total": 5,
      "additions": 5,
      "deletions": 0
    },
    "files": [
      {
        "sha": "8b4746caf9a1eff03a7fb3ec76bb1aa9d9b01f38",
        "filename": "contrib/guix/guix-attest",
        "status": "modified",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/feda2c8e3180cb983c35976d4440cea23a155b7f/contrib/guix/guix-attest",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/feda2c8e3180cb983c35976d4440cea23a155b7f/contrib/guix/guix-attest",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/guix-attest?ref=feda2c8e3180cb983c35976d4440cea23a155b7f",
        "patch": "@@ -146,6 +146,10 @@ echo \"\"\n # MAIN LOGIC: Loop through each output for VERSION and attest to output in\n #             GUIX_SIGS_REPO as SIGNER, if attestation does not exist\n for outdir in \"${OUTDIRS[@]}\"; do\n+    if [ -e \"${outdir}/SKIPATTEST.TAG\" ]; then\n+        echo \"${outname}: SKIPPING: Output directory marked with SKIPATTEST.TAG file\"\n+        continue\n+    fi\n     outname=\"$(out_name \"$outdir\")\"\n     outsigdir=\"$(out_sig_dir \"$outdir\")\"\n     if [ -e \"$outsigdir\" ]; then"
      },
      {
        "sha": "fccd5d1b0874f9033fc40a7bdb5a5dcaf99ae4f6",
        "filename": "contrib/guix/libexec/build.sh",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/feda2c8e3180cb983c35976d4440cea23a155b7f/contrib/guix/libexec/build.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/feda2c8e3180cb983c35976d4440cea23a155b7f/contrib/guix/libexec/build.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/libexec/build.sh?ref=feda2c8e3180cb983c35976d4440cea23a155b7f",
        "patch": "@@ -228,6 +228,7 @@ GIT_ARCHIVE=\"${DIST_ARCHIVE_BASE}/${DISTNAME}.tar.gz\"\n # Create the source tarball if not already there\n if [ ! -e \"$GIT_ARCHIVE\" ]; then\n     mkdir -p \"$(dirname \"$GIT_ARCHIVE\")\"\n+    touch \"${DIST_ARCHIVE_BASE}\"/SKIPATTEST.TAG\n     git archive --prefix=\"${DISTNAME}/\" --output=\"$GIT_ARCHIVE\" HEAD\n fi\n "
      }
    ]
  },
  {
    "sha": "d420e5c1c015f58d07aca4d6a805086488f74d03",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkNDIwZTVjMWMwMTVmNThkMDdhY2E0ZDZhODA1MDg2NDg4Zjc0ZDAz",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-05-03T19:33:43Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2021-05-03T20:50:59Z"
      },
      "message": "guix-attest: Avoid incomplete sigdirs with ERR traps\n\nSometimes GPG connects to the wrong agent... or you don't have your\nsmartcard handy...",
      "tree": {
        "sha": "e8522164b3f7b83ed18b5aa2db7f4886eabde0dc",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e8522164b3f7b83ed18b5aa2db7f4886eabde0dc"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d420e5c1c015f58d07aca4d6a805086488f74d03",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d420e5c1c015f58d07aca4d6a805086488f74d03",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/d420e5c1c015f58d07aca4d6a805086488f74d03",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d420e5c1c015f58d07aca4d6a805086488f74d03/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "feda2c8e3180cb983c35976d4440cea23a155b7f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/feda2c8e3180cb983c35976d4440cea23a155b7f",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/feda2c8e3180cb983c35976d4440cea23a155b7f"
      }
    ],
    "stats": {
      "total": 5,
      "additions": 5,
      "deletions": 0
    },
    "files": [
      {
        "sha": "081d1c0465eb170d288fcda715464a4e80d67578",
        "filename": "contrib/guix/guix-attest",
        "status": "modified",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d420e5c1c015f58d07aca4d6a805086488f74d03/contrib/guix/guix-attest",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d420e5c1c015f58d07aca4d6a805086488f74d03/contrib/guix/guix-attest",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/guix-attest?ref=d420e5c1c015f58d07aca4d6a805086488f74d03",
        "patch": "@@ -156,6 +156,9 @@ for outdir in \"${OUTDIRS[@]}\"; do\n         echo \"${outname}: SKIPPING: Signature directory already exists in the specified guix.sigs repository\"\n         outdirs_already_attested_to+=(\"$outdir\")\n     else\n+        # Clean up incomplete sigdir if something fails (likely gpg)\n+        trap 'rm -rf \"$outsigdir\"' ERR\n+\n         mkdir -p \"$outsigdir\"\n \n         (\n@@ -182,6 +185,8 @@ for outdir in \"${OUTDIRS[@]}\"; do\n             echo \"${outname}: Not signing SHA256SUMS as \\$NO_SIGN is not empty\"\n         fi\n         echo \"\"\n+\n+        trap - ERR  # Reset ERR trap\n     fi\n done\n "
      }
    ]
  }
]