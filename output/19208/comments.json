[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/640589283",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19208#issuecomment-640589283",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19208",
    "id": 640589283,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MDU4OTI4Mw==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-08T13:03:29Z",
    "updated_at": "2020-06-08T13:03:29Z",
    "author_association": "MEMBER",
    "body": "Nice! Concept ACK",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/640589283/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/640594378",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19208#issuecomment-640594378",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19208",
    "id": 640594378,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MDU5NDM3OA==",
    "user": {
      "login": "ycshao",
      "id": 1574776,
      "node_id": "MDQ6VXNlcjE1NzQ3NzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1574776?u=57ea7859ba907a603e06129db17a12fd4d24f2b2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ycshao",
      "html_url": "https://github.com/ycshao",
      "followers_url": "https://api.github.com/users/ycshao/followers",
      "following_url": "https://api.github.com/users/ycshao/following{/other_user}",
      "gists_url": "https://api.github.com/users/ycshao/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ycshao/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ycshao/subscriptions",
      "organizations_url": "https://api.github.com/users/ycshao/orgs",
      "repos_url": "https://api.github.com/users/ycshao/repos",
      "events_url": "https://api.github.com/users/ycshao/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ycshao/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-08T13:12:50Z",
    "updated_at": "2020-06-08T13:12:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "Seems like the style of those files are auto-formatted by `autopep8`. I'll leave the reviewers to comment about the format. \r\n\r\nOne question about the implementation. Does it make sense  to move `assert (all([len(x.getpeerinfo()) for x in rpc_connections]))` up to immediately after the while loop starts? It will assert sooner and save some time and operations.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/640594378/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/640784583",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19208#issuecomment-640784583",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19208",
    "id": 640784583,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MDc4NDU4Mw==",
    "user": {
      "login": "ycshao",
      "id": 1574776,
      "node_id": "MDQ6VXNlcjE1NzQ3NzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1574776?u=57ea7859ba907a603e06129db17a12fd4d24f2b2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ycshao",
      "html_url": "https://github.com/ycshao",
      "followers_url": "https://api.github.com/users/ycshao/followers",
      "following_url": "https://api.github.com/users/ycshao/following{/other_user}",
      "gists_url": "https://api.github.com/users/ycshao/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ycshao/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ycshao/subscriptions",
      "organizations_url": "https://api.github.com/users/ycshao/orgs",
      "repos_url": "https://api.github.com/users/ycshao/repos",
      "events_url": "https://api.github.com/users/ycshao/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ycshao/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-08T18:03:07Z",
    "updated_at": "2020-06-08T18:03:07Z",
    "author_association": "CONTRIBUTOR",
    "body": "Looks like `wallet_avoidreuse.py` failed in travis but it works fine on my machine. Is there a way to replay the travis failed tests?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/640784583/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/640950923",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19208#issuecomment-640950923",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19208",
    "id": 640950923,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MDk1MDkyMw==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-09T00:06:22Z",
    "updated_at": "2020-06-18T14:32:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #19198 (test: Check that peers with forcerelay permission are not asked to feefilter by MarcoFalke)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/640950923/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/640973462",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19208#issuecomment-640973462",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19208",
    "id": 640973462,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MDk3MzQ2Mg==",
    "user": {
      "login": "ycshao",
      "id": 1574776,
      "node_id": "MDQ6VXNlcjE1NzQ3NzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1574776?u=57ea7859ba907a603e06129db17a12fd4d24f2b2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ycshao",
      "html_url": "https://github.com/ycshao",
      "followers_url": "https://api.github.com/users/ycshao/followers",
      "following_url": "https://api.github.com/users/ycshao/following{/other_user}",
      "gists_url": "https://api.github.com/users/ycshao/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ycshao/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ycshao/subscriptions",
      "organizations_url": "https://api.github.com/users/ycshao/orgs",
      "repos_url": "https://api.github.com/users/ycshao/repos",
      "events_url": "https://api.github.com/users/ycshao/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ycshao/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-09T01:26:45Z",
    "updated_at": "2020-06-09T01:26:45Z",
    "author_association": "CONTRIBUTOR",
    "body": "> If you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\r\n\r\nCould someone explain what does conflicts mean here? Is there a logical order of PRs mentioned + mine to review and merge? \r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/640973462/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/641318819",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19208#issuecomment-641318819",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19208",
    "id": 641318819,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MTMxODgxOQ==",
    "user": {
      "login": "adamjonas",
      "id": 755825,
      "node_id": "MDQ6VXNlcjc1NTgyNQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/755825?u=fc2e6f106f98731d49e9787f9cbfe86a17447c23&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/adamjonas",
      "html_url": "https://github.com/adamjonas",
      "followers_url": "https://api.github.com/users/adamjonas/followers",
      "following_url": "https://api.github.com/users/adamjonas/following{/other_user}",
      "gists_url": "https://api.github.com/users/adamjonas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/adamjonas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/adamjonas/subscriptions",
      "organizations_url": "https://api.github.com/users/adamjonas/orgs",
      "repos_url": "https://api.github.com/users/adamjonas/repos",
      "events_url": "https://api.github.com/users/adamjonas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/adamjonas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-09T14:03:18Z",
    "updated_at": "2020-06-09T14:03:18Z",
    "author_association": "MEMBER",
    "body": "@ycshao DrahtBot crawls over open PRs and alerts you when there is a conflict with the main branch that requires a rebase or, in this case, other PRs that may lead to future conflicts indicating that you are working on similar code. DrahtBot is not sentient enough to decide the merge order. It's just raising it to your attention.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/641318819/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 1,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/641392613",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19208#issuecomment-641392613",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19208",
    "id": 641392613,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MTM5MjYxMw==",
    "user": {
      "login": "adamjonas",
      "id": 755825,
      "node_id": "MDQ6VXNlcjc1NTgyNQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/755825?u=fc2e6f106f98731d49e9787f9cbfe86a17447c23&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/adamjonas",
      "html_url": "https://github.com/adamjonas",
      "followers_url": "https://api.github.com/users/adamjonas/followers",
      "following_url": "https://api.github.com/users/adamjonas/following{/other_user}",
      "gists_url": "https://api.github.com/users/adamjonas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/adamjonas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/adamjonas/subscriptions",
      "organizations_url": "https://api.github.com/users/adamjonas/orgs",
      "repos_url": "https://api.github.com/users/adamjonas/repos",
      "events_url": "https://api.github.com/users/adamjonas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/adamjonas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-09T15:48:13Z",
    "updated_at": "2020-06-09T16:34:06Z",
    "author_association": "MEMBER",
    "body": "Re the format - autopep8 is making the diff much larger. I think it's easier, for now, to keep the diff as minimal as possible so reviewers can focus on the changes relevant to your patch. At the very least, you can break the formatting changes into their own commit and follow the lead of this [reformat](https://github.com/bitcoin/bitcoin/pull/19206/commits/faedb50d89cf113084adfa50c280c295c95571a8).\r\n\r\nI'd also suggest squashing your second commit since the first commit doesn't pass the linter without it.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/641392613/reactions",
      "total_count": 3,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/641464751",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19208#issuecomment-641464751",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19208",
    "id": 641464751,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MTQ2NDc1MQ==",
    "user": {
      "login": "ycshao",
      "id": 1574776,
      "node_id": "MDQ6VXNlcjE1NzQ3NzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1574776?u=57ea7859ba907a603e06129db17a12fd4d24f2b2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ycshao",
      "html_url": "https://github.com/ycshao",
      "followers_url": "https://api.github.com/users/ycshao/followers",
      "following_url": "https://api.github.com/users/ycshao/following{/other_user}",
      "gists_url": "https://api.github.com/users/ycshao/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ycshao/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ycshao/subscriptions",
      "organizations_url": "https://api.github.com/users/ycshao/orgs",
      "repos_url": "https://api.github.com/users/ycshao/repos",
      "events_url": "https://api.github.com/users/ycshao/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ycshao/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-09T17:32:18Z",
    "updated_at": "2020-06-09T17:32:18Z",
    "author_association": "CONTRIBUTOR",
    "body": "@adamjonas thanks for the answer and suggestion. I'll squash and break formatting into it's own commit.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/641464751/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/641575406",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19208#issuecomment-641575406",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19208",
    "id": 641575406,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0MTU3NTQwNg==",
    "user": {
      "login": "ycshao",
      "id": 1574776,
      "node_id": "MDQ6VXNlcjE1NzQ3NzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1574776?u=57ea7859ba907a603e06129db17a12fd4d24f2b2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ycshao",
      "html_url": "https://github.com/ycshao",
      "followers_url": "https://api.github.com/users/ycshao/followers",
      "following_url": "https://api.github.com/users/ycshao/following{/other_user}",
      "gists_url": "https://api.github.com/users/ycshao/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ycshao/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ycshao/subscriptions",
      "organizations_url": "https://api.github.com/users/ycshao/orgs",
      "repos_url": "https://api.github.com/users/ycshao/repos",
      "events_url": "https://api.github.com/users/ycshao/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ycshao/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-09T21:07:33Z",
    "updated_at": "2020-06-09T21:07:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Oo first PR? Concept ACK :) I'm guessing \"contextual information of test framework\" is the `timeout_factor`?\r\n\r\nYeah for now `timeout_factor` is easiest to be used. There are other things potentially can be used. I'm open to suggestions.\r\n* `rpc_timeout` - I think `rpc_timeout` is usually sometime different than timeout people want to configure for syncing operations. Unless there is a factor that can be applied to `rpc_timeout` to estimate syncing timeout. Open to suggestions. \r\n* `nodes` - We can by default sync all nodes and take in a parameter in `sync_blocks` and `sync_mempool` in case subset of nodes need to be synced. This way we get rid of `nodes` input of those two functions. \r\n\r\n> +1 to Jonas, just appeasing test/lint/lint-python.sh for now would be better.\r\n \r\n`lint-python.sh` gives me other linting errors which is not related to the file I touched. I guess I'll just make those five files I touched to be pep8 in a separate commit. If it's not necessary, it's easy to take it out.\r\n```\r\ntest/functional/p2p_compactblocks.py:688:43: E741 ambiguous variable name 'l'\r\ntest/functional/p2p_compactblocks.py:694:13: E741 ambiguous variable name 'l'\r\ntest/functional/p2p_compactblocks.py:697:17: E741 ambiguous variable name 'l'\r\ntest/functional/p2p_dos_header_tree.py:37:38: E741 ambiguous variable name 'l'\r\ntest/functional/p2p_dos_header_tree.py:42:31: E741 ambiguous variable name 'l'\r\ntest/functional/p2p_dos_header_tree.py:43:55: E741 ambiguous variable name 'l'\r\ntest/functional/test_framework/messages.py:70:22: E741 ambiguous variable name 'l'\r\ntest/functional/test_framework/messages.py:142:16: E741 ambiguous variable name 'l'\r\ntest/functional/test_framework/messages.py:161:24: E741 ambiguous variable name 'l'\r\ntest/functional/test_framework/messages.py:177:23: E741 ambiguous variable name 'l'\r\ntest/functional/wallet_labels.py:149:13: E741 ambiguous variable name 'l'\r\ntest/functional/wallet_labels.py:155:13: E741 ambiguous variable name 'l'\r\ntest/lint/lint-python.sh: line 105: mypy: command not found\r\n```\r\n\r\n> > Does it make sense to move `assert (all([len(x.getpeerinfo()) for x in rpc_connections]))` up to immediately after the while loop starts? It will assert sooner and save some time and operations. \r\n>\r\n> I had this thought too. But I think it would fail if the nodes happened to all be synced up (despite not being connected right now) before the first iteration of the while loop. I think it's possible...?\r\n\r\nI guess it's theoretically possible. \r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/641575406/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/646181802",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19208#issuecomment-646181802",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19208",
    "id": 646181802,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NjE4MTgwMg==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-18T17:08:31Z",
    "updated_at": "2020-06-18T17:08:31Z",
    "author_association": "MEMBER",
    "body": "Please squash your commits according to https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#squashing-commits and change the commit title to something more meaningful: https://github.com/bitcoin/bitcoin/pull/19208#pullrequestreview-433226219",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/646181802/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/646292504",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19208#issuecomment-646292504",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19208",
    "id": 646292504,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NjI5MjUwNA==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-18T20:36:12Z",
    "updated_at": "2020-06-18T20:36:12Z",
    "author_association": "MEMBER",
    "body": "ACK cc84460c164bcb2a874d4f08b3a2624e5ee9ff0a , reviewed with --color-moved=dimmed-zebra --color-moved-ws=ignore-all-space \ud83d\udcab\r\n\r\n<details><summary>Show signature and timestamp</summary>\r\n\r\nSignature:\r\n\r\n```\r\n-----BEGIN PGP SIGNED MESSAGE-----\r\nHash: SHA512\r\n\r\nACK cc84460c164bcb2a874d4f08b3a2624e5ee9ff0a , reviewed with --color-moved=dimmed-zebra --color-moved-ws=ignore-all-space \ud83d\udcab\r\n-----BEGIN PGP SIGNATURE-----\r\n\r\niQGzBAEBCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\r\npUh0+gv+MXi8uR6BQOeLwvt+luY9+MDS6qKEVkd1x6tUrhNL4R/1/HzIbCPA0n0O\r\nFH/bMuzMk19Fn4qkH4vGEJHPQTeT+CNEf9omuWRSrNU8pqicaBpAN0cpWcHbJSxD\r\nA8TC5uecJ1vWLmYruW9mnSTyYFTL7maKas7yKv4JsmsLIRhMPhWnJ2VU7MrCq9Uv\r\nUyR5VTYjiqmw3Gz24RJ9QTtJWTDJjlkNXs01ZrO1ijVX5Gak9QLx47wz60lh8wtT\r\nXtRQKOxsBGbJfrFexpU3IdThhNTuLTx1zcULgE2S6IOBF1Lph/CrSuZLv69H3bhW\r\nS45h7iliCQR5njyC93TB1GB56BDFGcvbFqkjP0jgB0sVdh+pRP4lcgTNRGPD8O+t\r\np4TbuTKMo6P1JbqB1TAzZCmWUjVLmTjReSvGlMKegA3FHTm2XyXQEuOT7KHNk2Bm\r\n2BHyvABW/hlIB/79YlUQ59pTC8CIvjEl0JQxY5VXOARyESD9PAteaJ5aFplnHtYl\r\neIUZJOgR\r\n=adom\r\n-----END PGP SIGNATURE-----\r\n```\r\n\r\n[Timestamp of file with hash `bea4e035a3dba2f2997391d4f35010649fa6ca21167797054925a5e15c237f47  -`](https://opentimestamps.org/info/?004f70656e54696d657374616d7073000050726f6f6600bf89e2e884e892940108bea4e035a3dba2f2997391d4f35010649fa6ca21167797054925a5e15c237f47f01008f9e05f01a93fe95ef5b6ab10ac836a08fff010594ce5ad6ad56c80ec435d8aef4606f108f1045eebd031f008ed7222c780288ad00083dfe30d2ef90c8e292868747470733a2f2f66696e6e65792e63616c656e6461722e657465726e69747977616c6c2e636f6dfff0106b1050e28df84d40615e3351f28c4a2108f1045eebd031f008eebccb7c190a49060083dfe30d2ef90c8e232268747470733a2f2f6274632e63616c656e6461722e636174616c6c6178792e636f6dfff010dbcc5612f65d79185f9f21ccef31505708f1045eebd031f0084169885ed2ca354b0083dfe30d2ef90c8e2c2b68747470733a2f2f626f622e6274632e63616c656e6461722e6f70656e74696d657374616d70732e6f7267f010de679ec0889641286b599536c843f24a08f1045eebd031f00812810bab20f7d49a0083dfe30d2ef90c8e2e2d68747470733a2f2f616c6963652e6274632e63616c656e6461722e6f70656e74696d657374616d70732e6f7267)\r\n\r\n</details>\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/646292504/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/647279145",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19208#issuecomment-647279145",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19208",
    "id": 647279145,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NzI3OTE0NQ==",
    "user": {
      "login": "ycshao",
      "id": 1574776,
      "node_id": "MDQ6VXNlcjE1NzQ3NzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1574776?u=57ea7859ba907a603e06129db17a12fd4d24f2b2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ycshao",
      "html_url": "https://github.com/ycshao",
      "followers_url": "https://api.github.com/users/ycshao/followers",
      "following_url": "https://api.github.com/users/ycshao/following{/other_user}",
      "gists_url": "https://api.github.com/users/ycshao/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ycshao/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ycshao/subscriptions",
      "organizations_url": "https://api.github.com/users/ycshao/orgs",
      "repos_url": "https://api.github.com/users/ycshao/repos",
      "events_url": "https://api.github.com/users/ycshao/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ycshao/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-22T05:05:09Z",
    "updated_at": "2020-06-22T05:05:09Z",
    "author_association": "CONTRIBUTOR",
    "body": "@MarcoFalke @gzhao408 @adamjonas  thanks for reviewing and merge!",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/647279145/reactions",
      "total_count": 2,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 1,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/437665086",
    "pull_request_review_id": 427472253,
    "id": 437665086,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzY2NTA4Ng==",
    "diff_hunk": "@@ -542,15 +564,53 @@ def join_network(self):\n         connect_nodes(self.nodes[1], 2)\n         self.sync_all()\n \n-    def sync_blocks(self, nodes=None, **kwargs):\n-        sync_blocks(nodes or self.nodes, **kwargs)\n-\n-    def sync_mempools(self, nodes=None, **kwargs):\n-        sync_mempools(nodes or self.nodes, **kwargs)\n+    def sync_blocks(self, nodes=None, wait=1, timeout=60):\n+        \"\"\"\n+        Wait until everybody has the same tip.\n \n-    def sync_all(self, nodes=None, **kwargs):\n-        self.sync_blocks(nodes, **kwargs)\n-        self.sync_mempools(nodes, **kwargs)\n+        sync_blocks needs to be called with an rpc_connections set that has least",
    "path": "test/functional/test_framework/test_framework.py",
    "position": 25,
    "original_position": 233,
    "commit_id": "cc84460c164bcb2a874d4f08b3a2624e5ee9ff0a",
    "original_commit_id": "36404ae22c067c2297c185e7ae8b0ee85856493a",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I have a question - it's probably not a big deal to require at least one node to be updated, but would it be appropriate to have an optional `blockhash` parameter and enforce that hash instead?",
    "created_at": "2020-06-09T19:24:50Z",
    "updated_at": "2020-06-18T17:34:04Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19208#discussion_r437665086",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19208",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/437665086"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19208#discussion_r437665086"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19208"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/437665086/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 545,
    "original_line": 545,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/437743043",
    "pull_request_review_id": 427571381,
    "id": 437743043,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzc0MzA0Mw==",
    "diff_hunk": "@@ -542,15 +564,53 @@ def join_network(self):\n         connect_nodes(self.nodes[1], 2)\n         self.sync_all()\n \n-    def sync_blocks(self, nodes=None, **kwargs):\n-        sync_blocks(nodes or self.nodes, **kwargs)\n-\n-    def sync_mempools(self, nodes=None, **kwargs):\n-        sync_mempools(nodes or self.nodes, **kwargs)\n+    def sync_blocks(self, nodes=None, wait=1, timeout=60):\n+        \"\"\"\n+        Wait until everybody has the same tip.\n \n-    def sync_all(self, nodes=None, **kwargs):\n-        self.sync_blocks(nodes, **kwargs)\n-        self.sync_mempools(nodes, **kwargs)\n+        sync_blocks needs to be called with an rpc_connections set that has least",
    "path": "test/functional/test_framework/test_framework.py",
    "position": 25,
    "original_position": 233,
    "commit_id": "cc84460c164bcb2a874d4f08b3a2624e5ee9ff0a",
    "original_commit_id": "36404ae22c067c2297c185e7ae8b0ee85856493a",
    "user": {
      "login": "ycshao",
      "id": 1574776,
      "node_id": "MDQ6VXNlcjE1NzQ3NzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1574776?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ycshao",
      "html_url": "https://github.com/ycshao",
      "followers_url": "https://api.github.com/users/ycshao/followers",
      "following_url": "https://api.github.com/users/ycshao/following{/other_user}",
      "gists_url": "https://api.github.com/users/ycshao/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ycshao/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ycshao/subscriptions",
      "organizations_url": "https://api.github.com/users/ycshao/orgs",
      "repos_url": "https://api.github.com/users/ycshao/repos",
      "events_url": "https://api.github.com/users/ycshao/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ycshao/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I don't see a use case like that in current code. But I think one benefit your idea will give is to shorten test run time if the block we need to sync to is not usually the tip. ",
    "created_at": "2020-06-09T21:51:39Z",
    "updated_at": "2020-06-18T17:34:04Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19208#discussion_r437743043",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19208",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/437743043"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19208#discussion_r437743043"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19208"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/437743043/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 545,
    "original_line": 545,
    "side": "RIGHT",
    "in_reply_to_id": 437665086
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/440946740",
    "pull_request_review_id": 431635418,
    "id": 440946740,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDk0Njc0MA==",
    "diff_hunk": "@@ -204,11 +213,13 @@ def setup(self):\n             \"bitcoin-cli\" + config[\"environment\"][\"EXEEXT\"],\n         )\n         self.options.bitcoind = os.getenv(\"BITCOIND\", default=fname_bitcoind)\n-        self.options.bitcoincli = os.getenv(\"BITCOINCLI\", default=fname_bitcoincli)\n+        self.options.bitcoincli = os.getenv(\n+            \"BITCOINCLI\", default=fname_bitcoincli)\n \n         os.environ['PATH'] = os.pathsep.join([\n             os.path.join(config['environment']['BUILDDIR'], 'src'),\n-            os.path.join(config['environment']['BUILDDIR'], 'src', 'qt'), os.environ['PATH']\n+            os.path.join(config['environment']['BUILDDIR'],\n+                         'src', 'qt'), os.environ['PATH']",
    "path": "test/functional/test_framework/test_framework.py",
    "position": null,
    "original_position": 97,
    "commit_id": "cc84460c164bcb2a874d4f08b3a2624e5ee9ff0a",
    "original_commit_id": "4563520ee34e4be508232e1e503b1b4c889d23ad",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I am not sure it this is actually more readable (we've generally been using more a limit of 120 instead of 80).\r\nAnd taking into account the large number of conflicts due to the pep-8 change, maybe leave it out for now?",
    "created_at": "2020-06-16T15:34:20Z",
    "updated_at": "2020-06-18T17:34:04Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19208#discussion_r440946740",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19208",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/440946740"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19208#discussion_r440946740"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19208"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/440946740/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 222,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/441930629",
    "pull_request_review_id": 432894950,
    "id": 441930629,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTkzMDYyOQ==",
    "diff_hunk": "@@ -204,11 +213,13 @@ def setup(self):\n             \"bitcoin-cli\" + config[\"environment\"][\"EXEEXT\"],\n         )\n         self.options.bitcoind = os.getenv(\"BITCOIND\", default=fname_bitcoind)\n-        self.options.bitcoincli = os.getenv(\"BITCOINCLI\", default=fname_bitcoincli)\n+        self.options.bitcoincli = os.getenv(\n+            \"BITCOINCLI\", default=fname_bitcoincli)\n \n         os.environ['PATH'] = os.pathsep.join([\n             os.path.join(config['environment']['BUILDDIR'], 'src'),\n-            os.path.join(config['environment']['BUILDDIR'], 'src', 'qt'), os.environ['PATH']\n+            os.path.join(config['environment']['BUILDDIR'],\n+                         'src', 'qt'), os.environ['PATH']",
    "path": "test/functional/test_framework/test_framework.py",
    "position": null,
    "original_position": 97,
    "commit_id": "cc84460c164bcb2a874d4f08b3a2624e5ee9ff0a",
    "original_commit_id": "4563520ee34e4be508232e1e503b1b4c889d23ad",
    "user": {
      "login": "ycshao",
      "id": 1574776,
      "node_id": "MDQ6VXNlcjE1NzQ3NzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1574776?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ycshao",
      "html_url": "https://github.com/ycshao",
      "followers_url": "https://api.github.com/users/ycshao/followers",
      "following_url": "https://api.github.com/users/ycshao/following{/other_user}",
      "gists_url": "https://api.github.com/users/ycshao/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ycshao/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ycshao/subscriptions",
      "organizations_url": "https://api.github.com/users/ycshao/orgs",
      "repos_url": "https://api.github.com/users/ycshao/repos",
      "events_url": "https://api.github.com/users/ycshao/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ycshao/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Reverted",
    "created_at": "2020-06-18T02:18:26Z",
    "updated_at": "2020-06-18T17:34:04Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19208#discussion_r441930629",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19208",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/441930629"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19208#discussion_r441930629"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19208"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/441930629/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 222,
    "side": "RIGHT",
    "in_reply_to_id": 440946740
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442184470",
    "pull_request_review_id": 433226219,
    "id": 442184470,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjE4NDQ3MA==",
    "diff_hunk": "@@ -541,15 +539,52 @@ def join_network(self):\n         connect_nodes(self.nodes[1], 2)\n         self.sync_all()\n \n-    def sync_blocks(self, nodes=None, **kwargs):\n-        sync_blocks(nodes or self.nodes, **kwargs)\n-\n-    def sync_mempools(self, nodes=None, **kwargs):\n-        sync_mempools(nodes or self.nodes, **kwargs)\n-\n-    def sync_all(self, nodes=None, **kwargs):\n-        self.sync_blocks(nodes, **kwargs)\n-        self.sync_mempools(nodes, **kwargs)",
    "path": "test/functional/test_framework/test_framework.py",
    "position": 21,
    "original_position": 21,
    "commit_id": "cc84460c164bcb2a874d4f08b3a2624e5ee9ff0a",
    "original_commit_id": "5347a7597bc15b03c6930bb72ee39d143d561df0",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "why is this changed?",
    "created_at": "2020-06-18T12:21:55Z",
    "updated_at": "2020-06-18T17:34:04Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19208#discussion_r442184470",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19208",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442184470"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19208#discussion_r442184470"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19208"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442184470/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 552,
    "original_line": 552,
    "side": "LEFT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442184885",
    "pull_request_review_id": 433226219,
    "id": 442184885,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjE4NDg4NQ==",
    "diff_hunk": "@@ -541,15 +539,52 @@ def join_network(self):\n         connect_nodes(self.nodes[1], 2)\n         self.sync_all()\n \n-    def sync_blocks(self, nodes=None, **kwargs):\n-        sync_blocks(nodes or self.nodes, **kwargs)\n-\n-    def sync_mempools(self, nodes=None, **kwargs):\n-        sync_mempools(nodes or self.nodes, **kwargs)\n-\n-    def sync_all(self, nodes=None, **kwargs):\n-        self.sync_blocks(nodes, **kwargs)\n-        self.sync_mempools(nodes, **kwargs)\n+    def sync_blocks(self, nodes=None, wait=1, timeout=60):\n+        \"\"\"\n+        Wait until everybody has the same tip.\n+        sync_blocks needs to be called with an rpc_connections set that has least\n+        one node already synced to the latest, stable tip, otherwise there's a\n+        chance it might return before all nodes are stably synced.\n+        \"\"\"\n+        rpc_connections = nodes or self.nodes\n+        stop_time = time.time() + int(timeout * self.options.timeout_factor)\n+        while time.time() <= stop_time:\n+            best_hash = [x.getbestblockhash() for x in rpc_connections]\n+            if best_hash.count(best_hash[0]) == len(rpc_connections):\n+                return\n+            # Check that each peer has at least one connection\n+            assert (all([len(x.getpeerinfo()) for x in rpc_connections]))\n+            time.sleep(wait)\n+        raise AssertionError(\"Block sync timed out after {}s:{}\".format(\n+            int(timeout * self.options.timeout_factor),",
    "path": "test/functional/test_framework/test_framework.py",
    "position": null,
    "original_position": 39,
    "commit_id": "cc84460c164bcb2a874d4f08b3a2624e5ee9ff0a",
    "original_commit_id": "5347a7597bc15b03c6930bb72ee39d143d561df0",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "You don't need to change this if you just set `timeout = int(timeout * self.options.timeout_factor)` at the beginning of the function",
    "created_at": "2020-06-18T12:22:39Z",
    "updated_at": "2020-06-18T17:34:04Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19208#discussion_r442184885",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19208",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442184885"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19208#discussion_r442184885"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19208"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442184885/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 559,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442184938",
    "pull_request_review_id": 433226219,
    "id": 442184938,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjE4NDkzOA==",
    "diff_hunk": "@@ -541,15 +539,52 @@ def join_network(self):\n         connect_nodes(self.nodes[1], 2)\n         self.sync_all()\n \n-    def sync_blocks(self, nodes=None, **kwargs):\n-        sync_blocks(nodes or self.nodes, **kwargs)\n-\n-    def sync_mempools(self, nodes=None, **kwargs):\n-        sync_mempools(nodes or self.nodes, **kwargs)\n-\n-    def sync_all(self, nodes=None, **kwargs):\n-        self.sync_blocks(nodes, **kwargs)\n-        self.sync_mempools(nodes, **kwargs)\n+    def sync_blocks(self, nodes=None, wait=1, timeout=60):\n+        \"\"\"\n+        Wait until everybody has the same tip.\n+        sync_blocks needs to be called with an rpc_connections set that has least\n+        one node already synced to the latest, stable tip, otherwise there's a\n+        chance it might return before all nodes are stably synced.\n+        \"\"\"\n+        rpc_connections = nodes or self.nodes\n+        stop_time = time.time() + int(timeout * self.options.timeout_factor)\n+        while time.time() <= stop_time:\n+            best_hash = [x.getbestblockhash() for x in rpc_connections]\n+            if best_hash.count(best_hash[0]) == len(rpc_connections):\n+                return\n+            # Check that each peer has at least one connection\n+            assert (all([len(x.getpeerinfo()) for x in rpc_connections]))\n+            time.sleep(wait)\n+        raise AssertionError(\"Block sync timed out after {}s:{}\".format(\n+            int(timeout * self.options.timeout_factor),\n+            \"\".join(\"\\n  {!r}\".format(b) for b in best_hash),\n+        ))\n+\n+    def sync_mempools(self, nodes=None, wait=1, timeout=60, flush_scheduler=True):\n+        \"\"\"\n+        Wait until everybody has the same transactions in their memory\n+        pools\n+        \"\"\"\n+        rpc_connections = nodes or self.nodes\n+        stop_time = time.time() + int(timeout * self.options.timeout_factor)\n+        while time.time() <= stop_time:\n+            pool = [set(r.getrawmempool()) for r in rpc_connections]\n+            if pool.count(pool[0]) == len(rpc_connections):\n+                if flush_scheduler:\n+                    for r in rpc_connections:\n+                        r.syncwithvalidationinterfacequeue()\n+                return\n+            # Check that each peer has at least one connection\n+            assert (all([len(x.getpeerinfo()) for x in rpc_connections]))\n+            time.sleep(wait)\n+        raise AssertionError(\"Mempool sync timed out after {}s:{}\".format(\n+            int(timeout * self.options.timeout_factor),",
    "path": "test/functional/test_framework/test_framework.py",
    "position": null,
    "original_position": 61,
    "commit_id": "cc84460c164bcb2a874d4f08b3a2624e5ee9ff0a",
    "original_commit_id": "5347a7597bc15b03c6930bb72ee39d143d561df0",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "same",
    "created_at": "2020-06-18T12:22:46Z",
    "updated_at": "2020-06-18T17:34:04Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19208#discussion_r442184938",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19208",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442184938"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19208#discussion_r442184938"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19208"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442184938/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 581,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442366467",
    "pull_request_review_id": 433469534,
    "id": 442366467,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjM2NjQ2Nw==",
    "diff_hunk": "@@ -541,15 +539,52 @@ def join_network(self):\n         connect_nodes(self.nodes[1], 2)\n         self.sync_all()\n \n-    def sync_blocks(self, nodes=None, **kwargs):\n-        sync_blocks(nodes or self.nodes, **kwargs)\n-\n-    def sync_mempools(self, nodes=None, **kwargs):\n-        sync_mempools(nodes or self.nodes, **kwargs)\n-\n-    def sync_all(self, nodes=None, **kwargs):\n-        self.sync_blocks(nodes, **kwargs)\n-        self.sync_mempools(nodes, **kwargs)",
    "path": "test/functional/test_framework/test_framework.py",
    "position": 21,
    "original_position": 21,
    "commit_id": "cc84460c164bcb2a874d4f08b3a2624e5ee9ff0a",
    "original_commit_id": "5347a7597bc15b03c6930bb72ee39d143d561df0",
    "user": {
      "login": "ycshao",
      "id": 1574776,
      "node_id": "MDQ6VXNlcjE1NzQ3NzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1574776?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ycshao",
      "html_url": "https://github.com/ycshao",
      "followers_url": "https://api.github.com/users/ycshao/followers",
      "following_url": "https://api.github.com/users/ycshao/following{/other_user}",
      "gists_url": "https://api.github.com/users/ycshao/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ycshao/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ycshao/subscriptions",
      "organizations_url": "https://api.github.com/users/ycshao/orgs",
      "repos_url": "https://api.github.com/users/ycshao/repos",
      "events_url": "https://api.github.com/users/ycshao/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ycshao/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I removed `**kwargs` which are not used. ",
    "created_at": "2020-06-18T16:49:36Z",
    "updated_at": "2020-06-18T17:34:04Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19208#discussion_r442366467",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19208",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442366467"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19208#discussion_r442366467"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19208"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442366467/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 552,
    "original_line": 552,
    "side": "LEFT",
    "in_reply_to_id": 442184470
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442369187",
    "pull_request_review_id": 433473115,
    "id": 442369187,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjM2OTE4Nw==",
    "diff_hunk": "@@ -541,15 +539,52 @@ def join_network(self):\n         connect_nodes(self.nodes[1], 2)\n         self.sync_all()\n \n-    def sync_blocks(self, nodes=None, **kwargs):\n-        sync_blocks(nodes or self.nodes, **kwargs)\n-\n-    def sync_mempools(self, nodes=None, **kwargs):\n-        sync_mempools(nodes or self.nodes, **kwargs)\n-\n-    def sync_all(self, nodes=None, **kwargs):\n-        self.sync_blocks(nodes, **kwargs)\n-        self.sync_mempools(nodes, **kwargs)",
    "path": "test/functional/test_framework/test_framework.py",
    "position": 21,
    "original_position": 21,
    "commit_id": "cc84460c164bcb2a874d4f08b3a2624e5ee9ff0a",
    "original_commit_id": "5347a7597bc15b03c6930bb72ee39d143d561df0",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I think they might come in handy in the future. Is there a reason they will be unused forever?",
    "created_at": "2020-06-18T16:54:17Z",
    "updated_at": "2020-06-18T17:34:04Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19208#discussion_r442369187",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19208",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442369187"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19208#discussion_r442369187"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19208"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442369187/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 552,
    "original_line": 552,
    "side": "LEFT",
    "in_reply_to_id": 442184470
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442375376",
    "pull_request_review_id": 433481462,
    "id": 442375376,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjM3NTM3Ng==",
    "diff_hunk": "@@ -541,15 +539,52 @@ def join_network(self):\n         connect_nodes(self.nodes[1], 2)\n         self.sync_all()\n \n-    def sync_blocks(self, nodes=None, **kwargs):\n-        sync_blocks(nodes or self.nodes, **kwargs)\n-\n-    def sync_mempools(self, nodes=None, **kwargs):\n-        sync_mempools(nodes or self.nodes, **kwargs)\n-\n-    def sync_all(self, nodes=None, **kwargs):\n-        self.sync_blocks(nodes, **kwargs)\n-        self.sync_mempools(nodes, **kwargs)",
    "path": "test/functional/test_framework/test_framework.py",
    "position": 21,
    "original_position": 21,
    "commit_id": "cc84460c164bcb2a874d4f08b3a2624e5ee9ff0a",
    "original_commit_id": "5347a7597bc15b03c6930bb72ee39d143d561df0",
    "user": {
      "login": "ycshao",
      "id": 1574776,
      "node_id": "MDQ6VXNlcjE1NzQ3NzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1574776?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ycshao",
      "html_url": "https://github.com/ycshao",
      "followers_url": "https://api.github.com/users/ycshao/followers",
      "following_url": "https://api.github.com/users/ycshao/following{/other_user}",
      "gists_url": "https://api.github.com/users/ycshao/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ycshao/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ycshao/subscriptions",
      "organizations_url": "https://api.github.com/users/ycshao/orgs",
      "repos_url": "https://api.github.com/users/ycshao/repos",
      "events_url": "https://api.github.com/users/ycshao/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ycshao/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I feel it's better to add it when it will be used in instead of putting it there up front just because some time in the future it might be used. What do you think?",
    "created_at": "2020-06-18T17:05:10Z",
    "updated_at": "2020-06-18T17:34:04Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19208#discussion_r442375376",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19208",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442375376"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19208#discussion_r442375376"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19208"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442375376/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 552,
    "original_line": 552,
    "side": "LEFT",
    "in_reply_to_id": 442184470
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442375671",
    "pull_request_review_id": 433481462,
    "id": 442375671,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjM3NTY3MQ==",
    "diff_hunk": "@@ -541,15 +539,52 @@ def join_network(self):\n         connect_nodes(self.nodes[1], 2)\n         self.sync_all()\n \n-    def sync_blocks(self, nodes=None, **kwargs):\n-        sync_blocks(nodes or self.nodes, **kwargs)\n-\n-    def sync_mempools(self, nodes=None, **kwargs):\n-        sync_mempools(nodes or self.nodes, **kwargs)\n-\n-    def sync_all(self, nodes=None, **kwargs):\n-        self.sync_blocks(nodes, **kwargs)\n-        self.sync_mempools(nodes, **kwargs)\n+    def sync_blocks(self, nodes=None, wait=1, timeout=60):\n+        \"\"\"\n+        Wait until everybody has the same tip.\n+        sync_blocks needs to be called with an rpc_connections set that has least\n+        one node already synced to the latest, stable tip, otherwise there's a\n+        chance it might return before all nodes are stably synced.\n+        \"\"\"\n+        rpc_connections = nodes or self.nodes\n+        stop_time = time.time() + int(timeout * self.options.timeout_factor)\n+        while time.time() <= stop_time:\n+            best_hash = [x.getbestblockhash() for x in rpc_connections]\n+            if best_hash.count(best_hash[0]) == len(rpc_connections):\n+                return\n+            # Check that each peer has at least one connection\n+            assert (all([len(x.getpeerinfo()) for x in rpc_connections]))\n+            time.sleep(wait)\n+        raise AssertionError(\"Block sync timed out after {}s:{}\".format(\n+            int(timeout * self.options.timeout_factor),",
    "path": "test/functional/test_framework/test_framework.py",
    "position": null,
    "original_position": 39,
    "commit_id": "cc84460c164bcb2a874d4f08b3a2624e5ee9ff0a",
    "original_commit_id": "5347a7597bc15b03c6930bb72ee39d143d561df0",
    "user": {
      "login": "ycshao",
      "id": 1574776,
      "node_id": "MDQ6VXNlcjE1NzQ3NzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1574776?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ycshao",
      "html_url": "https://github.com/ycshao",
      "followers_url": "https://api.github.com/users/ycshao/followers",
      "following_url": "https://api.github.com/users/ycshao/following{/other_user}",
      "gists_url": "https://api.github.com/users/ycshao/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ycshao/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ycshao/subscriptions",
      "organizations_url": "https://api.github.com/users/ycshao/orgs",
      "repos_url": "https://api.github.com/users/ycshao/repos",
      "events_url": "https://api.github.com/users/ycshao/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ycshao/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Changed",
    "created_at": "2020-06-18T17:05:42Z",
    "updated_at": "2020-06-18T17:34:04Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19208#discussion_r442375671",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19208",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442375671"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19208#discussion_r442375671"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19208"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442375671/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 559,
    "side": "RIGHT",
    "in_reply_to_id": 442184885
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442375764",
    "pull_request_review_id": 433481462,
    "id": 442375764,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjM3NTc2NA==",
    "diff_hunk": "@@ -541,15 +539,52 @@ def join_network(self):\n         connect_nodes(self.nodes[1], 2)\n         self.sync_all()\n \n-    def sync_blocks(self, nodes=None, **kwargs):\n-        sync_blocks(nodes or self.nodes, **kwargs)\n-\n-    def sync_mempools(self, nodes=None, **kwargs):\n-        sync_mempools(nodes or self.nodes, **kwargs)\n-\n-    def sync_all(self, nodes=None, **kwargs):\n-        self.sync_blocks(nodes, **kwargs)\n-        self.sync_mempools(nodes, **kwargs)\n+    def sync_blocks(self, nodes=None, wait=1, timeout=60):\n+        \"\"\"\n+        Wait until everybody has the same tip.\n+        sync_blocks needs to be called with an rpc_connections set that has least\n+        one node already synced to the latest, stable tip, otherwise there's a\n+        chance it might return before all nodes are stably synced.\n+        \"\"\"\n+        rpc_connections = nodes or self.nodes\n+        stop_time = time.time() + int(timeout * self.options.timeout_factor)\n+        while time.time() <= stop_time:\n+            best_hash = [x.getbestblockhash() for x in rpc_connections]\n+            if best_hash.count(best_hash[0]) == len(rpc_connections):\n+                return\n+            # Check that each peer has at least one connection\n+            assert (all([len(x.getpeerinfo()) for x in rpc_connections]))\n+            time.sleep(wait)\n+        raise AssertionError(\"Block sync timed out after {}s:{}\".format(\n+            int(timeout * self.options.timeout_factor),\n+            \"\".join(\"\\n  {!r}\".format(b) for b in best_hash),\n+        ))\n+\n+    def sync_mempools(self, nodes=None, wait=1, timeout=60, flush_scheduler=True):\n+        \"\"\"\n+        Wait until everybody has the same transactions in their memory\n+        pools\n+        \"\"\"\n+        rpc_connections = nodes or self.nodes\n+        stop_time = time.time() + int(timeout * self.options.timeout_factor)\n+        while time.time() <= stop_time:\n+            pool = [set(r.getrawmempool()) for r in rpc_connections]\n+            if pool.count(pool[0]) == len(rpc_connections):\n+                if flush_scheduler:\n+                    for r in rpc_connections:\n+                        r.syncwithvalidationinterfacequeue()\n+                return\n+            # Check that each peer has at least one connection\n+            assert (all([len(x.getpeerinfo()) for x in rpc_connections]))\n+            time.sleep(wait)\n+        raise AssertionError(\"Mempool sync timed out after {}s:{}\".format(\n+            int(timeout * self.options.timeout_factor),",
    "path": "test/functional/test_framework/test_framework.py",
    "position": null,
    "original_position": 61,
    "commit_id": "cc84460c164bcb2a874d4f08b3a2624e5ee9ff0a",
    "original_commit_id": "5347a7597bc15b03c6930bb72ee39d143d561df0",
    "user": {
      "login": "ycshao",
      "id": 1574776,
      "node_id": "MDQ6VXNlcjE1NzQ3NzY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1574776?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ycshao",
      "html_url": "https://github.com/ycshao",
      "followers_url": "https://api.github.com/users/ycshao/followers",
      "following_url": "https://api.github.com/users/ycshao/following{/other_user}",
      "gists_url": "https://api.github.com/users/ycshao/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ycshao/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ycshao/subscriptions",
      "organizations_url": "https://api.github.com/users/ycshao/orgs",
      "repos_url": "https://api.github.com/users/ycshao/repos",
      "events_url": "https://api.github.com/users/ycshao/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ycshao/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "changed",
    "created_at": "2020-06-18T17:05:50Z",
    "updated_at": "2020-06-18T17:34:04Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19208#discussion_r442375764",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19208",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442375764"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19208#discussion_r442375764"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19208"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/442375764/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 581,
    "side": "RIGHT",
    "in_reply_to_id": 442184938
  }
]