[
  {
    "sha": "05fb9f7fbb270638f8ff4990fe68037e1a52a85f",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowNWZiOWY3ZmJiMjcwNjM4ZjhmZjQ5OTBmZTY4MDM3ZTFhNTJhODVm",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2019-05-08T18:28:57Z"
      },
      "committer": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2019-06-07T08:07:36Z"
      },
      "message": "build with -fstack-reuse=none\n\nGithub-Pull: #15983\nRebased-From: faf38bc056e523485520f98f3f725c583a3b89bf",
      "tree": {
        "sha": "69d0144888fa9c10a0213cca858ae2bf463e3337",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/69d0144888fa9c10a0213cca858ae2bf463e3337"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/05fb9f7fbb270638f8ff4990fe68037e1a52a85f",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEz7FuIclQ9n+pXlWPLuufXMCVJsEFAlz6G4cACgkQLuufXMCV\nJsHgeRAAnSymvamOT66mwrlhS4SYb/01SnjAO9m3Ip7Hb9+iP881wj5+DILn6MmJ\nIeYqAV3qRj1hPGkgQOHnAziRn0NwuBOBk+zJx0pPCXN6Y7cqUiJ45SxhkKOyDYc0\nN/SaoMIr90ugdPSF8tq6Jf2cPLeT4m6tF55hsveUyg00NfAnlOyMprfFJpe3lEGA\nohFgayJ55aISPRotJMo3Owh6ZIMEJ1BUR2BzjVkMizYuJmdtLHfTGJ/27rKwjqN/\n70I4p8yFFkDUvpvLtswSWskg0e3BhtkUWoA9OPyFH1n3V0Tb6+VYddTvIhieZ8ts\nRnYVmeC/zE9v2Cn5OdoNmDxoPd/1iVmJz9ORVwpfo1TX5+q8CYzTa2Sq1/IT+xdt\nL3u2/GbHFwiGx1sgR4sQmQviJJknQpocrdRY3ZT3FcGPqXTXAiFYASoWo+HBxl2X\n3CNkv83foUB0FzhK53wAYHYFXGwOvLt3IfLNg4/VyHoUJP541IGVrCx4mOwiKvzf\nU0iH3zJihKGTTW9vrXv8Hr1mUKz46agt2TRBLxlcUhLjuEDp9U/rEm8IYzazxR8q\nlUtalQPMLqxRAq5EXOXbFFTkx/WcDwBuU5ZxgU/A8eoXZ/JVVu6dUrD0BPeLczqY\nmmN6hBsyh4IhGeXGLOQ/HwMwjlpavymFFiWOGMh39zC3jgtZS7o=\n=T3uE\n-----END PGP SIGNATURE-----",
        "payload": "tree 69d0144888fa9c10a0213cca858ae2bf463e3337\nparent 6cf81b01b48e871a35072dd08e7735c3ba42528c\nauthor MarcoFalke <falke.marco@gmail.com> 1557340137 -0400\ncommitter fanquake <fanquake@gmail.com> 1559894856 +0200\n\nbuild with -fstack-reuse=none\n\nGithub-Pull: #15983\nRebased-From: faf38bc056e523485520f98f3f725c583a3b89bf\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/05fb9f7fbb270638f8ff4990fe68037e1a52a85f",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/05fb9f7fbb270638f8ff4990fe68037e1a52a85f",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/05fb9f7fbb270638f8ff4990fe68037e1a52a85f/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "6cf81b01b48e871a35072dd08e7735c3ba42528c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6cf81b01b48e871a35072dd08e7735c3ba42528c",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/6cf81b01b48e871a35072dd08e7735c3ba42528c"
      }
    ],
    "stats": {
      "total": 4,
      "additions": 4,
      "deletions": 0
    },
    "files": [
      {
        "sha": "8449617085cce0041cef5af68dfad68d19cf43b8",
        "filename": "configure.ac",
        "status": "modified",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/05fb9f7fbb270638f8ff4990fe68037e1a52a85f/configure.ac",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/05fb9f7fbb270638f8ff4990fe68037e1a52a85f/configure.ac",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/configure.ac?ref=05fb9f7fbb270638f8ff4990fe68037e1a52a85f",
        "patch": "@@ -693,6 +693,10 @@ if test x$TARGET_OS != xwindows; then\n   AX_CHECK_COMPILE_FLAG([-fPIC],[PIC_FLAGS=\"-fPIC\"])\n fi\n \n+# All versions of gcc that we commonly use for building are subject to bug\n+# https://gcc.gnu.org/bugzilla/show_bug.cgi?id=90348. To work around that, set\n+# -fstack-reuse=none for all gcc builds. (Only gcc understands this flag)\n+AX_CHECK_COMPILE_FLAG([-fstack-reuse=none],[HARDENED_CXXFLAGS=\"$HARDENED_CXXFLAGS -fstack-reuse=none\"])\n if test x$use_hardening != xno; then\n   use_hardening=yes\n   AX_CHECK_COMPILE_FLAG([-Wstack-protector],[HARDENED_CXXFLAGS=\"$HARDENED_CXXFLAGS -Wstack-protector\"])"
      }
    ]
  },
  {
    "sha": "b5a4abeca238a0fa37b34e35ca610dcfe7112c82",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiNWE0YWJlY2EyMzhhMGZhMzdiMzRlMzVjYTYxMGRjZmU3MTEyYzgy",
    "commit": {
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter.wuille@gmail.com",
        "date": "2019-05-08T20:29:44Z"
      },
      "committer": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2019-06-07T08:21:26Z"
      },
      "message": "Add test for GCC bug 90348\n\nGithub-Pull: #15985\nRebased-From: 58e291cfad12fa85af87d093acfa7b44702e3521",
      "tree": {
        "sha": "2b2c7f80e79b03411a5f13c8beffc073d33eb257",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2b2c7f80e79b03411a5f13c8beffc073d33eb257"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b5a4abeca238a0fa37b34e35ca610dcfe7112c82",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEz7FuIclQ9n+pXlWPLuufXMCVJsEFAlz6HogACgkQLuufXMCV\nJsFphw//bY0ryMMuGbSfOOlnWNPX2dPF/kJAUskLdcC/jJNYRtza5PTBqxY4A3EF\nJbdz4rRj2LWRUxolp86zX03CNWzTpfvVW7uYmRZ2Ed3+TMpIE1EVltQYUppKfv5H\nhcO7v4+Q/7xorr19DDq4kNf7eTZgykXa0xAPlfK65/E08ZYU8MbGCRXydc73KYML\nlhvqFDAoRxUC/3tkJnXCzek1aEXyd4Rcj9JYGS5il5Wjxkdez/R1Jq4fHj8DzI9z\nIbDKPQAJdyGg7SmeHhhEWTJU50BHnOLDs7WFvefetWGV4mYB/Er11VE+yPT50j71\n4F+E55ypT72iR3dkjNAAtHGeZCYbTvaV8hk+cP5n8iebFcB3dZ7w7cxTYBaN2DEg\n78NZS5ref/mO8NCC1UxKpcW0y70JTeaiNLlNWhYSGdv80CDKMK1NOl/pvY8lxmfK\nrFsoyEZ7y6yrR6clz2QRP9X1vSld2n5ZhZ971S5O07wFNrAkw9NvBIx34XHThab8\nz1VF0fI2rwXyszDTgY+JWHctQtjAfSIO/qJg6gaik56pwYQ7zXXYSiJjsTbAxEZg\nw9jJgL3Yn4HfS9CScoZq4Vkeyl376ftuniobP5Q4kiasTQXPBq5TGtVjIYlK3rNR\nzz1GS/VV6QwLsL8suxoZzUknalhjDDfixyrL6WhL6aAsAnXE1pM=\n=rgEN\n-----END PGP SIGNATURE-----",
        "payload": "tree 2b2c7f80e79b03411a5f13c8beffc073d33eb257\nparent 05fb9f7fbb270638f8ff4990fe68037e1a52a85f\nauthor Pieter Wuille <pieter.wuille@gmail.com> 1557347384 -0700\ncommitter fanquake <fanquake@gmail.com> 1559895686 +0200\n\nAdd test for GCC bug 90348\n\nGithub-Pull: #15985\nRebased-From: 58e291cfad12fa85af87d093acfa7b44702e3521\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b5a4abeca238a0fa37b34e35ca610dcfe7112c82",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/b5a4abeca238a0fa37b34e35ca610dcfe7112c82",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b5a4abeca238a0fa37b34e35ca610dcfe7112c82/comments",
    "author": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "05fb9f7fbb270638f8ff4990fe68037e1a52a85f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/05fb9f7fbb270638f8ff4990fe68037e1a52a85f",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/05fb9f7fbb270638f8ff4990fe68037e1a52a85f"
      }
    ],
    "stats": {
      "total": 44,
      "additions": 44,
      "deletions": 0
    },
    "files": [
      {
        "sha": "65672f15e10ffbe9f46d692e80d8e3d66842e59f",
        "filename": "src/Makefile.test.include",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b5a4abeca238a0fa37b34e35ca610dcfe7112c82/src/Makefile.test.include",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b5a4abeca238a0fa37b34e35ca610dcfe7112c82/src/Makefile.test.include",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/Makefile.test.include?ref=b5a4abeca238a0fa37b34e35ca610dcfe7112c82",
        "patch": "@@ -43,6 +43,7 @@ BITCOIN_TESTS =\\\n   test/bswap_tests.cpp \\\n   test/checkqueue_tests.cpp \\\n   test/coins_tests.cpp \\\n+  test/compilerbug_tests.cpp \\\n   test/compress_tests.cpp \\\n   test/crypto_tests.cpp \\\n   test/cuckoocache_tests.cpp \\"
      },
      {
        "sha": "701671314f2d5572e3fd538c4328a26928af3f84",
        "filename": "src/test/compilerbug_tests.cpp",
        "status": "added",
        "additions": 43,
        "deletions": 0,
        "changes": 43,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b5a4abeca238a0fa37b34e35ca610dcfe7112c82/src/test/compilerbug_tests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b5a4abeca238a0fa37b34e35ca610dcfe7112c82/src/test/compilerbug_tests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/compilerbug_tests.cpp?ref=b5a4abeca238a0fa37b34e35ca610dcfe7112c82",
        "patch": "@@ -0,0 +1,43 @@\n+// Copyright (c) 2019 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <test/test_bitcoin.h>\n+#include <boost/test/unit_test.hpp>\n+\n+BOOST_FIXTURE_TEST_SUITE(compilerbug_tests, BasicTestingSetup)\n+\n+#if defined(__GNUC__)\n+// This block will also be built under clang, which is fine (as it supports noinline)\n+void __attribute__ ((noinline)) set_one(unsigned char* ptr)\n+{\n+    *ptr = 1;\n+}\n+\n+int __attribute__ ((noinline)) check_zero(unsigned char const* in, unsigned int len)\n+{\n+    for (unsigned int i = 0; i < len; ++i) {\n+        if (in[i] != 0) return 0;\n+    }\n+    return 1;\n+}\n+\n+void set_one_on_stack() {\n+    unsigned char buf[1];\n+    set_one(buf);\n+}\n+\n+BOOST_AUTO_TEST_CASE(gccbug_90348) {\n+    // Test for GCC bug 90348. See https://gcc.gnu.org/bugzilla/show_bug.cgi?id=90348\n+    for (int i = 0; i <= 4; ++i) {\n+        unsigned char in[4];\n+        for (int j = 0; j < i; ++j) {\n+            in[j] = 0;\n+            set_one_on_stack(); // Apparently modifies in[0]\n+        }\n+        BOOST_CHECK(check_zero(in, i));\n+    }\n+}\n+#endif\n+\n+BOOST_AUTO_TEST_SUITE_END()"
      }
    ]
  }
]