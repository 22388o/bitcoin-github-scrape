[
  {
    "sha": "b386970d0750e368d6adc5d0c010ead329b5c7c1",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiMzg2OTcwZDA3NTBlMzY4ZDZhZGM1ZDBjMDEwZWFkMzI5YjVjN2Mx",
    "commit": {
      "author": {
        "name": "Ben Woosley",
        "email": "ben.woosley@gmail.com",
        "date": "2018-03-30T20:47:36Z"
      },
      "committer": {
        "name": "Ben Woosley",
        "email": "ben.woosley@gmail.com",
        "date": "2018-04-02T22:42:06Z"
      },
      "message": "[moveonly] Extract HelpRequested to dry up the help options testing\n\nThis ensures consistency across interfaces and makes the version handling more clear.",
      "tree": {
        "sha": "ba225416f9a72ba87f9dd6f8fda1dc6ff975ce21",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ba225416f9a72ba87f9dd6f8fda1dc6ff975ce21"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b386970d0750e368d6adc5d0c010ead329b5c7c1",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE+XLHXoy4Dim7e8hvTYykuhgECQYFAlrCsb8ACgkQTYykuhgE\nCQYg1Q//Qgq6979k/lmCH4SJp4/AWjiY4huvd2KNYOEo7qF/xNcO4g+fKYF7rmhd\n8azZ0oSySqwMSLPfTi47OSkqCsQrdW8/0Ev+N+aupjfvesPI/xWmzaSGjzuUP4HO\n0y1bnmjONFKIhhE+2u5glmxxHMVjOolYxc28SwREU+KdOmtz7eWICDu+ZR16vF9s\nT7g8NtarC9/Nc10Y5u86c3Dq/7F/F+STDoC4s6Gp9WNeGLfzeT1QliCjG1aoWXLh\nPAtT3yWuKNkM4HggYbZAfZzpXLAgf5kZSfBgh5IZ185hEzrWdS9Q3YuI3+Y6Fgip\np/M5CJuWl824Go5W2QKEAGCRws1eSdq5PRkxoYkFuj6braxPCy78khYMmGlm31gM\n4uFPHynnkvQtIdZfH77Nj4SyWWfu//HfQKvRouLxS3Z+SYLmuAhn/CyQSvvues4/\nBRPFqrvh5BvjndtGLpn52Nu36xBI9km9Fovtg9pzDs7CYX4ORyBR32Q8ohy86zxl\nkGS87XkkrFfLsmZIKa+PhSRjqtycXMINzouLpIb1SRPFyZMrkz7eaRDBrKQxmirv\nfzPzvYeirte/Heq1Fh/gM9pVnu++T1lrg7M3uHfInvaF6OBRfR5zHMH2NK9xpfK+\nh84IHJoWdEM44mWWJQONf4BVNic7de43G3zbIEUg7r9T7NtB7VI=\n=jZME\n-----END PGP SIGNATURE-----",
        "payload": "tree ba225416f9a72ba87f9dd6f8fda1dc6ff975ce21\nparent c564424d98b1561f16e633528172b3583719e5f3\nauthor Ben Woosley <ben.woosley@gmail.com> 1522442856 -0700\ncommitter Ben Woosley <ben.woosley@gmail.com> 1522708926 -0700\n\n[moveonly] Extract HelpRequested to dry up the help options testing\n\nThis ensures consistency across interfaces and makes the version handling more clear.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b386970d0750e368d6adc5d0c010ead329b5c7c1",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/b386970d0750e368d6adc5d0c010ead329b5c7c1",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b386970d0750e368d6adc5d0c010ead329b5c7c1/comments",
    "author": {
      "login": "Empact",
      "id": 5470,
      "node_id": "MDQ6VXNlcjU0NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Empact",
      "html_url": "https://github.com/Empact",
      "followers_url": "https://api.github.com/users/Empact/followers",
      "following_url": "https://api.github.com/users/Empact/following{/other_user}",
      "gists_url": "https://api.github.com/users/Empact/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Empact/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
      "organizations_url": "https://api.github.com/users/Empact/orgs",
      "repos_url": "https://api.github.com/users/Empact/repos",
      "events_url": "https://api.github.com/users/Empact/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Empact/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "Empact",
      "id": 5470,
      "node_id": "MDQ6VXNlcjU0NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Empact",
      "html_url": "https://github.com/Empact",
      "followers_url": "https://api.github.com/users/Empact/followers",
      "following_url": "https://api.github.com/users/Empact/following{/other_user}",
      "gists_url": "https://api.github.com/users/Empact/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Empact/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
      "organizations_url": "https://api.github.com/users/Empact/orgs",
      "repos_url": "https://api.github.com/users/Empact/repos",
      "events_url": "https://api.github.com/users/Empact/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Empact/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "c564424d98b1561f16e633528172b3583719e5f3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c564424d98b1561f16e633528172b3583719e5f3",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/c564424d98b1561f16e633528172b3583719e5f3"
      }
    ],
    "stats": {
      "total": 23,
      "additions": 14,
      "deletions": 9
    },
    "files": [
      {
        "sha": "1d878835221020981c0491d62ce8a0c5bc2c9601",
        "filename": "src/bench/bench_bitcoin.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b386970d0750e368d6adc5d0c010ead329b5c7c1/src/bench/bench_bitcoin.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b386970d0750e368d6adc5d0c010ead329b5c7c1/src/bench/bench_bitcoin.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/bench/bench_bitcoin.cpp?ref=b386970d0750e368d6adc5d0c010ead329b5c7c1",
        "patch": "@@ -27,7 +27,7 @@ main(int argc, char** argv)\n {\n     gArgs.ParseParameters(argc, argv);\n \n-    if (gArgs.IsArgSet(\"-?\") || gArgs.IsArgSet(\"-h\") || gArgs.IsArgSet(\"-help\")) {\n+    if (HelpRequested(gArgs)) {\n         std::cout << HelpMessageGroup(_(\"Options:\"))\n                   << HelpMessageOpt(\"-?\", _(\"Print this help message and exit\"))\n                   << HelpMessageOpt(\"-list\", _(\"List benchmarks without executing them. Can be combined with -scaling and -filter\"))"
      },
      {
        "sha": "263520ee4e22d0d910383914ddb2ef2245e3a7c0",
        "filename": "src/bitcoin-cli.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b386970d0750e368d6adc5d0c010ead329b5c7c1/src/bitcoin-cli.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b386970d0750e368d6adc5d0c010ead329b5c7c1/src/bitcoin-cli.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/bitcoin-cli.cpp?ref=b386970d0750e368d6adc5d0c010ead329b5c7c1",
        "patch": "@@ -82,7 +82,7 @@ static int AppInitRPC(int argc, char* argv[])\n     // Parameters\n     //\n     gArgs.ParseParameters(argc, argv);\n-    if (argc<2 || gArgs.IsArgSet(\"-?\") || gArgs.IsArgSet(\"-h\") || gArgs.IsArgSet(\"-help\") || gArgs.IsArgSet(\"-version\")) {\n+    if (argc < 2 || HelpRequested(gArgs) || gArgs.IsArgSet(\"-version\")) {\n         std::string strUsage = strprintf(_(\"%s RPC client version\"), _(PACKAGE_NAME)) + \" \" + FormatFullVersion() + \"\\n\";\n         if (!gArgs.IsArgSet(\"-version\")) {\n             strUsage += \"\\n\" + _(\"Usage:\") + \"\\n\" +"
      },
      {
        "sha": "76a6f94899ba356dbf50fea5d09a6d4d4714ba38",
        "filename": "src/bitcoin-tx.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 2,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b386970d0750e368d6adc5d0c010ead329b5c7c1/src/bitcoin-tx.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b386970d0750e368d6adc5d0c010ead329b5c7c1/src/bitcoin-tx.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/bitcoin-tx.cpp?ref=b386970d0750e368d6adc5d0c010ead329b5c7c1",
        "patch": "@@ -51,8 +51,7 @@ static int AppInitRawTx(int argc, char* argv[])\n \n     fCreateBlank = gArgs.GetBoolArg(\"-create\", false);\n \n-    if (argc<2 || gArgs.IsArgSet(\"-?\") || gArgs.IsArgSet(\"-h\") || gArgs.IsArgSet(\"-help\"))\n-    {\n+    if (argc < 2 || HelpRequested(gArgs)) {\n         // First part of help message is specific to this utility\n         std::string strUsage = strprintf(_(\"%s bitcoin-tx utility version\"), _(PACKAGE_NAME)) + \" \" + FormatFullVersion() + \"\\n\\n\" +\n             _(\"Usage:\") + \"\\n\" +"
      },
      {
        "sha": "58518d611fafd0e1a8c22b0af785ed236842ed24",
        "filename": "src/bitcoind.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 2,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b386970d0750e368d6adc5d0c010ead329b5c7c1/src/bitcoind.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b386970d0750e368d6adc5d0c010ead329b5c7c1/src/bitcoind.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/bitcoind.cpp?ref=b386970d0750e368d6adc5d0c010ead329b5c7c1",
        "patch": "@@ -76,8 +76,7 @@ bool AppInit(int argc, char* argv[])\n     gArgs.ParseParameters(argc, argv);\n \n     // Process help and version before taking care about datadir\n-    if (gArgs.IsArgSet(\"-?\") || gArgs.IsArgSet(\"-h\") ||  gArgs.IsArgSet(\"-help\") || gArgs.IsArgSet(\"-version\"))\n-    {\n+    if (HelpRequested(gArgs) || gArgs.IsArgSet(\"-version\")) {\n         std::string strUsage = strprintf(_(\"%s Daemon\"), _(PACKAGE_NAME)) + \" \" + _(\"version\") + \" \" + FormatFullVersion() + \"\\n\";\n \n         if (gArgs.IsArgSet(\"-version\"))"
      },
      {
        "sha": "140e56123fb779b80c772b4d6d92b4cf041aff63",
        "filename": "src/qt/bitcoin.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 2,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b386970d0750e368d6adc5d0c010ead329b5c7c1/src/qt/bitcoin.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b386970d0750e368d6adc5d0c010ead329b5c7c1/src/qt/bitcoin.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoin.cpp?ref=b386970d0750e368d6adc5d0c010ead329b5c7c1",
        "patch": "@@ -613,8 +613,7 @@ int main(int argc, char *argv[])\n \n     // Show help message immediately after parsing command-line options (for \"-lang\") and setting locale,\n     // but before showing splash screen.\n-    if (gArgs.IsArgSet(\"-?\") || gArgs.IsArgSet(\"-h\") || gArgs.IsArgSet(\"-help\") || gArgs.IsArgSet(\"-version\"))\n-    {\n+    if (HelpRequested(gArgs) || gArgs.IsArgSet(\"-version\")) {\n         HelpMessageDialog help(nullptr, gArgs.IsArgSet(\"-version\"));\n         help.showOrPrint();\n         return EXIT_SUCCESS;"
      },
      {
        "sha": "46054f50255047c951a2b3eba3eb41c1a29ca1e0",
        "filename": "src/util.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 1,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b386970d0750e368d6adc5d0c010ead329b5c7c1/src/util.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b386970d0750e368d6adc5d0c010ead329b5c7c1/src/util.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/util.cpp?ref=b386970d0750e368d6adc5d0c010ead329b5c7c1",
        "patch": "@@ -584,7 +584,10 @@ void ArgsManager::ForceSetArg(const std::string& strArg, const std::string& strV\n     mapMultiArgs[strArg] = {strValue};\n }\n \n-\n+bool HelpRequested(const ArgsManager& args)\n+{\n+    return args.IsArgSet(\"-?\") || args.IsArgSet(\"-h\") || args.IsArgSet(\"-help\");\n+}\n \n static const int screenWidth = 79;\n static const int optIndent = 2;"
      },
      {
        "sha": "17881ff3b60d20292dbbbb6adaab0fa46068d72f",
        "filename": "src/util.h",
        "status": "modified",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b386970d0750e368d6adc5d0c010ead329b5c7c1/src/util.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b386970d0750e368d6adc5d0c010ead329b5c7c1/src/util.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/util.h?ref=b386970d0750e368d6adc5d0c010ead329b5c7c1",
        "patch": "@@ -313,6 +313,11 @@ class ArgsManager\n \n extern ArgsManager gArgs;\n \n+/**\n+ * @return true if help has been requested via a command-line arg\n+ */\n+bool HelpRequested(const ArgsManager& args);\n+\n /**\n  * Format a string to be used as group of options in help messages\n  *"
      }
    ]
  }
]