laanwj,2018-02-01T11:13:17Z,"> I can see no problem this solves\n\nMaybe ask the person that made that change, @sipsorcery, to be sure.\n\nBut yes it at least coming from UNIX seems crazy. Then again with the crazy workarounds of the day that seem to be necessary to make things work in WFL, I'm not too surprised.",https://github.com/bitcoin/bitcoin/pull/12322#issuecomment-362235089,362235089,
sipsorcery,2018-02-01T22:51:09Z,"@murrayn the reason the WSL build steps recommend cloning and building the source in the Linux part of the file system, such as /usr/src, is due to #11685.\n\nIf the build is attempted under the Windows file system, such as /mnt/c, the dependency autoconf build scripts fail due to a timestamp issue.",https://github.com/bitcoin/bitcoin/pull/12322#issuecomment-362428814,362428814,
murrayn,2018-02-02T02:18:33Z,"@sipsorcery The document already clearly warns not to build in a mounted Windows directory. It is not necessary to install into /usr/src, nor is it required to be root (I just built it as a regular user in my home directory). But making the src tree world-writable is definitely not required, and is the really problematic part.",https://github.com/bitcoin/bitcoin/pull/12322#issuecomment-362465263,362465263,
sipsorcery,2018-02-02T03:33:50Z,"I think it's better to be overly prescriptive with the build instructions. The current instructions work and do not create a security risk. If the suggested steps are removed then eventually someone who is less familiar with Linux will try and build outside their home directory and create an issue about permissions.\n\nThat all being said I personally don't have a strong opinion about this. If t",https://github.com/bitcoin/bitcoin/pull/12322#issuecomment-362476163,362476163,
murrayn,2018-02-02T04:13:53Z,"You do see that by changing the permissions to world-writable, any user can replace or edit any of the source files used to do the build? How can you possibly claim this is not a security risk? It is. As is doing any part of the build process as root. Not necessary, and another security risk.",https://github.com/bitcoin/bitcoin/pull/12322#issuecomment-362481374,362481374,
sipsorcery,2018-02-02T04:27:17Z,"@murrayn the Windows Ubuntu application (aka as Windows Subsystem for Linux) stores the Linux file system in a user specific location within the Windows file system (for example C:\Users\SomeUSer\AppData\Local\Packages\CanonicalGroupLimited.UbuntuonWindows_79rhkp1fndgsc\LocalState\rootfs). Changing the Linux file system permissions won't expose the Linux file system to any other Windows users.\n",https://github.com/bitcoin/bitcoin/pull/12322#issuecomment-362482994,362482994,
ajtowns,2018-02-02T04:29:35Z,"Doing something like:\n\n```\n    $ sudo mkdir /usr/src/bitcoin\n    $ sudo chown $USER /usr/src/bitcoin\n    $ git clone https://github.com/bitcoin/bitcoin.git /usr/src/bitcoin\n    $ cd /usr/src/bitcoin\n```\n\nseems more plausible to me? Might need to use `$USERNAME` or `$LOGNAME` or `--reference=$HOME` instead of `$USER` though?",https://github.com/bitcoin/bitcoin/pull/12322#issuecomment-362483284,362483284,
murrayn,2018-02-02T07:16:56Z,"I guess I can't speak to what hacks might be required to build on WSL, but for building on Ubuntu, which the document claims to describe, the instructions are incorrect, and dangerous to boot.\n\nSolving a Linux problem by doing ""chmod -R a+rw"" almost always means it has been solved incorrectly.\n",https://github.com/bitcoin/bitcoin/pull/12322#issuecomment-362505918,362505918,
laanwj,2018-02-02T12:58:21Z,"It would help to have a separate section for WFL-specific hacks and one for cross-building from conventional Unix/Linux. None of the WFL hacks is necessary for cross-compiling.\n\nI was recently told of on IRC is that it also recommends to add non-xenial repositories on xenial, this will generally wreck your OS. Yes, building using xenial's mingw-w64 gcc is broken, better just don't do it (use a",https://github.com/bitcoin/bitcoin/pull/12322#issuecomment-362579484,362579484,
sipsorcery,2018-02-02T21:15:08Z,"@laanwj there is a cautionary footnote in the Windows build doc about updating the package repositories on Xenial, https://github.com/bitcoin/bitcoin/blob/master/doc/build-windows.md#footnote1. Sounds like it might need to be made more prominent if someone has inadvertently messed up their Ubuntu instance.\n\n\n\n",https://github.com/bitcoin/bitcoin/pull/12322#issuecomment-362709687,362709687,
sipsorcery,2018-02-02T21:30:02Z,Based on this discussion I think @murrayn's changes are a good idea. When the instructions were updated a few months ago the focus was on WSL. The implications for native Linux were overlooked.,https://github.com/bitcoin/bitcoin/pull/12322#issuecomment-362713284,362713284,
mammix2,2018-02-02T21:59:34Z,"I have to agree with the seperation of WSL hacks. Coming from building on native OS environments. This documented way of only using WSL for a windows build is a pain.\n\nGive MinGW and Qt Creator some love again :)",https://github.com/bitcoin/bitcoin/pull/12322#issuecomment-362720013,362720013,
laanwj,2018-02-06T11:53:17Z,"> Based on this discussion I think @murrayn's changes are a good idea\n\nOkay, then we'll just go ahead and merge this.\nFWIW instead of `/usr/src` the home directory of the user also works fine for building, the only thing that doesn't work is building inside a mounted windows disk.",https://github.com/bitcoin/bitcoin/pull/12322#issuecomment-363400114,363400114,
