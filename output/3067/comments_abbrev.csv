Diapolo,2013-10-10T07:14:05Z,Comments?\n,https://github.com/bitcoin/bitcoin/pull/3067#issuecomment-26033357,26033357,
Diapolo,2013-10-11T12:14:10Z,Updated:\n- remove fDebug ONLY in code which is NOT performance-critical\n,https://github.com/bitcoin/bitcoin/pull/3067#issuecomment-26132536,26132536,
gavinandresen,2013-10-11T21:45:00Z,"I don't think I like the ""-debug means -debug=all"".\n\nI run with debug=1 in my bitcoin.conf, and will add temporary LogPrintf() statements as I develop code (and will remove them or change them to LogPrint(""category""...) before pull-requesting).  Just like I used to add printf() statements during development that I'd remove.\n\nIf -debug means ""print everything"", then that doesn't work-- my log m",https://github.com/bitcoin/bitcoin/pull/3067#issuecomment-26176839,26176839,
sipa,2013-10-11T21:55:05Z,@gavinandresen So what would you like -debug to mean then? \n,https://github.com/bitcoin/bitcoin/pull/3067#issuecomment-26177496,26177496,
gavinandresen,2013-10-12T08:52:42Z,"-debug is the same as -debug= which has empty-string for the category. So Logprintf equals Logprint("""",...) etc.\n\n## \n\nGavin Andresen\n\nOn Oct 12, 2013, at 7:55 AM, Pieter Wuille notifications@github.com wrote:\n\n> @gavinandresen So what would you like -debug to mean then?\n> \n> â€”\n> Reply to this email directly or view it on GitHub.\n",https://github.com/bitcoin/bitcoin/pull/3067#issuecomment-26193843,26193843,
laanwj,2013-10-12T09:32:46Z,"I understand how logging with an empty category can be useful for temporary debugging, but from a user/external developer viewpoint, is it logical behavior?\nWhat would you expect plain -debug to do on a package that you don't know deeply yet and are trying to debug?\n\nIn any case I'd be fine with -debug=all as well instead of -debug to enable all categories. But there needs to be a way (and clea",https://github.com/bitcoin/bitcoin/pull/3067#issuecomment-26194361,26194361,
sipa,2013-10-12T19:38:11Z,"I agree with @laanwj here - having a """" debug category seems counter-intuitive.\n",https://github.com/bitcoin/bitcoin/pull/3067#issuecomment-26204384,26204384,
Diapolo,2013-10-16T06:12:55Z,"@sipa @laanwj @gavinandresen\nI'll summarize, what I think should be default behaviour (I don't say the pull is currently doing this already ^^):\n\nUsing `-debug` sets fDebug and we display ALL categories (`LogPrint()`).\nUsing `-debug=<category>` sets fDebug and we display ONLY the speciefied categories.\n\nPerhaps we should re-work `LogPrint()` to prepend the category in the log-entry, as this ",https://github.com/bitcoin/bitcoin/pull/3067#issuecomment-26395016,26395016,
gavinandresen,2013-10-16T08:19:04Z,"@Diapolo:  -debug and -debug=  are the same. They both will set mapArgs[""-debug""]=std::string("""")\n\nChanging that so -debug and -debug= sets mapArgs[""-debug""] to two different things is likely to break things in unexpected ways.\n\nEDIT: just realized I'm probably misreading, and you mean -debug being different from -debug=&lt;some_category&gt;.\nEDIT2: aha!  Bitten by github removing stuff in &l",https://github.com/bitcoin/bitcoin/pull/3067#issuecomment-26400131,26400131,
sipa,2013-10-16T08:32:41Z,"Sounds good to me.\n\nRelated, but outside of this pullreq: I've been wondering whether categories shouldn't just correspond to threads, and indeed, whether we shouldn't just print them by default. Also, do we really worry enough to make -logtimestamps non-default anymore?\n",https://github.com/bitcoin/bitcoin/pull/3067#issuecomment-26400848,26400848,
laanwj,2013-10-16T09:12:46Z,"@gavinandresen: when learning a codebase or trying to find a problem in an otherwise unknown codebase I usually find it useful to enable all debug information, to get some idea what it is doing. It's of more limited usability once you have a better idea what you're looking for.\n",https://github.com/bitcoin/bitcoin/pull/3067#issuecomment-26403021,26403021,
Diapolo,2013-10-17T14:06:37Z,"@sipa @laanwj @gavinandresen\nCan you take another look?\n\nI added some suggestions from above and as I wrote earlier, this is achieved now:\n\nUsing `-debug` or `-debug=1` sets fDebug and we display ALL categories (all `LogPrint()`).\nUsing `-debug=<category>` sets fDebug and we display ONLY the speciefied categories (only `LogPrint(<category>)`).\n\nIt would be still fine, if we could add categ",https://github.com/bitcoin/bitcoin/pull/3067#issuecomment-26508301,26508301,
Diapolo,2013-10-17T14:07:44Z,"@sipa Agreed, `-logtimestamps` should be default, as it's much more readable IMO.\n",https://github.com/bitcoin/bitcoin/pull/3067#issuecomment-26508400,26508400,
Diapolo,2013-10-22T06:59:13Z,"@gavinandresen @sipa @laanwj\nRebased, fixed a merge-conflict. Can I get some final ACKs or futher comments?\n",https://github.com/bitcoin/bitcoin/pull/3067#issuecomment-26781141,26781141,
Diapolo,2013-10-22T08:43:42Z,"Great suggestions, re-working...\n",https://github.com/bitcoin/bitcoin/pull/3067#issuecomment-26786152,26786152,
Diapolo,2013-10-22T09:08:02Z,Updated:\n- help message\n- special-case -debug=0/-nodebug\n- replace my checks with generic checks (thanks @laanwj and @gavinandresen)\n\n`-debug` overrides `-debug=<category>` and `-debug=0` or `-nodebug` override all others!\n\nI hope this is now just a final review!\n,https://github.com/bitcoin/bitcoin/pull/3067#issuecomment-26787547,26787547,
Diapolo,2013-10-22T11:43:18Z,Failure because of the json-pull...\n,https://github.com/bitcoin/bitcoin/pull/3067#issuecomment-26795879,26795879,
Diapolo,2013-10-24T06:51:10Z,Updated and removed an unneeded `\n` in `InitWarning()`.\n,https://github.com/bitcoin/bitcoin/pull/3067#issuecomment-26970159,26970159,
Diapolo,2013-10-26T10:43:02Z,Can I get some ACKs :)?\n,https://github.com/bitcoin/bitcoin/pull/3067#issuecomment-27143766,27143766,
sipa,2013-10-26T19:11:06Z,ACK apart from the nit above.\n,https://github.com/bitcoin/bitcoin/pull/3067#issuecomment-27153373,27153373,
Diapolo,2013-10-26T20:07:21Z,"@sipa I reworked the help-message for -debug once more, it reads now:\nbitcoind:\n`Output debugging information for <category>. Output all possible debugging information if <category> is not set. <category> can be addrman, alert, coindb, db, lock, rand, rpc, selectcoins, mempool, net.`\n\nBitcoin-Qt:\n`Output debugging information for <category>. Output all possible debugging information if <categ",https://github.com/bitcoin/bitcoin/pull/3067#issuecomment-27154547,27154547,
sipa,2013-10-26T20:17:50Z,@Diapolo It's stil an extremely long line :)\n,https://github.com/bitcoin/bitcoin/pull/3067#issuecomment-27154768,27154768,
Diapolo,2013-10-27T19:41:00Z,"@sipa Like this?\n\n<pre>\nOutput debugging information for category. Output all possible debugging information if category is not set.\nCategory can be addrman, alert, coindb, db, lock, rand, rpc, selectcoins, mempool, net.\n</pre>\n\nOr feel free to just suggest a string, so we can merge this :).\n",https://github.com/bitcoin/bitcoin/pull/3067#issuecomment-27177300,27177300,
Diapolo,2013-10-28T11:38:18Z,"New string with new-lines :-D.\n\nbitcoind\n\n<pre>\nOutput debugging information for category.\nCategory can be addrman, alert, coindb, db, lock, rand, rpc, selectcoins, mempool, net.\nOutput all possible debugging information if category is not set.\n</pre>\n\nBitcoin-Qt\n\n<pre>\nOutput debugging information for category.\nCategory can be addrman, alert, coindb, db, lock, rand, rpc, selectcoins",https://github.com/bitcoin/bitcoin/pull/3067#issuecomment-27204638,27204638,
Diapolo,2013-10-30T10:10:13Z,I hope @BitcoinPullTester is now happy again and @gavinandresen or @sipa can give a final ACK.\n,https://github.com/bitcoin/bitcoin/pull/3067#issuecomment-27377314,27377314,
BitcoinPullTester,2013-10-30T15:23:30Z,"Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/3b570559f8d39a5d4cffd01b8091c3133f7750dc for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/cu",https://github.com/bitcoin/bitcoin/pull/3067#issuecomment-27398728,27398728,
sipa,2013-10-30T22:15:51Z,ACK\n,https://github.com/bitcoin/bitcoin/pull/3067#issuecomment-27444504,27444504,
laanwj,2013-10-10T07:28:30Z,"These could be in a if(fDebug) for a reason, for example because they'll otherwise slow down the path with formatting/argument computation overhead even though the message is not logged.\n",https://github.com/bitcoin/bitcoin/pull/3067#discussion_r6879724,6879724,src/main.cpp
Diapolo,2013-10-10T09:49:46Z,"Right, `ProcessMessage()` is for sure performance critical. Do you have a clean idea if it's then still possible to quickly check if `-debug=net` was one of the specified categories or do you suggest to supply just a `fDebug` check here?\n",https://github.com/bitcoin/bitcoin/pull/3067#discussion_r6882138,6882138,src/main.cpp
laanwj,2013-10-10T10:09:08Z,"I suggest just a fDebug check there.\nIf any kind of debugging is enabled, performance becomes less of an issue.\n",https://github.com/bitcoin/bitcoin/pull/3067#discussion_r6882472,6882472,src/main.cpp
sipa,2013-10-11T20:32:56Z,"I think this -debugnet check needs to go first, so fDebug gets set correctly?\n",https://github.com/bitcoin/bitcoin/pull/3067#discussion_r6926022,6926022,src/init.cpp
sipa,2013-10-11T20:34:12Z,"Also, does -debug not imply all debug categories, so also fDebug?\n",https://github.com/bitcoin/bitcoin/pull/3067#discussion_r6926050,6926050,src/init.cpp
laanwj,2013-10-11T20:55:23Z,"fDebug (as least how it's used in the code everywhere, for example in LogPrint) means _any_ debug category is enabled, not all.\n\nFrom the help message I understand that -debug (or -debug=1) implies all debug categories, but there was no special handling for that anywhere. That's changed by this pull.\n",https://github.com/bitcoin/bitcoin/pull/3067#discussion_r6926552,6926552,src/init.cpp
laanwj,2013-10-11T20:58:47Z,Maybe check just in case that categories.size() is 1 too.\nThis checks for an empty category name at the first index of categories.\nIs that what's in `categories` when just -debug (or -debug=1) is passed? Wouldn't it contain a category called `1`?\n,https://github.com/bitcoin/bitcoin/pull/3067#discussion_r6926640,6926640,src/util.cpp
Diapolo,2013-10-17T13:03:30Z,"Agreed, will update later, so you can review again.\n",https://github.com/bitcoin/bitcoin/pull/3067#discussion_r7031444,7031444,src/util.cpp
Diapolo,2013-10-17T13:18:48Z,I could need some help for the help message :).\n,https://github.com/bitcoin/bitcoin/pull/3067#discussion_r7031852,7031852,src/init.cpp
Diapolo,2013-10-17T13:51:13Z,"I messed up this check -_-, needs fixing.\n",https://github.com/bitcoin/bitcoin/pull/3067#discussion_r7032778,7032778,src/util.cpp
laanwj,2013-10-22T07:16:03Z,"I don't think this will work, this will only go into the if if categories.size() == 1. Something like this is easier to read, and does the length check before indexing into the array:\n\n```\nif (!(categories.size() == 1 && (categories[0]=="""" || categories[0] ==""1"")))\n```\n\nOr even better\n\n```\nbool allCategories = (categories.size() == 1) && (categories[0]=="""" || categories[0] ==""1"");\nif(!al",https://github.com/bitcoin/bitcoin/pull/3067#discussion_r7117966,7117966,src/util.cpp
gavinandresen,2013-10-22T07:24:20Z,"This logic seemed tortured and error-prone.  How about:\n\n```\nif (mapArgs.count(""-debugnet""))\n    LogPrintf(""WARNING deprecated argument -debugnet ignored, use -debug=net"");\n\nfDebug = !mapMultiArgs[""-debug""].empty();\n```\n\nMaybe add a special case for -debug=0 / -nodebug, as long as we're OK with the user being able to do something like -debug=net -nodebug -debug=addrman and have the -nodeb",https://github.com/bitcoin/bitcoin/pull/3067#discussion_r7118088,7118088,src/init.cpp
gavinandresen,2013-10-22T07:26:09Z,"What should happen if user says:  -debug=net -debug  ?\n\nI think you want:\n\n```\nbool allCategories = categories.count("""");\n```\n",https://github.com/bitcoin/bitcoin/pull/3067#discussion_r7118102,7118102,src/util.cpp
laanwj,2013-10-22T07:27:46Z,@gavinandresen agreed\n,https://github.com/bitcoin/bitcoin/pull/3067#discussion_r7118131,7118131,src/util.cpp
sipa,2013-10-26T19:09:18Z,"It's perhaps better to split this line in two, to cover the -debug=category and -debug cases.\n",https://github.com/bitcoin/bitcoin/pull/3067#discussion_r7234665,7234665,src/init.cpp
sipa,2013-10-30T12:31:50Z,I'd still prefer to see this output line split up. I think explaining -debug=category and -debug separate is much more readable.\n,https://github.com/bitcoin/bitcoin/pull/3067#discussion_r7309231,7309231,src/init.cpp
sipa,2013-10-30T12:32:25Z,"You'd need to translate the ""or"" as well. Better to just provide a single list of options separated by comma's.\n",https://github.com/bitcoin/bitcoin/pull/3067#discussion_r7309251,7309251,src/init.cpp
Diapolo,2013-10-30T13:14:16Z,"Right, just a list separated by comma's is the way to go here...\n",https://github.com/bitcoin/bitcoin/pull/3067#discussion_r7310157,7310157,src/init.cpp
Diapolo,2013-10-30T13:14:44Z,"Will change that, thanks for your time.\n",https://github.com/bitcoin/bitcoin/pull/3067#discussion_r7310175,7310175,src/init.cpp
Diapolo,2013-10-30T13:40:40Z,"How is this?\n\n<pre>\n -debug=category      Output debugging information (default: 0, supplying category is optional)\nIf category is not supplied, output all debugging information.\ncategory can be: addrman, alert, coindb, db, lock, rand, rpc, selectcoins, mempool, net, qt.\n</pre>\n",https://github.com/bitcoin/bitcoin/pull/3067#discussion_r7310932,7310932,src/init.cpp
