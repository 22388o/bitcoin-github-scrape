jonasschnelli,2016-08-22T13:25:24Z,"Changed the recommended minimum ""calculation"" (it's not really a calculation) from 144 blocks to 72 full blocks (on the wire size) per day.\nNot doing this, would result in a recommended upload minimum (after SW has been deployed) of ~17GiB per month (which is too high IMO for a _minimum_).\n\nUpdated the docs, removed the MiB values.\n",https://github.com/bitcoin/bitcoin/pull/8559#issuecomment-241411332,241411332,
MarcoFalke,2016-08-22T13:29:07Z,"Thanks, looks better! utACK 5e872003e7243c4e02eec4f57f3a001dd20d925c\n",https://github.com/bitcoin/bitcoin/pull/8559#issuecomment-241412351,241412351,
wodry,2016-08-22T16:33:59Z,"Feedback from a rather ""normal user"":\n\nIn reduce-traffic.md would now be written:\n_""1. Use -maxuploadtarget=<MiB per day> [...] The current recommended minimum is 72 full blocks (by size ""on the wire"" per day)"" [...]""_\n\nIn my opinion, this is not understandable for a normal user- what value should that be in MiB ??\n\nI think it would be better to recommend a concrete value in the unit of the",https://github.com/bitcoin/bitcoin/pull/8559#issuecomment-241471078,241471078,
jonasschnelli,2016-08-26T07:24:03Z,Nits addressed.\n,https://github.com/bitcoin/bitcoin/pull/8559#issuecomment-242650047,242650047,
sipa,2016-08-26T17:34:57Z,utACK\n,https://github.com/bitcoin/bitcoin/pull/8559#issuecomment-242800196,242800196,
MarcoFalke,2016-08-26T17:36:38Z,utACK d2ce6d3\n,https://github.com/bitcoin/bitcoin/pull/8559#issuecomment-242800625,242800625,
wodry,2016-08-26T19:05:02Z,"Instead of\n_""The current recommended minimum is 288MiB, assuming an average serialized block size of 2MB.""_\nI would suggest\n_""The current recommended minimum is 288 MiB, assuming an average serialized block size of 2 MiB.""_\n, to have a consistent unit of MiB and correct spelling.\n",https://github.com/bitcoin/bitcoin/pull/8559#issuecomment-242823901,242823901,
MarcoFalke,2016-08-26T19:23:40Z,"@wodry The block size limit is denoted in the ""decimal"" MB (Like most other sizes in Bitcoin Core). Unfortunately some palaces use MiB, but there is nothing you can do about it.\n",https://github.com/bitcoin/bitcoin/pull/8559#issuecomment-242828190,242828190,
luke-jr,2016-08-27T04:01:56Z,"There are constantly 144 blocks per day. Segwit blocks _can_ be up to 4 MB. If users set a value lower than this, what happens when that assumption is violated?\n",https://github.com/bitcoin/bitcoin/pull/8559#issuecomment-242894272,242894272,
MarcoFalke,2016-08-27T09:30:07Z,"@luke-jr IIRC, nothing will happen. You just stop to serve historical blocks earlier. I think you can even set `-maxuploadtarget=1` to effectively never send historical blocks.\n",https://github.com/bitcoin/bitcoin/pull/8559#issuecomment-242906942,242906942,
gmaxwell,2016-09-09T08:21:58Z,"uh. so the reason that it is a full day is because that is the reset interval.\n\nSince the limiting will not prevent it from sending blocks, the purpose of the minimum was that it was the true minimum, and setting lower would pretty much guarantee overshoot.\n",https://github.com/bitcoin/bitcoin/pull/8559#issuecomment-245850595,245850595,
MarcoFalke,2016-09-09T09:48:10Z,"Though, `-maxuploadtarget` only applies to ""historic blocks"", so implying that it will not overshoot when you set it to _maximum block chain growth in one day_ is misleading.\nRegardless of the value that is set (may it be `0` or `100000`), there is no guarantee that it will not overshoot.\n",https://github.com/bitcoin/bitcoin/pull/8559#issuecomment-245869576,245869576,
MarcoFalke,2016-09-09T09:51:09Z,"So we might as well just remove the ""recommended"" minimum and call it done. Effectively you are still not helping IBD if you set the target to `144` or `288` instead of `0`.\n",https://github.com/bitcoin/bitcoin/pull/8559#issuecomment-245870203,245870203,
jonasschnelli,2016-09-13T16:13:32Z,Closing in favor of #8712\n,https://github.com/bitcoin/bitcoin/pull/8559#issuecomment-246736043,246736043,
MarcoFalke,2016-08-22T12:28:56Z,Nit: Can you also adjust the LogPrintf below to display the size in whatever unit `-maxuploadtarget` is.\n,https://github.com/bitcoin/bitcoin/pull/8559#discussion_r75667784,75667784,src/net.cpp
jonasschnelli,2016-08-22T12:31:44Z,"@MarcoFalke: I can't parse your sentence. :)\nRight now we have: `LogPrintf(""Max outbound target is very small (%s bytes) and will be overshot. Recommended minimum is %s bytes.\n"", nMaxOutboundLimit, recommendedMinimum);` which prints the desired output limit (1:1 from `-maxuploadtraget` and the recommended minimum, both are stated to be in bytes.\n",https://github.com/bitcoin/bitcoin/pull/8559#discussion_r75668314,75668314,src/net.cpp
MarcoFalke,2016-08-22T12:37:25Z,"Huh, I thought -maxuploadtarget was in MB or MiB?\n",https://github.com/bitcoin/bitcoin/pull/8559#discussion_r75669006,75669006,src/net.cpp
MarcoFalke,2016-08-22T12:38:40Z,"Though, `MAX_BLOCK_SERIALIZED_SIZE` is your cost ""on the wire"". This will be true after segwit is active.\n\nI'd rather keep this line as is and adjust the documentation instead.\n",https://github.com/bitcoin/bitcoin/pull/8559#discussion_r75669180,75669180,src/net.cpp
jonasschnelli,2016-08-22T12:39:28Z,Yes. It is in MB. But the LogPrintf does print out the passed in MB values in bytes (`nMaxOutboundLimit` is `-maxuploadtarget *1024 *1024`)\n,https://github.com/bitcoin/bitcoin/pull/8559#discussion_r75669274,75669274,src/net.cpp
jonasschnelli,2016-08-22T12:42:22Z,"Right.. the recommended minimum must not reflect the historical blocks sizes, it should reflect the current blocks. Should't this be switched from `MAX_BLOCK_BASE_SIZE` to  `MAX_BLOCK_SERIALIZED_SIZE` when SW activates?\n",https://github.com/bitcoin/bitcoin/pull/8559#discussion_r75669661,75669661,src/net.cpp
MarcoFalke,2016-08-22T12:44:14Z,"I think it would be more user friendly to print this out in MiB, so the user can see what value for `-maxuploadtarget` should be used instead.\n",https://github.com/bitcoin/bitcoin/pull/8559#discussion_r75669899,75669899,src/net.cpp
MarcoFalke,2016-08-22T12:45:46Z,"Right, you could add a conditional to check if SW is active. \n",https://github.com/bitcoin/bitcoin/pull/8559#discussion_r75670118,75670118,src/net.cpp
MarcoFalke,2016-08-22T12:46:42Z,But keep in mind that updating the doc is required in either case: If you keep `MAX_BLOCK_SERIALIZED_SIZE` or if you add the condition.\n,https://github.com/bitcoin/bitcoin/pull/8559#discussion_r75670243,75670243,src/net.cpp
MarcoFalke,2016-08-25T10:34:00Z,"Nit: (to address the feedback by @wodry )\n\n**The current recommended minimum is `-maxuploadtarget=$recommendedMinimum`, assuming an average serialized block size of 2MB.**\n",https://github.com/bitcoin/bitcoin/pull/8559#discussion_r76219269,76219269,doc/reduce-traffic.md
MarcoFalke,2016-08-25T10:35:15Z,Nit: (as above)\n\n``` cpp\n// assume the average size of serialized blocks is half the maximum\n```\n,https://github.com/bitcoin/bitcoin/pull/8559#discussion_r76219416,76219416,src/net.cpp
MarcoFalke,2016-08-26T19:25:16Z,``` vim\n:%s/288/275 /g\n```\n\nPer\n\n```\n$ src/qt/bitcoin-qt -maxuploadtarget=12 -regtest -printtoconsole|grep Recomm\n2016-08-26 19:22:09 Max outbound target is very small (12 MiB) and will be overshot. Recommended minimum is 274.658 MiB.\n```\n\nBut consider it a nit. Can be merged now.\n,https://github.com/bitcoin/bitcoin/pull/8559#discussion_r76474116,76474116,doc/reduce-traffic.md
luke-jr,2016-08-27T04:05:06Z,Suggest defining MAX_EXPECTED_BLOCK_SIZE somewhere.\n,https://github.com/bitcoin/bitcoin/pull/8559#discussion_r76509712,76509712,src/net.cpp
