MarcoFalke,2020-12-15 17:30:03,Assuming backport to 0.21.1,https://github.com/bitcoin/bitcoin/pull/20661#issuecomment-745444518,745444518,
laanwj,2020-12-15 17:32:07,Concept ACK,https://github.com/bitcoin/bitcoin/pull/20661#issuecomment-745445742,745445742,
jonatack,2020-12-15 18:53:41,ACK 794ae71701f3766a86fd61044368d36004d5687f,https://github.com/bitcoin/bitcoin/pull/20661#issuecomment-745494611,745494611,
jonatack,2020-12-15 22:04:45,"ACK 37fe80e6267094f6051ccf9bec0c7f1a6b9e15da\n",https://github.com/bitcoin/bitcoin/pull/20661#issuecomment-745596760,745596760,
vasild,2020-12-15 17:39:02,Does it make sense to add a new method `CNode::SupportsAddress(const CAddress&)` and do here: `pnode->SupportsAddress(addr)` and in `CNode::PushAddress()` instead of the variable `addr_format_supported`?,https://github.com/bitcoin/bitcoin/pull/20661#discussion_r543549612,543549612,src/net_processing.cpp
sipa,2020-12-15 17:52:44,"~~That makes sense, but if m_wants_addrv2 is going to move to net_processing's data structures (where it IMO belongs) it's perhaps wasteful to push more into net now?~~\n\nEDIT: oh, i see, that logic already exists in net. Yeah, fixing.",https://github.com/bitcoin/bitcoin/pull/20661#discussion_r543559613,543559613,src/net_processing.cpp
sipa,2020-12-15 17:58:11,Done.,https://github.com/bitcoin/bitcoin/pull/20661#discussion_r543563599,543563599,src/net_processing.cpp
jonatack,2020-12-15 18:27:11,"perhaps hoist the documentation too (rewritten slightly here)\n```diff\n+    /**\n+     * Whether the peer supports the address. For example, a peer that does not\n+     * implement BIP155 cannot receive Tor v3 addresses because it requires\n+     * ADDRv2 (BIP155) encoding.\n+     */\n     bool IsAddrCompatible(const CAddress& addr) const\n     {\n         return m_wants_addrv2 || addr.I",https://github.com/bitcoin/bitcoin/pull/20661#discussion_r543583446,543583446,src/net.h
sipa,2020-12-15 18:49:20,"Good idea, done.",https://github.com/bitcoin/bitcoin/pull/20661#discussion_r543598619,543598619,src/net.h
vasild,2020-12-15 20:39:27,"nit: I think the variable name is as readable as the function call and it is used in just one place, so it may as well be ditched:\n\n```diff\n-if (_addr.IsValid() && !m_addr_known->contains(_addr.GetKey()) && addr_format_supported) {\n+if (_addr.IsValid() && !m_addr_known->contains(_addr.GetKey()) && IsAddrCompatible(_addr)) {\n```",https://github.com/bitcoin/bitcoin/pull/20661#discussion_r543670294,543670294,src/net.h
sipa,2020-12-15 20:46:31,Done.,https://github.com/bitcoin/bitcoin/pull/20661#discussion_r543674369,543674369,src/net.h
