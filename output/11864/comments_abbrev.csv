promag,2017-12-13T20:01:46Z,@ryanofsky actually I was thinking removing the nits. But I can do that once I push again since atm needs squash.,https://github.com/bitcoin/bitcoin/pull/11864#issuecomment-351505499,351505499,
promag,2017-12-14T03:22:09Z,"@ryanofsky split in 2 commits, same patch.",https://github.com/bitcoin/bitcoin/pull/11864#issuecomment-351597287,351597287,
laanwj,2017-12-14T09:38:15Z,"LGTM, this is definitely better as two separate commits\nutACK 03a5dc9\n",https://github.com/bitcoin/bitcoin/pull/11864#issuecomment-351658344,351658344,
ryanofsky,2017-12-11T15:44:30Z,"Would be good for a comment to explaining the lock. If I understand the PR description correctly, this is preventing concurrent fundraw transactions from spending the same outputs due to the delay between CreateTransaction and LockCoin below?",https://github.com/bitcoin/bitcoin/pull/11864#discussion_r156109807,156109807,src/wallet/wallet.cpp
promag,2017-12-11T15:47:31Z,"Yes, or concurrent fundrawtransaction and lockunspent. The problem may not be the delay, but when one releases the lock and the other acquires, for instance.\n\nI'll add the comment.",https://github.com/bitcoin/bitcoin/pull/11864#discussion_r156110766,156110766,src/wallet/wallet.cpp
promag,2017-12-12T07:49:21Z,Done.,https://github.com/bitcoin/bitcoin/pull/11864#discussion_r156290253,156290253,src/wallet/wallet.cpp
TheBlueMatt,2017-12-12T19:03:33Z,"Can you drop cs_main from it? I don't think cs_main is required, only cs_wallet.",https://github.com/bitcoin/bitcoin/pull/11864#discussion_r156463766,156463766,src/wallet/wallet.cpp
promag,2017-12-13T16:16:45Z,Won't that change the lock order? `CreateTransaction` locks both cs_main and cs_wallet.,https://github.com/bitcoin/bitcoin/pull/11864#discussion_r156706102,156706102,src/wallet/wallet.cpp
TheBlueMatt,2017-12-13T16:35:39Z,"Oops, indeed, yes, needs both.",https://github.com/bitcoin/bitcoin/pull/11864#discussion_r156712226,156712226,src/wallet/wallet.cpp
promag,2017-12-14T09:40:53Z,"Err, ++idx..",https://github.com/bitcoin/bitcoin/pull/11864#discussion_r156894100,156894100,src/wallet/wallet.cpp
promag,2017-12-14T09:41:08Z,"Err, ++idx..",https://github.com/bitcoin/bitcoin/pull/11864#discussion_r156894183,156894183,src/wallet/wallet.cpp
