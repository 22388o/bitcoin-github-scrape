luke-jr,2020-05-01 19:47:46,"Concept NACK: This breaks backward compatibility, which is why we've always stuck to 4.8.\n\n`--with-incompatible-bdb` *isn't* ""needed"" - it's available, and not recommended.\nOnly BDB 4.8 *should* be used.",https://github.com/bitcoin/bitcoin/pull/18844#issuecomment-622536272,622536272,
ryanofsky,2020-05-01 19:53:27,"> Concept NACK: This breaks backward compatibility, which is why we've always stuck to 4.8.\n\nThis is maybe addressed in the PR description, which says that database format hasn't actually changes just log format.\n\nI'm confused about motivation for this PR though. The goal of this is to make database writes more reliable? Have we seen cases where data has been lost and we think this change ",https://github.com/bitcoin/bitcoin/pull/18844#issuecomment-622538604,622538604,
achow101,2020-05-01 21:36:13,"> Concept NACK: This breaks backward compatibility, which is why we've always stuck to 4.8.\n\nIt doesn't and testing that is incredibly easy. You don't even need the changes in this PR to find that out for yourself. The log changes here aren't strictly necessary for BDB 5.3 The wallet.dat files themselves are portable between these versions. From the documentation that I've found, we should be ",https://github.com/bitcoin/bitcoin/pull/18844#issuecomment-622578361,622578361,
hebasto,2020-05-01 22:41:53,"@achow101 \n\n> the Oracle keeps changing the log file format\n\n> From the documentation that I've found, we should be able to use the same wallet.dat files down to BDB 4.0, and up to the latest version of BDB\n\nMind pointing to the docs?",https://github.com/bitcoin/bitcoin/pull/18844#issuecomment-622597301,622597301,
luke-jr,2020-05-01 23:03:22,"Oh, so disabling the logs fixes the compatibility problem? :o",https://github.com/bitcoin/bitcoin/pull/18844#issuecomment-622603597,622603597,
sipa,2020-05-01 23:10:38,"My recollection is that the log files have _no_ compatibility guarantees, not even backward compatibility for minor versions (i.e. you can't use a database+log from 4.7 in 4.8) - which is why we flush logs on exit. The database itself is backward compatible, but not forward compatible (you can use db files from 4.7 in 4.8 but not the other way around).\n\nI'm unsure about the goal here. There us",https://github.com/bitcoin/bitcoin/pull/18844#issuecomment-622605523,622605523,
achow101,2020-05-01 23:32:44,"> Mind pointing to the docs?\n\nThere are some changelogs on the previous releases page: https://www.oracle.com/database/technologies/related/berkeleydb-release-history.html. There is more documentation in the source downloads themselves.\n\n> Oh, so disabling the logs fixes the compatibility problem? :o\n\nThat is what I have found in my experimentation and dive through their source code.\",https://github.com/bitcoin/bitcoin/pull/18844#issuecomment-622610813,622610813,
laanwj,2020-05-02 09:04:06,"Back in 2012 I had hoped we'd switch away from BerkeleyDB before needing to bump it ever.\n\nI'm still not convinced this is a particular thing that needs to be changed. I'm kind of scared of these kind of foundational changes to the wallet format and all the unknown issues it might cause downstream.\n\nSo concept NACK, sorry.",https://github.com/bitcoin/bitcoin/pull/18844#issuecomment-622913190,622913190,
achow101,2020-05-02 19:43:30,I've gone through their older versions to check compatibility. The only changes that were made were the depends package for BDB and `configure.ac` to allow other versions. The following versions could be compiled and `feature_backwards_compatibility.py` passes with a minor change to unload the `w3` wallets before the files are copied. `feature_backwards_compatibility.py` opens new wallets from the,https://github.com/bitcoin/bitcoin/pull/18844#issuecomment-623004113,623004113,
MarcoFalke,2020-05-03 14:51:17,"Concept ACK. I think everyone compiling from source is using bdb 5.3 and I haven't heard of any issues with that.\n\nPlease include tests to check that bitcoin core master (bdb5.3) can load bitcoin core 0.20.0 (bdb4.8) wallets (and vice-versa).\n\nIf there are concerns that removing the `--with-incompatible-bdb` flag (added in 941dba17838a1a40f5a5862eb2f84ffec511911e) is going to make people u",https://github.com/bitcoin/bitcoin/pull/18844#issuecomment-623121856,623121856,
luke-jr,2020-05-04 19:42:27,">I think everyone compiling from source is using bdb 5.3\n\nWhat is the basis for this assumption? I don't know how people are building on Fedora/etc, but Gentoo still has bdb 4.8, and there are Ubuntu PPAs with it.",https://github.com/bitcoin/bitcoin/pull/18844#issuecomment-623665949,623665949,
sipa,2020-05-04 19:51:07,I can't remember the last time I built without --with-incompatible-bdb.,https://github.com/bitcoin/bitcoin/pull/18844#issuecomment-623670395,623670395,
Sjors,2020-05-04 19:58:12,"The [backwards compatibility test](https://github.com/bitcoin/bitcoin/blob/master/test/functional/feature_backwards_compatibility.py) creates a wallet on master (or the PR) and then opens it with an older release. Those older releases are downloaded binaries which ship with BDB 4.8.\n\nSo as long as this PR doesn't break that test, the change is probably backwards compatible.\n\nNarrator: it d",https://github.com/bitcoin/bitcoin/pull/18844#issuecomment-623673826,623673826,
achow101,2020-05-04 20:03:35,"> What is the basis for this assumption? I don't know how people are building on Fedora/etc, but Gentoo still has bdb 4.8, and there are Ubuntu PPAs with it.\n\n> I can't remember the last time I built without --with-incompatible-bdb.\n\nI installed BDB 4.8 so I never build with `--with-incompatible-bdb`.\n\n> So as long as this PR doesn't break that test, the change is probably backwards co",https://github.com/bitcoin/bitcoin/pull/18844#issuecomment-623676429,623676429,
