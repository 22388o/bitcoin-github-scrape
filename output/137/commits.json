[
  {
    "sha": "c2f76c3df8727329c62c1f5a8374b7151b25277a",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjMmY3NmMzZGY4NzI3MzI5YzYyYzFmNWE4Mzc0YjcxNTFiMjUyNzdh",
    "commit": {
      "author": {
        "name": "tcatm",
        "email": "tcatm@gawab.com",
        "date": "2011-03-22T22:28:03Z"
      },
      "committer": {
        "name": "tcatm",
        "email": "tcatm@gawab.com",
        "date": "2011-03-22T22:28:03Z"
      },
      "message": "disable -daemon on windows; bitcoind forks only with -daemon set",
      "tree": {
        "sha": "8e9f055ca2ae453ea05fd2cd41a67ba9485b07d6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/8e9f055ca2ae453ea05fd2cd41a67ba9485b07d6"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c2f76c3df8727329c62c1f5a8374b7151b25277a",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c2f76c3df8727329c62c1f5a8374b7151b25277a",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/c2f76c3df8727329c62c1f5a8374b7151b25277a",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c2f76c3df8727329c62c1f5a8374b7151b25277a/comments",
    "author": null,
    "committer": null,
    "parents": [
      {
        "sha": "1c09a4adb20aed76dd5f07051c605ffd56a093d6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1c09a4adb20aed76dd5f07051c605ffd56a093d6",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/1c09a4adb20aed76dd5f07051c605ffd56a093d6"
      }
    ],
    "stats": {
      "total": 24,
      "additions": 16,
      "deletions": 8
    },
    "files": [
      {
        "sha": "d2c6944ebc3c8bd5e0445ccf4c5a9ab2340ff395",
        "filename": "init.cpp",
        "status": "modified",
        "additions": 16,
        "deletions": 8,
        "changes": 24,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c2f76c3df8727329c62c1f5a8374b7151b25277a/init.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c2f76c3df8727329c62c1f5a8374b7151b25277a/init.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/init.cpp?ref=c2f76c3df8727329c62c1f5a8374b7151b25277a",
        "patch": "@@ -78,7 +78,9 @@ int main(int argc, char* argv[])\n     fRet = AppInit(argc, argv);\n \n     if (fRet && fDaemon)\n-        pthread_exit((void*)0);\n+        return 0;\n+\n+    return 1;\n }\n #endif\n \n@@ -158,6 +160,8 @@ bool AppInit2(int argc, char* argv[])\n             \"  -paytxfee=<amt>  \\t  \"   + _(\"Fee per KB to add to transactions you send\\n\") +\n #ifdef GUI\n             \"  -server          \\t\\t  \" + _(\"Accept command line and JSON-RPC commands\\n\") +\n+#endif\n+#ifndef WIN32 \n             \"  -daemon          \\t\\t  \" + _(\"Run in the background as a daemon and accept commands\\n\") +\n #endif\n             \"  -testnet         \\t\\t  \" + _(\"Use the test network\\n\") +\n@@ -194,17 +198,20 @@ bool AppInit2(int argc, char* argv[])\n \n     fDebug = GetBoolArg(\"-debug\");\n \n+#ifndef WIN32\n     fDaemon = GetBoolArg(\"-daemon\");\n+#else\n+    fDaemon = false;\n+#endif\n \n     if (fDaemon)\n         fServer = true;\n     else\n         fServer = GetBoolArg(\"-server\");\n \n-    /* force fServer and fDaemon when running without GUI */\n+    /* force fServer when running without GUI */\n #ifndef GUI\n     fServer = true;\n-    fDaemon = true;\n #endif\n \n     fPrintToConsole = GetBoolArg(\"-printtoconsole\");\n@@ -224,7 +231,7 @@ bool AppInit2(int argc, char* argv[])\n         exit(ret);\n     }\n \n-#ifndef GUI\n+#ifndef WIN32\n     if (fDaemon)\n     {\n         // Daemonize\n@@ -470,10 +477,11 @@ bool AppInit2(int argc, char* argv[])\n     if (fFirstRun)\n         SetStartOnSystemStartup(true);\n #endif\n-    \n-    if (fDaemon)\n-        while (!fShutdown)\n-            Sleep(5000);\n+\n+#ifndef GUI\n+    while (1)\n+        Sleep(5000);\n+#endif\n \n     return true;\n }"
      }
    ]
  },
  {
    "sha": "679359db8e3b3d7f8656fbdb917fc5b9f8fd191a",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo2NzkzNTlkYjhlM2IzZDdmODY1NmZiZGI5MTdmYzViOWY4ZmQxOTFh",
    "commit": {
      "author": {
        "name": "Gavin Andresen",
        "email": "gavinandresen@gmail.com",
        "date": "2011-03-25T19:17:37Z"
      },
      "committer": {
        "name": "Gavin Andresen",
        "email": "gavinandresen@gmail.com",
        "date": "2011-03-25T19:17:37Z"
      },
      "message": "Merge branch 'fix-daemon-mode' of https://github.com/tcatm/bitcoin into integration",
      "tree": {
        "sha": "f81403704fbaff13a2496b9ec64dc32911597db9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f81403704fbaff13a2496b9ec64dc32911597db9"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/679359db8e3b3d7f8656fbdb917fc5b9f8fd191a",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/679359db8e3b3d7f8656fbdb917fc5b9f8fd191a",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/679359db8e3b3d7f8656fbdb917fc5b9f8fd191a",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/679359db8e3b3d7f8656fbdb917fc5b9f8fd191a/comments",
    "author": {
      "login": "gavinandresen",
      "id": 331997,
      "node_id": "MDQ6VXNlcjMzMTk5Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/331997?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gavinandresen",
      "html_url": "https://github.com/gavinandresen",
      "followers_url": "https://api.github.com/users/gavinandresen/followers",
      "following_url": "https://api.github.com/users/gavinandresen/following{/other_user}",
      "gists_url": "https://api.github.com/users/gavinandresen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gavinandresen/subscriptions",
      "organizations_url": "https://api.github.com/users/gavinandresen/orgs",
      "repos_url": "https://api.github.com/users/gavinandresen/repos",
      "events_url": "https://api.github.com/users/gavinandresen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gavinandresen/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "gavinandresen",
      "id": 331997,
      "node_id": "MDQ6VXNlcjMzMTk5Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/331997?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gavinandresen",
      "html_url": "https://github.com/gavinandresen",
      "followers_url": "https://api.github.com/users/gavinandresen/followers",
      "following_url": "https://api.github.com/users/gavinandresen/following{/other_user}",
      "gists_url": "https://api.github.com/users/gavinandresen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gavinandresen/subscriptions",
      "organizations_url": "https://api.github.com/users/gavinandresen/orgs",
      "repos_url": "https://api.github.com/users/gavinandresen/repos",
      "events_url": "https://api.github.com/users/gavinandresen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gavinandresen/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "454bc86479a387893604cd662aae994d37699672",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/454bc86479a387893604cd662aae994d37699672",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/454bc86479a387893604cd662aae994d37699672"
      },
      {
        "sha": "c2f76c3df8727329c62c1f5a8374b7151b25277a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c2f76c3df8727329c62c1f5a8374b7151b25277a",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/c2f76c3df8727329c62c1f5a8374b7151b25277a"
      }
    ],
    "stats": {
      "total": 24,
      "additions": 16,
      "deletions": 8
    },
    "files": [
      {
        "sha": "a1540386e4981fe3061a52b6a9dc7329b9922321",
        "filename": "init.cpp",
        "status": "modified",
        "additions": 16,
        "deletions": 8,
        "changes": 24,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/679359db8e3b3d7f8656fbdb917fc5b9f8fd191a/init.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/679359db8e3b3d7f8656fbdb917fc5b9f8fd191a/init.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/init.cpp?ref=679359db8e3b3d7f8656fbdb917fc5b9f8fd191a",
        "patch": "@@ -78,7 +78,9 @@ int main(int argc, char* argv[])\n     fRet = AppInit(argc, argv);\n \n     if (fRet && fDaemon)\n-        pthread_exit((void*)0);\n+        return 0;\n+\n+    return 1;\n }\n #endif\n \n@@ -160,6 +162,8 @@ bool AppInit2(int argc, char* argv[])\n             \"  -paytxfee=<amt>  \\t  \"   + _(\"Fee per KB to add to transactions you send\\n\") +\n #ifdef GUI\n             \"  -server          \\t\\t  \" + _(\"Accept command line and JSON-RPC commands\\n\") +\n+#endif\n+#ifndef WIN32 \n             \"  -daemon          \\t\\t  \" + _(\"Run in the background as a daemon and accept commands\\n\") +\n #endif\n             \"  -testnet         \\t\\t  \" + _(\"Use the test network\\n\") +\n@@ -196,17 +200,20 @@ bool AppInit2(int argc, char* argv[])\n \n     fDebug = GetBoolArg(\"-debug\");\n \n+#ifndef WIN32\n     fDaemon = GetBoolArg(\"-daemon\");\n+#else\n+    fDaemon = false;\n+#endif\n \n     if (fDaemon)\n         fServer = true;\n     else\n         fServer = GetBoolArg(\"-server\");\n \n-    /* force fServer and fDaemon when running without GUI */\n+    /* force fServer when running without GUI */\n #ifndef GUI\n     fServer = true;\n-    fDaemon = true;\n #endif\n \n     fPrintToConsole = GetBoolArg(\"-printtoconsole\");\n@@ -226,7 +233,7 @@ bool AppInit2(int argc, char* argv[])\n         exit(ret);\n     }\n \n-#ifndef GUI\n+#ifndef WIN32\n     if (fDaemon)\n     {\n         // Daemonize\n@@ -472,10 +479,11 @@ bool AppInit2(int argc, char* argv[])\n     if (fFirstRun)\n         SetStartOnSystemStartup(true);\n #endif\n-    \n-    if (fDaemon)\n-        while (!fShutdown)\n-            Sleep(5000);\n+\n+#ifndef GUI\n+    while (1)\n+        Sleep(5000);\n+#endif\n \n     return true;\n }"
      }
    ]
  },
  {
    "sha": "7384dd54c2adcab9e6ee776d0847d8821554abb2",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo3Mzg0ZGQ1NGMyYWRjYWI5ZTZlZTc3NmQwODQ3ZDg4MjE1NTRhYmIy",
    "commit": {
      "author": {
        "name": "Gavin Andresen",
        "email": "gavinandresen@gmail.com",
        "date": "2011-03-27T18:56:18Z"
      },
      "committer": {
        "name": "Gavin Andresen",
        "email": "gavinandresen@gmail.com",
        "date": "2011-03-27T18:56:18Z"
      },
      "message": "Report immature blocks in listtransactions (as category 'immature')",
      "tree": {
        "sha": "ad286798c4313c60c7f92c163499c8c983e93f97",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ad286798c4313c60c7f92c163499c8c983e93f97"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7384dd54c2adcab9e6ee776d0847d8821554abb2",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7384dd54c2adcab9e6ee776d0847d8821554abb2",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/7384dd54c2adcab9e6ee776d0847d8821554abb2",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7384dd54c2adcab9e6ee776d0847d8821554abb2/comments",
    "author": {
      "login": "gavinandresen",
      "id": 331997,
      "node_id": "MDQ6VXNlcjMzMTk5Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/331997?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gavinandresen",
      "html_url": "https://github.com/gavinandresen",
      "followers_url": "https://api.github.com/users/gavinandresen/followers",
      "following_url": "https://api.github.com/users/gavinandresen/following{/other_user}",
      "gists_url": "https://api.github.com/users/gavinandresen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gavinandresen/subscriptions",
      "organizations_url": "https://api.github.com/users/gavinandresen/orgs",
      "repos_url": "https://api.github.com/users/gavinandresen/repos",
      "events_url": "https://api.github.com/users/gavinandresen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gavinandresen/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "gavinandresen",
      "id": 331997,
      "node_id": "MDQ6VXNlcjMzMTk5Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/331997?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gavinandresen",
      "html_url": "https://github.com/gavinandresen",
      "followers_url": "https://api.github.com/users/gavinandresen/followers",
      "following_url": "https://api.github.com/users/gavinandresen/following{/other_user}",
      "gists_url": "https://api.github.com/users/gavinandresen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gavinandresen/subscriptions",
      "organizations_url": "https://api.github.com/users/gavinandresen/orgs",
      "repos_url": "https://api.github.com/users/gavinandresen/repos",
      "events_url": "https://api.github.com/users/gavinandresen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gavinandresen/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "679359db8e3b3d7f8656fbdb917fc5b9f8fd191a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/679359db8e3b3d7f8656fbdb917fc5b9f8fd191a",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/679359db8e3b3d7f8656fbdb917fc5b9f8fd191a"
      }
    ],
    "stats": {
      "total": 52,
      "additions": 31,
      "deletions": 21
    },
    "files": [
      {
        "sha": "4c310c42be34c28c9dc74f4a9666ed8fc18d668b",
        "filename": "main.cpp",
        "status": "modified",
        "additions": 10,
        "deletions": 8,
        "changes": 18,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/7384dd54c2adcab9e6ee776d0847d8821554abb2/main.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/7384dd54c2adcab9e6ee776d0847d8821554abb2/main.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/main.cpp?ref=7384dd54c2adcab9e6ee776d0847d8821554abb2",
        "patch": "@@ -407,18 +407,20 @@ int CWalletTx::GetRequestCount() const\n     return nRequests;\n }\n \n-void CWalletTx::GetAmounts(int64& nGenerated, list<pair<string, int64> >& listReceived,\n+void CWalletTx::GetAmounts(int64& nGeneratedImmature, int64& nGeneratedMature, list<pair<string, int64> >& listReceived,\n                            list<pair<string, int64> >& listSent, int64& nFee, string& strSentAccount) const\n {\n-    nGenerated = nFee = 0;\n+    nGeneratedImmature = nGeneratedMature = nFee = 0;\n     listReceived.clear();\n     listSent.clear();\n     strSentAccount = strFromAccount;\n \n     if (IsCoinBase())\n     {\n-        if (GetDepthInMainChain() >= COINBASE_MATURITY)\n-            nGenerated = GetCredit();\n+        if (GetBlocksToMaturity() > 0)\n+            nGeneratedImmature = CTransaction::GetCredit();\n+        else\n+            nGeneratedMature = GetCredit();\n         return;\n     }\n \n@@ -466,15 +468,15 @@ void CWalletTx::GetAccountAmounts(const string& strAccount, int64& nGenerated, i\n {\n     nGenerated = nReceived = nSent = nFee = 0;\n \n-    int64 allGenerated, allFee;\n-    allGenerated = allFee = 0;\n+    int64 allGeneratedImmature, allGeneratedMature, allFee;\n+    allGeneratedImmature = allGeneratedMature = allFee = 0;\n     string strSentAccount;\n     list<pair<string, int64> > listReceived;\n     list<pair<string, int64> > listSent;\n-    GetAmounts(allGenerated, listReceived, listSent, allFee, strSentAccount);\n+    GetAmounts(allGeneratedImmature, allGeneratedMature, listReceived, listSent, allFee, strSentAccount);\n \n     if (strAccount == \"\")\n-        nGenerated = allGenerated;\n+        nGenerated = allGeneratedMature;\n     if (strAccount == strSentAccount)\n     {\n         foreach(const PAIRTYPE(string,int64)& s, listSent)"
      },
      {
        "sha": "54f4a6b49b225af8920450f522448af16eb38285",
        "filename": "main.h",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/7384dd54c2adcab9e6ee776d0847d8821554abb2/main.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/7384dd54c2adcab9e6ee776d0847d8821554abb2/main.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/main.h?ref=7384dd54c2adcab9e6ee776d0847d8821554abb2",
        "patch": "@@ -882,7 +882,7 @@ class CWalletTx : public CMerkleTx\n         return nChangeCached;\n     }\n \n-    void GetAmounts(int64& nGenerated, list<pair<string /* address */, int64> >& listReceived,\n+    void GetAmounts(int64& nGeneratedImmature, int64& nGeneratedMature, list<pair<string /* address */, int64> >& listReceived,\n                     list<pair<string /* address */, int64> >& listSent, int64& nFee, string& strSentAccount) const;\n \n     void GetAccountAmounts(const string& strAccount, int64& nGenerated, int64& nReceived, "
      },
      {
        "sha": "a040d3128ed9655a706100564c6fa162a509bc84",
        "filename": "rpc.cpp",
        "status": "modified",
        "additions": 20,
        "deletions": 12,
        "changes": 32,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/7384dd54c2adcab9e6ee776d0847d8821554abb2/rpc.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/7384dd54c2adcab9e6ee776d0847d8821554abb2/rpc.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/rpc.cpp?ref=7384dd54c2adcab9e6ee776d0847d8821554abb2",
        "patch": "@@ -636,12 +636,12 @@ Value getbalance(const Array& params, bool fHelp)\n         for (map<uint256, CWalletTx>::iterator it = mapWallet.begin(); it != mapWallet.end(); ++it)\n         {\n             const CWalletTx& wtx = (*it).second;\n-            int64 allGenerated, allFee;\n-            allGenerated = allFee = 0;\n+            int64 allGeneratedImmature, allGeneratedMature, allFee;\n+            allGeneratedImmature = allGeneratedMature = allFee = 0;\n             string strSentAccount;\n             list<pair<string, int64> > listReceived;\n             list<pair<string, int64> > listSent;\n-            wtx.GetAmounts(allGenerated, listReceived, listSent, allFee, strSentAccount);\n+            wtx.GetAmounts(allGeneratedImmature, allGeneratedMature, listReceived, listSent, allFee, strSentAccount);\n             foreach(const PAIRTYPE(string,int64)& r, listReceived)\n             {\n                 nBalance += r.second;\n@@ -651,7 +651,7 @@ Value getbalance(const Array& params, bool fHelp)\n             foreach(const PAIRTYPE(string,int64)& r, listSent)\n                 nBalance -= r.second;\n             nBalance -= allFee;\n-            nBalance += allGenerated;\n+            nBalance += allGeneratedMature;\n         }\n         printf(\"Found %d accounts\\n\", vAccounts.size());\n         return  ValueFromAmount(nBalance);\n@@ -978,21 +978,29 @@ Value listreceivedbyaccount(const Array& params, bool fHelp)\n \n void ListTransactions(const CWalletTx& wtx, const string& strAccount, int nMinDepth, bool fLong, Array& ret)\n {\n-    int64 nGenerated, nFee;\n+    int64 nGeneratedImmature, nGeneratedMature, nFee;\n     string strSentAccount;\n     list<pair<string, int64> > listReceived;\n     list<pair<string, int64> > listSent;\n-    wtx.GetAmounts(nGenerated, listReceived, listSent, nFee, strSentAccount);\n+    wtx.GetAmounts(nGeneratedImmature, nGeneratedMature, listReceived, listSent, nFee, strSentAccount);\n \n     bool fAllAccounts = (strAccount == string(\"*\"));\n \n     // Generated blocks assigned to account \"\"\n-    if (nGenerated != 0 && (fAllAccounts || strAccount == \"\"))\n+    if ((nGeneratedMature+nGeneratedImmature) != 0 && (fAllAccounts || strAccount == \"\"))\n     {\n         Object entry;\n         entry.push_back(Pair(\"account\", string(\"\")));\n-        entry.push_back(Pair(\"category\", \"generate\"));\n-        entry.push_back(Pair(\"amount\", ValueFromAmount(nGenerated)));\n+        if (nGeneratedImmature)\n+        {\n+            entry.push_back(Pair(\"category\", \"immature\"));\n+            entry.push_back(Pair(\"amount\", ValueFromAmount(nGeneratedImmature)));\n+        }\n+        else\n+        {\n+            entry.push_back(Pair(\"category\", \"generate\"));\n+            entry.push_back(Pair(\"amount\", ValueFromAmount(nGeneratedMature)));\n+        }\n         if (fLong)\n             WalletTxToJSON(wtx, entry);\n         ret.push_back(entry);\n@@ -1141,17 +1149,17 @@ Value listaccounts(const Array& params, bool fHelp)\n         for (map<uint256, CWalletTx>::iterator it = mapWallet.begin(); it != mapWallet.end(); ++it)\n         {\n             const CWalletTx& wtx = (*it).second;\n-            int64 nGenerated, nFee;\n+            int64 nGeneratedImmature, nGeneratedMature, nFee;\n             string strSentAccount;\n             list<pair<string, int64> > listReceived;\n             list<pair<string, int64> > listSent;\n-            wtx.GetAmounts(nGenerated, listReceived, listSent, nFee, strSentAccount);\n+            wtx.GetAmounts(nGeneratedImmature, nGeneratedMature, listReceived, listSent, nFee, strSentAccount);\n             mapAccountBalances[strSentAccount] -= nFee;\n             foreach(const PAIRTYPE(string, int64)& s, listSent)\n                 mapAccountBalances[strSentAccount] -= s.second;\n             if (wtx.GetDepthInMainChain() >= nMinDepth)\n             {\n-                mapAccountBalances[\"\"] += nGenerated;\n+                mapAccountBalances[\"\"] += nGeneratedMature;\n                 foreach(const PAIRTYPE(string, int64)& r, listReceived)\n                     if (mapAddressBook.count(r.first))\n                         mapAccountBalances[mapAddressBook[r.first]] += r.second;"
      }
    ]
  }
]