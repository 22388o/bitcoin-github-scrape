laanwj,2014-09-29T07:40:15Z,"As I understand the initialization sequence, the block database is loaded, chainActive and such is initialized. Then at the end of AppInit2() `GenerateBitcoins` is called which starts the miner thread.\n\nHow can this result in a race condition?\n",https://github.com/bitcoin/bitcoin/pull/4995#issuecomment-57126402,57126402,
imharrywu,2014-09-29T08:22:50Z,"i am testing the minging of an altcoin ( begining with a new genesis block), so, in which case, mapBlockIndex.size() will be ZERO. as i see this log:\n\n2014-09-28 08:30:17 mapBlockIndex.size() = 0\n.......\n2014-09-28 08:30:17 BitcoinMiner started\n\nAnd my latest code is as following (init.cpp: ~line: 1000+):\n\n//// debug print\nLogPrintf(""mapBlockIndex.size() = %u\n"",   mapBlockIndex.size());\",https://github.com/bitcoin/bitcoin/pull/4995#issuecomment-57129958,57129958,
laanwj,2014-09-29T11:52:36Z,"What will set chainActive.Tip in this case - ie, what is your proposed loop waiting for?\n",https://github.com/bitcoin/bitcoin/pull/4995#issuecomment-57149814,57149814,
imharrywu,2014-09-29T13:35:54Z,"Got it, -reindex, is the key. i run bitcoind with this parameter.\n\nAppInit2() call InitBlockIndex() with -reindex=true.\n\nbool InitBlockIndex() {\n.......\n    // Only add the genesis block if not reindexing (in which case we reuse the one already on disk)\n    if (!fReindex) {\n\nand after InitBlockIndex() return, chainActive.tip() is NULL.\n\nbut then ProcessBlock() will call ActivateBestChai",https://github.com/bitcoin/bitcoin/pull/4995#issuecomment-57161037,57161037,
laanwj,2014-09-29T14:35:12Z,"OK that's unexpected to me. You'd say that chainActive.tip() would point to the genesis block, when starting reindexing, not NULL.\n\nAnyhow, then it makes sense.\n",https://github.com/bitcoin/bitcoin/pull/4995#issuecomment-57169815,57169815,
BitcoinPullTester,2014-09-29T18:23:10Z,"Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/p4995_b4d1881ca4b939dd3cecb221fb4b3c65d8f23021/ for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-te",https://github.com/bitcoin/bitcoin/pull/4995#issuecomment-57205182,57205182,
laanwj,2014-10-15T08:57:05Z,"This is a legitimate problem, but we're going for an alternative solution. See discussion in #5078.\n",https://github.com/bitcoin/bitcoin/pull/4995#issuecomment-59176398,59176398,
Diapolo,2014-09-28T14:17:33Z,Seems more common to use `pindexPrev == NULL` or `!pindexPrev`?\n,https://github.com/bitcoin/bitcoin/pull/4995#discussion_r18129886,18129886,src/miner.cpp
Diapolo,2014-09-28T14:17:53Z,Nit: You've got an extra space before the `;`.\n,https://github.com/bitcoin/bitcoin/pull/4995#discussion_r18129891,18129891,src/miner.cpp
imharrywu,2014-09-29T00:02:34Z,"i have updated my initial comment above.\n\nand thanks for you suggestion.\n\nnext time, i will try to commit code with the coding style of bitcoin project.\n",https://github.com/bitcoin/bitcoin/pull/4995#discussion_r18133831,18133831,src/miner.cpp
sipa,2014-09-29T02:53:30Z,You can just update the pull request :)\n,https://github.com/bitcoin/bitcoin/pull/4995#discussion_r18135678,18135678,src/miner.cpp
