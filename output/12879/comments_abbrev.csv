promag,2018-04-04T09:21:12Z,"utACK b4264f2, nice.\n\nNit, 2nd commit could have same prefix format `build: `.",https://github.com/bitcoin/bitcoin/pull/12879#issuecomment-378536768,378536768,
kallewoof,2018-04-04T09:35:38Z,I tend to use [brackets]. I am trying to bracket the scripted-diff to see if that's accepted too.,https://github.com/bitcoin/bitcoin/pull/12879#issuecomment-378540650,378540650,
promag,2018-04-04T09:43:51Z,According to @laanwj the widely used format is `foo: `.,https://github.com/bitcoin/bitcoin/pull/12879#issuecomment-378542770,378542770,
practicalswift,2018-04-04T10:39:23Z,"Concept ACK. Thanks for adding a lint script to make this cleanup persistent!\n\nI don't have any suggestions beyond what `shellcheck` suggests:\n\n```\n$ shellcheck contrib/devtools/lint-extern-fundecl.sh\n\nIn lint-extern-fundecl.sh line 9:\nHEADER_ID_PREFIX=""BITCOIN_""\n^-- SC2034: HEADER_ID_PREFIX appears unused. Verify it or export it.\n\n\nIn lint-extern-fundecl.sh line 10:\nHEAD",https://github.com/bitcoin/bitcoin/pull/12879#issuecomment-378556872,378556872,
practicalswift,2018-04-04T10:42:22Z,Like the `shellcheck` suggestions? Please review #12871 to help bring `shellcheck` to Travis :-),https://github.com/bitcoin/bitcoin/pull/12879#issuecomment-378557607,378557607,
MarcoFalke,2018-04-04T14:15:29Z,Not sure if this really needs a scripted diff and lint script. Seems overkill. Just remove them in one commit and mention that in the commit message.,https://github.com/bitcoin/bitcoin/pull/12879#issuecomment-378615061,378615061,
practicalswift,2018-04-04T14:32:01Z,"@MarcoFalke Why remove the lint script? The lint script makes this improvement persistent. What would be good reasons to switch to a temporary fix when the permanent fix is already in place?\n\nA temporary fix in this case will generate follow-up PRs in the future that will require review time. Better let Travis take care of finding trivial mechanical issues via the lint script so that human rev",https://github.com/bitcoin/bitcoin/pull/12879#issuecomment-378620893,378620893,
MarcoFalke,2018-04-04T14:49:51Z,"There is no harm in having the `extern` there. It is just a minor style change. With the same rationale we could start enforcing that all code is clang formatted, but that would not be maintainable. The linters are there to catch potential bugs and documentation inconsistencies, not minor style issues.",https://github.com/bitcoin/bitcoin/pull/12879#issuecomment-378627658,378627658,
practicalswift,2018-04-04T15:09:28Z,"@MarcoFalke I'm not sure that is a fair comparison. A more fair comparison would be: assuming that the entire code base was 100 % clang formatted, wouldn't it then make sense to have a linter that made sure that it stayed that way and no clang formatting violations were introduced in subsequent PR:s?\n\nAutomation is our friend :-)",https://github.com/bitcoin/bitcoin/pull/12879#issuecomment-378635210,378635210,
MarcoFalke,2018-04-04T22:05:00Z,"Adding a script of 22 lines that needs to be maintained (*) and run on every pull request is just not worth it. (Again having the redundant `extern` has zero harm or cost, so the trade-offs are clear, imo)\n\n(*) See how you have already two comments for the script.",https://github.com/bitcoin/bitcoin/pull/12879#issuecomment-378760055,378760055,
practicalswift,2018-04-05T05:42:14Z,"@MarcoFalke My review comments on the script just underscores my point on how automatic linting frees up review time for humans â€“ all my review comments on this PR would all have been made automatically by `shellcheck` (and thus fixed before human review) once #12871 is merged.\n\nI agree that redundant code has no ""technical harm"", but if automatic linting can guarantee that PR:s reaching human",https://github.com/bitcoin/bitcoin/pull/12879#issuecomment-378826128,378826128,
promag,2018-04-05T08:56:21Z,"> and run on every pull request is just not worth it\n\n@MarcoFalke IMO that should not be an argument against.\n\n> Again having the redundant extern has zero harm or cost\n\nI'd only say ""cost"", because wrong indentation or code format also has zero harm.\n\nGenerally I support mechanisms to keep the code consistent. But I kind of understand @MarcoFalke points as this is not an usual cas",https://github.com/bitcoin/bitcoin/pull/12879#issuecomment-378866656,378866656,
kallewoof,2018-04-06T00:33:50Z,"@MarcoFalke Generally, anything that could convince someone to make a PR, that could be automated, and that is repeated in new code, is worth automating. This has zero cost (and can probably even be same-binary verified), but will probably save PR time, even with the maintenance of that script (it's basically the same as the include-guards one, so if it breaks, the other one does too, most likely)",https://github.com/bitcoin/bitcoin/pull/12879#issuecomment-379115870,379115870,
kallewoof,2018-04-06T04:40:55Z,@promag That must be new (prefer `foo:`)! Will switch to that style. (Also did do so in these commits.),https://github.com/bitcoin/bitcoin/pull/12879#issuecomment-379146164,379146164,
practicalswift,2018-04-06T05:47:15Z,ACK 4d3f609481b6214ff2ce4de44ed40ad66e79e630,https://github.com/bitcoin/bitcoin/pull/12879#issuecomment-379154815,379154815,
laanwj,2018-04-10T18:16:04Z,"> There is no harm in having the extern there. It is just a minor style change. With the same rationale we could start enforcing that all code is clang formatted, but that would not be maintainable. The linters are there to catch potential bugs and documentation inconsistencies, not minor style issues.\n\nI agree. Let's not over-burden the projects will all kinds of linters for trivial things. T",https://github.com/bitcoin/bitcoin/pull/12879#issuecomment-380197905,380197905,
MarcoFalke,2018-04-10T18:35:09Z,"I'd also suggest to get rid of the scripted diff, it is easier to review without having to also review the scripted diff.",https://github.com/bitcoin/bitcoin/pull/12879#issuecomment-380203828,380203828,
kallewoof,2018-04-11T04:47:11Z,"@laanwj \n\n> I agree. Let's not over-burden the projects will all kinds of linters for trivial things. This seems over-zealous. There's no risk that a redundant 'extern' causes any actual bugs. It doesn't even cause confusion to developers reading the code.\n\nThat's kind of the point, in a way. Using `extern` when you don't need to has no side effects, which means a lot of people think they ",https://github.com/bitcoin/bitcoin/pull/12879#issuecomment-380325875,380325875,
practicalswift,2018-04-11T05:38:19Z,"Agree with @kallewoof 100 %.\n\nI don't understand the sudden dislike for regression tests and scripted-diffs :-)\n\nI fail to see how this regression test could be a bad thing. Automation is our friend.",https://github.com/bitcoin/bitcoin/pull/12879#issuecomment-380333281,380333281,
ryanofsky,2018-04-11T13:53:49Z,"I agree with kallewoof and practicalswift. Scripted diffs can guard against unintentended changes, in addition to making prs easier to review. If you only want to review part of a PR, it seems easy enough to say ""utACK for code changes but I didn't review the script"". I also like all the linters (though I would encourage someone would add a ""make lint"" command so they are easier to run locally).",https://github.com/bitcoin/bitcoin/pull/12879#issuecomment-380460036,380460036,
MarcoFalke,2018-05-18T15:00:40Z,"Closing for now, since none of the maintainers are willing to merge it due to the future maintenance overhead of the lint script. Also, needed rebase.\n\nIf you feel strongly about this style change you can still fix the style in a new pull request. If you feel strongly about the linter script, I suggest bringing up the discussion of its usefulness when a non-grandfathered (fresh) ""violation"" ha",https://github.com/bitcoin/bitcoin/pull/12879#issuecomment-390234937,390234937,
kallewoof,2018-05-19T00:57:55Z,"@MarcoFalke You can't just go around closing PR's because you disagree with them personally. I'm baffled by the 'no maintainer willing to merge' comment. I always presumed maintainers merged based on community consensus and this one clearly has proponents. In fact, more pro than against.\n\nLastly, I'm disappointed that you don't think I am capable of judging whether a PR should be closed or not",https://github.com/bitcoin/bitcoin/pull/12879#issuecomment-390366699,390366699,
sipa,2018-05-19T01:36:13Z,"@kallewoof I assume that what @MarcoFalke means is that it looks too controversial to be merged, which seems a fair reason to close things. Just a few people in favor isn't enough when there are also good arguments being raised against.\n\nFWIW, I'm generally in favor of automating simple things that improve consistency of the codebase, but that's hard to defend when there is disagreement whether ",https://github.com/bitcoin/bitcoin/pull/12879#issuecomment-390369207,390369207,
kallewoof,2018-05-19T01:54:46Z,"@sipa I understand that. Why not simply say ""I suggest you close this as it's too controversial to be merged."" That at least gives me the opportunity to argue or close myself (that means I can reopen later if I have some bright idea for how to address the controversial points). I'm also not sure I agree that it's too controversial. After all, only two people have argued against it, and they are th",https://github.com/bitcoin/bitcoin/pull/12879#issuecomment-390370231,390370231,
sipa,2018-05-19T02:04:27Z,"@kallewoof That sort of reasoning applies everyone's pet peeve for style, and does not scale. I agree with @laanwj that this simply does not matter - extern or lack thereof doesn't convey any additional information, and does not prevent any bugs.\n\nI also believe we should not be enforcing random style opinions just because they increase consistency. That again leads to arbitrary rules that are a",https://github.com/bitcoin/bitcoin/pull/12879#issuecomment-390370787,390370787,
kallewoof,2018-05-19T02:20:24Z,"That all makes sense, and I think it could be stated that way without forcibly closing the PR. Closing is the equivalent of saying the author is not capable of making that decision, or that the author won't listen to reason. We go from a ""peer reviewed system"" to a governed one. I think that it is sometimes necessary to close PR's, but often it is not, so it should be used sparingly.",https://github.com/bitcoin/bitcoin/pull/12879#issuecomment-390371682,390371682,
sipa,2018-05-19T02:29:34Z,"I don't think you should see it that way. It's just a ""this approach is not going to work, no need to keep it open"". If you would decide to change approach significantly (in this case, change it into a change to the style guide, for example), you'd still be asked to do it in a separate PR to avoid people incorrectly assuming it's a continuation of the same thing and missing it. This PR being close",https://github.com/bitcoin/bitcoin/pull/12879#issuecomment-390372171,390372171,
practicalswift,2018-04-04T10:42:49Z,`shellcheck: SC2034: HEADER_ID_PREFIX appears unused. Verify it or export it.`,https://github.com/bitcoin/bitcoin/pull/12879#discussion_r179096506,179096506,contrib/devtools/lint-extern-fundecl.sh
practicalswift,2018-04-04T10:43:10Z,`shellcheck: SC2034: HEADER_ID_SUFFIX appears unused. Verify it or export it.`,https://github.com/bitcoin/bitcoin/pull/12879#discussion_r179096577,179096577,contrib/devtools/lint-extern-fundecl.sh
practicalswift,2018-04-04T10:44:29Z,"`shellcheck: SC2196: egrep is non-standard and deprecated. Use grep -E instead.`\n\n`shellcheck: SC2086: Double quote to prevent globbing and word splitting.` (`""${SOURCE_FILE}"" instead of ${SOURCE_FILE}`)",https://github.com/bitcoin/bitcoin/pull/12879#discussion_r179096869,179096869,contrib/devtools/lint-extern-fundecl.sh
ryanofsky,2018-04-11T13:57:57Z,Seems not specific to extern script. It would be nice in a followup to have move common variables and functions to a file that could be shared by different linters.,https://github.com/bitcoin/bitcoin/pull/12879#discussion_r180763152,180763152,contrib/devtools/lint-extern-fundecl.sh
practicalswift,2018-04-11T14:03:23Z,Good point. I can fix that once this PR is merged :-),https://github.com/bitcoin/bitcoin/pull/12879#discussion_r180765083,180765083,contrib/devtools/lint-extern-fundecl.sh
