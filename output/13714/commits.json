[
  {
    "sha": "60c3c23a63bd7f681e0db86251ae0a372cb6b279",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo2MGMzYzIzYTYzYmQ3ZjY4MWUwZGI4NjI1MWFlMGEzNzJjYjZiMjc5",
    "commit": {
      "author": {
        "name": "Chun Kuan Lee",
        "email": "ken2812221@gmail.com",
        "date": "2018-07-19T09:30:47Z"
      },
      "committer": {
        "name": "Chun Kuan Lee",
        "email": "ken2812221@gmail.com",
        "date": "2018-07-20T22:05:29Z"
      },
      "message": "[contrib] Add automatic setup for Ubuntu Bionic",
      "tree": {
        "sha": "6b8fa35d96228f5dc0d907d89215959accfb3dce",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6b8fa35d96228f5dc0d907d89215959accfb3dce"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/60c3c23a63bd7f681e0db86251ae0a372cb6b279",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/60c3c23a63bd7f681e0db86251ae0a372cb6b279",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/60c3c23a63bd7f681e0db86251ae0a372cb6b279",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/60c3c23a63bd7f681e0db86251ae0a372cb6b279/comments",
    "author": {
      "login": "ken2812221",
      "id": 11154118,
      "node_id": "MDQ6VXNlcjExMTU0MTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11154118?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ken2812221",
      "html_url": "https://github.com/ken2812221",
      "followers_url": "https://api.github.com/users/ken2812221/followers",
      "following_url": "https://api.github.com/users/ken2812221/following{/other_user}",
      "gists_url": "https://api.github.com/users/ken2812221/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ken2812221/subscriptions",
      "organizations_url": "https://api.github.com/users/ken2812221/orgs",
      "repos_url": "https://api.github.com/users/ken2812221/repos",
      "events_url": "https://api.github.com/users/ken2812221/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ken2812221/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "ken2812221",
      "id": 11154118,
      "node_id": "MDQ6VXNlcjExMTU0MTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11154118?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ken2812221",
      "html_url": "https://github.com/ken2812221",
      "followers_url": "https://api.github.com/users/ken2812221/followers",
      "following_url": "https://api.github.com/users/ken2812221/following{/other_user}",
      "gists_url": "https://api.github.com/users/ken2812221/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ken2812221/subscriptions",
      "organizations_url": "https://api.github.com/users/ken2812221/orgs",
      "repos_url": "https://api.github.com/users/ken2812221/repos",
      "events_url": "https://api.github.com/users/ken2812221/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ken2812221/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "4a3e8c5aa6a5d8dda15a76d644b2a9f0f40cdec7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4a3e8c5aa6a5d8dda15a76d644b2a9f0f40cdec7",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/4a3e8c5aa6a5d8dda15a76d644b2a9f0f40cdec7"
      }
    ],
    "stats": {
      "total": 19,
      "additions": 18,
      "deletions": 1
    },
    "files": [
      {
        "sha": "5b8db1e73d3ea42ad0387ba8038071c884710dd9",
        "filename": "contrib/gitian-build.py",
        "status": "modified",
        "additions": 18,
        "deletions": 1,
        "changes": 19,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/60c3c23a63bd7f681e0db86251ae0a372cb6b279/contrib/gitian-build.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/60c3c23a63bd7f681e0db86251ae0a372cb6b279/contrib/gitian-build.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/gitian-build.py?ref=60c3c23a63bd7f681e0db86251ae0a372cb6b279",
        "patch": "@@ -11,7 +11,14 @@ def setup():\n     if args.kvm:\n         programs += ['python-vm-builder', 'qemu-kvm', 'qemu-utils']\n     elif args.docker:\n-        programs += ['docker.io']\n+        dockers = ['docker.io', 'docker-ce']\n+        for i in dockers:\n+            return_code = subprocess.call(['sudo', 'apt-get', 'install', '-qq', i])\n+            if return_code == 0:\n+                break\n+        if return_code != 0:\n+            print('Cannot find any way to install docker', file=sys.stderr)\n+            exit(1)\n     else:\n         programs += ['lxc', 'debootstrap']\n     subprocess.check_call(['sudo', 'apt-get', 'install', '-qq'] + programs)\n@@ -31,6 +38,10 @@ def setup():\n         make_image_prog += ['--lxc']\n     subprocess.check_call(make_image_prog)\n     os.chdir(workdir)\n+    if args.is_bionic and not args.kvm and not args.docker:\n+        subprocess.check_call(['sudo', 'sed', '-i', 's/lxcbr0/br0/', '/etc/default/lxc-net'])\n+        print('Reboot is required')\n+        exit(0)\n \n def build():\n     global args, workdir\n@@ -147,6 +158,8 @@ def main():\n     args.windows = 'w' in args.os\n     args.macos = 'm' in args.os\n \n+    args.is_bionic = b'bionic' in subprocess.check_output(['lsb_release', '-cs'])\n+\n     if args.buildsign:\n         args.build=True\n         args.sign=True\n@@ -161,6 +174,10 @@ def main():\n         os.environ['USE_DOCKER'] = '1'\n     elif not args.kvm:\n         os.environ['USE_LXC'] = '1'\n+        if not 'GITIAN_HOST_IP' in os.environ.keys():\n+            os.environ['GITIAN_HOST_IP'] = '10.0.3.1'\n+        if not 'LXC_GUEST_IP' in os.environ.keys():\n+            os.environ['LXC_GUEST_IP'] = '10.0.3.5'\n \n     # Disable for MacOS if no SDK found\n     if args.macos and not os.path.isfile('gitian-builder/inputs/MacOSX10.11.sdk.tar.gz'):"
      }
    ]
  }
]