[
  {
    "sha": "da30975fe13ab227e1b48d68675e7cf8aa84d8e3",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkYTMwOTc1ZmUxM2FiMjI3ZTFiNDhkNjg2NzVlN2NmOGFhODRkOGUz",
    "commit": {
      "author": {
        "name": "R E Broadley",
        "email": "rebroad+github@gmail.com",
        "date": "2012-05-31T11:40:03Z"
      },
      "committer": {
        "name": "R E Broadley",
        "email": "rebroad+github@gmail.com",
        "date": "2012-12-23T18:13:32Z"
      },
      "message": "Improved getblocks logging.",
      "tree": {
        "sha": "54e101c75ab6e4804753f104a2392610e16da60e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/54e101c75ab6e4804753f104a2392610e16da60e"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/da30975fe13ab227e1b48d68675e7cf8aa84d8e3",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/da30975fe13ab227e1b48d68675e7cf8aa84d8e3",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/da30975fe13ab227e1b48d68675e7cf8aa84d8e3",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/da30975fe13ab227e1b48d68675e7cf8aa84d8e3/comments",
    "author": {
      "login": "rebroad",
      "id": 1530283,
      "node_id": "MDQ6VXNlcjE1MzAyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1530283?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rebroad",
      "html_url": "https://github.com/rebroad",
      "followers_url": "https://api.github.com/users/rebroad/followers",
      "following_url": "https://api.github.com/users/rebroad/following{/other_user}",
      "gists_url": "https://api.github.com/users/rebroad/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rebroad/subscriptions",
      "organizations_url": "https://api.github.com/users/rebroad/orgs",
      "repos_url": "https://api.github.com/users/rebroad/repos",
      "events_url": "https://api.github.com/users/rebroad/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rebroad/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "rebroad",
      "id": 1530283,
      "node_id": "MDQ6VXNlcjE1MzAyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1530283?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rebroad",
      "html_url": "https://github.com/rebroad",
      "followers_url": "https://api.github.com/users/rebroad/followers",
      "following_url": "https://api.github.com/users/rebroad/following{/other_user}",
      "gists_url": "https://api.github.com/users/rebroad/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rebroad/subscriptions",
      "organizations_url": "https://api.github.com/users/rebroad/orgs",
      "repos_url": "https://api.github.com/users/rebroad/repos",
      "events_url": "https://api.github.com/users/rebroad/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rebroad/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "23826f1b7fd070894cfabdbf49b0a3840e6f33a6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/23826f1b7fd070894cfabdbf49b0a3840e6f33a6",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/23826f1b7fd070894cfabdbf49b0a3840e6f33a6"
      }
    ],
    "stats": {
      "total": 13,
      "additions": 7,
      "deletions": 6
    },
    "files": [
      {
        "sha": "43a9216551f7bc02f951c4e0c420808d146b46a3",
        "filename": "src/main.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/da30975fe13ab227e1b48d68675e7cf8aa84d8e3/src/main.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/da30975fe13ab227e1b48d68675e7cf8aa84d8e3/src/main.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/main.cpp?ref=da30975fe13ab227e1b48d68675e7cf8aa84d8e3",
        "patch": "@@ -2206,7 +2206,8 @@ bool ProcessBlock(CNode* pfrom, CBlock* pblock, CDiskBlockPos *dbp)\n             mapOrphanBlocksByPrev.insert(make_pair(pblock2->hashPrevBlock, pblock2));\n \n             // Ask this guy to fill in what we're missing\n-            pfrom->PushGetBlocks(pindexBest, GetOrphanRoot(pblock2));\n+            if (pfrom->PushGetBlocks(pindexBest, GetOrphanRoot(pblock2)))\n+                printf(\"fill-in getblocks to %s\\n\", pfrom->addr.ToString().c_str());\n         }\n         return true;\n     }\n@@ -2979,8 +2980,7 @@ bool static ProcessMessage(CNode* pfrom, string strCommand, CDataStream& vRecv)\n                 // In case we are on a very long side-chain, it is possible that we already have\n                 // the last block in an inv bundle sent in response to getblocks. Try to detect\n                 // this situation and push another getblocks to continue.\n-                pfrom->PushGetBlocks(mapBlockIndex[inv.hash], uint256(0));\n-                if (fDebug)\n+                if (pfrom->PushGetBlocks(mapBlockIndex[inv.hash], uint256(0)) && fDebug)\n                     printf(\"force request: %s\\n\", inv.ToString().c_str());\n             }\n "
      },
      {
        "sha": "7ad75f50a3717e605a9f134e65696c9a255c7851",
        "filename": "src/net.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 2,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/da30975fe13ab227e1b48d68675e7cf8aa84d8e3/src/net.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/da30975fe13ab227e1b48d68675e7cf8aa84d8e3/src/net.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/net.cpp?ref=da30975fe13ab227e1b48d68675e7cf8aa84d8e3",
        "patch": "@@ -85,15 +85,16 @@ unsigned short GetListenPort()\n     return (unsigned short)(GetArg(\"-port\", GetDefaultPort()));\n }\n \n-void CNode::PushGetBlocks(CBlockIndex* pindexBegin, uint256 hashEnd)\n+bool CNode::PushGetBlocks(CBlockIndex* pindexBegin, uint256 hashEnd)\n {\n     // Filter out duplicate requests\n     if (pindexBegin == pindexLastGetBlocksBegin && hashEnd == hashLastGetBlocksEnd)\n-        return;\n+        return false;\n     pindexLastGetBlocksBegin = pindexBegin;\n     hashLastGetBlocksEnd = hashEnd;\n \n     PushMessage(\"getblocks\", CBlockLocator(pindexBegin), hashEnd);\n+    return true;\n }\n \n // find 'best' local address for a particular peer"
      },
      {
        "sha": "1733f99f3839c29c904fce4b7d63a885e5a23e34",
        "filename": "src/net.h",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/da30975fe13ab227e1b48d68675e7cf8aa84d8e3/src/net.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/da30975fe13ab227e1b48d68675e7cf8aa84d8e3/src/net.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/net.h?ref=da30975fe13ab227e1b48d68675e7cf8aa84d8e3",
        "patch": "@@ -527,7 +527,7 @@ class CNode\n         }\n     }\n \n-    void PushGetBlocks(CBlockIndex* pindexBegin, uint256 hashEnd);\n+    bool PushGetBlocks(CBlockIndex* pindexBegin, uint256 hashEnd);\n     bool IsSubscribed(unsigned int nChannel);\n     void Subscribe(unsigned int nChannel, unsigned int nHops=0);\n     void CancelSubscribe(unsigned int nChannel);"
      }
    ]
  },
  {
    "sha": "2da3e92e55f821514fe4f914eda8e78bcb960e2f",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyZGEzZTkyZTU1ZjgyMTUxNGZlNGY5MTRlZGE4ZTc4YmNiOTYwZTJm",
    "commit": {
      "author": {
        "name": "R E Broadley",
        "email": "rebroad+github@gmail.com",
        "date": "2012-12-23T18:46:22Z"
      },
      "committer": {
        "name": "R E Broadley",
        "email": "rebroad+github@gmail.com",
        "date": "2012-12-23T18:46:22Z"
      },
      "message": "No need to report block hash as block height is shown and hash can be derived from that.",
      "tree": {
        "sha": "57b8131cdf01bd1cb812ae8830b46cac2b28b17d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/57b8131cdf01bd1cb812ae8830b46cac2b28b17d"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2da3e92e55f821514fe4f914eda8e78bcb960e2f",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2da3e92e55f821514fe4f914eda8e78bcb960e2f",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/2da3e92e55f821514fe4f914eda8e78bcb960e2f",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2da3e92e55f821514fe4f914eda8e78bcb960e2f/comments",
    "author": {
      "login": "rebroad",
      "id": 1530283,
      "node_id": "MDQ6VXNlcjE1MzAyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1530283?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rebroad",
      "html_url": "https://github.com/rebroad",
      "followers_url": "https://api.github.com/users/rebroad/followers",
      "following_url": "https://api.github.com/users/rebroad/following{/other_user}",
      "gists_url": "https://api.github.com/users/rebroad/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rebroad/subscriptions",
      "organizations_url": "https://api.github.com/users/rebroad/orgs",
      "repos_url": "https://api.github.com/users/rebroad/repos",
      "events_url": "https://api.github.com/users/rebroad/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rebroad/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "rebroad",
      "id": 1530283,
      "node_id": "MDQ6VXNlcjE1MzAyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1530283?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rebroad",
      "html_url": "https://github.com/rebroad",
      "followers_url": "https://api.github.com/users/rebroad/followers",
      "following_url": "https://api.github.com/users/rebroad/following{/other_user}",
      "gists_url": "https://api.github.com/users/rebroad/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rebroad/subscriptions",
      "organizations_url": "https://api.github.com/users/rebroad/orgs",
      "repos_url": "https://api.github.com/users/rebroad/repos",
      "events_url": "https://api.github.com/users/rebroad/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rebroad/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "da30975fe13ab227e1b48d68675e7cf8aa84d8e3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/da30975fe13ab227e1b48d68675e7cf8aa84d8e3",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/da30975fe13ab227e1b48d68675e7cf8aa84d8e3"
      }
    ],
    "stats": {
      "total": 6,
      "additions": 3,
      "deletions": 3
    },
    "files": [
      {
        "sha": "174d65a3bd05da9063e0f25c8382fea0c25c6116",
        "filename": "src/main.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2da3e92e55f821514fe4f914eda8e78bcb960e2f/src/main.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2da3e92e55f821514fe4f914eda8e78bcb960e2f/src/main.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/main.cpp?ref=2da3e92e55f821514fe4f914eda8e78bcb960e2f",
        "patch": "@@ -3076,20 +3076,20 @@ bool static ProcessMessage(CNode* pfrom, string strCommand, CDataStream& vRecv)\n         if (pindex)\n             pindex = pindex->pnext;\n         int nLimit = 500;\n-        printf(\"getblocks %d to %s limit %d\\n\", (pindex ? pindex->nHeight : -1), BlockHashStr(hashStop).c_str(), nLimit);\n+        printf(\"getblocks %d limit %d from %s\\n\", (pindex ? pindex->nHeight : -1), nLimit, pfrom->addr.ToString().c_str());\n         for (; pindex; pindex = pindex->pnext)\n         {\n             if (pindex->GetBlockHash() == hashStop)\n             {\n-                printf(\"  getblocks stopping at %d %s\\n\", pindex->nHeight, BlockHashStr(pindex->GetBlockHash()).c_str());\n+                printf(\"  getblocks stopping at %d\\n\", pindex->nHeight);\n                 break;\n             }\n             pfrom->PushInventory(CInv(MSG_BLOCK, pindex->GetBlockHash()));\n             if (--nLimit <= 0)\n             {\n                 // When this block is requested, we'll send an inv that'll make them\n                 // getblocks the next batch of inventory.\n-                printf(\"  getblocks stopping at limit %d %s\\n\", pindex->nHeight, BlockHashStr(pindex->GetBlockHash()).c_str());\n+                printf(\"  getblocks stopping at limit %d\\n\", pindex->nHeight);\n                 pfrom->hashContinue = pindex->GetBlockHash();\n                 break;\n             }"
      }
    ]
  }
]