[
  {
    "sha": "d61013576c53ad1d5dc09ef647995dd090c2c75c",
    "node_id": "C_kwDOABII59oAKGQ2MTAxMzU3NmM1M2FkMWQ1ZGMwOWVmNjQ3OTk1ZGQwOTBjMmM3NWM",
    "commit": {
      "author": {
        "name": "Douglas Chimento",
        "email": "dchimento@gmail.com",
        "date": "2021-11-24T16:14:24Z"
      },
      "committer": {
        "name": "Douglas Chimento",
        "email": "dchimento@gmail.com",
        "date": "2021-11-25T09:21:18Z"
      },
      "message": "test: Adding functional test for -maxuploadtarget with byte unit 'M'",
      "tree": {
        "sha": "c2a2792caf64c58540871babcec9f57cdf4fd65a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c2a2792caf64c58540871babcec9f57cdf4fd65a"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d61013576c53ad1d5dc09ef647995dd090c2c75c",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQHIBAABCAAyFiEEFt7wA8cqIHRePmNa0a1maOubxakFAmGfVZIUHGRjaGltZW50\nb0BnbWFpbC5jb20ACgkQ0a1maOubxanSdgv/TOEW6HIEuedM9pO+lJMIRFsn5g+T\n+iY61syDps1h92Tc0V+ioVcZTPqOt9C28wrqfAs84E2C/c+3QzW4VMm5ZHnfljoT\nxmBYmRRpmIrAp15r+6IuiPraOJ0ZW/88Bu6VB/lcfzNlwMxjaziCPqiaPnpHduYs\nd40wjfCpO8/uPK+632Db9zIcBUF8CrnryIoKEwUjJuaIQ8tmYCVASBmzlg3RpjXD\n7LGCedc5UbQ7KfXMrEtiDg0Mjtp06xtMZNdGrKbicGd9uBtPeWIDsNdwDpFF/nGv\ng4tAsmoVsOKzMo8LeEpGYXi1gEd0c/lhY5pl5l9/HzYF/SrB0fKQJwdQE9vgmoT6\nJLlrTI9U4efkfZjnNSbBfoj00TJqADXZ8BVj9hOj9C1PoZACCjyOGza8my/9cCSK\nH7fKLFeZAzKt+V2YktsRoQSmF7LFNr7SQqxxH8AR45wzBARyXCSVcK1RDw3tjqZV\n6iImAADUXkC03qUXb22S9WekBKu3ZUfq+9oj\n=60YU\n-----END PGP SIGNATURE-----",
        "payload": "tree c2a2792caf64c58540871babcec9f57cdf4fd65a\nparent 9394964f6b9d1cf1220a4eca17ba18dc49ae876d\nauthor Douglas Chimento <dchimento@gmail.com> 1637770464 +0200\ncommitter Douglas Chimento <dchimento@gmail.com> 1637832078 +0200\n\ntest: Adding functional test for -maxuploadtarget with byte unit 'M'\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d61013576c53ad1d5dc09ef647995dd090c2c75c",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/d61013576c53ad1d5dc09ef647995dd090c2c75c",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d61013576c53ad1d5dc09ef647995dd090c2c75c/comments",
    "author": {
      "login": "dougEfresh",
      "id": 976425,
      "node_id": "MDQ6VXNlcjk3NjQyNQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/976425?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dougEfresh",
      "html_url": "https://github.com/dougEfresh",
      "followers_url": "https://api.github.com/users/dougEfresh/followers",
      "following_url": "https://api.github.com/users/dougEfresh/following{/other_user}",
      "gists_url": "https://api.github.com/users/dougEfresh/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dougEfresh/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dougEfresh/subscriptions",
      "organizations_url": "https://api.github.com/users/dougEfresh/orgs",
      "repos_url": "https://api.github.com/users/dougEfresh/repos",
      "events_url": "https://api.github.com/users/dougEfresh/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dougEfresh/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dougEfresh",
      "id": 976425,
      "node_id": "MDQ6VXNlcjk3NjQyNQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/976425?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dougEfresh",
      "html_url": "https://github.com/dougEfresh",
      "followers_url": "https://api.github.com/users/dougEfresh/followers",
      "following_url": "https://api.github.com/users/dougEfresh/following{/other_user}",
      "gists_url": "https://api.github.com/users/dougEfresh/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dougEfresh/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dougEfresh/subscriptions",
      "organizations_url": "https://api.github.com/users/dougEfresh/orgs",
      "repos_url": "https://api.github.com/users/dougEfresh/repos",
      "events_url": "https://api.github.com/users/dougEfresh/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dougEfresh/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "9394964f6b9d1cf1220a4eca17ba18dc49ae876d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9394964f6b9d1cf1220a4eca17ba18dc49ae876d",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/9394964f6b9d1cf1220a4eca17ba18dc49ae876d"
      }
    ],
    "stats": {
      "total": 32,
      "additions": 30,
      "deletions": 2
    },
    "files": [
      {
        "sha": "eb065743e59ab85034e9c8e0219484f5aee8c8f0",
        "filename": "test/functional/feature_maxuploadtarget.py",
        "status": "modified",
        "additions": 4,
        "deletions": 2,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d61013576c53ad1d5dc09ef647995dd090c2c75c/test/functional/feature_maxuploadtarget.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d61013576c53ad1d5dc09ef647995dd090c2c75c/test/functional/feature_maxuploadtarget.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/feature_maxuploadtarget.py?ref=d61013576c53ad1d5dc09ef647995dd090c2c75c",
        "patch": "@@ -31,12 +31,14 @@ def on_block(self, message):\n         self.block_receive_map[message.block.sha256] += 1\n \n class MaxUploadTest(BitcoinTestFramework):\n+    uploadtarget = \"800\"\n+    restart_uploadtarget = \"1\"\n \n     def set_test_params(self):\n         self.setup_clean_chain = True\n         self.num_nodes = 1\n         self.extra_args = [[\n-            \"-maxuploadtarget=800\",\n+            f\"-maxuploadtarget={self.uploadtarget}\",\n             \"-acceptnonstdtxn=1\",\n         ]]\n         self.supports_cli = False\n@@ -141,7 +143,7 @@ def run_test(self):\n         self.nodes[0].disconnect_p2ps()\n \n         self.log.info(\"Restarting node 0 with download permission and 1MB maxuploadtarget\")\n-        self.restart_node(0, [\"-whitelist=download@127.0.0.1\", \"-maxuploadtarget=1\"])\n+        self.restart_node(0, [\"-whitelist=download@127.0.0.1\", f\"-maxuploadtarget={self.restart_uploadtarget}\"])\n \n         # Reconnect to self.nodes[0]\n         peer = self.nodes[0].add_p2p_connection(TestP2PConn())"
      },
      {
        "sha": "9547b01f8bdede6673d0bedea9f7de0cc3f8cc80",
        "filename": "test/functional/feature_maxuploadtarget_byteunit.py",
        "status": "added",
        "additions": 25,
        "deletions": 0,
        "changes": 25,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d61013576c53ad1d5dc09ef647995dd090c2c75c/test/functional/feature_maxuploadtarget_byteunit.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d61013576c53ad1d5dc09ef647995dd090c2c75c/test/functional/feature_maxuploadtarget_byteunit.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/feature_maxuploadtarget_byteunit.py?ref=d61013576c53ad1d5dc09ef647995dd090c2c75c",
        "patch": "@@ -0,0 +1,25 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2015-2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test behavior of -maxuploadtarget with byte unit M\n+\n+* Same as MaxUploadTest in test/functional/feature_maxuploadtarget.py\n+\"\"\"\n+from feature_maxuploadtarget import MaxUploadTest\n+\n+class MaxUploadTestByteUnit(MaxUploadTest):\n+    # same as MaxUploadTest but with an byte unit suffix M\n+    uploadtarget = \"800M\"\n+    restart_uploadtarget = \"1M\"\n+\n+    def set_test_params(self):\n+        super().set_test_params()\n+\n+\n+    def run_test(self):\n+        super().run_test()\n+\n+\n+if __name__ == '__main__':\n+    MaxUploadTestByteUnit().main()"
      },
      {
        "sha": "30fb61154e0717d2cfd18340ef0370b224e12f3a",
        "filename": "test/functional/test_runner.py",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d61013576c53ad1d5dc09ef647995dd090c2c75c/test/functional/test_runner.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d61013576c53ad1d5dc09ef647995dd090c2c75c/test/functional/test_runner.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/test_runner.py?ref=d61013576c53ad1d5dc09ef647995dd090c2c75c",
        "patch": "@@ -94,6 +94,7 @@\n     # vv Tests less than 5m vv\n     'mining_getblocktemplate_longpoll.py',\n     'feature_maxuploadtarget.py',\n+    'feature_maxuploadtarget_byteunit.py',\n     'feature_block.py',\n     'rpc_fundrawtransaction.py --legacy-wallet',\n     'rpc_fundrawtransaction.py --descriptors',"
      }
    ]
  }
]