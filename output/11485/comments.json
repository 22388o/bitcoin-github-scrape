[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/335813034",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11485#issuecomment-335813034",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11485",
    "id": 335813034,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNTgxMzAzNA==",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?u=4a9af998e1a560b3f49c3827f453e1bcbe6a5cfb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-11T13:40:36Z",
    "updated_at": "2017-10-11T13:42:43Z",
    "author_association": "MEMBER",
    "body": "As said in https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143429735, a different interface is:\r\n```json\r\n{\r\n  \"wallets\": [\r\n    { \"name\": \"foo\", \"loaded\": true },\r\n    { \"name\": \"bar\", \"loaded\": false }\r\n  ]\r\n}\r\n```\r\nWhich has the advantage of allowing to add new attributes later.\r\n\r\nAnother option is to have a different RPC. So:\r\n - `listwallets` - returns a lists of active/loaded wallets\r\n - `findwallets` - returns a list of all possible/available wallets.\r\n\r\nThis has the advantage that each RPC has it's own purpose and implementation, which happen to be very different. For those that manage (keep record of) the wallets externally `findwallets` is of no interest, only `listwallets`.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/335813034/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/335824684",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11485#issuecomment-335824684",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11485",
    "id": 335824684,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNTgyNDY4NA==",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-11T14:14:43Z",
    "updated_at": "2017-10-11T14:14:43Z",
    "author_association": "MEMBER",
    "body": "concept ACK splitting this from #11466. And concept ACK using the BDB magic bytes rather than filename",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/335824684/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/336396297",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11485#issuecomment-336396297",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11485",
    "id": 336396297,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNjM5NjI5Nw==",
    "user": {
      "login": "meshcollider",
      "id": 3211283,
      "node_id": "MDQ6VXNlcjMyMTEyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3211283?u=447cdc9e2966cbee415545c8ff452954ee1209af&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/meshcollider",
      "html_url": "https://github.com/meshcollider",
      "followers_url": "https://api.github.com/users/meshcollider/followers",
      "following_url": "https://api.github.com/users/meshcollider/following{/other_user}",
      "gists_url": "https://api.github.com/users/meshcollider/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/meshcollider/subscriptions",
      "organizations_url": "https://api.github.com/users/meshcollider/orgs",
      "repos_url": "https://api.github.com/users/meshcollider/repos",
      "events_url": "https://api.github.com/users/meshcollider/events{/privacy}",
      "received_events_url": "https://api.github.com/users/meshcollider/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-13T09:10:22Z",
    "updated_at": "2017-10-13T09:11:02Z",
    "author_association": "MEMBER",
    "body": "Removed WIP, now uses BDB magic bytes, although I haven't confirmed that this works on big endian or also potentially on old versions of BDB wallets if the magic bytes changed",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/336396297/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/336573123",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11485#issuecomment-336573123",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11485",
    "id": 336573123,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNjU3MzEyMw==",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-13T21:34:53Z",
    "updated_at": "2017-10-13T21:34:53Z",
    "author_association": "MEMBER",
    "body": "I also tested manually that files show up as wallets when bytes 12-15 match the magic bdb bytes:\r\n\r\n```\r\n\u2192 bitcoin-cli listwallets\r\n{\r\n  \"loaded\": [\r\n    \"wallet.dat\"\r\n  ],\r\n  \"available\": [\r\n    \"wallet.dat\"\r\n  ]\r\n}\r\n[ubuntu] /home/ubuntu/.bitcoin/regtest\r\n\u2192 bitcoin-cli stop\r\nBitcoin server stopping\r\n[ubuntu] /home/ubuntu/.bitcoin/regtest\r\n\u2192 for i in {1..20}; do head wallet.dat -c $i > wallet_prefix_$i; done\r\n[ubuntu] /home/ubuntu/.bitcoin/regtest\r\n\u2192 bitcoind\r\nBitcoin server starting\r\n[ubuntu] /home/ubuntu/.bitcoin/regtest\r\n\u2192 bitcoin-cli listwallets\r\n{\r\n  \"loaded\": [\r\n    \"wallet.dat\"\r\n  ],\r\n  \"available\": [\r\n    \"wallet_prefix_20\",\r\n    \"wallet_prefix_19\",\r\n    \"wallet.dat\",\r\n    \"wallet_prefix_16\",\r\n    \"wallet_prefix_17\",\r\n    \"wallet_prefix_15\",\r\n    \"wallet_prefix_18\"\r\n  ]\r\n}\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/336573123/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/336582040",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11485#issuecomment-336582040",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11485",
    "id": 336582040,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNjU4MjA0MA==",
    "user": {
      "login": "meshcollider",
      "id": 3211283,
      "node_id": "MDQ6VXNlcjMyMTEyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3211283?u=447cdc9e2966cbee415545c8ff452954ee1209af&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/meshcollider",
      "html_url": "https://github.com/meshcollider",
      "followers_url": "https://api.github.com/users/meshcollider/followers",
      "following_url": "https://api.github.com/users/meshcollider/following{/other_user}",
      "gists_url": "https://api.github.com/users/meshcollider/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/meshcollider/subscriptions",
      "organizations_url": "https://api.github.com/users/meshcollider/orgs",
      "repos_url": "https://api.github.com/users/meshcollider/repos",
      "events_url": "https://api.github.com/users/meshcollider/events{/privacy}",
      "received_events_url": "https://api.github.com/users/meshcollider/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-13T22:27:03Z",
    "updated_at": "2017-10-13T22:27:03Z",
    "author_association": "MEMBER",
    "body": "Addressed @jnewbery nits and made available list mutually exclusive to loaded list. Thanks for the review :-)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/336582040/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/336585784",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11485#issuecomment-336585784",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11485",
    "id": 336585784,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNjU4NTc4NA==",
    "user": {
      "login": "meshcollider",
      "id": 3211283,
      "node_id": "MDQ6VXNlcjMyMTEyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3211283?u=447cdc9e2966cbee415545c8ff452954ee1209af&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/meshcollider",
      "html_url": "https://github.com/meshcollider",
      "followers_url": "https://api.github.com/users/meshcollider/followers",
      "following_url": "https://api.github.com/users/meshcollider/following{/other_user}",
      "gists_url": "https://api.github.com/users/meshcollider/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/meshcollider/subscriptions",
      "organizations_url": "https://api.github.com/users/meshcollider/orgs",
      "repos_url": "https://api.github.com/users/meshcollider/repos",
      "events_url": "https://api.github.com/users/meshcollider/events{/privacy}",
      "received_events_url": "https://api.github.com/users/meshcollider/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-13T22:54:19Z",
    "updated_at": "2017-10-13T22:54:19Z",
    "author_association": "MEMBER",
    "body": "Good idea @promag, thanks :-)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/336585784/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/338455742",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11485#issuecomment-338455742",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11485",
    "id": 338455742,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzODQ1NTc0Mg==",
    "user": {
      "login": "meshcollider",
      "id": 3211283,
      "node_id": "MDQ6VXNlcjMyMTEyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3211283?u=447cdc9e2966cbee415545c8ff452954ee1209af&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/meshcollider",
      "html_url": "https://github.com/meshcollider",
      "followers_url": "https://api.github.com/users/meshcollider/followers",
      "following_url": "https://api.github.com/users/meshcollider/following{/other_user}",
      "gists_url": "https://api.github.com/users/meshcollider/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/meshcollider/subscriptions",
      "organizations_url": "https://api.github.com/users/meshcollider/orgs",
      "repos_url": "https://api.github.com/users/meshcollider/repos",
      "events_url": "https://api.github.com/users/meshcollider/events{/privacy}",
      "received_events_url": "https://api.github.com/users/meshcollider/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-22T06:41:25Z",
    "updated_at": "2017-10-22T06:41:25Z",
    "author_association": "MEMBER",
    "body": "Rebased on master to fix travis failure due to multiwallet.py being modified",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/338455742/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/338835360",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11485#issuecomment-338835360",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11485",
    "id": 338835360,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzODgzNTM2MA==",
    "user": {
      "login": "meshcollider",
      "id": 3211283,
      "node_id": "MDQ6VXNlcjMyMTEyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3211283?u=447cdc9e2966cbee415545c8ff452954ee1209af&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/meshcollider",
      "html_url": "https://github.com/meshcollider",
      "followers_url": "https://api.github.com/users/meshcollider/followers",
      "following_url": "https://api.github.com/users/meshcollider/following{/other_user}",
      "gists_url": "https://api.github.com/users/meshcollider/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/meshcollider/subscriptions",
      "organizations_url": "https://api.github.com/users/meshcollider/orgs",
      "repos_url": "https://api.github.com/users/meshcollider/repos",
      "events_url": "https://api.github.com/users/meshcollider/events{/privacy}",
      "received_events_url": "https://api.github.com/users/meshcollider/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-24T00:31:00Z",
    "updated_at": "2017-10-24T00:32:25Z",
    "author_association": "MEMBER",
    "body": "Fixed @promag's nits, thanks :)\r\n\r\nBTW it would be good to have #11466 reviewed first because this is only really useful with that IMO",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/338835360/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/345487647",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11485#issuecomment-345487647",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11485",
    "id": 345487647,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NTQ4NzY0Nw==",
    "user": {
      "login": "meshcollider",
      "id": 3211283,
      "node_id": "MDQ6VXNlcjMyMTEyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3211283?u=447cdc9e2966cbee415545c8ff452954ee1209af&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/meshcollider",
      "html_url": "https://github.com/meshcollider",
      "followers_url": "https://api.github.com/users/meshcollider/followers",
      "following_url": "https://api.github.com/users/meshcollider/following{/other_user}",
      "gists_url": "https://api.github.com/users/meshcollider/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/meshcollider/subscriptions",
      "organizations_url": "https://api.github.com/users/meshcollider/orgs",
      "repos_url": "https://api.github.com/users/meshcollider/repos",
      "events_url": "https://api.github.com/users/meshcollider/events{/privacy}",
      "received_events_url": "https://api.github.com/users/meshcollider/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-19T02:49:55Z",
    "updated_at": "2017-11-19T02:49:55Z",
    "author_association": "MEMBER",
    "body": "Rebased and updated to work with new wallets directory from #11466 ",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/345487647/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/347246631",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11485#issuecomment-347246631",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11485",
    "id": 347246631,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NzI0NjYzMQ==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-27T16:55:03Z",
    "updated_at": "2017-11-27T16:55:03Z",
    "author_association": "MEMBER",
    "body": "Needs rebase, but I assume this won't work after  #11687 anyway?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/347246631/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/347445120",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11485#issuecomment-347445120",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11485",
    "id": 347445120,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NzQ0NTEyMA==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-28T08:10:34Z",
    "updated_at": "2017-11-28T08:10:52Z",
    "author_association": "MEMBER",
    "body": "> Needs rebase, but I assume this won't work after\u00a0#11687\u00a0anyway?\r\n\r\nIt won't work if someone uses external wallets, but it should still work if they have all wallets in the wallet directory? (which is the default)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/347445120/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/347709994",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11485#issuecomment-347709994",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11485",
    "id": 347709994,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM0NzcwOTk5NA==",
    "user": {
      "login": "meshcollider",
      "id": 3211283,
      "node_id": "MDQ6VXNlcjMyMTEyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3211283?u=447cdc9e2966cbee415545c8ff452954ee1209af&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/meshcollider",
      "html_url": "https://github.com/meshcollider",
      "followers_url": "https://api.github.com/users/meshcollider/followers",
      "following_url": "https://api.github.com/users/meshcollider/following{/other_user}",
      "gists_url": "https://api.github.com/users/meshcollider/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/meshcollider/subscriptions",
      "organizations_url": "https://api.github.com/users/meshcollider/orgs",
      "repos_url": "https://api.github.com/users/meshcollider/repos",
      "events_url": "https://api.github.com/users/meshcollider/events{/privacy}",
      "received_events_url": "https://api.github.com/users/meshcollider/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-11-29T00:21:41Z",
    "updated_at": "2017-11-29T00:21:41Z",
    "author_association": "MEMBER",
    "body": "I've rebased. If https://github.com/bitcoin/bitcoin/pull/11687 defaults to creating directories for each wallet rather than individual BDB files, then this may need to be modified to list directories as well as BDB files? But yes should still work",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/347709994/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/351223146",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11485#issuecomment-351223146",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11485",
    "id": 351223146,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1MTIyMzE0Ng==",
    "user": {
      "login": "meshcollider",
      "id": 3211283,
      "node_id": "MDQ6VXNlcjMyMTEyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3211283?u=447cdc9e2966cbee415545c8ff452954ee1209af&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/meshcollider",
      "html_url": "https://github.com/meshcollider",
      "followers_url": "https://api.github.com/users/meshcollider/followers",
      "following_url": "https://api.github.com/users/meshcollider/following{/other_user}",
      "gists_url": "https://api.github.com/users/meshcollider/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/meshcollider/subscriptions",
      "organizations_url": "https://api.github.com/users/meshcollider/orgs",
      "repos_url": "https://api.github.com/users/meshcollider/repos",
      "events_url": "https://api.github.com/users/meshcollider/events{/privacy}",
      "received_events_url": "https://api.github.com/users/meshcollider/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-12-12T22:57:47Z",
    "updated_at": "2017-12-12T22:57:47Z",
    "author_association": "MEMBER",
    "body": "Update the documentation as per @TheBlueMatt suggestion",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/351223146/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/356092319",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11485#issuecomment-356092319",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11485",
    "id": 356092319,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NjA5MjMxOQ==",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-08T20:50:45Z",
    "updated_at": "2018-01-08T20:50:45Z",
    "author_association": "CONTRIBUTOR",
    "body": "Might be ready for merge. Unclear if \"Code looks good\" from @TheBlueMatt above is equivalent to a code ack.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/356092319/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/356113190",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11485#issuecomment-356113190",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11485",
    "id": 356113190,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM1NjExMzE5MA==",
    "user": {
      "login": "meshcollider",
      "id": 3211283,
      "node_id": "MDQ6VXNlcjMyMTEyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3211283?u=447cdc9e2966cbee415545c8ff452954ee1209af&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/meshcollider",
      "html_url": "https://github.com/meshcollider",
      "followers_url": "https://api.github.com/users/meshcollider/followers",
      "following_url": "https://api.github.com/users/meshcollider/following{/other_user}",
      "gists_url": "https://api.github.com/users/meshcollider/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/meshcollider/subscriptions",
      "organizations_url": "https://api.github.com/users/meshcollider/orgs",
      "repos_url": "https://api.github.com/users/meshcollider/repos",
      "events_url": "https://api.github.com/users/meshcollider/events{/privacy}",
      "received_events_url": "https://api.github.com/users/meshcollider/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-01-08T22:11:50Z",
    "updated_at": "2018-01-08T22:11:50Z",
    "author_association": "MEMBER",
    "body": "@ryanofsky sorry I haven't had time to work on your suggested changes above, I'm happy to let this wait until I've had time to address them",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/356113190/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/417648717",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11485#issuecomment-417648717",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11485",
    "id": 417648717,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxNzY0ODcxNw==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-31T12:28:27Z",
    "updated_at": "2018-08-31T12:28:27Z",
    "author_association": "MEMBER",
    "body": "Closing for now w/ up for grabs, let me know when you start working on this and it needs to be reopened.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/417648717/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/417679327",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11485#issuecomment-417679327",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11485",
    "id": 417679327,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxNzY3OTMyNw==",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-31T14:20:53Z",
    "updated_at": "2018-08-31T14:20:53Z",
    "author_association": "MEMBER",
    "body": "Shame this has gone stale. I think it's useful new functionality.\r\n\r\nI'd be very happy to re-review if someone picked this up again.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/417679327/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/423683042",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11485#issuecomment-423683042",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11485",
    "id": 423683042,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyMzY4MzA0Mg==",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?u=4a9af998e1a560b3f49c3827f453e1bcbe6a5cfb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-09-21T22:02:53Z",
    "updated_at": "2018-09-21T22:02:53Z",
    "author_association": "MEMBER",
    "body": "I'm tempted to pick this as this is also useful in the UI \u2014 must be exposed in interfaces::Nodes.\r\n\r\nAs suggested by @Sjors in https://github.com/bitcoin/bitcoin/pull/13100#pullrequestreview-135815243\r\n\r\n> For opening an existing wallet I have a light preference for just scanning the default directory for wallets and showing a list of wallets to choose from. This also prevents confusion around wallets that are files vs. wallets that are directories. Offering multiple wallets and offering the ability to put wallets anywhere in the filesystem are two different features.\r\n\r\nThoughts?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/423683042/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/834989405",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11485#issuecomment-834989405",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11485",
    "id": 834989405,
    "node_id": "MDEyOklzc3VlQ29tbWVudDgzNDk4OTQwNQ==",
    "user": {
      "login": "jarolrod",
      "id": 23396902,
      "node_id": "MDQ6VXNlcjIzMzk2OTAy",
      "avatar_url": "https://avatars.githubusercontent.com/u/23396902?u=0e7c53fc56ebd63358f57c5a450545b5f1538358&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jarolrod",
      "html_url": "https://github.com/jarolrod",
      "followers_url": "https://api.github.com/users/jarolrod/followers",
      "following_url": "https://api.github.com/users/jarolrod/following{/other_user}",
      "gists_url": "https://api.github.com/users/jarolrod/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jarolrod/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jarolrod/subscriptions",
      "organizations_url": "https://api.github.com/users/jarolrod/orgs",
      "repos_url": "https://api.github.com/users/jarolrod/repos",
      "events_url": "https://api.github.com/users/jarolrod/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jarolrod/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-08T02:41:36Z",
    "updated_at": "2021-05-08T02:41:36Z",
    "author_association": "MEMBER",
    "body": "@fanquake This shouldn't be `Up for grabs` anymore. The main idea behind this PR was implemented in #14291.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/834989405/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144658805",
    "pull_request_review_id": 69352878,
    "id": 144658805,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0NDY1ODgwNQ==",
    "diff_hunk": "@@ -2645,10 +2645,26 @@ UniValue listwallets(const JSONRPCRequest& request)\n \n         LOCK(pwallet->cs_wallet);\n \n-        obj.push_back(pwallet->GetName());\n+        loaded.push_back(pwallet->GetName());\n     }\n \n-    return obj;\n+    UniValue available(UniValue::VARR);\n+    fs::path walletdir = GetDataDir();\n+    const unsigned char bdb_magic[4] = {0x62, 0x31, 0x05, 0x00}; // Berkeley DB Btree magic bytes\n+    for (fs::directory_iterator it(walletdir); it != fs::directory_iterator(); ++it) {\n+        std::ifstream file(it->path().string(), std::ios::binary);\n+        file.seekg(12, std::ios::beg); // Magic bytes start at offset 12\n+        unsigned char fileBytes[4] = {0};\n+        file.read((char*)fileBytes, sizeof(fileBytes)); // Read 4 bytes of file to compare against magic\n+        if (is_regular_file(*it) && file.is_open() && memcmp(fileBytes, bdb_magic, sizeof(bdb_magic)) == 0) {",
    "path": "src/wallet/rpcwallet.cpp",
    "position": null,
    "original_position": 39,
    "commit_id": "3dac78f6f012196e3a4351f9a60df2fd03596f7d",
    "original_commit_id": "0e961a28a90f0149d8f885f3f74aa2c905e88e45",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Please explicitly use `fs::is_regular_file()` (this only compiles because of Argument Dependant Lookups http://en.cppreference.com/w/cpp/language/adl which makes it difficult to understand where this function is coming from).\r\n\r\n`boost::filesystem::is_regular_file()` will return true if called on a symlink to a regular file. We don't want those to show up in the available list since they can't be loaded as a wallet, so you should extend this if test with `fs::is_symlink()`.",
    "created_at": "2017-10-13T21:17:01Z",
    "updated_at": "2017-12-12T22:57:21Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11485#discussion_r144658805",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11485",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144658805"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/11485#discussion_r144658805"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11485"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144658805/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2659,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144670799",
    "pull_request_review_id": 69366512,
    "id": 144670799,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0NDY3MDc5OQ==",
    "diff_hunk": "@@ -2645,10 +2645,38 @@ UniValue listwallets(const JSONRPCRequest& request)\n \n         LOCK(pwallet->cs_wallet);\n \n-        obj.push_back(pwallet->GetName());\n+        loaded.push_back(pwallet->GetName());\n     }",
    "path": "src/wallet/rpcwallet.cpp",
    "position": null,
    "original_position": 28,
    "commit_id": "3dac78f6f012196e3a4351f9a60df2fd03596f7d",
    "original_commit_id": "8f2df4ae01fd0908045082ce2a84a797309a56b4",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Suggestion to remove loop below:\r\n```cpp\r\nstd::set<std::string> loaded_set;\r\n...\r\n    loaded.push_back(pwallet->GetName());\r\n    loaded_set.insert(pwallet->GetName())\r\n}\r\n...\r\nif (loaded_set.count(it->path().filename().string()) == 0) {\r\n    available.push_back(it->path().filename().string());\r\n}\r\n```",
    "created_at": "2017-10-13T22:40:40Z",
    "updated_at": "2017-12-12T22:57:21Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11485#discussion_r144670799",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11485",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144670799"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/11485#discussion_r144670799"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11485"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144670799/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2774,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/146119173",
    "pull_request_review_id": 71020843,
    "id": 146119173,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0NjExOTE3Mw==",
    "diff_hunk": "@@ -2645,10 +2646,33 @@ UniValue listwallets(const JSONRPCRequest& request)\n \n         LOCK(pwallet->cs_wallet);\n \n-        obj.push_back(pwallet->GetName());\n+        loaded.push_back(pwallet->GetName());\n+        loaded_set.insert(pwallet->GetName());\n     }\n \n-    return obj;\n+    UniValue available(UniValue::VARR);\n+    fs::path walletdir = GetDataDir();\n+    const unsigned char bdb_magic[4] = {0x62, 0x31, 0x05, 0x00}; // Berkeley DB Btree magic bytes\n+\n+    for (fs::directory_iterator it(walletdir); it != fs::directory_iterator(); ++it) {\n+        std::ifstream file(it->path().string(), std::ios::binary);\n+        file.seekg(12, std::ios::beg); // Magic bytes start at offset 12\n+        unsigned char fileBytes[4] = {0};\n+\n+        file.read((char*)fileBytes, sizeof(fileBytes)); // Read 4 bytes of file to compare against magic\n+\n+        if (fs::is_regular_file(*it) && !fs::is_symlink(*it) && file.is_open() && memcmp(fileBytes, bdb_magic, sizeof(bdb_magic)) == 0) {",
    "path": "src/wallet/rpcwallet.cpp",
    "position": null,
    "original_position": 44,
    "commit_id": "3dac78f6f012196e3a4351f9a60df2fd03596f7d",
    "original_commit_id": "95e108b17fdb94e7d45b9585492aed83682915c8",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Some of these conditions can be moved before seekg (just `continue`. Only the compare is needed.\r\n\r\nCould use 64 bit int instead?",
    "created_at": "2017-10-22T00:59:14Z",
    "updated_at": "2017-12-12T22:57:21Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11485#discussion_r146119173",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11485",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/146119173"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/11485#discussion_r146119173"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11485"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/146119173/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2664,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/146120578",
    "pull_request_review_id": 71022212,
    "id": 146120578,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0NjEyMDU3OA==",
    "diff_hunk": "@@ -2645,10 +2646,33 @@ UniValue listwallets(const JSONRPCRequest& request)\n \n         LOCK(pwallet->cs_wallet);\n \n-        obj.push_back(pwallet->GetName());\n+        loaded.push_back(pwallet->GetName());\n+        loaded_set.insert(pwallet->GetName());\n     }\n \n-    return obj;\n+    UniValue available(UniValue::VARR);\n+    fs::path walletdir = GetDataDir();\n+    const unsigned char bdb_magic[4] = {0x62, 0x31, 0x05, 0x00}; // Berkeley DB Btree magic bytes\n+\n+    for (fs::directory_iterator it(walletdir); it != fs::directory_iterator(); ++it) {\n+        std::ifstream file(it->path().string(), std::ios::binary);\n+        file.seekg(12, std::ios::beg); // Magic bytes start at offset 12\n+        unsigned char fileBytes[4] = {0};\n+\n+        file.read((char*)fileBytes, sizeof(fileBytes)); // Read 4 bytes of file to compare against magic\n+\n+        if (fs::is_regular_file(*it) && !fs::is_symlink(*it) && file.is_open() && memcmp(fileBytes, bdb_magic, sizeof(bdb_magic)) == 0) {",
    "path": "src/wallet/rpcwallet.cpp",
    "position": null,
    "original_position": 44,
    "commit_id": "3dac78f6f012196e3a4351f9a60df2fd03596f7d",
    "original_commit_id": "95e108b17fdb94e7d45b9585492aed83682915c8",
    "user": {
      "login": "meshcollider",
      "id": 3211283,
      "node_id": "MDQ6VXNlcjMyMTEyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3211283?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/meshcollider",
      "html_url": "https://github.com/meshcollider",
      "followers_url": "https://api.github.com/users/meshcollider/followers",
      "following_url": "https://api.github.com/users/meshcollider/following{/other_user}",
      "gists_url": "https://api.github.com/users/meshcollider/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/meshcollider/subscriptions",
      "organizations_url": "https://api.github.com/users/meshcollider/orgs",
      "repos_url": "https://api.github.com/users/meshcollider/repos",
      "events_url": "https://api.github.com/users/meshcollider/events{/privacy}",
      "received_events_url": "https://api.github.com/users/meshcollider/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Fixed the conditional, but IMO the char array is clearer and perhaps safer than using an int :)",
    "created_at": "2017-10-22T02:43:02Z",
    "updated_at": "2017-12-12T22:57:21Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11485#discussion_r146120578",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11485",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/146120578"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/11485#discussion_r146120578"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11485"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/146120578/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2664,
    "side": "RIGHT",
    "in_reply_to_id": 146119173
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/146391990",
    "pull_request_review_id": 71327648,
    "id": 146391990,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0NjM5MTk5MA==",
    "diff_hunk": "@@ -2645,10 +2646,39 @@ UniValue listwallets(const JSONRPCRequest& request)\n \n         LOCK(pwallet->cs_wallet);\n \n-        obj.push_back(pwallet->GetName());\n+        loaded.push_back(pwallet->GetName());\n+        loaded_set.insert(pwallet->GetName());\n     }\n \n-    return obj;\n+    UniValue available(UniValue::VARR);\n+    fs::path walletdir = GetDataDir();\n+    const unsigned char bdb_magic[4] = {0x62, 0x31, 0x05, 0x00}; // Berkeley DB Btree magic bytes\n+\n+    for (fs::directory_iterator it(walletdir); it != fs::directory_iterator(); ++it) {\n+\n+        if(!fs::is_regular_file(*it) || fs::is_symlink(*it)) continue;\n+\n+        std::ifstream file(it->path().string(), std::ios::binary);\n+        if(!file.is_open()) continue;\n+\n+        file.seekg(12, std::ios::beg); // Magic bytes start at offset 12\n+        unsigned char fileBytes[4] = {0};\n+        file.read((char*)fileBytes, sizeof(fileBytes)); // Read 4 bytes of file to compare against magic\n+\n+        if (memcmp(fileBytes, bdb_magic, sizeof(bdb_magic)) == 0) {\n+            // check if this wallet is already loaded\n+            if (loaded_set.count(it->path().filename().string()) == 0) {\n+                available.push_back(it->path().filename().string());\n+            }\n+        }\n+\n+        file.close();",
    "path": "src/wallet/rpcwallet.cpp",
    "position": null,
    "original_position": 55,
    "commit_id": "3dac78f6f012196e3a4351f9a60df2fd03596f7d",
    "original_commit_id": "da994d87ad39690547ac6afbf96c1395b334050c",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Remove, see https://stackoverflow.com/a/748059.",
    "created_at": "2017-10-23T20:58:24Z",
    "updated_at": "2017-12-12T22:57:21Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11485#discussion_r146391990",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11485",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/146391990"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/11485#discussion_r146391990"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11485"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/146391990/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2675,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/146393023",
    "pull_request_review_id": 71327648,
    "id": 146393023,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0NjM5MzAyMw==",
    "diff_hunk": "@@ -2645,10 +2646,39 @@ UniValue listwallets(const JSONRPCRequest& request)\n \n         LOCK(pwallet->cs_wallet);\n \n-        obj.push_back(pwallet->GetName());\n+        loaded.push_back(pwallet->GetName());\n+        loaded_set.insert(pwallet->GetName());\n     }\n \n-    return obj;\n+    UniValue available(UniValue::VARR);\n+    fs::path walletdir = GetDataDir();\n+    const unsigned char bdb_magic[4] = {0x62, 0x31, 0x05, 0x00}; // Berkeley DB Btree magic bytes\n+\n+    for (fs::directory_iterator it(walletdir); it != fs::directory_iterator(); ++it) {\n+\n+        if(!fs::is_regular_file(*it) || fs::is_symlink(*it)) continue;\n+\n+        std::ifstream file(it->path().string(), std::ios::binary);\n+        if(!file.is_open()) continue;\n+\n+        file.seekg(12, std::ios::beg); // Magic bytes start at offset 12\n+        unsigned char fileBytes[4] = {0};\n+        file.read((char*)fileBytes, sizeof(fileBytes)); // Read 4 bytes of file to compare against magic\n+\n+        if (memcmp(fileBytes, bdb_magic, sizeof(bdb_magic)) == 0) {",
    "path": "src/wallet/rpcwallet.cpp",
    "position": null,
    "original_position": 48,
    "commit_id": "3dac78f6f012196e3a4351f9a60df2fd03596f7d",
    "original_commit_id": "da994d87ad39690547ac6afbf96c1395b334050c",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Alternative, avoid nesting:\r\n```cpp\r\nif (memcmp(...) != 0) continue;\r\n\r\nif (loaded_set.count(filename) > 0) continue;\r\n\r\navailable.push_back(filename);\r\n```\r\nNote that close is automatically called, see comment below.",
    "created_at": "2017-10-23T21:02:20Z",
    "updated_at": "2017-12-12T22:57:21Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11485#discussion_r146393023",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11485",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/146393023"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/11485#discussion_r146393023"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11485"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/146393023/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2668,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/146393393",
    "pull_request_review_id": 71327648,
    "id": 146393393,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0NjM5MzM5Mw==",
    "diff_hunk": "@@ -2645,10 +2646,39 @@ UniValue listwallets(const JSONRPCRequest& request)\n \n         LOCK(pwallet->cs_wallet);\n \n-        obj.push_back(pwallet->GetName());\n+        loaded.push_back(pwallet->GetName());\n+        loaded_set.insert(pwallet->GetName());\n     }\n \n-    return obj;\n+    UniValue available(UniValue::VARR);\n+    fs::path walletdir = GetDataDir();\n+    const unsigned char bdb_magic[4] = {0x62, 0x31, 0x05, 0x00}; // Berkeley DB Btree magic bytes\n+\n+    for (fs::directory_iterator it(walletdir); it != fs::directory_iterator(); ++it) {\n+\n+        if(!fs::is_regular_file(*it) || fs::is_symlink(*it)) continue;\n+\n+        std::ifstream file(it->path().string(), std::ios::binary);\n+        if(!file.is_open()) continue;\n+\n+        file.seekg(12, std::ios::beg); // Magic bytes start at offset 12\n+        unsigned char fileBytes[4] = {0};\n+        file.read((char*)fileBytes, sizeof(fileBytes)); // Read 4 bytes of file to compare against magic\n+\n+        if (memcmp(fileBytes, bdb_magic, sizeof(bdb_magic)) == 0) {",
    "path": "src/wallet/rpcwallet.cpp",
    "position": null,
    "original_position": 48,
    "commit_id": "3dac78f6f012196e3a4351f9a60df2fd03596f7d",
    "original_commit_id": "da994d87ad39690547ac6afbf96c1395b334050c",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Nit, add:\r\n```cpp\r\nconst std::string filename = it->path().filename().string();\r\n```",
    "created_at": "2017-10-23T21:03:49Z",
    "updated_at": "2017-12-12T22:57:21Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11485#discussion_r146393393",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11485",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/146393393"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/11485#discussion_r146393393"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11485"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/146393393/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2668,
    "side": "RIGHT",
    "in_reply_to_id": 146393023
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/146393611",
    "pull_request_review_id": 71327648,
    "id": 146393611,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0NjM5MzYxMQ==",
    "diff_hunk": "@@ -2645,10 +2646,39 @@ UniValue listwallets(const JSONRPCRequest& request)\n \n         LOCK(pwallet->cs_wallet);\n \n-        obj.push_back(pwallet->GetName());\n+        loaded.push_back(pwallet->GetName());\n+        loaded_set.insert(pwallet->GetName());\n     }\n \n-    return obj;\n+    UniValue available(UniValue::VARR);\n+    fs::path walletdir = GetDataDir();\n+    const unsigned char bdb_magic[4] = {0x62, 0x31, 0x05, 0x00}; // Berkeley DB Btree magic bytes\n+\n+    for (fs::directory_iterator it(walletdir); it != fs::directory_iterator(); ++it) {\n+\n+        if(!fs::is_regular_file(*it) || fs::is_symlink(*it)) continue;\n+\n+        std::ifstream file(it->path().string(), std::ios::binary);\n+        if(!file.is_open()) continue;\n+\n+        file.seekg(12, std::ios::beg); // Magic bytes start at offset 12\n+        unsigned char fileBytes[4] = {0};",
    "path": "src/wallet/rpcwallet.cpp",
    "position": null,
    "original_position": 45,
    "commit_id": "3dac78f6f012196e3a4351f9a60df2fd03596f7d",
    "original_commit_id": "da994d87ad39690547ac6afbf96c1395b334050c",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Nit: `file_bytes`.",
    "created_at": "2017-10-23T21:04:47Z",
    "updated_at": "2017-12-12T22:57:21Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11485#discussion_r146393611",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11485",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/146393611"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/11485#discussion_r146393611"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11485"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/146393611/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2665,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/146393661",
    "pull_request_review_id": 71327648,
    "id": 146393661,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0NjM5MzY2MQ==",
    "diff_hunk": "@@ -2645,10 +2646,39 @@ UniValue listwallets(const JSONRPCRequest& request)\n \n         LOCK(pwallet->cs_wallet);\n \n-        obj.push_back(pwallet->GetName());\n+        loaded.push_back(pwallet->GetName());\n+        loaded_set.insert(pwallet->GetName());\n     }\n \n-    return obj;\n+    UniValue available(UniValue::VARR);\n+    fs::path walletdir = GetDataDir();\n+    const unsigned char bdb_magic[4] = {0x62, 0x31, 0x05, 0x00}; // Berkeley DB Btree magic bytes\n+\n+    for (fs::directory_iterator it(walletdir); it != fs::directory_iterator(); ++it) {\n+",
    "path": "src/wallet/rpcwallet.cpp",
    "position": null,
    "original_position": 38,
    "commit_id": "3dac78f6f012196e3a4351f9a60df2fd03596f7d",
    "original_commit_id": "da994d87ad39690547ac6afbf96c1395b334050c",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Nit, remove empty line.",
    "created_at": "2017-10-23T21:04:57Z",
    "updated_at": "2017-12-12T22:57:21Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11485#discussion_r146393661",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11485",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/146393661"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/11485#discussion_r146393661"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11485"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/146393661/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2658,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/146394843",
    "pull_request_review_id": 71327648,
    "id": 146394843,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0NjM5NDg0Mw==",
    "diff_hunk": "@@ -19,7 +19,7 @@ def set_test_params(self):\n         self.extra_args = [['-wallet=w1', '-wallet=w2', '-wallet=w3']]\n \n     def run_test(self):\n-        assert_equal(set(self.nodes[0].listwallets()), {\"w1\", \"w2\", \"w3\"})\n+        assert_equal(set(self.nodes[0].listwallets()['loaded']), {\"w1\", \"w2\", \"w3\"})\n ",
    "path": "test/functional/multiwallet.py",
    "position": null,
    "original_position": 6,
    "commit_id": "3dac78f6f012196e3a4351f9a60df2fd03596f7d",
    "original_commit_id": "da994d87ad39690547ac6afbf96c1395b334050c",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Assert available is empty array?",
    "created_at": "2017-10-23T21:10:03Z",
    "updated_at": "2017-12-12T22:57:21Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11485#discussion_r146394843",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11485",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/146394843"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/11485#discussion_r146394843"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11485"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/146394843/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 24,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/153889026",
    "pull_request_review_id": 79966380,
    "id": 153889026,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1Mzg4OTAyNg==",
    "diff_hunk": "@@ -63,6 +64,10 @@ def run_test(self):\n \n         self.start_node(0, self.extra_args[0])\n \n+        # ensure listwallets only names BDB files, not symlinks, other files or directories",
    "path": "test/functional/multiwallet.py",
    "position": 32,
    "original_position": 32,
    "commit_id": "3dac78f6f012196e3a4351f9a60df2fd03596f7d",
    "original_commit_id": "946b2ceb1a8c6702fc3412b63f42439bedbafe0c",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I like this new test, but I think it can be improved in a couple of ways:\r\n\r\n- test that a non-empty file without the magic bytes is excluded\r\n- there's an implicit assumption that the symlink and folder created earlier in the test are still around. You could explicitly assert that. If the earlier parts of this test get change, eg the file names are changed, then this check will continue to succeed but won't be testing anything.\r\n\r\nWhat do you think about:\r\n\r\n```\r\n--- a/test/functional/multiwallet.py\r\n+++ b/test/functional/multiwallet.py\r\n@@ -65,8 +65,20 @@ class MultiWalletTest(BitcoinTestFramework):\r\n         self.start_node(0, self.extra_args[0])\r\n \r\n         # ensure listwallets only names BDB files, not symlinks, other files or directories\r\n-        open(os.path.join(wallet_dir, 'w01.dat'), 'a').close()\r\n-        assert_equal(set(self.nodes[0].listwallets()['available']), {\"w22\"})\r\n+        with open(os.path.join(wallet_dir, 'w01.dat'), 'a') as wallet_file:\r\n+            # Create a file containing a long string\r\n+            print(\"a\" * 2000, file=wallet_file)\r\n+\r\n+        available_wallets = self.nodes[0].listwallets()['available']\r\n+\r\n+        assert os.path.islink(os.path.join(wallet_dir, 'w12'))\r\n+        assert 'w12' not in available_wallets\r\n+\r\n+        assert os.path.isdir(os.path.join(wallet_dir, 'w11'))\r\n+        assert 'w11' not in available_wallets\r\n+\r\n+        assert os.path.isfile(os.path.join(wallet_dir, 'w01.dat'))\r\n+        assert 'w01.dat' not in available_wallets\r\n```",
    "created_at": "2017-11-29T19:21:54Z",
    "updated_at": "2017-12-12T22:57:21Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11485#discussion_r153889026",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11485",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/153889026"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/11485#discussion_r153889026"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11485"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/153889026/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 67,
    "original_line": 67,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/154728492",
    "pull_request_review_id": 80934965,
    "id": 154728492,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1NDcyODQ5Mg==",
    "diff_hunk": "@@ -2749,16 +2749,17 @@ UniValue listwallets(const JSONRPCRequest& request)\n             \"Returns a list of currently loaded wallets.\\n\"\n             \"For full information on the wallet, use \\\"getwalletinfo\\\"\\n\"\n             \"\\nResult:\\n\"\n-            \"[                         (json array of strings)\\n\"\n-            \"  \\\"walletname\\\"            (string) the wallet name\\n\"\n-            \"   ...\\n\"\n-            \"]\\n\"\n+            \"{\\n\"",
    "path": "src/wallet/rpcwallet.cpp",
    "position": 13,
    "original_position": 8,
    "commit_id": "3dac78f6f012196e3a4351f9a60df2fd03596f7d",
    "original_commit_id": "946b2ceb1a8c6702fc3412b63f42439bedbafe0c",
    "user": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Need to update the docs above. Maybe also note that false-positives may include files from exceedingly old (pre-0.8, I believe) nodes as well as duplicates of wallets which cannot be opened simultaneously.",
    "created_at": "2017-12-04T18:09:58Z",
    "updated_at": "2017-12-12T22:57:21Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11485#discussion_r154728492",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11485",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/154728492"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/11485#discussion_r154728492"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11485"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/154728492/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2752,
    "original_line": 2752,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/157507988",
    "pull_request_review_id": 84160742,
    "id": 157507988,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1NzUwNzk4OA==",
    "diff_hunk": "@@ -91,6 +91,10 @@ Low-level RPC changes\n - The wallet RPC `getreceivedbyaddress` will return an error if called with an address not in the wallet.\n \n \n+- `listwallets` now returns two arrays of wallet names, one listing the `loaded` wallets",
    "path": "doc/release-notes.md",
    "position": 4,
    "original_position": 4,
    "commit_id": "3dac78f6f012196e3a4351f9a60df2fd03596f7d",
    "original_commit_id": "87e39239070ab9a4ce4bf61773a44f673859937d",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I don't think it's a big deal to break backwards compatibility here, but I also don't see any benefit in doing so. I'd think that a better approach to overloading the `listwallets` function would be to add a new `listwalletdir` function that would return a list of wallet files inside `-walletdir`. Advantages to this approach:\r\n\r\n1) Backwards compatible\r\n2) Better performance for listwallets. It could continue to just return the loaded wallets from memory instead of having now having to do disk io.\r\n3) More descriptive function name. `listwalletdir` naming is consistent with recently added `walletdir` parameter, and tells you what the function actually does.",
    "created_at": "2017-12-18T15:05:13Z",
    "updated_at": "2017-12-18T15:27:07Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11485#discussion_r157507988",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11485",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/157507988"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/11485#discussion_r157507988"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11485"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/157507988/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 94,
    "original_line": 94,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/157508153",
    "pull_request_review_id": 84160742,
    "id": 157508153,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1NzUwODE1Mw==",
    "diff_hunk": "@@ -2749,16 +2749,17 @@ UniValue listwallets(const JSONRPCRequest& request)\n             \"Returns a list of currently loaded wallets.\\n\"\n             \"For full information on the wallet, use \\\"getwalletinfo\\\"\\n\"\n             \"\\nResult:\\n\"\n-            \"[                         (json array of strings)\\n\"\n-            \"  \\\"walletname\\\"            (string) the wallet name\\n\"\n-            \"   ...\\n\"\n-            \"]\\n\"\n+            \"{\\n\"\n+            \"  \\\"loaded\\\":     [ \\\"walletname\\\" ... ] (json array of strings) Names of loaded wallets\\n\"\n+            \"  \\\"available\\\":  [ \\\"walletname\\\" ... ] (json array of strings) Names of BDB files in wallet directory (may not always actually be wallets)\\n\"",
    "path": "src/wallet/rpcwallet.cpp",
    "position": null,
    "original_position": 10,
    "commit_id": "3dac78f6f012196e3a4351f9a60df2fd03596f7d",
    "original_commit_id": "946b2ceb1a8c6702fc3412b63f42439bedbafe0c",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Would suggest returning an array of objects rather than an array of strings to future proof this. This would allow including other information like sizes, last modification times, whether databases are flushed, or locked by another process. (Latter two would be meaningful after #11687 when wallet files can be opened in their own berkelydb environments instead of all using the same shared environment).",
    "created_at": "2017-12-18T15:05:44Z",
    "updated_at": "2017-12-18T15:27:07Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11485#discussion_r157508153",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11485",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/157508153"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/11485#discussion_r157508153"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11485"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/157508153/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2754,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/157514148",
    "pull_request_review_id": 84160742,
    "id": 157514148,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1NzUxNDE0OA==",
    "diff_hunk": "@@ -2768,10 +2769,37 @@ UniValue listwallets(const JSONRPCRequest& request)\n \n         LOCK(pwallet->cs_wallet);\n \n-        obj.push_back(pwallet->GetName());\n+        loaded.push_back(pwallet->GetName());\n+        loaded_set.insert(pwallet->GetName());\n     }\n \n-    return obj;\n+    UniValue available(UniValue::VARR);\n+    fs::path walletdir = GetWalletDir();\n+    const unsigned char bdb_magic[4] = {0x62, 0x31, 0x05, 0x00}; // Berkeley DB Btree magic bytes\n+\n+    for (fs::directory_iterator it(walletdir); it != fs::directory_iterator(); ++it) {\n+        if (!fs::is_regular_file(*it) || fs::is_symlink(*it)) continue;\n+\n+        std::ifstream file(it->path().string(), std::ios::binary);",
    "path": "src/wallet/rpcwallet.cpp",
    "position": 46,
    "original_position": 40,
    "commit_id": "3dac78f6f012196e3a4351f9a60df2fd03596f7d",
    "original_commit_id": "946b2ceb1a8c6702fc3412b63f42439bedbafe0c",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Note: to be compatible with #11687, you would drop the `continue` above and change this line to something like:\r\n\r\n```c++\r\nstd::ifstream file(fs::is_regular_file(*it) ? it->path() : (it->path() / \"wallet.dat\")).string(), std::ios::binary);\r\n```",
    "created_at": "2017-12-18T15:25:26Z",
    "updated_at": "2017-12-18T15:27:07Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11485#discussion_r157514148",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11485",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/157514148"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/11485#discussion_r157514148"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11485"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/157514148/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2784,
    "original_line": 2783,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/157616468",
    "pull_request_review_id": 84288644,
    "id": 157616468,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE1NzYxNjQ2OA==",
    "diff_hunk": "@@ -2749,16 +2749,17 @@ UniValue listwallets(const JSONRPCRequest& request)\n             \"Returns a list of currently loaded wallets.\\n\"\n             \"For full information on the wallet, use \\\"getwalletinfo\\\"\\n\"\n             \"\\nResult:\\n\"\n-            \"[                         (json array of strings)\\n\"\n-            \"  \\\"walletname\\\"            (string) the wallet name\\n\"\n-            \"   ...\\n\"\n-            \"]\\n\"\n+            \"{\\n\"\n+            \"  \\\"loaded\\\":     [ \\\"walletname\\\" ... ] (json array of strings) Names of loaded wallets\\n\"\n+            \"  \\\"available\\\":  [ \\\"walletname\\\" ... ] (json array of strings) Names of BDB files in wallet directory (may not always actually be wallets)\\n\"",
    "path": "src/wallet/rpcwallet.cpp",
    "position": null,
    "original_position": 10,
    "commit_id": "3dac78f6f012196e3a4351f9a60df2fd03596f7d",
    "original_commit_id": "946b2ceb1a8c6702fc3412b63f42439bedbafe0c",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Partially agree with @ryanofsky. Still think one array is enough, see https://github.com/bitcoin/bitcoin/pull/11485#issuecomment-335813034. And `listwallets` could have an optional parameter to filter available, loaded or both.",
    "created_at": "2017-12-18T22:19:16Z",
    "updated_at": "2017-12-18T22:19:27Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11485#discussion_r157616468",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11485",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/157616468"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/11485#discussion_r157616468"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11485"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/157616468/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2754,
    "side": "RIGHT",
    "in_reply_to_id": 157508153
  }
]