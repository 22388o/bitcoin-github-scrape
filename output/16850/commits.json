[
  {
    "sha": "07a8f65031c448971ee665f3db0fbf883a34465b",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowN2E4ZjY1MDMxYzQ0ODk3MWVlNjY1ZjNkYjBmYmY4ODNhMzQ0NjVi",
    "commit": {
      "author": {
        "name": "darosior",
        "email": "darosior@protonmail.com",
        "date": "2019-09-10T20:07:36Z"
      },
      "committer": {
        "name": "darosior",
        "email": "darosior@protonmail.com",
        "date": "2019-09-11T15:25:53Z"
      },
      "message": "tests: add a test for the 'servicesnames' RPC field\n\nIn getpeerinfo and getnetworkinfo",
      "tree": {
        "sha": "6b30b59b731929679332f9582f4cdd9b3bc9f635",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6b30b59b731929679332f9582f4cdd9b3bc9f635"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/07a8f65031c448971ee665f3db0fbf883a34465b",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEEWQtykmla/6W2csuy4T/BRc0/QwQFAl15EgEACgkQ4T/BRc0/\nQwRSWAv7BOSNwKFKifX/P0uXoDxCwNu8kRPVRLiM1wI/poBfxas660osY110gyqV\n/fhZ22q1o1U6qeY40+Vo4n3ThfFyi7rq4q2fFnmrX8l1Yk8KgWKz+57quzJjcB7+\nuAMzVxg7qXoQ6H7hRGDMaCuFkaGQEu6Qlxd3Xm5J1I+ba/2M3iSvzEPeMvcBJ5ql\no2fq/vYXS0Q71bIdvKKOAdOaOAZqbRJfjfbQ9QwR7hKI/YVi+eOhNYK2CQU7i/30\nk64if5ro9EL1dyz3d2B6wAWQGxOlkoZEwSJEupnGUCMTnl4T8a6kitccjiAZcNO2\n/YbqsKYAE4Jx5EXvJNtDx/QM23V6BNKaD8WjJ9G+HLqCKJQkVbiRpUkco1sagwtg\nkgfXCXkuLyvjym4npB0IpRz5ozHRgHresifrqWO7RjZArZI9AwilaNS1MbpyD5c7\nR1hPUU+m/aUpaZobYs7TEE7zwRS4o/BSHqBjqSzV00YnWjJdAWBEa/8di6rAAy5L\nD9U86lL5\n=H2JE\n-----END PGP SIGNATURE-----",
        "payload": "tree 6b30b59b731929679332f9582f4cdd9b3bc9f635\nparent 1985c4efda56b48f6f9c04f39d69268ee8f0b40a\nauthor darosior <darosior@protonmail.com> 1568146056 +0200\ncommitter darosior <darosior@protonmail.com> 1568215553 +0200\n\ntests: add a test for the 'servicesnames' RPC field\n\nIn getpeerinfo and getnetworkinfo\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/07a8f65031c448971ee665f3db0fbf883a34465b",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/07a8f65031c448971ee665f3db0fbf883a34465b",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/07a8f65031c448971ee665f3db0fbf883a34465b/comments",
    "author": {
      "login": "darosior",
      "id": 22457751,
      "node_id": "MDQ6VXNlcjIyNDU3NzUx",
      "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/darosior",
      "html_url": "https://github.com/darosior",
      "followers_url": "https://api.github.com/users/darosior/followers",
      "following_url": "https://api.github.com/users/darosior/following{/other_user}",
      "gists_url": "https://api.github.com/users/darosior/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/darosior/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
      "organizations_url": "https://api.github.com/users/darosior/orgs",
      "repos_url": "https://api.github.com/users/darosior/repos",
      "events_url": "https://api.github.com/users/darosior/events{/privacy}",
      "received_events_url": "https://api.github.com/users/darosior/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "darosior",
      "id": 22457751,
      "node_id": "MDQ6VXNlcjIyNDU3NzUx",
      "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/darosior",
      "html_url": "https://github.com/darosior",
      "followers_url": "https://api.github.com/users/darosior/followers",
      "following_url": "https://api.github.com/users/darosior/following{/other_user}",
      "gists_url": "https://api.github.com/users/darosior/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/darosior/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
      "organizations_url": "https://api.github.com/users/darosior/orgs",
      "repos_url": "https://api.github.com/users/darosior/repos",
      "events_url": "https://api.github.com/users/darosior/events{/privacy}",
      "received_events_url": "https://api.github.com/users/darosior/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "1985c4efda56b48f6f9c04f39d69268ee8f0b40a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1985c4efda56b48f6f9c04f39d69268ee8f0b40a",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/1985c4efda56b48f6f9c04f39d69268ee8f0b40a"
      }
    ],
    "stats": {
      "total": 39,
      "additions": 36,
      "deletions": 3
    },
    "files": [
      {
        "sha": "217c015bbae6fa4dd358891ece642a3b469fbc0f",
        "filename": "test/functional/rpc_net.py",
        "status": "modified",
        "additions": 34,
        "deletions": 1,
        "changes": 35,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/07a8f65031c448971ee665f3db0fbf883a34465b/test/functional/rpc_net.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/07a8f65031c448971ee665f3db0fbf883a34465b/test/functional/rpc_net.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/rpc_net.py?ref=07a8f65031c448971ee665f3db0fbf883a34465b",
        "patch": "@@ -20,7 +20,32 @@\n     wait_until,\n )\n from test_framework.mininode import P2PInterface\n-from test_framework.messages import CAddress, msg_addr, NODE_NETWORK, NODE_WITNESS\n+from test_framework.messages import (\n+    CAddress,\n+    msg_addr,\n+    NODE_NETWORK,\n+    NODE_WITNESS,\n+    NODE_GETUTXO,NODE_BLOOM,\n+    NODE_NETWORK_LIMITED,\n+)\n+\n+def assert_net_servicesnames(servicesflag, servicenames):\n+    \"\"\"Utility that checks if all flags are correctly decoded in\n+    `getpeerinfo` and `getnetworkinfo`.\n+\n+    :param servicesflag: The services as an integer.\n+    :param servicesnames: The list of decoded services names, as strings.\n+    \"\"\"\n+    if servicesflag & NODE_NETWORK:\n+        assert \"NETWORK\" in servicenames\n+    if servicesflag & NODE_GETUTXO:\n+        assert \"GETUTXO\" in servicenames\n+    if servicesflag & NODE_BLOOM:\n+        assert \"BLOOM\" in servicenames\n+    if servicesflag & NODE_WITNESS:\n+        assert \"WITNESS\" in servicenames\n+    if servicesflag & NODE_NETWORK_LIMITED:\n+        assert \"NETWORK_LIMITED\" in servicenames\n \n class NetTest(BitcoinTestFramework):\n     def set_test_params(self):\n@@ -84,6 +109,11 @@ def _test_getnetworkinginfo(self):\n         assert_equal(self.nodes[0].getnetworkinfo()['networkactive'], True)\n         assert_equal(self.nodes[0].getnetworkinfo()['connections'], 2)\n \n+        # check the `servicesnames` field\n+        network_info = [node.getnetworkinfo() for node in self.nodes]\n+        for info in network_info:\n+            assert_net_servicesnames(int(info[\"localservices\"]), info[\"localservicesnames\"])\n+\n     def _test_getaddednodeinfo(self):\n         assert_equal(self.nodes[0].getaddednodeinfo(), [])\n         # add a node (node2) to node0\n@@ -104,6 +134,9 @@ def _test_getpeerinfo(self):\n         assert_equal(peer_info[1][0]['addrbind'], peer_info[0][0]['addr'])\n         assert_equal(peer_info[0][0]['minfeefilter'], Decimal(\"0.00000500\"))\n         assert_equal(peer_info[1][0]['minfeefilter'], Decimal(\"0.00001000\"))\n+        # check the `servicesnames` field\n+        for info in peer_info:\n+            assert_net_servicesnames(int(info[0][\"services\"]), info[0][\"servicesnames\"])\n \n     def _test_getnodeaddresses(self):\n         self.nodes[0].add_p2p_connection(P2PInterface())"
      },
      {
        "sha": "3cb5f56bee5b16fa646d67721e0fee3899f75ebe",
        "filename": "test/functional/test_framework/messages.py",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/07a8f65031c448971ee665f3db0fbf883a34465b/test/functional/test_framework/messages.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/07a8f65031c448971ee665f3db0fbf883a34465b/test/functional/test_framework/messages.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/test_framework/messages.py?ref=07a8f65031c448971ee665f3db0fbf883a34465b",
        "patch": "@@ -43,8 +43,8 @@\n BIP125_SEQUENCE_NUMBER = 0xfffffffd  # Sequence number that is BIP 125 opt-in and BIP 68-opt-out\n \n NODE_NETWORK = (1 << 0)\n-# NODE_GETUTXO = (1 << 1)\n-# NODE_BLOOM = (1 << 2)\n+NODE_GETUTXO = (1 << 1)\n+NODE_BLOOM = (1 << 2)\n NODE_WITNESS = (1 << 3)\n NODE_NETWORK_LIMITED = (1 << 10)\n "
      }
    ]
  },
  {
    "sha": "1d524c62ea679aa89770f9fdcd72b84f013639cb",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoxZDUyNGM2MmVhNjc5YWE4OTc3MGY5ZmRjZDcyYjg0ZjAxMzYzOWNi",
    "commit": {
      "author": {
        "name": "darosior",
        "email": "darosior@protonmail.com",
        "date": "2019-09-10T20:08:47Z"
      },
      "committer": {
        "name": "darosior",
        "email": "darosior@protonmail.com",
        "date": "2019-09-11T15:26:29Z"
      },
      "message": "tests: rename 'test_getnetworkinginfo' in 'test_getnetworkinfo'\n\nSince it's the name of the RPC call",
      "tree": {
        "sha": "3111b2871552e4798d9e987eb70d504805d5e977",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3111b2871552e4798d9e987eb70d504805d5e977"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1d524c62ea679aa89770f9fdcd72b84f013639cb",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEEWQtykmla/6W2csuy4T/BRc0/QwQFAl15EiUACgkQ4T/BRc0/\nQwQyMwv/ealIuWVckSyaTJOfGaFvUFhR9hoOF2fXdH8tc7yhadRvgIih7QsiZ/E3\nZssTS66oy+6jBjqOrQZWoQax57RbgaW9artPnAPrbPUP3AQxl1ATjDdccDilNo5q\neIUwXhPfm3sIe5iRwGtHR0COB8VRzaQ75HuYdf61X7OjdcmxvO3nztcDJGMMXhs4\nrIWJQpvm0LuOQxfz742AHgCDUu/oT7A491sHuMP8QJa3RfeDAoT9bB6Ci20ZNd69\nvVE90cpi4Ww300P5yOutWm6epjbPkWJWJn6O3TEl3RpPzNXYZhnBPclqwMhDTBPZ\nxkqaPOiXAvu4lR/L7SlKqaulHvLc5n3WKEq204YKidKkwZQQoP0knEbWXicsr74U\n1NUbfTAMuAERK5DKh02mvkDcQ7Fpzc2tTeuPfB0JHKBKerB21s515AKMFLYv1+FA\nRrkHtIgQq3K6I4S4n/54q28e98Dc9AgMyc+h5fDwUY4QrVJDyWHbOhAV7CTczpXn\nWgRyV1q9\n=9dhx\n-----END PGP SIGNATURE-----",
        "payload": "tree 3111b2871552e4798d9e987eb70d504805d5e977\nparent 07a8f65031c448971ee665f3db0fbf883a34465b\nauthor darosior <darosior@protonmail.com> 1568146127 +0200\ncommitter darosior <darosior@protonmail.com> 1568215589 +0200\n\ntests: rename 'test_getnetworkinginfo' in 'test_getnetworkinfo'\n\nSince it's the name of the RPC call\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1d524c62ea679aa89770f9fdcd72b84f013639cb",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/1d524c62ea679aa89770f9fdcd72b84f013639cb",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1d524c62ea679aa89770f9fdcd72b84f013639cb/comments",
    "author": {
      "login": "darosior",
      "id": 22457751,
      "node_id": "MDQ6VXNlcjIyNDU3NzUx",
      "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/darosior",
      "html_url": "https://github.com/darosior",
      "followers_url": "https://api.github.com/users/darosior/followers",
      "following_url": "https://api.github.com/users/darosior/following{/other_user}",
      "gists_url": "https://api.github.com/users/darosior/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/darosior/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
      "organizations_url": "https://api.github.com/users/darosior/orgs",
      "repos_url": "https://api.github.com/users/darosior/repos",
      "events_url": "https://api.github.com/users/darosior/events{/privacy}",
      "received_events_url": "https://api.github.com/users/darosior/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "darosior",
      "id": 22457751,
      "node_id": "MDQ6VXNlcjIyNDU3NzUx",
      "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/darosior",
      "html_url": "https://github.com/darosior",
      "followers_url": "https://api.github.com/users/darosior/followers",
      "following_url": "https://api.github.com/users/darosior/following{/other_user}",
      "gists_url": "https://api.github.com/users/darosior/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/darosior/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
      "organizations_url": "https://api.github.com/users/darosior/orgs",
      "repos_url": "https://api.github.com/users/darosior/repos",
      "events_url": "https://api.github.com/users/darosior/events{/privacy}",
      "received_events_url": "https://api.github.com/users/darosior/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "07a8f65031c448971ee665f3db0fbf883a34465b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/07a8f65031c448971ee665f3db0fbf883a34465b",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/07a8f65031c448971ee665f3db0fbf883a34465b"
      }
    ],
    "stats": {
      "total": 4,
      "additions": 2,
      "deletions": 2
    },
    "files": [
      {
        "sha": "104c66aaa73499f0384b2c72fe455ccd76403e3b",
        "filename": "test/functional/rpc_net.py",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/1d524c62ea679aa89770f9fdcd72b84f013639cb/test/functional/rpc_net.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/1d524c62ea679aa89770f9fdcd72b84f013639cb/test/functional/rpc_net.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/rpc_net.py?ref=1d524c62ea679aa89770f9fdcd72b84f013639cb",
        "patch": "@@ -56,7 +56,7 @@ def set_test_params(self):\n     def run_test(self):\n         self._test_connection_count()\n         self._test_getnettotals()\n-        self._test_getnetworkinginfo()\n+        self._test_getnetworkinfo()\n         self._test_getaddednodeinfo()\n         self._test_getpeerinfo()\n         self._test_getnodeaddresses()\n@@ -95,7 +95,7 @@ def _test_getnettotals(self):\n             assert_greater_than_or_equal(after['bytesrecv_per_msg'].get('pong', 0), before['bytesrecv_per_msg'].get('pong', 0) + 32)\n             assert_greater_than_or_equal(after['bytessent_per_msg'].get('ping', 0), before['bytessent_per_msg'].get('ping', 0) + 32)\n \n-    def _test_getnetworkinginfo(self):\n+    def _test_getnetworkinfo(self):\n         assert_equal(self.nodes[0].getnetworkinfo()['networkactive'], True)\n         assert_equal(self.nodes[0].getnetworkinfo()['connections'], 2)\n "
      }
    ]
  }
]