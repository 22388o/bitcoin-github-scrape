[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/480844749",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15758#issuecomment-480844749",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15758",
    "id": 480844749,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4MDg0NDc0OQ==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-08T14:02:34Z",
    "updated_at": "2019-04-22T01:01:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#15729](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/15729.html) (rpc: Raise error in getbalance if minconf is not zero by promag)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/480844749/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/487997156",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15758#issuecomment-487997156",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15758",
    "id": 487997156,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4Nzk5NzE1Ng==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-30T15:25:06Z",
    "updated_at": "2019-04-30T15:25:06Z",
    "author_association": "MEMBER",
    "body": "Unless there are objections, this will be merged tomorrow",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/487997156/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/488098607",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15758#issuecomment-488098607",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15758",
    "id": 488098607,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4ODA5ODYwNw==",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-30T20:14:41Z",
    "updated_at": "2019-04-30T20:14:41Z",
    "author_association": "MEMBER",
    "body": "utACK fa79a783d63060dc6a8521c1de58b158979a59e9",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/488098607/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/272841206",
    "pull_request_review_id": 223590341,
    "id": 272841206,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI3Mjg0MTIwNg==",
    "diff_hunk": "@@ -64,8 +65,10 @@ def run_test(self):\n         self.log.info(\"Test getbalance with different arguments\")\n         assert_equal(self.nodes[0].getbalance(\"*\"), 50)\n         assert_equal(self.nodes[0].getbalance(\"*\", 1), 50)\n-        assert_equal(self.nodes[0].getbalance(\"*\", 1, True), 50)\n+        assert_equal(self.nodes[0].getbalance(\"*\", 1, True), 100)\n         assert_equal(self.nodes[0].getbalance(minconf=1), 50)\n+        assert_equal(self.nodes[0].getbalance(minconf=0, include_watchonly=True), 100)",
    "path": "test/functional/wallet_balance.py",
    "position": 83,
    "original_position": 44,
    "commit_id": "fa79a783d63060dc6a8521c1de58b158979a59e9",
    "original_commit_id": "faa26db8b3619b342e616195f89cc59103550f56",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Just `include_watchonly=True`, if #15729 is the way to go? Same below.",
    "created_at": "2019-04-07T16:19:00Z",
    "updated_at": "2019-04-30T19:15:20Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15758#discussion_r272841206",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15758",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/272841206"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15758#discussion_r272841206"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15758"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/272841206/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 78,
    "original_line": 78,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/273084852",
    "pull_request_review_id": 223891547,
    "id": 273084852,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI3MzA4NDg1Mg==",
    "diff_hunk": "@@ -64,8 +65,10 @@ def run_test(self):\n         self.log.info(\"Test getbalance with different arguments\")\n         assert_equal(self.nodes[0].getbalance(\"*\"), 50)\n         assert_equal(self.nodes[0].getbalance(\"*\", 1), 50)\n-        assert_equal(self.nodes[0].getbalance(\"*\", 1, True), 50)\n+        assert_equal(self.nodes[0].getbalance(\"*\", 1, True), 100)\n         assert_equal(self.nodes[0].getbalance(minconf=1), 50)\n+        assert_equal(self.nodes[0].getbalance(minconf=0, include_watchonly=True), 100)",
    "path": "test/functional/wallet_balance.py",
    "position": 83,
    "original_position": 44,
    "commit_id": "fa79a783d63060dc6a8521c1de58b158979a59e9",
    "original_commit_id": "faa26db8b3619b342e616195f89cc59103550f56",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "The two pulls will conflict either way, so I'd rather keep it",
    "created_at": "2019-04-08T14:45:00Z",
    "updated_at": "2019-04-30T19:15:20Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15758#discussion_r273084852",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15758",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/273084852"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15758#discussion_r273084852"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15758"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/273084852/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 78,
    "original_line": 78,
    "side": "RIGHT",
    "in_reply_to_id": 272841206
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/279798687",
    "pull_request_review_id": 232228908,
    "id": 279798687,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI3OTc5ODY4Nw==",
    "diff_hunk": "@@ -55,7 +63,7 @@ def run_test(self):\n         self.nodes[0].generate(1)\n         self.sync_all()\n         self.nodes[1].generate(1)\n-        self.nodes[1].generatetoaddress(100, RANDOM_COINBASE_ADDRESS)\n+        self.nodes[1].generatetoaddress(101, ADDRESS_WATCHONLY)",
    "path": "test/functional/wallet_balance.py",
    "position": 72,
    "original_position": 45,
    "commit_id": "fa79a783d63060dc6a8521c1de58b158979a59e9",
    "original_commit_id": "fa8d8eb2bd2f136f75a783821df12864390e0a85",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "The log above \"Mining one block for each node\" is now incorrect (or at least misleading). Can you change it?",
    "created_at": "2019-04-30T15:07:06Z",
    "updated_at": "2019-04-30T19:15:20Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15758#discussion_r279798687",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15758",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/279798687"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15758#discussion_r279798687"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15758"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/279798687/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 67,
    "original_line": 67,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/279805758",
    "pull_request_review_id": 232228908,
    "id": 279805758,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI3OTgwNTc1OA==",
    "diff_hunk": "@@ -140,6 +152,48 @@ def run_test(self):\n         after = self.nodes[1].getunconfirmedbalance()\n         assert_equal(before + Decimal('0.1'), after)\n \n+        # Create 3 more wallet txs, where the last is not accepted to the\n+        # mempool because it is the third descendant of the tx above\n+        for _ in range(3):\n+            # Set amount high enough such that all coins are spent by each tx\n+            txid = self.nodes[0].sendtoaddress(self.nodes[0].getnewaddress(), 99)\n+        assert txid not in self.nodes[0].getrawmempool()\n+        assert_equal(self.nodes[0].getbalance(minconf=0), 0)  # wallet txs not in the mempool are untrusted",
    "path": "test/functional/wallet_balance.py",
    "position": null,
    "original_position": 134,
    "commit_id": "fa79a783d63060dc6a8521c1de58b158979a59e9",
    "original_commit_id": "fa8d8eb2bd2f136f75a783821df12864390e0a85",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "A few additional tests you could do here:\r\n- check that `gettransaction(txid)` returns something but `getrawtransaction(txid)` doesn't.\r\n- check that `getrawtransaction()` returns something for the second transaction that was sent (to sanity-check your testing methodology)\r\n- check that `gettransaction(txid)['trusted'] == False` ",
    "created_at": "2019-04-30T15:22:45Z",
    "updated_at": "2019-04-30T19:15:20Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15758#discussion_r279805758",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15758",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/279805758"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15758#discussion_r279805758"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15758"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/279805758/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 161,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/279809878",
    "pull_request_review_id": 232228908,
    "id": 279809878,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI3OTgwOTg3OA==",
    "diff_hunk": "@@ -140,6 +152,48 @@ def run_test(self):\n         after = self.nodes[1].getunconfirmedbalance()\n         assert_equal(before + Decimal('0.1'), after)\n \n+        # Create 3 more wallet txs, where the last is not accepted to the\n+        # mempool because it is the third descendant of the tx above\n+        for _ in range(3):\n+            # Set amount high enough such that all coins are spent by each tx\n+            txid = self.nodes[0].sendtoaddress(self.nodes[0].getnewaddress(), 99)\n+        assert txid not in self.nodes[0].getrawmempool()\n+        assert_equal(self.nodes[0].getbalance(minconf=0), 0)  # wallet txs not in the mempool are untrusted\n+\n+        self.log.info(\"Test replacement and reorg of non-mempool tx\")\n+        tx_orig = self.nodes[0].gettransaction(txid)['hex']\n+        # Increase fee by 1 coin\n+        tx_replace = tx_orig.replace(\n+            struct.pack(\"<q\", 99 * 10**8).hex(),",
    "path": "test/functional/wallet_balance.py",
    "position": 170,
    "original_position": 140,
    "commit_id": "fa79a783d63060dc6a8521c1de58b158979a59e9",
    "original_commit_id": "fa8d8eb2bd2f136f75a783821df12864390e0a85",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "\ud83d\ude28 is it possible to do this by pre-constructing multiple versions of the same transaction with different fees? My preference would be to avoid doing raw construction byte wrangling if possible.",
    "created_at": "2019-04-30T15:31:39Z",
    "updated_at": "2019-04-30T19:15:20Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15758#discussion_r279809878",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15758",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/279809878"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15758#discussion_r279809878"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15758"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/279809878/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 171,
    "original_line": 171,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/279810499",
    "pull_request_review_id": 232228908,
    "id": 279810499,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI3OTgxMDQ5OQ==",
    "diff_hunk": "@@ -140,6 +152,48 @@ def run_test(self):\n         after = self.nodes[1].getunconfirmedbalance()\n         assert_equal(before + Decimal('0.1'), after)\n \n+        # Create 3 more wallet txs, where the last is not accepted to the\n+        # mempool because it is the third descendant of the tx above\n+        for _ in range(3):\n+            # Set amount high enough such that all coins are spent by each tx\n+            txid = self.nodes[0].sendtoaddress(self.nodes[0].getnewaddress(), 99)\n+        assert txid not in self.nodes[0].getrawmempool()\n+        assert_equal(self.nodes[0].getbalance(minconf=0), 0)  # wallet txs not in the mempool are untrusted\n+\n+        self.log.info(\"Test replacement and reorg of non-mempool tx\")\n+        tx_orig = self.nodes[0].gettransaction(txid)['hex']\n+        # Increase fee by 1 coin\n+        tx_replace = tx_orig.replace(\n+            struct.pack(\"<q\", 99 * 10**8).hex(),\n+            struct.pack(\"<q\", 98 * 10**8).hex(),\n+        )\n+        tx_replace = self.nodes[0].signrawtransactionwithwallet(tx_replace)['hex']\n+        # Total balance is given by the sum of outputs of the tx\n+        total_amount = sum([o['value'] for o in self.nodes[0].decoderawtransaction(tx_replace)['vout']])\n+        self.sync_all()\n+        self.nodes[1].sendrawtransaction(hexstring=tx_replace, maxfeerate=0)\n+\n+        # Now confirm tx_replace\n+        block_reorg = self.nodes[1].generatetoaddress(1, ADDRESS_WATCHONLY)[0]\n+        self.sync_all()\n+        assert_equal(self.nodes[0].getbalance(minconf=0), total_amount)\n+\n+        # Put txs back in mempool",
    "path": "test/functional/wallet_balance.py",
    "position": null,
    "original_position": 154,
    "commit_id": "fa79a783d63060dc6a8521c1de58b158979a59e9",
    "original_commit_id": "fa8d8eb2bd2f136f75a783821df12864390e0a85",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Presumably the txs don't get back into node 0's mempool because of the descendant limit, which is why the getbalance values are 0 below? If that's true, can you update this comment to explain what's going on?",
    "created_at": "2019-04-30T15:33:00Z",
    "updated_at": "2019-04-30T19:15:20Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15758#discussion_r279810499",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15758",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/279810499"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15758#discussion_r279810499"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15758"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/279810499/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 181,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/279821806",
    "pull_request_review_id": 232259308,
    "id": 279821806,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI3OTgyMTgwNg==",
    "diff_hunk": "@@ -55,7 +63,7 @@ def run_test(self):\n         self.nodes[0].generate(1)\n         self.sync_all()\n         self.nodes[1].generate(1)\n-        self.nodes[1].generatetoaddress(100, RANDOM_COINBASE_ADDRESS)\n+        self.nodes[1].generatetoaddress(101, ADDRESS_WATCHONLY)",
    "path": "test/functional/wallet_balance.py",
    "position": 72,
    "original_position": 45,
    "commit_id": "fa79a783d63060dc6a8521c1de58b158979a59e9",
    "original_commit_id": "fa8d8eb2bd2f136f75a783821df12864390e0a85",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Huh, there are two calls to `generate(1)` for each node? How is it incorrect?",
    "created_at": "2019-04-30T15:57:51Z",
    "updated_at": "2019-04-30T19:15:20Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15758#discussion_r279821806",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15758",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/279821806"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15758#discussion_r279821806"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15758"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/279821806/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 67,
    "original_line": 67,
    "side": "RIGHT",
    "in_reply_to_id": 279798687
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/279824109",
    "pull_request_review_id": 232262484,
    "id": 279824109,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI3OTgyNDEwOQ==",
    "diff_hunk": "@@ -140,6 +152,48 @@ def run_test(self):\n         after = self.nodes[1].getunconfirmedbalance()\n         assert_equal(before + Decimal('0.1'), after)\n \n+        # Create 3 more wallet txs, where the last is not accepted to the\n+        # mempool because it is the third descendant of the tx above\n+        for _ in range(3):\n+            # Set amount high enough such that all coins are spent by each tx\n+            txid = self.nodes[0].sendtoaddress(self.nodes[0].getnewaddress(), 99)\n+        assert txid not in self.nodes[0].getrawmempool()\n+        assert_equal(self.nodes[0].getbalance(minconf=0), 0)  # wallet txs not in the mempool are untrusted\n+\n+        self.log.info(\"Test replacement and reorg of non-mempool tx\")\n+        tx_orig = self.nodes[0].gettransaction(txid)['hex']\n+        # Increase fee by 1 coin\n+        tx_replace = tx_orig.replace(\n+            struct.pack(\"<q\", 99 * 10**8).hex(),",
    "path": "test/functional/wallet_balance.py",
    "position": 170,
    "original_position": 140,
    "commit_id": "fa79a783d63060dc6a8521c1de58b158979a59e9",
    "original_commit_id": "fa8d8eb2bd2f136f75a783821df12864390e0a85",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Maybe I should use bumpfee?",
    "created_at": "2019-04-30T16:03:29Z",
    "updated_at": "2019-04-30T19:15:20Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15758#discussion_r279824109",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15758",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/279824109"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15758#discussion_r279824109"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15758"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/279824109/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 171,
    "original_line": 171,
    "side": "RIGHT",
    "in_reply_to_id": 279809878
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/279824242",
    "pull_request_review_id": 232262644,
    "id": 279824242,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI3OTgyNDI0Mg==",
    "diff_hunk": "@@ -140,6 +152,48 @@ def run_test(self):\n         after = self.nodes[1].getunconfirmedbalance()\n         assert_equal(before + Decimal('0.1'), after)\n \n+        # Create 3 more wallet txs, where the last is not accepted to the\n+        # mempool because it is the third descendant of the tx above\n+        for _ in range(3):\n+            # Set amount high enough such that all coins are spent by each tx\n+            txid = self.nodes[0].sendtoaddress(self.nodes[0].getnewaddress(), 99)\n+        assert txid not in self.nodes[0].getrawmempool()\n+        assert_equal(self.nodes[0].getbalance(minconf=0), 0)  # wallet txs not in the mempool are untrusted",
    "path": "test/functional/wallet_balance.py",
    "position": null,
    "original_position": 134,
    "commit_id": "fa79a783d63060dc6a8521c1de58b158979a59e9",
    "original_commit_id": "fa8d8eb2bd2f136f75a783821df12864390e0a85",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Good suggestions",
    "created_at": "2019-04-30T16:03:47Z",
    "updated_at": "2019-04-30T19:15:20Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15758#discussion_r279824242",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15758",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/279824242"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15758#discussion_r279824242"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15758"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/279824242/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 161,
    "side": "RIGHT",
    "in_reply_to_id": 279805758
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/279829926",
    "pull_request_review_id": 232269932,
    "id": 279829926,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI3OTgyOTkyNg==",
    "diff_hunk": "@@ -55,7 +63,7 @@ def run_test(self):\n         self.nodes[0].generate(1)\n         self.sync_all()\n         self.nodes[1].generate(1)\n-        self.nodes[1].generatetoaddress(100, RANDOM_COINBASE_ADDRESS)\n+        self.nodes[1].generatetoaddress(101, ADDRESS_WATCHONLY)",
    "path": "test/functional/wallet_balance.py",
    "position": 72,
    "original_position": 45,
    "commit_id": "fa79a783d63060dc6a8521c1de58b158979a59e9",
    "original_commit_id": "fa8d8eb2bd2f136f75a783821df12864390e0a85",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Because there is then a call to generate to a watch-only address for node 1",
    "created_at": "2019-04-30T16:17:47Z",
    "updated_at": "2019-04-30T19:15:20Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15758#discussion_r279829926",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15758",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/279829926"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15758#discussion_r279829926"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15758"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/279829926/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 67,
    "original_line": 67,
    "side": "RIGHT",
    "in_reply_to_id": 279798687
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/279830986",
    "pull_request_review_id": 232271239,
    "id": 279830986,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI3OTgzMDk4Ng==",
    "diff_hunk": "@@ -140,6 +152,48 @@ def run_test(self):\n         after = self.nodes[1].getunconfirmedbalance()\n         assert_equal(before + Decimal('0.1'), after)\n \n+        # Create 3 more wallet txs, where the last is not accepted to the\n+        # mempool because it is the third descendant of the tx above\n+        for _ in range(3):\n+            # Set amount high enough such that all coins are spent by each tx\n+            txid = self.nodes[0].sendtoaddress(self.nodes[0].getnewaddress(), 99)\n+        assert txid not in self.nodes[0].getrawmempool()\n+        assert_equal(self.nodes[0].getbalance(minconf=0), 0)  # wallet txs not in the mempool are untrusted\n+\n+        self.log.info(\"Test replacement and reorg of non-mempool tx\")\n+        tx_orig = self.nodes[0].gettransaction(txid)['hex']\n+        # Increase fee by 1 coin\n+        tx_replace = tx_orig.replace(\n+            struct.pack(\"<q\", 99 * 10**8).hex(),",
    "path": "test/functional/wallet_balance.py",
    "position": 170,
    "original_position": 140,
    "commit_id": "fa79a783d63060dc6a8521c1de58b158979a59e9",
    "original_commit_id": "fa8d8eb2bd2f136f75a783821df12864390e0a85",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Perhaps, or the same `createrawtransaction`/`signrawtransaction` method used in `create_transactions()` above.\r\n\r\nJust a suggestion. If this adds a ton of additional lines, then it's not worth it. I just find that anything that directly builds/edits transactions can become quite cumbersome to update if the test needs to be changed in future.",
    "created_at": "2019-04-30T16:20:33Z",
    "updated_at": "2019-04-30T19:15:20Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15758#discussion_r279830986",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15758",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/279830986"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15758#discussion_r279830986"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15758"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/279830986/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 171,
    "original_line": 171,
    "side": "RIGHT",
    "in_reply_to_id": 279809878
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/279896501",
    "pull_request_review_id": 232354689,
    "id": 279896501,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI3OTg5NjUwMQ==",
    "diff_hunk": "@@ -140,6 +152,48 @@ def run_test(self):\n         after = self.nodes[1].getunconfirmedbalance()\n         assert_equal(before + Decimal('0.1'), after)\n \n+        # Create 3 more wallet txs, where the last is not accepted to the\n+        # mempool because it is the third descendant of the tx above\n+        for _ in range(3):\n+            # Set amount high enough such that all coins are spent by each tx\n+            txid = self.nodes[0].sendtoaddress(self.nodes[0].getnewaddress(), 99)\n+        assert txid not in self.nodes[0].getrawmempool()\n+        assert_equal(self.nodes[0].getbalance(minconf=0), 0)  # wallet txs not in the mempool are untrusted\n+\n+        self.log.info(\"Test replacement and reorg of non-mempool tx\")\n+        tx_orig = self.nodes[0].gettransaction(txid)['hex']\n+        # Increase fee by 1 coin\n+        tx_replace = tx_orig.replace(\n+            struct.pack(\"<q\", 99 * 10**8).hex(),",
    "path": "test/functional/wallet_balance.py",
    "position": 170,
    "original_position": 140,
    "commit_id": "fa79a783d63060dc6a8521c1de58b158979a59e9",
    "original_commit_id": "fa8d8eb2bd2f136f75a783821df12864390e0a85",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I couldn't get `create_transactions` to work for this use case after minutes of trying, so I gave up and kept my two-line hack. I think I found two issues with `create_transactions` in the process, so I fixed them up.\r\n\r\nFeel free to try it yourself and send  me the commit if you succeed ...",
    "created_at": "2019-04-30T19:13:10Z",
    "updated_at": "2019-04-30T19:15:20Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15758#discussion_r279896501",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15758",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/279896501"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15758#discussion_r279896501"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15758"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/279896501/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 171,
    "original_line": 171,
    "side": "RIGHT",
    "in_reply_to_id": 279809878
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/279897043",
    "pull_request_review_id": 232355454,
    "id": 279897043,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI3OTg5NzA0Mw==",
    "diff_hunk": "@@ -140,6 +152,48 @@ def run_test(self):\n         after = self.nodes[1].getunconfirmedbalance()\n         assert_equal(before + Decimal('0.1'), after)\n \n+        # Create 3 more wallet txs, where the last is not accepted to the\n+        # mempool because it is the third descendant of the tx above\n+        for _ in range(3):\n+            # Set amount high enough such that all coins are spent by each tx\n+            txid = self.nodes[0].sendtoaddress(self.nodes[0].getnewaddress(), 99)\n+        assert txid not in self.nodes[0].getrawmempool()\n+        assert_equal(self.nodes[0].getbalance(minconf=0), 0)  # wallet txs not in the mempool are untrusted\n+\n+        self.log.info(\"Test replacement and reorg of non-mempool tx\")\n+        tx_orig = self.nodes[0].gettransaction(txid)['hex']\n+        # Increase fee by 1 coin\n+        tx_replace = tx_orig.replace(\n+            struct.pack(\"<q\", 99 * 10**8).hex(),\n+            struct.pack(\"<q\", 98 * 10**8).hex(),\n+        )\n+        tx_replace = self.nodes[0].signrawtransactionwithwallet(tx_replace)['hex']\n+        # Total balance is given by the sum of outputs of the tx\n+        total_amount = sum([o['value'] for o in self.nodes[0].decoderawtransaction(tx_replace)['vout']])\n+        self.sync_all()\n+        self.nodes[1].sendrawtransaction(hexstring=tx_replace, maxfeerate=0)\n+\n+        # Now confirm tx_replace\n+        block_reorg = self.nodes[1].generatetoaddress(1, ADDRESS_WATCHONLY)[0]\n+        self.sync_all()\n+        assert_equal(self.nodes[0].getbalance(minconf=0), total_amount)\n+\n+        # Put txs back in mempool",
    "path": "test/functional/wallet_balance.py",
    "position": null,
    "original_position": 154,
    "commit_id": "fa79a783d63060dc6a8521c1de58b158979a59e9",
    "original_commit_id": "fa8d8eb2bd2f136f75a783821df12864390e0a85",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Added logprint with comment",
    "created_at": "2019-04-30T19:14:51Z",
    "updated_at": "2019-04-30T19:15:20Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15758#discussion_r279897043",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15758",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/279897043"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15758#discussion_r279897043"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15758"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/279897043/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 181,
    "side": "RIGHT",
    "in_reply_to_id": 279810499
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/279917026",
    "pull_request_review_id": 232380998,
    "id": 279917026,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI3OTkxNzAyNg==",
    "diff_hunk": "@@ -140,6 +152,48 @@ def run_test(self):\n         after = self.nodes[1].getunconfirmedbalance()\n         assert_equal(before + Decimal('0.1'), after)\n \n+        # Create 3 more wallet txs, where the last is not accepted to the\n+        # mempool because it is the third descendant of the tx above\n+        for _ in range(3):\n+            # Set amount high enough such that all coins are spent by each tx\n+            txid = self.nodes[0].sendtoaddress(self.nodes[0].getnewaddress(), 99)\n+        assert txid not in self.nodes[0].getrawmempool()\n+        assert_equal(self.nodes[0].getbalance(minconf=0), 0)  # wallet txs not in the mempool are untrusted\n+\n+        self.log.info(\"Test replacement and reorg of non-mempool tx\")\n+        tx_orig = self.nodes[0].gettransaction(txid)['hex']\n+        # Increase fee by 1 coin\n+        tx_replace = tx_orig.replace(\n+            struct.pack(\"<q\", 99 * 10**8).hex(),",
    "path": "test/functional/wallet_balance.py",
    "position": 170,
    "original_position": 140,
    "commit_id": "fa79a783d63060dc6a8521c1de58b158979a59e9",
    "original_commit_id": "fa8d8eb2bd2f136f75a783821df12864390e0a85",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "No, I agree with you that it's not worth the additional effort. Thanks for trying though!",
    "created_at": "2019-04-30T20:12:26Z",
    "updated_at": "2019-04-30T20:12:27Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15758#discussion_r279917026",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15758",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/279917026"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15758#discussion_r279917026"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15758"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/279917026/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 171,
    "original_line": 171,
    "side": "RIGHT",
    "in_reply_to_id": 279809878
  }
]