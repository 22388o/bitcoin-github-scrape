DrahtBot,2019-04-08T14:02:34Z,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#15729](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/15729.html) (rpc: Raise error in getbalance if minconf i",https://github.com/bitcoin/bitcoin/pull/15758#issuecomment-480844749,480844749,
MarcoFalke,2019-04-30T15:25:06Z,"Unless there are objections, this will be merged tomorrow",https://github.com/bitcoin/bitcoin/pull/15758#issuecomment-487997156,487997156,
jnewbery,2019-04-30T20:14:41Z,utACK fa79a783d63060dc6a8521c1de58b158979a59e9,https://github.com/bitcoin/bitcoin/pull/15758#issuecomment-488098607,488098607,
promag,2019-04-07T16:19:00Z,"Just `include_watchonly=True`, if #15729 is the way to go? Same below.",https://github.com/bitcoin/bitcoin/pull/15758#discussion_r272841206,272841206,test/functional/wallet_balance.py
MarcoFalke,2019-04-08T14:45:00Z,"The two pulls will conflict either way, so I'd rather keep it",https://github.com/bitcoin/bitcoin/pull/15758#discussion_r273084852,273084852,test/functional/wallet_balance.py
jnewbery,2019-04-30T15:07:06Z,"The log above ""Mining one block for each node"" is now incorrect (or at least misleading). Can you change it?",https://github.com/bitcoin/bitcoin/pull/15758#discussion_r279798687,279798687,test/functional/wallet_balance.py
jnewbery,2019-04-30T15:22:45Z,"A few additional tests you could do here:\n- check that `gettransaction(txid)` returns something but `getrawtransaction(txid)` doesn't.\n- check that `getrawtransaction()` returns something for the second transaction that was sent (to sanity-check your testing methodology)\n- check that `gettransaction(txid)['trusted'] == False` ",https://github.com/bitcoin/bitcoin/pull/15758#discussion_r279805758,279805758,test/functional/wallet_balance.py
jnewbery,2019-04-30T15:31:39Z,ðŸ˜¨ is it possible to do this by pre-constructing multiple versions of the same transaction with different fees? My preference would be to avoid doing raw construction byte wrangling if possible.,https://github.com/bitcoin/bitcoin/pull/15758#discussion_r279809878,279809878,test/functional/wallet_balance.py
jnewbery,2019-04-30T15:33:00Z,"Presumably the txs don't get back into node 0's mempool because of the descendant limit, which is why the getbalance values are 0 below? If that's true, can you update this comment to explain what's going on?",https://github.com/bitcoin/bitcoin/pull/15758#discussion_r279810499,279810499,test/functional/wallet_balance.py
MarcoFalke,2019-04-30T15:57:51Z,"Huh, there are two calls to `generate(1)` for each node? How is it incorrect?",https://github.com/bitcoin/bitcoin/pull/15758#discussion_r279821806,279821806,test/functional/wallet_balance.py
MarcoFalke,2019-04-30T16:03:29Z,Maybe I should use bumpfee?,https://github.com/bitcoin/bitcoin/pull/15758#discussion_r279824109,279824109,test/functional/wallet_balance.py
MarcoFalke,2019-04-30T16:03:47Z,Good suggestions,https://github.com/bitcoin/bitcoin/pull/15758#discussion_r279824242,279824242,test/functional/wallet_balance.py
jnewbery,2019-04-30T16:17:47Z,Because there is then a call to generate to a watch-only address for node 1,https://github.com/bitcoin/bitcoin/pull/15758#discussion_r279829926,279829926,test/functional/wallet_balance.py
jnewbery,2019-04-30T16:20:33Z,"Perhaps, or the same `createrawtransaction`/`signrawtransaction` method used in `create_transactions()` above.\n\nJust a suggestion. If this adds a ton of additional lines, then it's not worth it. I just find that anything that directly builds/edits transactions can become quite cumbersome to update if the test needs to be changed in future.",https://github.com/bitcoin/bitcoin/pull/15758#discussion_r279830986,279830986,test/functional/wallet_balance.py
MarcoFalke,2019-04-30T19:13:10Z,"I couldn't get `create_transactions` to work for this use case after minutes of trying, so I gave up and kept my two-line hack. I think I found two issues with `create_transactions` in the process, so I fixed them up.\n\nFeel free to try it yourself and send  me the commit if you succeed ...",https://github.com/bitcoin/bitcoin/pull/15758#discussion_r279896501,279896501,test/functional/wallet_balance.py
MarcoFalke,2019-04-30T19:14:51Z,Added logprint with comment,https://github.com/bitcoin/bitcoin/pull/15758#discussion_r279897043,279897043,test/functional/wallet_balance.py
jnewbery,2019-04-30T20:12:26Z,"No, I agree with you that it's not worth the additional effort. Thanks for trying though!",https://github.com/bitcoin/bitcoin/pull/15758#discussion_r279917026,279917026,test/functional/wallet_balance.py
