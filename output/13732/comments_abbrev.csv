ken2812221,2018-07-21T14:05:39Z,I assume that this can be solved by adding rcc into faketime wrapper.,https://github.com/bitcoin/bitcoin/pull/13732#issuecomment-406798873,406798873,
MarcoFalke,2018-07-21T17:41:49Z,@DrahtBot Have some fun here!,https://github.com/bitcoin/bitcoin/pull/13732#issuecomment-406812135,406812135,
practicalswift,2018-07-21T17:50:55Z,"Concept ACK. Nice first time-contribution. Thanks!\n\nDeterminism is our friend!\n\n",https://github.com/bitcoin/bitcoin/pull/13732#issuecomment-406812684,406812684,
Fuzzbawls,2018-07-21T22:26:45Z,"adding `rcc` to the list of faketime wrapped binaries is problematic in that the `rcc` binary location is also defined in the `share/config.site` file that gets used for gitian builds, which does not use the `$PATH` environment variable, and the build system isn't really set up to allow for separate paths for each individual Qt tool.\n\nI don't think that would be a viable alternative anyways, a",https://github.com/bitcoin/bitcoin/pull/13732#issuecomment-406827354,406827354,
MarcoFalke,2018-07-22T02:20:56Z,"Indeed, looks like the results are stable now.",https://github.com/bitcoin/bitcoin/pull/13732#issuecomment-406836266,406836266,
DrahtBot,2018-07-22T13:17:24Z,<!--e57a25ab6845829454e8d69fc972939a-->Note to reviewers: This pull request conflicts with the following ones:\n\n* #13710 ([depends] Add riscv qt depends support for cross compiling bitcoin-qt by ken2812221)\n* #13696 (Add aarch64 qt depends support for cross compiling bitcoin-qt by TheCharlatan)\n* #13665 ([WIP][build] Add risc-v support to gitian by ken2812221)\n\nIf you consider this pull requ,https://github.com/bitcoin/bitcoin/pull/13732#issuecomment-406865975,406865975,
laanwj,2018-07-22T16:13:42Z,"Concept ACK\nThanks a lot for figuring this out.!\nIn the longer run, it would be a good idea to get deterministic-build support pushed upstream (@theuni has some experience doing this for binutils).",https://github.com/bitcoin/bitcoin/pull/13732#issuecomment-406878408,406878408,
Fuzzbawls,2018-07-22T23:02:40Z,"@laanwj In this particular case, upstream Qt did indeed ""fix"" the issue, but only for versions 5.11+. Even though the QTBUG was closed and marked invalid, a proposed change addressing the issue was merged. (https://github.com/qt/qtbase/commit/38271e9298dcf48652a6e2e08414a940a97867fa)\n\nI agree though, it would be great if the patch made it into Qt's 5.9 branch and a 5.9.7 version released so it",https://github.com/bitcoin/bitcoin/pull/13732#issuecomment-406903994,406903994,
theuni,2018-07-22T23:52:03Z,"@laanwj Yes, ideally qt's configure would have an option for disabling timestamps by default, which is quickly becoming the norm for host-side build tools.",https://github.com/bitcoin/bitcoin/pull/13732#issuecomment-406906863,406906863,
Fuzzbawls,2018-07-24T08:22:57Z,"Rebased and pushed to incorporate feedback from @theuni.\n\nOne thing of note: While gitian builds are now deterministic, non-gitian builds that use `--prefix=` or `CONFIG_SITE=` pointing at a depends path are only deterministic if they **also** set `QT_RCC_SOURCE_DATE_OVERRIDE=1` at compile time\n```\nCONFIG_SITE=/home/fuzzbawls/bitcoin/depends/x86_64-unknown-linux/share/config.site ./configu",https://github.com/bitcoin/bitcoin/pull/13732#issuecomment-407323737,407323737,
theuni,2018-07-24T18:10:18Z,"@Fuzzbawls Sorry to do this to you, but I just had a look at the qt source, and it turns out that RCC_TEST has a totally different function: it serves as the seed for a hash function that ends up dictating the order of file entries. So my request above was completely wrong, we need both :(\n\nWould you mind putting it back? utACK after that.",https://github.com/bitcoin/bitcoin/pull/13732#issuecomment-407500710,407500710,
Fuzzbawls,2018-07-26T11:04:01Z,"@theuni Thanks...I had a feeling it may still be needed...just hadn't had the time to do extensive build testing. I've reverted to re-add the `QT_RCC_TEST=1` env vars where appropriate and so far gitian builds are looking nice and consistent.\n\nThere is still an outstanding issue of non-gitian builds (that use a depends target) producing inconsistent results with RCC...perhaps that can be it's ",https://github.com/bitcoin/bitcoin/pull/13732#issuecomment-408060529,408060529,
jonasschnelli,2018-07-27T12:51:22Z,"Looks good.\nGitian Build:\nhttps://bitcoin.jonasschnelli.ch/build/719",https://github.com/bitcoin/bitcoin/pull/13732#issuecomment-408409440,408409440,
DrahtBot,2018-07-29T01:35:42Z,<!--a722867cd34abeea1fadc8d60700f111-->\nGitian builds for commit ef4fac0ea5b4891f4529e4b59dfd1f7aeb3009b5 (master):\n * `cdbe82f5b95600e97c21881c4a5d8009...` [bitcoin-0.16.99-aarch64-linux-gnu-debug.tar.gz](https://drahtbot.space/gitian/bitcoin/bitcoin/ef4fac0ea5b4891f4529e4b59dfd1f7aeb3009b5/bitcoin-0.16.99-aarch64-linux-gnu-debug.tar.gz)\n * `88aa658d8b882fcae29a61b8ad07f89c...` [bitcoin-0.16.9,https://github.com/bitcoin/bitcoin/pull/13732#issuecomment-408645772,408645772,
MarcoFalke,2018-07-29T01:52:04Z,utACK 6b5506a28632b57c0c75c7cc66c0bc35d419b682,https://github.com/bitcoin/bitcoin/pull/13732#issuecomment-408646317,408646317,
DrahtBot,2018-07-29T12:02:46Z,<!--a722867cd34abeea1fadc8d60700f111-->\nGitian builds for commit ef4fac0ea5b4891f4529e4b59dfd1f7aeb3009b5 (master):\n * `cdbe82f5b95600e97c21881c4a5d8009...` [bitcoin-0.16.99-aarch64-linux-gnu-debug.tar.gz](https://drahtbot.space/gitian/bitcoin/bitcoin/ef4fac0ea5b4891f4529e4b59dfd1f7aeb3009b5/bitcoin-0.16.99-aarch64-linux-gnu-debug.tar.gz)\n * `88aa658d8b882fcae29a61b8ad07f89c...` [bitcoin-0.16.9,https://github.com/bitcoin/bitcoin/pull/13732#issuecomment-408671661,408671661,
theuni,2018-07-22T23:43:19Z,We need to export the variable here as well so that non-gitian builds get stable results. See below where QT_RCC_TEST is set to 1.,https://github.com/bitcoin/bitcoin/pull/13732#discussion_r204259529,204259529,depends/packages/qt.mk
theuni,2018-07-22T23:44:25Z,"QT_RCC_TEST was the variable for this in the past. If QT_RCC_SOURCE_DATE_OVERRIDE is the new one, let's just replace QT_RCC_TEST. I assume there's no need for both.\n\nSame goes for the other descriptors as well.",https://github.com/bitcoin/bitcoin/pull/13732#discussion_r204259565,204259565,contrib/gitian-descriptors/gitian-linux.yml
Fuzzbawls,2018-07-23T05:44:20Z,"Noted, will add this soon",https://github.com/bitcoin/bitcoin/pull/13732#discussion_r204286830,204286830,depends/packages/qt.mk
Fuzzbawls,2018-07-24T08:13:36Z,swapped out the build_env variable further up in this file and didn't notice any break in gitian results determinism.,https://github.com/bitcoin/bitcoin/pull/13732#discussion_r204662015,204662015,depends/packages/qt.mk
Fuzzbawls,2018-07-24T08:14:14Z,removed `QT_RCC_TEST=1` from gitian descriptors and didn't notice any break in gitian results determinism.,https://github.com/bitcoin/bitcoin/pull/13732#discussion_r204662158,204662158,contrib/gitian-descriptors/gitian-linux.yml
