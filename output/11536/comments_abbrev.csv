meshcollider,2017-10-20T18:33:04Z,"Concept ACK, I think this should be part of #11497?",https://github.com/bitcoin/bitcoin/pull/11536#issuecomment-338288087,338288087,
ryanofsky,2017-10-20T18:54:34Z,"> Concept ACK, I think this should be part of #11497?\n\nI don't mind combining prs though I don't see what advantage it brings in this case. This PR is backwards compatible and can be merged without waiting for #7729. #11497 is also confused about which account instances need to be removed vs renamed (as you pointed out in one of your review comments), and this PR clarifies that.",https://github.com/bitcoin/bitcoin/pull/11536#issuecomment-338293477,338293477,
laanwj,2017-10-21T07:02:27Z,Concept ACK - needs qa test for the new RPCs.,https://github.com/bitcoin/bitcoin/pull/11536#issuecomment-338369427,338369427,
jonasschnelli,2017-10-23T01:20:35Z,"Thanks!\nConcept ACK.",https://github.com/bitcoin/bitcoin/pull/11536#issuecomment-338524861,338524861,
MarcoFalke,2017-11-10T16:59:18Z,Needs rebase,https://github.com/bitcoin/bitcoin/pull/11536#issuecomment-343528372,343528372,
ryanofsky,2017-12-01T20:28:15Z,"> Needs rebase\n\nJust so this isn't the last comment., I have been periodically rebasing this PR. The PR is just a big rename so it gets out of date pretty frequently.",https://github.com/bitcoin/bitcoin/pull/11536#issuecomment-348606220,348606220,
ryanofsky,2018-01-04T18:54:52Z,Rebased again 8ec5890f540e7d96b64824306830abc928864b46 -> 5bb0a7b79b16649a49c96b88090af051842ea7d4 ([pr/acct.9](https://github.com/ryanofsky/bitcoin/commits/pr/acct.9) -> [pr/acct.10](https://github.com/ryanofsky/bitcoin/commits/pr/acct.10)) due to conflict with #12062.,https://github.com/bitcoin/bitcoin/pull/11536#issuecomment-355366950,355366950,
ryanofsky,2018-01-06T11:21:31Z,Rebased again 5bb0a7b79b16649a49c96b88090af051842ea7d4 -> 1c0f7c7770fbae467db06f7c7e61b1d29dce7771 ([pr/acct.10](https://github.com/ryanofsky/bitcoin/commits/pr/acct.10) -> [pr/acct.11](https://github.com/ryanofsky/bitcoin/commits/pr/acct.11)) due to conflict with #10677.,https://github.com/bitcoin/bitcoin/pull/11536#issuecomment-355740516,355740516,
sipa,2018-01-06T12:36:31Z,utACK 1c0f7c7770fbae467db06f7c7e61b1d29dce7771,https://github.com/bitcoin/bitcoin/pull/11536#issuecomment-355744252,355744252,
ryanofsky,2018-01-11T15:58:25Z,Rebased 1c0f7c7770fbae467db06f7c7e61b1d29dce7771 -> 96363c3f433a4b5970be036aa1cb4ebf36febeab ([pr/acct.11](https://github.com/ryanofsky/bitcoin/commits/pr/acct.11) -> [pr/acct.12](https://github.com/ryanofsky/bitcoin/commits/pr/acct.12)) due to conflicts with #11403.,https://github.com/bitcoin/bitcoin/pull/11536#issuecomment-356971754,356971754,
laanwj,2018-01-11T18:46:50Z,"This is not related to segwit wallet, nor a bugfix, so I'm moving the milestone to 0.17.",https://github.com/bitcoin/bitcoin/pull/11536#issuecomment-357023349,357023349,
Sjors,2018-01-18T08:43:06Z,"@ryanofsky:\n> #7729 does add getlabeladdress\n\nIt does, but the PR description says ""should be removed according to discussion"". Maybe that's out of date?",https://github.com/bitcoin/bitcoin/pull/11536#issuecomment-358576681,358576681,
ryanofsky,2018-01-18T09:03:34Z,"> It does, but the PR description says ""should be removed according to discussion"". Maybe that's out of date?\n\nProbably out of date, or could have been a typo. The discussion in that PR has been going on a while and can a little confusing to follow. If you just look at the code changes and commit messages it should make more sense, and also (sorry to keep repeating) my rebased version of #7729",https://github.com/bitcoin/bitcoin/pull/11536#issuecomment-358581808,358581808,
Sjors,2018-01-18T09:06:53Z,"@ryanofsky I did look at that, but it confused me because it doesn't match the description of the PR. So I suggested that that PR should probably be closed and reopened with an up to date description.\n\nI agree that the commit descriptions themselves are quite readable, they just seem out of context.",https://github.com/bitcoin/bitcoin/pull/11536#issuecomment-358582614,358582614,
ryanofsky,2018-01-18T09:33:52Z,"> I agree that the commit descriptions themselves are quite readable, they just seem out of context.\n\nWould suggest pointing out specific problems or edits you would like to see. It could perhaps be more appropriate to edit the description than open a new PR.",https://github.com/bitcoin/bitcoin/pull/11536#issuecomment-358589654,358589654,
ryanofsky,2018-01-18T16:07:28Z,"Rebased 71621535c75b848cda1a17b991567e361d346050 -> 59df27a20a633731506686a477bec10b6a5110d4 ([pr/acct.13](https://github.com/ryanofsky/bitcoin/commits/pr/acct.13) -> [pr/acct.14](https://github.com/ryanofsky/bitcoin/commits/pr/acct.14)) due to conflict in release notes with #12210.\n",https://github.com/bitcoin/bitcoin/pull/11536#issuecomment-358694291,358694291,
ryanofsky,2018-02-12T18:50:39Z,"Rebased 59df27a20a633731506686a477bec10b6a5110d4 -> 9508f59d293b0f8c67b7b01acc3793f724ab8fe2 ([pr/acct.14](https://github.com/ryanofsky/bitcoin/commits/pr/acct.14) -> [pr/acct.15](https://github.com/ryanofsky/bitcoin/commits/pr/acct.15)) due to conflict with test rename #11774, segwit wallet #11403, addwitness deprecate #12210\nRebased 9508f59d293b0f8c67b7b01acc3793f724ab8fe2 -> 8b9c889702db915ed",https://github.com/bitcoin/bitcoin/pull/11536#issuecomment-365023506,365023506,
Sjors,2018-03-13T19:13:54Z,"> Not sure this is the appropriate place to document an alias. \n\nA generic comment above the table saying that duplicate references to the same function are an alias would be fine.",https://github.com/bitcoin/bitcoin/pull/11536#issuecomment-372785270,372785270,
ryanofsky,2018-03-13T19:33:26Z,"> A generic comment above the table saying that duplicate references to the same function are an alias would be fine.\n\nThis isn't strictly true, because the both the client and the server can still distinguish between the functions and treat them differently. See `echo`/`echojson` at https://github.com/bitcoin/bitcoin/blob/d42a4fe5aaae60f33a89bde78f21820abefce922/src/rpc/misc.cpp#L472-L473\n",https://github.com/bitcoin/bitcoin/pull/11536#issuecomment-372790917,372790917,
Sjors,2018-03-13T21:14:14Z,Sounds like documentation (in a different PR) would indeed be useful.,https://github.com/bitcoin/bitcoin/pull/11536#issuecomment-372820660,372820660,
ryanofsky,2018-03-15T20:42:15Z,"> Sounds like documentation (in a different PR) would indeed be useful.\n\nSee #12700",https://github.com/bitcoin/bitcoin/pull/11536#issuecomment-373516199,373516199,
PierreRochard,2018-03-18T02:36:07Z,Tested ACK d596f032dcfc7beeed6ad0208ae706e5b999a584,https://github.com/bitcoin/bitcoin/pull/11536#issuecomment-373968276,373968276,
ryanofsky,2018-03-19T15:16:30Z,"@laanwj what do you think about about merging this change? All it is doing is renaming ""account"" to ""label"" so the terms are used more consistently, and then back adding a few ""account"" aliases to preserve backwards compatibility. Review status:\n\nTested ACK\n- jnewbery\n- sjors\n- PierreRochard\n\nutACK\n- sipa\n\nConcept ACK\n- MeshCollider\n- laanwj\n- jonasschnelli\n- MarcoFalke",https://github.com/bitcoin/bitcoin/pull/11536#issuecomment-374248803,374248803,
jnewbery,2018-03-19T19:13:10Z,"Tested ACK d2527bd54e994747d9e24043c91d46c7219d46ac. Thanks for moving the commits around.\n\nSorry - I've added one more nit in the test file.",https://github.com/bitcoin/bitcoin/pull/11536#issuecomment-374333513,374333513,
promag,2017-10-20T23:55:59Z,"Only `std::string` is used, so:\n```cpp\nstd::string label = tr(""Refund from %1"").arg(recipient.authenticatedMerchant).toStdString();\n```",https://github.com/bitcoin/bitcoin/pull/11536#discussion_r146088168,146088168,src/qt/paymentserver.cpp
promag,2017-10-21T00:00:51Z,"Missing `IsDeprecatedRPCEnabled(""accounts"")` and throw? Same below.",https://github.com/bitcoin/bitcoin/pull/11536#discussion_r146088526,146088526,src/wallet/rpcwallet.cpp
meshcollider,2017-10-21T00:49:59Z,"This doesn't actually use -deprecatedrpc though, that's done in #11497?",https://github.com/bitcoin/bitcoin/pull/11536#discussion_r146091239,146091239,src/wallet/rpcwallet.cpp
promag,2017-10-21T00:52:00Z,I made the question because in the release notes says these are deprecated.,https://github.com/bitcoin/bitcoin/pull/11536#discussion_r146091344,146091344,src/wallet/rpcwallet.cpp
laanwj,2017-10-21T06:57:08Z,"This structure is account-specific. It's going away when account support is dropped, as there is no state per label, it's just an identifier. So I suggest keeping it at the current name.",https://github.com/bitcoin/bitcoin/pull/11536#discussion_r146098540,146098540,src/wallet/wallet.h
laanwj,2017-10-21T06:59:03Z,"I think usually when renaming errors we keep the old name around as an alias - people are processing this directly to RPC wrappers, and old client code would still use the old name.",https://github.com/bitcoin/bitcoin/pull/11536#discussion_r146098577,146098577,src/rpc/protocol.h
laanwj,2017-10-21T07:00:10Z,"You don't actually introduce these methods in this PR.\n\nEdit: oh you do, github was hiding things again.",https://github.com/bitcoin/bitcoin/pull/11536#discussion_r146098601,146098601,src/rpc/client.cpp
laanwj,2017-10-21T07:04:31Z,"This allows for no way for the method to know whether they've been called as labelXX or accountXX, as we might want to implement slightly different behavior for both, that seems important information?",https://github.com/bitcoin/bitcoin/pull/11536#discussion_r146098661,146098661,src/wallet/rpcwallet.cpp
ryanofsky,2017-10-21T12:02:24Z,Changed in be9665af50e41a790216ed24133bd52d1674fa4a,https://github.com/bitcoin/bitcoin/pull/11536#discussion_r146103981,146103981,src/qt/paymentserver.cpp
ryanofsky,2017-10-21T12:02:40Z,Added alias in acc1ee8e96b1a7a685b6e095fa92f0d4f59eea39,https://github.com/bitcoin/bitcoin/pull/11536#discussion_r146103986,146103986,src/rpc/protocol.h
ryanofsky,2017-10-21T12:03:07Z,"Added ""to be"" in 52177d174d5777d09134ef67aa38a1df49454183 since after #11031, ""deprecated"" might now mean disabled instead of just slated for removal.",https://github.com/bitcoin/bitcoin/pull/11536#discussion_r146103998,146103998,src/wallet/rpcwallet.cpp
ryanofsky,2017-10-21T12:03:25Z,Reverted in 603759b773db38c14dbcb02b173a5542edaefb05,https://github.com/bitcoin/bitcoin/pull/11536#discussion_r146104006,146104006,src/wallet/wallet.h
ryanofsky,2017-10-21T13:28:07Z,"> This allows for no way for the method to know whether they've been called as labelXX or accountXX, as we might want to implement slightly different behavior for both, that seems important information?\n\nThe intention of this PR is to not introduce any differences between accounts and labels yet, leaving that for #7729 and any future followups. I have a rebased version of #7729 at https://gith",https://github.com/bitcoin/bitcoin/pull/11536#discussion_r146105552,146105552,src/wallet/rpcwallet.cpp
MarcoFalke,2017-10-23T09:06:44Z,"Should be updated, since this is an alias for ""label"". (Same for other occurrences in this file)",https://github.com/bitcoin/bitcoin/pull/11536#discussion_r146205412,146205412,src/wallet/rpcwallet.cpp
ryanofsky,2017-10-23T14:53:29Z,"Good catch, updated in 864a83780bc5f8ac3284d4327205e75ca6d0c703.",https://github.com/bitcoin/bitcoin/pull/11536#discussion_r146292545,146292545,src/wallet/rpcwallet.cpp
promag,2017-11-06T00:01:39Z,"Just for curiosity, why isn't `RPC_INVALID_PARAMETER` used instead?",https://github.com/bitcoin/bitcoin/pull/11536#discussion_r148976261,148976261,src/rpc/protocol.h
Sjors,2017-11-09T15:27:41Z,"Do you want to keep an `address` alias around for this named parameter as well, along with a deprecation warning? Otherwise it should probably be marked as a breaking change. ",https://github.com/bitcoin/bitcoin/pull/11536#discussion_r149993521,149993521,doc/release-notes.md
ryanofsky,2018-01-02T16:54:14Z,"https://github.com/bitcoin/bitcoin/pull/11536#discussion_r146098577\n\n> Just for curiosity, why isn't RPC_INVALID_PARAMETER used instead?\n\nI don't know the history, but I could imagine this was added because it was useful for some client to be able to distinguish this specific error from more generic errors. Similar to how RPC_WALLET_NOT_SPECIFIED was added for bitcoin-cli in #10931.",https://github.com/bitcoin/bitcoin/pull/11536#discussion_r159266639,159266639,src/rpc/protocol.h
ryanofsky,2018-01-02T18:05:05Z,"https://github.com/bitcoin/bitcoin/pull/11536#discussion_r149993521\n\n> Do you want to keep an address alias around for this named parameter as well, along with a deprecation warning? Otherwise it should probably be marked as a breaking change.\n\nThanks. Somehow I missed this comment earlier. Added in 7ae567f87eb474dafd8b3cb1351a0bdfe9e41208\n",https://github.com/bitcoin/bitcoin/pull/11536#discussion_r159280410,159280410,doc/release-notes.md
Sjors,2018-01-16T14:21:32Z,"No point in adding `getlabeladdress` and `getreceivedbylabel` if #7729 gets rid of those? In other words, maybe it's better not to rename those methods and leave their deprecation notice?",https://github.com/bitcoin/bitcoin/pull/11536#discussion_r161769954,161769954,doc/release-notes.md
ryanofsky,2018-01-16T15:18:32Z,"> No point in adding getlabeladdress and getreceivedbylabel if #7729 gets rid of those?\n\n#7729 does add `getlabeladdress`. It doesn't add `getreceivedbylabel`, but `getreceivedbylabel/account` is just a way of finding incoming transactions sent to a set of addresses, equivalent to calling `getaddressesbylabel` and `getreceivedbyaddress`.\n\nNote you can find a rebased version of 7729 here: h",https://github.com/bitcoin/bitcoin/pull/11536#discussion_r161788309,161788309,doc/release-notes.md
jnewbery,2018-01-19T18:21:59Z,"Should this also be update to:\n\n`The label of the receiving address. The default label is \""\"".\n""`\n\n(as above in `listreceivedbyaddress()`)",https://github.com/bitcoin/bitcoin/pull/11536#discussion_r162695528,162695528,src/wallet/rpcwallet.cpp
ryanofsky,2018-02-12T18:50:24Z,"> Should this also be update to:\n\nThanks, updated comment in c1a4f6fc5ea3b6f21413fcb3bc7aa8f67e6ff5e3",https://github.com/bitcoin/bitcoin/pull/11536#discussion_r167650656,167650656,src/wallet/rpcwallet.cpp
Sjors,2018-03-12T20:15:45Z,Maybe add a comment to point out that this is an alias?,https://github.com/bitcoin/bitcoin/pull/11536#discussion_r173932259,173932259,src/wallet/rpcwallet.cpp
Sjors,2018-03-12T20:22:44Z,"""a label""",https://github.com/bitcoin/bitcoin/pull/11536#discussion_r173934265,173934265,src/wallet/rpcwallet.cpp
Sjors,2018-03-12T20:25:37Z,What's the rationale for adding a label field rather than renaming the account field? Because it wasn't deprecated yet?,https://github.com/bitcoin/bitcoin/pull/11536#discussion_r173935118,173935118,doc/release-notes.md
ryanofsky,2018-03-13T18:47:52Z,"https://github.com/bitcoin/bitcoin/pull/11536#discussion_r173935118\n\n> What's the rationale for adding a label field rather than renaming the account field? Because it wasn't deprecated yet?\n\nYes, I don't think there's any reason to break compatibility here. This PR is just about adding better support for labels, not breaking anything that uses accounts.",https://github.com/bitcoin/bitcoin/pull/11536#discussion_r174245169,174245169,doc/release-notes.md
ryanofsky,2018-03-13T18:48:15Z,"https://github.com/bitcoin/bitcoin/pull/11536#discussion_r173934265\n\n> ""a label""\n\nGood catch, fixed in 22af84bab2f5468d3fa3950e6257dacee27ae885 ",https://github.com/bitcoin/bitcoin/pull/11536#discussion_r174245281,174245281,src/wallet/rpcwallet.cpp
ryanofsky,2018-03-13T18:48:22Z,"https://github.com/bitcoin/bitcoin/pull/11536#discussion_r173932259\n\n> Maybe add a comment to point out that this is an alias?\n\nNot sure this is the appropriate place to document an alias. Also I'm a little afraid of breaking the https://github.com/bitcoin/bitcoin/blob/master/contrib/devtools/check-rpc-mappings.py script which has to parse this.",https://github.com/bitcoin/bitcoin/pull/11536#discussion_r174245316,174245316,src/wallet/rpcwallet.cpp
jnewbery,2018-03-19T15:34:06Z,"Nit: language is perhaps a little clumsy: `...been added to replace to be deprecated...`. Perhaps prefer something like:\n\n```\nWallet `getlabeladdress`, `getreceivedbylabel`, `listreceivedbylabel`, and\n`setlabel` RPCs have been added to replace `getaccountaddress`,\n`getreceivedbyaccount`, `listreceivedbyaccount`, and `setaccount` RPCs,\nwhich are now deprecated. There is no change in beh",https://github.com/bitcoin/bitcoin/pull/11536#discussion_r175479018,175479018,doc/release-notes.md
ryanofsky,2018-03-19T18:07:06Z,"> Nit: language is perhaps a little clumsy\n\nUpdated in 843ee063efc2afe20ef0dbe076bd5989bfb5c59c",https://github.com/bitcoin/bitcoin/pull/11536#discussion_r175533391,175533391,doc/release-notes.md
jnewbery,2018-03-19T19:06:51Z,This (and the line below) can be updated to `(with label arguments)`,https://github.com/bitcoin/bitcoin/pull/11536#discussion_r175552038,175552038,test/functional/wallet_labels.py
ryanofsky,2018-03-19T19:18:22Z,"> This (and the line below) can be updated to (with label arguments)\n\nThis is actually intentional. `sendfrom` and `move` are account-specific and deprecated and won't take label arguments. Idea is that we support receiving *at* addresses but not really sending *from* addresses.",https://github.com/bitcoin/bitcoin/pull/11536#discussion_r175555008,175555008,test/functional/wallet_labels.py
jnewbery,2018-03-19T19:44:33Z,"ok, makes sense. I was confused by the code lower down in the test case:\n\n```\n        # Check that sendfrom label reduces listaccounts balances.\n        for i, label in enumerate(labels):\n            to_label = labels[(i+1) % len(labels)]\n            node.sendfrom(label.name, to_label.receive_address, amount_to_send)\n```",https://github.com/bitcoin/bitcoin/pull/11536#discussion_r175561643,175561643,test/functional/wallet_labels.py
