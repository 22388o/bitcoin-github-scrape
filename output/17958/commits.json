[
  {
    "sha": "cdbd38df1312473252340a4f472bb2273ab94074",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjZGJkMzhkZjEzMTI0NzMyNTIzNDBhNGY0NzJiYjIyNzNhYjk0MDc0",
    "commit": {
      "author": {
        "name": "Harris",
        "email": "brakmic@gmail.com",
        "date": "2020-01-27T17:48:59Z"
      },
      "committer": {
        "name": "Harris",
        "email": "brakmic@gmail.com",
        "date": "2020-01-27T17:48:59Z"
      },
      "message": "rpc: implement getgeneralinfo",
      "tree": {
        "sha": "a5fbbf9ed9ac1911d139d6d4dc3d750c29c621dc",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a5fbbf9ed9ac1911d139d6d4dc3d750c29c621dc"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cdbd38df1312473252340a4f472bb2273ab94074",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQEzBAABCAAdFiEED2bWxOeRx//n2QOeJiaFvHjtEfsFAl4vIosACgkQJiaFvHjt\nEfv83Qf9EAK02tmYQvAie+Vk3tbgvW1KAOcxo3fZMdVyD1TEPK+LmiJCIExhlJDb\nmnjz2ejwdgZbijmbVyn5X1fsxhIOxbYb4d9E6F4z5vLuV3F2G3LvXthkXT3tlJ86\n8/SfJ9n9CSjVTOxBlUviQZ0jbtXXlupP30Zi11ws/TTT/BkVaawesHHda2WAcmbA\n2KxppAoX0ACW4VZkE9hqfwWoJYjPljpUZEXj9GDjwvs+FLE88F7K6jMwhG3Pjh7m\noAbz9uSweXr1eKDTKfXzMqT1ZYrIqZAU6e9eQFLprGiqzstd4iQ8Y7/18zD/+6Iw\nBnVSNQRx+HLjszEBIcDTQIHQgwoYSA==\n=YLVg\n-----END PGP SIGNATURE-----",
        "payload": "tree a5fbbf9ed9ac1911d139d6d4dc3d750c29c621dc\nparent a654626f076a72416a3d354218d7107571d6caaf\nauthor Harris <brakmic@gmail.com> 1580147339 +0100\ncommitter Harris <brakmic@gmail.com> 1580147339 +0100\n\nrpc: implement getgeneralinfo\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/cdbd38df1312473252340a4f472bb2273ab94074",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/cdbd38df1312473252340a4f472bb2273ab94074",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/cdbd38df1312473252340a4f472bb2273ab94074/comments",
    "author": {
      "login": "brakmic",
      "id": 56779,
      "node_id": "MDQ6VXNlcjU2Nzc5",
      "avatar_url": "https://avatars.githubusercontent.com/u/56779?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brakmic",
      "html_url": "https://github.com/brakmic",
      "followers_url": "https://api.github.com/users/brakmic/followers",
      "following_url": "https://api.github.com/users/brakmic/following{/other_user}",
      "gists_url": "https://api.github.com/users/brakmic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brakmic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brakmic/subscriptions",
      "organizations_url": "https://api.github.com/users/brakmic/orgs",
      "repos_url": "https://api.github.com/users/brakmic/repos",
      "events_url": "https://api.github.com/users/brakmic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brakmic/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "brakmic",
      "id": 56779,
      "node_id": "MDQ6VXNlcjU2Nzc5",
      "avatar_url": "https://avatars.githubusercontent.com/u/56779?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brakmic",
      "html_url": "https://github.com/brakmic",
      "followers_url": "https://api.github.com/users/brakmic/followers",
      "following_url": "https://api.github.com/users/brakmic/following{/other_user}",
      "gists_url": "https://api.github.com/users/brakmic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brakmic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brakmic/subscriptions",
      "organizations_url": "https://api.github.com/users/brakmic/orgs",
      "repos_url": "https://api.github.com/users/brakmic/repos",
      "events_url": "https://api.github.com/users/brakmic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brakmic/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "a654626f076a72416a3d354218d7107571d6caaf",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a654626f076a72416a3d354218d7107571d6caaf",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/a654626f076a72416a3d354218d7107571d6caaf"
      }
    ],
    "stats": {
      "total": 62,
      "additions": 62,
      "deletions": 0
    },
    "files": [
      {
        "sha": "d2bdbca6243106d28ebb02757968dd4e452c76e0",
        "filename": "src/rpc/misc.cpp",
        "status": "modified",
        "additions": 33,
        "deletions": 0,
        "changes": 33,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/cdbd38df1312473252340a4f472bb2273ab94074/src/rpc/misc.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/cdbd38df1312473252340a4f472bb2273ab94074/src/rpc/misc.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/misc.cpp?ref=cdbd38df1312473252340a4f472bb2273ab94074",
        "patch": "@@ -14,6 +14,8 @@\n #include <util/strencodings.h>\n #include <util/system.h>\n #include <util/validation.h>\n+#include <clientversion.h>\n+#include <net.h>\n \n #include <stdint.h>\n #include <tuple>\n@@ -449,6 +451,36 @@ static UniValue getmemoryinfo(const JSONRPCRequest& request)\n     }\n }\n \n+static UniValue getgeneralinfo(const JSONRPCRequest& request)\n+{\n+    RPCHelpMan{\"getgeneralinfo\",\n+                \"\\nReturns data about the bitcoin daemon.\\n\",\n+                {},\n+                RPCResult{\n+                \"  {\\n\"\n+                \"    \\\"clientversion\\\": \\\"string\\\",     (string) Client version\\n\"\n+                \"    \\\"useragent\\\":\\\"string\\\",          (string) Client name\\n\"\n+                \"    \\\"datadir\\\":\\\"path\\\",              (string) Data directory path\\n\"\n+                \"    \\\"blocksdir\\\":\\\"path\\\",            (string) Blocks directory path\\n\"\n+                \"    \\\"startuptime\\\":\\\"number\\\",      (number) Startup time\\n\"\n+                \"  }\\n\"\n+                },\n+                RPCExamples{\n+                    HelpExampleCli(\"getgeneralinfo\", \"\")\n+            + HelpExampleRpc(\"getgeneralinfo\", \"\")\n+                },\n+            }.Check(request);\n+\n+        UniValue obj(UniValue::VOBJ);\n+        obj.pushKV(\"clientversion\", FormatFullVersion());\n+        obj.pushKV(\"useragent\", strSubVersion);\n+        obj.pushKV(\"datadir\", GetDataDir().string());\n+        obj.pushKV(\"blocksdir\", GetBlocksDir().string());\n+        obj.pushKV(\"startuptime\", GetStartupTime());\n+        return obj;\n+\n+}\n+\n static void EnableOrDisableLogCategories(UniValue cats, bool enable) {\n     cats = cats.get_array();\n     for (unsigned int i = 0; i < cats.size(); ++i) {\n@@ -560,6 +592,7 @@ static const CRPCCommand commands[] =\n { //  category              name                      actor (function)         argNames\n   //  --------------------- ------------------------  -----------------------  ----------\n     { \"control\",            \"getmemoryinfo\",          &getmemoryinfo,          {\"mode\"} },\n+    { \"control\",            \"getgeneralinfo\",         &getgeneralinfo,         {} },\n     { \"control\",            \"logging\",                &logging,                {\"include\", \"exclude\"}},\n     { \"util\",               \"validateaddress\",        &validateaddress,        {\"address\"} },\n     { \"util\",               \"createmultisig\",         &createmultisig,         {\"nrequired\",\"keys\",\"address_type\"} },"
      },
      {
        "sha": "bb2b6c049a0d37408e9b72390fcdb2d6f13bfac6",
        "filename": "test/functional/rpc_getgeneralinfo.py",
        "status": "added",
        "additions": 28,
        "deletions": 0,
        "changes": 28,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/cdbd38df1312473252340a4f472bb2273ab94074/test/functional/rpc_getgeneralinfo.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/cdbd38df1312473252340a4f472bb2273ab94074/test/functional/rpc_getgeneralinfo.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/rpc_getgeneralinfo.py?ref=cdbd38df1312473252340a4f472bb2273ab94074",
        "patch": "@@ -0,0 +1,28 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test the getgeneralinfo RPC.\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import assert_equal, try_rpc\n+\n+class GetGeneralInfoTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = False\n+        self.num_nodes = 1\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_cli()\n+\n+    def run_test(self):\n+        \"\"\"Test getgeneralinfo.\"\"\"\n+        \"\"\"Check if 'getgeneralinfo' is callable.\"\"\"\n+        try_rpc(None, None, self.nodes[0].getgeneralinfo, None, None)\n+        \"\"\"Check if 'getgeneralinfo' is idempotent (multiple requests return same data).\"\"\"\n+        json1 = self.nodes[0].getgeneralinfo()\n+        json2 = self.nodes[0].getgeneralinfo()\n+        assert_equal(json1, json2)\n+\n+if __name__ == '__main__':\n+    GetGeneralInfoTest().main()"
      },
      {
        "sha": "de8744b893236f2f7219ba626d9e6bf809fe1d82",
        "filename": "test/functional/test_runner.py",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/cdbd38df1312473252340a4f472bb2273ab94074/test/functional/test_runner.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/cdbd38df1312473252340a4f472bb2273ab94074/test/functional/test_runner.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/test_runner.py?ref=cdbd38df1312473252340a4f472bb2273ab94074",
        "patch": "@@ -213,6 +213,7 @@\n     'feature_blocksdir.py',\n     'feature_config_args.py',\n     'rpc_getaddressinfo_labels_purpose_deprecation.py',\n+    'rpc_getgeneralinfo.py',\n     'rpc_help.py',\n     'feature_help.py',\n     'feature_shutdown.py',"
      }
    ]
  }
]