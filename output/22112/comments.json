[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/851589805",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#issuecomment-851589805",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22112",
    "id": 851589805,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1MTU4OTgwNQ==",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?u=d06d2903ce6ad8b9d0c66ef9225fa21adfe22c7f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-31T16:34:32Z",
    "updated_at": "2021-05-31T16:34:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "TODO: see if something has to be done about this assert:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/8462cd56010a8beadf95d4f3cb1357ca9d88493b/src/bench/addrman.cpp#L91",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/851589805/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/851590531",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#issuecomment-851590531",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22112",
    "id": 851590531,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1MTU5MDUzMQ==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-31T16:36:36Z",
    "updated_at": "2021-05-31T16:36:36Z",
    "author_association": "MEMBER",
    "body": "I think that's just a way to test that the returned address object isn't empty. Should probably replace it with another test.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/851590531/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/853143208",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#issuecomment-853143208",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22112",
    "id": 853143208,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1MzE0MzIwOA==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-02T15:51:40Z",
    "updated_at": "2021-06-02T15:52:09Z",
    "author_association": "MEMBER",
    "body": "Concept ACK, earlier I was convinced it would be better to get rid of ports completely for I2P, but at the time I thought it didn't exist as a concept there. I was unaware that the concept *does* exists for newer versions of the protocol.\r\n\r\nThis is more forward compatible with future versions of `i2pd` and new SAM protocol, so seems better to me.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/853143208/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/853781755",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#issuecomment-853781755",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22112",
    "id": 853781755,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1Mzc4MTc1NQ==",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?u=d06d2903ce6ad8b9d0c66ef9225fa21adfe22c7f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-03T10:58:03Z",
    "updated_at": "2021-06-03T10:58:03Z",
    "author_association": "CONTRIBUTOR",
    "body": "> ... I was convinced it would be better to get rid of ports completely for I2P, but at the time I thought it didn't exist as a concept there. I was unaware that the concept does exists for newer versions of the protocol.\r\n\r\nMe too!",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/853781755/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/853815021",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#issuecomment-853815021",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22112",
    "id": 853815021,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg1MzgxNTAyMQ==",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?u=d06d2903ce6ad8b9d0c66ef9225fa21adfe22c7f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-03T12:00:32Z",
    "updated_at": "2021-06-03T12:00:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "> TODO: see if something has to be done about this assert:\r\n> \r\n> https://github.com/bitcoin/bitcoin/blob/8462cd56010a8beadf95d4f3cb1357ca9d88493b/src/bench/addrman.cpp#L91\r\n\r\nThat seems to be ok as it is - addresses being used in the bench are generated, not taken from real-world addrman. The code that generates them takes care to avoid port 0:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/a9435e34457e0bfebd22e574fe63428537948aeb/src/bench/addrman.cpp#L35-L37\r\n\r\nSo it might as well generate I2P addresses with !=0 ports. Currently it generates only IPv6 addresses.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/853815021/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/866677772",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#issuecomment-866677772",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22112",
    "id": 866677772,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2NjY3Nzc3Mg==",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?u=d06d2903ce6ad8b9d0c66ef9225fa21adfe22c7f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-23T09:22:41Z",
    "updated_at": "2021-06-23T09:22:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "`4401bb56cf...a9cacd29a1`: add a test and a comment\r\n\r\n> outbound connections are no longer made to any of the 13 I2P addresses in my addrman (all with port 8333), which is a bit of collateral annoyance for these nodes\r\n\r\nYes, that's really unfortunate and annoying. I wonder if it can be avoided...",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/866677772/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/866677980",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#issuecomment-866677980",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22112",
    "id": 866677980,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2NjY3Nzk4MA==",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?u=3f68150a5f30acd541d1ed279376cd20b78046b1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-23T09:23:01Z",
    "updated_at": "2021-06-23T09:23:01Z",
    "author_association": "MEMBER",
    "body": "ISTM with this change we would need a way to manually or automatically convert the existing I2P entries in the addrman from port 8333 to 0. ",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/866677980/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/866686056",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#issuecomment-866686056",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22112",
    "id": 866686056,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2NjY4NjA1Ng==",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?u=3f68150a5f30acd541d1ed279376cd20b78046b1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-23T09:35:03Z",
    "updated_at": "2021-06-23T09:36:56Z",
    "author_association": "MEMBER",
    "body": "> `4401bb56cf...a9cacd29a1`: add a test and a comment\r\n\r\nAdd the test to the test runner?  ",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/866686056/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/866694441",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#issuecomment-866694441",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22112",
    "id": 866694441,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2NjY5NDQ0MQ==",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?u=d06d2903ce6ad8b9d0c66ef9225fa21adfe22c7f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-23T09:48:06Z",
    "updated_at": "2021-06-23T09:48:48Z",
    "author_association": "CONTRIBUTOR",
    "body": "`a9cacd29a1...d6255891da`: add the newly added test to `test_runner.py` (forgotten in the previous push)\r\n\r\n> Add the test to the test runner?\r\n\r\nYes :hear_no_evil: ",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/866694441/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/866721847",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#issuecomment-866721847",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22112",
    "id": 866721847,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2NjcyMTg0Nw==",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?u=d06d2903ce6ad8b9d0c66ef9225fa21adfe22c7f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-23T10:29:03Z",
    "updated_at": "2021-06-23T10:29:03Z",
    "author_association": "CONTRIBUTOR",
    "body": "`d6255891da...28f98950ee`: rename the functional test to match the naming convention",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/866721847/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/866721927",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#issuecomment-866721927",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22112",
    "id": 866721927,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2NjcyMTkyNw==",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?u=3f68150a5f30acd541d1ed279376cd20b78046b1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-23T10:29:09Z",
    "updated_at": "2021-06-23T10:29:34Z",
    "author_association": "MEMBER",
    "body": "`test_runner.py#check_script_prefixes()` is unhappy about the name of the test file\r\n\r\nedit: snap!",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/866721927/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/866724349",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#issuecomment-866724349",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22112",
    "id": 866724349,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2NjcyNDM0OQ==",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?u=3f68150a5f30acd541d1ed279376cd20b78046b1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-23T10:32:54Z",
    "updated_at": "2021-06-23T10:32:54Z",
    "author_association": "MEMBER",
    "body": "ACK 28f98950ee89dafcb75b131b810f5a933c2977b3 modulo https://github.com/bitcoin/bitcoin/pull/22112#issuecomment-866677980",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/866724349/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/866902236",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#issuecomment-866902236",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22112",
    "id": 866902236,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2NjkwMjIzNg==",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?u=3f68150a5f30acd541d1ed279376cd20b78046b1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-23T14:46:12Z",
    "updated_at": "2021-06-23T14:46:12Z",
    "author_association": "MEMBER",
    "body": "IRC discussion with @vasild and I regarding whether the remedies here and in #21514 are less desirable than leaving the \"double connections\" issue unresolved: https://www.erisian.com.au/bitcoin-core-dev/log-2021-06-23.html#l-167",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/866902236/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/870469254",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#issuecomment-870469254",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22112",
    "id": 870469254,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3MDQ2OTI1NA==",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?u=d06d2903ce6ad8b9d0c66ef9225fa21adfe22c7f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-29T10:20:00Z",
    "updated_at": "2021-06-29T10:20:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "`28f98950ee..0c6db5b87f`: append a new commit that changes the ports of existent I2P addrman entries to 0.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/870469254/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/870525146",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#issuecomment-870525146",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22112",
    "id": 870525146,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3MDUyNTE0Ng==",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?u=d06d2903ce6ad8b9d0c66ef9225fa21adfe22c7f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-29T11:48:30Z",
    "updated_at": "2021-06-29T11:48:30Z",
    "author_association": "CONTRIBUTOR",
    "body": "`0c6db5b87f...b336f12eda`: no need to lock `CAddrMan::cs` in the `ResetI2PPorts()` method, it is already locked by the caller and in `master` the mutex is not recursive anymore.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/870525146/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/870585034",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#issuecomment-870585034",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22112",
    "id": 870585034,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3MDU4NTAzNA==",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?u=d06d2903ce6ad8b9d0c66ef9225fa21adfe22c7f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-29T13:09:26Z",
    "updated_at": "2021-06-29T13:09:26Z",
    "author_association": "CONTRIBUTOR",
    "body": "[Coverage report](https://people.freebsd.org/~vd/pr22112_b336f12ed_coverage/modified_and_not_covered.html) for modified lines by this PR and not covered by tests. There is just one line which was also not covered before this PR (this PR changed `Params().GetDefaultPort()` to `PORT_SAM31` in that line).\r\n\r\nThe new method added in the last commit is [fully covered](https://people.freebsd.org/~vd/pr22112_b336f12ed_coverage/src/addrman.cpp.gcov.html#670) (I don't know what that red minus is on line 731, but it looks bogus).\r\n\r\nThe last commit `addrman: reset I2P ports to 0 when loading from disk` is somewhat optional, feel free to ACK the last but one commit. From the list in: https://github.com/bitcoin/bitcoin/issues/21389#issuecomment-866925116 this full PR implements option 3. Without the last commit it implements option 2.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/870585034/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/871537613",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#issuecomment-871537613",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22112",
    "id": 871537613,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3MTUzNzYxMw==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-30T16:11:17Z",
    "updated_at": "2021-07-09T21:02:48Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/871537613/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/871687616",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#issuecomment-871687616",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22112",
    "id": 871687616,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3MTY4NzYxNg==",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?u=3f68150a5f30acd541d1ed279376cd20b78046b1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-30T19:58:52Z",
    "updated_at": "2021-07-01T14:51:35Z",
    "author_association": "MEMBER",
    "body": "Tested this rebased to master, then restarted the node after backing up `peers.dat`:\r\n\r\n- `Loaded 65986 addresses from peers.dat`\r\n- The number of I2P addresses reported by `-addrinfo` and `getnodeaddresses 0 i2p` dropped from 15 to 5 (all have port 0 as expected)\r\n- `I2P: SAM session created: my address=zsxwyo6qcn3chqzwxnseusqgsnuw3maqnztkiypyfxtya4snkoka.b32.i2p:0`\r\n- No outbound I2P connections (set using `addnode` without port number in the conf file), 4 inbound ones after a minute\r\n\r\nRestarted again, no change:\r\n\r\n- `Loaded 66102 addresses from peers.dat`\r\n- 5 I2P addresses known (port 0 as expected)\r\n- `I2P: SAM session created: my address=zsxwyo6qcn3chqzwxnseusqgsnuw3maqnztkiypyfxtya4snkoka.b32.i2p:0`\r\n- No outbound I2P connections (as above), 4 inbound ones after a few minutes\r\n- Tried `addpeeraddress` to re-add the I2P addresses, it returns `\"success\": true` but the address isn't added.\r\n\r\nThe outbound I2P connections via `addnode` sans port number needs to be resolved.\r\n\r\nIt's unfortunate to lose I2P addresses due to the bucket repositioning (10 out of 15, in my case), though I suppose it's a minor inconvenience affecting only a small number of existing nodes running I2P.\r\n\r\nPort 0 is default in SAM 3.2 and up per https://geti2p.net/en/docs/api (and portful routing starts from SAM 3.3 IIUC) but port 0 looks odd when all the other networks default to another value (8333, etc). Users may think it's a bug if not documented, e.g. in `doc/i2p.md` and the release notes.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/871687616/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/872223073",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#issuecomment-872223073",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22112",
    "id": 872223073,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3MjIyMzA3Mw==",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?u=3f68150a5f30acd541d1ed279376cd20b78046b1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-01T12:56:23Z",
    "updated_at": "2021-07-01T13:11:15Z",
    "author_association": "MEMBER",
    "body": "```\r\n$ test/lint/lint-circular-dependencies.sh\r\nA new circular dependency in the form of \"chainparams -> i2p -> chainparams\" appears to have been introduced.\r\n```\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/872223073/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/872224803",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#issuecomment-872224803",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22112",
    "id": 872224803,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3MjIyNDgwMw==",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?u=d06d2903ce6ad8b9d0c66ef9225fa21adfe22c7f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-01T12:58:58Z",
    "updated_at": "2021-07-01T13:18:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "`b336f12eda...e4684144e9`:\r\n\r\n* If a collision occurs due to re-bucketing of the I2P address with the changed port to 0, then remove the other entry, not the I2P one. Looks like I2P addresses are more precious than a random one from an addrman filled mostly with IPv4 addresses.\r\n\r\n* If `addnode=foo.b32.i2p` is specified (without port) then we would do something like `Lookup(str, GetDefaultPort())` and would end up with `CService` with address `foo.b32.i2p` and port `8333` which is not what we want (we want port `0`) (thanks, @jonatack for discovering this!). So, implement @sipa's [suggestion](https://github.com/bitcoin/bitcoin/pull/22112#discussion_r644216009) of network-dependent default port.\r\n\r\n* Took some suggestions.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/872224803/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/872246188",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#issuecomment-872246188",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22112",
    "id": 872246188,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3MjI0NjE4OA==",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?u=d06d2903ce6ad8b9d0c66ef9225fa21adfe22c7f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-01T13:25:46Z",
    "updated_at": "2021-07-01T13:25:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "`e4684144e9...36cf2ca392`: define the default SAM 3.1 port in `netaddress.h`, which is included in both `i2p.h` and `chainparams.h` to avoid circular dependency `i2p.h` -> `chainparams.h` -> `i2p.h`",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/872246188/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/872293292",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#issuecomment-872293292",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22112",
    "id": 872293292,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3MjI5MzI5Mg==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-01T14:26:26Z",
    "updated_at": "2021-07-01T14:26:26Z",
    "author_association": "MEMBER",
    "body": "Added 22.0 milestone (@jonatack mentioned that one of the solutions to the [I2P port problem](https://github.com/bitcoin/bitcoin/issues/21389#issuecomment-866925116) needs to make it in, and I think that makes sense. From what I understand this PR is preferred.)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/872293292/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/872902257",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#issuecomment-872902257",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22112",
    "id": 872902257,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3MjkwMjI1Nw==",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?u=d06d2903ce6ad8b9d0c66ef9225fa21adfe22c7f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-02T10:41:18Z",
    "updated_at": "2021-07-02T10:41:18Z",
    "author_association": "CONTRIBUTOR",
    "body": "`36cf2ca392...ba6d18861b`: rebase in order to pull `doc/i2p.md` and add a note to it for I2P ports being forced to 0.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/872902257/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/874001279",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#issuecomment-874001279",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22112",
    "id": 874001279,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3NDAwMTI3OQ==",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?u=3f68150a5f30acd541d1ed279376cd20b78046b1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-05T10:28:09Z",
    "updated_at": "2021-07-05T10:28:09Z",
    "author_association": "MEMBER",
    "body": "Re-reviewing and testing.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/874001279/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/874049237",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#issuecomment-874049237",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22112",
    "id": 874049237,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3NDA0OTIzNw==",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?u=d06d2903ce6ad8b9d0c66ef9225fa21adfe22c7f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-05T11:46:22Z",
    "updated_at": "2021-07-05T11:46:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "`ba6d18861b...14db11782c`: minor rewording in `doc/i2p.md`",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/874049237/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/874227307",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#issuecomment-874227307",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22112",
    "id": 874227307,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3NDIyNzMwNw==",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?u=d06d2903ce6ad8b9d0c66ef9225fa21adfe22c7f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-05T16:30:46Z",
    "updated_at": "2021-07-05T16:30:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "> ... noodling around adding things like, say, `++nTried` at the bottom of the last loop in `CAddrMan::ResetI2PPorts()`, didn't break anything either.\r\n\r\nThis should be detected by `CAddrMan::Check()` (only enabled if `DEBUG_ADDRMAN` is defined):\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/271155984574a5bba9619d8f6da9bb0606d93f8c/src/addrman.cpp#L438\r\n\r\n> Questions, should any of these be updated?\r\n> \r\n>     * the `-port` config help in `src/init.cpp`\r\n\r\nAdd something like \"not relevant for I2P\"?\r\n \r\n>     * `GetDefaultPort()` in CConnman::ThreadDNSAddressSeed()\r\n> \r\n>     * `GetListenPort()`\r\n\r\nI think those are ok.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/874227307/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/874242604",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#issuecomment-874242604",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22112",
    "id": 874242604,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3NDI0MjYwNA==",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?u=3f68150a5f30acd541d1ed279376cd20b78046b1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-05T17:08:27Z",
    "updated_at": "2021-07-05T17:08:27Z",
    "author_association": "MEMBER",
    "body": "> > ... noodling around adding things like, say, `++nTried` at the bottom of the last loop in `CAddrMan::ResetI2PPorts()`, didn't break anything either.\r\n> \r\n> This should be detected by `CAddrMan::Check()` (only enabled if `DEBUG_ADDRMAN` is defined):\r\n> \r\n> https://github.com/bitcoin/bitcoin/blob/271155984574a5bba9619d8f6da9bb0606d93f8c/src/addrman.cpp#L438\r\n\r\nYes, I'll reverify if `CAddrMan::Check_()` is actually running the way I've been configuring.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/874242604/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/874634410",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#issuecomment-874634410",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22112",
    "id": 874634410,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3NDYzNDQxMA==",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?u=3f68150a5f30acd541d1ed279376cd20b78046b1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-06T10:09:44Z",
    "updated_at": "2021-07-06T10:09:44Z",
    "author_association": "MEMBER",
    "body": "re-ACK 0b0ee030ea6f2b6508e8660dffc40b40c6aa2644 per `git diff 14db117 0b0ee03`\r\n\r\n\r\n> * the `-port` config help in `src/init.cpp`\r\n> \r\n> Add something like \"not relevant for I2P\"?\r\n\r\nsgtm",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/874634410/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/877046082",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#issuecomment-877046082",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22112",
    "id": 877046082,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3NzA0NjA4Mg==",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?u=d06d2903ce6ad8b9d0c66ef9225fa21adfe22c7f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-09T09:21:25Z",
    "updated_at": "2021-07-09T09:21:25Z",
    "author_association": "CONTRIBUTOR",
    "body": "`0b0ee030ea...4101ec9d2e`: rebase due to conflicts, clarify `-port=` help wrt I2P.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/877046082/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/877280880",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#issuecomment-877280880",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22112",
    "id": 877280880,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3NzI4MDg4MA==",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?u=3f68150a5f30acd541d1ed279376cd20b78046b1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-09T15:46:52Z",
    "updated_at": "2021-07-10T09:39:18Z",
    "author_association": "MEMBER",
    "body": "Shut down the node, deleted the new peers.dat, recopied my backed-up peers.dat (`cp ~/.bitcoin/peers-bak.dat ~/.bitcoin/peers.dat`) and restarted.  Unlike bootstrapping with no peers.dat and addnode peers, all of the I2P addresses in `getnodeaddresses 0 i2p` have port 0 (and as above, `getaddednodeinfo` as well).\r\n\r\n```\r\n2021-07-09T15:39:34Z Loaded 68521 addresses from peers.dat  2688ms\r\n2021-07-09T15:39:34Z Loaded 2 addresses from \"anchors.dat\"\r\n```\r\n```\r\n        ipv4    ipv6   onion     i2p   total   block  manual\r\nin         0       0       0       4       4\r\nout        7       0       5       6      18       2       8\r\ntotal      7       0       5      10      22\r\n```\r\n```\r\n$ ./src/bitcoin-cli -rpcwait -addrinfo\r\n{\r\n  \"addresses_known\": {\r\n    \"ipv4\": 50863,\r\n    \"ipv6\": 7727,\r\n    \"torv2\": 0,\r\n    \"torv3\": 5557,\r\n    \"i2p\": 16,\r\n    \"total\": 64163\r\n  }\r\n}\r\n```\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/877280880/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/877599986",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#issuecomment-877599986",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22112",
    "id": 877599986,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3NzU5OTk4Ng==",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?u=3f68150a5f30acd541d1ed279376cd20b78046b1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-10T08:53:52Z",
    "updated_at": "2021-07-10T09:07:39Z",
    "author_association": "MEMBER",
    "body": "Repeated the bootstrapping steps in https://github.com/bitcoin/bitcoin/pull/22112#pullrequestreview-703116399 but with no `addnode` peers and with `-dnsseed=0`.\r\n\r\n```\r\n2021-07-10T08:44:03Z Missing or invalid file ~/.bitcoin/peers.dat\r\n2021-07-10T08:44:04Z DNS seeding disabled\r\n2021-07-10T08:44:05Z Adding fixed seeds as -dnsseed=0, -addnode is not provided and all -seednode(s) attempted\r\n```\r\n```\r\n        ipv4    ipv6   onion     i2p   total   block\r\nin         0       0       0       2       2\r\nout        9       0       1       0      10       2\r\ntotal      9       0       1       2      12\r\n```\r\n```\r\n$ ./src/bitcoin-cli -rpcwait -addrinfo\r\n{\r\n  \"addresses_known\": {\r\n    \"ipv4\": 6281,\r\n    \"ipv6\": 1076,\r\n    \"torv2\": 0,\r\n    \"torv3\": 58,\r\n    \"i2p\": 5,\r\n    \"total\": 7420\r\n  }\r\n}\r\n$ ./src/bitcoin-cli getaddednodeinfo\r\n[\r\n]\r\n```\r\nAll addresses returned by `getnodeaddresses 0 i2p` have port 0.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/877599986/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/877602702",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#issuecomment-877602702",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22112",
    "id": 877602702,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3NzYwMjcwMg==",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?u=3f68150a5f30acd541d1ed279376cd20b78046b1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-10T09:11:20Z",
    "updated_at": "2021-07-11T09:45:42Z",
    "author_association": "MEMBER",
    "body": "After a few minutes, one new `getnodeaddresses 0 i2p` entry from an inbound peer had port 8333. Restarted the node and that address now has port 0. Edit: a day later, `getnodeaddresses 0 i2p` returns two more (inbound) I2P peers with port 8333. Of course, these inbound peers aren't running this branch.\r\n\r\nStill seeing the double connection issue (all report port 0); and in some cases it is fairly long-lasting (see screenshots). Presumably, this also occurs due to those peers not running this branch.\r\n\r\n![Screenshot from 2021-07-10 11-05-40](https://user-images.githubusercontent.com/2415484/125158129-715c9380-e15e-11eb-848e-accefe73e6f2.png)\r\n\r\n![Screenshot from 2021-07-10 18-23-01](https://user-images.githubusercontent.com/2415484/125190396-71c36000-e22c-11eb-9c60-cbc965b0bbf5.png)\r\n\r\n![Screenshot from 2021-07-10 21-04-17](https://user-images.githubusercontent.com/2415484/125190395-712ac980-e22c-11eb-88e4-15bdd4648d09.png)\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/877602702/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/878162733",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#issuecomment-878162733",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22112",
    "id": 878162733,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3ODE2MjczMw==",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?u=d06d2903ce6ad8b9d0c66ef9225fa21adfe22c7f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-12T10:27:35Z",
    "updated_at": "2021-07-12T10:27:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "It is expected to have I2P addresses with port 8333 appearing in addrman - if some of our peers relays such one to us. After a restart the port will be changed to 0. It is important to remove this behavior (last commit from this PR) before real nodes appear that advertise themselves with port 8333 and only accept connections to that port (must be using SAM>=3.2 and deliberately close the connection if TO_PORT is not 8333).\r\n\r\nIt is also expected that a node running `master` can connect to a node running this PR two times as the fix is when initiating a connection (`master` does not have it). Here is how it looks like:\r\n\r\n```sh\r\nmaster$ bitcoin-cli addnode pr.b32.i2p:8333 onetry\r\nmaster$ bitcoin-cli addnode pr.b32.i2p:0 onetry\r\nmaster$ bitcoin-cli getpeerinfo |jq -r 'map(select(.addr |contains(\"pr.b32.i2p\"))) |map({id: .id, addr: .addr, addrbind: .addrbind, inbound: .inbound})'\r\n[\r\n  {\r\n    \"id\": 0,\r\n    \"addr\": \"pr.b32.i2p:8333\",\r\n    \"addrbind\": \"master.b32.i2p:8333\",\r\n    \"inbound\": false\r\n  },\r\n  {\r\n    \"id\": 1,\r\n    \"addr\": \"pr.b32.i2p:0\",\r\n    \"addrbind\": \"master.b32.i2p:8333\",\r\n    \"inbound\": false\r\n  }\r\n]\r\n\r\npr$ bitcoin-cli getpeerinfo |jq -r 'map(select(.addr |contains(\"master.b32.i2p\"))) |map({id: .id, addr: .addr, addrbind: .addrbind, inbound: .inbound})'\r\n[\r\n  {\r\n    \"id\": 23708,\r\n    \"addr\": \"master.b32.i2p:0\",\r\n    \"addrbind\": \"pr.b32.i2p:0\",\r\n    \"inbound\": true\r\n  },\r\n  {\r\n    \"id\": 23717,\r\n    \"addr\": \"master.b32.i2p:0\",\r\n    \"addrbind\": \"pr.b32.i2p:0\",\r\n    \"inbound\": true\r\n  }\r\n]\r\n\r\n```\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/878162733/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/878182734",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#issuecomment-878182734",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22112",
    "id": 878182734,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3ODE4MjczNA==",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?u=3f68150a5f30acd541d1ed279376cd20b78046b1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-12T11:01:11Z",
    "updated_at": "2021-07-12T11:01:11Z",
    "author_association": "MEMBER",
    "body": "Yes, I came to the same conclusions.\n\nFWIW tested the previous push and this one for 3 days each.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/878182734/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/879039395",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#issuecomment-879039395",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22112",
    "id": 879039395,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3OTAzOTM5NQ==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-13T12:19:48Z",
    "updated_at": "2021-07-13T12:19:48Z",
    "author_association": "MEMBER",
    "body": "> It is important to remove this behavior (last commit from this PR) before real nodes appear that advertise themselves with port 8333 and only accept connections to that port (must be using SAM>=3.2 and deliberately close the connection if TO_PORT is not 8333).\r\n\r\nThat's pretty easy to forget. Let's open an issue for this once this is merged.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/879039395/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/879048417",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#issuecomment-879048417",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22112",
    "id": 879048417,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3OTA0ODQxNw==",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?u=d06d2903ce6ad8b9d0c66ef9225fa21adfe22c7f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-13T12:34:18Z",
    "updated_at": "2021-07-13T12:34:18Z",
    "author_association": "CONTRIBUTOR",
    "body": "> That's pretty easy to forget. Let's open an issue for this once this is merged.\r\n\r\nI will take care about it. Maybe even a draft-PR that lingers for e.g. 6 months.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/879048417/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/879051907",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#issuecomment-879051907",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22112",
    "id": 879051907,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3OTA1MTkwNw==",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?u=3f68150a5f30acd541d1ed279376cd20b78046b1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-13T12:39:42Z",
    "updated_at": "2021-07-13T12:39:42Z",
    "author_association": "MEMBER",
    "body": "Yeah, I'd remind you ;)\n\nMight be good to have this in rc1 to sanity test it with some other nodes running it.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/879051907/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/879060270",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#issuecomment-879060270",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22112",
    "id": 879060270,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg3OTA2MDI3MA==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-07-13T12:52:03Z",
    "updated_at": "2021-07-13T12:52:03Z",
    "author_association": "MEMBER",
    "body": "Code review ACK 4101ec9d2e05a35c35f587a28f1feee6cebcc61b\r\nHave also loosely tested it by running different versions of this on a node for the last weeks, during which I have noticed no problem with I2P connectivity.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/879060270/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/644216009",
    "pull_request_review_id": 674541400,
    "id": 644216009,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0NDIxNjAwOQ==",
    "diff_hunk": "@@ -2019,8 +2019,9 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n             // from advertising themselves as a service on another host and\n             // port, causing a DoS attack as nodes around the network attempt\n             // to connect to it fruitlessly.\n-            if (addr.GetPort() != Params().GetDefaultPort() && nTries < 50)\n+            if (!addr.IsI2P() && addr.GetPort() != Params().GetDefaultPort() && nTries < 50) {",
    "path": "src/net.cpp",
    "position": null,
    "original_position": 5,
    "commit_id": "4101ec9d2e05a35c35f587a28f1feee6cebcc61b",
    "original_commit_id": "4401bb56cf3822950b221c3fa47fb0b65312d12f",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I don't think this is exactly what we want. As (with SAM 3.1) we're unable to connect to anything except port 0 (from the perspective of later versions), shouldn't this equally bias away from port 0, as we bias away from the default port for other networks?\r\n\r\nIn other words: maybe this can be done a bit cleaner by having a network-dependent default port, which is 0 for I2P and the normal port for everything else?",
    "created_at": "2021-06-02T18:22:23Z",
    "updated_at": "2021-06-02T18:22:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r644216009",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/644216009"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r644216009"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/644216009/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2023,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/644694720",
    "pull_request_review_id": 675147662,
    "id": 644694720,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0NDY5NDcyMA==",
    "diff_hunk": "@@ -2019,8 +2019,9 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n             // from advertising themselves as a service on another host and\n             // port, causing a DoS attack as nodes around the network attempt\n             // to connect to it fruitlessly.\n-            if (addr.GetPort() != Params().GetDefaultPort() && nTries < 50)\n+            if (!addr.IsI2P() && addr.GetPort() != Params().GetDefaultPort() && nTries < 50) {",
    "path": "src/net.cpp",
    "position": null,
    "original_position": 5,
    "commit_id": "4101ec9d2e05a35c35f587a28f1feee6cebcc61b",
    "original_commit_id": "4401bb56cf3822950b221c3fa47fb0b65312d12f",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I think the limitation of only being able to connect to ports that equal 0 is purely internal to the I2P code - it depends on the SAM version being used and higher level code shouldn't care about that or be aware of it. So I planted the refuse-to-connect-to-non-zero-ports [check in i2p.cpp](https://github.com/bitcoin/bitcoin/pull/22112/commits/4401bb56cf3822950b221c3fa47fb0b65312d12f#diff-8945a03581b372d674f34dcb6a63e537343e376ebcd9d8c7c3d94d4366cd9b9dR175-R180).\r\n\r\nThis allows some day to remove that by only modifying `i2p.cpp` - easier, compared to if this knowledge is spilled in other modules.\r\n\r\nA network-dependent default port seems like an unnecessary generalization to me because it is only relevant for I2P. If there was at least one other network that used !=8333 default port, then it would be more appealing :)\r\n\r\nOff-scope: I think this entire `if` should be removed.",
    "created_at": "2021-06-03T10:56:51Z",
    "updated_at": "2021-06-03T10:56:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r644694720",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/644694720"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r644694720"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/644694720/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2023,
    "side": "RIGHT",
    "in_reply_to_id": 644216009
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/656320196",
    "pull_request_review_id": 689644247,
    "id": 656320196,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY1NjMyMDE5Ng==",
    "diff_hunk": "@@ -2019,8 +2019,9 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n             // from advertising themselves as a service on another host and\n             // port, causing a DoS attack as nodes around the network attempt\n             // to connect to it fruitlessly.\n-            if (addr.GetPort() != Params().GetDefaultPort() && nTries < 50)\n+            if (!addr.IsI2P() && addr.GetPort() != Params().GetDefaultPort() && nTries < 50) {",
    "path": "src/net.cpp",
    "position": null,
    "original_position": 5,
    "commit_id": "4101ec9d2e05a35c35f587a28f1feee6cebcc61b",
    "original_commit_id": "4401bb56cf3822950b221c3fa47fb0b65312d12f",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "It may be good to update the comment preceding this line to explain the exception for I2P.",
    "created_at": "2021-06-22T15:12:10Z",
    "updated_at": "2021-06-22T15:12:33Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r656320196",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/656320196"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r656320196"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/656320196/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2023,
    "side": "RIGHT",
    "in_reply_to_id": 644216009
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/656918013",
    "pull_request_review_id": 690415720,
    "id": 656918013,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY1NjkxODAxMw==",
    "diff_hunk": "@@ -2019,8 +2019,9 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n             // from advertising themselves as a service on another host and\n             // port, causing a DoS attack as nodes around the network attempt\n             // to connect to it fruitlessly.\n-            if (addr.GetPort() != Params().GetDefaultPort() && nTries < 50)\n+            if (!addr.IsI2P() && addr.GetPort() != Params().GetDefaultPort() && nTries < 50) {",
    "path": "src/net.cpp",
    "position": null,
    "original_position": 5,
    "commit_id": "4101ec9d2e05a35c35f587a28f1feee6cebcc61b",
    "original_commit_id": "4401bb56cf3822950b221c3fa47fb0b65312d12f",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Added a comment.",
    "created_at": "2021-06-23T09:23:06Z",
    "updated_at": "2021-06-23T09:23:06Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r656918013",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/656918013"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r656918013"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/656918013/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2023,
    "side": "RIGHT",
    "in_reply_to_id": 644216009
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/661599653",
    "pull_request_review_id": 696335576,
    "id": 661599653,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MTU5OTY1Mw==",
    "diff_hunk": "@@ -665,3 +666,88 @@ std::vector<bool> CAddrMan::DecodeAsmap(fs::path path)\n     }\n     return bits;\n }\n+\n+void CAddrMan::ResetI2PPorts()\n+{\n+    for (int bucket = 0; bucket < ADDRMAN_NEW_BUCKET_COUNT; ++bucket) {\n+        for (int i = 0; i < ADDRMAN_BUCKET_SIZE; ++i) {\n+            const auto id = vvNew[bucket][i];\n+            if (id == -1) {\n+                continue;\n+            }\n+            auto& addr_info = mapInfo[id];\n+            if (!addr_info.IsI2P() || addr_info.GetPort() == i2p::sam::PORT_SAM31) {\n+                continue;\n+            }\n+\n+            auto addr_info_newport = addr_info;\n+            // The below changes addr_info_newport.GetKey() which is used in finding\n+            // a bucket and a position within that bucket. So a re-bucketing may be necessary.\n+            addr_info_newport.port = i2p::sam::PORT_SAM31;\n+\n+            // Reposition entries of vvNew within the same bucket because we don't know the source\n+            // address which led to the decision to store the entry in vvNew[bucket] so we can't\n+            // re-evaluate that decision, but even if we could, CAddrInfo::GetNewBucket() does not\n+            // use CAddrInfo::GetKey() so it would end up in the same bucket as before the port\n+            // change.\n+            const auto i_target = addr_info_newport.GetBucketPosition(nKey, true, bucket);\n+\n+            if (i_target == i) { // No need to re-position.\n+                addr_info = addr_info_newport;\n+                continue;\n+            }\n+\n+            // Reposition from i to i_target or delete if the target position is occupied.\n+\n+            if (vvNew[bucket][i_target] == -1) {\n+                vvNew[bucket][i_target] = id;\n+                vvNew[bucket][i] = -1;\n+                addr_info = addr_info_newport;\n+            } else {\n+                ClearNew(bucket, i);\n+            }\n+        }\n+    }\n+\n+    for (int bucket = 0; bucket < ADDRMAN_TRIED_BUCKET_COUNT; ++bucket) {\n+        for (int i = 0; i < ADDRMAN_BUCKET_SIZE; ++i) {\n+            const auto id = vvTried[bucket][i];\n+            if (id == -1) {\n+                continue;\n+            }\n+            auto& addr_info = mapInfo[id];\n+            if (!addr_info.IsI2P() || addr_info.GetPort() == i2p::sam::PORT_SAM31) {\n+                continue;\n+            }\n+\n+            auto addr_info_newport = addr_info;\n+            // The below changes addr_info_newport.GetKey() which is used in finding\n+            // a bucket and a position within that bucket. So a re-bucketing may be necessary.\n+            addr_info_newport.port = i2p::sam::PORT_SAM31;\n+\n+            const auto bucket_target = addr_info_newport.GetTriedBucket(nKey, m_asmap);\n+            const auto i_target = addr_info_newport.GetBucketPosition(nKey, false, bucket_target);\n+\n+            if (bucket_target == bucket && i_target == i) { // No need to re-position.\n+                addr_info = addr_info_newport;\n+                continue;\n+            }\n+\n+            // Reposition from (bucket, i) to (bucket_target, i_target) or delete if the target\n+            // position is occupied.\n+\n+            if (vvTried[bucket_target][i_target] == -1) {\n+                vvTried[bucket_target][i_target] = id;\n+                vvTried[bucket][i] = -1;\n+                addr_info = addr_info_newport;\n+            } else {\n+                vvTried[bucket][i] = -1;",
    "path": "src/addrman.cpp",
    "position": null,
    "original_position": 87,
    "commit_id": "4101ec9d2e05a35c35f587a28f1feee6cebcc61b",
    "original_commit_id": "b336f12eda9ce3aeefc6d573c4068a27beef8def",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "b336f12 it looks like this line can be pulled out of the conditional\r\n```diff\r\n             // Reposition from (bucket, i) to (bucket_target, i_target) or delete if the target\r\n             // position is occupied.\r\n+            vvTried[bucket][i] = -1;\r\n \r\n             if (vvTried[bucket_target][i_target] == -1) {\r\n                 vvTried[bucket_target][i_target] = id;\r\n-                vvTried[bucket][i] = -1;\r\n                 addr_info = addr_info_newport;\r\n             } else {\r\n-                vvTried[bucket][i] = -1;\r\n```\r\n",
    "created_at": "2021-06-30T15:44:41Z",
    "updated_at": "2021-06-30T15:54:34Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r661599653",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/661599653"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r661599653"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/661599653/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 744,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/661604130",
    "pull_request_review_id": 696335576,
    "id": 661604130,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MTYwNDEzMA==",
    "diff_hunk": "@@ -665,3 +666,88 @@ std::vector<bool> CAddrMan::DecodeAsmap(fs::path path)\n     }\n     return bits;\n }\n+\n+void CAddrMan::ResetI2PPorts()\n+{\n+    for (int bucket = 0; bucket < ADDRMAN_NEW_BUCKET_COUNT; ++bucket) {\n+        for (int i = 0; i < ADDRMAN_BUCKET_SIZE; ++i) {\n+            const auto id = vvNew[bucket][i];\n+            if (id == -1) {\n+                continue;\n+            }\n+            auto& addr_info = mapInfo[id];\n+            if (!addr_info.IsI2P() || addr_info.GetPort() == i2p::sam::PORT_SAM31) {\n+                continue;\n+            }\n+\n+            auto addr_info_newport = addr_info;\n+            // The below changes addr_info_newport.GetKey() which is used in finding\n+            // a bucket and a position within that bucket. So a re-bucketing may be necessary.\n+            addr_info_newport.port = i2p::sam::PORT_SAM31;\n+\n+            // Reposition entries of vvNew within the same bucket because we don't know the source\n+            // address which led to the decision to store the entry in vvNew[bucket] so we can't\n+            // re-evaluate that decision, but even if we could, CAddrInfo::GetNewBucket() does not\n+            // use CAddrInfo::GetKey() so it would end up in the same bucket as before the port\n+            // change.\n+            const auto i_target = addr_info_newport.GetBucketPosition(nKey, true, bucket);\n+\n+            if (i_target == i) { // No need to re-position.\n+                addr_info = addr_info_newport;\n+                continue;\n+            }\n+\n+            // Reposition from i to i_target or delete if the target position is occupied.\n+\n+            if (vvNew[bucket][i_target] == -1) {\n+                vvNew[bucket][i_target] = id;\n+                vvNew[bucket][i] = -1;\n+                addr_info = addr_info_newport;\n+            } else {\n+                ClearNew(bucket, i);\n+            }\n+        }\n+    }\n+\n+    for (int bucket = 0; bucket < ADDRMAN_TRIED_BUCKET_COUNT; ++bucket) {\n+        for (int i = 0; i < ADDRMAN_BUCKET_SIZE; ++i) {\n+            const auto id = vvTried[bucket][i];\n+            if (id == -1) {\n+                continue;\n+            }\n+            auto& addr_info = mapInfo[id];\n+            if (!addr_info.IsI2P() || addr_info.GetPort() == i2p::sam::PORT_SAM31) {\n+                continue;\n+            }\n+\n+            auto addr_info_newport = addr_info;\n+            // The below changes addr_info_newport.GetKey() which is used in finding\n+            // a bucket and a position within that bucket. So a re-bucketing may be necessary.\n+            addr_info_newport.port = i2p::sam::PORT_SAM31;\n+\n+            const auto bucket_target = addr_info_newport.GetTriedBucket(nKey, m_asmap);\n+            const auto i_target = addr_info_newport.GetBucketPosition(nKey, false, bucket_target);\n+\n+            if (bucket_target == bucket && i_target == i) { // No need to re-position.\n+                addr_info = addr_info_newport;\n+                continue;\n+            }\n+\n+            // Reposition from (bucket, i) to (bucket_target, i_target) or delete if the target\n+            // position is occupied.\n+\n+            if (vvTried[bucket_target][i_target] == -1) {\n+                vvTried[bucket_target][i_target] = id;\n+                vvTried[bucket][i] = -1;\n+                addr_info = addr_info_newport;\n+            } else {\n+                vvTried[bucket][i] = -1;\n+                SwapRandom(addr_info.nRandomPos, vRandom.size() - 1);",
    "path": "src/addrman.cpp",
    "position": null,
    "original_position": 88,
    "commit_id": "4101ec9d2e05a35c35f587a28f1feee6cebcc61b",
    "original_commit_id": "b336f12eda9ce3aeefc6d573c4068a27beef8def",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "b336f12 would asserts like those seen in `CAddrMan::Delete()` be a good idea?\r\n```diff\r\n@@ -675,6 +675,7 @@ void CAddrMan::ResetI2PPorts()\r\n             if (id == -1) {\r\n                 continue;\r\n             }\r\n+            assert(mapInfo.count(id) != 0);\r\n             auto& addr_info = mapInfo[id];\r\n@@ -716,6 +717,7 @@ void CAddrMan::ResetI2PPorts()\r\n             if (id == -1) {\r\n                 continue;\r\n             }\r\n+            assert(mapInfo.count(id) != 0);\r\n             auto& addr_info = mapInfo[id];\r\n@@ -737,13 +739,13 @@ void CAddrMan::ResetI2PPorts()\r\n             if (vvTried[bucket_target][i_target] == -1) {\r\n                 vvTried[bucket_target][i_target] = id;\r\n                 addr_info = addr_info_newport;\r\n             } else {\r\n+                assert(addr_info.nRefCount == 0);\r\n                 SwapRandom(addr_info.nRandomPos, vRandom.size() - 1);\r\n```\r\n",
    "created_at": "2021-06-30T15:49:37Z",
    "updated_at": "2021-06-30T15:54:34Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r661604130",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/661604130"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r661604130"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/661604130/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 745,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/662156772",
    "pull_request_review_id": 697058290,
    "id": 662156772,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MjE1Njc3Mg==",
    "diff_hunk": "@@ -2019,8 +2019,9 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n             // from advertising themselves as a service on another host and\n             // port, causing a DoS attack as nodes around the network attempt\n             // to connect to it fruitlessly.\n-            if (addr.GetPort() != Params().GetDefaultPort() && nTries < 50)\n+            if (!addr.IsI2P() && addr.GetPort() != Params().GetDefaultPort() && nTries < 50) {",
    "path": "src/net.cpp",
    "position": null,
    "original_position": 5,
    "commit_id": "4101ec9d2e05a35c35f587a28f1feee6cebcc61b",
    "original_commit_id": "4401bb56cf3822950b221c3fa47fb0b65312d12f",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "From testing and offline discussion with @vasild, it seems a network-dependent `GetDefaultPort()` is indeed needed.",
    "created_at": "2021-07-01T10:01:50Z",
    "updated_at": "2021-07-01T10:01:50Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r662156772",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/662156772"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r662156772"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/662156772/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2023,
    "side": "RIGHT",
    "in_reply_to_id": 644216009
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/662243726",
    "pull_request_review_id": 697181215,
    "id": 662243726,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MjI0MzcyNg==",
    "diff_hunk": "@@ -665,3 +666,88 @@ std::vector<bool> CAddrMan::DecodeAsmap(fs::path path)\n     }\n     return bits;\n }\n+\n+void CAddrMan::ResetI2PPorts()\n+{\n+    for (int bucket = 0; bucket < ADDRMAN_NEW_BUCKET_COUNT; ++bucket) {\n+        for (int i = 0; i < ADDRMAN_BUCKET_SIZE; ++i) {\n+            const auto id = vvNew[bucket][i];\n+            if (id == -1) {\n+                continue;\n+            }\n+            auto& addr_info = mapInfo[id];\n+            if (!addr_info.IsI2P() || addr_info.GetPort() == i2p::sam::PORT_SAM31) {\n+                continue;\n+            }\n+\n+            auto addr_info_newport = addr_info;\n+            // The below changes addr_info_newport.GetKey() which is used in finding\n+            // a bucket and a position within that bucket. So a re-bucketing may be necessary.\n+            addr_info_newport.port = i2p::sam::PORT_SAM31;\n+\n+            // Reposition entries of vvNew within the same bucket because we don't know the source\n+            // address which led to the decision to store the entry in vvNew[bucket] so we can't\n+            // re-evaluate that decision, but even if we could, CAddrInfo::GetNewBucket() does not\n+            // use CAddrInfo::GetKey() so it would end up in the same bucket as before the port\n+            // change.\n+            const auto i_target = addr_info_newport.GetBucketPosition(nKey, true, bucket);\n+\n+            if (i_target == i) { // No need to re-position.\n+                addr_info = addr_info_newport;\n+                continue;\n+            }\n+\n+            // Reposition from i to i_target or delete if the target position is occupied.\n+\n+            if (vvNew[bucket][i_target] == -1) {\n+                vvNew[bucket][i_target] = id;\n+                vvNew[bucket][i] = -1;\n+                addr_info = addr_info_newport;\n+            } else {\n+                ClearNew(bucket, i);\n+            }\n+        }\n+    }\n+\n+    for (int bucket = 0; bucket < ADDRMAN_TRIED_BUCKET_COUNT; ++bucket) {\n+        for (int i = 0; i < ADDRMAN_BUCKET_SIZE; ++i) {\n+            const auto id = vvTried[bucket][i];\n+            if (id == -1) {\n+                continue;\n+            }\n+            auto& addr_info = mapInfo[id];\n+            if (!addr_info.IsI2P() || addr_info.GetPort() == i2p::sam::PORT_SAM31) {\n+                continue;\n+            }\n+\n+            auto addr_info_newport = addr_info;\n+            // The below changes addr_info_newport.GetKey() which is used in finding\n+            // a bucket and a position within that bucket. So a re-bucketing may be necessary.\n+            addr_info_newport.port = i2p::sam::PORT_SAM31;\n+\n+            const auto bucket_target = addr_info_newport.GetTriedBucket(nKey, m_asmap);\n+            const auto i_target = addr_info_newport.GetBucketPosition(nKey, false, bucket_target);\n+\n+            if (bucket_target == bucket && i_target == i) { // No need to re-position.\n+                addr_info = addr_info_newport;\n+                continue;\n+            }\n+\n+            // Reposition from (bucket, i) to (bucket_target, i_target) or delete if the target\n+            // position is occupied.\n+\n+            if (vvTried[bucket_target][i_target] == -1) {\n+                vvTried[bucket_target][i_target] = id;\n+                vvTried[bucket][i] = -1;\n+                addr_info = addr_info_newport;\n+            } else {\n+                vvTried[bucket][i] = -1;",
    "path": "src/addrman.cpp",
    "position": null,
    "original_position": 87,
    "commit_id": "4101ec9d2e05a35c35f587a28f1feee6cebcc61b",
    "original_commit_id": "b336f12eda9ce3aeefc6d573c4068a27beef8def",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Did that, but after that changed the code to remove the existent entry (if any), so the above is not relevant any more.",
    "created_at": "2021-07-01T12:27:06Z",
    "updated_at": "2021-07-01T12:27:07Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r662243726",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/662243726"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r662243726"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/662243726/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 744,
    "side": "RIGHT",
    "in_reply_to_id": 661599653
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/662245348",
    "pull_request_review_id": 697183371,
    "id": 662245348,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MjI0NTM0OA==",
    "diff_hunk": "@@ -665,3 +666,88 @@ std::vector<bool> CAddrMan::DecodeAsmap(fs::path path)\n     }\n     return bits;\n }\n+\n+void CAddrMan::ResetI2PPorts()\n+{\n+    for (int bucket = 0; bucket < ADDRMAN_NEW_BUCKET_COUNT; ++bucket) {\n+        for (int i = 0; i < ADDRMAN_BUCKET_SIZE; ++i) {\n+            const auto id = vvNew[bucket][i];\n+            if (id == -1) {\n+                continue;\n+            }\n+            auto& addr_info = mapInfo[id];\n+            if (!addr_info.IsI2P() || addr_info.GetPort() == i2p::sam::PORT_SAM31) {\n+                continue;\n+            }\n+\n+            auto addr_info_newport = addr_info;\n+            // The below changes addr_info_newport.GetKey() which is used in finding\n+            // a bucket and a position within that bucket. So a re-bucketing may be necessary.\n+            addr_info_newport.port = i2p::sam::PORT_SAM31;\n+\n+            // Reposition entries of vvNew within the same bucket because we don't know the source\n+            // address which led to the decision to store the entry in vvNew[bucket] so we can't\n+            // re-evaluate that decision, but even if we could, CAddrInfo::GetNewBucket() does not\n+            // use CAddrInfo::GetKey() so it would end up in the same bucket as before the port\n+            // change.\n+            const auto i_target = addr_info_newport.GetBucketPosition(nKey, true, bucket);\n+\n+            if (i_target == i) { // No need to re-position.\n+                addr_info = addr_info_newport;\n+                continue;\n+            }\n+\n+            // Reposition from i to i_target or delete if the target position is occupied.\n+\n+            if (vvNew[bucket][i_target] == -1) {\n+                vvNew[bucket][i_target] = id;\n+                vvNew[bucket][i] = -1;\n+                addr_info = addr_info_newport;\n+            } else {\n+                ClearNew(bucket, i);\n+            }\n+        }\n+    }\n+\n+    for (int bucket = 0; bucket < ADDRMAN_TRIED_BUCKET_COUNT; ++bucket) {\n+        for (int i = 0; i < ADDRMAN_BUCKET_SIZE; ++i) {\n+            const auto id = vvTried[bucket][i];\n+            if (id == -1) {\n+                continue;\n+            }\n+            auto& addr_info = mapInfo[id];\n+            if (!addr_info.IsI2P() || addr_info.GetPort() == i2p::sam::PORT_SAM31) {\n+                continue;\n+            }\n+\n+            auto addr_info_newport = addr_info;\n+            // The below changes addr_info_newport.GetKey() which is used in finding\n+            // a bucket and a position within that bucket. So a re-bucketing may be necessary.\n+            addr_info_newport.port = i2p::sam::PORT_SAM31;\n+\n+            const auto bucket_target = addr_info_newport.GetTriedBucket(nKey, m_asmap);\n+            const auto i_target = addr_info_newport.GetBucketPosition(nKey, false, bucket_target);\n+\n+            if (bucket_target == bucket && i_target == i) { // No need to re-position.\n+                addr_info = addr_info_newport;\n+                continue;\n+            }\n+\n+            // Reposition from (bucket, i) to (bucket_target, i_target) or delete if the target\n+            // position is occupied.\n+\n+            if (vvTried[bucket_target][i_target] == -1) {\n+                vvTried[bucket_target][i_target] = id;\n+                vvTried[bucket][i] = -1;\n+                addr_info = addr_info_newport;\n+            } else {\n+                vvTried[bucket][i] = -1;\n+                SwapRandom(addr_info.nRandomPos, vRandom.size() - 1);",
    "path": "src/addrman.cpp",
    "position": null,
    "original_position": 88,
    "commit_id": "4101ec9d2e05a35c35f587a28f1feee6cebcc61b",
    "original_commit_id": "b336f12eda9ce3aeefc6d573c4068a27beef8def",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I think asserts are too excessive - if something goes wrong with this code I don't think it is critical enough to stop the node (that's during startup). Instead of the first two asserts I added a check & early quit. The 3rd suggested assert is not relevant now because I changed those lines to remove the existent entry (not the I2P one).",
    "created_at": "2021-07-01T12:29:23Z",
    "updated_at": "2021-07-01T12:29:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r662245348",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/662245348"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r662245348"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/662245348/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 745,
    "side": "RIGHT",
    "in_reply_to_id": 661604130
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/662285093",
    "pull_request_review_id": 697238956,
    "id": 662285093,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MjI4NTA5Mw==",
    "diff_hunk": "@@ -2019,8 +2019,9 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n             // from advertising themselves as a service on another host and\n             // port, causing a DoS attack as nodes around the network attempt\n             // to connect to it fruitlessly.\n-            if (addr.GetPort() != Params().GetDefaultPort() && nTries < 50)\n+            if (!addr.IsI2P() && addr.GetPort() != Params().GetDefaultPort() && nTries < 50) {",
    "path": "src/net.cpp",
    "position": null,
    "original_position": 5,
    "commit_id": "4101ec9d2e05a35c35f587a28f1feee6cebcc61b",
    "original_commit_id": "4401bb56cf3822950b221c3fa47fb0b65312d12f",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "So, network-dependent default port seems to be the most elegant solution to [resolve addresses without ports](https://github.com/bitcoin/bitcoin/pull/22112#issuecomment-872224803) properly - e.g. `1.2.3.4` should be treated as `1.2.3.4:8333` and `foo.b32.i2p` as `foo.b32.i2p:0`.\r\n\r\nNow this line looks better?\r\n\r\n\r\n```cpp\r\nif (addr.GetPort() != Params().GetDefaultPort(addr.GetNetwork()) && nTries < 50) {\r\n```",
    "created_at": "2021-07-01T13:23:24Z",
    "updated_at": "2021-07-01T13:23:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r662285093",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/662285093"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r662285093"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/662285093/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2023,
    "side": "RIGHT",
    "in_reply_to_id": 644216009
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/662362227",
    "pull_request_review_id": 697345376,
    "id": 662362227,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MjM2MjIyNw==",
    "diff_hunk": "@@ -665,3 +666,88 @@ std::vector<bool> CAddrMan::DecodeAsmap(fs::path path)\n     }\n     return bits;\n }\n+\n+void CAddrMan::ResetI2PPorts()\n+{\n+    for (int bucket = 0; bucket < ADDRMAN_NEW_BUCKET_COUNT; ++bucket) {\n+        for (int i = 0; i < ADDRMAN_BUCKET_SIZE; ++i) {\n+            const auto id = vvNew[bucket][i];\n+            if (id == -1) {\n+                continue;\n+            }\n+            auto& addr_info = mapInfo[id];\n+            if (!addr_info.IsI2P() || addr_info.GetPort() == i2p::sam::PORT_SAM31) {\n+                continue;\n+            }\n+\n+            auto addr_info_newport = addr_info;\n+            // The below changes addr_info_newport.GetKey() which is used in finding\n+            // a bucket and a position within that bucket. So a re-bucketing may be necessary.\n+            addr_info_newport.port = i2p::sam::PORT_SAM31;\n+\n+            // Reposition entries of vvNew within the same bucket because we don't know the source\n+            // address which led to the decision to store the entry in vvNew[bucket] so we can't\n+            // re-evaluate that decision, but even if we could, CAddrInfo::GetNewBucket() does not\n+            // use CAddrInfo::GetKey() so it would end up in the same bucket as before the port\n+            // change.\n+            const auto i_target = addr_info_newport.GetBucketPosition(nKey, true, bucket);\n+\n+            if (i_target == i) { // No need to re-position.\n+                addr_info = addr_info_newport;\n+                continue;\n+            }\n+\n+            // Reposition from i to i_target or delete if the target position is occupied.\n+\n+            if (vvNew[bucket][i_target] == -1) {\n+                vvNew[bucket][i_target] = id;\n+                vvNew[bucket][i] = -1;\n+                addr_info = addr_info_newport;\n+            } else {\n+                ClearNew(bucket, i);\n+            }\n+        }\n+    }\n+\n+    for (int bucket = 0; bucket < ADDRMAN_TRIED_BUCKET_COUNT; ++bucket) {\n+        for (int i = 0; i < ADDRMAN_BUCKET_SIZE; ++i) {\n+            const auto id = vvTried[bucket][i];\n+            if (id == -1) {\n+                continue;\n+            }\n+            auto& addr_info = mapInfo[id];\n+            if (!addr_info.IsI2P() || addr_info.GetPort() == i2p::sam::PORT_SAM31) {\n+                continue;\n+            }\n+\n+            auto addr_info_newport = addr_info;\n+            // The below changes addr_info_newport.GetKey() which is used in finding\n+            // a bucket and a position within that bucket. So a re-bucketing may be necessary.\n+            addr_info_newport.port = i2p::sam::PORT_SAM31;\n+\n+            const auto bucket_target = addr_info_newport.GetTriedBucket(nKey, m_asmap);\n+            const auto i_target = addr_info_newport.GetBucketPosition(nKey, false, bucket_target);\n+\n+            if (bucket_target == bucket && i_target == i) { // No need to re-position.\n+                addr_info = addr_info_newport;\n+                continue;\n+            }\n+\n+            // Reposition from (bucket, i) to (bucket_target, i_target) or delete if the target\n+            // position is occupied.\n+\n+            if (vvTried[bucket_target][i_target] == -1) {\n+                vvTried[bucket_target][i_target] = id;\n+                vvTried[bucket][i] = -1;\n+                addr_info = addr_info_newport;\n+            } else {\n+                vvTried[bucket][i] = -1;\n+                SwapRandom(addr_info.nRandomPos, vRandom.size() - 1);",
    "path": "src/addrman.cpp",
    "position": null,
    "original_position": 88,
    "commit_id": "4101ec9d2e05a35c35f587a28f1feee6cebcc61b",
    "original_commit_id": "b336f12eda9ce3aeefc6d573c4068a27beef8def",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "FWIW the asserts passed for me in mainnet testing.",
    "created_at": "2021-07-01T14:53:36Z",
    "updated_at": "2021-07-01T14:53:36Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r662362227",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/662362227"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r662362227"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/662362227/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 745,
    "side": "RIGHT",
    "in_reply_to_id": 661604130
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/663828318",
    "pull_request_review_id": 699042238,
    "id": 663828318,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MzgyODMxOA==",
    "diff_hunk": "@@ -8,11 +8,13 @@\n \n #include <chainparamsbase.h>\n #include <consensus/params.h>\n+#include <netaddress.h>",
    "path": "src/chainparams.h",
    "position": 4,
    "original_position": 4,
    "commit_id": "4101ec9d2e05a35c35f587a28f1feee6cebcc61b",
    "original_commit_id": "ba6d18861bfd168c50687d2d18d5947e3d7c721a",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "25fda81f include `netaddress.h` and `string` in cpp file too?",
    "created_at": "2021-07-05T10:38:01Z",
    "updated_at": "2021-07-05T15:38:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r663828318",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/663828318"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r663828318"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/663828318/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 11,
    "original_line": 11,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/663830918",
    "pull_request_review_id": 699042238,
    "id": 663830918,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MzgzMDkxOA==",
    "diff_hunk": "@@ -80,6 +82,8 @@ class CChainParams\n     const Consensus::Params& GetConsensus() const { return consensus; }\n     const CMessageHeader::MessageStartChars& MessageStart() const { return pchMessageStart; }\n     uint16_t GetDefaultPort() const { return nDefaultPort; }\n+    uint16_t GetDefaultPort(Network net) const;",
    "path": "src/chainparams.h",
    "position": null,
    "original_position": 18,
    "commit_id": "4101ec9d2e05a35c35f587a28f1feee6cebcc61b",
    "original_commit_id": "ba6d18861bfd168c50687d2d18d5947e3d7c721a",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "25fda81f9a22dd8ed97a64081175c24c88abaad2 maybe just inline this one as it is only one line",
    "created_at": "2021-07-05T10:42:28Z",
    "updated_at": "2021-07-05T15:38:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r663830918",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/663830918"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r663830918"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/663830918/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 85,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/663833215",
    "pull_request_review_id": 699042238,
    "id": 663833215,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MzgzMzIxNQ==",
    "diff_hunk": "@@ -540,6 +540,20 @@ const CChainParams &Params() {\n     return *globalChainParams;\n }\n \n+uint16_t CChainParams::GetDefaultPort(Network net) const\n+{\n+    return net == NET_I2P ? I2P_SAM31_PORT : GetDefaultPort();\n+}\n+\n+uint16_t CChainParams::GetDefaultPort(const std::string& addr) const\n+{\n+    CNetAddr a;\n+    if (a.SetSpecial(addr)) {\n+        return GetDefaultPort(a.GetNetwork());\n+    }\n+    return GetDefaultPort();",
    "path": "src/chainparams.cpp",
    "position": null,
    "original_position": 15,
    "commit_id": "4101ec9d2e05a35c35f587a28f1feee6cebcc61b",
    "original_commit_id": "ba6d18861bfd168c50687d2d18d5947e3d7c721a",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "25fda81f9a22dd8ed97a64081175c24c88abaad2 one return might be simpler/clearer\r\n```cpp\r\nreturn a.SetSpecial(addr) ? GetDefaultPort(a.GetNetwork() : GetDefaultPort();\r\n```\r\n",
    "created_at": "2021-07-05T10:46:24Z",
    "updated_at": "2021-07-05T15:38:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r663833215",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/663833215"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r663833215"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/663833215/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 554,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/663966996",
    "pull_request_review_id": 699042238,
    "id": 663966996,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2Mzk2Njk5Ng==",
    "diff_hunk": "@@ -699,3 +700,100 @@ std::vector<bool> CAddrMan::DecodeAsmap(fs::path path)\n     }\n     return bits;\n }\n+\n+void CAddrMan::ResetI2PPorts()\n+{\n+    for (int bucket = 0; bucket < ADDRMAN_NEW_BUCKET_COUNT; ++bucket) {\n+        for (int i = 0; i < ADDRMAN_BUCKET_SIZE; ++i) {\n+            const auto id = vvNew[bucket][i];\n+            if (id == -1) {\n+                continue;\n+            }\n+            auto it = mapInfo.find(id);\n+            if (it == mapInfo.end()) {\n+                return;",
    "path": "src/addrman.cpp",
    "position": 23,
    "original_position": 23,
    "commit_id": "4101ec9d2e05a35c35f587a28f1feee6cebcc61b",
    "original_commit_id": "14db11782c467c2585c552ec1797ad3b3ef70ab3",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "44889de Here and line 754 below, I'm not sure whether it's better to assert or silently return.",
    "created_at": "2021-07-05T14:19:18Z",
    "updated_at": "2021-07-05T15:38:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r663966996",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/663966996"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r663966996"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/663966996/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 746,
    "original_line": 746,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/664022031",
    "pull_request_review_id": 699296746,
    "id": 664022031,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2NDAyMjAzMQ==",
    "diff_hunk": "@@ -699,3 +700,100 @@ std::vector<bool> CAddrMan::DecodeAsmap(fs::path path)\n     }\n     return bits;\n }\n+\n+void CAddrMan::ResetI2PPorts()\n+{\n+    for (int bucket = 0; bucket < ADDRMAN_NEW_BUCKET_COUNT; ++bucket) {\n+        for (int i = 0; i < ADDRMAN_BUCKET_SIZE; ++i) {\n+            const auto id = vvNew[bucket][i];\n+            if (id == -1) {\n+                continue;\n+            }\n+            auto it = mapInfo.find(id);\n+            if (it == mapInfo.end()) {\n+                return;",
    "path": "src/addrman.cpp",
    "position": 23,
    "original_position": 23,
    "commit_id": "4101ec9d2e05a35c35f587a28f1feee6cebcc61b",
    "original_commit_id": "14db11782c467c2585c552ec1797ad3b3ef70ab3",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "(Asserts run fine for me in my testing so far).",
    "created_at": "2021-07-05T15:48:21Z",
    "updated_at": "2021-07-05T15:48:21Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r664022031",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/664022031"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r664022031"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/664022031/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 746,
    "original_line": 746,
    "side": "RIGHT",
    "in_reply_to_id": 663966996
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/664046092",
    "pull_request_review_id": 699325683,
    "id": 664046092,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2NDA0NjA5Mg==",
    "diff_hunk": "@@ -699,3 +700,100 @@ std::vector<bool> CAddrMan::DecodeAsmap(fs::path path)\n     }\n     return bits;\n }\n+\n+void CAddrMan::ResetI2PPorts()\n+{\n+    for (int bucket = 0; bucket < ADDRMAN_NEW_BUCKET_COUNT; ++bucket) {\n+        for (int i = 0; i < ADDRMAN_BUCKET_SIZE; ++i) {\n+            const auto id = vvNew[bucket][i];\n+            if (id == -1) {\n+                continue;\n+            }\n+            auto it = mapInfo.find(id);\n+            if (it == mapInfo.end()) {\n+                return;",
    "path": "src/addrman.cpp",
    "position": 23,
    "original_position": 23,
    "commit_id": "4101ec9d2e05a35c35f587a28f1feee6cebcc61b",
    "original_commit_id": "14db11782c467c2585c552ec1797ad3b3ef70ab3",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Asserts look [scary](https://github.com/bitcoin/bitcoin/pull/22112#discussion_r662245348) to me. If those have to be asserts then I would deem this too risky for 22.0. Maybe I am pessimistic but I imagine 22.0 nodes not being able to start because I overlooked something in the I2P ports fiddling which is definitely not critical for node operation :bomb: :skull_and_crossbones: ",
    "created_at": "2021-07-05T16:40:10Z",
    "updated_at": "2021-07-05T16:40:10Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r664046092",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/664046092"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r664046092"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/664046092/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 746,
    "original_line": 746,
    "side": "RIGHT",
    "in_reply_to_id": 663966996
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/664051457",
    "pull_request_review_id": 699331908,
    "id": 664051457,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2NDA1MTQ1Nw==",
    "diff_hunk": "@@ -8,11 +8,13 @@\n \n #include <chainparamsbase.h>\n #include <consensus/params.h>\n+#include <netaddress.h>",
    "path": "src/chainparams.h",
    "position": 4,
    "original_position": 4,
    "commit_id": "4101ec9d2e05a35c35f587a28f1feee6cebcc61b",
    "original_commit_id": "ba6d18861bfd168c50687d2d18d5947e3d7c721a",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Removed the changes to `chainparams.cpp`.",
    "created_at": "2021-07-05T16:53:52Z",
    "updated_at": "2021-07-05T16:53:52Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r664051457",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/664051457"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r664051457"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/664051457/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 11,
    "original_line": 11,
    "side": "RIGHT",
    "in_reply_to_id": 663828318
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/664051590",
    "pull_request_review_id": 699332055,
    "id": 664051590,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2NDA1MTU5MA==",
    "diff_hunk": "@@ -80,6 +82,8 @@ class CChainParams\n     const Consensus::Params& GetConsensus() const { return consensus; }\n     const CMessageHeader::MessageStartChars& MessageStart() const { return pchMessageStart; }\n     uint16_t GetDefaultPort() const { return nDefaultPort; }\n+    uint16_t GetDefaultPort(Network net) const;",
    "path": "src/chainparams.h",
    "position": null,
    "original_position": 18,
    "commit_id": "4101ec9d2e05a35c35f587a28f1feee6cebcc61b",
    "original_commit_id": "ba6d18861bfd168c50687d2d18d5947e3d7c721a",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done.",
    "created_at": "2021-07-05T16:54:11Z",
    "updated_at": "2021-07-05T16:54:12Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r664051590",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/664051590"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r664051590"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/664051590/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 85,
    "side": "RIGHT",
    "in_reply_to_id": 663830918
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/664051693",
    "pull_request_review_id": 699332211,
    "id": 664051693,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2NDA1MTY5Mw==",
    "diff_hunk": "@@ -540,6 +540,20 @@ const CChainParams &Params() {\n     return *globalChainParams;\n }\n \n+uint16_t CChainParams::GetDefaultPort(Network net) const\n+{\n+    return net == NET_I2P ? I2P_SAM31_PORT : GetDefaultPort();\n+}\n+\n+uint16_t CChainParams::GetDefaultPort(const std::string& addr) const\n+{\n+    CNetAddr a;\n+    if (a.SetSpecial(addr)) {\n+        return GetDefaultPort(a.GetNetwork());\n+    }\n+    return GetDefaultPort();",
    "path": "src/chainparams.cpp",
    "position": null,
    "original_position": 15,
    "commit_id": "4101ec9d2e05a35c35f587a28f1feee6cebcc61b",
    "original_commit_id": "ba6d18861bfd168c50687d2d18d5947e3d7c721a",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done, and moved to `.h`",
    "created_at": "2021-07-05T16:54:33Z",
    "updated_at": "2021-07-05T16:54:34Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r664051693",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/664051693"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r664051693"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/664051693/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 554,
    "side": "RIGHT",
    "in_reply_to_id": 663833215
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/664434544",
    "pull_request_review_id": 699792244,
    "id": 664434544,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2NDQzNDU0NA==",
    "diff_hunk": "@@ -699,3 +700,100 @@ std::vector<bool> CAddrMan::DecodeAsmap(fs::path path)\n     }\n     return bits;\n }\n+\n+void CAddrMan::ResetI2PPorts()\n+{\n+    for (int bucket = 0; bucket < ADDRMAN_NEW_BUCKET_COUNT; ++bucket) {\n+        for (int i = 0; i < ADDRMAN_BUCKET_SIZE; ++i) {\n+            const auto id = vvNew[bucket][i];",
    "path": "src/addrman.cpp",
    "position": 17,
    "original_position": 17,
    "commit_id": "4101ec9d2e05a35c35f587a28f1feee6cebcc61b",
    "original_commit_id": "0b0ee030ea6f2b6508e8660dffc40b40c6aa2644",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "f108193c6381b4d It looks like the loops can be accelerated with a faster iterator comparison and by avoiding integer conversions. \r\n\r\n<details><summary>suggestion</summary><p>\r\n\r\n```diff\r\ndiff --git a/src/addrman.cpp b/src/addrman.cpp\r\nindex f2d54c0adb..41375e8320 100644\r\n--- a/src/addrman.cpp\r\n+++ b/src/addrman.cpp\r\n@@ -703,8 +703,8 @@ std::vector<bool> CAddrMan::DecodeAsmap(fs::path path)\r\n \r\n void CAddrMan::ResetI2PPorts()\r\n {\r\n-    for (int bucket = 0; bucket < ADDRMAN_NEW_BUCKET_COUNT; ++bucket) {\r\n-        for (int i = 0; i < ADDRMAN_BUCKET_SIZE; ++i) {\r\n+    for (size_t bucket = 0; bucket != ADDRMAN_NEW_BUCKET_COUNT; ++bucket) {\r\n+        for (size_t i = 0; i != ADDRMAN_BUCKET_SIZE; ++i) {\r\n             const auto id = vvNew[bucket][i];\r\n             if (id == -1) {\r\n                 continue;\r\n@@ -728,7 +728,7 @@ void CAddrMan::ResetI2PPorts()\r\n             // re-evaluate that decision, but even if we could, CAddrInfo::GetNewBucket() does not\r\n             // use CAddrInfo::GetKey() so it would end up in the same bucket as before the port\r\n             // change.\r\n-            const auto i_target = addr_info_newport.GetBucketPosition(nKey, true, bucket);\r\n+            const size_t i_target = addr_info_newport.GetBucketPosition(nKey, true, bucket);\r\n \r\n             if (i_target == i) { // No need to re-position.\r\n                 addr_info = addr_info_newport;\r\n@@ -743,8 +743,8 @@ void CAddrMan::ResetI2PPorts()\r\n         }\r\n     }\r\n \r\n-    for (int bucket = 0; bucket < ADDRMAN_TRIED_BUCKET_COUNT; ++bucket) {\r\n-        for (int i = 0; i < ADDRMAN_BUCKET_SIZE; ++i) {\r\n+    for (size_t bucket = 0; bucket != ADDRMAN_TRIED_BUCKET_COUNT; ++bucket) {\r\n+        for (size_t i = 0; i != ADDRMAN_BUCKET_SIZE; ++i) {\r\n             const auto id = vvTried[bucket][i];\r\n             if (id == -1) {\r\n                 continue;\r\n@@ -763,8 +763,8 @@ void CAddrMan::ResetI2PPorts()\r\n             // bucket and a position within that bucket. So a re-bucketing may be necessary.\r\n             addr_info_newport.port = I2P_SAM31_PORT;\r\n \r\n-            const auto bucket_target = addr_info_newport.GetTriedBucket(nKey, m_asmap);\r\n-            const auto i_target = addr_info_newport.GetBucketPosition(nKey, false, bucket_target);\r\n+            const size_t bucket_target = addr_info_newport.GetTriedBucket(nKey, m_asmap);\r\n+            const size_t i_target = addr_info_newport.GetBucketPosition(nKey, false, bucket_target);\r\n \r\n             if (bucket_target == bucket && i_target == i) { // No need to re-position.\r\n                 addr_info = addr_info_newport;\r\n```\r\n</p></details>\r\n",
    "created_at": "2021-07-06T10:29:57Z",
    "updated_at": "2021-07-06T10:29:58Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r664434544",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/664434544"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r664434544"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/664434544/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 740,
    "original_line": 740,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/664439172",
    "pull_request_review_id": 699798221,
    "id": 664439172,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2NDQzOTE3Mg==",
    "diff_hunk": "@@ -699,3 +700,100 @@ std::vector<bool> CAddrMan::DecodeAsmap(fs::path path)\n     }\n     return bits;\n }\n+\n+void CAddrMan::ResetI2PPorts()\n+{\n+    for (int bucket = 0; bucket < ADDRMAN_NEW_BUCKET_COUNT; ++bucket) {\n+        for (int i = 0; i < ADDRMAN_BUCKET_SIZE; ++i) {\n+            const auto id = vvNew[bucket][i];",
    "path": "src/addrman.cpp",
    "position": 17,
    "original_position": 17,
    "commit_id": "4101ec9d2e05a35c35f587a28f1feee6cebcc61b",
    "original_commit_id": "0b0ee030ea6f2b6508e8660dffc40b40c6aa2644",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "(This isn't a hotspot but is something that could also be considered in places that are.)",
    "created_at": "2021-07-06T10:37:15Z",
    "updated_at": "2021-07-06T10:37:15Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r664439172",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/664439172"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r664439172"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/664439172/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 740,
    "original_line": 740,
    "side": "RIGHT",
    "in_reply_to_id": 664434544
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/666296359",
    "pull_request_review_id": 702204405,
    "id": 666296359,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2NjI5NjM1OQ==",
    "diff_hunk": "@@ -699,3 +700,100 @@ std::vector<bool> CAddrMan::DecodeAsmap(fs::path path)\n     }\n     return bits;\n }\n+\n+void CAddrMan::ResetI2PPorts()\n+{\n+    for (int bucket = 0; bucket < ADDRMAN_NEW_BUCKET_COUNT; ++bucket) {\n+        for (int i = 0; i < ADDRMAN_BUCKET_SIZE; ++i) {\n+            const auto id = vvNew[bucket][i];",
    "path": "src/addrman.cpp",
    "position": 17,
    "original_position": 17,
    "commit_id": "4101ec9d2e05a35c35f587a28f1feee6cebcc61b",
    "original_commit_id": "0b0ee030ea6f2b6508e8660dffc40b40c6aa2644",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Will leave it up to @vasild but it seems to me that integer and iterator conversions seem an unlikely source of performance problems.\r\n\r\n> (This isn't a hotspot but is something that could also be considered in places that are.)\r\n\r\nSure, it might have impact on tight loops that loop over large memory areas.",
    "created_at": "2021-07-08T15:24:01Z",
    "updated_at": "2021-07-08T15:24:01Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r666296359",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/666296359"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r666296359"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/666296359/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 740,
    "original_line": 740,
    "side": "RIGHT",
    "in_reply_to_id": 664434544
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/666825283",
    "pull_request_review_id": 702881197,
    "id": 666825283,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2NjgyNTI4Mw==",
    "diff_hunk": "@@ -699,3 +700,100 @@ std::vector<bool> CAddrMan::DecodeAsmap(fs::path path)\n     }\n     return bits;\n }\n+\n+void CAddrMan::ResetI2PPorts()\n+{\n+    for (int bucket = 0; bucket < ADDRMAN_NEW_BUCKET_COUNT; ++bucket) {\n+        for (int i = 0; i < ADDRMAN_BUCKET_SIZE; ++i) {\n+            const auto id = vvNew[bucket][i];",
    "path": "src/addrman.cpp",
    "position": 17,
    "original_position": 17,
    "commit_id": "4101ec9d2e05a35c35f587a28f1feee6cebcc61b",
    "original_commit_id": "0b0ee030ea6f2b6508e8660dffc40b40c6aa2644",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "1.\r\n`ADDRMAN_NEW_BUCKET_COUNT` is of type `int`.\r\n\r\n```cpp\r\nfor (int bucket = 0; bucket < ADDRMAN_NEW_BUCKET_COUNT; ++bucket) {\r\n```\r\n\r\nhow is changing `bucket` to `size_t` going to make it faster? (otoh, it could produce some warning about comparing `size_t` to `int`)\r\n\r\n2.\r\nCurrent code:\r\n```cpp\r\nint GetFoo();\r\nauto x = GetFoo();\r\n```\r\nSo `x` will be defined as type `int`. How will explicitly defining it as `size_t` make it faster? (otoh, assigning from `int` to `size_t` could cause some compiler to warn about it)\r\n\r\nI tried this:\r\n\r\n```cpp\r\n#define N (1 << 10)\r\n\r\nvoid foo()\r\n{\r\n    int array[N];\r\n    for (int i = 0; i < N; ++i) {\r\n        printf(\"%d\\n\", array[i]);\r\n    }\r\n}\r\n```\r\n\r\nChanging `i` from `int` to `size_t` produces **identical** assembler output:\r\n\r\n```asm\r\n(gdb) disas foo\r\nDump of assembler code for function _Z3foov:\r\n   0x0000000000202220 <+0>:\tpush   %rbp\r\n   0x0000000000202221 <+1>:\tmov    %rsp,%rbp\r\n   0x0000000000202224 <+4>:\tpush   %rbx\r\n   0x0000000000202225 <+5>:\tsub    $0x1008,%rsp\r\n   0x000000000020222c <+12>:\txor    %ebx,%ebx\r\n   0x000000000020222e <+14>:\txchg   %ax,%ax\r\n   0x0000000000202230 <+16>:\tmov    -0x1010(%rbp,%rbx,4),%esi\r\n   0x0000000000202237 <+23>:\tmov    $0x200cc7,%edi\r\n   0x000000000020223c <+28>:\txor    %eax,%eax\r\n   0x000000000020223e <+30>:\tcall   0x202670 <printf@plt>\r\n   0x0000000000202243 <+35>:\tadd    $0x1,%rbx\r\n   0x0000000000202247 <+39>:\tcmp    $0x400,%rbx\r\n   0x000000000020224e <+46>:\tjne    0x202230 <_Z3foov+16>\r\n   0x0000000000202250 <+48>:\tadd    $0x1008,%rsp\r\n   0x0000000000202257 <+55>:\tpop    %rbx\r\n   0x0000000000202258 <+56>:\tpop    %rbp\r\n   0x0000000000202259 <+57>:\tret    \r\nEnd of assembler dump.\r\n```",
    "created_at": "2021-07-09T09:50:41Z",
    "updated_at": "2021-07-09T09:50:41Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r666825283",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/666825283"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r666825283"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/666825283/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 740,
    "original_line": 740,
    "side": "RIGHT",
    "in_reply_to_id": 664434544
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/666997801",
    "pull_request_review_id": 703116399,
    "id": 666997801,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2Njk5NzgwMQ==",
    "diff_hunk": "@@ -442,7 +442,7 @@ void SetupServerArgs(ArgsManager& argsman)\n     argsman.AddArg(\"-peerbloomfilters\", strprintf(\"Support filtering of blocks and transaction with bloom filters (default: %u)\", DEFAULT_PEERBLOOMFILTERS), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-peerblockfilters\", strprintf(\"Serve compact block filters to peers per BIP 157 (default: %u)\", DEFAULT_PEERBLOCKFILTERS), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-permitbaremultisig\", strprintf(\"Relay non-P2SH multisig (default: %u)\", DEFAULT_PERMIT_BAREMULTISIG), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n-    argsman.AddArg(\"-port=<port>\", strprintf(\"Listen for connections on <port>. Nodes not using the default ports (default: %u, testnet: %u, signet: %u, regtest: %u) are unlikely to get incoming connections.\", defaultChainParams->GetDefaultPort(), testnetChainParams->GetDefaultPort(), signetChainParams->GetDefaultPort(), regtestChainParams->GetDefaultPort()), ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);\n+    argsman.AddArg(\"-port=<port>\", strprintf(\"Listen for connections on <port>. Nodes not using the default ports (default: %u, testnet: %u, signet: %u, regtest: %u) are unlikely to get incoming connections. Not relevant for I2P (see doc/i2p.md).\", defaultChainParams->GetDefaultPort(), testnetChainParams->GetDefaultPort(), signetChainParams->GetDefaultPort(), regtestChainParams->GetDefaultPort()), ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);",
    "path": "src/init.cpp",
    "position": 5,
    "original_position": 5,
    "commit_id": "4101ec9d2e05a35c35f587a28f1feee6cebcc61b",
    "original_commit_id": "4101ec9d2e05a35c35f587a28f1feee6cebcc61b",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "```\r\n$ ./src/bitcoind -h | grep -A4 \"\\-port=\"\r\n  -port=<port>\r\n       Listen for connections on <port>. Nodes not using the default ports\r\n       (default: 8333, testnet: 18333, signet: 38333, regtest: 18444)\r\n       are unlikely to get incoming connections. Not relevant for I2P\r\n       (see doc/i2p.md).\r\n```\r\nmaybe s/I2P/I2P connections/ and s/Not/This option is not/\r\n```suggestion\r\n    argsman.AddArg(\"-port=<port>\", strprintf(\"Listen for connections on <port>. Nodes not using the default ports (default: %u, testnet: %u, signet: %u, regtest: %u) are unlikely to get incoming connections. This option is not relevant for I2P connections (see doc/i2p.md).\", defaultChainParams->GetDefaultPort(), testnetChainParams->GetDefaultPort(), signetChainParams->GetDefaultPort(), regtestChainParams->GetDefaultPort()), ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);\r\n```",
    "created_at": "2021-07-09T14:36:10Z",
    "updated_at": "2021-07-09T14:45:40Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r666997801",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/666997801"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22112#discussion_r666997801"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22112"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/666997801/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 445,
    "original_line": 445,
    "side": "RIGHT"
  }
]