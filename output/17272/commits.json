[
  {
    "sha": "87c312bad9bc44312d8a6b4a1132d3a3ebf5ec03",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo4N2MzMTJiYWQ5YmM0NDMxMmQ4YTZiNGExMTMyZDNhM2ViZjVlYzAz",
    "commit": {
      "author": {
        "name": "Peter Bushnell",
        "email": "bushsolo@gmail.com",
        "date": "2019-10-29T16:28:09Z"
      },
      "committer": {
        "name": "Bushstar",
        "email": "bushsolo@gmail.com",
        "date": "2019-10-30T06:50:44Z"
      },
      "message": "[POLICY] Make multiple OP_RETURNS in a single TX standard",
      "tree": {
        "sha": "96dc04ee2f66c52dcae12976bc239e315d593dbe",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/96dc04ee2f66c52dcae12976bc239e315d593dbe"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/87c312bad9bc44312d8a6b4a1132d3a3ebf5ec03",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEErYffssvqlS9A3KY3IeCaVKNhX5kFAl25MsQACgkQIeCaVKNh\nX5my/RAAmkiqs6D+aGkfqPHcherE7ITNFvOjPEUFnZdxJWxRU9HSUs0rwp+R8Kwl\nS/mjFsGImI+xzRZn1hUZeTFSityz4agCC4weUAhUhpTkudU+24ghFkOLmYlff1IO\nN09BvbbrY7mskhuWozF/8G0w8lQjEwWWb5LN7w/zBL2cGD3dCzi6tFvI89+IhP2k\nGj/HHpp+HQ12H3lmS2gl827rqzl6vI/EMb27XcbU7Ph0xOvr22lmNw8VvSssCKAc\n1g1WkJM8Gm64YD7cctGnnF9r30eoxUVO6/YLyHu1O/nLVl6x2Yp7xbWkN9EGQqTE\nKK0nkVxrpl2gvktPUpr5jN/yQLXsNzX4BfpLVVhgIXlENzqtFe0murquH5iDsrGF\nQzz3GYrwA4ZyxVMNWiiYd26M5eIBDaIQRVUp+RtzolcSdL8keoQP7Wxgt2MAXz0A\nZb/dDpGKc5YUufO+qxAEW7V2JpMHlEr3lPE7ptfTIQpxvi/QQCXpf37hfZsY4s75\nNR1PbQ7jNCydOfwuXtb52/DUj4BoKu7mB5T8LDDp1CHSpmo7osIDdBzGyDaJpLp8\nTMuoimTcAKf9FAWOuMwJKBpE0Ux7dEnQDACZo9/Eb68e96u7DO4Y0U/j61Hochu4\nUnzmBj6dFg0XO3ktfn73IBQjWRkaCDyrRpKTGwVlSp2nQMAQyKE=\n=mm+p\n-----END PGP SIGNATURE-----",
        "payload": "tree 96dc04ee2f66c52dcae12976bc239e315d593dbe\nparent ecad0a8019fb9e8503ec92b6057a5e649866e25e\nauthor Peter Bushnell <bushsolo@gmail.com> 1572366489 +0000\ncommitter Bushstar <bushsolo@gmail.com> 1572418244 +0000\n\n[POLICY] Make multiple OP_RETURNS in a single TX standard\n\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/87c312bad9bc44312d8a6b4a1132d3a3ebf5ec03",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/87c312bad9bc44312d8a6b4a1132d3a3ebf5ec03",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/87c312bad9bc44312d8a6b4a1132d3a3ebf5ec03/comments",
    "author": {
      "login": "Bushstar",
      "id": 5293433,
      "node_id": "MDQ6VXNlcjUyOTM0MzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5293433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Bushstar",
      "html_url": "https://github.com/Bushstar",
      "followers_url": "https://api.github.com/users/Bushstar/followers",
      "following_url": "https://api.github.com/users/Bushstar/following{/other_user}",
      "gists_url": "https://api.github.com/users/Bushstar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Bushstar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Bushstar/subscriptions",
      "organizations_url": "https://api.github.com/users/Bushstar/orgs",
      "repos_url": "https://api.github.com/users/Bushstar/repos",
      "events_url": "https://api.github.com/users/Bushstar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Bushstar/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "Bushstar",
      "id": 5293433,
      "node_id": "MDQ6VXNlcjUyOTM0MzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5293433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Bushstar",
      "html_url": "https://github.com/Bushstar",
      "followers_url": "https://api.github.com/users/Bushstar/followers",
      "following_url": "https://api.github.com/users/Bushstar/following{/other_user}",
      "gists_url": "https://api.github.com/users/Bushstar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Bushstar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Bushstar/subscriptions",
      "organizations_url": "https://api.github.com/users/Bushstar/orgs",
      "repos_url": "https://api.github.com/users/Bushstar/repos",
      "events_url": "https://api.github.com/users/Bushstar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Bushstar/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "ecad0a8019fb9e8503ec92b6057a5e649866e25e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ecad0a8019fb9e8503ec92b6057a5e649866e25e",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/ecad0a8019fb9e8503ec92b6057a5e649866e25e"
      }
    ],
    "stats": {
      "total": 13,
      "additions": 2,
      "deletions": 11
    },
    "files": [
      {
        "sha": "c30142da92da25aa2590eff27c0cefabf3288e63",
        "filename": "src/policy/policy.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 11,
        "changes": 13,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/87c312bad9bc44312d8a6b4a1132d3a3ebf5ec03/src/policy/policy.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/87c312bad9bc44312d8a6b4a1132d3a3ebf5ec03/src/policy/policy.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/policy/policy.cpp?ref=87c312bad9bc44312d8a6b4a1132d3a3ebf5ec03",
        "patch": "@@ -109,31 +109,22 @@ bool IsStandardTx(const CTransaction& tx, bool permit_bare_multisig, const CFeeR\n         }\n     }\n \n-    unsigned int nDataOut = 0;\n     txnouttype whichType;\n     for (const CTxOut& txout : tx.vout) {\n         if (!::IsStandard(txout.scriptPubKey, whichType)) {\n             reason = \"scriptpubkey\";\n             return false;\n         }\n \n-        if (whichType == TX_NULL_DATA)\n-            nDataOut++;\n-        else if ((whichType == TX_MULTISIG) && (!permit_bare_multisig)) {\n+        if ((whichType == TX_MULTISIG) && (!permit_bare_multisig)) {\n             reason = \"bare-multisig\";\n             return false;\n-        } else if (IsDust(txout, dust_relay_fee)) {\n+        } else if (whichType != TX_NULL_DATA && IsDust(txout, dust_relay_fee)) {\n             reason = \"dust\";\n             return false;\n         }\n     }\n \n-    // only one OP_RETURN txout is permitted\n-    if (nDataOut > 1) {\n-        reason = \"multi-op-return\";\n-        return false;\n-    }\n-\n     return true;\n }\n "
      }
    ]
  },
  {
    "sha": "4013ba495b9668ede6dae097650b57fed7f3e1a2",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo0MDEzYmE0OTViOTY2OGVkZTZkYWUwOTc2NTBiNTdmZWQ3ZjNlMWEy",
    "commit": {
      "author": {
        "name": "Bushstar",
        "email": "bushsolo@gmail.com",
        "date": "2019-10-30T06:52:33Z"
      },
      "committer": {
        "name": "Bushstar",
        "email": "bushsolo@gmail.com",
        "date": "2019-10-30T06:52:33Z"
      },
      "message": "[test] Remove multi-op-return failure from mempool tests",
      "tree": {
        "sha": "1e55f7a5dc803b9cf51e0a9c32f9bb837e5b041a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/1e55f7a5dc803b9cf51e0a9c32f9bb837e5b041a"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4013ba495b9668ede6dae097650b57fed7f3e1a2",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEErYffssvqlS9A3KY3IeCaVKNhX5kFAl25MzEACgkQIeCaVKNh\nX5n0mQ/+K8qX14JFzi5SqnDNPs8AsdB67uEjEMrqeqtcIXnKfJPMjjWaNrVPdaOc\nJbdAyFizQ711hk66XZSQhPoW1I47k5maeFC/g8O4qIQDZfW8uVXEy/pfcm2Q1whx\nmrj1C8DZBJ4YNk+S0JpZUC2d7I0MvXM93Jgl0IH9UKJHK/B46REGQR3AioSRU8bt\nBIOv91BEm9hq1tIMLhXn3p9VffY3sc2lvmYHMlfQIFewNPx+jl1Qz63dhSKAhhdz\nHWaXtHXwbltsazDQer2wTg/B/UplR6EtDqNrXJ0gNnYmIBlAirWYtqxIIU5ZByvv\nAJih363llonbHtJaZbeCYeB2d86jC7i/4hhSbGRm5UhLm16qKmbxUWcn6GG5A5uw\nb5mi7YJu/j42qqREb4SZoler6dmOR5twrxy8Gk99qXcD3GEkNwiySKcE5GROtlvA\nUvAR3HiYJfR1+fVfL4mZ9xqjKFwLq0WbcUPmCEaL0CoQYX7fNeG98/AaQtHlsFTn\nCC4/LYyS2G8HuWjGttEttmED8mtvm6MxCuOhbfI0xyPd7aOSRdAgtxQ1g6rdObUe\nDPI0W1cEihmrZC/Y/Qyl0lMujc4bMYMWuCdFaz/bwUZWxTl4QYnGkbxQ7iEjMxXO\nBcBxiW35mGHrZ7UuPK5TUE2DwaGDCKs8J1y7bG/g5sFcJh66T74=\n=+tTz\n-----END PGP SIGNATURE-----",
        "payload": "tree 1e55f7a5dc803b9cf51e0a9c32f9bb837e5b041a\nparent 87c312bad9bc44312d8a6b4a1132d3a3ebf5ec03\nauthor Bushstar <bushsolo@gmail.com> 1572418353 +0000\ncommitter Bushstar <bushsolo@gmail.com> 1572418353 +0000\n\n[test] Remove multi-op-return failure from mempool tests\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4013ba495b9668ede6dae097650b57fed7f3e1a2",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/4013ba495b9668ede6dae097650b57fed7f3e1a2",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4013ba495b9668ede6dae097650b57fed7f3e1a2/comments",
    "author": {
      "login": "Bushstar",
      "id": 5293433,
      "node_id": "MDQ6VXNlcjUyOTM0MzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5293433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Bushstar",
      "html_url": "https://github.com/Bushstar",
      "followers_url": "https://api.github.com/users/Bushstar/followers",
      "following_url": "https://api.github.com/users/Bushstar/following{/other_user}",
      "gists_url": "https://api.github.com/users/Bushstar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Bushstar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Bushstar/subscriptions",
      "organizations_url": "https://api.github.com/users/Bushstar/orgs",
      "repos_url": "https://api.github.com/users/Bushstar/repos",
      "events_url": "https://api.github.com/users/Bushstar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Bushstar/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "Bushstar",
      "id": 5293433,
      "node_id": "MDQ6VXNlcjUyOTM0MzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5293433?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Bushstar",
      "html_url": "https://github.com/Bushstar",
      "followers_url": "https://api.github.com/users/Bushstar/followers",
      "following_url": "https://api.github.com/users/Bushstar/following{/other_user}",
      "gists_url": "https://api.github.com/users/Bushstar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Bushstar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Bushstar/subscriptions",
      "organizations_url": "https://api.github.com/users/Bushstar/orgs",
      "repos_url": "https://api.github.com/users/Bushstar/repos",
      "events_url": "https://api.github.com/users/Bushstar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Bushstar/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "87c312bad9bc44312d8a6b4a1132d3a3ebf5ec03",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/87c312bad9bc44312d8a6b4a1132d3a3ebf5ec03",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/87c312bad9bc44312d8a6b4a1132d3a3ebf5ec03"
      }
    ],
    "stats": {
      "total": 27,
      "additions": 0,
      "deletions": 27
    },
    "files": [
      {
        "sha": "d8cd3c17f0b1e2578d00f94f69744356bc68b35f",
        "filename": "src/test/transaction_tests.cpp",
        "status": "modified",
        "additions": 0,
        "deletions": 19,
        "changes": 19,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/4013ba495b9668ede6dae097650b57fed7f3e1a2/src/test/transaction_tests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/4013ba495b9668ede6dae097650b57fed7f3e1a2/src/test/transaction_tests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/transaction_tests.cpp?ref=4013ba495b9668ede6dae097650b57fed7f3e1a2",
        "patch": "@@ -765,25 +765,6 @@ BOOST_AUTO_TEST_CASE(test_IsStandard)\n     t.vout[0].scriptPubKey = CScript() << OP_RETURN;\n     BOOST_CHECK(IsStandardTx(CTransaction(t), reason));\n \n-    // Only one TX_NULL_DATA permitted in all cases\n-    t.vout.resize(2);\n-    t.vout[0].scriptPubKey = CScript() << OP_RETURN << ParseHex(\"04678afdb0fe5548271967f1a67130b7105cd6a828e03909a67962e0ea1f61deb649f6bc3f4cef38\");\n-    t.vout[1].scriptPubKey = CScript() << OP_RETURN << ParseHex(\"04678afdb0fe5548271967f1a67130b7105cd6a828e03909a67962e0ea1f61deb649f6bc3f4cef38\");\n-    reason.clear();\n-    BOOST_CHECK(!IsStandardTx(CTransaction(t), reason));\n-    BOOST_CHECK_EQUAL(reason, \"multi-op-return\");\n-\n-    t.vout[0].scriptPubKey = CScript() << OP_RETURN << ParseHex(\"04678afdb0fe5548271967f1a67130b7105cd6a828e03909a67962e0ea1f61deb649f6bc3f4cef38\");\n-    t.vout[1].scriptPubKey = CScript() << OP_RETURN;\n-    reason.clear();\n-    BOOST_CHECK(!IsStandardTx(CTransaction(t), reason));\n-    BOOST_CHECK_EQUAL(reason, \"multi-op-return\");\n-\n-    t.vout[0].scriptPubKey = CScript() << OP_RETURN;\n-    t.vout[1].scriptPubKey = CScript() << OP_RETURN;\n-    reason.clear();\n-    BOOST_CHECK(!IsStandardTx(CTransaction(t), reason));\n-    BOOST_CHECK_EQUAL(reason, \"multi-op-return\");\n }\n \n BOOST_AUTO_TEST_SUITE_END()"
      },
      {
        "sha": "1f7278fde802675b65e84c984134e3a655b6fdaa",
        "filename": "test/functional/mempool_accept.py",
        "status": "modified",
        "additions": 0,
        "deletions": 8,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/4013ba495b9668ede6dae097650b57fed7f3e1a2/test/functional/mempool_accept.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/4013ba495b9668ede6dae097650b57fed7f3e1a2/test/functional/mempool_accept.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/mempool_accept.py?ref=4013ba495b9668ede6dae097650b57fed7f3e1a2",
        "patch": "@@ -22,7 +22,6 @@\n     OP_0,\n     OP_EQUAL,\n     OP_HASH160,\n-    OP_RETURN,\n )\n from test_framework.util import (\n     assert_equal,\n@@ -281,13 +280,6 @@ def run_test(self):\n             result_expected=[{'txid': tx.rehash(), 'allowed': False, 'reject-reason': 'dust'}],\n             rawtxs=[tx.serialize().hex()],\n         )\n-        tx.deserialize(BytesIO(hex_str_to_bytes(raw_tx_reference)))\n-        tx.vout[0].scriptPubKey = CScript([OP_RETURN, b'\\xff'])\n-        tx.vout = [tx.vout[0]] * 2\n-        self.check_mempool_result(\n-            result_expected=[{'txid': tx.rehash(), 'allowed': False, 'reject-reason': 'multi-op-return'}],\n-            rawtxs=[tx.serialize().hex()],\n-        )\n \n         self.log.info('A timelocked transaction')\n         tx.deserialize(BytesIO(hex_str_to_bytes(raw_tx_reference)))"
      }
    ]
  }
]