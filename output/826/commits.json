[
  {
    "sha": "6af93ee2ea58fe513647a6fdf007561d196a0e72",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo2YWY5M2VlMmVhNThmZTUxMzY0N2E2ZmRmMDA3NTYxZDE5NmEwZTcy",
    "commit": {
      "author": {
        "name": "Janne Pulkkinen",
        "email": "jannepulk@gmail.com",
        "date": "2012-02-03T18:08:50Z"
      },
      "committer": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2012-02-11T17:24:49Z"
      },
      "message": "Fix Minimize to the tray instead of the taskbar",
      "tree": {
        "sha": "ecfc7bc9e3fa5636ac4ab3c952105d0f87c79090",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ecfc7bc9e3fa5636ac4ab3c952105d0f87c79090"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6af93ee2ea58fe513647a6fdf007561d196a0e72",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6af93ee2ea58fe513647a6fdf007561d196a0e72",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/6af93ee2ea58fe513647a6fdf007561d196a0e72",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6af93ee2ea58fe513647a6fdf007561d196a0e72/comments",
    "author": {
      "login": "Matoking",
      "id": 959667,
      "node_id": "MDQ6VXNlcjk1OTY2Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/959667?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Matoking",
      "html_url": "https://github.com/Matoking",
      "followers_url": "https://api.github.com/users/Matoking/followers",
      "following_url": "https://api.github.com/users/Matoking/following{/other_user}",
      "gists_url": "https://api.github.com/users/Matoking/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Matoking/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Matoking/subscriptions",
      "organizations_url": "https://api.github.com/users/Matoking/orgs",
      "repos_url": "https://api.github.com/users/Matoking/repos",
      "events_url": "https://api.github.com/users/Matoking/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Matoking/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "26d9e2c19dc209ba5616e9fca9f521dd7ed94e81",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/26d9e2c19dc209ba5616e9fca9f521dd7ed94e81",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/26d9e2c19dc209ba5616e9fca9f521dd7ed94e81"
      }
    ],
    "stats": {
      "total": 38,
      "additions": 27,
      "deletions": 11
    },
    "files": [
      {
        "sha": "815d8728572fdfee5047f143e8b79a5f5b174067",
        "filename": "src/qt/bitcoingui.cpp",
        "status": "modified",
        "additions": 23,
        "deletions": 11,
        "changes": 34,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6af93ee2ea58fe513647a6fdf007561d196a0e72/src/qt/bitcoingui.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6af93ee2ea58fe513647a6fdf007561d196a0e72/src/qt/bitcoingui.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoingui.cpp?ref=6af93ee2ea58fe513647a6fdf007561d196a0e72",
        "patch": "@@ -56,6 +56,7 @@ BitcoinGUI::BitcoinGUI(QWidget *parent):\n     QMainWindow(parent),\n     clientModel(0),\n     walletModel(0),\n+    dummyWidget(0),\n     encryptWalletAction(0),\n     changePassphraseAction(0),\n     aboutQtAction(0),\n@@ -85,6 +86,9 @@ BitcoinGUI::BitcoinGUI(QWidget *parent):\n     // Create the tray icon (or setup the dock icon)\n     createTrayIcon();\n \n+    // Dummy widget used when restoring window state after minimization\n+    dummyWidget = new QWidget();\n+\n     // Create tabs\n     overviewPage = new OverviewPage();\n \n@@ -162,6 +166,7 @@ BitcoinGUI::~BitcoinGUI()\n #ifdef Q_WS_MAC\n     delete appMenuBar;\n #endif\n+    delete dummyWidget;\n }\n \n void BitcoinGUI::createActions()\n@@ -205,17 +210,17 @@ void BitcoinGUI::createActions()\n #endif\n     tabGroup->addAction(messageAction);\n \n-    connect(overviewAction, SIGNAL(triggered()), this, SLOT(show()));\n+    connect(overviewAction, SIGNAL(triggered()), this, SLOT(showNormal()));\n     connect(overviewAction, SIGNAL(triggered()), this, SLOT(gotoOverviewPage()));\n-    connect(historyAction, SIGNAL(triggered()), this, SLOT(show()));\n+    connect(historyAction, SIGNAL(triggered()), this, SLOT(showNormal()));\n     connect(historyAction, SIGNAL(triggered()), this, SLOT(gotoHistoryPage()));\n-    connect(addressBookAction, SIGNAL(triggered()), this, SLOT(show()));\n+    connect(addressBookAction, SIGNAL(triggered()), this, SLOT(showNormal()));\n     connect(addressBookAction, SIGNAL(triggered()), this, SLOT(gotoAddressBookPage()));\n-    connect(receiveCoinsAction, SIGNAL(triggered()), this, SLOT(show()));\n+    connect(receiveCoinsAction, SIGNAL(triggered()), this, SLOT(showNormal()));\n     connect(receiveCoinsAction, SIGNAL(triggered()), this, SLOT(gotoReceiveCoinsPage()));\n-    connect(sendCoinsAction, SIGNAL(triggered()), this, SLOT(show()));\n+    connect(sendCoinsAction, SIGNAL(triggered()), this, SLOT(showNormal()));\n     connect(sendCoinsAction, SIGNAL(triggered()), this, SLOT(gotoSendCoinsPage()));\n-    connect(messageAction, SIGNAL(triggered()), this, SLOT(show()));\n+    connect(messageAction, SIGNAL(triggered()), this, SLOT(showNormal()));\n     connect(messageAction, SIGNAL(triggered()), this, SLOT(gotoMessagePage()));\n \n     quitAction = new QAction(QIcon(\":/icons/quit\"), tr(\"E&xit\"), this);\n@@ -405,10 +410,17 @@ void BitcoinGUI::trayIconActivated(QSystemTrayIcon::ActivationReason reason)\n         // Click on system tray icon triggers \"open bitcoin\"\n         openBitcoinAction->trigger();\n     }\n-\n }\n #endif\n \n+void BitcoinGUI::showNormal()\n+{\n+    // Reparent window to the desktop (in case it was hidden on minimize)\n+    if(parent() != NULL)\n+        setParent(NULL, Qt::Window);\n+    QMainWindow::showNormal();\n+}\n+\n void BitcoinGUI::optionsClicked()\n {\n     if(!clientModel || !clientModel->getOptionsModel())\n@@ -550,13 +562,13 @@ void BitcoinGUI::changeEvent(QEvent *e)\n         {\n             if(isMinimized())\n             {\n-                hide();\n-                e->ignore();\n+                // Hiding the window from taskbar\n+                setParent(dummyWidget, Qt::SubWindow);\n+                return;\n             }\n             else\n             {\n-                show();\n-                e->accept();\n+                showNormal();\n             }\n         }\n     }"
      },
      {
        "sha": "37ab12577cde1ad5e3f9338654ed2430c0fd39e1",
        "filename": "src/qt/bitcoingui.h",
        "status": "modified",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6af93ee2ea58fe513647a6fdf007561d196a0e72/src/qt/bitcoingui.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6af93ee2ea58fe513647a6fdf007561d196a0e72/src/qt/bitcoingui.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoingui.h?ref=6af93ee2ea58fe513647a6fdf007561d196a0e72",
        "patch": "@@ -58,6 +58,8 @@ class BitcoinGUI : public QMainWindow\n \n     QStackedWidget *centralWidget;\n \n+    QWidget *dummyWidget;\n+\n     OverviewPage *overviewPage;\n     QWidget *transactionsPage;\n     AddressBookPage *addressBookPage;\n@@ -131,6 +133,8 @@ public slots:\n     void gotoMessagePage();\n     void gotoMessagePage(QString);\n \n+    void showNormal();\n+\n private slots:\n     /** Switch to overview (home) page */\n     void gotoOverviewPage();"
      }
    ]
  }
]