[
  {
    "sha": "6c9c087f987ba41917b2f1450f22aa566ef7ce2a",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo2YzljMDg3Zjk4N2JhNDE5MTdiMmYxNDUwZjIyYWE1NjZlZjdjZTJh",
    "commit": {
      "author": {
        "name": "Karl-Johan Alm",
        "email": "karljohan-alm@garage.co.jp",
        "date": "2019-04-05T02:54:04Z"
      },
      "committer": {
        "name": "Karl-Johan Alm",
        "email": "karljohan-alm@garage.co.jp",
        "date": "2019-04-05T02:58:15Z"
      },
      "message": "rpc: add logprint RPC command",
      "tree": {
        "sha": "79759c539339a34abdaceb334be2b12b424cc9fb",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/79759c539339a34abdaceb334be2b12b424cc9fb"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6c9c087f987ba41917b2f1450f22aa566ef7ce2a",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEExCr/fGGz5EoUVM01V692LbM1MyIFAlymxEcACgkQV692LbM1\nMyKMkQ//VlaqbXoLHckIlcdsahuavSXaJzFF61Pa8Fge9b4J5m9+2u4Uu+Zp4F/W\nFvX7tL4dox5sBTv6irSM5fqEAFw7xfZtCdTwd0HayJOt/STzxz4NT9vH8iuRVhBg\nKVtFLn66QAw0/EfabEyb1aN+E7F50fl75XjL54f60F8D3tLT7puBHMl7m9IiDxYS\nEnFkDHEG43a2jMWuUKb+FmZ83YoqRlSbFRs3lwRCAxCJWpcrO0J3a/BKNUZlmhuJ\nryMWqeyM/qExrj5lSvSsRpEtUwM5ogdlHH7wO7PeYxqVhBlX+O06pHbMoXegLUvP\nK68elCU/F5xjzoKL5UAg54IOjXt6ibS/1y6oGlpbpOLXqmqZjmaFmA0nMJn0TZci\nc8Es4BhIslgRskwcOMtBpuq141OCduHrfNBg8MC2r4UXUCev7Yqbcxw1EIuAWWb/\nIYE3hqw69jbCDX1+7iS/a+/bGzriy40h3wZhRzFCYtV7QerMNH90wGjBetz9Wer0\nGwqM2sxIUIawD+jU7Xj2Q3j3jzcWK//rfzlQATraJNS8SwPsYXXK9lgW5lnCm4eS\nBQHBGZ9TfpT0gEu4bDUrXSBeJK+/ATvUcU16ELYX6M1W4/MfP0ZcBaHqvZPq1lfz\n7klzzuXINy6KxN9Cdw4eCI8xQf7hXzmfskRzh6TkNvrUNlCCCG8=\n=GWPu\n-----END PGP SIGNATURE-----",
        "payload": "tree 79759c539339a34abdaceb334be2b12b424cc9fb\nparent c83442e17412b96f00bc29d30763b28184c95f1e\nauthor Karl-Johan Alm <karljohan-alm@garage.co.jp> 1554432844 +0900\ncommitter Karl-Johan Alm <karljohan-alm@garage.co.jp> 1554433095 +0900\n\nrpc: add logprint RPC command\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6c9c087f987ba41917b2f1450f22aa566ef7ce2a",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/6c9c087f987ba41917b2f1450f22aa566ef7ce2a",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6c9c087f987ba41917b2f1450f22aa566ef7ce2a/comments",
    "author": {
      "login": "kallewoof",
      "id": 250224,
      "node_id": "MDQ6VXNlcjI1MDIyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kallewoof",
      "html_url": "https://github.com/kallewoof",
      "followers_url": "https://api.github.com/users/kallewoof/followers",
      "following_url": "https://api.github.com/users/kallewoof/following{/other_user}",
      "gists_url": "https://api.github.com/users/kallewoof/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
      "organizations_url": "https://api.github.com/users/kallewoof/orgs",
      "repos_url": "https://api.github.com/users/kallewoof/repos",
      "events_url": "https://api.github.com/users/kallewoof/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kallewoof/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "kallewoof",
      "id": 250224,
      "node_id": "MDQ6VXNlcjI1MDIyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kallewoof",
      "html_url": "https://github.com/kallewoof",
      "followers_url": "https://api.github.com/users/kallewoof/followers",
      "following_url": "https://api.github.com/users/kallewoof/following{/other_user}",
      "gists_url": "https://api.github.com/users/kallewoof/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
      "organizations_url": "https://api.github.com/users/kallewoof/orgs",
      "repos_url": "https://api.github.com/users/kallewoof/repos",
      "events_url": "https://api.github.com/users/kallewoof/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kallewoof/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "c83442e17412b96f00bc29d30763b28184c95f1e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c83442e17412b96f00bc29d30763b28184c95f1e",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/c83442e17412b96f00bc29d30763b28184c95f1e"
      }
    ],
    "stats": {
      "total": 19,
      "additions": 19,
      "deletions": 0
    },
    "files": [
      {
        "sha": "7c0520e70d72556128a18dfe1a3307291ac73c75",
        "filename": "src/rpc/misc.cpp",
        "status": "modified",
        "additions": 19,
        "deletions": 0,
        "changes": 19,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6c9c087f987ba41917b2f1450f22aa566ef7ce2a/src/rpc/misc.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6c9c087f987ba41917b2f1450f22aa566ef7ce2a/src/rpc/misc.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/misc.cpp?ref=6c9c087f987ba41917b2f1450f22aa566ef7ce2a",
        "patch": "@@ -591,6 +591,24 @@ static UniValue echo(const JSONRPCRequest& request)\n     return request.params;\n }\n \n+static UniValue logprint(const JSONRPCRequest& request)\n+{\n+    if (request.fHelp || request.params.size() != 1) {\n+        throw std::runtime_error(\n+            RPCHelpMan{\"logprint message\",\n+                \"\\nPrint a message to the log output.\\n\",\n+                {},\n+                RPCResults{},\n+                RPCExamples{\"\"},\n+            }.ToString()\n+        );\n+    }\n+\n+    LogPrintf(\"[RPC] %s\\n\", request.params[0].get_str());\n+\n+    return NullUniValue;\n+}\n+\n // clang-format off\n static const CRPCCommand commands[] =\n { //  category              name                      actor (function)         argNames\n@@ -608,6 +626,7 @@ static const CRPCCommand commands[] =\n     { \"hidden\",             \"setmocktime\",            &setmocktime,            {\"timestamp\"}},\n     { \"hidden\",             \"echo\",                   &echo,                   {\"arg0\",\"arg1\",\"arg2\",\"arg3\",\"arg4\",\"arg5\",\"arg6\",\"arg7\",\"arg8\",\"arg9\"}},\n     { \"hidden\",             \"echojson\",               &echo,                   {\"arg0\",\"arg1\",\"arg2\",\"arg3\",\"arg4\",\"arg5\",\"arg6\",\"arg7\",\"arg8\",\"arg9\"}},\n+    { \"hidden\",             \"logprint\",               &logprint,               {\"message\"}},\n };\n // clang-format on\n "
      }
    ]
  },
  {
    "sha": "e0c0ce2ef48d97c9231b806a1c0c361bcca98937",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzplMGMwY2UyZWY0OGQ5N2M5MjMxYjgwNmExYzBjMzYxYmNjYTk4OTM3",
    "commit": {
      "author": {
        "name": "Karl-Johan Alm",
        "email": "karljohan-alm@garage.co.jp",
        "date": "2019-04-05T03:23:01Z"
      },
      "committer": {
        "name": "Karl-Johan Alm",
        "email": "karljohan-alm@garage.co.jp",
        "date": "2019-04-05T06:07:56Z"
      },
      "message": "test: auto-logprint logger messages to RPC logs of all running nodes",
      "tree": {
        "sha": "1917732c450cda1eb9d648047952ed087db730cd",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/1917732c450cda1eb9d648047952ed087db730cd"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e0c0ce2ef48d97c9231b806a1c0c361bcca98937",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEExCr/fGGz5EoUVM01V692LbM1MyIFAlym8LwACgkQV692LbM1\nMyKZMg/+Lkgzur6HwSwsqt6Nt+iLkZXiVZpE/4uvCzeOFW/7Vi55S//u75LJSudi\nPRQGHov+YgShB4bqvne4F5JQSinr8tBdtbh4qsmr8hfLzFVAb3HYEH0ecMl1TbPe\nG6c5/pE3ZqpbTJLumatZibXt2UJKq2QHAdzw8spMtKXXZPP9sbOMRSdpKew8eFpL\ncydmBuVvBB42xO2gLOUauuTkOQr0bZy4wA0tM9L0hROQW6toULynjVhpsOYGD4xW\n5mNhkoMNmTaijsvNq1zgJYvj8hoKEX+Waj+wbzM/To7Mk5wTZLiqfrYaOOWGKl3F\nVd+k3fhpQKfUjhdaCV3ZBlgKPmxZbsowvhoB7P86r4j0kUzL1Qx2wdV4a/2NmoWu\n9BLYbeoJ9qocc0EDY/Oz1TsmlkQePoqcIAfnUvYpm5jScTvNGAri3lljjagnm9DZ\nWiEtih/nIRbOk3rjZpyF9kK6hwdDTDFjorznEhUV1tZeNVKAwgtX12nfQrcvc0wE\nDFn9u7/n/jR/qL60gRcvL0HYXeaIQyX0f/U1LYb8ize1MKTuvISOOgmtjQ/pPftc\n/1dHGn2+v4WxworHlXO57m+Wjso+29MKINJtelBbP1U+UzYbDftoYUORd36/PGMd\nE2AEzLGEhZ27ODxLqynZhvKa38b9JmSiEZkfDJLaKf+pwW1D3V4=\n=dFQt\n-----END PGP SIGNATURE-----",
        "payload": "tree 1917732c450cda1eb9d648047952ed087db730cd\nparent 6c9c087f987ba41917b2f1450f22aa566ef7ce2a\nauthor Karl-Johan Alm <karljohan-alm@garage.co.jp> 1554434581 +0900\ncommitter Karl-Johan Alm <karljohan-alm@garage.co.jp> 1554444476 +0900\n\ntest: auto-logprint logger messages to RPC logs of all running nodes\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e0c0ce2ef48d97c9231b806a1c0c361bcca98937",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/e0c0ce2ef48d97c9231b806a1c0c361bcca98937",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e0c0ce2ef48d97c9231b806a1c0c361bcca98937/comments",
    "author": {
      "login": "kallewoof",
      "id": 250224,
      "node_id": "MDQ6VXNlcjI1MDIyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kallewoof",
      "html_url": "https://github.com/kallewoof",
      "followers_url": "https://api.github.com/users/kallewoof/followers",
      "following_url": "https://api.github.com/users/kallewoof/following{/other_user}",
      "gists_url": "https://api.github.com/users/kallewoof/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
      "organizations_url": "https://api.github.com/users/kallewoof/orgs",
      "repos_url": "https://api.github.com/users/kallewoof/repos",
      "events_url": "https://api.github.com/users/kallewoof/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kallewoof/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "kallewoof",
      "id": 250224,
      "node_id": "MDQ6VXNlcjI1MDIyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/250224?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kallewoof",
      "html_url": "https://github.com/kallewoof",
      "followers_url": "https://api.github.com/users/kallewoof/followers",
      "following_url": "https://api.github.com/users/kallewoof/following{/other_user}",
      "gists_url": "https://api.github.com/users/kallewoof/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kallewoof/subscriptions",
      "organizations_url": "https://api.github.com/users/kallewoof/orgs",
      "repos_url": "https://api.github.com/users/kallewoof/repos",
      "events_url": "https://api.github.com/users/kallewoof/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kallewoof/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "6c9c087f987ba41917b2f1450f22aa566ef7ce2a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6c9c087f987ba41917b2f1450f22aa566ef7ce2a",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/6c9c087f987ba41917b2f1450f22aa566ef7ce2a"
      }
    ],
    "stats": {
      "total": 15,
      "additions": 15,
      "deletions": 0
    },
    "files": [
      {
        "sha": "0d573f08b4f1f4c5a13df7e8b31731111e589058",
        "filename": "test/functional/test_framework/test_framework.py",
        "status": "modified",
        "additions": 15,
        "deletions": 0,
        "changes": 15,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e0c0ce2ef48d97c9231b806a1c0c361bcca98937/test/functional/test_framework/test_framework.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e0c0ce2ef48d97c9231b806a1c0c361bcca98937/test/functional/test_framework/test_framework.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/test_framework/test_framework.py?ref=e0c0ce2ef48d97c9231b806a1c0c361bcca98937",
        "patch": "@@ -416,6 +416,18 @@ def sync_all(self, node_groups=None):\n     # Private helper methods. These should not be accessed by the subclass test scripts.\n \n     def _start_logging(self):\n+        class RpcRelog(logging.Handler):\n+            def __init__(self, tf_in, level_in):\n+                self.tf = tf_in\n+                self.level = level_in\n+\n+            def handle(self, record):\n+                try:\n+                    msg = record.msg % record.args\n+                    for n in self.tf.nodes:\n+                        n.logprint(msg)\n+                except:\n+                    pass\n         # Add logger and logging handlers\n         self.log = logging.getLogger('TestFramework')\n         self.log.setLevel(logging.DEBUG)\n@@ -427,6 +439,9 @@ def _start_logging(self):\n         # User can provide log level as a number or string (eg DEBUG). loglevel was caught as a string, so try to convert it to an int\n         ll = int(self.options.loglevel) if self.options.loglevel.isdigit() else self.options.loglevel.upper()\n         ch.setLevel(ll)\n+        # Create node logprint RPC routing handler\n+        relog = RpcRelog(self, ch.level)\n+        self.log.addHandler(relog)\n         # Format logs the same as bitcoind's debug.log with microprecision (so log files can be concatenated and sorted)\n         formatter = logging.Formatter(fmt='%(asctime)s.%(msecs)03d000Z %(name)s (%(levelname)s): %(message)s', datefmt='%Y-%m-%dT%H:%M:%S')\n         formatter.converter = time.gmtime"
      }
    ]
  }
]