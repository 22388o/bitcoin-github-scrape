DrahtBot,2018-09-20T09:18:00Z,"<!--e57a25ab6845829454e8d69fc972939a-->Note to reviewers: This pull request conflicts with the following ones:\n\n* #14320 (wallet: Fix duplicate fileid detection by ken2812221)\n* #14316 (tests: exclude all tests with difference parameters in `--exclude` list by ken2812221)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start wit",https://github.com/bitcoin/bitcoin/pull/14275#issuecomment-423107455,423107455,
MarcoFalke,2018-09-20T11:58:00Z,utACK f8b6424a1014e8080f22b39a6d3b9998e85f2f90,https://github.com/bitcoin/bitcoin/pull/14275#issuecomment-423156382,423156382,
sdaftuar,2018-09-20T12:42:04Z,Could you explain the race condition?,https://github.com/bitcoin/bitcoin/pull/14275#issuecomment-423168460,423168460,
ken2812221,2018-09-20T12:51:22Z,">Could you explain the race condition?\n\nBitcoin Core runs the each notification command in new thread, so it would have 10 process writing the same file if it generate 10 blocks immediately in this tests.\n",https://github.com/bitcoin/bitcoin/pull/14275#issuecomment-423171319,423171319,
MarcoFalke,2018-09-20T17:53:52Z,"Maybe on a second thought the tests should mirror how the notifications are supposed to be used in practice. If we don't support support filesystems that deny access when a lock is taken, as opposed to waiting, then the test shouldn't run on that system.",https://github.com/bitcoin/bitcoin/pull/14275#issuecomment-423275515,423275515,
ryanofsky,2018-09-20T18:38:25Z,"Instead of sleeping between the blocknotify commands, so they can all write to the same file, what about just having them write to different files. E.g. create a `blocknotify/` directory and change `-blocknotify=echo %s >> blocks.txt` to `-blocknotify=echo > blocknotify/%s`",https://github.com/bitcoin/bitcoin/pull/14275#issuecomment-423289373,423289373,
promag,2018-09-20T22:34:53Z,"@ryanofsky suggestion is good to fix the problem.\n\nBut I wonder if we should replace the ""call system with user command in a new thread"" with a FIFO notification thread?",https://github.com/bitcoin/bitcoin/pull/14275#issuecomment-423356056,423356056,
ken2812221,2018-09-21T06:36:48Z,@ryanofsky Updated the commit. Now the test create empty files with different name.,https://github.com/bitcoin/bitcoin/pull/14275#issuecomment-423429386,423429386,
MarcoFalke,2018-09-25T17:24:28Z,utACK 67654b6405,https://github.com/bitcoin/bitcoin/pull/14275#issuecomment-424430174,424430174,
sdaftuar,2018-09-24T19:08:28Z,nit: comment should be updated: `...expected directory size...`,https://github.com/bitcoin/bitcoin/pull/14275#discussion_r219954156,219954156,test/functional/feature_notifications.py
sdaftuar,2018-09-24T19:09:44Z,"also the comments below this one that refer to ""file contents"" should be ""directory contents""",https://github.com/bitcoin/bitcoin/pull/14275#discussion_r219954513,219954513,test/functional/feature_notifications.py
