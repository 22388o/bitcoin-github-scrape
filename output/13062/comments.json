[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/384294167",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#issuecomment-384294167",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13062",
    "id": 384294167,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NDI5NDE2Nw==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-25T13:51:27Z",
    "updated_at": "2018-04-25T13:51:27Z",
    "author_association": "MEMBER",
    "body": "Makes `interpreter.cpp` more self-contained, that's good.\r\nVerified that:\r\n- Consensus `IsPayToScriptHash` matches `CScript::IsPayToScriptHash`: copy-only apart from variable names\r\n- Consensus `IsWitnessProgram` matches `CScript::IsWitnessProgram`: \r\n  - a size_t becomes ptr_diff_t: not an issue as only positive values are possible (unsigned char + 2)\r\n  - `std::vector<unsigned char>(this->begin() + 2, this->end())` becomes `script.subspan(2)`: should be ok, it's defined as `Span(m_data + offset, m_size - offset)`\r\n- Consensus `IsPushOnly` matches `CScript::IsPushOnly`:\r\n  - `pc` becomes `Span` instead of a `const_iterator`: effective behavior is the same\r\n  - `GetOp` becomes `GetScriptOp`: GetOp is already defined in that way, so should be fine\r\n\r\nOther changes look straightforward.\r\n\r\nutACK 91c12000dd97d7b9b9c82d1bbc92c7bbadd3d6ed",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/384294167/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/385026068",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#issuecomment-385026068",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13062",
    "id": 385026068,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NTAyNjA2OA==",
    "user": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-27T16:40:27Z",
    "updated_at": "2018-04-27T16:40:27Z",
    "author_association": "CONTRIBUTOR",
    "body": "This seems to be lacking a bunch of motivation. Can you clarify *why* you want to run a script stored in a span?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/385026068/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/385029327",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#issuecomment-385029327",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13062",
    "id": 385029327,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NTAyOTMyNw==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-27T16:51:25Z",
    "updated_at": "2018-04-27T16:51:25Z",
    "author_association": "MEMBER",
    "body": "@TheBlueMatt They're not stored in a Span; a Span is just a way to refer to a script stored anywhere (vector, array, prevector, whatever custom structure that can hold a continuous sequence of bytes).\n\nI'll add some more motivation.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/385029327/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/385030495",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#issuecomment-385030495",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13062",
    "id": 385030495,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NTAzMDQ5NQ==",
    "user": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-27T16:55:43Z",
    "updated_at": "2018-04-27T16:55:43Z",
    "author_association": "CONTRIBUTOR",
    "body": "Suresure, I was asking for motivation of where we want to do this in the immediate future (do you have any branches that run scripts in non-prevector form?). The only place I can think of it being useful is in libbitcoinconsensus.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/385030495/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/385032610",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#issuecomment-385032610",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13062",
    "id": 385032610,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NTAzMjYxMA==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-27T17:02:53Z",
    "updated_at": "2018-04-27T17:02:53Z",
    "author_association": "MEMBER",
    "body": "@TheBlueMatt No code to show, but I added some thoughts to the PR description.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/385032610/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/385035134",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#issuecomment-385035134",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13062",
    "id": 385035134,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4NTAzNTEzNA==",
    "user": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-27T17:12:33Z",
    "updated_at": "2018-04-27T17:12:33Z",
    "author_association": "CONTRIBUTOR",
    "body": "Ah, the scriptPubKey/scriptSig distinction seems like a reasonable idea. Would love to see a branch with that implemented to see the feasibility of using this in the short-term after a merge.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/385035134/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/388374394",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#issuecomment-388374394",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13062",
    "id": 388374394,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4ODM3NDM5NA==",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-11T14:08:02Z",
    "updated_at": "2018-05-11T14:08:02Z",
    "author_association": "CONTRIBUTOR",
    "body": "Related discussion in IRC: https://botbot.me/freenode/bitcoin-core-dev/msg/99929791/",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/388374394/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/393639530",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#issuecomment-393639530",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13062",
    "id": 393639530,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5MzYzOTUzMA==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-05-31T18:53:29Z",
    "updated_at": "2018-05-31T18:53:29Z",
    "author_association": "MEMBER",
    "body": "Rebased.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/393639530/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/396412833",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#issuecomment-396412833",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13062",
    "id": 396412833,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5NjQxMjgzMw==",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?u=9791e96cd4268d48e3517bac41eaf2b1d09759fd&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-11T22:58:16Z",
    "updated_at": "2018-06-11T22:58:16Z",
    "author_association": "MEMBER",
    "body": "utACK 6ae8a5d681b181c7cb772778e18285139df74ece",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/396412833/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/398944076",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#issuecomment-398944076",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13062",
    "id": 398944076,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5ODk0NDA3Ng==",
    "user": {
      "login": "jb55",
      "id": 45598,
      "node_id": "MDQ6VXNlcjQ1NTk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/45598?u=2ba2cccaa0fd357b363507ce5694ce3cf5e56220&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jb55",
      "html_url": "https://github.com/jb55",
      "followers_url": "https://api.github.com/users/jb55/followers",
      "following_url": "https://api.github.com/users/jb55/following{/other_user}",
      "gists_url": "https://api.github.com/users/jb55/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jb55/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jb55/subscriptions",
      "organizations_url": "https://api.github.com/users/jb55/orgs",
      "repos_url": "https://api.github.com/users/jb55/repos",
      "events_url": "https://api.github.com/users/jb55/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jb55/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-21T01:04:20Z",
    "updated_at": "2018-06-21T01:04:20Z",
    "author_association": "CONTRIBUTOR",
    "body": "utACK ae8df82ad34a6baaf883411308255e6c6d093c53 ",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/398944076/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/399209511",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#issuecomment-399209511",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13062",
    "id": 399209511,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM5OTIwOTUxMQ==",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?u=4a9af998e1a560b3f49c3827f453e1bcbe6a5cfb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-21T19:01:35Z",
    "updated_at": "2018-06-21T19:01:35Z",
    "author_association": "MEMBER",
    "body": "utACK ae8df82.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/399209511/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/401485757",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#issuecomment-401485757",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13062",
    "id": 401485757,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwMTQ4NTc1Nw==",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?u=9791e96cd4268d48e3517bac41eaf2b1d09759fd&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url": "https://api.github.com/users/achow101/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events{/privacy}",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-06-29T22:05:54Z",
    "updated_at": "2018-06-29T22:05:54Z",
    "author_association": "MEMBER",
    "body": "re-utACK ae8df82ad34a6baaf883411308255e6c6d093c53",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/401485757/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/409680069",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#issuecomment-409680069",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13062",
    "id": 409680069,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQwOTY4MDA2OQ==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-08-01T18:42:13Z",
    "updated_at": "2018-08-01T18:42:13Z",
    "author_association": "MEMBER",
    "body": "Rebased.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/409680069/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/423570136",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#issuecomment-423570136",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13062",
    "id": 423570136,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyMzU3MDEzNg==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-09-21T15:18:50Z",
    "updated_at": "2021-06-19T05:28:48Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #22278 (Add LIFETIMEBOUND to CScript where needed by MarcoFalke)\n* #22166 (Add support for inferring tr() descriptors by sipa)\n* #20100 (Script: split policy/error consensus codes for CLEANSTACK, MINIMALIF by sanket1729)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/423570136/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/487407224",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#issuecomment-487407224",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13062",
    "id": 487407224,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NzQwNzIyNA==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-28T19:11:52Z",
    "updated_at": "2019-04-28T19:11:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--5d09a71f8925f3f132321140b44b946d-->The last travis run for this pull request was 269 days ago and is thus outdated. To trigger a fresh travis build, this pull request should be closed and re-opened.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/487407224/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/537999032",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#issuecomment-537999032",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13062",
    "id": 537999032,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzNzk5OTAzMg==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-10-03T15:35:30Z",
    "updated_at": "2019-10-03T15:35:30Z",
    "author_association": "MEMBER",
    "body": "Will rebase next week.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/537999032/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/540752817",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#issuecomment-540752817",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13062",
    "id": 540752817,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0MDc1MjgxNw==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-10-10T19:45:23Z",
    "updated_at": "2019-10-10T19:45:23Z",
    "author_association": "MEMBER",
    "body": "Rebased.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/540752817/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/552130130",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#issuecomment-552130130",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13062",
    "id": 552130130,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU1MjEzMDEzMA==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-11-09T19:33:58Z",
    "updated_at": "2019-11-09T19:33:58Z",
    "author_association": "MEMBER",
    "body": "Rebased, and also made `GetScriptOp` return a span for the data pushed.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/552130130/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/581151288",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#issuecomment-581151288",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13062",
    "id": 581151288,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU4MTE1MTI4OA==",
    "user": {
      "login": "theStack",
      "id": 91535,
      "node_id": "MDQ6VXNlcjkxNTM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theStack",
      "html_url": "https://github.com/theStack",
      "followers_url": "https://api.github.com/users/theStack/followers",
      "following_url": "https://api.github.com/users/theStack/following{/other_user}",
      "gists_url": "https://api.github.com/users/theStack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theStack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
      "organizations_url": "https://api.github.com/users/theStack/orgs",
      "repos_url": "https://api.github.com/users/theStack/repos",
      "events_url": "https://api.github.com/users/theStack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theStack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-02-02T16:24:32Z",
    "updated_at": "2020-02-02T16:24:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Related discussion in IRC: https://botbot.me/freenode/bitcoin-core-dev/msg/99929791/\r\n\r\nThe link is dead unfortunately, is the IRC log still available at another place?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/581151288/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/598997297",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#issuecomment-598997297",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13062",
    "id": 598997297,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5ODk5NzI5Nw==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-14T02:07:34Z",
    "updated_at": "2020-03-14T02:07:34Z",
    "author_association": "MEMBER",
    "body": "Rebased (nontrivially) on the now-merged #18002.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/598997297/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/599140625",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#issuecomment-599140625",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13062",
    "id": 599140625,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU5OTE0MDYyNQ==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-14T22:05:12Z",
    "updated_at": "2020-03-14T22:05:12Z",
    "author_association": "MEMBER",
    "body": "Rebased on top of the now-merged #16902.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/599140625/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/605353057",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#issuecomment-605353057",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13062",
    "id": 605353057,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYwNTM1MzA1Nw==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-03-27T23:18:36Z",
    "updated_at": "2020-03-27T23:18:36Z",
    "author_association": "MEMBER",
    "body": "Rebased now that #18388 is merged. Also added a commit to get rid of two more unnecessary CScript instances in the verification code.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/605353057/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/612672816",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#issuecomment-612672816",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13062",
    "id": 612672816,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxMjY3MjgxNg==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-04-12T20:38:49Z",
    "updated_at": "2020-04-12T20:38:49Z",
    "author_association": "MEMBER",
    "body": "Rebased now that #18422 is merged.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/612672816/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/646172018",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#issuecomment-646172018",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13062",
    "id": 646172018,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NjE3MjAxOA==",
    "user": {
      "login": "adamjonas",
      "id": 755825,
      "node_id": "MDQ6VXNlcjc1NTgyNQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/755825?u=fc2e6f106f98731d49e9787f9cbfe86a17447c23&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/adamjonas",
      "html_url": "https://github.com/adamjonas",
      "followers_url": "https://api.github.com/users/adamjonas/followers",
      "following_url": "https://api.github.com/users/adamjonas/following{/other_user}",
      "gists_url": "https://api.github.com/users/adamjonas/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/adamjonas/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/adamjonas/subscriptions",
      "organizations_url": "https://api.github.com/users/adamjonas/orgs",
      "repos_url": "https://api.github.com/users/adamjonas/repos",
      "events_url": "https://api.github.com/users/adamjonas/events{/privacy}",
      "received_events_url": "https://api.github.com/users/adamjonas/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-18T16:57:34Z",
    "updated_at": "2020-06-18T16:57:34Z",
    "author_association": "MEMBER",
    "body": "For those looking to review - this had 4 pre-rebase utACKs (laanwj, jb55, achow101, promag) and a code review ACK (theStack) with no NACKs or any show-stopping concerns raised.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/646172018/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/646222140",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#issuecomment-646222140",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13062",
    "id": 646222140,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NjIyMjE0MA==",
    "user": {
      "login": "jb55",
      "id": 45598,
      "node_id": "MDQ6VXNlcjQ1NTk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/45598?u=2ba2cccaa0fd357b363507ce5694ce3cf5e56220&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jb55",
      "html_url": "https://github.com/jb55",
      "followers_url": "https://api.github.com/users/jb55/followers",
      "following_url": "https://api.github.com/users/jb55/following{/other_user}",
      "gists_url": "https://api.github.com/users/jb55/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jb55/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jb55/subscriptions",
      "organizations_url": "https://api.github.com/users/jb55/orgs",
      "repos_url": "https://api.github.com/users/jb55/repos",
      "events_url": "https://api.github.com/users/jb55/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jb55/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-18T18:04:40Z",
    "updated_at": "2020-06-18T18:04:40Z",
    "author_association": "CONTRIBUTOR",
    "body": "post-rebase Concept ACK",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/646222140/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/646808620",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#issuecomment-646808620",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13062",
    "id": 646808620,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NjgwODYyMA==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-19T18:33:29Z",
    "updated_at": "2020-06-19T18:33:43Z",
    "author_association": "MEMBER",
    "body": "(Trivially) rebased now that #18468 is merged.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/646808620/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/646829093",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#issuecomment-646829093",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13062",
    "id": 646829093,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NjgyOTA5Mw==",
    "user": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-19T19:30:03Z",
    "updated_at": "2020-06-19T19:30:03Z",
    "author_association": "MEMBER",
    "body": "Just a general question/concern as I re-review: I don't see in the ```std::span``` docs what the guarantees are if the underlying structure is extended after the span is created. If it's supposed to remain generally sane (which I would vaguely expect because it's required to be contiguous), I'm nervous about prevector:\r\n```c++\r\nint main()\r\n{\r\n    std::vector<int> foo;\r\n    foo.push_back(1);\r\n    foo.push_back(2);\r\n    foo.push_back(3);\r\n    Span<int> foospan(foo);\r\n    foo.push_back(4);\r\n    printf(\"foospan last element: %i\\n\", foospan.back());\r\n\r\n    prevector<3, int> bar;\r\n    bar.push_back(1);\r\n    bar.push_back(2);\r\n    bar.push_back(3);\r\n    Span<int> barspan(bar);\r\n    bar.push_back(4);\r\n    printf(\"barspan last element: %i\\n\", barspan.back());\r\n}\r\n```\r\nresult:\r\n```bash\r\n$ ./spantest\r\nfoospan last element: 3\r\nbarspan last element: 6\r\n```",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/646829093/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/646831877",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#issuecomment-646831877",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13062",
    "id": 646831877,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY0NjgzMTg3Nw==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-06-19T19:38:19Z",
    "updated_at": "2020-06-19T19:39:00Z",
    "author_association": "MEMBER",
    "body": "@theuni I imagine that the guarantees for any container are that anything that may invalidate references, invalidates a span over those elements.\n\nIt's a good point that we should document reference/iterator invalidation for our custom data structures like prevector (which could be something like \"extending a prevector to any size beyond its preallocated limit invalidates all references\").\n\nBoth of your examples are UB (it's the same as taking a reference to container.back(), and then extending the container).",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/646831877/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/669874123",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#issuecomment-669874123",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13062",
    "id": 669874123,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2OTg3NDEyMw==",
    "user": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?u=7297e8aaf9188c0cb98bc549a8a02a1dc8d59e4c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-06T11:34:11Z",
    "updated_at": "2020-08-06T11:34:11Z",
    "author_association": "MEMBER",
    "body": "Concept ACK.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/669874123/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/669886290",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#issuecomment-669886290",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13062",
    "id": 669886290,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2OTg4NjI5MA==",
    "user": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?u=7297e8aaf9188c0cb98bc549a8a02a1dc8d59e4c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-06T12:03:30Z",
    "updated_at": "2020-08-06T12:03:30Z",
    "author_association": "MEMBER",
    "body": "> > Related discussion in IRC: https://botbot.me/freenode/bitcoin-core-dev/msg/99929791/\r\n> \r\n> The link is dead unfortunately, is the IRC log still available at another place?\r\n\r\nhttp://www.erisian.com.au/bitcoin-core-dev/log-2018-05-10.html#l-524",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/669886290/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 1,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/669890888",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#issuecomment-669890888",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13062",
    "id": 669890888,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2OTg5MDg4OA==",
    "user": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?u=7297e8aaf9188c0cb98bc549a8a02a1dc8d59e4c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-06T12:14:37Z",
    "updated_at": "2020-08-06T12:14:37Z",
    "author_association": "MEMBER",
    "body": "> As mentioned on IRC, I am a little nervous about the greedy Span constructor as I prefer the explicitness of MakeSpan, but as @sipa pointed out, it matches std::span's behavior.\r\n\r\nhttp://www.erisian.com.au/bitcoin-core-dev/log-2020-06-19.html#l-488",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/669890888/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/847500300",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#issuecomment-847500300",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13062",
    "id": 847500300,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg0NzUwMDMwMA==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-05-25T03:25:27Z",
    "updated_at": "2021-05-25T03:25:27Z",
    "author_association": "MEMBER",
    "body": "Rebased on top of, and integrated with, the Taproot validation logic.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/847500300/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/866824592",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#issuecomment-866824592",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13062",
    "id": 866824592,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2NjgyNDU5Mg==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-23T13:13:52Z",
    "updated_at": "2021-06-23T13:13:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--cf906140f33d8803c4a75a2196329ecb-->\n\ud83d\udc19 This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/866824592/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/866830602",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#issuecomment-866830602",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13062",
    "id": 866830602,
    "node_id": "MDEyOklzc3VlQ29tbWVudDg2NjgzMDYwMg==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-06-23T13:21:13Z",
    "updated_at": "2021-06-23T13:21:13Z",
    "author_association": "MEMBER",
    "body": "Still wondering about https://github.com/bitcoin/bitcoin/pull/13062#discussion_r478629130 btw",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/866830602/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/183571007",
    "pull_request_review_id": 114594507,
    "id": 183571007,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4MzU3MTAwNw==",
    "diff_hunk": "@@ -23,7 +23,12 @@ class Span\n     constexpr Span(C* data, std::ptrdiff_t size) noexcept : m_data(data), m_size(size) {}\n \n     constexpr C* data() const noexcept { return m_data; }\n+    constexpr C* begin() const noexcept { return m_data; }\n+    constexpr C* end() const noexcept { return m_data + m_size; }\n     constexpr std::ptrdiff_t size() const noexcept { return m_size; }\n+    constexpr C& operator[](std::ptrdiff_t pos) const noexcept { return m_data[pos]; }\n+\n+    constexpr Span<C> subspan(std::ptrdiff_t offset) const noexcept { return Span<C>(m_data + offset, m_size - offset); }",
    "path": "src/span.h",
    "position": null,
    "original_position": 9,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "3fd0d0bf52c5fd6f5a40e22460fcc666e4eea2d0",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Note, equivalent to `count = std::dynamic_extent` in std::span.",
    "created_at": "2018-04-23T23:54:52Z",
    "updated_at": "2020-06-26T21:20:29Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r183571007",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/183571007"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r183571007"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/183571007/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 36,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184820685",
    "pull_request_review_id": 116100048,
    "id": 184820685,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4NDgyMDY4NQ==",
    "diff_hunk": "@@ -304,31 +303,36 @@ bool GetScriptOp(CScriptBase::const_iterator& pc, CScriptBase::const_iterator en\n         }\n         else if (opcode == OP_PUSHDATA1)\n         {\n-            if (end - pc < 1)\n-                return false;\n-            nSize = *pc++;\n+            if (script.size() < 1) return false;\n+            nSize = script[0];\n+            script = script.subspan(1);\n         }\n         else if (opcode == OP_PUSHDATA2)\n         {\n-            if (end - pc < 2)\n-                return false;\n-            nSize = ReadLE16(&pc[0]);\n-            pc += 2;\n+            if (script.size() < 2) return false;\n+            nSize = ReadLE16(script.data());\n+            script = script.subspan(2);\n         }\n         else if (opcode == OP_PUSHDATA4)\n         {\n-            if (end - pc < 4)\n-                return false;\n-            nSize = ReadLE32(&pc[0]);\n-            pc += 4;\n+            if (script.size() < 4) return false;\n+            nSize = ReadLE32(script.data());\n+            script = script.subspan(4);\n         }\n-        if (end - pc < 0 || (unsigned int)(end - pc) < nSize)\n-            return false;\n-        if (pvchRet)\n-            pvchRet->assign(pc, pc + nSize);\n-        pc += nSize;\n+        if (script.size() < nSize) return false;\n+        if (pvchRet) pvchRet->assign(script.begin(), script.begin() + nSize);\n+        script = script.subspan(nSize);\n     }\n \n     opcodeRet = static_cast<opcodetype>(opcode);\n     return true;\n }\n+\n+bool GetScriptOp(CScriptBase::const_iterator& pc, CScriptBase::const_iterator end, opcodetype& opcodeRet, std::vector<unsigned char>* pvchRet)\n+{\n+    Span<const unsigned char> script(&*pc, end - pc);",
    "path": "src/script/script.cpp",
    "position": 82,
    "original_position": 78,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "f31d811228b028d4059deb8bb3b679bd10d463a7",
    "user": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I believe this needs a check before dereference. Before, it would've been caught in the real GetScriptOp() by the newly removed\r\n```c++\r\nif (pc >= end)\r\n    return false;\r\n```",
    "created_at": "2018-04-27T22:29:48Z",
    "updated_at": "2020-06-26T21:20:29Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r184820685",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184820685"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r184820685"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184820685/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 340,
    "original_line": 340,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184822784",
    "pull_request_review_id": 116100048,
    "id": 184822784,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4NDgyMjc4NA==",
    "diff_hunk": "@@ -304,31 +303,36 @@ bool GetScriptOp(CScriptBase::const_iterator& pc, CScriptBase::const_iterator en\n         }\n         else if (opcode == OP_PUSHDATA1)\n         {\n-            if (end - pc < 1)\n-                return false;\n-            nSize = *pc++;\n+            if (script.size() < 1) return false;\n+            nSize = script[0];\n+            script = script.subspan(1);\n         }\n         else if (opcode == OP_PUSHDATA2)\n         {\n-            if (end - pc < 2)\n-                return false;\n-            nSize = ReadLE16(&pc[0]);\n-            pc += 2;\n+            if (script.size() < 2) return false;\n+            nSize = ReadLE16(script.data());\n+            script = script.subspan(2);\n         }\n         else if (opcode == OP_PUSHDATA4)\n         {\n-            if (end - pc < 4)\n-                return false;\n-            nSize = ReadLE32(&pc[0]);\n-            pc += 4;\n+            if (script.size() < 4) return false;\n+            nSize = ReadLE32(script.data());\n+            script = script.subspan(4);\n         }\n-        if (end - pc < 0 || (unsigned int)(end - pc) < nSize)\n-            return false;\n-        if (pvchRet)\n-            pvchRet->assign(pc, pc + nSize);\n-        pc += nSize;\n+        if (script.size() < nSize) return false;\n+        if (pvchRet) pvchRet->assign(script.begin(), script.begin() + nSize);\n+        script = script.subspan(nSize);\n     }\n \n     opcodeRet = static_cast<opcodetype>(opcode);\n     return true;\n }\n+\n+bool GetScriptOp(CScriptBase::const_iterator& pc, CScriptBase::const_iterator end, opcodetype& opcodeRet, std::vector<unsigned char>* pvchRet)\n+{\n+    Span<const unsigned char> script(&*pc, end - pc);\n+    bool ret = GetScriptOp(script, opcodeRet, pvchRet);\n+    assert(&*script.end() == &*end);\n+    pc += (&*script.begin() - &*pc);",
    "path": "src/script/script.cpp",
    "position": null,
    "original_position": 81,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "f31d811228b028d4059deb8bb3b679bd10d463a7",
    "user": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This seems unnecessarily brittle. How about caching the before-size and adding back the difference from the final script.size() ?",
    "created_at": "2018-04-27T22:45:40Z",
    "updated_at": "2020-06-26T21:20:29Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r184822784",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184822784"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r184822784"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184822784/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 336,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184826273",
    "pull_request_review_id": 116100048,
    "id": 184826273,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4NDgyNjI3Mw==",
    "diff_hunk": "@@ -1383,6 +1383,44 @@ bool TransactionSignatureChecker::CheckSequence(const CScriptNum& nSequence) con\n     return true;\n }\n \n+/** Consensus-critical analogue of CScript::IsPayToScriptHash. */\n+static bool IsPayToScriptHash(const Span<const unsigned char>& script)\n+{\n+    return script.size() == 23 &&\n+           script[0] == OP_HASH160 &&\n+           script[1] == 0x14 &&\n+           script[22] == OP_EQUAL;\n+}\n+\n+/** Consensus-critical analogue of CScript::IsWitnessProgram. */\n+static bool IsWitnessProgram(const Span<const unsigned char>& script, int& version, Span<const unsigned char>& program)\n+{\n+    if (script.size() < 4 || script.size() > 42) return false;\n+    if (script[0] != OP_0 && (script[0] < OP_1 || script[1] > OP_16)) return false;",
    "path": "src/script/interpreter.cpp",
    "position": null,
    "original_position": 17,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "5aa2610dd4152a0de0953c26fce3ef7132b0ff00",
    "user": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "how did ```script[1]``` sneak in here?",
    "created_at": "2018-04-27T23:16:45Z",
    "updated_at": "2020-06-26T21:20:29Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r184826273",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184826273"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r184826273"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184826273/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1399,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184830547",
    "pull_request_review_id": 116111518,
    "id": 184830547,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4NDgzMDU0Nw==",
    "diff_hunk": "@@ -1383,6 +1383,44 @@ bool TransactionSignatureChecker::CheckSequence(const CScriptNum& nSequence) con\n     return true;\n }\n \n+/** Consensus-critical analogue of CScript::IsPayToScriptHash. */\n+static bool IsPayToScriptHash(const Span<const unsigned char>& script)\n+{\n+    return script.size() == 23 &&\n+           script[0] == OP_HASH160 &&\n+           script[1] == 0x14 &&\n+           script[22] == OP_EQUAL;\n+}\n+\n+/** Consensus-critical analogue of CScript::IsWitnessProgram. */\n+static bool IsWitnessProgram(const Span<const unsigned char>& script, int& version, Span<const unsigned char>& program)\n+{\n+    if (script.size() < 4 || script.size() > 42) return false;\n+    if (script[0] != OP_0 && (script[0] < OP_1 || script[1] > OP_16)) return false;",
    "path": "src/script/interpreter.cpp",
    "position": null,
    "original_position": 17,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "5aa2610dd4152a0de0953c26fce3ef7132b0ff00",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Fixed, going to add a test.",
    "created_at": "2018-04-28T00:04:36Z",
    "updated_at": "2020-06-26T21:20:29Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r184830547",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184830547"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r184830547"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184830547/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1399,
    "side": "RIGHT",
    "in_reply_to_id": 184826273
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184830564",
    "pull_request_review_id": 116111538,
    "id": 184830564,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4NDgzMDU2NA==",
    "diff_hunk": "@@ -304,31 +303,36 @@ bool GetScriptOp(CScriptBase::const_iterator& pc, CScriptBase::const_iterator en\n         }\n         else if (opcode == OP_PUSHDATA1)\n         {\n-            if (end - pc < 1)\n-                return false;\n-            nSize = *pc++;\n+            if (script.size() < 1) return false;\n+            nSize = script[0];\n+            script = script.subspan(1);\n         }\n         else if (opcode == OP_PUSHDATA2)\n         {\n-            if (end - pc < 2)\n-                return false;\n-            nSize = ReadLE16(&pc[0]);\n-            pc += 2;\n+            if (script.size() < 2) return false;\n+            nSize = ReadLE16(script.data());\n+            script = script.subspan(2);\n         }\n         else if (opcode == OP_PUSHDATA4)\n         {\n-            if (end - pc < 4)\n-                return false;\n-            nSize = ReadLE32(&pc[0]);\n-            pc += 4;\n+            if (script.size() < 4) return false;\n+            nSize = ReadLE32(script.data());\n+            script = script.subspan(4);\n         }\n-        if (end - pc < 0 || (unsigned int)(end - pc) < nSize)\n-            return false;\n-        if (pvchRet)\n-            pvchRet->assign(pc, pc + nSize);\n-        pc += nSize;\n+        if (script.size() < nSize) return false;\n+        if (pvchRet) pvchRet->assign(script.begin(), script.begin() + nSize);\n+        script = script.subspan(nSize);\n     }\n \n     opcodeRet = static_cast<opcodetype>(opcode);\n     return true;\n }\n+\n+bool GetScriptOp(CScriptBase::const_iterator& pc, CScriptBase::const_iterator end, opcodetype& opcodeRet, std::vector<unsigned char>* pvchRet)\n+{\n+    Span<const unsigned char> script(&*pc, end - pc);",
    "path": "src/script/script.cpp",
    "position": 82,
    "original_position": 78,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "f31d811228b028d4059deb8bb3b679bd10d463a7",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Good catch, fixed.",
    "created_at": "2018-04-28T00:04:46Z",
    "updated_at": "2020-06-26T21:20:29Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r184830564",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184830564"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r184830564"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184830564/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 340,
    "original_line": 340,
    "side": "RIGHT",
    "in_reply_to_id": 184820685
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184830577",
    "pull_request_review_id": 116111556,
    "id": 184830577,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4NDgzMDU3Nw==",
    "diff_hunk": "@@ -304,31 +303,36 @@ bool GetScriptOp(CScriptBase::const_iterator& pc, CScriptBase::const_iterator en\n         }\n         else if (opcode == OP_PUSHDATA1)\n         {\n-            if (end - pc < 1)\n-                return false;\n-            nSize = *pc++;\n+            if (script.size() < 1) return false;\n+            nSize = script[0];\n+            script = script.subspan(1);\n         }\n         else if (opcode == OP_PUSHDATA2)\n         {\n-            if (end - pc < 2)\n-                return false;\n-            nSize = ReadLE16(&pc[0]);\n-            pc += 2;\n+            if (script.size() < 2) return false;\n+            nSize = ReadLE16(script.data());\n+            script = script.subspan(2);\n         }\n         else if (opcode == OP_PUSHDATA4)\n         {\n-            if (end - pc < 4)\n-                return false;\n-            nSize = ReadLE32(&pc[0]);\n-            pc += 4;\n+            if (script.size() < 4) return false;\n+            nSize = ReadLE32(script.data());\n+            script = script.subspan(4);\n         }\n-        if (end - pc < 0 || (unsigned int)(end - pc) < nSize)\n-            return false;\n-        if (pvchRet)\n-            pvchRet->assign(pc, pc + nSize);\n-        pc += nSize;\n+        if (script.size() < nSize) return false;\n+        if (pvchRet) pvchRet->assign(script.begin(), script.begin() + nSize);\n+        script = script.subspan(nSize);\n     }\n \n     opcodeRet = static_cast<opcodetype>(opcode);\n     return true;\n }\n+\n+bool GetScriptOp(CScriptBase::const_iterator& pc, CScriptBase::const_iterator end, opcodetype& opcodeRet, std::vector<unsigned char>* pvchRet)\n+{\n+    Span<const unsigned char> script(&*pc, end - pc);\n+    bool ret = GetScriptOp(script, opcodeRet, pvchRet);\n+    assert(&*script.end() == &*end);\n+    pc += (&*script.begin() - &*pc);",
    "path": "src/script/script.cpp",
    "position": null,
    "original_position": 81,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "f31d811228b028d4059deb8bb3b679bd10d463a7",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "That's indeed cleaner; done.",
    "created_at": "2018-04-28T00:04:58Z",
    "updated_at": "2020-06-26T21:20:29Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r184830577",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184830577"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r184830577"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/184830577/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 336,
    "side": "RIGHT",
    "in_reply_to_id": 184822784
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/185124184",
    "pull_request_review_id": 116453727,
    "id": 185124184,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4NTEyNDE4NA==",
    "diff_hunk": "@@ -1383,6 +1383,44 @@ bool TransactionSignatureChecker::CheckSequence(const CScriptNum& nSequence) con\n     return true;\n }\n \n+/** Consensus-critical analogue of CScript::IsPayToScriptHash. */\n+static bool IsPayToScriptHash(const Span<const unsigned char>& script)\n+{\n+    return script.size() == 23 &&\n+           script[0] == OP_HASH160 &&\n+           script[1] == 0x14 &&\n+           script[22] == OP_EQUAL;\n+}\n+\n+/** Consensus-critical analogue of CScript::IsWitnessProgram. */\n+static bool IsWitnessProgram(const Span<const unsigned char>& script, int& version, Span<const unsigned char>& program)\n+{\n+    if (script.size() < 4 || script.size() > 42) return false;\n+    if (script[0] != OP_0 && (script[0] < OP_1 || script[1] > OP_16)) return false;",
    "path": "src/script/interpreter.cpp",
    "position": null,
    "original_position": 17,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "5aa2610dd4152a0de0953c26fce3ef7132b0ff00",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done, added a test in a follow-up commit.",
    "created_at": "2018-04-30T22:06:11Z",
    "updated_at": "2020-06-26T21:20:29Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r185124184",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/185124184"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r185124184"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/185124184/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1399,
    "side": "RIGHT",
    "in_reply_to_id": 184826273
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/189749671",
    "pull_request_review_id": 121988937,
    "id": 189749671,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4OTc0OTY3MQ==",
    "diff_hunk": "@@ -23,7 +23,12 @@ class Span\n     constexpr Span(C* data, std::ptrdiff_t size) noexcept : m_data(data), m_size(size) {}\n \n     constexpr C* data() const noexcept { return m_data; }\n+    constexpr C* begin() const noexcept { return m_data; }\n+    constexpr C* end() const noexcept { return m_data + m_size; }\n     constexpr std::ptrdiff_t size() const noexcept { return m_size; }\n+    constexpr C& operator[](std::ptrdiff_t pos) const noexcept { return m_data[pos]; }\n+\n+    constexpr Span<C> subspan(std::ptrdiff_t offset) const noexcept { return Span<C>(m_data + offset, m_size - offset); }",
    "path": "src/span.h",
    "position": null,
    "original_position": 9,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "3fd0d0bf52c5fd6f5a40e22460fcc666e4eea2d0",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Which is the default, so I think it's fine. Generally all methods here mimic a subset of the behaviour of std::span, but sometimes with optional arguments/types omitted.",
    "created_at": "2018-05-22T00:34:08Z",
    "updated_at": "2020-06-26T21:20:29Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r189749671",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/189749671"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r189749671"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/189749671/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 36,
    "side": "RIGHT",
    "in_reply_to_id": 183571007
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/192138723",
    "pull_request_review_id": 124855076,
    "id": 192138723,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE5MjEzODcyMw==",
    "diff_hunk": "@@ -23,7 +23,12 @@ class Span\n     constexpr Span(C* data, std::ptrdiff_t size) noexcept : m_data(data), m_size(size) {}\n \n     constexpr C* data() const noexcept { return m_data; }\n+    constexpr C* begin() const noexcept { return m_data; }\n+    constexpr C* end() const noexcept { return m_data + m_size; }\n     constexpr std::ptrdiff_t size() const noexcept { return m_size; }\n+    constexpr C& operator[](std::ptrdiff_t pos) const noexcept { return m_data[pos]; }",
    "path": "src/span.h",
    "position": null,
    "original_position": 7,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "3fd0d0bf52c5fd6f5a40e22460fcc666e4eea2d0",
    "user": {
      "login": "martinus",
      "id": 14386,
      "node_id": "MDQ6VXNlcjE0Mzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/14386?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/martinus",
      "html_url": "https://github.com/martinus",
      "followers_url": "https://api.github.com/users/martinus/followers",
      "following_url": "https://api.github.com/users/martinus/following{/other_user}",
      "gists_url": "https://api.github.com/users/martinus/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/martinus/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/martinus/subscriptions",
      "organizations_url": "https://api.github.com/users/martinus/orgs",
      "repos_url": "https://api.github.com/users/martinus/repos",
      "events_url": "https://api.github.com/users/martinus/events{/privacy}",
      "received_events_url": "https://api.github.com/users/martinus/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I think it's a bit dangerous to use `noexcept` for `operator[]`. If Span is used for a custom collection that might throw an exception here, using noexcept here will cause the app to terminate. `std::span`'s operator[] also does not use noexcept here either: http://en.cppreference.com/w/cpp/container/span/operator_at\r\n\r\nSame goes for `subspan`, it might be better to throw an exception for an invalid offset than to terminate.",
    "created_at": "2018-05-31T15:24:34Z",
    "updated_at": "2020-06-26T21:20:29Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r192138723",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/192138723"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r192138723"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/192138723/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 34,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/192139489",
    "pull_request_review_id": 124856089,
    "id": 192139489,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE5MjEzOTQ4OQ==",
    "diff_hunk": "@@ -23,7 +23,12 @@ class Span\n     constexpr Span(C* data, std::ptrdiff_t size) noexcept : m_data(data), m_size(size) {}\n \n     constexpr C* data() const noexcept { return m_data; }\n+    constexpr C* begin() const noexcept { return m_data; }\n+    constexpr C* end() const noexcept { return m_data + m_size; }\n     constexpr std::ptrdiff_t size() const noexcept { return m_size; }\n+    constexpr C& operator[](std::ptrdiff_t pos) const noexcept { return m_data[pos]; }",
    "path": "src/span.h",
    "position": null,
    "original_position": 7,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "3fd0d0bf52c5fd6f5a40e22460fcc666e4eea2d0",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "m_data is just a pointer; operator[] is pointer arithmetic + dereferencing of a pointer. There is no chance for anything custom.",
    "created_at": "2018-05-31T15:26:47Z",
    "updated_at": "2020-06-26T21:20:29Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r192139489",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/192139489"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r192139489"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/192139489/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 34,
    "side": "RIGHT",
    "in_reply_to_id": 192138723
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/192142504",
    "pull_request_review_id": 124859954,
    "id": 192142504,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE5MjE0MjUwNA==",
    "diff_hunk": "@@ -23,7 +23,12 @@ class Span\n     constexpr Span(C* data, std::ptrdiff_t size) noexcept : m_data(data), m_size(size) {}\n \n     constexpr C* data() const noexcept { return m_data; }\n+    constexpr C* begin() const noexcept { return m_data; }\n+    constexpr C* end() const noexcept { return m_data + m_size; }\n     constexpr std::ptrdiff_t size() const noexcept { return m_size; }\n+    constexpr C& operator[](std::ptrdiff_t pos) const noexcept { return m_data[pos]; }",
    "path": "src/span.h",
    "position": null,
    "original_position": 7,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "3fd0d0bf52c5fd6f5a40e22460fcc666e4eea2d0",
    "user": {
      "login": "martinus",
      "id": 14386,
      "node_id": "MDQ6VXNlcjE0Mzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/14386?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/martinus",
      "html_url": "https://github.com/martinus",
      "followers_url": "https://api.github.com/users/martinus/followers",
      "following_url": "https://api.github.com/users/martinus/following{/other_user}",
      "gists_url": "https://api.github.com/users/martinus/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/martinus/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/martinus/subscriptions",
      "organizations_url": "https://api.github.com/users/martinus/orgs",
      "repos_url": "https://api.github.com/users/martinus/repos",
      "events_url": "https://api.github.com/users/martinus/events{/privacy}",
      "received_events_url": "https://api.github.com/users/martinus/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "ah you are of course right",
    "created_at": "2018-05-31T15:35:36Z",
    "updated_at": "2020-06-26T21:20:29Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r192142504",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/192142504"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r192142504"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/192142504/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 34,
    "side": "RIGHT",
    "in_reply_to_id": 192138723
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/194395324",
    "pull_request_review_id": 127557645,
    "id": 194395324,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE5NDM5NTMyNA==",
    "diff_hunk": "@@ -276,18 +277,16 @@ bool CScript::HasValidOps() const\n     return true;\n }\n \n-bool GetScriptOp(CScriptBase::const_iterator& pc, CScriptBase::const_iterator end, opcodetype& opcodeRet, std::vector<unsigned char>* pvchRet)\n+bool GetScriptOp(Span<const unsigned char>& script, opcodetype& opcodeRet, std::vector<unsigned char>* pvchRet)",
    "path": "src/script/script.cpp",
    "position": null,
    "original_position": 13,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "c88b9efbdc479fda03e14bc13eb9b6ef1a2cefaf",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "AFAICT span end can change whereas before the end iterator couldn't change. Is this worth noting?",
    "created_at": "2018-06-11T13:03:13Z",
    "updated_at": "2020-06-26T21:20:29Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r194395324",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/194395324"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r194395324"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/194395324/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 279,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/194395946",
    "pull_request_review_id": 127557645,
    "id": 194395946,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE5NDM5NTk0Ng==",
    "diff_hunk": "@@ -299,31 +298,37 @@ bool GetScriptOp(CScriptBase::const_iterator& pc, CScriptBase::const_iterator en\n         }\n         else if (opcode == OP_PUSHDATA1)\n         {\n-            if (end - pc < 1)\n-                return false;\n-            nSize = *pc++;\n+            if (script.size() < 1) return false;\n+            nSize = script[0];\n+            script = script.subspan(1);\n         }\n         else if (opcode == OP_PUSHDATA2)\n         {\n-            if (end - pc < 2)\n-                return false;\n-            nSize = ReadLE16(&pc[0]);\n-            pc += 2;\n+            if (script.size() < 2) return false;\n+            nSize = ReadLE16(script.data());\n+            script = script.subspan(2);\n         }\n         else if (opcode == OP_PUSHDATA4)\n         {\n-            if (end - pc < 4)\n-                return false;\n-            nSize = ReadLE32(&pc[0]);\n-            pc += 4;\n+            if (script.size() < 4) return false;\n+            nSize = ReadLE32(script.data());\n+            script = script.subspan(4);\n         }\n-        if (end - pc < 0 || (unsigned int)(end - pc) < nSize)\n-            return false;\n-        if (pvchRet)\n-            pvchRet->assign(pc, pc + nSize);\n-        pc += nSize;\n+        if (script.size() < nSize) return false;\n+        if (pvchRet) pvchRet->assign(script.begin(), script.begin() + nSize);\n+        script = script.subspan(nSize);\n     }\n \n     opcodeRet = static_cast<opcodetype>(opcode);\n     return true;\n }\n+\n+bool GetScriptOp(CScriptBase::const_iterator& pc, CScriptBase::const_iterator end, opcodetype& opcodeRet, std::vector<unsigned char>* pvchRet)\n+{\n+    if (pc >= end) return false;\n+    ptrdiff_t old_size = end - pc;\n+    Span<const unsigned char> script(&*pc, old_size);\n+    bool ret = GetScriptOp(script, opcodeRet, pvchRet);\n+    pc += (old_size - script.size());",
    "path": "src/script/script.cpp",
    "position": null,
    "original_position": 82,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "c88b9efbdc479fda03e14bc13eb9b6ef1a2cefaf",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Could be `pc += script.begin() - &*pc`?\r\n\r\nIf so `old_size` above is not necessary if you add `Span(C* begin, C* end)` constructor.",
    "created_at": "2018-06-11T13:05:21Z",
    "updated_at": "2020-06-26T21:20:29Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r194395946",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/194395946"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r194395946"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/194395946/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 332,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/194396602",
    "pull_request_review_id": 127557645,
    "id": 194396602,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE5NDM5NjYwMg==",
    "diff_hunk": "@@ -299,31 +298,37 @@ bool GetScriptOp(CScriptBase::const_iterator& pc, CScriptBase::const_iterator en\n         }\n         else if (opcode == OP_PUSHDATA1)\n         {\n-            if (end - pc < 1)\n-                return false;\n-            nSize = *pc++;\n+            if (script.size() < 1) return false;\n+            nSize = script[0];\n+            script = script.subspan(1);\n         }\n         else if (opcode == OP_PUSHDATA2)\n         {\n-            if (end - pc < 2)\n-                return false;\n-            nSize = ReadLE16(&pc[0]);\n-            pc += 2;\n+            if (script.size() < 2) return false;\n+            nSize = ReadLE16(script.data());\n+            script = script.subspan(2);\n         }\n         else if (opcode == OP_PUSHDATA4)\n         {\n-            if (end - pc < 4)\n-                return false;\n-            nSize = ReadLE32(&pc[0]);\n-            pc += 4;\n+            if (script.size() < 4) return false;\n+            nSize = ReadLE32(script.data());\n+            script = script.subspan(4);\n         }\n-        if (end - pc < 0 || (unsigned int)(end - pc) < nSize)\n-            return false;\n-        if (pvchRet)\n-            pvchRet->assign(pc, pc + nSize);\n-        pc += nSize;\n+        if (script.size() < nSize) return false;\n+        if (pvchRet) pvchRet->assign(script.begin(), script.begin() + nSize);\n+        script = script.subspan(nSize);\n     }\n \n     opcodeRet = static_cast<opcodetype>(opcode);\n     return true;\n }\n+\n+bool GetScriptOp(CScriptBase::const_iterator& pc, CScriptBase::const_iterator end, opcodetype& opcodeRet, std::vector<unsigned char>* pvchRet)\n+{\n+    if (pc >= end) return false;\n+    ptrdiff_t old_size = end - pc;\n+    Span<const unsigned char> script(&*pc, old_size);\n+    bool ret = GetScriptOp(script, opcodeRet, pvchRet);\n+    pc += (old_size - script.size());",
    "path": "src/script/script.cpp",
    "position": null,
    "original_position": 82,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "c88b9efbdc479fda03e14bc13eb9b6ef1a2cefaf",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Should not touch `pc` if `!ret`?",
    "created_at": "2018-06-11T13:07:37Z",
    "updated_at": "2020-06-26T21:20:29Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r194396602",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/194396602"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r194396602"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/194396602/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 332,
    "side": "RIGHT",
    "in_reply_to_id": 194395946
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/196248589",
    "pull_request_review_id": 129765816,
    "id": 196248589,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE5NjI0ODU4OQ==",
    "diff_hunk": "@@ -276,18 +277,16 @@ bool CScript::HasValidOps() const\n     return true;\n }\n \n-bool GetScriptOp(CScriptBase::const_iterator& pc, CScriptBase::const_iterator end, opcodetype& opcodeRet, std::vector<unsigned char>* pvchRet)\n+bool GetScriptOp(Span<const unsigned char>& script, opcodetype& opcodeRet, std::vector<unsigned char>* pvchRet)",
    "path": "src/script/script.cpp",
    "position": null,
    "original_position": 13,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "c88b9efbdc479fda03e14bc13eb9b6ef1a2cefaf",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Noted.",
    "created_at": "2018-06-18T22:46:27Z",
    "updated_at": "2020-06-26T21:20:29Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r196248589",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/196248589"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r196248589"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/196248589/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 279,
    "side": "RIGHT",
    "in_reply_to_id": 194395324
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/196248776",
    "pull_request_review_id": 129766032,
    "id": 196248776,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE5NjI0ODc3Ng==",
    "diff_hunk": "@@ -299,31 +298,37 @@ bool GetScriptOp(CScriptBase::const_iterator& pc, CScriptBase::const_iterator en\n         }\n         else if (opcode == OP_PUSHDATA1)\n         {\n-            if (end - pc < 1)\n-                return false;\n-            nSize = *pc++;\n+            if (script.size() < 1) return false;\n+            nSize = script[0];\n+            script = script.subspan(1);\n         }\n         else if (opcode == OP_PUSHDATA2)\n         {\n-            if (end - pc < 2)\n-                return false;\n-            nSize = ReadLE16(&pc[0]);\n-            pc += 2;\n+            if (script.size() < 2) return false;\n+            nSize = ReadLE16(script.data());\n+            script = script.subspan(2);\n         }\n         else if (opcode == OP_PUSHDATA4)\n         {\n-            if (end - pc < 4)\n-                return false;\n-            nSize = ReadLE32(&pc[0]);\n-            pc += 4;\n+            if (script.size() < 4) return false;\n+            nSize = ReadLE32(script.data());\n+            script = script.subspan(4);\n         }\n-        if (end - pc < 0 || (unsigned int)(end - pc) < nSize)\n-            return false;\n-        if (pvchRet)\n-            pvchRet->assign(pc, pc + nSize);\n-        pc += nSize;\n+        if (script.size() < nSize) return false;\n+        if (pvchRet) pvchRet->assign(script.begin(), script.begin() + nSize);\n+        script = script.subspan(nSize);\n     }\n \n     opcodeRet = static_cast<opcodetype>(opcode);\n     return true;\n }\n+\n+bool GetScriptOp(CScriptBase::const_iterator& pc, CScriptBase::const_iterator end, opcodetype& opcodeRet, std::vector<unsigned char>* pvchRet)\n+{\n+    if (pc >= end) return false;\n+    ptrdiff_t old_size = end - pc;\n+    Span<const unsigned char> script(&*pc, old_size);\n+    bool ret = GetScriptOp(script, opcodeRet, pvchRet);\n+    pc += (old_size - script.size());",
    "path": "src/script/script.cpp",
    "position": null,
    "original_position": 82,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "c88b9efbdc479fda03e14bc13eb9b6ef1a2cefaf",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "> Could be `pc += script.begin() - &*pc`?\r\n\r\nNice, done.\r\n\r\n> Should not touch `pc` if `!ret`?\r\n\r\nYes it should. The old `GetScriptOp` implementation operating on iterators did too.",
    "created_at": "2018-06-18T22:47:30Z",
    "updated_at": "2020-06-26T21:20:29Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r196248776",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/196248776"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r196248776"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/196248776/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 332,
    "side": "RIGHT",
    "in_reply_to_id": 194395946
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/196250627",
    "pull_request_review_id": 129768194,
    "id": 196250627,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE5NjI1MDYyNw==",
    "diff_hunk": "@@ -299,31 +298,37 @@ bool GetScriptOp(CScriptBase::const_iterator& pc, CScriptBase::const_iterator en\n         }\n         else if (opcode == OP_PUSHDATA1)\n         {\n-            if (end - pc < 1)\n-                return false;\n-            nSize = *pc++;\n+            if (script.size() < 1) return false;\n+            nSize = script[0];\n+            script = script.subspan(1);\n         }\n         else if (opcode == OP_PUSHDATA2)\n         {\n-            if (end - pc < 2)\n-                return false;\n-            nSize = ReadLE16(&pc[0]);\n-            pc += 2;\n+            if (script.size() < 2) return false;\n+            nSize = ReadLE16(script.data());\n+            script = script.subspan(2);\n         }\n         else if (opcode == OP_PUSHDATA4)\n         {\n-            if (end - pc < 4)\n-                return false;\n-            nSize = ReadLE32(&pc[0]);\n-            pc += 4;\n+            if (script.size() < 4) return false;\n+            nSize = ReadLE32(script.data());\n+            script = script.subspan(4);\n         }\n-        if (end - pc < 0 || (unsigned int)(end - pc) < nSize)\n-            return false;\n-        if (pvchRet)\n-            pvchRet->assign(pc, pc + nSize);\n-        pc += nSize;\n+        if (script.size() < nSize) return false;\n+        if (pvchRet) pvchRet->assign(script.begin(), script.begin() + nSize);\n+        script = script.subspan(nSize);\n     }\n \n     opcodeRet = static_cast<opcodetype>(opcode);\n     return true;\n }\n+\n+bool GetScriptOp(CScriptBase::const_iterator& pc, CScriptBase::const_iterator end, opcodetype& opcodeRet, std::vector<unsigned char>* pvchRet)\n+{\n+    if (pc >= end) return false;\n+    ptrdiff_t old_size = end - pc;\n+    Span<const unsigned char> script(&*pc, old_size);\n+    bool ret = GetScriptOp(script, opcodeRet, pvchRet);\n+    pc += (old_size - script.size());",
    "path": "src/script/script.cpp",
    "position": null,
    "original_position": 82,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "c88b9efbdc479fda03e14bc13eb9b6ef1a2cefaf",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Okay.",
    "created_at": "2018-06-18T22:58:21Z",
    "updated_at": "2020-06-26T21:20:29Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r196250627",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/196250627"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r196250627"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/196250627/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 332,
    "side": "RIGHT",
    "in_reply_to_id": 194395946
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/196251771",
    "pull_request_review_id": 129769508,
    "id": 196251771,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE5NjI1MTc3MQ==",
    "diff_hunk": "@@ -276,18 +277,16 @@ bool CScript::HasValidOps() const\n     return true;\n }\n \n-bool GetScriptOp(CScriptBase::const_iterator& pc, CScriptBase::const_iterator end, opcodetype& opcodeRet, std::vector<unsigned char>* pvchRet)\n+bool GetScriptOp(Span<const unsigned char>& script, opcodetype& opcodeRet, std::vector<unsigned char>* pvchRet)",
    "path": "src/script/script.cpp",
    "position": null,
    "original_position": 13,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "c88b9efbdc479fda03e14bc13eb9b6ef1a2cefaf",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "\ud83d\udc40 ",
    "created_at": "2018-06-18T23:05:03Z",
    "updated_at": "2020-06-26T21:20:29Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r196251771",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/196251771"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r196251771"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/196251771/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 279,
    "side": "RIGHT",
    "in_reply_to_id": 194395324
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/196252546",
    "pull_request_review_id": 129770412,
    "id": 196252546,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE5NjI1MjU0Ng==",
    "diff_hunk": "@@ -276,18 +277,16 @@ bool CScript::HasValidOps() const\n     return true;\n }\n \n-bool GetScriptOp(CScriptBase::const_iterator& pc, CScriptBase::const_iterator end, opcodetype& opcodeRet, std::vector<unsigned char>* pvchRet)\n+bool GetScriptOp(Span<const unsigned char>& script, opcodetype& opcodeRet, std::vector<unsigned char>* pvchRet)",
    "path": "src/script/script.cpp",
    "position": null,
    "original_position": 13,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "c88b9efbdc479fda03e14bc13eb9b6ef1a2cefaf",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I'm not sure what you're asking here. Yes, it's a change, but I don't think it significant enough to point out in the commit, and certainly not in the code itself.\n\nIf you mean that it should be pointed out to other reviewers, I agree - and you just did :)",
    "created_at": "2018-06-18T23:09:46Z",
    "updated_at": "2020-06-26T21:20:29Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r196252546",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/196252546"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r196252546"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/196252546/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 279,
    "side": "RIGHT",
    "in_reply_to_id": 194395324
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/196355787",
    "pull_request_review_id": 129889833,
    "id": 196355787,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE5NjM1NTc4Nw==",
    "diff_hunk": "@@ -276,18 +277,16 @@ bool CScript::HasValidOps() const\n     return true;\n }\n \n-bool GetScriptOp(CScriptBase::const_iterator& pc, CScriptBase::const_iterator end, opcodetype& opcodeRet, std::vector<unsigned char>* pvchRet)\n+bool GetScriptOp(Span<const unsigned char>& script, opcodetype& opcodeRet, std::vector<unsigned char>* pvchRet)",
    "path": "src/script/script.cpp",
    "position": null,
    "original_position": 13,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "c88b9efbdc479fda03e14bc13eb9b6ef1a2cefaf",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Ok then.",
    "created_at": "2018-06-19T09:34:44Z",
    "updated_at": "2020-06-26T21:20:29Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r196355787",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/196355787"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r196355787"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/196355787/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 279,
    "side": "RIGHT",
    "in_reply_to_id": 194395324
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/196984051",
    "pull_request_review_id": 130636316,
    "id": 196984051,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE5Njk4NDA1MQ==",
    "diff_hunk": "@@ -23,7 +23,12 @@ class Span\n     constexpr Span(C* data, std::ptrdiff_t size) noexcept : m_data(data), m_size(size) {}\n \n     constexpr C* data() const noexcept { return m_data; }\n+    constexpr C* begin() const noexcept { return m_data; }\n+    constexpr C* end() const noexcept { return m_data + m_size; }\n     constexpr std::ptrdiff_t size() const noexcept { return m_size; }\n+    constexpr C& operator[](std::ptrdiff_t pos) const noexcept { return m_data[pos]; }",
    "path": "src/span.h",
    "position": null,
    "original_position": 7,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "ae8df82ad34a6baaf883411308255e6c6d093c53",
    "user": {
      "login": "jb55",
      "id": 45598,
      "node_id": "MDQ6VXNlcjQ1NTk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/45598?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jb55",
      "html_url": "https://github.com/jb55",
      "followers_url": "https://api.github.com/users/jb55/followers",
      "following_url": "https://api.github.com/users/jb55/following{/other_user}",
      "gists_url": "https://api.github.com/users/jb55/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jb55/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jb55/subscriptions",
      "organizations_url": "https://api.github.com/users/jb55/orgs",
      "repos_url": "https://api.github.com/users/jb55/repos",
      "events_url": "https://api.github.com/users/jb55/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jb55/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Just a thought: wouldn't asserting `pos < m_size` be a quick win here to catch out of bounds bugs during development?",
    "created_at": "2018-06-21T00:52:06Z",
    "updated_at": "2020-06-26T21:20:29Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r196984051",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/196984051"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r196984051"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/196984051/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 34,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/197324958",
    "pull_request_review_id": 131048979,
    "id": 197324958,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE5NzMyNDk1OA==",
    "diff_hunk": "@@ -23,7 +23,12 @@ class Span\n     constexpr Span(C* data, std::ptrdiff_t size) noexcept : m_data(data), m_size(size) {}\n \n     constexpr C* data() const noexcept { return m_data; }\n+    constexpr C* begin() const noexcept { return m_data; }\n+    constexpr C* end() const noexcept { return m_data + m_size; }\n     constexpr std::ptrdiff_t size() const noexcept { return m_size; }\n+    constexpr C& operator[](std::ptrdiff_t pos) const noexcept { return m_data[pos]; }",
    "path": "src/span.h",
    "position": null,
    "original_position": 7,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "ae8df82ad34a6baaf883411308255e6c6d093c53",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Sounds like a good idea to add in a form of debug mode (like `DEBUG_ADDRMAN` etc), but perhaps independently of this PR?",
    "created_at": "2018-06-22T02:20:15Z",
    "updated_at": "2020-06-26T21:20:29Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r197324958",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/197324958"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r197324958"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/197324958/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 34,
    "side": "RIGHT",
    "in_reply_to_id": 196984051
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/197325832",
    "pull_request_review_id": 131050016,
    "id": 197325832,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE5NzMyNTgzMg==",
    "diff_hunk": "@@ -23,7 +23,12 @@ class Span\n     constexpr Span(C* data, std::ptrdiff_t size) noexcept : m_data(data), m_size(size) {}\n \n     constexpr C* data() const noexcept { return m_data; }\n+    constexpr C* begin() const noexcept { return m_data; }\n+    constexpr C* end() const noexcept { return m_data + m_size; }\n     constexpr std::ptrdiff_t size() const noexcept { return m_size; }\n+    constexpr C& operator[](std::ptrdiff_t pos) const noexcept { return m_data[pos]; }",
    "path": "src/span.h",
    "position": null,
    "original_position": 7,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "ae8df82ad34a6baaf883411308255e6c6d093c53",
    "user": {
      "login": "jb55",
      "id": 45598,
      "node_id": "MDQ6VXNlcjQ1NTk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/45598?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jb55",
      "html_url": "https://github.com/jb55",
      "followers_url": "https://api.github.com/users/jb55/followers",
      "following_url": "https://api.github.com/users/jb55/following{/other_user}",
      "gists_url": "https://api.github.com/users/jb55/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jb55/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jb55/subscriptions",
      "organizations_url": "https://api.github.com/users/jb55/orgs",
      "repos_url": "https://api.github.com/users/jb55/repos",
      "events_url": "https://api.github.com/users/jb55/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jb55/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "\ud83d\udc4d. usually asserts are disabled when NDEBUG is defined but it [looks like](https://github.com/bitcoin/bitcoin/blob/000abbb6b07410357a928768d7d56465ba0d3bac/src/validation.cpp#L51-L53) asserts can't be disabled in bitcoin for some reason? so would need to do something custom... \u00af\\_(\u30c4)_/\u00af",
    "created_at": "2018-06-22T02:29:22Z",
    "updated_at": "2020-06-26T21:20:29Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r197325832",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/197325832"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r197325832"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/197325832/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 34,
    "side": "RIGHT",
    "in_reply_to_id": 196984051
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/197327016",
    "pull_request_review_id": 131051240,
    "id": 197327016,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE5NzMyNzAxNg==",
    "diff_hunk": "@@ -23,7 +23,12 @@ class Span\n     constexpr Span(C* data, std::ptrdiff_t size) noexcept : m_data(data), m_size(size) {}\n \n     constexpr C* data() const noexcept { return m_data; }\n+    constexpr C* begin() const noexcept { return m_data; }\n+    constexpr C* end() const noexcept { return m_data + m_size; }\n     constexpr std::ptrdiff_t size() const noexcept { return m_size; }\n+    constexpr C& operator[](std::ptrdiff_t pos) const noexcept { return m_data[pos]; }",
    "path": "src/span.h",
    "position": null,
    "original_position": 7,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "ae8df82ad34a6baaf883411308255e6c6d093c53",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Yes, we already have that; see DEBUG_ADDRMAN, DEBUG_LOCKORDER, DEBUG_LOCKCONTENTION. More could be added.\n",
    "created_at": "2018-06-22T02:35:36Z",
    "updated_at": "2020-06-26T21:20:29Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r197327016",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/197327016"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r197327016"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/197327016/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 34,
    "side": "RIGHT",
    "in_reply_to_id": 196984051
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/373858351",
    "pull_request_review_id": 351952432,
    "id": 373858351,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzg1ODM1MQ==",
    "diff_hunk": "@@ -275,18 +276,16 @@ bool CScript::HasValidOps() const\n     return true;\n }\n \n-bool GetScriptOp(CScriptBase::const_iterator& pc, CScriptBase::const_iterator end, opcodetype& opcodeRet, std::vector<unsigned char>* pvchRet)\n+bool GetScriptOp(Span<const unsigned char>& script, opcodetype& opcodeRet, Span<const unsigned char>* data_out)\n {\n     opcodeRet = OP_INVALIDOPCODE;\n-    if (pvchRet)\n-        pvchRet->clear();\n-    if (pc >= end)\n-        return false;\n+    if (data_out)\n+        *data_out = script.subspan(0, 0);",
    "path": "src/script/script.cpp",
    "position": null,
    "original_position": 21,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "c3ab02b8d0da2c6626c5a09c843cccc64b31c3fa",
    "user": {
      "login": "theStack",
      "id": 91535,
      "node_id": "MDQ6VXNlcjkxNTM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theStack",
      "html_url": "https://github.com/theStack",
      "followers_url": "https://api.github.com/users/theStack/followers",
      "following_url": "https://api.github.com/users/theStack/following{/other_user}",
      "gists_url": "https://api.github.com/users/theStack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theStack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
      "organizations_url": "https://api.github.com/users/theStack/orgs",
      "repos_url": "https://api.github.com/users/theStack/repos",
      "events_url": "https://api.github.com/users/theStack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theStack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "nit: Is there any reason why an empty subspan on `script` ist preferred over just the default constructor (i.e. `*data_out = Span<const unsigned char>();`? For a zero-size span the address doesn't seem to matter.",
    "created_at": "2020-02-02T16:30:49Z",
    "updated_at": "2020-06-26T21:20:29Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r373858351",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/373858351"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r373858351"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/373858351/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 283,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/373858682",
    "pull_request_review_id": 351952432,
    "id": 373858682,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzg1ODY4Mg==",
    "diff_hunk": "@@ -298,31 +297,38 @@ bool GetScriptOp(CScriptBase::const_iterator& pc, CScriptBase::const_iterator en\n         }\n         else if (opcode == OP_PUSHDATA1)\n         {\n-            if (end - pc < 1)\n-                return false;\n-            nSize = *pc++;\n+            if (script.size() < 1) return false;\n+            nSize = script[0];\n+            script = script.subspan(1);\n         }\n         else if (opcode == OP_PUSHDATA2)\n         {\n-            if (end - pc < 2)\n-                return false;\n-            nSize = ReadLE16(&pc[0]);\n-            pc += 2;\n+            if (script.size() < 2) return false;\n+            nSize = ReadLE16(script.data());\n+            script = script.subspan(2);\n         }\n         else if (opcode == OP_PUSHDATA4)\n         {\n-            if (end - pc < 4)\n-                return false;\n-            nSize = ReadLE32(&pc[0]);\n-            pc += 4;\n+            if (script.size() < 4) return false;\n+            nSize = ReadLE32(script.data());\n+            script = script.subspan(4);\n         }\n-        if (end - pc < 0 || (unsigned int)(end - pc) < nSize)\n-            return false;\n-        if (pvchRet)\n-            pvchRet->assign(pc, pc + nSize);\n-        pc += nSize;\n+        if (script.size() < nSize) return false;\n+        if (data_out) *data_out = script.subspan(0, nSize);\n+        script = script.subspan(nSize);\n     }\n \n     opcodeRet = static_cast<opcodetype>(opcode);\n     return true;\n }\n+\n+bool GetScriptOp(CScriptBase::const_iterator& pc, CScriptBase::const_iterator end, opcodetype& opcodeRet, std::vector<unsigned char>* pvchRet)\n+{\n+    if (pc >= end) return false;\n+    Span<const unsigned char> script(&*pc, end - pc);\n+    Span<const unsigned char> data;\n+    bool ret = GetScriptOp(script, opcodeRet, &data);\n+    if (pvchRet) *pvchRet = std::vector<unsigned char>(data.begin(), data.end());",
    "path": "src/script/script.cpp",
    "position": null,
    "original_position": 84,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "c3ab02b8d0da2c6626c5a09c843cccc64b31c3fa",
    "user": {
      "login": "theStack",
      "id": 91535,
      "node_id": "MDQ6VXNlcjkxNTM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theStack",
      "html_url": "https://github.com/theStack",
      "followers_url": "https://api.github.com/users/theStack/followers",
      "following_url": "https://api.github.com/users/theStack/following{/other_user}",
      "gists_url": "https://api.github.com/users/theStack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theStack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
      "organizations_url": "https://api.github.com/users/theStack/orgs",
      "repos_url": "https://api.github.com/users/theStack/repos",
      "events_url": "https://api.github.com/users/theStack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theStack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This could also be done without constructing a new vector instance through `pvchRet->assign(...,...);`?",
    "created_at": "2020-02-02T16:35:27Z",
    "updated_at": "2020-06-26T21:20:29Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r373858682",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/373858682"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r373858682"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/373858682/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 331,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/373858811",
    "pull_request_review_id": 351952432,
    "id": 373858811,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzg1ODgxMQ==",
    "diff_hunk": "@@ -288,9 +289,8 @@ bool EvalScript(std::vector<std::vector<unsigned char> >& stack, const CScript&\n     // static const valtype vchZero(0);\n     static const valtype vchTrue(1, 1);\n \n-    CScript::const_iterator pc = script.begin();\n-    CScript::const_iterator pend = script.end();\n-    CScript::const_iterator pbegincodehash = script.begin();\n+    Span<const unsigned char> pc = script;\n+    Span<const unsigned char> codehash = script;\n     opcodetype opcode;\n     valtype vchPushValue;",
    "path": "src/script/interpreter.cpp",
    "position": null,
    "original_position": 36,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "caff5a96297feb5ed83919195546761fc920cde3",
    "user": {
      "login": "theStack",
      "id": 91535,
      "node_id": "MDQ6VXNlcjkxNTM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theStack",
      "html_url": "https://github.com/theStack",
      "followers_url": "https://api.github.com/users/theStack/followers",
      "following_url": "https://api.github.com/users/theStack/following{/other_user}",
      "gists_url": "https://api.github.com/users/theStack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theStack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
      "organizations_url": "https://api.github.com/users/theStack/orgs",
      "repos_url": "https://api.github.com/users/theStack/repos",
      "events_url": "https://api.github.com/users/theStack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theStack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "With the changes, `vchPushValue` is now unused and can be deleted.",
    "created_at": "2020-02-02T16:37:33Z",
    "updated_at": "2020-06-26T21:20:29Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r373858811",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/373858811"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r373858811"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/373858811/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 295,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/373859204",
    "pull_request_review_id": 351952432,
    "id": 373859204,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzg1OTIwNA==",
    "diff_hunk": "@@ -303,16 +303,18 @@ bool EvalScript(std::vector<std::vector<unsigned char> >& stack, const CScript&\n \n     try\n     {\n-        while (pc < pend)\n+        while (pc.size() > 0)\n         {\n             bool fExec = !count(vfExec.begin(), vfExec.end(), false);\n \n             //\n             // Read instruction\n             //\n-            if (!script.GetOp(pc, opcode, vchPushValue))\n+            Span<const unsigned char> push_value;\n+            if (!GetScriptOp(pc, opcode, &push_value)) {",
    "path": "src/script/interpreter.cpp",
    "position": 83,
    "original_position": 52,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "caff5a96297feb5ed83919195546761fc920cde3",
    "user": {
      "login": "theStack",
      "id": 91535,
      "node_id": "MDQ6VXNlcjkxNTM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theStack",
      "html_url": "https://github.com/theStack",
      "followers_url": "https://api.github.com/users/theStack/followers",
      "following_url": "https://api.github.com/users/theStack/following{/other_user}",
      "gists_url": "https://api.github.com/users/theStack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theStack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
      "organizations_url": "https://api.github.com/users/theStack/orgs",
      "repos_url": "https://api.github.com/users/theStack/repos",
      "events_url": "https://api.github.com/users/theStack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theStack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "nit: Braces can be removed here as the if-body only consists of one single statement (to be consistent with the remaining ifs in the same function).",
    "created_at": "2020-02-02T16:43:26Z",
    "updated_at": "2020-06-26T21:20:29Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r373859204",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/373859204"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r373859204"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/373859204/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 469,
    "original_line": 469,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/373859580",
    "pull_request_review_id": 351952432,
    "id": 373859580,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzg1OTU4MA==",
    "diff_hunk": "@@ -1461,21 +1461,22 @@ static bool IsPushOnly(const Span<const unsigned char>& script)\n     return true;\n }\n \n-static bool VerifyWitnessProgram(const CScriptWitness& witness, int witversion, const std::vector<unsigned char>& program, unsigned int flags, const BaseSignatureChecker& checker, ScriptError* serror)\n+static bool VerifyWitnessProgram(const CScriptWitness& witness, int witversion, const Span<const unsigned char>& program, unsigned int flags, const BaseSignatureChecker& checker, ScriptError* serror)\n {\n     std::vector<std::vector<unsigned char> > stack;\n-    CScript scriptPubKey;\n+    CScript temp_script;",
    "path": "src/script/interpreter.cpp",
    "position": null,
    "original_position": 9,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "5b97a3162275b96814186f113c9f6371cdafcf53",
    "user": {
      "login": "theStack",
      "id": 91535,
      "node_id": "MDQ6VXNlcjkxNTM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theStack",
      "html_url": "https://github.com/theStack",
      "followers_url": "https://api.github.com/users/theStack/followers",
      "following_url": "https://api.github.com/users/theStack/following{/other_user}",
      "gists_url": "https://api.github.com/users/theStack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theStack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
      "organizations_url": "https://api.github.com/users/theStack/orgs",
      "repos_url": "https://api.github.com/users/theStack/repos",
      "events_url": "https://api.github.com/users/theStack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theStack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "As `temp_script` is only used once, it could be declared and initialized immediately (as `const`) below at the place where it is needed.",
    "created_at": "2020-02-02T16:49:25Z",
    "updated_at": "2020-06-26T21:20:29Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r373859580",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/373859580"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r373859580"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/373859580/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1467,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/373859716",
    "pull_request_review_id": 351952432,
    "id": 373859716,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzg1OTcxNg==",
    "diff_hunk": "@@ -1484,7 +1485,8 @@ static bool VerifyWitnessProgram(const CScriptWitness& witness, int witversion,\n             if (witness.stack.size() != 2) {\n                 return set_error(serror, SCRIPT_ERR_WITNESS_PROGRAM_MISMATCH); // 2 items in witness\n             }\n-            scriptPubKey << OP_DUP << OP_HASH160 << program << OP_EQUALVERIFY << OP_CHECKSIG;\n+            temp_script << OP_DUP << OP_HASH160 << program << OP_EQUALVERIFY << OP_CHECKSIG;\n+            script = Span<const unsigned char>(temp_script.data(), temp_script.size());\n             stack = witness.stack;",
    "path": "src/script/interpreter.cpp",
    "position": null,
    "original_position": 34,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "5b97a3162275b96814186f113c9f6371cdafcf53",
    "user": {
      "login": "theStack",
      "id": 91535,
      "node_id": "MDQ6VXNlcjkxNTM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theStack",
      "html_url": "https://github.com/theStack",
      "followers_url": "https://api.github.com/users/theStack/followers",
      "following_url": "https://api.github.com/users/theStack/following{/other_user}",
      "gists_url": "https://api.github.com/users/theStack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theStack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
      "organizations_url": "https://api.github.com/users/theStack/orgs",
      "repos_url": "https://api.github.com/users/theStack/repos",
      "events_url": "https://api.github.com/users/theStack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theStack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Given that `temp_script` is declared as `const` (see previous reviews comment above), one can simply use `MakeSpan(temp_script)` here.",
    "created_at": "2020-02-02T16:51:43Z",
    "updated_at": "2020-06-26T21:20:29Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r373859716",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/373859716"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r373859716"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/373859716/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1487,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/373918216",
    "pull_request_review_id": 352015857,
    "id": 373918216,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzkxODIxNg==",
    "diff_hunk": "@@ -275,18 +276,16 @@ bool CScript::HasValidOps() const\n     return true;\n }\n \n-bool GetScriptOp(CScriptBase::const_iterator& pc, CScriptBase::const_iterator end, opcodetype& opcodeRet, std::vector<unsigned char>* pvchRet)\n+bool GetScriptOp(Span<const unsigned char>& script, opcodetype& opcodeRet, Span<const unsigned char>* data_out)\n {\n     opcodeRet = OP_INVALIDOPCODE;\n-    if (pvchRet)\n-        pvchRet->clear();\n-    if (pc >= end)\n-        return false;\n+    if (data_out)\n+        *data_out = script.subspan(0, 0);",
    "path": "src/script/script.cpp",
    "position": null,
    "original_position": 21,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "c3ab02b8d0da2c6626c5a09c843cccc64b31c3fa",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "No reason, changed it.",
    "created_at": "2020-02-03T04:29:59Z",
    "updated_at": "2020-06-26T21:20:29Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r373918216",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/373918216"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r373918216"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/373918216/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 283,
    "side": "RIGHT",
    "in_reply_to_id": 373858351
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/373918237",
    "pull_request_review_id": 352015887,
    "id": 373918237,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzkxODIzNw==",
    "diff_hunk": "@@ -298,31 +297,38 @@ bool GetScriptOp(CScriptBase::const_iterator& pc, CScriptBase::const_iterator en\n         }\n         else if (opcode == OP_PUSHDATA1)\n         {\n-            if (end - pc < 1)\n-                return false;\n-            nSize = *pc++;\n+            if (script.size() < 1) return false;\n+            nSize = script[0];\n+            script = script.subspan(1);\n         }\n         else if (opcode == OP_PUSHDATA2)\n         {\n-            if (end - pc < 2)\n-                return false;\n-            nSize = ReadLE16(&pc[0]);\n-            pc += 2;\n+            if (script.size() < 2) return false;\n+            nSize = ReadLE16(script.data());\n+            script = script.subspan(2);\n         }\n         else if (opcode == OP_PUSHDATA4)\n         {\n-            if (end - pc < 4)\n-                return false;\n-            nSize = ReadLE32(&pc[0]);\n-            pc += 4;\n+            if (script.size() < 4) return false;\n+            nSize = ReadLE32(script.data());\n+            script = script.subspan(4);\n         }\n-        if (end - pc < 0 || (unsigned int)(end - pc) < nSize)\n-            return false;\n-        if (pvchRet)\n-            pvchRet->assign(pc, pc + nSize);\n-        pc += nSize;\n+        if (script.size() < nSize) return false;\n+        if (data_out) *data_out = script.subspan(0, nSize);\n+        script = script.subspan(nSize);\n     }\n \n     opcodeRet = static_cast<opcodetype>(opcode);\n     return true;\n }\n+\n+bool GetScriptOp(CScriptBase::const_iterator& pc, CScriptBase::const_iterator end, opcodetype& opcodeRet, std::vector<unsigned char>* pvchRet)\n+{\n+    if (pc >= end) return false;\n+    Span<const unsigned char> script(&*pc, end - pc);\n+    Span<const unsigned char> data;\n+    bool ret = GetScriptOp(script, opcodeRet, &data);\n+    if (pvchRet) *pvchRet = std::vector<unsigned char>(data.begin(), data.end());",
    "path": "src/script/script.cpp",
    "position": null,
    "original_position": 84,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "c3ab02b8d0da2c6626c5a09c843cccc64b31c3fa",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Good idea, done.",
    "created_at": "2020-02-03T04:30:08Z",
    "updated_at": "2020-06-26T21:20:29Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r373918237",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/373918237"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r373918237"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/373918237/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 331,
    "side": "RIGHT",
    "in_reply_to_id": 373858682
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/373918264",
    "pull_request_review_id": 352015918,
    "id": 373918264,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzkxODI2NA==",
    "diff_hunk": "@@ -288,9 +289,8 @@ bool EvalScript(std::vector<std::vector<unsigned char> >& stack, const CScript&\n     // static const valtype vchZero(0);\n     static const valtype vchTrue(1, 1);\n \n-    CScript::const_iterator pc = script.begin();\n-    CScript::const_iterator pend = script.end();\n-    CScript::const_iterator pbegincodehash = script.begin();\n+    Span<const unsigned char> pc = script;\n+    Span<const unsigned char> codehash = script;\n     opcodetype opcode;\n     valtype vchPushValue;",
    "path": "src/script/interpreter.cpp",
    "position": null,
    "original_position": 36,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "caff5a96297feb5ed83919195546761fc920cde3",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Nice find. Gone.",
    "created_at": "2020-02-03T04:30:20Z",
    "updated_at": "2020-06-26T21:20:29Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r373918264",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/373918264"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r373918264"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/373918264/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 295,
    "side": "RIGHT",
    "in_reply_to_id": 373858811
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/373918418",
    "pull_request_review_id": 352016119,
    "id": 373918418,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzkxODQxOA==",
    "diff_hunk": "@@ -303,16 +303,18 @@ bool EvalScript(std::vector<std::vector<unsigned char> >& stack, const CScript&\n \n     try\n     {\n-        while (pc < pend)\n+        while (pc.size() > 0)\n         {\n             bool fExec = !count(vfExec.begin(), vfExec.end(), false);\n \n             //\n             // Read instruction\n             //\n-            if (!script.GetOp(pc, opcode, vchPushValue))\n+            Span<const unsigned char> push_value;\n+            if (!GetScriptOp(pc, opcode, &push_value)) {",
    "path": "src/script/interpreter.cpp",
    "position": 83,
    "original_position": 52,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "caff5a96297feb5ed83919195546761fc920cde3",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I'd rather not. The style guide only allows brace-less ifs if the then clause is on the same line as the if condition. Doing so would make the line a bit long in my opinion.\r\n\r\nThe fact that it's inconsistent with the code around it doesn't matter.",
    "created_at": "2020-02-03T04:31:24Z",
    "updated_at": "2020-06-26T21:20:29Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r373918418",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/373918418"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r373918418"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/373918418/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 469,
    "original_line": 469,
    "side": "RIGHT",
    "in_reply_to_id": 373859204
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/373918511",
    "pull_request_review_id": 352016230,
    "id": 373918511,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzkxODUxMQ==",
    "diff_hunk": "@@ -1484,7 +1485,8 @@ static bool VerifyWitnessProgram(const CScriptWitness& witness, int witversion,\n             if (witness.stack.size() != 2) {\n                 return set_error(serror, SCRIPT_ERR_WITNESS_PROGRAM_MISMATCH); // 2 items in witness\n             }\n-            scriptPubKey << OP_DUP << OP_HASH160 << program << OP_EQUALVERIFY << OP_CHECKSIG;\n+            temp_script << OP_DUP << OP_HASH160 << program << OP_EQUALVERIFY << OP_CHECKSIG;\n+            script = Span<const unsigned char>(temp_script.data(), temp_script.size());\n             stack = witness.stack;",
    "path": "src/script/interpreter.cpp",
    "position": null,
    "original_position": 34,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "5b97a3162275b96814186f113c9f6371cdafcf53",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "That's unfortunately incorrect. The `script` variable is a Span which doesn't have its own storage, so it needs the `temp_script` to remain intact over its lifetime. I've added a comment to clarify.",
    "created_at": "2020-02-03T04:32:10Z",
    "updated_at": "2020-06-26T21:20:29Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r373918511",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/373918511"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r373918511"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/373918511/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1487,
    "side": "RIGHT",
    "in_reply_to_id": 373859716
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/373918556",
    "pull_request_review_id": 352016289,
    "id": 373918556,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzkxODU1Ng==",
    "diff_hunk": "@@ -1461,21 +1461,22 @@ static bool IsPushOnly(const Span<const unsigned char>& script)\n     return true;\n }\n \n-static bool VerifyWitnessProgram(const CScriptWitness& witness, int witversion, const std::vector<unsigned char>& program, unsigned int flags, const BaseSignatureChecker& checker, ScriptError* serror)\n+static bool VerifyWitnessProgram(const CScriptWitness& witness, int witversion, const Span<const unsigned char>& program, unsigned int flags, const BaseSignatureChecker& checker, ScriptError* serror)\n {\n     std::vector<std::vector<unsigned char> > stack;\n-    CScript scriptPubKey;\n+    CScript temp_script;",
    "path": "src/script/interpreter.cpp",
    "position": null,
    "original_position": 9,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "5b97a3162275b96814186f113c9f6371cdafcf53",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "That does not work (see other comment).",
    "created_at": "2020-02-03T04:32:34Z",
    "updated_at": "2020-06-26T21:20:29Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r373918556",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/373918556"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r373918556"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/373918556/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1467,
    "side": "RIGHT",
    "in_reply_to_id": 373859580
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/374655110",
    "pull_request_review_id": 352954143,
    "id": 374655110,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDY1NTExMA==",
    "diff_hunk": "@@ -1484,7 +1485,8 @@ static bool VerifyWitnessProgram(const CScriptWitness& witness, int witversion,\n             if (witness.stack.size() != 2) {\n                 return set_error(serror, SCRIPT_ERR_WITNESS_PROGRAM_MISMATCH); // 2 items in witness\n             }\n-            scriptPubKey << OP_DUP << OP_HASH160 << program << OP_EQUALVERIFY << OP_CHECKSIG;\n+            temp_script << OP_DUP << OP_HASH160 << program << OP_EQUALVERIFY << OP_CHECKSIG;\n+            script = Span<const unsigned char>(temp_script.data(), temp_script.size());\n             stack = witness.stack;",
    "path": "src/script/interpreter.cpp",
    "position": null,
    "original_position": 34,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "5b97a3162275b96814186f113c9f6371cdafcf53",
    "user": {
      "login": "theStack",
      "id": 91535,
      "node_id": "MDQ6VXNlcjkxNTM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theStack",
      "html_url": "https://github.com/theStack",
      "followers_url": "https://api.github.com/users/theStack/followers",
      "following_url": "https://api.github.com/users/theStack/following{/other_user}",
      "gists_url": "https://api.github.com/users/theStack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theStack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
      "organizations_url": "https://api.github.com/users/theStack/orgs",
      "repos_url": "https://api.github.com/users/theStack/repos",
      "events_url": "https://api.github.com/users/theStack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theStack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Whoops, you are of course right, `temp_script` wouldn't be alive anymore when `script` is used below. The evil thing with errors like those is that they are hard to get catch by tests: when I tried out my suggestion all of the unit tests still passed successfully. Obviously even though `temp_script` wasn't alive anymore the data at the address was still there unmodified.\r\nOnly creating a destructor `~CScript() { assign(size(), 0}; }` that nullifies the data at the end helped to trigger the failures.",
    "created_at": "2020-02-04T12:58:51Z",
    "updated_at": "2020-06-26T21:20:29Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r374655110",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/374655110"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r374655110"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/374655110/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1487,
    "side": "RIGHT",
    "in_reply_to_id": 373859716
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/374659931",
    "pull_request_review_id": 352960645,
    "id": 374659931,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDY1OTkzMQ==",
    "diff_hunk": "@@ -303,16 +303,18 @@ bool EvalScript(std::vector<std::vector<unsigned char> >& stack, const CScript&\n \n     try\n     {\n-        while (pc < pend)\n+        while (pc.size() > 0)\n         {\n             bool fExec = !count(vfExec.begin(), vfExec.end(), false);\n \n             //\n             // Read instruction\n             //\n-            if (!script.GetOp(pc, opcode, vchPushValue))\n+            Span<const unsigned char> push_value;\n+            if (!GetScriptOp(pc, opcode, &push_value)) {",
    "path": "src/script/interpreter.cpp",
    "position": 83,
    "original_position": 52,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "caff5a96297feb5ed83919195546761fc920cde3",
    "user": {
      "login": "theStack",
      "id": 91535,
      "node_id": "MDQ6VXNlcjkxNTM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theStack",
      "html_url": "https://github.com/theStack",
      "followers_url": "https://api.github.com/users/theStack/followers",
      "following_url": "https://api.github.com/users/theStack/following{/other_user}",
      "gists_url": "https://api.github.com/users/theStack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theStack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
      "organizations_url": "https://api.github.com/users/theStack/orgs",
      "repos_url": "https://api.github.com/users/theStack/repos",
      "events_url": "https://api.github.com/users/theStack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theStack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Oh, my assumption was that mimicing the surrounding style was favored over new style rather than the other way around, mea culpa.",
    "created_at": "2020-02-04T13:10:01Z",
    "updated_at": "2020-06-26T21:20:29Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r374659931",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/374659931"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r374659931"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/374659931/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 469,
    "original_line": 469,
    "side": "RIGHT",
    "in_reply_to_id": 373859204
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/443026997",
    "pull_request_review_id": 434320717,
    "id": 443026997,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzAyNjk5Nw==",
    "diff_hunk": "@@ -1569,21 +1568,20 @@ static bool VerifyWitnessProgram(const CScriptWitness& witness, int witversion,\n             if (stack.size() == 0) {\n                 return set_error(serror, SCRIPT_ERR_WITNESS_PROGRAM_WITNESS_EMPTY);\n             }\n-            const valtype& script_bytes = SpanPopBack(stack);\n-            scriptPubKey = CScript(script_bytes.begin(), script_bytes.end());\n+            const valtype& script = SpanPopBack(stack);",
    "path": "src/script/interpreter.cpp",
    "position": null,
    "original_position": 35,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "a6b0522c44b61041317ea2a59446cc92c4b97265",
    "user": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This would be much less confusing to read if reordered:\r\n```c++\r\nuint256 hashScriptPubKey;\r\nCSHA256().Write(stack.back().data(), stack.back().size()).Finalize(hashScriptPubKey.begin());\r\nif (memcmp(hashScriptPubKey.begin(), program.data(), 32)) {\r\n    return set_error(serror, SCRIPT_ERR_WITNESS_PROGRAM_MISMATCH);\r\n}\r\nreturn ExecuteWitnessScript(stack, SpanPopBack(stack), flags, SigVersion::WITNESS_V0, checker, serror);\r\n```\r\nInstead of as-is, popping off the stack just before it would've been useful.",
    "created_at": "2020-06-19T20:17:11Z",
    "updated_at": "2020-06-26T21:20:29Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r443026997",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/443026997"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r443026997"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/443026997/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1571,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/446415552",
    "pull_request_review_id": 438602332,
    "id": 446415552,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjQxNTU1Mg==",
    "diff_hunk": "@@ -1569,21 +1568,20 @@ static bool VerifyWitnessProgram(const CScriptWitness& witness, int witversion,\n             if (stack.size() == 0) {\n                 return set_error(serror, SCRIPT_ERR_WITNESS_PROGRAM_WITNESS_EMPTY);\n             }\n-            const valtype& script_bytes = SpanPopBack(stack);\n-            scriptPubKey = CScript(script_bytes.begin(), script_bytes.end());\n+            const valtype& script = SpanPopBack(stack);",
    "path": "src/script/interpreter.cpp",
    "position": null,
    "original_position": 35,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "a6b0522c44b61041317ea2a59446cc92c4b97265",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Huh, this code just didn't make sense - it had `script` already, why was it accessing it through `witness.stack.back()`?\r\n\r\nI've changed it to just use `Write(script.data(), script.size())`.",
    "created_at": "2020-06-26T21:21:30Z",
    "updated_at": "2020-06-26T21:21:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r446415552",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/446415552"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r446415552"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/446415552/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1571,
    "side": "RIGHT",
    "in_reply_to_id": 443026997
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/447294589",
    "pull_request_review_id": 439545541,
    "id": 447294589,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzI5NDU4OQ==",
    "diff_hunk": "@@ -396,16 +395,18 @@ bool EvalScript(std::vector<std::vector<unsigned char> >& stack, const CScript&\n \n     try\n     {\n-        while (pc < pend)\n+        while (pc.size() > 0)\n         {\n             bool fExec = vfExec.all_true();\n \n             //\n             // Read instruction\n             //\n-            if (!script.GetOp(pc, opcode, vchPushValue))\n+            Span<const unsigned char> push_value;",
    "path": "src/script/interpreter.cpp",
    "position": 82,
    "original_position": 66,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "591f1037e474ffb1c9f84926bb8f846a515096e9",
    "user": {
      "login": "pinheadmz",
      "id": 2084648,
      "node_id": "MDQ6VXNlcjIwODQ2NDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pinheadmz",
      "html_url": "https://github.com/pinheadmz",
      "followers_url": "https://api.github.com/users/pinheadmz/followers",
      "following_url": "https://api.github.com/users/pinheadmz/following{/other_user}",
      "gists_url": "https://api.github.com/users/pinheadmz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
      "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
      "repos_url": "https://api.github.com/users/pinheadmz/repos",
      "events_url": "https://api.github.com/users/pinheadmz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Do we get the benefit of the `Span` here even though it's only used in a short context?",
    "created_at": "2020-06-29T22:29:25Z",
    "updated_at": "2020-06-29T22:29:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r447294589",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/447294589"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r447294589"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/447294589/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 468,
    "original_line": 468,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/448104318",
    "pull_request_review_id": 440533156,
    "id": 448104318,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODEwNDMxOA==",
    "diff_hunk": "@@ -396,16 +395,18 @@ bool EvalScript(std::vector<std::vector<unsigned char> >& stack, const CScript&\n \n     try\n     {\n-        while (pc < pend)\n+        while (pc.size() > 0)\n         {\n             bool fExec = vfExec.all_true();\n \n             //\n             // Read instruction\n             //\n-            if (!script.GetOp(pc, opcode, vchPushValue))\n+            Span<const unsigned char> push_value;",
    "path": "src/script/interpreter.cpp",
    "position": 82,
    "original_position": 66,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "591f1037e474ffb1c9f84926bb8f846a515096e9",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Not sure what you mean by \"the benefit of the `Span`\". Spans are a more readable way of dealing with span-like data, but it depends what you care about, and what you compare with.\r\n\r\nCompared to the current code, it's more efficient: it's avoiding an allocation and a copy (vchPushValue was storing a copy of the pushed data). A copy still happens when emplacing on the stack, but only in executed branches.\r\n\r\nCompared to manually maintaining a pointer & length, which would be equally efficient... it's certainly a lot more readable.",
    "created_at": "2020-07-01T04:11:39Z",
    "updated_at": "2020-07-01T04:11:39Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r448104318",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/448104318"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r448104318"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/448104318/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 468,
    "original_line": 468,
    "side": "RIGHT",
    "in_reply_to_id": 447294589
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/448293401",
    "pull_request_review_id": 440776351,
    "id": 448293401,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODI5MzQwMQ==",
    "diff_hunk": "@@ -396,16 +395,18 @@ bool EvalScript(std::vector<std::vector<unsigned char> >& stack, const CScript&\n \n     try\n     {\n-        while (pc < pend)\n+        while (pc.size() > 0)\n         {\n             bool fExec = vfExec.all_true();\n \n             //\n             // Read instruction\n             //\n-            if (!script.GetOp(pc, opcode, vchPushValue))\n+            Span<const unsigned char> push_value;",
    "path": "src/script/interpreter.cpp",
    "position": 82,
    "original_position": 66,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "591f1037e474ffb1c9f84926bb8f846a515096e9",
    "user": {
      "login": "pinheadmz",
      "id": 2084648,
      "node_id": "MDQ6VXNlcjIwODQ2NDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pinheadmz",
      "html_url": "https://github.com/pinheadmz",
      "followers_url": "https://api.github.com/users/pinheadmz/followers",
      "following_url": "https://api.github.com/users/pinheadmz/following{/other_user}",
      "gists_url": "https://api.github.com/users/pinheadmz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
      "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
      "repos_url": "https://api.github.com/users/pinheadmz/repos",
      "events_url": "https://api.github.com/users/pinheadmz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I see, thanks",
    "created_at": "2020-07-01T11:16:59Z",
    "updated_at": "2020-07-01T11:17:00Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r448293401",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/448293401"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r448293401"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/448293401/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 468,
    "original_line": 468,
    "side": "RIGHT",
    "in_reply_to_id": 447294589
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/459410149",
    "pull_request_review_id": 454078589,
    "id": 459410149,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTQxMDE0OQ==",
    "diff_hunk": "@@ -1674,8 +1676,7 @@ bool VerifyScript(const Span<const unsigned char>& scriptSig, const Span<const u\n         if (flags & SCRIPT_VERIFY_WITNESS) {\n             if (IsWitnessProgram(redeem_script, witnessversion, witnessprogram)) {\n                 hadWitness = true;\n-                const CScript expected_scriptsig = CScript() << redeem_script;\n-                if (scriptSig != expected_scriptsig) {\n+                if (scriptSig.size() != redeem_script.size() + 1 || scriptSig[0] != redeem_script.size()) {",
    "path": "src/script/interpreter.cpp",
    "position": null,
    "original_position": 17,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "591f1037e474ffb1c9f84926bb8f846a515096e9",
    "user": {
      "login": "theStack",
      "id": 91535,
      "node_id": "MDQ6VXNlcjkxNTM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theStack",
      "html_url": "https://github.com/theStack",
      "followers_url": "https://api.github.com/users/theStack/followers",
      "following_url": "https://api.github.com/users/theStack/following{/other_user}",
      "gists_url": "https://api.github.com/users/theStack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theStack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
      "organizations_url": "https://api.github.com/users/theStack/orgs",
      "repos_url": "https://api.github.com/users/theStack/repos",
      "events_url": "https://api.github.com/users/theStack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theStack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Strictly speaking that's not semantically equivalent to the code replaced. Before it would compare `scriptSig` and the pushed `redeem_script` byte-by-byte, now with the change it only compares that the size matches and the first byte (the push).\r\nI guess that is indended though, as `redeem_script` is derived from `scriptSig` above anyways, and hence the content comparison is not needed?",
    "created_at": "2020-07-23T12:26:51Z",
    "updated_at": "2020-07-23T12:26:52Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r459410149",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/459410149"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r459410149"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/459410149/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2076,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/466604751",
    "pull_request_review_id": 462772231,
    "id": 466604751,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjYwNDc1MQ==",
    "diff_hunk": "@@ -1580,7 +1580,9 @@ static bool VerifyWitnessProgram(const CScriptWitness& witness, int witversion,\n             if (stack.size() != 2) {\n                 return set_error(serror, SCRIPT_ERR_WITNESS_PROGRAM_MISMATCH); // 2 items in witness\n             }\n-            CScript script = CScript() << OP_DUP << OP_HASH160 << program << OP_EQUALVERIFY << OP_CHECKSIG;\n+            //! The script \"OP_DUP OP_HASH160 <program> OP_EQUALVERIFY OP_CHECKSIG\".\n+            unsigned char script[25] = {OP_DUP, OP_HASH160, 20, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, OP_EQUALVERIFY, OP_CHECKSIG};\n+            std::copy(program.begin(), program.end(), script + 3);",
    "path": "src/script/interpreter.cpp",
    "position": null,
    "original_position": 7,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "591f1037e474ffb1c9f84926bb8f846a515096e9",
    "user": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "591f1037e474ffb1c9f84926bb8f846a515096e9\r\n\r\nnit: Mind adding `#include <algorithm>` ?",
    "created_at": "2020-08-06T18:26:10Z",
    "updated_at": "2020-08-06T18:31:28Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r466604751",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/466604751"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r466604751"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/466604751/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1941,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/478629130",
    "pull_request_review_id": 476996152,
    "id": 478629130,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODYyOTEzMA==",
    "diff_hunk": "@@ -1511,17 +1512,54 @@ static bool ExecuteWitnessScript(const Span<const valtype>& stack_span, const CS\n     }\n \n     // Run the script interpreter.\n-    if (!EvalScript(stack, scriptPubKey, flags, checker, sigversion, serror)) return false;\n+    if (!EvalScript(stack, script, flags, checker, sigversion, serror)) return false;\n \n     // Scripts inside witness implicitly require cleanstack behaviour\n     if (stack.size() != 1) return set_error(serror, SCRIPT_ERR_CLEANSTACK);\n     if (!CastToBool(stack.back())) return set_error(serror, SCRIPT_ERR_EVAL_FALSE);\n     return true;\n }\n \n-static bool VerifyWitnessProgram(const CScriptWitness& witness, int witversion, const std::vector<unsigned char>& program, unsigned int flags, const BaseSignatureChecker& checker, ScriptError* serror)\n+/** Consensus-critical analogue of CScript::IsPayToScriptHash. */\n+static bool IsPayToScriptHash(const Span<const unsigned char>& script)\n+{\n+    return script.size() == 23 &&\n+           script[0] == OP_HASH160 &&\n+           script[1] == 0x14 &&\n+           script[22] == OP_EQUAL;\n+}\n+\n+/** Consensus-critical analogue of CScript::IsWitnessProgram. */\n+static bool IsWitnessProgram(const Span<const unsigned char>& script, int& version, Span<const unsigned char>& program)\n+{\n+    if (script.size() < 4 || script.size() > 42) return false;\n+    if (script[0] != OP_0 && (script[0] < OP_1 || script[0] > OP_16)) return false;\n+    if (std::size_t(script[1] + 2) == script.size()) {\n+        version = CScript::DecodeOP_N((opcodetype)script[0]);\n+        program = script.subspan(2);\n+        return true;\n+    }\n+    return false;\n+}\n+\n+/** Consensus-critical analogue of CScript::IsPushOnly. */\n+static bool IsPushOnly(const Span<const unsigned char>& script)",
    "path": "src/script/interpreter.cpp",
    "position": null,
    "original_position": 161,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "591f1037e474ffb1c9f84926bb8f846a515096e9",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Any reason to make this private? `static` makes it harder to test and also the \"other\" version of IsPushOnly can't call this to avoid code duplication.",
    "created_at": "2020-08-27T18:55:57Z",
    "updated_at": "2020-08-27T18:55:57Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r478629130",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/478629130"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r478629130"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/478629130/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1546,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/492703713",
    "pull_request_review_id": 493419784,
    "id": 492703713,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjcwMzcxMw==",
    "diff_hunk": "@@ -1519,6 +1519,44 @@ static bool ExecuteWitnessScript(const Span<const valtype>& stack_span, const CS\n     return true;\n }\n \n+/** Consensus-critical analogue of CScript::IsPayToScriptHash. */",
    "path": "src/script/interpreter.cpp",
    "position": 186,
    "original_position": 4,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "d711c1d79b2de6cf1ba8397e0e1a6f7f7550f53e",
    "user": {
      "login": "ajtowns",
      "id": 127186,
      "node_id": "MDQ6VXNlcjEyNzE4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajtowns",
      "html_url": "https://github.com/ajtowns",
      "followers_url": "https://api.github.com/users/ajtowns/followers",
      "following_url": "https://api.github.com/users/ajtowns/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajtowns/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
      "organizations_url": "https://api.github.com/users/ajtowns/orgs",
      "repos_url": "https://api.github.com/users/ajtowns/repos",
      "events_url": "https://api.github.com/users/ajtowns/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajtowns/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Was there a bad rebase here somewhere? The \"Introduce consensus versions of script type checks on Span\" doesn't actually use the new code and there's not a separate commit for `VerifyWitnessProgram` accepting spans -- both those are instead part of \"gMake VerifyScript operate on Span\" which has a weird typo in the commit title. (That commit also has a typo in the description: \"storare\")",
    "created_at": "2020-09-22T12:46:21Z",
    "updated_at": "2020-09-22T14:35:21Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r492703713",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/492703713"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r492703713"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/492703713/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1851,
    "original_line": 1851,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/492711092",
    "pull_request_review_id": 493419784,
    "id": 492711092,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjcxMTA5Mg==",
    "diff_hunk": "@@ -1580,7 +1580,9 @@ static bool VerifyWitnessProgram(const CScriptWitness& witness, int witversion,\n             if (stack.size() != 2) {\n                 return set_error(serror, SCRIPT_ERR_WITNESS_PROGRAM_MISMATCH); // 2 items in witness\n             }\n-            CScript script = CScript() << OP_DUP << OP_HASH160 << program << OP_EQUALVERIFY << OP_CHECKSIG;\n+            //! The script \"OP_DUP OP_HASH160 <program> OP_EQUALVERIFY OP_CHECKSIG\".\n+            unsigned char script[25] = {OP_DUP, OP_HASH160, 20, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, OP_EQUALVERIFY, OP_CHECKSIG};\n+            std::copy(program.begin(), program.end(), script + 3);",
    "path": "src/script/interpreter.cpp",
    "position": null,
    "original_position": 7,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "591f1037e474ffb1c9f84926bb8f846a515096e9",
    "user": {
      "login": "ajtowns",
      "id": 127186,
      "node_id": "MDQ6VXNlcjEyNzE4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajtowns",
      "html_url": "https://github.com/ajtowns",
      "followers_url": "https://api.github.com/users/ajtowns/followers",
      "following_url": "https://api.github.com/users/ajtowns/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajtowns/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
      "organizations_url": "https://api.github.com/users/ajtowns/orgs",
      "repos_url": "https://api.github.com/users/ajtowns/repos",
      "events_url": "https://api.github.com/users/ajtowns/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajtowns/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "That change makes me twitchy; maybe `static_assert(WITNESS_V0_KEYHASH_SIZE==20, \"consensus critical parameter will result in buffer overrun if changed\");` ?",
    "created_at": "2020-09-22T12:57:29Z",
    "updated_at": "2020-09-22T14:35:21Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r492711092",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/492711092"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r492711092"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/492711092/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1941,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/492723037",
    "pull_request_review_id": 493419784,
    "id": 492723037,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjcyMzAzNw==",
    "diff_hunk": "@@ -1269,6 +1269,10 @@\n [[\"51\", 0.00000000 ], \"\", \"0 0x206e340b9cffb37a989ca544e6bb780a2c78901d3fb33738768511a30617afa01d\", \"P2SH,WITNESS\", \"WITNESS_PROGRAM_MISMATCH\", \"Witness script hash mismatch\"],\n [[\"00\", 0.00000000 ], \"\", \"0 0x206e340b9cffb37a989ca544e6bb780a2c78901d3fb33738768511a30617afa01d\", \"\", \"OK\", \"Invalid witness script without WITNESS\"],\n [[\"51\", 0.00000000 ], \"\", \"0 0x206e340b9cffb37a989ca544e6bb780a2c78901d3fb33738768511a30617afa01d\", \"\", \"OK\", \"Witness script hash mismatch without WITNESS\"],\n+[[\"51\", 0.00000000 ], \"\", \"-1 0x021234\", \"P2SH,WITNESS\", \"WITNESS_UNEXPECTED\", \"OP_1NEGATE does not introduce a witness program\"],",
    "path": "src/test/data/script_tests.json",
    "position": 4,
    "original_position": 4,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "e1b6a6120afe05cd580b5397e4656201dad8da99",
    "user": {
      "login": "ajtowns",
      "id": 127186,
      "node_id": "MDQ6VXNlcjEyNzE4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajtowns",
      "html_url": "https://github.com/ajtowns",
      "followers_url": "https://api.github.com/users/ajtowns/followers",
      "following_url": "https://api.github.com/users/ajtowns/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajtowns/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
      "organizations_url": "https://api.github.com/users/ajtowns/orgs",
      "repos_url": "https://api.github.com/users/ajtowns/repos",
      "events_url": "https://api.github.com/users/ajtowns/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajtowns/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "If you rebase, could move the test additions to the first commit, since they're testing things that are already true.",
    "created_at": "2020-09-22T13:14:50Z",
    "updated_at": "2020-09-22T14:35:21Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r492723037",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/492723037"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r492723037"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/492723037/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1272,
    "original_line": 1272,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/638426292",
    "pull_request_review_id": 667358643,
    "id": 638426292,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzODQyNjI5Mg==",
    "diff_hunk": "@@ -1519,6 +1519,44 @@ static bool ExecuteWitnessScript(const Span<const valtype>& stack_span, const CS\n     return true;\n }\n \n+/** Consensus-critical analogue of CScript::IsPayToScriptHash. */",
    "path": "src/script/interpreter.cpp",
    "position": 186,
    "original_position": 4,
    "commit_id": "5514a826abd2311d421c11dd9ebbdff9b3d249d1",
    "original_commit_id": "d711c1d79b2de6cf1ba8397e0e1a6f7f7550f53e",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This commit just introduces these functions; they're used later on.",
    "created_at": "2021-05-25T03:28:59Z",
    "updated_at": "2021-05-25T03:28:59Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r638426292",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/638426292"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/13062#discussion_r638426292"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/13062"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/638426292/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1851,
    "original_line": 1851,
    "side": "RIGHT",
    "in_reply_to_id": 492703713
  }
]