[
  {
    "sha": "c9b0ed45522d20839c161afb3e6757a09b5b4a66",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjOWIwZWQ0NTUyMmQyMDgzOWMxNjFhZmIzZTY3NTdhMDliNWI0YTY2",
    "commit": {
      "author": {
        "name": "Jonas Schnelli",
        "email": "jonas.schnelli@include7.ch",
        "date": "2014-11-06T15:28:29Z"
      },
      "committer": {
        "name": "Jonas Schnelli",
        "email": "jonas.schnelli@include7.ch",
        "date": "2014-11-10T13:36:17Z"
      },
      "message": "Qt: HiDPI (retina) support for splash screen\n\n- remove splash screen images (reduce binary size)\n- dynamicly draw splash screen with available icon.\n- remove testnet icon\n- dynamicly colorize testnet icon",
      "tree": {
        "sha": "e5e228672c3cff7bd21a31b1a643df6adf2d80d3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e5e228672c3cff7bd21a31b1a643df6adf2d80d3"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c9b0ed45522d20839c161afb3e6757a09b5b4a66",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c9b0ed45522d20839c161afb3e6757a09b5b4a66",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/c9b0ed45522d20839c161afb3e6757a09b5b4a66",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c9b0ed45522d20839c161afb3e6757a09b5b4a66/comments",
    "author": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "2262415411fed5ba18ea024bbef9f765cc6fc2d9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2262415411fed5ba18ea024bbef9f765cc6fc2d9",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/2262415411fed5ba18ea024bbef9f765cc6fc2d9"
      }
    ],
    "stats": {
      "total": 168,
      "additions": 127,
      "deletions": 41
    },
    "files": [
      {
        "sha": "98b60a35fa560626239b22ebac91094ef59decc9",
        "filename": "doc/assets-attribution.md",
        "status": "modified",
        "additions": 1,
        "deletions": 2,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c9b0ed45522d20839c161afb3e6757a09b5b4a66/doc/assets-attribution.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c9b0ed45522d20839c161afb3e6757a09b5b4a66/doc/assets-attribution.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/doc/assets-attribution.md?ref=c9b0ed45522d20839c161afb3e6757a09b5b4a66",
        "patch": "@@ -99,5 +99,4 @@ Jonas Schnelli\n ### Assets Used\n \tsrc/qt/res/icons/bitcoin.icns, src/qt/res/src/bitcoin.svg,\n \tsrc/qt/res/src/bitcoin.ico, src/qt/res/src/bitcoin.png,\n-\tsrc/qt/res/src/bitcoin_testnet.png, docs/bitcoin_logo_doxygen.png,\n-\tsrc/qt/res/images/splash.png, src/qt/res/images/splash_testnet.png\n+\tsrc/qt/res/src/bitcoin_testnet.png, docs/bitcoin_logo_doxygen.png"
      },
      {
        "sha": "8ee830190127c1d6805c90301c2cd000b765bc43",
        "filename": "src/Makefile.qt.include",
        "status": "modified",
        "additions": 4,
        "deletions": 8,
        "changes": 12,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c9b0ed45522d20839c161afb3e6757a09b5b4a66/src/Makefile.qt.include",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c9b0ed45522d20839c161afb3e6757a09b5b4a66/src/Makefile.qt.include",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/Makefile.qt.include?ref=c9b0ed45522d20839c161afb3e6757a09b5b4a66",
        "patch": "@@ -214,8 +214,6 @@ RES_ICONS = \\\n   qt/res/icons/address-book.png \\\n   qt/res/icons/bitcoin.ico \\\n   qt/res/icons/bitcoin.png \\\n-  qt/res/icons/bitcoin_testnet.ico \\\n-  qt/res/icons/bitcoin_testnet.png \\\n   qt/res/icons/clock1.png \\\n   qt/res/icons/clock2.png \\\n   qt/res/icons/clock3.png \\\n@@ -311,10 +309,8 @@ BITCOIN_QT_CPP += \\\n endif\n \n RES_IMAGES = \\\n-  qt/res/images/about.png \\\n-  qt/res/images/splash.png \\\n-  qt/res/images/splash_testnet.png\n-\n+  qt/res/images/about.png\n+  \n RES_MOVIES = $(wildcard qt/res/movies/spinner-*.png)\n \n BITCOIN_RC = qt/res/bitcoin-qt-res.rc\n@@ -370,7 +366,7 @@ qt_bitcoin_qt_LIBTOOLFLAGS = --tag CXX\n #locale/foo.ts -> locale/foo.qm\n QT_QM=$(QT_TS:.ts=.qm)\n \n-.SECONDARY: $(QT_QM)\n+SECONDARY: $(QT_QM)\n \n qt/bitcoinstrings.cpp: $(libbitcoin_server_a_SOURCES) $(libbitcoin_wallet_a_SOURCES)\n \t@test -n $(XGETTEXT) || echo \"xgettext is required for updating translations\"\n@@ -416,4 +412,4 @@ moc_%.cpp: %.h\n %.qm: %.ts\n \t@test -f $(LRELEASE)\n \t@$(MKDIR_P) $(@D)\n-\t$(AM_V_GEN) QT_SELECT=$(QT_SELECT) $(LRELEASE) -silent $< -qm $@\n+\t$(AM_V_GEN) QT_SELECT=$(QT_SELECT) $(LRELEASE) -silent $< -qm $@\n\\ No newline at end of file"
      },
      {
        "sha": "60fa11d796d17e3b8d344e8d7699f8cef651ec2d",
        "filename": "src/qt/bitcoin.qrc",
        "status": "modified",
        "additions": 0,
        "deletions": 3,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c9b0ed45522d20839c161afb3e6757a09b5b4a66/src/qt/bitcoin.qrc",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c9b0ed45522d20839c161afb3e6757a09b5b4a66/src/qt/bitcoin.qrc",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoin.qrc?ref=c9b0ed45522d20839c161afb3e6757a09b5b4a66",
        "patch": "@@ -25,7 +25,6 @@\n         <file alias=\"editpaste\">res/icons/editpaste.png</file>\n         <file alias=\"editcopy\">res/icons/editcopy.png</file>\n         <file alias=\"add\">res/icons/add.png</file>\n-        <file alias=\"bitcoin_testnet\">res/icons/bitcoin_testnet.png</file>\n         <file alias=\"edit\">res/icons/edit.png</file>\n         <file alias=\"history\">res/icons/history.png</file>\n         <file alias=\"overview\">res/icons/overview.png</file>\n@@ -48,8 +47,6 @@\n     </qresource>\n     <qresource prefix=\"/images\">\n         <file alias=\"about\">res/images/about.png</file>\n-        <file alias=\"splash\">res/images/splash.png</file>\n-        <file alias=\"splash_testnet\">res/images/splash_testnet.png</file>\n     </qresource>\n     <qresource prefix=\"/movies\">\n         <file alias=\"spinner-000\">res/movies/spinner-000.png</file>"
      },
      {
        "sha": "b8112799df1009e5db8514404ff174e75df7a13e",
        "filename": "src/qt/networkstyle.cpp",
        "status": "modified",
        "additions": 80,
        "deletions": 12,
        "changes": 92,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c9b0ed45522d20839c161afb3e6757a09b5b4a66/src/qt/networkstyle.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c9b0ed45522d20839c161afb3e6757a09b5b4a66/src/qt/networkstyle.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/networkstyle.cpp?ref=c9b0ed45522d20839c161afb3e6757a09b5b4a66",
        "patch": "@@ -11,22 +11,22 @@\n static const struct {\n     const char *networkId;\n     const char *appName;\n-    const char *appIcon;\n+    const int iconColorHueShift;\n+    const int iconColorSaturationReduction;\n     const char *titleAddText;\n-    const char *splashImage;\n } network_styles[] = {\n-    {\"main\", QAPP_APP_NAME_DEFAULT, \":/icons/bitcoin\", \"\", \":/images/splash\"},\n-    {\"test\", QAPP_APP_NAME_TESTNET, \":/icons/bitcoin_testnet\", QT_TRANSLATE_NOOP(\"SplashScreen\", \"[testnet]\"), \":/images/splash_testnet\"},\n-    {\"regtest\", QAPP_APP_NAME_TESTNET, \":/icons/bitcoin_testnet\", \"[regtest]\", \":/images/splash_testnet\"}\n+    {\"main\", QAPP_APP_NAME_DEFAULT, 0, 0, \"\"},\n+    {\"test\", QAPP_APP_NAME_TESTNET, 70, 30, QT_TRANSLATE_NOOP(\"SplashScreen\", \"[testnet]\")},\n+    {\"regtest\", QAPP_APP_NAME_TESTNET, 70, 30, \"[regtest]\"}\n };\n static const unsigned network_styles_count = sizeof(network_styles)/sizeof(*network_styles);\n \n // titleAddText needs to be const char* for tr()\n-NetworkStyle::NetworkStyle(const QString &appName, const QString &appIcon, const char *titleAddText, const QString &splashImage):\n+NetworkStyle::NetworkStyle(const QString &appName, const int iconColorHueShift, const int iconColorSaturationReduction, const char *titleAddText):\n     appName(appName),\n-    appIcon(appIcon),\n-    titleAddText(qApp->translate(\"SplashScreen\", titleAddText)),\n-    splashImage(splashImage)\n+    iconColorHueShift(iconColorHueShift),\n+    iconColorSaturationReduction(iconColorSaturationReduction),\n+    titleAddText(qApp->translate(\"SplashScreen\", titleAddText))\n {\n }\n \n@@ -38,10 +38,78 @@ const NetworkStyle *NetworkStyle::instantiate(const QString &networkId)\n         {\n             return new NetworkStyle(\n                     network_styles[x].appName,\n-                    network_styles[x].appIcon,\n-                    network_styles[x].titleAddText,\n-                    network_styles[x].splashImage);\n+                    network_styles[x].iconColorHueShift,\n+                    network_styles[x].iconColorSaturationReduction,\n+                    network_styles[x].titleAddText);\n         }\n     }\n     return 0;\n }\n+\n+QIcon NetworkStyle::getAppIcon() const\n+{\n+    return getAppIcon(QSize(256,256));\n+}\n+\n+QIcon NetworkStyle::getAppIcon(const QSize size) const\n+{\n+    // load pixmap\n+    QPixmap pixmap(\":/icons/bitcoin\");\n+\n+    if(pixmap.size().width() != size.width() && pixmap.size().height() != size.height())\n+    {\n+        QPixmap scaledPixmap = pixmap.scaled(size, Qt::KeepAspectRatio);\n+        if(!scaledPixmap.isNull())\n+        {\n+            pixmap = scaledPixmap;\n+        }\n+    }\n+\n+    if(iconColorHueShift != 0 && iconColorSaturationReduction != 0)\n+    {\n+        // copy the pixmap because on linux the original pixmap will be affected\n+        pixmap = pixmap.copy();\n+\n+        // generate QImage from QPixmap\n+        QImage img = pixmap.toImage();\n+\n+        int h,s,l,a;\n+\n+        // traverse though lines\n+        for(int y=0;y<img.height();y++)\n+        {\n+            QRgb *scL = reinterpret_cast< QRgb *>( img.scanLine( y ) );\n+\n+            // loop through pixels\n+            for(int x=0;x<img.width();x++)\n+            {\n+                // preserve alpha because QColor::getHsl doesen't return the alpha value\n+                a = qAlpha(scL[x]);\n+                QColor col(scL[x]);\n+\n+                // get hue value\n+                col.getHsl(&h,&s,&l);\n+\n+                // rotate color on RGB color circle\n+                // 70\u00b0 should end up with the typical \"testnet\" green\n+                h+=iconColorHueShift;\n+\n+                // change saturation value\n+                if(s>iconColorSaturationReduction)\n+                {\n+                    s -= iconColorSaturationReduction;\n+                }\n+                col.setHsl(h,s,l,a);\n+\n+                // set the pixel\n+                scL[x] = col.rgba();\n+            }\n+        }\n+\n+        //convert back to QPixmap\n+        pixmap.convertFromImage(img);\n+    }\n+\n+    QIcon icon(pixmap);\n+    return icon;\n+}"
      },
      {
        "sha": "2bfb3c1d55f97358a8466bfad6756f61ca683ca7",
        "filename": "src/qt/networkstyle.h",
        "status": "modified",
        "additions": 5,
        "deletions": 5,
        "changes": 10,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c9b0ed45522d20839c161afb3e6757a09b5b4a66/src/qt/networkstyle.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c9b0ed45522d20839c161afb3e6757a09b5b4a66/src/qt/networkstyle.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/networkstyle.h?ref=c9b0ed45522d20839c161afb3e6757a09b5b4a66",
        "patch": "@@ -17,17 +17,17 @@ class NetworkStyle\n     static const NetworkStyle *instantiate(const QString &networkId);\n \n     const QString &getAppName() const { return appName; }\n-    const QIcon &getAppIcon() const { return appIcon; }\n     const QString &getTitleAddText() const { return titleAddText; }\n-    const QPixmap &getSplashImage() const { return splashImage; }\n \n+    QIcon getAppIcon() const;\n+    QIcon getAppIcon(const QSize size) const;\n private:\n-    NetworkStyle(const QString &appName, const QString &appIcon, const char *titleAddText, const QString &splashImage);\n+    NetworkStyle(const QString &appName, const int iconColorHueShift, const int iconColorSaturationReduction, const char *titleAddText);\n \n     QString appName;\n-    QIcon appIcon;\n+    int iconColorHueShift;\n+    int iconColorSaturationReduction;\n     QString titleAddText;\n-    QPixmap splashImage;\n };\n \n #endif // BITCOIN_QT_NETWORKSTYLE_H"
      },
      {
        "sha": "a72dfc02f62912c0912bfc78b0ec74e7218dd835",
        "filename": "src/qt/res/bitcoin-qt-res.rc",
        "status": "modified",
        "additions": 0,
        "deletions": 1,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c9b0ed45522d20839c161afb3e6757a09b5b4a66/src/qt/res/bitcoin-qt-res.rc",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c9b0ed45522d20839c161afb3e6757a09b5b4a66/src/qt/res/bitcoin-qt-res.rc",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/res/bitcoin-qt-res.rc?ref=c9b0ed45522d20839c161afb3e6757a09b5b4a66",
        "patch": "@@ -1,5 +1,4 @@\n IDI_ICON1 ICON DISCARDABLE \"icons/bitcoin.ico\"\n-IDI_ICON2 ICON DISCARDABLE \"icons/bitcoin_testnet.ico\"\n \n #include <windows.h>             // needed for VERSIONINFO\n #include \"../../clientversion.h\" // holds the needed client version information"
      },
      {
        "sha": "705a20260af0ebd2f2fbe3f3dfaf99f32db4be3b",
        "filename": "src/qt/res/icons/bitcoin.png",
        "status": "modified",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c9b0ed45522d20839c161afb3e6757a09b5b4a66/src/qt/res/icons/bitcoin.png",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c9b0ed45522d20839c161afb3e6757a09b5b4a66/src/qt/res/icons/bitcoin.png",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/res/icons/bitcoin.png?ref=c9b0ed45522d20839c161afb3e6757a09b5b4a66"
      },
      {
        "sha": "d67d9d5ce5f162db6fa142068864139a383e9956",
        "filename": "src/qt/res/icons/bitcoin_testnet.ico",
        "status": "removed",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2262415411fed5ba18ea024bbef9f765cc6fc2d9/src/qt/res/icons/bitcoin_testnet.ico",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2262415411fed5ba18ea024bbef9f765cc6fc2d9/src/qt/res/icons/bitcoin_testnet.ico",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/res/icons/bitcoin_testnet.ico?ref=2262415411fed5ba18ea024bbef9f765cc6fc2d9"
      },
      {
        "sha": "1202021f538ea1f46f5d6f5c5511590186d913c0",
        "filename": "src/qt/res/icons/bitcoin_testnet.png",
        "status": "removed",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2262415411fed5ba18ea024bbef9f765cc6fc2d9/src/qt/res/icons/bitcoin_testnet.png",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2262415411fed5ba18ea024bbef9f765cc6fc2d9/src/qt/res/icons/bitcoin_testnet.png",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/res/icons/bitcoin_testnet.png?ref=2262415411fed5ba18ea024bbef9f765cc6fc2d9"
      },
      {
        "sha": "3f2b2fb2bfdb944d577d54472ee8535e6ff1ddbe",
        "filename": "src/qt/res/images/splash.png",
        "status": "removed",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2262415411fed5ba18ea024bbef9f765cc6fc2d9/src/qt/res/images/splash.png",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2262415411fed5ba18ea024bbef9f765cc6fc2d9/src/qt/res/images/splash.png",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/res/images/splash.png?ref=2262415411fed5ba18ea024bbef9f765cc6fc2d9"
      },
      {
        "sha": "786dc9c3bb0547402bb4e5a1d421926fbe0b709a",
        "filename": "src/qt/res/images/splash_testnet.png",
        "status": "removed",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2262415411fed5ba18ea024bbef9f765cc6fc2d9/src/qt/res/images/splash_testnet.png",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2262415411fed5ba18ea024bbef9f765cc6fc2d9/src/qt/res/images/splash_testnet.png",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/res/images/splash_testnet.png?ref=2262415411fed5ba18ea024bbef9f765cc6fc2d9"
      },
      {
        "sha": "042a92a0ca16e655181399f268de55d52f9d688d",
        "filename": "src/qt/splashscreen.cpp",
        "status": "modified",
        "additions": 37,
        "deletions": 10,
        "changes": 47,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c9b0ed45522d20839c161afb3e6757a09b5b4a66/src/qt/splashscreen.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c9b0ed45522d20839c161afb3e6757a09b5b4a66/src/qt/splashscreen.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/splashscreen.cpp?ref=c9b0ed45522d20839c161afb3e6757a09b5b4a66",
        "patch": "@@ -19,6 +19,7 @@\n #include <QCloseEvent>\n #include <QDesktopWidget>\n #include <QPainter>\n+#include <QRadialGradient>\n \n SplashScreen::SplashScreen(Qt::WindowFlags f, const NetworkStyle *networkStyle) :\n     QWidget(0, f), curAlignment(0)\n@@ -30,20 +31,46 @@ SplashScreen::SplashScreen(Qt::WindowFlags f, const NetworkStyle *networkStyle)\n     int titleCopyrightVSpace    = 40;\n \n     float fontFactor            = 1.0;\n-\n+    float devicePixelRatio      = 1.0;\n+#if QT_VERSION > 0x050100\n+    devicePixelRatio = ((QGuiApplication*)QCoreApplication::instance())->devicePixelRatio();\n+#endif\n+    \n     // define text to place\n     QString titleText       = tr(\"Bitcoin Core\");\n     QString versionText     = QString(\"Version %1\").arg(QString::fromStdString(FormatFullVersion()));\n     QString copyrightText   = QChar(0xA9)+QString(\" 2009-%1 \").arg(COPYRIGHT_YEAR) + QString(tr(\"The Bitcoin Core developers\"));\n     QString titleAddText    = networkStyle->getTitleAddText();\n \n     QString font            = \"Arial\";\n+    \n+    // create a bitmap according to device pixelratio\n+    QSize splashSize(480*devicePixelRatio,320*devicePixelRatio);\n+    pixmap = QPixmap(splashSize);\n+\n+#if QT_VERSION > 0x050100\n+    // change to HiDPI if it makes sense\n+    pixmap.setDevicePixelRatio(devicePixelRatio);\n+#endif\n+    \n+    QPainter pixPaint(&pixmap);  \n+    pixPaint.setPen(QColor(100,100,100));\n \n-    // load the bitmap for writing some text over it\n-    pixmap     = networkStyle->getSplashImage();\n+    // draw a slighly radial gradient\n+    QRadialGradient gradient(QPoint(0,0), splashSize.width()/devicePixelRatio);\n+    gradient.setColorAt(0, Qt::white);\n+    gradient.setColorAt(1, QColor(247,247,247));\n+    QRect rGradient(QPoint(0,0), splashSize);\n+    pixPaint.fillRect(rGradient, gradient);\n+    \n+    // draw the bitcoin icon, expected size of PNG: 1024x1024\n+    QRect rectIcon(QPoint(-150,-122), QSize(430,430));\n \n-    QPainter pixPaint(&pixmap);\n-    pixPaint.setPen(QColor(100,100,100));\n+    const QSize requiredSize(1024,1024);\n+    QIcon appIcon = networkStyle->getAppIcon(requiredSize);\n+    QPixmap icon(appIcon.pixmap(requiredSize));\n+\n+    pixPaint.drawPixmap(rectIcon, icon);\n \n     // check font size and drawing with\n     pixPaint.setFont(QFont(font, 33*fontFactor));\n@@ -57,7 +84,7 @@ SplashScreen::SplashScreen(Qt::WindowFlags f, const NetworkStyle *networkStyle)\n     pixPaint.setFont(QFont(font, 33*fontFactor));\n     fm = pixPaint.fontMetrics();\n     titleTextWidth  = fm.width(titleText);\n-    pixPaint.drawText(pixmap.width()-titleTextWidth-paddingRight,paddingTop,titleText);\n+    pixPaint.drawText(pixmap.width()/devicePixelRatio-titleTextWidth-paddingRight,paddingTop,titleText);\n \n     pixPaint.setFont(QFont(font, 15*fontFactor));\n \n@@ -68,11 +95,11 @@ SplashScreen::SplashScreen(Qt::WindowFlags f, const NetworkStyle *networkStyle)\n         pixPaint.setFont(QFont(font, 10*fontFactor));\n         titleVersionVSpace -= 5;\n     }\n-    pixPaint.drawText(pixmap.width()-titleTextWidth-paddingRight+2,paddingTop+titleVersionVSpace,versionText);\n+    pixPaint.drawText(pixmap.width()/devicePixelRatio-titleTextWidth-paddingRight+2,paddingTop+titleVersionVSpace,versionText);\n \n     // draw copyright stuff\n     pixPaint.setFont(QFont(font, 10*fontFactor));\n-    pixPaint.drawText(pixmap.width()-titleTextWidth-paddingRight,paddingTop+titleCopyrightVSpace,copyrightText);\n+    pixPaint.drawText(pixmap.width()/devicePixelRatio-titleTextWidth-paddingRight,paddingTop+titleCopyrightVSpace,copyrightText);\n \n     // draw additional text if special network\n     if(!titleAddText.isEmpty()) {\n@@ -81,7 +108,7 @@ SplashScreen::SplashScreen(Qt::WindowFlags f, const NetworkStyle *networkStyle)\n         pixPaint.setFont(boldFont);\n         fm = pixPaint.fontMetrics();\n         int titleAddTextWidth  = fm.width(titleAddText);\n-        pixPaint.drawText(pixmap.width()-titleAddTextWidth-10,15,titleAddText);\n+        pixPaint.drawText(pixmap.width()/devicePixelRatio-titleAddTextWidth-10,15,titleAddText);\n     }\n \n     pixPaint.end();\n@@ -90,7 +117,7 @@ SplashScreen::SplashScreen(Qt::WindowFlags f, const NetworkStyle *networkStyle)\n     setWindowTitle(titleText + \" \" + titleAddText);\n \n     // Resize window and move to center of desktop, disallow resizing\n-    QRect r(QPoint(), pixmap.size());\n+    QRect r(QPoint(), QSize(pixmap.size().width()/devicePixelRatio,pixmap.size().height()/devicePixelRatio));\n     resize(r.size());\n     setFixedSize(r.size());\n     move(QApplication::desktop()->screenGeometry().center() - r.center());"
      }
    ]
  },
  {
    "sha": "572832239ba7ac676681462c01c9beed858949ff",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo1NzI4MzIyMzliYTdhYzY3NjY4MTQ2MmMwMWM5YmVlZDg1ODk0OWZm",
    "commit": {
      "author": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2014-11-14T11:58:30Z"
      },
      "committer": {
        "name": "Jonas Schnelli",
        "email": "jonas.schnelli@include7.ch",
        "date": "2014-11-14T16:15:51Z"
      },
      "message": "Qt: Go back to using QIcon functionality for scaling",
      "tree": {
        "sha": "cd4f0eff7416ec942fb8bee1f7549b67b51d2ce9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/cd4f0eff7416ec942fb8bee1f7549b67b51d2ce9"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/572832239ba7ac676681462c01c9beed858949ff",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/572832239ba7ac676681462c01c9beed858949ff",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/572832239ba7ac676681462c01c9beed858949ff",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/572832239ba7ac676681462c01c9beed858949ff/comments",
    "author": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "c9b0ed45522d20839c161afb3e6757a09b5b4a66",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c9b0ed45522d20839c161afb3e6757a09b5b4a66",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/c9b0ed45522d20839c161afb3e6757a09b5b4a66"
      }
    ],
    "stats": {
      "total": 68,
      "additions": 21,
      "deletions": 47
    },
    "files": [
      {
        "sha": "c28a65fd9c283fe8b5e7e82b84b8c29e045e5a5c",
        "filename": "src/qt/networkstyle.cpp",
        "status": "modified",
        "additions": 18,
        "deletions": 41,
        "changes": 59,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/572832239ba7ac676681462c01c9beed858949ff/src/qt/networkstyle.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/572832239ba7ac676681462c01c9beed858949ff/src/qt/networkstyle.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/networkstyle.cpp?ref=572832239ba7ac676681462c01c9beed858949ff",
        "patch": "@@ -24,52 +24,13 @@ static const unsigned network_styles_count = sizeof(network_styles)/sizeof(*netw\n // titleAddText needs to be const char* for tr()\n NetworkStyle::NetworkStyle(const QString &appName, const int iconColorHueShift, const int iconColorSaturationReduction, const char *titleAddText):\n     appName(appName),\n-    iconColorHueShift(iconColorHueShift),\n-    iconColorSaturationReduction(iconColorSaturationReduction),\n     titleAddText(qApp->translate(\"SplashScreen\", titleAddText))\n-{\n-}\n-\n-const NetworkStyle *NetworkStyle::instantiate(const QString &networkId)\n-{\n-    for (unsigned x=0; x<network_styles_count; ++x)\n-    {\n-        if (networkId == network_styles[x].networkId)\n-        {\n-            return new NetworkStyle(\n-                    network_styles[x].appName,\n-                    network_styles[x].iconColorHueShift,\n-                    network_styles[x].iconColorSaturationReduction,\n-                    network_styles[x].titleAddText);\n-        }\n-    }\n-    return 0;\n-}\n-\n-QIcon NetworkStyle::getAppIcon() const\n-{\n-    return getAppIcon(QSize(256,256));\n-}\n-\n-QIcon NetworkStyle::getAppIcon(const QSize size) const\n {\n     // load pixmap\n     QPixmap pixmap(\":/icons/bitcoin\");\n \n-    if(pixmap.size().width() != size.width() && pixmap.size().height() != size.height())\n-    {\n-        QPixmap scaledPixmap = pixmap.scaled(size, Qt::KeepAspectRatio);\n-        if(!scaledPixmap.isNull())\n-        {\n-            pixmap = scaledPixmap;\n-        }\n-    }\n-\n     if(iconColorHueShift != 0 && iconColorSaturationReduction != 0)\n     {\n-        // copy the pixmap because on linux the original pixmap will be affected\n-        pixmap = pixmap.copy();\n-\n         // generate QImage from QPixmap\n         QImage img = pixmap.toImage();\n \n@@ -110,6 +71,22 @@ QIcon NetworkStyle::getAppIcon(const QSize size) const\n         pixmap.convertFromImage(img);\n     }\n \n-    QIcon icon(pixmap);\n-    return icon;\n+    appIcon = QIcon(pixmap);\n+}\n+\n+const NetworkStyle *NetworkStyle::instantiate(const QString &networkId)\n+{\n+    for (unsigned x=0; x<network_styles_count; ++x)\n+    {\n+        if (networkId == network_styles[x].networkId)\n+        {\n+            return new NetworkStyle(\n+                    network_styles[x].appName,\n+                    network_styles[x].iconColorHueShift,\n+                    network_styles[x].iconColorSaturationReduction,\n+                    network_styles[x].titleAddText);\n+        }\n+    }\n+    return 0;\n }\n+"
      },
      {
        "sha": "3e3332cd8bf5e703ad4fe5f415627e356d8ce126",
        "filename": "src/qt/networkstyle.h",
        "status": "modified",
        "additions": 2,
        "deletions": 4,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/572832239ba7ac676681462c01c9beed858949ff/src/qt/networkstyle.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/572832239ba7ac676681462c01c9beed858949ff/src/qt/networkstyle.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/networkstyle.h?ref=572832239ba7ac676681462c01c9beed858949ff",
        "patch": "@@ -17,16 +17,14 @@ class NetworkStyle\n     static const NetworkStyle *instantiate(const QString &networkId);\n \n     const QString &getAppName() const { return appName; }\n+    const QIcon &getAppIcon() const { return appIcon; }\n     const QString &getTitleAddText() const { return titleAddText; }\n \n-    QIcon getAppIcon() const;\n-    QIcon getAppIcon(const QSize size) const;\n private:\n     NetworkStyle(const QString &appName, const int iconColorHueShift, const int iconColorSaturationReduction, const char *titleAddText);\n \n     QString appName;\n-    int iconColorHueShift;\n-    int iconColorSaturationReduction;\n+    QIcon appIcon;\n     QString titleAddText;\n };\n "
      },
      {
        "sha": "c2fac765a9b63bb5c35ada3c17effab3179dbe33",
        "filename": "src/qt/splashscreen.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 2,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/572832239ba7ac676681462c01c9beed858949ff/src/qt/splashscreen.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/572832239ba7ac676681462c01c9beed858949ff/src/qt/splashscreen.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/splashscreen.cpp?ref=572832239ba7ac676681462c01c9beed858949ff",
        "patch": "@@ -67,8 +67,7 @@ SplashScreen::SplashScreen(Qt::WindowFlags f, const NetworkStyle *networkStyle)\n     QRect rectIcon(QPoint(-150,-122), QSize(430,430));\n \n     const QSize requiredSize(1024,1024);\n-    QIcon appIcon = networkStyle->getAppIcon(requiredSize);\n-    QPixmap icon(appIcon.pixmap(requiredSize));\n+    QPixmap icon(networkStyle->getAppIcon().pixmap(requiredSize));\n \n     pixPaint.drawPixmap(rectIcon, icon);\n "
      }
    ]
  },
  {
    "sha": "b74fa7cad934a99018e55b0e392be9677ef4eb59",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiNzRmYTdjYWQ5MzRhOTkwMThlNTViMGUzOTJiZTk2NzdlZjRlYjU5",
    "commit": {
      "author": {
        "name": "Jonas Schnelli",
        "email": "jonas.schnelli@include7.ch",
        "date": "2014-11-14T16:16:31Z"
      },
      "committer": {
        "name": "Jonas Schnelli",
        "email": "jonas.schnelli@include7.ch",
        "date": "2014-11-19T13:24:31Z"
      },
      "message": "resize tray icon because a 1024x1024 icon won't show in ubuntu (bug)",
      "tree": {
        "sha": "5afe5b9bc1af32ae5e59c9267f1cd847e12b87b9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5afe5b9bc1af32ae5e59c9267f1cd847e12b87b9"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b74fa7cad934a99018e55b0e392be9677ef4eb59",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b74fa7cad934a99018e55b0e392be9677ef4eb59",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/b74fa7cad934a99018e55b0e392be9677ef4eb59",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b74fa7cad934a99018e55b0e392be9677ef4eb59/comments",
    "author": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "572832239ba7ac676681462c01c9beed858949ff",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/572832239ba7ac676681462c01c9beed858949ff",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/572832239ba7ac676681462c01c9beed858949ff"
      }
    ],
    "stats": {
      "total": 11,
      "additions": 7,
      "deletions": 4
    },
    "files": [
      {
        "sha": "7afb3bf4b36e45c7f0989b701baa6197b4b4c10c",
        "filename": "src/qt/bitcoingui.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b74fa7cad934a99018e55b0e392be9677ef4eb59/src/qt/bitcoingui.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b74fa7cad934a99018e55b0e392be9677ef4eb59/src/qt/bitcoingui.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoingui.cpp?ref=b74fa7cad934a99018e55b0e392be9677ef4eb59",
        "patch": "@@ -115,8 +115,8 @@ BitcoinGUI::BitcoinGUI(const NetworkStyle *networkStyle, QWidget *parent) :\n     }\n     windowTitle += \" \" + networkStyle->getTitleAddText();\n #ifndef Q_OS_MAC\n-    QApplication::setWindowIcon(networkStyle->getAppIcon());\n-    setWindowIcon(networkStyle->getAppIcon());\n+    QApplication::setWindowIcon(networkStyle->getTrayAndWindowIcon());\n+    setWindowIcon(networkStyle->getTrayAndWindowIcon());\n #else\n     MacDockIconHandler::instance()->setIcon(networkStyle->getAppIcon());\n #endif\n@@ -495,7 +495,7 @@ void BitcoinGUI::createTrayIcon(const NetworkStyle *networkStyle)\n     trayIcon = new QSystemTrayIcon(this);\n     QString toolTip = tr(\"Bitcoin Core client\") + \" \" + networkStyle->getTitleAddText();\n     trayIcon->setToolTip(toolTip);\n-    trayIcon->setIcon(networkStyle->getAppIcon());\n+    trayIcon->setIcon(networkStyle->getTrayAndWindowIcon());\n     trayIcon->show();\n #endif\n "
      },
      {
        "sha": "8d295ca077ccbf8c1a5e286c8c7242474eb1d8d7",
        "filename": "src/qt/networkstyle.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 1,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b74fa7cad934a99018e55b0e392be9677ef4eb59/src/qt/networkstyle.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b74fa7cad934a99018e55b0e392be9677ef4eb59/src/qt/networkstyle.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/networkstyle.cpp?ref=b74fa7cad934a99018e55b0e392be9677ef4eb59",
        "patch": "@@ -71,7 +71,8 @@ NetworkStyle::NetworkStyle(const QString &appName, const int iconColorHueShift,\n         pixmap.convertFromImage(img);\n     }\n \n-    appIcon = QIcon(pixmap);\n+    appIcon             = QIcon(pixmap);\n+    trayAndWindowIcon   = QIcon(pixmap.scaled(QSize(256,256)));\n }\n \n const NetworkStyle *NetworkStyle::instantiate(const QString &networkId)"
      },
      {
        "sha": "953004c1275007e05971d8adedac4d183f989dfc",
        "filename": "src/qt/networkstyle.h",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b74fa7cad934a99018e55b0e392be9677ef4eb59/src/qt/networkstyle.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b74fa7cad934a99018e55b0e392be9677ef4eb59/src/qt/networkstyle.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/networkstyle.h?ref=b74fa7cad934a99018e55b0e392be9677ef4eb59",
        "patch": "@@ -18,13 +18,15 @@ class NetworkStyle\n \n     const QString &getAppName() const { return appName; }\n     const QIcon &getAppIcon() const { return appIcon; }\n+    const QIcon &getTrayAndWindowIcon() const { return trayAndWindowIcon; }\n     const QString &getTitleAddText() const { return titleAddText; }\n \n private:\n     NetworkStyle(const QString &appName, const int iconColorHueShift, const int iconColorSaturationReduction, const char *titleAddText);\n \n     QString appName;\n     QIcon appIcon;\n+    QIcon trayAndWindowIcon;\n     QString titleAddText;\n };\n "
      }
    ]
  }
]