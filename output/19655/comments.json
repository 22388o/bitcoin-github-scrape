[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/672285302",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19655#issuecomment-672285302",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19655",
    "id": 672285302,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3MjI4NTMwMg==",
    "user": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-11T21:19:43Z",
    "updated_at": "2020-08-11T21:19:43Z",
    "author_association": "MEMBER",
    "body": "I think technically -1 is correct?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/672285302/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/672312663",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19655#issuecomment-672312663",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19655",
    "id": 672312663,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3MjMxMjY2Mw==",
    "user": {
      "login": "adaminsky",
      "id": 29065991,
      "node_id": "MDQ6VXNlcjI5MDY1OTkx",
      "avatar_url": "https://avatars.githubusercontent.com/u/29065991?u=3b4392495db17e76ea141821dfa73faa9238a189&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/adaminsky",
      "html_url": "https://github.com/adaminsky",
      "followers_url": "https://api.github.com/users/adaminsky/followers",
      "following_url": "https://api.github.com/users/adaminsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/adaminsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/adaminsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/adaminsky/subscriptions",
      "organizations_url": "https://api.github.com/users/adaminsky/orgs",
      "repos_url": "https://api.github.com/users/adaminsky/repos",
      "events_url": "https://api.github.com/users/adaminsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/adaminsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-11T22:13:44Z",
    "updated_at": "2020-08-11T22:13:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "The -1 is from a `CHECK_NONFATAL` so the error says an internal bug is detected. I was thinking that the -8 error is more helpful since it is consistent with the result when `target_confirmations = 0`.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/672312663/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/672318801",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19655#issuecomment-672318801",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19655",
    "id": 672318801,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3MjMxODgwMQ==",
    "user": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-11T22:18:33Z",
    "updated_at": "2020-08-11T22:18:33Z",
    "author_association": "MEMBER",
    "body": "But `target_confirmations` 0 is in fact an invalid parameter. A too-large height just doesn't yield a useful result *yet*.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/672318801/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/672338095",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19655#issuecomment-672338095",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19655",
    "id": 672338095,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3MjMzODA5NQ==",
    "user": {
      "login": "adaminsky",
      "id": 29065991,
      "node_id": "MDQ6VXNlcjI5MDY1OTkx",
      "avatar_url": "https://avatars.githubusercontent.com/u/29065991?u=3b4392495db17e76ea141821dfa73faa9238a189&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/adaminsky",
      "html_url": "https://github.com/adaminsky",
      "followers_url": "https://api.github.com/users/adaminsky/followers",
      "following_url": "https://api.github.com/users/adaminsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/adaminsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/adaminsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/adaminsky/subscriptions",
      "organizations_url": "https://api.github.com/users/adaminsky/orgs",
      "repos_url": "https://api.github.com/users/adaminsky/repos",
      "events_url": "https://api.github.com/users/adaminsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/adaminsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-11T22:57:22Z",
    "updated_at": "2020-08-11T22:57:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "Yeah, so I guess the problem mentioned in the issue has been fixed by returning a -1 error. Maybe giving the genesis block hash when `target_confirmations` is too large makes sense. ",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/672338095/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/672984261",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19655#issuecomment-672984261",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19655",
    "id": 672984261,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3Mjk4NDI2MQ==",
    "user": {
      "login": "adaminsky",
      "id": 29065991,
      "node_id": "MDQ6VXNlcjI5MDY1OTkx",
      "avatar_url": "https://avatars.githubusercontent.com/u/29065991?u=3b4392495db17e76ea141821dfa73faa9238a189&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/adaminsky",
      "html_url": "https://github.com/adaminsky",
      "followers_url": "https://api.github.com/users/adaminsky/followers",
      "following_url": "https://api.github.com/users/adaminsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/adaminsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/adaminsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/adaminsky/subscriptions",
      "organizations_url": "https://api.github.com/users/adaminsky/orgs",
      "repos_url": "https://api.github.com/users/adaminsky/repos",
      "events_url": "https://api.github.com/users/adaminsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/adaminsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-12T16:38:17Z",
    "updated_at": "2020-08-12T16:38:17Z",
    "author_association": "CONTRIBUTOR",
    "body": "@ryanofsky thank you for the review. My commit message is actually incorrect because the problem with the 0 hash was already fixed from when it was reported by returning the -1 error. I'll update this to return genesis block hash instead.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/672984261/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/673391130",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19655#issuecomment-673391130",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19655",
    "id": 673391130,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY3MzM5MTEzMA==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-13T10:12:24Z",
    "updated_at": "2020-08-13T10:12:24Z",
    "author_association": "MEMBER",
    "body": "Code review ACK c133cdcdc3397a734d57e05494682bf9bf6f4c15\r\nTest looks good too.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/673391130/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/469529413",
    "pull_request_review_id": 466258614,
    "id": 469529413,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTUyOTQxMw==",
    "diff_hunk": "@@ -1447,7 +1447,7 @@ static UniValue listsinceblock(const JSONRPCRequest& request)\n                 \"Additionally, if include_removed is set, transactions affecting the wallet which were removed are returned in the \\\"removed\\\" array.\\n\",\n                 {\n                     {\"blockhash\", RPCArg::Type::STR, RPCArg::Optional::OMITTED_NAMED_ARG, \"If set, the block hash to list transactions since, otherwise list all transactions.\"},\n-                    {\"target_confirmations\", RPCArg::Type::NUM, /* default */ \"1\", \"Return the nth block hash from the main chain. e.g. 1 would mean the best block hash. Note: this is not used as a filter, but only affects [lastblock] in the return value\"},\n+                    {\"target_confirmations\", RPCArg::Type::NUM, /* default */ \"1\", \"Return the nth block hash from the main chain or the last block hash in case the nth block does not exist. e.g. 1 would mean the best block hash. Note: this is not used as a filter, but only affects [lastblock] in the return value\"},",
    "path": "src/wallet/rpcwallet.cpp",
    "position": null,
    "original_position": 5,
    "commit_id": "c133cdcdc3397a734d57e05494682bf9bf6f4c15",
    "original_commit_id": "c0e57fe0d399235f3f2612c4972c597b34107509",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "In commit \"Return genesis hash\" (c0e57fe0d399235f3f2612c4972c597b34107509)\r\n\r\nI think this description is more confusing than before and there's no need to mention the special case here, since it's explained in lastblock documentation below. If you think it should be mentioned both places, maybe put the inserted text after \"e.g. 1 would mean the best block hash\" instead of before to avoid jumping topics.",
    "created_at": "2020-08-12T20:37:18Z",
    "updated_at": "2020-08-12T22:28:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19655#discussion_r469529413",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19655",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/469529413"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19655#discussion_r469529413"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19655"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/469529413/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1450,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/469535285",
    "pull_request_review_id": 466258614,
    "id": 469535285,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTUzNTI4NQ==",
    "diff_hunk": "@@ -74,6 +75,27 @@ def test_invalid_blockhash(self):\n         assert_raises_rpc_error(-8, \"blockhash must be hexadecimal string (not 'Z000000000000000000000000000000000000000000000000000000000000000')\", self.nodes[0].listsinceblock,\n                                 \"Z000000000000000000000000000000000000000000000000000000000000000\")\n \n+    def test_targetconfirmations(self):\n+        '''\n+        This tests when the value of target_confirmations exceeds the number of\n+        blocks in the main chain. In this case, the genesis block hash should be\n+        given for the `lastblock` property. If target_confirmations is < 1, then\n+        a -8 invalid parameter error is thrown.\n+        '''\n+        self.log.info(\"Test target_confirmations\")\n+        blockhash, = self.nodes[2].generate(1)\n+        blockheight = self.nodes[2].getblockheader(blockhash)['height']\n+        self.sync_all()\n+\n+        assert_equal(\n+            self.nodes[0].getblockhash(0),\n+            self.nodes[0].listsinceblock(blockhash, blockheight + 1)['lastblock'])\n+        assert_equal(\n+            self.nodes[0].getblockhash(0),\n+            self.nodes[0].listsinceblock(blockhash, blockheight + 2)['lastblock'])",
    "path": "test/functional/wallet_listsinceblock.py",
    "position": null,
    "original_position": 29,
    "commit_id": "c133cdcdc3397a734d57e05494682bf9bf6f4c15",
    "original_commit_id": "c0e57fe0d399235f3f2612c4972c597b34107509",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "In commit \"Return genesis hash\" (c0e57fe0d399235f3f2612c4972c597b34107509)\r\n\r\nMaybe test with a larger value like 1000 to be sure this isn't an edge case",
    "created_at": "2020-08-12T20:43:41Z",
    "updated_at": "2020-08-12T22:28:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19655#discussion_r469535285",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19655",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/469535285"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19655#discussion_r469535285"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19655"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/469535285/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 95,
    "side": "RIGHT"
  }
]