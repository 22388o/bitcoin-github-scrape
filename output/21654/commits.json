[
  {
    "sha": "a58868d201cb6d263aa552815f7f86562c1ca9a5",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzphNTg4NjhkMjAxY2I2ZDI2M2FhNTUyODE1ZjdmODY1NjJjMWNhOWE1",
    "commit": {
      "author": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2021-04-11T12:42:00Z"
      },
      "committer": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2021-05-10T15:31:49Z"
      },
      "message": "build: Makes rcc output always deterministic\n\nThe Qt Resource Compiler (rcc) has a command-line option\n`--format-version` which has the default value 2.\n\nThe only difference from `--format-version 1` is adding a last modified\ntimestamp to the output file. That, in turn, forces us to use\n`QT_RCC_SOURCE_DATE_OVERRIDE=1` to get deterministic builds.\n\nThis change makes rcc output always deterministic by using\n`--format-version 1` option that makes usage of the\n`QT_RCC_SOURCE_DATE_OVERRIDE` needless. Also it improves interaction\nwith ccache.\n\nCo-authored-by: fanquake <fanquake@gmail.com>",
      "tree": {
        "sha": "164050cc82cbebb8b8c37df80181c1d99cfd5461",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/164050cc82cbebb8b8c37df80181c1d99cfd5461"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a58868d201cb6d263aa552815f7f86562c1ca9a5",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE0dvyxLlvLev0wWZUQQEIES5+qB8FAmCZUeUACgkQQQEIES5+\nqB8TsA/+MVMrmDPuUfYGSbk9EeO9bZBTERZiKOSPo5UXmT5p8NYL2SGrm7uOn8uq\nCdSa/0z18DHClBCfq9R30UMWsYn993kGixYORJkUUf/FCSDVhDi3cz4W+KItcyJI\nfgbXHELYl9cy2fyWguLTcipf2DglhcN7E2Un9HmQ73p9eaHmsxRvnVmI+ykCtiKY\n77uGs487VP5XpmIv8NpErIrkiw9+CGIrH42iw0N9IOuY1DLs9Sc9JWd2U4sOiFK2\nFfT7uESfOedID/5LG7DXGOf0Mb1MNfBwXhYYWX2W9C4QOj83XX2S2H4GJ0wn0hfy\nZAjIbysP0hGI7h8FG7CQRTZE2uTyjPlxfnfzoo5VeNZvU7k7q8Ff8LJ333OBHgx6\nxbDpW006JjnmmtKr19eHTGBj9i8CCJMcPE1T8y5QAdYf827eXkysXv9k4mPb08b8\nskI0g1mk2+BOpMa8yU/X7Ht/Q+3PsjHwywhWGJC7TfzSIUAYpAVRpGfxSx5YdgjJ\nnOghxNbp1mbo1s8JauxPxDa1VhPnPHN9lprHkYo2BaSKLzhwiAo1UT21jgB5at/v\nYBUWRCFShSOUJWlynBf+RLxTZjhOJ6kk4NtjKpgTINkArr+cUvWgF4XhYmoMFanw\nkOnfWGliiZsYMO6qIWCu2gFzzy4JoDSG2RM+BgP2Z1aU32JqWDM=\n=cOeS\n-----END PGP SIGNATURE-----",
        "payload": "tree 164050cc82cbebb8b8c37df80181c1d99cfd5461\nparent 32692d26813ba099c1451ae5941d38923bec761c\nauthor Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1618144920 +0300\ncommitter Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1620660709 +0300\n\nbuild: Makes rcc output always deterministic\n\nThe Qt Resource Compiler (rcc) has a command-line option\n`--format-version` which has the default value 2.\n\nThe only difference from `--format-version 1` is adding a last modified\ntimestamp to the output file. That, in turn, forces us to use\n`QT_RCC_SOURCE_DATE_OVERRIDE=1` to get deterministic builds.\n\nThis change makes rcc output always deterministic by using\n`--format-version 1` option that makes usage of the\n`QT_RCC_SOURCE_DATE_OVERRIDE` needless. Also it improves interaction\nwith ccache.\n\nCo-authored-by: fanquake <fanquake@gmail.com>\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a58868d201cb6d263aa552815f7f86562c1ca9a5",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/a58868d201cb6d263aa552815f7f86562c1ca9a5",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a58868d201cb6d263aa552815f7f86562c1ca9a5/comments",
    "author": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "32692d26813ba099c1451ae5941d38923bec761c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/32692d26813ba099c1451ae5941d38923bec761c",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/32692d26813ba099c1451ae5941d38923bec761c"
      }
    ],
    "stats": {
      "total": 10,
      "additions": 2,
      "deletions": 8
    },
    "files": [
      {
        "sha": "bed3531720cad3f38ca345adabdedf5677ab575c",
        "filename": "contrib/gitian-descriptors/gitian-linux.yml",
        "status": "modified",
        "additions": 0,
        "deletions": 1,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a58868d201cb6d263aa552815f7f86562c1ca9a5/contrib/gitian-descriptors/gitian-linux.yml",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a58868d201cb6d263aa552815f7f86562c1ca9a5/contrib/gitian-descriptors/gitian-linux.yml",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/gitian-descriptors/gitian-linux.yml?ref=a58868d201cb6d263aa552815f7f86562c1ca9a5",
        "patch": "@@ -56,7 +56,6 @@ script: |\n   HOST_CXXFLAGS=\"-O2 -g\"\n   HOST_LDFLAGS_BASE=\"-static-libstdc++ -Wl,-O2\"\n \n-  export QT_RCC_SOURCE_DATE_OVERRIDE=1\n   export TZ=\"UTC\"\n   export BUILD_DIR=\"$PWD\"\n   mkdir -p ${WRAP_DIR}"
      },
      {
        "sha": "1d4506e3c274a434f5413bae8f574e3e4533153b",
        "filename": "contrib/gitian-descriptors/gitian-osx.yml",
        "status": "modified",
        "additions": 0,
        "deletions": 1,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a58868d201cb6d263aa552815f7f86562c1ca9a5/contrib/gitian-descriptors/gitian-osx.yml",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a58868d201cb6d263aa552815f7f86562c1ca9a5/contrib/gitian-descriptors/gitian-osx.yml",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/gitian-descriptors/gitian-osx.yml?ref=a58868d201cb6d263aa552815f7f86562c1ca9a5",
        "patch": "@@ -42,7 +42,6 @@ script: |\n   FAKETIME_HOST_PROGS=\"\"\n   FAKETIME_PROGS=\"ar ranlib date dmg xorrisofs\"\n \n-  export QT_RCC_SOURCE_DATE_OVERRIDE=1\n   export TZ=\"UTC\"\n   export BUILD_DIR=\"$PWD\"\n   mkdir -p ${WRAP_DIR}"
      },
      {
        "sha": "03eba71366d37b585e0269359f4b51cdc350ddfe",
        "filename": "contrib/gitian-descriptors/gitian-win.yml",
        "status": "modified",
        "additions": 0,
        "deletions": 1,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a58868d201cb6d263aa552815f7f86562c1ca9a5/contrib/gitian-descriptors/gitian-win.yml",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a58868d201cb6d263aa552815f7f86562c1ca9a5/contrib/gitian-descriptors/gitian-win.yml",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/gitian-descriptors/gitian-win.yml?ref=a58868d201cb6d263aa552815f7f86562c1ca9a5",
        "patch": "@@ -38,7 +38,6 @@ script: |\n   HOST_CFLAGS=\"-O2 -g -fno-ident\"\n   HOST_CXXFLAGS=\"-O2 -g -fno-ident\"\n \n-  export QT_RCC_SOURCE_DATE_OVERRIDE=1\n   export TZ=\"UTC\"\n   export BUILD_DIR=\"$PWD\"\n   mkdir -p ${WRAP_DIR}"
      },
      {
        "sha": "ba83ae1ce5f084bde74b0b059f94bc4899abce0b",
        "filename": "contrib/guix/libexec/build.sh",
        "status": "modified",
        "additions": 0,
        "deletions": 1,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a58868d201cb6d263aa552815f7f86562c1ca9a5/contrib/guix/libexec/build.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a58868d201cb6d263aa552815f7f86562c1ca9a5/contrib/guix/libexec/build.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/libexec/build.sh?ref=a58868d201cb6d263aa552815f7f86562c1ca9a5",
        "patch": "@@ -175,7 +175,6 @@ case \"$HOST\" in\n esac\n \n # Environment variables for determinism\n-export QT_RCC_SOURCE_DATE_OVERRIDE=1\n export TAR_OPTIONS=\"--owner=0 --group=0 --numeric-owner --mtime='@${SOURCE_DATE_EPOCH}' --sort=name\"\n export TZ=\"UTC\"\n case \"$HOST\" in"
      },
      {
        "sha": "3f7e1a2a02f434abac3c1d5aa8e653534f3772b9",
        "filename": "depends/packages/qt.mk",
        "status": "modified",
        "additions": 0,
        "deletions": 2,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a58868d201cb6d263aa552815f7f86562c1ca9a5/depends/packages/qt.mk",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a58868d201cb6d263aa552815f7f86562c1ca9a5/depends/packages/qt.mk",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/packages/qt.mk?ref=a58868d201cb6d263aa552815f7f86562c1ca9a5",
        "patch": "@@ -172,8 +172,6 @@ $(package)_config_opts_aarch64_android += -android-arch arm64-v8a\n $(package)_config_opts_armv7a_android += -android-arch armeabi-v7a\n $(package)_config_opts_x86_64_android += -android-arch x86_64\n $(package)_config_opts_i686_android += -android-arch i686\n-\n-$(package)_build_env += QT_RCC_SOURCE_DATE_OVERRIDE=1\n endef\n \n define $(package)_fetch_cmds"
      },
      {
        "sha": "1cdd463a703bf513d9c555384f4b74d13edfbfa7",
        "filename": "src/Makefile.qt.include",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a58868d201cb6d263aa552815f7f86562c1ca9a5/src/Makefile.qt.include",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a58868d201cb6d263aa552815f7f86562c1ca9a5/src/Makefile.qt.include",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/Makefile.qt.include?ref=a58868d201cb6d263aa552815f7f86562c1ca9a5",
        "patch": "@@ -365,12 +365,12 @@ translate: $(srcdir)/qt/bitcoinstrings.cpp $(QT_FORMS_UI) $(QT_FORMS_UI) $(BITCO\n $(QT_QRC_LOCALE_CPP): $(QT_QRC_LOCALE) $(QT_QM)\n \t@test -f $(RCC)\n \t@cp -f $< $(@D)/temp_$(<F)\n-\t$(AM_V_GEN) QT_SELECT=$(QT_SELECT) $(RCC) -name bitcoin_locale $(@D)/temp_$(<F) > $@\n+\t$(AM_V_GEN) QT_SELECT=$(QT_SELECT) $(RCC) -name bitcoin_locale --format-version 1 $(@D)/temp_$(<F) > $@\n \t@rm $(@D)/temp_$(<F)\n \n $(QT_QRC_CPP): $(QT_QRC) $(QT_FORMS_H) $(RES_FONTS) $(RES_ICONS) $(RES_ANIMATION)\n \t@test -f $(RCC)\n-\t$(AM_V_GEN) QT_SELECT=$(QT_SELECT) $(RCC) -name bitcoin $< > $@\n+\t$(AM_V_GEN) QT_SELECT=$(QT_SELECT) $(RCC) -name bitcoin --format-version 1 $< > $@\n \n CLEAN_QT = $(nodist_qt_libbitcoinqt_a_SOURCES) $(QT_QM) $(QT_FORMS_H) qt/*.gcda qt/*.gcno qt/temp_bitcoin_locale.qrc\n "
      }
    ]
  }
]