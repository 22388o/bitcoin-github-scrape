[
  {
    "sha": "2bc97a46eb0afcb3d52419493a8e4c66ee77325a",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyYmM5N2E0NmViMGFmY2IzZDUyNDE5NDkzYThlNGM2NmVlNzczMjVh",
    "commit": {
      "author": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2019-04-03T15:22:16Z"
      },
      "committer": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2019-11-17T23:34:47Z"
      },
      "message": "qa: Update usages of getbalance to use minconf=0",
      "tree": {
        "sha": "c92548bb99164f2849e98ae9fc6baadf28310976",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c92548bb99164f2849e98ae9fc6baadf28310976"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2bc97a46eb0afcb3d52419493a8e4c66ee77325a",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2bc97a46eb0afcb3d52419493a8e4c66ee77325a",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/2bc97a46eb0afcb3d52419493a8e4c66ee77325a",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2bc97a46eb0afcb3d52419493a8e4c66ee77325a/comments",
    "author": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "7dbc33f6176443fafdefadebd62438a69ad79a32",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7dbc33f6176443fafdefadebd62438a69ad79a32",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/7dbc33f6176443fafdefadebd62438a69ad79a32"
      }
    ],
    "stats": {
      "total": 18,
      "additions": 3,
      "deletions": 15
    },
    "files": [
      {
        "sha": "317f1d41e4935d40c714f5c0c3034b75bc4e5eb8",
        "filename": "test/functional/wallet_balance.py",
        "status": "modified",
        "additions": 3,
        "deletions": 15,
        "changes": 18,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2bc97a46eb0afcb3d52419493a8e4c66ee77325a/test/functional/wallet_balance.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2bc97a46eb0afcb3d52419493a8e4c66ee77325a/test/functional/wallet_balance.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/wallet_balance.py?ref=2bc97a46eb0afcb3d52419493a8e4c66ee77325a",
        "patch": "@@ -87,9 +87,9 @@ def run_test(self):\n \n         self.log.info(\"Test getbalance with different arguments\")\n         assert_equal(self.nodes[0].getbalance(\"*\"), 50)\n-        assert_equal(self.nodes[0].getbalance(\"*\", 1), 50)\n-        assert_equal(self.nodes[0].getbalance(\"*\", 1, True), 100)\n-        assert_equal(self.nodes[0].getbalance(minconf=1), 50)\n+        assert_equal(self.nodes[0].getbalance(\"*\", 0), 50)\n+        assert_equal(self.nodes[0].getbalance(\"*\", 0, True), 100)\n+        assert_equal(self.nodes[0].getbalance(minconf=0), 50)\n         assert_equal(self.nodes[0].getbalance(minconf=0, include_watchonly=True), 100)\n         assert_equal(self.nodes[1].getbalance(minconf=0, include_watchonly=True), 50)\n \n@@ -154,10 +154,6 @@ def test_balances(*, fee_node_1=0):\n             # Same with minconf=0\n             assert_equal(self.nodes[0].getbalance(minconf=0), Decimal('9.99'))\n             assert_equal(self.nodes[1].getbalance(minconf=0), Decimal('0'))\n-            # getbalance with a minconf incorrectly excludes coins that have been spent more recently than the minconf blocks ago\n-            # TODO: fix getbalance tracking of coin spentness depth\n-            assert_equal(self.nodes[0].getbalance(minconf=1), Decimal('0'))\n-            assert_equal(self.nodes[1].getbalance(minconf=1), Decimal('0'))\n             # getunconfirmedbalance\n             assert_equal(self.nodes[0].getunconfirmedbalance(), Decimal('60'))  # output of node 1's spend\n             assert_equal(self.nodes[0].getbalances()['mine']['untrusted_pending'], Decimal('60'))\n@@ -190,14 +186,6 @@ def test_balances(*, fee_node_1=0):\n         self.nodes[1].generatetoaddress(2, ADDRESS_WATCHONLY)\n         self.sync_all()\n \n-        # getbalance with a minconf incorrectly excludes coins that have been spent more recently than the minconf blocks ago\n-        # TODO: fix getbalance tracking of coin spentness depth\n-        # getbalance with minconf=3 should still show the old balance\n-        assert_equal(self.nodes[1].getbalance(minconf=3), Decimal('0'))\n-\n-        # getbalance with minconf=2 will show the new balance.\n-        assert_equal(self.nodes[1].getbalance(minconf=2), Decimal('0'))\n-\n         # check mempool transactions count for wallet unconfirmed balance after\n         # dynamically loading the wallet.\n         before = self.nodes[1].getunconfirmedbalance()"
      }
    ]
  },
  {
    "sha": "a6f3e2f3af1910719d027f2bf7fd36ffb49943bd",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzphNmYzZTJmM2FmMTkxMDcxOWQwMjdmMmJmN2ZkMzZmZmI0OTk0M2Jk",
    "commit": {
      "author": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2019-04-03T15:27:26Z"
      },
      "committer": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2019-11-17T23:34:49Z"
      },
      "message": "rpc: Raise error in getbalance if minconf is not zero",
      "tree": {
        "sha": "6bcade51e57f0c068b0da46ffc033063ef21c43e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6bcade51e57f0c068b0da46ffc033063ef21c43e"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a6f3e2f3af1910719d027f2bf7fd36ffb49943bd",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a6f3e2f3af1910719d027f2bf7fd36ffb49943bd",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/a6f3e2f3af1910719d027f2bf7fd36ffb49943bd",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a6f3e2f3af1910719d027f2bf7fd36ffb49943bd/comments",
    "author": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "2bc97a46eb0afcb3d52419493a8e4c66ee77325a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2bc97a46eb0afcb3d52419493a8e4c66ee77325a",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/2bc97a46eb0afcb3d52419493a8e4c66ee77325a"
      }
    ],
    "stats": {
      "total": 14,
      "additions": 6,
      "deletions": 8
    },
    "files": [
      {
        "sha": "f6755ff80d66569b23d283db22b2d6758a706157",
        "filename": "src/wallet/rpcwallet.cpp",
        "status": "modified",
        "additions": 5,
        "deletions": 8,
        "changes": 13,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a6f3e2f3af1910719d027f2bf7fd36ffb49943bd/src/wallet/rpcwallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a6f3e2f3af1910719d027f2bf7fd36ffb49943bd/src/wallet/rpcwallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/rpcwallet.cpp?ref=a6f3e2f3af1910719d027f2bf7fd36ffb49943bd",
        "patch": "@@ -732,7 +732,7 @@ static UniValue getbalance(const JSONRPCRequest& request)\n                 \"thus affected by options which limit spendability such as -spendzeroconfchange.\\n\",\n                 {\n                     {\"dummy\", RPCArg::Type::STR, RPCArg::Optional::OMITTED_NAMED_ARG, \"Remains for backward compatibility. Must be excluded or set to \\\"*\\\".\"},\n-                    {\"minconf\", RPCArg::Type::NUM, /* default */ \"0\", \"Only include transactions confirmed at least this many times.\"},\n+                    {\"minconf\", RPCArg::Type::NUM, /* default */ \"0\", \"Must be zero\"},\n                     {\"include_watchonly\", RPCArg::Type::BOOL, /* default */ \"true for watch-only wallets, otherwise false\", \"Also include balance in watch-only addresses (see 'importaddress')\"},\n                     {\"avoid_reuse\", RPCArg::Type::BOOL, /* default */ \"true\", \"(only available if avoid_reuse wallet flag is set) Do not include balance in dirty outputs; addresses are considered dirty if they have previously been used in a transaction.\"},\n                 },\n@@ -742,10 +742,8 @@ static UniValue getbalance(const JSONRPCRequest& request)\n                 RPCExamples{\n             \"\\nThe total amount in the wallet with 1 or more confirmations\\n\"\n             + HelpExampleCli(\"getbalance\", \"\") +\n-            \"\\nThe total amount in the wallet at least 6 blocks confirmed\\n\"\n-            + HelpExampleCli(\"getbalance\", \"\\\"*\\\" 6\") +\n             \"\\nAs a JSON-RPC call\\n\"\n-            + HelpExampleRpc(\"getbalance\", \"\\\"*\\\", 6\")\n+            + HelpExampleRpc(\"getbalance\", \"\")\n                 },\n             }.Check(request);\n \n@@ -761,16 +759,15 @@ static UniValue getbalance(const JSONRPCRequest& request)\n         throw JSONRPCError(RPC_METHOD_DEPRECATED, \"dummy first argument must be excluded or set to \\\"*\\\".\");\n     }\n \n-    int min_depth = 0;\n-    if (!request.params[1].isNull()) {\n-        min_depth = request.params[1].get_int();\n+    if (!request.params[1].isNull() && request.params[1].get_int() != 0) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"minconf must be zero\");\n     }\n \n     bool include_watchonly = ParseIncludeWatchonly(request.params[2], *pwallet);\n \n     bool avoid_reuse = GetAvoidReuseFlag(pwallet, request.params[3]);\n \n-    const auto bal = pwallet->GetBalance(min_depth, avoid_reuse);\n+    const auto bal = pwallet->GetBalance(0, avoid_reuse);\n \n     return ValueFromAmount(bal.m_mine_trusted + (include_watchonly ? bal.m_watchonly_trusted : 0));\n }"
      },
      {
        "sha": "7f6baa29dd660c2585a6470768646dcf9dc8d52f",
        "filename": "test/functional/wallet_balance.py",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a6f3e2f3af1910719d027f2bf7fd36ffb49943bd/test/functional/wallet_balance.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a6f3e2f3af1910719d027f2bf7fd36ffb49943bd/test/functional/wallet_balance.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/wallet_balance.py?ref=a6f3e2f3af1910719d027f2bf7fd36ffb49943bd",
        "patch": "@@ -86,6 +86,7 @@ def run_test(self):\n         assert_equal(self.nodes[1].getbalance(), 50)\n \n         self.log.info(\"Test getbalance with different arguments\")\n+        assert_raises_rpc_error(-8, \"minconf must be zero\", self.nodes[1].getbalance, minconf=1)\n         assert_equal(self.nodes[0].getbalance(\"*\"), 50)\n         assert_equal(self.nodes[0].getbalance(\"*\", 0), 50)\n         assert_equal(self.nodes[0].getbalance(\"*\", 0, True), 100)"
      }
    ]
  },
  {
    "sha": "841f01d653cc7ef1418cf1c54d9c6d2e089e237c",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo4NDFmMDFkNjUzY2M3ZWYxNDE4Y2YxYzU0ZDljNmQyZTA4OWUyMzdj",
    "commit": {
      "author": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2019-04-03T15:28:07Z"
      },
      "committer": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2019-11-17T23:38:29Z"
      },
      "message": "wallet: Remove min_depth argument from CWallet::GetBalance",
      "tree": {
        "sha": "0b7502b3b57ae813045d58b4f98d94c5fbab87be",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/0b7502b3b57ae813045d58b4f98d94c5fbab87be"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/841f01d653cc7ef1418cf1c54d9c6d2e089e237c",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/841f01d653cc7ef1418cf1c54d9c6d2e089e237c",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/841f01d653cc7ef1418cf1c54d9c6d2e089e237c",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/841f01d653cc7ef1418cf1c54d9c6d2e089e237c/comments",
    "author": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "a6f3e2f3af1910719d027f2bf7fd36ffb49943bd",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a6f3e2f3af1910719d027f2bf7fd36ffb49943bd",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/a6f3e2f3af1910719d027f2bf7fd36ffb49943bd"
      }
    ],
    "stats": {
      "total": 12,
      "additions": 6,
      "deletions": 6
    },
    "files": [
      {
        "sha": "d0b76142ddc4366f82a9a1a923dbb96865e0829e",
        "filename": "src/wallet/rpcwallet.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/841f01d653cc7ef1418cf1c54d9c6d2e089e237c/src/wallet/rpcwallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/841f01d653cc7ef1418cf1c54d9c6d2e089e237c/src/wallet/rpcwallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/rpcwallet.cpp?ref=841f01d653cc7ef1418cf1c54d9c6d2e089e237c",
        "patch": "@@ -325,7 +325,7 @@ static UniValue setlabel(const JSONRPCRequest& request)\n \n static CTransactionRef SendMoney(interfaces::Chain::Lock& locked_chain, CWallet * const pwallet, const CTxDestination &address, CAmount nValue, bool fSubtractFeeFromAmount, const CCoinControl& coin_control, mapValue_t mapValue)\n {\n-    CAmount curBalance = pwallet->GetBalance(0, coin_control.m_avoid_address_reuse).m_mine_trusted;\n+    CAmount curBalance = pwallet->GetBalance(coin_control.m_avoid_address_reuse).m_mine_trusted;\n \n     // Check amount\n     if (nValue <= 0)\n@@ -767,7 +767,7 @@ static UniValue getbalance(const JSONRPCRequest& request)\n \n     bool avoid_reuse = GetAvoidReuseFlag(pwallet, request.params[3]);\n \n-    const auto bal = pwallet->GetBalance(0, avoid_reuse);\n+    const auto bal = pwallet->GetBalance(avoid_reuse);\n \n     return ValueFromAmount(bal.m_mine_trusted + (include_watchonly ? bal.m_watchonly_trusted : 0));\n }\n@@ -2385,7 +2385,7 @@ static UniValue getbalances(const JSONRPCRequest& request)\n         if (wallet.IsWalletFlagSet(WALLET_FLAG_AVOID_REUSE)) {\n             // If the AVOID_REUSE flag is set, bal has been set to just the un-reused address balance. Get\n             // the total balance, and then subtract bal to get the reused address balance.\n-            const auto full_bal = wallet.GetBalance(0, false);\n+            const auto full_bal = wallet.GetBalance(false);\n             balances_mine.pushKV(\"used\", ValueFromAmount(full_bal.m_mine_trusted + full_bal.m_mine_untrusted_pending - bal.m_mine_trusted - bal.m_mine_untrusted_pending));\n         }\n         balances.pushKV(\"mine\", balances_mine);"
      },
      {
        "sha": "9e12db290fa4f2f0d4ad74c4384ad036b1bf8a86",
        "filename": "src/wallet/wallet.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/841f01d653cc7ef1418cf1c54d9c6d2e089e237c/src/wallet/wallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/841f01d653cc7ef1418cf1c54d9c6d2e089e237c/src/wallet/wallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.cpp?ref=841f01d653cc7ef1418cf1c54d9c6d2e089e237c",
        "patch": "@@ -1981,7 +1981,7 @@ void MaybeResendWalletTxs()\n  */\n \n \n-CWallet::Balance CWallet::GetBalance(const int min_depth, bool avoid_reuse) const\n+CWallet::Balance CWallet::GetBalance(bool avoid_reuse) const\n {\n     Balance ret;\n     isminefilter reuse_filter = avoid_reuse ? ISMINE_NO : ISMINE_USED;\n@@ -1996,7 +1996,7 @@ CWallet::Balance CWallet::GetBalance(const int min_depth, bool avoid_reuse) cons\n             const int tx_depth{wtx.GetDepthInMainChain()};\n             const CAmount tx_credit_mine{wtx.GetAvailableCredit(/* fUseCache */ true, ISMINE_SPENDABLE | reuse_filter)};\n             const CAmount tx_credit_watchonly{wtx.GetAvailableCredit(/* fUseCache */ true, ISMINE_WATCH_ONLY | reuse_filter)};\n-            if (is_trusted && tx_depth >= min_depth) {\n+            if (is_trusted && tx_depth >= 0) {\n                 ret.m_mine_trusted += tx_credit_mine;\n                 ret.m_watchonly_trusted += tx_credit_watchonly;\n             }"
      },
      {
        "sha": "99a18e813076fc61d96009006e3935864e6ca2f4",
        "filename": "src/wallet/wallet.h",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/841f01d653cc7ef1418cf1c54d9c6d2e089e237c/src/wallet/wallet.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/841f01d653cc7ef1418cf1c54d9c6d2e089e237c/src/wallet/wallet.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.h?ref=841f01d653cc7ef1418cf1c54d9c6d2e089e237c",
        "patch": "@@ -901,7 +901,7 @@ class CWallet final : public WalletStorage, private interfaces::Chain::Notificat\n         CAmount m_watchonly_untrusted_pending{0};\n         CAmount m_watchonly_immature{0};\n     };\n-    Balance GetBalance(int min_depth = 0, bool avoid_reuse = true) const;\n+    Balance GetBalance(bool avoid_reuse = true) const;\n     CAmount GetAvailableBalance(const CCoinControl* coinControl = nullptr) const;\n \n     OutputType TransactionChangeType(OutputType change_type, const std::vector<CRecipient>& vecSend);"
      }
    ]
  },
  {
    "sha": "019872a5ee22da0fffa3e2fee2ffa7b03b109452",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowMTk4NzJhNWVlMjJkYTBmZmZhM2UyZmVlMmZmYTdiMDNiMTA5NDUy",
    "commit": {
      "author": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2019-08-02T17:21:00Z"
      },
      "committer": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2019-11-17T23:38:31Z"
      },
      "message": "doc: Add release notes for minconf change in getbalance",
      "tree": {
        "sha": "c23c2edf6115d529b39e3ad6333ede75bd04f846",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c23c2edf6115d529b39e3ad6333ede75bd04f846"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/019872a5ee22da0fffa3e2fee2ffa7b03b109452",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/019872a5ee22da0fffa3e2fee2ffa7b03b109452",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/019872a5ee22da0fffa3e2fee2ffa7b03b109452",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/019872a5ee22da0fffa3e2fee2ffa7b03b109452/comments",
    "author": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "841f01d653cc7ef1418cf1c54d9c6d2e089e237c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/841f01d653cc7ef1418cf1c54d9c6d2e089e237c",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/841f01d653cc7ef1418cf1c54d9c6d2e089e237c"
      }
    ],
    "stats": {
      "total": 5,
      "additions": 5,
      "deletions": 0
    },
    "files": [
      {
        "sha": "24aad339008fe93397f5b05719274eb01193d7a8",
        "filename": "doc/release-notes-15729.md",
        "status": "added",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/019872a5ee22da0fffa3e2fee2ffa7b03b109452/doc/release-notes-15729.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/019872a5ee22da0fffa3e2fee2ffa7b03b109452/doc/release-notes-15729.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/doc/release-notes-15729.md?ref=019872a5ee22da0fffa3e2fee2ffa7b03b109452",
        "patch": "@@ -0,0 +1,5 @@\n+Updated RPCs\n+------------\n+\n+- The `getbalance` RPC now raises an error if the option `minconf` is specified\n+  and not zero."
      }
    ]
  }
]