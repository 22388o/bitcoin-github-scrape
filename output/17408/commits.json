[
  {
    "sha": "fa1564326499f69eeb5427262ff0f26070f86146",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYTE1NjQzMjY0OTlmNjllZWI1NDI3MjYyZmYwZjI2MDcwZjg2MTQ2",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2019-11-07T22:43:11Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2019-11-07T22:31:51Z"
      },
      "message": "Replace assert with ASSERT",
      "tree": {
        "sha": "e060c2057d70b18d6e400f4854562cadf6d1e839",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e060c2057d70b18d6e400f4854562cadf6d1e839"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa1564326499f69eeb5427262ff0f26070f86146",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUgQVgv8Ddfa2UtR76xUFhWYrgboDpAezkCeUyAK8fqS7xODpk9D6zrowKvXwH4f\nqO30d7VP/vGch5LJnCKoaGBYKTQOTkGcmu0p+uaiMKDRLm3O6OwWRYfGhNxu97Hr\nDQ9kDlX/xtYi4k/jOyGfsNb5il2fVSNA//qqBtdJo8m1sAjKNLV7WS6NxN8FGR2i\nyFuoCXG3ftc38/HKJ1towsvvHqC84CSE9F8DuVSn1cPpAXMwJ/nQkdCR+R+6hb10\ndTf4T0cnZu/6DNWyZdVKnvlRSpxvUza8uZEtVYkJKZFi4UddjKE8TDbCdOiVLyKO\nl82A8iYKG8YPnUuM3a+D5sz6jNspH2TdHlWv3iGBQRKS91QZYqIXIsN/5r9hrTC/\nWrXwrN0UX/lBGIxAOAo+MP83/k5D1Wm1t21qc4HwYe6+3u6qPxJlB1okn0VHQz0A\nIRM35xNOH3aV548vXigvyvbYaN/oMgolExuk2oSgh3NL+CjUS9lEG706T/viCJRc\nDqihUU8E\n=/aVV\n-----END PGP SIGNATURE-----",
        "payload": "tree e060c2057d70b18d6e400f4854562cadf6d1e839\nparent 270616228bc9a3856a0a82dea26ac3480b7585cd\nauthor MarcoFalke <falke.marco@gmail.com> 1573166591 -0500\ncommitter MarcoFalke <falke.marco@gmail.com> 1573165911 -0500\n\nReplace assert with ASSERT\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa1564326499f69eeb5427262ff0f26070f86146",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fa1564326499f69eeb5427262ff0f26070f86146",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa1564326499f69eeb5427262ff0f26070f86146/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "270616228bc9a3856a0a82dea26ac3480b7585cd",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/270616228bc9a3856a0a82dea26ac3480b7585cd",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/270616228bc9a3856a0a82dea26ac3480b7585cd"
      }
    ],
    "stats": {
      "total": 33,
      "additions": 27,
      "deletions": 6
    },
    "files": [
      {
        "sha": "d1b2dc175e03d064eb80f487b00cfbdfe17ebf63",
        "filename": "src/rpc/server.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa1564326499f69eeb5427262ff0f26070f86146/src/rpc/server.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa1564326499f69eeb5427262ff0f26070f86146/src/rpc/server.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/server.cpp?ref=fa1564326499f69eeb5427262ff0f26070f86146",
        "patch": "@@ -314,7 +314,7 @@ void SetRPCWarmupStatus(const std::string& newStatus)\n void SetRPCWarmupFinished()\n {\n     LOCK(cs_rpcWarmup);\n-    assert(fRPCInWarmup);\n+    ASSERT(fRPCInWarmup);\n     fRPCInWarmup = false;\n }\n "
      },
      {
        "sha": "8413ce348f9e3c2a742cf3c85f37e10fba10a1dc",
        "filename": "src/util/check.h",
        "status": "modified",
        "additions": 24,
        "deletions": 0,
        "changes": 24,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa1564326499f69eeb5427262ff0f26070f86146/src/util/check.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa1564326499f69eeb5427262ff0f26070f86146/src/util/check.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/util/check.h?ref=fa1564326499f69eeb5427262ff0f26070f86146",
        "patch": "@@ -9,6 +9,30 @@\n \n #include <stdexcept>\n \n+/**\n+ * Abort the program when the condition evaluates to false\n+ *\n+ * This should only be used\n+ * - where the condition is assumed to be true, not for error handling or validating user input\n+ * - where a failure to fulfill the condition is NOT recoverable and needs to ABORT the program\n+ *\n+ * For example in script validation, where any further action after a logic error could lead to a consensus failure, it\n+ * is better to abort the program and not proceed with validation.\n+ */\n+#define ASSERT(condition)                                                  \\\n+    do {                                                                   \\\n+        if (!(condition)) {                                                \\\n+            tfm::format(std::cerr, \"%s:%d (%s)\\n\"                          \\\n+                                   \"Internal bug detected: '%s'\\n\"         \\\n+                                   \"Aborting!\\n\"                           \\\n+                                   \"You may report this issue here: %s\\n\", \\\n+                __FILE__, __LINE__, __func__,                              \\\n+                (#condition),                                              \\\n+                PACKAGE_BUGREPORT);                                        \\\n+            std::abort();                                                  \\\n+        }                                                                  \\\n+    } while (false)\n+\n class NonFatalCheckError : public std::runtime_error\n {\n     using std::runtime_error::runtime_error;"
      },
      {
        "sha": "683ce247add4affa7b22fc5e577257e55273697b",
        "filename": "test/lint/lint-assertions.sh",
        "status": "modified",
        "additions": 2,
        "deletions": 5,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa1564326499f69eeb5427262ff0f26070f86146/test/lint/lint-assertions.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa1564326499f69eeb5427262ff0f26070f86146/test/lint/lint-assertions.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/lint/lint-assertions.sh?ref=fa1564326499f69eeb5427262ff0f26070f86146",
        "patch": "@@ -20,12 +20,9 @@ if [[ ${OUTPUT} != \"\" ]]; then\n     EXIT_CODE=1\n fi\n \n-# Macro CHECK_NONFATAL(condition) should be used instead of assert for RPC code, where it\n-# is undesirable to crash the whole program. See: src/util/check.h\n-# src/rpc/server.cpp is excluded from this check since it's mostly meta-code.\n-OUTPUT=$(git grep -nE 'assert *\\(.*\\);' -- \"src/rpc/\" \"src/wallet/rpc*\" \":(exclude)src/rpc/server.cpp\")\n+OUTPUT=$(git grep -nE 'assert *\\(.*\\);' -- \"src/rpc/\" \"src/wallet/rpc*\")\n if [[ ${OUTPUT} != \"\" ]]; then\n-    echo \"CHECK_NONFATAL(condition) should be used instead of assert for RPC code.\"\n+    echo \"CHECK_NONFATAL(condition) or ASSERT(condition) should be used instead of assert for RPC code. See src/util/check.h\"\n     echo\n     echo \"${OUTPUT}\"\n     EXIT_CODE=1"
      }
    ]
  }
]