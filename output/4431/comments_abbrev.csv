rebroad,2014-07-04T06:51:08Z,"I've removed the debugging messages, and simplified the commits. Also removed the nodeid stuff, and the getblocks changes as these are in separate pulls.\n",https://github.com/bitcoin/bitcoin/pull/4431#issuecomment-48013640,48013640,
rebroad,2014-07-04T07:13:22Z,"@sipa this pull is much more readable now. Also, I've included the commit that splits MarkBlockAsReceived into two (also MarkBlockAsRequested), as I felt it was confusing that it was being used to mark blocks as requested but which are still in flight. Hope this is ok, but if not, I can remove this commit.\n",https://github.com/bitcoin/bitcoin/pull/4431#issuecomment-48014836,48014836,
sipa,2014-07-05T17:21:53Z,"I hate to tell you after all the time you've spent on this, but headers-first will make most of this obsolete. It completely removes the concepts of ""sync node"" or ""orphan blocks"", and stops using ""getblocks"" altogether (fixing #4387 as well).\n\nDecent logic for disconnecting blocks when they're stalling will still be useful, but many of the apparently stuck problems just caused by us not knowing",https://github.com/bitcoin/bitcoin/pull/4431#issuecomment-48091674,48091674,
ghost,2014-07-05T17:54:11Z,@sipa Is there a PR yet for headers-first feature?\n,https://github.com/bitcoin/bitcoin/pull/4431#issuecomment-48092385,48092385,
sipa,2014-07-05T17:56:01Z,@drak Very soon!\n,https://github.com/bitcoin/bitcoin/pull/4431#issuecomment-48092429,48092429,
rebroad,2014-07-16T16:41:53Z,"I realise some of this pull request may disappear when header-first is merged, but this is still a useful fix to the many orphan problem right now, and also improves debug.log information. Some ACKs would be appreciated. @sipa @gmaxwell @laanwj @drak @gavinandresen @Diapolo thanks\n",https://github.com/bitcoin/bitcoin/pull/4431#issuecomment-49193083,49193083,
ghost,2014-08-26T23:08:44Z,"I appreciate you writing up fixes for this. Definitely important.\n\nWill this be merged soon? The stalling due to orphans is so bad that IMO, it makes the client mostly useless. I have to baby sit it and restart it. I finally got it going with lowered max connections.\n",https://github.com/bitcoin/bitcoin/pull/4431#issuecomment-53506333,53506333,
gmaxwell,2014-08-26T23:10:44Z,This will almost certantly not be merged.  Issues with orphans are resolved by #4468.\n,https://github.com/bitcoin/bitcoin/pull/4431#issuecomment-53506517,53506517,
ghost,2014-08-26T23:14:34Z,"@gmaxwell Ah, thanks for linking that one over. Looking forward to seeing that one merged in, then.\n",https://github.com/bitcoin/bitcoin/pull/4431#issuecomment-53506858,53506858,
rebroad,2014-08-29T17:20:29Z,"@gmaxwell This could have been merged in the mean time though, I'd have thought. It was pull-requested quite some time before #4468 came about, too.\n",https://github.com/bitcoin/bitcoin/pull/4431#issuecomment-53905079,53905079,
gmaxwell,2014-08-29T17:25:02Z,@rebroad 4468 is just the latest rebase of it. \n,https://github.com/bitcoin/bitcoin/pull/4431#issuecomment-53905609,53905609,
rebroad,2014-09-03T00:52:32Z,"@gmaxwell This pull request is ready to merge (or at least has been at several stages), whereas #4468 isn't, and has never been so far - it currently breaks re-orgs, so it's clearly still under development, and no one knows when it will be ready to test.\n\nThe issues this pull fixes are urgent, and have been for some time now - the amount of bandwidth being wasted by duplicate blocks and orphans ",https://github.com/bitcoin/bitcoin/pull/4431#issuecomment-54238982,54238982,
gmaxwell,2014-09-03T01:05:38Z,"#4468 is ready to merge except the testing infrastructure has not been updated to accommodate it, if not for that it would already be merged. Even with the it would already be merged except breaking pull tester in master would make all other pulls fail. It has no currently known problems and is suitable for testing, and I have several nodes running on it without issue.\n\nWhen I looked at this pat",https://github.com/bitcoin/bitcoin/pull/4431#issuecomment-54239856,54239856,
rebroad,2014-09-03T01:46:36Z,"@gmaxwell The default timeouts were address as soon as they were mentioned, and changed to 2 minutes as requested. I still mantain, however, that 2 minutes is far riskier than my suggested 10 seconds, as at a 2 minute timeout this can significantly cause atypical nodes to delay block propagation by them issuing the latest block inv as quickly as possible (before they've even got the headers), and ",https://github.com/bitcoin/bitcoin/pull/4431#issuecomment-54242357,54242357,
gmaxwell,2014-09-03T01:58:00Z,"I though previously explained in this in adequate detail in your prior pull request that disconnected well behaving nodes: This kind approach makes the network fragile in a multitude of situations, including hosts on even slightly slow links. Effectively a two minute timeout increases the minimum bandwidth that can keep a node running bitcoin by more than 5 fold. This of behavior means that modera",https://github.com/bitcoin/bitcoin/pull/4431#issuecomment-54242988,54242988,
rebroad,2014-09-03T02:03:36Z,"@gmaxwell Strawman arguments aren't helping - no one is suggesting disconnecting well-behaving nodes. A node that doesn't start sending a block within 2 minutes of it being requested, I think we can both agree, is not a well-behaving node.\n\nSince the default behaviour in this pull is set to 2 minutes, I'm confused as to why you're focusing on this point. Is there anything in this pull or for tha",https://github.com/bitcoin/bitcoin/pull/4431#issuecomment-54243277,54243277,
gmaxwell,2014-09-03T02:06:33Z,"It may be wortking fineâ€” could even be the only honest node you're connected to. Start is the wrong description of what the changes do, they may have sent immediately, and you've received 99.9% of it by the time two minutes pass.  This is also a tangent, the changes here are not primarily related to steady state block relay. \n",https://github.com/bitcoin/bitcoin/pull/4431#issuecomment-54243441,54243441,
rebroad,2014-09-03T02:12:20Z,"@gmaxwell Are you saying you want me to change the code so that it disconnects nodes if they haven't managed to send an entire block within two minutes? Surely if it's send 99.9% then it would be counterproductive to start the download from scratch from another node.\n\nI'm sorry, I'm not understanding what your issue is still. Can you just state simply what you would need to see changed in this p",https://github.com/bitcoin/bitcoin/pull/4431#issuecomment-54243766,54243766,
pstratem,2014-09-03T02:16:06Z,@rebroad this is a fairly large patch for something which will be entirely irrelevant when https://github.com/bitcoin/bitcoin/pull/4468 is merged\n\nI appreciate the work to improve orphans that stall IBD (it's annoying to me too!) but really making these changes with headers first right around the corner is unnecessary\n\nNACK\n,https://github.com/bitcoin/bitcoin/pull/4431#issuecomment-54243998,54243998,
rebroad,2014-09-03T02:17:40Z,"@pstratem Hasn't headers first been ""right around the corner"" for over 2 years now?\n",https://github.com/bitcoin/bitcoin/pull/4431#issuecomment-54244080,54244080,
jgarzik,2014-09-03T02:21:41Z,"headers-first is the consensus direction.  It is not directly apparent, but many headers first-related patches are already in the tree, merged in tiny bites.\n\nAny notable work in this area should be based on top of headers-first, to avoid wasting work.\n",https://github.com/bitcoin/bitcoin/pull/4431#issuecomment-54244281,54244281,
gmaxwell,2014-09-03T02:26:55Z,"Two years? no way. It was originally slated for 0.9 but it was too big to review and test all at once, so it was split up and missed that release. As Jeff notes much of it has already been merged.\n",https://github.com/bitcoin/bitcoin/pull/4431#issuecomment-54244595,54244595,
BitcoinPullTester,2014-09-03T02:54:13Z,"Automatic sanity-testing: FAILED BUILD/TEST, see http://jenkins.bluematt.me/pull-tester/p4431_cf203c45e2b2dadf74ec20494015680218dd5fa5/ for binaries and test log.\n\nThis could happen for one of several reasons:\n1. It chanages paths in makefile.linux-mingw or otherwise changes build scripts in a way that made them incompatible with the automated testing scripts (please tweak those patches in qa/p",https://github.com/bitcoin/bitcoin/pull/4431#issuecomment-54246213,54246213,
laanwj,2014-09-03T06:21:27Z,@rebroad Instead of impatiently complaining how slow headers-first is being merged you could also help testing and reviewing it. Or even build on top of it. You know the code is available as pull request #4468 and it fully works?\n,https://github.com/bitcoin/bitcoin/pull/4431#issuecomment-54256606,54256606,
rebroad,2014-09-03T06:50:59Z,"@laanwj I am testing it and building on top of it, however, I'd always understood that we were supposed to submit pull requests built on-top of master, so I'm not sure how you would want me to submit patches without including the entirity of #4468 along with every pull request I make.\n",https://github.com/bitcoin/bitcoin/pull/4431#issuecomment-54258473,54258473,
laanwj,2014-09-03T10:26:49Z,"@rebroad You could submit patches to @sipa directly. Otherwise, just make sure that you don't conflict with him or do duplicate work.\n",https://github.com/bitcoin/bitcoin/pull/4431#issuecomment-54277846,54277846,
Diapolo,2014-06-27T14:06:49Z,Please always list the default like in the other help strings.\n,https://github.com/bitcoin/bitcoin/pull/4431#discussion_r14293841,14293841,src/init.cpp
Diapolo,2014-06-27T14:08:57Z,Please use 2 lines for ifs.\n,https://github.com/bitcoin/bitcoin/pull/4431#discussion_r14293949,14293949,src/net.cpp
rebroad,2014-06-27T14:56:50Z,I thought the default wasn't shown unless it was 1.\n,https://github.com/bitcoin/bitcoin/pull/4431#discussion_r14296542,14296542,src/init.cpp
