DrahtBot,2021-01-16 02:56:11,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #20383 (Avoid signed integer overflow and invalid integer negation when loading malformed mempool.dat files by practicalsw",https://github.com/bitcoin/bitcoin/pull/20944#issuecomment-761300240,761300240,
jonasschnelli,2021-01-16 08:38:18,"Concept ACK, light code review. Looks good.",https://github.com/bitcoin/bitcoin/pull/20944#issuecomment-761528315,761528315,
0xB10C,2021-01-17 17:26:31,Concept ACK,https://github.com/bitcoin/bitcoin/pull/20944#issuecomment-761847782,761847782,
MarcoFalke,2021-01-22 11:36:48,Good point. Force pushed to make the test more useful.,https://github.com/bitcoin/bitcoin/pull/20944#issuecomment-765341007,765341007,
MarcoFalke,2021-01-28 09:38:53,">  EDIT: Unrelated to this PR, but it seems like documentation for unbroadcastcount is missing from REST-interface.md too.\n\nI'll leave fixing the docs as a follow-up. Ideally the docs are auto-generated, which is on my roadmap.",https://github.com/bitcoin/bitcoin/pull/20944#issuecomment-768927409,768927409,
MarcoFalke,2021-01-28 09:44:23,"Didn't realize this had only one ACK after my force push, so I went ahead and fixed the documentation.",https://github.com/bitcoin/bitcoin/pull/20944#issuecomment-768930475,768930475,
achow101,2021-02-08 19:19:36,ACK fa362064e383163a2585ffbc71ac1ea3bcc92663,https://github.com/bitcoin/bitcoin/pull/20944#issuecomment-775381282,775381282,
jonasschnelli,2021-01-16 08:37:23,wouldn't this also work as a `std::atomic<CAmount>` and avoid the locking in the getter?,https://github.com/bitcoin/bitcoin/pull/20944#discussion_r558826685,558826685,src/txmempool.h
MarcoFalke,2021-01-16 09:16:39,"Yes, but for the rpc to return atomic results, the lock needs to be taken. Also, it is already taken in the current code, so this is cheaper than an atomic.",https://github.com/bitcoin/bitcoin/pull/20944#discussion_r558830297,558830297,src/txmempool.h
glozow,2021-02-04 23:49:56,"nit: I'd perhaps call this `total_base_fees` if there's a possibility of reporting modified totals in the future\n```suggestion\n                        {RPCResult::Type::STR_AMOUNT, ""total_base_fees"", ""Total base fees for the mempool in "" + CURRENCY_UNIT + "", ignoring modified fees through prioritizetransaction""},\n```",https://github.com/bitcoin/bitcoin/pull/20944#discussion_r570624202,570624202,src/rpc/blockchain.cpp
glozow,2021-02-05 00:11:43,nit: perhaps add a link?,https://github.com/bitcoin/bitcoin/pull/20944#discussion_r570632436,570632436,doc/REST-interface.md
MarcoFalke,2021-02-05 07:18:03,"I don't think the sum of the modified fees has any meaning. They are used to prioritize individual transactions (and thus their packages) for mining. It is not a fee that can be redeemed in any way and in most cases it will be an arbitrary number.\n\nThough, if they are added they can be called `total_modified_fee`, without breaking any clients. I'll leave as is for now.",https://github.com/bitcoin/bitcoin/pull/20944#discussion_r570764379,570764379,src/rpc/blockchain.cpp
MarcoFalke,2021-02-05 07:18:44,"Happy to take a patch if you provide one, either in this pull or as a follow-up.",https://github.com/bitcoin/bitcoin/pull/20944#discussion_r570764634,570764634,doc/REST-interface.md
jnewbery,2021-02-05 11:21:38,Perhaps could do a check here that `total_fee_old` is a positive integer?,https://github.com/bitcoin/bitcoin/pull/20944#discussion_r570899187,570899187,test/functional/mempool_persist.py
MarcoFalke,2021-02-05 15:52:03,Could also be checked via `CHECK_NONFATAL` on the server side.,https://github.com/bitcoin/bitcoin/pull/20944#discussion_r571066130,571066130,test/functional/mempool_persist.py
glozow,2021-02-05 17:48:36,"Yes, makes sense!",https://github.com/bitcoin/bitcoin/pull/20944#discussion_r571143503,571143503,src/rpc/blockchain.cpp
