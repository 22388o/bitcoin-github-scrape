MarcoFalke,2021-04-14 12:46:41,"Looks like your compiler inlined the whole function and thus can not apply the suppression?\n\ncr ACK f2ef5a8afd5da2fb7775dafdee15e6ac532d8fe4\n\nAn alternative would be to simply avoid the intentional lock-order-inversion.\n\n\n```diff\ndiff --git a/src/test/sync_tests.cpp b/src/test/sync_tests.cpp\nindex 3e4d1dac9e..737cf166cd 100644\n--- a/src/test/sync_tests.cpp\n+++ b/src/test/sync",https://github.com/bitcoin/bitcoin/pull/21678#issuecomment-819490411,819490411,
hebasto,2021-04-14 12:53:11,"The suggested diff skips a part of the test, particularly `BOOST_CHECK(!error_thrown);`, that seems unwanted.",https://github.com/bitcoin/bitcoin/pull/21678#issuecomment-819494285,819494285,
MarcoFalke,2021-04-14 13:17:16,"What is the value of checking that two locks can be successfully taken both in the order a-b and in the order b-a. We don't use that anywhere, so it seems odd to have a test for it.",https://github.com/bitcoin/bitcoin/pull/21678#issuecomment-819510764,819510764,
hebasto,2021-04-14 13:23:53,@ryanofsky @vasild What do you think?,https://github.com/bitcoin/bitcoin/pull/21678#issuecomment-819515074,819515074,
MarcoFalke,2021-04-14 13:55:44,( Test added by @ryanofsky in commit 41b88e93375d57db12da923f45f87b9a2db8e730 ),https://github.com/bitcoin/bitcoin/pull/21678#issuecomment-819537786,819537786,
ryanofsky,2021-04-14 14:47:14,"I'm not sure what question's being asked, but I'm happy to review any change.\n\nIntention of #else clause in the referenced commit is to check that process will not unnecessarily throw an exception and potentially crash when DEBUG_LOCKORDER is disabled. Crashes can be bad, so it is good to verify that a crash won't happen when crashes are supposed to be disabled just because locks are acquired ",https://github.com/bitcoin/bitcoin/pull/21678#issuecomment-819576116,819576116,
ryanofsky,2021-04-14 14:53:09,"Oh, I understand better now. This PR is fixing a broken suppression, and Marco's saying it is easier to skip the check that requires the suppression instead of fixing the suppression.\n\nI have no opinion on what's easier. I think the check does serve a purpose, but it's also not very important.",https://github.com/bitcoin/bitcoin/pull/21678#issuecomment-819580777,819580777,
vasild,2021-04-14 16:24:25,"So, the problem this PR fixed is that `TestPotentialDeadLockDetected()` was inlined and thus did not match the suppression `deadlock:TestPotentialDeadLockDetected`? Why it started happening now?",https://github.com/bitcoin/bitcoin/pull/21678#issuecomment-819648026,819648026,
hebasto,2021-04-14 16:25:44,"> Why it started happening now?\n\nclang-12?",https://github.com/bitcoin/bitcoin/pull/21678#issuecomment-819648903,819648903,
