[
  {
    "sha": "279ab5e62f4e4344061d54b341d8d36af874fb88",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyNzlhYjVlNjJmNGU0MzQ0MDYxZDU0YjM0MWQ4ZDM2YWY4NzRmYjg4",
    "commit": {
      "author": {
        "name": "Matt Corallo",
        "email": "matt@bluematt.me",
        "date": "2011-03-05T14:32:32Z"
      },
      "committer": {
        "name": "Matt Corallo",
        "email": "matt@bluematt.me",
        "date": "2011-03-05T14:32:32Z"
      },
      "message": "setaccount should return if an invalid address is provided.\nThis prevents setaccount from creating new accounts which do not have any addresses.",
      "tree": {
        "sha": "988327dbaaa4ed7e01824ae4a3e0c1db0ed94df0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/988327dbaaa4ed7e01824ae4a3e0c1db0ed94df0"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/279ab5e62f4e4344061d54b341d8d36af874fb88",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/279ab5e62f4e4344061d54b341d8d36af874fb88",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/279ab5e62f4e4344061d54b341d8d36af874fb88",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/279ab5e62f4e4344061d54b341d8d36af874fb88/comments",
    "author": null,
    "committer": null,
    "parents": [
      {
        "sha": "f36b494aebcfe4cc6a45003520ee7d15eeaba8df",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f36b494aebcfe4cc6a45003520ee7d15eeaba8df",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/f36b494aebcfe4cc6a45003520ee7d15eeaba8df"
      }
    ],
    "stats": {
      "total": 6,
      "additions": 6,
      "deletions": 0
    },
    "files": [
      {
        "sha": "e01ea0e3b6b2819f7417a8f65796191add895a28",
        "filename": "rpc.cpp",
        "status": "modified",
        "additions": 6,
        "deletions": 0,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/279ab5e62f4e4344061d54b341d8d36af874fb88/rpc.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/279ab5e62f4e4344061d54b341d8d36af874fb88/rpc.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/rpc.cpp?ref=279ab5e62f4e4344061d54b341d8d36af874fb88",
        "patch": "@@ -381,6 +381,12 @@ Value setaccount(const Array& params, bool fHelp)\n             \"Sets the account associated with the given address.\");\n \n     string strAddress = params[0].get_str();\n+    uint160 hash160;\n+    bool isValid = AddressToHash160(strAddress, hash160);\n+    if (!isValid)\n+        throw runtime_error(\"provided address is not valid\");\n+\n+\n     string strAccount;\n     if (params.size() > 1)\n         strAccount = AccountFromValue(params[1]);"
      }
    ]
  },
  {
    "sha": "c1f74f152b278ca11390519fded87c09e7f05437",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjMWY3NGYxNTJiMjc4Y2ExMTM5MDUxOWZkZWQ4N2MwOWU3ZjA1NDM3",
    "commit": {
      "author": {
        "name": "Matt Corallo",
        "email": "matt@bluematt.me",
        "date": "2011-03-05T15:45:56Z"
      },
      "committer": {
        "name": "Matt Corallo",
        "email": "matt@bluematt.me",
        "date": "2011-03-05T15:45:56Z"
      },
      "message": "throw JSONRPCError(-5, \"Invalid bitcoin address\") instead.",
      "tree": {
        "sha": "e0bf81411e4b05210a95811d00ca8aa5939657a9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e0bf81411e4b05210a95811d00ca8aa5939657a9"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c1f74f152b278ca11390519fded87c09e7f05437",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c1f74f152b278ca11390519fded87c09e7f05437",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/c1f74f152b278ca11390519fded87c09e7f05437",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c1f74f152b278ca11390519fded87c09e7f05437/comments",
    "author": null,
    "committer": null,
    "parents": [
      {
        "sha": "279ab5e62f4e4344061d54b341d8d36af874fb88",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/279ab5e62f4e4344061d54b341d8d36af874fb88",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/279ab5e62f4e4344061d54b341d8d36af874fb88"
      }
    ],
    "stats": {
      "total": 2,
      "additions": 1,
      "deletions": 1
    },
    "files": [
      {
        "sha": "dd94acc050d72547d96a59aa2358aec4f2b9d445",
        "filename": "rpc.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c1f74f152b278ca11390519fded87c09e7f05437/rpc.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c1f74f152b278ca11390519fded87c09e7f05437/rpc.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/rpc.cpp?ref=c1f74f152b278ca11390519fded87c09e7f05437",
        "patch": "@@ -384,7 +384,7 @@ Value setaccount(const Array& params, bool fHelp)\n     uint160 hash160;\n     bool isValid = AddressToHash160(strAddress, hash160);\n     if (!isValid)\n-        throw runtime_error(\"provided address is not valid\");\n+        throw JSONRPCError(-5, \"Invalid bitcoin address\");\n \n \n     string strAccount;"
      }
    ]
  }
]