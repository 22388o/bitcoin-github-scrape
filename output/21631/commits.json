[
  {
    "sha": "1c1467f51b6dda92dec974eb59026c2c5ba79ed6",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoxYzE0NjdmNTFiNmRkYTkyZGVjOTc0ZWI1OTAyNmMyYzViYTc5ZWQ2",
    "commit": {
      "author": {
        "name": "Vasil Dimov",
        "email": "vd@FreeBSD.org",
        "date": "2021-04-07T11:47:58Z"
      },
      "committer": {
        "name": "Vasil Dimov",
        "email": "vd@FreeBSD.org",
        "date": "2021-04-08T14:31:55Z"
      },
      "message": "i2p: cancel the Accept() method if waiting on the socket errors",
      "tree": {
        "sha": "6f021357fb2920882b2c5b7408d98189be3683e3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6f021357fb2920882b2c5b7408d98189be3683e3"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1c1467f51b6dda92dec974eb59026c2c5ba79ed6",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQQzBAABCAAdFiEE5k2NRWFNsHVF2czBVN8G9ktVy78FAmBvE+IACgkQVN8G9ktV\ny7/uRh/8CJrG2+8icigbjqdisqCr2BXzLXEJqJrWvhQfMPrcdHKI6RFr/DZqbRMq\nqrNMSBmn8kpAVcmSHZlrHtcidb7MVbJFAxQoeFCJ1y/wKAnWvsYyB73mwwy8UcO9\nqaVsyVDoM/xWlVZkIzXMfVmfyFdph4Jgx7drwd7SwdObyIlCin559/3RiuXs2k9j\n+CJJZs3ueJ8/dMuwguncZ1klhUmCKJOL/LRiTh6LtVJGbj/gAe8/lfBscyI0C4VZ\n5uZTGGiN6mJ5jVvJ4BnjPdQYpMyxfzhzdI+izhx7F/L1FtdnWDRdiG1tkiUgzzm1\nqIBNFzqGRrX0sv0197srhFLXjtCFV1LamNTDDhSHz+Y0AEZJ20vOChkEyfDg8Adp\n9Baogj2JIXiuKInjHNO9jeZ/PgDa0LyDiB50mW1tj9xJm+EaGcPKMtzm7o70zBxJ\n2e0B439nsyv21bauoukKF7w/x5BV5rSOF8u1rrF3KVb00IYcdf+ZkSGeFJPMwxTS\n8Lyeq3d8qW/bJL18Rcfsox8ro+3l05F045zmLxtH/28WCi4Y9nG1+8V1SR+TcEPH\nEyGxFFgyDdGdxuTKbHaX7NxmqHjLklBv9An/IJaxFC+gYFGefvy4C64/lttele7J\nOH9vYm6tTUiZhG5o8cZz3Ukp5aSReS2IJlBOqsd4bUuHtRofUf7C04Es+6Mhqahz\nlbjgc0cYM5AWJ5uofk6RC8NSD1POPtFKBH0xRA8XOpsCGZIFGTb/UCGmLi5+m2CB\nzYGYn/7FxeuG4pOKUiUItH+o0SPnotr9eHfSdiV3t4E3MaFFgBsWYlF/+V/TxB7V\nI4PVrGk7hdwAXmORvSBUn/8u3Ahi84Pibldma32htT41I//vgDktcRq/nxkXYU+/\nbHG1TBdL6sTXfYbzkCPBihrvXRE9+m3jXxRKhJgPmcTT+xFkQhfNyVB2xnopN/cs\n6c5IS9GhhXURrv+BgPJEWCgws8xa9ZuAQzooBX8DDf0E+tLuxmdvtMlqXSq5UzR6\n1l9ZappfBgVbeDkkCX/EaHLuQzOe/62CnX5h8WCfUEVy9wDDbUdw3dOEANZWm5o+\nKazV/+QuFaWdsQ+ZrEAROwrVenrd6mg15xqYGnc1Qs/xKwjdPnYetYrT1sC9BWBy\n6v3R95h6GJmSz9HwIHauaSv1jexT83ofmooqfXa7cl4tkBkABCoulnKcdOwnbywv\npRmcgjIM8Yg4Dob0QCuESfdxqW9wsPfBQvsWGwrBp8dDMKdkd5Jc8iyec8/7yYSj\n6x1vPlbPjyCgy+VN4v9MScO4qnkRm0iSl3XarqLeZpwmskIC9VZL2hdQqiNyfPuq\nzA82qx82JaL4Zm3Lrz/54TYZcLSa5A==\n=ZKVn\n-----END PGP SIGNATURE-----",
        "payload": "tree 6f021357fb2920882b2c5b7408d98189be3683e3\nparent aa69471ecd553dbcd7dd6d1b2e59dfb69d6a0cf3\nauthor Vasil Dimov <vd@FreeBSD.org> 1617796078 +0200\ncommitter Vasil Dimov <vd@FreeBSD.org> 1617892315 +0200\n\ni2p: cancel the Accept() method if waiting on the socket errors\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1c1467f51b6dda92dec974eb59026c2c5ba79ed6",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/1c1467f51b6dda92dec974eb59026c2c5ba79ed6",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1c1467f51b6dda92dec974eb59026c2c5ba79ed6/comments",
    "author": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "aa69471ecd553dbcd7dd6d1b2e59dfb69d6a0cf3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/aa69471ecd553dbcd7dd6d1b2e59dfb69d6a0cf3",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/aa69471ecd553dbcd7dd6d1b2e59dfb69d6a0cf3"
      }
    ],
    "stats": {
      "total": 4,
      "additions": 3,
      "deletions": 1
    },
    "files": [
      {
        "sha": "2ae164633b9b912680a477c4809d45c204fc8938",
        "filename": "src/i2p.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 1,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/1c1467f51b6dda92dec974eb59026c2c5ba79ed6/src/i2p.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/1c1467f51b6dda92dec974eb59026c2c5ba79ed6/src/i2p.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/i2p.cpp?ref=1c1467f51b6dda92dec974eb59026c2c5ba79ed6",
        "patch": "@@ -147,7 +147,9 @@ bool Session::Accept(Connection& conn)\n     try {\n         while (!*m_interrupt) {\n             Sock::Event occurred;\n-            conn.sock->Wait(MAX_WAIT_FOR_IO, Sock::RECV, &occurred);\n+            if (!conn.sock->Wait(MAX_WAIT_FOR_IO, Sock::RECV, &occurred)) {\n+                throw std::runtime_error(\"wait on socket failed\");\n+            }\n \n             if ((occurred & Sock::RECV) == 0) {\n                 // Timeout, no incoming connections within MAX_WAIT_FOR_IO."
      }
    ]
  }
]