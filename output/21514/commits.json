[
  {
    "sha": "2b8ab5584f2ebeb811888887ac300d92a76dacdd",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyYjhhYjU1ODRmMmViZWI4MTE4ODg4ODdhYzMwMGQ5MmE3NmRhY2Rk",
    "commit": {
      "author": {
        "name": "Vasil Dimov",
        "email": "vd@FreeBSD.org",
        "date": "2021-03-18T14:51:46Z"
      },
      "committer": {
        "name": "Vasil Dimov",
        "email": "vd@FreeBSD.org",
        "date": "2021-05-31T16:16:42Z"
      },
      "message": "net: remove unused operator<(CService, CService)",
      "tree": {
        "sha": "6d44edae3e857c15d0e2cffdda6f348363a5d266",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6d44edae3e857c15d0e2cffdda6f348363a5d266"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2b8ab5584f2ebeb811888887ac300d92a76dacdd",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQQzBAABCAAdFiEE5k2NRWFNsHVF2czBVN8G9ktVy78FAmC1C+sACgkQVN8G9ktV\ny7/C2R//cXTmwVbaK3fmVv/0Ys4aqMe5B6G84ZmqYjrqVuju6PfmjwGZcZQEK49A\nFjS6Q+iBnRPm0gHu79MsdocELn4FzGiz+sA/U40SzfTKJTy+tgSvwiHVEavIFBbe\ncMEqcjduD5OcaRKXTGHRXI7QS9/VH1ynwOiWKbw5oW0+N05CON5fL0MI7+FWFhTO\nj04sdVekzDsZbNs5I4PYPRZzFPgdMF6sZtWCwfxEEk488a6l3J+HQ1CvEZOr2F1v\nybPjzkDDzTYt+p8pc/9fcLGevU8DPVQKWO5K+8ybGoE6CxaMnystk9Gxk+ERm5/D\nuvcsH6syCTsLbRz1JsMP4MkBrvoOWW0lTCaMURALdULxG0TVGdmNngN5hvyGSsoI\nnoGLUTLVr9tRQ7qOhKPbgRf9sSpzlOIiB8TWI44Ndyzi6pzGhxzdLbaNO/IojtxD\nXEjZZwHELas47yXHj0+icjZgqrTtYsAc+Bg7hEqjhbjZUCTbQA5ipxrRFqa8u0kM\nk1KoXZ+8fau5y3yv1cfgwdC9A2HVfPfpYIF3VAeWn4Z1ThMLZFdP4K4pFYQYi4iV\nySl8XdZEPnYemuhHa8cduTroGGeVNOFnSwROL+Lle53spGnJ/6na6EGdwES8rxSv\nD6UIvsjspXylWwrzNdHLlR3Nwrmd5d8mBH84oJ/5qcim4sDxCsUk1mn8YjIhGIRi\nuCpOWoqeQXTVkwPhvBN/vToGTFM4R3lxQ9rwG96hGWmZ8uoXCW4/WERBr/vUryU7\nuixRTZjNQKcWXN5QnM9eNubHTTS/N2H4mChmAoj6VUZzfVQ5FRYzMhNh/PpNMTrf\n1xKjrsUBOeb2QXByk9pBzDjS13uH+FVeggELAlxxPMgrPkh+y/LtVH7hNO9gPjzp\nbS12x8+thnlW1zC8i9oFQjLNIWqOfBKXV0sbOKk9pyVlPu86Y0MwaDnNr1URrjCx\nGCg8qpD/pE3fMBF/0E0Xf++s1ynJawGTLHs21ubvDJ5hrVHIvutsHN9qCWqPIpY7\nbaLNr9VYRmRjT4eob4jhfg7MDIBirNa202d28MzS4OKcQTLANyJaq+lmM3MuWXLH\n0FxHg0758vYEuW0dWB1b93Gr46LH7ug+Pp6C8GaJyR8TzcN1bTFQ3RtCqrsKynHh\nrgH/LIfIOvG4Uu1ObvbVj+00qkfuJ26Yn6KKGH0wojOENIb13Ha3OU2yBzzjd3uO\n+27kDkXFKkrcSkBIYrgsL9FB3Zag4DCxMCb9/6hEWLqiEYy3M3CgNbUYs9c0Obm0\nurqugzrBuVSMdZCs69MCshJIitiCf/tN6E4L9edekoPBCHd5DvaPH00weVS6FSYb\nVUXueprcXpyHHkMsIGLj4w9lphKVgQ==\n=bNeD\n-----END PGP SIGNATURE-----",
        "payload": "tree 6d44edae3e857c15d0e2cffdda6f348363a5d266\nparent 8462cd56010a8beadf95d4f3cb1357ca9d88493b\nauthor Vasil Dimov <vd@FreeBSD.org> 1616079106 +0100\ncommitter Vasil Dimov <vd@FreeBSD.org> 1622477802 +0200\n\nnet: remove unused operator<(CService, CService)\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2b8ab5584f2ebeb811888887ac300d92a76dacdd",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/2b8ab5584f2ebeb811888887ac300d92a76dacdd",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2b8ab5584f2ebeb811888887ac300d92a76dacdd/comments",
    "author": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "8462cd56010a8beadf95d4f3cb1357ca9d88493b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8462cd56010a8beadf95d4f3cb1357ca9d88493b",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/8462cd56010a8beadf95d4f3cb1357ca9d88493b"
      }
    ],
    "stats": {
      "total": 13,
      "additions": 7,
      "deletions": 6
    },
    "files": [
      {
        "sha": "c6e0f940127454a9aeef0d156fb53f77e59d4e8a",
        "filename": "src/netaddress.cpp",
        "status": "modified",
        "additions": 0,
        "deletions": 5,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2b8ab5584f2ebeb811888887ac300d92a76dacdd/src/netaddress.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2b8ab5584f2ebeb811888887ac300d92a76dacdd/src/netaddress.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/netaddress.cpp?ref=2b8ab5584f2ebeb811888887ac300d92a76dacdd",
        "patch": "@@ -988,11 +988,6 @@ bool operator==(const CService& a, const CService& b)\n     return static_cast<CNetAddr>(a) == static_cast<CNetAddr>(b) && a.port == b.port;\n }\n \n-bool operator<(const CService& a, const CService& b)\n-{\n-    return static_cast<CNetAddr>(a) < static_cast<CNetAddr>(b) || (static_cast<CNetAddr>(a) == static_cast<CNetAddr>(b) && a.port < b.port);\n-}\n-\n /**\n  * Obtain the IPv4/6 socket address this represents.\n  *"
      },
      {
        "sha": "3d05e98eafb70e67bcd846aa96681a3522351f6a",
        "filename": "src/netaddress.h",
        "status": "modified",
        "additions": 7,
        "deletions": 1,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2b8ab5584f2ebeb811888887ac300d92a76dacdd/src/netaddress.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2b8ab5584f2ebeb811888887ac300d92a76dacdd/src/netaddress.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/netaddress.h?ref=2b8ab5584f2ebeb811888887ac300d92a76dacdd",
        "patch": "@@ -563,7 +563,13 @@ class CService : public CNetAddr\n         bool SetSockAddr(const struct sockaddr* paddr);\n         friend bool operator==(const CService& a, const CService& b);\n         friend bool operator!=(const CService& a, const CService& b) { return !(a == b); }\n-        friend bool operator<(const CService& a, const CService& b);\n+\n+        /**\n+         * Avoid silently, unintentionally falling back to comparing CService objects as\n+         * CNetAddr objects.\n+         */\n+        bool operator<(const CService&) = delete;\n+\n         std::vector<unsigned char> GetKey() const;\n         std::string ToString() const;\n         std::string ToStringPort() const;"
      }
    ]
  },
  {
    "sha": "71a294d77d565da93b425359388d5ce0f17745c0",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo3MWEyOTRkNzdkNTY1ZGE5M2I0MjUzNTkzODhkNWNlMGYxNzc0NWMw",
    "commit": {
      "author": {
        "name": "Vasil Dimov",
        "email": "vd@FreeBSD.org",
        "date": "2021-03-18T14:27:49Z"
      },
      "committer": {
        "name": "Vasil Dimov",
        "email": "vd@FreeBSD.org",
        "date": "2021-05-31T16:16:43Z"
      },
      "message": "net: ignore ports when comparing some addresses (I2P)\n\nFrom our perspective ports are ignored when connecting to the I2P\nnetwork. I.e. `aaa.b32.i2p:1111` is the same as `aaa.b32.i2p:2222`,\nso compare them equal to avoid redundant connections to the same node if\nports happen to differ for some reason.\n\nFixes https://github.com/bitcoin/bitcoin/issues/21389",
      "tree": {
        "sha": "1b9f7989a3b4b4853cc068d0784fe305bc7c3084",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/1b9f7989a3b4b4853cc068d0784fe305bc7c3084"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/71a294d77d565da93b425359388d5ce0f17745c0",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQQzBAABCAAdFiEE5k2NRWFNsHVF2czBVN8G9ktVy78FAmC1C+sACgkQVN8G9ktV\ny7+i6h/+NnYl2UJPyz4oTAmtbAXxtpOp1BqCVhDQVEmIzILr/VhNQ544dj4jBofh\nel9EHFh7EiHUNssrr9A6uKkqQv2QKcVe71HZFzxdi7/Dt9Hwoe+jW7cQnBJM1cZc\nU2kJXAhqgNr8rYse8wyva4UKXjSufW5I95xWp229B80r5jdi+eD9oVI0MrKFt5fR\nBYb2pfWxpPUbvl38uZXD/pTcu8czItxiggv3Fk2SbhVBwVFMeZ3rYcK59M85rtQ7\nywX35qqWzg+0V9q7T9k4qOU83et2IgNmAX8yZ3P6aGWqMobXYMjoE9LvJstLaIIN\nDmj05CLmq5AxYqHfrD1G2GfRKzoARooxGlKlmKEXD9Folhj/QhP/r7apKc36+Oqu\nX21RnF1J0o++SWNl4WtgdjCWVDUnVInW9xg0qYRoF3oyKTr6sxInYK4IOeS4x7oz\nK2N7v4TBOkSaNdlvMe6SdB6RcZ9ErDpQiWBT+gl9GOBE6zfkBZGfePuVecj6NZN8\nKsd7RGhbQNQ3I3/PF+isouj212nZJwoIxjXTFaTCBVhaNZDufbLZRmFJPwAR/ymV\nI4HvFEP+EXFHimkelVRptrxYUlizBorEUzW4CYI+MbD0j4aT80IeqIQjEEWSKdht\n7syyysqT6YjOMxhHs8tjV4fI213INCbyMRJFyw0P/vw68AY/NExlEDciJnKuvmoJ\nO9lmehcKDLHdnZDVe0/ODt+rn/rJew0GuiEzAkMTmVfLG9Qj2jrbkd165BmlHodG\nTygYxEdIetyrgl3N5w99cBD//VWD9fhpCpsjwX4O1eC2F6qsregtL+B1ARlSxDHL\nR1k/hzaRVtxkgH6YvBO0hXuScda7SjQIgB23KosUnHGmZJacN06syy/zGgFA/XJc\nB/TW6JUGRCq/1mSoBvsitopU2NWQlEduagXr+uH+xP0Ny+VyaFpkmjtAHaK9sDsK\nrPT1lUC8Twk6Vd/hm6bKSJjbVU+uddnAF+YntzIxiDLLXzxiNYx9TUM9kajLTsCm\nzzSmwu0IWH2CjQuvq6eP5/FwmSC4gKGkTY9C4RkHIU74NGYuYjFPPiOX55L68ITk\nODMyRhanf1bu2OzNZ+4eRwNB2cWTpPQ3lxJClpV1NTepv1HAumswOEPEBMxnaxa/\n0esp2qBPCbcD20NIq9ISsEe1jhmVRLotj+BlNUU/GgySf/xoi1jSntAO6vZa1lVs\n2lgiosTOH0uHPNDvxkE3L4J3dB4Smj1kXBEmOg13WUAqNQ9DLcx+/P5Ecui3WNic\nVDUIN8lHesa0dyNyd4qlJ2ir7giQw9vfF32bc7LDBjjaHO8oxDcpob+NtN2W/ECO\nYfQWUgalbyzaIeHLZXzprLfAGEHFMA==\n=I8lP\n-----END PGP SIGNATURE-----",
        "payload": "tree 1b9f7989a3b4b4853cc068d0784fe305bc7c3084\nparent 2b8ab5584f2ebeb811888887ac300d92a76dacdd\nauthor Vasil Dimov <vd@FreeBSD.org> 1616077669 +0100\ncommitter Vasil Dimov <vd@FreeBSD.org> 1622477803 +0200\n\nnet: ignore ports when comparing some addresses (I2P)\n\nFrom our perspective ports are ignored when connecting to the I2P\nnetwork. I.e. `aaa.b32.i2p:1111` is the same as `aaa.b32.i2p:2222`,\nso compare them equal to avoid redundant connections to the same node if\nports happen to differ for some reason.\n\nFixes https://github.com/bitcoin/bitcoin/issues/21389\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/71a294d77d565da93b425359388d5ce0f17745c0",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/71a294d77d565da93b425359388d5ce0f17745c0",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/71a294d77d565da93b425359388d5ce0f17745c0/comments",
    "author": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "2b8ab5584f2ebeb811888887ac300d92a76dacdd",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2b8ab5584f2ebeb811888887ac300d92a76dacdd",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/2b8ab5584f2ebeb811888887ac300d92a76dacdd"
      }
    ],
    "stats": {
      "total": 28,
      "additions": 27,
      "deletions": 1
    },
    "files": [
      {
        "sha": "011db45d75b6cc8ea2ac7581ad07a3a98717cb77",
        "filename": "src/netaddress.cpp",
        "status": "modified",
        "additions": 7,
        "deletions": 1,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/71a294d77d565da93b425359388d5ce0f17745c0/src/netaddress.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/71a294d77d565da93b425359388d5ce0f17745c0/src/netaddress.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/netaddress.cpp?ref=71a294d77d565da93b425359388d5ce0f17745c0",
        "patch": "@@ -985,7 +985,13 @@ uint16_t CService::GetPort() const\n \n bool operator==(const CService& a, const CService& b)\n {\n-    return static_cast<CNetAddr>(a) == static_cast<CNetAddr>(b) && a.port == b.port;\n+    if (static_cast<CNetAddr>(a) != static_cast<CNetAddr>(b)) {\n+        return false;\n+    }\n+    if (UsesPorts(a.GetNetwork())) {\n+        return a.port == b.port;\n+    }\n+    return true;\n }\n \n /**"
      },
      {
        "sha": "f011832a3ea74bea13563e3a3af3c8aca5018f43",
        "filename": "src/netaddress.h",
        "status": "modified",
        "additions": 9,
        "deletions": 0,
        "changes": 9,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/71a294d77d565da93b425359388d5ce0f17745c0/src/netaddress.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/71a294d77d565da93b425359388d5ce0f17745c0/src/netaddress.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/netaddress.h?ref=71a294d77d565da93b425359388d5ce0f17745c0",
        "patch": "@@ -587,4 +587,13 @@ class CService : public CNetAddr\n \n bool SanityCheckASMap(const std::vector<bool>& asmap);\n \n+/**\n+ * Check if a given network uses ports in addition to addresses to identify peers.\n+ * The familiar concept of \"a TCP port 8333 in 1.2.3.4:8333\" does not apply to some\n+ * networks or at least in the way we use them.\n+ * @param[in] net The network to check.\n+ * @return true if ports are being used on the given network.\n+ */\n+static inline bool UsesPorts(Network net) { return net != NET_I2P; }\n+\n #endif // BITCOIN_NETADDRESS_H"
      },
      {
        "sha": "334bd7ea4da740c2ba6d18c0928eaab25e28425a",
        "filename": "src/test/netbase_tests.cpp",
        "status": "modified",
        "additions": 11,
        "deletions": 0,
        "changes": 11,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/71a294d77d565da93b425359388d5ce0f17745c0/src/test/netbase_tests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/71a294d77d565da93b425359388d5ce0f17745c0/src/test/netbase_tests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/netbase_tests.cpp?ref=71a294d77d565da93b425359388d5ce0f17745c0",
        "patch": "@@ -588,4 +588,15 @@ BOOST_AUTO_TEST_CASE(caddress_unserialize_v2)\n     BOOST_CHECK(fixture_addresses == addresses_unserialized);\n }\n \n+BOOST_AUTO_TEST_CASE(cservice_compare)\n+{\n+    BOOST_CHECK(LookupNumeric(\"1.1.1.1:555\") == LookupNumeric(\"1.1.1.1:555\"));\n+    BOOST_CHECK(LookupNumeric(\"1.1.1.1:555\") != LookupNumeric(\"1.1.1.1:666\"));\n+    BOOST_CHECK(LookupNumeric(\"1.1.1.1:555\") != LookupNumeric(\"2.2.2.2:555\"));\n+\n+    const std::string i2p_addr{\"ukeu3k5oycgaauneqgtnvselmt4yemvoilkln7jpvamvfx7dnkdq.b32.i2p\"};\n+    BOOST_CHECK(LookupNumeric(i2p_addr + \":555\") == LookupNumeric(i2p_addr + \":555\"));\n+    BOOST_CHECK(LookupNumeric(i2p_addr + \":555\") == LookupNumeric(i2p_addr + \":666\"));\n+}\n+\n BOOST_AUTO_TEST_SUITE_END()"
      }
    ]
  },
  {
    "sha": "2edbe032cf6cc57e320a16348fffaf83391b84df",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyZWRiZTAzMmNmNmNjNTdlMzIwYTE2MzQ4ZmZmYWY4MzM5MWI4NGRm",
    "commit": {
      "author": {
        "name": "Vasil Dimov",
        "email": "vd@FreeBSD.org",
        "date": "2021-03-18T14:30:52Z"
      },
      "committer": {
        "name": "Vasil Dimov",
        "email": "vd@FreeBSD.org",
        "date": "2021-05-31T16:16:44Z"
      },
      "message": "net: skip ports when generating string representations of some addresses\n\nSince ports are irrelevant in our usage of I2P, print just `aaa.b32.i2p`\ninstead of `aaa.b32.i2p:8333` when converting `CService` to string.",
      "tree": {
        "sha": "3ccc690d5710e00525753ac2459afd537b37f9d8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3ccc690d5710e00525753ac2459afd537b37f9d8"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2edbe032cf6cc57e320a16348fffaf83391b84df",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQQzBAABCAAdFiEE5k2NRWFNsHVF2czBVN8G9ktVy78FAmC1C+wACgkQVN8G9ktV\ny79POB//Ztk+yM0BdPg/DEUyv93Iq67g4nab694Gjk9MqzzCYXYBViu64T53EV9W\nqxkOTuyYgXNOHZudNBMpIvm46p5fWAI7fNRlRsUiFHkC49+DWjNCZZOXtLJTEbp3\nZ3GzDF3hdPgfxmT0sqrU0P5G9GH2DZb9Ya+O5UmygeMBLtoRmJszI+U1im+V9D2R\nmqi81lh8xY2SEwXmKKCVFn1DfBEb/Vs7lBruyp8gSi/aJsdfHc2pGaoFKN/r9etV\nGvYZUv/6NkfQVSYXQ6wy3SG84Nv1cO9oBB/DI9d4ER8UqNI3YbFgh7cYc1BoC6Hm\niIGrmqQMjlMeRyW8OOuzZ+uZi5tc8Vs6jZsGTGpsQpfJyd3GwGeV2teW2YZdKam7\nDDKEDyOR9qo+4j1i61QL3e4q4M0rXFhvstKCDf7i33SPC6qRphQkEQ7sva0TD+4I\n46W8fDSx0BE8mmu0GVLBQPTPY7ZqtnukXSTSTUYADcvpeAm19qsYl+jiJmnlLQAM\n6dIgCiatjdZRmiDZVjb5yCe1qYRy71HFitw3WjGiw/ktwnyI6nnOoYhiIwtoOTX4\n0w4jwODFBZgs7vqML+sxW5s81PhXYu5jcuNyEQAMU5kF5V1YfgAZHRSDiX+KktoC\nqUQbr6jXOBKuMJaY6bFvMW0XxyO4zp0iiiHnHTq8PVZGSvdKoEeQR/Yb0zycbua/\nB7RwAGOIZqLgbIZ5jO3XgllzPb8KXpPUCBm3tN11+dJcAy3s0qlxX3iQU8h9Qff4\ncV+/UC09Bpvh0VyzmzivbvQqqAS94PxqAm/gya4hcNipR+rUYiRWsin173v5iiSj\nS3EVGorp/9xNgl6SC2g+627CzddFWpp2kfFTlOywGnuRI7vEk2vV/v7gIeeNtjqe\nJWvbLu8Uaw0KNJyYC7rpOeeHnxc8G1leiKgaXOI8RPnkxZAOeN7uRIdMkzvB2kn8\n4Ti/ZoJRo02BrlTnsADwOHHO8ZSnqdA7kfJa22JpT3yJCpRHnDbM4PRqQC/hnI8S\nLsy6g9jGrT+l3PNjIz8Qw7hDhnqSk8jUMKIGY8f8KVJMxpKkGWqLZtrfXPngpOm3\nHSilL/RYgtgHSYhX+od1AP3Ueo5bfMvS/L6qIJ7WuvCNwLCaFIqUCSpkqlrLFN62\n8R3Y8gq6A1Zk3Fq3eNjbHXMDb5SLJ20ehkPyQqD3en6gDU9ugJGmWp1EmxB1zx4X\nUEY7HSpBvJ4yJ2fPqBWqPXRr9ddfNWSa1Lrbw3K4Gllmzp9PuhAVjLinPLDQLug/\nwYN3fSj07oCksz0sj6DVFaEgDgI1ZbyS8MBR3mDOHXfdy0AyGbXeqFK9kR4McdkR\nSqLPfaykj3+koxnWVtF4nDxPv+u4NA==\n=UFOa\n-----END PGP SIGNATURE-----",
        "payload": "tree 3ccc690d5710e00525753ac2459afd537b37f9d8\nparent 71a294d77d565da93b425359388d5ce0f17745c0\nauthor Vasil Dimov <vd@FreeBSD.org> 1616077852 +0100\ncommitter Vasil Dimov <vd@FreeBSD.org> 1622477804 +0200\n\nnet: skip ports when generating string representations of some addresses\n\nSince ports are irrelevant in our usage of I2P, print just `aaa.b32.i2p`\ninstead of `aaa.b32.i2p:8333` when converting `CService` to string.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2edbe032cf6cc57e320a16348fffaf83391b84df",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/2edbe032cf6cc57e320a16348fffaf83391b84df",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2edbe032cf6cc57e320a16348fffaf83391b84df/comments",
    "author": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "71a294d77d565da93b425359388d5ce0f17745c0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/71a294d77d565da93b425359388d5ce0f17745c0",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/71a294d77d565da93b425359388d5ce0f17745c0"
      }
    ],
    "stats": {
      "total": 9,
      "additions": 8,
      "deletions": 1
    },
    "files": [
      {
        "sha": "58c74ae13aef54f79db1bd8cb7dd7e26b6067ce8",
        "filename": "src/netaddress.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 1,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2edbe032cf6cc57e320a16348fffaf83391b84df/src/netaddress.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2edbe032cf6cc57e320a16348fffaf83391b84df/src/netaddress.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/netaddress.cpp?ref=2edbe032cf6cc57e320a16348fffaf83391b84df",
        "patch": "@@ -1054,7 +1054,9 @@ std::string CService::ToStringPort() const\n \n std::string CService::ToStringIPPort() const\n {\n-    if (IsIPv4() || IsTor() || IsI2P() || IsInternal()) {\n+    if (!UsesPorts(GetNetwork())) {\n+        return ToStringIP();\n+    } else if (IsIPv4() || IsTor() || IsInternal()) {\n         return ToStringIP() + \":\" + ToStringPort();\n     } else {\n         return \"[\" + ToStringIP() + \"]:\" + ToStringPort();"
      },
      {
        "sha": "fd36d6d7fed5b90037a4b41987c45dcbd8eda457",
        "filename": "src/test/netbase_tests.cpp",
        "status": "modified",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2edbe032cf6cc57e320a16348fffaf83391b84df/src/test/netbase_tests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2edbe032cf6cc57e320a16348fffaf83391b84df/src/test/netbase_tests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/netbase_tests.cpp?ref=2edbe032cf6cc57e320a16348fffaf83391b84df",
        "patch": "@@ -131,6 +131,11 @@ BOOST_AUTO_TEST_CASE(netbase_lookupnumeric)\n     BOOST_CHECK(TestParse(\"[fd6b:88c0:8724:1:2:3:4:5]\", \"[::]:0\"));\n     // and that a one-off resolves correctly\n     BOOST_CHECK(TestParse(\"[fd6c:88c0:8724:1:2:3:4:5]\", \"[fd6c:88c0:8724:1:2:3:4:5]:65535\"));\n+\n+    // I2P skips the port.\n+    const std::string i2p_addr{\"ukeu3k5oycgaauneqgtnvselmt4yemvoilkln7jpvamvfx7dnkdq.b32.i2p\"};\n+    BOOST_CHECK(TestParse(i2p_addr, i2p_addr));\n+    BOOST_CHECK(TestParse(i2p_addr + \":8333\", i2p_addr));\n }\n \n BOOST_AUTO_TEST_CASE(onioncat_test)"
      }
    ]
  },
  {
    "sha": "5ab2683f15383360aec84af2fcd67faa6ea03b4d",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo1YWIyNjgzZjE1MzgzMzYwYWVjODRhZjJmY2Q2N2ZhYTZlYTAzYjRk",
    "commit": {
      "author": {
        "name": "Vasil Dimov",
        "email": "vd@FreeBSD.org",
        "date": "2021-03-22T16:13:13Z"
      },
      "committer": {
        "name": "Vasil Dimov",
        "email": "vd@FreeBSD.org",
        "date": "2021-05-31T16:16:44Z"
      },
      "message": "net: add a helper to remove ports from string addresses if irrelevant",
      "tree": {
        "sha": "6f4a74dbf1bc669c11529f0bb6679f9f2b242487",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6f4a74dbf1bc669c11529f0bb6679f9f2b242487"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5ab2683f15383360aec84af2fcd67faa6ea03b4d",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQQzBAABCAAdFiEE5k2NRWFNsHVF2czBVN8G9ktVy78FAmC1C+0ACgkQVN8G9ktV\ny7/IaR//WIcgmgwm0Et2i8qFWHW6GoUa8c0t+7s9P2e9xVm9uzQHC4z477qg8nDy\nE/E27Iq8yD7wqd44pFIg+OJEyL0vpe11jBX8Rb1FcgfRgf5hKQp8ZFusQ7a/4Pw/\nx2oegxLkWp1YgP0jCplAJm+uHjtX/R+HKtaQnAVcKOH6dR59iBGwhwZhreNsbhoJ\n7JMnzzfiYhjVAdZRY4OFeowfhrW6jLIo0W/BEik5Byx4QelwsjX/EvGpbFds3W0K\n5mQeAZxCvLKiGIzQ8n4mlMaHc+pIww2aDFdvtJcr0nkwcrmZ5P6VS/1sdaQ8a64I\nxQ0X7m/DzvfGq68Jl1YjM0qKg7mLOgV2TKBiMeAEHoRnZ7DH76LsoOJeoZzvkJhZ\ncpykMcTIRa7nz0jwSShYYxB5tRHlPFG+v/4/4y2VihSdo1dLxhjvSXHo5oBWPYpT\nEChATah+q0hZkH2WGraZwDSKDk6C3RcJox2U2Ow6pYmWRuLq8WoqayLilqkeZz4v\ntJNtKAKzuOELZkK3GbYnxCSSJefcbJsQJkoFCvNSYb1QYOfKYpVYvXZOex5DY9P2\n9R/g1iUCMixI2jZqsLZDKZm7/WQRwlrJPSLoUe1uaIMQZcNMGcWyW/6asm6LU56u\nkZQoRWkQE6lA4ZrEpavTlE5ovzDseKrxlbLLNXhioyITHWIGIygrv46uw0sbIGa2\n8+B3sqGCayhVYMSEkKVMUJgvgu6iZHUlm3XtpSPU1QvPc8L4vr7ujUb/vURbREfl\nZtGAOcRQqRf+7qOqtp8nb5R9vZTYR7JBVlu7fN8h3W3oy3en6Fw1Qr/lVyFDY229\npzbZ+pmEF8oDxVzu9Bd32JOZnz3JluHl6nleJp1v3hwiaSXJlg20gPz7VVO0N+d+\nZt5DhP9NWJlULRJUVnVVzhFVH2+vabumyII1103aKyyK4WthaZ59e+7wkjYBGPNj\nNxBsdqhawrNJefmyuudFCPwtblHWk/rq+yY1Tj5RMWokj0Guvun86WEP/0jDA6hs\nQ85s6/H1q4cf217iC2EksfHPSE1iALLwGKzpHqaq+yM2ekgIx0YficLWziRtzRJ/\n8TbN/hPddrAvbMIKKPGnY0DQClaTEbi6YcL7brC+0pMFdwe/gKMV8nqKWi/nUXc1\n9Po/s+0OlZWKGDYnJ7PJnW8EiXXQDq0fYTGxsSnpMW08veZj2zQcYFbtUYBoJWGu\nJTrMA/To6gBVgBcynR/nzd67WbFWwC6luqItotHu2dPRIllt6EgowWkm5XT53YYI\nMhw4Q+kijVS/Xnfd0zu/13roTXbvIm5I4D5JCt460OxpdN1jLni2P3RLyUluKifE\n6YTutM+mUJ84gP5BoMAmg6aBgDhaaQ==\n=cH8m\n-----END PGP SIGNATURE-----",
        "payload": "tree 6f4a74dbf1bc669c11529f0bb6679f9f2b242487\nparent 2edbe032cf6cc57e320a16348fffaf83391b84df\nauthor Vasil Dimov <vd@FreeBSD.org> 1616429593 +0100\ncommitter Vasil Dimov <vd@FreeBSD.org> 1622477804 +0200\n\nnet: add a helper to remove ports from string addresses if irrelevant\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5ab2683f15383360aec84af2fcd67faa6ea03b4d",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/5ab2683f15383360aec84af2fcd67faa6ea03b4d",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5ab2683f15383360aec84af2fcd67faa6ea03b4d/comments",
    "author": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "2edbe032cf6cc57e320a16348fffaf83391b84df",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2edbe032cf6cc57e320a16348fffaf83391b84df",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/2edbe032cf6cc57e320a16348fffaf83391b84df"
      }
    ],
    "stats": {
      "total": 59,
      "additions": 59,
      "deletions": 0
    },
    "files": [
      {
        "sha": "31bd15e887864cd6ab3be0d4825a38d748f4ecf4",
        "filename": "src/netbase.cpp",
        "status": "modified",
        "additions": 25,
        "deletions": 0,
        "changes": 25,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5ab2683f15383360aec84af2fcd67faa6ea03b4d/src/netbase.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5ab2683f15383360aec84af2fcd67faa6ea03b4d/src/netbase.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/netbase.cpp?ref=5ab2683f15383360aec84af2fcd67faa6ea03b4d",
        "patch": "@@ -754,3 +754,28 @@ void InterruptSocks5(bool interrupt)\n {\n     interruptSocks5Recv = interrupt;\n }\n+\n+std::string RemovePortIfIrrelevant(const std::string& addr)\n+{\n+    uint16_t port{0};\n+    std::string addr_without_port;\n+\n+    SplitHostPort(addr, port, addr_without_port);\n+\n+    std::vector<CNetAddr> net_addr;\n+    if (port > 0 && LookupIntern(addr_without_port, net_addr, 1, false, g_dns_lookup) &&\n+        !UsesPorts(net_addr.at(0).GetNetwork())) {\n+        return addr_without_port;\n+    }\n+    return addr;\n+}\n+\n+std::vector<std::string> RemovePortIfIrrelevant(const std::vector<std::string>& addresses)\n+{\n+    std::vector<std::string> ret;\n+    ret.reserve(addresses.size());\n+    for (const auto& addr : addresses) {\n+        ret.emplace_back(RemovePortIfIrrelevant(addr));\n+    }\n+    return ret;\n+}"
      },
      {
        "sha": "d4350e864ddb5fc0ddccfadc932ff693a387c7b1",
        "filename": "src/netbase.h",
        "status": "modified",
        "additions": 9,
        "deletions": 0,
        "changes": 9,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5ab2683f15383360aec84af2fcd67faa6ea03b4d/src/netbase.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5ab2683f15383360aec84af2fcd67faa6ea03b4d/src/netbase.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/netbase.h?ref=5ab2683f15383360aec84af2fcd67faa6ea03b4d",
        "patch": "@@ -246,4 +246,13 @@ void InterruptSocks5(bool interrupt);\n  */\n bool Socks5(const std::string& strDest, uint16_t port, const ProxyCredentials* auth, const Sock& socket);\n \n+/**\n+ * Remove the trailing `:port` (if any) if the network of the address does not use ports.\n+ * @param[in] addr Address in human readable form, possibly followed by `:port`.\n+ * @return `addr` if ports are relevant or `addr` without the `:port`.\n+ */\n+std::string RemovePortIfIrrelevant(const std::string& addr);\n+\n+std::vector<std::string> RemovePortIfIrrelevant(const std::vector<std::string>& addresses);\n+\n #endif // BITCOIN_NETBASE_H"
      },
      {
        "sha": "1a31becfb28655a7bf21462e08746c6e2252c55e",
        "filename": "src/test/netbase_tests.cpp",
        "status": "modified",
        "additions": 25,
        "deletions": 0,
        "changes": 25,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5ab2683f15383360aec84af2fcd67faa6ea03b4d/src/test/netbase_tests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5ab2683f15383360aec84af2fcd67faa6ea03b4d/src/test/netbase_tests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/netbase_tests.cpp?ref=5ab2683f15383360aec84af2fcd67faa6ea03b4d",
        "patch": "@@ -604,4 +604,29 @@ BOOST_AUTO_TEST_CASE(cservice_compare)\n     BOOST_CHECK(LookupNumeric(i2p_addr + \":555\") == LookupNumeric(i2p_addr + \":666\"));\n }\n \n+BOOST_AUTO_TEST_CASE(remove_port_if_irrelevant)\n+{\n+    const std::string i2p_addr{\"ukeu3k5oycgaauneqgtnvselmt4yemvoilkln7jpvamvfx7dnkdq.b32.i2p\"};\n+    BOOST_CHECK_EQUAL(RemovePortIfIrrelevant(i2p_addr + \":4444\"), i2p_addr);\n+\n+    const std::vector<std::string> addresses{{\n+         \"1.2.3.4\",\n+         \"1.2.3.4:5678\",\n+         \"[1:2::3:4]:5678\",\n+         \"pg6mmjiyjmcrsslvykfwnntlaru7p5svn6y2ymmju6nubxndf4pscryd.onion\",\n+         \"pg6mmjiyjmcrsslvykfwnntlaru7p5svn6y2ymmju6nubxndf4pscryd.onion:1111\",\n+         \"ukeu3k5oycgaauneqgtnvselmt4yemvoilkln7jpvamvfx7dnkdq.b32.i2p\",\n+    }};\n+\n+    for (const auto& addr : addresses) {\n+        BOOST_CHECK_EQUAL(RemovePortIfIrrelevant(addr), addr);\n+    }\n+\n+    const auto& addresses_ports_removed = RemovePortIfIrrelevant(addresses);\n+    BOOST_REQUIRE_EQUAL(addresses_ports_removed.size(), addresses.size());\n+    for (size_t i = 0; i < addresses.size(); ++i) {\n+        BOOST_CHECK_EQUAL(addresses_ports_removed[i], addresses[i]);\n+    }\n+}\n+\n BOOST_AUTO_TEST_SUITE_END()"
      }
    ]
  },
  {
    "sha": "03356556dada92d1c9c4143fdbb82184aaeb5431",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowMzM1NjU1NmRhZGE5MmQxYzljNDE0M2ZkYmI4MjE4NGFhZWI1NDMx",
    "commit": {
      "author": {
        "name": "Vasil Dimov",
        "email": "vd@FreeBSD.org",
        "date": "2021-03-22T16:35:36Z"
      },
      "committer": {
        "name": "Vasil Dimov",
        "email": "vd@FreeBSD.org",
        "date": "2021-05-31T16:16:45Z"
      },
      "message": "net: possibly strip ports from addresses passed to -connect and -addnode\n\nThis makes printing to the log proper (without ports for I2P addresses).",
      "tree": {
        "sha": "594764f1bd3c95fa1b3720170a1a7cbd5257d9d5",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/594764f1bd3c95fa1b3720170a1a7cbd5257d9d5"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/03356556dada92d1c9c4143fdbb82184aaeb5431",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQQzBAABCAAdFiEE5k2NRWFNsHVF2czBVN8G9ktVy78FAmC1C+0ACgkQVN8G9ktV\ny7/6MB/+L7JxXUSRLAJrXnetd4UkGCpXVyKITOX9deTKDCIrOEDVItFISoMp2ZK5\negSDM0Rbu9AZJdTW3atzOzEc0QbW6MQLoiRdHyK4qtSU75j5CVMY/mC1sHeqHsVt\nC1kYQYXYA2RbgGJJyOZfqEjwaB97Z/Gsep27om86kOUcMD6aX/H8fDNmFf/ZGY9q\nIUwI5bfIbbTIny7AbqkQaG6wzvUZ/G4mGeBLLRtM/LoX4jrkZzT8IQCFEEc9L2vE\n1+zyJTNB5Pe0IruVWiikJ2P88US/84pl0hnIoe0a0n8Alid1cOd+t9NAOh/qGO2k\nTLZ9dD0isbyQYqpPhSMkTlrMxcVHqM3yiTB257onC5LN18K2fPaAk7lZpXz4xqKN\ny+qfa0kqGGSClxwoGoFLTt5Rc4HAaYnONAoByNaIfLdGkmQxUVEbCBtjY3WxZ+5B\nhypZc82gRgYjW3SVaRPQKO5u/W2yVrtv4ArcGwFugA5auAYrnqc4hFu/UFLvVA7C\n92V3z1mSleHxRoWFS3zELjVoNOrczgrN1OTa5eXIfwOSiNzj+gXktGRlRIAby3M3\nFAGkPt0GZ3dE4TgDT0ELNgNxGsAS5ouSVJXAcesi+P+Njbjf61suwArO8aA7qbni\n6C86MGMp6larcNGIFBai2PZYDgAdW2En1Tcyc+1ypEp/mZQFMZIJ8SWmTvHlqmC0\nUHm+QI+jxd2QWC9vl8Q7Uci2NFT5P7ZtTJ+MbGl9O58kCUc5l8X854gVUh4Dz9Rw\nQrdPM6Qyfvf73k5tK06nSVqdl/vSljxGogGp6DpCUbLgjClb9ATWTJrGrta87v34\ntac7DBzmfx/zvEte1wptgvuBsu8ehJqd1G9mak7WTTKJ+K8QnW6uVW43hjQLsg+B\njr0fgFpgtMKylNr6snzLfpO4qz3hIKs/BPHr2wgp2t1oJK/c4A37VG2VjzbBENec\n5qpM/POA+a9PDarRZlkwjYO050INq5RiiaCnTKHgxjBYuOT+w6aZlrfQ1dud6CqQ\nHH7fYIq5mSNehnp7dozb93ZogpXMIe23/q6e4LVV5OHFheH1v5f1ax09kV8vk1mP\nrdQ+BCpFfbSv2p0Bgwz2reqAPgK1KN2qiWL3TqMGi3zOfB5J10C+DBhFQjr3Qmpx\nB9DEm2UArdP4MSadW5KZ4Wj503yzNhUTvik1pS3HcLZWtlRhTX5qFPBOFArbgNuV\nvIITRAD+XYMN7UX3H/IJqOR5zRsfR42Q5S00drkg+fFQ1mkChKEEhvAcasqsHXkB\n5rGKFShPyDKsxt0gaLWkaE+7pqhPrYUV+w57ycXpnAhjOg+yMU9szrIy9rC4KAEE\n+GDfiqeEm2nCqtzNzbo5jNckT3a7Yw==\n=V75C\n-----END PGP SIGNATURE-----",
        "payload": "tree 594764f1bd3c95fa1b3720170a1a7cbd5257d9d5\nparent 5ab2683f15383360aec84af2fcd67faa6ea03b4d\nauthor Vasil Dimov <vd@FreeBSD.org> 1616430936 +0100\ncommitter Vasil Dimov <vd@FreeBSD.org> 1622477805 +0200\n\nnet: possibly strip ports from addresses passed to -connect and -addnode\n\nThis makes printing to the log proper (without ports for I2P addresses).\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/03356556dada92d1c9c4143fdbb82184aaeb5431",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/03356556dada92d1c9c4143fdbb82184aaeb5431",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/03356556dada92d1c9c4143fdbb82184aaeb5431/comments",
    "author": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "5ab2683f15383360aec84af2fcd67faa6ea03b4d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5ab2683f15383360aec84af2fcd67faa6ea03b4d",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/5ab2683f15383360aec84af2fcd67faa6ea03b4d"
      }
    ],
    "stats": {
      "total": 16,
      "additions": 14,
      "deletions": 2
    },
    "files": [
      {
        "sha": "c6bb8631668029deaf1dd6c5c4799bb0eb06f51c",
        "filename": "src/init.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/03356556dada92d1c9c4143fdbb82184aaeb5431/src/init.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/03356556dada92d1c9c4143fdbb82184aaeb5431/src/init.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/init.cpp?ref=03356556dada92d1c9c4143fdbb82184aaeb5431",
        "patch": "@@ -1694,7 +1694,7 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     connOptions.m_msgproc = node.peerman.get();\n     connOptions.nSendBufferMaxSize = 1000 * args.GetArg(\"-maxsendbuffer\", DEFAULT_MAXSENDBUFFER);\n     connOptions.nReceiveFloodSize = 1000 * args.GetArg(\"-maxreceivebuffer\", DEFAULT_MAXRECEIVEBUFFER);\n-    connOptions.m_added_nodes = args.GetArgs(\"-addnode\");\n+    connOptions.m_added_nodes = RemovePortIfIrrelevant(args.GetArgs(\"-addnode\"));\n \n     connOptions.nMaxOutboundLimit = 1024 * 1024 * args.GetArg(\"-maxuploadtarget\", DEFAULT_MAX_UPLOAD_TARGET);\n     connOptions.m_peer_connect_timeout = peer_connect_timeout;\n@@ -1753,7 +1753,7 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     if (!connOptions.m_use_addrman_outgoing) {\n         const auto connect = args.GetArgs(\"-connect\");\n         if (connect.size() != 1 || connect[0] != \"0\") {\n-            connOptions.m_specified_outgoing = connect;\n+            connOptions.m_specified_outgoing = RemovePortIfIrrelevant(connect);\n         }\n     }\n "
      },
      {
        "sha": "79f73a27ca75a116a62f536cd238e28fcfc3974c",
        "filename": "test/functional/feature_config_args.py",
        "status": "modified",
        "additions": 12,
        "deletions": 0,
        "changes": 12,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/03356556dada92d1c9c4143fdbb82184aaeb5431/test/functional/feature_config_args.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/03356556dada92d1c9c4143fdbb82184aaeb5431/test/functional/feature_config_args.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/feature_config_args.py?ref=03356556dada92d1c9c4143fdbb82184aaeb5431",
        "patch": "@@ -215,11 +215,23 @@ def test_seed_peers(self):\n         ]):\n             self.nodes[0].setmocktime(start + 65)\n \n+    def test_addnode_and_connect_i2p(self):\n+        self.log.info('Test ports are removed from I2P addresses passed to -addnode/-connect')\n+\n+        i2p_addr = \"ukeu3k5oycgaauneqgtnvselmt4yemvoilkln7jpvamvfx7dnkdq.b32.i2p\"\n+        i2p_addr_with_port = i2p_addr + \":3333\"\n+\n+        msg = f\"trying connection {i2p_addr} lastseen=\"\n+        for option in [\"addnode\", \"connect\"]:\n+            with self.nodes[0].assert_debug_log(expected_msgs=[msg]):\n+                self.restart_node(0, extra_args=[f\"-{option}={i2p_addr_with_port}\"])\n+\n     def run_test(self):\n         self.test_log_buffer()\n         self.test_args_log()\n         self.test_seed_peers()\n         self.test_networkactive()\n+        self.test_addnode_and_connect_i2p()\n \n         self.test_config_file_parser()\n         self.test_invalid_command_line_options()"
      }
    ]
  },
  {
    "sha": "63b80cc5d21fbbc5743fcda80f7e8b1665d7f52f",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo2M2I4MGNjNWQyMWZiYmM1NzQzZmNkYTgwZjdlOGIxNjY1ZDdmNTJm",
    "commit": {
      "author": {
        "name": "Vasil Dimov",
        "email": "vd@FreeBSD.org",
        "date": "2021-03-22T16:38:43Z"
      },
      "committer": {
        "name": "Vasil Dimov",
        "email": "vd@FreeBSD.org",
        "date": "2021-05-31T16:17:49Z"
      },
      "message": "rpc: possibly strip ports from arguments to addnode & addconnection RPCs\n\nThis makes printing to the log proper (without ports for I2P addresses)\nand also discovers duplicates earlier in `CConnman::AddNode()`.",
      "tree": {
        "sha": "7ef43f2f06fd44ba67a76ba780321b2a1c441a12",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7ef43f2f06fd44ba67a76ba780321b2a1c441a12"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/63b80cc5d21fbbc5743fcda80f7e8b1665d7f52f",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQQzBAABCAAdFiEE5k2NRWFNsHVF2czBVN8G9ktVy78FAmC1DC8ACgkQVN8G9ktV\ny7+U1B/9H/WzYwUhcuRMILJJcSrcpifzGFp8u0uy5twhabSb3u4VHjmzs/s2JRVk\nw8FnHY+awj26mJPfkCkRvo0HPtVuRB0nulrjbQ7Y8+O/irDHaAgsDUPJMy3EJYi6\nFaolgD9IFxQkbuueICNnr1pwV568+QAY15dERe804In4tMJgNSe2aSin/FHYuk3G\njDyDroM8dhpEdnmV3oWhMBK4zqY9KWgAgivqrpx/X/E1hQXy5tBz1oFayp+Xwd4o\nPTOAdkZmP+SswGDdbPzDgcDA19LNiLQWLbGD97LH/784AdSTOmwShJWdsXevGzai\nF0VGpCzt1h/sQ1hCZjuD2y9zbx2LlURP4B2uoj0soU610mgXUytj14fZKYqv74Od\n1QwjKNu3ZzBizmXYZVlgaF5UxwMsLTRdqxMyPSGQi4yp4vZyDk8AMpcUa1OgT4w5\nOPKkye3yArDk60MQrtSeQej3C161wfXEuSip6SQ+EU+mrEr15VWhBUMkh+zAc3Px\n47p79X2ujqlIG2mxTje40pebRF91BhwwBifm0BfogTMI8jeUd55MivLcznY6vCEQ\na52CgXYM0f4lV86t0EAfoqd+M2UwF8RliVeIEL6ujrVTanuP1iC1LQgd/nFhYIpz\nZ24iDPhxdFJgqJappqyxO4FU8j0V6CiY0PZnmDvI9bVny0j1pY621oQlybYLpund\ntLvKV+OazMDq6aR84cJniim5fCA3mrWO+IR9Juo/BhPRypT+RoyOhFH7JkdOkgta\nafVYK9lt7aXXjngXwXVG9zhTc2Py6yaUmDk6lE/t71WTwOxboe9Tatg6z+BYKGiv\nyKZM/2l8tT3TiYBQ09hXWvddbufKNqT+Cm07YoP3nPV64V0PxqZxTf+Ax3phlYQE\nooJE+vJR8MEprKLJoR/9Lxq1tTXGGHM2THsn+3dWFQQ/cz0l1CWedJ57oQsBZ9oh\n9zvzIQtn82YFooODlt6GzcBYK+jkxb1wvv7CZ8gTfCx5brriQsywjIVDggeMVXIu\n9bqUAuK/PiAuT+kvwhL8Enk2Sk01/RQpDwR+pnw6KIdxHLxi6ddIvfVmdwqKkMSa\nhJC69YkH3dqyoP+7sWAf7gefwlrD/VCDdLE3P+FE4As4KlrAJeONTRIpMEvcu/fg\n0qHkIZUsZnCx5GFQZkRUb/XtpxWIRTZwj1jm1q6eEJ0woa+GliTlAvvpYr6K5AbF\ns+luLADmcF5zQRradfcLObersNZh/Juuf4I/Wdbv/jK/d9Yw4s2z8thfQTWDjbWM\nZca+jduzmfiifjUwOvC+rc6fGYka9oAdXdET/07ANjYMjlxoyDP8OvMgG5R9h9CS\naAAYRCgYg+LHXfu6umS41Mez62oyVA==\n=loYI\n-----END PGP SIGNATURE-----",
        "payload": "tree 7ef43f2f06fd44ba67a76ba780321b2a1c441a12\nparent 03356556dada92d1c9c4143fdbb82184aaeb5431\nauthor Vasil Dimov <vd@FreeBSD.org> 1616431123 +0100\ncommitter Vasil Dimov <vd@FreeBSD.org> 1622477869 +0200\n\nrpc: possibly strip ports from arguments to addnode & addconnection RPCs\n\nThis makes printing to the log proper (without ports for I2P addresses)\nand also discovers duplicates earlier in `CConnman::AddNode()`.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/63b80cc5d21fbbc5743fcda80f7e8b1665d7f52f",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/63b80cc5d21fbbc5743fcda80f7e8b1665d7f52f",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/63b80cc5d21fbbc5743fcda80f7e8b1665d7f52f/comments",
    "author": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "03356556dada92d1c9c4143fdbb82184aaeb5431",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/03356556dada92d1c9c4143fdbb82184aaeb5431",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/03356556dada92d1c9c4143fdbb82184aaeb5431"
      }
    ],
    "stats": {
      "total": 27,
      "additions": 25,
      "deletions": 2
    },
    "files": [
      {
        "sha": "699f81846d8b5a54ecaf8a9824a581df07399624",
        "filename": "src/rpc/net.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 2,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/63b80cc5d21fbbc5743fcda80f7e8b1665d7f52f/src/rpc/net.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/63b80cc5d21fbbc5743fcda80f7e8b1665d7f52f/src/rpc/net.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/net.cpp?ref=63b80cc5d21fbbc5743fcda80f7e8b1665d7f52f",
        "patch": "@@ -12,6 +12,7 @@\n #include <net_permissions.h>\n #include <net_processing.h>\n #include <net_types.h> // For banmap_t\n+#include <netaddress.h>\n #include <netbase.h>\n #include <node/context.h>\n #include <policy/settings.h>\n@@ -304,7 +305,7 @@ static RPCHelpMan addnode()\n     NodeContext& node = EnsureAnyNodeContext(request.context);\n     CConnman& connman = EnsureConnman(node);\n \n-    std::string strNode = request.params[0].get_str();\n+    std::string strNode = RemovePortIfIrrelevant(request.params[0].get_str());\n \n     if (strCommand == \"onetry\")\n     {\n@@ -356,7 +357,7 @@ static RPCHelpMan addconnection()\n     }\n \n     RPCTypeCheck(request.params, {UniValue::VSTR, UniValue::VSTR});\n-    const std::string address = request.params[0].get_str();\n+    const std::string address = RemovePortIfIrrelevant(request.params[0].get_str());\n     const std::string conn_type_in{TrimString(request.params[1].get_str())};\n     ConnectionType conn_type{};\n     if (conn_type_in == \"outbound-full-relay\") {"
      },
      {
        "sha": "63553a42b4ee954df94e8b27571558f970f25bc6",
        "filename": "test/functional/rpc_net.py",
        "status": "modified",
        "additions": 22,
        "deletions": 0,
        "changes": 22,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/63b80cc5d21fbbc5743fcda80f7e8b1665d7f52f/test/functional/rpc_net.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/63b80cc5d21fbbc5743fcda80f7e8b1665d7f52f/test/functional/rpc_net.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/rpc_net.py?ref=63b80cc5d21fbbc5743fcda80f7e8b1665d7f52f",
        "patch": "@@ -71,6 +71,7 @@ def run_test(self):\n         self.test_service_flags()\n         self.test_getnodeaddresses()\n         self.test_addpeeraddress()\n+        self.test_dedup_i2p_on_port()\n \n     def test_connection_count(self):\n         self.log.info(\"Test getconnectioncount\")\n@@ -262,6 +263,27 @@ def test_addpeeraddress(self):\n         assert_equal(node.addpeeraddress(address=\"1.2.3.4\", port=8333), {\"success\": False})\n         assert_equal(len(node.getnodeaddresses(count=0)), 1)\n \n+    def test_dedup_i2p_on_port(self):\n+        node = self.nodes[0]\n+        self.log.info(\"Test that ports are ignored for I2P addresses\")\n+        assert_equal(node.getaddednodeinfo(), [])\n+        i2p_addr = \"ukeu3k5oycgaauneqgtnvselmt4yemvoilkln7jpvamvfx7dnkdq.b32.i2p\"\n+        i2p_addr_port1 = f\"{i2p_addr}:1111\"\n+        i2p_addr_port2 = f\"{i2p_addr}:2222\"\n+        node.addnode(node=i2p_addr_port1, command='add')\n+        # Check that the address has been added without the port.\n+        added_nodes = node.getaddednodeinfo(i2p_addr)\n+        assert_equal(len(added_nodes), 1)\n+        assert_equal(added_nodes[0]['addednode'], i2p_addr)\n+        # Check that the address cannot be added again even if the port is different.\n+        assert_raises_rpc_error(-23, \"Node already added\", node.addnode, node=i2p_addr_port2, command='add')\n+        node.addnode(node=i2p_addr, command='remove')\n+        assert_equal(node.getaddednodeinfo(), [])\n+\n+        # The I2P address should be printed without the port to the log.\n+        with node.assert_debug_log(f\"trying connection {i2p_addr} lastseen=\"):\n+            node.addnode(node=i2p_addr_port1, command='onetry')\n+\n \n if __name__ == '__main__':\n     NetTest().main()"
      }
    ]
  },
  {
    "sha": "75adc00b8b787cb60e3fcf55ad961fb4bb1f248a",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo3NWFkYzAwYjhiNzg3Y2I2MGUzZmNmNTVhZDk2MWZiNGJiMWYyNDhh",
    "commit": {
      "author": {
        "name": "Vasil Dimov",
        "email": "vd@FreeBSD.org",
        "date": "2021-03-22T16:41:33Z"
      },
      "committer": {
        "name": "Vasil Dimov",
        "email": "vd@FreeBSD.org",
        "date": "2021-05-31T16:17:51Z"
      },
      "message": "net: CConnman::FindNode(): ignore ports for some addresses\n\nFor networks that do not use ports (e.g. I2P), remove the `:port`\nsuffix (if any) when searching for an address by string.",
      "tree": {
        "sha": "ce7cef9519b6ef6b0fd491e0667d42fa5a9b7746",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ce7cef9519b6ef6b0fd491e0667d42fa5a9b7746"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/75adc00b8b787cb60e3fcf55ad961fb4bb1f248a",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQQzBAABCAAdFiEE5k2NRWFNsHVF2czBVN8G9ktVy78FAmC1DDAACgkQVN8G9ktV\ny7+deCAAngEcUJY0lMnRlO4YdqiNwzTQS3GzH9HkAmU/G7Od4pywtiWg2F7JL0kt\n8Sh0S6iHSZBErtrsLRow1MdJUexa7DpPfTzG03j35/tu477bfDr92AMjkekcU8xC\nFsoMQgPmgOOwA4aRUy9b5/0mNfFBCoCLV5CKw3d8M90JARuLGEKM5noT71/dF43Q\na00akDOJpENp/E6DAg3NZSdevTRc+mKbgC9eZXavl1/l3jB0dkABGtHPBy9zsWSg\n15sYyAIZ+4UekBLk7ut2GENv3rs+g748tCUfYfvrKm9p4d7oBNm8MxtCnTlvIvdJ\no12Tt0r/aPBJLKh99hwAGLxDPFKuPg3Fq8hgNSBz5rtY/DnDR9tcyQ+q0QdTML1t\n0Ova07yRVV7bccrscnquMVvJAjjZQnPDn6rU+qSuuSAkO4CCr/CIGbEF1ffOpXit\nPID60SFRM42z5D3kFqwemu3E9jQAmDgm+Hu4qA4CwBGggrNCxHNEFxG9/lCazg62\nBKEY2wX8pzzIWU0BvAI+unwYX8Zv368aLxMX7dvgfJdtjEuBpaBOrxww5rDdyYYY\n29BQPdbe7ss9BzMKGWEtzeAt2KKwi9ouFaooiudog416bKYOJosSLracKb/1dYUZ\nNQFocBNPuwDH62rYtXNhuld9bypcOg9BTMXjTLC+P7b7lSImjmmi82VzLbli++Gv\nAIsW9itb8v1+VzyN7xEJs1YZIZuJOoFFs2Qw71nH4SF1Sjbyhv/PDXPn0j2KLRya\nuU2MFmYQmBZGbBs19Agk7Tsek+UzrtXbeK4gmiqdH4uGQDRyspJ+iUpwDVEw5lL8\n88zEAwVFWWbO5TTjplFALBHrtZa6AX38MrVEQjn7Am2zLt5tsfuEgruI8HjWHd59\nUhmoaxOVT5L2hIKZEdIFhVSRCgHrOY3gjW1MYRUU2CRA+8nxJ/DUH7nKgTNxiwjC\nRbrEiqR0vRwW2pvUj8Gx+bqK56IThuqB9EsRD1De6RCRIHDqzSRls3fWCmNcp6ui\noQ9PkHs0BctU8oDokOY2Jrvjjf15ATFV3sVd7FryIE7kF3xc3lBoMKz5piedDCDv\nJqlWt/vfYJAvjg7pbmPFi6DwLNSQwDxJtX1O/8Lm0Q8gPaT1u7tRiJo4RBR5yquM\nJv1GMNXp93d8GHfMXuW1qGGJ+ujy+5i+9q4cSEuUj0GD/HjGGO19of7uOH83hYsw\nida6xMlCgmnHsCWk4QaxNL/7dVYmKy5HikoqHfgSZeJw7gwYkjdMyKq7/wNaKoth\nr4pbwDN+Rv5LL+Djo/kO0AYUAelCRr9esgAHHSUDc0UYRqgbjIO9Zagjyrq28v3T\ngK4xzn16yMrzTjmiTuTSwcp+RgGFLw==\n=4ip4\n-----END PGP SIGNATURE-----",
        "payload": "tree ce7cef9519b6ef6b0fd491e0667d42fa5a9b7746\nparent 63b80cc5d21fbbc5743fcda80f7e8b1665d7f52f\nauthor Vasil Dimov <vd@FreeBSD.org> 1616431293 +0100\ncommitter Vasil Dimov <vd@FreeBSD.org> 1622477871 +0200\n\nnet: CConnman::FindNode(): ignore ports for some addresses\n\nFor networks that do not use ports (e.g. I2P), remove the `:port`\nsuffix (if any) when searching for an address by string.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/75adc00b8b787cb60e3fcf55ad961fb4bb1f248a",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/75adc00b8b787cb60e3fcf55ad961fb4bb1f248a",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/75adc00b8b787cb60e3fcf55ad961fb4bb1f248a/comments",
    "author": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "63b80cc5d21fbbc5743fcda80f7e8b1665d7f52f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/63b80cc5d21fbbc5743fcda80f7e8b1665d7f52f",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/63b80cc5d21fbbc5743fcda80f7e8b1665d7f52f"
      }
    ],
    "stats": {
      "total": 3,
      "additions": 2,
      "deletions": 1
    },
    "files": [
      {
        "sha": "a10af187b7bc43957a7ce9900c66e760b9972804",
        "filename": "src/net.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 1,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/75adc00b8b787cb60e3fcf55ad961fb4bb1f248a/src/net.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/75adc00b8b787cb60e3fcf55ad961fb4bb1f248a/src/net.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/net.cpp?ref=75adc00b8b787cb60e3fcf55ad961fb4bb1f248a",
        "patch": "@@ -327,9 +327,10 @@ CNode* CConnman::FindNode(const CSubNet& subNet)\n \n CNode* CConnman::FindNode(const std::string& addrName)\n {\n+    const std::string& addr = RemovePortIfIrrelevant(addrName);\n     LOCK(cs_vNodes);\n     for (CNode* pnode : vNodes) {\n-        if (pnode->GetAddrName() == addrName) {\n+        if (pnode->GetAddrName() == addr) {\n             return pnode;\n         }\n     }"
      }
    ]
  },
  {
    "sha": "b6b98195b23d926f1e27f889653e65ba1078815b",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiNmI5ODE5NWIyM2Q5MjZmMWUyN2Y4ODk2NTNlNjViYTEwNzg4MTVi",
    "commit": {
      "author": {
        "name": "Vasil Dimov",
        "email": "vd@FreeBSD.org",
        "date": "2021-03-22T13:24:48Z"
      },
      "committer": {
        "name": "Vasil Dimov",
        "email": "vd@FreeBSD.org",
        "date": "2021-05-31T16:17:52Z"
      },
      "message": "net: update outdated comment\n\nThis is a followup to `236618061a445d2cb11e722cfac5fdae5be26abb`\nwhich forgot to update the comment - we don't return the existent\nconnection from `CConnman::ConnectNode()` anymore after that commit.",
      "tree": {
        "sha": "6fb36e552f25ae2e26269b0bdd6dd3f99ea46acf",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6fb36e552f25ae2e26269b0bdd6dd3f99ea46acf"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b6b98195b23d926f1e27f889653e65ba1078815b",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQQzBAABCAAdFiEE5k2NRWFNsHVF2czBVN8G9ktVy78FAmC1DDAACgkQVN8G9ktV\ny7/+pR//eMO+0K/C6LaxbQmbjfvEA8YQkBxxZRERFsp1l0lbYQsIW8JzcgckrPWZ\nIjxpz6+KbI3kD6Pt165V0bJVTFTew/rnt2RokG6dL6fA1hc/KF2lqBFx5Z0nvhoJ\n9IWvxb7HEjdAISuBS+XGiwD48E0HekocQgKdXqi5GlN1JpwWzDnd7w2fFQkZLG3g\nyRZ68S9xCxMIK4pCrCi9GztLC6W8s91l53/1QLv+9UiM/zkkpv7Ojq1XgfKeOf6D\nCO27jpur655Gd3F6HN3AwZ6gMzeCnyW/4pTSxpyJYcyfLO+EA14AiCTAWFJWamaA\neDSDQBunY9tiGaURy/JMlhZ7aHeD6vcqlDReiJpqkKeEBhs/TfnTOHdIC73KoqWr\nFycyVO+N/YRPqsfTSjyUId0i+ih2DZj/IfPWXWHVp143JjWPkANfhCyXhbdSZhCI\nDZmNJwoHXtIm8r2bknKNLd4lgxXIpL1kS7GMs1lCqfRciCJGv4ONoh8mpN7g5/qT\n3LpAWgaqnq834g/tB54LXZL7i7SMEijwJvHh3itboepQdnL+uHUAKHO3JoyIolse\nIcn5DeOE8LK6PYLO4dMebreSyA6Zex71N7S8CyGPKJOtHFa1j5EPhvA0PHdyga4f\nVlHArjN4IyDIPbMAmK3io8CMdndjSdkfmLGFFz6CzTHqhbzJI50b7mfgZhsj4Q9H\nJlx8e+i5JmH/XdEX8O1p/P8KySiWjQDq9hsCIJTGbTS+869SYYter25vaDeCErXp\nTuAxhibhtS0UQem+DwYlJERIzpk6w8VnDHrDjwbi0/RfVjLIZQ0HDZhsTTXXQeMy\nwfAVtZWcHKfrZEnZeNqVduZIDjBhzGTfZ9sm2Aan5yE5iVK07xjr5nFtA/UH5a7E\nzEmTxwJIKRXy5u6USUTnkPFF+XdVPQqJ0hhDOwDtk7PWbrWzAfN8BUlJFkQQF0Ww\n/kC71Ju/EzRI21n22A6OxslYAypWqbY0GfpWl0ze8jccT6Sa0SlpG1L6eggl2b91\nBJMcr3sgrMQb6Ac4M7FReVrxzRap9BYZgn63+xGJW8NJqySAgLjC2vs6W1h6eiFP\n0Hudl0PT28N8RJu4rbYTHwp/rXDvOJfZd0xoVd4Qt/8nxoPtToAQ6W1JVKPPp1rA\nz277unnHQ3ehcnYtpANTFYelAjeqbW+C2IxqzN5UcOu20Upj7cxlx9MtnRbZ4nxS\nLbAemEO/rsDgbnDFe4VkM7NEc9sFw4awGPI0ZixVoL3KIxe0kCgBHXjnk6nZC05q\n9UXbMRBAH1mH/BcptLM3I2+znAPNbjQmVkY4x4FfWvbKedjvueOltcncFufkDp8r\nmF6PemOY7umYbtug8FGHPzbz7i7fww==\n=4S0t\n-----END PGP SIGNATURE-----",
        "payload": "tree 6fb36e552f25ae2e26269b0bdd6dd3f99ea46acf\nparent 75adc00b8b787cb60e3fcf55ad961fb4bb1f248a\nauthor Vasil Dimov <vd@FreeBSD.org> 1616419488 +0100\ncommitter Vasil Dimov <vd@FreeBSD.org> 1622477872 +0200\n\nnet: update outdated comment\n\nThis is a followup to `236618061a445d2cb11e722cfac5fdae5be26abb`\nwhich forgot to update the comment - we don't return the existent\nconnection from `CConnman::ConnectNode()` anymore after that commit.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b6b98195b23d926f1e27f889653e65ba1078815b",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/b6b98195b23d926f1e27f889653e65ba1078815b",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b6b98195b23d926f1e27f889653e65ba1078815b/comments",
    "author": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "75adc00b8b787cb60e3fcf55ad961fb4bb1f248a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/75adc00b8b787cb60e3fcf55ad961fb4bb1f248a",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/75adc00b8b787cb60e3fcf55ad961fb4bb1f248a"
      }
    ],
    "stats": {
      "total": 7,
      "additions": 3,
      "deletions": 4
    },
    "files": [
      {
        "sha": "2f3907d5813afa6922b6c1d332554c0d14a49500",
        "filename": "src/net.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 4,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b6b98195b23d926f1e27f889653e65ba1078815b/src/net.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b6b98195b23d926f1e27f889653e65ba1078815b/src/net.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/net.cpp?ref=b6b98195b23d926f1e27f889653e65ba1078815b",
        "patch": "@@ -411,10 +411,9 @@ CNode* CConnman::ConnectNode(CAddress addrConnect, const char *pszDest, bool fCo\n                 LogPrint(BCLog::NET, \"Resolver returned invalid address %s for %s\\n\", addrConnect.ToString(), pszDest);\n                 return nullptr;\n             }\n-            // It is possible that we already have a connection to the IP/port pszDest resolved to.\n-            // In that case, drop the connection that was just created, and return the existing CNode instead.\n-            // Also store the name we used to connect in that CNode, so that future FindNode() calls to that\n-            // name catch this early.\n+            // It is possible that we already have a connection to the addr:port pszDest resolved to.\n+            // Don't connect in that case. If the node's name is not set, then set it, so that future\n+            // FindNode(std::string) calls to that name catch this early.\n             LOCK(cs_vNodes);\n             CNode* pnode = FindNode(static_cast<CService>(addrConnect));\n             if (pnode)"
      }
    ]
  },
  {
    "sha": "6d8d59284b04d120cccfcdc9f959cfaf87450c07",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo2ZDhkNTkyODRiMDRkMTIwY2NjZmNkYzlmOTU5Y2ZhZjg3NDUwYzA3",
    "commit": {
      "author": {
        "name": "Vasil Dimov",
        "email": "vd@FreeBSD.org",
        "date": "2021-03-22T14:29:55Z"
      },
      "committer": {
        "name": "Vasil Dimov",
        "email": "vd@FreeBSD.org",
        "date": "2021-05-31T16:17:52Z"
      },
      "message": "util: document SplitHostPort()",
      "tree": {
        "sha": "8cea940c8a97f3a6b5604103737b6eb32349404d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/8cea940c8a97f3a6b5604103737b6eb32349404d"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6d8d59284b04d120cccfcdc9f959cfaf87450c07",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQQzBAABCAAdFiEE5k2NRWFNsHVF2czBVN8G9ktVy78FAmC1DDEACgkQVN8G9ktV\ny7/7nB//dgfF8ZQyaKGyMzE3jTRve/UYFqlFYwEiOMIaW0h2Kpe3TepxfzuEWet4\nazXGnecnOy5QuE989u6aOyNqqCvb3W/e/7yVQpFBpXBhK9PbBVSt0/Czw56edg5q\nvs/1xotv9Fa5Gr2is/mNDGyrJhUfjqO5/fFuxRkQatqsGL+Bo65XoWgZCzx456tT\nHuRFClr0/kad+XDAKbQa4QHuRAz09ypAgbr+wMg3PakrS+aAoIC7C/CRvI7A8PAT\nYm5G3pnYEjTEyyZxIlbq0we6cqreSANPE2trKNMWdUQFZf8AkLn3ktEWhCD56v3F\nYpcYavuRRJLuduo8lGLnVGVGEMEYacfhdIvV2UYBRDEC0/ROEiAJAEYRx+Q+Mjll\nVZTpda9TiXoI0/P45tWRAyvYzwVNVfaU29SQEcJ6loLKpevB6t8ohJaFvj3q4KLH\nrHt698hOeMATt5kLu/IYgYsKpvkkYR35LRnHZ7obTCIVYeDiH3cwRTZgQoR5k4DV\nAK61B5ssxOCarXQmBUEwcM/euvYVsWTguTZXTMl0Mep3lwLNkmAZOPjyUjNrkVIP\ngDSmK9Dvi0J+uVuUSX37tTob8SevfZH9l578y2oIlZWj6ntmctoQHbL979Jy3nk8\n+siVS8ngdkubs4RxYN2Q0hGgj148tQ2Zt4qv8DXX60xnxq+IjDdLyTTjDno69Fx+\nZHUCzBQ3v9TPIcSD8r9/gv8EBX614TqThKIT4tRcjBPAnuWGwb/OmTGCu+5qCv6s\nSp6/KKfguPzIEXgWEjqXGb2qTQV75veUFxJaKafKB4T6xjDXxSLKEnMVHJ4+xfMr\nuCSeIACPEizek3w3x75PkzZyJokxQYS3/Tx3uPNPZNTtLBU5pEAZead89HJZbfiu\n8ueDvyJEhW/DS9c5+DCVFHlwvACLXfF2Sd9bHS+iIfJLXcIIDYzv/f0b7Oq8dP5e\nUCsSsq5iuKkHl8nMgFLYS1ASsP3UuEzF2UfcG/YhVr7XK54CI9ndpeAxnegN4Dpx\noJg56HF6VAcuaB0ksZA2Dy7rV/O6J9YLB5TpnkMBKMTg9nW3RO9uLl86r/0qNS+U\nAW8Xm3p6ALZ3fhqYQANG8XRO+MoYUMFZpqWnF7RCgH83zt7uYcj4Pe2KT1xUv84J\n27qBYTS3ECc07+OnhrNUYx+8pSi+icStnJt3lCa3Y57ThbBtv8XOIGjJ/51sauex\nexYHuSnf0RzWCW2gBEh+b6oMR05wDqjESQJSxtgVyH4zFVpnxzdJAKFy880/xC1q\neaRnIcJCRoC7AXW+0zkDcTTbA3/nWkhILU2pGfuUwiuEEe5lL9pp2ldWoPKzFP9O\n0NtYB/Sqzq1K5FuXru172vqgijyghA==\n=awQi\n-----END PGP SIGNATURE-----",
        "payload": "tree 8cea940c8a97f3a6b5604103737b6eb32349404d\nparent b6b98195b23d926f1e27f889653e65ba1078815b\nauthor Vasil Dimov <vd@FreeBSD.org> 1616423395 +0100\ncommitter Vasil Dimov <vd@FreeBSD.org> 1622477872 +0200\n\nutil: document SplitHostPort()\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6d8d59284b04d120cccfcdc9f959cfaf87450c07",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/6d8d59284b04d120cccfcdc9f959cfaf87450c07",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6d8d59284b04d120cccfcdc9f959cfaf87450c07/comments",
    "author": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "b6b98195b23d926f1e27f889653e65ba1078815b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b6b98195b23d926f1e27f889653e65ba1078815b",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/b6b98195b23d926f1e27f889653e65ba1078815b"
      }
    ],
    "stats": {
      "total": 7,
      "additions": 7,
      "deletions": 0
    },
    "files": [
      {
        "sha": "7cbdee7490896f25e6380f5e43e21fd6d203e978",
        "filename": "src/util/strencodings.h",
        "status": "modified",
        "additions": 7,
        "deletions": 0,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6d8d59284b04d120cccfcdc9f959cfaf87450c07/src/util/strencodings.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6d8d59284b04d120cccfcdc9f959cfaf87450c07/src/util/strencodings.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/util/strencodings.h?ref=6d8d59284b04d120cccfcdc9f959cfaf87450c07",
        "patch": "@@ -65,6 +65,13 @@ std::string EncodeBase32(Span<const unsigned char> input, bool pad = true);\n  */\n std::string EncodeBase32(const std::string& str, bool pad = true);\n \n+/**\n+ * Parse and split addr:port.\n+ * @param[in] in Address to parse, either `addr`, `addr:port`, `[ip:v:6]` or `[ip:v:6]:port`.\n+ * @param[out] portOut The port from the `:port` suffix. Or left unmodified if no such suffix.\n+ * @param[out] hostOut The address part, before `:port` (if any). `[` and `]` are removed from\n+ * IPv6 addresses.\n+ */\n void SplitHostPort(std::string in, uint16_t& portOut, std::string& hostOut);\n int64_t atoi64(const std::string& str);\n int atoi(const std::string& str);"
      }
    ]
  }
]