[
  {
    "sha": "e16b6a71880052a6f7a368d8357901b0460abaef",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzplMTZiNmE3MTg4MDA1MmE2ZjdhMzY4ZDgzNTc5MDFiMDQ2MGFiYWVm",
    "commit": {
      "author": {
        "name": "Miguel Herranz",
        "email": "miguel@ipglider.org",
        "date": "2018-04-17T18:17:13Z"
      },
      "committer": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2019-03-24T04:01:43Z"
      },
      "message": "rpc: Rename size to vsize in mempool related calls",
      "tree": {
        "sha": "eebf6340c95f3f38966e2538909ded35dd57b213",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/eebf6340c95f3f38966e2538909ded35dd57b213"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e16b6a71880052a6f7a368d8357901b0460abaef",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEz7FuIclQ9n+pXlWPLuufXMCVJsEFAlyXAScACgkQLuufXMCV\nJsHQ2hAApTZygVDHMKsf3CGsSBeBm+gQmexrFV6YuyP12/DSdej4rgovnw/cGP5O\nz7K+p5pkk2OwfR24CK+IUYA6BanVY4/vMF+RyAUtDDtrohiAeD8FbwteNhuNZcFH\nI/Q+XGHesGikJDrmMTnAtu5tvASA/UkDGUQeWuHmuAC+KfBtiaQDPaakX+iBuJno\n8BbISnf0fBm5QhqbJ25cbNKqCoOs8cjR+EkFoODK2JFq7JfxnYJhALPbKUfvuN9B\n9Cnww9tb4LQpP7ZKq/YdD0xXmgcPRcfjd8z96YnIxxtjPzxk5icAfp6EdF0vp192\n4WaQtSLW0L3XsICJaeTR41xAZIIOEAw2XYKBFecrX9dYElKXV8OdWf6OwUaRmFCQ\nXgE1ViNJU11d21lebhuKZiXyALdV5P0k4IhGZkSOZiACsE6LJSqe1Iu8GxQTSh0j\n7puOTPam4o7VAiTBofIvJMZM/OjXN8x0017zsVGs08o+56MYHhHA1ZCcgvG0yLuF\nJKVxlCfTVSrFpAqJjberSYb3TfptZ4ITdanWZdAJA1VKa+iQ768PyJEHqr5SExBR\nL+DMdfvmzO9qA0NvCRPRiPAr40CKRxI3DMKMArgU0UNgP6ZjNG5p4kllQS44+om2\nBMzJXfC0e3MTe/tuKshkTXc6Zt/029S1g3erxSDFcrm/zPWkTKE=\n=v6o6\n-----END PGP SIGNATURE-----",
        "payload": "tree eebf6340c95f3f38966e2538909ded35dd57b213\nparent 7b13c646457980f44599412f243694fa682a1abf\nauthor Miguel Herranz <miguel@ipglider.org> 1523989033 +0200\ncommitter fanquake <fanquake@gmail.com> 1553400103 +0800\n\nrpc: Rename size to vsize in mempool related calls\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e16b6a71880052a6f7a368d8357901b0460abaef",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/e16b6a71880052a6f7a368d8357901b0460abaef",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e16b6a71880052a6f7a368d8357901b0460abaef/comments",
    "author": {
      "login": "IPGlider",
      "id": 54533,
      "node_id": "MDQ6VXNlcjU0NTMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/54533?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/IPGlider",
      "html_url": "https://github.com/IPGlider",
      "followers_url": "https://api.github.com/users/IPGlider/followers",
      "following_url": "https://api.github.com/users/IPGlider/following{/other_user}",
      "gists_url": "https://api.github.com/users/IPGlider/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/IPGlider/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/IPGlider/subscriptions",
      "organizations_url": "https://api.github.com/users/IPGlider/orgs",
      "repos_url": "https://api.github.com/users/IPGlider/repos",
      "events_url": "https://api.github.com/users/IPGlider/events{/privacy}",
      "received_events_url": "https://api.github.com/users/IPGlider/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "7b13c646457980f44599412f243694fa682a1abf",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7b13c646457980f44599412f243694fa682a1abf",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/7b13c646457980f44599412f243694fa682a1abf"
      }
    ],
    "stats": {
      "total": 24,
      "additions": 15,
      "deletions": 9
    },
    "files": [
      {
        "sha": "048d5e72185214d79585543eff1b3131f9d3588e",
        "filename": "doc/release-notes-15637.md",
        "status": "added",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e16b6a71880052a6f7a368d8357901b0460abaef/doc/release-notes-15637.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e16b6a71880052a6f7a368d8357901b0460abaef/doc/release-notes-15637.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/doc/release-notes-15637.md?ref=e16b6a71880052a6f7a368d8357901b0460abaef",
        "patch": "@@ -0,0 +1,3 @@\n+RPC changes\n+-----------\n+In getmempoolancestors, getmempooldescendants, getmempoolentry and getrawmempool RPCs, to be consistent with the returned value and other RPCs such as getrawtransaction, vsize has been added and size is now deprecated. size will only be returned if bitcoind is started with `-deprecatedrpc=size`.\n\\ No newline at end of file"
      },
      {
        "sha": "d35f458b2e1a627cf552a62f9f6b561a69a92c1c",
        "filename": "src/rpc/blockchain.cpp",
        "status": "modified",
        "additions": 5,
        "deletions": 2,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e16b6a71880052a6f7a368d8357901b0460abaef/src/rpc/blockchain.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e16b6a71880052a6f7a368d8357901b0460abaef/src/rpc/blockchain.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/blockchain.cpp?ref=e16b6a71880052a6f7a368d8357901b0460abaef",
        "patch": "@@ -378,7 +378,9 @@ static UniValue getdifficulty(const JSONRPCRequest& request)\n \n static std::string EntryDescriptionString()\n {\n-    return \"    \\\"size\\\" : n,             (numeric) virtual transaction size as defined in BIP 141. This is different from actual serialized size for witness transactions as witness data is discounted.\\n\"\n+    return \"    \\\"vsize\\\" : n,            (numeric) virtual transaction size as defined in BIP 141. This is different from actual serialized size for witness transactions as witness data is discounted.\\n\"\n+           \"    \\\"size\\\" : n,             (numeric) (DEPRECATED) same as vsize. Only returned if bitcoind is started with -deprecatedrpc=size\\n\"\n+           \"                              size will be completely removed in v0.20.\\n\"\n            \"    \\\"fee\\\" : n,              (numeric) transaction fee in \" + CURRENCY_UNIT + \" (DEPRECATED)\\n\"\n            \"    \\\"modifiedfee\\\" : n,      (numeric) transaction fee with fee deltas used for mining priority (DEPRECATED)\\n\"\n            \"    \\\"time\\\" : n,             (numeric) local time transaction entered pool in seconds since 1 Jan 1970 GMT\\n\"\n@@ -416,7 +418,8 @@ static void entryToJSON(const CTxMemPool& pool, UniValue& info, const CTxMemPool\n     fees.pushKV(\"descendant\", ValueFromAmount(e.GetModFeesWithDescendants()));\n     info.pushKV(\"fees\", fees);\n \n-    info.pushKV(\"size\", (int)e.GetTxSize());\n+    info.pushKV(\"vsize\", (int)e.GetTxSize());\n+    if (IsDeprecatedRPCEnabled(\"size\")) info.pushKV(\"size\", (int)e.GetTxSize());\n     info.pushKV(\"fee\", ValueFromAmount(e.GetFee()));\n     info.pushKV(\"modifiedfee\", ValueFromAmount(e.GetModifiedFee()));\n     info.pushKV(\"time\", e.GetTime());"
      },
      {
        "sha": "507cdfa9f5d6a724d7239177f42f26f3194c749b",
        "filename": "test/functional/mempool_packages.py",
        "status": "modified",
        "additions": 6,
        "deletions": 6,
        "changes": 12,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e16b6a71880052a6f7a368d8357901b0460abaef/test/functional/mempool_packages.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e16b6a71880052a6f7a368d8357901b0460abaef/test/functional/mempool_packages.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/mempool_packages.py?ref=e16b6a71880052a6f7a368d8357901b0460abaef",
        "patch": "@@ -58,9 +58,9 @@ def run_test(self):\n         assert_equal(len(mempool), MAX_ANCESTORS)\n         descendant_count = 1\n         descendant_fees = 0\n-        descendant_size = 0\n+        descendant_vsize = 0\n \n-        ancestor_size = sum([mempool[tx]['size'] for tx in mempool])\n+        ancestor_vsize = sum([mempool[tx]['vsize'] for tx in mempool])\n         ancestor_count = MAX_ANCESTORS\n         ancestor_fees = sum([mempool[tx]['fee'] for tx in mempool])\n \n@@ -79,15 +79,15 @@ def run_test(self):\n             assert_equal(mempool[x]['fees']['modified'], mempool[x]['modifiedfee'])\n             assert_equal(mempool[x]['descendantfees'], descendant_fees * COIN)\n             assert_equal(mempool[x]['fees']['descendant'], descendant_fees)\n-            descendant_size += mempool[x]['size']\n-            assert_equal(mempool[x]['descendantsize'], descendant_size)\n+            descendant_vsize += mempool[x]['vsize']\n+            assert_equal(mempool[x]['descendantsize'], descendant_vsize)\n             descendant_count += 1\n \n             # Check that ancestor calculations are correct\n             assert_equal(mempool[x]['ancestorcount'], ancestor_count)\n             assert_equal(mempool[x]['ancestorfees'], ancestor_fees * COIN)\n-            assert_equal(mempool[x]['ancestorsize'], ancestor_size)\n-            ancestor_size -= mempool[x]['size']\n+            assert_equal(mempool[x]['ancestorsize'], ancestor_vsize)\n+            ancestor_vsize -= mempool[x]['vsize']\n             ancestor_fees -= mempool[x]['fee']\n             ancestor_count -= 1\n "
      },
      {
        "sha": "b0a069be81f7b76f3fdf64a45256779287ded0da",
        "filename": "test/functional/mining_prioritisetransaction.py",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e16b6a71880052a6f7a368d8357901b0460abaef/test/functional/mining_prioritisetransaction.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e16b6a71880052a6f7a368d8357901b0460abaef/test/functional/mining_prioritisetransaction.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/mining_prioritisetransaction.py?ref=e16b6a71880052a6f7a368d8357901b0460abaef",
        "patch": "@@ -64,7 +64,7 @@ def run_test(self):\n         for i in range(3):\n             for j in txids[i]:\n                 assert j in mempool\n-                sizes[i] += mempool[j]['size']\n+                sizes[i] += mempool[j]['vsize']\n             assert sizes[i] > MAX_BLOCK_BASE_SIZE  # Fail => raise utxo_count\n \n         # add a fee delta to something in the cheapest bucket and make sure it gets mined"
      }
    ]
  }
]