ryanofsky,2019-05-16 12:18:38,Can you also delete the LockingStateImpl class? There is no reason for the LockingStateImpl class to exist without assumeLocked. You just need to s/LockingStateImpl/LockImpl/ in the lock method and make LockImpl inherit from UniqueLock.,https://github.com/bitcoin/bitcoin/pull/16033#issuecomment-493043673,493043673,
practicalswift,2019-05-16 13:50:45,"@ryanofsky Thanks for the quick review!\n\nDo you mean like this?\n\n```diff\ndiff --git a/src/interfaces/chain.cpp b/src/interfaces/chain.cpp\nindex 1a8c32ee3..eaddcd9dd 100644\n--- a/src/interfaces/chain.cpp\n+++ b/src/interfaces/chain.cpp\n@@ -37,7 +37,7 @@\n namespace interfaces {\n namespace {\n\n-class LockImpl : public Chain::Lock\n+class LockImpl : public Chain::Lock, public ",https://github.com/bitcoin/bitcoin/pull/16033#issuecomment-493075741,493075741,
ryanofsky,2019-05-16 14:07:26,"> Do you mean like this?\n\nThanks, yes that looks perfect.",https://github.com/bitcoin/bitcoin/pull/16033#issuecomment-493082451,493082451,
MarcoFalke,2019-05-16 15:34:15,"Could squash all the refactoring except the change to /wallet/wallet.cpp, which could go into a separate commit?",https://github.com/bitcoin/bitcoin/pull/16033#issuecomment-493118201,493118201,
DrahtBot,2019-05-16 16:16:21,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#16034](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/16034.html) (Add assertion to make sure the LockAnnotati",https://github.com/bitcoin/bitcoin/pull/16033#issuecomment-493134644,493134644,
practicalswift,2019-05-16 19:46:43,@MarcoFalke Thanks for the quick review! Updated accordingly. Please re-review :-),https://github.com/bitcoin/bitcoin/pull/16033#issuecomment-493206810,493206810,
MarcoFalke,2019-05-16 20:12:01,utACK 9402ef0739fdcd8e989c07c0595095e9608b243c,https://github.com/bitcoin/bitcoin/pull/16033#issuecomment-493214900,493214900,
practicalswift,2019-05-16 20:49:15,@ryanofsky Thanks for the review. I think you utACK:ed the previous commit hash :-),https://github.com/bitcoin/bitcoin/pull/16033#issuecomment-493226654,493226654,
MarcoFalke,2019-05-16 15:32:21,"```suggestion\n        LOCK(wallet->cs_wallet);\n```",https://github.com/bitcoin/bitcoin/pull/16033#discussion_r284768953,284768953,src/wallet/test/wallet_tests.cpp
