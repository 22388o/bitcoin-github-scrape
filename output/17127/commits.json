[
  {
    "sha": "04f7bc3670bd2d9ce136236bce0928585d5b3d66",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowNGY3YmMzNjcwYmQyZDljZTEzNjIzNmJjZTA5Mjg1ODVkNWIzZDY2",
    "commit": {
      "author": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2020-04-20T19:24:12Z"
      },
      "committer": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2020-09-29T10:29:38Z"
      },
      "message": "util: Remove -sysperms option",
      "tree": {
        "sha": "ea41a2b4aad949ddcc26974b99cd379bc52801e9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ea41a2b4aad949ddcc26974b99cd379bc52801e9"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/04f7bc3670bd2d9ce136236bce0928585d5b3d66",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE0dvyxLlvLev0wWZUQQEIES5+qB8FAl9zDJIACgkQQQEIES5+\nqB9HJg/+KZy+gXxJyVkp+DrXfVZtNVW3HDBKF34bGCaVx3jbRUlbwh1XQDeW78hX\nosooxusJLhqsNTOFpXZvm50v2XGUEJpzstvTiudpXCkdP1KezMgaM3g+NGcqvc++\np9fp6jjVQsORDLuya0SJNRFIjoapnrKCiT5vqJe+hkX1BcmiFYBPiIsC1gPWWzBi\nTShuzYaalu1whsaYMkHrE5A+m7MC1SFX7jZxHTXlfZOjAyR3gAt34u48gogn5pnj\nSNFH5FLAFMmOqN+37DeQMGG74i6c0uMujUyrK7vLEJVn+MZcidT51MH0vSuEyaLv\n5lJCEofyFy68vkLIS8P7tsOESvEd3I+fpkyMfPhByBa1yA+eqWd5J8iHr50elLlB\nmet5mX5lXnHLwjdLdsFkj+3kB1jad32FUbRO0iNm8fUOc9/C48F1mb9qWm2l1wCv\njeKnkVzquQEDxn6fs8c4EhmbVWh5M3PZIEN4KSg1euos3+OV0+UKZzfPnPq9bINH\nQPW1r4JGIVpKXTYvwvlK6ygKNGey+tMpQCeZjzxg/DOFnenX0u1/7dZeo/40MyMR\n4bx40b3V1H1+RJf3ChjHkWyjeSDM7+1Ts3McjTgURWIRd5ZV28MHU5412MumBRZH\nZasvXnexnF+33vi4ShyV5soHFQBId8E/KVcsEQyi4gJoqFZceng=\n=sLVV\n-----END PGP SIGNATURE-----",
        "payload": "tree ea41a2b4aad949ddcc26974b99cd379bc52801e9\nparent ec9b4492eba5d32ab833d511984756601d3f39b0\nauthor Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1587410652 +0300\ncommitter Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1601375378 +0300\n\nutil: Remove -sysperms option\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/04f7bc3670bd2d9ce136236bce0928585d5b3d66",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/04f7bc3670bd2d9ce136236bce0928585d5b3d66",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/04f7bc3670bd2d9ce136236bce0928585d5b3d66/comments",
    "author": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "ec9b4492eba5d32ab833d511984756601d3f39b0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ec9b4492eba5d32ab833d511984756601d3f39b0",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/ec9b4492eba5d32ab833d511984756601d3f39b0"
      }
    ],
    "stats": {
      "total": 16,
      "additions": 3,
      "deletions": 13
    },
    "files": [
      {
        "sha": "e221eb35cb3da4b1caf53d86a18c6bdea9aad720",
        "filename": "doc/init.md",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/04f7bc3670bd2d9ce136236bce0928585d5b3d66/doc/init.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/04f7bc3670bd2d9ce136236bce0928585d5b3d66/doc/init.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/doc/init.md?ref=04f7bc3670bd2d9ce136236bce0928585d5b3d66",
        "patch": "@@ -69,7 +69,7 @@ NOTE: When using the systemd .service file, the creation of the aforementioned\n directories and the setting of their permissions is automatically handled by\n systemd. Directories are given a permission of 710, giving the bitcoin group\n access to files under it _if_ the files themselves give permission to the\n-bitcoin group to do so (e.g. when `-sysperms` is specified). This does not allow\n+bitcoin group to do so. This does not allow\n for the listing of files under the directory.\n \n NOTE: It is not currently possible to override `datadir` in"
      },
      {
        "sha": "f8d8439bf5fb4bf05fd22c0193a6d04d57306280",
        "filename": "src/init.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 8,
        "changes": 9,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/04f7bc3670bd2d9ce136236bce0928585d5b3d66/src/init.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/04f7bc3670bd2d9ce136236bce0928585d5b3d66/src/init.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/init.cpp?ref=04f7bc3670bd2d9ce136236bce0928585d5b3d66",
        "patch": "@@ -426,11 +426,6 @@ void SetupServerArgs(NodeContext& node)\n     argsman.AddArg(\"-settings=<file>\", strprintf(\"Specify path to dynamic settings data file. Can be disabled with -nosettings. File is written at runtime and not meant to be edited by users (use %s instead for custom settings). Relative paths will be prefixed by datadir location. (default: %s)\", BITCOIN_CONF_FILENAME, BITCOIN_SETTINGS_FILENAME), ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS);\n #if HAVE_SYSTEM\n     argsman.AddArg(\"-startupnotify=<cmd>\", \"Execute command on startup.\", ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS);\n-#endif\n-#ifndef WIN32\n-    argsman.AddArg(\"-sysperms\", \"Create new files with system default permissions, instead of umask 077 (only effective with disabled wallet functionality)\", ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS);\n-#else\n-    hidden_args.emplace_back(\"-sysperms\");\n #endif\n     argsman.AddArg(\"-txindex\", strprintf(\"Maintain a full transaction index, used by the getrawtransaction rpc call (default: %u)\", DEFAULT_TXINDEX), ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS);\n     argsman.AddArg(\"-blockfilterindex=<type>\",\n@@ -933,9 +928,7 @@ bool AppInitBasicSetup(ArgsManager& args)\n     }\n \n #ifndef WIN32\n-    if (!args.GetBoolArg(\"-sysperms\", false)) {\n-        umask(077);\n-    }\n+    umask(077);\n \n     // Clean shutdown on SIGTERM\n     registerSignalHandler(SIGTERM, HandleSIGTERM);"
      },
      {
        "sha": "7806c5089a3342c3eac902a727919ed88c42e7ed",
        "filename": "src/rpc/request.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/04f7bc3670bd2d9ce136236bce0928585d5b3d66/src/rpc/request.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/04f7bc3670bd2d9ce136236bce0928585d5b3d66/src/rpc/request.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/request.cpp?ref=04f7bc3670bd2d9ce136236bce0928585d5b3d66",
        "patch": "@@ -81,7 +81,7 @@ bool GenerateAuthCookie(std::string *cookie_out)\n     std::string cookie = COOKIEAUTH_USER + \":\" + HexStr(rand_pwd);\n \n     /** the umask determines what permissions are used to create this file -\n-     * these are set to 077 in init.cpp unless overridden with -sysperms.\n+     * these are set to 077 in init.cpp.\n      */\n     fsbridge::ofstream file;\n     fs::path filepath_tmp = GetAuthCookieFile(true);"
      },
      {
        "sha": "8a322738c16ac96a390e9e6b3b0f3205a37cdb3b",
        "filename": "src/wallet/init.cpp",
        "status": "modified",
        "additions": 0,
        "deletions": 3,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/04f7bc3670bd2d9ce136236bce0928585d5b3d66/src/wallet/init.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/04f7bc3670bd2d9ce136236bce0928585d5b3d66/src/wallet/init.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/init.cpp?ref=04f7bc3670bd2d9ce136236bce0928585d5b3d66",
        "patch": "@@ -94,9 +94,6 @@ bool WalletInit::ParameterInteraction() const\n         return InitError(Untranslated(\"-zapwallettxes has been removed. If you are attempting to remove a stuck transaction from your wallet, please use abandontransaction instead.\"));\n     }\n \n-    if (gArgs.GetBoolArg(\"-sysperms\", false))\n-        return InitError(Untranslated(\"-sysperms is not allowed in combination with enabled wallet functionality\"));\n-\n     return true;\n }\n "
      }
    ]
  },
  {
    "sha": "74f5576978544eb16018aa4cb7e3e75df8e0350b",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo3NGY1NTc2OTc4NTQ0ZWIxNjAxOGFhNGNiN2UzZTc1ZGY4ZTAzNTBi",
    "commit": {
      "author": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2020-04-20T19:25:08Z"
      },
      "committer": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2020-09-29T10:29:44Z"
      },
      "message": "util: Apply default umask for data|wallets dirs",
      "tree": {
        "sha": "d4fa31cf3d897ad0472f9a8561c382d5bee51b85",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d4fa31cf3d897ad0472f9a8561c382d5bee51b85"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/74f5576978544eb16018aa4cb7e3e75df8e0350b",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE0dvyxLlvLev0wWZUQQEIES5+qB8FAl9zDJgACgkQQQEIES5+\nqB+zNxAAkjbHIsjMORHkjUPvB/9BGlmxE5d5qjasn8X7LGz9qZ8qZrxCLNeaRHxC\n1+XXrig5gPlIMFmUnyawkoUySebalOhyhwigpRSk/c9HKZRaz3S3QWTKFb8ESCwg\n3rEMbnhcCIP+O+t5odeMRjS4dW+hjdgl3faMhmxv5jvkZUFqGzW9yB19pbCTaIEp\ne59YiHaCYLXinly2WNBxwYOhwi6I5tyYbR1YoLYGtVMV4XoDHt91oez6MK/7KM8J\nWfWxnRrw4F+VYWz4psbD0ru4tijPS+WbZRSG4ueSsGjeN9milmx1vMEipy8OkcKY\nRZ6woyveIDmLJgNL/l+oRl8GcmT86JxdPxU7za5VBbJPBDSyVUZ0aH8cb38qajgN\nayBQc3HOMoti0+GqLTL00PgGsEvTiu0HiwIQCMwvpVrU0oSyJ7eUW+V9tRk3OyJl\n3pizAZOJZv5iAT+tRqzZuQJ0kh7YTmmhaFI4yNfgITbsCiTxgIBDvMNRXdEAvHbX\nAwF/WoGqxf+anMIGA9yK3GYHcuu97YOy7+uTR13+TQgl0mpBXe53QEbUHxBGP2N5\nHf/jYvsf2bWkkm3Mc4vzebZpb8KbumuQJNPV1m9HieVMUVqpY9i7johD64wrIN3L\nTv5m9Xx3BvBRiMK3Y3or59XYp62n5Cbqn9zTJfkTC023Ugq1Sqk=\n=Ffvb\n-----END PGP SIGNATURE-----",
        "payload": "tree d4fa31cf3d897ad0472f9a8561c382d5bee51b85\nparent 04f7bc3670bd2d9ce136236bce0928585d5b3d66\nauthor Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1587410708 +0300\ncommitter Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1601375384 +0300\n\nutil: Apply default umask for data|wallets dirs\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/74f5576978544eb16018aa4cb7e3e75df8e0350b",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/74f5576978544eb16018aa4cb7e3e75df8e0350b",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/74f5576978544eb16018aa4cb7e3e75df8e0350b/comments",
    "author": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "04f7bc3670bd2d9ce136236bce0928585d5b3d66",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/04f7bc3670bd2d9ce136236bce0928585d5b3d66",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/04f7bc3670bd2d9ce136236bce0928585d5b3d66"
      }
    ],
    "stats": {
      "total": 13,
      "additions": 11,
      "deletions": 2
    },
    "files": [
      {
        "sha": "416e16c1e37923a65fd4a59bdf1458e541faec93",
        "filename": "src/init.cpp",
        "status": "modified",
        "additions": 0,
        "deletions": 2,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/74f5576978544eb16018aa4cb7e3e75df8e0350b/src/init.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/74f5576978544eb16018aa4cb7e3e75df8e0350b/src/init.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/init.cpp?ref=74f5576978544eb16018aa4cb7e3e75df8e0350b",
        "patch": "@@ -928,8 +928,6 @@ bool AppInitBasicSetup(ArgsManager& args)\n     }\n \n #ifndef WIN32\n-    umask(077);\n-\n     // Clean shutdown on SIGTERM\n     registerSignalHandler(SIGTERM, HandleSIGTERM);\n     registerSignalHandler(SIGINT, HandleSIGTERM);"
      },
      {
        "sha": "26b90cdc9e1fe4817e400b59eb93f114aa81f79e",
        "filename": "src/util/system.cpp",
        "status": "modified",
        "additions": 11,
        "deletions": 0,
        "changes": 11,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/74f5576978544eb16018aa4cb7e3e75df8e0350b/src/util/system.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/74f5576978544eb16018aa4cb7e3e75df8e0350b/src/util/system.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/util/system.cpp?ref=74f5576978544eb16018aa4cb7e3e75df8e0350b",
        "patch": "@@ -67,6 +67,16 @@\n #include <typeinfo>\n #include <univalue.h>\n \n+#ifndef WIN32\n+namespace {\n+constexpr mode_t private_umask = 077;\n+void SetDefaultUmask()\n+{\n+    umask(private_umask);\n+}\n+} // namespace\n+#endif // WIN32\n+\n // Application startup time (used for uptime calculation)\n const int64_t nStartupTime = GetTime();\n \n@@ -1234,6 +1244,7 @@ void SetupEnvironment()\n     std::locale loc = fs::path::imbue(std::locale::classic());\n #ifndef WIN32\n     fs::path::imbue(loc);\n+    SetDefaultUmask();\n #else\n     fs::path::imbue(std::locale(loc, new std::codecvt_utf8_utf16<wchar_t>()));\n #endif"
      }
    ]
  },
  {
    "sha": "ef8ed07715f90bc156a4d4015ea1db9ee975963d",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzplZjhlZDA3NzE1ZjkwYmMxNTZhNGQ0MDE1ZWExZGI5ZWU5NzU5NjNk",
    "commit": {
      "author": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2020-04-20T19:26:09Z"
      },
      "committer": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2020-09-29T10:29:45Z"
      },
      "message": "test: Add test for file system permissions",
      "tree": {
        "sha": "31086105f8352658fd6e8dd15802db787e396ebc",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/31086105f8352658fd6e8dd15802db787e396ebc"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ef8ed07715f90bc156a4d4015ea1db9ee975963d",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE0dvyxLlvLev0wWZUQQEIES5+qB8FAl9zDJkACgkQQQEIES5+\nqB9KQQ//VOtCv/XixstVaQGBO7mL8jmP94Hqh2gIUEAROFcjQiXmYu65dvZsFKBF\nLIa2v6se23stjmdzq2xWUciGkWQOmUdz5//PuJ0C/FfEcWfTS8/JwhrJE2pCrUT/\nZ+Os6U6KE3AoBvERU8MD2Ew8Db1Jrhm5B6vVimgAmNA88uLjvISqeYt7LT6AOJ3E\nZ3DAGHR6QPU3LvFTl18JXHWGHGw5R17W4bEBlhoKsftun8BTpxooqBtlj/wAX3Kp\nGflDN/kUR5nFKrPlJdmNfW9UqeymNi/A196r90T8nS2g2dSSbaQQG53QWkkdPiqt\n1+OkZzMR4t2OEcNI94YDr0MtixiNyoKuL1SI67SKeh+S/C/vGQMsoGzqchT5AHqH\nSRM1tYcZwYp5kOzvJ+C3vYH/hWm8O8TEkEoh1kLKpN1lCFban0x0++QDPASJPHht\nb9Rc2XecCwPQnXpvAw2k4Id+Diu3fPpaVYpZ868I0LvumZERRrLAQczo/luGEezT\nayQV9uFNH/YH80pQxxwpmhgLkKnpeRk5U7NwvBc9oIQfhl/FXESfDmV54m61I76d\no1GE1/DjIt1A7lT9AK2Ud9yK6WH/wWgrEDqEQSjIST7E7TJYRq32+DEV0qzB9VpZ\n+CWbGv5Gj8RbuxwRNsZ6Gp/bMAE5/Qk346zGzO7NelnhLo9lwmg=\n=zTGl\n-----END PGP SIGNATURE-----",
        "payload": "tree 31086105f8352658fd6e8dd15802db787e396ebc\nparent 74f5576978544eb16018aa4cb7e3e75df8e0350b\nauthor Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1587410769 +0300\ncommitter Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1601375385 +0300\n\ntest: Add test for file system permissions\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ef8ed07715f90bc156a4d4015ea1db9ee975963d",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/ef8ed07715f90bc156a4d4015ea1db9ee975963d",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ef8ed07715f90bc156a4d4015ea1db9ee975963d/comments",
    "author": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "74f5576978544eb16018aa4cb7e3e75df8e0350b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/74f5576978544eb16018aa4cb7e3e75df8e0350b",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/74f5576978544eb16018aa4cb7e3e75df8e0350b"
      }
    ],
    "stats": {
      "total": 35,
      "additions": 35,
      "deletions": 0
    },
    "files": [
      {
        "sha": "0d8005c9173f70304a9510c97bb0048de10a409d",
        "filename": "test/functional/feature_fs_permissions.py",
        "status": "added",
        "additions": 34,
        "deletions": 0,
        "changes": 34,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/ef8ed07715f90bc156a4d4015ea1db9ee975963d/test/functional/feature_fs_permissions.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/ef8ed07715f90bc156a4d4015ea1db9ee975963d/test/functional/feature_fs_permissions.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/feature_fs_permissions.py?ref=ef8ed07715f90bc156a4d4015ea1db9ee975963d",
        "patch": "@@ -0,0 +1,34 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2019 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test file system permissions for non-Windows platforms.\n+\"\"\"\n+\n+import os\n+import stat\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+\n+\n+class FsPermissionsTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 1\n+\n+    def check_directory(self, path):\n+        assert os.path.isdir(path)\n+        permissions = os.stat(path).st_mode\n+        self.log.info('{}  {}'.format(stat.filemode(permissions), path))\n+        assert (permissions & (stat.S_IRWXO | stat.S_IRWXG)) == 0\n+\n+    def run_test(self):\n+        self.stop_node(0)\n+        datadir = os.path.join(self.nodes[0].datadir, self.chain)\n+        self.check_directory(datadir)\n+        walletsdir = os.path.join(datadir, \"wallets\")\n+        self.check_directory(walletsdir)\n+\n+\n+if __name__ == '__main__' and os.name != 'nt':\n+    FsPermissionsTest().main()"
      },
      {
        "sha": "86f2a6845a06a29c161117b6e56a367598b3389d",
        "filename": "test/functional/test_runner.py",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/ef8ed07715f90bc156a4d4015ea1db9ee975963d/test/functional/test_runner.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/ef8ed07715f90bc156a4d4015ea1db9ee975963d/test/functional/test_runner.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/test_runner.py?ref=ef8ed07715f90bc156a4d4015ea1db9ee975963d",
        "patch": "@@ -155,6 +155,7 @@\n     'rpc_signrawtransaction.py',\n     'wallet_groups.py',\n     'p2p_disconnect_ban.py',\n+    'feature_fs_permissions.py',\n     'rpc_decodescript.py',\n     'rpc_blockchain.py',\n     'rpc_deprecated.py',"
      }
    ]
  }
]