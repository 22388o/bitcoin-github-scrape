DrahtBot,2019-10-13 20:43:52,<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.,https://github.com/bitcoin/bitcoin/pull/17127#issuecomment-541457934,541457934,
laanwj,2019-10-14 09:32:23,Concept ACK on removing `-sysperms`.,https://github.com/bitcoin/bitcoin/pull/17127#issuecomment-541577626,541577626,
hebasto,2019-10-14 11:31:15,"@laanwj \nThank you for your review. All your comments have been addressed.",https://github.com/bitcoin/bitcoin/pull/17127#issuecomment-541624434,541624434,
hebasto,2019-10-16 16:08:54,Rebased after #17138 has been merged.,https://github.com/bitcoin/bitcoin/pull/17127#issuecomment-542776503,542776503,
hebasto,2019-10-26 18:40:54,@laanwj Thank you for review. Your comment has been addressed.,https://github.com/bitcoin/bitcoin/pull/17127#issuecomment-546628788,546628788,
hebasto,2019-11-25 20:04:00,@promag Would you mind reviewing this PR?,https://github.com/bitcoin/bitcoin/pull/17127#issuecomment-558318671,558318671,
hebasto,2020-04-20 19:31:03,Rebased 7213e8cbe685556365021176d686f45bdd036dae -> 67b12091c78b0183aa9dc451d176b16f832d93f7 ([pr17127.04](https://github.com/hebasto/bitcoin/commits/pr17127.04) -> [pr17127.05](https://github.com/hebasto/bitcoin/commits/pr17127.05)) due to the conflict with #15761.,https://github.com/bitcoin/bitcoin/pull/17127#issuecomment-616762715,616762715,
hebasto,2020-05-09 03:52:23,Rebased 67b12091c78b0183aa9dc451d176b16f832d93f7 -> 297e61cdb8293c0bfd1d43f22eefbece3f541802 ([pr17127.05](https://github.com/hebasto/bitcoin/commits/pr17127.05) -> [pr17127.06](https://github.com/hebasto/bitcoin/commits/pr17127.06)) due to the conflict with #16224.,https://github.com/bitcoin/bitcoin/pull/17127#issuecomment-626100564,626100564,
jonasschnelli,2020-05-29 09:16:46,utACK 297e61cdb8293c0bfd1d43f22eefbece3f541802,https://github.com/bitcoin/bitcoin/pull/17127#issuecomment-635868123,635868123,
hebasto,2020-07-24 07:25:57,Rebased 297e61cdb8293c0bfd1d43f22eefbece3f541802 -> 337a7709502f562b764cce78f6de1d1a744cebd8 ([pr17127.06](https://github.com/hebasto/bitcoin/commits/pr17127.06) -> [pr17127.07](https://github.com/hebasto/bitcoin/commits/pr17127.07)) due to the conflict with #15935.,https://github.com/bitcoin/bitcoin/pull/17127#issuecomment-663384728,663384728,
hebasto,2020-07-31 13:42:10,Rebased 337a7709502f562b764cce78f6de1d1a744cebd8 -> 788143749f7a71d0b3af12275e2fde7dc74ff03d ([pr17127.07](https://github.com/hebasto/bitcoin/commits/pr17127.07) -> [pr17127.08](https://github.com/hebasto/bitcoin/commits/pr17127.08)) due to the conflict with #19561.,https://github.com/bitcoin/bitcoin/pull/17127#issuecomment-667126050,667126050,
hebasto,2020-08-26 09:33:55,Rebased 788143749f7a71d0b3af12275e2fde7dc74ff03d -> 677617651e5b831da8d12f769a47d2957400d987 ([pr17127.08](https://github.com/hebasto/bitcoin/commits/pr17127.08) -> [pr17127.09](https://github.com/hebasto/bitcoin/commits/pr17127.09)) due to the conflict with #19779.,https://github.com/bitcoin/bitcoin/pull/17127#issuecomment-680771407,680771407,
hebasto,2020-09-29 10:34:15,Rebased 677617651e5b831da8d12f769a47d2957400d987 -> ef8ed07715f90bc156a4d4015ea1db9ee975963d ([pr17127.09](https://github.com/hebasto/bitcoin/commits/pr17127.09) -> [pr17127.10](https://github.com/hebasto/bitcoin/commits/pr17127.10)) due to the conflict with #15367.,https://github.com/bitcoin/bitcoin/pull/17127#issuecomment-700616913,700616913,
practicalswift,2021-06-23 19:48:51,Concept ACK,https://github.com/bitcoin/bitcoin/pull/17127#issuecomment-867112447,867112447,
laanwj,2019-10-14 09:31:38,"GetDataDir, a getter, is not the place to do things such as set the umask. Please don't add these kind of side-effects.",https://github.com/bitcoin/bitcoin/pull/17127#discussion_r334395131,334395131,src/util/system.cpp
laanwj,2019-10-14 09:32:09,"please use `mode_t` instead of int here, that's the argument type for umasks",https://github.com/bitcoin/bitcoin/pull/17127#discussion_r334395349,334395349,src/util/system.cpp
hebasto,2019-10-14 09:40:57,"Maybe `GetDataDir` is not a proper name for this function as it already has an intended side-effect:\nhttps://github.com/bitcoin/bitcoin/blob/ddd3cd30cb050fe9b8738778beecba1d8bd50d52/src/util/system.cpp#L777-L780",https://github.com/bitcoin/bitcoin/pull/17127#discussion_r334398863,334398863,src/util/system.cpp
laanwj,2019-10-14 09:41:27,"I know. I kind of want to get rid of that too. But don't add any more\n\n(edit: also  I think setting `umask` is the *worst* kind of side effect possible, it's global state of the program over all threads)",https://github.com/bitcoin/bitcoin/pull/17127#discussion_r334399063,334399063,src/util/system.cpp
hebasto,2019-10-14 11:31:26,Done.,https://github.com/bitcoin/bitcoin/pull/17127#discussion_r334436956,334436956,src/util/system.cpp
hebasto,2019-10-14 11:31:41,Done.,https://github.com/bitcoin/bitcoin/pull/17127#discussion_r334437027,334437027,src/util/system.cpp
laanwj,2019-10-21 15:13:11,Wouldn't `SetupEnvironment` be the right place for this? Or is that too early?,https://github.com/bitcoin/bitcoin/pull/17127#discussion_r337075942,337075942,src/util/system.h
hebasto,2019-10-21 16:03:59,"Currently, `SetDefaultUmask()` is called just before the first possible disk write.\n\n`SetupEnvironment()` seems too broad, as it is called in utilities too. And, yes, I think it is too early. But I could be wrong ;)",https://github.com/bitcoin/bitcoin/pull/17127#discussion_r337103872,337103872,src/util/system.h
laanwj,2019-10-23 10:55:27,"But does that matter? What would be the consequences of setting it too early? Why wouldn't we want to set the umask for the utilties?\n",https://github.com/bitcoin/bitcoin/pull/17127#discussion_r337979316,337979316,src/util/system.h
hebasto,2019-10-26 18:39:43,"> Wouldn't `SetupEnvironment` be the right place for this?\n\nAgree.",https://github.com/bitcoin/bitcoin/pull/17127#discussion_r339311007,339311007,src/util/system.h
