[
  {
    "sha": "f534e2b2a482b7ddf452680e6167208201d70ea2",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmNTM0ZTJiMmE0ODJiN2RkZjQ1MjY4MGU2MTY3MjA4MjAxZDcwZWEy",
    "commit": {
      "author": {
        "name": "Fabian Jahr",
        "email": "fjahr@protonmail.com",
        "date": "2020-08-24T18:57:32Z"
      },
      "committer": {
        "name": "Fabian Jahr",
        "email": "fjahr@protonmail.com",
        "date": "2021-08-02T22:25:27Z"
      },
      "message": "rpc: Add dumpcoinstats\n\nThis RPC dumps the full content of the coinstats index to a CSV file.",
      "tree": {
        "sha": "676e7d43fe34153d0a76a4be6d41dc6b1dce9346",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/676e7d43fe34153d0a76a4be6d41dc6b1dce9346"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f534e2b2a482b7ddf452680e6167208201d70ea2",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\nComment: GPGTools - https://gpgtools.org\n\niQJJBAABCgAzFiEEtFq20ghhrCHSdrgm8T0enYkHmM0FAmEIcNkVHGZqYWhyQHBy\nb3Rvbm1haWwuY29tAAoJEPE9Hp2JB5jNi5cP/i/tWMdcTa4F1aHdwU+uRl/DT+h3\nynU23FVDBPxG2OWBBZ/xUu2TbUVpOZZlblTV7uq9k8p35HD6sk5kefoNX6ahENF/\nlwjifKon+2WsamBa6fQZdTy1oghaugQoVzi1spZ5C2791RQhEKh39N0iTVl3p7Fs\nUlOJN6gw4oNCPMQSPMr8K4kVQ13kfKXif+f7Efd8blkzP7mcKMMe6mfohOpIDDSq\nijg/RquHWCc4ejJxPTUpD8vRP/LHPBHgVz4Bp+id9NNYHPDy5Yhy1KOIRfTF7MQK\ncwUPwtgRByL09ac/aPiu5MNuKo8VRskrd1p8eX0I4a34pJXI5lBM/iuVD+RsqZP6\nRWpUMo0bs75SJ2dtJUJBfLdRe0caHrvM972ZrYyDje3p/eJyduRhQMIw9IduBmJT\ndF9qKZSIXVmdG5NDI51sEq8wKA+DNx7hO22kMIxxL9tkYxKagjNThuUbwh+LFMnQ\nkITZJ9FfK1PN7zOm7ikTpYHdmPzQZrT/U1OaH/vW6WXlKoPVNhI8ONAlJY9BFKKN\n6F2S61/xO4GedHg9Qk5T4VHuHIuex4GT6k7AdFBPq6fOGvAfIoN+lJ9FQkWmZzhy\ne/rS+fM9i1UxK5vHif93LANNXEDYGxcR+cHJoAhrdnydkyCYOY/aqtz0cMvrDa0y\nIo7kTl5w3tW8oU1H\n=5RxY\n-----END PGP SIGNATURE-----",
        "payload": "tree 676e7d43fe34153d0a76a4be6d41dc6b1dce9346\nparent f2e41d11097dde1c841bcaa8615886c984f71632\nauthor Fabian Jahr <fjahr@protonmail.com> 1598295452 +0200\ncommitter Fabian Jahr <fjahr@protonmail.com> 1627943127 +0200\n\nrpc: Add dumpcoinstats\n\nThis RPC dumps the full content of the coinstats index to a CSV file.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f534e2b2a482b7ddf452680e6167208201d70ea2",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/f534e2b2a482b7ddf452680e6167208201d70ea2",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f534e2b2a482b7ddf452680e6167208201d70ea2/comments",
    "author": {
      "login": "fjahr",
      "id": 1322187,
      "node_id": "MDQ6VXNlcjEzMjIxODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjahr",
      "html_url": "https://github.com/fjahr",
      "followers_url": "https://api.github.com/users/fjahr/followers",
      "following_url": "https://api.github.com/users/fjahr/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjahr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
      "organizations_url": "https://api.github.com/users/fjahr/orgs",
      "repos_url": "https://api.github.com/users/fjahr/repos",
      "events_url": "https://api.github.com/users/fjahr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjahr/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "fjahr",
      "id": 1322187,
      "node_id": "MDQ6VXNlcjEzMjIxODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjahr",
      "html_url": "https://github.com/fjahr",
      "followers_url": "https://api.github.com/users/fjahr/followers",
      "following_url": "https://api.github.com/users/fjahr/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjahr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
      "organizations_url": "https://api.github.com/users/fjahr/orgs",
      "repos_url": "https://api.github.com/users/fjahr/repos",
      "events_url": "https://api.github.com/users/fjahr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjahr/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "f2e41d11097dde1c841bcaa8615886c984f71632",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f2e41d11097dde1c841bcaa8615886c984f71632",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/f2e41d11097dde1c841bcaa8615886c984f71632"
      }
    ],
    "stats": {
      "total": 105,
      "additions": 105,
      "deletions": 0
    },
    "files": [
      {
        "sha": "6cd7e1740a246fdf15f801a4943037c2a0b098a9",
        "filename": "src/rpc/blockchain.cpp",
        "status": "modified",
        "additions": 104,
        "deletions": 0,
        "changes": 104,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/f534e2b2a482b7ddf452680e6167208201d70ea2/src/rpc/blockchain.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/f534e2b2a482b7ddf452680e6167208201d70ea2/src/rpc/blockchain.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/blockchain.cpp?ref=f534e2b2a482b7ddf452680e6167208201d70ea2",
        "patch": "@@ -35,6 +35,7 @@\n #include <txdb.h>\n #include <txmempool.h>\n #include <undo.h>\n+#include <util/moneystr.h>\n #include <util/strencodings.h>\n #include <util/system.h>\n #include <util/translation.h>\n@@ -1082,6 +1083,108 @@ static RPCHelpMan pruneblockchain()\n     };\n }\n \n+static RPCHelpMan dumpcoinstats()\n+{\n+    return RPCHelpMan{\"dumpcoinstats\",\n+                \"\\nDumps content of coinstats index to a CSV file.\\n\",\n+                {\n+                    {\"filename\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The filename with path (absolute path recommended)\"},\n+                },\n+                RPCResult{\n+                    RPCResult::Type::OBJ, \"\", \"\",\n+                    {\n+                        {RPCResult::Type::STR, \"filename\", \"The filename with full absolute path\"},\n+                    }\n+                },\n+                RPCExamples{\n+                    HelpExampleCli(\"dumpcoinstats\", \"\\\"test\\\"\") +\n+                    HelpExampleRpc(\"dumpcoinstats\", \"\\\"test\\\"\")\n+                },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    if (request.params[0].isNull())\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"File name and path for dump file are required\");\n+\n+    fs::path filepath = request.params[0].get_str();\n+    filepath = fs::absolute(filepath);\n+\n+    if (fs::exists(filepath)) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, filepath.string() + \" already exists. If you are sure this is what you want, move it out of the way first\");\n+    }\n+\n+    fsbridge::ofstream file;\n+    file.open(filepath);\n+    if (!file.is_open())\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, \"Cannot open dump file\");\n+\n+    if (!g_coin_stats_index) {\n+        throw JSONRPCError(RPC_MISC_ERROR, \"Coinstats index is not enabled\");\n+    }\n+\n+    file << strprintf(\"height,\"\n+                      \"bestblock,\"\n+                      \"txouts,\"\n+                      \"bogosize,\"\n+                      \"muhash,\"\n+                      \"total_amount,\"\n+                      \"total_unspendable_amount,\"\n+                      \"total_prevout_spent_amount,\"\n+                      \"total_new_outputs_ex_coinbase_amount,\"\n+                      \"total_coinbase_amount,\"\n+                      \"total_subsidy,\"\n+                      \"total_genesis_block,\"\n+                      \"total_bip30,\"\n+                      \"total_unspendable_scripts,\"\n+                      \"total_unclaimed_rewards\\n\");\n+\n+    CCoinsStats stats{CoinStatsHashType::MUHASH};\n+    NodeContext& node = EnsureAnyNodeContext(request.context);\n+    ChainstateManager& chainman = EnsureChainman(node);\n+    CChainState& active_chainstate = chainman.ActiveChainstate();\n+    active_chainstate.ForceFlushStateToDisk();\n+    CBlockIndex *pindex = active_chainstate.m_chain.Genesis();\n+\n+    CCoinsView* coins_view;\n+    BlockManager* blockman;\n+    {\n+        LOCK(::cs_main);\n+        coins_view = &active_chainstate.CoinsDB();\n+        blockman = &active_chainstate.m_blockman;\n+    }\n+\n+    for (; pindex; pindex = active_chainstate.m_chain.Next(pindex)) {\n+        if (!GetUTXOStats(coins_view, *blockman, stats, node.rpc_interruption_point, pindex))\n+            throw JSONRPCError(RPC_INTERNAL_ERROR, \"Unable to read UTXO set\");\n+\n+        file << strprintf(\"%d,\", static_cast<int64_t>(stats.nHeight));\n+        file << strprintf(\"%s,\", stats.hashBlock.GetHex());\n+        file << strprintf(\"%d,\", static_cast<int64_t>(stats.nTransactionOutputs));\n+        file << strprintf(\"%d,\", static_cast<int64_t>(stats.nBogoSize));\n+        file << strprintf(\"%d,\", stats.hashSerialized.GetHex());\n+        file << strprintf(\"%s,\", FormatMoney(stats.nTotalAmount));\n+        file << strprintf(\"%s,\", FormatMoney(stats.total_unspendable_amount));\n+        file << strprintf(\"%s,\", FormatMoney(stats.total_prevout_spent_amount));\n+        file << strprintf(\"%s,\", FormatMoney(stats.total_new_outputs_ex_coinbase_amount));\n+        file << strprintf(\"%s,\", FormatMoney(stats.total_coinbase_amount));\n+        file << strprintf(\"%s,\", FormatMoney(stats.total_subsidy));\n+        file << strprintf(\"%s,\", FormatMoney(stats.total_unspendables_genesis_block));\n+        file << strprintf(\"%s,\", FormatMoney(stats.total_unspendables_bip30));\n+        file << strprintf(\"%s,\", FormatMoney(stats.total_unspendables_scripts));\n+        file << strprintf(\"%s\\n\", FormatMoney(stats.total_unspendables_unclaimed_rewards));\n+\n+        if (pindex->nHeight >= active_chainstate.m_chain.Tip()->nHeight) break;\n+    }\n+\n+    file.close();\n+\n+    UniValue response(UniValue::VOBJ);\n+    response.pushKV(\"filename\", filepath.string());\n+\n+    return response;\n+},\n+    };\n+}\n+\n CoinStatsHashType ParseHashType(const std::string& hash_type_input)\n {\n     if (hash_type_input == \"hash_serialized_2\") {\n@@ -2657,6 +2760,7 @@ static const CRPCCommand commands[] =\n     { \"blockchain\",         &getrawmempool,                      },\n     { \"blockchain\",         &gettxout,                           },\n     { \"blockchain\",         &gettxoutsetinfo,                    },\n+    { \"blockchain\",         &dumpcoinstats,                      },\n     { \"blockchain\",         &pruneblockchain,                    },\n     { \"blockchain\",         &savemempool,                        },\n     { \"blockchain\",         &verifychain,                        },"
      },
      {
        "sha": "e26311f1b3ab681f618ec1cc7bdddce01eb3a8fd",
        "filename": "src/test/fuzz/rpc.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/f534e2b2a482b7ddf452680e6167208201d70ea2/src/test/fuzz/rpc.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/f534e2b2a482b7ddf452680e6167208201d70ea2/src/test/fuzz/rpc.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/fuzz/rpc.cpp?ref=f534e2b2a482b7ddf452680e6167208201d70ea2",
        "patch": "@@ -67,6 +67,7 @@ const std::vector<std::string> RPC_COMMANDS_NOT_SAFE_FOR_FUZZING{\n     \"addnode\",        // avoid DNS lookups\n     \"addpeeraddress\", // avoid DNS lookups\n     \"analyzepsbt\",    // avoid signed integer overflow in CFeeRate::GetFee(unsigned long) (https://github.com/bitcoin/bitcoin/issues/20607)\n+    \"dumpcoinstats\",  // avoid writing to disk\n     \"dumptxoutset\",   // avoid writing to disk\n     \"dumpwallet\", // avoid writing to disk\n     \"echoipc\",              // avoid assertion failure (Assertion `\"EnsureAnyNodeContext(request.context).init\" && check' failed.)"
      }
    ]
  },
  {
    "sha": "b85813a9b29e86fe86015484eb0695fdb73275c3",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiODU4MTNhOWIyOWU4NmZlODYwMTU0ODRlYjA2OTVmZGI3MzI3NWMz",
    "commit": {
      "author": {
        "name": "Fabian Jahr",
        "email": "fjahr@protonmail.com",
        "date": "2021-05-06T22:44:32Z"
      },
      "committer": {
        "name": "Fabian Jahr",
        "email": "fjahr@protonmail.com",
        "date": "2021-08-02T22:25:41Z"
      },
      "message": "test: Add dumpcoinstats RPC functional test",
      "tree": {
        "sha": "bbb94a32378b7cf83dbc05f641341c970b44a379",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/bbb94a32378b7cf83dbc05f641341c970b44a379"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b85813a9b29e86fe86015484eb0695fdb73275c3",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\nComment: GPGTools - https://gpgtools.org\n\niQJJBAABCgAzFiEEtFq20ghhrCHSdrgm8T0enYkHmM0FAmEIcOUVHGZqYWhyQHBy\nb3Rvbm1haWwuY29tAAoJEPE9Hp2JB5jN9UQP+wQtZVbBSvJYLbD4dLcejRKrM8A9\n0xMRF113QA79oJWUSO4xXeXjs/vzHtAbTcg3QFrrC/RAGg//yGG0Ecc8p0ZipMxB\nSqsAkcxIjXaJ9ZyjeSiUw7NufDXZJoosWzfOWcXhvqbZdD/uOwHHJiNUwcpJebUS\nu0/cZkx3jdl5qNBCwp47HimaT1vDRvsz3qm6jONRDc34WfYYopZmTN6eSkPUQ5TP\nXbGdfpiJr0KUEOsSlD0ElZTHdgdHd1LSr8f0TrukjvqFsj+sZ+5xaJbhLo1E7j5v\nYIR23CnljK5+SBad/9tLGKHHGlsF21yjULvwab2bYZhUBzBUME2elnJZxyjMBfN4\nrEzd+K0LQflxtlXGhGjC7A1H58v5aXrBjkk8QKqcxvNSJgdh9wRtaF3Nzf5AMh44\nrW2EM6QFenOiRRe1itLhXG3aNbxmQcugB9f+fEzw4eDBcEvVN1dIMo2sWQ9kHrVO\nPiHQZyMSKZmadtyixwaKYgxSNvdZ1FLP2u7LK5Jjf7kl6le35olC10cl0lta+j7O\ni+eN/QZkIGC+tGMtdeI5HvctKvAZUaLQL1aUhaSrdagjW53jir0KsS+nfOk+Fiko\nes8FvH5jNV0AYcGLI70bZ6Vu/9m0KIFILpbjKYWCPP7Znb9WpV1tm+Ofyt0dThOD\ncHctAZoGP28HAp59\n=I1iS\n-----END PGP SIGNATURE-----",
        "payload": "tree bbb94a32378b7cf83dbc05f641341c970b44a379\nparent f534e2b2a482b7ddf452680e6167208201d70ea2\nauthor Fabian Jahr <fjahr@protonmail.com> 1620341072 +0200\ncommitter Fabian Jahr <fjahr@protonmail.com> 1627943141 +0200\n\ntest: Add dumpcoinstats RPC functional test\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b85813a9b29e86fe86015484eb0695fdb73275c3",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/b85813a9b29e86fe86015484eb0695fdb73275c3",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b85813a9b29e86fe86015484eb0695fdb73275c3/comments",
    "author": {
      "login": "fjahr",
      "id": 1322187,
      "node_id": "MDQ6VXNlcjEzMjIxODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjahr",
      "html_url": "https://github.com/fjahr",
      "followers_url": "https://api.github.com/users/fjahr/followers",
      "following_url": "https://api.github.com/users/fjahr/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjahr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
      "organizations_url": "https://api.github.com/users/fjahr/orgs",
      "repos_url": "https://api.github.com/users/fjahr/repos",
      "events_url": "https://api.github.com/users/fjahr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjahr/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "fjahr",
      "id": 1322187,
      "node_id": "MDQ6VXNlcjEzMjIxODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjahr",
      "html_url": "https://github.com/fjahr",
      "followers_url": "https://api.github.com/users/fjahr/followers",
      "following_url": "https://api.github.com/users/fjahr/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjahr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
      "organizations_url": "https://api.github.com/users/fjahr/orgs",
      "repos_url": "https://api.github.com/users/fjahr/repos",
      "events_url": "https://api.github.com/users/fjahr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjahr/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "f534e2b2a482b7ddf452680e6167208201d70ea2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f534e2b2a482b7ddf452680e6167208201d70ea2",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/f534e2b2a482b7ddf452680e6167208201d70ea2"
      }
    ],
    "stats": {
      "total": 35,
      "additions": 35,
      "deletions": 0
    },
    "files": [
      {
        "sha": "cab6813197ddcfdbc62341a824569d0208418a46",
        "filename": "test/functional/feature_coinstatsindex.py",
        "status": "modified",
        "additions": 35,
        "deletions": 0,
        "changes": 35,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b85813a9b29e86fe86015484eb0695fdb73275c3/test/functional/feature_coinstatsindex.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b85813a9b29e86fe86015484eb0695fdb73275c3/test/functional/feature_coinstatsindex.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/feature_coinstatsindex.py?ref=b85813a9b29e86fe86015484eb0695fdb73275c3",
        "patch": "@@ -32,8 +32,12 @@\n from test_framework.util import (\n     assert_equal,\n     assert_raises_rpc_error,\n+    get_datadir_path,\n )\n \n+import os\n+import re\n+\n class CoinStatsIndexTest(BitcoinTestFramework):\n     def set_test_params(self):\n         self.setup_clean_chain = True\n@@ -52,6 +56,7 @@ def run_test(self):\n         self._test_use_index_option()\n         self._test_reorg_index()\n         self._test_index_rejects_hash_serialized()\n+        self._test_dumpcoinstats_rpc()\n \n     def block_sanity_check(self, block_info):\n         block_subsidy = 50\n@@ -297,6 +302,36 @@ def _test_index_rejects_hash_serialized(self):\n         for use_index in {True, False, None}:\n             assert_raises_rpc_error(-8, msg, self.nodes[1].gettxoutsetinfo, hash_type='hash_serialized_2', hash_or_height=111, use_index=use_index)\n \n+    def _test_dumpcoinstats_rpc(self):\n+        self.log.info(\"Test dumpcoinstats RPC\")\n+\n+        msg = \"File name and path for dump file are required\"\n+        assert_raises_rpc_error(-8, msg, self.nodes[1].dumpcoinstats, None)\n+\n+        file = \"test.csv\"\n+        path = os.path.join(get_datadir_path(self.options.tmpdir, 1), file)\n+        self.nodes[1].dumpcoinstats(path)\n+\n+        with open(path, 'r', encoding='utf-8') as f:\n+            lines = f.read().splitlines()\n+\n+            # Check header\n+            head = \"height,bestblock,txouts,bogosize,muhash,total_amount,total_unspendable_amount,total_prevout_spent_amount,total_new_outputs_ex_coinbase_amount,total_coinbase_amount,total_subsidy,total_genesis_block,total_bip30,total_unspendable_scripts,total_unclaimed_rewards\"\n+            assert_equal(lines[0], head)\n+\n+            # Check the first line, the genesis block\n+            genesis = \"0,0f9188f13cb7b2c71f2a335e3a4fc328bf5beb436012afca590b1a11466e2206,0,0,dd5ad2a105c2d29495f577245c357409002329b9f4d6182c0af3dc2f462555c8,0.00,50.00,0.00,0.00,0.00,50.00,50.00,0.00,0.00,0.00\"\n+            assert_equal(lines[1], genesis)\n+\n+            # Check the last line, omitting non-deterministic hash values\n+            last = \"113,,115,8571,,5619.01000001,80.98999999,161.00,139.9998918,5640.01010821,5700.00,50.00,0.00,20.98999999,10.00\"\n+            line = re.sub(r',[a-z0-9]{64},', ',,', lines[-1])\n+            assert_equal(line, last)\n+\n+        # The RPC does not override existing files\n+        msg = \"already exists\"\n+        assert_raises_rpc_error(-8, msg, self.nodes[1].dumpcoinstats, path)\n+\n \n if __name__ == '__main__':\n     CoinStatsIndexTest().main()"
      }
    ]
  }
]