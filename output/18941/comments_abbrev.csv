DrahtBot,2020-05-11 07:47:01,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #18637 (coins: allow cache resize after init by jamesob)\n* #10443 (Add fee_est tool for debugging fee estimation code by ",https://github.com/bitcoin/bitcoin/pull/18941#issuecomment-626532576,626532576,
andrewtoth,2020-05-12 03:28:02,"Motivated by https://github.com/bitcoin/bitcoin/pull/15218#issuecomment-456558815\n> we wanted to make the cache actually more useful on startup (something I've thought we should do for a while)",https://github.com/bitcoin/bitcoin/pull/18941#issuecomment-627086019,627086019,
sipa,2020-05-12 03:41:07,"I'm not sure this is useful.\n\nMy information is several years old, so take this with a grain of salt. Actual benchmarks would of course be better.\n\nI experimented with several different designs for partial flushing, where some data remained in the cache at the time it was flushed, and surprisingly, they were invariably all slower than just wiping everything every time. The reason is that o",https://github.com/bitcoin/bitcoin/pull/18941#issuecomment-627089592,627089592,
andrewtoth,2020-05-12 03:58:00,"@sipa I'm having trouble reconciling your above comment with the one you made [here](https://github.com/bitcoin/bitcoin/pull/15218#issuecomment-457434328)\n\n>@andrewtoth The problem is that right now, causing a flush when exiting IBD will (temporarily) kill your performance right before finishing the sync (because it leaves you with an empty cache). If instead it was a non-clearing flush, there",https://github.com/bitcoin/bitcoin/pull/18941#issuecomment-627093687,627093687,
andrewtoth,2020-05-25 18:55:52,"I've put together some benchmarks. TL;DR running with the entire utxo set in memory can shave off several hundred milliseconds in ConnectBlock.\n\nI benchmarked with [this patch](https://github.com/andrewtoth/bitcoin/commit/405faf362ae8084b524b043db0c27255fab3e1a6) that records the ConnectBlock time and whenever a flush happens. I ran with `-dbcache=20000 -persistcoinscache=1 -reindex-chainstate",https://github.com/bitcoin/bitcoin/pull/18941#issuecomment-633684774,633684774,
JeremyRubin,2020-06-04 01:52:54,. @andrewtoth I think that you can solve some of these problems more 'cleanly' (no new files) if you have a parallel cache-warming strategy for connect block that attempts to asynchronously load all the required inputs before rolling through the block.,https://github.com/bitcoin/bitcoin/pull/18941#issuecomment-638553680,638553680,
andrewtoth,2020-06-04 14:23:54,"@JeremyRubin interesting, thanks. So you are suggesting to have the cache warming thread begin to access coins of the inputs in a block in, say, `ProcessNewBlock`, before it gets to `ActivateBestChainStep`?",https://github.com/bitcoin/bitcoin/pull/18941#issuecomment-638882183,638882183,
JeremyRubin,2020-06-04 19:35:58,Yep. As soon as some basic checks pass (probably just PoW?) you may as well begin to warm the coins.,https://github.com/bitcoin/bitcoin/pull/18941#issuecomment-639072581,639072581,
andrewtoth,2020-06-18 01:29:06,Closing as this doesn't appear to have attracted any interest and is unlikely to be merged.,https://github.com/bitcoin/bitcoin/pull/18941#issuecomment-645714064,645714064,
andronoob,2020-08-17 07:22:43,">On startup this file is used to warm the cache so it doesn't get cold between restarts.\n\nAs a user I just use a simple trick: `cat BTC_DATA/chainstate/* > /dev/null`.\n\nRelated: #14904, #19742 ",https://github.com/bitcoin/bitcoin/pull/18941#issuecomment-674710229,674710229,
andronoob,2020-08-17 07:32:49,"I don't care whether the cache could be warmed as quickly as possible. What I care is very simple: keep the UTXO job totally in RAM, without touching the hard drive (esp. like a DM-SMR HDD) once again.\n\nI think this should be shown in GUI, together with `blocksdir`. I think radio buttons with fancy words like ""turbo, heavy mode"" vs ""agile, light mode"" can let the user to choose how the cache s",https://github.com/bitcoin/bitcoin/pull/18941#issuecomment-674714401,674714401,
andronoob,2020-08-17 07:46:43,"You may laugh at my ignorance, but I thought I knew what ""cache"" is - I installed something like PrimoCache, in hope that such a ""cache"" can relieve the problem - now I think such idea is just dumb.\n\nMaybe it's actually not as dumb as I currently think? I don't know. I just think it's too cruel for a newbie trying to sync a full node without knowing where the typical bottleneck lies - the chai",https://github.com/bitcoin/bitcoin/pull/18941#issuecomment-674720226,674720226,
