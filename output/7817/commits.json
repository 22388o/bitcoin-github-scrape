[
  {
    "sha": "7a30ed647875abf4ce9ab1145f716d88b5341614",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo3YTMwZWQ2NDc4NzVhYmY0Y2U5YWIxMTQ1ZjcxNmQ4OGI1MzQxNjE0",
    "commit": {
      "author": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2016-04-05T11:35:55Z"
      },
      "committer": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2016-06-10T07:52:12Z"
      },
      "message": "[Qt] attribute replaceable (RBF) transactions",
      "tree": {
        "sha": "4613cd341e1513c49a1b708644ad60be2407bc69",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/4613cd341e1513c49a1b708644ad60be2407bc69"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7a30ed647875abf4ce9ab1145f716d88b5341614",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "expired_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1\n\niQIcBAABAgAGBQJXWnGtAAoJECnUvLZBb1PsC0AP/09FvAF7HCamqY2duBFg5oGP\nsFrP+EE2ung8TZPjgsVdJ7qy/lo9FxBRZbd+B/LgmuncODng4opDD1CHLkD/5G2v\n5EEE/ZHGpH0/VEhP2QQTGce762KkqA3NM+NT1dHsaADc1Cdzt7JoO4n4JntVmC6E\narOc8Bo/tgOpyPBC9ynbzpLn6XwBYa9kAPz+hulVHzd4YtQjLFFWiKmmxChqHcyi\n0AIZB1REY5ztIUkmjIu6kFfHSPXrmPTAsjmZcFpYd5pcf5laou75TSxOcc25Vdmv\n54QqP6hl97B6Z41hg4GoQVnoX6nJ8e7V0uxQ6E4fVPyoMkaa7buWfs0DxnUiaFEJ\nIdbcdQgIl5wOWCUzZZpRi9CBm/wftoDSUUz3ogg660pZRzZvrDEFxOiJxddY7/Gd\nnKBzOiX0Lf9J+s0r2r3Hl3wy1loOmi8VQGoCywXFh7GnxwlNX9hiivfHNzqUdJiG\nlu1/Cjyq3HWsqIEKYelnpmAZUOvmN0NGdAqPl0CU6WdfyoYpx4riv/HrspHbKyJ5\n1Ko2+AVLn0eQNOzncTHt+KgM9PsjlyMey0tgl7uJLVUwOZla/mW9NE4Vq0pv0iNd\nd5Mve9nTfg8df28kKN9/Tf9rx1uAvxJvEjh5p1b49uzkxqK1TnWefldBujt9zcG3\nTpsG/xBvl16+PXhin9qM\n=VsJL\n-----END PGP SIGNATURE-----",
        "payload": "tree 4613cd341e1513c49a1b708644ad60be2407bc69\nparent 0b5279f89c9afcb3af98880cc65cecd25ce29af6\nauthor Jonas Schnelli <dev@jonasschnelli.ch> 1459856155 +0200\ncommitter Jonas Schnelli <dev@jonasschnelli.ch> 1465545132 +0200\n\n[Qt] attribute replaceable (RBF) transactions\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7a30ed647875abf4ce9ab1145f716d88b5341614",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/7a30ed647875abf4ce9ab1145f716d88b5341614",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7a30ed647875abf4ce9ab1145f716d88b5341614/comments",
    "author": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "0b5279f89c9afcb3af98880cc65cecd25ce29af6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0b5279f89c9afcb3af98880cc65cecd25ce29af6",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/0b5279f89c9afcb3af98880cc65cecd25ce29af6"
      }
    ],
    "stats": {
      "total": 28,
      "additions": 26,
      "deletions": 2
    },
    "files": [
      {
        "sha": "f3a59a4884987a4bd6b34e09ee41b788af4e64f9",
        "filename": "src/Makefile.qt.include",
        "status": "modified",
        "additions": 2,
        "deletions": 1,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/7a30ed647875abf4ce9ab1145f716d88b5341614/src/Makefile.qt.include",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/7a30ed647875abf4ce9ab1145f716d88b5341614/src/Makefile.qt.include",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/Makefile.qt.include?ref=7a30ed647875abf4ce9ab1145f716d88b5341614",
        "patch": "@@ -269,7 +269,8 @@ RES_ICONS = \\\n   qt/res/icons/tx_mined.png \\\n   qt/res/icons/warning.png \\\n   qt/res/icons/verify.png \\\n-  qt/res/icons/transaction_abandoned.png\n+  qt/res/icons/transaction_abandoned.png \\\n+  qt/res/icons/transaction_replaceable.png\n \n BITCOIN_QT_CPP = \\\n   qt/bantablemodel.cpp \\"
      },
      {
        "sha": "a72319754eb6644fbc976b90db3badafbe25d2d0",
        "filename": "src/qt/bitcoin.qrc",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/7a30ed647875abf4ce9ab1145f716d88b5341614/src/qt/bitcoin.qrc",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/7a30ed647875abf4ce9ab1145f716d88b5341614/src/qt/bitcoin.qrc",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoin.qrc?ref=7a30ed647875abf4ce9ab1145f716d88b5341614",
        "patch": "@@ -50,6 +50,7 @@\n         <file alias=\"fontsmaller\">res/icons/fontsmaller.png</file>\n         <file alias=\"prompticon\">res/icons/chevron.png</file>\n         <file alias=\"transaction_abandoned\">res/icons/transaction_abandoned.png</file>\n+        <file alias=\"transaction_replaceable\">res/icons/transaction_replaceable.png</file>\n     </qresource>\n     <qresource prefix=\"/movies\">\n         <file alias=\"spinner-000\">res/movies/spinner-000.png</file>"
      },
      {
        "sha": "79cc643339297a3ab19fa3e656cb136e688bdb48",
        "filename": "src/qt/guiconstants.h",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/7a30ed647875abf4ce9ab1145f716d88b5341614/src/qt/guiconstants.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/7a30ed647875abf4ce9ab1145f716d88b5341614/src/qt/guiconstants.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/guiconstants.h?ref=7a30ed647875abf4ce9ab1145f716d88b5341614",
        "patch": "@@ -31,6 +31,8 @@ static const bool DEFAULT_SPLASHSCREEN = true;\n #define COLOR_TX_STATUS_OFFLINE QColor(192, 192, 192)\n /* Transaction list -- TX status decoration - danger, tx needs attention */\n #define COLOR_TX_STATUS_DANGER QColor(200, 100, 100)\n+/* Transaction list -- TX status decoration - mempool-replaceable */\n+#define COLOR_TX_STATUS_REPLACEABLE QColor(230, 130, 20)\n /* Transaction list -- TX status decoration - default color */\n #define COLOR_BLACK QColor(0, 0, 0)\n "
      },
      {
        "sha": "b06d11c9cc460f201d9014532870c7ceeae4e112",
        "filename": "src/qt/res/icons/transaction_replaceable.png",
        "status": "added",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/7a30ed647875abf4ce9ab1145f716d88b5341614/src/qt/res/icons/transaction_replaceable.png",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/7a30ed647875abf4ce9ab1145f716d88b5341614/src/qt/res/icons/transaction_replaceable.png",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/res/icons/transaction_replaceable.png?ref=7a30ed647875abf4ce9ab1145f716d88b5341614"
      },
      {
        "sha": "17fb055712f21819c0ad24622511612d4f20e76c",
        "filename": "src/qt/transactiondesc.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/7a30ed647875abf4ce9ab1145f716d88b5341614/src/qt/transactiondesc.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/7a30ed647875abf4ce9ab1145f716d88b5341614/src/qt/transactiondesc.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/transactiondesc.cpp?ref=7a30ed647875abf4ce9ab1145f716d88b5341614",
        "patch": "@@ -39,7 +39,7 @@ QString TransactionDesc::FormatTxStatus(const CWalletTx& wtx)\n         else if (GetAdjustedTime() - wtx.nTimeReceived > 2 * 60 && wtx.GetRequestCount() == 0)\n             return tr(\"%1/offline\").arg(nDepth);\n         else if (nDepth == 0)\n-            return tr(\"0/unconfirmed, %1\").arg((wtx.InMempool() ? tr(\"in memory pool\") : tr(\"not in memory pool\"))) + (wtx.isAbandoned() ? \", \"+tr(\"abandoned\") : \"\");\n+            return tr(\"0/unconfirmed, %1\").arg((wtx.InMempool() ? tr(\"in memory pool\") : tr(\"not in memory pool\"))) + (wtx.signalsOptInRBF() ? \", \"+tr(\"signals replaceability (optin RBF)\") : \"\") + (wtx.isAbandoned() ? \", \"+tr(\"abandoned\") : \"\");\n         else if (nDepth < 6)\n             return tr(\"%1/unconfirmed\").arg(nDepth);\n         else"
      },
      {
        "sha": "e44b5b66671630f45356e1c84d5e966590a0961b",
        "filename": "src/qt/transactionrecord.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/7a30ed647875abf4ce9ab1145f716d88b5341614/src/qt/transactionrecord.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/7a30ed647875abf4ce9ab1145f716d88b5341614/src/qt/transactionrecord.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/transactionrecord.cpp?ref=7a30ed647875abf4ce9ab1145f716d88b5341614",
        "patch": "@@ -7,6 +7,7 @@\n #include \"base58.h\"\n #include \"consensus/consensus.h\"\n #include \"main.h\"\n+#include \"policy/rbf.h\"\n #include \"timedata.h\"\n #include \"wallet/wallet.h\"\n \n@@ -239,6 +240,8 @@ void TransactionRecord::updateStatus(const CWalletTx &wtx)\n         else if (status.depth == 0)\n         {\n             status.status = TransactionStatus::Unconfirmed;\n+            if (wtx.signalsOptInRBF())\n+                status.status = TransactionStatus::Replaceable;\n             if (wtx.isAbandoned())\n                 status.status = TransactionStatus::Abandoned;\n         }"
      },
      {
        "sha": "b37d664bb0d091077884d82139b777dfdbfdbccc",
        "filename": "src/qt/transactionrecord.h",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/7a30ed647875abf4ce9ab1145f716d88b5341614/src/qt/transactionrecord.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/7a30ed647875abf4ce9ab1145f716d88b5341614/src/qt/transactionrecord.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/transactionrecord.h?ref=7a30ed647875abf4ce9ab1145f716d88b5341614",
        "patch": "@@ -31,6 +31,7 @@ class TransactionStatus\n         OpenUntilBlock,     /**< Transaction not yet final, waiting for block */\n         Offline,            /**< Not sent to any other nodes **/\n         Unconfirmed,        /**< Not yet mined into a block **/\n+        Replaceable,        /**< Replaceable by optin-RBF (bip125) **/\n         Confirming,         /**< Confirmed, but waiting for the recommended number of confirmations **/\n         Conflicted,         /**< Conflicts with other transaction or mempool **/\n         Abandoned,          /**< Abandoned from the wallet **/"
      },
      {
        "sha": "e79a5596eaf4d5f4c2879decf0b62d7707629b0f",
        "filename": "src/qt/transactiontablemodel.cpp",
        "status": "modified",
        "additions": 9,
        "deletions": 0,
        "changes": 9,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/7a30ed647875abf4ce9ab1145f716d88b5341614/src/qt/transactiontablemodel.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/7a30ed647875abf4ce9ab1145f716d88b5341614/src/qt/transactiontablemodel.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/transactiontablemodel.cpp?ref=7a30ed647875abf4ce9ab1145f716d88b5341614",
        "patch": "@@ -312,6 +312,9 @@ QString TransactionTableModel::formatTxStatus(const TransactionRecord *wtx) cons\n     case TransactionStatus::Unconfirmed:\n         status = tr(\"Unconfirmed\");\n         break;\n+    case TransactionStatus::Replaceable:\n+        status = tr(\"Unconfirmed & Replaceable\");\n+        break;\n     case TransactionStatus::Abandoned:\n         status = tr(\"Abandoned\");\n         break;\n@@ -471,6 +474,8 @@ QVariant TransactionTableModel::txStatusDecoration(const TransactionRecord *wtx)\n         return COLOR_TX_STATUS_OFFLINE;\n     case TransactionStatus::Unconfirmed:\n         return QIcon(\":/icons/transaction_0\");\n+    case TransactionStatus::Replaceable:\n+        return QIcon(\":/icons/transaction_replaceable\");\n     case TransactionStatus::Abandoned:\n         return QIcon(\":/icons/transaction_abandoned\");\n     case TransactionStatus::Confirming:\n@@ -583,6 +588,10 @@ QVariant TransactionTableModel::data(const QModelIndex &index, int role) const\n         {\n             return COLOR_TX_STATUS_DANGER;\n         }\n+        if(rec->status.status == TransactionStatus::Replaceable)\n+        {\n+            return COLOR_TX_STATUS_REPLACEABLE;\n+        }\n         // Non-confirmed (but not immature) as transactions are grey\n         if(!rec->status.countsForBalance && rec->status.status != TransactionStatus::Immature)\n         {"
      },
      {
        "sha": "b6154b1ce210bb75805e2c51bc499b33fa7c4782",
        "filename": "src/wallet/wallet.cpp",
        "status": "modified",
        "additions": 6,
        "deletions": 0,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/7a30ed647875abf4ce9ab1145f716d88b5341614/src/wallet/wallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/7a30ed647875abf4ce9ab1145f716d88b5341614/src/wallet/wallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.cpp?ref=7a30ed647875abf4ce9ab1145f716d88b5341614",
        "patch": "@@ -16,6 +16,7 @@\n #include \"main.h\"\n #include \"net.h\"\n #include \"policy/policy.h\"\n+#include \"policy/rbf.h\"\n #include \"primitives/block.h\"\n #include \"primitives/transaction.h\"\n #include \"script/script.h\"\n@@ -3475,3 +3476,8 @@ bool CMerkleTx::AcceptToMemoryPool(bool fLimitFree, CAmount nAbsurdFee)\n     CValidationState state;\n     return ::AcceptToMemoryPool(mempool, state, *this, fLimitFree, NULL, false, nAbsurdFee);\n }\n+\n+bool CMerkleTx::signalsOptInRBF() const\n+{\n+    return SignalsOptInRBF(*this);\n+}"
      },
      {
        "sha": "a701cc39e9b3978bf3ac0a4090cc578c1b6dc9b9",
        "filename": "src/wallet/wallet.h",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/7a30ed647875abf4ce9ab1145f716d88b5341614/src/wallet/wallet.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/7a30ed647875abf4ce9ab1145f716d88b5341614/src/wallet/wallet.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.h?ref=7a30ed647875abf4ce9ab1145f716d88b5341614",
        "patch": "@@ -213,6 +213,7 @@ class CMerkleTx : public CTransaction\n     bool hashUnset() const { return (hashBlock.IsNull() || hashBlock == ABANDON_HASH); }\n     bool isAbandoned() const { return (hashBlock == ABANDON_HASH); }\n     void setAbandoned() { hashBlock = ABANDON_HASH; }\n+    bool signalsOptInRBF() const;\n };\n \n /** "
      }
    ]
  }
]