[
  {
    "sha": "faf7623106af2e106a3d9777d714d6afeb2bbd83",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYWY3NjIzMTA2YWYyZTEwNmEzZDk3NzdkNzE0ZDZhZmViMmJiZDgz",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-05-13T10:54:14Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-06-13T11:52:21Z"
      },
      "message": "fuzz: Call const member functions in addrman fuzz test only once",
      "tree": {
        "sha": "41c46c24491fb148143b5f3c9da334faa5ab3be2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/41c46c24491fb148143b5f3c9da334faa5ab3be2"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/faf7623106af2e106a3d9777d714d6afeb2bbd83",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUiutAwAg6UzaCIJe9W0VWCBQqguGQZ4tEdr2AFeRy8DP/yQoRKO9G8dX9tFTQgI\nZ+8vhuzTBfUxgTBNiRxCFyYsQPu2JCVbFDO96NPwqYudWpDI1SHUPMAEVdFzb8sk\nt2E8CtEiWjsTZphMSk0oi83TJexZT/ARw56TX7SxjAB6LiRQ+vGRvs1e8eqfeqhR\nd18d2A8+/dT3bonmwLNq6kK5U7zrpl0ahdOhp3X9jisWr15T35K5CkSFWN9oa3Sq\nhdSqyvjUNajQSxeYCMbIrHN7h2S3+A/Ua2YzpVSNCwzCZzWc5+fe9YkYCzpg3ScS\n+pWlIOKIXytxAtSZzJzUaoGe3Z45aY1TD/DuUHF6kGNQcOgcit5RhA3pYiDFRNG5\ne0FZvC05eAN1FxhwAkNqC2SKKeFJu89yyplho9EIT6RfnpDaE6PDK6VC0YDVPjQB\nSYUb7UNedv+92BT4jLntaTT2AGwSGBdGWmxvm9U6D7FcW4wNBwC/9Q7xjJSPk98M\n040MAeOp\n=aygC\n-----END PGP SIGNATURE-----",
        "payload": "tree 41c46c24491fb148143b5f3c9da334faa5ab3be2\nparent 9c1ec689f353d3d7c34695a074f82bb2ea449538\nauthor MarcoFalke <falke.marco@gmail.com> 1620903254 +0200\ncommitter MarcoFalke <falke.marco@gmail.com> 1623585141 +0200\n\nfuzz: Call const member functions in addrman fuzz test only once\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/faf7623106af2e106a3d9777d714d6afeb2bbd83",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/faf7623106af2e106a3d9777d714d6afeb2bbd83",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/faf7623106af2e106a3d9777d714d6afeb2bbd83/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "9c1ec689f353d3d7c34695a074f82bb2ea449538",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9c1ec689f353d3d7c34695a074f82bb2ea449538",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/9c1ec689f353d3d7c34695a074f82bb2ea449538"
      }
    ],
    "stats": {
      "total": 23,
      "additions": 9,
      "deletions": 14
    },
    "files": [
      {
        "sha": "b5b402829b4482e71a3ac5605f2369fd2a61d1e6",
        "filename": "src/test/fuzz/addrman.cpp",
        "status": "modified",
        "additions": 9,
        "deletions": 14,
        "changes": 23,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/faf7623106af2e106a3d9777d714d6afeb2bbd83/src/test/fuzz/addrman.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/faf7623106af2e106a3d9777d714d6afeb2bbd83/src/test/fuzz/addrman.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/fuzz/addrman.cpp?ref=faf7623106af2e106a3d9777d714d6afeb2bbd83",
        "patch": "@@ -56,15 +56,6 @@ FUZZ_TARGET_INIT(addrman, initialize_addrman)\n             [&] {\n                 (void)addr_man.SelectTriedCollision();\n             },\n-            [&] {\n-                (void)addr_man.Select(fuzzed_data_provider.ConsumeBool());\n-            },\n-            [&] {\n-                (void)addr_man.GetAddr(\n-                    /* max_addresses */ fuzzed_data_provider.ConsumeIntegralInRange<size_t>(0, 4096),\n-                    /* max_pct */ fuzzed_data_provider.ConsumeIntegralInRange<size_t>(0, 4096),\n-                    /* network */ std::nullopt);\n-            },\n             [&] {\n                 const std::optional<CAddress> opt_address = ConsumeDeserializable<CAddress>(fuzzed_data_provider);\n                 const std::optional<CNetAddr> opt_net_addr = ConsumeDeserializable<CNetAddr>(fuzzed_data_provider);\n@@ -109,12 +100,16 @@ FUZZ_TARGET_INIT(addrman, initialize_addrman)\n                 if (opt_service) {\n                     addr_man.SetServices(*opt_service, ConsumeWeakEnum(fuzzed_data_provider, ALL_SERVICE_FLAGS));\n                 }\n-            },\n-            [&] {\n-                (void)addr_man.Check();\n             });\n     }\n-    (void)addr_man.size();\n+    const CAddrMan& const_addr_man{addr_man};\n+    (void)/*const_*/addr_man.GetAddr(\n+        /* max_addresses */ fuzzed_data_provider.ConsumeIntegralInRange<size_t>(0, 4096),\n+        /* max_pct */ fuzzed_data_provider.ConsumeIntegralInRange<size_t>(0, 4096),\n+        /* network */ std::nullopt);\n+    (void)/*const_*/addr_man.Check();\n+    (void)/*const_*/addr_man.Select(fuzzed_data_provider.ConsumeBool());\n+    (void)const_addr_man.size();\n     CDataStream data_stream(SER_NETWORK, PROTOCOL_VERSION);\n-    data_stream << addr_man;\n+    data_stream << const_addr_man;\n }"
      }
    ]
  }
]