[
  {
    "sha": "fa652b229eeb22ed742f8790fac5e41302e6012d",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYTY1MmIyMjllZWIyMmVkNzQyZjg3OTBmYWM1ZTQxMzAyZTYwMTJk",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2019-04-04T14:43:22Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2019-04-04T14:41:36Z"
      },
      "message": "rpc: Add some doxygen comments to utils",
      "tree": {
        "sha": "54251ad858e16bb81e608428637fd44e5f3c3491",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/54251ad858e16bb81e608428637fd44e5f3c3491"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa652b229eeb22ed742f8790fac5e41302e6012d",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGcBAABCgAGBQJcKq2AAAoJEM4rdWl+aaVIJs4MAJUo2XBFfHKtqcGrc54fZTd5\nh1DDqVf7a12TRtB+3tNEBn6qsotVjX6Dd9FHlKsujwxdrd68YvcIOrNSwrWGLAY+\n0TTuuKZa/QMqYq//ATfvQ8V0XMc7b3SijbmEP/MabgUIrPcLNIT4jPl0qaJ18Ij6\n0oYvKbLPMqzgC5CE4yEfeG3EpDAgCpaheyL0fD6gJSqmh4a0XpgBIRMgFGShuF29\nhZsE0sAEGfYGjk8JZBsSmaCUeA/QHcFT9HoE3roZ0NplHXeb7afnCUfhXV9lUW42\nZ+BdT2qN9QrQMoNHREsK6ZrVOcKjJhQQqP9t+BMTeeFXiLlTFbZf4qrpMIasWqF6\nWbF+2jZhRFzk5tJQ8r5pap59BgrhyEIGENPayMydmtfJBLCbmXk306oJXIWNVw+e\nlSPd0Op0m823tJND1UWEjcA4sqW5M5JFc2jCxjC3hKb2Xw1WyuPnfkXH3YyGYjSX\ni36N7J5YB48S407z4AvSfCHcmC0759n6+RsM3L3oKg==\n=vuCy\n-----END PGP SIGNATURE-----",
        "payload": "tree 54251ad858e16bb81e608428637fd44e5f3c3491\nparent 2c364fde423e74b4e03ebcff4582a9db7a6c4e4b\nauthor MarcoFalke <falke.marco@gmail.com> 1554389002 -0400\ncommitter MarcoFalke <falke.marco@gmail.com> 1554388896 -0400\n\nrpc: Add some doxygen comments to utils\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa652b229eeb22ed742f8790fac5e41302e6012d",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fa652b229eeb22ed742f8790fac5e41302e6012d",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa652b229eeb22ed742f8790fac5e41302e6012d/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "2c364fde423e74b4e03ebcff4582a9db7a6c4e4b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2c364fde423e74b4e03ebcff4582a9db7a6c4e4b",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/2c364fde423e74b4e03ebcff4582a9db7a6c4e4b"
      }
    ],
    "stats": {
      "total": 19,
      "additions": 19,
      "deletions": 0
    },
    "files": [
      {
        "sha": "bac4a3762e47b0f444d2f2a996045df4969547fa",
        "filename": "src/rpc/util.cpp",
        "status": "modified",
        "additions": 19,
        "deletions": 0,
        "changes": 19,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa652b229eeb22ed742f8790fac5e41302e6012d/src/rpc/util.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa652b229eeb22ed742f8790fac5e41302e6012d/src/rpc/util.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/util.cpp?ref=fa652b229eeb22ed742f8790fac5e41302e6012d",
        "patch": "@@ -165,13 +165,21 @@ UniValue JSONRPCTransactionError(TransactionError terr, const std::string& err_s\n     }\n }\n \n+/**\n+ * A pair of strings that can be aligned (through padding) with other Sections\n+ * later on\n+ */\n struct Section {\n     Section(const std::string& left, const std::string& right)\n         : m_left{left}, m_right{right} {}\n     const std::string m_left;\n     const std::string m_right;\n };\n \n+/**\n+ * Keeps track of RPCArgs by transforming them into sections for the purpose\n+ * of serializing everything to a single string\n+ */\n struct Sections {\n     std::vector<Section> m_sections;\n     size_t m_max_pad{0};\n@@ -182,12 +190,20 @@ struct Sections {\n         m_sections.push_back(s);\n     }\n \n+    /**\n+     * Serializing RPCArgs depends on the outer type. Only arrays and\n+     * dictionaries can be nested in json. The top-level outer type is \"named\n+     * arguments\", a mix between a dictionary and arrays.\n+     */\n     enum class OuterType {\n         ARR,\n         OBJ,\n         NAMED_ARG, // Only set on first recursion\n     };\n \n+    /**\n+     * Recursive helper to translate an RPCArg into sections\n+     */\n     void Push(const RPCArg& arg, const size_t current_indent = 5, const OuterType outer_type = OuterType::NAMED_ARG)\n     {\n         const auto indent = std::string(current_indent, ' ');\n@@ -241,6 +257,9 @@ struct Sections {\n         }\n     }\n \n+    /**\n+     * Concatenate all sections with proper padding\n+     */\n     std::string ToString() const\n     {\n         std::string ret;"
      }
    ]
  },
  {
    "sha": "fa26eb5e8f3b0843739d404630913006385505ae",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYTI2ZWI1ZThmM2IwODQzNzM5ZDQwNDYzMDkxMzAwNjM4NTUwNWFl",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2019-04-04T15:04:14Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2019-04-04T14:49:09Z"
      },
      "message": "rpc: RPCHelpMan: Always push_name when outer type is an object",
      "tree": {
        "sha": "7cb6c6ac2c512393ac8c05d31f93313d655b53c0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7cb6c6ac2c512393ac8c05d31f93313d655b53c0"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa26eb5e8f3b0843739d404630913006385505ae",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGcBAABCgAGBQJcKq2AAAoJEM4rdWl+aaVIf9IL/Rcc6eSJCGyzw9+6qrezuADN\nie/BEQs3GViFwVxx237cvYAX3T/rMO0VUxMXASc+pNKlZT1H5rN+Q7oqXQM2yaS8\ncZfsyW3qFJ+GvTdbqHbYMJ3C5xZhr2RTuVMVwhQhRpK7h2TXgju2bBjqSZWj1YHb\nDmAhEsnjbv+dGI49oErBYdxlljVyWNcv0NSKPqgczbQVsbBUZyKWh0n3WURjCIAv\nyv3s/U3+PS+TBI2bvIzeEnpSUXAxSsmBt7DtpLE86NQqekmEygTj+r181G2VR56u\ncjqIAVU0U/v8SMsPHeZRM4Zp78D9KMvncmXIKAjhHMjx0LtpK4ryoLqOEekx2+zr\nbKGXNFsjJLilM5rgrvuc77tMTBlKWt04v8ZoKL4DaAMkbSJMzyUWN19TuiwG7+6F\nwjOMe18mTY+kpuAysUVNofRZwB5q7XCh4vHjwIeu3oqCp7eKU/lPTkkrj0rXvbDD\n8s3thkjpRUM6vrRTO+fbUjnr+u6VEYYt2pAn6XJLhw==\n=y8lr\n-----END PGP SIGNATURE-----",
        "payload": "tree 7cb6c6ac2c512393ac8c05d31f93313d655b53c0\nparent fa652b229eeb22ed742f8790fac5e41302e6012d\nauthor MarcoFalke <falke.marco@gmail.com> 1554390254 -0400\ncommitter MarcoFalke <falke.marco@gmail.com> 1554389349 -0400\n\nrpc: RPCHelpMan: Always push_name when outer type is an object\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa26eb5e8f3b0843739d404630913006385505ae",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fa26eb5e8f3b0843739d404630913006385505ae",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa26eb5e8f3b0843739d404630913006385505ae/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "fa652b229eeb22ed742f8790fac5e41302e6012d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa652b229eeb22ed742f8790fac5e41302e6012d",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/fa652b229eeb22ed742f8790fac5e41302e6012d"
      }
    ],
    "stats": {
      "total": 10,
      "additions": 6,
      "deletions": 4
    },
    "files": [
      {
        "sha": "4cd63fada62c359e9a23957acd8093f15ab88f66",
        "filename": "src/rpc/util.cpp",
        "status": "modified",
        "additions": 6,
        "deletions": 4,
        "changes": 10,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa26eb5e8f3b0843739d404630913006385505ae/src/rpc/util.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa26eb5e8f3b0843739d404630913006385505ae/src/rpc/util.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/util.cpp?ref=fa26eb5e8f3b0843739d404630913006385505ae",
        "patch": "@@ -208,6 +208,8 @@ struct Sections {\n     {\n         const auto indent = std::string(current_indent, ' ');\n         const auto indent_next = std::string(current_indent + 2, ' ');\n+        const bool push_name{outer_type == OuterType::OBJ}; // Dictionary keys must have a name\n+\n         switch (arg.m_type) {\n         case RPCArg::Type::STR_HEX:\n         case RPCArg::Type::STR:\n@@ -217,10 +219,10 @@ struct Sections {\n         case RPCArg::Type::BOOL: {\n             if (outer_type == OuterType::NAMED_ARG) return; // Nothing more to do for non-recursive types on first recursion\n             auto left = indent;\n-            if (arg.m_type_str.size() != 0 && outer_type == OuterType::OBJ) {\n+            if (arg.m_type_str.size() != 0 && push_name) {\n                 left += \"\\\"\" + arg.m_name + \"\\\": \" + arg.m_type_str.at(0);\n             } else {\n-                left += outer_type == OuterType::OBJ ? arg.ToStringObj(/* oneline */ false) : arg.ToString(/* oneline */ false);\n+                left += push_name ? arg.ToStringObj(/* oneline */ false) : arg.ToString(/* oneline */ false);\n             }\n             left += \",\";\n             PushSection({left, arg.ToDescriptionString()});\n@@ -229,7 +231,7 @@ struct Sections {\n         case RPCArg::Type::OBJ:\n         case RPCArg::Type::OBJ_USER_KEYS: {\n             const auto right = outer_type == OuterType::NAMED_ARG ? \"\" : arg.ToDescriptionString();\n-            PushSection({indent + \"{\", right});\n+            PushSection({indent + (push_name ? \"\\\"\" + arg.m_name + \"\\\": \" : \"\") + \"{\", right});\n             for (const auto& arg_inner : arg.m_inner) {\n                 Push(arg_inner, current_indent + 2, OuterType::OBJ);\n             }\n@@ -241,7 +243,7 @@ struct Sections {\n         }\n         case RPCArg::Type::ARR: {\n             auto left = indent;\n-            left += outer_type == OuterType::OBJ ? \"\\\"\" + arg.m_name + \"\\\": \" : \"\";\n+            left += push_name ? \"\\\"\" + arg.m_name + \"\\\": \" : \"\";\n             left += \"[\";\n             const auto right = outer_type == OuterType::NAMED_ARG ? \"\" : arg.ToDescriptionString();\n             PushSection({left, right});"
      }
    ]
  }
]