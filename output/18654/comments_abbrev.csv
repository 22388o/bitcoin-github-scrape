DrahtBot,2020-04-15 23:56:32,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #19262 (rpc: Replace OMITTED_NAMED_ARG with OMITTED by MarcoFalke)\n* #19168 (Refactor: Improve setup_clean_chain semantic",https://github.com/bitcoin/bitcoin/pull/18654#issuecomment-614337121,614337121,
Sjors,2020-04-22 18:15:29,Concept ACK. I wish there was a way to prevent duplicating walls of help text.,https://github.com/bitcoin/bitcoin/pull/18654#issuecomment-617945344,617945344,
MarcoFalke,2020-04-22 18:28:25,"> I wish there was a way to prevent duplicating walls of help text.\n\n`RPCHelpMan` can not be duplicated because it takes the RPC method's name, but anything you pass to RPCHelpMan are basic C++11 structs that can be made const globals (or returned by helper functions like `GetBumpFee{HelpText,Args,...}`.) and then passed into the rpc help man.",https://github.com/bitcoin/bitcoin/pull/18654#issuecomment-617952407,617952407,
achow101,2020-04-23 19:57:59,"> What's your vision for (future) descriptor wallets with private keys as e.g. part of a multisig setup (or a coinjoin)? Should those use `psbtbumpfee`? And in the context of single signature hardware wallet setups, like #16546, can those still use `bumpfee`, because PSBT is only used internally?\n\nThe idea is for `bumpfee` to be used and available only when the wallet is actually able to creat",https://github.com/bitcoin/bitcoin/pull/18654#issuecomment-618631161,618631161,
Sjors,2020-04-24 18:23:05,"Ok, that makes sense. Can you add some code comments around the `bumpfee` lines of code that need to be removed during deprecation (or wrap it in an `if` statement, even though that's currently redundant)? Maybe also clarify your intention in a source comment.",https://github.com/bitcoin/bitcoin/pull/18654#issuecomment-619172777,619172777,
luke-jr,2020-05-18 22:06:45,"Thoughts on using the same function for both calls, and simply checking `request.strMethod` to decide to bail out early?",https://github.com/bitcoin/bitcoin/pull/18654#issuecomment-630459630,630459630,
achow101,2020-05-19 20:50:52,"> Thoughts on using the same function for both calls, and simply checking `request.strMethod` to decide to bail out early?\n\nThat's kind of what the first commit is doing. Most of the duplication is in the help text, which I don't think can be really deduplicated since some differences are required.",https://github.com/bitcoin/bitcoin/pull/18654#issuecomment-631075221,631075221,
luke-jr,2020-05-20 22:53:51,I was thinking something more like this: https://github.com/bitcoin/bitcoin/compare/0.20...luke-jr:rpc_psbtbumpfee-0.20,https://github.com/bitcoin/bitcoin/pull/18654#issuecomment-631774923,631774923,
Sjors,2020-05-28 09:07:04,I like @luke-jr's approach. We can always duplicate the code if it these branches become too tedious.,https://github.com/bitcoin/bitcoin/pull/18654#issuecomment-635217954,635217954,
Sjors,2020-06-08 10:37:22,See also #19192 for another approach to de-duplicating RPC help copy.,https://github.com/bitcoin/bitcoin/pull/18654#issuecomment-640522003,640522003,
achow101,2020-06-12 16:42:07,Rebased this and changed it to be similar to @luke-jr suggestion.,https://github.com/bitcoin/bitcoin/pull/18654#issuecomment-643376431,643376431,
achow101,2020-06-16 21:19:29,"> `psbtbumpfee` doesn't show up in the help list. You can fix that by adding a short wrapper and referencing that from `CRPCCommand`, or perhaps @MarcoFalke has a better idea:\n\nThat's interesting. I've added the wrapper as you suggested.\n\n> When a wallet has private keys, the PSBT isn't signed. That's either a bug or something to document.\n\nI think this is existing behavior.",https://github.com/bitcoin/bitcoin/pull/18654#issuecomment-645017714,645017714,
Sjors,2020-06-17 15:38:43,"utACK 39d39f7b77c5ef39ec9e877715a06ce962c442d6\n\n> I think this is existing behavior.\n\nNot really; if your wallet had private keys, it would never create a PSBT, signed or otherwise. But it can wait for another PR.",https://github.com/bitcoin/bitcoin/pull/18654#issuecomment-645451811,645451811,
Sjors,2020-07-06 11:52:14,re-utACK 79d6332,https://github.com/bitcoin/bitcoin/pull/18654#issuecomment-654187066,654187066,
instagibbs,2020-07-13 16:15:23,"concept/approach ACK, these are advanced uses that can be adapted to easily.",https://github.com/bitcoin/bitcoin/pull/18654#issuecomment-657653653,657653653,
luke-jr,2020-08-10 01:03:49,">That's interesting. I've added the wrapper as you suggested.\n\nPlease at least add comments as to why it's there?",https://github.com/bitcoin/bitcoin/pull/18654#issuecomment-671125786,671125786,
achow101,2020-08-10 15:56:05,"> > That's interesting. I've added the wrapper as you suggested.\n> \n> Please at least add comments as to why it's there?\n\nWill do if I need to push again.",https://github.com/bitcoin/bitcoin/pull/18654#issuecomment-671439695,671439695,
Sjors,2020-04-23 15:46:17,/bumpfee/psbtbumpfee,https://github.com/bitcoin/bitcoin/pull/18654#discussion_r413910879,413910879,src/wallet/rpcwallet.cpp
achow101,2020-04-23 19:55:44,Done,https://github.com/bitcoin/bitcoin/pull/18654#discussion_r414082066,414082066,src/wallet/rpcwallet.cpp
luke-jr,2020-06-12 19:01:53,"Missing space after ""transaction\'s""",https://github.com/bitcoin/bitcoin/pull/18654#discussion_r439594218,439594218,src/wallet/rpcwallet.cpp
luke-jr,2020-06-12 19:02:02,"""\n"" should be outside conditional",https://github.com/bitcoin/bitcoin/pull/18654#discussion_r439594283,439594283,src/wallet/rpcwallet.cpp
luke-jr,2020-06-12 19:02:20,Example should use `request.strMethod`,https://github.com/bitcoin/bitcoin/pull/18654#discussion_r439594393,439594393,src/wallet/rpcwallet.cpp
luke-jr,2020-06-12 19:03:31,Needs to be hidden for psbtbumpfee.,https://github.com/bitcoin/bitcoin/pull/18654#discussion_r439594908,439594908,src/wallet/rpcwallet.cpp
achow101,2020-06-12 20:55:20,Fixed.,https://github.com/bitcoin/bitcoin/pull/18654#discussion_r439638343,439638343,src/wallet/rpcwallet.cpp
achow101,2020-06-12 20:55:24,Fixed.,https://github.com/bitcoin/bitcoin/pull/18654#discussion_r439638375,439638375,src/wallet/rpcwallet.cpp
achow101,2020-06-12 20:55:28,Fixed.,https://github.com/bitcoin/bitcoin/pull/18654#discussion_r439638394,439638394,src/wallet/rpcwallet.cpp
achow101,2020-06-12 20:55:59,Oh.. I've grabbed your commit that adds `RPCResult::Type::HIDDEN` to handle this.,https://github.com/bitcoin/bitcoin/pull/18654#discussion_r439638612,439638612,src/wallet/rpcwallet.cpp
MarcoFalke,2020-06-13 12:46:07,"I think it doesn't make sense to push an rpc result into the help manager and then tell the manager to discard it. Wouldn't it make more sense to not push it in the first place? This should be trivial to achieve with Cat\n\n```cpp\nRPCResult::Type::OBJ, """", """", Cat(Cat({\n    {STR, ""psbt"", ...},\n  },\n  std::vector<RPCResult>{want_psbt ? {} : {STR_HEX, ""txid"", ...}}),\n  {\n    {STR_AMOUN",https://github.com/bitcoin/bitcoin/pull/18654#discussion_r439736656,439736656,src/wallet/rpcwallet.cpp
achow101,2020-06-13 16:27:52,"I agree that it doesn't make sense to push and then hide. I was originally trying to do something similar to this but couldn't get it to work. I was also unable to get your suggestion to work. It fails with\n\n```\nwallet/rpcwallet.cpp:3270:58: error: no matching function for call to ‘std::vector<RPCResult>::vector(<brace-enclosed initializer list>)’\n 3270 |                         std::vecto",https://github.com/bitcoin/bitcoin/pull/18654#discussion_r439751103,439751103,src/wallet/rpcwallet.cpp
MarcoFalke,2020-06-13 16:55:11,"Ah, not your fault. That `{}` means both ""constructor"" and ""initializer list"" is one of the countless design flaws of c++. `{{}}` should work.\n\nThis diff compiles (haven't tested what it doesn, though):\n\n```diff\ndiff --git a/src/wallet/rpcwallet.cpp b/src/wallet/rpcwallet.cpp\nindex de21f23da3..e5ecc6a451 100644\n--- a/src/wallet/rpcwallet.cpp\n+++ b/src/wallet/rpcwallet.cpp\n@@ -326",https://github.com/bitcoin/bitcoin/pull/18654#discussion_r439752710,439752710,src/wallet/rpcwallet.cpp
achow101,2020-06-13 17:56:47,Done. Dropped the commit adding `HIDDEN`,https://github.com/bitcoin/bitcoin/pull/18654#discussion_r439756815,439756815,src/wallet/rpcwallet.cpp
Sjors,2020-06-16 10:12:08,nit: fix pre-existing indentation (in separate commit),https://github.com/bitcoin/bitcoin/pull/18654#discussion_r440740024,440740024,src/wallet/rpcwallet.cpp
achow101,2020-06-16 21:19:35,Done,https://github.com/bitcoin/bitcoin/pull/18654#discussion_r441148504,441148504,src/wallet/rpcwallet.cpp
fjahr,2020-08-12 10:28:43,nit: This comment doesn't seem to fit here 100% anymore after the check for the wallet flag was moved forward.,https://github.com/bitcoin/bitcoin/pull/18654#discussion_r469162033,469162033,src/wallet/rpcwallet.cpp
fjahr,2020-08-12 21:55:09,"nit: Could be slightly improved if you have to retouch since the 'creating a new transaction' part is still true. It is just not signed and committed if I see that correctly.\n\n```suggestion\n        + std::string(want_psbt ? ""Returns a PSBT with the new, unsigned transaction.\n"" : """") +\n```",https://github.com/bitcoin/bitcoin/pull/18654#discussion_r469568880,469568880,src/wallet/rpcwallet.cpp
