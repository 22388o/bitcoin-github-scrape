gmaxwell,2015-04-29T00:08:58Z,"This was reported on IRC by smccully; either of the two internal checks fix my reproduction of his problem.\n\nAn implication of this is that it makes it harder to intentionally fork testnet-- due to requiring getting it past IsInitialBlockDownload, which may be undesirable. (Though you should be able to syncup then invalidate block and mine ahead).\n",https://github.com/bitcoin/bitcoin/pull/6079#issuecomment-97269244,97269244,
laanwj,2015-04-29T07:24:06Z,This may be solved by `Bugfix: Fix testnet-in-a-box use case` #5987 as well (or at least overlaps in scope).\n,https://github.com/bitcoin/bitcoin/pull/6079#issuecomment-97330888,97330888,
laanwj,2015-05-11T10:35:06Z,"See here: https://github.com/laanwj/bitcoin/commit/89388eb36fe3e220605b9f4ffc46f4ad7e8fadb7\n\nI've tested it with and without the change to BitcoinMiner, it catches the same problem.\n",https://github.com/bitcoin/bitcoin/pull/6079#issuecomment-100862041,100862041,
gmaxwell,2015-05-11T21:52:16Z,That looks good to me.\n,https://github.com/bitcoin/bitcoin/pull/6079#issuecomment-101059448,101059448,
laanwj,2015-05-12T08:58:39Z,"Ok, submitted that as pull, closing in favor of #6123\n",https://github.com/bitcoin/bitcoin/pull/6079#issuecomment-101200538,101200538,
ghost,2015-05-18T15:14:58Z,Great. Adding a reference to #5742 for tracking purposes.\n,https://github.com/bitcoin/bitcoin/pull/6079#issuecomment-103093119,103093119,
laanwj,2015-05-11T10:10:12Z,I've reproduced the issue to verify: the underlying problem appears to be that the `std::runtime_exception` raised by CreateNewBlock in case `TestBlockValidity` fails is not caught by the internal miner. The other uses of this function in RPC are protected.\n\n```\nterminate called after throwing an instance of 'std::runtime_error'\n  what():  CreateNewBlock() : TestBlockValidity failed\n```\n\nAd,https://github.com/bitcoin/bitcoin/pull/6079#discussion_r30026688,30026688,src/miner.cpp
