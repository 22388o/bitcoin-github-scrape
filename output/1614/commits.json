[
  {
    "sha": "3d88c9b4d3714daddd77ab72d0e44b61c0b9800a",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzozZDg4YzliNGQzNzE0ZGFkZGQ3N2FiNzJkMGU0NGI2MWMwYjk4MDBh",
    "commit": {
      "author": {
        "name": "Philip Kaufmann",
        "email": "phil.kaufmann@t-online.de",
        "date": "2012-07-20T06:45:49Z"
      },
      "committer": {
        "name": "Philip Kaufmann",
        "email": "phil.kaufmann@t-online.de",
        "date": "2012-08-03T12:51:51Z"
      },
      "message": "Bitcoin-Qt (Windows only): enable DEP for bitcoin-qt.exe\n\n- this enables DEP on all Windows version which support the\n  SetProcessDEPPolicy() call in Kernel32.dll\n- use a dynamic approach via GetProcAddress() to not rely on headers or\n  compiler libs\n- this is the same way the Tor-project does it",
      "tree": {
        "sha": "79e874a66ff11c6742cf875dd34cbf1592fe666a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/79e874a66ff11c6742cf875dd34cbf1592fe666a"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3d88c9b4d3714daddd77ab72d0e44b61c0b9800a",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3d88c9b4d3714daddd77ab72d0e44b61c0b9800a",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/3d88c9b4d3714daddd77ab72d0e44b61c0b9800a",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3d88c9b4d3714daddd77ab72d0e44b61c0b9800a/comments",
    "author": null,
    "committer": null,
    "parents": [
      {
        "sha": "dd199d0ebd086262626a5cc0ce794de6a477d731",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/dd199d0ebd086262626a5cc0ce794de6a477d731",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/dd199d0ebd086262626a5cc0ce794de6a477d731"
      }
    ],
    "stats": {
      "total": 16,
      "additions": 14,
      "deletions": 2
    },
    "files": [
      {
        "sha": "2937643bca101922678f0963251cb642e00afef8",
        "filename": "src/init.cpp",
        "status": "modified",
        "additions": 14,
        "deletions": 2,
        "changes": 16,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/3d88c9b4d3714daddd77ab72d0e44b61c0b9800a/src/init.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/3d88c9b4d3714daddd77ab72d0e44b61c0b9800a/src/init.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/init.cpp?ref=3d88c9b4d3714daddd77ab72d0e44b61c0b9800a",
        "patch": "@@ -312,10 +312,22 @@ bool AppInit2()\n     // Disable confusing \"helpful\" text message on abort, Ctrl-C\n     _set_abort_behavior(0, _WRITE_ABORT_MSG | _CALL_REPORTFAULT);\n #endif\n-#ifndef WIN32\n-    umask(077);\n+#ifdef WIN32\n+    // Enable Data Execution Prevention (DEP)\n+    // Minimum supported OS versions: WinXP SP3, WinVista >= SP1, Win Server 2008\n+    // A failure is non-critical and needs no further attention!\n+#ifndef PROCESS_DEP_ENABLE\n+// We define this here, because GCCs winbase.h limits this to _WIN32_WINNT >= 0x0601 (Windows 7),\n+// which is not correct. Can be removed, when GCCs winbase.h is fixed!\n+#define PROCESS_DEP_ENABLE 0x00000001\n+#endif\n+    typedef BOOL (WINAPI *PSETPROCDEPPOL)(DWORD);\n+    PSETPROCDEPPOL setProcDEPPol = (PSETPROCDEPPOL)GetProcAddress(GetModuleHandleA(\"Kernel32.dll\"), \"SetProcessDEPPolicy\");\n+    if (setProcDEPPol != NULL) setProcDEPPol(PROCESS_DEP_ENABLE);\n #endif\n #ifndef WIN32\n+    umask(077);\n+\n     // Clean shutdown on SIGTERM\n     struct sigaction sa;\n     sa.sa_handler = HandleSIGTERM;"
      }
    ]
  }
]