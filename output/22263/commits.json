[
  {
    "sha": "615c1adfb07b9b466173166dc2e53ace540e4b32",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo2MTVjMWFkZmIwN2I5YjQ2NjE3MzE2NmRjMmU1M2FjZTU0MGU0YjMy",
    "commit": {
      "author": {
        "name": "James O'Beirne",
        "email": "james.obeirne@pm.me",
        "date": "2021-06-16T20:27:20Z"
      },
      "committer": {
        "name": "James O'Beirne",
        "email": "james.obeirne@pm.me",
        "date": "2021-06-17T13:47:08Z"
      },
      "message": "refactor: wrap CCoinsViewCursor in unique_ptr\n\nSpecifically with CCoinsViewDB, if a raw cursor is allocated and\nnot freed, a cryptic leveldb assertion failure occurs on\nCCoinsViewDB destruction.\n\nSee: https://github.com/google/leveldb/issues/142#issuecomment-414418135",
      "tree": {
        "sha": "4261a142c5886d8ec309292c0b91bd78e6861b8c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/4261a142c5886d8ec309292c0b91bd78e6861b8c"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/615c1adfb07b9b466173166dc2e53ace540e4b32",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEGNRVI1NPYuZCSIrGepNdrbLETwUFAmDLUl8ACgkQepNdrbLE\nTwUbbQ/9Eg59+nwTZbdhdhOoQhc/gGNQ0BesZTiVM3UGw7cAlISYxrF9ON2hX5yp\njUSvBX21dvXAzr1Jf2nNIvz6qBregYFnH4NJRJtFi2KcowaC9b46frXBCUS788SJ\nUx09t9NrElm8p+hFt28R06YF23cJJ8Jw48zb4R7LeTU4OJb1PXV+dZXiKJBGcbYQ\nHbQBVUVfZsyTId42yuIwwywDFTj8kcwVqitXppTwbytKxB5Q5mH/UqGzyx0g9vtm\n9jxASlf5hbbxcDIg8BY4roXUxhdtNflZEScUsSro9AfVgXLIxyrH5zl5Rkqi9KOE\nz3/X98k0MDhct5j0+alsB90K0YbJUgosexCJ2gOpvMZyZYVbS15w7CRYotU7rqgW\n7y91MFVVVmZZIXi/9M1fGbj3zmXoRQ71KjLB83J3/yWQp9KvuoYZZoi2ajA7dTwu\nIUcY5pGuF0FaH1jMA9icj1F8SryPFUnA3N0ORYnJ1U44naZwGMbtu0U7LHj5z+61\nc6XVhb8KOcp/ye/3R2jM8tpC992pvr75rjctmxZEgZ/zX2/UQ4J4A1A+fYX5Mtlg\n0uxUxld56AZy8oijWWyztrt3v75xWKYlQN5Zj34PXJ78Yq3L59Z6XNAORtxQXT2q\nxU0GsLnuaJbTEQ4vFTwvmz7PiipVFpqK4E9WEl98DncFy509h/w=\n=5taA\n-----END PGP SIGNATURE-----",
        "payload": "tree 4261a142c5886d8ec309292c0b91bd78e6861b8c\nparent 6bc1eca01b2f88e081e71b783b3d45287700f8a5\nauthor James O'Beirne <james.obeirne@pm.me> 1623875240 -0400\ncommitter James O'Beirne <james.obeirne@pm.me> 1623937628 -0400\n\nrefactor: wrap CCoinsViewCursor in unique_ptr\n\nSpecifically with CCoinsViewDB, if a raw cursor is allocated and\nnot freed, a cryptic leveldb assertion failure occurs on\nCCoinsViewDB destruction.\n\nSee: https://github.com/google/leveldb/issues/142#issuecomment-414418135\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/615c1adfb07b9b466173166dc2e53ace540e4b32",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/615c1adfb07b9b466173166dc2e53ace540e4b32",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/615c1adfb07b9b466173166dc2e53ace540e4b32/comments",
    "author": {
      "login": "jamesob",
      "id": 73197,
      "node_id": "MDQ6VXNlcjczMTk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jamesob",
      "html_url": "https://github.com/jamesob",
      "followers_url": "https://api.github.com/users/jamesob/followers",
      "following_url": "https://api.github.com/users/jamesob/following{/other_user}",
      "gists_url": "https://api.github.com/users/jamesob/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
      "organizations_url": "https://api.github.com/users/jamesob/orgs",
      "repos_url": "https://api.github.com/users/jamesob/repos",
      "events_url": "https://api.github.com/users/jamesob/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jamesob/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jamesob",
      "id": 73197,
      "node_id": "MDQ6VXNlcjczMTk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jamesob",
      "html_url": "https://github.com/jamesob",
      "followers_url": "https://api.github.com/users/jamesob/followers",
      "following_url": "https://api.github.com/users/jamesob/following{/other_user}",
      "gists_url": "https://api.github.com/users/jamesob/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
      "organizations_url": "https://api.github.com/users/jamesob/orgs",
      "repos_url": "https://api.github.com/users/jamesob/repos",
      "events_url": "https://api.github.com/users/jamesob/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jamesob/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "6bc1eca01b2f88e081e71b783b3d45287700f8a5",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6bc1eca01b2f88e081e71b783b3d45287700f8a5",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/6bc1eca01b2f88e081e71b783b3d45287700f8a5"
      }
    ],
    "stats": {
      "total": 29,
      "additions": 15,
      "deletions": 14
    },
    "files": [
      {
        "sha": "ce0b131de6deb4690c8a5a9d4a529e231b32a5a6",
        "filename": "src/coins.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/615c1adfb07b9b466173166dc2e53ace540e4b32/src/coins.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/615c1adfb07b9b466173166dc2e53ace540e4b32/src/coins.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/coins.cpp?ref=615c1adfb07b9b466173166dc2e53ace540e4b32",
        "patch": "@@ -13,7 +13,7 @@ bool CCoinsView::GetCoin(const COutPoint &outpoint, Coin &coin) const { return f\n uint256 CCoinsView::GetBestBlock() const { return uint256(); }\n std::vector<uint256> CCoinsView::GetHeadBlocks() const { return std::vector<uint256>(); }\n bool CCoinsView::BatchWrite(CCoinsMap &mapCoins, const uint256 &hashBlock) { return false; }\n-CCoinsViewCursor *CCoinsView::Cursor() const { return nullptr; }\n+std::unique_ptr<CCoinsViewCursor> CCoinsView::Cursor() const { return nullptr; }\n \n bool CCoinsView::HaveCoin(const COutPoint &outpoint) const\n {\n@@ -28,7 +28,7 @@ uint256 CCoinsViewBacked::GetBestBlock() const { return base->GetBestBlock(); }\n std::vector<uint256> CCoinsViewBacked::GetHeadBlocks() const { return base->GetHeadBlocks(); }\n void CCoinsViewBacked::SetBackend(CCoinsView &viewIn) { base = &viewIn; }\n bool CCoinsViewBacked::BatchWrite(CCoinsMap &mapCoins, const uint256 &hashBlock) { return base->BatchWrite(mapCoins, hashBlock); }\n-CCoinsViewCursor *CCoinsViewBacked::Cursor() const { return base->Cursor(); }\n+std::unique_ptr<CCoinsViewCursor> CCoinsViewBacked::Cursor() const { return base->Cursor(); }\n size_t CCoinsViewBacked::EstimateSize() const { return base->EstimateSize(); }\n \n CCoinsViewCache::CCoinsViewCache(CCoinsView *baseIn) : CCoinsViewBacked(baseIn), cachedCoinsUsage(0) {}"
      },
      {
        "sha": "3151a260d94674571fe9f7162c5a1ff44ec3e5f2",
        "filename": "src/coins.h",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/615c1adfb07b9b466173166dc2e53ace540e4b32/src/coins.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/615c1adfb07b9b466173166dc2e53ace540e4b32/src/coins.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/coins.h?ref=615c1adfb07b9b466173166dc2e53ace540e4b32",
        "patch": "@@ -180,7 +180,7 @@ class CCoinsView\n     virtual bool BatchWrite(CCoinsMap &mapCoins, const uint256 &hashBlock);\n \n     //! Get a cursor to iterate over the whole state\n-    virtual CCoinsViewCursor *Cursor() const;\n+    virtual std::unique_ptr<CCoinsViewCursor> Cursor() const;\n \n     //! As we use CCoinsViews polymorphically, have a virtual destructor\n     virtual ~CCoinsView() {}\n@@ -204,7 +204,7 @@ class CCoinsViewBacked : public CCoinsView\n     std::vector<uint256> GetHeadBlocks() const override;\n     void SetBackend(CCoinsView &viewIn);\n     bool BatchWrite(CCoinsMap &mapCoins, const uint256 &hashBlock) override;\n-    CCoinsViewCursor *Cursor() const override;\n+    std::unique_ptr<CCoinsViewCursor> Cursor() const override;\n     size_t EstimateSize() const override;\n };\n \n@@ -237,7 +237,7 @@ class CCoinsViewCache : public CCoinsViewBacked\n     uint256 GetBestBlock() const override;\n     void SetBestBlock(const uint256 &hashBlock);\n     bool BatchWrite(CCoinsMap &mapCoins, const uint256 &hashBlock) override;\n-    CCoinsViewCursor* Cursor() const override {\n+    std::unique_ptr<CCoinsViewCursor> Cursor() const override {\n         throw std::logic_error(\"CCoinsViewCache cursor iteration not supported.\");\n     }\n "
      },
      {
        "sha": "4d4d3fb7d0803ef04f7c4ae13bd49f5ce42d5e4d",
        "filename": "src/rpc/blockchain.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/615c1adfb07b9b466173166dc2e53ace540e4b32/src/rpc/blockchain.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/615c1adfb07b9b466173166dc2e53ace540e4b32/src/rpc/blockchain.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/blockchain.cpp?ref=615c1adfb07b9b466173166dc2e53ace540e4b32",
        "patch": "@@ -2391,7 +2391,7 @@ static RPCHelpMan scantxoutset()\n             LOCK(cs_main);\n             CChainState& active_chainstate = chainman.ActiveChainstate();\n             active_chainstate.ForceFlushStateToDisk();\n-            pcursor = std::unique_ptr<CCoinsViewCursor>(active_chainstate.CoinsDB().Cursor());\n+            pcursor = active_chainstate.CoinsDB().Cursor();\n             CHECK_NONFATAL(pcursor);\n             tip = active_chainstate.m_chain.Tip();\n             CHECK_NONFATAL(tip);\n@@ -2590,7 +2590,7 @@ UniValue CreateUTXOSnapshot(NodeContext& node, CChainState& chainstate, CAutoFil\n             throw JSONRPCError(RPC_INTERNAL_ERROR, \"Unable to read UTXO set\");\n         }\n \n-        pcursor = std::unique_ptr<CCoinsViewCursor>(chainstate.CoinsDB().Cursor());\n+        pcursor = chainstate.CoinsDB().Cursor();\n         tip = chainstate.m_blockman.LookupBlockIndex(stats.hashBlock);\n         CHECK_NONFATAL(tip);\n     }"
      },
      {
        "sha": "f452696689381f9a0c0a0375d80cf320bc4726cb",
        "filename": "src/test/fuzz/coins_view.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/615c1adfb07b9b466173166dc2e53ace540e4b32/src/test/fuzz/coins_view.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/615c1adfb07b9b466173166dc2e53ace540e4b32/src/test/fuzz/coins_view.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/fuzz/coins_view.cpp?ref=615c1adfb07b9b466173166dc2e53ace540e4b32",
        "patch": "@@ -183,8 +183,8 @@ FUZZ_TARGET_INIT(coins_view, initialize_coins_view)\n     }\n \n     {\n-        const CCoinsViewCursor* coins_view_cursor = backend_coins_view.Cursor();\n-        assert(coins_view_cursor == nullptr);\n+        std::unique_ptr<CCoinsViewCursor> coins_view_cursor = backend_coins_view.Cursor();\n+        assert(!coins_view_cursor);\n         (void)backend_coins_view.EstimateSize();\n         (void)backend_coins_view.GetBestBlock();\n         (void)backend_coins_view.GetHeadBlocks();"
      },
      {
        "sha": "bd0e9f7317feff926ebf26bb5b332c79ae5c11e5",
        "filename": "src/txdb.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 2,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/615c1adfb07b9b466173166dc2e53ace540e4b32/src/txdb.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/615c1adfb07b9b466173166dc2e53ace540e4b32/src/txdb.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/txdb.cpp?ref=615c1adfb07b9b466173166dc2e53ace540e4b32",
        "patch": "@@ -168,9 +168,10 @@ bool CBlockTreeDB::ReadLastBlockFile(int &nFile) {\n     return Read(DB_LAST_BLOCK, nFile);\n }\n \n-CCoinsViewCursor *CCoinsViewDB::Cursor() const\n+std::unique_ptr<CCoinsViewCursor> CCoinsViewDB::Cursor() const\n {\n-    CCoinsViewDBCursor *i = new CCoinsViewDBCursor(const_cast<CDBWrapper&>(*m_db).NewIterator(), GetBestBlock());\n+    auto i = std::make_unique<CCoinsViewDBCursor>(\n+        const_cast<CDBWrapper&>(*m_db).NewIterator(), GetBestBlock());\n     /* It seems that there are no \"const iterators\" for LevelDB.  Since we\n        only need read operations on it, use a const-cast to get around\n        that restriction.  */"
      },
      {
        "sha": "e1096ffeba0ccf4cd49bd3f7922fa81a8045bfcf",
        "filename": "src/txdb.h",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/615c1adfb07b9b466173166dc2e53ace540e4b32/src/txdb.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/615c1adfb07b9b466173166dc2e53ace540e4b32/src/txdb.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/txdb.h?ref=615c1adfb07b9b466173166dc2e53ace540e4b32",
        "patch": "@@ -60,7 +60,7 @@ class CCoinsViewDB final : public CCoinsView\n     uint256 GetBestBlock() const override;\n     std::vector<uint256> GetHeadBlocks() const override;\n     bool BatchWrite(CCoinsMap &mapCoins, const uint256 &hashBlock) override;\n-    CCoinsViewCursor *Cursor() const override;\n+    std::unique_ptr<CCoinsViewCursor> Cursor() const override;\n \n     //! Attempt to update from an older database format. Returns whether an error occurred.\n     bool Upgrade();\n@@ -74,6 +74,8 @@ class CCoinsViewDB final : public CCoinsView\n class CCoinsViewDBCursor: public CCoinsViewCursor\n {\n public:\n+    CCoinsViewDBCursor(CDBIterator* pcursorIn, const uint256 &hashBlockIn):\n+        CCoinsViewCursor(hashBlockIn), pcursor(pcursorIn) {}\n     ~CCoinsViewDBCursor() {}\n \n     bool GetKey(COutPoint &key) const override;\n@@ -84,8 +86,6 @@ class CCoinsViewDBCursor: public CCoinsViewCursor\n     void Next() override;\n \n private:\n-    CCoinsViewDBCursor(CDBIterator* pcursorIn, const uint256 &hashBlockIn):\n-        CCoinsViewCursor(hashBlockIn), pcursor(pcursorIn) {}\n     std::unique_ptr<CDBIterator> pcursor;\n     std::pair<char, COutPoint> keyTmp;\n "
      }
    ]
  },
  {
    "sha": "0f8a5a4dd530549d37c43da52c923ac3b2af1a03",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowZjhhNWE0ZGQ1MzA1NDlkMzdjNDNkYTUyYzkyM2FjM2IyYWYxYTAz",
    "commit": {
      "author": {
        "name": "James O'Beirne",
        "email": "james.obeirne@pm.me",
        "date": "2021-06-18T18:14:15Z"
      },
      "committer": {
        "name": "James O'Beirne",
        "email": "james.obeirne@pm.me",
        "date": "2021-06-18T18:14:15Z"
      },
      "message": "move-only(ish): don't expose CCoinsViewDBCursor\n\nNo need for this to be a part of the header anymore.\n\nIncludes a small reference type style change.",
      "tree": {
        "sha": "a945e825a5a1ff3faa098e2f4f83d2a2792cbe99",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a945e825a5a1ff3faa098e2f4f83d2a2792cbe99"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0f8a5a4dd530549d37c43da52c923ac3b2af1a03",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEGNRVI1NPYuZCSIrGepNdrbLETwUFAmDM4qgACgkQepNdrbLE\nTwX7TxAAhy7COuN0YQagzzZ18v2zZPrCgpPkKx9XWoA2lKg7qapbNGREChVO9LBc\nuzjWSColVXCt65D89KyYaCWKPwJlD6BPsywkpTPZR25AzSoLpiCBZSkYIbKLNi/3\nvMg2U1VjAe5y+b/sRqreqUfj2ILWU9GWnfEOS7yzJ4kJ/2ipSnYLKxD0DIqwRFIP\nECbTBRnX82UULTfucHKmPdq8vEu0M1w8fn+1Z3Bqcw16JPrbLLx1MWYnTaRUrVUq\n5qKk3JmDTSYmTksNoBqxVBv+Wtm9eW36nJYKZ3Y0G6+9ZaSpSOyQXkq1qReNW+GR\nWLxLEMwN2spCVVff/IHZzo37Bd5Wh4P+niXgVnwxdw/JhQJoeeco7Qo9k5yMlzbv\nJXYbpjtiyLpK2yEpCV2WkGLyZTiRwRqILTY3JWetQqar0UEJ+Mpzh23l59aO0f3Z\nLrl/xNsExwOArB7CJ8penPoR5aehUbbNLbNDshZB0O8bd+WY0MeenLlg/DmuSMpl\nASS+yBQIs56I0e907bS5LD//tms0jrUfDfyL+Qs6K5k1mn5jGvQQ5J2xWjEkwsKO\nCvz3xTfJoBcP9BJEAJccpAyzxw0+gTs2bu9y/n7LVfl3bK+Vn6MIsZCWOi35B135\nCEqdj5PJATchAYWJMfnCB4aa4rUss28eH1C6nEVTanIKg88YvKU=\n=4X7S\n-----END PGP SIGNATURE-----",
        "payload": "tree a945e825a5a1ff3faa098e2f4f83d2a2792cbe99\nparent 615c1adfb07b9b466173166dc2e53ace540e4b32\nauthor James O'Beirne <james.obeirne@pm.me> 1624040055 -0400\ncommitter James O'Beirne <james.obeirne@pm.me> 1624040055 -0400\n\nmove-only(ish): don't expose CCoinsViewDBCursor\n\nNo need for this to be a part of the header anymore.\n\nIncludes a small reference type style change.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0f8a5a4dd530549d37c43da52c923ac3b2af1a03",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/0f8a5a4dd530549d37c43da52c923ac3b2af1a03",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0f8a5a4dd530549d37c43da52c923ac3b2af1a03/comments",
    "author": {
      "login": "jamesob",
      "id": 73197,
      "node_id": "MDQ6VXNlcjczMTk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jamesob",
      "html_url": "https://github.com/jamesob",
      "followers_url": "https://api.github.com/users/jamesob/followers",
      "following_url": "https://api.github.com/users/jamesob/following{/other_user}",
      "gists_url": "https://api.github.com/users/jamesob/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
      "organizations_url": "https://api.github.com/users/jamesob/orgs",
      "repos_url": "https://api.github.com/users/jamesob/repos",
      "events_url": "https://api.github.com/users/jamesob/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jamesob/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jamesob",
      "id": 73197,
      "node_id": "MDQ6VXNlcjczMTk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jamesob",
      "html_url": "https://github.com/jamesob",
      "followers_url": "https://api.github.com/users/jamesob/followers",
      "following_url": "https://api.github.com/users/jamesob/following{/other_user}",
      "gists_url": "https://api.github.com/users/jamesob/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
      "organizations_url": "https://api.github.com/users/jamesob/orgs",
      "repos_url": "https://api.github.com/users/jamesob/repos",
      "events_url": "https://api.github.com/users/jamesob/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jamesob/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "615c1adfb07b9b466173166dc2e53ace540e4b32",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/615c1adfb07b9b466173166dc2e53ace540e4b32",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/615c1adfb07b9b466173166dc2e53ace540e4b32"
      }
    ],
    "stats": {
      "total": 44,
      "additions": 22,
      "deletions": 22
    },
    "files": [
      {
        "sha": "e6469ee1599a508e851a7697464a0814259c30a4",
        "filename": "src/txdb.cpp",
        "status": "modified",
        "additions": 22,
        "deletions": 0,
        "changes": 22,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0f8a5a4dd530549d37c43da52c923ac3b2af1a03/src/txdb.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0f8a5a4dd530549d37c43da52c923ac3b2af1a03/src/txdb.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/txdb.cpp?ref=0f8a5a4dd530549d37c43da52c923ac3b2af1a03",
        "patch": "@@ -168,6 +168,28 @@ bool CBlockTreeDB::ReadLastBlockFile(int &nFile) {\n     return Read(DB_LAST_BLOCK, nFile);\n }\n \n+/** Specialization of CCoinsViewCursor to iterate over a CCoinsViewDB */\n+class CCoinsViewDBCursor: public CCoinsViewCursor\n+{\n+public:\n+    CCoinsViewDBCursor(CDBIterator* pcursorIn, const uint256&hashBlockIn):\n+        CCoinsViewCursor(hashBlockIn), pcursor(pcursorIn) {}\n+    ~CCoinsViewDBCursor() {}\n+\n+    bool GetKey(COutPoint &key) const override;\n+    bool GetValue(Coin &coin) const override;\n+    unsigned int GetValueSize() const override;\n+\n+    bool Valid() const override;\n+    void Next() override;\n+\n+private:\n+    std::unique_ptr<CDBIterator> pcursor;\n+    std::pair<char, COutPoint> keyTmp;\n+\n+    friend class CCoinsViewDB;\n+};\n+\n std::unique_ptr<CCoinsViewCursor> CCoinsViewDB::Cursor() const\n {\n     auto i = std::make_unique<CCoinsViewDBCursor>("
      },
      {
        "sha": "845d80788f255974e33b2441896c72002cda9354",
        "filename": "src/txdb.h",
        "status": "modified",
        "additions": 0,
        "deletions": 22,
        "changes": 22,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0f8a5a4dd530549d37c43da52c923ac3b2af1a03/src/txdb.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0f8a5a4dd530549d37c43da52c923ac3b2af1a03/src/txdb.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/txdb.h?ref=0f8a5a4dd530549d37c43da52c923ac3b2af1a03",
        "patch": "@@ -70,28 +70,6 @@ class CCoinsViewDB final : public CCoinsView\n     void ResizeCache(size_t new_cache_size) EXCLUSIVE_LOCKS_REQUIRED(cs_main);\n };\n \n-/** Specialization of CCoinsViewCursor to iterate over a CCoinsViewDB */\n-class CCoinsViewDBCursor: public CCoinsViewCursor\n-{\n-public:\n-    CCoinsViewDBCursor(CDBIterator* pcursorIn, const uint256 &hashBlockIn):\n-        CCoinsViewCursor(hashBlockIn), pcursor(pcursorIn) {}\n-    ~CCoinsViewDBCursor() {}\n-\n-    bool GetKey(COutPoint &key) const override;\n-    bool GetValue(Coin &coin) const override;\n-    unsigned int GetValueSize() const override;\n-\n-    bool Valid() const override;\n-    void Next() override;\n-\n-private:\n-    std::unique_ptr<CDBIterator> pcursor;\n-    std::pair<char, COutPoint> keyTmp;\n-\n-    friend class CCoinsViewDB;\n-};\n-\n /** Access to the block database (blocks/index/) */\n class CBlockTreeDB : public CDBWrapper\n {"
      }
    ]
  },
  {
    "sha": "7ad414f4bfa74595ee5726e66f3527045c02a977",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo3YWQ0MTRmNGJmYTc0NTk1ZWU1NzI2ZTY2ZjM1MjcwNDVjMDJhOTc3",
    "commit": {
      "author": {
        "name": "James O'Beirne",
        "email": "james.obeirne@pm.me",
        "date": "2021-06-18T18:15:39Z"
      },
      "committer": {
        "name": "James O'Beirne",
        "email": "james.obeirne@pm.me",
        "date": "2021-06-18T18:15:39Z"
      },
      "message": "doc: add comment about CCoinsViewDBCursor constructor",
      "tree": {
        "sha": "96549e8a100f419d2d23f876279ce94886335efd",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/96549e8a100f419d2d23f876279ce94886335efd"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7ad414f4bfa74595ee5726e66f3527045c02a977",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEGNRVI1NPYuZCSIrGepNdrbLETwUFAmDM4tcACgkQepNdrbLE\nTwVMGhAAlCwdwtq2CyDrQFjGviP76+W+iOYdI2gWRyxh/H3NQuXrFG8C/sP2ZVIw\n50SoRWKx23il0j4a7X61tPOqcRVkdu2BgQ95gC/FTYcoGbymDZvvnKqUT/iU2bYE\nsFzPBuG4JXmsBwr5Zcf5zK+3NvwvrIE1bsqsPJeCszMqVHF+ssB7T9hP3Jq6rxeW\ngv/eRBqazoq1O95hXu/M19B6VC2zjbXI/iWdraeEBNUb3u+61RK3o6q3G8Pqc61K\nZiU+XWF8M+kKGYHdV3fCi6t5KR/nEem4OlQPs8sIMgf55G793/ApJmNi1GZbTMJH\ny1l8wfOjk19lqV3xJyySZ7GEeDrrqH2KF6w6uCjZg+58BFKI/OixsyMVFub6W6l8\njzHDLzWkW68gx7sruzPKRCR98UDbLQoPCIbY9Ri8lcZWej2mng4KEzsMXD4kzKat\nCYZ22zEDqiOc0ZZm7cb8qF3NWWz3Scg/cNjyokw+FWXpap0OulOwZpCBUu/vQu+v\nK1RcmlDqSSyJpqJ3d0o4jrMob7EVfQCvyWg5UTaN97Y5abgP7iUiNhNzkBTVu0pm\nuoY9ISYDoY3eNuDyNoiCWXEauv50JfftLZzu/U6iygB7OK2To9kGFOAIdDOmbm75\nt6Ln/vPZTgxasr4MEWX2xoewfYdDBY72F6MtzF00mgKhWhtQBC8=\n=gHJT\n-----END PGP SIGNATURE-----",
        "payload": "tree 96549e8a100f419d2d23f876279ce94886335efd\nparent 0f8a5a4dd530549d37c43da52c923ac3b2af1a03\nauthor James O'Beirne <james.obeirne@pm.me> 1624040139 -0400\ncommitter James O'Beirne <james.obeirne@pm.me> 1624040139 -0400\n\ndoc: add comment about CCoinsViewDBCursor constructor\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7ad414f4bfa74595ee5726e66f3527045c02a977",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/7ad414f4bfa74595ee5726e66f3527045c02a977",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7ad414f4bfa74595ee5726e66f3527045c02a977/comments",
    "author": {
      "login": "jamesob",
      "id": 73197,
      "node_id": "MDQ6VXNlcjczMTk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jamesob",
      "html_url": "https://github.com/jamesob",
      "followers_url": "https://api.github.com/users/jamesob/followers",
      "following_url": "https://api.github.com/users/jamesob/following{/other_user}",
      "gists_url": "https://api.github.com/users/jamesob/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
      "organizations_url": "https://api.github.com/users/jamesob/orgs",
      "repos_url": "https://api.github.com/users/jamesob/repos",
      "events_url": "https://api.github.com/users/jamesob/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jamesob/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jamesob",
      "id": 73197,
      "node_id": "MDQ6VXNlcjczMTk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jamesob",
      "html_url": "https://github.com/jamesob",
      "followers_url": "https://api.github.com/users/jamesob/followers",
      "following_url": "https://api.github.com/users/jamesob/following{/other_user}",
      "gists_url": "https://api.github.com/users/jamesob/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
      "organizations_url": "https://api.github.com/users/jamesob/orgs",
      "repos_url": "https://api.github.com/users/jamesob/repos",
      "events_url": "https://api.github.com/users/jamesob/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jamesob/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "0f8a5a4dd530549d37c43da52c923ac3b2af1a03",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0f8a5a4dd530549d37c43da52c923ac3b2af1a03",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/0f8a5a4dd530549d37c43da52c923ac3b2af1a03"
      }
    ],
    "stats": {
      "total": 2,
      "additions": 2,
      "deletions": 0
    },
    "files": [
      {
        "sha": "4b76bee5ab8816088c846c392aad3e4cfbd4fd5b",
        "filename": "src/txdb.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/7ad414f4bfa74595ee5726e66f3527045c02a977/src/txdb.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/7ad414f4bfa74595ee5726e66f3527045c02a977/src/txdb.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/txdb.cpp?ref=7ad414f4bfa74595ee5726e66f3527045c02a977",
        "patch": "@@ -172,6 +172,8 @@ bool CBlockTreeDB::ReadLastBlockFile(int &nFile) {\n class CCoinsViewDBCursor: public CCoinsViewCursor\n {\n public:\n+    // Prefer using CCoinsViewDB::Cursor() since we want to perform some\n+    // cache warmup on instantiation.\n     CCoinsViewDBCursor(CDBIterator* pcursorIn, const uint256&hashBlockIn):\n         CCoinsViewCursor(hashBlockIn), pcursor(pcursorIn) {}\n     ~CCoinsViewDBCursor() {}"
      }
    ]
  }
]