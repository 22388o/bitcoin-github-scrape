[
  {
    "sha": "688a86694e9010241e7cbbfda6a12dfcc15e37b6",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo2ODhhODY2OTRlOTAxMDI0MWU3Y2JiZmRhNmExMmRmY2MxNWUzN2I2",
    "commit": {
      "author": {
        "name": "Cozz Lovan",
        "email": "cozzlovan@yahoo.com",
        "date": "2014-01-26T05:37:17Z"
      },
      "committer": {
        "name": "Cozz Lovan",
        "email": "cozzlovan@yahoo.com",
        "date": "2014-01-28T16:22:49Z"
      },
      "message": "[Qt] minor receive tab improvements",
      "tree": {
        "sha": "43b89ee61d17ed0d916c382d2c276fe519e9b80a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/43b89ee61d17ed0d916c382d2c276fe519e9b80a"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/688a86694e9010241e7cbbfda6a12dfcc15e37b6",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/688a86694e9010241e7cbbfda6a12dfcc15e37b6",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/688a86694e9010241e7cbbfda6a12dfcc15e37b6",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/688a86694e9010241e7cbbfda6a12dfcc15e37b6/comments",
    "author": {
      "login": "cozz",
      "id": 2814559,
      "node_id": "MDQ6VXNlcjI4MTQ1NTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2814559?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cozz",
      "html_url": "https://github.com/cozz",
      "followers_url": "https://api.github.com/users/cozz/followers",
      "following_url": "https://api.github.com/users/cozz/following{/other_user}",
      "gists_url": "https://api.github.com/users/cozz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cozz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cozz/subscriptions",
      "organizations_url": "https://api.github.com/users/cozz/orgs",
      "repos_url": "https://api.github.com/users/cozz/repos",
      "events_url": "https://api.github.com/users/cozz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cozz/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "cozz",
      "id": 2814559,
      "node_id": "MDQ6VXNlcjI4MTQ1NTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2814559?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cozz",
      "html_url": "https://github.com/cozz",
      "followers_url": "https://api.github.com/users/cozz/followers",
      "following_url": "https://api.github.com/users/cozz/following{/other_user}",
      "gists_url": "https://api.github.com/users/cozz/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/cozz/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/cozz/subscriptions",
      "organizations_url": "https://api.github.com/users/cozz/orgs",
      "repos_url": "https://api.github.com/users/cozz/repos",
      "events_url": "https://api.github.com/users/cozz/events{/privacy}",
      "received_events_url": "https://api.github.com/users/cozz/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "7ff13ef2d2b8e18787202c117989022cf4f907a3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7ff13ef2d2b8e18787202c117989022cf4f907a3",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/7ff13ef2d2b8e18787202c117989022cf4f907a3"
      }
    ],
    "stats": {
      "total": 256,
      "additions": 193,
      "deletions": 63
    },
    "files": [
      {
        "sha": "e5a8812711d46991fb67ac993fc4f879362c8d97",
        "filename": "src/qt/forms/receivecoinsdialog.ui",
        "status": "modified",
        "additions": 57,
        "deletions": 20,
        "changes": 77,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/688a86694e9010241e7cbbfda6a12dfcc15e37b6/src/qt/forms/receivecoinsdialog.ui",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/688a86694e9010241e7cbbfda6a12dfcc15e37b6/src/qt/forms/receivecoinsdialog.ui",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/forms/receivecoinsdialog.ui?ref=688a86694e9010241e7cbbfda6a12dfcc15e37b6",
        "patch": "@@ -10,8 +10,23 @@\n     <height>364</height>\n    </rect>\n   </property>\n-  <layout class=\"QVBoxLayout\" name=\"verticalLayout\">\n+  <layout class=\"QVBoxLayout\" name=\"verticalLayout\" stretch=\"0,0,1\">\n    <item>\n+   <widget class=\"QFrame\" name=\"frame2\">\n+    <property name=\"sizePolicy\">\n+      <sizepolicy hsizetype=\"Preferred\" vsizetype=\"Expanding\">\n+        <horstretch>0</horstretch>\n+        <verstretch>0</verstretch>\n+      </sizepolicy>\n+    </property>\n+    <property name=\"frameShape\">\n+      <enum>QFrame::StyledPanel</enum>\n+    </property>\n+    <property name=\"frameShadow\">\n+      <enum>QFrame::Sunken</enum>\n+    </property>\n+    <layout class=\"QVBoxLayout\" name=\"verticalLayout_3\">\n+    <item>\n     <layout class=\"QGridLayout\" name=\"gridLayout\">\n      <item row=\"7\" column=\"2\">\n       <widget class=\"QCheckBox\" name=\"reuseAddress\">\n@@ -32,6 +47,9 @@\n      </item>\n      <item row=\"6\" column=\"0\">\n       <widget class=\"QLabel\" name=\"label_3\">\n+       <property name=\"toolTip\">\n+        <string>An optional message to attach to the payment request, which will be displayed when the request is opened. Note: The message will not be sent with the payment over the Bitcoin network.</string>\n+       </property>\n        <property name=\"text\">\n         <string>&amp;Message:</string>\n        </property>\n@@ -46,7 +64,7 @@\n      <item row=\"4\" column=\"2\">\n       <widget class=\"QLineEdit\" name=\"reqLabel\">\n        <property name=\"toolTip\">\n-        <string>An optional label to associate with the new receiving address</string>\n+        <string>An optional label to associate with the new receiving address.</string>\n        </property>\n       </widget>\n      </item>\n@@ -66,6 +84,9 @@\n      </item>\n      <item row=\"4\" column=\"0\">\n       <widget class=\"QLabel\" name=\"label_2\">\n+       <property name=\"toolTip\">\n+        <string>An optional label to associate with the new receiving address.</string>\n+       </property>\n        <property name=\"text\">\n         <string>&amp;Label:</string>\n        </property>\n@@ -79,6 +100,9 @@\n      </item>\n      <item row=\"5\" column=\"0\">\n       <widget class=\"QLabel\" name=\"label\">\n+       <property name=\"toolTip\">\n+        <string>An optional amount to request. Leave this empty or zero to not request a specific amount.</string>\n+       </property>\n        <property name=\"text\">\n         <string>&amp;Amount:</string>\n        </property>\n@@ -103,10 +127,25 @@\n        </property>\n       </widget>\n      </item>\n-    </layout>\n-   </item>\n-   <item>\n+    <item row=\"8\" column=\"2\">\n     <layout class=\"QHBoxLayout\" name=\"horizontalLayout\">\n+     <item>\n+      <widget class=\"QPushButton\" name=\"receiveButton\">\n+       <property name=\"minimumSize\">\n+        <size>\n+         <width>150</width>\n+         <height>0</height>\n+        </size>\n+       </property>\n+       <property name=\"text\">\n+        <string>&amp;Request payment</string>\n+       </property>\n+       <property name=\"icon\">\n+        <iconset resource=\"../bitcoin.qrc\">\n+         <normaloff>:/icons/receiving_addresses</normaloff>:/icons/receiving_addresses</iconset>\n+       </property>\n+      </widget>\n+     </item>\n      <item>\n       <widget class=\"QPushButton\" name=\"clearButton\">\n        <property name=\"sizePolicy\">\n@@ -146,25 +185,20 @@\n        </property>\n       </spacer>\n      </item>\n-     <item>\n-      <widget class=\"QPushButton\" name=\"receiveButton\">\n-       <property name=\"minimumSize\">\n-        <size>\n-         <width>150</width>\n-         <height>0</height>\n-        </size>\n-       </property>\n+    </layout>\n+     </item>\n+     <item row=\"8\" column=\"0\">\n+      <widget class=\"QLabel\" name=\"label_7\">\n        <property name=\"text\">\n-        <string>&amp;Request payment</string>\n-       </property>\n-       <property name=\"icon\">\n-        <iconset resource=\"../bitcoin.qrc\">\n-         <normaloff>:/icons/receiving_addresses</normaloff>:/icons/receiving_addresses</iconset>\n+        <string/>\n        </property>\n       </widget>\n      </item>\n     </layout>\n    </item>\n+   </layout>\n+   </widget>\n+   </item>\n    <item>\n     <spacer name=\"verticalSpacer_2\">\n      <property name=\"orientation\">\n@@ -173,7 +207,7 @@\n      <property name=\"sizeHint\" stdset=\"0\">\n       <size>\n        <width>20</width>\n-       <height>40</height>\n+       <height>10</height>\n       </size>\n      </property>\n     </spacer>\n@@ -202,12 +236,15 @@\n          </font>\n         </property>\n         <property name=\"text\">\n-         <string>Requested payments</string>\n+         <string>Requested payments history</string>\n         </property>\n        </widget>\n       </item>\n       <item>\n        <widget class=\"QTableView\" name=\"recentRequestsView\">\n+        <property name=\"contextMenuPolicy\">\n+         <enum>Qt::CustomContextMenu</enum>\n+        </property>\n         <property name=\"sortingEnabled\">\n          <bool>true</bool>\n         </property>"
      },
      {
        "sha": "95f3294adbece816b73526175203304064dd49df",
        "filename": "src/qt/forms/sendcoinsdialog.ui",
        "status": "modified",
        "additions": 42,
        "deletions": 42,
        "changes": 84,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/688a86694e9010241e7cbbfda6a12dfcc15e37b6/src/qt/forms/sendcoinsdialog.ui",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/688a86694e9010241e7cbbfda6a12dfcc15e37b6/src/qt/forms/sendcoinsdialog.ui",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/forms/sendcoinsdialog.ui?ref=688a86694e9010241e7cbbfda6a12dfcc15e37b6",
        "patch": "@@ -657,19 +657,25 @@\n    <item>\n     <layout class=\"QHBoxLayout\" name=\"horizontalLayout\">\n      <item>\n-      <widget class=\"QPushButton\" name=\"addButton\">\n+      <widget class=\"QPushButton\" name=\"sendButton\">\n+       <property name=\"minimumSize\">\n+        <size>\n+         <width>150</width>\n+         <height>0</height>\n+        </size>\n+       </property>\n        <property name=\"toolTip\">\n-        <string>Send to multiple recipients at once</string>\n+        <string>Confirm the send action</string>\n        </property>\n        <property name=\"text\">\n-        <string>Add &amp;Recipient</string>\n+        <string>S&amp;end</string>\n        </property>\n        <property name=\"icon\">\n         <iconset resource=\"../bitcoin.qrc\">\n-         <normaloff>:/icons/add</normaloff>:/icons/add</iconset>\n+         <normaloff>:/icons/send</normaloff>:/icons/send</iconset>\n        </property>\n-       <property name=\"autoDefault\">\n-        <bool>false</bool>\n+       <property name=\"default\">\n+        <bool>true</bool>\n        </property>\n       </widget>\n      </item>\n@@ -699,6 +705,36 @@\n        </property>\n       </widget>\n      </item>\n+     <item>\n+      <widget class=\"QPushButton\" name=\"addButton\">\n+       <property name=\"toolTip\">\n+        <string>Send to multiple recipients at once</string>\n+       </property>\n+       <property name=\"text\">\n+        <string>Add &amp;Recipient</string>\n+       </property>\n+       <property name=\"icon\">\n+        <iconset resource=\"../bitcoin.qrc\">\n+         <normaloff>:/icons/add</normaloff>:/icons/add</iconset>\n+       </property>\n+       <property name=\"autoDefault\">\n+        <bool>false</bool>\n+       </property>\n+      </widget>\n+     </item>\n+     <item>\n+      <spacer name=\"horizontalSpacer\">\n+       <property name=\"orientation\">\n+        <enum>Qt::Horizontal</enum>\n+       </property>\n+       <property name=\"sizeHint\" stdset=\"0\">\n+        <size>\n+         <width>40</width>\n+         <height>20</height>\n+        </size>\n+       </property>\n+      </spacer>\n+     </item>\n      <item>\n       <layout class=\"QHBoxLayout\" name=\"horizontalLayout_2\">\n        <property name=\"spacing\">\n@@ -726,42 +762,6 @@\n        </item>\n       </layout>\n      </item>\n-     <item>\n-      <spacer name=\"horizontalSpacer\">\n-       <property name=\"orientation\">\n-        <enum>Qt::Horizontal</enum>\n-       </property>\n-       <property name=\"sizeHint\" stdset=\"0\">\n-        <size>\n-         <width>40</width>\n-         <height>20</height>\n-        </size>\n-       </property>\n-      </spacer>\n-     </item>\n-     <item>\n-      <widget class=\"QPushButton\" name=\"sendButton\">\n-       <property name=\"minimumSize\">\n-        <size>\n-         <width>150</width>\n-         <height>0</height>\n-        </size>\n-       </property>\n-       <property name=\"toolTip\">\n-        <string>Confirm the send action</string>\n-       </property>\n-       <property name=\"text\">\n-        <string>S&amp;end</string>\n-       </property>\n-       <property name=\"icon\">\n-        <iconset resource=\"../bitcoin.qrc\">\n-         <normaloff>:/icons/send</normaloff>:/icons/send</iconset>\n-       </property>\n-       <property name=\"default\">\n-        <bool>true</bool>\n-       </property>\n-      </widget>\n-     </item>\n     </layout>\n    </item>\n   </layout>"
      },
      {
        "sha": "8ef80d32ea6265d31ffe23eafef0bb52e885e920",
        "filename": "src/qt/receivecoinsdialog.cpp",
        "status": "modified",
        "additions": 78,
        "deletions": 0,
        "changes": 78,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/688a86694e9010241e7cbbfda6a12dfcc15e37b6/src/qt/receivecoinsdialog.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/688a86694e9010241e7cbbfda6a12dfcc15e37b6/src/qt/receivecoinsdialog.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/receivecoinsdialog.cpp?ref=688a86694e9010241e7cbbfda6a12dfcc15e37b6",
        "patch": "@@ -14,6 +14,8 @@\n #include \"addresstablemodel.h\"\n #include \"recentrequeststablemodel.h\"\n \n+#include <QAction>\n+#include <QCursor>\n #include <QMessageBox>\n #include <QTextDocument>\n #include <QScrollBar>\n@@ -31,6 +33,24 @@ ReceiveCoinsDialog::ReceiveCoinsDialog(QWidget *parent) :\n     ui->showRequestButton->setIcon(QIcon());\n     ui->removeRequestButton->setIcon(QIcon());\n #endif\n+\n+    // context menu actions\n+    QAction *copyLabelAction = new QAction(tr(\"Copy label\"), this);\n+    QAction *copyMessageAction = new QAction(tr(\"Copy message\"), this);\n+    QAction *copyAmountAction = new QAction(tr(\"Copy amount\"), this);\n+\n+    // context menu\n+    contextMenu = new QMenu();\n+    contextMenu->addAction(copyLabelAction);\n+    contextMenu->addAction(copyMessageAction);\n+    contextMenu->addAction(copyAmountAction);\n+\n+    // context menu signals\n+    connect(ui->recentRequestsView, SIGNAL(customContextMenuRequested(QPoint)), this, SLOT(showMenu(QPoint)));\n+    connect(copyLabelAction, SIGNAL(triggered()), this, SLOT(copyLabel()));\n+    connect(copyMessageAction, SIGNAL(triggered()), this, SLOT(copyMessage()));\n+    connect(copyAmountAction, SIGNAL(triggered()), this, SLOT(copyAmount()));\n+\n     connect(ui->clearButton, SIGNAL(clicked()), this, SLOT(clear()));\n }\n \n@@ -164,3 +184,61 @@ void ReceiveCoinsDialog::on_removeRequestButton_clicked()\n     QModelIndex firstIndex = selection.at(0);\n     model->getRecentRequestsTableModel()->removeRows(firstIndex.row(), selection.length(), firstIndex.parent());\n }\n+\n+void ReceiveCoinsDialog::keyPressEvent(QKeyEvent *event)\n+{\n+    if (event->key() == Qt::Key_Return)\n+    {\n+        // press return -> submit form\n+        if (ui->reqLabel->hasFocus() || ui->reqAmount->hasFocus() || ui->reqMessage->hasFocus())\n+        {\n+            event->ignore();\n+            on_receiveButton_clicked();\n+            return;\n+        }\n+    }\n+\n+    this->QDialog::keyPressEvent(event);\n+}\n+\n+// copy column of selected row to clipboard\n+void ReceiveCoinsDialog::copyColumnToClipboard(int column)\n+{\n+    if(!model || !model->getRecentRequestsTableModel() || !ui->recentRequestsView->selectionModel())\n+        return;\n+    QModelIndexList selection = ui->recentRequestsView->selectionModel()->selectedRows();\n+    if(selection.empty())\n+        return;\n+    // correct for selection mode ContiguousSelection\n+    QModelIndex firstIndex = selection.at(0);\n+    GUIUtil::setClipboard(model->getRecentRequestsTableModel()->data(firstIndex.child(firstIndex.row(), column), Qt::EditRole).toString());\n+}\n+\n+// context menu\n+void ReceiveCoinsDialog::showMenu(const QPoint &point)\n+{\n+    if(!model || !model->getRecentRequestsTableModel() || !ui->recentRequestsView->selectionModel())\n+        return;\n+    QModelIndexList selection = ui->recentRequestsView->selectionModel()->selectedRows();\n+    if(selection.empty())\n+        return;\n+    contextMenu->exec(QCursor::pos());\n+}\n+\n+// context menu action: copy label\n+void ReceiveCoinsDialog::copyLabel()\n+{\n+    copyColumnToClipboard(RecentRequestsTableModel::Label);\n+}\n+\n+// context menu action: copy message\n+void ReceiveCoinsDialog::copyMessage()\n+{\n+    copyColumnToClipboard(RecentRequestsTableModel::Message);\n+}\n+\n+// context menu action: copy amount\n+void ReceiveCoinsDialog::copyAmount()\n+{\n+    copyColumnToClipboard(RecentRequestsTableModel::Amount);\n+}"
      },
      {
        "sha": "2c6de0cbca23ee5f2943214ceb8115149c16a7b9",
        "filename": "src/qt/receivecoinsdialog.h",
        "status": "modified",
        "additions": 12,
        "deletions": 0,
        "changes": 12,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/688a86694e9010241e7cbbfda6a12dfcc15e37b6/src/qt/receivecoinsdialog.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/688a86694e9010241e7cbbfda6a12dfcc15e37b6/src/qt/receivecoinsdialog.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/receivecoinsdialog.h?ref=688a86694e9010241e7cbbfda6a12dfcc15e37b6",
        "patch": "@@ -6,6 +6,9 @@\n #define RECEIVECOINSDIALOG_H\n \n #include <QDialog>\n+#include <QKeyEvent>\n+#include <QMenu>\n+#include <QPoint>\n #include <QVariant>\n \n namespace Ui {\n@@ -34,16 +37,25 @@ public slots:\n     void reject();\n     void accept();\n \n+protected:\n+    virtual void keyPressEvent(QKeyEvent *event);\n+\n private:\n     Ui::ReceiveCoinsDialog *ui;\n     WalletModel *model;\n+    QMenu *contextMenu;\n+    void copyColumnToClipboard(int column);\n \n private slots:\n     void on_receiveButton_clicked();\n     void on_showRequestButton_clicked();\n     void on_removeRequestButton_clicked();\n     void on_recentRequestsView_doubleClicked(const QModelIndex &index);\n     void updateDisplayUnit();\n+    void showMenu(const QPoint &);\n+    void copyLabel();\n+    void copyMessage();\n+    void copyAmount();\n };\n \n #endif // RECEIVECOINSDIALOG_H"
      },
      {
        "sha": "64f140bc862251597bbb92a5af8b96cd49463f0e",
        "filename": "src/qt/recentrequeststablemodel.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 1,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/688a86694e9010241e7cbbfda6a12dfcc15e37b6/src/qt/recentrequeststablemodel.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/688a86694e9010241e7cbbfda6a12dfcc15e37b6/src/qt/recentrequeststablemodel.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/recentrequeststablemodel.cpp?ref=688a86694e9010241e7cbbfda6a12dfcc15e37b6",
        "patch": "@@ -75,7 +75,10 @@ QVariant RecentRequestsTableModel::data(const QModelIndex &index, int role) cons\n                 return rec->recipient.message;\n             }\n         case Amount:\n-            return BitcoinUnits::format(walletModel->getOptionsModel()->getDisplayUnit(), rec->recipient.amount);\n+            if (rec->recipient.amount == 0 && role == Qt::DisplayRole)\n+                return tr(\"(no amount)\");\n+            else\n+                return BitcoinUnits::format(walletModel->getOptionsModel()->getDisplayUnit(), rec->recipient.amount);\n         }\n     }\n     return QVariant();"
      }
    ]
  }
]