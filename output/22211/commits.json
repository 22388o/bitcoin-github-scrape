[
  {
    "sha": "ba45f0270815d54ae3290efc16324c2ff1984565",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiYTQ1ZjAyNzA4MTVkNTRhZTMyOTBlZmMxNjMyNGMyZmYxOTg0NTY1",
    "commit": {
      "author": {
        "name": "Vasil Dimov",
        "email": "vd@FreeBSD.org",
        "date": "2021-06-10T12:16:41Z"
      },
      "committer": {
        "name": "Vasil Dimov",
        "email": "vd@FreeBSD.org",
        "date": "2021-06-10T12:16:41Z"
      },
      "message": "net: relay I2P addresses even if not reachable (by us)\n\nNodes that can reach the I2P network (have set `-i2psam=`) will relay\nI2P addresses even without this patch. However, nodes that can't reach\nthe I2P network will not. This was done as a precaution in\nhttps://github.com/bitcoin/bitcoin/pull/20119 before anybody could\nconnect to I2P because then, for sure, it would have been useless.\n\nNow, however, we have I2P support and a bunch of I2P nodes, so get all\nnodes on the network to relay I2P addresses to help with propagation,\nsimilarly to what we do with Tor addresses.",
      "tree": {
        "sha": "8a1f6a2f2e4cb7f76d22c5d82712d15532748ee8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/8a1f6a2f2e4cb7f76d22c5d82712d15532748ee8"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ba45f0270815d54ae3290efc16324c2ff1984565",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQQzBAABCAAdFiEE5k2NRWFNsHVF2czBVN8G9ktVy78FAmDCBIYACgkQVN8G9ktV\ny79VtB/9HNzgpbcQezxVU2j8+WiOBe2BEQn2B+QGkpRjdZCO3JeMqERVoDJZyAbC\nGd9V+GmM/XvdsBH70fiosAQO8NrkyR+o0KuWq+j+vnf81iazygC9gesntqBmI5gc\n4kPJBvJF9N6jJus9vvew5pYjjFrtcTSUdbF2wp7fIC3XnW7+zq0Wf/oba8b224S5\ne6gyh/hxPm+V3adX7ZZF4WMpyhZEc8AO65lYgnzC1eh4ytMnnMsbrMiUNmKSpl7O\n5Nvk/wQXWpsJDKqOZsDUUiISvMVq+7kUfNYoaSVKeJp/unOmFctXTQU7Q+JggdPG\nPMxae9B4eTWcojdPyzu/msoattg7TEvb4EZOJx9xB3mb6ZufyrJKlZ3x+Q/U2foz\nZCz503Ang7vqxwSnh/cJjLa4Ii9cxR1zAqaObe/7pFVtoz7377yOEpiIm+EixLhb\nodUozhXLFS5uiKb6+qMcVhLnoA53CuKr7y1tNhoqIl/HBAt+Xp6s8za3koN7qcOr\nsF327AG08v9rJqjMSu27AGEeDtvEYz8Q0LrL7v41jd/uzUUy0+nNUEtZepnrV0ir\nL+2Xb09kNkhFwampnhMqlZz6mEAc0v7kH+nbjhwDsi9lGkGbwr9WkxyZIMqAeW03\nj9l6HyuFfcoJU8SMTPnqCJAZwPOd5EhRLxTQon8AcFZIOANocz1rPOL25qRxOtkv\nvQuCioaL/wYErlXPuNIBxgdY9a8Tb5qeEk5i4MrAvxLNyRqdrnoOJVEitn8ZHPEj\nu/PFBD3t7wFyK/m9TZnPVAM6wY8iKPCzcoIvuI8pwZIujHfwGS5CsPG/AJ0i9eJh\nEU5m/rJJ/u6FBjL/KezfqRCH0asATteXt3a2a17EmbYcMeLJqbxv7pFjknaMItqT\nRpgR4u6/M1e6VcqSkHWDpVi/KwekpE6922b6wPbTqKSS0EIVo1lx1P4Vdo7f39Dj\nqak5lFcppIlGIZYyOmdUUhTMvxLJ3LJDqyhovdzUCsqhEQxI6s/lqvUxzZBe6E54\nIHSjIqShLzADoGPoC2xXIlQ5xkMuDkhcg6g1rK1sAE48/fNYLKYf8OEh01EP00UC\nvAsN3oGX2J91gxNAICDEBexwhMf75Y8onnpuDJptGkoeLHQsmCpKD/czgEsQ4kNE\nR34k4kC2+Tzjq05lE6NZuRYKUbV+ixzltnx1TFKIr4fTTpGbjYcCHdqlVQOHm3Hf\nUNkjE+SnXdaMp9g/XvQdq6A9v9tpmXySkAJjQeviyyIlyced12MCO08F6ee7tBrL\noszssc24PTroyHSadmWjV8xsdDSQI/tgzxMk1ptoNn6NZVj3tdqHhiAm/xTpMQn9\nXDGmohylr1lRaityOzfVxSFtB90IbQ==\n=K51E\n-----END PGP SIGNATURE-----",
        "payload": "tree 8a1f6a2f2e4cb7f76d22c5d82712d15532748ee8\nparent ef8f2966ac8e486f622f9803f24bd4021c6ff9ed\nauthor Vasil Dimov <vd@FreeBSD.org> 1623327401 +0200\ncommitter Vasil Dimov <vd@FreeBSD.org> 1623327401 +0200\n\nnet: relay I2P addresses even if not reachable (by us)\n\nNodes that can reach the I2P network (have set `-i2psam=`) will relay\nI2P addresses even without this patch. However, nodes that can't reach\nthe I2P network will not. This was done as a precaution in\nhttps://github.com/bitcoin/bitcoin/pull/20119 before anybody could\nconnect to I2P because then, for sure, it would have been useless.\n\nNow, however, we have I2P support and a bunch of I2P nodes, so get all\nnodes on the network to relay I2P addresses to help with propagation,\nsimilarly to what we do with Tor addresses.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ba45f0270815d54ae3290efc16324c2ff1984565",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/ba45f0270815d54ae3290efc16324c2ff1984565",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ba45f0270815d54ae3290efc16324c2ff1984565/comments",
    "author": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "ef8f2966ac8e486f622f9803f24bd4021c6ff9ed",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ef8f2966ac8e486f622f9803f24bd4021c6ff9ed",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/ef8f2966ac8e486f622f9803f24bd4021c6ff9ed"
      }
    ],
    "stats": {
      "total": 2,
      "additions": 1,
      "deletions": 1
    },
    "files": [
      {
        "sha": "e0d056b62602e54eb15c6d10efa52a1934f60bd4",
        "filename": "src/netaddress.h",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/ba45f0270815d54ae3290efc16324c2ff1984565/src/netaddress.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/ba45f0270815d54ae3290efc16324c2ff1984565/src/netaddress.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/netaddress.h?ref=ba45f0270815d54ae3290efc16324c2ff1984565",
        "patch": "@@ -222,7 +222,7 @@ class CNetAddr\n          */\n         bool IsRelayable() const\n         {\n-            return IsIPv4() || IsIPv6() || IsTor();\n+            return IsIPv4() || IsIPv6() || IsTor() || IsI2P();\n         }\n \n         /**"
      }
    ]
  },
  {
    "sha": "86742811ce3662789ac85334008090a3b54babe3",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo4Njc0MjgxMWNlMzY2Mjc4OWFjODUzMzQwMDgwOTBhM2I1NGJhYmUz",
    "commit": {
      "author": {
        "name": "Vasil Dimov",
        "email": "vd@FreeBSD.org",
        "date": "2021-06-11T11:50:58Z"
      },
      "committer": {
        "name": "Vasil Dimov",
        "email": "vd@FreeBSD.org",
        "date": "2021-06-11T11:52:42Z"
      },
      "message": "test: use NODE_* constants instead of magic numbers\n\nWe just assigned `NODE_NETWORK | NODE_WITNESS` to `nServices` a few\nlines above. Use that for verifying correctness instead of `9`.",
      "tree": {
        "sha": "b3dcaba72d516634e5b06328d1664b788bd7bcee",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b3dcaba72d516634e5b06328d1664b788bd7bcee"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/86742811ce3662789ac85334008090a3b54babe3",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQQzBAABCAAdFiEE5k2NRWFNsHVF2czBVN8G9ktVy78FAmDDTpcACgkQVN8G9ktV\ny7/snB//aL4YTfbEnqactled/ig5ciEHtrGH+MdyTQnkffdaCwJ605XRlbwkCjSu\nQlcZQWWSuDdHn3FF/ruz03k+XXAy0CsBdLK8sZKrONqBXy/L4VGh86KkvQbo6cau\n2+F9RpW4j52WYS8lUEE+UdgFzzZFKtsK2k7eFfOwyHZviY3mZALNSYuM9Ra31hCr\npN6B/J3UA5WAJTz6TkwuZSJLklGKbFxZcE9eWooHpML9+zyOSB3TXjOdO1mfT/1f\n5dDPzI1Y9NKcPdEj54O9Xd1PbvkWPLd6vGzI1nyVCpIpXSXt3ns9d6u1VfZ2vFEx\nSyTDg9haUgVZTz3DUBllnVb+tFyzbwjgrwiHMcqg+MoI02+4PimvG3eZAzcITCRi\npspMRzYISI0lKfwvLhRmqDlC8F7tPR3NSn9uWxyWcvAqIx+AcEVkBEwWl3eyWOBx\naoRE6ve54xQlh4ttM1PxibVApmoAVbtnd9HIgwkSrAefbb5+iSRG1XSV/bM+Z78L\nyvO6Y07yT5OxgCuyuBDfGTdgRrf54KuoVVt/CHoJDX6cK95d6tRP94ZYyzhbzfCE\niXfiTijEjwblZLi2M8jJGXZFe0RFMIrM5RPhbdIsyGdBjkEJkkpBfkzvJvjkbCST\nqQn+ja4jPGPY4KJMGXVBLLaEn5cK2u7TiD16yO46hmdJYsKfq5QyVm+TFfiSqEqQ\nuI5qo09cp+v1iWTGt6mbwes452/2BXIV0/mwXcHVD7/kTwpBkrKv2NpHmuj2Aocl\nH3Eh5st9sXKSd+2IDgIriSU5vFagE4fiZuHoKbmLLi4zT7FtsVxlZPh7SnClohYV\nVhZ5iJY7w5SHfEIpBRSKk+A1qFekhlZyiighBXOc87tpVkWelZZQBE8eK2CEHN9y\n5TEoM3oHPL8sTIDaNmKxGdqTkOlhBCDn/5cZcNJ/hIAWxZA4NNdzUz4fe/LoR4qY\nRpnSjOsCWp3FMkeV23QZD/sCPcz5kLi1SxLtpcsFJlHrBj4Cj58iUb4yO4Kebn6s\n7pIm0gkTIlG4/XiNj19gYwayIJfXnPsYHeJ8h2jDSx/TG9xUIU49CrltBGaISZT/\n92I8mn8Dav/VANg0w0EvMEYvXl+BCCyy91Vw+JaQcX/gSsdm6zJob1f1fNJjbkko\nySieUyxjsESPT3FHnXlpdbnTjoNaWQDFgdGqEpQDc092KrvWsh3+3ldcTG2yEYUr\nxbploU1DmDJoBNrTWt4CMApsw08r4U3E1TejM+C3wEOj4RCGAHF68sqnCrznOGOd\nezdJlSwdfgtsFzur8HMssUbfYTukl/RG/T3o04ZBeJmGnKAKvtObz6W/J94p/XWc\neGeaIU8KtPpB3u/XgYqPGiBACm5ftg==\n=qPak\n-----END PGP SIGNATURE-----",
        "payload": "tree b3dcaba72d516634e5b06328d1664b788bd7bcee\nparent ba45f0270815d54ae3290efc16324c2ff1984565\nauthor Vasil Dimov <vd@FreeBSD.org> 1623412258 +0200\ncommitter Vasil Dimov <vd@FreeBSD.org> 1623412362 +0200\n\ntest: use NODE_* constants instead of magic numbers\n\nWe just assigned `NODE_NETWORK | NODE_WITNESS` to `nServices` a few\nlines above. Use that for verifying correctness instead of `9`.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/86742811ce3662789ac85334008090a3b54babe3",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/86742811ce3662789ac85334008090a3b54babe3",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/86742811ce3662789ac85334008090a3b54babe3/comments",
    "author": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "ba45f0270815d54ae3290efc16324c2ff1984565",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ba45f0270815d54ae3290efc16324c2ff1984565",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/ba45f0270815d54ae3290efc16324c2ff1984565"
      }
    ],
    "stats": {
      "total": 2,
      "additions": 1,
      "deletions": 1
    },
    "files": [
      {
        "sha": "5d8101cd339b373e7c37f691adb3db39cec8b4de",
        "filename": "test/functional/p2p_addrv2_relay.py",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/86742811ce3662789ac85334008090a3b54babe3/test/functional/p2p_addrv2_relay.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/86742811ce3662789ac85334008090a3b54babe3/test/functional/p2p_addrv2_relay.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/p2p_addrv2_relay.py?ref=86742811ce3662789ac85334008090a3b54babe3",
        "patch": "@@ -36,7 +36,7 @@ def __init__(self):\n \n     def on_addrv2(self, message):\n         for addr in message.addrs:\n-            assert_equal(addr.nServices, 9)\n+            assert_equal(addr.nServices, NODE_NETWORK | NODE_WITNESS)\n             assert addr.ip.startswith('123.123.123.')\n             assert (8333 <= addr.port < 8343)\n         self.addrv2_received_and_checked = True"
      }
    ]
  },
  {
    "sha": "33e211d2a442e4555ff3401f92af4ee2f7552568",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzozM2UyMTFkMmE0NDJlNDU1NWZmMzQwMWY5MmFmNGVlMmY3NTUyNTY4",
    "commit": {
      "author": {
        "name": "Vasil Dimov",
        "email": "vd@FreeBSD.org",
        "date": "2021-06-11T13:31:54Z"
      },
      "committer": {
        "name": "Vasil Dimov",
        "email": "vd@FreeBSD.org",
        "date": "2021-06-11T17:16:06Z"
      },
      "message": "test: implement ser/unser of I2P addresses in functional tests",
      "tree": {
        "sha": "a9eafa36dc4f5fec6005d72bb3a1df82b9a0cc4f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a9eafa36dc4f5fec6005d72bb3a1df82b9a0cc4f"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/33e211d2a442e4555ff3401f92af4ee2f7552568",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQQzBAABCAAdFiEE5k2NRWFNsHVF2czBVN8G9ktVy78FAmDDmlcACgkQVN8G9ktV\ny79nHyAAn652eVGTJKGuB7oPP4J/iVKDlxycwJ92VUoi26Memk9PtcTdPFFN/yk6\n3TRprF6w+PzMvCVqXVkzaBwTNKqebbClsfmg1S6tfbhDwl/ede5wjRz7V5VzfQ3i\nrTSeyo+NCOGN4YTkd2iUx8IsRdCCpe2a2hRSjU7xH+CbMgAIh/nnufnZla5RCYTC\n1C9ciF33CN3rdnBmlEYczheGZo7gvrvq08HrUpKomDNqSYWCbpUxXRVz/GVSkS70\njr5v5zldvEtnauJB3Ibifz0yZJyRIAZC19amok69VB+ZSvhFBcY/MnY8wWZt/acg\nTe4Dx+dAJrMr0KKD6ELB1FeULGWl02yC1Ni6glJ2DdPJ0+Wfj4h8OiJCdkAM5/R2\nyid07WmvCBG0beEnVA/wRqdafIgppfNrd0XeqQhB+01hxQ65IK2dAdFUCdY0S1sf\nyc5Lxs0/brfeZzo6IqLZRg8YNlI7uHeWu/424WDlES9V5CO/h2wqFXmBH3ej2yHM\nkKtrd9OOyfQfGEEMIG7z7/0XbB77c3X6TqT7NIeEUdUpfop8QsmPGXrR115TcMxD\n3BspM5lKP1iCog3MEPHnPhaU+Ktio28DkYIVpcCvvrHRv2/LZEkzlQoFnXyGM0aS\n5g1oVD8rDdJvX7MnkjWOL9WTShGrO+N4b7GIRbYvvYjPdiBK33TJ5QpgHQAgwjHT\nyF/+T+BblLrct0B36t/AJ+qsoWrKegVlQCH30tOu5PwX6q15hZPtljISWa1HNSKt\neyxEDG9J0WLU6Bp4ToKjNzS4EMWePgKR8mVESm9Un3qK0u6YkQ9zTMYjktjnHv9u\nV6egSvDdnbsibl/OT0rxEZ4QRhtCALCt7tQdb4Sawjt3rFbcunNGBIefPpkIsobL\n35+rRxTqZ63+BQDf4ceWp5svnLeigwk8Jj87cUptfjkjK4BGg/cZVUQlH4fdDDhl\nn+m4Cq2FYR4TB2snkts+Bu2SS9g84P2pI41ZJHrS7CkhdiY8Is1oLb2eQXUn/+dQ\nSJSjrItOWWCbIzkvUzkt+SD1m2oygh0Unn8eU4ImnFYdKmYfogT6VLXGOJf+YUOM\nkej9tnbV1IqzuB1OT/UUC3wxNZbkoTTCOFqhPTnRFELik46Xwxru9PSON1U0+3kJ\n1m9bpxmrmmXTGNVeZ1/WW4UrCHiQu2FVM3Beyo0e8lBFNfgXfhylLyuP5WS8TOOw\ny/HC/LGNInBJx6txuzN+99X44w8+IHeaJP02o2zBhRaMUi+HA9e0r2cW1W/sPtNs\nXZrwKXfTyeMdTyEGVqQS9fucdw1OgH7SZedKOxAD9o575AqYLpOa5n3sd1y8i8gx\nid4rjIRlgIbyZWZ5ujx/mURalsJbhw==\n=XMW2\n-----END PGP SIGNATURE-----",
        "payload": "tree a9eafa36dc4f5fec6005d72bb3a1df82b9a0cc4f\nparent 86742811ce3662789ac85334008090a3b54babe3\nauthor Vasil Dimov <vd@FreeBSD.org> 1623418314 +0200\ncommitter Vasil Dimov <vd@FreeBSD.org> 1623431766 +0200\n\ntest: implement ser/unser of I2P addresses in functional tests\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/33e211d2a442e4555ff3401f92af4ee2f7552568",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/33e211d2a442e4555ff3401f92af4ee2f7552568",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/33e211d2a442e4555ff3401f92af4ee2f7552568/comments",
    "author": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "86742811ce3662789ac85334008090a3b54babe3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/86742811ce3662789ac85334008090a3b54babe3",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/86742811ce3662789ac85334008090a3b54babe3"
      }
    ],
    "stats": {
      "total": 27,
      "additions": 21,
      "deletions": 6
    },
    "files": [
      {
        "sha": "a21d7e7946ec7a5731865356e9c6410e8725f3c1",
        "filename": "test/functional/test_framework/messages.py",
        "status": "modified",
        "additions": 21,
        "deletions": 6,
        "changes": 27,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/33e211d2a442e4555ff3401f92af4ee2f7552568/test/functional/test_framework/messages.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/33e211d2a442e4555ff3401f92af4ee2f7552568/test/functional/test_framework/messages.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/test_framework/messages.py?ref=33e211d2a442e4555ff3401f92af4ee2f7552568",
        "patch": "@@ -18,6 +18,7 @@\n Classes use __slots__ to ensure extraneous attributes aren't accidentally added\n by tests, compromising their intended effect.\n \"\"\"\n+from base64 import b32decode, b32encode\n from codecs import encode\n import copy\n import hashlib\n@@ -207,15 +208,20 @@ class CAddress:\n \n     # see https://github.com/bitcoin/bips/blob/master/bip-0155.mediawiki\n     NET_IPV4 = 1\n+    NET_I2P = 5\n \n     ADDRV2_NET_NAME = {\n-        NET_IPV4: \"IPv4\"\n+        NET_IPV4: \"IPv4\",\n+        NET_I2P: \"I2P\"\n     }\n \n     ADDRV2_ADDRESS_LENGTH = {\n-        NET_IPV4: 4\n+        NET_IPV4: 4,\n+        NET_I2P: 32\n     }\n \n+    I2P_PAD = \"====\"\n+\n     def __init__(self):\n         self.time = 0\n         self.nServices = 1\n@@ -255,24 +261,33 @@ def deserialize_v2(self, f):\n         self.nServices = deser_compact_size(f)\n \n         self.net = struct.unpack(\"B\", f.read(1))[0]\n-        assert self.net == self.NET_IPV4\n+        assert self.net in (self.NET_IPV4, self.NET_I2P)\n \n         address_length = deser_compact_size(f)\n         assert address_length == self.ADDRV2_ADDRESS_LENGTH[self.net]\n \n-        self.ip = socket.inet_ntoa(f.read(4))\n+        addr_bytes = f.read(address_length)\n+        if self.net == self.NET_IPV4:\n+            self.ip = socket.inet_ntoa(addr_bytes)\n+        else:\n+            self.ip = b32encode(addr_bytes)[0:-len(self.I2P_PAD)].decode(\"ascii\").lower() + \".b32.i2p\"\n \n         self.port = struct.unpack(\">H\", f.read(2))[0]\n \n     def serialize_v2(self):\n         \"\"\"Serialize in addrv2 format (BIP155)\"\"\"\n-        assert self.net == self.NET_IPV4\n+        assert self.net in (self.NET_IPV4, self.NET_I2P)\n         r = b\"\"\n         r += struct.pack(\"<I\", self.time)\n         r += ser_compact_size(self.nServices)\n         r += struct.pack(\"B\", self.net)\n         r += ser_compact_size(self.ADDRV2_ADDRESS_LENGTH[self.net])\n-        r += socket.inet_aton(self.ip)\n+        if self.net == self.NET_IPV4:\n+            r += socket.inet_aton(self.ip)\n+        else:\n+            sfx = \".b32.i2p\"\n+            assert self.ip.endswith(sfx)\n+            r += b32decode(self.ip[0:-len(sfx)] + self.I2P_PAD, True)\n         r += struct.pack(\">H\", self.port)\n         return r\n "
      }
    ]
  },
  {
    "sha": "e7468139a1dddd4946bc70697ec38816b3fa8f9b",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzplNzQ2ODEzOWExZGRkZDQ5NDZiYzcwNjk3ZWMzODgxNmIzZmE4Zjli",
    "commit": {
      "author": {
        "name": "Vasil Dimov",
        "email": "vd@FreeBSD.org",
        "date": "2021-06-11T13:33:23Z"
      },
      "committer": {
        "name": "Vasil Dimov",
        "email": "vd@FreeBSD.org",
        "date": "2021-06-11T17:16:07Z"
      },
      "message": "test: make CAddress in functional tests comparable\n\nThis way we can compare CAddress objects using `==` or even\narrays of CAddress using `array1 == array2`.",
      "tree": {
        "sha": "667cfe9c57e98d44eaa2c0669404f0e15c791027",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/667cfe9c57e98d44eaa2c0669404f0e15c791027"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e7468139a1dddd4946bc70697ec38816b3fa8f9b",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQQzBAABCAAdFiEE5k2NRWFNsHVF2czBVN8G9ktVy78FAmDDmlcACgkQVN8G9ktV\ny78EwR//cT0me+da5NNPjFG47ccHNStT4wKmIKKKc7XsE0wtqN87D1BEtF71lMbl\nmrBzO6wOn+g1xpKdfLWYlpH7QGU0df3fJmYDWwojMyzLsQg+A0xw73aZ3ZpxXnQb\n1gVext3NWweTbvjf2md3npQlYLw15CLXKGxXDy6j7rJzx+Dg4El/AO2rWK2fXbvY\nSF78HY1jXSxtKSSLCN4CGM0Z7ceojLiDbwbrHF8MAqmECyVBdeJDLUyuogqBr7BF\nq5eVS28gK0v7WfmvSRy7KsbRlPQJzvLHlKiHWBLg1wES4XHrNW4UsPSFuCDI1KTV\n42MY2YVUo+A6nkTc2G3ffYPi9y1TNg9rxQJpuJQbRlP4NoqDU0cHh7BUAoam6SrM\nmGMtBTDPOvIpBRHBm4baaQ16PTlIZdlLnSNFfTOH2VFmrZ1l+69EhNWwLw+zEgo/\nMCtcXbpsPHo9Ll4JRK+9ZFiizq7OSfQxlamks1v1aQCPRNvTscY+XBSYzRbBrTQc\nZ42aszyEPAyATgEeFoA9PKtED1n8qME7fxZnrpmQi52D0euIty7eSw6X3kQh8P1q\nLT49k/2rcQvO5syhuqrzB39Rye98Arkk2ouZyyGEZ5tVwCQpOkD3pLFrw+na8Fnv\n/xa1vGssubyDEnxOhTzualGViz4NRhHGGxNqtVQdDIO/kPvSk80XkctH2KgMas+3\neWHWMzZOvqNDllp+IgVA1lKF32obMnE7fWfrDxsO7Pp7XpGotRAtkR3z00x5hVnd\naiMzTI6tR5WQ+bMWpseqiMN8qhoD1QqQoZbD6PJ6oO8qXPZd5Qew/tKhGQWTAZXP\nVmOpojenyRcy1aInP+5+Q0Chg9rXQbq2/6JVtOouknLI+LKChGvCtV/qI+NNzc3E\nq24jt6qHZRbpEhE9XTIlFKiKhLSS77f5O+pC3V7Wkpnae0bwr/u2JQcCpvkAVs5/\nnN1zIpICEwtR4RtdpVnC77ywt+VB9l8LrL+acAaQpVxqgbAsUKRhoWj/ibIdPSmL\n7ds2lDetbYw9ATj/T7R03ZCjXdDgh6u0XOb6IyrqbmS2HkyhWv+Z2Sd9bEKSv/Hz\njhU4QTvd2TBd4kYMcXOK2Fc/4R26emW1NlA8C6jKv2oXnNGBeOqwHmCQID5NamOA\nqZQCqtFe+3bjS0rT6QbUIM964Sal43PazFb3IOFNlHSJ9figC8py7wl0NQyMAqdn\nefg8MEr+svRoscZIuZNDz+bJtriTWpWk1WAVJEtXja6wMnhiKhmsuA/KMCS/B9OL\nemSRMwMzJWYcGgir6nOdAJXG8C1SJl+FRY2O0Odm/p0BRMKFglsOl/ogHq3oVXfp\nZi2PYXG5nxAmY6HjaITJGK3yK8LZsg==\n=YT5/\n-----END PGP SIGNATURE-----",
        "payload": "tree 667cfe9c57e98d44eaa2c0669404f0e15c791027\nparent 33e211d2a442e4555ff3401f92af4ee2f7552568\nauthor Vasil Dimov <vd@FreeBSD.org> 1623418403 +0200\ncommitter Vasil Dimov <vd@FreeBSD.org> 1623431767 +0200\n\ntest: make CAddress in functional tests comparable\n\nThis way we can compare CAddress objects using `==` or even\narrays of CAddress using `array1 == array2`.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e7468139a1dddd4946bc70697ec38816b3fa8f9b",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/e7468139a1dddd4946bc70697ec38816b3fa8f9b",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e7468139a1dddd4946bc70697ec38816b3fa8f9b/comments",
    "author": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "33e211d2a442e4555ff3401f92af4ee2f7552568",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/33e211d2a442e4555ff3401f92af4ee2f7552568",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/33e211d2a442e4555ff3401f92af4ee2f7552568"
      }
    ],
    "stats": {
      "total": 3,
      "additions": 3,
      "deletions": 0
    },
    "files": [
      {
        "sha": "fdc254e5fc8442323ae15eb0b8c145f46b9dfefa",
        "filename": "test/functional/test_framework/messages.py",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e7468139a1dddd4946bc70697ec38816b3fa8f9b/test/functional/test_framework/messages.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e7468139a1dddd4946bc70697ec38816b3fa8f9b/test/functional/test_framework/messages.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/test_framework/messages.py?ref=e7468139a1dddd4946bc70697ec38816b3fa8f9b",
        "patch": "@@ -229,6 +229,9 @@ def __init__(self):\n         self.ip = \"0.0.0.0\"\n         self.port = 0\n \n+    def __eq__(self, other):\n+        return self.net == other.net and self.ip == other.ip and self.nServices == other.nServices and self.port == other.port and self.time == other.time\n+\n     def deserialize(self, f, *, with_time=True):\n         \"\"\"Deserialize from addrv1 format (pre-BIP155)\"\"\"\n         if with_time:"
      }
    ]
  },
  {
    "sha": "7593b06bd1262f438bf34769ecc00e9c22328e56",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo3NTkzYjA2YmQxMjYyZjQzOGJmMzQ3NjllY2MwMGU5YzIyMzI4ZTU2",
    "commit": {
      "author": {
        "name": "Vasil Dimov",
        "email": "vd@FreeBSD.org",
        "date": "2021-06-11T13:36:07Z"
      },
      "committer": {
        "name": "Vasil Dimov",
        "email": "vd@FreeBSD.org",
        "date": "2021-06-11T17:17:59Z"
      },
      "message": "test: ensure I2P addresses are relayed\n\nThis test would fail if `CNetAddr::IsRelayable()` returns `false` for\nI2P addresses, given that this test node does not have I2P connectivity.",
      "tree": {
        "sha": "d48be4142d8d115e6d0ee7460ca8bd44774021f8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d48be4142d8d115e6d0ee7460ca8bd44774021f8"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7593b06bd1262f438bf34769ecc00e9c22328e56",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQQzBAABCAAdFiEE5k2NRWFNsHVF2czBVN8G9ktVy78FAmDDmskACgkQVN8G9ktV\ny789mB/8C+r7napAHX0OJ9he6/60ejjQ7NE6Svn8PubDjM7RSj8RmKQLiLYxMP4Q\nQ9PZkGho8ZJTdcGVY8PRk9aN4Ym20petogXm5baGthhW6aqBCbnruAOxeuc+EBtc\nbDhI1A4iS5K0FmdEnK+SAhPDuChzbgVoYS0N/+FOXoBQF5UU0LjL5zrogLjhv6Sz\nebcceMbFLazOY665dr2cOi7Gbhza0ZhyJdsqZKMI6Vx52m/Q6W213mLEObklitZB\n1WBuxSklcYCT4wZxXIMwpMEKkEbnW1kRYQTgRqzAXMhggvA9GMHm5fiNYeuMv2EA\nvWLeIq3HRdvQtrOI5HA11uiymC/qagocXb1K5XYEnqgF0m00UHHKnGb534pcIoHV\nAPH7V3tGIVafJLQTz8rwUMXrhLK9bdRo+qeSf1mR1kOzuwMQKY00ObM0PAVcF310\n6ntrjjAjbK9pKJ8JOsLOd58qhXvG977I62CKL6XZpfBw7iiU+KJcVIzzoE2fKYpt\ngm+dU1nLCmWmcGvyH39e681pl0dpUkM4WXNwZ0WeWcqgH50IolFRH1JKP3403/ZQ\njhb2DRcYcNxMvAoo1BKgaWrpOV7FoZGbXiVYatCZ775hiKx96kTeerr64FSsVDls\nUrdkaswUIe2YGlimZl4Rxe0QCqERXCV9AfUsZ2R6ArUFH3rbfDbf3DBgYTHef4ve\nIffpf/d8xwhRF3jel2w3xmmz7ppVS3aZE7qiTWno8W8xb7GrJayFEp/X07y3B40Q\nsEvRBVRL/3S0sJ++ZNJ35/IuUZb/QUjQoll4b4MUjmQhEqQ1Rj+jwB88YgHc1O9e\nbXgXjphcYWHNJigJnKI92Y0IPT7PLW56dIQcLdTP9ezgit5zMsYsU6kXvWnA8dJ0\nGeVzOxBxIOZpib3nqmxzj3GjxlGYdjAoLQ9Sp+O1THTuE8gVkFYlUEgGPwgf/MeO\nBoB+swnAQtncRovyxMDN7fTXDWZO39q6virAS6b3W97il3N+3JjVPJVJTky6wE7O\nZIqKMEBXr+ZCJjiw6AlnHfrccsi8y3QbuDPNr0jS8zoVaFkQSCjDz+qSF7naF3ef\n1/ZTX3XpB1SPAXyBObAr2BrUAB3EPW0ZmFkwxX+KJ8fXO8gxcWgRSoQ6PFArfJKq\nJVnEUqa8k3Jnz4sAEm31Fuv+E3i9wDgoKKMg5A5BFrMVh/NOuVzfk+wOY2BBCpfv\ntTyudAuS5pT5n0jXfJN1NykzbRI1q5J2+Ij0rmEBjmpaj1AJfAbDBq3W3g+R43Su\nRQ0PjV2eAslX7Daj2UATpsM7i+EYF+/kWUE15b5I86nWWXrjS1YCLqYZKP8gY8qk\nO3eM0Dsz0iCLlLRZk9wFnGtY1252jQ==\n=GQxS\n-----END PGP SIGNATURE-----",
        "payload": "tree d48be4142d8d115e6d0ee7460ca8bd44774021f8\nparent e7468139a1dddd4946bc70697ec38816b3fa8f9b\nauthor Vasil Dimov <vd@FreeBSD.org> 1623418567 +0200\ncommitter Vasil Dimov <vd@FreeBSD.org> 1623431879 +0200\n\ntest: ensure I2P addresses are relayed\n\nThis test would fail if `CNetAddr::IsRelayable()` returns `false` for\nI2P addresses, given that this test node does not have I2P connectivity.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7593b06bd1262f438bf34769ecc00e9c22328e56",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/7593b06bd1262f438bf34769ecc00e9c22328e56",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7593b06bd1262f438bf34769ecc00e9c22328e56/comments",
    "author": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "e7468139a1dddd4946bc70697ec38816b3fa8f9b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e7468139a1dddd4946bc70697ec38816b3fa8f9b",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/e7468139a1dddd4946bc70697ec38816b3fa8f9b"
      }
    ],
    "stats": {
      "total": 25,
      "additions": 16,
      "deletions": 9
    },
    "files": [
      {
        "sha": "c006a6c24f8665ab91fa7763d24facdb3564591f",
        "filename": "test/functional/p2p_addrv2_relay.py",
        "status": "modified",
        "additions": 16,
        "deletions": 9,
        "changes": 25,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/7593b06bd1262f438bf34769ecc00e9c22328e56/test/functional/p2p_addrv2_relay.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/7593b06bd1262f438bf34769ecc00e9c22328e56/test/functional/p2p_addrv2_relay.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/p2p_addrv2_relay.py?ref=7593b06bd1262f438bf34769ecc00e9c22328e56",
        "patch": "@@ -18,12 +18,19 @@\n from test_framework.test_framework import BitcoinTestFramework\n from test_framework.util import assert_equal\n \n+I2P_ADDR = \"c4gfnttsuwqomiygupdqqqyy5y5emnk5c73hrfvatri67prd7vyq.b32.i2p\"\n+\n ADDRS = []\n for i in range(10):\n     addr = CAddress()\n     addr.time = int(time.time()) + i\n     addr.nServices = NODE_NETWORK | NODE_WITNESS\n-    addr.ip = \"123.123.123.{}\".format(i % 256)\n+    # Add one I2P address at an arbitrary position.\n+    if i == 5:\n+        addr.net = addr.NET_I2P\n+        addr.ip = I2P_ADDR\n+    else:\n+        addr.ip = f\"123.123.123.{i % 256}\"\n     addr.port = 8333 + i\n     ADDRS.append(addr)\n \n@@ -35,11 +42,8 @@ def __init__(self):\n         super().__init__(support_addrv2 = True)\n \n     def on_addrv2(self, message):\n-        for addr in message.addrs:\n-            assert_equal(addr.nServices, NODE_NETWORK | NODE_WITNESS)\n-            assert addr.ip.startswith('123.123.123.')\n-            assert (8333 <= addr.port < 8343)\n-        self.addrv2_received_and_checked = True\n+        if ADDRS == message.addrs:\n+            self.addrv2_received_and_checked = True\n \n     def wait_for_addrv2(self):\n         self.wait_until(lambda: \"addrv2\" in self.last_message)\n@@ -64,15 +68,18 @@ def run_test(self):\n         addr_receiver = self.nodes[0].add_p2p_connection(AddrReceiver())\n         msg.addrs = ADDRS\n         with self.nodes[0].assert_debug_log([\n-                'Added 10 addresses from 127.0.0.1: 0 tried',\n-                'received: addrv2 (131 bytes) peer=0',\n-                'sending addrv2 (131 bytes) peer=1',\n+                # The I2P address is not added to node's own addrman because it has no\n+                # I2P reachability (thus 10 - 1 = 9).\n+                'Added 9 addresses from 127.0.0.1: 0 tried',\n+                'received: addrv2 (159 bytes) peer=0',\n+                'sending addrv2 (159 bytes) peer=1',\n         ]):\n             addr_source.send_and_ping(msg)\n             self.nodes[0].setmocktime(int(time.time()) + 30 * 60)\n             addr_receiver.wait_for_addrv2()\n \n         assert addr_receiver.addrv2_received_and_checked\n+        assert_equal(len(self.nodes[0].getnodeaddresses(count=0, network=\"i2p\")), 0)\n \n \n if __name__ == '__main__':"
      }
    ]
  }
]