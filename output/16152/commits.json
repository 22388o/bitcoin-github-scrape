[
  {
    "sha": "5efcb772838e404ca5757818d5548efcb872724b",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo1ZWZjYjc3MjgzOGU0MDRjYTU3NTc4MThkNTU0OGVmY2I4NzI3MjRi",
    "commit": {
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2019-06-05T15:02:35Z"
      },
      "committer": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2019-06-06T14:01:13Z"
      },
      "message": "Disable bloom filtering by default.\n\nBIP 37 bloom filters have been well-known to be a significant DoS\ntarget for some time. However, in order to provide continuity for\nSPV clients relying on it, the NODE_BLOOM service flag was added,\nand left as a default, to ensure sufficient nodes exist with such a\nflag.\n\nNODE_BLOOM is, at this point, well-established and, as long as\nthere exist 0.18 nodes with default config (which I'd anticipate\nwill be true for many years), will be available from some peers. By\nthat time, the continued slowdown of BIP 37-based filtering will\nlikely have rendered it useless (though this is already largely the\ncase). Further, BIP 37 was deliberately never updated to support\nwitness-based filtering as newer wallets are expected to migrate to\nsome yet-to-be-network-exposed filters.",
      "tree": {
        "sha": "1879493ddc8b330b0fbc0373cd0ee89899375a57",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/1879493ddc8b330b0fbc0373cd0ee89899375a57"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5efcb772838e404ca5757818d5548efcb872724b",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5efcb772838e404ca5757818d5548efcb872724b",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/5efcb772838e404ca5757818d5548efcb872724b",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5efcb772838e404ca5757818d5548efcb872724b/comments",
    "author": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "52ec4c64e89f478cd2134dbf25f5987d39e9b8bc",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/52ec4c64e89f478cd2134dbf25f5987d39e9b8bc",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/52ec4c64e89f478cd2134dbf25f5987d39e9b8bc"
      }
    ],
    "stats": {
      "total": 10,
      "additions": 5,
      "deletions": 5
    },
    "files": [
      {
        "sha": "31233aac19aa5585882f31ef8efa2d50b960522e",
        "filename": "src/validation.h",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5efcb772838e404ca5757818d5548efcb872724b/src/validation.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5efcb772838e404ca5757818d5548efcb872724b/src/validation.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/validation.h?ref=5efcb772838e404ca5757818d5548efcb872724b",
        "patch": "@@ -127,7 +127,7 @@ static const unsigned int MAX_BLOCKS_TO_ANNOUNCE = 8;\n /** Maximum number of unconnecting headers announcements before DoS score */\n static const int MAX_UNCONNECTING_HEADERS = 10;\n \n-static const bool DEFAULT_PEERBLOOMFILTERS = true;\n+static const bool DEFAULT_PEERBLOOMFILTERS = false;\n \n /** Default for -stopatheight */\n static const int DEFAULT_STOPATHEIGHT = 0;"
      },
      {
        "sha": "a4650df8ee5ab09455bbe48ce75afb5bd91c41c0",
        "filename": "test/functional/p2p_node_network_limited.py",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5efcb772838e404ca5757818d5548efcb872724b/test/functional/p2p_node_network_limited.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5efcb772838e404ca5757818d5548efcb872724b/test/functional/p2p_node_network_limited.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/p2p_node_network_limited.py?ref=5efcb772838e404ca5757818d5548efcb872724b",
        "patch": "@@ -8,7 +8,7 @@\n and that it responds to getdata requests for blocks correctly:\n     - send a block within 288 + 2 of the tip\n     - disconnect peers who request blocks older than that.\"\"\"\n-from test_framework.messages import CInv, msg_getdata, msg_verack, NODE_BLOOM, NODE_NETWORK_LIMITED, NODE_WITNESS\n+from test_framework.messages import CInv, msg_getdata, msg_verack, NODE_NETWORK_LIMITED, NODE_WITNESS\n from test_framework.mininode import P2PInterface, mininode_lock\n from test_framework.test_framework import BitcoinTestFramework\n from test_framework.util import (\n@@ -55,7 +55,7 @@ def setup_network(self):\n     def run_test(self):\n         node = self.nodes[0].add_p2p_connection(P2PIgnoreInv())\n \n-        expected_services = NODE_BLOOM | NODE_WITNESS | NODE_NETWORK_LIMITED\n+        expected_services = NODE_WITNESS | NODE_NETWORK_LIMITED\n \n         self.log.info(\"Check that node has signalled expected services.\")\n         assert_equal(node.nServices, expected_services)\n@@ -83,7 +83,7 @@ def run_test(self):\n \n         node1.wait_for_addr()\n         #must relay address with NODE_NETWORK_LIMITED\n-        assert_equal(node1.firstAddrnServices, 1036)\n+        assert_equal(node1.firstAddrnServices, expected_services)\n \n         self.nodes[0].disconnect_p2ps()\n         node1.wait_for_disconnect()"
      },
      {
        "sha": "2ab9c375760c22554baa1f0179071e83e15ca4a4",
        "filename": "test/functional/test_framework/messages.py",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5efcb772838e404ca5757818d5548efcb872724b/test/functional/test_framework/messages.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5efcb772838e404ca5757818d5548efcb872724b/test/functional/test_framework/messages.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/test_framework/messages.py?ref=5efcb772838e404ca5757818d5548efcb872724b",
        "patch": "@@ -44,7 +44,7 @@\n \n NODE_NETWORK = (1 << 0)\n # NODE_GETUTXO = (1 << 1)\n-NODE_BLOOM = (1 << 2)\n+# NODE_BLOOM = (1 << 2)\n NODE_WITNESS = (1 << 3)\n NODE_NETWORK_LIMITED = (1 << 10)\n "
      }
    ]
  },
  {
    "sha": "f27309f55c4fa2b115525d72abb280757a568709",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmMjczMDlmNTVjNGZhMmIxMTU1MjVkNzJhYmIyODA3NTdhNTY4NzA5",
    "commit": {
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2019-06-06T14:01:06Z"
      },
      "committer": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2019-06-06T14:01:13Z"
      },
      "message": "Move DEFAULT_PEERBLOOMFILTERS from validation.h to net_processing.h",
      "tree": {
        "sha": "c23622e58d4d9825577fe84076d67c205b8a0585",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c23622e58d4d9825577fe84076d67c205b8a0585"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f27309f55c4fa2b115525d72abb280757a568709",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f27309f55c4fa2b115525d72abb280757a568709",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/f27309f55c4fa2b115525d72abb280757a568709",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f27309f55c4fa2b115525d72abb280757a568709/comments",
    "author": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "5efcb772838e404ca5757818d5548efcb872724b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5efcb772838e404ca5757818d5548efcb872724b",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/5efcb772838e404ca5757818d5548efcb872724b"
      }
    ],
    "stats": {
      "total": 3,
      "additions": 1,
      "deletions": 2
    },
    "files": [
      {
        "sha": "dffc3f273f266d1ecb8a078530aa0f3807ef4dcd",
        "filename": "src/net_processing.h",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/f27309f55c4fa2b115525d72abb280757a568709/src/net_processing.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/f27309f55c4fa2b115525d72abb280757a568709/src/net_processing.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/net_processing.h?ref=f27309f55c4fa2b115525d72abb280757a568709",
        "patch": "@@ -19,6 +19,7 @@ static const unsigned int DEFAULT_MAX_ORPHAN_TRANSACTIONS = 100;\n static const unsigned int DEFAULT_BLOCK_RECONSTRUCTION_EXTRA_TXN = 100;\n /** Default for BIP61 (sending reject messages) */\n static constexpr bool DEFAULT_ENABLE_BIP61{false};\n+static const bool DEFAULT_PEERBLOOMFILTERS = false;\n \n class PeerLogicValidation final : public CValidationInterface, public NetEventsInterface {\n private:"
      },
      {
        "sha": "0c19d9493d6b99f777afbba30783bd7ab2762e54",
        "filename": "src/validation.h",
        "status": "modified",
        "additions": 0,
        "deletions": 2,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/f27309f55c4fa2b115525d72abb280757a568709/src/validation.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/f27309f55c4fa2b115525d72abb280757a568709/src/validation.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/validation.h?ref=f27309f55c4fa2b115525d72abb280757a568709",
        "patch": "@@ -127,8 +127,6 @@ static const unsigned int MAX_BLOCKS_TO_ANNOUNCE = 8;\n /** Maximum number of unconnecting headers announcements before DoS score */\n static const int MAX_UNCONNECTING_HEADERS = 10;\n \n-static const bool DEFAULT_PEERBLOOMFILTERS = false;\n-\n /** Default for -stopatheight */\n static const int DEFAULT_STOPATHEIGHT = 0;\n "
      }
    ]
  },
  {
    "sha": "bead32e31e399090af30b2ee3539995d4105a66d",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiZWFkMzJlMzFlMzk5MDkwYWYzMGIyZWUzNTM5OTk1ZDQxMDVhNjZk",
    "commit": {
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2019-06-08T13:19:47Z"
      },
      "committer": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2019-07-18T21:29:24Z"
      },
      "message": "Add release notes for DEFAULT_BLOOM change",
      "tree": {
        "sha": "446325046aa9c1b4bdae516e265b0a9cb967a613",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/446325046aa9c1b4bdae516e265b0a9cb967a613"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/bead32e31e399090af30b2ee3539995d4105a66d",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/bead32e31e399090af30b2ee3539995d4105a66d",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/bead32e31e399090af30b2ee3539995d4105a66d",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/bead32e31e399090af30b2ee3539995d4105a66d/comments",
    "author": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "f27309f55c4fa2b115525d72abb280757a568709",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f27309f55c4fa2b115525d72abb280757a568709",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/f27309f55c4fa2b115525d72abb280757a568709"
      }
    ],
    "stats": {
      "total": 7,
      "additions": 7,
      "deletions": 0
    },
    "files": [
      {
        "sha": "9c77cb9ae5e5a88f9917bdb33cfc9bed030f4fbb",
        "filename": "doc/release-notes/release-notes-16152.md",
        "status": "added",
        "additions": 7,
        "deletions": 0,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/bead32e31e399090af30b2ee3539995d4105a66d/doc/release-notes/release-notes-16152.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/bead32e31e399090af30b2ee3539995d4105a66d/doc/release-notes/release-notes-16152.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/doc/release-notes/release-notes-16152.md?ref=bead32e31e399090af30b2ee3539995d4105a66d",
        "patch": "@@ -0,0 +1,7 @@\n+P2P Changes\n+-----------\n+- The default value for the -peerbloomfilters configuration option (and, thus, NODE_BLOOM support) has been changed to false.\n+  This resolves well-known DoS vectors in Bitcoin Core, especially for nodes with spinning disks. It is not anticipated that\n+  this will result in a significant lack of availability of NODE_BLOOM-enabled nodes in the coming years, however, clients\n+  which rely on the availability of NODE_BLOOM-supporting nodes on the P2P network should consider the process of migrating\n+  to a more modern (and less trustful and privacy-violating) alternative over the coming years."
      }
    ]
  }
]