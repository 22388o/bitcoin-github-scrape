gmaxwell,2013-10-13T22:47:53Z,"This is _not_ ready for merging yet. I've done some basic testingâ€” instrumenting announcement and seeing that it worked like expected, but before I put a lot more time into testing it (setting up a simulated network and such) I wanted to get some feedback on the general approach of giving the peer back the address it told us.\n\n(also, this patch was bluntly forward ported from the older version t",https://github.com/bitcoin/bitcoin/pull/3088#issuecomment-26229036,26229036,
BitcoinPullTester,2013-10-13T23:09:00Z,"Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/a851bf84f6a2ff95bd86b23e55bb0647f5f47188 for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/cu",https://github.com/bitcoin/bitcoin/pull/3088#issuecomment-26229349,26229349,
super3,2013-10-13T23:31:06Z,This seems like a priority because of the privacy and reliability implications. Will donate boxes and/or cloud time for testing. Is there anything in the request that let's the service know that its a Bitcoin node asking for an IP?\n\nWhat will happen if both of the listed services 'checkip.dyndns.org' and 'www.showmyip.com' are down?\n,https://github.com/bitcoin/bitcoin/pull/3088#issuecomment-26229726,26229726,
sipa,2013-10-13T23:38:06Z,"Bitcoind advertizes as 'Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1)', so no - it doesn't really let the site know anything. Of course, there could be other data that gives it away (combination with http protocol, closing of connections, timings, ...).\n\nIf the external ip services are down, then we don't know our own IP and can't advertize it. No big deal, but makes your node hard or impos",https://github.com/bitcoin/bitcoin/pull/3088#issuecomment-26229849,26229849,
super3,2013-10-13T23:51:10Z,"Well since these seem to be well used services that should make it fairly difficult. Volunteer services won't help either because they will only be used Bitcoin (which makes it easy to just run some honeypot nodes), and will require maintaining some sort of list of available look-up services. \n\nSeems like the immediate band-aid would be adding some more services until this method is readying for",https://github.com/bitcoin/bitcoin/pull/3088#issuecomment-26230098,26230098,
gmaxwell,2013-10-14T00:34:48Z,"@super3  We haven't considered it super high priority in the past because there are many other signals that give away a Bitcoin node on the network... and if you turn off listening or switch to using tor you turn off most (all in the case of Tor, hopefully) of them as as well as this one.\n\nThere were several other points of network centralization before, and we've been chewing away at them. This",https://github.com/bitcoin/bitcoin/pull/3088#issuecomment-26230868,26230868,
sipa,2013-10-14T00:35:38Z,"I need to look closer at the code changes, but I have little doubt this will be ready for 0.9.\n",https://github.com/bitcoin/bitcoin/pull/3088#issuecomment-26230885,26230885,
laanwj,2013-10-15T11:53:47Z,"This is nice to have, if we don't need to depend on centralized services we shouldn't.\n",https://github.com/bitcoin/bitcoin/pull/3088#issuecomment-26327878,26327878,
gavinandresen,2013-10-16T01:23:40Z,Approach sounds good. Can you write a test plan?\n,https://github.com/bitcoin/bitcoin/pull/3088#issuecomment-26386367,26386367,
mikehearn,2013-10-17T14:02:42Z,"Lying about a user-agent isn't gonna help anyway (trust me, I spent years shooting ua-forging fish in a barrel). The decentralisation aspects are more important.\n",https://github.com/bitcoin/bitcoin/pull/3088#issuecomment-26507993,26507993,
petertodd,2013-10-17T16:52:54Z,ACK on approach.\n\nThough it's worth considering how we could have had a system of signed per-node identities where you would sign your advertisement - including what you think is your IP/tor/whatever - and in addition to that nodes that relayed your advertisement could sign their own messages saying what they thought your globally reachable address was. But that's just food-for-thought - what yo,https://github.com/bitcoin/bitcoin/pull/3088#issuecomment-26526820,26526820,
laanwj,2013-10-18T13:43:36Z,"Why would one want signed per-node identities? For what would nodes want to identify themselves at all, isn't the idea that nodes are as indistinguishable and exchangeable as possible?\n",https://github.com/bitcoin/bitcoin/pull/3088#issuecomment-26596329,26596329,
petertodd,2013-10-18T16:05:52Z,"@laanwj One example is for anti-sybil protection by associating an identity with p2pool proofs-of-work, or by simply purchasing a fidelity bond. Once you make the identity expensive to obtain, you can then use fraud proofs - for instance rather than having an expensive UTXO commitment system and associated soft-fork you can just as easily ask nodes to make signed statements as to what transactions",https://github.com/bitcoin/bitcoin/pull/3088#issuecomment-26607973,26607973,
wtogami,2013-10-26T11:16:31Z,Would this be more informative if it logged when it transmits an advertisement?  Otherwise it is difficult to tell if it is working at all.  The log could also be informative in showing you if a peer lied to you.\n\nDoes bitcoin currently handle multi-homing?  The logging would also be informative here to show advertisements of multiple external IP's.\n\nhttps://github.com/wtogami/bitcoin/commits/,https://github.com/bitcoin/bitcoin/pull/3088#issuecomment-27144211,27144211,
wtogami,2013-10-27T01:08:32Z,"`receive version message: version 70001, blocks=266272, us=XX.XX.XX.XX:8333, them=0.0.0.0:0, peer=YY.YY.YY.YY:60127`\n\nThe `0.0.0.0` is expected and seemingly harmless when the remote host is using the externalip patch.  But if they explicitly set their own public address with externalip= it continues to be self-reported as 0.0.0.0.  Harmless but expected?\n",https://github.com/bitcoin/bitcoin/pull/3088#issuecomment-27159683,27159683,
gmaxwell,2013-10-27T01:11:01Z,Both. The design here is specifically to not start advertising whatever addresses untrusted peers give us to other peers.\n,https://github.com/bitcoin/bitcoin/pull/3088#issuecomment-27159709,27159709,
wtogami,2013-10-29T23:39:19Z,"https://bitcointalk.org/index.php?topic=320695.0\nIf end-users want to help testing of this patch, a backport is included in this build of Bitcoin 0.8.5\n",https://github.com/bitcoin/bitcoin/pull/3088#issuecomment-27354043,27354043,
laanwj,2013-11-24T14:50:50Z,Rebased version:\nhttps://github.com/laanwj/bitcoin/tree/2013_11_rebase_no_thirdparty_ip\n,https://github.com/bitcoin/bitcoin/pull/3088#issuecomment-29156975,29156975,
wtogami,2013-11-25T07:02:06Z,"https://bitcointalk.org/index.php?topic=320695.0\nI have been testing a backport of this patch against Bitcoin 0.8.5.  It seems to advertise as expected if the node has a public IP address, but if behind NAT in RFC1918 space, the remote peer does not seem to receive any addr advertisement.  It is possible that my backport was wrong or I'm testing it incorrectly.\n",https://github.com/bitcoin/bitcoin/pull/3088#issuecomment-29181212,29181212,
wtogami,2013-12-01T07:38:02Z,"A peer running this patch for 3 days with port 8333 forwarded to a fresh IPv4 address has zero incoming connections, further suggesting it is not working.\n",https://github.com/bitcoin/bitcoin/pull/3088#issuecomment-29569017,29569017,
kuzetsa,2013-12-09T17:11:54Z,Why was this merged? The comment by @wtogami suggests it doesn't even work as intended.\n,https://github.com/bitcoin/bitcoin/pull/3088#issuecomment-30150899,30150899,
laanwj,2013-12-09T17:20:30Z,It was not merged.\n,https://github.com/bitcoin/bitcoin/pull/3088#issuecomment-30151681,30151681,
jgarzik,2013-12-13T00:20:16Z,"Be nice to separate out, and go ahead and push, the checkpoints:: changes inside this.  Shrink the patch, make it easier to read, and get the obvious cleanups upstream immediately.\n",https://github.com/bitcoin/bitcoin/pull/3088#issuecomment-30475918,30475918,
Diapolo,2013-12-13T07:20:10Z,I'm all for cherry picking the sane changes and get them in also.\n,https://github.com/bitcoin/bitcoin/pull/3088#issuecomment-30491113,30491113,
laanwj,2013-12-24T09:13:58Z,"All the changes are sane, but we need to debug @wtogami's problem first before everything can be merged.\n\nI'll have a try at rebasing this and splitting this up between checkpoints changes and the rest.\n",https://github.com/bitcoin/bitcoin/pull/3088#issuecomment-31164487,31164487,
laanwj,2013-12-24T13:11:52Z,See #3461 \n,https://github.com/bitcoin/bitcoin/pull/3088#issuecomment-31171111,31171111,
