[
  {
    "sha": "a4118c6e200e02e7560f8bc213697aa2909d95b1",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzphNDExOGM2ZTIwMGUwMmU3NTYwZjhiYzIxMzY5N2FhMjkwOWQ5NWIx",
    "commit": {
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2020-12-13T19:36:22Z"
      },
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2020-12-13T20:20:39Z"
      },
      "message": "Add patch to make codesign_allocate compatible with Apple's",
      "tree": {
        "sha": "b3d55b480320174bf769195c297e325e522062e7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b3d55b480320174bf769195c297e325e522062e7"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a4118c6e200e02e7560f8bc213697aa2909d95b1",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a4118c6e200e02e7560f8bc213697aa2909d95b1",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/a4118c6e200e02e7560f8bc213697aa2909d95b1",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a4118c6e200e02e7560f8bc213697aa2909d95b1/comments",
    "author": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "ade38b6ee8f91e441507c0ee7ffe6ca020748991",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ade38b6ee8f91e441507c0ee7ffe6ca020748991",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/ade38b6ee8f91e441507c0ee7ffe6ca020748991"
      }
    ],
    "stats": {
      "total": 24,
      "additions": 22,
      "deletions": 2
    },
    "files": [
      {
        "sha": "33f69375cca312e61779be7503a981ae1c46f6f4",
        "filename": "depends/packages/native_cctools.mk",
        "status": "modified",
        "additions": 3,
        "deletions": 2,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a4118c6e200e02e7560f8bc213697aa2909d95b1/depends/packages/native_cctools.mk",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a4118c6e200e02e7560f8bc213697aa2909d95b1/depends/packages/native_cctools.mk",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/packages/native_cctools.mk?ref=a4118c6e200e02e7560f8bc213697aa2909d95b1",
        "patch": "@@ -4,7 +4,7 @@ $(package)_download_path=https://github.com/tpoechtrager/cctools-port/archive\n $(package)_file_name=$($(package)_version).tar.gz\n $(package)_sha256_hash=e51995a843533a3dac155dd0c71362dd471597a2d23f13dff194c6285362f875\n $(package)_build_subdir=cctools\n-$(package)_patches=ld64_disable_threading.patch\n+$(package)_patches=ld64_disable_threading.patch segalign.patch\n \n ifeq ($(strip $(FORCE_USE_SYSTEM_CLANG)),)\n $(package)_clang_version=8.0.0\n@@ -80,7 +80,8 @@ endef\n define $(package)_preprocess_cmds\n   CC=$($(package)_cc) CXX=$($(package)_cxx) INSTALLPREFIX=$($(package)_extract_dir) ./libtapi/build.sh && \\\n   CC=$($(package)_cc) CXX=$($(package)_cxx) INSTALLPREFIX=$($(package)_extract_dir) ./libtapi/install.sh && \\\n-  patch -p1 < $($(package)_patch_dir)/ld64_disable_threading.patch\n+  patch -p1 < $($(package)_patch_dir)/ld64_disable_threading.patch && \\\n+  patch -p1 < $($(package)_patch_dir)/segalign.patch\n endef\n \n define $(package)_config_cmds"
      },
      {
        "sha": "bcdbd67a6c5a0f26164bbff4743479e9645ab776",
        "filename": "depends/patches/native_cctools/segalign.patch",
        "status": "added",
        "additions": 19,
        "deletions": 0,
        "changes": 19,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a4118c6e200e02e7560f8bc213697aa2909d95b1/depends/patches/native_cctools/segalign.patch",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a4118c6e200e02e7560f8bc213697aa2909d95b1/depends/patches/native_cctools/segalign.patch",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/patches/native_cctools/segalign.patch?ref=a4118c6e200e02e7560f8bc213697aa2909d95b1",
        "patch": "@@ -0,0 +1,19 @@\n+commit 7f2eb11ce6ebec7eb9b8e1429535e453054143e5\n+Author: Pieter Wuille <pieter@wuille.net>\n+Date:   Sun Dec 13 11:34:21 2020 -0800\n+\n+    Make cctools_port's codesign_allocate compatible with Apple's\n+\n+diff --git a/cctools/libstuff/arch.c b/cctools/libstuff/arch.c\n+index 6f2332f..d85c25c 100644\n+--- a/cctools/libstuff/arch.c\n++++ b/cctools/libstuff/arch.c\n+@@ -134,7 +134,7 @@ static const struct cpu_entry cpu_entries[] = {\n+     { CPU_TYPE_ARM,\t    LITTLE_ENDIAN_BYTE_SEX, 0,\t\t       0x4000 },\n+     \n+     /* desktop */\n+-    { CPU_TYPE_X86_64,\t    LITTLE_ENDIAN_BYTE_SEX, 0x7fff5fc00000LL,  0x1000 },\n++    { CPU_TYPE_X86_64,\t    LITTLE_ENDIAN_BYTE_SEX, 0x7fff5fc00000LL,  0x2000 /* Used to be 0x1000; changed to 0x2000 to match Apple's distributed codesign_allocate. */},\n+     { CPU_TYPE_I386,\t    LITTLE_ENDIAN_BYTE_SEX, 0xc0000000,        0x1000 },\n+     { CPU_TYPE_POWERPC,\t    BIG_ENDIAN_BYTE_SEX,    0xc0000000,\t       0x1000 },\n+     { CPU_TYPE_POWERPC64,   BIG_ENDIAN_BYTE_SEX,    0x7ffff00000000LL, 0x1000 },"
      }
    ]
  }
]