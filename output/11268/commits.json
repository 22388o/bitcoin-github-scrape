[
  {
    "sha": "f151f5f50f05727cfd3445d8f678a8a2ac6c8409",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmMTUxZjVmNTBmMDU3MjdjZmQzNDQ1ZDhmNjc4YThhMmFjNmM4NDA5",
    "commit": {
      "author": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2017-09-07T17:11:44Z"
      },
      "committer": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2017-09-07T17:11:44Z"
      },
      "message": "[macOS] remove Growl support, remove unused code",
      "tree": {
        "sha": "239a483f3438367024768a3dfd23d6f7100f1363",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/239a483f3438367024768a3dfd23d6f7100f1363"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f151f5f50f05727cfd3445d8f678a8a2ac6c8409",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEyhopCNzi8TB0xizeHrd2uwPHki0FAlmxfd8ACgkQHrd2uwPH\nki0yRg/7B3GugadooQsV37M+0hejUUPfUwBsYOst698jGnbDSfEFJKezoL0pURUe\nLLDbjBwGUNTxDPJsD5ufgotUGqFBYf1z7ucJv9Jr8Arihl33XkraRpHjngRCSosE\n1qDrSJQiGcFFkxW9LyPJNILzDkigySfO7/sDsF9WS7OOiQdXY7o8ctbtqZc5rYuC\nulK+U1jHhiAprzB5iJGyZLhGpFRT839v2KHb6t0SS7QwguiJ6Zu/JdELBXnzpwSO\nb+09lRZ+Ssv1hLKD1wPlRXzNco43Lc6kK9IPUd3cJrHhflwT/mmNVHye6Wj9ZzLu\nWwdzy7q1YbFMMwtYquxBp12p+BjTs+4wl0+KdX8vL0BA0Ok/c8zcoFM+mx2XEnOP\nwuRqR5sKlTPBF0MsxV5+G/tVsorUfEdXH2VIW95f1C2I/G6Vf4iLZjK1BQHjfRFT\n7bgN9LVLXulhc3gW56Jgga1mYaSibLWm2dvkpghxmbrmiJai1IZtkuWjQEkzInWk\neMwjqZbBeHSqXm8dcgZy5EpRfdNOKzYifB1bE2IF4j+6lbISA8CqdJtMeWpjunFg\nZleCDJHpYHjBAB1o/q7Pc3fLbPTSUF3q2cR3Ys2wDfhtTyv9ixLdNQwvbsQbVZBS\ncpTnMrd0pYpA5lUBeRScin2ce+Xtqh5SrORpbkNOFEV5v+zpYYU=\n=RVLn\n-----END PGP SIGNATURE-----",
        "payload": "tree 239a483f3438367024768a3dfd23d6f7100f1363\nparent a3624ddb1a3b4a1ced39dfe75b1bcbb52de4fbb0\nauthor Jonas Schnelli <dev@jonasschnelli.ch> 1504804304 -0700\ncommitter Jonas Schnelli <dev@jonasschnelli.ch> 1504804304 -0700\n\n[macOS] remove Growl support, remove unused code\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f151f5f50f05727cfd3445d8f678a8a2ac6c8409",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/f151f5f50f05727cfd3445d8f678a8a2ac6c8409",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f151f5f50f05727cfd3445d8f678a8a2ac6c8409/comments",
    "author": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "a3624ddb1a3b4a1ced39dfe75b1bcbb52de4fbb0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a3624ddb1a3b4a1ced39dfe75b1bcbb52de4fbb0",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/a3624ddb1a3b4a1ced39dfe75b1bcbb52de4fbb0"
      }
    ],
    "stats": {
      "total": 90,
      "additions": 2,
      "deletions": 88
    },
    "files": [
      {
        "sha": "3a005c3c460e0b430d6802235474ed32423d2281",
        "filename": "src/qt/macnotificationhandler.h",
        "status": "modified",
        "additions": 2,
        "deletions": 5,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/f151f5f50f05727cfd3445d8f678a8a2ac6c8409/src/qt/macnotificationhandler.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/f151f5f50f05727cfd3445d8f678a8a2ac6c8409/src/qt/macnotificationhandler.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/macnotificationhandler.h?ref=f151f5f50f05727cfd3445d8f678a8a2ac6c8409",
        "patch": "@@ -7,20 +7,17 @@\n \n #include <QObject>\n \n-/** Macintosh-specific notification handler (supports UserNotificationCenter and Growl).\n+/** Macintosh-specific notification handler (supports UserNotificationCenter).\n  */\n class MacNotificationHandler : public QObject\n {\n     Q_OBJECT\n \n public:\n-    /** shows a 10.8+ UserNotification in the UserNotificationCenter\n+    /** shows a macOS 10.8+ UserNotification in the UserNotificationCenter\n      */\n     void showNotification(const QString &title, const QString &text);\n \n-    /** executes AppleScript */\n-    void sendAppleScript(const QString &script);\n-\n     /** check if OS can handle UserNotifications */\n     bool hasUserNotificationCenterSupport(void);\n     static MacNotificationHandler *instance();"
      },
      {
        "sha": "1b16c5f5240cdfbf4d5fe0de15778677733d7900",
        "filename": "src/qt/macnotificationhandler.mm",
        "status": "modified",
        "additions": 0,
        "deletions": 14,
        "changes": 14,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/f151f5f50f05727cfd3445d8f678a8a2ac6c8409/src/qt/macnotificationhandler.mm",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/f151f5f50f05727cfd3445d8f678a8a2ac6c8409/src/qt/macnotificationhandler.mm",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/macnotificationhandler.mm?ref=f151f5f50f05727cfd3445d8f678a8a2ac6c8409",
        "patch": "@@ -47,20 +47,6 @@ - (NSString *)__bundleIdentifier\n     }\n }\n \n-// sendAppleScript just take a QString and executes it as apple script\n-void MacNotificationHandler::sendAppleScript(const QString &script)\n-{\n-    QByteArray utf8 = script.toUtf8();\n-    char* cString = (char *)utf8.constData();\n-    NSString *scriptApple = [[NSString alloc] initWithUTF8String:cString];\n-\n-    NSAppleScript *as = [[NSAppleScript alloc] initWithSource:scriptApple];\n-    NSDictionary *err = nil;\n-    [as executeAndReturnError:&err];\n-    [as release];\n-    [scriptApple release];\n-}\n-\n bool MacNotificationHandler::hasUserNotificationCenterSupport(void)\n {\n     Class possibleClass = NSClassFromString(@\"NSUserNotificationCenter\");"
      },
      {
        "sha": "937928315b1dda8aea0c8bbf30e9a6a7f0922958",
        "filename": "src/qt/notificator.cpp",
        "status": "modified",
        "additions": 0,
        "deletions": 66,
        "changes": 66,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/f151f5f50f05727cfd3445d8f678a8a2ac6c8409/src/qt/notificator.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/f151f5f50f05727cfd3445d8f678a8a2ac6c8409/src/qt/notificator.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/notificator.cpp?ref=f151f5f50f05727cfd3445d8f678a8a2ac6c8409",
        "patch": "@@ -60,22 +60,6 @@ Notificator::Notificator(const QString &_programName, QSystemTrayIcon *_trayIcon\n     if( MacNotificationHandler::instance()->hasUserNotificationCenterSupport()) {\n         mode = UserNotificationCenter;\n     }\n-    else {\n-        // Check if Growl is installed (based on Qt's tray icon implementation)\n-        CFURLRef cfurl;\n-        OSStatus status = LSGetApplicationForInfo(kLSUnknownType, kLSUnknownCreator, CFSTR(\"growlTicket\"), kLSRolesAll, 0, &cfurl);\n-        if (status != kLSApplicationNotFoundErr) {\n-            CFBundleRef bundle = CFBundleCreate(0, cfurl);\n-            if (CFStringCompare(CFBundleGetIdentifier(bundle), CFSTR(\"com.Growl.GrowlHelperApp\"), kCFCompareCaseInsensitive | kCFCompareBackwards) == kCFCompareEqualTo) {\n-                if (CFStringHasSuffix(CFURLGetString(cfurl), CFSTR(\"/Growl.app/\")))\n-                    mode = Growl13;\n-                else\n-                    mode = Growl12;\n-            }\n-            CFRelease(cfurl);\n-            CFRelease(bundle);\n-        }\n-    }\n #endif\n }\n \n@@ -241,52 +225,6 @@ void Notificator::notifySystray(Class cls, const QString &title, const QString &\n \n // Based on Qt's tray icon implementation\n #ifdef Q_OS_MAC\n-void Notificator::notifyGrowl(Class cls, const QString &title, const QString &text, const QIcon &icon)\n-{\n-    const QString script(\n-        \"tell application \\\"%5\\\"\\n\"\n-        \"  set the allNotificationsList to {\\\"Notification\\\"}\\n\" // -- Make a list of all the notification types (all)\n-        \"  set the enabledNotificationsList to {\\\"Notification\\\"}\\n\" // -- Make a list of the notifications (enabled)\n-        \"  register as application \\\"%1\\\" all notifications allNotificationsList default notifications enabledNotificationsList\\n\" // -- Register our script with Growl\n-        \"  notify with name \\\"Notification\\\" title \\\"%2\\\" description \\\"%3\\\" application name \\\"%1\\\"%4\\n\" // -- Send a Notification\n-        \"end tell\"\n-    );\n-\n-    QString notificationApp(QApplication::applicationName());\n-    if (notificationApp.isEmpty())\n-        notificationApp = \"Application\";\n-\n-    QPixmap notificationIconPixmap;\n-    if (icon.isNull()) { // If no icon specified, set icon based on class\n-        QStyle::StandardPixmap sicon = QStyle::SP_MessageBoxQuestion;\n-        switch (cls)\n-        {\n-        case Information: sicon = QStyle::SP_MessageBoxInformation; break;\n-        case Warning: sicon = QStyle::SP_MessageBoxWarning; break;\n-        case Critical: sicon = QStyle::SP_MessageBoxCritical; break;\n-        }\n-        notificationIconPixmap = QApplication::style()->standardPixmap(sicon);\n-    }\n-    else {\n-        QSize size = icon.actualSize(QSize(48, 48));\n-        notificationIconPixmap = icon.pixmap(size);\n-    }\n-\n-    QString notificationIcon;\n-    QTemporaryFile notificationIconFile;\n-    if (!notificationIconPixmap.isNull() && notificationIconFile.open()) {\n-        QImageWriter writer(&notificationIconFile, \"PNG\");\n-        if (writer.write(notificationIconPixmap.toImage()))\n-            notificationIcon = QString(\" image from location \\\"file://%1\\\"\").arg(notificationIconFile.fileName());\n-    }\n-\n-    QString quotedTitle(title), quotedText(text);\n-    quotedTitle.replace(\"\\\\\", \"\\\\\\\\\").replace(\"\\\"\", \"\\\\\");\n-    quotedText.replace(\"\\\\\", \"\\\\\\\\\").replace(\"\\\"\", \"\\\\\");\n-    QString growlApp(this->mode == Notificator::Growl13 ? \"Growl\" : \"GrowlHelperApp\");\n-    MacNotificationHandler::instance()->sendAppleScript(script.arg(notificationApp, quotedTitle, quotedText, notificationIcon, growlApp));\n-}\n-\n void Notificator::notifyMacUserNotificationCenter(Class cls, const QString &title, const QString &text, const QIcon &icon) {\n     // icon is not supported by the user notification center yet. OSX will use the app icon.\n     MacNotificationHandler::instance()->showNotification(title, text);\n@@ -310,10 +248,6 @@ void Notificator::notify(Class cls, const QString &title, const QString &text, c\n     case UserNotificationCenter:\n         notifyMacUserNotificationCenter(cls, title, text, icon);\n         break;\n-    case Growl12:\n-    case Growl13:\n-        notifyGrowl(cls, title, text, icon);\n-        break;\n #endif\n     default:\n         if(cls == Critical)"
      },
      {
        "sha": "67f2b1df6992cf3662a146b7d330db6266541758",
        "filename": "src/qt/notificator.h",
        "status": "modified",
        "additions": 0,
        "deletions": 3,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/f151f5f50f05727cfd3445d8f678a8a2ac6c8409/src/qt/notificator.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/f151f5f50f05727cfd3445d8f678a8a2ac6c8409/src/qt/notificator.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/notificator.h?ref=f151f5f50f05727cfd3445d8f678a8a2ac6c8409",
        "patch": "@@ -58,8 +58,6 @@ public Q_SLOTS:\n         None,                       /**< Ignore informational notifications, and show a modal pop-up dialog for Critical notifications. */\n         Freedesktop,                /**< Use DBus org.freedesktop.Notifications */\n         QSystemTray,                /**< Use QSystemTray::showMessage */\n-        Growl12,                    /**< Use the Growl 1.2 notification system (Mac only) */\n-        Growl13,                    /**< Use the Growl 1.3 notification system (Mac only) */\n         UserNotificationCenter      /**< Use the 10.8+ User Notification Center (Mac only) */\n     };\n     QString programName;\n@@ -72,7 +70,6 @@ public Q_SLOTS:\n #endif\n     void notifySystray(Class cls, const QString &title, const QString &text, const QIcon &icon, int millisTimeout);\n #ifdef Q_OS_MAC\n-    void notifyGrowl(Class cls, const QString &title, const QString &text, const QIcon &icon);\n     void notifyMacUserNotificationCenter(Class cls, const QString &title, const QString &text, const QIcon &icon);\n #endif\n };"
      }
    ]
  }
]