[
  {
    "sha": "72351784b3df21a89f79076f4b814a6e700b6469",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo3MjM1MTc4NGIzZGYyMWE4OWY3OTA3NmY0YjgxNGE2ZTcwMGI2NDY5",
    "commit": {
      "author": {
        "name": "Fabian Jahr",
        "email": "fjahr@protonmail.com",
        "date": "2020-08-03T23:23:46Z"
      },
      "committer": {
        "name": "Fabian Jahr",
        "email": "fjahr@protonmail.com",
        "date": "2020-08-04T08:48:56Z"
      },
      "message": "lint: Remove travis env var from commit linter",
      "tree": {
        "sha": "4497d217d4b58c055976d13ce83607db4605889a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/4497d217d4b58c055976d13ce83607db4605889a"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/72351784b3df21a89f79076f4b814a6e700b6469",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\nComment: GPGTools - https://gpgtools.org\n\niQJJBAABCgAzFiEEtFq20ghhrCHSdrgm8T0enYkHmM0FAl8pIPoVHGZqYWhyQHBy\nb3Rvbm1haWwuY29tAAoJEPE9Hp2JB5jNuysP/2FFqduF43qaaCu30sXeI3UUd89a\nKIUDHbanU85UZbYTXehbhfy/bkqf2mCjoCeOjmSsDOwV1UXL3WauUo3zs/pjtBjy\nhzXHgf8FXdfJKgk4qgS7CNbc1HpK7+RvePt2QYAly1SBkJdzapVNZuhbsVXuKwjc\nnxU8Lnmur/3R893M92innUcjEZ0asWhBH5QN1V1BV7d7tJ0UcAFbIwzHsNKTbjcc\nQFy8CTSqPG+WLp65a2T5D2fDilI5zfAff5WJYXJI5sJkeWBB9IFp+qr56u7Dsxu0\n7eyEJ6jwvETyWghPOVkkbjoyt5xqtgiBA3NSsloMiph3AtT8daVH7jjnNS85tlfH\nHZb3hhkOcfjJKoOiZfRhaYIV5qFlKwkXZA9tkJNgtX4PLIRcXI1Sug1WrSzUu1NX\n3h7qGZzGRkviD1LvgQyauKg+XUD4YWH9hxeNBhJ6z19WyyUwJCHYdgS/rpncMWqw\neOqo5mWkFowyJtUcenpkWmsxswOHVMGPwvBNe2ZC6vldx7VUvcu3DjKXL0kmVsld\nrEdEuzX9npJkuf1wRhYZ+VEbqWII051HShiMV2f4l9gAirGpjRNNSobZ1q59jKwe\nLg2s5pUwOcIgO6cPOKATYabif+gzLqYH6CpJpBrQEC6FBBjow02c5t4XUZc1eZhb\nF5ESep8y6PwFDVVU\n=UvUh\n-----END PGP SIGNATURE-----",
        "payload": "tree 4497d217d4b58c055976d13ce83607db4605889a\nparent a78742830aa35bf57bcb0a4730977a1e5a1876bc\nauthor Fabian Jahr <fjahr@protonmail.com> 1596497026 +0200\ncommitter Fabian Jahr <fjahr@protonmail.com> 1596530936 +0200\n\nlint: Remove travis env var from commit linter\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/72351784b3df21a89f79076f4b814a6e700b6469",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/72351784b3df21a89f79076f4b814a6e700b6469",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/72351784b3df21a89f79076f4b814a6e700b6469/comments",
    "author": {
      "login": "fjahr",
      "id": 1322187,
      "node_id": "MDQ6VXNlcjEzMjIxODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjahr",
      "html_url": "https://github.com/fjahr",
      "followers_url": "https://api.github.com/users/fjahr/followers",
      "following_url": "https://api.github.com/users/fjahr/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjahr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
      "organizations_url": "https://api.github.com/users/fjahr/orgs",
      "repos_url": "https://api.github.com/users/fjahr/repos",
      "events_url": "https://api.github.com/users/fjahr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjahr/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "fjahr",
      "id": 1322187,
      "node_id": "MDQ6VXNlcjEzMjIxODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjahr",
      "html_url": "https://github.com/fjahr",
      "followers_url": "https://api.github.com/users/fjahr/followers",
      "following_url": "https://api.github.com/users/fjahr/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjahr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
      "organizations_url": "https://api.github.com/users/fjahr/orgs",
      "repos_url": "https://api.github.com/users/fjahr/repos",
      "events_url": "https://api.github.com/users/fjahr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjahr/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "a78742830aa35bf57bcb0a4730977a1e5a1876bc",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a78742830aa35bf57bcb0a4730977a1e5a1876bc",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/a78742830aa35bf57bcb0a4730977a1e5a1876bc"
      }
    ],
    "stats": {
      "total": 19,
      "additions": 10,
      "deletions": 9
    },
    "files": [
      {
        "sha": "8947f67bf6fad215a39ad947ce722485de539c72",
        "filename": "test/lint/lint-git-commit-check.sh",
        "status": "modified",
        "additions": 10,
        "deletions": 9,
        "changes": 19,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/72351784b3df21a89f79076f4b814a6e700b6469/test/lint/lint-git-commit-check.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/72351784b3df21a89f79076f4b814a6e700b6469/test/lint/lint-git-commit-check.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/lint/lint-git-commit-check.sh?ref=72351784b3df21a89f79076f4b814a6e700b6469",
        "patch": "@@ -14,21 +14,22 @@ while getopts \"?\" opt; do\n   case $opt in\n     ?)\n       echo \"Usage: $0 [N]\"\n-      echo \"       TRAVIS_COMMIT_RANGE='<commit range>' $0\"\n+      echo \"       COMMIT_RANGE='<commit range>' $0\"\n       echo \"       $0 -?\"\n       echo \"Checks unmerged commits, the previous N commits, or a commit range.\"\n-      echo \"TRAVIS_COMMIT_RANGE='47ba2c3...ee50c9e' $0\"\n+      echo \"COMMIT_RANGE='47ba2c3...ee50c9e' $0\"\n       exit ${EXIT_CODE}\n     ;;\n   esac\n done\n \n-if [ -z \"${TRAVIS_COMMIT_RANGE}\" ]; then\n-  if [ -n \"$1\" ]; then\n-    TRAVIS_COMMIT_RANGE=\"HEAD~$1...HEAD\"\n-  else\n-    TRAVIS_COMMIT_RANGE=\"origin/master..HEAD\"\n-  fi\n+if [ -z \"${COMMIT_RANGE}\" ]; then\n+    if [ -n \"$1\" ]; then\n+      COMMIT_RANGE=\"HEAD~$1...HEAD\"\n+    else\n+      MERGE_BASE=$(git merge-base HEAD master)\n+      COMMIT_RANGE=\"$MERGE_BASE..HEAD\"\n+    fi\n fi\n \n while IFS= read -r commit_hash  || [[ -n \"$commit_hash\" ]]; do\n@@ -41,6 +42,6 @@ while IFS= read -r commit_hash  || [[ -n \"$commit_hash\" ]]; do\n             EXIT_CODE=1\n         fi\n     done < <(git log --format=%B -n 1 \"$commit_hash\")\n-done < <(git log \"${TRAVIS_COMMIT_RANGE}\" --format=%H)\n+done < <(git log \"${COMMIT_RANGE}\" --format=%H)\n \n exit ${EXIT_CODE}"
      }
    ]
  }
]