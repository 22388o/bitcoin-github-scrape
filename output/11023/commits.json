[
  {
    "sha": "cc5d38f4b826b897dd818bb22c7f5d881718fd35",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjYzVkMzhmNGI4MjZiODk3ZGQ4MThiYjIyYzdmNWQ4ODE3MThmZDM1",
    "commit": {
      "author": {
        "name": "John Newbery",
        "email": "john@johnnewbery.com",
        "date": "2017-04-01T02:44:04Z"
      },
      "committer": {
        "name": "John Newbery",
        "email": "john@johnnewbery.com",
        "date": "2017-08-10T16:50:51Z"
      },
      "message": "Add option to attach a python debugger if test fails",
      "tree": {
        "sha": "86a1724d6e52a629649dbac7bbe1bececb73d2a5",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/86a1724d6e52a629649dbac7bbe1bececb73d2a5"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cc5d38f4b826b897dd818bb22c7f5d881718fd35",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/cc5d38f4b826b897dd818bb22c7f5d881718fd35",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/cc5d38f4b826b897dd818bb22c7f5d881718fd35",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/cc5d38f4b826b897dd818bb22c7f5d881718fd35/comments",
    "author": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "fa646369489d5655ac187f2a9e151317829581df",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa646369489d5655ac187f2a9e151317829581df",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/fa646369489d5655ac187f2a9e151317829581df"
      }
    ],
    "stats": {
      "total": 7,
      "additions": 7,
      "deletions": 0
    },
    "files": [
      {
        "sha": "e562d119385f8f4aa574769a5754af28602c8167",
        "filename": "test/functional/test_framework/test_framework.py",
        "status": "modified",
        "additions": 7,
        "deletions": 0,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/cc5d38f4b826b897dd818bb22c7f5d881718fd35/test/functional/test_framework/test_framework.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/cc5d38f4b826b897dd818bb22c7f5d881718fd35/test/functional/test_framework/test_framework.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/test_framework/test_framework.py?ref=cc5d38f4b826b897dd818bb22c7f5d881718fd35",
        "patch": "@@ -11,6 +11,7 @@\n import logging\n import optparse\n import os\n+import pdb\n import shutil\n import subprocess\n import sys\n@@ -125,6 +126,8 @@ def main(self):\n                           help=\"Write tested RPC commands into this directory\")\n         parser.add_option(\"--configfile\", dest=\"configfile\",\n                           help=\"Location of the test framework config file\")\n+        parser.add_option(\"--pdbonfailure\", dest=\"pdbonfailure\", default=False, action=\"store_true\",\n+                          help=\"Attach a python debugger if test fails\")\n         self.add_options(parser)\n         (self.options, self.args) = parser.parse_args()\n \n@@ -162,6 +165,10 @@ def main(self):\n         except KeyboardInterrupt as e:\n             self.log.warning(\"Exiting after keyboard interrupt\")\n \n+        if success == TestStatus.FAILED and self.options.pdbonfailure:\n+            print(\"Testcase failed. Attaching python debugger. Enter ? for help\")\n+            pdb.set_trace()\n+\n         if not self.options.noshutdown:\n             self.log.info(\"Stopping nodes\")\n             if self.nodes:"
      }
    ]
  }
]