[
  {
    "sha": "adaa568722e59cde510c5fe1997c49cbb9d7db12",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzphZGFhNTY4NzIyZTU5Y2RlNTEwYzVmZTE5OTdjNDljYmI5ZDdkYjEy",
    "commit": {
      "author": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2014-10-27T07:07:25Z"
      },
      "committer": {
        "name": "Matt Corallo",
        "email": "git@bluematt.me",
        "date": "2014-12-20T05:39:42Z"
      },
      "message": "Add script to verify all merge commits are signed",
      "tree": {
        "sha": "d392d4c3467c229e54d19c835c9bd497e6917aff",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d392d4c3467c229e54d19c835c9bd497e6917aff"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/adaa568722e59cde510c5fe1997c49cbb9d7db12",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/adaa568722e59cde510c5fe1997c49cbb9d7db12",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/adaa568722e59cde510c5fe1997c49cbb9d7db12",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/adaa568722e59cde510c5fe1997c49cbb9d7db12/comments",
    "author": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "13c077c7cfe9f367c721f3d99924b3d568afb4d0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/13c077c7cfe9f367c721f3d99924b3d568afb4d0",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/13c077c7cfe9f367c721f3d99924b3d568afb4d0"
      }
    ],
    "stats": {
      "total": 91,
      "additions": 91,
      "deletions": 0
    },
    "files": [
      {
        "sha": "7d4b91e887f8e72fed16889c7d8a53c77d5cf5fc",
        "filename": "contrib/README.md",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/adaa568722e59cde510c5fe1997c49cbb9d7db12/contrib/README.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/adaa568722e59cde510c5fe1997c49cbb9d7db12/contrib/README.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/README.md?ref=adaa568722e59cde510c5fe1997c49cbb9d7db12",
        "patch": "@@ -16,6 +16,9 @@ Repository Tools\n Specific tools for developers working on this repository.\n Contains the script `github-merge.sh` for merging github pull requests securely and signing them using GPG.\n \n+### [Verify-Commits](/contrib/verify-commits) ###\n+Tool to verify that every merge commit was signed by a developer using the above `github-merge.sh` script.\n+\n ### [Linearize](/contrib/linearize) ###\n Construct a linear, no-fork, best version of the blockchain.\n "
      },
      {
        "sha": "6b5137e7b54e545f4ea2211009b1b3e65bebf304",
        "filename": "contrib/verify-commits/gpg.sh",
        "status": "added",
        "additions": 15,
        "deletions": 0,
        "changes": 15,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/adaa568722e59cde510c5fe1997c49cbb9d7db12/contrib/verify-commits/gpg.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/adaa568722e59cde510c5fe1997c49cbb9d7db12/contrib/verify-commits/gpg.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/verify-commits/gpg.sh?ref=adaa568722e59cde510c5fe1997c49cbb9d7db12",
        "patch": "@@ -0,0 +1,15 @@\n+#!/bin/sh\n+INPUT=$(</dev/stdin)\n+VALID=false\n+IFS=$'\\n'\n+for LINE in $(echo \"$INPUT\" | gpg --trust-model always \"$@\" 2>/dev/null); do\n+\tcase \"$LINE\" in \"[GNUPG:] VALIDSIG\"*)\n+\t\twhile read KEY; do\n+\t\t\tcase \"$LINE\" in \"[GNUPG:] VALIDSIG $KEY \"*) VALID=true;; esac\n+\t\tdone < ./contrib/verify-commits/trusted-keys\n+\tesac\n+done\n+if ! $VALID; then\n+\texit 1\n+fi\n+echo \"$INPUT\" | gpg --trust-model always \"$@\" 2>/dev/null"
      },
      {
        "sha": "607c0cac45ef6e7ca1bc674e4a3085cfa6b7e1cc",
        "filename": "contrib/verify-commits/pre-push-hook.sh",
        "status": "added",
        "additions": 16,
        "deletions": 0,
        "changes": 16,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/adaa568722e59cde510c5fe1997c49cbb9d7db12/contrib/verify-commits/pre-push-hook.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/adaa568722e59cde510c5fe1997c49cbb9d7db12/contrib/verify-commits/pre-push-hook.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/verify-commits/pre-push-hook.sh?ref=adaa568722e59cde510c5fe1997c49cbb9d7db12",
        "patch": "@@ -0,0 +1,16 @@\n+#!/bin/bash\n+if ! [[ \"$2\" =~ [git@]?[www.]?github.com[:|/]bitcoin/bitcoin[.git]? ]]; then\n+    exit 0\n+fi\n+\n+while read LINE; do\n+    set -- A $LINE\n+    if [ \"$4\" != \"refs/heads/master\" ]; then\n+        continue\n+    fi\n+    if ! ./contrib/verify-commits/verify-commits.sh $3 > /dev/null 2>&1; then\n+        echo \"ERROR: A commit is not signed, can't push\"\n+        ./contrib/verify-commits/verify-commits.sh\n+        exit 1\n+    fi\n+done < /dev/stdin"
      },
      {
        "sha": "eb13f8762e573a1ff2ac89377f2b15de057cf5c6",
        "filename": "contrib/verify-commits/trusted-git-root",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/adaa568722e59cde510c5fe1997c49cbb9d7db12/contrib/verify-commits/trusted-git-root",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/adaa568722e59cde510c5fe1997c49cbb9d7db12/contrib/verify-commits/trusted-git-root",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/verify-commits/trusted-git-root?ref=adaa568722e59cde510c5fe1997c49cbb9d7db12",
        "patch": "@@ -0,0 +1 @@\n+053038e5ba116cb319fb85f3cb3e062cf1b3df15"
      },
      {
        "sha": "658ad0375badbfb88ee89322dd170b41666de9f1",
        "filename": "contrib/verify-commits/trusted-keys",
        "status": "added",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/adaa568722e59cde510c5fe1997c49cbb9d7db12/contrib/verify-commits/trusted-keys",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/adaa568722e59cde510c5fe1997c49cbb9d7db12/contrib/verify-commits/trusted-keys",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/verify-commits/trusted-keys?ref=adaa568722e59cde510c5fe1997c49cbb9d7db12",
        "patch": "@@ -0,0 +1,5 @@\n+71A3B16735405025D447E8F274810B012346C9A6\n+1F4410F6A89268CE3197A84C57896D2FF8F0B657\n+01CDF4627A3B88AAE4A571C87588242FBE38D3A8\n+AF8BE07C7049F3A26B239D5325B3083201782B2F\n+81291FA67D2C379A006A053FEAB5AF94D9E9ABE7"
      },
      {
        "sha": "5841fa2077aa8a882cd12701a6882b12788f7bdf",
        "filename": "contrib/verify-commits/verify-commits.sh",
        "status": "added",
        "additions": 51,
        "deletions": 0,
        "changes": 51,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/adaa568722e59cde510c5fe1997c49cbb9d7db12/contrib/verify-commits/verify-commits.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/adaa568722e59cde510c5fe1997c49cbb9d7db12/contrib/verify-commits/verify-commits.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/verify-commits/verify-commits.sh?ref=adaa568722e59cde510c5fe1997c49cbb9d7db12",
        "patch": "@@ -0,0 +1,51 @@\n+#!/bin/sh\n+\n+DIR=$(dirname \"$0\")\n+\n+echo \"Please verify all commits in the following list are not evil:\"\n+git log \"$DIR\"\n+\n+VERIFIED_ROOT=$(cat \"${DIR}/trusted-git-root\")\n+\n+HAVE_FAILED=false\n+IS_SIGNED () {\n+\tif [ $1 = $VERIFIED_ROOT ]; then\n+\t\treturn 0;\n+\tfi\n+\tif ! git -c \"gpg.program=${DIR}/gpg.sh\" verify-commit $1 > /dev/null 2>&1; then\n+\t\treturn 1;\n+\tfi\n+\tlocal PARENTS=$(git show -s --format=format:%P $1)\n+\tfor PARENT in $PARENTS; do\n+\t\tif IS_SIGNED $PARENT > /dev/null; then\n+\t\t\treturn 0;\n+\t\tfi\n+\tdone\n+\tif ! \"$HAVE_FAILED\"; then\n+\t\techo \"No parent of $1 was signed with a trusted key!\" > /dev/stderr\n+\t\techo \"Parents are:\" > /dev/stderr\n+\t\tfor PARENT in $PARENTS; do\n+\t\t\tgit show -s $PARENT > /dev/stderr\n+\t\tdone\n+\t\tHAVE_FAILED=true\n+\tfi\n+\treturn 1;\n+}\n+\n+if [ x\"$1\" = \"x\" ]; then\n+\tTEST_COMMIT=\"HEAD\"\n+else\n+\tTEST_COMMIT=\"$1\"\n+fi\n+\n+IS_SIGNED \"$TEST_COMMIT\"\n+RES=$?\n+if [ \"$RES\" = 1 ]; then\n+\tif ! \"$HAVE_FAILED\"; then\n+\t\techo \"$TEST_COMMIT was not signed with a trusted key!\"\n+\tfi\n+else\n+\techo \"There is a valid path from $TEST_COMMIT to $VERIFIED_ROOT where all commits are signed!\"\n+fi\n+\n+exit $RES"
      }
    ]
  }
]