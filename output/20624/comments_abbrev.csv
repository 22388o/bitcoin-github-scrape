jonatack,2020-12-11 12:33:06,"IRC discussion about this PR: http://www.erisian.com.au/bitcoin-core-dev/log-2020-12-11.html#l-196\n",https://github.com/bitcoin/bitcoin/pull/20624#issuecomment-743167485,743167485,
Sjors,2020-12-11 15:40:34,"utACK f636008\n\nIIUC: we were already checking `fInitialDownload == false` and this PR drops an additional check `pindexNew->nHeight > pnode->nStartingHeight - 2000`. One of the criteria for initial block download is `m_chain.Tip()->GetBlockTime() < (GetTime() - nMaxTipAge`, i.e. the new block is less than 24 hours old. The most likely reason for a new node to be more than 2000 blocks ahead of ",https://github.com/bitcoin/bitcoin/pull/20624#issuecomment-743267205,743267205,
decryp2kanon,2020-12-11 20:43:12,Concept ACK,https://github.com/bitcoin/bitcoin/pull/20624#issuecomment-743417285,743417285,
rebroad,2021-05-11 12:12:25,"Block announcement seems quirky currently. For example, if a node hasn't requested headers announcements, then we'll not announce blocks invs to nodes that have indicated they have the block, but if they have requested headers announcements, then we'll announce headers to them whether they have the block or not! And also, if we have a lot of headers to announce, then we'll revert to announcing via",https://github.com/bitcoin/bitcoin/pull/20624#issuecomment-838366722,838366722,
ariard,2020-12-11 16:39:56,"Note, if we do have a failing GetTime() and the node is falsely out-of-IBD, it will start to advertise its new best chain in case of reorg. Before this PR, even assuming a IBD bug, chain advertisement won't happen if peers starting heights are far ahead by 2000 blocks from us IIUC ?\n\nI think that's okay just to be aware of. ",https://github.com/bitcoin/bitcoin/pull/20624#discussion_r541077566,541077566,src/net_processing.cpp
jnewbery,2020-12-11 17:00:44,"yes, that sounds right. And even if we are announcing a less-good chain to a peer, I don't think that's a big problem.",https://github.com/bitcoin/bitcoin/pull/20624#discussion_r541091628,541091628,src/net_processing.cpp
