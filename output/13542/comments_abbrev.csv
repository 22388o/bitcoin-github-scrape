fanquake,2018-06-27T10:45:43Z,"#10903 was the last time this was suggested. The conclusion then was that this isn't necessarily something we want to maintain here, and would probably be better suited to an external repo.\n\nSee:\nhttps://github.com/Sjors/docker-bitcoin-core\nhttps://github.com/NicolasDorier/docker-bitcoin\nhttps://github.com/jamesob/docker-bitcoind\n\nfor some examples of such repositories.\n\n@stakaus",https://github.com/bitcoin/bitcoin/pull/13542#issuecomment-400629343,400629343,
MarcoFalke,2018-06-27T10:51:26Z,Agree with @fanquake ,https://github.com/bitcoin/bitcoin/pull/13542#issuecomment-400630654,400630654,
promag,2018-06-27T11:17:46Z,NACK for the same reasons.,https://github.com/bitcoin/bitcoin/pull/13542#issuecomment-400636954,400636954,
stakauskas,2018-06-27T11:21:00Z,"It was first created as an addition to ElementsProject in - https://github.com/ElementsProject/elements/pull/372 , thus appeared here.\n\nThough having Docker images could be beneficial for community wanting to run software in containers and one image would target Windows/Mac/Linux instead of having separate packages for each of them.",https://github.com/bitcoin/bitcoin/pull/13542#issuecomment-400637748,400637748,
NicolasDorier,2018-06-27T12:50:38Z,"I think maintaining several `Dockerfile` like this as one big advantage: We can use those as part of the CI to be sure bitcoind build correctly on the different OS which should be supported by Bitcoin, as well as running the tests on different distro. (Actually I think this is what we do for now only on ubuntu?)\n\n@sipsorcery for example maintain a dockerfile for building on Windows via msvc, a",https://github.com/bitcoin/bitcoin/pull/13542#issuecomment-400660199,400660199,
promag,2018-06-27T15:17:08Z,"I consider these different:\n - Dockerfile(s) to build the *official* image - usually in a separate repository with multiple versions/variants - and usually download the office source code;\n - docker-compose to launch 3rd party services to aid development - not relevant here I think.\n - docker-compose + multiple Dockerfile to build from local source in different *flavours*  - usually to aid d",https://github.com/bitcoin/bitcoin/pull/13542#issuecomment-400712339,400712339,
promag,2018-06-27T15:20:01Z,"> It also has the advantage that people can easily distribute their own bitcoin core image with their favorite freshly backed commits.\n\nThis is also possible with external Dockerfile.",https://github.com/bitcoin/bitcoin/pull/13542#issuecomment-400713269,400713269,
stakauskas,2018-06-27T15:39:33Z,"I'd compare Dockerfile to RPM spec and docker-compose as a way to manage your containers, e.g systemctl/systemd for services, just portable across different OS versions. While you can run any docker image with 'docker run', it's much easier to start with docker-compose, which allows easier and faster configuration for running containers. In this case testnet/mainnet nodes can be started within one",https://github.com/bitcoin/bitcoin/pull/13542#issuecomment-400722289,400722289,
MarcoFalke,2018-06-27T15:54:25Z,"I don't see what advantage a dockerfile gives us to our existing processes. Note that it is already possible to build any commit from source deterministically by using it's gitian descriptor. Using a dockerfile to create a docker image as opposed to using gitian to create a binary wouldn't be deterministic any more.\n\nAlso note that the actual build step is just a single line `./configure && ma",https://github.com/bitcoin/bitcoin/pull/13542#issuecomment-400728058,400728058,
MarcoFalke,2018-06-27T16:02:12Z,"> RPM spec\n\nSorry for ot, but we had someone contribute an rpm spec file and then it would just sit there unmaintained and now it is unclear what to do with it: #13137\n\nI think we want to avoid doing the same with a Dockerfile.",https://github.com/bitcoin/bitcoin/pull/13542#issuecomment-400730860,400730860,
stakauskas,2018-06-27T16:57:49Z,"> Installing the dependencies is what differs per dist and usually the cause of issues. Instead of having a Dockerfile for each distribution, it seems easier to me to just list the dependencies in a readme (and maybe a one-liner for common distributions to install all dependencies)\n\nThere's no need to have Dockerfile per each distribution, though it's possible and not difficult to maintain. Af",https://github.com/bitcoin/bitcoin/pull/13542#issuecomment-400754899,400754899,
NicolasDorier,2018-06-28T07:27:35Z,">  Instead of having a Dockerfile for each distribution, it seems easier to me to just list the dependencies in a readme (and maybe a one-liner for common distributions to install all dependencies)\n\nI disagree with this point. This result in outdated documentation, and additional support when somebody complains that it does not work because some outdated dependencies on their system, also it n",https://github.com/bitcoin/bitcoin/pull/13542#issuecomment-400939131,400939131,
skwp,2018-07-09T20:31:29Z,"As someone new to bitcoin compilation, I found getting a gitian build up and running quite complicated, especially on an OSX machine trying to use virtualization. \n\nI get the motivations around providing Dockerfiles in external projects but that means there is no (obvious) ""source of truth"" for getting started. If we want more devs poking at bitcoin I think it would be good that there was an o",https://github.com/bitcoin/bitcoin/pull/13542#issuecomment-403610376,403610376,
MarcoFalke,2018-07-10T11:17:58Z,"Concept ACK, if this helps people to run tests, ci and generally makes it easier to bootstrap a development environment. Though, we shouldn't provide any ways to run this in production, since there are already statically linked, gitian-built binaries available. If you need those releases wrapped into a dockerfile, there is already https://github.com/NicolasDorier/docker-bitcoin/tree/master/core",https://github.com/bitcoin/bitcoin/pull/13542#issuecomment-403787982,403787982,
stakauskas,2018-07-10T12:57:28Z,"> Concept ACK, if this helps people to run tests, ci and generally makes it easier to bootstrap a development environment.\n\nThe initial pull request emerged and divided into two groups dev/prod. Initially it was created as an alternative to running standalone binaries in favor of running it in containerised setup. If it's completely for dev purposes (which is a good start) I'll modify Dockerfi",https://github.com/bitcoin/bitcoin/pull/13542#issuecomment-403812296,403812296,
skwp,2018-07-10T18:03:31Z,"Going to chime in again to slightly disagree with ""we shouldn't provide docker for production"", again due to the ""source of truth"" argument. If you google bitcoin on docker you get a variety of blog posts and repos. It's not that hard to provide a dockerfile and make sure it's working which ensures that it's as easy as possible to run a node. If more nodes is what we want, then providing a product",https://github.com/bitcoin/bitcoin/pull/13542#issuecomment-403914137,403914137,
promag,2018-07-10T18:22:02Z,"-1 to provide production images here. I think we shouldn't influence deployment.\n\n+1 in providing docker compose services to build and test with diferent toochain and configurations.\n\n+1 in providing official docker images (not sure how to tackle that) elsewhere.",https://github.com/bitcoin/bitcoin/pull/13542#issuecomment-403919606,403919606,
jtimon,2018-07-10T23:47:42Z,"Concept ACK. This is contrib anyway, if it goes unmaintained it can always be simply removed. ",https://github.com/bitcoin/bitcoin/pull/13542#issuecomment-404000555,404000555,
NicolasDorier,2018-07-11T04:54:43Z,"@jtimon it can't be unmaintained if included inside CI. Having a docker failing to build is equivalent to having an out of date documentation: the documentation need to be fixed, or the committer need to not break things.",https://github.com/bitcoin/bitcoin/pull/13542#issuecomment-404044789,404044789,
NicolasDorier,2018-07-11T04:55:34Z,@sipsorcery you might be interested to follow this PR.,https://github.com/bitcoin/bitcoin/pull/13542#issuecomment-404044905,404044905,
promag,2018-07-11T06:48:03Z,Summoning @ruimarinho as he also maintains https://github.com/ruimarinho/docker-bitcoin-core.,https://github.com/bitcoin/bitcoin/pull/13542#issuecomment-404063344,404063344,
MarcoFalke,2018-07-11T10:41:37Z,I believe providing a dockerfile for production use can be done independently (in a different pull request) of providing a dockerfile for development/testing purposes?,https://github.com/bitcoin/bitcoin/pull/13542#issuecomment-404125099,404125099,
MarcoFalke,2018-07-11T10:43:13Z,"If this pull request is to be used to add a devel dockerfile, I'd suggest prefixing the title with ""test"" or ""qa"".",https://github.com/bitcoin/bitcoin/pull/13542#issuecomment-404125543,404125543,
stakauskas,2018-07-11T15:49:13Z,"> If this pull request is to be used to add a devel dockerfile, I'd suggest prefixing the title with ""test"" or ""qa"".\n\nFiles in this pull request would match the prod setup. We use it the way it is to run and scale nodes in prod environment. I'd suggest that better way would be to create a separate pull req for development environment as it will differ significantly and close this if there's no",https://github.com/bitcoin/bitcoin/pull/13542#issuecomment-404218956,404218956,
promag,2018-07-11T15:58:00Z,"I mean, should we promote deployments with docker? The way I see, that would be the case if a dockerfile is added.",https://github.com/bitcoin/bitcoin/pull/13542#issuecomment-404222041,404222041,
stakauskas,2018-07-11T16:07:23Z,"> I mean, should we promote deployments with docker? The way I see, that would be the case if a dockerfile is added.\n\nIt wouldn't be a promotion, it would just be an ability for people to choose another variant to running the software. Most of the projects provides official Dockerfiles/docker images in addition to the traditional released binaries. It would also make it easy to have official w",https://github.com/bitcoin/bitcoin/pull/13542#issuecomment-404225134,404225134,
TheBlueMatt,2018-07-13T01:12:49Z,"We now also have an external ""packaging"" repo at https://github.com/bitcoin-core/packaging where things like this may make more sense, just to add to the discussion.\n\nOn July 11, 2018 4:07:37 PM UTC, paulius <notifications@github.com> wrote:\n>> I mean, should we promote deployments with docker? The way I see,\n>that would be the case if a dockerfile is added.\n>\n>It wouldn't be a promotion, it",https://github.com/bitcoin/bitcoin/pull/13542#issuecomment-404696093,404696093,
stakauskas,2018-07-13T12:15:13Z,"@TheBlueMatt  Agreed, moving Docker related stuff to bitcoin-core/packaging would make sense.",https://github.com/bitcoin/bitcoin/pull/13542#issuecomment-404815888,404815888,
jtimon,2018-07-13T16:16:02Z,"> @TheBlueMatt Agreed, moving Docker related stuff to bitcoin-core/packaging would make sense.\n\nThat would solve the ""6 people maintaining the same thing independently"" problem too. Fine with me.\nTo me the most important part is avoiding that work duplication.\n",https://github.com/bitcoin/bitcoin/pull/13542#issuecomment-404880971,404880971,
MarcoFalke,2018-07-13T16:31:46Z,Could you adjust this pull request to be just a patch that adds a link in some doc to https://github.com/bitcoin-core/packaging/blob/master/docker/README.md ?,https://github.com/bitcoin/bitcoin/pull/13542#issuecomment-404885083,404885083,
MarcoFalke,2018-07-13T16:32:28Z,And everyone who is interested in this should go and review https://github.com/bitcoin-core/packaging/pull/2,https://github.com/bitcoin/bitcoin/pull/13542#issuecomment-404885273,404885273,
NicolasDorier,2018-07-16T08:54:58Z,"I really dislike adding on `bitcoin-core/packaging`... the whole point is having that run as part of the CI. By moving on separate repo, it makes sure it will never be part of CI because you can't build with the specific commit you pulled via `COPY . .`\n\nIt is quite useless there I think. :(",https://github.com/bitcoin/bitcoin/pull/13542#issuecomment-405184425,405184425,
DrahtBot,2018-08-25T20:55:12Z,"<!--5d09a71f8925f3f132321140b44b946d-->The last travis run for this pull request was 59 days ago and is thus outdated. To trigger a fresh travis build, this pull request should be closed and re-opened.",https://github.com/bitcoin/bitcoin/pull/13542#issuecomment-415995973,415995973,
fanquake,2018-10-20T05:24:24Z,"As mentioned above, this is now being added to `bitcoin-core/packaging/` in https://github.com/bitcoin-core/packaging/pull/2. Closing this PR for now.",https://github.com/bitcoin/bitcoin/pull/13542#issuecomment-431550408,431550408,
MarcoFalke,2018-07-10T11:03:17Z,Wouldn't it make more sense to only have a minimum set of build dependencies and then build the Bitcoin Core dependencies from `./depends/`?,https://github.com/bitcoin/bitcoin/pull/13542#discussion_r201301604,201301604,Dockerfile
MarcoFalke,2018-07-10T11:13:30Z,"If there goal is to provide an easy entry point for development, ci or testing, the `install` step shouldn't be run as part of the image creation, I believe. It should instead be provided though the docker compose entrypoint. See for example the work by @jamesob https://github.com/bitcoin/bitcoin/pull/10903/files",https://github.com/bitcoin/bitcoin/pull/13542#discussion_r201303988,201303988,Dockerfile
practicalswift,2018-09-11T14:20:21Z,"FWIW, various markdown nits suggested by `mdl`:\n\n```\njob=2018-09-11-16-17-08 pr=13542 mdl: contrib/docker/README.md:1: MD002 First header should be a top level header\njob=2018-09-11-16-17-08 pr=13542 mdl: contrib/docker/README.md:4: MD003 Header style\njob=2018-09-11-16-17-08 pr=13542 mdl: contrib/docker/README.md:9: MD003 Header style\njob=2018-09-11-16-17-08 pr=13542 mdl: contrib/docke",https://github.com/bitcoin/bitcoin/pull/13542#discussion_r216687321,216687321,contrib/docker/README.md
practicalswift,2018-09-11T14:21:49Z,"```\nSC2086: Double quote to prevent globbing and word splitting.\n```\n\nApplies also below :-)",https://github.com/bitcoin/bitcoin/pull/13542#discussion_r216687877,216687877,contrib/docker/docker-entrypoint.sh
practicalswift,2018-09-23T08:14:47Z,"```\n2018-09-22 22:07:50 yamllint(pr=13542): contrib/docker/docker-compose.yml:1:1: [warning] missing document start ""---"" (document-start)\n```",https://github.com/bitcoin/bitcoin/pull/13542#discussion_r219691562,219691562,contrib/docker/docker-compose.yml
