gmaxwell,2014-02-13T18:53:48Z,"ACK. This looks good to me, my initial concern was that the code might appear in a consensus path, but it looks like the consensus path tests directly.  This works for me on my own wallet, correctly identifying an ordinary double spend I received as dead.\n\nMaybe a slight concern that the word dead suggests a little too much finality, that and it's valid hex so /dead in my pager is not super usef",https://github.com/bitcoin/bitcoin/pull/3669#issuecomment-35012030,35012030,
gavinandresen,2014-02-13T19:01:33Z,"I'll change ""dead"" to ""conflicted"".  I'm working on adding a conflicts [] array of txids to transaction info, so ""conflicted"" makes sense.\n",https://github.com/bitcoin/bitcoin/pull/3669#issuecomment-35012832,35012832,
gmaxwell,2014-02-13T19:01:39Z,"zombie might be nice, sort of parallel with the unix usage. In any case, author's choice.\n",https://github.com/bitcoin/bitcoin/pull/3669#issuecomment-35012841,35012841,
laanwj,2014-02-13T19:06:22Z,"@gavinandresen getOutputs and listCoins in walletmodel are used for coin control.  In both cases the return value of GetDepthInMainChain() is passed through as nDepth argument to COutput. \nThis information is used to compute a ""priority"" to be shown in the coin control dialog. It is never passed to the core. A negative value could have strange effects here.\n\nSee here for my proposed solution: h",https://github.com/bitcoin/bitcoin/pull/3669#issuecomment-35013388,35013388,
gavinandresen,2014-02-13T19:11:18Z,"Changed ""dead"" to ""conflicted"", and incorporated @laanwj 's fixes for the GUI.\n",https://github.com/bitcoin/bitcoin/pull/3669#issuecomment-35013906,35013906,
murbard,2014-02-13T20:55:39Z,Is there any reason not to spend zeroconf change now that this is fixed?\n,https://github.com/bitcoin/bitcoin/pull/3669#issuecomment-35024795,35024795,
christophebiocca,2014-02-13T21:04:13Z,@murbard zeroconf change can still get altered out from under you. That's going to remain true for as long as transactions are malleable.\n,https://github.com/bitcoin/bitcoin/pull/3669#issuecomment-35025612,35025612,
gmaxwell,2014-02-13T21:10:37Z,"This just avoids being pathologically stupid once it has already been spent out from under you, e.g. spending the transaction you already know is doomed or displaying an incorrect balance.\n",https://github.com/bitcoin/bitcoin/pull/3669#issuecomment-35026253,35026253,
murbard,2014-02-13T23:09:19Z,"Sure but the long run inclusion of a transaction is always probabilistic anyway (even when spending highly confirmed coins). Now that the hardwired assumption that change transactions succeed is gone, it's a matter of preference.\n",https://github.com/bitcoin/bitcoin/pull/3669#issuecomment-35037859,35037859,
apetersson,2014-02-14T01:25:41Z,"if mutations are detected that would impact zeroconf change there are three things you can do: \n*) avoid using it\n*) if not possible, just spend both mutations, effectively double-spend yourself.\n*) ignore this advice and live with a slightly higher chance of non-confirming tx, because the parent was not confirmed.\n",https://github.com/bitcoin/bitcoin/pull/3669#issuecomment-35046899,35046899,
apoelstra,2014-02-14T06:04:55Z,"Just tried this patch. It worked successfully. Thanks Gavin!\n\nOriginally I had sixteen 0-conf entries in listtransactions.\n\nTen of these were tx 92ad92abd8f267c29ed89107f3f7dbb6a299ed72cb5d6b73bee094b96781ca08, which conflicts with the confirmed transaction d72f8aca7159e8a21ae32d8b91ff12196eb9ea7d9f944d3b41b8d47c55d2351d. (This appeared eight times as a send and twice as a receive.) With the p",https://github.com/bitcoin/bitcoin/pull/3669#issuecomment-35058892,35058892,
laanwj,2014-02-14T06:09:25Z,"Looks good, some nits\n- ~~Change from dead transactions still counts toward the unconfirmed balance. Not sure what we want here, but this makes 'getunconfirmedbalance' (and the appropriate entry in UI) show high numbers in the presence of them.~~ (I see #3671 now)\n- Dead transaction get the wrong icon in the UI. Will send a fix.\n\nEdit: see https://github.com/laanwj/bitcoin/tree/2014_02_dead_tx",https://github.com/bitcoin/bitcoin/pull/3669#issuecomment-35059050,35059050,
gavinandresen,2014-02-14T16:11:57Z,"Fixed >=1 nit, added @laanwj 's GUI fixes as second commit.\n",https://github.com/bitcoin/bitcoin/pull/3669#issuecomment-35097470,35097470,
laanwj,2014-02-14T16:30:57Z,ACK\n,https://github.com/bitcoin/bitcoin/pull/3669#issuecomment-35099465,35099465,
gavinandresen,2014-02-14T16:40:34Z,@laanwj : pull-tester error is:\n  RCC: Error in 'bitcoin.qrc': Cannot find file 'res/icons/transaction_conflicted.png'\n,https://github.com/bitcoin/bitcoin/pull/3669#issuecomment-35100422,35100422,
jgarzik,2014-02-14T16:49:17Z,ACK\n,https://github.com/bitcoin/bitcoin/pull/3669#issuecomment-35101364,35101364,
laanwj,2014-02-14T16:49:57Z,"Huh that's strange; I do see `src/qt/res/icons/transaction_conflicted.png` in the list of files.\n(and I had no problems building and testing locally either, and there are no pngs in the 'untracked files' list in git status)\n",https://github.com/bitcoin/bitcoin/pull/3669#issuecomment-35101434,35101434,
theuni,2014-02-14T16:53:42Z,"It needs to be listed in qt/Makefile.am, or it won't be added to the release tarball and 'make distcheck' will fail.\n",https://github.com/bitcoin/bitcoin/pull/3669#issuecomment-35101810,35101810,
laanwj,2014-02-14T16:56:09Z,"@theuni ah I see. @gavinandresen:\n\n```\ndiff --git a/src/qt/Makefile.am b/src/qt/Makefile.am\nindex 7de4729..030804d 100644\n--- a/src/qt/Makefile.am\n+++ b/src/qt/Makefile.am\n@@ -243,6 +243,7 @@ RES_ICONS = \\n   res/icons/toolbar_testnet.png \\n   res/icons/transaction0.png \\n   res/icons/transaction2.png \\n+  res/icons/transaction_conflicted.png \\n   res/icons/tx_inout.png \\n   res/icons",https://github.com/bitcoin/bitcoin/pull/3669#issuecomment-35102061,35102061,
BitcoinPullTester,2014-02-14T18:52:05Z,"Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/9a3d936fc2e98b1e8234bf27e09cf7bc22811bee for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/cu",https://github.com/bitcoin/bitcoin/pull/3669#issuecomment-35112846,35112846,
boinggg,2014-04-05T09:43:14Z,Please call them zombies\n,https://github.com/bitcoin/bitcoin/pull/3669#issuecomment-39633537,39633537,
laanwj,2014-04-05T09:58:59Z,Maybe renaming zapwallettx to shootzombietx in #3845 would make it more popular and get people to test it...\n,https://github.com/bitcoin/bitcoin/pull/3669#issuecomment-39633808,39633808,
theuni,2014-02-14T05:48:48Z,"docs nit for the sake of avoiding future copy/paste braino's...\n\ns/>1/>0/ here, no?\n",https://github.com/bitcoin/bitcoin/pull/3669#discussion_r9739946,9739946,src/main.h
laanwj,2014-02-14T08:40:02Z,Or >=1\n,https://github.com/bitcoin/bitcoin/pull/3669#discussion_r9741960,9741960,src/main.h
