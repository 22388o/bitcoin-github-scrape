meshcollider,2017-09-15T10:14:37Z,re-utACK ~https://github.com/bitcoin/bitcoin/pull/11338/commits/bb37a030bd9e021cc58a6e55b579de232f6ce6ab~ https://github.com/bitcoin/bitcoin/pull/11338/commits/4e9dc85e0f0ef09a8c123681fa1758f1b173c9d7,https://github.com/bitcoin/bitcoin/pull/11338#issuecomment-329741761,329741761,
laanwj,2017-09-15T10:56:16Z,"Travis was failing. Changed `qInfo` to `qWarning`, as `qInfo` was only introduced in Qt 5.5 and the result is the same anyhow: it unconditionally ends up in debug.log.",https://github.com/bitcoin/bitcoin/pull/11338#issuecomment-329750006,329750006,
laanwj,2017-09-15T13:17:48Z,Added a dst.clear (suggested by @promag) to avoid the edge case of older settings staying behind.,https://github.com/bitcoin/bitcoin/pull/11338#issuecomment-329779937,329779937,
TheBlueMatt,2017-09-15T21:18:50Z,"Tested ACK f725dbbfc2b096dabb53f9ee9b4f5ae3d659b412, needs squash obviously, didn't bother to try to review in-depth for whether this is going to put the guisettings.bak file in a strange datadir (bitcoin.conf-based? the old GUI settings one?) but there isnt a ""correct"" answer there anyway, so I cant say I care much.",https://github.com/bitcoin/bitcoin/pull/11338#issuecomment-329906438,329906438,
sipa,2017-09-15T23:26:45Z,Concept ACK,https://github.com/bitcoin/bitcoin/pull/11338#issuecomment-329925873,329925873,
jonasschnelli,2017-09-15T23:30:45Z,"utACK f725dbbfc2b096dabb53f9ee9b4f5ae3d659b412\n\nSince this uses `QSettings::IniFormat`, there is no easy way how to restore a such backup. Is the backup file only intended to use for inspection of old values or also for a full restore? The later would very likely require a restore function (`QSettings::IniFormat` to native format or similar).",https://github.com/bitcoin/bitcoin/pull/11338#issuecomment-329926341,329926341,
laanwj,2017-09-16T05:04:54Z,"> didn't bother to try to review in-depth for whether this is going to put the guisettings.bak file in a strange datadir (bitcoin.conf-based? the old GUI settings one?) \n\nI think that's handled, it puts it in the new datadir that you have to select when using `-resetguisettings`.\n\n> Since this uses QSettings::IniFormat, there is no easy way how to restore a such backup. Is the backup file ",https://github.com/bitcoin/bitcoin/pull/11338#issuecomment-329946253,329946253,
achow101,2017-09-16T16:19:02Z,"> there is no easy way how to restore a such backup. \n\nI don't think there needs to be a way to restore such a backup. This backup is only created when you run `-resetguisettings` which implies that the settings are corrupted anyways and you don't want a backup of something that's corrupted.",https://github.com/bitcoin/bitcoin/pull/11338#issuecomment-329978340,329978340,
promag,2017-09-16T16:22:54Z,"> which implies that the settings are corrupted\n\nOr settings are fine and there is a bug?",https://github.com/bitcoin/bitcoin/pull/11338#issuecomment-329978570,329978570,
achow101,2017-09-16T16:43:03Z,tACK b28af386a38e6cb636683346b671b90d44382d74,https://github.com/bitcoin/bitcoin/pull/11338#issuecomment-329979895,329979895,
jonasschnelli,2017-09-18T05:07:23Z,"Found a strange issue while testing this.\nCompiling locally on OSX with MacOS 10.12.6 with Qt5.9.0 works perfect (`guisettings.ini.bak` is present after running with `-resetguisettings`).\nHowever, using the gtitian build (https://bitcoin.jonasschnelli.ch/build/312) will result in **not** creating the `guisettings.ini.bak` file. Not sure if it is a local issue but would be good if someone could",https://github.com/bitcoin/bitcoin/pull/11338#issuecomment-330130300,330130300,
MarcoFalke,2017-09-18T10:06:07Z,@jonasschnelli The embedded commit hash does not match the advertised commit hash on the website of the downloaded gitian binaries. ,https://github.com/bitcoin/bitcoin/pull/11338#issuecomment-330177012,330177012,
jonasschnelli,2017-09-19T03:57:45Z,"@MarcoFalke: the commit hash is different because my build script builds it on top of master. I just did everything again and the gtitian version does not create the backup file.\nhttps://bitcoin.jonasschnelli.ch/build/315\n(Maybe someone should double-check via an gitian build).",https://github.com/bitcoin/bitcoin/pull/11338#issuecomment-330422328,330422328,
achow101,2017-09-19T04:54:00Z,"@jonasschnelli I performed my own gitian build and tested it but could not reproduce your issue. It will create `guisettings.ini.bak` as it should.\n\nI did notice that if you did not have any gui settings to begin with, the file will not be created. Perhaps that's what you are seeing?",https://github.com/bitcoin/bitcoin/pull/11338#issuecomment-330429089,330429089,
jonasschnelli,2017-09-19T14:08:02Z,"@achow101: even with enabling coincontrol I had no success on OSX.\nWhat OS did you test? It may be a platform issue?",https://github.com/bitcoin/bitcoin/pull/11338#issuecomment-330550988,330550988,
achow101,2017-09-19T14:19:35Z,@jonasschnelli I am using Ubuntu 17.04,https://github.com/bitcoin/bitcoin/pull/11338#issuecomment-330554986,330554986,
laanwj,2017-09-19T14:29:21Z,"> I did notice that if you did not have any gui settings to begin with, the file will not be created. Perhaps that's what you are seeing?\n\nHm, that's interesting, haven't thought about that. I think that behavior makes sense, though.",https://github.com/bitcoin/bitcoin/pull/11338#issuecomment-330557968,330557968,
laanwj,2017-09-23T07:39:45Z,Squashed 4e9dc85e0f0ef09a8c123681fa1758f1b173c9d7 f725dbbfc2b096dabb53f9ee9b4f5ae3d659b412 0f29983c80f91fccddfff7e045ed224ce93bce81 b28af386a38e6cb636683346b671b90d44382d74 â†’ 723aa1b8752c1d6c6c0a76059c532ebe2f406fc1 ,https://github.com/bitcoin/bitcoin/pull/11338#issuecomment-331617605,331617605,
meshcollider,2017-09-15T10:00:39Z,"nit, `GetDataDir()` argument defaults to `true` so it'd be clearer to leave it out imo",https://github.com/bitcoin/bitcoin/pull/11338#discussion_r139109843,139109843,src/qt/optionsmodel.cpp
meshcollider,2017-09-15T10:01:44Z,"nit, space between `&key` and the colon",https://github.com/bitcoin/bitcoin/pull/11338#discussion_r139110101,139110101,src/qt/optionsmodel.cpp
laanwj,2017-09-15T10:04:15Z,"Isn't it the other way around: clearer to leave it in, because it's explicit?",https://github.com/bitcoin/bitcoin/pull/11338#discussion_r139110672,139110672,src/qt/optionsmodel.cpp
laanwj,2017-09-15T10:04:21Z,Will fix,https://github.com/bitcoin/bitcoin/pull/11338#discussion_r139110695,139110695,src/qt/optionsmodel.cpp
meshcollider,2017-09-15T10:08:06Z,"Normally I'd say yes, but in this case it just leaves me wondering what the argument is doing, because in most other cases of `GetDataDir` in the code, the argument is left out. Personal preference",https://github.com/bitcoin/bitcoin/pull/11338#discussion_r139111417,139111417,src/qt/optionsmodel.cpp
laanwj,2017-09-15T10:11:49Z,"During the initialization sequence it's really important to get this right. E.g. I had to check the order in `src/qt/bitcoin.cpp` that calling `GetDataDir(true)` was allowed at this point.\n\nAgree that boolean arguments are unclear, so are default arguments, so it's kind of choosing between evils here. Instead of an argument to `GetDataDir` we should have done `GetSpecificDataDir` and `GetRootD",https://github.com/bitcoin/bitcoin/pull/11338#discussion_r139112058,139112058,src/qt/optionsmodel.cpp
promag,2017-09-15T13:31:50Z,"Don't see the benefit of this function, move the code to `backupSettings()`? Otherwise `&` next to type name.",https://github.com/bitcoin/bitcoin/pull/11338#discussion_r139149114,139149114,src/qt/optionsmodel.cpp
promag,2017-09-15T13:32:44Z,Rename to `BackupSettings` and `&` next to type name.,https://github.com/bitcoin/bitcoin/pull/11338#discussion_r139149301,139149301,src/qt/optionsmodel.cpp
promag,2017-09-15T13:33:36Z,`&` next to type name.,https://github.com/bitcoin/bitcoin/pull/11338#discussion_r139149509,139149509,src/qt/optionsmodel.cpp
promag,2017-09-15T13:35:11Z,`.ini.bak`?,https://github.com/bitcoin/bitcoin/pull/11338#discussion_r139149883,139149883,doc/files.md
laanwj,2017-09-15T14:17:55Z,"The point is that this is a general function, it could be also e.g. used to restore QSettings from a backup, if that is ever necessary. Would prefer to keep it. Better too much factoring than too little.",https://github.com/bitcoin/bitcoin/pull/11338#discussion_r139160887,139160887,src/qt/optionsmodel.cpp
laanwj,2017-09-15T14:19:02Z,Yeah why not...,https://github.com/bitcoin/bitcoin/pull/11338#discussion_r139161163,139161163,doc/files.md
promag,2017-09-15T14:23:03Z,"Ok then, just update to `CopySettings` and move `&`.",https://github.com/bitcoin/bitcoin/pull/11338#discussion_r139162206,139162206,src/qt/optionsmodel.cpp
promag,2017-09-16T14:17:44Z,Missing doc update.,https://github.com/bitcoin/bitcoin/pull/11338#discussion_r139287599,139287599,doc/files.md
