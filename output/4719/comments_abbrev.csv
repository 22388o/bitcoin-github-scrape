laanwj,2014-08-18T10:35:13Z,Isn't the problem with out-of-source directory builds that leveldb can't cope with them?\n,https://github.com/bitcoin/bitcoin/pull/4719#issuecomment-52475801,52475801,
randy-waterhouse,2014-08-18T11:05:27Z,Yes leveldb will be a large part. \nHere are some preliminaries that are standard practice structure anyway.\n,https://github.com/bitcoin/bitcoin/pull/4719#issuecomment-52478398,52478398,
jmcorgan,2014-08-18T14:13:46Z,"I'd love to see VPATH builds supported, but we'll have to decide if we want to carry changes to the leveldb autofoo.\n",https://github.com/bitcoin/bitcoin/pull/4719#issuecomment-52497446,52497446,
theuni,2014-08-18T21:35:40Z,"pkg.m4 at root is deliberate, it allows for installs that don't have pkg-config macros.\n\nWhen running autoconf, pkg.m4 is pulled from the system if present from the path ""pkg.m4"". If it's not present, this file is substituted. If the file is in any other path, the substitution won't happen. So it either needs to stay there, or we must only support autoconf versions where it's built-in. That woul",https://github.com/bitcoin/bitcoin/pull/4719#issuecomment-52558784,52558784,
theuni,2014-08-18T21:43:55Z,"build-aux is where auto\* installs all of its files as necessary. src/m4 are source files under our control. I don't see any compelling reason to combine them?\n\nAs @laanwj said, leveldb is what stands in the way of out-of-tree builds. We would need to take on the burden of enumerating their files. Personally, I'd be fine with that since we pull from upstream quite rarely.\n",https://github.com/bitcoin/bitcoin/pull/4719#issuecomment-52559759,52559759,
randy-waterhouse,2014-08-19T05:55:46Z,"""pkg.m4 at root is deliberate, it allows for installs that don't have pkg-config macros.\nWhen running autoconf, pkg.m4 is pulled from the system if present from the path ""pkg.m4"". If it's not present, this file is substituted. If the file is in any other path, the substitution won't happen. So it either needs to stay there, or we must only support autoconf versions where it's built-in. That would",https://github.com/bitcoin/bitcoin/pull/4719#issuecomment-52593342,52593342,
laanwj,2014-08-19T08:49:34Z,"@theuni Would it be possible to patch the leveldb build system to support out-of-tree build? I'd prefer that to enumerating the files ourselves, because it could be upstreamed. I agree that taking up the list of leveldb files is not an extreme extra maintenance burden, but all these small things do add up.\n",https://github.com/bitcoin/bitcoin/pull/4719#issuecomment-52606151,52606151,
theuni,2014-08-19T16:53:47Z,"It'd be easy enough, but I don't think they'd be interested in accepting it. The problem is that autotools forces you to list each file rather than globbing, which is a really really good thing. That prevents stray files from slipping into release tarballs.\n\nTo fix in an upstreamable way, we'd have to split their makefile up into 2 files, one which just lists sources, and the other to handle bui",https://github.com/bitcoin/bitcoin/pull/4719#issuecomment-52663925,52663925,
theuni,2014-08-19T17:01:49Z,"@randy-waterhouse Yes sorry, i meant aclocal. And after some testing, it seems you're correct about the include order for pkg.m4 as well. The wording [here](https://www.flameeyes.eu/autotools-mythbuster/autoconf/macros.html) led me to believe that the system m4 would have precedence, but an 'aclocal --verbose' indeed shows our file being used first.\n\nThat being said, I'm not willing to break bui",https://github.com/bitcoin/bitcoin/pull/4719#issuecomment-52665146,52665146,
randy-waterhouse,2014-08-20T00:35:02Z,@theuni have you actually verified that an aclocal/pkg.m4 really is non-existent on those platforms or is it the user's misconfigured pkg-config/autotools set-up not passing correct include paths? The code right now looks like a hack in the bitcoin build code that is inadvertently affecting behaviour on all systems to load a non-system pkg.m4. Keeping things neat and in known locations makes debug,https://github.com/bitcoin/bitcoin/pull/4719#issuecomment-52720331,52720331,
laanwj,2014-08-25T10:52:32Z,I'm not sure that we have to cater to a allegedly broken build environment on an ancient MacOSX version.\nDo we know anyone actually building with that? Or that can test?\n,https://github.com/bitcoin/bitcoin/pull/4719#issuecomment-53250691,53250691,
theuni,2014-08-26T07:20:55Z,"@laanwj It for sure broke my 10.6 environment before I moved to a new 10.9 macbook. Generally, I'm opposed to knowingly breaking something for no known benefit. That being said...\n\nI've been working on retooling the osx environment. It's looking like Apple is moving to make 10.9 the new minimum dev requirement as quickly as possible, and I want to be sure we're ready for that. I've got the cross",https://github.com/bitcoin/bitcoin/pull/4719#issuecomment-53384091,53384091,
randy-waterhouse,2014-08-26T08:29:12Z,https://github.com/bitcoin/bitcoin/pull/4765\nI moved the less contentious fixes to a separate PR ... \n\nRe: the existing 'workaround' ... that it is bypassing correct functionality on all other platforms should be a bigger consideration than a nearly obsolete platform?\n,https://github.com/bitcoin/bitcoin/pull/4719#issuecomment-53390050,53390050,
theuni,2014-08-26T08:44:13Z,"I named a problem it causes. You haven't named a problem that it fixes. So yes.\n\n#4765 looks fine, thanks. The verbose flag was there originally but removed. I don't mind either way.\n",https://github.com/bitcoin/bitcoin/pull/4719#issuecomment-53391461,53391461,
randy-waterhouse,2014-08-26T09:12:45Z,The OSX 10.6 'problem' has not been verified and from studying the documentation (and experience) is most likely due to a misconfigured system than a true lack of pkg.m4 script (which has been bundled with pkg-config installs since at least 2006).\n\nThe problem it fixes is to correct the behaviour of the autoconf system to use a local platform pkg.m4 script and not the hacked provided one of bitc,https://github.com/bitcoin/bitcoin/pull/4719#issuecomment-53394372,53394372,
theuni,2014-08-26T19:58:44Z,"The osx 'problem' has been verified by me. I personally added the fix because it is needed on my 10.6 macbook. A quick googling turns up lots of hits like this one: https://stackoverflow.com/questions/8578181/using-the-pkg-config-macro-pkg-check-modules-failing\n\nAgain, if you're going to argue that it's reasonable to remove some functionality that someone may be relying on that's perfectly fine ",https://github.com/bitcoin/bitcoin/pull/4719#issuecomment-53479669,53479669,
randy-waterhouse,2014-08-26T22:21:57Z,"Use 'aclocal --print' to determine the directory in which to look for pkg.m4 then add that output to your include for autogen is the correct fix. \naclocal -I /opt/local/share/aclocal\n\nI think we can agree to disagree if you are unwilling to accept that the current code is not functioning correctly because of the botched ""workaround"" implementation. I agree that it is a silly little thing to be ",https://github.com/bitcoin/bitcoin/pull/4719#issuecomment-53502027,53502027,
sipa,2014-09-12T17:34:49Z,Does this need to be rebased every day?\n,https://github.com/bitcoin/bitcoin/pull/4719#issuecomment-55435821,55435821,
laanwj,2014-09-13T09:19:52Z,"If you split off the removal of pkg.m4, which is the only controversial part, this could have been merged almost a month ago..\n",https://github.com/bitcoin/bitcoin/pull/4719#issuecomment-55486470,55486470,
randy-waterhouse,2014-09-13T23:27:07Z,"@laanwj OK, I split off the custom pkg.m4 removal (will put in separate PR for that fix).\n",https://github.com/bitcoin/bitcoin/pull/4719#issuecomment-55510325,55510325,
BitcoinPullTester,2014-09-13T23:51:58Z,"Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/p4719_b3e53394263839989357ff1248ca13e797664c55/ for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-te",https://github.com/bitcoin/bitcoin/pull/4719#issuecomment-55510823,55510823,
laanwj,2014-09-16T09:52:54Z,These auto-generated files need to be in .gitignore:\n\n```\n?? build-aux/compile\n?? build-aux/test-driver\n```\n,https://github.com/bitcoin/bitcoin/pull/4719#issuecomment-55720532,55720532,
laanwj,2014-09-16T10:00:50Z,Merged via 6fc1dc1 (with .gitignore addition)\n,https://github.com/bitcoin/bitcoin/pull/4719#issuecomment-55721341,55721341,
