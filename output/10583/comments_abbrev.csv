laanwj,2017-06-14T14:16:03Z,Concept ACK. Makes a lot of sense to move the wallet-specific information to a separate RPC.,https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-308444975,308444975,
sipa,2017-06-16T22:20:19Z,"Currently this duplicates a singificant amount of code. Would it be possible to abstract out the 'info' part of `getaddressinfo`, and then call that from `validateaddress` as well (temporarily, until removed)?",https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-309147528,309147528,
achow101,2017-06-19T23:33:20Z,"@sipa Apparently, no, this is not possible. My attempt at doing so has resulted in a linker failure. Apparently there is some makefile problems with that. https://github.com/achow101/bitcoin/tree/getaddressinfo-broken is the branch with the duplication removed, but there is a linker error with `IsMine` calls. The full build error is here: https://gist.github.com/achow101/0f0e2d9e75d9d77132ab83a760",https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-309602071,309602071,
achow101,2017-06-20T00:04:41Z,"On second thought, I think I fixed the problem.",https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-309606565,309606565,
sipa,2017-06-20T20:16:33Z,"I believe you can do:\n\n```diff\n bitcoind_LDADD = \\n   $(LIBBITCOIN_SERVER) \\n+  $(LIBBITCOIN_WALLET) \\n   $(LIBBITCOIN_COMMON) \\n   $(LIBUNIVALUE) \\n   $(LIBBITCOIN_UTIL) \\n-  $(LIBBITCOIN_WALLET) \\n   $(LIBBITCOIN_ZMQ) \\n```\nin `Makefile.am`.\n\nThen the _ismine code can move from wallet to common (which I think belongs there, as signing code is already in common too).",https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-309878387,309878387,
achow101,2017-06-21T00:01:48Z,"@sipa I did that in my latest commit, but it seems that travis doesn't like it.",https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-309924928,309924928,
laanwj,2017-06-24T14:21:36Z,"> Then the _ismine code can move from wallet to common (which I think belongs there, as signing code is already in common too).\n\nFrom what I remember it was already moved in the other direction at some point for the same reason.\nThe circular dependency between `_wallet` and `_server` remains a problem.\nWe'll need to solve #7965 to get rid of it.\nUnfortunately, this is part of that...\n",https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-310841433,310841433,
jnewbery,2017-08-15T14:35:48Z,needs rebase,https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-322486237,322486237,
achow101,2017-08-15T21:27:43Z,rebased,https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-322594812,322594812,
jnewbery,2017-09-01T16:07:45Z,"Concept ACK. This PR is currently difficult to review because there are broken intermediate commits, commits which reverse previous commits, random style changes in unconnected commits, etc. Are you able to tidy this up to make it easier to review? If not, I'm happy to take this PR and tidy it up.\n\nMy high-level feedback is that we should hide the deprecated fields in `validateaddress` behind ",https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-326620374,326620374,
achow101,2017-09-05T17:39:16Z,Rebased and tidied up,https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-327250389,327250389,
jnewbery,2017-09-05T20:29:22Z,Travis is failing on invalid scripted diff check.,https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-327293814,327293814,
achow101,2017-09-19T14:58:04Z,Rebased,https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-330567261,330567261,
jnewbery,2017-09-19T17:34:13Z,extended test suite passes. Travis is failing the scripted diff check.,https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-330614398,330614398,
achow101,2017-09-19T18:25:55Z,Addressed most of @jnewbery's comments except for the deprecation thing,https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-330628642,330628642,
jnewbery,2017-09-19T18:40:24Z,"Thanks for addressing the nits.\n\nMy preference is that this doesn't get merged without some kind of phased deprecation. I'm happy to provide a commit to cherry pick if that would help.",https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-330632633,330632633,
achow101,2017-09-19T18:45:37Z,"> My preference is that this doesn't get merged without some kind of phased deprecation. I'm happy to provide a commit to cherry pick if that would help.\n\nI'm planning on making a generic deprecation interface type thing that I will then rebase this and some other stuff on top of.",https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-330634127,330634127,
achow101,2017-09-26T19:00:46Z,Rebased onto #11031 and moved the deprecated parts behind `IsDeprecatedRPCEnabled`. I wasn't sure what to do with the help text so I just left it as is (except for info about using `-deprecatedrpc`).,https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-332301401,332301401,
achow101,2017-09-26T20:44:06Z,@jnewbery I added a super basic test to check that `-deprecatedrpc=validateaddress` changes what is returned.,https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-332329818,332329818,
achow101,2017-09-26T22:12:03Z,"> The changed commit broke the scripted-diff checker.\n\nI noticed. I believe that should be fixed now as I changed the script to exclude `deprecatedrpc.py`.",https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-332351374,332351374,
achow101,2017-09-27T15:26:50Z,Rebased onto master,https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-332559385,332559385,
jtimon,2017-09-27T23:48:43Z,"Concept ACK\n\n> throw a RPC_INVALID_ADDRESS_OR_KEY error\n\nI like this option.",https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-332687166,332687166,
achow101,2017-09-28T00:04:05Z,"> throw a RPC_INVALID_ADDRESS_OR_KEY error\n\nDid that. I didn't realize that I hadn't added that error there.",https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-332689397,332689397,
jnewbery,2017-09-28T20:38:29Z,ACK ea088845fb8dd903f681c4c08b6bfe412cecc536,https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-332957004,332957004,
achow101,2017-09-29T02:38:37Z,Addressed @TheBlueMatt's and @promag's comments. I also changed two of the `pushKV`s back to `push_back(Pair(...))` because they were not properly showing booleans (they were displayed as 0 and 1).,https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-333015844,333015844,
MarcoFalke,2017-09-29T14:36:32Z,Needs rebase,https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-333143936,333143936,
achow101,2017-09-29T15:15:20Z,Rebased onto master.,https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-333154710,333154710,
achow101,2017-10-19T03:33:39Z,n'th rebase,https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-337790168,337790168,
achow101,2017-11-30T17:06:53Z,"Rebased and addresses @MeshCollider's comments.\n\nThe P2SH nested witness info is being done in #11403.",https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-348254424,348254424,
jnewbery,2017-12-04T18:16:13Z,"Sorry for the late feedback after several rebases, but looking at this again I don't really like DescribeAddressVisitor moving into bitcoin-wallet, since there's functionality in there that's useful even when running with wallet disabled.\n\nCan you take a look at https://github.com/jnewbery/bitcoin/commits/pr10583.1 . It's almost the same as this, but I've moved the generic parts of DescribeAdd",https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-349053378,349053378,
achow101,2017-12-04T20:05:10Z,@jnewbery I'll take a look.,https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-349088451,349088451,
achow101,2017-12-05T04:25:28Z,I cherry-picked @jnewbery's commit for splitting and moving `DescribeAddressVisitor`.,https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-349191596,349191596,
jnewbery,2017-12-05T15:37:44Z,"I think this is better, but obviously needs more review from others.\n\nIncidentally, I think that you've made this more difficult to review by squashing my commits down into a single commit (having a commit that splits a function into two *and* moves half of it to a new file is more difficult to review than one commit to split and a second commit that is move-only). You've also:\n\n- re-added",https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-349341871,349341871,
achow101,2017-12-07T19:39:56Z,"I cherry-picked the split and move commits from @jnewbery and I think I fixed the regressions\n\nThey actually weren't squashed earlier. Rather I had only cherry picked one commit due to merge conflict stuff. That is resolved by taking the commits before mine.",https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-350072550,350072550,
achow101,2018-01-10T20:04:36Z,Rebased this but there's a linker error I can't quite figure out.,https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-356720362,356720362,
meshcollider,2018-01-11T09:36:25Z,"@achow101: I guess it might be because you're adding rpc/util.cpp to libbitcoin_server_a_SOURCES rather than libbitcoin_util_a_SOURCES in the Makefile.am\nAlso the scripted diff seems to have an issue",https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-356878651,356878651,
achow101,2018-01-11T19:00:44Z,Rebased and fixed the linker error.,https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-357027219,357027219,
achow101,2018-02-01T21:36:30Z,Rebased,https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-362409857,362409857,
achow101,2018-02-06T18:09:51Z,Removed the unused variables.,https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-363512973,363512973,
jamesob,2018-02-06T18:29:49Z,"ACK https://github.com/bitcoin/bitcoin/pull/10583/commits/8a82bf5dc6355486e1b5a86346812c33bc454a1d\n\nNice work (and a heroic amount of rebasing).",https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-363518910,363518910,
meshcollider,2018-02-07T21:56:30Z,"Hopefully this can go in soon now 0.16 is branched off, looks like a painful one to keep rebasing. Will re-review as soon as I can",https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-363924266,363924266,
achow101,2018-02-08T20:43:05Z,Rebased yet again.,https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-364242122,364242122,
sipa,2018-02-08T23:18:29Z,"Looking very good, and the commits are easy to follow. A few comments:\n* The unused variables @instagibbs pointed out are removed after your move commit, but not before.\n* I think `addresses` and `pubkeys` also moved to `getaddressinfo`, but aren't listed as DEPRECATED in the help.\n* Can we remove `addresses` from `getaddressinfo` at the same time? It could remain in `validateaddress` when `",https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-364282133,364282133,
achow101,2018-02-09T01:40:07Z," - Removed the extra unused variables\n - Shortened `validateaddress` help\n - Set `addresses` to only be shown if `-deprecatedrpc=validateaddress` is set.",https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-364308435,364308435,
jnewbery,2018-02-16T14:36:58Z,"@promag - personally, I'd generally discourage nits after a PR has been open for many months and been rebased/re-reviewed many times already. Adding additional churn and workload to the contributor and reviewers at this point seems borderline sadistic :slightly_smiling_face: \n\n(just my opinion though)",https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-366252196,366252196,
achow101,2018-02-16T17:10:55Z,"Addressed some of @promag's nits. I don't really feel like fixing the other ones. It's also getting really tedious to do fix nits at this point, so I probably won't do so in the future for this PR.",https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-366297705,366297705,
jnewbery,2018-02-16T18:48:59Z,"Tested ACK b22cce014852b082d80f1cc35f902b375cba0318. Travis failure looks unrelated.\n\nLet's get this merged!",https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-366324637,366324637,
sipa,2018-02-16T19:12:37Z,"utACK b22cce014852b082d80f1cc35f902b375cba0318\n\nI have a few minor improvements, but I'll submit them as a separate PR after merge, nothing worth holding this up for.",https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-366331082,366331082,
promag,2018-02-16T19:20:06Z,@jnewbery @achow101 sorry! didn't want to cause such pain :) I did report tested ACK.,https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-366332984,366332984,
jonasschnelli,2018-02-17T11:27:13Z,Tested ACK b22cce014,https://github.com/bitcoin/bitcoin/pull/10583#issuecomment-366435070,366435070,
jnewbery,2017-09-05T20:48:32Z,"I don't understand this. Why do we swallow the `RPC_METHOD_NOT_FOUND` error?\n\nCan you add a comment explaining this?",https://github.com/bitcoin/bitcoin/pull/10583#discussion_r137109820,137109820,src/rpc/misc.cpp
jnewbery,2017-09-05T21:46:43Z,nit: braces for if block,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r137123440,137123440,src/wallet/rpcwallet.cpp
jnewbery,2017-09-05T21:48:05Z,"Help text seems to be missing result fields, including at least `script`, `hex`, `addresses`, `sigsrequired`.",https://github.com/bitcoin/bitcoin/pull/10583#discussion_r137123684,137123684,src/wallet/rpcwallet.cpp
promag,2017-09-05T23:20:48Z,"Nit, `*` and `&` next to type. In this case also const: `const CWallet* wallet`.",https://github.com/bitcoin/bitcoin/pull/10583#discussion_r137138946,137138946,src/wallet/rpcwallet.cpp
achow101,2017-09-05T23:21:01Z,"That is swallowed in the event that `-disablewallet` is used; `getaddressinfo` will return `RPC_METHOD_NOT_FOUND` but `validateaddress` should still work and validate addresses.\n\nI will add a comment.",https://github.com/bitcoin/bitcoin/pull/10583#discussion_r137138971,137138971,src/rpc/misc.cpp
promag,2017-09-05T23:21:39Z,"Nit, expand to multiline?",https://github.com/bitcoin/bitcoin/pull/10583#discussion_r137139050,137139050,src/wallet/rpcwallet.cpp
jnewbery,2017-09-05T23:45:18Z,"In that case, I think it's preferable to test for wallet existence before calling `getaddressinfo`. The following should do it:\n\n```\n        if (!::vpwallets.empty()) {\n            ret.pushKVs(getaddressinfo(request));\n        }\n```",https://github.com/bitcoin/bitcoin/pull/10583#discussion_r137141965,137141965,src/rpc/misc.cpp
achow101,2017-09-06T00:16:32Z,Done,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r137145931,137145931,src/rpc/misc.cpp
achow101,2017-09-19T02:04:06Z,Forgot to say that this was addressed.,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r139582688,139582688,src/wallet/rpcwallet.cpp
achow101,2017-09-19T02:06:06Z,Done,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r139582851,139582851,src/wallet/rpcwallet.cpp
achow101,2017-09-19T02:06:12Z,I don't think that is necessary,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r139582861,139582861,src/wallet/rpcwallet.cpp
jnewbery,2017-09-19T15:06:06Z,nit: indentation for this if block,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r139721314,139721314,src/rpc/misc.cpp
jnewbery,2017-09-19T15:07:13Z,nit: braces,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r139721667,139721667,src/wallet/rpcwallet.cpp
jnewbery,2017-09-19T15:10:45Z,"micronit: not in same ordering as help text (either for `getaddressinfo` or `validateaddress`. Suggest you move this line below `ret.push_back(Pair(""iswatchonly"", ...`",https://github.com/bitcoin/bitcoin/pull/10583#discussion_r139722759,139722759,src/wallet/rpcwallet.cpp
jnewbery,2017-09-19T15:18:16Z,nit: help text alignment,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r139725053,139725053,src/wallet/rpcwallet.cpp
jnewbery,2017-09-19T15:18:19Z,nit: help text alignment,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r139725072,139725072,src/wallet/rpcwallet.cpp
jnewbery,2017-09-19T15:18:29Z,nit: help text alignment,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r139725126,139725126,src/wallet/rpcwallet.cpp
jnewbery,2017-09-19T15:18:36Z,nit: help text alignment,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r139725166,139725166,src/rpc/misc.cpp
jnewbery,2017-09-19T15:18:42Z,nit: help text alignment,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r139725188,139725188,src/rpc/misc.cpp
jnewbery,2017-09-19T15:18:48Z,nit: help text alignment,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r139725220,139725220,src/rpc/misc.cpp
jnewbery,2017-09-26T19:30:34Z,Suggestion only: Perhaps start this with `DEPRECATION WARNING:` to draw attention. It might be easy to miss this warning.,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r141159789,141159789,src/rpc/misc.cpp
achow101,2017-09-26T20:43:14Z,Done,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r141178431,141178431,src/rpc/misc.cpp
promag,2017-09-26T21:02:47Z,Comply with #11386 here and below? ,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r141183707,141183707,src/rpc/misc.cpp
promag,2017-09-26T21:27:58Z,Why?,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r141190024,141190024,src/wallet/rpcwallet.h
promag,2017-09-26T21:32:54Z,`bool(mine & ISMINE_SPENDABLE)`? Same below.,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r141191046,141191046,src/wallet/rpcwallet.cpp
jnewbery,2017-09-26T21:34:17Z,"assert is a statement, not a function:\n\n```python\nassert ""ismine"" not in dep_validate_address\n```\n\nsame for assert below.",https://github.com/bitcoin/bitcoin/pull/10583#discussion_r141191346,141191346,test/functional/deprecated_rpc.py
jnewbery,2017-09-26T21:34:40Z,suggestion: change this to a `self.log.info()`,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r141191420,141191420,test/functional/deprecated_rpc.py
jnewbery,2017-09-26T21:36:04Z,Perhaps declare this address as a variable above (with comment) to avoid having magic strings in the RPC method call.,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r141191733,141191733,test/functional/deprecated_rpc.py
promag,2017-09-26T21:36:06Z,Is it enough to check `ismine` key? Maybe merge `nodes[0].validateaddress` with `nodes[0].getaddressinfo` and that should contain `nodes[1].validateaddress`?,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r141191736,141191736,test/functional/deprecated_rpc.py
achow101,2017-09-26T22:09:31Z,It's enough to determine that they are returning different things as one should have `ismine` and the other not.,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r141198491,141198491,test/functional/deprecated_rpc.py
achow101,2017-09-26T22:10:34Z,`UniValue` is needed below for `UniValue getaddressinfo...`,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r141198691,141198691,src/wallet/rpcwallet.h
achow101,2017-09-26T22:11:42Z,Done,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r141198897,141198897,test/functional/deprecated_rpc.py
achow101,2017-09-26T22:11:48Z,Done,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r141198914,141198914,test/functional/deprecated_rpc.py
achow101,2017-09-26T22:11:52Z,Done,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r141198923,141198923,test/functional/deprecated_rpc.py
achow101,2017-09-26T22:11:56Z,Done.,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r141198934,141198934,src/rpc/misc.cpp
jnewbery,2017-09-27T20:33:16Z,"I think this warning should also say something like ""Clients must transition to using getaddressinfo to access this information before upgrading to v0.17""",https://github.com/bitcoin/bitcoin/pull/10583#discussion_r141459915,141459915,src/rpc/misc.cpp
achow101,2017-09-28T00:04:09Z,Done,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r141497692,141497692,src/rpc/misc.cpp
promag,2017-09-28T20:51:25Z,Missing test.,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r141732840,141732840,src/wallet/rpcwallet.cpp
promag,2017-09-28T20:52:14Z,`pwallet` is valid because of `EnsureWalletIsAvailable` above.,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r141733003,141733003,src/wallet/rpcwallet.cpp
promag,2017-09-28T20:52:50Z,"Nit, fix indentation.",https://github.com/bitcoin/bitcoin/pull/10583#discussion_r141733153,141733153,src/wallet/rpcwallet.cpp
promag,2017-09-28T20:53:10Z,"Nit, add `{` or single line.",https://github.com/bitcoin/bitcoin/pull/10583#discussion_r141733225,141733225,src/wallet/rpcwallet.cpp
TheBlueMatt,2017-09-29T00:48:42Z,"Grammar here: ""To have those deprecated information shown"" -> ""To have those deprecated fields shown""",https://github.com/bitcoin/bitcoin/pull/10583#discussion_r141768902,141768902,src/rpc/misc.cpp
TheBlueMatt,2017-09-29T00:59:41Z,"While you're at it, can you clarify the docs on this? Its the redeemScript type, afaict, not the address type...Maybe even move the redeemScript-specific stuff to a separate object? like redeemScript: { script:, hex: addresses: []}...",https://github.com/bitcoin/bitcoin/pull/10583#discussion_r141769888,141769888,src/wallet/rpcwallet.cpp
TheBlueMatt,2017-09-29T01:08:20Z,I do not believe you need cs_main here anymore.,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r141770679,141770679,src/rpc/misc.cpp
TheBlueMatt,2017-09-29T01:08:33Z,I believe you only need cs_wallet here.,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r141770695,141770695,src/wallet/rpcwallet.cpp
TheBlueMatt,2017-09-29T01:19:19Z,"Why change the ordering here? UniValue returns things ordered in insertion-order (and hence bitcoin-cli and some JSON libraries will print it in that order) so might as well just leave it...having deprecation warnings interspersed is fine, they'll all go away soon enough :)",https://github.com/bitcoin/bitcoin/pull/10583#discussion_r141771632,141771632,src/rpc/misc.cpp
TheBlueMatt,2017-09-29T01:23:36Z,"You removed this from the output, but not the docs. For now I think we should leave the account display here, primarily just because we will want to keep it identical but just rename it label when we do accounts->label conversion.",https://github.com/bitcoin/bitcoin/pull/10583#discussion_r141772004,141772004,src/rpc/misc.cpp
achow101,2017-09-29T02:10:07Z,The idea was to group the deprecated things together. The ordering is still correct though.,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r141777940,141777940,src/rpc/misc.cpp
achow101,2017-09-29T02:35:02Z,Done,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r141779984,141779984,src/wallet/rpcwallet.cpp
achow101,2017-09-29T02:35:05Z,Done,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r141779993,141779993,src/wallet/rpcwallet.cpp
achow101,2017-09-29T02:35:22Z,Added a brief test for `getaddressinfo` in `wallet.py`,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r141780010,141780010,src/wallet/rpcwallet.cpp
achow101,2017-09-29T02:35:34Z,Removed the `pwallet` check.,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r141780023,141780023,src/wallet/rpcwallet.cpp
achow101,2017-09-29T02:35:38Z,Done,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r141780033,141780033,src/rpc/misc.cpp
achow101,2017-09-29T02:35:49Z,Added the accounts field back to the output.,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r141780047,141780047,src/rpc/misc.cpp
achow101,2017-09-29T02:36:21Z,I changed that field to `redeemscript`. I didn't make it a separate object.,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r141780087,141780087,src/wallet/rpcwallet.cpp
achow101,2017-09-29T02:36:26Z,Done.,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r141780094,141780094,src/wallet/rpcwallet.cpp
MarcoFalke,2017-09-29T14:37:57Z,"No trailing whitespace, please.",https://github.com/bitcoin/bitcoin/pull/10583#discussion_r141884741,141884741,test/functional/wallet.py
achow101,2017-09-29T15:15:15Z,Removed.,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r141894025,141894025,test/functional/wallet.py
meshcollider,2017-11-17T07:03:18Z,"Is this deprecated or not? `isscript` is on line 51 too which hasn't been deleted, and in the if-statement below `Pair(""isscript"", scriptPubKey.IsPayToScriptHash())` is pushed on line 98. I think the deprecation is correct, so both those lines should be removed?",https://github.com/bitcoin/bitcoin/pull/10583#discussion_r151614788,151614788,src/rpc/misc.cpp
meshcollider,2017-11-17T07:09:37Z,"Should be `optional`. Same as `pubkey` on line above.\nThen make same changes to the deprecated fields in `validateaddress` so they're consistent.",https://github.com/bitcoin/bitcoin/pull/10583#discussion_r151615579,151615579,src/wallet/rpcwallet.cpp
meshcollider,2017-11-17T07:18:41Z,"If the deprecation switch is enabled, should `redeemscript` be named `script` for compatibility in the output of `validateaddress`? Otherwise its a breaking change anyway",https://github.com/bitcoin/bitcoin/pull/10583#discussion_r151616678,151616678,src/rpc/misc.cpp
achow101,2017-11-30T17:04:20Z,"I think that `isscript` shouldn't be deprecated, so I fixed that",https://github.com/bitcoin/bitcoin/pull/10583#discussion_r154139263,154139263,src/rpc/misc.cpp
achow101,2017-11-30T17:04:22Z,Done,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r154139275,154139275,src/rpc/misc.cpp
achow101,2017-11-30T17:04:27Z,Done.,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r154139297,154139297,src/wallet/rpcwallet.cpp
instagibbs,2017-11-30T20:26:24Z,please tell the reader what type of things are moving,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r154191357,154191357,src/rpc/misc.cpp
jamesob,2018-02-05T21:10:19Z,"In https://github.com/bitcoin/bitcoin/pull/10583/commits/4dadd7c7ac0934447b8ca33942535cc8a22e78f5\n\nUnused variable?",https://github.com/bitcoin/bitcoin/pull/10583#discussion_r166112644,166112644,src/rpc/util.cpp
jamesob,2018-02-05T21:10:40Z,"In https://github.com/bitcoin/bitcoin/pull/10583/commits/4dadd7c7ac0934447b8ca33942535cc8a22e78f5\n\nUnused?",https://github.com/bitcoin/bitcoin/pull/10583#discussion_r166112717,166112717,src/rpc/util.cpp
jamesob,2018-02-05T21:10:55Z,"In https://github.com/bitcoin/bitcoin/pull/10583/commits/4dadd7c7ac0934447b8ca33942535cc8a22e78f5\n\nUnused?",https://github.com/bitcoin/bitcoin/pull/10583#discussion_r166112787,166112787,src/rpc/util.cpp
jamesob,2018-02-05T21:11:45Z,"In https://github.com/bitcoin/bitcoin/pull/10583/commits/4dadd7c7ac0934447b8ca33942535cc8a22e78f5\n\nUnused?",https://github.com/bitcoin/bitcoin/pull/10583#discussion_r166112981,166112981,src/rpc/util.cpp
jamesob,2018-02-05T21:11:53Z,"In https://github.com/bitcoin/bitcoin/pull/10583/commits/4dadd7c7ac0934447b8ca33942535cc8a22e78f5\n\nUnused?",https://github.com/bitcoin/bitcoin/pull/10583#discussion_r166113017,166113017,src/rpc/util.cpp
jamesob,2018-02-05T21:33:14Z,"In https://github.com/bitcoin/bitcoin/pull/10583/commits/4dadd7c7ac0934447b8ca33942535cc8a22e78f5\n\nCurious: if we're looking to eventually get away from using Boost, should we reserve continued/new usage of it for cases when the feature at hand would be hard to replicate on our own? Seems like each use of\n```\nboost::apply_visitor(DescribeAddressVisitor(), foo);\n```\ncould be replaced wi",https://github.com/bitcoin/bitcoin/pull/10583#discussion_r166118579,166118579,src/rpc/util.h
instagibbs,2018-02-08T20:50:39Z,unused?,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r167063182,167063182,src/rpc/misc.cpp
instagibbs,2018-02-08T20:51:28Z,unused?,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r167063377,167063377,src/rpc/misc.cpp
instagibbs,2018-02-08T20:51:44Z,unused?,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r167063455,167063455,src/rpc/misc.cpp
instagibbs,2018-02-08T20:51:53Z,unused?,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r167063497,167063497,src/rpc/misc.cpp
instagibbs,2018-02-08T20:52:04Z,unused?,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r167063550,167063550,src/rpc/misc.cpp
sipa,2018-02-09T02:14:39Z,"There probably still needs to be a mention of `addresses`, as there is now no information about it anywhere anymore.",https://github.com/bitcoin/bitcoin/pull/10583#discussion_r167124634,167124634,src/rpc/misc.cpp
sipa,2018-02-09T02:27:05Z,"This will include the `addresses` field when `-deprecatedrpc=validateaddress` is set, even for witness addresses (currently it will only include it for legacy addresses).",https://github.com/bitcoin/bitcoin/pull/10583#discussion_r167125986,167125986,src/wallet/rpcwallet.cpp
sipa,2018-02-09T02:30:32Z,"I think you can keep the `DescribeAddressVisitor` class entirely local to `rpc/util.cpp`, and only expose a `UniValue DescribeAddress(const CTxDestination& dest)` function.",https://github.com/bitcoin/bitcoin/pull/10583#discussion_r167126361,167126361,src/rpc/util.h
achow101,2018-02-09T17:00:47Z,Added mention of it back.,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r167286509,167286509,src/rpc/misc.cpp
achow101,2018-02-09T17:01:34Z,I changed it back to the original one and used `IsDeprecatedRPC` in a different place to handle this issue.,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r167286687,167286687,src/wallet/rpcwallet.cpp
achow101,2018-02-09T17:01:58Z,Changed this and `DescribeWalletAddressVisitor` to helper functions which called the visitors.,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r167286789,167286789,src/rpc/util.h
promag,2018-02-15T22:28:21Z,"Nit, add newline.",https://github.com/bitcoin/bitcoin/pull/10583#discussion_r168628216,168628216,src/rpc/util.cpp
promag,2018-02-15T22:28:48Z,"Nit, `const CScriptID& scriptID`. `{` on new line.",https://github.com/bitcoin/bitcoin/pull/10583#discussion_r168628312,168628312,src/rpc/util.cpp
promag,2018-02-15T22:29:33Z,"Nit, `const CNoDestination& dest `. `{` on new line.",https://github.com/bitcoin/bitcoin/pull/10583#discussion_r168628484,168628484,src/rpc/util.cpp
promag,2018-02-15T22:30:20Z,Fix alignment.,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r168628680,168628680,src/rpc/misc.cpp
promag,2018-02-15T22:30:40Z,"Nit, sort.",https://github.com/bitcoin/bitcoin/pull/10583#discussion_r168628742,168628742,src/Makefile.am
promag,2018-02-15T22:30:57Z,Why this change? Does the order matter? 🙄,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r168628815,168628815,src/Makefile.am
promag,2018-02-15T22:33:08Z,`const CTxDestination& dest`.,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r168629284,168629284,src/rpc/util.h
promag,2018-02-15T22:33:26Z,"Nit, sort.",https://github.com/bitcoin/bitcoin/pull/10583#discussion_r168629367,168629367,src/wallet/rpcwallet.cpp
promag,2018-02-15T22:34:14Z,"Nit, m_wallet, why public?",https://github.com/bitcoin/bitcoin/pull/10583#discussion_r168629565,168629565,src/wallet/rpcwallet.cpp
promag,2018-02-15T22:37:37Z,"Nit, `const CKeyID& keyID`. `{` on new line.",https://github.com/bitcoin/bitcoin/pull/10583#discussion_r168630197,168630197,src/rpc/util.cpp
achow101,2018-02-15T23:17:00Z,"Yes, the order matters",https://github.com/bitcoin/bitcoin/pull/10583#discussion_r168638053,168638053,src/Makefile.am
achow101,2018-02-15T23:17:57Z,why not?,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r168638222,168638222,src/wallet/rpcwallet.cpp
achow101,2018-02-15T23:28:21Z,Done,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r168640191,168640191,src/rpc/util.cpp
achow101,2018-02-15T23:28:26Z,Done,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r168640212,168640212,src/rpc/util.cpp
achow101,2018-02-15T23:28:30Z,Done,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r168640223,168640223,src/rpc/util.cpp
achow101,2018-02-15T23:28:36Z,Done,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r168640250,168640250,src/Makefile.am
achow101,2018-02-15T23:28:41Z,Done,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r168640263,168640263,src/rpc/util.h
achow101,2018-02-15T23:28:48Z,Done,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r168640275,168640275,src/rpc/util.cpp
achow101,2018-02-15T23:31:46Z,Done,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r168640768,168640768,src/wallet/rpcwallet.cpp
achow101,2018-02-15T23:32:33Z,Done,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r168640910,168640910,src/rpc/misc.cpp
promag,2018-02-16T09:34:40Z,"See `CAffectedKeysVisitor`, `DestinationEncoder` and `CScriptVisitor` with private members. On the other hand `Witnessifier` members are public (could be ""fixed"") .\n\nIMO all members, by default, should be private. When reading the code it's clear that a private member is not externally accessed/changed.",https://github.com/bitcoin/bitcoin/pull/10583#discussion_r168708875,168708875,src/wallet/rpcwallet.cpp
promag,2018-02-16T09:36:18Z,`&` before space and `{` new line.,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r168709211,168709211,src/wallet/rpcwallet.cpp
promag,2018-02-16T09:36:27Z,`&` before space and `{` new line.,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r168709234,168709234,src/wallet/rpcwallet.cpp
promag,2018-02-16T09:41:29Z,`&` before space.,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r168710297,168710297,src/rpc/util.cpp
promag,2018-02-16T09:42:15Z,`&` before space.,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r168710447,168710447,src/wallet/rpcwallet.cpp
promag,2018-02-16T09:46:17Z,Use find to avoid 2nd lookup below (unless you don't want to touch moved code).,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r168711433,168711433,src/wallet/rpcwallet.cpp
promag,2018-02-16T09:53:48Z,Fix alignment.,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r168713258,168713258,src/wallet/rpcwallet.cpp
promag,2018-02-16T09:53:57Z,Fix alignment.,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r168713284,168713284,src/wallet/rpcwallet.cpp
promag,2018-02-16T09:58:05Z,"Remove period? (my personal preference if to add period on all, currently it's a mix)",https://github.com/bitcoin/bitcoin/pull/10583#discussion_r168714158,168714158,src/wallet/rpcwallet.cpp
promag,2018-02-16T09:59:37Z,`*` before space. ,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r168714505,168714505,src/wallet/rpcwallet.cpp
promag,2018-02-16T10:01:55Z,"Nit, could `AssertLockHeld(pwallet->cs_wallet)`.",https://github.com/bitcoin/bitcoin/pull/10583#discussion_r168714978,168714978,src/wallet/rpcwallet.cpp
promag,2018-02-16T10:02:59Z,"In this context `pwallet` is valid so:\n```cpp\nif (pwallet->GetCScript(scriptID, subscript)) {\n```",https://github.com/bitcoin/bitcoin/pull/10583#discussion_r168715201,168715201,src/wallet/rpcwallet.cpp
promag,2018-02-16T10:03:44Z,"In this context `pwallet` is valid so:\n```cpp\nif (pwallet->GetCScript(scriptID, subscript)) {\n```",https://github.com/bitcoin/bitcoin/pull/10583#discussion_r168715377,168715377,src/wallet/rpcwallet.cpp
promag,2018-02-16T10:06:28Z,"Unless you don't want to touch moved code, remove `hasher` and just do:\n```cpp\nCRIPEMD160().Write(id.begin(), 32).Finalize(hash.begin());\n```",https://github.com/bitcoin/bitcoin/pull/10583#discussion_r168715986,168715986,src/wallet/rpcwallet.cpp
promag,2018-02-16T10:07:29Z,"In this context `pwallet` is valid so:\n```cpp\nif (pwallet->GetCScript(CScriptID(hash), subscript)) {\n```",https://github.com/bitcoin/bitcoin/pull/10583#discussion_r168716224,168716224,src/wallet/rpcwallet.cpp
promag,2018-02-16T10:09:48Z,Why `!::vpwallets.empty()`? There is alwasy one wallet right?,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r168716665,168716665,src/rpc/misc.cpp
promag,2018-02-16T10:10:15Z,`&` before space.,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r168716770,168716770,src/rpc/util.cpp
promag,2018-02-16T10:10:21Z,`&` before space.,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r168716796,168716796,src/rpc/util.cpp
promag,2018-02-16T10:11:10Z,"In this context `pwallet` is valid so:\n```cpp\nif (pwallet->GetPubKey(CKeyID(id), pubkey)) {\n```",https://github.com/bitcoin/bitcoin/pull/10583#discussion_r168716970,168716970,src/wallet/rpcwallet.cpp
instagibbs,2018-02-16T14:47:35Z,travis linter is complaining about trailing whitespace.... I don't know protocol if it matters but just reporting where the complaint is coming from,https://github.com/bitcoin/bitcoin/pull/10583#discussion_r168775437,168775437,src/rpc/util.cpp
achow101,2018-02-16T17:07:43Z,"No, you can run with `-disablewallet` which will disable wallets and thus `vpwallets` will be empty.",https://github.com/bitcoin/bitcoin/pull/10583#discussion_r168814990,168814990,src/rpc/misc.cpp
