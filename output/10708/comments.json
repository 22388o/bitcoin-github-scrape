[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/312090907",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10708#issuecomment-312090907",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10708",
    "id": 312090907,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMjA5MDkwNw==",
    "user": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?u=eab5d0cdbb6cc25087cb61d4ca4a6f85255f42a7&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-29T20:13:33Z",
    "updated_at": "2017-06-29T20:13:33Z",
    "author_association": "CONTRIBUTOR",
    "body": "Concept ACK (not looked to closely at the code yet).\r\n10 blocks seems to be little... maybe it should be configurable (most memory consuming processes are configurable right now).\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/312090907/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/312093114",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10708#issuecomment-312093114",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10708",
    "id": 312093114,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMjA5MzExNA==",
    "user": {
      "login": "gmaxwell",
      "id": 858454,
      "node_id": "MDQ6VXNlcjg1ODQ1NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/858454?u=63e5c438c242094837a9deeda775d77988b508bf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gmaxwell",
      "html_url": "https://github.com/gmaxwell",
      "followers_url": "https://api.github.com/users/gmaxwell/followers",
      "following_url": "https://api.github.com/users/gmaxwell/following{/other_user}",
      "gists_url": "https://api.github.com/users/gmaxwell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
      "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
      "repos_url": "https://api.github.com/users/gmaxwell/repos",
      "events_url": "https://api.github.com/users/gmaxwell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-29T20:22:31Z",
    "updated_at": "2017-06-29T20:22:31Z",
    "author_association": "CONTRIBUTOR",
    "body": "why would ten be too little?  If it made the code simpler I would have expected it to just do one, reading them isn't free but it's not that expensive-- shouldn't be the limiting factor in reorg performance.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/312093114/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/312099655",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10708#issuecomment-312099655",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10708",
    "id": 312099655,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMjA5OTY1NQ==",
    "user": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?u=eab5d0cdbb6cc25087cb61d4ca4a6f85255f42a7&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-29T20:40:48Z",
    "updated_at": "2017-06-29T20:40:48Z",
    "author_association": "CONTRIBUTOR",
    "body": "> why would ten be too little?\r\n\r\nI kinda followed the assumption that some users want to reorg as fast as possible (I's probably often a tiny difference) regardless of the depth of the reorganisation. I guess those users do not care about using 200MB+ for tracing the blocks in mem during a reorg. But it's a wild assumptions and maybe I'm wrong.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/312099655/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/312106389",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10708#issuecomment-312106389",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10708",
    "id": 312106389,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMjEwNjM4OQ==",
    "user": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following{/other_user}",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events{/privacy}",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-29T20:56:46Z",
    "updated_at": "2017-06-29T20:56:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "Well I'm not sure how many users are really focused on how long a 20 block reorg will take...should be sufficiently rare that a user spending a lot of time thinking about it is probably less than useful.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/312106389/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/312109412",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10708#issuecomment-312109412",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10708",
    "id": 312109412,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMxMjEwOTQxMg==",
    "user": {
      "login": "gmaxwell",
      "id": 858454,
      "node_id": "MDQ6VXNlcjg1ODQ1NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/858454?u=63e5c438c242094837a9deeda775d77988b508bf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gmaxwell",
      "html_url": "https://github.com/gmaxwell",
      "followers_url": "https://api.github.com/users/gmaxwell/followers",
      "following_url": "https://api.github.com/users/gmaxwell/following{/other_user}",
      "gists_url": "https://api.github.com/users/gmaxwell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
      "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
      "repos_url": "https://api.github.com/users/gmaxwell/repos",
      "events_url": "https://api.github.com/users/gmaxwell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-06-29T21:09:46Z",
    "updated_at": "2017-06-29T21:09:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jonasschnelli reorgs are slow but for reasons that have nothing to do with reading blocks from the disk.  it can easily take many seconds to reorg 20 blocks, reading them will take a few milliseconds.  Making reorgs faster is great but I think this is the wrong place to optimize for that. ",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/312109412/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/124933618",
    "pull_request_review_id": 47274808,
    "id": 124933618,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEyNDkzMzYxOA==",
    "diff_hunk": "@@ -186,7 +186,7 @@ enum FlushStateMode {\n };\n \n // See definition for documentation\n-static bool FlushStateToDisk(const CChainParams& chainParams, CValidationState &state, FlushStateMode mode, int nManualPruneHeight=0);\n+static bool FlushStateToDisk(const CChainParams& chainParams, CValidationState &state, FlushStateMode mode, int nManualPruneHeight, bool prune);",
    "path": "src/validation.cpp",
    "position": 5,
    "original_position": 5,
    "commit_id": "b7077bd98e218983d81be893195733c07efb62a6",
    "original_commit_id": "b7077bd98e218983d81be893195733c07efb62a6",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "It seems the `prune` flag is implied by `mode != FLUSH_STATE_IS_NEEDED`.",
    "created_at": "2017-06-29T23:14:34Z",
    "updated_at": "2017-06-29T23:14:34Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10708#discussion_r124933618",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10708",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/124933618"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/10708#discussion_r124933618"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10708"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/124933618/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 189,
    "original_line": 189,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/125350355",
    "pull_request_review_id": 47731653,
    "id": 125350355,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEyNTM1MDM1NQ==",
    "diff_hunk": "@@ -186,7 +186,7 @@ enum FlushStateMode {\n };\n \n // See definition for documentation\n-static bool FlushStateToDisk(const CChainParams& chainParams, CValidationState &state, FlushStateMode mode, int nManualPruneHeight=0);\n+static bool FlushStateToDisk(const CChainParams& chainParams, CValidationState &state, FlushStateMode mode, int nManualPruneHeight, bool prune);",
    "path": "src/validation.cpp",
    "position": 5,
    "original_position": 5,
    "commit_id": "b7077bd98e218983d81be893195733c07efb62a6",
    "original_commit_id": "b7077bd98e218983d81be893195733c07efb62a6",
    "user": {
      "login": "narula",
      "id": 177646,
      "node_id": "MDQ6VXNlcjE3NzY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/177646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/narula",
      "html_url": "https://github.com/narula",
      "followers_url": "https://api.github.com/users/narula/followers",
      "following_url": "https://api.github.com/users/narula/following{/other_user}",
      "gists_url": "https://api.github.com/users/narula/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/narula/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/narula/subscriptions",
      "organizations_url": "https://api.github.com/users/narula/orgs",
      "repos_url": "https://api.github.com/users/narula/repos",
      "events_url": "https://api.github.com/users/narula/events{/privacy}",
      "received_events_url": "https://api.github.com/users/narula/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Yes, you're right.  But is it reasonable to rely on that for prune's semantics?",
    "created_at": "2017-07-03T19:57:48Z",
    "updated_at": "2017-07-03T19:57:48Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10708#discussion_r125350355",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10708",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/125350355"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/10708#discussion_r125350355"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10708"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/125350355/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 189,
    "original_line": 189,
    "side": "RIGHT",
    "in_reply_to_id": 124933618
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129950449",
    "pull_request_review_id": 52776268,
    "id": 129950449,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEyOTk1MDQ0OQ==",
    "diff_hunk": "@@ -186,7 +186,7 @@ enum FlushStateMode {\n };\n \n // See definition for documentation\n-static bool FlushStateToDisk(const CChainParams& chainParams, CValidationState &state, FlushStateMode mode, int nManualPruneHeight=0);\n+static bool FlushStateToDisk(const CChainParams& chainParams, CValidationState &state, FlushStateMode mode, int nManualPruneHeight, bool prune);",
    "path": "src/validation.cpp",
    "position": 5,
    "original_position": 5,
    "commit_id": "b7077bd98e218983d81be893195733c07efb62a6",
    "original_commit_id": "b7077bd98e218983d81be893195733c07efb62a6",
    "user": {
      "login": "JeremyRubin",
      "id": 886523,
      "node_id": "MDQ6VXNlcjg4NjUyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JeremyRubin",
      "html_url": "https://github.com/JeremyRubin",
      "followers_url": "https://api.github.com/users/JeremyRubin/followers",
      "following_url": "https://api.github.com/users/JeremyRubin/following{/other_user}",
      "gists_url": "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
      "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
      "repos_url": "https://api.github.com/users/JeremyRubin/repos",
      "events_url": "https://api.github.com/users/JeremyRubin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Why not preserve the default args?",
    "created_at": "2017-07-27T20:27:50Z",
    "updated_at": "2017-07-28T07:25:45Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10708#discussion_r129950449",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10708",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129950449"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/10708#discussion_r129950449"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10708"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129950449/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 189,
    "original_line": 189,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129952430",
    "pull_request_review_id": 52776268,
    "id": 129952430,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEyOTk1MjQzMA==",
    "diff_hunk": "@@ -1755,18 +1755,20 @@ bool static FlushStateToDisk(const CChainParams& chainparams, CValidationState &\n     std::set<int> setFilesToPrune;\n     bool fFlushForPrune = false;\n     try {\n-    if (fPruneMode && (fCheckForPruning || nManualPruneHeight > 0) && !fReindex) {\n-        if (nManualPruneHeight > 0) {\n-            FindFilesToPruneManual(setFilesToPrune, nManualPruneHeight);\n-        } else {\n-            FindFilesToPrune(setFilesToPrune, chainparams.PruneAfterHeight());\n-            fCheckForPruning = false;\n-        }\n-        if (!setFilesToPrune.empty()) {\n-            fFlushForPrune = true;\n-            if (!fHavePruned) {\n-                pblocktree->WriteFlag(\"prunedblockfiles\", true);\n-                fHavePruned = true;\n+    if (prune) {",
    "path": "src/validation.cpp",
    "position": 43,
    "original_position": 43,
    "commit_id": "b7077bd98e218983d81be893195733c07efb62a6",
    "original_commit_id": "b7077bd98e218983d81be893195733c07efb62a6",
    "user": {
      "login": "JeremyRubin",
      "id": 886523,
      "node_id": "MDQ6VXNlcjg4NjUyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JeremyRubin",
      "html_url": "https://github.com/JeremyRubin",
      "followers_url": "https://api.github.com/users/JeremyRubin/followers",
      "following_url": "https://api.github.com/users/JeremyRubin/following{/other_user}",
      "gists_url": "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
      "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
      "repos_url": "https://api.github.com/users/JeremyRubin/repos",
      "events_url": "https://api.github.com/users/JeremyRubin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "could collapse this with branch below?",
    "created_at": "2017-07-27T20:36:11Z",
    "updated_at": "2017-07-28T07:25:45Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10708#discussion_r129952430",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10708",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129952430"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/10708#discussion_r129952430"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10708"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129952430/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1758,
    "original_line": 1758,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129953542",
    "pull_request_review_id": 52776268,
    "id": 129953542,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEyOTk1MzU0Mg==",
    "diff_hunk": "@@ -2029,6 +2032,12 @@ class ConnectTrace {\n         assert(pblock);\n         blocksConnected.back().pindex = pindex;\n         blocksConnected.back().pblock = std::move(pblock);\n+        if (++num_connected >= MAX_CONNECT_TRACE_BLOCKS_IN_MEMORY) {\n+            // Clear out a block\n+            int idx = blocksConnected.size() - num_connected;\n+            assert(idx >= 0);\n+            blocksConnected.at(idx).pblock = NULL;",
    "path": "src/validation.cpp",
    "position": 115,
    "original_position": 115,
    "commit_id": "b7077bd98e218983d81be893195733c07efb62a6",
    "original_commit_id": "b7077bd98e218983d81be893195733c07efb62a6",
    "user": {
      "login": "JeremyRubin",
      "id": 886523,
      "node_id": "MDQ6VXNlcjg4NjUyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JeremyRubin",
      "html_url": "https://github.com/JeremyRubin",
      "followers_url": "https://api.github.com/users/JeremyRubin/followers",
      "following_url": "https://api.github.com/users/JeremyRubin/following{/other_user}",
      "gists_url": "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
      "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
      "repos_url": "https://api.github.com/users/JeremyRubin/repos",
      "events_url": "https://api.github.com/users/JeremyRubin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "better to just call `reset()` explicitly, should the ptr ever be made non-smart.",
    "created_at": "2017-07-27T20:40:58Z",
    "updated_at": "2017-07-28T07:25:45Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10708#discussion_r129953542",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10708",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129953542"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/10708#discussion_r129953542"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10708"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/129953542/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2039,
    "original_line": 2039,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/130026179",
    "pull_request_review_id": 52776268,
    "id": 130026179,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEzMDAyNjE3OQ==",
    "diff_hunk": "@@ -2029,6 +2032,12 @@ class ConnectTrace {\n         assert(pblock);\n         blocksConnected.back().pindex = pindex;\n         blocksConnected.back().pblock = std::move(pblock);\n+        if (++num_connected >= MAX_CONNECT_TRACE_BLOCKS_IN_MEMORY) {",
    "path": "src/validation.cpp",
    "position": 111,
    "original_position": 111,
    "commit_id": "b7077bd98e218983d81be893195733c07efb62a6",
    "original_commit_id": "b7077bd98e218983d81be893195733c07efb62a6",
    "user": {
      "login": "JeremyRubin",
      "id": 886523,
      "node_id": "MDQ6VXNlcjg4NjUyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JeremyRubin",
      "html_url": "https://github.com/JeremyRubin",
      "followers_url": "https://api.github.com/users/JeremyRubin/followers",
      "following_url": "https://api.github.com/users/JeremyRubin/following{/other_user}",
      "gists_url": "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
      "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
      "repos_url": "https://api.github.com/users/JeremyRubin/repos",
      "events_url": "https://api.github.com/users/JeremyRubin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "slight preference for \r\n\r\n```c++\r\n++num_connected;\r\nif (num_connected >= MAX_CONNECT_TRACE_BLOCKS_IN_MEMORY)\r\n```",
    "created_at": "2017-07-28T07:12:35Z",
    "updated_at": "2017-07-28T07:25:45Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10708#discussion_r130026179",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10708",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/130026179"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/10708#discussion_r130026179"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10708"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/130026179/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2035,
    "original_line": 2035,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/130026605",
    "pull_request_review_id": 52776268,
    "id": 130026605,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEzMDAyNjYwNQ==",
    "diff_hunk": "@@ -2336,8 +2345,18 @@ bool ActivateBestChain(CValidationState &state, const CChainParams& chainparams,\n             fInitialDownload = IsInitialBlockDownload();\n \n             for (const PerBlockConnectTrace& trace : connectTrace.GetBlocksConnected()) {\n-                assert(trace.pblock && trace.pindex);\n-                GetMainSignals().BlockConnected(trace.pblock, trace.pindex, *trace.conflictedTxs);\n+                assert(trace.pindex);\n+                std::shared_ptr<const CBlock> pthisBlock;",
    "path": "src/validation.cpp",
    "position": 136,
    "original_position": 136,
    "commit_id": "b7077bd98e218983d81be893195733c07efb62a6",
    "original_commit_id": "b7077bd98e218983d81be893195733c07efb62a6",
    "user": {
      "login": "JeremyRubin",
      "id": 886523,
      "node_id": "MDQ6VXNlcjg4NjUyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JeremyRubin",
      "html_url": "https://github.com/JeremyRubin",
      "followers_url": "https://api.github.com/users/JeremyRubin/followers",
      "following_url": "https://api.github.com/users/JeremyRubin/following{/other_user}",
      "gists_url": "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
      "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
      "repos_url": "https://api.github.com/users/JeremyRubin/repos",
      "events_url": "https://api.github.com/users/JeremyRubin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "probably a bit cleaner to just do:\r\n```c++\r\nstd::shared_ptr<const CBlock> pthisBlock(trace.pblock);\r\nif (!pThisBlock) {\r\n\r\n}\r\n```",
    "created_at": "2017-07-28T07:15:26Z",
    "updated_at": "2017-07-28T07:25:45Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10708#discussion_r130026605",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10708",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/130026605"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/10708#discussion_r130026605"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10708"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/130026605/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2349,
    "original_line": 2349,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/130026819",
    "pull_request_review_id": 52776268,
    "id": 130026819,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEzMDAyNjgxOQ==",
    "diff_hunk": "@@ -2336,8 +2345,18 @@ bool ActivateBestChain(CValidationState &state, const CChainParams& chainparams,\n             fInitialDownload = IsInitialBlockDownload();\n \n             for (const PerBlockConnectTrace& trace : connectTrace.GetBlocksConnected()) {\n-                assert(trace.pblock && trace.pindex);\n-                GetMainSignals().BlockConnected(trace.pblock, trace.pindex, *trace.conflictedTxs);\n+                assert(trace.pindex);\n+                std::shared_ptr<const CBlock> pthisBlock;\n+                if (trace.pblock == NULL) {\n+                    std::shared_ptr<CBlock> pblockNew = std::make_shared<CBlock>();",
    "path": "src/validation.cpp",
    "position": 138,
    "original_position": 138,
    "commit_id": "b7077bd98e218983d81be893195733c07efb62a6",
    "original_commit_id": "b7077bd98e218983d81be893195733c07efb62a6",
    "user": {
      "login": "JeremyRubin",
      "id": 886523,
      "node_id": "MDQ6VXNlcjg4NjUyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JeremyRubin",
      "html_url": "https://github.com/JeremyRubin",
      "followers_url": "https://api.github.com/users/JeremyRubin/followers",
      "following_url": "https://api.github.com/users/JeremyRubin/following{/other_user}",
      "gists_url": "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
      "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
      "repos_url": "https://api.github.com/users/JeremyRubin/repos",
      "events_url": "https://api.github.com/users/JeremyRubin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "probably no need to make pblockNew? Can just assign directly with make_shared to pthisBlock.",
    "created_at": "2017-07-28T07:16:56Z",
    "updated_at": "2017-07-28T07:25:45Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/10708#discussion_r130026819",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10708",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/130026819"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/10708#discussion_r130026819"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10708"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/130026819/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2351,
    "original_line": 2351,
    "side": "RIGHT"
  }
]