[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/911042249",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22855#issuecomment-911042249",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22855",
    "id": 911042249,
    "node_id": "IC_kwDOABII5842TWbJ",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-02T02:12:17Z",
    "updated_at": "2021-09-22T05:49:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#22539](https://github.com/bitcoin/bitcoin/pull/22539) (Re-include RBF replacement txs in fee estimation by darosior)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/911042249/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/916923327",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22855#issuecomment-916923327",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22855",
    "id": 916923327,
    "node_id": "IC_kwDOABII5842pyO_",
    "user": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?u=a0e0040aacd7d4f0787481e8ac30b494fa429e11&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-10T13:55:24Z",
    "updated_at": "2021-09-10T13:55:24Z",
    "author_association": "MEMBER",
    "body": "Concept ACK. While you're tidying up might as well add all the missing `<std>` headers to `policy/rbf.*`, and `MAX_BIP125_RBF_SEQUENCE` can be constexpr.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/916923327/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/921156618",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22855#issuecomment-921156618",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22855",
    "id": 921156618,
    "node_id": "IC_kwDOABII584257wK",
    "user": {
      "login": "theStack",
      "id": 91535,
      "node_id": "MDQ6VXNlcjkxNTM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theStack",
      "html_url": "https://github.com/theStack",
      "followers_url": "https://api.github.com/users/theStack/followers",
      "following_url": "https://api.github.com/users/theStack/following{/other_user}",
      "gists_url": "https://api.github.com/users/theStack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theStack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
      "organizations_url": "https://api.github.com/users/theStack/orgs",
      "repos_url": "https://api.github.com/users/theStack/repos",
      "events_url": "https://api.github.com/users/theStack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theStack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-16T18:49:48Z",
    "updated_at": "2021-09-16T18:49:48Z",
    "author_association": "CONTRIBUTOR",
    "body": "Concept ACK",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/921156618/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/923820328",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22855#issuecomment-923820328",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22855",
    "id": 923820328,
    "node_id": "IC_kwDOABII5843EGEo",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?u=3e27bc6589085f3450be1b0e969d04008cc77565&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-21T09:54:23Z",
    "updated_at": "2021-09-21T09:54:23Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks for the reviews, addressed comments",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/923820328/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706010269",
    "pull_request_review_id": 751188757,
    "id": 706010269,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNjAxMDI2OQ==",
    "diff_hunk": "@@ -57,17 +57,18 @@ std::optional<std::string> GetEntriesForConflicts(const CTransaction& tx,\n     uint64_t nConflictingCount = 0;",
    "path": "src/policy/rbf.cpp",
    "position": 13,
    "original_position": 1,
    "commit_id": "0ef08f8bed537435f3f9db1e38b7d6f3551fe830",
    "original_commit_id": "7c48d198f9a561f2b342464ea0d00e5d79d2f5d5",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "a few lines up: Could also fixup the whitespace after the refactors in 2/3? https://github.com/bitcoin/bitcoin/pull/22675#pullrequestreview-747002094",
    "created_at": "2021-09-10T08:48:43Z",
    "updated_at": "2021-09-10T08:48:44Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22855#discussion_r706010269",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22855",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706010269"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22855#discussion_r706010269"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22855"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706010269/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 57,
    "original_line": 57,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706039953",
    "pull_request_review_id": 751227653,
    "id": 706039953,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNjAzOTk1Mw==",
    "diff_hunk": "@@ -57,17 +57,18 @@ std::optional<std::string> GetEntriesForConflicts(const CTransaction& tx,\n     uint64_t nConflictingCount = 0;",
    "path": "src/policy/rbf.cpp",
    "position": 13,
    "original_position": 1,
    "commit_id": "0ef08f8bed537435f3f9db1e38b7d6f3551fe830",
    "original_commit_id": "7c48d198f9a561f2b342464ea0d00e5d79d2f5d5",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Oh right! Done, sorry I missed that",
    "created_at": "2021-09-10T09:33:15Z",
    "updated_at": "2021-09-10T09:33:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22855#discussion_r706039953",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22855",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706039953"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22855#discussion_r706039953"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22855"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706039953/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 57,
    "original_line": 57,
    "side": "RIGHT",
    "in_reply_to_id": 706010269
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706506966",
    "pull_request_review_id": 751842422,
    "id": 706506966,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNjUwNjk2Ng==",
    "diff_hunk": "@@ -17,7 +17,7 @@ static const uint32_t MAX_BIP125_RBF_SEQUENCE = 0xfffffffd;\n *\n * SEQUENCE_FINAL-1 is picked to still allow use of nLockTime by non-replaceable transactions. All\n * inputs rather than just one is for the sake of multi-party protocols, where we don't want a single\n-* party to be able to disable replacement. */\n-bool SignalsOptInRBF(const CTransaction &tx);\n+* party to be able to disable replacement by opting out in their own input. */",
    "path": "src/util/rbf.h",
    "position": 15,
    "original_position": 6,
    "commit_id": "0ef08f8bed537435f3f9db1e38b7d6f3551fe830",
    "original_commit_id": "3cf46f6055f7cd2e5da81e0d29cafc51ad4aafba",
    "user": {
      "login": "ariard",
      "id": 23310655,
      "node_id": "MDQ6VXNlcjIzMzEwNjU1",
      "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ariard",
      "html_url": "https://github.com/ariard",
      "followers_url": "https://api.github.com/users/ariard/followers",
      "following_url": "https://api.github.com/users/ariard/following{/other_user}",
      "gists_url": "https://api.github.com/users/ariard/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ariard/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
      "organizations_url": "https://api.github.com/users/ariard/orgs",
      "repos_url": "https://api.github.com/users/ariard/repos",
      "events_url": "https://api.github.com/users/ariard/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ariard/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "micro-nit \"by opting out of their single-owned input\". If the input spent is 2-of-2 like LN's commitment you should check that counterparty's signature is covering a RBF-signaling `nSequence` field.",
    "created_at": "2021-09-10T22:48:15Z",
    "updated_at": "2021-09-10T23:10:43Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22855#discussion_r706506966",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22855",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706506966"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22855#discussion_r706506966"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22855"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706506966/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 20,
    "original_line": 20,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706513387",
    "pull_request_review_id": 751842422,
    "id": 706513387,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNjUxMzM4Nw==",
    "diff_hunk": "@@ -771,39 +771,43 @@ bool MemPoolAccept::PreChecks(ATMPArgs& args, Workspace& ws)\n     // pathological case by making sure setConflicts and setAncestors don't\n     // intersect.\n     if (const auto err_string{EntriesAndTxidsDisjoint(setAncestors, setConflicts, hash)}) {\n+        // We classify this as a consensus error because a transaction depending on something it\n+        // conflicts with would be inconsistent.\n         return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-txns-spends-conflicting-tx\", *err_string);\n     }\n \n \n-    // If we don't hold the lock allConflicting might be incomplete; the\n-    // subsequent RemoveStaged() and addUnchecked() calls don't guarantee\n-    // mempool consistency for us.\n     fReplacementTransaction = setConflicts.size();\n-    if (fReplacementTransaction)\n-    {\n+    if (fReplacementTransaction) {\n         CFeeRate newFeeRate(nModifiedFees, nSize);\n+        // It's possible that the replacement pays more fees than its direct conflicts but not more\n+        // than all conflicts (i.e. the direct conflicts have high-fee descendants). However, if the\n+        // replacement doesn't pay more fees than its direct conflicts, then we can be sure it's not\n+        // more economically rational to mine. Before we go digging through the mempool for all\n+        // transactions that would need to be removed (direct conflicts and all descendants), check\n+        // that the replacement transaction pays more than its direct conflicts.\n         if (const auto err_string{PaysMoreThanConflicts(setIterConflicting, newFeeRate, hash)}) {",
    "path": "src/validation.cpp",
    "position": 24,
    "original_position": 24,
    "commit_id": "0ef08f8bed537435f3f9db1e38b7d6f3551fe830",
    "original_commit_id": "3cf46f6055f7cd2e5da81e0d29cafc51ad4aafba",
    "user": {
      "login": "ariard",
      "id": 23310655,
      "node_id": "MDQ6VXNlcjIzMzEwNjU1",
      "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ariard",
      "html_url": "https://github.com/ariard",
      "followers_url": "https://api.github.com/users/ariard/followers",
      "following_url": "https://api.github.com/users/ariard/following{/other_user}",
      "gists_url": "https://api.github.com/users/ariard/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ariard/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
      "organizations_url": "https://api.github.com/users/ariard/orgs",
      "repos_url": "https://api.github.com/users/ariard/repos",
      "events_url": "https://api.github.com/users/ariard/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ariard/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I think it would interesting to add a comment noting that this higher-feerate than any directly replaced transactions it's not part of the BIP. \r\n\r\nAlso I think this check might bounce-off higher-fee transactions than the replaced one if the conflict transaction has a higher feerate. Let's say a 2_000 vb/10_000 sats replacement vs a 100 vb/8_000 sats conflicts. Without entering in a discussion on the miner block strategy, this is at lest consistent with `BlockAssembler::addPackageTxs` which is selecting packages on feerate.",
    "created_at": "2021-09-10T23:10:04Z",
    "updated_at": "2021-09-10T23:10:43Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22855#discussion_r706513387",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22855",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706513387"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22855#discussion_r706513387"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22855"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706513387/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 789,
    "original_line": 789,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706513499",
    "pull_request_review_id": 751842422,
    "id": 706513499,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNjUxMzQ5OQ==",
    "diff_hunk": "@@ -150,24 +151,26 @@ std::optional<std::string> PaysMoreThanConflicts(const CTxMemPool::setEntries& i\n std::optional<std::string> PaysForRBF(CAmount original_fees,\n                                       CAmount replacement_fees,\n                                       size_t replacement_vsize,\n+                                      CFeeRate relay_fee,\n                                       const uint256& txid)\n {\n-    // The replacement must pay greater fees than the transactions it\n-    // replaces - if we did the bandwidth used by those conflicting\n-    // transactions would not be paid for.\n+    // BIP125 Rule #3: The replacement fees must be greater than or equal to fees of the",
    "path": "src/policy/rbf.cpp",
    "position": 80,
    "original_position": 80,
    "commit_id": "0ef08f8bed537435f3f9db1e38b7d6f3551fe830",
    "original_commit_id": "3cf46f6055f7cd2e5da81e0d29cafc51ad4aafba",
    "user": {
      "login": "ariard",
      "id": 23310655,
      "node_id": "MDQ6VXNlcjIzMzEwNjU1",
      "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ariard",
      "html_url": "https://github.com/ariard",
      "followers_url": "https://api.github.com/users/ariard/followers",
      "following_url": "https://api.github.com/users/ariard/following{/other_user}",
      "gists_url": "https://api.github.com/users/ariard/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ariard/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
      "organizations_url": "https://api.github.com/users/ariard/orgs",
      "repos_url": "https://api.github.com/users/ariard/repos",
      "events_url": "https://api.github.com/users/ariard/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ariard/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "See https://github.com/bitcoin/bitcoin/pull/22675#discussion_r706498561",
    "created_at": "2021-09-10T23:10:32Z",
    "updated_at": "2021-09-10T23:10:43Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22855#discussion_r706513499",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22855",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706513499"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22855#discussion_r706513499"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22855"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706513499/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 157,
    "original_line": 157,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/709055840",
    "pull_request_review_id": 754944662,
    "id": 709055840,
    "node_id": "PRRC_kwDOABII584qQ1Vg",
    "diff_hunk": "@@ -771,39 +771,43 @@ bool MemPoolAccept::PreChecks(ATMPArgs& args, Workspace& ws)\n     // pathological case by making sure setConflicts and setAncestors don't\n     // intersect.\n     if (const auto err_string{EntriesAndTxidsDisjoint(setAncestors, setConflicts, hash)}) {\n+        // We classify this as a consensus error because a transaction depending on something it\n+        // conflicts with would be inconsistent.\n         return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-txns-spends-conflicting-tx\", *err_string);\n     }\n \n \n-    // If we don't hold the lock allConflicting might be incomplete; the\n-    // subsequent RemoveStaged() and addUnchecked() calls don't guarantee\n-    // mempool consistency for us.\n     fReplacementTransaction = setConflicts.size();\n-    if (fReplacementTransaction)\n-    {\n+    if (fReplacementTransaction) {\n         CFeeRate newFeeRate(nModifiedFees, nSize);\n+        // It's possible that the replacement pays more fees than its direct conflicts but not more\n+        // than all conflicts (i.e. the direct conflicts have high-fee descendants). However, if the\n+        // replacement doesn't pay more fees than its direct conflicts, then we can be sure it's not\n+        // more economically rational to mine. Before we go digging through the mempool for all\n+        // transactions that would need to be removed (direct conflicts and all descendants), check\n+        // that the replacement transaction pays more than its direct conflicts.\n         if (const auto err_string{PaysMoreThanConflicts(setIterConflicting, newFeeRate, hash)}) {",
    "path": "src/validation.cpp",
    "position": 24,
    "original_position": 24,
    "commit_id": "0ef08f8bed537435f3f9db1e38b7d6f3551fe830",
    "original_commit_id": "3cf46f6055f7cd2e5da81e0d29cafc51ad4aafba",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "> I think it would interesting to add a comment noting that this higher-feerate than any directly replaced transactions it's not part of the BIP.\r\n\r\nI thought that's what I was doing by adding this comment :sweat_smile: but if you have a more specific wording suggestion I'd be happy to add!",
    "created_at": "2021-09-15T10:31:14Z",
    "updated_at": "2021-09-15T10:31:14Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22855#discussion_r709055840",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22855",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/709055840"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22855#discussion_r709055840"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22855"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/709055840/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 789,
    "original_line": 789,
    "side": "RIGHT",
    "in_reply_to_id": 706513387
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/709063025",
    "pull_request_review_id": 754954266,
    "id": 709063025,
    "node_id": "PRRC_kwDOABII584qQ3Fx",
    "diff_hunk": "@@ -150,24 +151,26 @@ std::optional<std::string> PaysMoreThanConflicts(const CTxMemPool::setEntries& i\n std::optional<std::string> PaysForRBF(CAmount original_fees,\n                                       CAmount replacement_fees,\n                                       size_t replacement_vsize,\n+                                      CFeeRate relay_fee,\n                                       const uint256& txid)\n {\n-    // The replacement must pay greater fees than the transactions it\n-    // replaces - if we did the bandwidth used by those conflicting\n-    // transactions would not be paid for.\n+    // BIP125 Rule #3: The replacement fees must be greater than or equal to fees of the",
    "path": "src/policy/rbf.cpp",
    "position": 80,
    "original_position": 80,
    "commit_id": "0ef08f8bed537435f3f9db1e38b7d6f3551fe830",
    "original_commit_id": "3cf46f6055f7cd2e5da81e0d29cafc51ad4aafba",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "https://github.com/bitcoin/bitcoin/pull/22675#discussion_r709062666",
    "created_at": "2021-09-15T10:42:05Z",
    "updated_at": "2021-09-15T10:42:05Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22855#discussion_r709063025",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22855",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/709063025"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22855#discussion_r709063025"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22855"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/709063025/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 157,
    "original_line": 157,
    "side": "RIGHT",
    "in_reply_to_id": 706513499
  }
]