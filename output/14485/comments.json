[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/429835730",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/14485#issuecomment-429835730",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14485",
    "id": 429835730,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQyOTgzNTczMA==",
    "user": {
      "login": "meshcollider",
      "id": 3211283,
      "node_id": "MDQ6VXNlcjMyMTEyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3211283?u=447cdc9e2966cbee415545c8ff452954ee1209af&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/meshcollider",
      "html_url": "https://github.com/meshcollider",
      "followers_url": "https://api.github.com/users/meshcollider/followers",
      "following_url": "https://api.github.com/users/meshcollider/following{/other_user}",
      "gists_url": "https://api.github.com/users/meshcollider/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/meshcollider/subscriptions",
      "organizations_url": "https://api.github.com/users/meshcollider/orgs",
      "repos_url": "https://api.github.com/users/meshcollider/repos",
      "events_url": "https://api.github.com/users/meshcollider/events{/privacy}",
      "received_events_url": "https://api.github.com/users/meshcollider/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-15T12:33:54Z",
    "updated_at": "2018-10-15T12:33:54Z",
    "author_association": "MEMBER",
    "body": "Concept ACK, would be good to hear from @eklitzke why the original was closed though",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/429835730/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/430954777",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/14485#issuecomment-430954777",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14485",
    "id": 430954777,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMDk1NDc3Nw==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-18T10:16:17Z",
    "updated_at": "2018-10-18T10:16:17Z",
    "author_association": "MEMBER",
    "body": "Concept ACK though I'd really like to see benchmarks for changes like this, to know if this has any impact in practice worth making the risk/complication of the change.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/430954777/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/431011401",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/14485#issuecomment-431011401",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14485",
    "id": 431011401,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQzMTAxMTQwMQ==",
    "user": {
      "login": "jgarzik",
      "id": 494411,
      "node_id": "MDQ6VXNlcjQ5NDQxMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/494411?u=0b02049ec38b6bb7d55c5c66d9bbeb0d4b822129&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jgarzik",
      "html_url": "https://github.com/jgarzik",
      "followers_url": "https://api.github.com/users/jgarzik/followers",
      "following_url": "https://api.github.com/users/jgarzik/following{/other_user}",
      "gists_url": "https://api.github.com/users/jgarzik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jgarzik/subscriptions",
      "organizations_url": "https://api.github.com/users/jgarzik/orgs",
      "repos_url": "https://api.github.com/users/jgarzik/repos",
      "events_url": "https://api.github.com/users/jgarzik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jgarzik/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-10-18T13:37:25Z",
    "updated_at": "2018-10-18T13:37:25Z",
    "author_association": "CONTRIBUTOR",
    "body": "Probably worthing having -- rough concept ACK -- however:\r\n\r\n* The double-lseek will be slower than fstat() on some networked or detachable filesystems.\r\n\r\n* If close-and-uncache is used on just-written-to files, this action is a no-op unless a sync (fdatasync etc.) preceded it.\r\n\r\n* Definitely worth benchmarking on multiple filesystems to see the positive or negative value of this change.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/431011401/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/462371380",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/14485#issuecomment-462371380",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14485",
    "id": 462371380,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MjM3MTM4MA==",
    "user": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-02-11T15:33:49Z",
    "updated_at": "2019-02-11T15:33:49Z",
    "author_association": "MEMBER",
    "body": "Rebased and addressed @laanwj's function rename request.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/462371380/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/475846565",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/14485#issuecomment-475846565",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14485",
    "id": 475846565,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NTg0NjU2NQ==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-23T07:11:17Z",
    "updated_at": "2021-01-04T02:48:04Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #20839 (fuzz: Avoid extraneous copy of input data, using Span<> by MarcoFalke)\n* #20464 (refactor: Treat CDataStream bytes as uint8_t by MarcoFalke)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/475846565/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/536547749",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/14485#issuecomment-536547749",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14485",
    "id": 536547749,
    "node_id": "MDEyOklzc3VlQ29tbWVudDUzNjU0Nzc0OQ==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-09-30T12:54:46Z",
    "updated_at": "2019-09-30T12:54:46Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--5fd3d806e98f4a0ca80977bb178665a0-->There hasn't been much activity lately and the patch still needs rebase, so I am closing this for now. Please let me know when you want to continue working on this, so the pull request can be re-opened.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/536547749/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/541465570",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/14485#issuecomment-541465570",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14485",
    "id": 541465570,
    "node_id": "MDEyOklzc3VlQ29tbWVudDU0MTQ2NTU3MA==",
    "user": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-10-13T22:24:23Z",
    "updated_at": "2019-10-13T22:24:23Z",
    "author_association": "MEMBER",
    "body": "Rebased",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/541465570/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/625498985",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/14485#issuecomment-625498985",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14485",
    "id": 625498985,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyNTQ5ODk4NQ==",
    "user": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-07T21:09:26Z",
    "updated_at": "2020-05-07T21:09:26Z",
    "author_association": "MEMBER",
    "body": "Rebased & comments addressed",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/625498985/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/770931891",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/14485#issuecomment-770931891",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14485",
    "id": 770931891,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3MDkzMTg5MQ==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-01T15:17:04Z",
    "updated_at": "2021-02-01T15:17:04Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--cf906140f33d8803c4a75a2196329ecb-->\n\ud83d\udc19 This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/770931891/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/770935958",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/14485#issuecomment-770935958",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14485",
    "id": 770935958,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc3MDkzNTk1OA==",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?u=5ff13e375b40ea55ecd3c108337dd6a23f68eddf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-01T15:22:27Z",
    "updated_at": "2021-02-01T15:22:27Z",
    "author_association": "CONTRIBUTOR",
    "body": "Adding to the three previous requests for benchmarks:\r\n\r\nDo we have any benchmarks showing the practical gains in swiftness? :)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/770935958/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/226248490",
    "pull_request_review_id": 166021412,
    "id": 226248490,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIyNjI0ODQ5MA==",
    "diff_hunk": "@@ -79,6 +79,15 @@ bool RenameOver(fs::path src, fs::path dest);\n bool LockDirectory(const fs::path& directory, const std::string lockfile_name, bool probe_only=false);\n bool DirIsWritable(const fs::path& directory);\n \n+//! Return the original FILE* unchanged. On POSIX systems that support it,\n+//! also advise the kernel that the file will be accessed sequentially.\n+FILE* AdviseSequential(FILE *file);\n+\n+//! Close a file and return the result of fclose(). On POSIX systems that\n+//! support it, advise the kernel to remove the file contents from the page\n+//! cache (which can help on memory-constrained systems).\n+int CloseAndDiscard(FILE *file);",
    "path": "src/util.h",
    "position": null,
    "original_position": 11,
    "commit_id": "c063994a14fd0cf242a034d4212ab8e9c7701add",
    "original_commit_id": "5ff402f58a38827276c14889d68c81754707fc88",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "\"discard\" sounds to me as if writes to the file will be discarded, too\r\nmaybe `CloseAndUncache`?",
    "created_at": "2018-10-18T10:15:23Z",
    "updated_at": "2020-05-12T15:46:58Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/14485#discussion_r226248490",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/14485",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/226248490"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/14485#discussion_r226248490"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/14485"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/226248490/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 89,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/256344052",
    "pull_request_review_id": 203145578,
    "id": 256344052,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1NjM0NDA1Mg==",
    "diff_hunk": "@@ -1118,6 +1109,49 @@ void AllocateFileRange(FILE *file, unsigned int offset, unsigned int length) {\n #endif\n }\n \n+FILE* AdviseSequential(FILE *file) {\n+#if _POSIX_C_SOURCE >= 200112L\n+    // Since this whole thing is advisory anyway, we can ignore any errors\n+    // encountered up to and including the posix_fadvise call. However, we must\n+    // rewind the file to the appropriate position if we've changed the seek\n+    // offset.\n+    if (file == nullptr)\n+        return nullptr;\n+    int fd = fileno(file);\n+    if (fd == -1)\n+        return file;\n+    off_t start = lseek(fd, 0, SEEK_CUR);\n+    if (start == -1)\n+        return file;\n+    off_t end = lseek(fd, 0, SEEK_END);\n+    if (end != -1) {\n+        posix_fadvise(fd, start, end - start, POSIX_FADV_WILLNEED);\n+        posix_fadvise(fd, start, end - start, POSIX_FADV_SEQUENTIAL);\n+    }\n+    lseek(fd, start, SEEK_SET);\n+#endif\n+    return file;\n+}\n+\n+int CloseAndUncache(FILE *file) {\n+#if _POSIX_C_SOURCE >= 200112L\n+    // Ignore any errors up to and including the posix_fadvise call since it's\n+    // advisory.\n+    if (file != nullptr) {\n+        off_t end;\n+        int fd = fileno(file);\n+        if (fd == -1)\n+            goto close;\n+        end = lseek(fd, 0, SEEK_END);\n+        if (end == -1)\n+            goto close;\n+        posix_fadvise(fd, 0, end, POSIX_FADV_DONTNEED);\n+    }\n+#endif\n+ close:",
    "path": "src/util/system.cpp",
    "position": null,
    "original_position": 72,
    "commit_id": "c063994a14fd0cf242a034d4212ab8e9c7701add",
    "original_commit_id": "f2041fe9f5911fec898d96c7b73188148886220f",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Move `close:` inside `#if \u2026 #endif`?",
    "created_at": "2019-02-13T10:57:47Z",
    "updated_at": "2020-05-12T15:46:58Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/14485#discussion_r256344052",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/14485",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/256344052"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/14485#discussion_r256344052"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/14485"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/256344052/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1144,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/334286955",
    "pull_request_review_id": 301057363,
    "id": 334286955,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNDI4Njk1NQ==",
    "diff_hunk": "@@ -1118,6 +1109,49 @@ void AllocateFileRange(FILE *file, unsigned int offset, unsigned int length) {\n #endif\n }\n \n+FILE* AdviseSequential(FILE *file) {\n+#if _POSIX_C_SOURCE >= 200112L\n+    // Since this whole thing is advisory anyway, we can ignore any errors\n+    // encountered up to and including the posix_fadvise call. However, we must\n+    // rewind the file to the appropriate position if we've changed the seek\n+    // offset.\n+    if (file == nullptr)\n+        return nullptr;\n+    int fd = fileno(file);\n+    if (fd == -1)\n+        return file;\n+    off_t start = lseek(fd, 0, SEEK_CUR);\n+    if (start == -1)\n+        return file;\n+    off_t end = lseek(fd, 0, SEEK_END);\n+    if (end != -1) {\n+        posix_fadvise(fd, start, end - start, POSIX_FADV_WILLNEED);\n+        posix_fadvise(fd, start, end - start, POSIX_FADV_SEQUENTIAL);\n+    }\n+    lseek(fd, start, SEEK_SET);\n+#endif\n+    return file;\n+}\n+\n+int CloseAndUncache(FILE *file) {\n+#if _POSIX_C_SOURCE >= 200112L\n+    // Ignore any errors up to and including the posix_fadvise call since it's\n+    // advisory.\n+    if (file != nullptr) {\n+        off_t end;\n+        int fd = fileno(file);\n+        if (fd == -1)\n+            goto close;\n+        end = lseek(fd, 0, SEEK_END);\n+        if (end == -1)\n+            goto close;\n+        posix_fadvise(fd, 0, end, POSIX_FADV_DONTNEED);\n+    }\n+#endif\n+ close:",
    "path": "src/util/system.cpp",
    "position": null,
    "original_position": 72,
    "commit_id": "c063994a14fd0cf242a034d4212ab8e9c7701add",
    "original_commit_id": "f2041fe9f5911fec898d96c7b73188148886220f",
    "user": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Replaced goto with nested ifs.",
    "created_at": "2019-10-13T17:17:15Z",
    "updated_at": "2020-05-12T15:46:58Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/14485#discussion_r334286955",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/14485",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/334286955"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/14485#discussion_r334286955"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/14485"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/334286955/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1144,
    "side": "RIGHT",
    "in_reply_to_id": 256344052
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/399295319",
    "pull_request_review_id": 382896240,
    "id": 399295319,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTI5NTMxOQ==",
    "diff_hunk": "@@ -17,16 +17,6 @@\n #endif\n \n #ifndef WIN32\n-// for posix_fallocate\n-#ifdef __linux__\n-\n-#ifdef _POSIX_C_SOURCE\n-#undef _POSIX_C_SOURCE\n-#endif\n-\n-#define _POSIX_C_SOURCE 200112L\n-\n-#endif // __linux__",
    "path": "src/util/system.cpp",
    "position": null,
    "original_position": 13,
    "commit_id": "c063994a14fd0cf242a034d4212ab8e9c7701add",
    "original_commit_id": "b2c2917889e8dfc4d5e0b14b7278e79bee39874e",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I think we shouldn't remove this. We are setting `_POSIX_C_SOURCE` in order to ask the system to provide the functions. [feature_test_macros(7)](https://linux.die.net/man/7/feature_test_macros) explains that indeed we are supposed to set it ourselves (not just observe its default value). And, of course, set it before including the system headers.\r\n\r\nFurther, we should consider OSes that will not provide the functions we need (`posix_fadvise()` in this case) even if we define `_POSIX_C_SOURCE` to `200112` (e.g. MacOS). So, a [configure-time check](https://github.com/bitcoin/bitcoin/pull/18437/files#diff-67e997bcfdac55191033d57a16d1408aR854-R867) is warranted, similarly to what https://github.com/bitcoin/bitcoin/pull/18437 does.",
    "created_at": "2020-03-27T14:15:40Z",
    "updated_at": "2020-05-12T15:46:58Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/14485#discussion_r399295319",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/14485",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/399295319"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/14485#discussion_r399295319"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/14485"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/399295319/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": 20,
    "start_side": "LEFT",
    "line": null,
    "original_line": 29,
    "side": "LEFT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/399298167",
    "pull_request_review_id": 382896240,
    "id": 399298167,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTI5ODE2Nw==",
    "diff_hunk": "@@ -1111,6 +1102,47 @@ void AllocateFileRange(FILE *file, unsigned int offset, unsigned int length) {\n #endif\n }\n \n+FILE* AdviseSequential(FILE *file) {\n+#if _POSIX_C_SOURCE >= 200112L\n+    // Since this whole thing is advisory anyway, we can ignore any errors\n+    // encountered up to and including the posix_fadvise call. However, we must\n+    // rewind the file to the appropriate position if we've changed the seek\n+    // offset.\n+    if (file == nullptr)\n+        return nullptr;\n+    int fd = fileno(file);\n+    if (fd == -1)\n+        return file;\n+    off_t start = lseek(fd, 0, SEEK_CUR);\n+    if (start == -1)\n+        return file;\n+    off_t end = lseek(fd, 0, SEEK_END);\n+    if (end != -1) {\n+        posix_fadvise(fd, start, end - start, POSIX_FADV_WILLNEED);\n+        posix_fadvise(fd, start, end - start, POSIX_FADV_SEQUENTIAL);\n+    }\n+    lseek(fd, start, SEEK_SET);",
    "path": "src/util/system.cpp",
    "position": null,
    "original_position": 52,
    "commit_id": "c063994a14fd0cf242a034d4212ab8e9c7701add",
    "original_commit_id": "b2c2917889e8dfc4d5e0b14b7278e79bee39874e",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "We can avoid seeking to the end of the file and back just to get the file size. Supplying `0` as the 3rd argument will suffice. From [posix_fadvise(2)](https://linux.die.net/man/2/posix_fadvise):\r\n\r\n> ... for len bytes (or until the end of the file if len is 0)",
    "created_at": "2020-03-27T14:19:53Z",
    "updated_at": "2020-05-12T15:46:58Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/14485#discussion_r399298167",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/14485",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/399298167"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/14485#discussion_r399298167"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/14485"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/399298167/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": 1116,
    "start_side": "RIGHT",
    "line": null,
    "original_line": 1124,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/399301118",
    "pull_request_review_id": 382896240,
    "id": 399301118,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTMwMTExOA==",
    "diff_hunk": "@@ -1111,6 +1102,47 @@ void AllocateFileRange(FILE *file, unsigned int offset, unsigned int length) {\n #endif\n }\n \n+FILE* AdviseSequential(FILE *file) {\n+#if _POSIX_C_SOURCE >= 200112L\n+    // Since this whole thing is advisory anyway, we can ignore any errors\n+    // encountered up to and including the posix_fadvise call. However, we must\n+    // rewind the file to the appropriate position if we've changed the seek\n+    // offset.\n+    if (file == nullptr)\n+        return nullptr;\n+    int fd = fileno(file);\n+    if (fd == -1)\n+        return file;\n+    off_t start = lseek(fd, 0, SEEK_CUR);\n+    if (start == -1)\n+        return file;\n+    off_t end = lseek(fd, 0, SEEK_END);\n+    if (end != -1) {\n+        posix_fadvise(fd, start, end - start, POSIX_FADV_WILLNEED);\n+        posix_fadvise(fd, start, end - start, POSIX_FADV_SEQUENTIAL);\n+    }\n+    lseek(fd, start, SEEK_SET);\n+#endif\n+    return file;\n+}\n+\n+int CloseAndUncache(FILE *file) {\n+#if _POSIX_C_SOURCE >= 200112L\n+    // Ignore any errors up to and including the posix_fadvise call since it's\n+    // advisory.\n+    if (file != nullptr) {\n+        const int fd = fileno(file);\n+        if (fd != -1) {\n+            const off_t end = lseek(fd, 0, SEEK_END);",
    "path": "src/util/system.cpp",
    "position": 44,
    "original_position": 64,
    "commit_id": "c063994a14fd0cf242a034d4212ab8e9c7701add",
    "original_commit_id": "b2c2917889e8dfc4d5e0b14b7278e79bee39874e",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "nit: I like the `const`, but it is missing from variables in `AdviseSequential()`, maybe add it there too?",
    "created_at": "2020-03-27T14:24:05Z",
    "updated_at": "2020-05-12T15:46:58Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/14485#discussion_r399301118",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/14485",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/399301118"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/14485#discussion_r399301118"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/14485"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/399301118/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1074,
    "original_line": 1074,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/399308963",
    "pull_request_review_id": 382896240,
    "id": 399308963,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTMwODk2Mw==",
    "diff_hunk": "@@ -1111,6 +1102,47 @@ void AllocateFileRange(FILE *file, unsigned int offset, unsigned int length) {\n #endif\n }\n \n+FILE* AdviseSequential(FILE *file) {\n+#if _POSIX_C_SOURCE >= 200112L\n+    // Since this whole thing is advisory anyway, we can ignore any errors\n+    // encountered up to and including the posix_fadvise call. However, we must\n+    // rewind the file to the appropriate position if we've changed the seek\n+    // offset.\n+    if (file == nullptr)\n+        return nullptr;\n+    int fd = fileno(file);\n+    if (fd == -1)\n+        return file;\n+    off_t start = lseek(fd, 0, SEEK_CUR);\n+    if (start == -1)\n+        return file;\n+    off_t end = lseek(fd, 0, SEEK_END);\n+    if (end != -1) {\n+        posix_fadvise(fd, start, end - start, POSIX_FADV_WILLNEED);\n+        posix_fadvise(fd, start, end - start, POSIX_FADV_SEQUENTIAL);\n+    }\n+    lseek(fd, start, SEEK_SET);\n+#endif\n+    return file;\n+}\n+\n+int CloseAndUncache(FILE *file) {\n+#if _POSIX_C_SOURCE >= 200112L\n+    // Ignore any errors up to and including the posix_fadvise call since it's\n+    // advisory.\n+    if (file != nullptr) {\n+        const int fd = fileno(file);\n+        if (fd != -1) {\n+            const off_t end = lseek(fd, 0, SEEK_END);\n+            if (end != (off_t)-1) {",
    "path": "src/util/system.cpp",
    "position": 45,
    "original_position": 65,
    "commit_id": "c063994a14fd0cf242a034d4212ab8e9c7701add",
    "original_commit_id": "b2c2917889e8dfc4d5e0b14b7278e79bee39874e",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url": "https://api.github.com/users/vasild/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "The typecast is not needed as `off_t` is \"[extended signed integral](https://pubs.opengroup.org/onlinepubs/7908799/xsh/systypes.h.html)\".",
    "created_at": "2020-03-27T14:34:35Z",
    "updated_at": "2020-05-12T15:46:58Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/14485#discussion_r399308963",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/14485",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/399308963"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/14485#discussion_r399308963"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/14485"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/399308963/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1075,
    "original_line": 1075,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/421793753",
    "pull_request_review_id": 407836307,
    "id": 421793753,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTc5Mzc1Mw==",
    "diff_hunk": "@@ -1111,6 +1102,47 @@ void AllocateFileRange(FILE *file, unsigned int offset, unsigned int length) {\n #endif\n }\n \n+FILE* AdviseSequential(FILE *file) {\n+#if _POSIX_C_SOURCE >= 200112L\n+    // Since this whole thing is advisory anyway, we can ignore any errors\n+    // encountered up to and including the posix_fadvise call. However, we must\n+    // rewind the file to the appropriate position if we've changed the seek\n+    // offset.\n+    if (file == nullptr)\n+        return nullptr;\n+    int fd = fileno(file);\n+    if (fd == -1)\n+        return file;\n+    off_t start = lseek(fd, 0, SEEK_CUR);\n+    if (start == -1)\n+        return file;\n+    off_t end = lseek(fd, 0, SEEK_END);\n+    if (end != -1) {\n+        posix_fadvise(fd, start, end - start, POSIX_FADV_WILLNEED);\n+        posix_fadvise(fd, start, end - start, POSIX_FADV_SEQUENTIAL);\n+    }\n+    lseek(fd, start, SEEK_SET);\n+#endif\n+    return file;\n+}\n+\n+int CloseAndUncache(FILE *file) {\n+#if _POSIX_C_SOURCE >= 200112L\n+    // Ignore any errors up to and including the posix_fadvise call since it's\n+    // advisory.\n+    if (file != nullptr) {\n+        const int fd = fileno(file);\n+        if (fd != -1) {\n+            const off_t end = lseek(fd, 0, SEEK_END);\n+            if (end != (off_t)-1) {",
    "path": "src/util/system.cpp",
    "position": 45,
    "original_position": 65,
    "commit_id": "c063994a14fd0cf242a034d4212ab8e9c7701add",
    "original_commit_id": "b2c2917889e8dfc4d5e0b14b7278e79bee39874e",
    "user": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Prefer to stick to the manpage.",
    "created_at": "2020-05-07T21:05:22Z",
    "updated_at": "2020-05-12T15:46:58Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/14485#discussion_r421793753",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/14485",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/421793753"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/14485#discussion_r421793753"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/14485"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/421793753/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1075,
    "original_line": 1075,
    "side": "RIGHT",
    "in_reply_to_id": 399308963
  }
]