jonasschnelli,2016-03-10T08:05:13Z,I think this can be useful and should not hurt if its placed in `devtools`.\nThe problem with devtools is a missing documentation/overview.\nTherefore I would recommend to add a short documentation including an use case & example in `devtools/README.me` (or similar).\n,https://github.com/bitcoin/bitcoin/pull/7665#issuecomment-194723394,194723394,
MarcoFalke,2016-03-10T09:11:14Z,"I guess this is useful. (I mostly fetch the gitian binaries from somewhere because I don't archive my own compiles.)\nThough, I wonder if this script would be still useful after #7466.\n",https://github.com/bitcoin/bitcoin/pull/7665#issuecomment-194746280,194746280,
jtimon,2016-03-10T22:09:20Z,"@jonasschnelli oops, I missed the README, I added a longer explanation there (longer than the one in the internal code documentation).\n\n@MarcoFalke re #7466: the way I see it, the more useful feature of this script is renaming the files with commit ids and something else rather than just moving the binaries (which doesn't require much effort anyway).\nProbably shorter versions of the commit ids ",https://github.com/bitcoin/bitcoin/pull/7665#issuecomment-195073782,195073782,
jtimon,2016-03-10T22:44:27Z,"Updated again renaming the script from tag-binaries to archive-binaries as suggested by @MarcoFalke and only using the first 7 chars of the commit id (github seems to shorten commit ids to first 7 too, no other reason).\n\nEDIT: here's an example after playing with it a little bit:\n\n```\n    bin/alpha-cli-alpha-574817b\n    bin/alpha-tx-alpha-574817b\n    bin/alphad-alpha-574817b\n    bin/bitcoi",https://github.com/bitcoin/bitcoin/pull/7665#issuecomment-195084119,195084119,
laanwj,2016-03-11T08:33:32Z,"Wouldn't using `make install` to a commit-dependent prefix be more consistent to use here?\n\nI mean, that is already the build system's own way to copy the executables, and potentially, other files that have to be installed (e.g. the consensus library). It also means the script doesn't need to be updated when new executables are added.\n",https://github.com/bitcoin/bitcoin/pull/7665#issuecomment-195256718,195256718,
laanwj,2016-03-11T08:34:37Z,Ping @theuni ^^\n,https://github.com/bitcoin/bitcoin/pull/7665#issuecomment-195257118,195257118,
jtimon,2016-03-11T11:42:34Z,"The make install idea makes sense. Maybe the whole script could be replaced with a ""make tag"" or ""make archive"" option?\nAnyway, I'll wait for @theuni to chime in.\n",https://github.com/bitcoin/bitcoin/pull/7665#issuecomment-195334232,195334232,
theuni,2016-03-11T19:23:45Z,"Sure, something like 'make stash' make sense, since it can be smart about which binaries to save.\nThis works for me (add to Makefile.am). \n\n``` makefile\nstashbin:\n        $(MAKE) $(AM_MAKEFLAGS) -o install-libLTLIBRARIES install-binPROGRAMS bindir=$(abs_builddir)/bin transform=""s&\$$\$$&-`$(GIT) log -n 1 --format=""%h""`&""\n```\n\nMight make sense to move it to bin/$hash/files though?\n",https://github.com/bitcoin/bitcoin/pull/7665#issuecomment-195508185,195508185,
MarcoFalke,2016-03-11T19:28:08Z,"> Might make sense to move it to bin/$hash/files though?\n\nWhat about `bin/$version/$hash/`?\n\nAnyway, I like the `make stash` way of doing this.\n",https://github.com/bitcoin/bitcoin/pull/7665#issuecomment-195511070,195511070,
jonasschnelli,2016-03-11T19:35:20Z,+1 for `make stash`.\n\nNow someone should combine this with a modified version of `github-merge.py` so we can build and stash by running something like `buildstash.py <PR number>`.\n,https://github.com/bitcoin/bitcoin/pull/7665#issuecomment-195514660,195514660,
jtimon,2016-03-11T21:22:29Z,"Many good ideas. I'll leave this opened until there's a make-based replacement. I will be happy to test that too.\nTo be clear, I just want something that it's git ignored and I kno how to https://github.com/bitcoin/bitcoin/pull/7665/files#diff-cac857715e8776162045b7b41f9ccc87R27 . If it only works for %sd, %s-tx, etc when s% is 'bitcoin', then I will still need something external, but it would st",https://github.com/bitcoin/bitcoin/pull/7665#issuecomment-195560087,195560087,
laanwj,2016-03-16T08:40:37Z,"> Any volunteers to take over this?\n\nThis makes me wonder what the bar should be here for inclusion - I have tons of personal development scripts, but what should be the bar for including them in `contrib/devtools`?\n\nI house my dev scripts in their own repository, sometimes post them as gist, and only if I think it's helpful to at least one other dev regularly, or are critical to the release p",https://github.com/bitcoin/bitcoin/pull/7665#issuecomment-197213567,197213567,
jtimon,2016-03-16T09:58:21Z,"That's why I explain I'm not sure it will be useful for the repo.\nAnyway, when I'm asking about taking over this, is in the form of the makefile option people were talking about, not another python script.\n",https://github.com/bitcoin/bitcoin/pull/7665#issuecomment-197236721,197236721,
jtimon,2016-03-16T20:15:59Z,"To me clear, the biggest value for me in getting this merged is adding bin/ to .gitignore, but I can just use an external directory.\nAt the same time, if it has up to 3 names, it seems like tagging/archiving/stashing the binaries for several random branches may actually not be such a bad idea idea after all.\n\nIt seems like doing this in the makefile would be a better option (ie make stash), but",https://github.com/bitcoin/bitcoin/pull/7665#issuecomment-197527221,197527221,
laanwj,2016-03-17T11:39:53Z,"> To me clear, the biggest value for me in getting this merged is adding bin/ to .gitignore, but I can just use an external directory.\n\nWhy not use a local gitignore?\nThe ideal git feature to use here would be a repository-local gitignore: See https://help.github.com/articles/ignoring-files/#explicit-repository-excludes\n",https://github.com/bitcoin/bitcoin/pull/7665#issuecomment-197840116,197840116,
jtimon,2016-03-17T12:37:24Z,"Yeah, thanks. \nAnyway, if anyone goes with '''make tag"" or some other similar thing, I'm happy to test that.\n",https://github.com/bitcoin/bitcoin/pull/7665#issuecomment-197858733,197858733,
MarcoFalke,2016-03-10T09:07:52Z,Bikeshed: `archive-binaries.py`?\n,https://github.com/bitcoin/bitcoin/pull/7665#discussion_r55650721,55650721,contrib/devtools/tag-binaries.py
jtimon,2016-03-10T22:13:56Z,"As said the tagging (with [<petname>-]<commit_id>) seems the important part to me, but I wouldn't oppose to archive if more people prefer it.\n",https://github.com/bitcoin/bitcoin/pull/7665#discussion_r55759007,55759007,contrib/devtools/tag-binaries.py
MarcoFalke,2016-03-12T15:13:39Z,Isn't `make clean` enough? (#7504)\n,https://github.com/bitcoin/bitcoin/pull/7665#discussion_r55922509,55922509,contrib/devtools/README.md
jtimon,2016-03-12T15:19:42Z,It seems sometimes it isn't. But it's not clear to me when (most times clean is fine). Maybe @laanwj or @theuni can clarify more.\n,https://github.com/bitcoin/bitcoin/pull/7665#discussion_r55922597,55922597,contrib/devtools/README.md
MarcoFalke,2016-03-13T16:05:46Z,"It's only cleaning up its own mess. If you create junk files, `make clean` won't delete them afaiu.\n",https://github.com/bitcoin/bitcoin/pull/7665#discussion_r55939192,55939192,contrib/devtools/README.md
laanwj,2016-03-14T10:09:45Z,"try `make distclean`, this _should_ leave the tree clean as it was in git. If not, that's a bug.Of course it will only clean up files it created itself.\n",https://github.com/bitcoin/bitcoin/pull/7665#discussion_r55978159,55978159,contrib/devtools/README.md
jtimon,2016-03-14T10:26:17Z,Does this include files that it created itself in older versions?\n,https://github.com/bitcoin/bitcoin/pull/7665#discussion_r55980041,55980041,contrib/devtools/README.md
laanwj,2016-03-14T10:50:28Z,"No, it can't know about those anymore. You should run `make distclean` with the same version as you did `configure`.\n",https://github.com/bitcoin/bitcoin/pull/7665#discussion_r55982576,55982576,contrib/devtools/README.md
jtimon,2016-03-14T22:15:59Z,"I wonder if we could start maintaining a file for those to later git clean -e cat src/.git_clean_exclude_files. It wouldn't need to be complete for older versions, just start now and if people find time to find more stuff to include for the older versions, you can add that too.\nOh, sorry, actually what we want is to explicitly include files for cleaning, not exclude them. Is there an option for t",https://github.com/bitcoin/bitcoin/pull/7665#discussion_r56085841,56085841,contrib/devtools/README.md
laanwj,2016-03-15T08:39:03Z,"> I can guarantee I didn't discovered -fdx by myself.\n\nHah! Using `git clean -fdx` is kind of black magic, you should first sign a contract in blood before you're allowed to use it. Don't ever recommend anyoen to use it without strong warning. Some may store ancillary development scripts, even wallets in the git tree.\nPersonally I have it aliased to `git napalm`.\n\n> Oh, sorry, actually what w",https://github.com/bitcoin/bitcoin/pull/7665#discussion_r56129583,56129583,contrib/devtools/README.md
