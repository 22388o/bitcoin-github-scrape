practicalswift,2018-04-22T09:36:27Z,@laanwj Do you think the `LOCALE_DEPENDENT_FUNCTIONS` list is correct? :-),https://github.com/bitcoin/bitcoin/pull/13041#issuecomment-383368192,383368192,
laanwj,2018-04-23T13:55:38Z,"Concept ACK. I think this is a good idea.\n\n> @laanwj Do you think the LOCALE_DEPENDENT_FUNCTIONS list is correct? :-)\n\nIt's a good start.\nPlease add `strftime` too, that's the one that caused recent discussion in #12973.",https://github.com/bitcoin/bitcoin/pull/13041#issuecomment-383583971,383583971,
practicalswift,2018-04-23T14:04:19Z,@laanwj `strftime` and `strptime` added. Please re-review :-),https://github.com/bitcoin/bitcoin/pull/13041#issuecomment-383586827,383586827,
practicalswift,2018-04-23T15:06:12Z,@laanwj Updated version with the known violations list split over multiple lines. Please re-review :-),https://github.com/bitcoin/bitcoin/pull/13041#issuecomment-383608887,383608887,
practicalswift,2018-04-23T15:24:07Z,"Candidates for inclusion in the list of locale dependent functions:\n\n```\n$ nm /usr/lib/debug/lib/x86_64-linux-gnu/libc-2.23.so | grep -E '_l$' | \\n      cut -f3 -d' ' | grep -E '^[a-z]' | sort | sed 's/_l$//g'\nisalnum\nisalpha\nisblank\niscntrl\nisdigit\nisgraph\nislower\nisprint\nispunct\nisspace\nisupper\niswalnum\niswalpha\niswblank\niswcntrl\niswctype\niswdigit\niswg",https://github.com/bitcoin/bitcoin/pull/13041#issuecomment-383615107,383615107,
practicalswift,2018-04-23T15:31:12Z,The use of `strtoul(...)` and `strtoull(...)` might be problematic too?,https://github.com/bitcoin/bitcoin/pull/13041#issuecomment-383617773,383617773,
practicalswift,2018-04-23T15:40:23Z,"Updated: Added more functions to `LOCALE_DEPENDENT_FUNCTIONS`. Added two known violations for `strtoul(...)` and `strtoull(...)` in `utilstrencodings.cpp`.\n\nPlease re-review :-)",https://github.com/bitcoin/bitcoin/pull/13041#issuecomment-383621123,383621123,
laanwj,2018-04-24T06:13:49Z,utACK 29b73b509f1aa537a835f9e75878622c3a18335f,https://github.com/bitcoin/bitcoin/pull/13041#issuecomment-383815493,383815493,
practicalswift,2018-04-24T09:28:49Z,"@theuni @sipa Your language expertise is needed :-)\n\nIf you have time to review this PR – does  `LOCALE_DEPENDENT_FUNCTIONS` look reasonable? :-)",https://github.com/bitcoin/bitcoin/pull/13041#issuecomment-383866374,383866374,
practicalswift,2018-04-24T12:26:34Z,"Updated:\n* Added more functions to `LOCALE_DEPENDENT_FUNCTIONS`.\n* Added known `atoi(…)` violations for `bitcoin-tx.cpp`, `init.cpp`, `qt/rpcconsole.cpp`, `torcontrol.cpp`, `util.cpp`, `utilstrencodings.cpp` and `utilstrencodings.h`.\n* Added known `*printf(…)` violations for `dbwrapper.cpp`, `test/dbwrapper_tests.cpp` and `util.cpp`.\n* Now invoking `git grep` only once in order to minimize",https://github.com/bitcoin/bitcoin/pull/13041#issuecomment-383911534,383911534,
laanwj,2018-04-25T12:16:23Z,"I think `printf` and `fprintf(stderr, ...` are fine. They are only used to print error messages, it's not important if they are formatted slightly different according to the locale.\n(not so much for `sprintf` `vsnprintf` etc which should be replaced with use of tinyformat, these end up in strings and might end up on the RPC interface or in files meant to be portable)",https://github.com/bitcoin/bitcoin/pull/13041#issuecomment-384265664,384265664,
practicalswift,2018-04-25T12:23:40Z,"@laanwj You saw that `fprintf(stderr, …` is explicitly filtered out via `grep -vE 'fprintf\(.*(stdout|stderr)'` in the script? :-)\n\nShould I keep `fprintf` (with the exclusion above) and remove `printf`? Makes sense?",https://github.com/bitcoin/bitcoin/pull/13041#issuecomment-384267525,384267525,
laanwj,2018-04-25T12:54:08Z,"> @laanwj You saw that fprintf(stderr, … is explicitly filtered out via grep -vE 'fprintf\(.*(stdout|stderr)' in the script? :-)\n\nOh that's good! No, hadn't noticed that yet.\n\n> Should I keep fprintf (with the exclusion above) and remove printf? Makes sense?\n\nYes I think so!",https://github.com/bitcoin/bitcoin/pull/13041#issuecomment-384275959,384275959,
practicalswift,2018-04-25T13:01:52Z,@laanwj Updated version with `printf` removed! Please re-review :-),https://github.com/bitcoin/bitcoin/pull/13041#issuecomment-384278135,384278135,
laanwj,2018-04-26T10:57:44Z,"Thinking of it, it would make sense to add this list to the developer notes as well (next to the mention of the locale risks) , so it doesn't come out of the blue.",https://github.com/bitcoin/bitcoin/pull/13041#issuecomment-384598316,384598316,
practicalswift,2018-04-26T19:16:20Z,@laanwj Good point! Added a reference to the script and included the list in the developer notes. Looks good? :-),https://github.com/bitcoin/bitcoin/pull/13041#issuecomment-384759121,384759121,
practicalswift,2018-05-22T05:56:00Z,"Updated: Added some locale dependent Boost functions and the corresponding `KNOWN_VIOLATIONS` entries.\n\nAdded known violations:\n* `is_digit` is used in `src/core_read.cpp`\n* `to_lower` is used in `src/netbase.cpp`\n* `to_upper` is used in `src/rpc/server.cpp`\n* `trim` is used in `src/core_read.cpp`\n* `trim` is used in `src/httprpc.cpp`\n* `trim_right` is used in `src/bitcoin-tx.cpp`",https://github.com/bitcoin/bitcoin/pull/13041#issuecomment-390871794,390871794,
practicalswift,2018-05-24T11:59:57Z,@Empact Would you mind reviewing this PR? :-),https://github.com/bitcoin/bitcoin/pull/13041#issuecomment-391688316,391688316,
laanwj,2018-06-05T18:14:58Z,utACK f947ef02f9c8eee5957bb02e12cee4edd636c9fa,https://github.com/bitcoin/bitcoin/pull/13041#issuecomment-394808844,394808844,
cnavigato,2018-06-05T18:33:46Z,"On Jun 5, 2018 11:15 AM, ""Wladimir J. van der Laan"" <\nnotifications@github.com> wrote:\n\nutACK f947ef0\n<https://github.com/bitcoin/bitcoin/commit/f947ef02f9c8eee5957bb02e12cee4edd636c9fa>\n\n—\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHub\n<https://github.com/bitcoin/bitcoin/pull/13041#issuecomment-394808844>, or mute\nthe th",https://github.com/bitcoin/bitcoin/pull/13041#issuecomment-394814816,394814816,
ken2812221,2018-06-05T18:35:56Z,"Need to move `contrib/devtools/lint-locale-dependence.sh` to `test/lint/lint-locale-dependence.sh`\n",https://github.com/bitcoin/bitcoin/pull/13041#issuecomment-394815518,394815518,
practicalswift,2018-06-06T06:10:27Z,"@ken2812221 Thanks! Moved!\n\n@laanwj @cnavigato Please re-review :-)\n",https://github.com/bitcoin/bitcoin/pull/13041#issuecomment-394951566,394951566,
laanwj,2018-04-23T14:10:17Z,"That's a shocking number of known violations.\nI didn't know e.g. `strtol` is also locale dependent, otherwise I wouldn't have used it in torcontrol for example.\n",https://github.com/bitcoin/bitcoin/pull/13041#discussion_r183408506,183408506,contrib/devtools/lint-locale-dependence.sh
laanwj,2018-04-23T14:11:47Z,"Is it possible to split this list over multiple lines, so that it's possible to remove an exception by removing a line?",https://github.com/bitcoin/bitcoin/pull/13041#discussion_r183409038,183409038,contrib/devtools/lint-locale-dependence.sh
Empact,2018-05-25T00:16:39Z,Would be helpful to add an explanatory comment as to why each of these are disabled. E.g. I don't see a printf call outside of crypto/secp256k1/tinyformat.h so it's not clear to me why this is disabled.,https://github.com/bitcoin/bitcoin/pull/13041#discussion_r190763887,190763887,contrib/devtools/lint-locale-dependence.sh
Empact,2018-05-25T00:47:48Z,Is it possible to simplify this by processing them at once? I'm skeptical grouping by function will be helpful.,https://github.com/bitcoin/bitcoin/pull/13041#discussion_r190767263,190767263,contrib/devtools/lint-locale-dependence.sh
practicalswift,2018-05-25T05:58:47Z,"@Empact For performance or usability reasons?\n\nIf you mean for performance reasons, then please note that the costly operation `git grep` is run only once.\n\nFrom a usability perspective I think it makes sense to group the output per function – try running the script with an empty `KNOWN_VIOLATIONS` and you'll see what I mean :-)   But I'm open to alternative outputs, so please provide a di",https://github.com/bitcoin/bitcoin/pull/13041#discussion_r190797266,190797266,contrib/devtools/lint-locale-dependence.sh
Empact,2018-05-25T09:05:26Z,"Speaking from a maintainability perspective - seems in the general case KNOWN_VIOLATIONS will be populated so the list will be relatively short and only introduced by they who open the PR, in which case the grouping isn't very beneficial IMO. If not much usability benefit is gained, then if the code can be simplified by removing it I think it's worthwhile to do so.",https://github.com/bitcoin/bitcoin/pull/13041#discussion_r190833725,190833725,contrib/devtools/lint-locale-dependence.sh
practicalswift,2018-05-25T17:50:23Z,@Empact Do you have any specific output formatting in mind? Please give an example on how it would look :-),https://github.com/bitcoin/bitcoin/pull/13041#discussion_r190966350,190966350,contrib/devtools/lint-locale-dependence.sh
