[
  {
    "sha": "482cb6569058423ca952076459f1539a88d70074",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo0ODJjYjY1NjkwNTg0MjNjYTk1MjA3NjQ1OWYxNTM5YTg4ZDcwMDc0",
    "commit": {
      "author": {
        "name": "Doug Huff",
        "email": "mith@jrbobdobbs.org",
        "date": "2011-06-02T19:46:41Z"
      },
      "committer": {
        "name": "Doug Huff",
        "email": "mith@jrbobdobbs.org",
        "date": "2011-06-02T19:46:41Z"
      },
      "message": "Fix rfc1918 and rfc3927 compliance for ignoring non-internet-routable hosts.",
      "tree": {
        "sha": "51ea99402d8a958551c3ac7cbcb8726a40466e61",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/51ea99402d8a958551c3ac7cbcb8726a40466e61"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/482cb6569058423ca952076459f1539a88d70074",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/482cb6569058423ca952076459f1539a88d70074",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/482cb6569058423ca952076459f1539a88d70074",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/482cb6569058423ca952076459f1539a88d70074/comments",
    "author": {
      "login": "jrmithdobbs",
      "id": 48147,
      "node_id": "MDQ6VXNlcjQ4MTQ3",
      "avatar_url": "https://avatars.githubusercontent.com/u/48147?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jrmithdobbs",
      "html_url": "https://github.com/jrmithdobbs",
      "followers_url": "https://api.github.com/users/jrmithdobbs/followers",
      "following_url": "https://api.github.com/users/jrmithdobbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jrmithdobbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jrmithdobbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jrmithdobbs/subscriptions",
      "organizations_url": "https://api.github.com/users/jrmithdobbs/orgs",
      "repos_url": "https://api.github.com/users/jrmithdobbs/repos",
      "events_url": "https://api.github.com/users/jrmithdobbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jrmithdobbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jrmithdobbs",
      "id": 48147,
      "node_id": "MDQ6VXNlcjQ4MTQ3",
      "avatar_url": "https://avatars.githubusercontent.com/u/48147?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jrmithdobbs",
      "html_url": "https://github.com/jrmithdobbs",
      "followers_url": "https://api.github.com/users/jrmithdobbs/followers",
      "following_url": "https://api.github.com/users/jrmithdobbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/jrmithdobbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jrmithdobbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jrmithdobbs/subscriptions",
      "organizations_url": "https://api.github.com/users/jrmithdobbs/orgs",
      "repos_url": "https://api.github.com/users/jrmithdobbs/repos",
      "events_url": "https://api.github.com/users/jrmithdobbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jrmithdobbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "e104c7937455bf2c9b535ec14ea710a97b66750b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e104c7937455bf2c9b535ec14ea710a97b66750b",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/e104c7937455bf2c9b535ec14ea710a97b66750b"
      }
    ],
    "stats": {
      "total": 27,
      "additions": 21,
      "deletions": 6
    },
    "files": [
      {
        "sha": "39360a334c64a60bed5d0a151f1f5131c95361be",
        "filename": "src/net.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 2,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/482cb6569058423ca952076459f1539a88d70074/src/net.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/482cb6569058423ca952076459f1539a88d70074/src/net.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/net.cpp?ref=482cb6569058423ca952076459f1539a88d70074",
        "patch": "@@ -88,8 +88,7 @@ bool ConnectSocket(const CAddress& addrConnect, SOCKET& hSocketRet)\n     setsockopt(hSocket, SOL_SOCKET, SO_NOSIGPIPE, (void*)&set, sizeof(int));\n #endif\n \n-    bool fRoutable = !(addrConnect.GetByte(3) == 10 || (addrConnect.GetByte(3) == 192 && addrConnect.GetByte(2) == 168));\n-    bool fProxy = (fUseProxy && fRoutable);\n+    bool fProxy = (fUseProxy && addrConnect.IsRoutable());\n     struct sockaddr_in sockaddr = (fProxy ? addrProxy.GetSockAddr() : addrConnect.GetSockAddr());\n \n     if (connect(hSocket, (struct sockaddr*)&sockaddr, sizeof(sockaddr)) == SOCKET_ERROR)"
      },
      {
        "sha": "d1ded872322400a2c830ccdc6542f617512cd42c",
        "filename": "src/net.h",
        "status": "modified",
        "additions": 20,
        "deletions": 4,
        "changes": 24,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/482cb6569058423ca952076459f1539a88d70074/src/net.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/482cb6569058423ca952076459f1539a88d70074/src/net.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/net.h?ref=482cb6569058423ca952076459f1539a88d70074",
        "patch": "@@ -283,13 +283,29 @@ class CAddress\n         return (memcmp(pchReserved, pchIPv4, sizeof(pchIPv4)) == 0);\n     }\n \n+    bool IsRFC1918() const\n+    {\n+      return IsIPv4() && (GetByte(3) == 10 ||\n+        (GetByte(3) == 192 && GetByte(2) == 168) ||\n+        (GetByte(3) == 172 &&\n+          (GetByte(2) >= 16 && GetByte(2) <= 31)));\n+    }\n+\n+    bool IsRFC3927() const\n+    {\n+      return IsIPv4() && (GetByte(3) == 169 && GetByte(2) == 254);\n+    }\n+\n+    bool IsLocal() const\n+    {\n+      return IsIPv4() && (GetByte(3) == 127 ||\n+          GetByte(3) == 0);\n+    }\n+\n     bool IsRoutable() const\n     {\n         return IsValid() &&\n-            !(GetByte(3) == 10 ||\n-              (GetByte(3) == 192 && GetByte(2) == 168) ||\n-              GetByte(3) == 127 ||\n-              GetByte(3) == 0);\n+            !(IsRFC1918() || IsRFC3927() || IsLocal());\n     }\n \n     bool IsValid() const"
      }
    ]
  }
]