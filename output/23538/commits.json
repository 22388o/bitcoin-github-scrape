[
  {
    "sha": "fa186eb7f45a9d420503f96ff3a5f753afb75dec",
    "node_id": "C_kwDOABII59oAKGZhMTg2ZWI3ZjQ1YTlkNDIwNTAzZjk2ZmYzYTVmNzUzYWZiNzVkZWM",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-11-17T19:37:16Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-11-18T17:13:21Z"
      },
      "message": "Remove strtol in torcontrol",
      "tree": {
        "sha": "133ac5125895df40b7c6a3f8d7246f9df0ba54e0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/133ac5125895df40b7c6a3f8d7246f9df0ba54e0"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa186eb7f45a9d420503f96ff3a5f753afb75dec",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUhDuAwAq2fUc+7SdCGuUpafmso/9m2tnEldN5EXNDxtot8CGVo7zUeQ3TpWmHO9\nUmCSy3RLcVT/aTFMe7pvINzOy3ymydxrP4P1/V97Pe3lLoJt5YM2M0OlYVI76ENU\n5l6as+bv5zoHovKuINzY3T2eX6oFgB+rMMnlJNOKQ1gbLw3c1wMUzumz98YeVP+l\nxGMmkzUpJto+HkVqRu3FZJmV7lMiXscDC9mGHGjCHHH65cnX+R4vXTr0yQ88Ddif\n8/GyedHj9BPf8ZrBNuxFc+45tbsPMDcep9L4R0B5YvfZkzTy6gRLT0bNHj3fB63r\nzlqTDy0KLj3fT2I+fqerkaADZyolVJaxzmctrbFwnWM+xs34lynJlFDWp0wZtVw+\np5RB3A47wRmoqbsA92TqLJ1oE0WxGb20IZKgPEPnIlnHm1SCyB1wgPtVwFb7c91C\n/Ss3EOHhV4vaQBtbU8KK/fcr2cwk52+fdRw8DYXjZqBSLVZbfRcU7/NVBOVjWDmG\nji6vt3FI\n=PpO2\n-----END PGP SIGNATURE-----",
        "payload": "tree 133ac5125895df40b7c6a3f8d7246f9df0ba54e0\nparent fe03f7a37fd0ef05149161f6b95a25493e1fe38f\nauthor MarcoFalke <falke.marco@gmail.com> 1637177836 +0100\ncommitter MarcoFalke <falke.marco@gmail.com> 1637255601 +0100\n\nRemove strtol in torcontrol\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa186eb7f45a9d420503f96ff3a5f753afb75dec",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fa186eb7f45a9d420503f96ff3a5f753afb75dec",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa186eb7f45a9d420503f96ff3a5f753afb75dec/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "fe03f7a37fd0ef05149161f6b95a25493e1fe38f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fe03f7a37fd0ef05149161f6b95a25493e1fe38f",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/fe03f7a37fd0ef05149161f6b95a25493e1fe38f"
      }
    ],
    "stats": {
      "total": 21,
      "additions": 11,
      "deletions": 10
    },
    "files": [
      {
        "sha": "776981b7f7fc9319385013d2ffb8464fc9fcc0b3",
        "filename": "src/torcontrol.cpp",
        "status": "modified",
        "additions": 11,
        "deletions": 7,
        "changes": 18,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa186eb7f45a9d420503f96ff3a5f753afb75dec/src/torcontrol.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa186eb7f45a9d420503f96ff3a5f753afb75dec/src/torcontrol.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/torcontrol.cpp?ref=fa186eb7f45a9d420503f96ff3a5f753afb75dec",
        "patch": "@@ -22,19 +22,17 @@\n #include <deque>\n #include <functional>\n #include <set>\n-#include <stdlib.h>\n #include <vector>\n \n-#include <boost/signals2/signal.hpp>\n-#include <boost/algorithm/string/split.hpp>\n #include <boost/algorithm/string/classification.hpp>\n #include <boost/algorithm/string/replace.hpp>\n+#include <boost/algorithm/string/split.hpp>\n \n-#include <event2/bufferevent.h>\n #include <event2/buffer.h>\n-#include <event2/util.h>\n+#include <event2/bufferevent.h>\n #include <event2/event.h>\n #include <event2/thread.h>\n+#include <event2/util.h>\n \n /** Default control port */\n const std::string DEFAULT_TOR_CONTROL = \"127.0.0.1:9051\";\n@@ -277,9 +275,15 @@ std::map<std::string,std::string> ParseTorReplyMapping(const std::string &s)\n                         if (j == 3 && value[i] > '3') {\n                             j--;\n                         }\n-                        escaped_value.push_back(strtol(value.substr(i, j).c_str(), nullptr, 8));\n+                        const auto end{i + j};\n+                        uint8_t val{0};\n+                        while (i < end) {\n+                            val *= 8;\n+                            val += value[i++] - '0';\n+                        }\n+                        escaped_value.push_back(char(val));\n                         // Account for automatic incrementing at loop end\n-                        i += j - 1;\n+                        --i;\n                     } else {\n                         escaped_value.push_back(value[i]);\n                     }"
      },
      {
        "sha": "661bc35175acdeaf87a56161dd2971b212a4c2e1",
        "filename": "test/lint/lint-locale-dependence.sh",
        "status": "modified",
        "additions": 0,
        "deletions": 3,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa186eb7f45a9d420503f96ff3a5f753afb75dec/test/lint/lint-locale-dependence.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa186eb7f45a9d420503f96ff3a5f753afb75dec/test/lint/lint-locale-dependence.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/lint/lint-locale-dependence.sh?ref=fa186eb7f45a9d420503f96ff3a5f753afb75dec",
        "patch": "@@ -37,15 +37,12 @@ export LC_ALL=C\n # See https://doc.qt.io/qt-5/qcoreapplication.html#locale-settings and\n # https://stackoverflow.com/a/34878283 for more details.\n \n-# TODO: Reduce KNOWN_VIOLATIONS by replacing uses of locale dependent stoul/strtol with locale\n-#       independent ToIntegral<T>(...) or the ParseInt*() functions.\n # TODO: Reduce KNOWN_VIOLATIONS by replacing uses of locale dependent snprintf with strprintf.\n KNOWN_VIOLATIONS=(\n     \"src/dbwrapper.cpp:.*vsnprintf\"\n     \"src/test/dbwrapper_tests.cpp:.*snprintf\"\n     \"src/test/fuzz/locale.cpp\"\n     \"src/test/fuzz/string.cpp\"\n-    \"src/torcontrol.cpp:.*strtol\"\n )\n \n REGEXP_IGNORE_EXTERNAL_DEPENDENCIES=\"^src/(crypto/ctaes/|leveldb/|secp256k1/|minisketch/|tinyformat.h|univalue/)\""
      }
    ]
  }
]