[
  {
    "sha": "b357a71cfaf99dd2e7d203a12edfcc5df4a93386",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiMzU3YTcxY2ZhZjk5ZGQyZTdkMjAzYTEyZWRmY2M1ZGY0YTkzMzg2",
    "commit": {
      "author": {
        "name": "Jonas Schnelli",
        "email": "jonas.schnelli@include7.ch",
        "date": "2013-05-02T16:55:25Z"
      },
      "committer": {
        "name": "Jonas Schnelli",
        "email": "jonas.schnelli@include7.ch",
        "date": "2013-05-02T16:55:25Z"
      },
      "message": "clear path cache after getting a proper config file (fixes #2605)\n\nSigned-off-by: Jonas Schnelli <jonas.schnelli@include7.ch>",
      "tree": {
        "sha": "b4ce2b55a5be1ca07da48b8d6b82d153d2cc8cf8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b4ce2b55a5be1ca07da48b8d6b82d153d2cc8cf8"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b357a71cfaf99dd2e7d203a12edfcc5df4a93386",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b357a71cfaf99dd2e7d203a12edfcc5df4a93386",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/b357a71cfaf99dd2e7d203a12edfcc5df4a93386",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b357a71cfaf99dd2e7d203a12edfcc5df4a93386/comments",
    "author": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "eef2091fe9ee39ecd8e874c91d3ab0ff023c5356",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/eef2091fe9ee39ecd8e874c91d3ab0ff023c5356",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/eef2091fe9ee39ecd8e874c91d3ab0ff023c5356"
      }
    ],
    "stats": {
      "total": 9,
      "additions": 6,
      "deletions": 3
    },
    "files": [
      {
        "sha": "4c9b897f5752311c333e0f141f122a09b8c6a1a0",
        "filename": "src/util.cpp",
        "status": "modified",
        "additions": 6,
        "deletions": 3,
        "changes": 9,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b357a71cfaf99dd2e7d203a12edfcc5df4a93386/src/util.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b357a71cfaf99dd2e7d203a12edfcc5df4a93386/src/util.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/util.cpp?ref=b357a71cfaf99dd2e7d203a12edfcc5df4a93386",
        "patch": "@@ -83,6 +83,7 @@ bool fNoListen = false;\n bool fLogTimestamps = false;\n CMedianFilter<int64> vTimeOffsets(200,0);\n volatile bool fReopenDebugLog = false;\n+bool fCachedPath[2] = {false, false};\n \n // Init OpenSSL library multithreading support\n static CCriticalSection** ppmutexOpenSSL;\n@@ -1048,13 +1049,12 @@ const boost::filesystem::path &GetDataDir(bool fNetSpecific)\n \n     static fs::path pathCached[2];\n     static CCriticalSection csPathCached;\n-    static bool cachedPath[2] = {false, false};\n \n     fs::path &path = pathCached[fNetSpecific];\n \n     // This can be called during exceptions by printf, so we cache the\n     // value so we don't have to do memory allocations after that.\n-    if (cachedPath[fNetSpecific])\n+    if (fCachedPath[fNetSpecific])\n         return path;\n \n     LOCK(csPathCached);\n@@ -1073,7 +1073,7 @@ const boost::filesystem::path &GetDataDir(bool fNetSpecific)\n \n     fs::create_directory(path);\n \n-    cachedPath[fNetSpecific] = true;\n+    fCachedPath[fNetSpecific] = true;\n     return path;\n }\n \n@@ -1091,6 +1091,9 @@ void ReadConfigFile(map<string, string>& mapSettingsRet,\n     if (!streamConfig.good())\n         return; // No bitcoin.conf file is OK\n \n+    // clear path cache after loading config file\n+    fCachedPath[0] = fCachedPath[1] = false;\n+\n     set<string> setOptions;\n     setOptions.insert(\"*\");\n "
      }
    ]
  }
]