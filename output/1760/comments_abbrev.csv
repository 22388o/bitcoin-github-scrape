laanwj,2012-08-31T02:53:12Z,"Good idea, some comments though if we're going to add this:\n- We should loop over _all_ configured proxies (IPV4, IPV6 and .onion) and try to connect to them\n- _It should still set the proxy even though it doesn't manage to connect to it_. Keep it at a warning, assume the user knows what they're doing. It can be an enormous security breach to connect directly outside the proxy.\n  - Also remembe",https://github.com/bitcoin/bitcoin/pull/1760#issuecomment-8181285,8181285,
Diapolo,2012-08-31T05:46:47Z,"@laanwj Thanks for your feedback.\n- You are right, we should test every supplied proxy, but tell me how would I pass (command-line wise) more than 1 proxy as in current init code there is no loop for more than 1 proxy.\n- Yes it should leave the option active and just warn the user, to don't breach privacy, I'll change that. I see the current implementation just as a startup check, which could be",https://github.com/bitcoin/bitcoin/pull/1760#issuecomment-8183206,8183206,
Diapolo,2012-08-31T09:33:40Z,"Updated to not disable the proxy, even if it is not reachable, which could be a temporary problem and to not leak information a user does not want to get leaked :).\n\nI'm still asking myself, how I could supply a normal IPv4 proxy and one for IPv6 peers via -proxy? Take a look at init.cpp there is no loop so as far as I can tell we can only supply a single proxy via -proxy currently, which is use",https://github.com/bitcoin/bitcoin/pull/1760#issuecomment-8186944,8186944,
sipa,2012-08-31T11:31:02Z,@Diapolo A separate proxy server for IPv6 was never implemented :)\n,https://github.com/bitcoin/bitcoin/pull/1760#issuecomment-8189188,8189188,
Diapolo,2012-08-31T23:03:16Z,"@sipa Not yet, but as you know #1769 just does that. Are you fine with the `ConnectionTest()` function?\n",https://github.com/bitcoin/bitcoin/pull/1760#issuecomment-8207266,8207266,
gmaxwell,2012-09-01T00:05:59Z,"Is there a need to explicitly test?  Why not just observe where the failure happens when an outgoing connection happens?  (e.g. did we fail connecting to the proxy, or did it return an error?). Also, simply opening up a tcp connection to the proxy isn't enough to know that it's actually working. E.g. if you have a webserver on 80 and a proxy on 8080 and I erroneously specify 80 then it'll connect ",https://github.com/bitcoin/bitcoin/pull/1760#issuecomment-8208133,8208133,
Diapolo,2012-09-01T08:52:31Z,"@gmaxwell Currently, when using or supplying a non working proxy, the client simply does not connect and tells the user nothing about it (which is worst case IMO). This one at least checks if a connection to the supplied IP:port combination can be made on startup.\n\nYou are right the connection is not used as proxy connection currently, but I guess `ConnectionTest()` can be extended. I did not in",https://github.com/bitcoin/bitcoin/pull/1760#issuecomment-8211234,8211234,
laanwj,2012-09-01T09:01:03Z,"I like @gmaxwell's test-as-we-go approach. When the proxy is used, and it fails to connect to the proxy, show and log a warning (only once!). \n\nFor this to work you'd need to isolate cannot-connect-to-proxy problems from the-proxy-cannot-connect-to-target errors.\n",https://github.com/bitcoin/bitcoin/pull/1760#issuecomment-8211281,8211281,
Diapolo,2012-09-01T15:53:37Z,"I'll close this for now and perhaps re-open in the future, when a better approach is ready :).\n",https://github.com/bitcoin/bitcoin/pull/1760#issuecomment-8214082,8214082,
