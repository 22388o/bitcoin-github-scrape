[
  {
    "sha": "666893b1facfbc748de760e6aeb6bc26bd3797f3",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo2NjY4OTNiMWZhY2ZiYzc0OGRlNzYwZTZhZWI2YmMyNmJkMzc5N2Yz",
    "commit": {
      "author": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2013-11-05T17:03:05Z"
      },
      "committer": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2013-11-19T13:07:38Z"
      },
      "message": "qt: keep a list of requested payments\n\nKeep a list of requested payments in the Receive tab so that a user can\nrecall previously created requests after closing their windows.\n\nCurrently this list is not stored between bitcoin-qt sessions. This can\nbe implemented later, but it is not clear where it should be stored as\nI don't think it belongs in the wallet (maybe in QSettings?)",
      "tree": {
        "sha": "b77cf8d12a7f92178bb8f87ec8124d745ff2257b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b77cf8d12a7f92178bb8f87ec8124d745ff2257b"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/666893b1facfbc748de760e6aeb6bc26bd3797f3",
      "comment_count": 4,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/666893b1facfbc748de760e6aeb6bc26bd3797f3",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/666893b1facfbc748de760e6aeb6bc26bd3797f3",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/666893b1facfbc748de760e6aeb6bc26bd3797f3/comments",
    "author": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "71f97ea2a71471f383b7e78ce57eb76a76c5c933",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/71f97ea2a71471f383b7e78ce57eb76a76c5c933",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/71f97ea2a71471f383b7e78ce57eb76a76c5c933"
      }
    ],
    "stats": {
      "total": 482,
      "additions": 409,
      "deletions": 73
    },
    "files": [
      {
        "sha": "91e4edc33b1719a713dc0672ed2f06e40b569f5b",
        "filename": "src/qt/Makefile.am",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/666893b1facfbc748de760e6aeb6bc26bd3797f3/src/qt/Makefile.am",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/666893b1facfbc748de760e6aeb6bc26bd3797f3/src/qt/Makefile.am",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/Makefile.am?ref=666893b1facfbc748de760e6aeb6bc26bd3797f3",
        "patch": "@@ -96,6 +96,7 @@ QT_MOC_CPP = moc_aboutdialog.cpp moc_addressbookpage.cpp \\\n   moc_optionsmodel.cpp moc_overviewpage.cpp moc_paymentserver.cpp \\\n   moc_receiverequestdialog.cpp moc_qvalidatedlineedit.cpp moc_qvaluecombobox.cpp \\\n   moc_receivecoinsdialog.cpp \\\n+  moc_recentrequeststablemodel.cpp \\\n   moc_rpcconsole.cpp moc_sendcoinsdialog.cpp moc_sendcoinsentry.cpp \\\n   moc_signverifymessagedialog.cpp moc_splashscreen.cpp moc_trafficgraphwidget.cpp moc_transactiondesc.cpp \\\n   moc_transactiondescdialog.cpp moc_transactionfilterproxy.cpp \\\n@@ -122,6 +123,7 @@ BITCOIN_QT_H  = aboutdialog.h addressbookpage.h addresstablemodel.h \\\n   optionsdialog.h \\\n   optionsmodel.h overviewpage.h paymentrequestplus.h paymentserver.h \\\n   receivecoinsdialog.h \\\n+  recentrequeststablemodel.h \\\n   receiverequestdialog.h qvalidatedlineedit.h qvaluecombobox.h rpcconsole.h \\\n   sendcoinsdialog.h sendcoinsentry.h signverifymessagedialog.h splashscreen.h \\\n   trafficgraphwidget.h transactiondescdialog.h transactiondesc.h transactionfilterproxy.h \\\n@@ -157,6 +159,7 @@ BITCOIN_QT_CPP = aboutdialog.cpp addressbookpage.cpp \\\n   optionsdialog.cpp optionsmodel.cpp overviewpage.cpp paymentrequestplus.cpp \\\n   paymentserver.cpp qvalidatedlineedit.cpp qvaluecombobox.cpp \\\n   receivecoinsdialog.cpp receiverequestdialog.cpp \\\n+  recentrequeststablemodel.cpp \\\n   rpcconsole.cpp sendcoinsdialog.cpp sendcoinsentry.cpp \\\n   signverifymessagedialog.cpp splashscreen.cpp trafficgraphwidget.cpp transactiondesc.cpp \\\n   transactiondescdialog.cpp transactionfilterproxy.cpp transactionrecord.cpp \\"
      },
      {
        "sha": "5e7d8e617894a554fa958d14734e0b2a10121e75",
        "filename": "src/qt/addresstablemodel.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/666893b1facfbc748de760e6aeb6bc26bd3797f3/src/qt/addresstablemodel.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/666893b1facfbc748de760e6aeb6bc26bd3797f3/src/qt/addresstablemodel.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/addresstablemodel.cpp?ref=666893b1facfbc748de760e6aeb6bc26bd3797f3",
        "patch": "@@ -297,7 +297,7 @@ QVariant AddressTableModel::headerData(int section, Qt::Orientation orientation,\n {\n     if(orientation == Qt::Horizontal)\n     {\n-        if(role == Qt::DisplayRole)\n+        if(role == Qt::DisplayRole && section < columns.size())\n         {\n             return columns[section];\n         }"
      },
      {
        "sha": "e7138f5371b5e106885c6777b53454ad5075ea23",
        "filename": "src/qt/forms/receivecoinsdialog.ui",
        "status": "modified",
        "additions": 152,
        "deletions": 62,
        "changes": 214,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/666893b1facfbc748de760e6aeb6bc26bd3797f3/src/qt/forms/receivecoinsdialog.ui",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/666893b1facfbc748de760e6aeb6bc26bd3797f3/src/qt/forms/receivecoinsdialog.ui",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/forms/receivecoinsdialog.ui?ref=666893b1facfbc748de760e6aeb6bc26bd3797f3",
        "patch": "@@ -7,35 +7,60 @@\n     <x>0</x>\n     <y>0</y>\n     <width>776</width>\n-    <height>343</height>\n+    <height>364</height>\n    </rect>\n   </property>\n   <layout class=\"QVBoxLayout\" name=\"verticalLayout\">\n    <item>\n     <layout class=\"QGridLayout\" name=\"gridLayout\">\n-     <item row=\"3\" column=\"0\">\n-      <widget class=\"QLabel\" name=\"label\">\n+     <item row=\"7\" column=\"2\">\n+      <widget class=\"QCheckBox\" name=\"reuseAddress\">\n+       <property name=\"toolTip\">\n+        <string>Reuse one of the previously used receiving addresses. Reusing addresses has security and privacy issues. Do not use this unless re-generating a payment request made before.</string>\n+       </property>\n        <property name=\"text\">\n-        <string>&amp;Amount:</string>\n+        <string>R&amp;euse an existing receiving address (not recommended)</string>\n+       </property>\n+      </widget>\n+     </item>\n+     <item row=\"7\" column=\"0\">\n+      <widget class=\"QLabel\" name=\"label_4\">\n+       <property name=\"text\">\n+        <string/>\n+       </property>\n+      </widget>\n+     </item>\n+     <item row=\"6\" column=\"0\">\n+      <widget class=\"QLabel\" name=\"label_3\">\n+       <property name=\"text\">\n+        <string>&amp;Message:</string>\n        </property>\n        <property name=\"alignment\">\n         <set>Qt::AlignRight|Qt::AlignTrailing|Qt::AlignVCenter</set>\n        </property>\n        <property name=\"buddy\">\n-        <cstring>reqAmount</cstring>\n+        <cstring>reqMessage</cstring>\n        </property>\n       </widget>\n      </item>\n-     <item row=\"3\" column=\"1\">\n-      <widget class=\"BitcoinAmountField\" name=\"reqAmount\">\n-       <property name=\"minimumSize\">\n-        <size>\n-         <width>80</width>\n-         <height>0</height>\n-        </size>\n+     <item row=\"4\" column=\"2\">\n+      <widget class=\"QLineEdit\" name=\"reqLabel\">\n+       <property name=\"toolTip\">\n+        <string>The label to associate with the new receiving address</string>\n        </property>\n+      </widget>\n+     </item>\n+     <item row=\"6\" column=\"2\">\n+      <widget class=\"QLineEdit\" name=\"reqMessage\">\n        <property name=\"toolTip\">\n-        <string>The amount to request</string>\n+        <string>The message to attach to payment request</string>\n+       </property>\n+      </widget>\n+     </item>\n+     <item row=\"2\" column=\"2\">\n+      <widget class=\"QLabel\" name=\"label_5\">\n+       <property name=\"text\">\n+        <string>Use this form to request payments. All fields are optional.</string>\n        </property>\n       </widget>\n      </item>\n@@ -52,72 +77,34 @@\n        </property>\n       </widget>\n      </item>\n-     <item row=\"4\" column=\"1\">\n-      <widget class=\"QLineEdit\" name=\"reqLabel\">\n-       <property name=\"toolTip\">\n-        <string>The label to associate with the receiving address</string>\n-       </property>\n-      </widget>\n-     </item>\n      <item row=\"5\" column=\"0\">\n-      <widget class=\"QLabel\" name=\"label_3\">\n+      <widget class=\"QLabel\" name=\"label\">\n        <property name=\"text\">\n-        <string>&amp;Message:</string>\n+        <string>&amp;Amount:</string>\n        </property>\n        <property name=\"alignment\">\n         <set>Qt::AlignRight|Qt::AlignTrailing|Qt::AlignVCenter</set>\n        </property>\n        <property name=\"buddy\">\n-        <cstring>reqMessage</cstring>\n-       </property>\n-      </widget>\n-     </item>\n-     <item row=\"5\" column=\"1\">\n-      <widget class=\"QLineEdit\" name=\"reqMessage\">\n-       <property name=\"toolTip\">\n-        <string>The message to attach to payment request</string>\n+        <cstring>reqAmount</cstring>\n        </property>\n       </widget>\n      </item>\n-     <item row=\"6\" column=\"0\">\n-      <widget class=\"QLabel\" name=\"label_4\">\n-       <property name=\"text\">\n-        <string/>\n+     <item row=\"5\" column=\"2\">\n+      <widget class=\"BitcoinAmountField\" name=\"reqAmount\">\n+       <property name=\"minimumSize\">\n+        <size>\n+         <width>80</width>\n+         <height>0</height>\n+        </size>\n        </property>\n-      </widget>\n-     </item>\n-     <item row=\"6\" column=\"1\">\n-      <widget class=\"QCheckBox\" name=\"reuseAddress\">\n        <property name=\"toolTip\">\n-        <string>Reuse one of the previously used receiving addresses. Reusing addresses has security and privacy issues. Do not use this unless re-generating a payment request made before.</string>\n-       </property>\n-       <property name=\"text\">\n-        <string>R&amp;euse an existing receiving address (not recommended)</string>\n-       </property>\n-      </widget>\n-     </item>\n-     <item row=\"2\" column=\"1\">\n-      <widget class=\"QLabel\" name=\"label_5\">\n-       <property name=\"text\">\n-        <string>Use this form to request payments. All fields are optional.</string>\n+        <string>The amount to request</string>\n        </property>\n       </widget>\n      </item>\n     </layout>\n    </item>\n-   <item>\n-    <spacer name=\"verticalSpacer\">\n-     <property name=\"orientation\">\n-      <enum>Qt::Vertical</enum>\n-     </property>\n-     <property name=\"sizeHint\" stdset=\"0\">\n-      <size>\n-       <width>20</width>\n-       <height>40</height>\n-      </size>\n-     </property>\n-    </spacer>\n-   </item>\n    <item>\n     <layout class=\"QHBoxLayout\" name=\"horizontalLayout\">\n      <item>\n@@ -178,6 +165,98 @@\n      </item>\n     </layout>\n    </item>\n+   <item>\n+    <spacer name=\"verticalSpacer_2\">\n+     <property name=\"orientation\">\n+      <enum>Qt::Vertical</enum>\n+     </property>\n+     <property name=\"sizeHint\" stdset=\"0\">\n+      <size>\n+       <width>20</width>\n+       <height>40</height>\n+      </size>\n+     </property>\n+    </spacer>\n+   </item>\n+   <item>\n+    <widget class=\"QFrame\" name=\"frame\">\n+     <property name=\"sizePolicy\">\n+      <sizepolicy hsizetype=\"Preferred\" vsizetype=\"Expanding\">\n+       <horstretch>0</horstretch>\n+       <verstretch>0</verstretch>\n+      </sizepolicy>\n+     </property>\n+     <property name=\"frameShape\">\n+      <enum>QFrame::StyledPanel</enum>\n+     </property>\n+     <property name=\"frameShadow\">\n+      <enum>QFrame::Raised</enum>\n+     </property>\n+     <layout class=\"QVBoxLayout\" name=\"verticalLayout_2\">\n+      <item>\n+       <widget class=\"QLabel\" name=\"label_6\">\n+        <property name=\"font\">\n+         <font>\n+          <weight>75</weight>\n+          <bold>true</bold>\n+         </font>\n+        </property>\n+        <property name=\"text\">\n+         <string>Previously requested payments</string>\n+        </property>\n+       </widget>\n+      </item>\n+      <item>\n+       <widget class=\"QTableView\" name=\"recentRequestsView\"/>\n+      </item>\n+      <item>\n+       <layout class=\"QHBoxLayout\" name=\"horizontalLayout_2\">\n+        <item>\n+         <widget class=\"QPushButton\" name=\"showRequestButton\">\n+          <property name=\"toolTip\">\n+           <string>Show the selected request (does the same as double clicking an entry)</string>\n+          </property>\n+          <property name=\"text\">\n+           <string>Show</string>\n+          </property>\n+          <property name=\"icon\">\n+           <iconset resource=\"../bitcoin.qrc\">\n+            <normaloff>:/icons/edit</normaloff>:/icons/edit</iconset>\n+          </property>\n+         </widget>\n+        </item>\n+        <item>\n+         <widget class=\"QPushButton\" name=\"removeRequestButton\">\n+          <property name=\"toolTip\">\n+           <string>Remove the selected entries from the list</string>\n+          </property>\n+          <property name=\"text\">\n+           <string>Remove</string>\n+          </property>\n+          <property name=\"icon\">\n+           <iconset resource=\"../bitcoin.qrc\">\n+            <normaloff>:/icons/remove</normaloff>:/icons/remove</iconset>\n+          </property>\n+         </widget>\n+        </item>\n+        <item>\n+         <spacer name=\"horizontalSpacer_2\">\n+          <property name=\"orientation\">\n+           <enum>Qt::Horizontal</enum>\n+          </property>\n+          <property name=\"sizeHint\" stdset=\"0\">\n+           <size>\n+            <width>40</width>\n+            <height>20</height>\n+           </size>\n+          </property>\n+         </spacer>\n+        </item>\n+       </layout>\n+      </item>\n+     </layout>\n+    </widget>\n+   </item>\n   </layout>\n  </widget>\n  <customwidgets>\n@@ -187,6 +266,17 @@\n    <header>bitcoinamountfield.h</header>\n   </customwidget>\n  </customwidgets>\n+ <tabstops>\n+  <tabstop>reqLabel</tabstop>\n+  <tabstop>reqAmount</tabstop>\n+  <tabstop>reqMessage</tabstop>\n+  <tabstop>reuseAddress</tabstop>\n+  <tabstop>clearButton</tabstop>\n+  <tabstop>receiveButton</tabstop>\n+  <tabstop>recentRequestsView</tabstop>\n+  <tabstop>showRequestButton</tabstop>\n+  <tabstop>removeRequestButton</tabstop>\n+ </tabstops>\n  <resources>\n   <include location=\"../bitcoin.qrc\"/>\n  </resources>"
      },
      {
        "sha": "85928c9be5aac53a8616727b560068240f1a628c",
        "filename": "src/qt/forms/receiverequestdialog.ui",
        "status": "modified",
        "additions": 0,
        "deletions": 7,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/666893b1facfbc748de760e6aeb6bc26bd3797f3/src/qt/forms/receiverequestdialog.ui",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/666893b1facfbc748de760e6aeb6bc26bd3797f3/src/qt/forms/receiverequestdialog.ui",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/forms/receiverequestdialog.ui?ref=666893b1facfbc748de760e6aeb6bc26bd3797f3",
        "patch": "@@ -83,13 +83,6 @@\n        </property>\n       </widget>\n      </item>\n-     <item>\n-      <widget class=\"QPushButton\" name=\"btnCopyImage\">\n-       <property name=\"text\">\n-        <string>&amp;Copy Image</string>\n-       </property>\n-      </widget>\n-     </item>\n      <item>\n       <widget class=\"QPushButton\" name=\"btnSaveAs\">\n        <property name=\"text\">"
      },
      {
        "sha": "a536fa2ad734553b79a87d5610c35f00e63636f7",
        "filename": "src/qt/receivecoinsdialog.cpp",
        "status": "modified",
        "additions": 54,
        "deletions": 1,
        "changes": 55,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/666893b1facfbc748de760e6aeb6bc26bd3797f3/src/qt/receivecoinsdialog.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/666893b1facfbc748de760e6aeb6bc26bd3797f3/src/qt/receivecoinsdialog.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/receivecoinsdialog.cpp?ref=666893b1facfbc748de760e6aeb6bc26bd3797f3",
        "patch": "@@ -12,6 +12,7 @@\n #include \"guiutil.h\"\n #include \"receiverequestdialog.h\"\n #include \"addresstablemodel.h\"\n+#include \"recentrequeststablemodel.h\"\n \n #include <QMessageBox>\n #include <QTextDocument>\n@@ -27,6 +28,8 @@ ReceiveCoinsDialog::ReceiveCoinsDialog(QWidget *parent) :\n #ifdef Q_OS_MAC // Icons on push buttons are very uncommon on Mac\n     ui->clearButton->setIcon(QIcon());\n     ui->receiveButton->setIcon(QIcon());\n+    ui->showRequestButton->setIcon(QIcon());\n+    ui->removeRequestButton->setIcon(QIcon());\n #endif\n     connect(ui->clearButton, SIGNAL(clicked()), this, SLOT(clear()));\n }\n@@ -39,6 +42,19 @@ void ReceiveCoinsDialog::setModel(WalletModel *model)\n     {\n         connect(model->getOptionsModel(), SIGNAL(displayUnitChanged(int)), this, SLOT(updateDisplayUnit()));\n         updateDisplayUnit();\n+\n+        ui->recentRequestsView->setModel(model->getRecentRequestsTableModel());\n+        ui->recentRequestsView->setAlternatingRowColors(true);\n+        ui->recentRequestsView->setSelectionBehavior(QAbstractItemView::SelectRows);\n+        ui->recentRequestsView->setSelectionMode(QAbstractItemView::ContiguousSelection);\n+        ui->recentRequestsView->horizontalHeader()->resizeSection(RecentRequestsTableModel::Date, 130);\n+        ui->recentRequestsView->horizontalHeader()->resizeSection(RecentRequestsTableModel::Label, 120);\n+#if QT_VERSION < 0x050000\n+        ui->recentRequestsView->horizontalHeader()->setResizeMode(RecentRequestsTableModel::Message, QHeaderView::Stretch);\n+#else\n+        ui->recentRequestsView->horizontalHeader()->setSectionResizeMode(RecentRequestsTableModel::Message, QHeaderView::Stretch);\n+#endif\n+        ui->recentRequestsView->horizontalHeader()->resizeSection(RecentRequestsTableModel::Amount, 100);\n     }\n }\n \n@@ -76,7 +92,7 @@ void ReceiveCoinsDialog::updateDisplayUnit()\n \n void ReceiveCoinsDialog::on_receiveButton_clicked()\n {\n-    if(!model || !model->getOptionsModel() || !model->getAddressTableModel())\n+    if(!model || !model->getOptionsModel() || !model->getAddressTableModel() || !model->getRecentRequestsTableModel())\n         return;\n \n     QString address;\n@@ -108,4 +124,41 @@ void ReceiveCoinsDialog::on_receiveButton_clicked()\n     dialog->setAttribute(Qt::WA_DeleteOnClose);\n     dialog->show();\n     clear();\n+\n+    /* Store request for later reference */\n+    model->getRecentRequestsTableModel()->addNewRequest(info);\n+}\n+\n+void ReceiveCoinsDialog::on_recentRequestsView_doubleClicked(const QModelIndex &index)\n+{\n+    const RecentRequestsTableModel *submodel = model->getRecentRequestsTableModel();\n+    ReceiveRequestDialog *dialog = new ReceiveRequestDialog(this);\n+    dialog->setModel(model->getOptionsModel());\n+    dialog->setInfo(submodel->entry(index.row()).recipient);\n+    dialog->setAttribute(Qt::WA_DeleteOnClose);\n+    dialog->show();\n+}\n+\n+void ReceiveCoinsDialog::on_showRequestButton_clicked()\n+{\n+    if(!model || !model->getRecentRequestsTableModel() || !ui->recentRequestsView->selectionModel())\n+        return;\n+    QModelIndexList selection = ui->recentRequestsView->selectionModel()->selectedRows();\n+\n+    foreach (QModelIndex index, selection)\n+    {\n+        on_recentRequestsView_doubleClicked(index);\n+    }\n+}\n+\n+void ReceiveCoinsDialog::on_removeRequestButton_clicked()\n+{\n+    if(!model || !model->getRecentRequestsTableModel() || !ui->recentRequestsView->selectionModel())\n+        return;\n+    QModelIndexList selection = ui->recentRequestsView->selectionModel()->selectedRows();\n+    if(selection.empty())\n+        return;\n+    // correct for selection mode ContiguousSelection\n+    QModelIndex firstIndex = selection.at(0);\n+    model->getRecentRequestsTableModel()->removeRows(firstIndex.row(), selection.length(), firstIndex.parent());\n }"
      },
      {
        "sha": "4435bf66944d0a182373c822fd9425066f6d30c0",
        "filename": "src/qt/receivecoinsdialog.h",
        "status": "modified",
        "additions": 6,
        "deletions": 0,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/666893b1facfbc748de760e6aeb6bc26bd3797f3/src/qt/receivecoinsdialog.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/666893b1facfbc748de760e6aeb6bc26bd3797f3/src/qt/receivecoinsdialog.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/receivecoinsdialog.h?ref=666893b1facfbc748de760e6aeb6bc26bd3797f3",
        "patch": "@@ -13,6 +13,9 @@ namespace Ui {\n }\n class WalletModel;\n class OptionsModel;\n+QT_BEGIN_NAMESPACE\n+class QModelIndex;\n+QT_END_NAMESPACE\n \n /** Dialog for requesting payment of bitcoins */\n class ReceiveCoinsDialog : public QDialog\n@@ -36,6 +39,9 @@ public slots:\n \n private slots:\n     void on_receiveButton_clicked();\n+    void on_showRequestButton_clicked();\n+    void on_removeRequestButton_clicked();\n+    void on_recentRequestsView_doubleClicked(const QModelIndex &index);\n     void updateDisplayUnit();\n };\n "
      },
      {
        "sha": "b5e45341d92730bca65332d51af29e2e80292f15",
        "filename": "src/qt/receiverequestdialog.cpp",
        "status": "modified",
        "additions": 0,
        "deletions": 2,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/666893b1facfbc748de760e6aeb6bc26bd3797f3/src/qt/receiverequestdialog.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/666893b1facfbc748de760e6aeb6bc26bd3797f3/src/qt/receiverequestdialog.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/receiverequestdialog.cpp?ref=666893b1facfbc748de760e6aeb6bc26bd3797f3",
        "patch": "@@ -85,12 +85,10 @@ ReceiveRequestDialog::ReceiveRequestDialog(QWidget *parent) :\n \n #ifndef USE_QRCODE\n     ui->btnSaveAs->setVisible(false);\n-    ui->btnCopyImage->setVisible(false);\n     ui->lblQRCode->setVisible(false);\n #endif\n \n     connect(ui->btnSaveAs, SIGNAL(clicked()), ui->lblQRCode, SLOT(saveImage()));\n-    connect(ui->btnCopyImage, SIGNAL(clicked()), ui->lblQRCode, SLOT(copyImage()));\n }\n \n ReceiveRequestDialog::~ReceiveRequestDialog()"
      },
      {
        "sha": "06f64af146229a213630f079b92660f39634aa3c",
        "filename": "src/qt/recentrequeststablemodel.cpp",
        "status": "added",
        "additions": 121,
        "deletions": 0,
        "changes": 121,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/666893b1facfbc748de760e6aeb6bc26bd3797f3/src/qt/recentrequeststablemodel.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/666893b1facfbc748de760e6aeb6bc26bd3797f3/src/qt/recentrequeststablemodel.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/recentrequeststablemodel.cpp?ref=666893b1facfbc748de760e6aeb6bc26bd3797f3",
        "patch": "@@ -0,0 +1,121 @@\n+// Copyright (c) 2011-2013 The Bitcoin developers\n+// Distributed under the MIT/X11 software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"recentrequeststablemodel.h\"\n+#include \"guiutil.h\"\n+#include \"bitcoinunits.h\"\n+#include \"optionsmodel.h\"\n+\n+RecentRequestsTableModel::RecentRequestsTableModel(CWallet *wallet, WalletModel *parent):\n+    walletModel(parent)\n+{\n+    /* These columns must match the indices in the ColumnIndex enumeration */\n+    columns << tr(\"Date\") << tr(\"Label\") << tr(\"Message\") << tr(\"Amount\");\n+}\n+\n+RecentRequestsTableModel::~RecentRequestsTableModel()\n+{\n+    /* Intentionally left empty */\n+}\n+\n+int RecentRequestsTableModel::rowCount(const QModelIndex &parent) const\n+{\n+    Q_UNUSED(parent);\n+    return list.length();\n+}\n+\n+int RecentRequestsTableModel::columnCount(const QModelIndex &parent) const\n+{\n+    Q_UNUSED(parent);\n+    return columns.length();\n+}\n+\n+QVariant RecentRequestsTableModel::data(const QModelIndex &index, int role) const\n+{\n+    if(!index.isValid() || index.row() >= list.length())\n+        return QVariant();\n+\n+    const RecentRequestEntry *rec = &list[index.row()];\n+\n+    if(role == Qt::DisplayRole || role == Qt::EditRole)\n+    {\n+        switch(index.column())\n+        {\n+        case Date:\n+            return GUIUtil::dateTimeStr(rec->date);\n+        case Label:\n+            if(rec->recipient.label.isEmpty() && role == Qt::DisplayRole)\n+            {\n+                return tr(\"(no label)\");\n+            }\n+            else\n+            {\n+                return rec->recipient.label;\n+            }\n+        case Message:\n+            if(rec->recipient.message.isEmpty() && role == Qt::DisplayRole)\n+            {\n+                return tr(\"(no message)\");\n+            }\n+            else\n+            {\n+                return rec->recipient.message;\n+            }\n+        case Amount:\n+            return BitcoinUnits::format(walletModel->getOptionsModel()->getDisplayUnit(), rec->recipient.amount);\n+        }\n+    }\n+    return QVariant();\n+}\n+\n+bool RecentRequestsTableModel::setData(const QModelIndex &index, const QVariant &value, int role)\n+{\n+    return true;\n+}\n+\n+QVariant RecentRequestsTableModel::headerData(int section, Qt::Orientation orientation, int role) const\n+{\n+    if(orientation == Qt::Horizontal)\n+    {\n+        if(role == Qt::DisplayRole && section < columns.size())\n+        {\n+            return columns[section];\n+        }\n+    }\n+    return QVariant();\n+}\n+\n+QModelIndex RecentRequestsTableModel::index(int row, int column, const QModelIndex &parent) const\n+{\n+    return createIndex(row, column, 0);\n+}\n+\n+bool RecentRequestsTableModel::removeRows(int row, int count, const QModelIndex &parent)\n+{\n+    Q_UNUSED(parent);\n+    if(count > 0 && row >= 0 && (row+count) <= list.size())\n+    {\n+        beginRemoveRows(parent, row, row + count - 1);\n+        list.erase(list.begin() + row, list.begin() + row + count);\n+        endRemoveRows();\n+        return true;\n+    } else {\n+        return false;\n+    }\n+}\n+\n+Qt::ItemFlags RecentRequestsTableModel::flags(const QModelIndex &index) const\n+{\n+    return Qt::ItemIsSelectable | Qt::ItemIsEnabled;\n+}\n+\n+void RecentRequestsTableModel::addNewRequest(const SendCoinsRecipient &recipient)\n+{\n+    RecentRequestEntry newEntry;\n+    newEntry.date = QDateTime::currentDateTime();\n+    newEntry.recipient = recipient;\n+    beginInsertRows(QModelIndex(), 0, 0);\n+    list.prepend(newEntry);\n+    endInsertRows();\n+}"
      },
      {
        "sha": "d00a2a90558fb3f0b8ab031596a74dec06394fa8",
        "filename": "src/qt/recentrequeststablemodel.h",
        "status": "added",
        "additions": 61,
        "deletions": 0,
        "changes": 61,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/666893b1facfbc748de760e6aeb6bc26bd3797f3/src/qt/recentrequeststablemodel.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/666893b1facfbc748de760e6aeb6bc26bd3797f3/src/qt/recentrequeststablemodel.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/recentrequeststablemodel.h?ref=666893b1facfbc748de760e6aeb6bc26bd3797f3",
        "patch": "@@ -0,0 +1,61 @@\n+// Copyright (c) 2011-2013 The Bitcoin developers\n+// Distributed under the MIT/X11 software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef RECENTREQUESTSTABLEMODEL_H\n+#define RECENTREQUESTSTABLEMODEL_H\n+\n+#include <QAbstractTableModel>\n+#include <QStringList>\n+#include <QDateTime>\n+\n+#include \"walletmodel.h\"\n+\n+class CWallet;\n+\n+struct RecentRequestEntry\n+{\n+    QDateTime date;\n+    SendCoinsRecipient recipient;\n+};\n+\n+/** Model for list of recently generated payment requests / bitcoin URIs.\n+ * Part of wallet model.\n+ */\n+class RecentRequestsTableModel: public QAbstractTableModel\n+{\n+    Q_OBJECT\n+\n+public:\n+    explicit RecentRequestsTableModel(CWallet *wallet, WalletModel *parent = 0);\n+    ~RecentRequestsTableModel();\n+\n+    enum ColumnIndex {\n+        Date = 0,\n+        Label = 1,\n+        Message = 2,\n+        Amount = 3\n+    };\n+\n+    /** @name Methods overridden from QAbstractTableModel\n+        @{*/\n+    int rowCount(const QModelIndex &parent) const;\n+    int columnCount(const QModelIndex &parent) const;\n+    QVariant data(const QModelIndex &index, int role) const;\n+    bool setData(const QModelIndex &index, const QVariant &value, int role);\n+    QVariant headerData(int section, Qt::Orientation orientation, int role) const;\n+    QModelIndex index(int row, int column, const QModelIndex &parent) const;\n+    bool removeRows(int row, int count, const QModelIndex &parent = QModelIndex());\n+    Qt::ItemFlags flags(const QModelIndex &index) const;\n+    /*@}*/\n+\n+    const RecentRequestEntry &entry(int row) const { return list[row]; }\n+    void addNewRequest(const SendCoinsRecipient &recipient);\n+\n+private:\n+    WalletModel *walletModel;\n+    QStringList columns;\n+    QList<RecentRequestEntry> list;\n+};\n+\n+#endif"
      },
      {
        "sha": "984a5a2e7193e4088b264004635d4a5bdd00fb9c",
        "filename": "src/qt/walletmodel.cpp",
        "status": "modified",
        "additions": 8,
        "deletions": 0,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/666893b1facfbc748de760e6aeb6bc26bd3797f3/src/qt/walletmodel.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/666893b1facfbc748de760e6aeb6bc26bd3797f3/src/qt/walletmodel.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/walletmodel.cpp?ref=666893b1facfbc748de760e6aeb6bc26bd3797f3",
        "patch": "@@ -7,6 +7,7 @@\n #include \"addresstablemodel.h\"\n #include \"guiconstants.h\"\n #include \"transactiontablemodel.h\"\n+#include \"recentrequeststablemodel.h\"\n \n #include \"base58.h\"\n #include \"db.h\"\n@@ -26,13 +27,15 @@\n WalletModel::WalletModel(CWallet *wallet, OptionsModel *optionsModel, QObject *parent) :\n     QObject(parent), wallet(wallet), optionsModel(optionsModel), addressTableModel(0),\n     transactionTableModel(0),\n+    recentRequestsTableModel(0),\n     cachedBalance(0), cachedUnconfirmedBalance(0), cachedImmatureBalance(0),\n     cachedNumTransactions(0),\n     cachedEncryptionStatus(Unencrypted),\n     cachedNumBlocks(0)\n {\n     addressTableModel = new AddressTableModel(wallet, this);\n     transactionTableModel = new TransactionTableModel(wallet, this);\n+    recentRequestsTableModel = new RecentRequestsTableModel(wallet, this);\n \n     // This timer will be fired repeatedly to update the balance\n     pollTimer = new QTimer(this);\n@@ -325,6 +328,11 @@ TransactionTableModel *WalletModel::getTransactionTableModel()\n     return transactionTableModel;\n }\n \n+RecentRequestsTableModel *WalletModel::getRecentRequestsTableModel()\n+{\n+    return recentRequestsTableModel;\n+}\n+\n WalletModel::EncryptionStatus WalletModel::getEncryptionStatus() const\n {\n     if(!wallet->IsCrypted())"
      },
      {
        "sha": "44a1912ecc843d011f684fc1bb7932f7e3b9e5ff",
        "filename": "src/qt/walletmodel.h",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/666893b1facfbc748de760e6aeb6bc26bd3797f3/src/qt/walletmodel.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/666893b1facfbc748de760e6aeb6bc26bd3797f3/src/qt/walletmodel.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/walletmodel.h?ref=666893b1facfbc748de760e6aeb6bc26bd3797f3",
        "patch": "@@ -18,6 +18,7 @@\n class AddressTableModel;\n class OptionsModel;\n class TransactionTableModel;\n+class RecentRequestsTableModel;\n class WalletModelTransaction;\n \n class CCoinControl;\n@@ -88,6 +89,7 @@ class WalletModel : public QObject\n     OptionsModel *getOptionsModel();\n     AddressTableModel *getAddressTableModel();\n     TransactionTableModel *getTransactionTableModel();\n+    RecentRequestsTableModel *getRecentRequestsTableModel();\n \n     qint64 getBalance(const CCoinControl *coinControl = NULL) const;\n     qint64 getUnconfirmedBalance() const;\n@@ -160,6 +162,7 @@ class WalletModel : public QObject\n \n     AddressTableModel *addressTableModel;\n     TransactionTableModel *transactionTableModel;\n+    RecentRequestsTableModel *recentRequestsTableModel;\n \n     // Cache some values to be able to detect changes\n     qint64 cachedBalance;"
      }
    ]
  }
]