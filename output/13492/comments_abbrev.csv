promag,2018-06-18T01:51:20Z,@ken2812221 and @MarcoFalke please review.,https://github.com/bitcoin/bitcoin/pull/13492#issuecomment-397923381,397923381,
promag,2018-06-18T01:57:11Z,"By the way, this is only possible with libevent 2.1.8, so if this is accepted we have to change the minimum version\n```\n| libevent | [2.1.8-stable](https://github.com/libevent/libevent/releases) | 2.0.22 | No |  |  |\n```",https://github.com/bitcoin/bitcoin/pull/13492#issuecomment-397923980,397923980,
ken2812221,2018-06-18T02:37:09Z,How about we add an infinity timeout timer event before `event_base_dispatch` and delete it before `event_base_loopexit`? This might works with older version libevent. (Haven't tested),https://github.com/bitcoin/bitcoin/pull/13492#issuecomment-397928068,397928068,
promag,2018-06-18T08:47:32Z,"@ken2812221 unless there is a strong reason to not bump libevent, that could work too. In that case, it should be enough to remove the timer (instead of `event_base_loopexit`) and then the event loop would terminate.",https://github.com/bitcoin/bitcoin/pull/13492#issuecomment-397984476,397984476,
MarcoFalke,2018-06-18T11:56:34Z,"I am not sure what the exact policy for bumping the minimum version of a dependency is, but we should at least compile on Xenial, which doesn't come with 2.1.8.",https://github.com/bitcoin/bitcoin/pull/13492#issuecomment-398029900,398029900,
promag,2018-06-18T12:07:06Z,"Thanks @MarcoFalke, in that case I'll update with an alternative. WDYT about keeping this for 2.1.8 and provide an alternative for <2.1.8?",https://github.com/bitcoin/bitcoin/pull/13492#issuecomment-398032385,398032385,
fanquake,2018-06-18T12:10:55Z,"> Thanks @MarcoFalke, in that case I'll update with an alternative. WDYT about keeping this for 2.1.8 and provide an alternative for <2.1.8?\n\nThat should be fine, we already do that elsewhere in the code IIRC.",https://github.com/bitcoin/bitcoin/pull/13492#issuecomment-398033276,398033276,
laanwj,2018-06-18T15:07:09Z,"Concept ACK.\n\n> Thanks @MarcoFalke, in that case I'll update with an alternative. WDYT about keeping this for 2.1.8 and provide an alternative for <2.1.8?\n\nYes, please do that. Especially the BSDs tend to come with ancient versions of libevent, so please don't change the minimum requirement but put this in `#ifdef`s.",https://github.com/bitcoin/bitcoin/pull/13492#issuecomment-398086998,398086998,
MarcoFalke,2018-06-18T15:15:07Z,"> WDYT about keeping this for 2.1.8 and provide an alternative for <2.1.8?\n\nIf the alternative has no downsides, I'd rather say just do the alternative and keep the code more concise and well tested. (note that travis and most developers don't run the old libevent versions)",https://github.com/bitcoin/bitcoin/pull/13492#issuecomment-398089775,398089775,
promag,2018-06-19T17:05:31Z,Better fix in #13501.,https://github.com/bitcoin/bitcoin/pull/13492#issuecomment-398473321,398473321,
