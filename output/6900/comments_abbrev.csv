wtogami,2015-10-29T18:59:17Z,Does this change the minimum compatible system glibc/libstdc++ version of the Linux binary?  If the new glibc or libstdc++ added new symbols @theuni may need to add more wrappers to the compat library.\n,https://github.com/bitcoin/bitcoin/pull/6900#issuecomment-152287333,152287333,
laanwj,2015-10-29T20:40:46Z,> Does this change the minimum compatible system glibc/libstdc++ version of the Linux binary?\n\nIt shouldn't. That's what the symbols check (`contrib/devtools/symbols-check.py`) checks for.\n,https://github.com/bitcoin/bitcoin/pull/6900#issuecomment-152312553,152312553,
theuni,2015-10-30T02:52:56Z,"Well that was easy :)\n\nFor Windows, patching seems like it'd be the easiest, but I'd worry about breaking checksums. I suppose if Tor did it that way, either it's not an issue or updating the checksums is doable as well. Will look into it.\n\n@sipa mentioned on IRC that depends are currently broken for him on his dev machine, and the fix is the change you made here to qt.mk. Rather than removing",https://github.com/bitcoin/bitcoin/pull/6900#issuecomment-152396510,152396510,
laanwj,2015-10-30T09:00:26Z,"> For Windows, patching seems like it'd be the easiest, but I'd worry about breaking checksums. I suppose if Tor did it that way, either it's not an issue or updating the checksums is doable as well. Will look into it.\n\n[Tor uses 'strip' to recompute the checksum](https://blog.torproject.org/blog/deterministic-builds-part-two-technical-details). I'm not sure what they used to find the index of t",https://github.com/bitcoin/bitcoin/pull/6900#issuecomment-152464178,152464178,
laanwj,2015-10-30T09:04:23Z,"OK, [this is Tor's workaround](https://gitweb.torproject.org/builders/tor-browser-bundle.git/tree/gitian/descriptors/windows/gitian-firefox.yml?id=8cc3dbc4db0307699d292f6fac7615dae2849779).\n\n```\n  # XXX: What the hell are these three bytes anyways?\n  sed 's/\x94\x0C\xE7\x6A\xB8\x0C\xE7\x6A\x08...\x04\xBA\xCB\x7E/\x94\x0c\xe7\x6a\xb8\x0c\xe7\x6a\x08\x23\x23\x23\x04\xba\xcb\x7e/M' -i $INSTDIR/Ap",https://github.com/bitcoin/bitcoin/pull/6900#issuecomment-152465249,152465249,
laanwj,2015-10-30T12:52:15Z,"Wrote a script that overwrites the bytes given an executable and linker map, then calls strip to recompute the checksum. It was somewhat more involved than I thought as it has to parse the PE sections to find the file offset: https://gist.github.com/laanwj/01dc996c4755d19e134e\n\nBut it works for 32/64 bit, tested using\n\n``` bash\n#!/bin/bash\n$1 mtest.c -o mtest_1 -Wl,-Map=mtest.map\n$1 mtest.c",https://github.com/bitcoin/bitcoin/pull/6900#issuecomment-152515503,152515503,
laanwj,2015-10-31T07:48:41Z,"Now uses another approach (suggested by @theuni) to make the windows build deterministic, until binutils can be updated.\n",https://github.com/bitcoin/bitcoin/pull/6900#issuecomment-152709077,152709077,
laanwj,2015-11-01T13:08:14Z,@theuni I replaced the qt PIDLIST_ABSOLUTE patching with a patch that should work for both old and new mingw.\n\nShould be ready for merge.\n,https://github.com/bitcoin/bitcoin/pull/6900#issuecomment-152824551,152824551,
laanwj,2015-11-05T11:29:06Z,Anyone testing this?\n,https://github.com/bitcoin/bitcoin/pull/6900#issuecomment-154036077,154036077,
fanquake,2015-11-05T11:32:23Z,"Yes. Will post back shortly.\n\nOn Thursday, November 5, 2015, Wladimir J. van der Laan <\nnotifications@github.com> wrote:\n\n> Anyone testing this?\n> \n> —\n> Reply to this email directly or view it on GitHub\n> https://github.com/bitcoin/bitcoin/pull/6900#issuecomment-154036077.\n",https://github.com/bitcoin/bitcoin/pull/6900#issuecomment-154036578,154036578,
jonasschnelli,2015-11-05T11:32:39Z,I'll try this within the next couple of hours.\n,https://github.com/bitcoin/bitcoin/pull/6900#issuecomment-154036619,154036619,
laanwj,2015-11-10T14:10:02Z,"@jonasschnelli , @fanquake any luck?\n",https://github.com/bitcoin/bitcoin/pull/6900#issuecomment-155430752,155430752,
laanwj,2015-11-16T12:28:37Z,"Anyone? I'd like to move forward with this, don't think there is anything really holding this back anymore.\n",https://github.com/bitcoin/bitcoin/pull/6900#issuecomment-157013192,157013192,
jonasschnelli,2015-11-16T12:49:43Z,"I really think this is useful.\nBut i can't get it running on my Debian 8 jessy machine (see below).\nI tried to track this down but it seem after a VirtualBox mkfs issue. Couldn't solve it after investing 1-2h.\n\n``` shell\n$bin/make-base-vm --arch amd64 --suite trusty\n-------------- snip -------------------\n2015-11-16 13:47:09,510 INFO    : Creating file systems\n2015-11-16 13:47:09,666 INFO ",https://github.com/bitcoin/bitcoin/pull/6900#issuecomment-157017902,157017902,
fanquake,2015-11-16T12:53:02Z,"Have you tried the latest Python vmbuilder? That solved that issue for me,\ncheck in the gitian guide for the updated link.\n\nI haven't had a chance to continue testing after getting that initial issue\nsolved. I can do tomorrow.\n\nOn Monday, November 16, 2015, Jonas Schnelli notifications@github.com\nwrote:\n\n> I really think this is useful.\n> But i can't get it running on my Debian 8 jessy m",https://github.com/bitcoin/bitcoin/pull/6900#issuecomment-157019839,157019839,
jonasschnelli,2015-11-16T13:32:56Z,@fanquake: Thanks! Damit. I forgot that Debian does not have the python vmbuilder tools over apt. Manually updated and it works now...\n\nTesting gitian building this PR now...\n,https://github.com/bitcoin/bitcoin/pull/6900#issuecomment-157027676,157027676,
jonasschnelli,2015-11-16T14:46:18Z,On my debian 8 machine I got the following errors:\n\n#### Linux:\n- boost linking problems\n  - (check the very bottom of the linux.log: ~~https://bitcoin.jonasschnelli.ch/pulls/6900/build-linux.log~~)\n\n#### MinGW:\n\n```\n---snip---\nconfigure: error: No working boost sleep implementation found.\n```\n\n(check: ~~https://bitcoin.jonasschnelli.ch/pulls/6900/build-win.log~~)\n\n#### OSX:\n\nwork,https://github.com/bitcoin/bitcoin/pull/6900#issuecomment-157055187,157055187,
laanwj,2015-11-16T15:41:00Z,Rebased this to master - going to retry my builds\n,https://github.com/bitcoin/bitcoin/pull/6900#issuecomment-157072776,157072776,
jonasschnelli,2015-11-16T15:43:51Z,Re-Kicked the builder... log-links above are invalid now.\n,https://github.com/bitcoin/bitcoin/pull/6900#issuecomment-157073620,157073620,
laanwj,2015-11-17T07:22:38Z,"Getting this now on the windows build, since rebase:\n\n```\ngcc gen_context.o -o gen_context\n/usr/bin/x86_64-w64-mingw32-ld: unrecognised emulation mode: elf_x86_64\nSupported emulations: i386pep i386pe\ncollect2: error: ld returned 1 exit status\n```\n\nThis is because of:\n\n```\nexport COMPILER_PATH=${WRAP_DIR}/${i}\n```\n\nThe workaround to set `MALLOC_PERTURB_` for linking no longer works. ",https://github.com/bitcoin/bitcoin/pull/6900#issuecomment-157297607,157297607,
laanwj,2015-11-18T18:05:41Z,"Pushed a new commit - all builds including windows should work now.\n\n(when testing, if you used gitian on 0.12 before, make sure that you remove your caches for 0.12, as they will have been built using previous c++ compiler, causing non-determinism and compile/link errors)\n",https://github.com/bitcoin/bitcoin/pull/6900#issuecomment-157804559,157804559,
jonasschnelli,2015-11-18T21:14:03Z,All three platforms are working here: https://bitcoin.jonasschnelli.ch/pulls/6900/\nNow it would be good if someone would post or compare the assert-files to see if it's really deterministic.\n,https://github.com/bitcoin/bitcoin/pull/6900#issuecomment-157865194,157865194,
fanquake,2015-11-19T05:58:00Z,"@jonasschnelli Are you building a release, or this pull request on top of master? My signatures don't match with yours currently.\n",https://github.com/bitcoin/bitcoin/pull/6900#issuecomment-157959973,157959973,
laanwj,2015-11-19T07:08:49Z,Building commit b082935 with the descriptors of commit b082935 should give:\n\n```\n82a5e6c87137b7a3f18d4230cc22b1d26b95875c436130de123c272defd5d6c9  bitcoin-0.11.99-linux32.tar.gz\nf2f81efaeeb16d55dfed2dc6dfa681569cb971b53a8441a3bf083ccb994f82a8  bitcoin-0.11.99-linux64.tar.gz\n67c3bc85ece1ad2905a7f801277fbd76d1e7ac653ad2e021cd7fadf1fa6a6307  bitcoin-0.11.99.tar.gz\n```\n\n```\n67c3bc85ece1ad2905,https://github.com/bitcoin/bitcoin/pull/6900#issuecomment-157972433,157972433,
jonasschnelli,2015-11-19T07:11:35Z,@fanquake: right. My build script always pulls a PR on top of master. A match would only be possible if you do the same (check the git HEAD~5 log): https://bitcoin.jonasschnelli.ch/pulls/6900/\n\nBut i'll try now to build https://github.com/bitcoin/bitcoin/commit/b08293544a207088193de8834bb754f5d212c9bf (to compare with @laanwj 's hashes)\n,https://github.com/bitcoin/bitcoin/pull/6900#issuecomment-157972725,157972725,
jonasschnelli,2015-11-19T08:13:04Z,Linux / OSX: **match**\n\n~~Windows: **no match** (https://bitcoin.jonasschnelli.ch/pulls/6900/bitcoin-win-0.12-build.assert) ~~\nI used\n\n```\nb8affff612d645598a4642dcc4eef7d4974c02d73c31a99ba2faa36425142aca  bitcoin-win-0.12-desc.yml\ngit:b08293544a207088193de8834bb754f5d212c9bf bitcoin\n```\n\nAny ideas?\n,https://github.com/bitcoin/bitcoin/pull/6900#issuecomment-157985554,157985554,
laanwj,2015-11-19T08:22:16Z,"~~Which packages differ? Can you upload them?~~\nLooking at your assert link, they simply match.\n",https://github.com/bitcoin/bitcoin/pull/6900#issuecomment-157986998,157986998,
jonasschnelli,2015-11-19T08:30:31Z,Correction: window build **matched**. (Compared against the wrong file).\n\nNice!\nTested ACK.\n,https://github.com/bitcoin/bitcoin/pull/6900#issuecomment-157988203,157988203,
fanquake,2015-11-19T12:05:05Z,"ACK\n\nOn Thursday, November 19, 2015, Wladimir J. van der Laan <\nnotifications@github.com> wrote:\n\n> Merged #6900 https://github.com/bitcoin/bitcoin/pull/6900.\n> \n> —\n> Reply to this email directly or view it on GitHub\n> https://github.com/bitcoin/bitcoin/pull/6900#event-469081233.\n",https://github.com/bitcoin/bitcoin/pull/6900#issuecomment-158037351,158037351,
laanwj,2015-11-19T12:28:38Z,Thanks a lot for testing @fanquake @jonasschnelli \n,https://github.com/bitcoin/bitcoin/pull/6900#issuecomment-158043878,158043878,
theuni,2015-11-19T17:38:29Z,"@laanwj Sorry for missing this while traveling.\n\nFor the cache issue, sounds like depends needs to take the output as `$(CXX) -v` as part of the hash, so that a new compiler invalidates all binaries.\n",https://github.com/bitcoin/bitcoin/pull/6900#issuecomment-158130795,158130795,
