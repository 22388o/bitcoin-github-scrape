[
  {
    "sha": "6a7a70b8cf05a82737c72020fd2b0eebc97cb5e4",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo2YTdhNzBiOGNmMDVhODI3MzdjNzIwMjBmZDJiMGVlYmM5N2NiNWU0",
    "commit": {
      "author": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2019-07-11T18:36:02Z"
      },
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2019-07-15T08:13:39Z"
      },
      "message": "test: enable passing wildcards with path to test runner\n\nCurrently, passing wildcard testname args to the test runner from outside the `test/functional/` directory does not work. See this recent IRC discussion for more background: http://www.erisian.com.au/bitcoin-core-dev/log-2019-07-10.html#l-262 (lines 262 to 323).\n\nThis small change enables passing multiple wildcards with paths, as long as the paths are coherent. Examples:\n  - test/functional/test_runner.py test/functional/wallet*\n  - functional/test_runner.py functional/wallet*\n  - test/functional/test_runner.py ./test/functional/tool* test/functional/mempool*\n\nA current limitation that this PR does not change: 9 test files with arguments in their name are not picked up by wildcard search.\n\n- Squashed commit: non-mutating version\n\n- Squashed commit: minor code optimisation",
      "tree": {
        "sha": "3f7b1d1af375f2302c0b5bc96520fa292f24ed05",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3f7b1d1af375f2302c0b5bc96520fa292f24ed05"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6a7a70b8cf05a82737c72020fd2b0eebc97cb5e4",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEd6u7+MhX7zEv6RP5T1chs9Djkh0FAl0sNd0ACgkQT1chs9Dj\nkh1Euw//XIaoZ8m71muzbt2HGcQKPaYjdWyIs8kph6T2RBYWolVauoowAoy8Q3Oc\nh2anPiILKaY5BMEjoLBOTzVlH6YfBowGU8nSOFPaLhN4E0g1fBxnuG7ZcCZmKBp3\nl2BaicPkyhgYUOBBHAAVjU+n7YlL7L2oWeufUwtsl032bQAJRFUouWHefnuYJ4F1\n9qNz9nslRcsuomCGSXQmctOGbskrb2LBaysJHS5SQhjXiFFvNxX069oZGa535n3o\na1Z4HU8W9fE8ljOOIQ/ZBJNL6OF9HjfbW/PgChAqSvt0nnI/aIvpI+1QMI5YP7ax\n1tbqOuEMg0dLqzvktKvdFruIkRAWImq2LNbMWK4z+wWcbz78LApIaViTZ592Jxqk\n16C+sKYkQabcmuqRhsZG+O78aQ0BPYiwk9poV2wzdOpvkcdyxz9p/boLURKcoI89\nQxkcLhE6vRGUwSo6PsDFNoLzQc5oyo2k9SfvM9JaRywRdUVE3gbr6XKX3f0D9t38\nuFpjyIKu5rRDys/ZXRUpI62hfk2L09D5jIpUDSrOVLUBwS3CA3fW48d5EN9F3rvK\nrX4DUx9ktoTZEaZmlLXCJBgzFJByyV6c3aUF29sgISVreZ8lJM3Fasl1dXJPxGk4\nCwHsl3kslTBuSNP+BlMYXxnFlK7Z5How1MP2NvK/HYH4kpcBiHs=\n=yN2r\n-----END PGP SIGNATURE-----\n-----BEGIN OPENTIMESTAMPS GIT TIMESTAMP-----\n\nAQHwIBlwVj5IBPWDfHvyS3CahB92fTnVvI0UFYeIRUsYFHIZCP/wEDGssMpnT0BW\nEQKw1VoXSuUI8QRdLDXf8AgWVD2v4K5/hACD3+MNLvkMjiMiaHR0cHM6Ly9idGMu\nY2FsZW5kYXIuY2F0YWxsYXh5LmNvbf/wEMmDvRPMpsOT99iqHMi6IvsI8QRdLDXe\n8AhL7ESK9gJFWwCD3+MNLvkMji4taHR0cHM6Ly9hbGljZS5idGMuY2FsZW5kYXIu\nb3BlbnRpbWVzdGFtcHMub3Jn//AQ2WLlbzjVQBY/h1BSZlP3YAjxBF0sNd7wCABD\ngWlFNc/SAIPf4w0u+QyOLCtodHRwczovL2JvYi5idGMuY2FsZW5kYXIub3BlbnRp\nbWVzdGFtcHMub3Jn8BDho/LClD93fpiXiRpA2vHbCPEEXSw13fAISa92MrTXpNMA\ng9/jDS75DI4pKGh0dHBzOi8vZmlubmV5LmNhbGVuZGFyLmV0ZXJuaXR5d2FsbC5j\nb20=\n-----END OPENTIMESTAMPS GIT TIMESTAMP-----",
        "payload": "tree 3f7b1d1af375f2302c0b5bc96520fa292f24ed05\nparent 4fcccdac785e09ad5627b3bf4811dfba353693e8\nauthor Jon Atack <jon@atack.com> 1562870162 +0200\ncommitter Jon Atack <jon@atack.com> 1563178419 +0200\n\ntest: enable passing wildcards with path to test runner\n\nCurrently, passing wildcard testname args to the test runner from outside the `test/functional/` directory does not work. See this recent IRC discussion for more background: http://www.erisian.com.au/bitcoin-core-dev/log-2019-07-10.html#l-262 (lines 262 to 323).\n\nThis small change enables passing multiple wildcards with paths, as long as the paths are coherent. Examples:\n  - test/functional/test_runner.py test/functional/wallet*\n  - functional/test_runner.py functional/wallet*\n  - test/functional/test_runner.py ./test/functional/tool* test/functional/mempool*\n\nA current limitation that this PR does not change: 9 test files with arguments in their name are not picked up by wildcard search.\n\n- Squashed commit: non-mutating version\n\n- Squashed commit: minor code optimisation\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6a7a70b8cf05a82737c72020fd2b0eebc97cb5e4",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/6a7a70b8cf05a82737c72020fd2b0eebc97cb5e4",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6a7a70b8cf05a82737c72020fd2b0eebc97cb5e4/comments",
    "author": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "4fcccdac785e09ad5627b3bf4811dfba353693e8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4fcccdac785e09ad5627b3bf4811dfba353693e8",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/4fcccdac785e09ad5627b3bf4811dfba353693e8"
      }
    ],
    "stats": {
      "total": 19,
      "additions": 15,
      "deletions": 4
    },
    "files": [
      {
        "sha": "6092d734ec566f7b223fca1d0b9c8f976045bc1a",
        "filename": "test/functional/test_runner.py",
        "status": "modified",
        "additions": 15,
        "deletions": 4,
        "changes": 19,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6a7a70b8cf05a82737c72020fd2b0eebc97cb5e4/test/functional/test_runner.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6a7a70b8cf05a82737c72020fd2b0eebc97cb5e4/test/functional/test_runner.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/test_runner.py?ref=6a7a70b8cf05a82737c72020fd2b0eebc97cb5e4",
        "patch": "@@ -269,11 +269,22 @@ def main():\n     test_list = []\n     if tests:\n         # Individual tests have been specified. Run specified tests that exist\n-        # in the ALL_SCRIPTS list. Accept the name with or without .py extension.\n-        tests = [test + \".py\" if \".py\" not in test else test for test in tests]\n+        # in the ALL_SCRIPTS list. Accept names with or without a .py extension.\n+        # Specified tests can contain wildcards, but in that case the supplied\n+        # paths should be coherent, e.g. the same path as that provided to call\n+        # test_runner.py. Examples:\n+        #   `test/functional/test_runner.py test/functional/wallet*`\n+        #   `test/functional/test_runner.py ./test/functional/wallet*`\n+        #   `test_runner.py wallet*`\n+        #   but not:\n+        #   `test/functional/test_runner.py wallet*`\n+        # Multiple wildcards can be passed:\n+        #   `test_runner.py tool* mempool*`\n         for test in tests:\n-            if test in ALL_SCRIPTS:\n-                test_list.append(test)\n+            script = test.split(\"/\")[-1]\n+            script = script + \".py\" if \".py\" not in script else script\n+            if script in ALL_SCRIPTS:\n+                test_list.append(script)\n             else:\n                 print(\"{}WARNING!{} Test '{}' not found in full test list.\".format(BOLD[1], BOLD[0], test))\n     elif args.extended:"
      }
    ]
  },
  {
    "sha": "e142ee03e7a139168aa1dbf5910c616f60d25042",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzplMTQyZWUwM2U3YTEzOTE2OGFhMWRiZjU5MTBjNjE2ZjYwZDI1MDQy",
    "commit": {
      "author": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2019-07-11T19:18:02Z"
      },
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2019-07-15T08:14:23Z"
      },
      "message": "doc: describe how to pass wildcard names to test runner",
      "tree": {
        "sha": "8aefe5ecbc0da435ace471854fdf358436ff92ee",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/8aefe5ecbc0da435ace471854fdf358436ff92ee"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e142ee03e7a139168aa1dbf5910c616f60d25042",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEd6u7+MhX7zEv6RP5T1chs9Djkh0FAl0sNd8ACgkQT1chs9Dj\nkh1Hdg//U4cwO7V7NDDq+zu2b8llrPR59dvUQUCg/yasDLcfw8nwwxvV61xw/Zfm\nwTnlUJ6FmyQm4iSQa1Nm+gLfBziLo0AseemwxlcoesPyks18ntWKkjDh/a5FFQL7\nx2k9a/O0/RKW22fL3kDiISK1cKn37yGKq1kfdCKjuNMyeu14Qg5qh+OYtTM5LT0R\nT99zAMDLYzn0hQQ1oHPTx7/k7HMIR/Ge+spwntTXnpEAeb7tsZFYG7FY6Ezq+Thr\nf+woB+T57dTb+4nFPgTTrL8x/mg6gpAVMPFzFwgMZ5i71/qaJJJZGmhJ1KAIr+GP\npYZjEQnc+YOGWo9AZnggAPBBfmj0x6lXJQ4FRFKkR7E8ZaTqpB57b6koFuZp4VtT\nFlQXwIKtOkWQCyWKvDPFL86fEpsR/0eQNj6ypAmeAwdTl4JZj4hVf6K/BB123nNw\nM/+lmZIdh5yJUanuCg8rmzgTZ262Qos9fMuhMnap/d8ONYYpZyWi3k9zrJJEnpmT\nwLspB6P5Cn7i0jyCR2buLC36ZEC+BCMgz4kSBA9mWldDVcTSefR2yeQDq6IFojRb\nm8lb7LEuczNpiqqcqkBa74ALcpfDZcPDCrAfza6Ak2RFDBQeqJ9vliDbwADY0R3A\nVM79fJSs18BP2vABf5+dpEPmfRTaqTEWV9rvXeA8WMSvnKrSJRE=\n=GZF9\n-----END PGP SIGNATURE-----\n-----BEGIN OPENTIMESTAMPS GIT TIMESTAMP-----\n\nAQHwIIVX4GUjgBtE/xFwCZQ7Fgnn1JNKEcs8vLNfKSH4hKegCP/wEAKBAksvKPuj\n/dcAB9AMjRMI8QRdLDXg8AjRUO57DbWPNwCD3+MNLvkMjikoaHR0cHM6Ly9maW5u\nZXkuY2FsZW5kYXIuZXRlcm5pdHl3YWxsLmNvbf/wEE2r3q+GantF5xJ8tX8VJvAI\n8QRdLDXh8Ag0dQ/ILvp9ZgCD3+MNLvkMjiwraHR0cHM6Ly9ib2IuYnRjLmNhbGVu\nZGFyLm9wZW50aW1lc3RhbXBzLm9yZ//wEGVeiXWTxRI+487ufDvW8gQI8QRdLDXh\n8Ai6uKmxJpVfxQCD3+MNLvkMjiMiaHR0cHM6Ly9idGMuY2FsZW5kYXIuY2F0YWxs\nYXh5LmNvbfAQuKLh4p7vn0iZhnLpgW2i0QjxBF0sNeHwCG8Aq3oD5ZbPAIPf4w0u\n+QyOLi1odHRwczovL2FsaWNlLmJ0Yy5jYWxlbmRhci5vcGVudGltZXN0YW1wcy5v\ncmc=\n-----END OPENTIMESTAMPS GIT TIMESTAMP-----",
        "payload": "tree 8aefe5ecbc0da435ace471854fdf358436ff92ee\nparent 6a7a70b8cf05a82737c72020fd2b0eebc97cb5e4\nauthor Jon Atack <jon@atack.com> 1562872682 +0200\ncommitter Jon Atack <jon@atack.com> 1563178463 +0200\n\ndoc: describe how to pass wildcard names to test runner\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e142ee03e7a139168aa1dbf5910c616f60d25042",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/e142ee03e7a139168aa1dbf5910c616f60d25042",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e142ee03e7a139168aa1dbf5910c616f60d25042/comments",
    "author": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "6a7a70b8cf05a82737c72020fd2b0eebc97cb5e4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6a7a70b8cf05a82737c72020fd2b0eebc97cb5e4",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/6a7a70b8cf05a82737c72020fd2b0eebc97cb5e4"
      }
    ],
    "stats": {
      "total": 23,
      "additions": 23,
      "deletions": 0
    },
    "files": [
      {
        "sha": "8f08b7afe4fc6bb5576da3776c51644da6dffb5b",
        "filename": "test/README.md",
        "status": "modified",
        "additions": 23,
        "deletions": 0,
        "changes": 23,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e142ee03e7a139168aa1dbf5910c616f60d25042/test/README.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e142ee03e7a139168aa1dbf5910c616f60d25042/test/README.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/README.md?ref=e142ee03e7a139168aa1dbf5910c616f60d25042",
        "patch": "@@ -49,6 +49,29 @@ You can run any combination (incl. duplicates) of tests by calling:\n test/functional/test_runner.py <testname1> <testname2> <testname3> ...\n ```\n \n+Wildcard test names can be passed, if the paths are coherent and the test runner\n+is called from a `bash` shell or similar that does the globbing. For example,\n+to run all the wallet tests:\n+\n+```\n+test/functional/test_runner.py test/functional/wallet*\n+functional/test_runner.py functional/wallet* (called from the test/ directory)\n+test_runner.py wallet* (called from the test/functional/ directory)\n+```\n+\n+but not\n+\n+```\n+test/functional/test_runner.py wallet*\n+```\n+\n+Combinations of wildcards can be passed:\n+\n+```\n+test/functional/test_runner.py ./test/functional/tool* test/functional/mempool*\n+test_runner.py tool* mempool*\n+```\n+\n Run the regression test suite with:\n \n ```"
      }
    ]
  }
]