[
  {
    "sha": "a2d0fc658a7b21d2d41ef2a6c657d24114b6c49e",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzphMmQwZmM2NThhN2IyMWQyZDQxZWYyYTZjNjU3ZDI0MTE0YjZjNDll",
    "commit": {
      "author": {
        "name": "Ruben Dario Ponticelli",
        "email": "rdponticelli@gmail.com",
        "date": "2014-10-28T17:48:50Z"
      },
      "committer": {
        "name": "Ruben Dario Ponticelli",
        "email": "rdponticelli@gmail.com",
        "date": "2014-10-28T21:16:52Z"
      },
      "message": "Fix IsInitialBlockDownload which was broken by headers first.",
      "tree": {
        "sha": "db2a32354b47ff8c8fe441222ef1bbefa2033a79",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/db2a32354b47ff8c8fe441222ef1bbefa2033a79"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a2d0fc658a7b21d2d41ef2a6c657d24114b6c49e",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1\n\niQIcBAABCAAGBQJUUAfGAAoJEAB9eonG33stOfEP/0iEh6KpQI9bGIrGmmoG+hdT\nl9JE0djKz7FIiH2Uva05zKwlBy2xOKWZgbKPMwvOWgC9ETqz+IrzfSoONja5aMZL\nFPI4fN0Opi4qRdcz/2vUz4iswBd56nhFKLBc/9kqMZwH3f6d/0sR+46uXurBcO0C\naWbp36S/oMFMmYw/1kLBGQDMJdP7DWMye4hNNAPkXvawma593mWZ9VSUV6Wbdxfp\nc5cQNQqqCj/yWeNs4W796w51ZMujrO2gPW1VHSGewE8ZBmXxUDGty0munaZSdGH0\nvFqOBut9yzyRB0rjplHPE1yVZYPgGomntY2OHRNex4OoRPq1zM2EmrrCX8YiIFVW\ni5Jwwm6sPkPkarPOOCMQhNplv4yikfYr9QERkKoE8HH/XnqStoHCmJxhjZoklceK\nF0RLEiL1Qdlg9HUl5q6mVq0hwYVnHREXQ0vVPVXdeAVYlHK1ql8CngXdqAk31HLQ\nce8ZaOQUpCWTD5FiHGPvIwzmAyT1Iu/m6JTXl07DuibsLGJfEB4kgzSqLE3l/45+\nxb14xhxwpEnHd27HNNJ+jz+dnqK2m4sJoc5+8LY8isCU7bK4es1ED+dRt3FoeU9E\nGGp0g5Bgpo7lAgBrevjS7BtKyXOurOvawRpWzbgWlYfaBv2Ln4iYczlZ11Q8f9ux\n7qX2FT2YQivo1Iriww5Y\n=XusI\n-----END PGP SIGNATURE-----",
        "payload": "tree db2a32354b47ff8c8fe441222ef1bbefa2033a79\nparent 723c7526368badda15df8ac1ffc047a0ab2e384a\nauthor Ruben Dario Ponticelli <rdponticelli@gmail.com> 1414518530 -0300\ncommitter Ruben Dario Ponticelli <rdponticelli@gmail.com> 1414531012 -0300\n\nFix IsInitialBlockDownload which was broken by headers first.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a2d0fc658a7b21d2d41ef2a6c657d24114b6c49e",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/a2d0fc658a7b21d2d41ef2a6c657d24114b6c49e",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a2d0fc658a7b21d2d41ef2a6c657d24114b6c49e/comments",
    "author": {
      "login": "rdponticelli",
      "id": 1192483,
      "node_id": "MDQ6VXNlcjExOTI0ODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1192483?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rdponticelli",
      "html_url": "https://github.com/rdponticelli",
      "followers_url": "https://api.github.com/users/rdponticelli/followers",
      "following_url": "https://api.github.com/users/rdponticelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/rdponticelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rdponticelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rdponticelli/subscriptions",
      "organizations_url": "https://api.github.com/users/rdponticelli/orgs",
      "repos_url": "https://api.github.com/users/rdponticelli/repos",
      "events_url": "https://api.github.com/users/rdponticelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rdponticelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "rdponticelli",
      "id": 1192483,
      "node_id": "MDQ6VXNlcjExOTI0ODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1192483?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rdponticelli",
      "html_url": "https://github.com/rdponticelli",
      "followers_url": "https://api.github.com/users/rdponticelli/followers",
      "following_url": "https://api.github.com/users/rdponticelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/rdponticelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rdponticelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rdponticelli/subscriptions",
      "organizations_url": "https://api.github.com/users/rdponticelli/orgs",
      "repos_url": "https://api.github.com/users/rdponticelli/repos",
      "events_url": "https://api.github.com/users/rdponticelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rdponticelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "723c7526368badda15df8ac1ffc047a0ab2e384a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/723c7526368badda15df8ac1ffc047a0ab2e384a",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/723c7526368badda15df8ac1ffc047a0ab2e384a"
      }
    ],
    "stats": {
      "total": 11,
      "additions": 2,
      "deletions": 9
    },
    "files": [
      {
        "sha": "bf487df39f3e8204b0c84d2753cde9f631824f3e",
        "filename": "src/main.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 9,
        "changes": 11,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a2d0fc658a7b21d2d41ef2a6c657d24114b6c49e/src/main.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a2d0fc658a7b21d2d41ef2a6c657d24114b6c49e/src/main.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/main.cpp?ref=a2d0fc658a7b21d2d41ef2a6c657d24114b6c49e",
        "patch": "@@ -1177,15 +1177,8 @@ bool IsInitialBlockDownload()\n     LOCK(cs_main);\n     if (fImporting || fReindex || chainActive.Height() < Checkpoints::GetTotalBlocksEstimate())\n         return true;\n-    static int64_t nLastUpdate;\n-    static CBlockIndex* pindexLastBest;\n-    if (chainActive.Tip() != pindexLastBest)\n-    {\n-        pindexLastBest = chainActive.Tip();\n-        nLastUpdate = GetTime();\n-    }\n-    return (GetTime() - nLastUpdate < 10 &&\n-            chainActive.Tip()->GetBlockTime() < GetTime() - 24 * 60 * 60);\n+    return (chainActive.Height() < pindexBestHeader->nHeight - 24 * 6 ||\n+            pindexBestHeader->GetBlockTime() < GetTime() - 24 * 60 * 60);\n }\n \n bool fLargeWorkForkFound = false;"
      }
    ]
  },
  {
    "sha": "9ec75c5ef4182a38e261beaafdc94325785cc7c5",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo5ZWM3NWM1ZWY0MTgyYTM4ZTI2MWJlYWFmZGM5NDMyNTc4NWNjN2M1",
    "commit": {
      "author": {
        "name": "Ruben Dario Ponticelli",
        "email": "rdponticelli@gmail.com",
        "date": "2014-11-05T23:52:27Z"
      },
      "committer": {
        "name": "Ruben Dario Ponticelli",
        "email": "rdponticelli@gmail.com",
        "date": "2014-11-07T11:09:31Z"
      },
      "message": "Add a locking mechanism to IsInitialBlockDownload to ensure it never goes from false to true.",
      "tree": {
        "sha": "8685363dea0dcf688c127c463361225a971176ef",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/8685363dea0dcf688c127c463361225a971176ef"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9ec75c5ef4182a38e261beaafdc94325785cc7c5",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1\n\niQIcBAABCAAGBQJUXKh3AAoJEAB9eonG33stgNgQAK8fD/DBKYAFrckgThALtJM9\nqv41s6kfzNngz95R55uiL+yj3kPBXyeD86jx0mDSY2LRtAfsQbKWL6lTggxQWegQ\nKn7Vazamr53plKL6uI+TG8sPvJBgKHGmG6CFgnA3eRnCipk4ZAS7ojvpM/m0HJOy\nAtCpK+Pm1CXEU1w5qutI2tZMbrFDifwFSF5uBjvyneLV2mYzEvNp8tHgVZ7TLfIj\nKKS6RHQeB/XTVviMjbOUwGPOjysrmDDvR7YysN0zkDPJBr6zVPLHJmB4bh0YLdQT\nhjMysE0Ootaggmsip2qxnA5oM4Ehfn8BpX10LP4ir5b3Ri+ctrrJsZ0liSxD1W/2\nlfLQQEvT7rHDN3DzDWBsZMb5kM0JfoQdYzfLLLbpS1oLy/LvWn+Z57sOROkFTN9S\nAagodIeukTJqY1GxhdsyFpcm+h26aiDZobszaLv9Igwv5YleCs4jf7mno7uli6fY\n2anpjhOK94X7MryykdOSaAbPmfYQ117yocNTuox5Y6j1sVs+EHhTLkasbsKVZDIl\n77RYsZipWb+QtMEP/skmYT2cutnL8EG9z0eoHrsD0X/latkzIJoRLV/+/L81Nsfv\nNqZqDjA4X/7TEWq+A1scSHiSDJvPgp2jyiSth+w3nfC9egTdch0oaKP2AKGjKzAI\ncT7QVei6Tn3tQja65WbZ\n=TCbA\n-----END PGP SIGNATURE-----",
        "payload": "tree 8685363dea0dcf688c127c463361225a971176ef\nparent a2d0fc658a7b21d2d41ef2a6c657d24114b6c49e\nauthor Ruben Dario Ponticelli <rdponticelli@gmail.com> 1415231547 -0300\ncommitter Ruben Dario Ponticelli <rdponticelli@gmail.com> 1415358571 -0300\n\nAdd a locking mechanism to IsInitialBlockDownload to ensure it never goes from false to true.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9ec75c5ef4182a38e261beaafdc94325785cc7c5",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/9ec75c5ef4182a38e261beaafdc94325785cc7c5",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9ec75c5ef4182a38e261beaafdc94325785cc7c5/comments",
    "author": {
      "login": "rdponticelli",
      "id": 1192483,
      "node_id": "MDQ6VXNlcjExOTI0ODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1192483?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rdponticelli",
      "html_url": "https://github.com/rdponticelli",
      "followers_url": "https://api.github.com/users/rdponticelli/followers",
      "following_url": "https://api.github.com/users/rdponticelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/rdponticelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rdponticelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rdponticelli/subscriptions",
      "organizations_url": "https://api.github.com/users/rdponticelli/orgs",
      "repos_url": "https://api.github.com/users/rdponticelli/repos",
      "events_url": "https://api.github.com/users/rdponticelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rdponticelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "rdponticelli",
      "id": 1192483,
      "node_id": "MDQ6VXNlcjExOTI0ODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1192483?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rdponticelli",
      "html_url": "https://github.com/rdponticelli",
      "followers_url": "https://api.github.com/users/rdponticelli/followers",
      "following_url": "https://api.github.com/users/rdponticelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/rdponticelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rdponticelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rdponticelli/subscriptions",
      "organizations_url": "https://api.github.com/users/rdponticelli/orgs",
      "repos_url": "https://api.github.com/users/rdponticelli/repos",
      "events_url": "https://api.github.com/users/rdponticelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rdponticelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "a2d0fc658a7b21d2d41ef2a6c657d24114b6c49e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a2d0fc658a7b21d2d41ef2a6c657d24114b6c49e",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/a2d0fc658a7b21d2d41ef2a6c657d24114b6c49e"
      }
    ],
    "stats": {
      "total": 8,
      "additions": 7,
      "deletions": 1
    },
    "files": [
      {
        "sha": "0fd8065342e13612c92f88416cb4e88c239d80e5",
        "filename": "src/main.cpp",
        "status": "modified",
        "additions": 7,
        "deletions": 1,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/9ec75c5ef4182a38e261beaafdc94325785cc7c5/src/main.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/9ec75c5ef4182a38e261beaafdc94325785cc7c5/src/main.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/main.cpp?ref=9ec75c5ef4182a38e261beaafdc94325785cc7c5",
        "patch": "@@ -1177,8 +1177,14 @@ bool IsInitialBlockDownload()\n     LOCK(cs_main);\n     if (fImporting || fReindex || chainActive.Height() < Checkpoints::GetTotalBlocksEstimate())\n         return true;\n-    return (chainActive.Height() < pindexBestHeader->nHeight - 24 * 6 ||\n+    static bool lockIBDState = false;\n+    if (lockIBDState)\n+        return false;\n+    bool state = (chainActive.Height() < pindexBestHeader->nHeight - 24 * 6 ||\n             pindexBestHeader->GetBlockTime() < GetTime() - 24 * 60 * 60);\n+    if (!state)\n+        lockIBDState = true;\n+    return state;\n }\n \n bool fLargeWorkForkFound = false;"
      }
    ]
  }
]