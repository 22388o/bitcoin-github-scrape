meshcollider,2020-05-02 11:20:46,Concept / code review ACK c7933899e93b38f444d87b12858fd5a124f2066c modulo someone testing that it does fix the performance issue linked,https://github.com/bitcoin/bitcoin/pull/18851#issuecomment-622938080,622938080,
MarcoFalke,2020-05-02 11:47:49,Concept ACK if this fixes the problem. Will test when my new hardware arrives,https://github.com/bitcoin/bitcoin/pull/18851#issuecomment-622941182,622941182,
laanwj,2020-05-02 11:57:24,"If this doesn't solve the problem, then the problem isn't thread_local but looking up thread names in the first place, and we should remove thread name logging completely (as well as thread_local).\n\nA workaround then that would avoid the need for this bookkeeping at all would be:\n- Log thread names *once* with their associated ID after creation on thread name setting\n- Log thread IDs inste",https://github.com/bitcoin/bitcoin/pull/18851#issuecomment-622942365,622942365,
DrahtBot,2020-05-02 12:27:59,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #18849 (The Zero Allocations project by jb55)\n\nIf you consider this pull request important, please also help to review t",https://github.com/bitcoin/bitcoin/pull/18851#issuecomment-622946109,622946109,
hebasto,2020-05-02 19:18:55,Concept ACK. Keep testing.,https://github.com/bitcoin/bitcoin/pull/18851#issuecomment-623001238,623001238,
hebasto,2020-05-02 20:40:40,"Testing on [ODROID-HC1](https://www.hardkernel.com/shop/odroid-hc1-home-cloud-one/):\n```\n$ uname -srm\nLinux 4.14.173-173 armv7l\n$ ./autogen.sh && ./configure --disable-wallet --disable-tests --disable-bench --disable-zmq --disable-man --disable-util-tx --disable-util-wallet --without-miniupnpc --without-libs --without-gui CC=clang-9 CXX=clang++-9 && make clean && time taskset --cpu-list 4-",https://github.com/bitcoin/bitcoin/pull/18851#issuecomment-623010434,623010434,
hebasto,2020-05-03 00:42:40,"Here are results of three consequent tests on [ODROID-HC1](https://www.hardkernel.com/shop/odroid-hc1-home-cloud-one/):\n```\n$ uname -srm\nLinux 4.14.173-173 armv7l\n$ date; time bitcoin-cli -rpcclienttimeout=10000 gettxoutsetinfoSat May  2 23:18:12 UTC 2020\n{\n  ""height"": 628635,\n  ""bestblock"": ""0000000000000000000210066becbfb2ebfdd957d3bdaec7190f46d87ce59b7a"",\n  ""transactions"": 39898",https://github.com/bitcoin/bitcoin/pull/18851#issuecomment-623035027,623035027,
hebasto,2020-05-03 09:05:13,"It seems `thread_local` is not the root of the performance degradation.\nPlease see https://github.com/bitcoin/bitcoin/issues/18538#issuecomment-623078397",https://github.com/bitcoin/bitcoin/pull/18851#issuecomment-623078614,623078614,
DrahtBot,2020-05-04 05:38:42,<!--a722867cd34abeea1fadc8d60700f111-->\n### Gitian builds\n\n| File | commit 68ef9523d1bcd00afbccee2a6585c9f82ddcdb31<br>(master) | commit 4c270d2f47d244ef37c4aa1377c0d56b3b922bef<br>(master and this pull) |\n|--|--|--|\n| *-aarch64-linux-gnu-debug.tar.gz | [`f563236ed2fe55e7...`](https://drahtbot.space/gitian/bitcoin/bitcoin/68ef9523d1bcd00afbccee2a6585c9f82ddcdb31/bitcoin-68ef9523d1-aarch64-lin,https://github.com/bitcoin/bitcoin/pull/18851#issuecomment-623266896,623266896,
laanwj,2020-05-04 13:18:18,"Okay. So is it still worth keeping this open? It would make thread-name logging work in the gitian-built binaries which lack `thread_local`. And cleans up the build system a bit.\n",https://github.com/bitcoin/bitcoin/pull/18851#issuecomment-623458429,623458429,
hebasto,2020-05-04 13:20:21,"> It would make thread-name logging work in the gitian-built binaries which lack `thread_local`. And cleans up the build system a bit.\n\nCorrect. So keep reviewing.",https://github.com/bitcoin/bitcoin/pull/18851#issuecomment-623459572,623459572,
MarcoFalke,2020-05-04 13:32:25,"I am currently syncing a node to debug this issue.\n\nAlso, glibc can probably be bumped by one minor version in the next release, which is going to switch to C++17. Then, potentially the same build cleanups can be done?",https://github.com/bitcoin/bitcoin/pull/18851#issuecomment-623465977,623465977,
