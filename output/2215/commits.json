[
  {
    "sha": "311993ab106c250a1779bfdb649cf4f8c2416fb5",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzozMTE5OTNhYjEwNmMyNTBhMTc3OWJmZGI2NDljZjRmOGMyNDE2ZmI1",
    "commit": {
      "author": {
        "name": "Philip Kaufmann",
        "email": "phil.kaufmann@t-online.de",
        "date": "2013-01-25T17:46:53Z"
      },
      "committer": {
        "name": "Philip Kaufmann",
        "email": "phil.kaufmann@t-online.de",
        "date": "2013-03-18T06:44:22Z"
      },
      "message": "Bitcoin-Qt: add \"send coins\" to context menu in addressbook\n\n- allows to directly select an address from the addressbook, chose \"send\n  coins\" from the context menu, which sends you to sendcoins tab and fills\n  in the selected address",
      "tree": {
        "sha": "5a103deacc3066bf1733b843dbfe60186995e0cc",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5a103deacc3066bf1733b843dbfe60186995e0cc"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/311993ab106c250a1779bfdb649cf4f8c2416fb5",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/311993ab106c250a1779bfdb649cf4f8c2416fb5",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/311993ab106c250a1779bfdb649cf4f8c2416fb5",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/311993ab106c250a1779bfdb649cf4f8c2416fb5/comments",
    "author": null,
    "committer": null,
    "parents": [
      {
        "sha": "74e4d80068f9c29d4891439332b4027328c8584b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/74e4d80068f9c29d4891439332b4027328c8584b",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/74e4d80068f9c29d4891439332b4027328c8584b"
      }
    ],
    "stats": {
      "total": 60,
      "additions": 56,
      "deletions": 4
    },
    "files": [
      {
        "sha": "9e35e51bbf67ccde36e63913afb46236261e364d",
        "filename": "src/qt/addressbookpage.cpp",
        "status": "modified",
        "additions": 16,
        "deletions": 0,
        "changes": 16,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/311993ab106c250a1779bfdb649cf4f8c2416fb5/src/qt/addressbookpage.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/311993ab106c250a1779bfdb649cf4f8c2416fb5/src/qt/addressbookpage.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/addressbookpage.cpp?ref=311993ab106c250a1779bfdb649cf4f8c2416fb5",
        "patch": "@@ -65,6 +65,7 @@ AddressBookPage::AddressBookPage(Mode mode, Tabs tab, QWidget *parent) :\n     QAction *copyAddressAction = new QAction(ui->copyToClipboard->text(), this);\n     QAction *copyLabelAction = new QAction(tr(\"Copy &Label\"), this);\n     QAction *editAction = new QAction(tr(\"&Edit\"), this);\n+    QAction *sendCoinsAction = new QAction(tr(\"Send &Coins\"), this);\n     QAction *showQRCodeAction = new QAction(ui->showQRCode->text(), this);\n     QAction *signMessageAction = new QAction(ui->signMessage->text(), this);\n     QAction *verifyMessageAction = new QAction(ui->verifyMessage->text(), this);\n@@ -78,6 +79,8 @@ AddressBookPage::AddressBookPage(Mode mode, Tabs tab, QWidget *parent) :\n     if(tab == SendingTab)\n         contextMenu->addAction(deleteAction);\n     contextMenu->addSeparator();\n+    if(tab == SendingTab)\n+        contextMenu->addAction(sendCoinsAction);\n #ifdef USE_QRCODE\n     contextMenu->addAction(showQRCodeAction);\n #endif\n@@ -91,6 +94,7 @@ AddressBookPage::AddressBookPage(Mode mode, Tabs tab, QWidget *parent) :\n     connect(copyLabelAction, SIGNAL(triggered()), this, SLOT(onCopyLabelAction()));\n     connect(editAction, SIGNAL(triggered()), this, SLOT(onEditAction()));\n     connect(deleteAction, SIGNAL(triggered()), this, SLOT(on_deleteButton_clicked()));\n+    connect(sendCoinsAction, SIGNAL(triggered()), this, SLOT(onSendCoins_clicked()));\n     connect(showQRCodeAction, SIGNAL(triggered()), this, SLOT(on_showQRCode_clicked()));\n     connect(signMessageAction, SIGNAL(triggered()), this, SLOT(on_signMessage_clicked()));\n     connect(verifyMessageAction, SIGNAL(triggered()), this, SLOT(on_verifyMessage_clicked()));\n@@ -206,6 +210,18 @@ void AddressBookPage::on_verifyMessage_clicked()\n     }\n }\n \n+void AddressBookPage::onSendCoins_clicked()\n+{\n+    QTableView *table = ui->tableView;\n+    QModelIndexList indexes = table->selectionModel()->selectedRows(AddressTableModel::Address);\n+\n+    foreach (QModelIndex index, indexes)\n+    {\n+        QString address = index.data().toString();\n+        emit sendCoins(address);\n+    }\n+}\n+\n void AddressBookPage::on_newAddressButton_clicked()\n {\n     if(!model)"
      },
      {
        "sha": "c6653a5e8ab810754aa8932851114a35f94a7ec0",
        "filename": "src/qt/addressbookpage.h",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/311993ab106c250a1779bfdb649cf4f8c2416fb5/src/qt/addressbookpage.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/311993ab106c250a1779bfdb649cf4f8c2416fb5/src/qt/addressbookpage.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/addressbookpage.h?ref=311993ab106c250a1779bfdb649cf4f8c2416fb5",
        "patch": "@@ -68,6 +68,8 @@ private slots:\n     void on_signMessage_clicked();\n     /** Open the verify message tab in the Sign/Verify Message dialog with currently selected address */\n     void on_verifyMessage_clicked();\n+    /** Open send coins dialog for currently selected address (no button) */\n+    void onSendCoins_clicked();\n     /** Generate a QR Code from the currently selected address */\n     void on_showQRCode_clicked();\n     /** Copy label of currently selected address entry to clipboard (no button) */\n@@ -85,6 +87,7 @@ private slots:\n signals:\n     void signMessage(QString addr);\n     void verifyMessage(QString addr);\n+    void sendCoins(QString addr);\n };\n \n #endif // ADDRESSBOOKPAGE_H"
      },
      {
        "sha": "0d951718bbfac7c38ddd9f044f3c1a86145b8fa6",
        "filename": "src/qt/bitcoingui.cpp",
        "status": "modified",
        "additions": 8,
        "deletions": 3,
        "changes": 11,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/311993ab106c250a1779bfdb649cf4f8c2416fb5/src/qt/bitcoingui.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/311993ab106c250a1779bfdb649cf4f8c2416fb5/src/qt/bitcoingui.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoingui.cpp?ref=311993ab106c250a1779bfdb649cf4f8c2416fb5",
        "patch": "@@ -172,9 +172,11 @@ BitcoinGUI::BitcoinGUI(QWidget *parent):\n     rpcConsole = new RPCConsole(this);\n     connect(openRPCConsoleAction, SIGNAL(triggered()), rpcConsole, SLOT(show()));\n \n-    // Clicking on \"Verify Message\" in the address book sends you to the verify message tab\n+    // Clicking on \"Send Coins\" in the address book sends you to the send coins tab\n+    connect(addressBookPage, SIGNAL(sendCoins(QString)), this, SLOT(gotoSendCoinsPage(QString)));\n+    // Clicking on \"Verify Message\" in the address book opens the verify message tab in the Sign/Verify Message dialog\n     connect(addressBookPage, SIGNAL(verifyMessage(QString)), this, SLOT(gotoVerifyMessageTab(QString)));\n-    // Clicking on \"Sign Message\" in the receive coins page sends you to the sign message tab\n+    // Clicking on \"Sign Message\" in the receive coins page opens the sign message tab in the Sign/Verify Message dialog\n     connect(receiveCoinsPage, SIGNAL(signMessage(QString)), this, SLOT(gotoSignMessageTab(QString)));\n \n     // Install event filter to be able to catch status tip events (QEvent::StatusTip)\n@@ -758,13 +760,16 @@ void BitcoinGUI::gotoReceiveCoinsPage()\n     connect(exportAction, SIGNAL(triggered()), receiveCoinsPage, SLOT(exportClicked()));\n }\n \n-void BitcoinGUI::gotoSendCoinsPage()\n+void BitcoinGUI::gotoSendCoinsPage(QString addr)\n {\n     sendCoinsAction->setChecked(true);\n     centralWidget->setCurrentWidget(sendCoinsPage);\n \n     exportAction->setEnabled(false);\n     disconnect(exportAction, SIGNAL(triggered()), 0, 0);\n+\n+    if(!addr.isEmpty())\n+        sendCoinsPage->setAddress(addr);\n }\n \n void BitcoinGUI::gotoSignMessageTab(QString addr)"
      },
      {
        "sha": "1b3e313fc2871fef2472c869f3330d7c85478f7d",
        "filename": "src/qt/bitcoingui.h",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/311993ab106c250a1779bfdb649cf4f8c2416fb5/src/qt/bitcoingui.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/311993ab106c250a1779bfdb649cf4f8c2416fb5/src/qt/bitcoingui.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoingui.h?ref=311993ab106c250a1779bfdb649cf4f8c2416fb5",
        "patch": "@@ -149,7 +149,7 @@ private slots:\n     /** Switch to receive coins page */\n     void gotoReceiveCoinsPage();\n     /** Switch to send coins page */\n-    void gotoSendCoinsPage();\n+    void gotoSendCoinsPage(QString addr = \"\");\n \n     /** Show Sign/Verify Message dialog and switch to sign message tab */\n     void gotoSignMessageTab(QString addr = \"\");"
      },
      {
        "sha": "2133a5e7290d71f974b502ed2541b371c11df8ec",
        "filename": "src/qt/sendcoinsdialog.cpp",
        "status": "modified",
        "additions": 20,
        "deletions": 0,
        "changes": 20,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/311993ab106c250a1779bfdb649cf4f8c2416fb5/src/qt/sendcoinsdialog.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/311993ab106c250a1779bfdb649cf4f8c2416fb5/src/qt/sendcoinsdialog.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/sendcoinsdialog.cpp?ref=311993ab106c250a1779bfdb649cf4f8c2416fb5",
        "patch": "@@ -245,6 +245,26 @@ QWidget *SendCoinsDialog::setupTabChain(QWidget *prev)\n     return ui->sendButton;\n }\n \n+void SendCoinsDialog::setAddress(const QString &address)\n+{\n+    SendCoinsEntry *entry = 0;\n+    // Replace the first entry if it is still unused\n+    if(ui->entries->count() == 1)\n+    {\n+        SendCoinsEntry *first = qobject_cast<SendCoinsEntry*>(ui->entries->itemAt(0)->widget());\n+        if(first->isClear())\n+        {\n+            entry = first;\n+        }\n+    }\n+    if(!entry)\n+    {\n+        entry = addEntry();\n+    }\n+\n+    entry->setAddress(address);\n+}\n+\n void SendCoinsDialog::pasteEntry(const SendCoinsRecipient &rv)\n {\n     if(!fNewRecipientAllowed)"
      },
      {
        "sha": "043dfdcb40352e63f8aa4adcd2514bbd892a2a0c",
        "filename": "src/qt/sendcoinsdialog.h",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/311993ab106c250a1779bfdb649cf4f8c2416fb5/src/qt/sendcoinsdialog.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/311993ab106c250a1779bfdb649cf4f8c2416fb5/src/qt/sendcoinsdialog.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/sendcoinsdialog.h?ref=311993ab106c250a1779bfdb649cf4f8c2416fb5",
        "patch": "@@ -29,6 +29,7 @@ class SendCoinsDialog : public QDialog\n      */\n     QWidget *setupTabChain(QWidget *prev);\n \n+    void setAddress(const QString &address);\n     void pasteEntry(const SendCoinsRecipient &rv);\n     bool handleURI(const QString &uri);\n "
      },
      {
        "sha": "876b7f808b2e30ceedf0107f94b98b5662308727",
        "filename": "src/qt/sendcoinsentry.cpp",
        "status": "modified",
        "additions": 6,
        "deletions": 0,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/311993ab106c250a1779bfdb649cf4f8c2416fb5/src/qt/sendcoinsentry.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/311993ab106c250a1779bfdb649cf4f8c2416fb5/src/qt/sendcoinsentry.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/sendcoinsentry.cpp?ref=311993ab106c250a1779bfdb649cf4f8c2416fb5",
        "patch": "@@ -153,6 +153,12 @@ void SendCoinsEntry::setValue(const SendCoinsRecipient &value)\n     ui->payAmount->setValue(value.amount);\n }\n \n+void SendCoinsEntry::setAddress(const QString &address)\n+{\n+    ui->payTo->setText(address);\n+    ui->payAmount->setFocus();\n+}\n+\n bool SendCoinsEntry::isClear()\n {\n     return ui->payTo->text().isEmpty();"
      },
      {
        "sha": "ec5f3410c17feb875451ce00ccbac8cbc0bdd1a8",
        "filename": "src/qt/sendcoinsentry.h",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/311993ab106c250a1779bfdb649cf4f8c2416fb5/src/qt/sendcoinsentry.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/311993ab106c250a1779bfdb649cf4f8c2416fb5/src/qt/sendcoinsentry.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/sendcoinsentry.h?ref=311993ab106c250a1779bfdb649cf4f8c2416fb5",
        "patch": "@@ -26,6 +26,7 @@ class SendCoinsEntry : public QFrame\n     bool isClear();\n \n     void setValue(const SendCoinsRecipient &value);\n+    void setAddress(const QString &address);\n \n     /** Set up the tab chain manually, as Qt messes up the tab chain by default in some cases (issue https://bugreports.qt-project.org/browse/QTBUG-10907).\n      */"
      }
    ]
  }
]