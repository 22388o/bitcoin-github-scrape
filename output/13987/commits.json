[
  {
    "sha": "5778bf95d94f4d187451a72a5b86ba4daaafe4ab",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo1Nzc4YmY5NWQ5NGY0ZDE4NzQ1MWE3MmE1Yjg2YmE0ZGFhYWZlNGFi",
    "commit": {
      "author": {
        "name": "Anthony Towns",
        "email": "aj@erisian.com.au",
        "date": "2018-06-22T08:53:39Z"
      },
      "committer": {
        "name": "Anthony Towns",
        "email": "aj@erisian.com.au",
        "date": "2018-08-27T11:13:15Z"
      },
      "message": "Report minfeefilter value in getpeerinfo rpc\n\nLowering the minimum relay fee is only useful when many nodes in the\np2p network also lower the fee, so to make it easier to understand\nprogress on that front, this includes the value of the minfeefilter in\ngetpeerinfo, so you at least have visibility to what fees your neighbours\nare currently accepting.",
      "tree": {
        "sha": "e7d16369ff660d36bb42b9b97597bec967ac6d33",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e7d16369ff660d36bb42b9b97597bec967ac6d33"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5778bf95d94f4d187451a72a5b86ba4daaafe4ab",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5778bf95d94f4d187451a72a5b86ba4daaafe4ab",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/5778bf95d94f4d187451a72a5b86ba4daaafe4ab",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5778bf95d94f4d187451a72a5b86ba4daaafe4ab/comments",
    "author": {
      "login": "ajtowns",
      "id": 127186,
      "node_id": "MDQ6VXNlcjEyNzE4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajtowns",
      "html_url": "https://github.com/ajtowns",
      "followers_url": "https://api.github.com/users/ajtowns/followers",
      "following_url": "https://api.github.com/users/ajtowns/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajtowns/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
      "organizations_url": "https://api.github.com/users/ajtowns/orgs",
      "repos_url": "https://api.github.com/users/ajtowns/repos",
      "events_url": "https://api.github.com/users/ajtowns/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajtowns/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "ajtowns",
      "id": 127186,
      "node_id": "MDQ6VXNlcjEyNzE4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajtowns",
      "html_url": "https://github.com/ajtowns",
      "followers_url": "https://api.github.com/users/ajtowns/followers",
      "following_url": "https://api.github.com/users/ajtowns/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajtowns/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
      "organizations_url": "https://api.github.com/users/ajtowns/orgs",
      "repos_url": "https://api.github.com/users/ajtowns/repos",
      "events_url": "https://api.github.com/users/ajtowns/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajtowns/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "b5591ca0b053623f0d96423b05ad809115a0bdef",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b5591ca0b053623f0d96423b05ad809115a0bdef",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/b5591ca0b053623f0d96423b05ad809115a0bdef"
      }
    ],
    "stats": {
      "total": 9,
      "additions": 9,
      "deletions": 0
    },
    "files": [
      {
        "sha": "df2cb54b7ac6957a5f57e7c7fa57208181934331",
        "filename": "src/net.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5778bf95d94f4d187451a72a5b86ba4daaafe4ab/src/net.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5778bf95d94f4d187451a72a5b86ba4daaafe4ab/src/net.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/net.cpp?ref=5778bf95d94f4d187451a72a5b86ba4daaafe4ab",
        "patch": "@@ -715,6 +715,7 @@ void CNode::copyStats(CNodeStats &stats)\n         X(nRecvBytes);\n     }\n     X(fWhitelisted);\n+    X(minFeeFilter);\n \n     // It is common for nodes with good ping times to suddenly become lagged,\n     // due to a new block arriving or other large transfer."
      },
      {
        "sha": "edd2f8cf0dda44b78374a54024cf4e923de7dd49",
        "filename": "src/net.h",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5778bf95d94f4d187451a72a5b86ba4daaafe4ab/src/net.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5778bf95d94f4d187451a72a5b86ba4daaafe4ab/src/net.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/net.h?ref=5778bf95d94f4d187451a72a5b86ba4daaafe4ab",
        "patch": "@@ -558,6 +558,7 @@ class CNodeStats\n     double dPingTime;\n     double dPingWait;\n     double dMinPing;\n+    CAmount minFeeFilter;\n     // Our address, as reported by the peer\n     std::string addrLocal;\n     // Address of this peer"
      },
      {
        "sha": "343b7d3b05f7732006ea5416e7d98dfe5d186164",
        "filename": "src/rpc/net.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5778bf95d94f4d187451a72a5b86ba4daaafe4ab/src/rpc/net.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5778bf95d94f4d187451a72a5b86ba4daaafe4ab/src/rpc/net.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/net.cpp?ref=5778bf95d94f4d187451a72a5b86ba4daaafe4ab",
        "patch": "@@ -102,6 +102,7 @@ static UniValue getpeerinfo(const JSONRPCRequest& request)\n             \"       ...\\n\"\n             \"    ],\\n\"\n             \"    \\\"whitelisted\\\": true|false, (boolean) Whether the peer is whitelisted\\n\"\n+            \"    \\\"minfeefilter\\\": n,         (numeric) The minimum fee rate for transactions this peer accepts\\n\"\n             \"    \\\"bytessent_per_msg\\\": {\\n\"\n             \"       \\\"addr\\\": n,              (numeric) The total bytes sent aggregated by message type\\n\"\n             \"       ...\\n\"\n@@ -169,6 +170,7 @@ static UniValue getpeerinfo(const JSONRPCRequest& request)\n             obj.pushKV(\"inflight\", heights);\n         }\n         obj.pushKV(\"whitelisted\", stats.fWhitelisted);\n+        obj.pushKV(\"minfeefilter\", ValueFromAmount(stats.minFeeFilter));\n \n         UniValue sendPerMsgCmd(UniValue::VOBJ);\n         for (const mapMsgCmdSize::value_type &i : stats.mapSendBytesPerMsgCmd) {"
      },
      {
        "sha": "a46518200c21c2a6cb2a7feca877cc76a3486aa6",
        "filename": "test/functional/rpc_net.py",
        "status": "modified",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5778bf95d94f4d187451a72a5b86ba4daaafe4ab/test/functional/rpc_net.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5778bf95d94f4d187451a72a5b86ba4daaafe4ab/test/functional/rpc_net.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/rpc_net.py?ref=5778bf95d94f4d187451a72a5b86ba4daaafe4ab",
        "patch": "@@ -7,6 +7,8 @@\n Tests correspond to code in rpc/net.cpp.\n \"\"\"\n \n+from decimal import Decimal\n+\n from test_framework.test_framework import BitcoinTestFramework\n from test_framework.util import (\n     assert_equal,\n@@ -21,6 +23,7 @@ class NetTest(BitcoinTestFramework):\n     def set_test_params(self):\n         self.setup_clean_chain = True\n         self.num_nodes = 2\n+        self.extra_args = [[\"-minrelaytxfee=0.00001000\"],[\"-minrelaytxfee=0.00000500\"]]\n \n     def run_test(self):\n         self._test_connection_count()\n@@ -95,6 +98,8 @@ def _test_getpeerinfo(self):\n         # the address bound to on one side will be the source address for the other node\n         assert_equal(peer_info[0][0]['addrbind'], peer_info[1][0]['addr'])\n         assert_equal(peer_info[1][0]['addrbind'], peer_info[0][0]['addr'])\n+        assert_equal(peer_info[0][0]['minfeefilter'], Decimal(\"0.00000500\"))\n+        assert_equal(peer_info[1][0]['minfeefilter'], Decimal(\"0.00001000\"))\n \n if __name__ == '__main__':\n     NetTest().main()"
      }
    ]
  }
]