[
  {
    "sha": "394b9298faec503f3780645ed17fa00cce6da2dd",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzozOTRiOTI5OGZhZWM1MDNmMzc4MDY0NWVkMTdmYTAwY2NlNmRhMmRk",
    "commit": {
      "author": {
        "name": "Jeff Garzik",
        "email": "jgarzik@exmulti.com",
        "date": "2012-05-19T05:25:06Z"
      },
      "committer": {
        "name": "Jeff Garzik",
        "email": "jgarzik@redhat.com",
        "date": "2012-05-19T05:25:06Z"
      },
      "message": "Default to DB_TXN_WRITE_NOSYNC for all transactional operations\n\n* This is safer than DB_TXN_NOSYNC, and does not appear to impact\n  performance.\n* Applying this to the dbenv is necessary to avoid many fdatasync(2)\n  calls on db 5.x\n* We carefully and thoroughly flush databases upon shutdown and\n  other important events already.",
      "tree": {
        "sha": "c1b5cbe180e3cafa2ab4658c33001bc2292f50f1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c1b5cbe180e3cafa2ab4658c33001bc2292f50f1"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/394b9298faec503f3780645ed17fa00cce6da2dd",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/394b9298faec503f3780645ed17fa00cce6da2dd",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/394b9298faec503f3780645ed17fa00cce6da2dd",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/394b9298faec503f3780645ed17fa00cce6da2dd/comments",
    "author": null,
    "committer": null,
    "parents": [
      {
        "sha": "d6615a54c6146728717ad0f8819f32f002613f5c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d6615a54c6146728717ad0f8819f32f002613f5c",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/d6615a54c6146728717ad0f8819f32f002613f5c"
      }
    ],
    "stats": {
      "total": 3,
      "additions": 2,
      "deletions": 1
    },
    "files": [
      {
        "sha": "50f08916261242e53843ed8fed24db8495b0e457",
        "filename": "src/db.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/394b9298faec503f3780645ed17fa00cce6da2dd/src/db.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/394b9298faec503f3780645ed17fa00cce6da2dd/src/db.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/db.cpp?ref=394b9298faec503f3780645ed17fa00cce6da2dd",
        "patch": "@@ -96,6 +96,7 @@ CDB::CDB(const char *pszFile, const char* pszMode) : pdb(NULL)\n             dbenv.set_lk_max_locks(10000);\n             dbenv.set_lk_max_objects(10000);\n             dbenv.set_errfile(fopen(pathErrorFile.string().c_str(), \"a\")); /// debug\n+            dbenv.set_flags(DB_TXN_WRITE_NOSYNC, 1);\n             dbenv.set_flags(DB_AUTO_COMMIT, 1);\n             dbenv.log_set_config(DB_LOG_AUTO_REMOVE, 1);\n             ret = dbenv.open(pathDataDir.string().c_str(),"
      },
      {
        "sha": "0ff06e40a8797c4ca9c69aef41b1e49940a66192",
        "filename": "src/db.h",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/394b9298faec503f3780645ed17fa00cce6da2dd/src/db.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/394b9298faec503f3780645ed17fa00cce6da2dd/src/db.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/db.h?ref=394b9298faec503f3780645ed17fa00cce6da2dd",
        "patch": "@@ -216,7 +216,7 @@ class CDB\n         if (!pdb)\n             return false;\n         DbTxn* ptxn = NULL;\n-        int ret = dbenv.txn_begin(GetTxn(), &ptxn, DB_TXN_NOSYNC);\n+        int ret = dbenv.txn_begin(GetTxn(), &ptxn, DB_TXN_WRITE_NOSYNC);\n         if (!ptxn || ret != 0)\n             return false;\n         vTxn.push_back(ptxn);"
      }
    ]
  }
]