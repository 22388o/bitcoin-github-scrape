[
  {
    "sha": "e5e9904c1c87fcdddf01e563ffe28cc56aea4f29",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzplNWU5OTA0YzFjODdmY2RkZGYwMWU1NjNmZmUyOGNjNTZhZWE0ZjI5",
    "commit": {
      "author": {
        "name": "Jeff Garzik",
        "email": "jgarzik@bitpay.com",
        "date": "2013-08-28T20:29:52Z"
      },
      "committer": {
        "name": "Jeff Garzik",
        "email": "jgarzik@bitpay.com",
        "date": "2013-08-28T20:29:52Z"
      },
      "message": "RPC: add getrawchangeaddress, for raw transaction change destinations",
      "tree": {
        "sha": "30c0cc52e398b3c2899ff9e6b914e7337b7ad2b5",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/30c0cc52e398b3c2899ff9e6b914e7337b7ad2b5"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e5e9904c1c87fcdddf01e563ffe28cc56aea4f29",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e5e9904c1c87fcdddf01e563ffe28cc56aea4f29",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/e5e9904c1c87fcdddf01e563ffe28cc56aea4f29",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e5e9904c1c87fcdddf01e563ffe28cc56aea4f29/comments",
    "author": null,
    "committer": null,
    "parents": [
      {
        "sha": "bb7d0fc12fcfbb2a91e39cb49f2a0873344dbae0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/bb7d0fc12fcfbb2a91e39cb49f2a0873344dbae0",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/bb7d0fc12fcfbb2a91e39cb49f2a0873344dbae0"
      }
    ],
    "stats": {
      "total": 25,
      "additions": 25,
      "deletions": 0
    },
    "files": [
      {
        "sha": "47c738356489832b483b17afa77d45524389e531",
        "filename": "src/bitcoinrpc.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e5e9904c1c87fcdddf01e563ffe28cc56aea4f29/src/bitcoinrpc.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e5e9904c1c87fcdddf01e563ffe28cc56aea4f29/src/bitcoinrpc.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/bitcoinrpc.cpp?ref=e5e9904c1c87fcdddf01e563ffe28cc56aea4f29",
        "patch": "@@ -208,6 +208,7 @@ static const CRPCCommand vRPCCommands[] =\n     { \"getmininginfo\",          &getmininginfo,          true,      false },\n     { \"getnewaddress\",          &getnewaddress,          true,      false },\n     { \"getaccountaddress\",      &getaccountaddress,      true,      false },\n+    { \"getrawchangeaddress\",    &getrawchangeaddress,    true,      false },\n     { \"setaccount\",             &setaccount,             true,      false },\n     { \"getaccount\",             &getaccount,             false,     false },\n     { \"getaddressesbyaccount\",  &getaddressesbyaccount,  true,      false },"
      },
      {
        "sha": "1aa2e70d26971c49a21cc8ab3c64a1edb81c5f80",
        "filename": "src/bitcoinrpc.h",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e5e9904c1c87fcdddf01e563ffe28cc56aea4f29/src/bitcoinrpc.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e5e9904c1c87fcdddf01e563ffe28cc56aea4f29/src/bitcoinrpc.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/bitcoinrpc.h?ref=e5e9904c1c87fcdddf01e563ffe28cc56aea4f29",
        "patch": "@@ -161,6 +161,7 @@ extern json_spirit::Value submitblock(const json_spirit::Array& params, bool fHe\n \n extern json_spirit::Value getnewaddress(const json_spirit::Array& params, bool fHelp); // in rpcwallet.cpp\n extern json_spirit::Value getaccountaddress(const json_spirit::Array& params, bool fHelp);\n+extern json_spirit::Value getrawchangeaddress(const json_spirit::Array& params, bool fHelp);\n extern json_spirit::Value setaccount(const json_spirit::Array& params, bool fHelp);\n extern json_spirit::Value getaccount(const json_spirit::Array& params, bool fHelp);\n extern json_spirit::Value getaddressesbyaccount(const json_spirit::Array& params, bool fHelp);"
      },
      {
        "sha": "978c44e1a9e08dd45f04c079b145d125c8911f2b",
        "filename": "src/rpcwallet.cpp",
        "status": "modified",
        "additions": 23,
        "deletions": 0,
        "changes": 23,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e5e9904c1c87fcdddf01e563ffe28cc56aea4f29/src/rpcwallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e5e9904c1c87fcdddf01e563ffe28cc56aea4f29/src/rpcwallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpcwallet.cpp?ref=e5e9904c1c87fcdddf01e563ffe28cc56aea4f29",
        "patch": "@@ -176,6 +176,29 @@ Value getaccountaddress(const Array& params, bool fHelp)\n }\n \n \n+Value getrawchangeaddress(const Array& params, bool fHelp)\n+{\n+    if (fHelp || params.size() > 1)\n+        throw runtime_error(\n+            \"getrawchangeaddress\\n\"\n+            \"Returns a new Bitcoin address, for receiving change.  \"\n+            \"This is for use with raw transactions, NOT normal use.\");\n+\n+    if (!pwalletMain->IsLocked())\n+        pwalletMain->TopUpKeyPool();\n+\n+    CReserveKey reservekey(pwalletMain);\n+    CPubKey vchPubKey;\n+    if (!reservekey.GetReservedKey(vchPubKey))\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"Error: Unable to obtain key for change\");\n+\n+    reservekey.KeepKey();\n+\n+    CKeyID keyID = vchPubKey.GetID();\n+\n+    return CBitcoinAddress(keyID).ToString();\n+}\n+\n \n Value setaccount(const Array& params, bool fHelp)\n {"
      }
    ]
  }
]