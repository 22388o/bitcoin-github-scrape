[
  {
    "sha": "fafca47adc2476f19f7926de4d55b64b0286e41c",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYWZjYTQ3YWRjMjQ3NmYxOWY3OTI2ZGU0ZDU1YjY0YjAyODZlNDFj",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-02-08T09:13:08Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-02-08T09:11:59Z"
      },
      "message": "fuzz: Hide script_assets_test_minimizer\n\nCan be reviewed with --ignore-all-space",
      "tree": {
        "sha": "3cd89d3ed01fe00e994aaf15a92762a3f914d59d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3cd89d3ed01fe00e994aaf15a92762a3f914d59d"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fafca47adc2476f19f7926de4d55b64b0286e41c",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUgLhgv/arz1aDe+96C46KtyKqJeGZiI8nZjHfDmNPO4dP7Llqzdd8xgSI/B2caT\nuPEbpOOb/GLhQuzn2Qd0Bxv7+A1Kjfy6dBymN5V9pzouy9YgNO8tduvtDlnIe8a5\n1P236ZQp/1pvrmaRAdx38HaKer+ruuP7gaS6EZ3/OaYK/nUGt1r/z8pay+uZJk+o\nMhGMfDJ8nvOq/BIzGc5IgY+Hy7hLyCJoBZVTWa7nb+oTwNejxc7UOiMIVgGnPBqV\ngOs8uNk3G0ySrVyA+AGldtD1V9gqQkq35Asi1v7R0kMxRtRZxABsbP3+NZaOMU3o\nR3rWBIcvV6st/Lc8q1Oi1+cun/OyZFhlrXZsiYfQ5Y6Xpc2Rg4UKfquf1XchLr/4\nlycyD3n3HcxqS43kNrMN0hUcDqw4pn2wCgSn6Dor4bEI/jc0fSNeJ/3xq4S/LSBj\nRWOzZx2Eb8SSaf+eryf407dsJKFSRb8ik8sUm0TH0h2qM15q2B1zgf4gLNWFgdes\n9ZoHzVX7\n=PXwm\n-----END PGP SIGNATURE-----",
        "payload": "tree 3cd89d3ed01fe00e994aaf15a92762a3f914d59d\nparent e51f6c4dee3d42b2707c31fa1c93a337b6bf5ba7\nauthor MarcoFalke <falke.marco@gmail.com> 1612775588 +0100\ncommitter MarcoFalke <falke.marco@gmail.com> 1612775519 +0100\n\nfuzz: Hide script_assets_test_minimizer\n\nCan be reviewed with --ignore-all-space\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fafca47adc2476f19f7926de4d55b64b0286e41c",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fafca47adc2476f19f7926de4d55b64b0286e41c",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fafca47adc2476f19f7926de4d55b64b0286e41c/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "e51f6c4dee3d42b2707c31fa1c93a337b6bf5ba7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e51f6c4dee3d42b2707c31fa1c93a337b6bf5ba7",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/e51f6c4dee3d42b2707c31fa1c93a337b6bf5ba7"
      }
    ],
    "stats": {
      "total": 39,
      "additions": 22,
      "deletions": 17
    },
    "files": [
      {
        "sha": "45151258b354c119bcf20a1939e4d1f583960a16",
        "filename": "src/test/fuzz/fuzz.cpp",
        "status": "modified",
        "additions": 5,
        "deletions": 4,
        "changes": 9,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fafca47adc2476f19f7926de4d55b64b0286e41c/src/test/fuzz/fuzz.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fafca47adc2476f19f7926de4d55b64b0286e41c/src/test/fuzz/fuzz.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/fuzz/fuzz.cpp?ref=fafca47adc2476f19f7926de4d55b64b0286e41c",
        "patch": "@@ -13,15 +13,15 @@\n \n const std::function<void(const std::string&)> G_TEST_LOG_FUN{};\n \n-std::map<std::string_view, std::tuple<TypeTestOneInput, TypeInitialize>>& FuzzTargets()\n+std::map<std::string_view, std::tuple<TypeTestOneInput, TypeInitialize, TypeHidden>>& FuzzTargets()\n {\n-    static std::map<std::string_view, std::tuple<TypeTestOneInput, TypeInitialize>> g_fuzz_targets;\n+    static std::map<std::string_view, std::tuple<TypeTestOneInput, TypeInitialize, TypeHidden>> g_fuzz_targets;\n     return g_fuzz_targets;\n }\n \n-void FuzzFrameworkRegisterTarget(std::string_view name, TypeTestOneInput target, TypeInitialize init)\n+void FuzzFrameworkRegisterTarget(std::string_view name, TypeTestOneInput target, TypeInitialize init, TypeHidden hidden)\n {\n-    const auto it_ins = FuzzTargets().try_emplace(name, std::move(target), std::move(init));\n+    const auto it_ins = FuzzTargets().try_emplace(name, std::move(target), std::move(init), hidden);\n     Assert(it_ins.second);\n }\n \n@@ -31,6 +31,7 @@ void initialize()\n {\n     if (std::getenv(\"PRINT_ALL_FUZZ_TARGETS_AND_ABORT\")) {\n         for (const auto& t : FuzzTargets()) {\n+            if (std::get<2>(t.second)) continue;\n             std::cout << t.first << std::endl;\n         }\n         Assert(false);"
      },
      {
        "sha": "4abc52c15a6173112b446b4bc188e64f592353c0",
        "filename": "src/test/fuzz/fuzz.h",
        "status": "modified",
        "additions": 16,
        "deletions": 12,
        "changes": 28,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fafca47adc2476f19f7926de4d55b64b0286e41c/src/test/fuzz/fuzz.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fafca47adc2476f19f7926de4d55b64b0286e41c/src/test/fuzz/fuzz.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/fuzz/fuzz.h?ref=fafca47adc2476f19f7926de4d55b64b0286e41c",
        "patch": "@@ -15,22 +15,26 @@ using FuzzBufferType = Span<const uint8_t>;\n \n using TypeTestOneInput = std::function<void(FuzzBufferType)>;\n using TypeInitialize = std::function<void()>;\n+using TypeHidden = bool;\n \n-void FuzzFrameworkRegisterTarget(std::string_view name, TypeTestOneInput target, TypeInitialize init);\n+void FuzzFrameworkRegisterTarget(std::string_view name, TypeTestOneInput target, TypeInitialize init, TypeHidden hidden);\n \n-inline void FuzzFrameworkEmptyFun() {}\n+inline void FuzzFrameworkEmptyInitFun() {}\n \n #define FUZZ_TARGET(name) \\\n-    FUZZ_TARGET_INIT(name, FuzzFrameworkEmptyFun)\n-\n-#define FUZZ_TARGET_INIT(name, init_fun)                                      \\\n-    void name##_fuzz_target(FuzzBufferType);                                  \\\n-    struct name##_Before_Main {                                               \\\n-        name##_Before_Main()                                                  \\\n-        {                                                                     \\\n-            FuzzFrameworkRegisterTarget(#name, name##_fuzz_target, init_fun); \\\n-        }                                                                     \\\n-    } const static g_##name##_before_main;                                    \\\n+    FUZZ_TARGET_INIT(name, FuzzFrameworkEmptyInitFun)\n+\n+#define FUZZ_TARGET_INIT(name, init_fun) \\\n+    FUZZ_TARGET_INIT_HIDDEN(name, init_fun, false)\n+\n+#define FUZZ_TARGET_INIT_HIDDEN(name, init_fun, hidden)                               \\\n+    void name##_fuzz_target(FuzzBufferType);                                          \\\n+    struct name##_Before_Main {                                                       \\\n+        name##_Before_Main()                                                          \\\n+        {                                                                             \\\n+            FuzzFrameworkRegisterTarget(#name, name##_fuzz_target, init_fun, hidden); \\\n+        }                                                                             \\\n+    } const static g_##name##_before_main;                                            \\\n     void name##_fuzz_target(FuzzBufferType buffer)\n \n #endif // BITCOIN_TEST_FUZZ_FUZZ_H"
      },
      {
        "sha": "932741738f6d8a0dfee933924015c4cdb3d6d871",
        "filename": "src/test/fuzz/script_assets_test_minimizer.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fafca47adc2476f19f7926de4d55b64b0286e41c/src/test/fuzz/script_assets_test_minimizer.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fafca47adc2476f19f7926de4d55b64b0286e41c/src/test/fuzz/script_assets_test_minimizer.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/fuzz/script_assets_test_minimizer.cpp?ref=fafca47adc2476f19f7926de4d55b64b0286e41c",
        "patch": "@@ -190,7 +190,7 @@ ECCVerifyHandle handle;\n \n } // namespace\n \n-FUZZ_TARGET(script_assets_test_minimizer)\n+FUZZ_TARGET_INIT_HIDDEN(script_assets_test_minimizer, FuzzFrameworkEmptyInitFun, /* hidden */ true)\n {\n     if (buffer.size() < 2 || buffer.back() != '\\n' || buffer[buffer.size() - 2] != ',') return;\n     const std::string str((const char*)buffer.data(), buffer.size() - 2);"
      }
    ]
  },
  {
    "sha": "fac726b1b8331b267973138bbd2bff5304774315",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYWM3MjZiMWI4MzMxYjI2Nzk3MzEzOGJiZDJiZmY1MzA0Nzc0MzE1",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-02-08T09:09:13Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2021-02-08T09:12:22Z"
      },
      "message": "doc: Fixup docs in fuzz/script_assets_test_minimizer.cpp",
      "tree": {
        "sha": "669328b6a869558df9319639e20ffb1ea4dd7a90",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/669328b6a869558df9319639e20ffb1ea4dd7a90"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fac726b1b8331b267973138bbd2bff5304774315",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUha5Qv+IbNfG2OVkjvB9dCYuhUjhYtP/+NSfkdsGycyIGlHq5iO6e992dIphshL\njKC9aQxTCOIHawJ+x585hjgpvMBp7enELgihLeJpbPkXSP6WOocRTTKZlj5M59Qk\n+krQvq5iCTnV2bdvjOpLKK7OF7vKp+yZ96h57GuDPcFgCdqrkTtHNGeMrdgBSuqk\nal9TFG6aoEs90kZdAZDW6rTGl3oGF3FybgWpTAgeHr6xMXb0f9caa0DkfIHwovJt\nWFSbZyvMeacrl3sYFNAzxiePqhnrXC2v3/iQ3frbPPcMK9j9IzsxBy8A4evV69HL\n/xUMeFcAB1oq0z+DiNgoKLgNnrd0sxTZphm+ffAdjRDB+N6sX0KBx7I7K++fUa9Q\nBVyVgyAAqHZWSe6GUp/aM/4bEBG/ghY8VLWUwmYGgLhLuHHyRbq++6v31scGbYs3\nsT8iB6qMci4XTWyz7XOHCIX6yNCKANivoq5kdLNKEvg8BTDBqRXy5R6NxMg82qOz\ndQJqcw0o\n=VrDf\n-----END PGP SIGNATURE-----",
        "payload": "tree 669328b6a869558df9319639e20ffb1ea4dd7a90\nparent fafca47adc2476f19f7926de4d55b64b0286e41c\nauthor MarcoFalke <falke.marco@gmail.com> 1612775353 +0100\ncommitter MarcoFalke <falke.marco@gmail.com> 1612775542 +0100\n\ndoc: Fixup docs in fuzz/script_assets_test_minimizer.cpp\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fac726b1b8331b267973138bbd2bff5304774315",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fac726b1b8331b267973138bbd2bff5304774315",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fac726b1b8331b267973138bbd2bff5304774315/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "fafca47adc2476f19f7926de4d55b64b0286e41c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fafca47adc2476f19f7926de4d55b64b0286e41c",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/fafca47adc2476f19f7926de4d55b64b0286e41c"
      }
    ],
    "stats": {
      "total": 6,
      "additions": 3,
      "deletions": 3
    },
    "files": [
      {
        "sha": "8d9a939dab3cd8e2ca1c1a72f41606eac33107da",
        "filename": "src/test/fuzz/script_assets_test_minimizer.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fac726b1b8331b267973138bbd2bff5304774315/src/test/fuzz/script_assets_test_minimizer.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fac726b1b8331b267973138bbd2bff5304774315/src/test/fuzz/script_assets_test_minimizer.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/fuzz/script_assets_test_minimizer.cpp?ref=fac726b1b8331b267973138bbd2bff5304774315",
        "patch": "@@ -28,12 +28,12 @@\n //\n // (normal build)\n // $ mkdir dump\n-// $ for N in $(seq 1 10); do TEST_DUMP_DIR=dump test/functional/feature_taproot --dumptests; done\n+// $ for N in $(seq 1 10); do TEST_DUMP_DIR=dump test/functional/feature_taproot.py --dumptests; done\n // $ ...\n //\n-// (fuzz test build)\n+// (libFuzzer build)\n // $ mkdir dump-min\n-// $ ./src/test/fuzz/script_assets_test_minimizer -merge=1 dump-min/ dump/\n+// $ FUZZ=script_assets_test_minimizer ./src/test/fuzz/fuzz -merge=1 -use_value_profile=1 dump-min/ dump/\n // $ (echo -en '[\\n'; cat dump-min/* | head -c -2; echo -en '\\n]') >script_assets_test.json\n \n namespace {"
      }
    ]
  }
]