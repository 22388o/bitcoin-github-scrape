[
  {
    "sha": "c110575a92ebe2e9a58b53d56aafa1f1ae37dbb2",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjMTEwNTc1YTkyZWJlMmU5YTU4YjUzZDU2YWFmYTFmMWFlMzdkYmIy",
    "commit": {
      "author": {
        "name": "Cory Fields",
        "email": "cory-nospam-@coryfields.com",
        "date": "2015-06-10T17:59:41Z"
      },
      "committer": {
        "name": "Cory Fields",
        "email": "cory-nospam-@coryfields.com",
        "date": "2015-06-10T21:54:46Z"
      },
      "message": "gitian: Use the new bitcoin-detached-sigs git repo for OSX signatures\n\nRather than fetching a signature.tar.gz from somewhere on the net, instruct\nGitian to use a signature from a tag in the bitcoin-detached-sigs repository\nwhich corresponds to the tag of the release being built.\n\nThis changes detached-sig-apply.sh to take a dirname rather than a tarball as\nan argument, though detached-sig-create.sh still outputs a tarball for\nconvenience.",
      "tree": {
        "sha": "82d80772eaba072c562c030820f25b11250b7920",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/82d80772eaba072c562c030820f25b11250b7920"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c110575a92ebe2e9a58b53d56aafa1f1ae37dbb2",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c110575a92ebe2e9a58b53d56aafa1f1ae37dbb2",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/c110575a92ebe2e9a58b53d56aafa1f1ae37dbb2",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c110575a92ebe2e9a58b53d56aafa1f1ae37dbb2/comments",
    "author": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "eba2f061a02573b62792614260181c615f753225",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/eba2f061a02573b62792614260181c615f753225",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/eba2f061a02573b62792614260181c615f753225"
      }
    ],
    "stats": {
      "total": 22,
      "additions": 11,
      "deletions": 11
    },
    "files": [
      {
        "sha": "36d7b01264e914cfa9b18a35e53478244df8f0bb",
        "filename": "contrib/gitian-descriptors/gitian-osx-signer.yml",
        "status": "modified",
        "additions": 4,
        "deletions": 3,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c110575a92ebe2e9a58b53d56aafa1f1ae37dbb2/contrib/gitian-descriptors/gitian-osx-signer.yml",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c110575a92ebe2e9a58b53d56aafa1f1ae37dbb2/contrib/gitian-descriptors/gitian-osx-signer.yml",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/gitian-descriptors/gitian-osx-signer.yml?ref=c110575a92ebe2e9a58b53d56aafa1f1ae37dbb2",
        "patch": "@@ -8,10 +8,11 @@ packages:\n - \"libc6:i386\"\n - \"faketime\"\n reference_datetime: \"2015-06-01 00:00:00\"\n-remotes: []\n+remotes:\n+- \"url\": \"https://github.com/bitcoin/bitcoin-detached-sigs.git\"\n+  \"dir\": \"signature\"\n files:\n - \"bitcoin-osx-unsigned.tar.gz\"\n-- \"signature.tar.gz\"\n script: |\n   WRAP_DIR=$HOME/wrapped\n   mkdir -p ${WRAP_DIR}\n@@ -32,6 +33,6 @@ script: |\n   SIGNED=bitcoin-osx-signed.dmg\n \n   tar -xf ${UNSIGNED}\n-  ./detached-sig-apply.sh ${UNSIGNED} signature.tar.gz\n+  ./detached-sig-apply.sh ${UNSIGNED} signature/osx\n   ${WRAP_DIR}/genisoimage -no-cache-inodes -D -l -probe -V \"Bitcoin-Core\" -no-pad -r -apple -o uncompressed.dmg signed-app\n   ${WRAP_DIR}/dmg dmg uncompressed.dmg ${OUTDIR}/${SIGNED}"
      },
      {
        "sha": "781fe315edab5046fca0ce5dc59090cfe44760ae",
        "filename": "contrib/macdeploy/detached-sig-apply.sh",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c110575a92ebe2e9a58b53d56aafa1f1ae37dbb2/contrib/macdeploy/detached-sig-apply.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c110575a92ebe2e9a58b53d56aafa1f1ae37dbb2/contrib/macdeploy/detached-sig-apply.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/macdeploy/detached-sig-apply.sh?ref=c110575a92ebe2e9a58b53d56aafa1f1ae37dbb2",
        "patch": "@@ -20,7 +20,7 @@ fi\n \n rm -rf ${TEMPDIR} && mkdir -p ${TEMPDIR}\n tar -C ${TEMPDIR} -xf ${UNSIGNED}\n-tar -C ${TEMPDIR} -xf ${SIGNATURE}\n+cp -rf \"${SIGNATURE}\"/* ${TEMPDIR}\n \n if [ -z \"${PAGESTUFF}\" ]; then\n   PAGESTUFF=${TEMPDIR}/pagestuff"
      },
      {
        "sha": "89a2da32f7a1c9ea34bc4798dbe642c5f2901013",
        "filename": "contrib/macdeploy/detached-sig-create.sh",
        "status": "modified",
        "additions": 3,
        "deletions": 2,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c110575a92ebe2e9a58b53d56aafa1f1ae37dbb2/contrib/macdeploy/detached-sig-create.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c110575a92ebe2e9a58b53d56aafa1f1ae37dbb2/contrib/macdeploy/detached-sig-create.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/macdeploy/detached-sig-create.sh?ref=c110575a92ebe2e9a58b53d56aafa1f1ae37dbb2",
        "patch": "@@ -7,6 +7,7 @@ CODESIGN=codesign\n TEMPDIR=sign.temp\n TEMPLIST=${TEMPDIR}/signatures.txt\n OUT=signature.tar.gz\n+OUTROOT=osx\n \n if [ ! -n \"$1\" ]; then\n   echo \"usage: $0 <codesign args>\"\n@@ -23,7 +24,7 @@ grep -v CodeResources < \"${TEMPLIST}\" | while read i; do\n   TARGETFILE=\"${BUNDLE}/`echo \"${i}\" | sed \"s|.*${BUNDLE}/||\"`\"\n   SIZE=`pagestuff \"$i\" -p | tail -2 | grep size | sed 's/[^0-9]*//g'`\n   OFFSET=`pagestuff \"$i\" -p | tail -2 | grep offset | sed 's/[^0-9]*//g'`\n-  SIGNFILE=\"${TEMPDIR}/${TARGETFILE}.sign\"\n+  SIGNFILE=\"${TEMPDIR}/${OUTROOT}/${TARGETFILE}.sign\"\n   DIRNAME=\"`dirname \"${SIGNFILE}\"`\"\n   mkdir -p \"${DIRNAME}\"\n   echo \"Adding detached signature for: ${TARGETFILE}. Size: ${SIZE}. Offset: ${OFFSET}\"\n@@ -32,7 +33,7 @@ done\n \n grep CodeResources < \"${TEMPLIST}\" | while read i; do\n   TARGETFILE=\"${BUNDLE}/`echo \"${i}\" | sed \"s|.*${BUNDLE}/||\"`\"\n-  RESOURCE=\"${TEMPDIR}/${TARGETFILE}\"\n+  RESOURCE=\"${TEMPDIR}/${OUTROOT}/${TARGETFILE}\"\n   DIRNAME=\"`dirname \"${RESOURCE}\"`\"\n   mkdir -p \"${DIRNAME}\"\n   echo \"Adding resource for: \"${TARGETFILE}\"\""
      },
      {
        "sha": "45c44640ca74992f1f1c90213b97ff497b5bd1f0",
        "filename": "doc/release-process.md",
        "status": "modified",
        "additions": 3,
        "deletions": 5,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c110575a92ebe2e9a58b53d56aafa1f1ae37dbb2/doc/release-process.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c110575a92ebe2e9a58b53d56aafa1f1ae37dbb2/doc/release-process.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/doc/release-process.md?ref=c110575a92ebe2e9a58b53d56aafa1f1ae37dbb2",
        "patch": "@@ -92,15 +92,13 @@ Commit your signature to gitian.sigs:\n \tpopd\n \n   Wait for OSX detached signature:\n-\tOnce the OSX build has 3 matching signatures, Gavin will sign it with the apple App-Store key.\n-\tHe will then upload a detached signature to be combined with the unsigned app to create a signed binary.\n+\tOnce the OSX build has 3 matching signatures, it will be signed with the Apple App-Store key.\n+\tA detached signature will then be committed to the bitcoin-detached-sigs repository, which can be combined with the unsigned app to create a signed binary.\n \n   Create the signed OSX binary:\n \n \tpushd ./gitian-builder\n-\t# Fetch the signature as instructed by Gavin\n-\tcp signature.tar.gz inputs/\n-\t./bin/gbuild -i ../bitcoin/contrib/gitian-descriptors/gitian-osx-signer.yml\n+\t./bin/gbuild -i --commit signature=v${VERSION} ../bitcoin/contrib/gitian-descriptors/gitian-osx-signer.yml\n \t./bin/gsign --signer $SIGNER --release ${VERSION}-osx-signed --destination ../gitian.sigs/ ../bitcoin/contrib/gitian-descriptors/gitian-osx-signer.yml\n \tmv build/out/bitcoin-osx-signed.dmg ../bitcoin-${VERSION}-osx.dmg\n \tpopd"
      }
    ]
  }
]