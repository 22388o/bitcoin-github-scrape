[
  {
    "sha": "b27e81f115e67bffee2c35c1c96082879160f6e1",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiMjdlODFmMTE1ZTY3YmZmZWUyYzM1YzFjOTYwODI4NzkxNjBmNmUx",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2015-11-05T23:05:06Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2015-11-12T19:45:57Z"
      },
      "message": "[net] Cleanup maxuploadtarget\n\n* log: nMaxOutboundLimit is in bytes\n* log: Hide misleading -maxuploadtarget=0 warning\n* qa : Minor cleanup to maxuploadtarget rpc tests\n* net: Use DEFAULT_MAX_UPLOAD_TARGET = 0",
      "tree": {
        "sha": "fb10c90527ba68b09c8a8bab30626606235e6a6a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/fb10c90527ba68b09c8a8bab30626606235e6a6a"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b27e81f115e67bffee2c35c1c96082879160f6e1",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b27e81f115e67bffee2c35c1c96082879160f6e1",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/b27e81f115e67bffee2c35c1c96082879160f6e1",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b27e81f115e67bffee2c35c1c96082879160f6e1/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "bd629d77edbeac6ce71a34f6d557c4e00513be44",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/bd629d77edbeac6ce71a34f6d557c4e00513be44",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/bd629d77edbeac6ce71a34f6d557c4e00513be44"
      }
    ],
    "stats": {
      "total": 13,
      "additions": 8,
      "deletions": 5
    },
    "files": [
      {
        "sha": "148c5f37e4873c9b8696bc846f97bf7a6a70ee22",
        "filename": "qa/rpc-tests/maxuploadtarget.py",
        "status": "modified",
        "additions": 2,
        "deletions": 1,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b27e81f115e67bffee2c35c1c96082879160f6e1/qa/rpc-tests/maxuploadtarget.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b27e81f115e67bffee2c35c1c96082879160f6e1/qa/rpc-tests/maxuploadtarget.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/qa/rpc-tests/maxuploadtarget.py?ref=b27e81f115e67bffee2c35c1c96082879160f6e1",
        "patch": "@@ -192,7 +192,8 @@ def run_test(self):\n         getdata_request.inv.append(CInv(2, big_old_block))\n \n         max_bytes_per_day = 200*1024*1024\n-        max_bytes_available = max_bytes_per_day - 144*1000000\n+        daily_buffer = 144 * 1000000\n+        max_bytes_available = max_bytes_per_day - daily_buffer\n         success_count = max_bytes_available / old_block_size\n         \n         # 144MB will be reserved for relaying new blocks, so expect this to"
      },
      {
        "sha": "a83a136fa5fed56278f81af3be32e3517e1f5703",
        "filename": "src/init.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b27e81f115e67bffee2c35c1c96082879160f6e1/src/init.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b27e81f115e67bffee2c35c1c96082879160f6e1/src/init.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/init.cpp?ref=b27e81f115e67bffee2c35c1c96082879160f6e1",
        "patch": "@@ -375,7 +375,7 @@ std::string HelpMessage(HelpMessageMode mode)\n     strUsage += HelpMessageOpt(\"-whitebind=<addr>\", _(\"Bind to given address and whitelist peers connecting to it. Use [host]:port notation for IPv6\"));\n     strUsage += HelpMessageOpt(\"-whitelist=<netmask>\", _(\"Whitelist peers connecting from the given netmask or IP address. Can be specified multiple times.\") +\n         \" \" + _(\"Whitelisted peers cannot be DoS banned and their transactions are always relayed, even if they are already in the mempool, useful e.g. for a gateway\"));\n-    strUsage += HelpMessageOpt(\"-maxuploadtarget=<n>\", strprintf(_(\"Tries to keep outbound traffic under the given target (in MiB per 24h), 0 = no limit (default: %d)\"), 0));\n+    strUsage += HelpMessageOpt(\"-maxuploadtarget=<n>\", strprintf(_(\"Tries to keep outbound traffic under the given target (in MiB per 24h), 0 = no limit (default: %d)\"), DEFAULT_MAX_UPLOAD_TARGET));\n \n #ifdef ENABLE_WALLET\n     strUsage += HelpMessageGroup(_(\"Wallet options:\"));\n@@ -1193,7 +1193,7 @@ bool AppInit2(boost::thread_group& threadGroup, CScheduler& scheduler)\n     }\n #endif\n     if (mapArgs.count(\"-maxuploadtarget\")) {\n-        CNode::SetMaxOutboundTarget(GetArg(\"-maxuploadtarget\", 0)*1024*1024);\n+        CNode::SetMaxOutboundTarget(GetArg(\"-maxuploadtarget\", DEFAULT_MAX_UPLOAD_TARGET)*1024*1024);\n     }\n \n     // ********************************************************* Step 7: load block chain"
      },
      {
        "sha": "1ea50b249307cdf050e2410b0f7b197d13369a08",
        "filename": "src/net.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b27e81f115e67bffee2c35c1c96082879160f6e1/src/net.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b27e81f115e67bffee2c35c1c96082879160f6e1/src/net.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/net.cpp?ref=b27e81f115e67bffee2c35c1c96082879160f6e1",
        "patch": "@@ -2117,8 +2117,8 @@ void CNode::SetMaxOutboundTarget(uint64_t limit)\n     uint64_t recommendedMinimum = (nMaxOutboundTimeframe / 600) * MAX_BLOCK_SIZE;\n     nMaxOutboundLimit = limit;\n \n-    if (limit < recommendedMinimum)\n-        LogPrintf(\"Max outbound target is very small (%s) and will be overshot. Recommended minimum is %s\\n.\", nMaxOutboundLimit, recommendedMinimum);\n+    if (limit > 0 && limit < recommendedMinimum)\n+        LogPrintf(\"Max outbound target is very small (%s bytes) and will be overshot. Recommended minimum is %s bytes.\\n\", nMaxOutboundLimit, recommendedMinimum);\n }\n \n uint64_t CNode::GetMaxOutboundTarget()"
      },
      {
        "sha": "cd2d225d73f0116ebb711d9c92e8413577949e9d",
        "filename": "src/net.h",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b27e81f115e67bffee2c35c1c96082879160f6e1/src/net.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b27e81f115e67bffee2c35c1c96082879160f6e1/src/net.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/net.h?ref=b27e81f115e67bffee2c35c1c96082879160f6e1",
        "patch": "@@ -60,6 +60,8 @@ static const bool DEFAULT_UPNP = false;\n static const size_t MAPASKFOR_MAX_SZ = MAX_INV_SZ;\n /** The maximum number of peer connections to maintain. */\n static const unsigned int DEFAULT_MAX_PEER_CONNECTIONS = 125;\n+/** The default for -maxuploadtarget. 0 = Unlimited */\n+static const uint64_t DEFAULT_MAX_UPLOAD_TARGET = 0;\n \n unsigned int ReceiveFloodSize();\n unsigned int SendBufferSize();"
      }
    ]
  },
  {
    "sha": "9c3ee3bf77382aca5717f9ae7163e79e3bf836af",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo5YzNlZTNiZjc3MzgyYWNhNTcxN2Y5YWU3MTYzZTc5ZTNiZjgzNmFm",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2015-11-05T23:01:51Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2015-11-12T20:12:35Z"
      },
      "message": "[doc] Add -maxuploadtarget release notes",
      "tree": {
        "sha": "2bb7f9a525c8aea5abc4650dc8c0b1e7ed299f72",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2bb7f9a525c8aea5abc4650dc8c0b1e7ed299f72"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9c3ee3bf77382aca5717f9ae7163e79e3bf836af",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9c3ee3bf77382aca5717f9ae7163e79e3bf836af",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/9c3ee3bf77382aca5717f9ae7163e79e3bf836af",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9c3ee3bf77382aca5717f9ae7163e79e3bf836af/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "b27e81f115e67bffee2c35c1c96082879160f6e1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b27e81f115e67bffee2c35c1c96082879160f6e1",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/b27e81f115e67bffee2c35c1c96082879160f6e1"
      }
    ],
    "stats": {
      "total": 19,
      "additions": 19,
      "deletions": 0
    },
    "files": [
      {
        "sha": "2e9cc16940a740f2f34051477a540792a9e02c85",
        "filename": "doc/release-notes.md",
        "status": "modified",
        "additions": 19,
        "deletions": 0,
        "changes": 19,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/9c3ee3bf77382aca5717f9ae7163e79e3bf836af/doc/release-notes.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/9c3ee3bf77382aca5717f9ae7163e79e3bf836af/doc/release-notes.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/doc/release-notes.md?ref=9c3ee3bf77382aca5717f9ae7163e79e3bf836af",
        "patch": "@@ -168,6 +168,25 @@ a connection to Tor can be made. It can be configured with the `-listenonion`,\n `-torcontrol` and `-torpassword` settings. To show verbose debugging\n information, pass `-debug=tor`.\n \n+Reduce upload traffic\n+---------------------\n+\n+A major part of the outbound traffic is caused by serving historic blocks to\n+other nodes in initial block download state.\n+\n+It is now possible to reduce the total upload traffic via the `-maxuploadtarget`\n+parameter. This is *not* a hard limit but a threshold to minimize the outbound\n+traffic. When the limit is about to be reached, the uploaded data is cut by not\n+serving historic blocks (blocks older than one week).\n+Moreover, any SPV peer is disconnected when they request a filtered block.\n+\n+This option can be specified in MiB per day and is turned off by default\n+(`-maxuploadtarget=0`).\n+The recommended minimum is 144 * MAX_BLOCK_SIZE (currently 144MB) per day.\n+\n+A more detailed documentation about keeping traffic low can be found in\n+[/doc/reducetraffic.md](/doc/reducetraffic.md).\n+\n 0.12.0 Change log\n =================\n "
      }
    ]
  }
]