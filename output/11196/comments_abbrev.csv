maaku,2017-08-30T07:28:29Z,Nits addressed (don't push code late at night!),https://github.com/bitcoin/bitcoin/pull/11196#issuecomment-325906731,325906731,
practicalswift,2017-08-30T08:20:34Z,"Concept ACK!\n\nToo bad there is no bulletproof way to detect `memset_s(…)` :-(",https://github.com/bitcoin/bitcoin/pull/11196#issuecomment-325918807,325918807,
kallewoof,2017-08-30T08:31:59Z,utACK 9c4f8b5188a53f39c0849f860c8227fbb5a77bc6,https://github.com/bitcoin/bitcoin/pull/11196#issuecomment-325921631,325921631,
Leviathn,2017-08-30T16:18:23Z,"Concept ACK - minimizing OpenSSL exposure is good. \n\nISC seems less strict than even MIT, appears compatible. ",https://github.com/bitcoin/bitcoin/pull/11196#issuecomment-326042739,326042739,
jtimon,2017-08-31T19:20:07Z,Concept ACK,https://github.com/bitcoin/bitcoin/pull/11196#issuecomment-326395368,326395368,
theuni,2017-08-31T20:15:25Z,"concept ACK. and utACK 9c4f8b5188a53f39c0849f860c8227fbb5a77bc6. It'll be great to be rid of the openssl dependency at such a low level.\n\nThe logic seems sane. It'd be nice if we could add a test, but I suppose we can't test reliably without affecting the outcome.",https://github.com/bitcoin/bitcoin/pull/11196#issuecomment-326408371,326408371,
gmaxwell,2017-09-01T16:02:45Z,@cfields you can review the ASM at least.,https://github.com/bitcoin/bitcoin/pull/11196#issuecomment-326619166,326619166,
jonasschnelli,2017-09-03T17:22:46Z,utACK 9c4f8b5188a53f39c0849f860c8227fbb5a77bc6,https://github.com/bitcoin/bitcoin/pull/11196#issuecomment-326818451,326818451,
laanwj,2017-09-05T21:52:41Z,"Concept ACK, though I don't understand why this works (certainly in the MSCV case), I would prefer a more explanatory comment.",https://github.com/bitcoin/bitcoin/pull/11196#issuecomment-327314321,327314321,
practicalswift,2017-09-06T11:39:47Z,"Since we - in contrast to BoringSSL - have the luxury of always compiling with assertions enabled, what about also adding an assertion `assert(len == 0 || static_cast<uint8_t*>(ptr)[0] == 0);` as a postcondition? Better safe than sorry :-)",https://github.com/bitcoin/bitcoin/pull/11196#issuecomment-327457235,327457235,
kallewoof,2017-09-06T13:58:33Z,@practicalswift: I think that affects the resulting code. It basically skips cleans for untouched memory. By touching memory it will forego that optimization. ,https://github.com/bitcoin/bitcoin/pull/11196#issuecomment-327491753,327491753,
TheBlueMatt,2017-09-07T20:35:29Z,In the original boringssl review at https://boringssl-review.googlesource.com/c/boringssl/+/1339 it was noted that on WIndows its likely better to just use SecureZeroMemory...maybe do that in place of the string __asm for MSVC?,https://github.com/bitcoin/bitcoin/pull/11196#issuecomment-327920324,327920324,
laanwj,2017-09-07T20:44:21Z,"I vaguely remember there was something wrong/insecure about SecureZeroMemory but I can't remember what and a quick search doesn't turn up anything. I think it was something with being a Win32 API function (syscall) so it makes it easier for malware to hook the function and scoop up all the sensitive data. Anyhow, I don't know if it matters.",https://github.com/bitcoin/bitcoin/pull/11196#issuecomment-327922421,327922421,
maaku,2017-09-15T23:27:21Z,Should I switch to SecureZeroMemory on windows? I don't know enough about windows to evaluate that risk. Or is this ready to merge as-is?,https://github.com/bitcoin/bitcoin/pull/11196#issuecomment-329925949,329925949,
sipa,2017-09-15T23:35:21Z,"I think this is fine as-is.\n\nutACK 1444c2e7d0a243690b960c1fefe5f36bf5ca7e54",https://github.com/bitcoin/bitcoin/pull/11196#issuecomment-329926841,329926841,
laanwj,2017-09-16T05:16:11Z,"> Should I switch to SecureZeroMemory on windows? \n\nI also think it's fine as it is. Note that @TheBlueMatt doesn't say to use that call generally on Windows, but specifically on MSVC. Someone that maintains MSVC support should do the evaluation of the subtleties for what function/method to use there. Just using BoringSSL's code is ""best effort"" to support it as anything.\nutACK https://githu",https://github.com/bitcoin/bitcoin/pull/11196#issuecomment-329946649,329946649,
sipa,2017-08-30T05:54:58Z,This comment doesn't seem to apply in the current form of the code.,https://github.com/bitcoin/bitcoin/pull/11196#discussion_r135976260,135976260,src/support/cleanse.cpp
sipa,2017-08-30T05:57:41Z,"I'm not sure OpenSSL's headers expose such a macro, and even if they do, this risks breaking things if OpenSSL gets removed entirely at some point. I believe you just want `_MSC_VER` here to detect MSVC (as the `else` branch should work fine in MinGW).",https://github.com/bitcoin/bitcoin/pull/11196#discussion_r135976563,135976563,src/support/cleanse.cpp
laanwj,2017-09-05T21:51:44Z,What does a bare `__asm` do?,https://github.com/bitcoin/bitcoin/pull/11196#discussion_r137124417,137124417,src/support/cleanse.cpp
sipa,2017-09-05T21:59:44Z,"Presumbly the same as the GCC extended asm block above, and hopefully prevents the code from being optimized out.\n\nHowever, I'm not sure to what extent we want to support MSVC, especially as `__asm` is only supported on x86, not x86_64.",https://github.com/bitcoin/bitcoin/pull/11196#discussion_r137126035,137126035,src/support/cleanse.cpp
kallewoof,2017-09-06T03:33:44Z,"μNit: Maybe `<cstring>` instead, since this is C++.",https://github.com/bitcoin/bitcoin/pull/11196#discussion_r137164555,137164555,src/support/cleanse.cpp
laanwj,2017-09-06T17:25:23Z,"> However, I'm not sure to what extent we want to support MSVC, especially as __asm is only supported on x86, not x86_64.\n\nWe don't support MSVC (I don't know of any dev who cares to maintain support for it) however It shouldn't be unnecessarily difficult to build with it, so if possible we should try to be compatible with it.",https://github.com/bitcoin/bitcoin/pull/11196#discussion_r137334978,137334978,src/support/cleanse.cpp
