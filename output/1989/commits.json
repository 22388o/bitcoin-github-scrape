[
  {
    "sha": "be185368a071164fb926eccd17d1aedcca39fbdd",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiZTE4NTM2OGEwNzExNjRmYjkyNmVjY2QxN2QxYWVkY2NhMzlmYmRk",
    "commit": {
      "author": {
        "name": "Philip Kaufmann",
        "email": "phil.kaufmann@t-online.de",
        "date": "2012-11-05T07:18:30Z"
      },
      "committer": {
        "name": "Philip Kaufmann",
        "email": "phil.kaufmann@t-online.de",
        "date": "2012-11-05T07:18:30Z"
      },
      "message": "extend setgenerate RPC-call with 2 pre-checks\n\n- if we are not connected and if we are downloading the block-chain don't\n  start the mining threads\n- this pull makes the setgenerate-call explicit, which I found out to be a\n  good thing as we don't have 4 idle threads when not needed and it\n  prevents mining under erroneous conditions (which I was able to trigger\n  sometimes before this patch and which lead to orphan blocks)\n- the internal miner is only used for testnet anyway these days, but I\n  love it for that scenario",
      "tree": {
        "sha": "380ce104e52175588f08cce8f9b1a4115e1e2629",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/380ce104e52175588f08cce8f9b1a4115e1e2629"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/be185368a071164fb926eccd17d1aedcca39fbdd",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/be185368a071164fb926eccd17d1aedcca39fbdd",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/be185368a071164fb926eccd17d1aedcca39fbdd",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/be185368a071164fb926eccd17d1aedcca39fbdd/comments",
    "author": null,
    "committer": null,
    "parents": [
      {
        "sha": "a56d3f8a10e3c9f844aee1f362635ae14b872023",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a56d3f8a10e3c9f844aee1f362635ae14b872023",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/a56d3f8a10e3c9f844aee1f362635ae14b872023"
      }
    ],
    "stats": {
      "total": 6,
      "additions": 6,
      "deletions": 0
    },
    "files": [
      {
        "sha": "8a5bbf578167656238e719a750b007290fb3f2c5",
        "filename": "src/rpcmining.cpp",
        "status": "modified",
        "additions": 6,
        "deletions": 0,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/be185368a071164fb926eccd17d1aedcca39fbdd/src/rpcmining.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/be185368a071164fb926eccd17d1aedcca39fbdd/src/rpcmining.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpcmining.cpp?ref=be185368a071164fb926eccd17d1aedcca39fbdd",
        "patch": "@@ -30,6 +30,12 @@ Value setgenerate(const Array& params, bool fHelp)\n             \"<generate> is true or false to turn generation on or off.\\n\"\n             \"Generation is limited to [genproclimit] processors, -1 is unlimited.\");\n \n+    if (vNodes.empty())\n+        throw JSONRPCError(RPC_CLIENT_NOT_CONNECTED, \"Bitcoin is not connected!\");\n+\n+    if (IsInitialBlockDownload())\n+        throw JSONRPCError(RPC_CLIENT_IN_INITIAL_DOWNLOAD, \"Bitcoin is downloading blocks...\");\n+\n     bool fGenerate = true;\n     if (params.size() > 0)\n         fGenerate = params[0].get_bool();"
      }
    ]
  }
]