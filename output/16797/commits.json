[
  {
    "sha": "cab2d83e1ed5af16f8a96cb693fdb55046a4210b",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjYWIyZDgzZTFlZDVhZjE2ZjhhOTZjYjY5M2ZkYjU1MDQ2YTQyMTBi",
    "commit": {
      "author": {
        "name": "Jon Layton",
        "email": "me@jonl.io",
        "date": "2019-09-03T16:45:38Z"
      },
      "committer": {
        "name": "Jon Layton",
        "email": "me@jonl.io",
        "date": "2019-09-17T08:49:06Z"
      },
      "message": "scripts: Add convenience script for committing scripted-diffs from a file\n\ndoc: Add to developer notes scripted-diff section\n\ndoc: Add /*.sh to .gitignore",
      "tree": {
        "sha": "d648b50d68af998bd3277dcabae62466a7c01c7a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d648b50d68af998bd3277dcabae62466a7c01c7a"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cab2d83e1ed5af16f8a96cb693fdb55046a4210b",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/cab2d83e1ed5af16f8a96cb693fdb55046a4210b",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/cab2d83e1ed5af16f8a96cb693fdb55046a4210b",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/cab2d83e1ed5af16f8a96cb693fdb55046a4210b/comments",
    "author": {
      "login": "ch4ot1c",
      "id": 2287825,
      "node_id": "MDQ6VXNlcjIyODc4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2287825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ch4ot1c",
      "html_url": "https://github.com/ch4ot1c",
      "followers_url": "https://api.github.com/users/ch4ot1c/followers",
      "following_url": "https://api.github.com/users/ch4ot1c/following{/other_user}",
      "gists_url": "https://api.github.com/users/ch4ot1c/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ch4ot1c/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ch4ot1c/subscriptions",
      "organizations_url": "https://api.github.com/users/ch4ot1c/orgs",
      "repos_url": "https://api.github.com/users/ch4ot1c/repos",
      "events_url": "https://api.github.com/users/ch4ot1c/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ch4ot1c/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "ch4ot1c",
      "id": 2287825,
      "node_id": "MDQ6VXNlcjIyODc4MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2287825?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ch4ot1c",
      "html_url": "https://github.com/ch4ot1c",
      "followers_url": "https://api.github.com/users/ch4ot1c/followers",
      "following_url": "https://api.github.com/users/ch4ot1c/following{/other_user}",
      "gists_url": "https://api.github.com/users/ch4ot1c/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ch4ot1c/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ch4ot1c/subscriptions",
      "organizations_url": "https://api.github.com/users/ch4ot1c/orgs",
      "repos_url": "https://api.github.com/users/ch4ot1c/repos",
      "events_url": "https://api.github.com/users/ch4ot1c/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ch4ot1c/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "f18a9065e91163b0238fc005d693b0d961116855",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/f18a9065e91163b0238fc005d693b0d961116855",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/f18a9065e91163b0238fc005d693b0d961116855"
      }
    ],
    "stats": {
      "total": 52,
      "additions": 45,
      "deletions": 7
    },
    "files": [
      {
        "sha": "905b1597e58cfa340353c038196ad3ae4f6d235f",
        "filename": ".gitignore",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/cab2d83e1ed5af16f8a96cb693fdb55046a4210b/.gitignore",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/cab2d83e1ed5af16f8a96cb693fdb55046a4210b/.gitignore",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/.gitignore?ref=cab2d83e1ed5af16f8a96cb693fdb55046a4210b",
        "patch": "@@ -1,3 +1,4 @@\n+/*.sh\n *.tar.gz\n \n *.exe"
      },
      {
        "sha": "d7c437fcf6f264492d73212b6d2abe72b5acf88a",
        "filename": "contrib/devtools/README.md",
        "status": "modified",
        "additions": 13,
        "deletions": 1,
        "changes": 14,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/cab2d83e1ed5af16f8a96cb693fdb55046a4210b/contrib/devtools/README.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/cab2d83e1ed5af16f8a96cb693fdb55046a4210b/contrib/devtools/README.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/devtools/README.md?ref=cab2d83e1ed5af16f8a96cb693fdb55046a4210b",
        "patch": "@@ -3,7 +3,7 @@ Contents\n This directory contains tools for developers working on this repository.\n \n clang-format-diff.py\n-===================\n+====================\n \n A script to format unified git diffs according to [.clang-format](../../src/.clang-format).\n \n@@ -16,6 +16,18 @@ the script should be called from the git root folder as follows.\n git diff -U0 HEAD~1.. | ./contrib/devtools/clang-format-diff.py -p1 -i -v\n ```\n \n+commit-scripted-diff.sh\n+=======================\n+\n+Commits a [scripted-diff](/doc/developer-notes.md#scripted-diffs) from a script or text file.\n+This avoids manually copying the script when building the commit. To use from a clean `git status`:\n+\n+1. Run the script to apply changes (`sed` or similar)\n+2. `git add -A` to stage all changes\n+3. `./contrib/devtools/commit-scripted-diff.sh <script_filename> <commit_message> [commit_description]`\n+\n+To further customize the commit message, `git commit --amend`.\n+\n copyright\\_header.py\n ====================\n "
      },
      {
        "sha": "53a46f32f16e477f9d70377e1c5d4f5a434e82e5",
        "filename": "contrib/devtools/commit-scripted-diff.sh",
        "status": "added",
        "additions": 23,
        "deletions": 0,
        "changes": 23,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/cab2d83e1ed5af16f8a96cb693fdb55046a4210b/contrib/devtools/commit-scripted-diff.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/cab2d83e1ed5af16f8a96cb693fdb55046a4210b/contrib/devtools/commit-scripted-diff.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/devtools/commit-scripted-diff.sh?ref=cab2d83e1ed5af16f8a96cb693fdb55046a4210b",
        "patch": "@@ -0,0 +1,23 @@\n+#!/usr/bin/env bash\n+#\n+# Copyright (c) 2019 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+#\n+# Commits a scripted-diff from a script or text file.\n+\n+export LC_ALL=C\n+\n+SCRIPT_FILE=$1\n+TITLE=$2\n+DESCRIPTION=$3\n+\n+git commit -m \"scripted-diff: $TITLE\" \\\n+-m \"$DESCRIPTION\" \\\n+-m \"\n+-BEGIN VERIFY SCRIPT-\n+$(cat $SCRIPT_FILE)\n+-END VERIFY SCRIPT-\n+\"\n+\n+# You may now clean up the script file."
      },
      {
        "sha": "4434f5ce899d8ae32bd081d2618e0b993e5bb0fa",
        "filename": "doc/developer-notes.md",
        "status": "modified",
        "additions": 8,
        "deletions": 6,
        "changes": 14,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/cab2d83e1ed5af16f8a96cb693fdb55046a4210b/doc/developer-notes.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/cab2d83e1ed5af16f8a96cb693fdb55046a4210b/doc/developer-notes.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/doc/developer-notes.md?ref=cab2d83e1ed5af16f8a96cb693fdb55046a4210b",
        "patch": "@@ -843,16 +843,18 @@ the result of the script is identical to the commit. This aids reviewers since t\n does exactly what it's supposed to do. It is also helpful for rebasing (since the same script can just be re-run\n on the new master commit).\n \n-To create a scripted-diff:\n+To create a scripted-diff, use [`commit-scripted-diff.sh`](/contrib/devtools/README.md#commit-scripted-diff.sh).\n \n-- start the commit message with `scripted-diff:` (and then a description of the diff on the same line)\n-- in the commit message include the bash script between lines containing just the following text:\n+This will automatically:\n+\n+- start the commit message with `scripted-diff: `\n+- in the commit message, include the bash script between two lines:\n     - `-BEGIN VERIFY SCRIPT-`\n     - `-END VERIFY SCRIPT-`\n \n-The scripted-diff is verified by the tool `test/lint/commit-script-check.sh`. The tool's default behavior, when supplied\n-with a commit is to verify all scripted-diffs from the beginning of time up to said commit. Internally, the tool passes\n-the first supplied argument to `git rev-list --reverse` to determine which commits to verify script-diffs for, ignoring\n+The scripted-diff can be verified by running `./test/lint/commit-script-check.sh <commit>`. The tool's default behavior\n+is to verify all scripted-diffs from the beginning of time up to said commit. Internally, the tool passes\n+the first supplied argument to `git rev-list --reverse` to determine which commits should be verified, ignoring\n commits that don't conform to the commit message format described above.\n \n For development, it might be more convenient to verify all scripted-diffs in a range `A..B`, for example:"
      }
    ]
  }
]