[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/419679690",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/14172#issuecomment-419679690",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14172",
    "id": 419679690,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQxOTY3OTY5MA==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-09-08T23:29:21Z",
    "updated_at": "2018-12-21T14:06:19Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/419679690/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/216173302",
    "pull_request_review_id": 153596150,
    "id": 216173302,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxNjE3MzMwMg==",
    "diff_hunk": "@@ -92,24 +98,32 @@ class BlockFilter\n     uint256 m_block_hash;\n     GCSFilter m_filter;\n \n+    bool BuildParams(GCSFilter::Params& params) const;\n+\n public:\n \n-    // Construct a new BlockFilter of the specified type from a block.\n+    BlockFilter() = default;\n+\n+    //! Reconstruct a BlockFilter from parts.\n+    BlockFilter(BlockFilterType filter_type, const uint256& block_hash,",
    "path": "src/blockfilter.h",
    "position": 61,
    "original_position": 61,
    "commit_id": "e4ed8ce2c848695855bd7fa4d66765d2eac6d255",
    "original_commit_id": "a3d9b905029c2b17ef9a2220555f9ba618d57aad",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "```\r\nwarning: function 'BlockFilter::BlockFilter' has a definition with different parameter names [readability-inconsistent-declaration-parameter-name]\r\n```",
    "created_at": "2018-09-09T23:01:20Z",
    "updated_at": "2018-12-22T05:53:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/14172#discussion_r216173302",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/14172",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/216173302"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/14172#discussion_r216173302"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/14172"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/216173302/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 109,
    "original_line": 109,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/240471268",
    "pull_request_review_id": 183508124,
    "id": 240471268,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0MDQ3MTI2OA==",
    "diff_hunk": "@@ -45,19 +54,16 @@ class GCSFilter\n public:\n \n     /** Constructs an empty filter. */\n-    GCSFilter(uint64_t siphash_k0 = 0, uint64_t siphash_k1 = 0, uint8_t P = 0, uint32_t M = 0);\n+    explicit GCSFilter(const Params& params = Params());",
    "path": "src/blockfilter.h",
    "position": 30,
    "original_position": 30,
    "commit_id": "e4ed8ce2c848695855bd7fa4d66765d2eac6d255",
    "original_commit_id": "20b812993ae584e4a4b12faa5c8751aa04dfde81",
    "user": {
      "login": "jamesob",
      "id": 73197,
      "node_id": "MDQ6VXNlcjczMTk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jamesob",
      "html_url": "https://github.com/jamesob",
      "followers_url": "https://api.github.com/users/jamesob/followers",
      "following_url": "https://api.github.com/users/jamesob/following{/other_user}",
      "gists_url": "https://api.github.com/users/jamesob/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
      "organizations_url": "https://api.github.com/users/jamesob/orgs",
      "repos_url": "https://api.github.com/users/jamesob/repos",
      "events_url": "https://api.github.com/users/jamesob/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jamesob/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Confused about why this is marked `explicit`...",
    "created_at": "2018-12-11T04:37:14Z",
    "updated_at": "2018-12-22T05:53:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/14172#discussion_r240471268",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/14172",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/240471268"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/14172#discussion_r240471268"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/14172"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/240471268/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 57,
    "original_line": 57,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/240472558",
    "pull_request_review_id": 183509620,
    "id": 240472558,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0MDQ3MjU1OA==",
    "diff_hunk": "@@ -45,19 +54,16 @@ class GCSFilter\n public:\n \n     /** Constructs an empty filter. */\n-    GCSFilter(uint64_t siphash_k0 = 0, uint64_t siphash_k1 = 0, uint8_t P = 0, uint32_t M = 0);\n+    explicit GCSFilter(const Params& params = Params());",
    "path": "src/blockfilter.h",
    "position": 30,
    "original_position": 30,
    "commit_id": "e4ed8ce2c848695855bd7fa4d66765d2eac6d255",
    "original_commit_id": "20b812993ae584e4a4b12faa5c8751aa04dfde81",
    "user": {
      "login": "jimpo",
      "id": 881253,
      "node_id": "MDQ6VXNlcjg4MTI1Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jimpo",
      "html_url": "https://github.com/jimpo",
      "followers_url": "https://api.github.com/users/jimpo/followers",
      "following_url": "https://api.github.com/users/jimpo/following{/other_user}",
      "gists_url": "https://api.github.com/users/jimpo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jimpo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
      "organizations_url": "https://api.github.com/users/jimpo/orgs",
      "repos_url": "https://api.github.com/users/jimpo/repos",
      "events_url": "https://api.github.com/users/jimpo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jimpo/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "[Developer notes](https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md#c-data-structures): \"By default, declare single-argument constructors `explicit`\"",
    "created_at": "2018-12-11T04:48:25Z",
    "updated_at": "2018-12-22T05:53:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/14172#discussion_r240472558",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/14172",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/240472558"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/14172#discussion_r240472558"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/14172"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/240472558/reactions",
      "total_count": 3,
      "+1": 3,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 57,
    "original_line": 57,
    "side": "RIGHT",
    "in_reply_to_id": 240471268
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/240830335",
    "pull_request_review_id": 183952385,
    "id": 240830335,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0MDgzMDMzNQ==",
    "diff_hunk": "@@ -225,19 +221,42 @@ static GCSFilter::ElementSet BasicFilterElements(const CBlock& block,\n     return elements;\n }\n \n+BlockFilter::BlockFilter(BlockFilterType filter_type, const uint256& block_hash,\n+                         std::vector<unsigned char> filter)\n+    : m_filter_type(filter_type), m_block_hash(block_hash)\n+{\n+    GCSFilter::Params params;\n+    if (!BuildParams(params)) {\n+        throw std::invalid_argument(\"unknown filter_type\");\n+    }\n+    m_filter = GCSFilter(params, std::move(filter));\n+}\n+\n BlockFilter::BlockFilter(BlockFilterType filter_type, const CBlock& block, const CBlockUndo& block_undo)\n     : m_filter_type(filter_type), m_block_hash(block.GetHash())\n+{\n+    GCSFilter::Params params;\n+    if (!BuildParams(params)) {\n+        throw std::invalid_argument(\"unknown filter_type\");\n+    }\n+    m_filter = GCSFilter(params, BasicFilterElements(block, block_undo));\n+}\n+\n+bool BlockFilter::BuildParams(GCSFilter::Params& params) const\n {\n     switch (m_filter_type) {\n     case BlockFilterType::BASIC:\n-        m_filter = GCSFilter(m_block_hash.GetUint64(0), m_block_hash.GetUint64(1),\n-                             BASIC_FILTER_P, BASIC_FILTER_M,\n-                             BasicFilterElements(block, block_undo));\n+        params.m_siphash_k0 = m_block_hash.GetUint64(0);\n+        params.m_siphash_k1 = m_block_hash.GetUint64(1);\n+        params.m_P = BASIC_FILTER_P;\n+        params.m_M = BASIC_FILTER_M;\n         break;\n \n     default:",
    "path": "src/blockfilter.cpp",
    "position": null,
    "original_position": 121,
    "commit_id": "e4ed8ce2c848695855bd7fa4d66765d2eac6d255",
    "original_commit_id": "c30620983d2e2c9aee6f52878ed14ba685e8683e",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "nit: Could remove the default case (which is a failure) to make it a compile time warning instead of a run time exception\r\n\r\n```suggestion\r\n    // no default case, so the compiler can warn about missing cases\r\n```\r\n\r\nExample:\r\n\r\n```\r\nblockfilter.cpp:247:13: warning: enumeration value 'BASIC' not handled in switch [-Wswitch]\r\n    switch (m_filter_type) {\r\n            ^\r\n",
    "created_at": "2018-12-11T23:24:38Z",
    "updated_at": "2018-12-22T05:53:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/14172#discussion_r240830335",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/14172",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/240830335"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/14172#discussion_r240830335"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/14172"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/240830335/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 255,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/240841443",
    "pull_request_review_id": 183965138,
    "id": 240841443,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0MDg0MTQ0Mw==",
    "diff_hunk": "@@ -225,19 +221,42 @@ static GCSFilter::ElementSet BasicFilterElements(const CBlock& block,\n     return elements;\n }\n \n+BlockFilter::BlockFilter(BlockFilterType filter_type, const uint256& block_hash,\n+                         std::vector<unsigned char> filter)\n+    : m_filter_type(filter_type), m_block_hash(block_hash)\n+{\n+    GCSFilter::Params params;\n+    if (!BuildParams(params)) {\n+        throw std::invalid_argument(\"unknown filter_type\");\n+    }\n+    m_filter = GCSFilter(params, std::move(filter));\n+}\n+\n BlockFilter::BlockFilter(BlockFilterType filter_type, const CBlock& block, const CBlockUndo& block_undo)\n     : m_filter_type(filter_type), m_block_hash(block.GetHash())\n+{\n+    GCSFilter::Params params;\n+    if (!BuildParams(params)) {\n+        throw std::invalid_argument(\"unknown filter_type\");\n+    }\n+    m_filter = GCSFilter(params, BasicFilterElements(block, block_undo));\n+}\n+\n+bool BlockFilter::BuildParams(GCSFilter::Params& params) const\n {\n     switch (m_filter_type) {\n     case BlockFilterType::BASIC:\n-        m_filter = GCSFilter(m_block_hash.GetUint64(0), m_block_hash.GetUint64(1),\n-                             BASIC_FILTER_P, BASIC_FILTER_M,\n-                             BasicFilterElements(block, block_undo));\n+        params.m_siphash_k0 = m_block_hash.GetUint64(0);\n+        params.m_siphash_k1 = m_block_hash.GetUint64(1);\n+        params.m_P = BASIC_FILTER_P;\n+        params.m_M = BASIC_FILTER_M;\n         break;\n \n     default:",
    "path": "src/blockfilter.cpp",
    "position": null,
    "original_position": 121,
    "commit_id": "e4ed8ce2c848695855bd7fa4d66765d2eac6d255",
    "original_commit_id": "c30620983d2e2c9aee6f52878ed14ba685e8683e",
    "user": {
      "login": "jimpo",
      "id": 881253,
      "node_id": "MDQ6VXNlcjg4MTI1Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/881253?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jimpo",
      "html_url": "https://github.com/jimpo",
      "followers_url": "https://api.github.com/users/jimpo/followers",
      "following_url": "https://api.github.com/users/jimpo/following{/other_user}",
      "gists_url": "https://api.github.com/users/jimpo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jimpo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jimpo/subscriptions",
      "organizations_url": "https://api.github.com/users/jimpo/orgs",
      "repos_url": "https://api.github.com/users/jimpo/repos",
      "events_url": "https://api.github.com/users/jimpo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jimpo/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Oh, cool. Didn't realize C++ compilers did that analysis on switch statements.",
    "created_at": "2018-12-12T00:16:11Z",
    "updated_at": "2018-12-22T05:53:51Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/14172#discussion_r240841443",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/14172",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/240841443"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/14172#discussion_r240841443"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/14172"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/240841443/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 255,
    "side": "RIGHT",
    "in_reply_to_id": 240830335
  }
]