[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/960544686",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23437#issuecomment-960544686",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23437",
    "id": 960544686,
    "node_id": "IC_kwDOABII5845QL-u",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-04T08:23:31Z",
    "updated_at": "2021-11-23T07:54:26Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#23546](https://github.com/bitcoin/bitcoin/pull/23546) (scripted-diff: Use clang-tidy syntax for C++ named arguments (tests only) by MarcoFalke)\n* [#23465](https://github.com/bitcoin/bitcoin/pull/23465) (Remove CTxMemPool params from ATMP by lsilva01)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/960544686/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/961610204",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23437#issuecomment-961610204",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23437",
    "id": 961610204,
    "node_id": "IC_kwDOABII5845UQHc",
    "user": {
      "login": "lsilva01",
      "id": 84432093,
      "node_id": "MDQ6VXNlcjg0NDMyMDkz",
      "avatar_url": "https://avatars.githubusercontent.com/u/84432093?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lsilva01",
      "html_url": "https://github.com/lsilva01",
      "followers_url": "https://api.github.com/users/lsilva01/followers",
      "following_url": "https://api.github.com/users/lsilva01/following{/other_user}",
      "gists_url": "https://api.github.com/users/lsilva01/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lsilva01/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lsilva01/subscriptions",
      "organizations_url": "https://api.github.com/users/lsilva01/orgs",
      "repos_url": "https://api.github.com/users/lsilva01/repos",
      "events_url": "https://api.github.com/users/lsilva01/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lsilva01/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-05T04:01:04Z",
    "updated_at": "2021-11-05T04:01:04Z",
    "author_association": "CONTRIBUTOR",
    "body": "@jnewbery and @glozow  thanks for reviews.\r\nI addressed your suggestions in 034e827.\r\n\r\nAs these changes are already implemented in another branch, with more other commits, I can close this PR if it's better. ",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/961610204/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/961955952",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23437#issuecomment-961955952",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23437",
    "id": 961955952,
    "node_id": "IC_kwDOABII5845Vkhw",
    "user": {
      "login": "theStack",
      "id": 91535,
      "node_id": "MDQ6VXNlcjkxNTM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theStack",
      "html_url": "https://github.com/theStack",
      "followers_url": "https://api.github.com/users/theStack/followers",
      "following_url": "https://api.github.com/users/theStack/following{/other_user}",
      "gists_url": "https://api.github.com/users/theStack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theStack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
      "organizations_url": "https://api.github.com/users/theStack/orgs",
      "repos_url": "https://api.github.com/users/theStack/repos",
      "events_url": "https://api.github.com/users/theStack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theStack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-05T14:48:26Z",
    "updated_at": "2021-11-05T14:48:26Z",
    "author_association": "CONTRIBUTOR",
    "body": "Concept ACK",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/961955952/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/962536149",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23437#issuecomment-962536149",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23437",
    "id": 962536149,
    "node_id": "IC_kwDOABII5845XyLV",
    "user": {
      "login": "theStack",
      "id": 91535,
      "node_id": "MDQ6VXNlcjkxNTM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theStack",
      "html_url": "https://github.com/theStack",
      "followers_url": "https://api.github.com/users/theStack/followers",
      "following_url": "https://api.github.com/users/theStack/following{/other_user}",
      "gists_url": "https://api.github.com/users/theStack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theStack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
      "organizations_url": "https://api.github.com/users/theStack/orgs",
      "repos_url": "https://api.github.com/users/theStack/repos",
      "events_url": "https://api.github.com/users/theStack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theStack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-07T01:31:09Z",
    "updated_at": "2021-11-07T01:31:09Z",
    "author_association": "CONTRIBUTOR",
    "body": "Possible follow-up idea that came to my mind while reviewing this PR: couldn't we simplify the interface of `AcceptToMemoryPool` by getting rid of both the `CChainParams` and `CTxMemPool` parameters, since those can be deduced from the chainstate anyway? The change would look something like\r\n```diff\r\n-MempoolAcceptResult AcceptToMemoryPool(const CChainParams& chainparams, CTxMemPool& pool,\r\n-                                       CChainState& active_chainstate, const CTransactionRef& tx,\r\n+MempoolAcceptResult AcceptToMemoryPool(CChainState& active_chainstate, const CTransactionRef& tx,\r\n                                        int64_t accept_time, bool bypass_limits, bool test_accept)\r\n     EXCLUSIVE_LOCKS_REQUIRED(cs_main)\r\n {\r\n+    const CChainParams& chainparams{active_chainstate.m_params};\r\n+    assert(active_chainstate.m_mempool != nullptr);\r\n+    CTxMemPool& pool{*active_chainstate.m_mempool};\r\n     std::vector<COutPoint> coins_to_uncache;\r\n     MemPoolAccept::ATMPArgs args { chainparams, accept_time, bypass_limits, coins_to_uncache,\r\n                                    test_accept, /* m_allow_bip125_replacement */ true };\r\n```\r\nI couldn't think of a case where passing chainparams or a mempool instance that _doesn't_ belong to the active chainstate makes much sense. Drawback though: currently the member `m_mempool` is `protected` and thus not accessible from outside, that one would need to move to the `public` section, like it was done for `m_params` in the last commit of this PR.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/962536149/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/962845977",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23437#issuecomment-962845977",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23437",
    "id": 962845977,
    "node_id": "IC_kwDOABII5845Y90Z",
    "user": {
      "login": "lsilva01",
      "id": 84432093,
      "node_id": "MDQ6VXNlcjg0NDMyMDkz",
      "avatar_url": "https://avatars.githubusercontent.com/u/84432093?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lsilva01",
      "html_url": "https://github.com/lsilva01",
      "followers_url": "https://api.github.com/users/lsilva01/followers",
      "following_url": "https://api.github.com/users/lsilva01/following{/other_user}",
      "gists_url": "https://api.github.com/users/lsilva01/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lsilva01/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lsilva01/subscriptions",
      "organizations_url": "https://api.github.com/users/lsilva01/orgs",
      "repos_url": "https://api.github.com/users/lsilva01/repos",
      "events_url": "https://api.github.com/users/lsilva01/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lsilva01/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-08T06:19:23Z",
    "updated_at": "2021-11-08T06:19:23Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks for the review @theStack . I opened PR #23465 to test your suggestion.\r\nIt seems to work fine.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/962845977/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/965199458",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23437#issuecomment-965199458",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23437",
    "id": 965199458,
    "node_id": "IC_kwDOABII5845h8Zi",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-10T13:55:33Z",
    "updated_at": "2021-11-10T13:55:33Z",
    "author_association": "MEMBER",
    "body": "#23173 is merged. Please rebase and I'll review.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/965199458/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/966252205",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23437#issuecomment-966252205",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23437",
    "id": 966252205,
    "node_id": "IC_kwDOABII5845l9at",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-11T12:11:04Z",
    "updated_at": "2021-11-11T12:11:04Z",
    "author_association": "MEMBER",
    "body": "Please update the PR description now that #23173 is merged.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/966252205/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/966776268",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23437#issuecomment-966776268",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23437",
    "id": 966776268,
    "node_id": "IC_kwDOABII5845n9XM",
    "user": {
      "login": "lsilva01",
      "id": 84432093,
      "node_id": "MDQ6VXNlcjg0NDMyMDkz",
      "avatar_url": "https://avatars.githubusercontent.com/u/84432093?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lsilva01",
      "html_url": "https://github.com/lsilva01",
      "followers_url": "https://api.github.com/users/lsilva01/followers",
      "following_url": "https://api.github.com/users/lsilva01/following{/other_user}",
      "gists_url": "https://api.github.com/users/lsilva01/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lsilva01/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lsilva01/subscriptions",
      "organizations_url": "https://api.github.com/users/lsilva01/orgs",
      "repos_url": "https://api.github.com/users/lsilva01/repos",
      "events_url": "https://api.github.com/users/lsilva01/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lsilva01/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-12T02:46:31Z",
    "updated_at": "2021-11-12T02:46:31Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks for review @jnewbery . New commits were added to address the suggestions.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/966776268/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/975840356",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23437#issuecomment-975840356",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23437",
    "id": 975840356,
    "node_id": "IC_kwDOABII5846KiRk",
    "user": {
      "login": "lsilva01",
      "id": 84432093,
      "node_id": "MDQ6VXNlcjg0NDMyMDkz",
      "avatar_url": "https://avatars.githubusercontent.com/u/84432093?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lsilva01",
      "html_url": "https://github.com/lsilva01",
      "followers_url": "https://api.github.com/users/lsilva01/followers",
      "following_url": "https://api.github.com/users/lsilva01/following{/other_user}",
      "gists_url": "https://api.github.com/users/lsilva01/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lsilva01/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lsilva01/subscriptions",
      "organizations_url": "https://api.github.com/users/lsilva01/orgs",
      "repos_url": "https://api.github.com/users/lsilva01/repos",
      "events_url": "https://api.github.com/users/lsilva01/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lsilva01/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-22T19:15:53Z",
    "updated_at": "2021-11-22T19:15:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "@theStack  and @stratospher thanks for the review.\r\nThe commit were squashed, as suggested.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/975840356/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/742621253",
    "pull_request_review_id": 797454841,
    "id": 742621253,
    "node_id": "PRRC_kwDOABII584sQ4BF",
    "diff_hunk": "@@ -206,19 +206,23 @@ struct PackageMempoolAcceptResult\n };\n \n /**\n- * Try to add a transaction to the mempool. This is an internal function and is\n- * exposed only for testing. Client code should use ChainstateManager::ProcessTransaction()\n+ * Try to add a transaction to the mempool with a specified acceptance time. This is an internal\n+ * function and is exposed only for testing. Client code should use ChainstateManager::ProcessTransaction()\n  *\n- * @param[in]  active_chainstate  Reference to the active chainstate.\n+ * @param[in]  chainparams        Tweakable parameters of this instance.",
    "path": "src/validation.h",
    "position": null,
    "original_position": 10,
    "commit_id": "4ec8b96e077a359c7ba877fc4f78d55ac7d5fb22",
    "original_commit_id": "20867dc1526487390f27f3f9c04d5222731bd018",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I don't think this description \"Tweakable parameters of this instance.\" is very illuminating. Tweakable suggests to me that the user can modify these parameters, but that isn't the case here.",
    "created_at": "2021-11-04T08:27:27Z",
    "updated_at": "2021-11-04T08:28:48Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r742621253",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/742621253"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r742621253"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/742621253/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 212,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/742908559",
    "pull_request_review_id": 797841769,
    "id": 742908559,
    "node_id": "PRRC_kwDOABII584sR-KP",
    "diff_hunk": "@@ -206,19 +206,23 @@ struct PackageMempoolAcceptResult\n };\n \n /**\n- * Try to add a transaction to the mempool. This is an internal function and is\n- * exposed only for testing. Client code should use ChainstateManager::ProcessTransaction()\n+ * Try to add a transaction to the mempool with a specified acceptance time. This is an internal\n+ * function and is exposed only for testing. Client code should use ChainstateManager::ProcessTransaction()\n  *\n- * @param[in]  active_chainstate  Reference to the active chainstate.\n+ * @param[in]  chainparams        Tweakable parameters of this instance.\n  * @param[in]  pool               Reference to the node's mempool.\n+ * @param[in]  active_chainstate  Reference to the active chainstate.\n  * @param[in]  tx                 The transaction to submit for mempool acceptance.\n+ * @param[in]  nAcceptTime        The acceptance time.\n  * @param[in]  bypass_limits      When true, don't enforce mempool fee and capacity limits.\n  * @param[in]  test_accept        When true, run validation checks but don't submit to mempool.\n  *\n  * @returns a MempoolAcceptResult indicating whether the transaction was accepted/rejected with reason.\n  */\n-MempoolAcceptResult AcceptToMemoryPool(CChainState& active_chainstate, CTxMemPool& pool, const CTransactionRef& tx,\n-                                       bool bypass_limits, bool test_accept=false) EXCLUSIVE_LOCKS_REQUIRED(cs_main);\n+MempoolAcceptResult AcceptToMemoryPool(const CChainParams& chainparams, CTxMemPool& pool,\n+                                                        CChainState& active_chainstate, const CTransactionRef &tx,\n+                                                        int64_t nAcceptTime, bool bypass_limits, bool test_accept)",
    "path": "src/validation.h",
    "position": null,
    "original_position": 24,
    "commit_id": "4ec8b96e077a359c7ba877fc4f78d55ac7d5fb22",
    "original_commit_id": "20867dc1526487390f27f3f9c04d5222731bd018",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "prefer snake case `accept_time`. Doxygen comment should be more descriptice, e.g. that this is the time that the mempool entry will record and will be used to determine when the entry expires.",
    "created_at": "2021-11-04T14:46:43Z",
    "updated_at": "2021-11-04T14:49:44Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r742908559",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/742908559"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r742908559"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/742908559/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 224,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/743375240",
    "pull_request_review_id": 798480851,
    "id": 743375240,
    "node_id": "PRRC_kwDOABII584sTwGI",
    "diff_hunk": "@@ -206,19 +206,23 @@ struct PackageMempoolAcceptResult\n };\n \n /**\n- * Try to add a transaction to the mempool. This is an internal function and is\n- * exposed only for testing. Client code should use ChainstateManager::ProcessTransaction()\n+ * Try to add a transaction to the mempool with a specified acceptance time. This is an internal\n+ * function and is exposed only for testing. Client code should use ChainstateManager::ProcessTransaction()\n  *\n- * @param[in]  active_chainstate  Reference to the active chainstate.\n+ * @param[in]  chainparams        Tweakable parameters of this instance.",
    "path": "src/validation.h",
    "position": null,
    "original_position": 10,
    "commit_id": "4ec8b96e077a359c7ba877fc4f78d55ac7d5fb22",
    "original_commit_id": "20867dc1526487390f27f3f9c04d5222731bd018",
    "user": {
      "login": "lsilva01",
      "id": 84432093,
      "node_id": "MDQ6VXNlcjg0NDMyMDkz",
      "avatar_url": "https://avatars.githubusercontent.com/u/84432093?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lsilva01",
      "html_url": "https://github.com/lsilva01",
      "followers_url": "https://api.github.com/users/lsilva01/followers",
      "following_url": "https://api.github.com/users/lsilva01/following{/other_user}",
      "gists_url": "https://api.github.com/users/lsilva01/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lsilva01/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lsilva01/subscriptions",
      "organizations_url": "https://api.github.com/users/lsilva01/orgs",
      "repos_url": "https://api.github.com/users/lsilva01/repos",
      "events_url": "https://api.github.com/users/lsilva01/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lsilva01/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Changed the description in 034e827 .",
    "created_at": "2021-11-05T03:55:27Z",
    "updated_at": "2021-11-05T03:55:27Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r743375240",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/743375240"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r743375240"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/743375240/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 212,
    "side": "RIGHT",
    "in_reply_to_id": 742621253
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/743375527",
    "pull_request_review_id": 798481204,
    "id": 743375527,
    "node_id": "PRRC_kwDOABII584sTwKn",
    "diff_hunk": "@@ -206,19 +206,23 @@ struct PackageMempoolAcceptResult\n };\n \n /**\n- * Try to add a transaction to the mempool. This is an internal function and is\n- * exposed only for testing. Client code should use ChainstateManager::ProcessTransaction()\n+ * Try to add a transaction to the mempool with a specified acceptance time. This is an internal\n+ * function and is exposed only for testing. Client code should use ChainstateManager::ProcessTransaction()\n  *\n- * @param[in]  active_chainstate  Reference to the active chainstate.\n+ * @param[in]  chainparams        Tweakable parameters of this instance.\n  * @param[in]  pool               Reference to the node's mempool.\n+ * @param[in]  active_chainstate  Reference to the active chainstate.\n  * @param[in]  tx                 The transaction to submit for mempool acceptance.\n+ * @param[in]  nAcceptTime        The acceptance time.\n  * @param[in]  bypass_limits      When true, don't enforce mempool fee and capacity limits.\n  * @param[in]  test_accept        When true, run validation checks but don't submit to mempool.\n  *\n  * @returns a MempoolAcceptResult indicating whether the transaction was accepted/rejected with reason.\n  */\n-MempoolAcceptResult AcceptToMemoryPool(CChainState& active_chainstate, CTxMemPool& pool, const CTransactionRef& tx,\n-                                       bool bypass_limits, bool test_accept=false) EXCLUSIVE_LOCKS_REQUIRED(cs_main);\n+MempoolAcceptResult AcceptToMemoryPool(const CChainParams& chainparams, CTxMemPool& pool,\n+                                                        CChainState& active_chainstate, const CTransactionRef &tx,\n+                                                        int64_t nAcceptTime, bool bypass_limits, bool test_accept)",
    "path": "src/validation.h",
    "position": null,
    "original_position": 24,
    "commit_id": "4ec8b96e077a359c7ba877fc4f78d55ac7d5fb22",
    "original_commit_id": "20867dc1526487390f27f3f9c04d5222731bd018",
    "user": {
      "login": "lsilva01",
      "id": 84432093,
      "node_id": "MDQ6VXNlcjg0NDMyMDkz",
      "avatar_url": "https://avatars.githubusercontent.com/u/84432093?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lsilva01",
      "html_url": "https://github.com/lsilva01",
      "followers_url": "https://api.github.com/users/lsilva01/followers",
      "following_url": "https://api.github.com/users/lsilva01/following{/other_user}",
      "gists_url": "https://api.github.com/users/lsilva01/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lsilva01/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lsilva01/subscriptions",
      "organizations_url": "https://api.github.com/users/lsilva01/orgs",
      "repos_url": "https://api.github.com/users/lsilva01/repos",
      "events_url": "https://api.github.com/users/lsilva01/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lsilva01/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Changed `nAcceptTime` to `accept_time` and improved the field description in 034e827",
    "created_at": "2021-11-05T03:56:36Z",
    "updated_at": "2021-11-05T03:56:37Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r743375527",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/743375527"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r743375527"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/743375527/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 224,
    "side": "RIGHT",
    "in_reply_to_id": 742908559
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/743437227",
    "pull_request_review_id": 798557290,
    "id": 743437227,
    "node_id": "PRRC_kwDOABII584sT_Or",
    "diff_hunk": "@@ -206,12 +206,26 @@ struct PackageMempoolAcceptResult\n };\n \n /**\n- * (Try to) add a transaction to the memory pool.\n- * @param[in]  bypass_limits   When true, don't enforce mempool fee limits.\n- * @param[in]  test_accept     When true, run validation checks but don't submit to mempool.\n+ * Try to add a transaction to the mempool with a specified acceptance time. This is an internal",
    "path": "src/validation.h",
    "position": null,
    "original_position": 7,
    "commit_id": "4ec8b96e077a359c7ba877fc4f78d55ac7d5fb22",
    "original_commit_id": "034e827efce594bf398553313d07ea4b55696710",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "\"with a specified acceptance time\" is redundant with the parameter documentation below.",
    "created_at": "2021-11-05T07:32:06Z",
    "updated_at": "2021-11-05T07:48:08Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r743437227",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/743437227"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r743437227"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/743437227/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 209,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/743438207",
    "pull_request_review_id": 798557290,
    "id": 743438207,
    "node_id": "PRRC_kwDOABII584sT_d_",
    "diff_hunk": "@@ -206,12 +206,26 @@ struct PackageMempoolAcceptResult\n };\n \n /**\n- * (Try to) add a transaction to the memory pool.\n- * @param[in]  bypass_limits   When true, don't enforce mempool fee limits.\n- * @param[in]  test_accept     When true, run validation checks but don't submit to mempool.\n+ * Try to add a transaction to the mempool with a specified acceptance time. This is an internal\n+ * function and is exposed only for testing. Client code should use ChainstateManager::ProcessTransaction()\n+ *\n+ * @param[in]  chainparams        Chain paramenters.\n+ * @param[in]  pool               Reference to the node's mempool.\n+ * @param[in]  active_chainstate  Reference to the active chainstate.\n+ * @param[in]  tx                 The transaction to submit for mempool acceptance.\n+ * @param[in]  accept_time        The timestamp for adding the transaction to the mempool. Usually\n+ *                                the current system time, but may be different (eg when loading\n+ *                                mempool txs from disk on startup).\n+ *                                It is also used to determine when the entry expires.\n+ * @param[in]  bypass_limits      When true, don't enforce mempool fee and capacity limits.\n+ * @param[in]  test_accept        When true, run validation checks but don't submit to mempool.\n+ *\n+ * @returns a MempoolAcceptResult indicating whether the transaction was accepted/rejected with reason.\n  */\n-MempoolAcceptResult AcceptToMemoryPool(CChainState& active_chainstate, CTxMemPool& pool, const CTransactionRef& tx,\n-                                       bool bypass_limits, bool test_accept=false) EXCLUSIVE_LOCKS_REQUIRED(cs_main);\n+MempoolAcceptResult AcceptToMemoryPool(const CChainParams& chainparams, CTxMemPool& pool,\n+                                                        CChainState& active_chainstate, const CTransactionRef &tx,\n+                                                        int64_t accept_time, bool bypass_limits, bool test_accept)",
    "path": "src/validation.h",
    "position": null,
    "original_position": 27,
    "commit_id": "4ec8b96e077a359c7ba877fc4f78d55ac7d5fb22",
    "original_commit_id": "034e827efce594bf398553313d07ea4b55696710",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Please align arguments on new lines after the opening parens:\r\n\r\n```suggestion\r\nMempoolAcceptResult AcceptToMemoryPool(const CChainParams& chainparams, CTxMemPool& pool,\r\n                                       CChainState& active_chainstate, const CTransactionRef &tx,\r\n                                       int64_t accept_time, bool bypass_limits, bool test_accept)\r\n```\r\n\r\n(We use clang-style `AlignAfterOpenBracket: true`)",
    "created_at": "2021-11-05T07:34:27Z",
    "updated_at": "2021-11-05T07:48:08Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r743438207",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/743438207"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r743438207"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/743438207/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": 225,
    "start_side": "RIGHT",
    "line": null,
    "original_line": 227,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/743438724",
    "pull_request_review_id": 798557290,
    "id": 743438724,
    "node_id": "PRRC_kwDOABII584sT_mE",
    "diff_hunk": "@@ -230,7 +230,7 @@ FUZZ_TARGET_INIT(tx_pool_standard, initialize_tx_pool)\n         Assert(it->second.m_result_type == MempoolAcceptResult::ResultType::VALID ||\n                it->second.m_result_type == MempoolAcceptResult::ResultType::INVALID);\n \n-        const auto res = WITH_LOCK(::cs_main, return AcceptToMemoryPool(chainstate, tx_pool, tx, bypass_limits));\n+        const auto res = WITH_LOCK(::cs_main, return AcceptToMemoryPool(Params(), tx_pool, chainstate, tx, GetTime(), bypass_limits, false /* test_accept */));",
    "path": "src/test/fuzz/tx_pool.cpp",
    "position": null,
    "original_position": 5,
    "commit_id": "4ec8b96e077a359c7ba877fc4f78d55ac7d5fb22",
    "original_commit_id": "034e827efce594bf398553313d07ea4b55696710",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Please use clang-tidy style [bugprone-argument-comment](https://clang.llvm.org/extra/clang-tidy/checks/bugprone-argument-comment.html):\r\n\r\n```suggestion\r\n        const auto res = WITH_LOCK(::cs_main, return AcceptToMemoryPool(Params(), tx_pool, chainstate, tx, GetTime(), bypass_limits, /*test_accept=*/false));\r\n```\r\n\r\nSee also https://github.com/bitcoin/bitcoin/pull/22981\r\n\r\n(same comment below)",
    "created_at": "2021-11-05T07:35:32Z",
    "updated_at": "2021-11-05T07:48:08Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r743438724",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/743438724"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r743438724"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/743438724/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 233,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/743439230",
    "pull_request_review_id": 798557290,
    "id": 743439230,
    "node_id": "PRRC_kwDOABII584sT_t-",
    "diff_hunk": "@@ -1011,15 +1012,13 @@ PackageMempoolAcceptResult MemPoolAccept::AcceptMultipleTransactions(const std::\n \n } // anon namespace\n \n-/** (try to) add transaction to memory pool with a specified acceptance time **/\n-static MempoolAcceptResult AcceptToMemoryPoolWithTime(const CChainParams& chainparams, CTxMemPool& pool,\n-                                                      CChainState& active_chainstate,\n-                                                      const CTransactionRef &tx, int64_t nAcceptTime,\n-                                                      bool bypass_limits, bool test_accept)\n+MempoolAcceptResult AcceptToMemoryPool(const CChainParams& chainparams, CTxMemPool& pool,",
    "path": "src/validation.cpp",
    "position": null,
    "original_position": 21,
    "commit_id": "4ec8b96e077a359c7ba877fc4f78d55ac7d5fb22",
    "original_commit_id": "034e827efce594bf398553313d07ea4b55696710",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Again, please align new lines with the opening parens.",
    "created_at": "2021-11-05T07:36:43Z",
    "updated_at": "2021-11-05T07:48:08Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r743439230",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/743439230"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r743439230"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/743439230/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1082,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/743444205",
    "pull_request_review_id": 798557290,
    "id": 743444205,
    "node_id": "PRRC_kwDOABII584sUA7t",
    "diff_hunk": "@@ -349,8 +349,9 @@ void CChainState::MaybeUpdateMempoolForReorg(\n     while (it != disconnectpool.queuedTx.get<insertion_order>().rend()) {\n         // ignore validation errors in resurrected transactions\n         if (!fAddToMempool || (*it)->IsCoinBase() ||\n-            AcceptToMemoryPool(\n-                *this, *m_mempool, *it, true /* bypass_limits */).m_result_type !=\n+            AcceptToMemoryPool(Params(),",
    "path": "src/validation.cpp",
    "position": null,
    "original_position": 6,
    "commit_id": "4ec8b96e077a359c7ba877fc4f78d55ac7d5fb22",
    "original_commit_id": "034e827efce594bf398553313d07ea4b55696710",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Consider using the global namespace operator `::Params()` to explicitly show that you're calling a global function. I think the long-term goal is to remove these global calls to make it easier to unit test.\r\n\r\nSame comment for the ATMP calls below.",
    "created_at": "2021-11-05T07:47:13Z",
    "updated_at": "2021-11-05T07:48:08Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r743444205",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/743444205"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r743444205"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/743444205/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 352,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/743957358",
    "pull_request_review_id": 799297595,
    "id": 743957358,
    "node_id": "PRRC_kwDOABII584sV-Nu",
    "diff_hunk": "@@ -206,12 +206,26 @@ struct PackageMempoolAcceptResult\n };\n \n /**\n- * (Try to) add a transaction to the memory pool.\n- * @param[in]  bypass_limits   When true, don't enforce mempool fee limits.\n- * @param[in]  test_accept     When true, run validation checks but don't submit to mempool.\n+ * Try to add a transaction to the mempool with a specified acceptance time. This is an internal",
    "path": "src/validation.h",
    "position": null,
    "original_position": 7,
    "commit_id": "4ec8b96e077a359c7ba877fc4f78d55ac7d5fb22",
    "original_commit_id": "034e827efce594bf398553313d07ea4b55696710",
    "user": {
      "login": "lsilva01",
      "id": 84432093,
      "node_id": "MDQ6VXNlcjg0NDMyMDkz",
      "avatar_url": "https://avatars.githubusercontent.com/u/84432093?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lsilva01",
      "html_url": "https://github.com/lsilva01",
      "followers_url": "https://api.github.com/users/lsilva01/followers",
      "following_url": "https://api.github.com/users/lsilva01/following{/other_user}",
      "gists_url": "https://api.github.com/users/lsilva01/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lsilva01/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lsilva01/subscriptions",
      "organizations_url": "https://api.github.com/users/lsilva01/orgs",
      "repos_url": "https://api.github.com/users/lsilva01/repos",
      "events_url": "https://api.github.com/users/lsilva01/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lsilva01/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Removed in 9a0b0fc",
    "created_at": "2021-11-05T20:25:21Z",
    "updated_at": "2021-11-05T20:25:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r743957358",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/743957358"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r743957358"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/743957358/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 209,
    "side": "RIGHT",
    "in_reply_to_id": 743437227
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/743957460",
    "pull_request_review_id": 799297750,
    "id": 743957460,
    "node_id": "PRRC_kwDOABII584sV-PU",
    "diff_hunk": "@@ -206,12 +206,26 @@ struct PackageMempoolAcceptResult\n };\n \n /**\n- * (Try to) add a transaction to the memory pool.\n- * @param[in]  bypass_limits   When true, don't enforce mempool fee limits.\n- * @param[in]  test_accept     When true, run validation checks but don't submit to mempool.\n+ * Try to add a transaction to the mempool with a specified acceptance time. This is an internal\n+ * function and is exposed only for testing. Client code should use ChainstateManager::ProcessTransaction()\n+ *\n+ * @param[in]  chainparams        Chain paramenters.\n+ * @param[in]  pool               Reference to the node's mempool.\n+ * @param[in]  active_chainstate  Reference to the active chainstate.\n+ * @param[in]  tx                 The transaction to submit for mempool acceptance.\n+ * @param[in]  accept_time        The timestamp for adding the transaction to the mempool. Usually\n+ *                                the current system time, but may be different (eg when loading\n+ *                                mempool txs from disk on startup).\n+ *                                It is also used to determine when the entry expires.\n+ * @param[in]  bypass_limits      When true, don't enforce mempool fee and capacity limits.\n+ * @param[in]  test_accept        When true, run validation checks but don't submit to mempool.\n+ *\n+ * @returns a MempoolAcceptResult indicating whether the transaction was accepted/rejected with reason.\n  */\n-MempoolAcceptResult AcceptToMemoryPool(CChainState& active_chainstate, CTxMemPool& pool, const CTransactionRef& tx,\n-                                       bool bypass_limits, bool test_accept=false) EXCLUSIVE_LOCKS_REQUIRED(cs_main);\n+MempoolAcceptResult AcceptToMemoryPool(const CChainParams& chainparams, CTxMemPool& pool,\n+                                                        CChainState& active_chainstate, const CTransactionRef &tx,\n+                                                        int64_t accept_time, bool bypass_limits, bool test_accept)",
    "path": "src/validation.h",
    "position": null,
    "original_position": 27,
    "commit_id": "4ec8b96e077a359c7ba877fc4f78d55ac7d5fb22",
    "original_commit_id": "034e827efce594bf398553313d07ea4b55696710",
    "user": {
      "login": "lsilva01",
      "id": 84432093,
      "node_id": "MDQ6VXNlcjg0NDMyMDkz",
      "avatar_url": "https://avatars.githubusercontent.com/u/84432093?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lsilva01",
      "html_url": "https://github.com/lsilva01",
      "followers_url": "https://api.github.com/users/lsilva01/followers",
      "following_url": "https://api.github.com/users/lsilva01/following{/other_user}",
      "gists_url": "https://api.github.com/users/lsilva01/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lsilva01/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lsilva01/subscriptions",
      "organizations_url": "https://api.github.com/users/lsilva01/orgs",
      "repos_url": "https://api.github.com/users/lsilva01/repos",
      "events_url": "https://api.github.com/users/lsilva01/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lsilva01/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done in 9a0b0fc",
    "created_at": "2021-11-05T20:25:34Z",
    "updated_at": "2021-11-05T20:25:34Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r743957460",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/743957460"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r743957460"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/743957460/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": 225,
    "start_side": "RIGHT",
    "line": null,
    "original_line": 227,
    "side": "RIGHT",
    "in_reply_to_id": 743438207
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/743957613",
    "pull_request_review_id": 799297988,
    "id": 743957613,
    "node_id": "PRRC_kwDOABII584sV-Rt",
    "diff_hunk": "@@ -230,7 +230,7 @@ FUZZ_TARGET_INIT(tx_pool_standard, initialize_tx_pool)\n         Assert(it->second.m_result_type == MempoolAcceptResult::ResultType::VALID ||\n                it->second.m_result_type == MempoolAcceptResult::ResultType::INVALID);\n \n-        const auto res = WITH_LOCK(::cs_main, return AcceptToMemoryPool(chainstate, tx_pool, tx, bypass_limits));\n+        const auto res = WITH_LOCK(::cs_main, return AcceptToMemoryPool(Params(), tx_pool, chainstate, tx, GetTime(), bypass_limits, false /* test_accept */));",
    "path": "src/test/fuzz/tx_pool.cpp",
    "position": null,
    "original_position": 5,
    "commit_id": "4ec8b96e077a359c7ba877fc4f78d55ac7d5fb22",
    "original_commit_id": "034e827efce594bf398553313d07ea4b55696710",
    "user": {
      "login": "lsilva01",
      "id": 84432093,
      "node_id": "MDQ6VXNlcjg0NDMyMDkz",
      "avatar_url": "https://avatars.githubusercontent.com/u/84432093?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lsilva01",
      "html_url": "https://github.com/lsilva01",
      "followers_url": "https://api.github.com/users/lsilva01/followers",
      "following_url": "https://api.github.com/users/lsilva01/following{/other_user}",
      "gists_url": "https://api.github.com/users/lsilva01/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lsilva01/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lsilva01/subscriptions",
      "organizations_url": "https://api.github.com/users/lsilva01/orgs",
      "repos_url": "https://api.github.com/users/lsilva01/repos",
      "events_url": "https://api.github.com/users/lsilva01/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lsilva01/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done in 9a0b0fc",
    "created_at": "2021-11-05T20:25:53Z",
    "updated_at": "2021-11-05T20:25:53Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r743957613",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/743957613"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r743957613"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/743957613/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 233,
    "side": "RIGHT",
    "in_reply_to_id": 743438724
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/743958323",
    "pull_request_review_id": 799298980,
    "id": 743958323,
    "node_id": "PRRC_kwDOABII584sV-cz",
    "diff_hunk": "@@ -349,8 +349,9 @@ void CChainState::MaybeUpdateMempoolForReorg(\n     while (it != disconnectpool.queuedTx.get<insertion_order>().rend()) {\n         // ignore validation errors in resurrected transactions\n         if (!fAddToMempool || (*it)->IsCoinBase() ||\n-            AcceptToMemoryPool(\n-                *this, *m_mempool, *it, true /* bypass_limits */).m_result_type !=\n+            AcceptToMemoryPool(Params(),",
    "path": "src/validation.cpp",
    "position": null,
    "original_position": 6,
    "commit_id": "4ec8b96e077a359c7ba877fc4f78d55ac7d5fb22",
    "original_commit_id": "034e827efce594bf398553313d07ea4b55696710",
    "user": {
      "login": "lsilva01",
      "id": 84432093,
      "node_id": "MDQ6VXNlcjg0NDMyMDkz",
      "avatar_url": "https://avatars.githubusercontent.com/u/84432093?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lsilva01",
      "html_url": "https://github.com/lsilva01",
      "followers_url": "https://api.github.com/users/lsilva01/followers",
      "following_url": "https://api.github.com/users/lsilva01/following{/other_user}",
      "gists_url": "https://api.github.com/users/lsilva01/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lsilva01/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lsilva01/subscriptions",
      "organizations_url": "https://api.github.com/users/lsilva01/orgs",
      "repos_url": "https://api.github.com/users/lsilva01/repos",
      "events_url": "https://api.github.com/users/lsilva01/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lsilva01/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Removed calls to global Params() in ATMP and in the tx_pool test file ( aac6548 )",
    "created_at": "2021-11-05T20:27:21Z",
    "updated_at": "2021-11-05T20:27:21Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r743958323",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/743958323"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r743958323"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/743958323/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 352,
    "side": "RIGHT",
    "in_reply_to_id": 743444205
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/743958602",
    "pull_request_review_id": 799299345,
    "id": 743958602,
    "node_id": "PRRC_kwDOABII584sV-hK",
    "diff_hunk": "@@ -1011,15 +1012,13 @@ PackageMempoolAcceptResult MemPoolAccept::AcceptMultipleTransactions(const std::\n \n } // anon namespace\n \n-/** (try to) add transaction to memory pool with a specified acceptance time **/\n-static MempoolAcceptResult AcceptToMemoryPoolWithTime(const CChainParams& chainparams, CTxMemPool& pool,\n-                                                      CChainState& active_chainstate,\n-                                                      const CTransactionRef &tx, int64_t nAcceptTime,\n-                                                      bool bypass_limits, bool test_accept)\n+MempoolAcceptResult AcceptToMemoryPool(const CChainParams& chainparams, CTxMemPool& pool,",
    "path": "src/validation.cpp",
    "position": null,
    "original_position": 21,
    "commit_id": "4ec8b96e077a359c7ba877fc4f78d55ac7d5fb22",
    "original_commit_id": "034e827efce594bf398553313d07ea4b55696710",
    "user": {
      "login": "lsilva01",
      "id": 84432093,
      "node_id": "MDQ6VXNlcjg0NDMyMDkz",
      "avatar_url": "https://avatars.githubusercontent.com/u/84432093?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lsilva01",
      "html_url": "https://github.com/lsilva01",
      "followers_url": "https://api.github.com/users/lsilva01/followers",
      "following_url": "https://api.github.com/users/lsilva01/following{/other_user}",
      "gists_url": "https://api.github.com/users/lsilva01/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lsilva01/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lsilva01/subscriptions",
      "organizations_url": "https://api.github.com/users/lsilva01/orgs",
      "repos_url": "https://api.github.com/users/lsilva01/repos",
      "events_url": "https://api.github.com/users/lsilva01/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lsilva01/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done in 9a0b0fc",
    "created_at": "2021-11-05T20:27:50Z",
    "updated_at": "2021-11-05T20:27:50Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r743958602",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/743958602"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r743958602"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/743958602/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1082,
    "side": "RIGHT",
    "in_reply_to_id": 743439230
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747442614",
    "pull_request_review_id": 803720554,
    "id": 747442614,
    "node_id": "PRRC_kwDOABII584sjRG2",
    "diff_hunk": "@@ -230,7 +230,8 @@ FUZZ_TARGET_INIT(tx_pool_standard, initialize_tx_pool)\n         Assert(it->second.m_result_type == MempoolAcceptResult::ResultType::VALID ||\n                it->second.m_result_type == MempoolAcceptResult::ResultType::INVALID);\n \n-        const auto res = WITH_LOCK(::cs_main, return AcceptToMemoryPool(chainstate, tx_pool, tx, bypass_limits));\n+        CChainState& chainstate{node.chainman->ActiveChainstate()};\n+        const auto res = WITH_LOCK(::cs_main, return AcceptToMemoryPool(chainstate.m_params, tx_pool, chainstate, tx, GetTime(), bypass_limits, /* test_accept= */false));",
    "path": "src/test/fuzz/tx_pool.cpp",
    "position": null,
    "original_position": 15,
    "commit_id": "4ec8b96e077a359c7ba877fc4f78d55ac7d5fb22",
    "original_commit_id": "9f967515f41000ee94152ce0611ed2c9145bfb54",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Its seems odd to change this to:\r\n\r\n```\r\n        const auto res = WITH_LOCK(::cs_main, return AcceptToMemoryPool(::Params(), tx_pool, chainstate, tx, GetTime(), bypass_limits, /* test_accept= */false));\r\n```\r\n\r\nin the first commit, and then update it again to use `chainstate.m_params` in the second commit. You can just go straight to using `chainstate.m_params` in the first commit.",
    "created_at": "2021-11-11T12:03:25Z",
    "updated_at": "2021-11-11T12:09:56Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r747442614",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747442614"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r747442614"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747442614/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 234,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747442858",
    "pull_request_review_id": 803720554,
    "id": 747442858,
    "node_id": "PRRC_kwDOABII584sjRKq",
    "diff_hunk": "@@ -330,7 +331,7 @@ FUZZ_TARGET_INIT(tx_pool, initialize_tx_pool)\n         const auto tx = MakeTransactionRef(mut_tx);\n         const bool bypass_limits = fuzzed_data_provider.ConsumeBool();\n         ::fRequireStandard = fuzzed_data_provider.ConsumeBool();\n-        const auto res = WITH_LOCK(::cs_main, return AcceptToMemoryPool(node.chainman->ActiveChainstate(), tx_pool, tx, bypass_limits));\n+        const auto res = WITH_LOCK(::cs_main, return AcceptToMemoryPool(chainstate.m_params, tx_pool, node.chainman->ActiveChainstate(), tx, GetTime(), bypass_limits, /* test_accept= */false));",
    "path": "src/test/fuzz/tx_pool.cpp",
    "position": null,
    "original_position": 24,
    "commit_id": "4ec8b96e077a359c7ba877fc4f78d55ac7d5fb22",
    "original_commit_id": "9f967515f41000ee94152ce0611ed2c9145bfb54",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "```suggestion\r\n        const auto res = WITH_LOCK(::cs_main, return AcceptToMemoryPool(chainstate.m_params, tx_pool, chainstate, tx, GetTime(), bypass_limits, /* test_accept= */false));\r\n```",
    "created_at": "2021-11-11T12:03:46Z",
    "updated_at": "2021-11-11T12:09:56Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r747442858",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747442858"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r747442858"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747442858/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 334,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747446157",
    "pull_request_review_id": 803720554,
    "id": 747446157,
    "node_id": "PRRC_kwDOABII584sjR-N",
    "diff_hunk": "@@ -208,19 +208,26 @@ struct PackageMempoolAcceptResult\n };\n \n /**\n- * Try to add a transaction to the mempool. This is an internal function and is\n- * exposed only for testing. Client code should use ChainstateManager::ProcessTransaction()\n+ * Try to add a transaction to the mempool. This is an internal function and is exposed only for testing.\n+ * Client code should use ChainstateManager::ProcessTransaction()\n  *\n- * @param[in]  active_chainstate  Reference to the active chainstate.\n+ * @param[in]  chainparams        Chain paramenters.",
    "path": "src/validation.h",
    "position": null,
    "original_position": 10,
    "commit_id": "4ec8b96e077a359c7ba877fc4f78d55ac7d5fb22",
    "original_commit_id": "9f967515f41000ee94152ce0611ed2c9145bfb54",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This argument could be removed. `AcceptToMemoryPool()` could just take the `m_params` from the `active_chainstate` that's passed in.",
    "created_at": "2021-11-11T12:09:02Z",
    "updated_at": "2021-11-11T12:09:56Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r747446157",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747446157"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r747446157"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747446157/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 214,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747446663",
    "pull_request_review_id": 803720554,
    "id": 747446663,
    "node_id": "PRRC_kwDOABII584sjSGH",
    "diff_hunk": "@@ -208,19 +208,26 @@ struct PackageMempoolAcceptResult\n };\n \n /**\n- * Try to add a transaction to the mempool. This is an internal function and is\n- * exposed only for testing. Client code should use ChainstateManager::ProcessTransaction()\n+ * Try to add a transaction to the mempool. This is an internal function and is exposed only for testing.\n+ * Client code should use ChainstateManager::ProcessTransaction()\n  *\n- * @param[in]  active_chainstate  Reference to the active chainstate.\n+ * @param[in]  chainparams        Chain paramenters.\n  * @param[in]  pool               Reference to the node's mempool.\n+ * @param[in]  active_chainstate  Reference to the active chainstate.\n  * @param[in]  tx                 The transaction to submit for mempool acceptance.\n+ * @param[in]  accept_time        The timestamp for adding the transaction to the mempool. Usually\n+ *                                the current system time, but may be different (eg when loading\n+ *                                mempool txs from disk on startup).",
    "path": "src/validation.h",
    "position": null,
    "original_position": 16,
    "commit_id": "4ec8b96e077a359c7ba877fc4f78d55ac7d5fb22",
    "original_commit_id": "9f967515f41000ee94152ce0611ed2c9145bfb54",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "It's generally not a good idea to document how the function is called in the function comment (since that may change over time, and this comment would be out of date:\r\n\r\n```suggestion\r\n *                                the current system time, but may be different.\r\n```",
    "created_at": "2021-11-11T12:09:50Z",
    "updated_at": "2021-11-11T12:09:56Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r747446663",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747446663"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r747446663"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747446663/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": 219,
    "start_side": "RIGHT",
    "line": null,
    "original_line": 220,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747939403",
    "pull_request_review_id": 804366598,
    "id": 747939403,
    "node_id": "PRRC_kwDOABII584slKZL",
    "diff_hunk": "@@ -230,7 +230,8 @@ FUZZ_TARGET_INIT(tx_pool_standard, initialize_tx_pool)\n         Assert(it->second.m_result_type == MempoolAcceptResult::ResultType::VALID ||\n                it->second.m_result_type == MempoolAcceptResult::ResultType::INVALID);\n \n-        const auto res = WITH_LOCK(::cs_main, return AcceptToMemoryPool(chainstate, tx_pool, tx, bypass_limits));\n+        CChainState& chainstate{node.chainman->ActiveChainstate()};\n+        const auto res = WITH_LOCK(::cs_main, return AcceptToMemoryPool(chainstate.m_params, tx_pool, chainstate, tx, GetTime(), bypass_limits, /* test_accept= */false));",
    "path": "src/test/fuzz/tx_pool.cpp",
    "position": null,
    "original_position": 15,
    "commit_id": "4ec8b96e077a359c7ba877fc4f78d55ac7d5fb22",
    "original_commit_id": "9f967515f41000ee94152ce0611ed2c9145bfb54",
    "user": {
      "login": "lsilva01",
      "id": 84432093,
      "node_id": "MDQ6VXNlcjg0NDMyMDkz",
      "avatar_url": "https://avatars.githubusercontent.com/u/84432093?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lsilva01",
      "html_url": "https://github.com/lsilva01",
      "followers_url": "https://api.github.com/users/lsilva01/followers",
      "following_url": "https://api.github.com/users/lsilva01/following{/other_user}",
      "gists_url": "https://api.github.com/users/lsilva01/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lsilva01/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lsilva01/subscriptions",
      "organizations_url": "https://api.github.com/users/lsilva01/orgs",
      "repos_url": "https://api.github.com/users/lsilva01/repos",
      "events_url": "https://api.github.com/users/lsilva01/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lsilva01/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Agreed. Changed it to the first commit.",
    "created_at": "2021-11-12T02:31:12Z",
    "updated_at": "2021-11-12T02:31:12Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r747939403",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747939403"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r747939403"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747939403/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 234,
    "side": "RIGHT",
    "in_reply_to_id": 747442614
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747939668",
    "pull_request_review_id": 804366858,
    "id": 747939668,
    "node_id": "PRRC_kwDOABII584slKdU",
    "diff_hunk": "@@ -330,7 +331,7 @@ FUZZ_TARGET_INIT(tx_pool, initialize_tx_pool)\n         const auto tx = MakeTransactionRef(mut_tx);\n         const bool bypass_limits = fuzzed_data_provider.ConsumeBool();\n         ::fRequireStandard = fuzzed_data_provider.ConsumeBool();\n-        const auto res = WITH_LOCK(::cs_main, return AcceptToMemoryPool(node.chainman->ActiveChainstate(), tx_pool, tx, bypass_limits));\n+        const auto res = WITH_LOCK(::cs_main, return AcceptToMemoryPool(chainstate.m_params, tx_pool, node.chainman->ActiveChainstate(), tx, GetTime(), bypass_limits, /* test_accept= */false));",
    "path": "src/test/fuzz/tx_pool.cpp",
    "position": null,
    "original_position": 24,
    "commit_id": "4ec8b96e077a359c7ba877fc4f78d55ac7d5fb22",
    "original_commit_id": "9f967515f41000ee94152ce0611ed2c9145bfb54",
    "user": {
      "login": "lsilva01",
      "id": 84432093,
      "node_id": "MDQ6VXNlcjg0NDMyMDkz",
      "avatar_url": "https://avatars.githubusercontent.com/u/84432093?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lsilva01",
      "html_url": "https://github.com/lsilva01",
      "followers_url": "https://api.github.com/users/lsilva01/followers",
      "following_url": "https://api.github.com/users/lsilva01/following{/other_user}",
      "gists_url": "https://api.github.com/users/lsilva01/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lsilva01/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lsilva01/subscriptions",
      "organizations_url": "https://api.github.com/users/lsilva01/orgs",
      "repos_url": "https://api.github.com/users/lsilva01/repos",
      "events_url": "https://api.github.com/users/lsilva01/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lsilva01/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done.",
    "created_at": "2021-11-12T02:31:57Z",
    "updated_at": "2021-11-12T02:31:57Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r747939668",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747939668"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r747939668"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747939668/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 334,
    "side": "RIGHT",
    "in_reply_to_id": 747442858
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747939926",
    "pull_request_review_id": 804367113,
    "id": 747939926,
    "node_id": "PRRC_kwDOABII584slKhW",
    "diff_hunk": "@@ -208,19 +208,26 @@ struct PackageMempoolAcceptResult\n };\n \n /**\n- * Try to add a transaction to the mempool. This is an internal function and is\n- * exposed only for testing. Client code should use ChainstateManager::ProcessTransaction()\n+ * Try to add a transaction to the mempool. This is an internal function and is exposed only for testing.\n+ * Client code should use ChainstateManager::ProcessTransaction()\n  *\n- * @param[in]  active_chainstate  Reference to the active chainstate.\n+ * @param[in]  chainparams        Chain paramenters.\n  * @param[in]  pool               Reference to the node's mempool.\n+ * @param[in]  active_chainstate  Reference to the active chainstate.\n  * @param[in]  tx                 The transaction to submit for mempool acceptance.\n+ * @param[in]  accept_time        The timestamp for adding the transaction to the mempool. Usually\n+ *                                the current system time, but may be different (eg when loading\n+ *                                mempool txs from disk on startup).",
    "path": "src/validation.h",
    "position": null,
    "original_position": 16,
    "commit_id": "4ec8b96e077a359c7ba877fc4f78d55ac7d5fb22",
    "original_commit_id": "9f967515f41000ee94152ce0611ed2c9145bfb54",
    "user": {
      "login": "lsilva01",
      "id": 84432093,
      "node_id": "MDQ6VXNlcjg0NDMyMDkz",
      "avatar_url": "https://avatars.githubusercontent.com/u/84432093?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lsilva01",
      "html_url": "https://github.com/lsilva01",
      "followers_url": "https://api.github.com/users/lsilva01/followers",
      "following_url": "https://api.github.com/users/lsilva01/following{/other_user}",
      "gists_url": "https://api.github.com/users/lsilva01/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lsilva01/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lsilva01/subscriptions",
      "organizations_url": "https://api.github.com/users/lsilva01/orgs",
      "repos_url": "https://api.github.com/users/lsilva01/repos",
      "events_url": "https://api.github.com/users/lsilva01/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lsilva01/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Makes sense. Comment removed.",
    "created_at": "2021-11-12T02:32:43Z",
    "updated_at": "2021-11-12T02:32:43Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r747939926",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747939926"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r747939926"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747939926/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": 219,
    "start_side": "RIGHT",
    "line": null,
    "original_line": 220,
    "side": "RIGHT",
    "in_reply_to_id": 747446663
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747943465",
    "pull_request_review_id": 804371336,
    "id": 747943465,
    "node_id": "PRRC_kwDOABII584slLYp",
    "diff_hunk": "@@ -208,19 +208,26 @@ struct PackageMempoolAcceptResult\n };\n \n /**\n- * Try to add a transaction to the mempool. This is an internal function and is\n- * exposed only for testing. Client code should use ChainstateManager::ProcessTransaction()\n+ * Try to add a transaction to the mempool. This is an internal function and is exposed only for testing.\n+ * Client code should use ChainstateManager::ProcessTransaction()\n  *\n- * @param[in]  active_chainstate  Reference to the active chainstate.\n+ * @param[in]  chainparams        Chain paramenters.",
    "path": "src/validation.h",
    "position": null,
    "original_position": 10,
    "commit_id": "4ec8b96e077a359c7ba877fc4f78d55ac7d5fb22",
    "original_commit_id": "9f967515f41000ee94152ce0611ed2c9145bfb54",
    "user": {
      "login": "lsilva01",
      "id": 84432093,
      "node_id": "MDQ6VXNlcjg0NDMyMDkz",
      "avatar_url": "https://avatars.githubusercontent.com/u/84432093?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lsilva01",
      "html_url": "https://github.com/lsilva01",
      "followers_url": "https://api.github.com/users/lsilva01/followers",
      "following_url": "https://api.github.com/users/lsilva01/following{/other_user}",
      "gists_url": "https://api.github.com/users/lsilva01/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lsilva01/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lsilva01/subscriptions",
      "organizations_url": "https://api.github.com/users/lsilva01/orgs",
      "repos_url": "https://api.github.com/users/lsilva01/repos",
      "events_url": "https://api.github.com/users/lsilva01/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lsilva01/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done.\r\nAs this PR is removing the `CChainParams& chainparams` from ATMP (commit 863703c),  I also added a new commit to remove `CTxMemPool& pool` as suggested in https://github.com/bitcoin/bitcoin/pull/23437#issuecomment-962536149.",
    "created_at": "2021-11-12T02:44:24Z",
    "updated_at": "2021-11-12T02:44:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r747943465",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747943465"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r747943465"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/747943465/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 214,
    "side": "RIGHT",
    "in_reply_to_id": 747446157
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/748180643",
    "pull_request_review_id": 804689722,
    "id": 748180643,
    "node_id": "PRRC_kwDOABII584smFSj",
    "diff_hunk": "@@ -208,19 +208,22 @@ struct PackageMempoolAcceptResult\n };\n \n /**\n- * Try to add a transaction to the mempool. This is an internal function and is\n- * exposed only for testing. Client code should use ChainstateManager::ProcessTransaction()\n+ * Try to add a transaction to the mempool. This is an internal function and is exposed only for testing.\n+ * Client code should use ChainstateManager::ProcessTransaction()\n  *\n  * @param[in]  active_chainstate  Reference to the active chainstate.\n- * @param[in]  pool               Reference to the node's mempool.",
    "path": "src/validation.h",
    "position": 10,
    "original_position": 10,
    "commit_id": "4ec8b96e077a359c7ba877fc4f78d55ac7d5fb22",
    "original_commit_id": "a4fc09b1568d8c84968522d5bf29243824e423f2",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This causes the tx_pool fuzz test to fail since it operates on a mempool that isn't referenced by the `CChainState` object. See https://github.com/bitcoin/bitcoin/pull/23173#discussion_r731895386.\r\n\r\nThat should probably be fixed in the fuzz test, but it can be left for a future PR. For now, I suggest you just remove the final commit.",
    "created_at": "2021-11-12T11:25:08Z",
    "updated_at": "2021-11-12T11:25:09Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r748180643",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/748180643"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r748180643"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/748180643/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 215,
    "original_line": 215,
    "side": "LEFT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/748193161",
    "pull_request_review_id": 804698463,
    "id": 748193161,
    "node_id": "PRRC_kwDOABII584smIWJ",
    "diff_hunk": "@@ -208,19 +208,22 @@ struct PackageMempoolAcceptResult\n };\n \n /**\n- * Try to add a transaction to the mempool. This is an internal function and is\n- * exposed only for testing. Client code should use ChainstateManager::ProcessTransaction()\n+ * Try to add a transaction to the mempool. This is an internal function and is exposed only for testing.\n+ * Client code should use ChainstateManager::ProcessTransaction()\n  *\n  * @param[in]  active_chainstate  Reference to the active chainstate.\n- * @param[in]  pool               Reference to the node's mempool.",
    "path": "src/validation.h",
    "position": 10,
    "original_position": 10,
    "commit_id": "4ec8b96e077a359c7ba877fc4f78d55ac7d5fb22",
    "original_commit_id": "a4fc09b1568d8c84968522d5bf29243824e423f2",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "For reference, this can trivially be fixed by something like:\r\n\r\n```cpp\r\nstruct MockedChainstate:public CChainstate{\r\nSwapTxPool(CTxMempool*tx_pool){m_mempool=tx_pool;}\r\n}\r\n\r\n...\r\n\r\n   CTxMempool fuzzed_pool;\r\n   (MockedChainstate*)(&chainstate)->SwapTxPool(&fuzzed_pool);",
    "created_at": "2021-11-12T11:35:47Z",
    "updated_at": "2021-11-12T11:35:47Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r748193161",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/748193161"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r748193161"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/748193161/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 215,
    "original_line": 215,
    "side": "LEFT",
    "in_reply_to_id": 748180643
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/748681538",
    "pull_request_review_id": 805338576,
    "id": 748681538,
    "node_id": "PRRC_kwDOABII584sn_lC",
    "diff_hunk": "@@ -208,19 +208,22 @@ struct PackageMempoolAcceptResult\n };\n \n /**\n- * Try to add a transaction to the mempool. This is an internal function and is\n- * exposed only for testing. Client code should use ChainstateManager::ProcessTransaction()\n+ * Try to add a transaction to the mempool. This is an internal function and is exposed only for testing.\n+ * Client code should use ChainstateManager::ProcessTransaction()\n  *\n  * @param[in]  active_chainstate  Reference to the active chainstate.\n- * @param[in]  pool               Reference to the node's mempool.",
    "path": "src/validation.h",
    "position": 10,
    "original_position": 10,
    "commit_id": "4ec8b96e077a359c7ba877fc4f78d55ac7d5fb22",
    "original_commit_id": "a4fc09b1568d8c84968522d5bf29243824e423f2",
    "user": {
      "login": "lsilva01",
      "id": 84432093,
      "node_id": "MDQ6VXNlcjg0NDMyMDkz",
      "avatar_url": "https://avatars.githubusercontent.com/u/84432093?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lsilva01",
      "html_url": "https://github.com/lsilva01",
      "followers_url": "https://api.github.com/users/lsilva01/followers",
      "following_url": "https://api.github.com/users/lsilva01/following{/other_user}",
      "gists_url": "https://api.github.com/users/lsilva01/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lsilva01/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lsilva01/subscriptions",
      "organizations_url": "https://api.github.com/users/lsilva01/orgs",
      "repos_url": "https://api.github.com/users/lsilva01/repos",
      "events_url": "https://api.github.com/users/lsilva01/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lsilva01/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Final commit removed. ",
    "created_at": "2021-11-13T04:46:19Z",
    "updated_at": "2021-11-13T04:46:19Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r748681538",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/748681538"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r748681538"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/748681538/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 215,
    "original_line": 215,
    "side": "LEFT",
    "in_reply_to_id": 748180643
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/748730930",
    "pull_request_review_id": 805375706,
    "id": 748730930,
    "node_id": "PRRC_kwDOABII584soLoy",
    "diff_hunk": "@@ -208,19 +208,22 @@ struct PackageMempoolAcceptResult\n };\n \n /**\n- * Try to add a transaction to the mempool. This is an internal function and is\n- * exposed only for testing. Client code should use ChainstateManager::ProcessTransaction()\n+ * Try to add a transaction to the mempool. This is an internal function and is exposed only for testing.\n+ * Client code should use ChainstateManager::ProcessTransaction()\n  *\n  * @param[in]  active_chainstate  Reference to the active chainstate.\n- * @param[in]  pool               Reference to the node's mempool.",
    "path": "src/validation.h",
    "position": 10,
    "original_position": 10,
    "commit_id": "4ec8b96e077a359c7ba877fc4f78d55ac7d5fb22",
    "original_commit_id": "a4fc09b1568d8c84968522d5bf29243824e423f2",
    "user": {
      "login": "lsilva01",
      "id": 84432093,
      "node_id": "MDQ6VXNlcjg0NDMyMDkz",
      "avatar_url": "https://avatars.githubusercontent.com/u/84432093?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lsilva01",
      "html_url": "https://github.com/lsilva01",
      "followers_url": "https://api.github.com/users/lsilva01/followers",
      "following_url": "https://api.github.com/users/lsilva01/following{/other_user}",
      "gists_url": "https://api.github.com/users/lsilva01/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lsilva01/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lsilva01/subscriptions",
      "organizations_url": "https://api.github.com/users/lsilva01/orgs",
      "repos_url": "https://api.github.com/users/lsilva01/repos",
      "events_url": "https://api.github.com/users/lsilva01/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lsilva01/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I also addressed the `tx_pool.cpp` issue using a different approach in #23465.\r\nThe fuzz test performed successfully on local machine and CI.\r\n\r\n```diff\r\n- const auto res = WITH_LOCK(::cs_main, return AcceptToMemoryPool(chainstate, tx_pool, tx, bypass_limits));\r\n+ CChainState& chainstate{node.chainman->ActiveChainstate()};\r\n+ chainstate.m_mempool = &tx_pool;\r\n\r\n+ const auto res = WITH_LOCK(::cs_main, return AcceptToMemoryPool(chainstate, tx, GetTime(), bypass_limits, /* test_accept= */false));\r\n```",
    "created_at": "2021-11-13T14:50:55Z",
    "updated_at": "2021-11-13T14:51:20Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r748730930",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/748730930"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r748730930"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/748730930/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 215,
    "original_line": 215,
    "side": "LEFT",
    "in_reply_to_id": 748180643
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/749544102",
    "pull_request_review_id": 806365406,
    "id": 749544102,
    "node_id": "PRRC_kwDOABII584srSKm",
    "diff_hunk": "@@ -1079,15 +1079,13 @@ PackageMempoolAcceptResult MemPoolAccept::AcceptMultipleTransactions(const std::\n \n } // anon namespace\n \n-/** (try to) add transaction to memory pool with a specified acceptance time **/\n-static MempoolAcceptResult AcceptToMemoryPoolWithTime(const CChainParams& chainparams, CTxMemPool& pool,\n-                                                      CChainState& active_chainstate,\n-                                                      const CTransactionRef &tx, int64_t nAcceptTime,\n-                                                      bool bypass_limits, bool test_accept)\n-                                                      EXCLUSIVE_LOCKS_REQUIRED(cs_main)\n+MempoolAcceptResult AcceptToMemoryPool(const CChainParams& chainparams, CTxMemPool& pool,\n+                                       CChainState& active_chainstate, const CTransactionRef& tx,\n+                                       int64_t accept_time, bool bypass_limits, bool test_accept)\n+    EXCLUSIVE_LOCKS_REQUIRED(cs_main)\n {\n     std::vector<COutPoint> coins_to_uncache;\n-    auto args = MemPoolAccept::ATMPArgs::SingleAccept(chainparams, nAcceptTime, bypass_limits, coins_to_uncache, test_accept);\n+    auto args = MemPoolAccept::ATMPArgs::SingleAccept(chainparams, accept_time, bypass_limits, coins_to_uncache, test_accept);",
    "path": "src/validation.cpp",
    "position": 28,
    "original_position": 28,
    "commit_id": "4ec8b96e077a359c7ba877fc4f78d55ac7d5fb22",
    "original_commit_id": "f4c45cd09f62a148d7760bf345a8d59338ccb720",
    "user": {
      "login": "mjdietzx",
      "id": 7217256,
      "node_id": "MDQ6VXNlcjcyMTcyNTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7217256?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mjdietzx",
      "html_url": "https://github.com/mjdietzx",
      "followers_url": "https://api.github.com/users/mjdietzx/followers",
      "following_url": "https://api.github.com/users/mjdietzx/following{/other_user}",
      "gists_url": "https://api.github.com/users/mjdietzx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mjdietzx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mjdietzx/subscriptions",
      "organizations_url": "https://api.github.com/users/mjdietzx/orgs",
      "repos_url": "https://api.github.com/users/mjdietzx/repos",
      "events_url": "https://api.github.com/users/mjdietzx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mjdietzx/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "can this be `const`?",
    "created_at": "2021-11-15T17:35:22Z",
    "updated_at": "2021-11-15T17:40:19Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r749544102",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/749544102"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r749544102"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/749544102/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1088,
    "original_line": 1088,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/749544540",
    "pull_request_review_id": 806365406,
    "id": 749544540,
    "node_id": "PRRC_kwDOABII584srSRc",
    "diff_hunk": "@@ -208,19 +208,25 @@ struct PackageMempoolAcceptResult\n };\n \n /**\n- * Try to add a transaction to the mempool. This is an internal function and is\n- * exposed only for testing. Client code should use ChainstateManager::ProcessTransaction()\n+ * Try to add a transaction to the mempool. This is an internal function and is exposed only for testing.\n+ * Client code should use ChainstateManager::ProcessTransaction()\n  *\n- * @param[in]  active_chainstate  Reference to the active chainstate.\n+ * @param[in]  chainparams        Chain paramenters.\n  * @param[in]  pool               Reference to the node's mempool.\n+ * @param[in]  active_chainstate  Reference to the active chainstate.\n  * @param[in]  tx                 The transaction to submit for mempool acceptance.\n+ * @param[in]  accept_time        The timestamp for adding the transaction to the mempool. Usually\n+ *                                the current system time, but may be different.\n+ *                                It is also used to determine when the entry expires.\n  * @param[in]  bypass_limits      When true, don't enforce mempool fee and capacity limits.\n  * @param[in]  test_accept        When true, run validation checks but don't submit to mempool.\n  *\n  * @returns a MempoolAcceptResult indicating whether the transaction was accepted/rejected with reason.\n  */\n-MempoolAcceptResult AcceptToMemoryPool(CChainState& active_chainstate, CTxMemPool& pool, const CTransactionRef& tx,\n-                                       bool bypass_limits, bool test_accept=false) EXCLUSIVE_LOCKS_REQUIRED(cs_main);\n+MempoolAcceptResult AcceptToMemoryPool(const CChainParams& chainparams, CTxMemPool& pool,\n+                                       CChainState& active_chainstate, const CTransactionRef& tx,\n+                                       int64_t accept_time, bool bypass_limits, bool test_accept)",
    "path": "src/validation.h",
    "position": 24,
    "original_position": 26,
    "commit_id": "4ec8b96e077a359c7ba877fc4f78d55ac7d5fb22",
    "original_commit_id": "f4c45cd09f62a148d7760bf345a8d59338ccb720",
    "user": {
      "login": "mjdietzx",
      "id": 7217256,
      "node_id": "MDQ6VXNlcjcyMTcyNTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7217256?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mjdietzx",
      "html_url": "https://github.com/mjdietzx",
      "followers_url": "https://api.github.com/users/mjdietzx/followers",
      "following_url": "https://api.github.com/users/mjdietzx/following{/other_user}",
      "gists_url": "https://api.github.com/users/mjdietzx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mjdietzx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mjdietzx/subscriptions",
      "organizations_url": "https://api.github.com/users/mjdietzx/orgs",
      "repos_url": "https://api.github.com/users/mjdietzx/repos",
      "events_url": "https://api.github.com/users/mjdietzx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mjdietzx/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Curious why you removed default `false` value for `test_accept`?",
    "created_at": "2021-11-15T17:35:59Z",
    "updated_at": "2021-11-15T17:40:19Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r749544540",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/749544540"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r749544540"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/749544540/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 226,
    "original_line": 226,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/749547128",
    "pull_request_review_id": 806365406,
    "id": 749547128,
    "node_id": "PRRC_kwDOABII584srS54",
    "diff_hunk": "@@ -230,7 +230,7 @@ FUZZ_TARGET_INIT(tx_pool_standard, initialize_tx_pool)\n         Assert(it->second.m_result_type == MempoolAcceptResult::ResultType::VALID ||\n                it->second.m_result_type == MempoolAcceptResult::ResultType::INVALID);\n \n-        const auto res = WITH_LOCK(::cs_main, return AcceptToMemoryPool(chainstate, tx_pool, tx, bypass_limits));\n+        const auto res = WITH_LOCK(::cs_main, return AcceptToMemoryPool(::Params(), tx_pool, chainstate, tx, GetTime(), bypass_limits, /* test_accept= */false));",
    "path": "src/test/fuzz/tx_pool.cpp",
    "position": null,
    "original_position": 5,
    "commit_id": "4ec8b96e077a359c7ba877fc4f78d55ac7d5fb22",
    "original_commit_id": "f4c45cd09f62a148d7760bf345a8d59338ccb720",
    "user": {
      "login": "mjdietzx",
      "id": 7217256,
      "node_id": "MDQ6VXNlcjcyMTcyNTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7217256?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mjdietzx",
      "html_url": "https://github.com/mjdietzx",
      "followers_url": "https://api.github.com/users/mjdietzx/followers",
      "following_url": "https://api.github.com/users/mjdietzx/following{/other_user}",
      "gists_url": "https://api.github.com/users/mjdietzx/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mjdietzx/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mjdietzx/subscriptions",
      "organizations_url": "https://api.github.com/users/mjdietzx/orgs",
      "repos_url": "https://api.github.com/users/mjdietzx/repos",
      "events_url": "https://api.github.com/users/mjdietzx/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mjdietzx/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "nit: sometimes throughout your changes you don't have a space between the last `*/` and the value, ie: `/* test_accept= */false` => `/* test_accept= */ false`",
    "created_at": "2021-11-15T17:39:36Z",
    "updated_at": "2021-11-15T17:40:19Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r749547128",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/749547128"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r749547128"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/749547128/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 233,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/749692936",
    "pull_request_review_id": 806561051,
    "id": 749692936,
    "node_id": "PRRC_kwDOABII584sr2gI",
    "diff_hunk": "@@ -1079,15 +1079,13 @@ PackageMempoolAcceptResult MemPoolAccept::AcceptMultipleTransactions(const std::\n \n } // anon namespace\n \n-/** (try to) add transaction to memory pool with a specified acceptance time **/\n-static MempoolAcceptResult AcceptToMemoryPoolWithTime(const CChainParams& chainparams, CTxMemPool& pool,\n-                                                      CChainState& active_chainstate,\n-                                                      const CTransactionRef &tx, int64_t nAcceptTime,\n-                                                      bool bypass_limits, bool test_accept)\n-                                                      EXCLUSIVE_LOCKS_REQUIRED(cs_main)\n+MempoolAcceptResult AcceptToMemoryPool(const CChainParams& chainparams, CTxMemPool& pool,\n+                                       CChainState& active_chainstate, const CTransactionRef& tx,\n+                                       int64_t accept_time, bool bypass_limits, bool test_accept)\n+    EXCLUSIVE_LOCKS_REQUIRED(cs_main)\n {\n     std::vector<COutPoint> coins_to_uncache;\n-    auto args = MemPoolAccept::ATMPArgs::SingleAccept(chainparams, nAcceptTime, bypass_limits, coins_to_uncache, test_accept);\n+    auto args = MemPoolAccept::ATMPArgs::SingleAccept(chainparams, accept_time, bypass_limits, coins_to_uncache, test_accept);",
    "path": "src/validation.cpp",
    "position": 28,
    "original_position": 28,
    "commit_id": "4ec8b96e077a359c7ba877fc4f78d55ac7d5fb22",
    "original_commit_id": "f4c45cd09f62a148d7760bf345a8d59338ccb720",
    "user": {
      "login": "lsilva01",
      "id": 84432093,
      "node_id": "MDQ6VXNlcjg0NDMyMDkz",
      "avatar_url": "https://avatars.githubusercontent.com/u/84432093?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lsilva01",
      "html_url": "https://github.com/lsilva01",
      "followers_url": "https://api.github.com/users/lsilva01/followers",
      "following_url": "https://api.github.com/users/lsilva01/following{/other_user}",
      "gists_url": "https://api.github.com/users/lsilva01/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lsilva01/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lsilva01/subscriptions",
      "organizations_url": "https://api.github.com/users/lsilva01/orgs",
      "repos_url": "https://api.github.com/users/lsilva01/repos",
      "events_url": "https://api.github.com/users/lsilva01/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lsilva01/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Refers to the `args` variable?",
    "created_at": "2021-11-15T21:25:44Z",
    "updated_at": "2021-11-15T21:25:44Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r749692936",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/749692936"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r749692936"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/749692936/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1088,
    "original_line": 1088,
    "side": "RIGHT",
    "in_reply_to_id": 749544102
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/749693073",
    "pull_request_review_id": 806561248,
    "id": 749693073,
    "node_id": "PRRC_kwDOABII584sr2iR",
    "diff_hunk": "@@ -208,19 +208,25 @@ struct PackageMempoolAcceptResult\n };\n \n /**\n- * Try to add a transaction to the mempool. This is an internal function and is\n- * exposed only for testing. Client code should use ChainstateManager::ProcessTransaction()\n+ * Try to add a transaction to the mempool. This is an internal function and is exposed only for testing.\n+ * Client code should use ChainstateManager::ProcessTransaction()\n  *\n- * @param[in]  active_chainstate  Reference to the active chainstate.\n+ * @param[in]  chainparams        Chain paramenters.\n  * @param[in]  pool               Reference to the node's mempool.\n+ * @param[in]  active_chainstate  Reference to the active chainstate.\n  * @param[in]  tx                 The transaction to submit for mempool acceptance.\n+ * @param[in]  accept_time        The timestamp for adding the transaction to the mempool. Usually\n+ *                                the current system time, but may be different.\n+ *                                It is also used to determine when the entry expires.\n  * @param[in]  bypass_limits      When true, don't enforce mempool fee and capacity limits.\n  * @param[in]  test_accept        When true, run validation checks but don't submit to mempool.\n  *\n  * @returns a MempoolAcceptResult indicating whether the transaction was accepted/rejected with reason.\n  */\n-MempoolAcceptResult AcceptToMemoryPool(CChainState& active_chainstate, CTxMemPool& pool, const CTransactionRef& tx,\n-                                       bool bypass_limits, bool test_accept=false) EXCLUSIVE_LOCKS_REQUIRED(cs_main);\n+MempoolAcceptResult AcceptToMemoryPool(const CChainParams& chainparams, CTxMemPool& pool,\n+                                       CChainState& active_chainstate, const CTransactionRef& tx,\n+                                       int64_t accept_time, bool bypass_limits, bool test_accept)",
    "path": "src/validation.h",
    "position": 24,
    "original_position": 26,
    "commit_id": "4ec8b96e077a359c7ba877fc4f78d55ac7d5fb22",
    "original_commit_id": "f4c45cd09f62a148d7760bf345a8d59338ccb720",
    "user": {
      "login": "lsilva01",
      "id": 84432093,
      "node_id": "MDQ6VXNlcjg0NDMyMDkz",
      "avatar_url": "https://avatars.githubusercontent.com/u/84432093?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lsilva01",
      "html_url": "https://github.com/lsilva01",
      "followers_url": "https://api.github.com/users/lsilva01/followers",
      "following_url": "https://api.github.com/users/lsilva01/following{/other_user}",
      "gists_url": "https://api.github.com/users/lsilva01/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lsilva01/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lsilva01/subscriptions",
      "organizations_url": "https://api.github.com/users/lsilva01/orgs",
      "repos_url": "https://api.github.com/users/lsilva01/repos",
      "events_url": "https://api.github.com/users/lsilva01/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lsilva01/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Since this PR removes `AcceptToMemoryPoolWithTime` where `bool test_accept` has no default value, I think making it explicit is better.",
    "created_at": "2021-11-15T21:25:59Z",
    "updated_at": "2021-11-15T21:25:59Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r749693073",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/749693073"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r749693073"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/749693073/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 226,
    "original_line": 226,
    "side": "RIGHT",
    "in_reply_to_id": 749544540
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/749693123",
    "pull_request_review_id": 806561328,
    "id": 749693123,
    "node_id": "PRRC_kwDOABII584sr2jD",
    "diff_hunk": "@@ -230,7 +230,7 @@ FUZZ_TARGET_INIT(tx_pool_standard, initialize_tx_pool)\n         Assert(it->second.m_result_type == MempoolAcceptResult::ResultType::VALID ||\n                it->second.m_result_type == MempoolAcceptResult::ResultType::INVALID);\n \n-        const auto res = WITH_LOCK(::cs_main, return AcceptToMemoryPool(chainstate, tx_pool, tx, bypass_limits));\n+        const auto res = WITH_LOCK(::cs_main, return AcceptToMemoryPool(::Params(), tx_pool, chainstate, tx, GetTime(), bypass_limits, /* test_accept= */false));",
    "path": "src/test/fuzz/tx_pool.cpp",
    "position": null,
    "original_position": 5,
    "commit_id": "4ec8b96e077a359c7ba877fc4f78d55ac7d5fb22",
    "original_commit_id": "f4c45cd09f62a148d7760bf345a8d59338ccb720",
    "user": {
      "login": "lsilva01",
      "id": 84432093,
      "node_id": "MDQ6VXNlcjg0NDMyMDkz",
      "avatar_url": "https://avatars.githubusercontent.com/u/84432093?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lsilva01",
      "html_url": "https://github.com/lsilva01",
      "followers_url": "https://api.github.com/users/lsilva01/followers",
      "following_url": "https://api.github.com/users/lsilva01/following{/other_user}",
      "gists_url": "https://api.github.com/users/lsilva01/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lsilva01/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lsilva01/subscriptions",
      "organizations_url": "https://api.github.com/users/lsilva01/orgs",
      "repos_url": "https://api.github.com/users/lsilva01/repos",
      "events_url": "https://api.github.com/users/lsilva01/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lsilva01/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Thanks. I will fix it.",
    "created_at": "2021-11-15T21:26:05Z",
    "updated_at": "2021-11-15T21:26:06Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r749693123",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/749693123"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r749693123"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/749693123/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 233,
    "side": "RIGHT",
    "in_reply_to_id": 749547128
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/754562067",
    "pull_request_review_id": 812921650,
    "id": 754562067,
    "node_id": "PRRC_kwDOABII584s-bQT",
    "diff_hunk": "@@ -1079,15 +1079,13 @@ PackageMempoolAcceptResult MemPoolAccept::AcceptMultipleTransactions(const std::\n \n } // anon namespace\n \n-/** (try to) add transaction to memory pool with a specified acceptance time **/\n-static MempoolAcceptResult AcceptToMemoryPoolWithTime(const CChainParams& chainparams, CTxMemPool& pool,\n-                                                      CChainState& active_chainstate,\n-                                                      const CTransactionRef &tx, int64_t nAcceptTime,\n-                                                      bool bypass_limits, bool test_accept)\n-                                                      EXCLUSIVE_LOCKS_REQUIRED(cs_main)\n+MempoolAcceptResult AcceptToMemoryPool(const CChainParams& chainparams, CTxMemPool& pool,\n+                                       CChainState& active_chainstate, const CTransactionRef& tx,\n+                                       int64_t accept_time, bool bypass_limits, bool test_accept)\n+    EXCLUSIVE_LOCKS_REQUIRED(cs_main)\n {\n     std::vector<COutPoint> coins_to_uncache;\n-    auto args = MemPoolAccept::ATMPArgs::SingleAccept(chainparams, nAcceptTime, bypass_limits, coins_to_uncache, test_accept);\n+    auto args = MemPoolAccept::ATMPArgs::SingleAccept(chainparams, accept_time, bypass_limits, coins_to_uncache, test_accept);",
    "path": "src/validation.cpp",
    "position": 28,
    "original_position": 28,
    "commit_id": "4ec8b96e077a359c7ba877fc4f78d55ac7d5fb22",
    "original_commit_id": "f4c45cd09f62a148d7760bf345a8d59338ccb720",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "No - contrary to what the name `args` suggests, it cannot be const because it contains `coins_to_uncache`, which is populated with coins and returned. If `coins_to_uncache` were removed from `ATMPArgs` then it could be const.\r\n\r\nAs a side thought, I personally think it would be nice/more RAII-like if uncaching would be handled by `MemPoolAccept` (see #21146), which is one approach to removing it from `args`.",
    "created_at": "2021-11-22T19:08:40Z",
    "updated_at": "2021-11-22T19:11:55Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r754562067",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/754562067"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r754562067"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/754562067/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1088,
    "original_line": 1088,
    "side": "RIGHT",
    "in_reply_to_id": 749544102
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/754564443",
    "pull_request_review_id": 812924729,
    "id": 754564443,
    "node_id": "PRRC_kwDOABII584s-b1b",
    "diff_hunk": "@@ -230,7 +230,7 @@ FUZZ_TARGET_INIT(tx_pool_standard, initialize_tx_pool)\n         Assert(it->second.m_result_type == MempoolAcceptResult::ResultType::VALID ||\n                it->second.m_result_type == MempoolAcceptResult::ResultType::INVALID);\n \n-        const auto res = WITH_LOCK(::cs_main, return AcceptToMemoryPool(chainstate, tx_pool, tx, bypass_limits));\n+        const auto res = WITH_LOCK(::cs_main, return AcceptToMemoryPool(::Params(), tx_pool, chainstate, tx, GetTime(), bypass_limits, /* test_accept= */false));",
    "path": "src/test/fuzz/tx_pool.cpp",
    "position": null,
    "original_position": 5,
    "commit_id": "4ec8b96e077a359c7ba877fc4f78d55ac7d5fb22",
    "original_commit_id": "f4c45cd09f62a148d7760bf345a8d59338ccb720",
    "user": {
      "login": "lsilva01",
      "id": 84432093,
      "node_id": "MDQ6VXNlcjg0NDMyMDkz",
      "avatar_url": "https://avatars.githubusercontent.com/u/84432093?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lsilva01",
      "html_url": "https://github.com/lsilva01",
      "followers_url": "https://api.github.com/users/lsilva01/followers",
      "following_url": "https://api.github.com/users/lsilva01/following{/other_user}",
      "gists_url": "https://api.github.com/users/lsilva01/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lsilva01/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lsilva01/subscriptions",
      "organizations_url": "https://api.github.com/users/lsilva01/orgs",
      "repos_url": "https://api.github.com/users/lsilva01/repos",
      "events_url": "https://api.github.com/users/lsilva01/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lsilva01/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Fixed.",
    "created_at": "2021-11-22T19:12:21Z",
    "updated_at": "2021-11-22T19:12:21Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r754564443",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/754564443"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r754564443"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/754564443/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 233,
    "side": "RIGHT",
    "in_reply_to_id": 749547128
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/754565713",
    "pull_request_review_id": 812926470,
    "id": 754565713,
    "node_id": "PRRC_kwDOABII584s-cJR",
    "diff_hunk": "@@ -1079,15 +1079,13 @@ PackageMempoolAcceptResult MemPoolAccept::AcceptMultipleTransactions(const std::\n \n } // anon namespace\n \n-/** (try to) add transaction to memory pool with a specified acceptance time **/\n-static MempoolAcceptResult AcceptToMemoryPoolWithTime(const CChainParams& chainparams, CTxMemPool& pool,\n-                                                      CChainState& active_chainstate,\n-                                                      const CTransactionRef &tx, int64_t nAcceptTime,\n-                                                      bool bypass_limits, bool test_accept)\n-                                                      EXCLUSIVE_LOCKS_REQUIRED(cs_main)\n+MempoolAcceptResult AcceptToMemoryPool(const CChainParams& chainparams, CTxMemPool& pool,\n+                                       CChainState& active_chainstate, const CTransactionRef& tx,\n+                                       int64_t accept_time, bool bypass_limits, bool test_accept)\n+    EXCLUSIVE_LOCKS_REQUIRED(cs_main)\n {\n     std::vector<COutPoint> coins_to_uncache;\n-    auto args = MemPoolAccept::ATMPArgs::SingleAccept(chainparams, nAcceptTime, bypass_limits, coins_to_uncache, test_accept);\n+    auto args = MemPoolAccept::ATMPArgs::SingleAccept(chainparams, accept_time, bypass_limits, coins_to_uncache, test_accept);",
    "path": "src/validation.cpp",
    "position": 28,
    "original_position": 28,
    "commit_id": "4ec8b96e077a359c7ba877fc4f78d55ac7d5fb22",
    "original_commit_id": "f4c45cd09f62a148d7760bf345a8d59338ccb720",
    "user": {
      "login": "lsilva01",
      "id": 84432093,
      "node_id": "MDQ6VXNlcjg0NDMyMDkz",
      "avatar_url": "https://avatars.githubusercontent.com/u/84432093?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lsilva01",
      "html_url": "https://github.com/lsilva01",
      "followers_url": "https://api.github.com/users/lsilva01/followers",
      "following_url": "https://api.github.com/users/lsilva01/following{/other_user}",
      "gists_url": "https://api.github.com/users/lsilva01/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lsilva01/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lsilva01/subscriptions",
      "organizations_url": "https://api.github.com/users/lsilva01/orgs",
      "repos_url": "https://api.github.com/users/lsilva01/repos",
      "events_url": "https://api.github.com/users/lsilva01/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lsilva01/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "It seems this change also implies changing `MemPoolAccept::AcceptSingleTransaction`. Maybe it can be a follow-up PR.",
    "created_at": "2021-11-22T19:14:30Z",
    "updated_at": "2021-11-22T19:14:30Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r754565713",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/754565713"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r754565713"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/754565713/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1088,
    "original_line": 1088,
    "side": "RIGHT",
    "in_reply_to_id": 749544102
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/754574997",
    "pull_request_review_id": 812938837,
    "id": 754574997,
    "node_id": "PRRC_kwDOABII584s-eaV",
    "diff_hunk": "@@ -1079,15 +1079,13 @@ PackageMempoolAcceptResult MemPoolAccept::AcceptMultipleTransactions(const std::\n \n } // anon namespace\n \n-/** (try to) add transaction to memory pool with a specified acceptance time **/\n-static MempoolAcceptResult AcceptToMemoryPoolWithTime(const CChainParams& chainparams, CTxMemPool& pool,\n-                                                      CChainState& active_chainstate,\n-                                                      const CTransactionRef &tx, int64_t nAcceptTime,\n-                                                      bool bypass_limits, bool test_accept)\n-                                                      EXCLUSIVE_LOCKS_REQUIRED(cs_main)\n+MempoolAcceptResult AcceptToMemoryPool(const CChainParams& chainparams, CTxMemPool& pool,\n+                                       CChainState& active_chainstate, const CTransactionRef& tx,\n+                                       int64_t accept_time, bool bypass_limits, bool test_accept)\n+    EXCLUSIVE_LOCKS_REQUIRED(cs_main)\n {\n     std::vector<COutPoint> coins_to_uncache;\n-    auto args = MemPoolAccept::ATMPArgs::SingleAccept(chainparams, nAcceptTime, bypass_limits, coins_to_uncache, test_accept);\n+    auto args = MemPoolAccept::ATMPArgs::SingleAccept(chainparams, accept_time, bypass_limits, coins_to_uncache, test_accept);",
    "path": "src/validation.cpp",
    "position": 28,
    "original_position": 28,
    "commit_id": "4ec8b96e077a359c7ba877fc4f78d55ac7d5fb22",
    "original_commit_id": "f4c45cd09f62a148d7760bf345a8d59338ccb720",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Just to clarify, I didn't mean to suggest that you change it - out of scope for this PR. Marking resolved.",
    "created_at": "2021-11-22T19:29:01Z",
    "updated_at": "2021-11-22T19:29:01Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r754574997",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/754574997"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r754574997"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/754574997/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1088,
    "original_line": 1088,
    "side": "RIGHT",
    "in_reply_to_id": 749544102
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/755168379",
    "pull_request_review_id": 813721318,
    "id": 755168379,
    "node_id": "PRRC_kwDOABII584tAvR7",
    "diff_hunk": "@@ -230,7 +230,8 @@ FUZZ_TARGET_INIT(tx_pool_standard, initialize_tx_pool)\n         Assert(it->second.m_result_type == MempoolAcceptResult::ResultType::VALID ||\n                it->second.m_result_type == MempoolAcceptResult::ResultType::INVALID);\n \n-        const auto res = WITH_LOCK(::cs_main, return AcceptToMemoryPool(chainstate, tx_pool, tx, bypass_limits));\n+        CChainState& chainstate{node.chainman->ActiveChainstate()};",
    "path": "src/test/fuzz/tx_pool.cpp",
    "position": null,
    "original_position": 5,
    "commit_id": "4ec8b96e077a359c7ba877fc4f78d55ac7d5fb22",
    "original_commit_id": "61e20cc2a3275972e131492ceead6c02512dffeb",
    "user": {
      "login": "theStack",
      "id": 91535,
      "node_id": "MDQ6VXNlcjkxNTM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theStack",
      "html_url": "https://github.com/theStack",
      "followers_url": "https://api.github.com/users/theStack/followers",
      "following_url": "https://api.github.com/users/theStack/following{/other_user}",
      "gists_url": "https://api.github.com/users/theStack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theStack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
      "organizations_url": "https://api.github.com/users/theStack/orgs",
      "repos_url": "https://api.github.com/users/theStack/repos",
      "events_url": "https://api.github.com/users/theStack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theStack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I think this line could simply be removed, as it is merely shadowing another reference with the same name and content on top of the fuzz test?",
    "created_at": "2021-11-23T14:19:01Z",
    "updated_at": "2021-11-23T14:19:10Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r755168379",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/755168379"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r755168379"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/755168379/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 233,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/755697715",
    "pull_request_review_id": 814427449,
    "id": 755697715,
    "node_id": "PRRC_kwDOABII584tCwgz",
    "diff_hunk": "@@ -230,7 +230,8 @@ FUZZ_TARGET_INIT(tx_pool_standard, initialize_tx_pool)\n         Assert(it->second.m_result_type == MempoolAcceptResult::ResultType::VALID ||\n                it->second.m_result_type == MempoolAcceptResult::ResultType::INVALID);\n \n-        const auto res = WITH_LOCK(::cs_main, return AcceptToMemoryPool(chainstate, tx_pool, tx, bypass_limits));\n+        CChainState& chainstate{node.chainman->ActiveChainstate()};",
    "path": "src/test/fuzz/tx_pool.cpp",
    "position": null,
    "original_position": 5,
    "commit_id": "4ec8b96e077a359c7ba877fc4f78d55ac7d5fb22",
    "original_commit_id": "61e20cc2a3275972e131492ceead6c02512dffeb",
    "user": {
      "login": "lsilva01",
      "id": 84432093,
      "node_id": "MDQ6VXNlcjg0NDMyMDkz",
      "avatar_url": "https://avatars.githubusercontent.com/u/84432093?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lsilva01",
      "html_url": "https://github.com/lsilva01",
      "followers_url": "https://api.github.com/users/lsilva01/followers",
      "following_url": "https://api.github.com/users/lsilva01/following{/other_user}",
      "gists_url": "https://api.github.com/users/lsilva01/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lsilva01/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lsilva01/subscriptions",
      "organizations_url": "https://api.github.com/users/lsilva01/orgs",
      "repos_url": "https://api.github.com/users/lsilva01/repos",
      "events_url": "https://api.github.com/users/lsilva01/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lsilva01/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Good catch. Line removed in 4ec8b96.",
    "created_at": "2021-11-24T04:43:56Z",
    "updated_at": "2021-11-24T04:43:56Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r755697715",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/755697715"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23437#discussion_r755697715"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23437"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/755697715/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 233,
    "side": "RIGHT",
    "in_reply_to_id": 755168379
  }
]