ariard,2019-12-17 21:05:04,"@jonatack, thanks for review, took your suggestions!",https://github.com/bitcoin/bitcoin/pull/17719#issuecomment-566748495,566748495,
laanwj,2019-12-18 10:57:23,"ACK.\nI think at some point it'd make sense to rename ""keypoolsize"" to something like ""gap limit"" or ""lookahead"" as other wallets do.",https://github.com/bitcoin/bitcoin/pull/17719#issuecomment-566983093,566983093,
ariard,2019-12-18 18:43:49,"@ryanofsky, thanks for review, I think than both HD/non-HD wallets are subjected to risk of loss of funds in case of look-ahead misses. Deriving all your keys by backing up all of them or just the seed, and detecting if derived range has been used are too tied problems but still different?\n\nOverall, I agree security assumptions of  wallet operations could be more documented.",https://github.com/bitcoin/bitcoin/pull/17719#issuecomment-567159395,567159395,
ryanofsky,2019-12-18 18:59:41,"Yeah, this PR is already an improvement. I think there is an important distinction between irrecoverable loss off funds restoring an non-hd backup vs fixable loss off funds restoring an HD wallet backup with too-small -keypool value. But it seems ok for this documentation not to go into the details if there isn't a simple way to describe them.",https://github.com/bitcoin/bitcoin/pull/17719#issuecomment-567165195,567165195,
leto,2020-01-01 13:24:16,Concept ACK. This will hopefully prevent some people from losing funds and has no downside. ,https://github.com/bitcoin/bitcoin/pull/17719#issuecomment-570052953,570052953,
DrahtBot,2020-01-08 12:51:52,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#14582](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/14582.html) (wallet: always do avoid partial spends if f",https://github.com/bitcoin/bitcoin/pull/17719#issuecomment-572034440,572034440,
ryanofsky,2020-01-29 19:56:44,"Maintainers, it seems like this might be ready to be merged. There are just two ACKs, but it is a pretty straightforward documentation update",https://github.com/bitcoin/bitcoin/pull/17719#issuecomment-579932205,579932205,
jonatack,2019-12-11 09:15:00,"Consider:\n```diff\n-    gArgs.AddArg(""-keypool=<n>"", strprintf(""Set key pool size to <n> (default: %u). Decreasing keypool size to a low value may increase the risk of losing funds in case of restoring from an old backup if none of the addresses in the original keypool have been used."", DEFAULT_KEYPOOL_SIZE), ArgsManager::ALLOW_ANY, OptionsCategory::WALLET);\n+    gArgs.AddArg(""-keypool=<n>"", ",https://github.com/bitcoin/bitcoin/pull/17719#discussion_r356477830,356477830,src/wallet/init.cpp
jonatack,2019-12-11 09:26:29,"Consider:\n```diff\n- * In the unlikely case where none of the addresses in the `gap limit` would\n- * be used onchain, the look-ahead wouldn't be incremented to keep\n- * a constant-size and addresses beyond this range wouldn't be detected by an\n- * old backup, that's why it's not recommended to decrease keypool size lower\n- * than default value.\n+\n+ * In the unlikely case where none ",https://github.com/bitcoin/bitcoin/pull/17719#discussion_r356483513,356483513,src/wallet/scriptpubkeyman.h
instagibbs,2019-12-12 15:00:58,maybe want to clarify that the original keypool was larger,https://github.com/bitcoin/bitcoin/pull/17719#discussion_r357192609,357192609,src/wallet/init.cpp
ariard,2019-12-17 21:08:39,"My understanding is if none of the addresses is detected as used on-chain, the keypool is not going to be top-up. If size is N keypool stays at range 0..N instead of being shifted by I, with I being index of address detected. Size is always going to be constant ?\n\nOr do you mean original keypool as keypool set by default ? ",https://github.com/bitcoin/bitcoin/pull/17719#discussion_r359029035,359029035,src/wallet/init.cpp
instagibbs,2019-12-17 21:10:03,@ariard who are you asking here? sorry,https://github.com/bitcoin/bitcoin/pull/17719#discussion_r359029629,359029629,src/wallet/init.cpp
ariard,2019-12-17 21:16:21,@instagibbs what your comment that seems unclear to me,https://github.com/bitcoin/bitcoin/pull/17719#discussion_r359032327,359032327,src/wallet/init.cpp
instagibbs,2019-12-17 21:19:18,"I'm saying that the explanation should explicitly mention that the value for the ""original keypool"" was larger in this loss-risk case.",https://github.com/bitcoin/bitcoin/pull/17719#discussion_r359033720,359033720,src/wallet/init.cpp
ariard,2019-12-17 21:26:49,"The original keypool as set by a mindless user before any detection in the loss-risk case or the default keypool ?\nSorry first option doesn't make sense to me as AFAII keypool keeps the same size.",https://github.com/bitcoin/bitcoin/pull/17719#discussion_r359037085,359037085,src/wallet/init.cpp
jonatack,2019-12-18 12:02:23,"Now that I test it on the command line, perhaps:\n```diff\n- Smaller sizes may increase the risk...\n+ Warning: A size lower than the default may increase the risk...\n```\nHappy to re-ACK if you agree",https://github.com/bitcoin/bitcoin/pull/17719#discussion_r359307057,359307057,src/wallet/init.cpp
ryanofsky,2019-12-18 16:48:06,"> Now that I test it on the command line, perhaps:\n> \n> ```diff\n> - Smaller sizes may increase the risk...\n> + Warning: A size lower than the default may increase the risk...\n> ```\n\nAdding the Warning: prefix could be a good idea, but it's misleading to say that ""size lower than the default may increase the risk"", because that implies the default value has the right amount of risk, e",https://github.com/bitcoin/bitcoin/pull/17719#discussion_r359453846,359453846,src/wallet/init.cpp
jonatack,2019-12-18 17:28:12,Good points @ryanofsky; I agree.,https://github.com/bitcoin/bitcoin/pull/17719#discussion_r359474343,359474343,src/wallet/init.cpp
ariard,2019-12-18 18:40:44,"Thanks @jonatack for the suggestion took it on f41d589, should be only diff!\n\n> ""Smaller sizes may increase the risk"" is more accurate because smaller sizes decrease the risk and larger sizes increase it\n\nI think you mean the inverse here, at least that's what the updated comment aims to convey.",https://github.com/bitcoin/bitcoin/pull/17719#discussion_r359506063,359506063,src/wallet/init.cpp
