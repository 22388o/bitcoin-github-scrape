[
  {
    "sha": "c96b2e4f096780c75e3fa8acba496d71322583a1",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjOTZiMmU0ZjA5Njc4MGM3NWUzZmE4YWNiYTQ5NmQ3MTMyMjU4M2Ex",
    "commit": {
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2017-10-20T20:10:08Z"
      },
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2017-10-20T20:10:12Z"
      },
      "message": "qa: Fix replace-by-fee race condition failures",
      "tree": {
        "sha": "344ef5b972f5caba3a5568668ed88d9d6e1c0715",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/344ef5b972f5caba3a5568668ed88d9d6e1c0715"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c96b2e4f096780c75e3fa8acba496d71322583a1",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c96b2e4f096780c75e3fa8acba496d71322583a1",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/c96b2e4f096780c75e3fa8acba496d71322583a1",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c96b2e4f096780c75e3fa8acba496d71322583a1/comments",
    "author": {
      "login": "sdaftuar",
      "id": 7463573,
      "node_id": "MDQ6VXNlcjc0NjM1NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sdaftuar",
      "html_url": "https://github.com/sdaftuar",
      "followers_url": "https://api.github.com/users/sdaftuar/followers",
      "following_url": "https://api.github.com/users/sdaftuar/following{/other_user}",
      "gists_url": "https://api.github.com/users/sdaftuar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
      "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
      "repos_url": "https://api.github.com/users/sdaftuar/repos",
      "events_url": "https://api.github.com/users/sdaftuar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "sdaftuar",
      "id": 7463573,
      "node_id": "MDQ6VXNlcjc0NjM1NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sdaftuar",
      "html_url": "https://github.com/sdaftuar",
      "followers_url": "https://api.github.com/users/sdaftuar/followers",
      "following_url": "https://api.github.com/users/sdaftuar/following{/other_user}",
      "gists_url": "https://api.github.com/users/sdaftuar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
      "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
      "repos_url": "https://api.github.com/users/sdaftuar/repos",
      "events_url": "https://api.github.com/users/sdaftuar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "ff92fbf24739a022eb677daab03c87c5e6971094",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ff92fbf24739a022eb677daab03c87c5e6971094",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/ff92fbf24739a022eb677daab03c87c5e6971094"
      }
    ],
    "stats": {
      "total": 11,
      "additions": 10,
      "deletions": 1
    },
    "files": [
      {
        "sha": "17667b0bcc2918d8ec7a289a9be1d302d9bec8d3",
        "filename": "test/functional/replace-by-fee.py",
        "status": "modified",
        "additions": 10,
        "deletions": 1,
        "changes": 11,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c96b2e4f096780c75e3fa8acba496d71322583a1/test/functional/replace-by-fee.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c96b2e4f096780c75e3fa8acba496d71322583a1/test/functional/replace-by-fee.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/replace-by-fee.py?ref=c96b2e4f096780c75e3fa8acba496d71322583a1",
        "patch": "@@ -72,6 +72,10 @@ def set_test_params(self):\n                            [\"-mempoolreplacement=0\"]]\n \n     def run_test(self):\n+        # Leave IBD and ensure nodes are synced\n+        self.nodes[0].generate(1)\n+        self.sync_all()\n+\n         make_utxo(self.nodes[0], 1*COIN)\n \n         self.log.info(\"Running test simple doublespend...\")\n@@ -110,13 +114,18 @@ def test_simple_doublespend(self):\n         \"\"\"Simple doublespend\"\"\"\n         tx0_outpoint = make_utxo(self.nodes[0], int(1.1*COIN))\n \n+        # make_utxo may have generated a bunch of blocks, so we need to sync\n+        # before we can spend the coins generated, or else the resulting\n+        # transactions might not be accepted by our peers.\n+        self.sync_all()\n+\n         tx1a = CTransaction()\n         tx1a.vin = [CTxIn(tx0_outpoint, nSequence=0)]\n         tx1a.vout = [CTxOut(1*COIN, CScript([b'a']))]\n         tx1a_hex = txToHex(tx1a)\n         tx1a_txid = self.nodes[0].sendrawtransaction(tx1a_hex, True)\n \n-        self.sync_all([self.nodes])\n+        self.sync_all()\n \n         # Should fail because we haven't changed the fee\n         tx1b = CTransaction()"
      }
    ]
  },
  {
    "sha": "6d51eaefe924bfaf2b0f4928dd6020023733480f",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo2ZDUxZWFlZmU5MjRiZmFmMmIwZjQ5MjhkZDYwMjAwMjM3MzM0ODBm",
    "commit": {
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@chaincode.com",
        "date": "2017-10-20T20:24:10Z"
      },
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@gmail.com",
        "date": "2017-10-23T12:55:21Z"
      },
      "message": "qa: Fix race condition in sendheaders.py",
      "tree": {
        "sha": "15ac76839a57e2f0c101206686cfae24055c9526",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/15ac76839a57e2f0c101206686cfae24055c9526"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6d51eaefe924bfaf2b0f4928dd6020023733480f",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6d51eaefe924bfaf2b0f4928dd6020023733480f",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/6d51eaefe924bfaf2b0f4928dd6020023733480f",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6d51eaefe924bfaf2b0f4928dd6020023733480f/comments",
    "author": {
      "login": "sdaftuar",
      "id": 7463573,
      "node_id": "MDQ6VXNlcjc0NjM1NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sdaftuar",
      "html_url": "https://github.com/sdaftuar",
      "followers_url": "https://api.github.com/users/sdaftuar/followers",
      "following_url": "https://api.github.com/users/sdaftuar/following{/other_user}",
      "gists_url": "https://api.github.com/users/sdaftuar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
      "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
      "repos_url": "https://api.github.com/users/sdaftuar/repos",
      "events_url": "https://api.github.com/users/sdaftuar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "sdaftuar",
      "id": 7463573,
      "node_id": "MDQ6VXNlcjc0NjM1NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sdaftuar",
      "html_url": "https://github.com/sdaftuar",
      "followers_url": "https://api.github.com/users/sdaftuar/followers",
      "following_url": "https://api.github.com/users/sdaftuar/following{/other_user}",
      "gists_url": "https://api.github.com/users/sdaftuar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
      "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
      "repos_url": "https://api.github.com/users/sdaftuar/repos",
      "events_url": "https://api.github.com/users/sdaftuar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "c96b2e4f096780c75e3fa8acba496d71322583a1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c96b2e4f096780c75e3fa8acba496d71322583a1",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/c96b2e4f096780c75e3fa8acba496d71322583a1"
      }
    ],
    "stats": {
      "total": 10,
      "additions": 8,
      "deletions": 2
    },
    "files": [
      {
        "sha": "815e9648481868da67d518bdcdba0b3e1d9a86cc",
        "filename": "test/functional/replace-by-fee.py",
        "status": "modified",
        "additions": 4,
        "deletions": 2,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6d51eaefe924bfaf2b0f4928dd6020023733480f/test/functional/replace-by-fee.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6d51eaefe924bfaf2b0f4928dd6020023733480f/test/functional/replace-by-fee.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/replace-by-fee.py?ref=6d51eaefe924bfaf2b0f4928dd6020023733480f",
        "patch": "@@ -72,12 +72,14 @@ def set_test_params(self):\n                            [\"-mempoolreplacement=0\"]]\n \n     def run_test(self):\n-        # Leave IBD and ensure nodes are synced\n+        # Leave IBD\n         self.nodes[0].generate(1)\n-        self.sync_all()\n \n         make_utxo(self.nodes[0], 1*COIN)\n \n+        # Ensure nodes are synced\n+        self.sync_all()\n+\n         self.log.info(\"Running test simple doublespend...\")\n         self.test_simple_doublespend()\n "
      },
      {
        "sha": "60d107b248b847cc6543f49de16a36e682a9a66c",
        "filename": "test/functional/sendheaders.py",
        "status": "modified",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6d51eaefe924bfaf2b0f4928dd6020023733480f/test/functional/sendheaders.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6d51eaefe924bfaf2b0f4928dd6020023733480f/test/functional/sendheaders.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/sendheaders.py?ref=6d51eaefe924bfaf2b0f4928dd6020023733480f",
        "patch": "@@ -225,6 +225,10 @@ def run_test(self):\n         inv_node.wait_for_verack()\n         test_node.wait_for_verack()\n \n+        # Ensure verack's have been processed by our peer\n+        inv_node.sync_with_ping()\n+        test_node.sync_with_ping()\n+\n         tip = int(self.nodes[0].getbestblockhash(), 16)\n \n         # PART 1"
      }
    ]
  }
]