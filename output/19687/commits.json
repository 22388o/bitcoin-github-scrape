[
  {
    "sha": "2bc207190e6f1818b04c9336f6e0d625b2a2a0ba",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyYmMyMDcxOTBlNmYxODE4YjA0YzkzMzZmNmUwZDYyNWIyYTJhMGJh",
    "commit": {
      "author": {
        "name": "Sebastian Falbesoner",
        "email": "sebastian.falbesoner@gmail.com",
        "date": "2020-08-07T17:55:51Z"
      },
      "committer": {
        "name": "Sebastian Falbesoner",
        "email": "sebastian.falbesoner@gmail.com",
        "date": "2020-08-25T16:52:51Z"
      },
      "message": "util: make EncodeBase32 consume Spans",
      "tree": {
        "sha": "5fa9684143f5f2e0fef4ef8b53444dcb3c262e9e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5fa9684143f5f2e0fef4ef8b53444dcb3c262e9e"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2bc207190e6f1818b04c9336f6e0d625b2a2a0ba",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2bc207190e6f1818b04c9336f6e0d625b2a2a0ba",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/2bc207190e6f1818b04c9336f6e0d625b2a2a0ba",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2bc207190e6f1818b04c9336f6e0d625b2a2a0ba/comments",
    "author": {
      "login": "theStack",
      "id": 91535,
      "node_id": "MDQ6VXNlcjkxNTM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theStack",
      "html_url": "https://github.com/theStack",
      "followers_url": "https://api.github.com/users/theStack/followers",
      "following_url": "https://api.github.com/users/theStack/following{/other_user}",
      "gists_url": "https://api.github.com/users/theStack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theStack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
      "organizations_url": "https://api.github.com/users/theStack/orgs",
      "repos_url": "https://api.github.com/users/theStack/repos",
      "events_url": "https://api.github.com/users/theStack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theStack/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "theStack",
      "id": 91535,
      "node_id": "MDQ6VXNlcjkxNTM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theStack",
      "html_url": "https://github.com/theStack",
      "followers_url": "https://api.github.com/users/theStack/followers",
      "following_url": "https://api.github.com/users/theStack/following{/other_user}",
      "gists_url": "https://api.github.com/users/theStack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theStack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
      "organizations_url": "https://api.github.com/users/theStack/orgs",
      "repos_url": "https://api.github.com/users/theStack/repos",
      "events_url": "https://api.github.com/users/theStack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theStack/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "8d6224fefe015c2022d00a79a4549464bd79cf2f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8d6224fefe015c2022d00a79a4549464bd79cf2f",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/8d6224fefe015c2022d00a79a4549464bd79cf2f"
      }
    ],
    "stats": {
      "total": 17,
      "additions": 9,
      "deletions": 8
    },
    "files": [
      {
        "sha": "8adfe38dc95c92025f6a535aa6e70cacb77a7d21",
        "filename": "src/netaddress.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 3,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2bc207190e6f1818b04c9336f6e0d625b2a2a0ba/src/netaddress.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2bc207190e6f1818b04c9336f6e0d625b2a2a0ba/src/netaddress.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/netaddress.cpp?ref=2bc207190e6f1818b04c9336f6e0d625b2a2a0ba",
        "patch": "@@ -4,10 +4,11 @@\n // file COPYING or http://www.opensource.org/licenses/mit-license.php.\n \n #include <netaddress.h>\n+\n #include <hash.h>\n+#include <tinyformat.h>\n #include <util/strencodings.h>\n #include <util/asmap.h>\n-#include <tinyformat.h>\n \n #include <algorithm>\n #include <array>\n@@ -341,9 +342,9 @@ enum Network CNetAddr::GetNetwork() const\n std::string CNetAddr::ToStringIP() const\n {\n     if (IsTor())\n-        return EncodeBase32(m_addr.data(), m_addr.size()) + \".onion\";\n+        return EncodeBase32(m_addr) + \".onion\";\n     if (IsInternal())\n-        return EncodeBase32(m_addr.data(), m_addr.size()) + \".internal\";\n+        return EncodeBase32(m_addr) + \".internal\";\n     CService serv(*this, 0);\n     struct sockaddr_storage sockaddr;\n     socklen_t socklen = sizeof(sockaddr);"
      },
      {
        "sha": "ec29efc586cb5d5f039ce9ee03e326e46f820e46",
        "filename": "src/util/strencodings.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 4,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2bc207190e6f1818b04c9336f6e0d625b2a2a0ba/src/util/strencodings.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2bc207190e6f1818b04c9336f6e0d625b2a2a0ba/src/util/strencodings.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/util/strencodings.cpp?ref=2bc207190e6f1818b04c9336f6e0d625b2a2a0ba",
        "patch": "@@ -201,20 +201,20 @@ std::string DecodeBase64(const std::string& str, bool* pf_invalid)\n     return std::string((const char*)vchRet.data(), vchRet.size());\n }\n \n-std::string EncodeBase32(const unsigned char* pch, size_t len)\n+std::string EncodeBase32(Span<const unsigned char> input)\n {\n     static const char *pbase32 = \"abcdefghijklmnopqrstuvwxyz234567\";\n \n     std::string str;\n-    str.reserve(((len + 4) / 5) * 8);\n-    ConvertBits<8, 5, true>([&](int v) { str += pbase32[v]; }, pch, pch + len);\n+    str.reserve(((input.size() + 4) / 5) * 8);\n+    ConvertBits<8, 5, true>([&](int v) { str += pbase32[v]; }, input.begin(), input.end());\n     while (str.size() % 8) str += '=';\n     return str;\n }\n \n std::string EncodeBase32(const std::string& str)\n {\n-    return EncodeBase32((const unsigned char*)str.data(), str.size());\n+    return EncodeBase32(MakeUCharSpan(str));\n }\n \n std::vector<unsigned char> DecodeBase32(const char* p, bool* pf_invalid)"
      },
      {
        "sha": "1d0695a7808774bfd9582b161c115bd94377d6b6",
        "filename": "src/util/strencodings.h",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2bc207190e6f1818b04c9336f6e0d625b2a2a0ba/src/util/strencodings.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2bc207190e6f1818b04c9336f6e0d625b2a2a0ba/src/util/strencodings.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/util/strencodings.h?ref=2bc207190e6f1818b04c9336f6e0d625b2a2a0ba",
        "patch": "@@ -52,7 +52,7 @@ std::string EncodeBase64(const unsigned char* pch, size_t len);\n std::string EncodeBase64(const std::string& str);\n std::vector<unsigned char> DecodeBase32(const char* p, bool* pf_invalid = nullptr);\n std::string DecodeBase32(const std::string& str, bool* pf_invalid = nullptr);\n-std::string EncodeBase32(const unsigned char* pch, size_t len);\n+std::string EncodeBase32(Span<const unsigned char> input);\n std::string EncodeBase32(const std::string& str);\n \n void SplitHostPort(std::string in, int& portOut, std::string& hostOut);"
      }
    ]
  },
  {
    "sha": "e2aa1a585a83971639572cd2c84565ec360deac9",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzplMmFhMWE1ODVhODM5NzE2Mzk1NzJjZDJjODQ1NjVlYzM2MGRlYWM5",
    "commit": {
      "author": {
        "name": "Sebastian Falbesoner",
        "email": "sebastian.falbesoner@gmail.com",
        "date": "2020-08-07T18:25:42Z"
      },
      "committer": {
        "name": "Sebastian Falbesoner",
        "email": "sebastian.falbesoner@gmail.com",
        "date": "2020-08-25T16:52:57Z"
      },
      "message": "util: make EncodeBase64 consume Spans",
      "tree": {
        "sha": "a4fad4da37ce843c6c9e40330379de60d00ddf20",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a4fad4da37ce843c6c9e40330379de60d00ddf20"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e2aa1a585a83971639572cd2c84565ec360deac9",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e2aa1a585a83971639572cd2c84565ec360deac9",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/e2aa1a585a83971639572cd2c84565ec360deac9",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e2aa1a585a83971639572cd2c84565ec360deac9/comments",
    "author": {
      "login": "theStack",
      "id": 91535,
      "node_id": "MDQ6VXNlcjkxNTM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theStack",
      "html_url": "https://github.com/theStack",
      "followers_url": "https://api.github.com/users/theStack/followers",
      "following_url": "https://api.github.com/users/theStack/following{/other_user}",
      "gists_url": "https://api.github.com/users/theStack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theStack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
      "organizations_url": "https://api.github.com/users/theStack/orgs",
      "repos_url": "https://api.github.com/users/theStack/repos",
      "events_url": "https://api.github.com/users/theStack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theStack/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "theStack",
      "id": 91535,
      "node_id": "MDQ6VXNlcjkxNTM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theStack",
      "html_url": "https://github.com/theStack",
      "followers_url": "https://api.github.com/users/theStack/followers",
      "following_url": "https://api.github.com/users/theStack/following{/other_user}",
      "gists_url": "https://api.github.com/users/theStack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theStack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
      "organizations_url": "https://api.github.com/users/theStack/orgs",
      "repos_url": "https://api.github.com/users/theStack/repos",
      "events_url": "https://api.github.com/users/theStack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theStack/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "2bc207190e6f1818b04c9336f6e0d625b2a2a0ba",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2bc207190e6f1818b04c9336f6e0d625b2a2a0ba",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/2bc207190e6f1818b04c9336f6e0d625b2a2a0ba"
      }
    ],
    "stats": {
      "total": 22,
      "additions": 11,
      "deletions": 11
    },
    "files": [
      {
        "sha": "d6988ee3acb6ecf29428aa3b38b4adab24a4671a",
        "filename": "src/rpc/rawtransaction.cpp",
        "status": "modified",
        "additions": 5,
        "deletions": 5,
        "changes": 10,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e2aa1a585a83971639572cd2c84565ec360deac9/src/rpc/rawtransaction.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e2aa1a585a83971639572cd2c84565ec360deac9/src/rpc/rawtransaction.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/rpc/rawtransaction.cpp?ref=e2aa1a585a83971639572cd2c84565ec360deac9",
        "patch": "@@ -1300,7 +1300,7 @@ UniValue combinepsbt(const JSONRPCRequest& request)\n \n     CDataStream ssTx(SER_NETWORK, PROTOCOL_VERSION);\n     ssTx << merged_psbt;\n-    return EncodeBase64((unsigned char*)ssTx.data(), ssTx.size());\n+    return EncodeBase64(MakeUCharSpan(ssTx));\n }\n \n UniValue finalizepsbt(const JSONRPCRequest& request)\n@@ -1435,7 +1435,7 @@ UniValue createpsbt(const JSONRPCRequest& request)\n     CDataStream ssTx(SER_NETWORK, PROTOCOL_VERSION);\n     ssTx << psbtx;\n \n-    return EncodeBase64((unsigned char*)ssTx.data(), ssTx.size());\n+    return EncodeBase64(MakeUCharSpan(ssTx));\n }\n \n UniValue converttopsbt(const JSONRPCRequest& request)\n@@ -1502,7 +1502,7 @@ UniValue converttopsbt(const JSONRPCRequest& request)\n     CDataStream ssTx(SER_NETWORK, PROTOCOL_VERSION);\n     ssTx << psbtx;\n \n-    return EncodeBase64((unsigned char*)ssTx.data(), ssTx.size());\n+    return EncodeBase64(MakeUCharSpan(ssTx));\n }\n \n UniValue utxoupdatepsbt(const JSONRPCRequest& request)\n@@ -1590,7 +1590,7 @@ UniValue utxoupdatepsbt(const JSONRPCRequest& request)\n \n     CDataStream ssTx(SER_NETWORK, PROTOCOL_VERSION);\n     ssTx << psbtx;\n-    return EncodeBase64((unsigned char*)ssTx.data(), ssTx.size());\n+    return EncodeBase64(MakeUCharSpan(ssTx));\n }\n \n UniValue joinpsbts(const JSONRPCRequest& request)\n@@ -1683,7 +1683,7 @@ UniValue joinpsbts(const JSONRPCRequest& request)\n \n     CDataStream ssTx(SER_NETWORK, PROTOCOL_VERSION);\n     ssTx << shuffled_psbt;\n-    return EncodeBase64((unsigned char*)ssTx.data(), ssTx.size());\n+    return EncodeBase64(MakeUCharSpan(ssTx));\n }\n \n UniValue analyzepsbt(const JSONRPCRequest& request)"
      },
      {
        "sha": "e1d5cff48c8ab24c3770748b2ef1960504906ad8",
        "filename": "src/util/message.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e2aa1a585a83971639572cd2c84565ec360deac9/src/util/message.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e2aa1a585a83971639572cd2c84565ec360deac9/src/util/message.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/util/message.cpp?ref=e2aa1a585a83971639572cd2c84565ec360deac9",
        "patch": "@@ -64,7 +64,7 @@ bool MessageSign(\n         return false;\n     }\n \n-    signature = EncodeBase64(signature_bytes.data(), signature_bytes.size());\n+    signature = EncodeBase64(signature_bytes);\n \n     return true;\n }"
      },
      {
        "sha": "079a4529a30f190acd2bc50a3722c64a364b717d",
        "filename": "src/util/strencodings.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 4,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e2aa1a585a83971639572cd2c84565ec360deac9/src/util/strencodings.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e2aa1a585a83971639572cd2c84565ec360deac9/src/util/strencodings.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/util/strencodings.cpp?ref=e2aa1a585a83971639572cd2c84565ec360deac9",
        "patch": "@@ -126,20 +126,20 @@ void SplitHostPort(std::string in, int &portOut, std::string &hostOut) {\n         hostOut = in;\n }\n \n-std::string EncodeBase64(const unsigned char* pch, size_t len)\n+std::string EncodeBase64(Span<const unsigned char> input)\n {\n     static const char *pbase64 = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n \n     std::string str;\n-    str.reserve(((len + 2) / 3) * 4);\n-    ConvertBits<8, 6, true>([&](int v) { str += pbase64[v]; }, pch, pch + len);\n+    str.reserve(((input.size() + 2) / 3) * 4);\n+    ConvertBits<8, 6, true>([&](int v) { str += pbase64[v]; }, input.begin(), input.end());\n     while (str.size() % 4) str += '=';\n     return str;\n }\n \n std::string EncodeBase64(const std::string& str)\n {\n-    return EncodeBase64((const unsigned char*)str.data(), str.size());\n+    return EncodeBase64(MakeUCharSpan(str));\n }\n \n std::vector<unsigned char> DecodeBase64(const char* p, bool* pf_invalid)"
      },
      {
        "sha": "1519214140adcb424797fa9832c4cf3898759261",
        "filename": "src/util/strencodings.h",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e2aa1a585a83971639572cd2c84565ec360deac9/src/util/strencodings.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e2aa1a585a83971639572cd2c84565ec360deac9/src/util/strencodings.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/util/strencodings.h?ref=e2aa1a585a83971639572cd2c84565ec360deac9",
        "patch": "@@ -48,7 +48,7 @@ bool IsHex(const std::string& str);\n bool IsHexNumber(const std::string& str);\n std::vector<unsigned char> DecodeBase64(const char* p, bool* pf_invalid = nullptr);\n std::string DecodeBase64(const std::string& str, bool* pf_invalid = nullptr);\n-std::string EncodeBase64(const unsigned char* pch, size_t len);\n+std::string EncodeBase64(Span<const unsigned char> input);\n std::string EncodeBase64(const std::string& str);\n std::vector<unsigned char> DecodeBase32(const char* p, bool* pf_invalid = nullptr);\n std::string DecodeBase32(const std::string& str, bool* pf_invalid = nullptr);"
      }
    ]
  }
]