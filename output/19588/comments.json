[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/663836243",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19588#issuecomment-663836243",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19588",
    "id": 663836243,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2MzgzNjI0Mw==",
    "user": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?u=7297e8aaf9188c0cb98bc549a8a02a1dc8d59e4c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-25T09:55:12Z",
    "updated_at": "2020-07-25T09:55:12Z",
    "author_association": "MEMBER",
    "body": "Reworked.\r\n\r\n@MarcoFalke Mind taking another look?\r\n\r\nThe changes are pretty local, and if they will not justify themselves, they could be easily reverted back :smiley: ",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/663836243/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/664024500",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19588#issuecomment-664024500",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19588",
    "id": 664024500,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2NDAyNDUwMA==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-26T18:33:08Z",
    "updated_at": "2020-08-08T11:08:53Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #18077 (net: Add NAT-PMP port forwarding support by hebasto)\n* #17428 (p2p: Try to preserve outbound block-relay-only connections during restart by hebasto)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/664024500/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/665614977",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19588#issuecomment-665614977",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19588",
    "id": 665614977,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2NTYxNDk3Nw==",
    "user": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?u=7297e8aaf9188c0cb98bc549a8a02a1dc8d59e4c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-29T11:41:34Z",
    "updated_at": "2020-07-29T11:41:34Z",
    "author_association": "MEMBER",
    "body": "Rebased c6d1cbdb4b7d21ebb3254781f8f6a6c8a679837d -> 8a945c0a4834b60c5453485a78cbae45ce65b3d9 ([pr19588.02](https://github.com/hebasto/bitcoin/commits/pr19588.02) -> [pr19588.03](https://github.com/hebasto/bitcoin/commits/pr19588.03)) to include the recent CI changes.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/665614977/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/669260968",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19588#issuecomment-669260968",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19588",
    "id": 669260968,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2OTI2MDk2OA==",
    "user": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?u=7297e8aaf9188c0cb98bc549a8a02a1dc8d59e4c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-05T15:29:42Z",
    "updated_at": "2020-08-05T15:29:42Z",
    "author_association": "MEMBER",
    "body": "Updated 8a945c0a4834b60c5453485a78cbae45ce65b3d9 -> b34b8edfb24a7660376466bb136affcc6d688b75 ([pr19588.03](https://github.com/hebasto/bitcoin/commits/pr19588.03) -> [pr19588.04](https://github.com/hebasto/bitcoin/commits/pr19588.04), [diff](https://github.com/hebasto/bitcoin/compare/pr19588.03..pr19588.04)).\r\n\r\nAddressed @instagibbs' [comment](https://github.com/bitcoin/bitcoin/pull/19588#discussion_r465799405):\r\n> math isn't my strongest suit: Why are we multiplying seconds by 100k to get ms?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/669260968/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/460377882",
    "pull_request_review_id": 455269000,
    "id": 460377882,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDM3Nzg4Mg==",
    "diff_hunk": "@@ -567,6 +567,7 @@ void SetupServerArgs(NodeContext& node)\n     gArgs.AddArg(\"-rpcwhitelistdefault\", \"Sets default behavior for rpc whitelisting. Unless rpcwhitelistdefault is set to 0, if any -rpcwhitelist is set, the rpc server acts as if all rpc users are subject to empty-unless-otherwise-specified whitelists. If rpcwhitelistdefault is set to 1 and no -rpcwhitelist is set, rpc server acts as if all rpc users are subject to empty whitelists.\", ArgsManager::ALLOW_BOOL, OptionsCategory::RPC);\n     gArgs.AddArg(\"-rpcworkqueue=<n>\", strprintf(\"Set the depth of the work queue to service RPC calls (default: %d)\", DEFAULT_HTTP_WORKQUEUE), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::RPC);\n     gArgs.AddArg(\"-server\", \"Accept command line and JSON-RPC commands\", ArgsManager::ALLOW_ANY, OptionsCategory::RPC);\n+    gArgs.AddArg(\"-uniformintervaltest\", \"Use uniform distribution for random intervals instead of exponential one (default: 0)\", ArgsManager::ALLOW_BOOL | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);",
    "path": "src/init.cpp",
    "position": null,
    "original_position": 4,
    "commit_id": "b34b8edfb24a7660376466bb136affcc6d688b75",
    "original_commit_id": "237bc3edbbf265848e81cde700e6910141ebede1",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "not sure if adding another mock-setting is the right approach here\r\n\r\n* This is not guarded and can accidentally be set on mainnet\r\n* This will run a different code path when set (partially code that has been added for this test-setting only), thus reducing the effectiveness of tests and increasing the maintenance burden\r\n* There is already a way to mock the poisson dist with the noban permission (This could be extracted to a hidden test-only permission if there are concerns about noban being too broad)\r\n* A timeout of 60s with the expected value of the poisson dist (5s or 7s or whatever) yields a failure rate that is far lower than the failure rate we see due to infrastructure problems or other test problems and races. The issue here is that the nodes are daisy chained and thus the delays add up, which could bring the delay over 60s more likely.",
    "created_at": "2020-07-25T07:40:49Z",
    "updated_at": "2020-08-05T15:26:42Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19588#discussion_r460377882",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19588",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/460377882"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19588#discussion_r460377882"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19588"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/460377882/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 570,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/460382343",
    "pull_request_review_id": 455271634,
    "id": 460382343,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDM4MjM0Mw==",
    "diff_hunk": "@@ -567,6 +567,7 @@ void SetupServerArgs(NodeContext& node)\n     gArgs.AddArg(\"-rpcwhitelistdefault\", \"Sets default behavior for rpc whitelisting. Unless rpcwhitelistdefault is set to 0, if any -rpcwhitelist is set, the rpc server acts as if all rpc users are subject to empty-unless-otherwise-specified whitelists. If rpcwhitelistdefault is set to 1 and no -rpcwhitelist is set, rpc server acts as if all rpc users are subject to empty whitelists.\", ArgsManager::ALLOW_BOOL, OptionsCategory::RPC);\n     gArgs.AddArg(\"-rpcworkqueue=<n>\", strprintf(\"Set the depth of the work queue to service RPC calls (default: %d)\", DEFAULT_HTTP_WORKQUEUE), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::RPC);\n     gArgs.AddArg(\"-server\", \"Accept command line and JSON-RPC commands\", ArgsManager::ALLOW_ANY, OptionsCategory::RPC);\n+    gArgs.AddArg(\"-uniformintervaltest\", \"Use uniform distribution for random intervals instead of exponential one (default: 0)\", ArgsManager::ALLOW_BOOL | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);",
    "path": "src/init.cpp",
    "position": null,
    "original_position": 4,
    "commit_id": "b34b8edfb24a7660376466bb136affcc6d688b75",
    "original_commit_id": "237bc3edbbf265848e81cde700e6910141ebede1",
    "user": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": ">    - This is not guarded and can accidentally be set on mainnet\r\n\r\nYes. It must be guarded. Going to fix it.\r\n\r\n>    - This will run a different code path when set (partially code that has been added for this test-setting only), thus reducing the effectiveness of tests and increasing the maintenance burden\r\n\r\nThe current code path, which is skipped in tests with this PR, is not covered by tests in master.\r\n\r\n>    - There is already a way to mock the poisson dist with the noban permission (This could be extracted to a hidden test-only permission if there are concerns about noban being too broad)\r\n\r\nThis approach does not work universally, e.g., in `wallet_backup.py`: https://github.com/bitcoin/bitcoin/blob/40a04814d130dfc9131af3f568eb44533e2bcbfc/test/functional/wallet_backup.py#L52-L57\r\n\r\n>    - A timeout of 60s with the expected value of the poisson dist (5s or 7s or whatever) yields a failure rate that is far lower than the failure rate we see due to infrastructure problems or other test problems and races. The issue here is that the nodes are daisy chained and thus the delays add up, which could bring the delay over 60s more likely.\r\n\r\nThe assumption about test failures that would be fixed by this PR could be biased as in the most cases we have only CI logs that lack data about infrastructure problems.",
    "created_at": "2020-07-25T08:38:51Z",
    "updated_at": "2020-08-05T15:26:42Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19588#discussion_r460382343",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19588",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/460382343"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19588#discussion_r460382343"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19588"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/460382343/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 570,
    "side": "RIGHT",
    "in_reply_to_id": 460377882
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/465799405",
    "pull_request_review_id": 461760648,
    "id": 465799405,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTc5OTQwNQ==",
    "diff_hunk": "@@ -2853,7 +2855,16 @@ int64_t CConnman::PoissonNextSendInbound(int64_t now, int average_interval_secon\n \n int64_t PoissonNextSend(int64_t now, int average_interval_seconds)\n {\n-    return now + (int64_t)(log1p(GetRand(1ULL << 48) * -0.0000000000000035527136788 /* -1/2^48 */) * average_interval_seconds * -1000000.0 + 0.5);\n+    const int64_t average_interval_ms = average_interval_seconds * 1000000ULL;",
    "path": "src/net.cpp",
    "position": null,
    "original_position": 19,
    "commit_id": "b34b8edfb24a7660376466bb136affcc6d688b75",
    "original_commit_id": "8a945c0a4834b60c5453485a78cbae45ce65b3d9",
    "user": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "math isn't my strongest suit: Why are we multiplying seconds by 100k to get ms? \ud83e\udd14 ",
    "created_at": "2020-08-05T15:10:42Z",
    "updated_at": "2020-08-05T15:26:42Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19588#discussion_r465799405",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19588",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/465799405"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19588#discussion_r465799405"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19588"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/465799405/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2858,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/465802085",
    "pull_request_review_id": 461764058,
    "id": 465802085,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTgwMjA4NQ==",
    "diff_hunk": "@@ -2853,7 +2855,16 @@ int64_t CConnman::PoissonNextSendInbound(int64_t now, int average_interval_secon\n \n int64_t PoissonNextSend(int64_t now, int average_interval_seconds)\n {\n-    return now + (int64_t)(log1p(GetRand(1ULL << 48) * -0.0000000000000035527136788 /* -1/2^48 */) * average_interval_seconds * -1000000.0 + 0.5);\n+    const int64_t average_interval_ms = average_interval_seconds * 1000000ULL;",
    "path": "src/net.cpp",
    "position": null,
    "original_position": 19,
    "commit_id": "b34b8edfb24a7660376466bb136affcc6d688b75",
    "original_commit_id": "8a945c0a4834b60c5453485a78cbae45ce65b3d9",
    "user": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "> math isn't my strongest suit: Why are we multiplying seconds by 100k to get ms? thinking\r\n\r\nWhy `1000000ULL` is 100k? :)",
    "created_at": "2020-08-05T15:14:23Z",
    "updated_at": "2020-08-05T15:26:42Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19588#discussion_r465802085",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19588",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/465802085"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19588#discussion_r465802085"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19588"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/465802085/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2858,
    "side": "RIGHT",
    "in_reply_to_id": 465799405
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/465806253",
    "pull_request_review_id": 461769509,
    "id": 465806253,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTgwNjI1Mw==",
    "diff_hunk": "@@ -2853,7 +2855,16 @@ int64_t CConnman::PoissonNextSendInbound(int64_t now, int average_interval_secon\n \n int64_t PoissonNextSend(int64_t now, int average_interval_seconds)\n {\n-    return now + (int64_t)(log1p(GetRand(1ULL << 48) * -0.0000000000000035527136788 /* -1/2^48 */) * average_interval_seconds * -1000000.0 + 0.5);\n+    const int64_t average_interval_ms = average_interval_seconds * 1000000ULL;",
    "path": "src/net.cpp",
    "position": null,
    "original_position": 19,
    "commit_id": "b34b8edfb24a7660376466bb136affcc6d688b75",
    "original_commit_id": "8a945c0a4834b60c5453485a78cbae45ce65b3d9",
    "user": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Going to update names.",
    "created_at": "2020-08-05T15:20:03Z",
    "updated_at": "2020-08-05T15:26:42Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19588#discussion_r465806253",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19588",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/465806253"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19588#discussion_r465806253"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19588"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/465806253/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2858,
    "side": "RIGHT",
    "in_reply_to_id": 465799405
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/465811044",
    "pull_request_review_id": 461775992,
    "id": 465811044,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTgxMTA0NA==",
    "diff_hunk": "@@ -2853,7 +2855,16 @@ int64_t CConnman::PoissonNextSendInbound(int64_t now, int average_interval_secon\n \n int64_t PoissonNextSend(int64_t now, int average_interval_seconds)\n {\n-    return now + (int64_t)(log1p(GetRand(1ULL << 48) * -0.0000000000000035527136788 /* -1/2^48 */) * average_interval_seconds * -1000000.0 + 0.5);\n+    const int64_t average_interval_ms = average_interval_seconds * 1000000ULL;",
    "path": "src/net.cpp",
    "position": null,
    "original_position": 19,
    "commit_id": "b34b8edfb24a7660376466bb136affcc6d688b75",
    "original_commit_id": "8a945c0a4834b60c5453485a78cbae45ce65b3d9",
    "user": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Thanks! [Updated](https://github.com/bitcoin/bitcoin/pull/19588#issuecomment-669260968).",
    "created_at": "2020-08-05T15:26:48Z",
    "updated_at": "2020-08-05T15:29:56Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19588#discussion_r465811044",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19588",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/465811044"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19588#discussion_r465811044"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19588"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/465811044/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2858,
    "side": "RIGHT",
    "in_reply_to_id": 465799405
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/465814869",
    "pull_request_review_id": 461781192,
    "id": 465814869,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTgxNDg2OQ==",
    "diff_hunk": "@@ -2853,7 +2855,16 @@ int64_t CConnman::PoissonNextSendInbound(int64_t now, int average_interval_secon\n \n int64_t PoissonNextSend(int64_t now, int average_interval_seconds)\n {\n-    return now + (int64_t)(log1p(GetRand(1ULL << 48) * -0.0000000000000035527136788 /* -1/2^48 */) * average_interval_seconds * -1000000.0 + 0.5);\n+    const int64_t average_interval_ms = average_interval_seconds * 1000000ULL;",
    "path": "src/net.cpp",
    "position": null,
    "original_position": 19,
    "commit_id": "b34b8edfb24a7660376466bb136affcc6d688b75",
    "original_commit_id": "8a945c0a4834b60c5453485a78cbae45ce65b3d9",
    "user": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "too many zeroes clearly :eyes: , thanks for update of name",
    "created_at": "2020-08-05T15:32:26Z",
    "updated_at": "2020-08-05T15:32:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19588#discussion_r465814869",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19588",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/465814869"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19588#discussion_r465814869"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19588"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/465814869/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2858,
    "side": "RIGHT",
    "in_reply_to_id": 465799405
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/469443401",
    "pull_request_review_id": 466150885,
    "id": 469443401,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTQ0MzQwMQ==",
    "diff_hunk": "@@ -2853,7 +2855,16 @@ int64_t CConnman::PoissonNextSendInbound(int64_t now, int average_interval_secon\n \n int64_t PoissonNextSend(int64_t now, int average_interval_seconds)\n {\n-    return now + (int64_t)(log1p(GetRand(1ULL << 48) * -0.0000000000000035527136788 /* -1/2^48 */) * average_interval_seconds * -1000000.0 + 0.5);\n+    const int64_t average_interval_microseconds = average_interval_seconds * 1000000ULL;\n+    int64_t delta_microseconds = -std::log1p(GetRand(1ULL << 48) * -0.0000000000000035527136788 /* -1/2^48 */) * average_interval_microseconds + 0.5;\n+\n+    // Upper bound to avoid timeouts in the functional tests.\n+    static const bool regtest = gArgs.GetChainName() == CBaseChainParams::REGTEST;",
    "path": "src/net.cpp",
    "position": 23,
    "original_position": 23,
    "commit_id": "b34b8edfb24a7660376466bb136affcc6d688b75",
    "original_commit_id": "b34b8edfb24a7660376466bb136affcc6d688b75",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I think this is really ugly, both doing a string compare here, making the function depend on a global, and doing this at first call (which is not *guaranteed* to be after initializing the chain name).\r\nThough I don't really have a proposal how to do this differently.",
    "created_at": "2020-08-12T18:02:43Z",
    "updated_at": "2020-08-12T18:02:43Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19588#discussion_r469443401",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19588",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/469443401"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19588#discussion_r469443401"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19588"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/469443401/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2862,
    "original_line": 2862,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/469504074",
    "pull_request_review_id": 466227054,
    "id": 469504074,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTUwNDA3NA==",
    "diff_hunk": "@@ -567,6 +567,7 @@ void SetupServerArgs(NodeContext& node)\n     gArgs.AddArg(\"-rpcwhitelistdefault\", \"Sets default behavior for rpc whitelisting. Unless rpcwhitelistdefault is set to 0, if any -rpcwhitelist is set, the rpc server acts as if all rpc users are subject to empty-unless-otherwise-specified whitelists. If rpcwhitelistdefault is set to 1 and no -rpcwhitelist is set, rpc server acts as if all rpc users are subject to empty whitelists.\", ArgsManager::ALLOW_BOOL, OptionsCategory::RPC);\n     gArgs.AddArg(\"-rpcworkqueue=<n>\", strprintf(\"Set the depth of the work queue to service RPC calls (default: %d)\", DEFAULT_HTTP_WORKQUEUE), ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::RPC);\n     gArgs.AddArg(\"-server\", \"Accept command line and JSON-RPC commands\", ArgsManager::ALLOW_ANY, OptionsCategory::RPC);\n+    gArgs.AddArg(\"-uniformintervaltest\", \"Use uniform distribution for random intervals instead of exponential one (default: 0)\", ArgsManager::ALLOW_BOOL | ArgsManager::DEBUG_ONLY, OptionsCategory::DEBUG_TEST);",
    "path": "src/init.cpp",
    "position": null,
    "original_position": 4,
    "commit_id": "b34b8edfb24a7660376466bb136affcc6d688b75",
    "original_commit_id": "237bc3edbbf265848e81cde700e6910141ebede1",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "> The current code path, which is skipped in tests with this PR, is not covered by tests in master.\r\n\r\nThe same might be true for this change. Capping the time might never execute code paths (in other functions) that only run after a long timeout.",
    "created_at": "2020-08-12T19:55:29Z",
    "updated_at": "2020-08-12T19:55:30Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/19588#discussion_r469504074",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19588",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/469504074"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/19588#discussion_r469504074"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19588"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/469504074/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 570,
    "side": "RIGHT",
    "in_reply_to_id": 460377882
  }
]