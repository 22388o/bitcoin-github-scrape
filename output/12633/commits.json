[
  {
    "sha": "d12516e136d4a8952904a13eedc9f4225f35dc3b",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkMTI1MTZlMTM2ZDRhODk1MjkwNGExM2VlZGM5ZjQyMjVmMzVkYzNi",
    "commit": {
      "author": {
        "name": "BtcDrak",
        "email": "btcdrak@gmail.com",
        "date": "2018-03-06T14:53:06Z"
      },
      "committer": {
        "name": "BtcDrak",
        "email": "btcdrak@gmail.com",
        "date": "2018-03-06T14:53:06Z"
      },
      "message": "Remove 16 bits from versionbits signalling\n\nThis removes bits 13-28 inclusive (0x1fffe000) from the versionbits\nsignalling system, preventing warnings from being generated for any\nminers using these bits.\n\nThis effectively reserves 16 bit for miscellaneous use by miners\nfor things like version-rolling and nonce-rolling and establishes\na zone miners can use without causing unexpected disruption.",
      "tree": {
        "sha": "d3b9f29813a3b031264cbf5519f495b1347796ec",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d3b9f29813a3b031264cbf5519f495b1347796ec"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d12516e136d4a8952904a13eedc9f4225f35dc3b",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d12516e136d4a8952904a13eedc9f4225f35dc3b",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/d12516e136d4a8952904a13eedc9f4225f35dc3b",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d12516e136d4a8952904a13eedc9f4225f35dc3b/comments",
    "author": {
      "login": "btcdrak",
      "id": 7275704,
      "node_id": "MDQ6VXNlcjcyNzU3MDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7275704?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/btcdrak",
      "html_url": "https://github.com/btcdrak",
      "followers_url": "https://api.github.com/users/btcdrak/followers",
      "following_url": "https://api.github.com/users/btcdrak/following{/other_user}",
      "gists_url": "https://api.github.com/users/btcdrak/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/btcdrak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/btcdrak/subscriptions",
      "organizations_url": "https://api.github.com/users/btcdrak/orgs",
      "repos_url": "https://api.github.com/users/btcdrak/repos",
      "events_url": "https://api.github.com/users/btcdrak/events{/privacy}",
      "received_events_url": "https://api.github.com/users/btcdrak/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "btcdrak",
      "id": 7275704,
      "node_id": "MDQ6VXNlcjcyNzU3MDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7275704?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/btcdrak",
      "html_url": "https://github.com/btcdrak",
      "followers_url": "https://api.github.com/users/btcdrak/followers",
      "following_url": "https://api.github.com/users/btcdrak/following{/other_user}",
      "gists_url": "https://api.github.com/users/btcdrak/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/btcdrak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/btcdrak/subscriptions",
      "organizations_url": "https://api.github.com/users/btcdrak/orgs",
      "repos_url": "https://api.github.com/users/btcdrak/repos",
      "events_url": "https://api.github.com/users/btcdrak/events{/privacy}",
      "received_events_url": "https://api.github.com/users/btcdrak/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "7deba93bdc76616011a9f493cbc203d60084416f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7deba93bdc76616011a9f493cbc203d60084416f",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/7deba93bdc76616011a9f493cbc203d60084416f"
      }
    ],
    "stats": {
      "total": 24,
      "additions": 18,
      "deletions": 6
    },
    "files": [
      {
        "sha": "8d25e6bfd2446b6e6d75eb6ff604493bbe5e9a53",
        "filename": "src/chainparams.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d12516e136d4a8952904a13eedc9f4225f35dc3b/src/chainparams.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d12516e136d4a8952904a13eedc9f4225f35dc3b/src/chainparams.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/chainparams.cpp?ref=d12516e136d4a8952904a13eedc9f4225f35dc3b",
        "patch": "@@ -87,7 +87,7 @@ class CMainParams : public CChainParams {\n         consensus.fPowNoRetargeting = false;\n         consensus.nRuleChangeActivationThreshold = 1916; // 95% of 2016\n         consensus.nMinerConfirmationWindow = 2016; // nPowTargetTimespan / nPowTargetSpacing\n-        consensus.vDeployments[Consensus::DEPLOYMENT_TESTDUMMY].bit = 28;\n+        consensus.vDeployments[Consensus::DEPLOYMENT_TESTDUMMY].bit = 12;\n         consensus.vDeployments[Consensus::DEPLOYMENT_TESTDUMMY].nStartTime = 1199145601; // January 1, 2008\n         consensus.vDeployments[Consensus::DEPLOYMENT_TESTDUMMY].nTimeout = 1230767999; // December 31, 2008\n \n@@ -201,7 +201,7 @@ class CTestNetParams : public CChainParams {\n         consensus.fPowNoRetargeting = false;\n         consensus.nRuleChangeActivationThreshold = 1512; // 75% for testchains\n         consensus.nMinerConfirmationWindow = 2016; // nPowTargetTimespan / nPowTargetSpacing\n-        consensus.vDeployments[Consensus::DEPLOYMENT_TESTDUMMY].bit = 28;\n+        consensus.vDeployments[Consensus::DEPLOYMENT_TESTDUMMY].bit = 12;\n         consensus.vDeployments[Consensus::DEPLOYMENT_TESTDUMMY].nStartTime = 1199145601; // January 1, 2008\n         consensus.vDeployments[Consensus::DEPLOYMENT_TESTDUMMY].nTimeout = 1230767999; // December 31, 2008\n \n@@ -294,7 +294,7 @@ class CRegTestParams : public CChainParams {\n         consensus.fPowNoRetargeting = true;\n         consensus.nRuleChangeActivationThreshold = 108; // 75% for testchains\n         consensus.nMinerConfirmationWindow = 144; // Faster than normal for regtest (144 instead of 2016)\n-        consensus.vDeployments[Consensus::DEPLOYMENT_TESTDUMMY].bit = 28;\n+        consensus.vDeployments[Consensus::DEPLOYMENT_TESTDUMMY].bit = 12;\n         consensus.vDeployments[Consensus::DEPLOYMENT_TESTDUMMY].nStartTime = 0;\n         consensus.vDeployments[Consensus::DEPLOYMENT_TESTDUMMY].nTimeout = Consensus::BIP9Deployment::NO_TIMEOUT;\n         consensus.vDeployments[Consensus::DEPLOYMENT_CSV].bit = 0;"
      },
      {
        "sha": "010fdb8bda6dc7e31843b71c7d94721e471e6819",
        "filename": "src/validation.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d12516e136d4a8952904a13eedc9f4225f35dc3b/src/validation.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d12516e136d4a8952904a13eedc9f4225f35dc3b/src/validation.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/validation.cpp?ref=d12516e136d4a8952904a13eedc9f4225f35dc3b",
        "patch": "@@ -2160,7 +2160,7 @@ void static UpdateTip(const CBlockIndex *pindexNew, const CChainParams& chainPar\n         for (int i = 0; i < 100 && pindex != nullptr; i++)\n         {\n             int32_t nExpectedVersion = ComputeBlockVersion(pindex->pprev, chainParams.GetConsensus());\n-            if (pindex->nVersion > VERSIONBITS_LAST_OLD_BLOCK_VERSION && (pindex->nVersion & ~nExpectedVersion) != 0)\n+            if (pindex->nVersion > VERSIONBITS_LAST_OLD_BLOCK_VERSION && (pindex->nVersion & ~nExpectedVersion & VERSIONBITS_IGNORE_MASK) != 0)\n                 ++nUpgraded;\n             pindex = pindex->pprev;\n         }"
      },
      {
        "sha": "6bddf27ad9c3dc00dbc4534885cb86476a498b00",
        "filename": "src/versionbits.h",
        "status": "modified",
        "additions": 3,
        "deletions": 1,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d12516e136d4a8952904a13eedc9f4225f35dc3b/src/versionbits.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d12516e136d4a8952904a13eedc9f4225f35dc3b/src/versionbits.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/versionbits.h?ref=d12516e136d4a8952904a13eedc9f4225f35dc3b",
        "patch": "@@ -15,7 +15,9 @@ static const int32_t VERSIONBITS_TOP_BITS = 0x20000000UL;\n /** What bitmask determines whether versionbits is in use */\n static const int32_t VERSIONBITS_TOP_MASK = 0xE0000000UL;\n /** Total bits available for versionbits */\n-static const int32_t VERSIONBITS_NUM_BITS = 29;\n+static const int32_t VERSIONBITS_NUM_BITS = 13;\n+/** Bitmask for ignored versionbits. It should match VERSIONBITS_NUM_BITS (BIPxxx) */\n+static const int32_t VERSIONBITS_IGNORE_MASK = 0xE0001FFFUL;\n \n enum ThresholdState {\n     THRESHOLD_DEFINED,"
      },
      {
        "sha": "55e299a577427eab34ba6765445dd861ee70a3cc",
        "filename": "test/functional/feature_versionbits_warning.py",
        "status": "modified",
        "additions": 11,
        "deletions": 1,
        "changes": 12,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d12516e136d4a8952904a13eedc9f4225f35dc3b/test/functional/feature_versionbits_warning.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d12516e136d4a8952904a13eedc9f4225f35dc3b/test/functional/feature_versionbits_warning.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/feature_versionbits_warning.py?ref=d12516e136d4a8952904a13eedc9f4225f35dc3b",
        "patch": "@@ -19,8 +19,9 @@\n VB_PERIOD = 144           # versionbits period length for regtest\n VB_THRESHOLD = 108        # versionbits activation threshold for regtest\n VB_TOP_BITS = 0x20000000\n-VB_UNKNOWN_BIT = 27       # Choose a bit unassigned to any deployment\n+VB_UNKNOWN_BIT = 11       # Choose a bit unassigned to any deployment\n VB_UNKNOWN_VERSION = VB_TOP_BITS | (1 << VB_UNKNOWN_BIT)\n+VB_IGNORE_VERSION = VB_TOP_BITS | 0x1FFFE000\n \n WARN_UNKNOWN_RULES_MINED = \"Unknown block versions being mined! It's possible unknown rules are in effect\"\n WARN_UNKNOWN_RULES_ACTIVE = \"unknown new rules activated (versionbit {})\".format(VB_UNKNOWN_BIT)\n@@ -71,6 +72,15 @@ def run_test(self):\n         # Mine one period worth of blocks\n         node.generate(VB_PERIOD)\n \n+        self.log.info(\"Check that there is no warning if previous VB_BLOCKS have VB_PERIOD blocks with ignored versionbits version.\")\n+        # Build one period of blocks with ignored bit. There should be no warning\n+        self.send_blocks_with_version(node.p2p, VB_PERIOD, VB_IGNORE_VERSION)\n+        assert(not WARN_UNKNOWN_RULES_MINED in node.getmininginfo()[\"warnings\"])\n+        assert(not WARN_UNKNOWN_RULES_MINED in node.getnetworkinfo()[\"warnings\"])\n+        assert(not VB_PATTERN.match(node.getmininginfo()[\"warnings\"]))\n+        assert(not VB_PATTERN.match(node.getnetworkinfo()[\"warnings\"]))\n+        assert(not self.versionbits_in_alert_file())\n+\n         self.log.info(\"Check that there is no warning if previous VB_BLOCKS have <VB_THRESHOLD blocks with unknown versionbits version.\")\n         # Build one period of blocks with < VB_THRESHOLD blocks signaling some unknown bit\n         self.send_blocks_with_version(node.p2p, VB_THRESHOLD - 1, VB_UNKNOWN_VERSION)"
      }
    ]
  }
]