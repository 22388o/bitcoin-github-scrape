[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/933537749",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23173#issuecomment-933537749",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23173",
    "id": 933537749,
    "node_id": "IC_kwDOABII5843pKfV",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-04T14:22:59Z",
    "updated_at": "2021-11-05T22:30:40Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#21527](https://github.com/bitcoin/bitcoin/pull/21527) (net_processing: lock clean up by ajtowns)\n* [#21515](https://github.com/bitcoin/bitcoin/pull/21515) (Erlay: bandwidth-efficient transaction relay protocol by naumenkogs)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/933537749/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/933559585",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23173#issuecomment-933559585",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23173",
    "id": 933559585,
    "node_id": "IC_kwDOABII5843pP0h",
    "user": {
      "login": "jamesob",
      "id": 73197,
      "node_id": "MDQ6VXNlcjczMTk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jamesob",
      "html_url": "https://github.com/jamesob",
      "followers_url": "https://api.github.com/users/jamesob/followers",
      "following_url": "https://api.github.com/users/jamesob/following{/other_user}",
      "gists_url": "https://api.github.com/users/jamesob/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
      "organizations_url": "https://api.github.com/users/jamesob/orgs",
      "repos_url": "https://api.github.com/users/jamesob/repos",
      "events_url": "https://api.github.com/users/jamesob/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jamesob/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-04T14:47:01Z",
    "updated_at": "2021-10-04T14:47:01Z",
    "author_association": "MEMBER",
    "body": "Concept ACK, looks like a good change. Will review soon.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/933559585/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/933634281",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23173#issuecomment-933634281",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23173",
    "id": 933634281,
    "node_id": "IC_kwDOABII5843piDp",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-04T16:09:04Z",
    "updated_at": "2021-10-04T16:09:04Z",
    "author_association": "MEMBER",
    "body": "Resolved @MarcoFalke's review comment and added a missing lock annotation.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/933634281/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/934274316",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23173#issuecomment-934274316",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23173",
    "id": 934274316,
    "node_id": "IC_kwDOABII5843r-UM",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?u=5ff13e375b40ea55ecd3c108337dd6a23f68eddf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-05T10:21:44Z",
    "updated_at": "2021-10-05T10:21:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "Concept ACK",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/934274316/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/937634357",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23173#issuecomment-937634357",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23173",
    "id": 937634357,
    "node_id": "IC_kwDOABII58434yo1",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-07T09:51:12Z",
    "updated_at": "2021-10-07T09:51:12Z",
    "author_association": "MEMBER",
    "body": "Fixed up an error string and rebased on master to (hopefully) pick up fixes for unrelated CI failures. The fuzz test will still fail, so I'll try to fix that next.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/937634357/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/937822056",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23173#issuecomment-937822056",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23173",
    "id": 937822056,
    "node_id": "IC_kwDOABII58435gdo",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-07T14:00:28Z",
    "updated_at": "2021-10-07T14:00:28Z",
    "author_association": "MEMBER",
    "body": "I've reverted the change that made `AcceptToMemoryPool()` static and left it as dynamically linkable for use by the mempool fuzz test (which was operating on a separate CChainState and CTxMemPool).",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/937822056/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/946932130",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23173#issuecomment-946932130",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23173",
    "id": 946932130,
    "node_id": "IC_kwDOABII5844cQmi",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-19T17:14:17Z",
    "updated_at": "2021-10-19T17:14:17Z",
    "author_association": "MEMBER",
    "body": "Thanks for the reviews @glozow and @promag. I've addressed all review comments.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/946932130/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/954647284",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23173#issuecomment-954647284",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23173",
    "id": 954647284,
    "node_id": "IC_kwDOABII58445sL0",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-29T10:53:19Z",
    "updated_at": "2021-10-29T10:53:19Z",
    "author_association": "MEMBER",
    "body": "Thanks for the review, @glozow! I've rebased past #23157 and addressed all your comments.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/954647284/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/959342617",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23173#issuecomment-959342617",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23173",
    "id": 959342617,
    "node_id": "IC_kwDOABII5845LmgZ",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-03T14:57:50Z",
    "updated_at": "2021-11-03T14:57:50Z",
    "author_association": "MEMBER",
    "body": "Thanks for the thorough review @ryanofsky! I believe I've addressed all of your review comments.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/959342617/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/959725255",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23173#issuecomment-959725255",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23173",
    "id": 959725255,
    "node_id": "IC_kwDOABII5845ND7H",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-03T16:51:53Z",
    "updated_at": "2021-11-03T16:51:53Z",
    "author_association": "MEMBER",
    "body": "> 2c64270 seems to indicate that all AcceptToMemoryPool() calls from outside validation.cpp/h are removed, but it appears there are still two references left. Is this intentional?\r\n\r\nYes, see the `AcceptToMemoryPool` doxygen comment:\r\n\r\n```\r\n * Try to add a transaction to the mempool. This is an internal function and is\r\n * exposed only for testing. Client code should use ChainstateManager::ProcessTransaction()\r\n```\r\n\r\nThose two remaining calls to ATMP are the tests that are referenced in that comment. They can't use the `ChainstateManager::ProcessTransaction()` interface function since they're testing a mempool that isn't owned by a `CChainState`.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/959725255/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/721366984",
    "pull_request_review_id": 770299269,
    "id": 721366984,
    "node_id": "PRRC_kwDOABII584q_y_I",
    "diff_hunk": "@@ -315,7 +315,7 @@ CMutableTransaction TestChain100Setup::CreateValidMempoolTransaction(CTransactio\n     // If submit=true, add transaction to the mempool.\n     if (submit) {\n         LOCK(cs_main);\n-        const MempoolAcceptResult result = AcceptToMemoryPool(m_node.chainman->ActiveChainstate(), *m_node.mempool.get(), MakeTransactionRef(mempool_txn), /* bypass_limits */ false);\n+        const MempoolAcceptResult result = m_node.chainman->ProcessTransaction(MakeTransactionRef(mempool_txn), /* bypass_limits */ false);",
    "path": "src/test/util/setup_common.cpp",
    "position": null,
    "original_position": 5,
    "commit_id": "0fdb619aaf1d62598263361a6082d182be1af792",
    "original_commit_id": "87a286d0cb05be21f3e000ed4ec78773b4919b1b",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "wrong\r\n\r\n```suggestion\r\n        const MempoolAcceptResult result = m_node.chainman->ProcessTransaction(MakeTransactionRef(mempool_txn), /* test_accept */ false);\r\n```",
    "created_at": "2021-10-04T13:31:06Z",
    "updated_at": "2021-10-04T13:31:35Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r721366984",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/721366984"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r721366984"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/721366984/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 318,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/721511017",
    "pull_request_review_id": 770498400,
    "id": 721511017,
    "node_id": "PRRC_kwDOABII584rAWJp",
    "diff_hunk": "@@ -315,7 +315,7 @@ CMutableTransaction TestChain100Setup::CreateValidMempoolTransaction(CTransactio\n     // If submit=true, add transaction to the mempool.\n     if (submit) {\n         LOCK(cs_main);\n-        const MempoolAcceptResult result = AcceptToMemoryPool(m_node.chainman->ActiveChainstate(), *m_node.mempool.get(), MakeTransactionRef(mempool_txn), /* bypass_limits */ false);\n+        const MempoolAcceptResult result = m_node.chainman->ProcessTransaction(MakeTransactionRef(mempool_txn), /* bypass_limits */ false);",
    "path": "src/test/util/setup_common.cpp",
    "position": null,
    "original_position": 5,
    "commit_id": "0fdb619aaf1d62598263361a6082d182be1af792",
    "original_commit_id": "87a286d0cb05be21f3e000ed4ec78773b4919b1b",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Fixed!",
    "created_at": "2021-10-04T16:08:41Z",
    "updated_at": "2021-10-04T16:08:41Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r721511017",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/721511017"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r721511017"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/721511017/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 318,
    "side": "RIGHT",
    "in_reply_to_id": 721366984
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726216627",
    "pull_request_review_id": 776403166,
    "id": 726216627,
    "node_id": "PRRC_kwDOABII584rSS-z",
    "diff_hunk": "@@ -330,54 +330,6 @@ static bool IsCurrentForFeeEstimation(CChainState& active_chainstate) EXCLUSIVE_\n     return true;\n }\n \n-void CChainState::MaybeUpdateMempoolForReorg(",
    "path": "src/validation.cpp",
    "position": null,
    "original_position": 4,
    "commit_id": "0fdb619aaf1d62598263361a6082d182be1af792",
    "original_commit_id": "179e0fb1456cf7f75517d537ba68774d59312311",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "could you explain why this move is needed? is it to reduce the diff? 179e0fb1456cf7f75517d537ba68774d59312311 _Move CChainState::MaybeUpdateMempoolForReorg() lower in validation.cpp_",
    "created_at": "2021-10-11T15:24:47Z",
    "updated_at": "2021-10-12T08:30:53Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r726216627",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726216627"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r726216627"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726216627/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 333,
    "side": "LEFT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726220398",
    "pull_request_review_id": 776403166,
    "id": 726220398,
    "node_id": "PRRC_kwDOABII584rST5u",
    "diff_hunk": "@@ -205,11 +205,7 @@ struct PackageMempoolAcceptResult\n         : m_tx_results{ {wtxid, result} } {}\n };\n \n-/**\n- * (Try to) add a transaction to the memory pool.\n- * @param[in]  bypass_limits   When true, don't enforce mempool fee limits.\n- * @param[in]  test_accept     When true, run validation checks but don't submit to mempool.\n- */\n+/** Internal function. Exposed only for fuzz testing. */",
    "path": "src/validation.h",
    "position": null,
    "original_position": 9,
    "commit_id": "0fdb619aaf1d62598263361a6082d182be1af792",
    "original_commit_id": "1d20d4330e21ab600747ced872eba372a08086c5",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Why can't ATMP be static and `ProcessTransaction` be called from the fuzz test instead?",
    "created_at": "2021-10-11T15:29:33Z",
    "updated_at": "2021-10-12T08:30:53Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r726220398",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726220398"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r726220398"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726220398/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 208,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726221352",
    "pull_request_review_id": 776403166,
    "id": 726221352,
    "node_id": "PRRC_kwDOABII584rSUIo",
    "diff_hunk": "@@ -997,6 +997,15 @@ class ChainstateManager\n      */\n     bool ProcessNewBlockHeaders(const std::vector<CBlockHeader>& block, BlockValidationState& state, const CChainParams& chainparams, const CBlockIndex** ppindex = nullptr) LOCKS_EXCLUDED(cs_main);\n \n+    /**\n+     * (Try to) add a transaction to the memory pool.\n+     *\n+     * @param[in]  bypass_limits   When true, don't enforce mempool fee limits.",
    "path": "src/validation.h",
    "position": null,
    "original_position": 7,
    "commit_id": "0fdb619aaf1d62598263361a6082d182be1af792",
    "original_commit_id": "93bdbf468addd11581a5f1a4465147da24920235",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "93bdbf468addd11581a5f1a4465147da24920235 adds a doxygen comment that is deleted 3 commits later. Might not be necessary...",
    "created_at": "2021-10-11T15:30:48Z",
    "updated_at": "2021-10-12T08:30:53Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r726221352",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726221352"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r726221352"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726221352/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1003,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726885395",
    "pull_request_review_id": 776403166,
    "id": 726885395,
    "node_id": "PRRC_kwDOABII584rU2QT",
    "diff_hunk": "@@ -205,11 +205,7 @@ struct PackageMempoolAcceptResult\n         : m_tx_results{ {wtxid, result} } {}\n };\n \n-/**\n- * (Try to) add a transaction to the memory pool.\n- * @param[in]  bypass_limits   When true, don't enforce mempool fee limits.\n- * @param[in]  test_accept     When true, run validation checks but don't submit to mempool.\n- */\n+/** Internal function. Exposed only for fuzz testing. */",
    "path": "src/validation.h",
    "position": null,
    "original_position": 9,
    "commit_id": "0fdb619aaf1d62598263361a6082d182be1af792",
    "original_commit_id": "1d20d4330e21ab600747ced872eba372a08086c5",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I also wonder if, now that `AcceptToMemoryPool` is nothing but a wrapper for `AcceptToMemoryPoolWithTime`, we could just delete ATMP and call ATMPWT. It would also make it easier to make sure we'reremoving mentions of ATMP throughout the codebase.",
    "created_at": "2021-10-12T08:30:49Z",
    "updated_at": "2021-10-12T08:30:53Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r726885395",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726885395"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r726885395"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/726885395/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 208,
    "side": "RIGHT",
    "in_reply_to_id": 726220398
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/731891235",
    "pull_request_review_id": 783313098,
    "id": 731891235,
    "node_id": "PRRC_kwDOABII584rn8Yj",
    "diff_hunk": "@@ -330,54 +330,6 @@ static bool IsCurrentForFeeEstimation(CChainState& active_chainstate) EXCLUSIVE_\n     return true;\n }\n \n-void CChainState::MaybeUpdateMempoolForReorg(",
    "path": "src/validation.cpp",
    "position": null,
    "original_position": 4,
    "commit_id": "0fdb619aaf1d62598263361a6082d182be1af792",
    "original_commit_id": "179e0fb1456cf7f75517d537ba68774d59312311",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Oops. This is leftover from a previous version of the branch where I made ATMP static in validation.cpp and removed the declaration from validation.h. That meant moving all of the callers of ATMP to be lower in the file (or adding a forward declaration).\r\n\r\nI've now left ATMP in the header as a test-only function, so this commit is no longer required.",
    "created_at": "2021-10-19T13:53:00Z",
    "updated_at": "2021-10-19T13:53:01Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r731891235",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/731891235"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r731891235"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/731891235/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 333,
    "side": "LEFT",
    "in_reply_to_id": 726216627
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/731895386",
    "pull_request_review_id": 783318808,
    "id": 731895386,
    "node_id": "PRRC_kwDOABII584rn9Za",
    "diff_hunk": "@@ -205,11 +205,7 @@ struct PackageMempoolAcceptResult\n         : m_tx_results{ {wtxid, result} } {}\n };\n \n-/**\n- * (Try to) add a transaction to the memory pool.\n- * @param[in]  bypass_limits   When true, don't enforce mempool fee limits.\n- * @param[in]  test_accept     When true, run validation checks but don't submit to mempool.\n- */\n+/** Internal function. Exposed only for fuzz testing. */",
    "path": "src/validation.h",
    "position": null,
    "original_position": 9,
    "commit_id": "0fdb619aaf1d62598263361a6082d182be1af792",
    "original_commit_id": "1d20d4330e21ab600747ced872eba372a08086c5",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "The fuzz test is using a derived class of the mempool called `MockedTxPool`, which isn't referenced from the `CChainState` object, and so it can't use the `ChainstateManager` interface to submit transactions to the mempool.\r\n\r\nIt may be possible to clean this up in future so the fuzz test is only using public interfaces, but I think that can be left for another PR.\r\n\r\n> I also wonder if, now that AcceptToMemoryPool is nothing but a wrapper for AcceptToMemoryPoolWithTime, we could just delete ATMP and call ATMPWT.\r\n\r\nI agree that we can flatten those function calls. I'd prefer to remove ATMP and then rename ATMPWT to ATMP and update the call sites, but I think we can leave that for a follow-up PR.",
    "created_at": "2021-10-19T13:56:45Z",
    "updated_at": "2021-10-19T16:40:44Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r731895386",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/731895386"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r731895386"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/731895386/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 208,
    "side": "RIGHT",
    "in_reply_to_id": 726220398
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732078334",
    "pull_request_review_id": 783564444,
    "id": 732078334,
    "node_id": "PRRC_kwDOABII584roqD-",
    "diff_hunk": "@@ -997,6 +997,15 @@ class ChainstateManager\n      */\n     bool ProcessNewBlockHeaders(const std::vector<CBlockHeader>& block, BlockValidationState& state, const CChainParams& chainparams, const CBlockIndex** ppindex = nullptr) LOCKS_EXCLUDED(cs_main);\n \n+    /**\n+     * (Try to) add a transaction to the memory pool.\n+     *\n+     * @param[in]  bypass_limits   When true, don't enforce mempool fee limits.",
    "path": "src/validation.h",
    "position": null,
    "original_position": 7,
    "commit_id": "0fdb619aaf1d62598263361a6082d182be1af792",
    "original_commit_id": "93bdbf468addd11581a5f1a4465147da24920235",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Not necessary, but might be confusing for reviewers if I add a doxygen comment in 93bdbf4 that doesn't document all the parameters.",
    "created_at": "2021-10-19T17:09:16Z",
    "updated_at": "2021-10-19T17:09:16Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r732078334",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732078334"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r732078334"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732078334/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1003,
    "side": "RIGHT",
    "in_reply_to_id": 726221352
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732942466",
    "pull_request_review_id": 784717677,
    "id": 732942466,
    "node_id": "PRRC_kwDOABII584rr9CC",
    "diff_hunk": "@@ -206,12 +206,20 @@ struct PackageMempoolAcceptResult\n };\n \n /**\n- * (Try to) add a transaction to the memory pool.\n- * @param[in]  bypass_limits   When true, don't enforce mempool fee limits.\n- * @param[in]  test_accept     When true, run validation checks but don't submit to mempool.\n+ * Try to add a transaction to the mempool. This is an internal function and is\n+ * exposed only for testing. Client code should use ChainstateManager::ProcessTransaction()\n+ *\n+ * @param[in]  active_chainstate  Reference to the active chainstate.\n+ * @param[in]  pool               Reference to the node's mempool.\n+ * @param[in]  tx                 The transaction to submit for mempool acceptance.\n+ * @param[in]  bypass_limits      When true, don't enforce mempool fee limits.",
    "path": "src/validation.h",
    "position": null,
    "original_position": 13,
    "commit_id": "0fdb619aaf1d62598263361a6082d182be1af792",
    "original_commit_id": "3bb34f0c7104dd5bfc141b6c24ab206c08f1b8c7",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "bypass_limits also allows the mempool to grow past the maximum size: https://github.com/bitcoin/bitcoin/blob/3bb34f0c7104dd5bfc141b6c24ab206c08f1b8c7/src/validation.cpp#L914",
    "created_at": "2021-10-20T16:17:14Z",
    "updated_at": "2021-10-20T16:38:18Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r732942466",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732942466"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r732942466"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732942466/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 215,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732942757",
    "pull_request_review_id": 784717677,
    "id": 732942757,
    "node_id": "PRRC_kwDOABII584rr9Gl",
    "diff_hunk": "@@ -3433,6 +3431,20 @@ bool ChainstateManager::ProcessNewBlock(const CChainParams& chainparams, const s\n     return true;\n }\n \n+MempoolAcceptResult ChainstateManager::ProcessTransaction(const CTransactionRef& tx,\n+                                                          bool test_accept)\n+{\n+    CChainState& active_chainstate = ActiveChainstate();\n+    if (!active_chainstate.m_mempool) {\n+        TxValidationState state;\n+        state.Invalid(TxValidationResult::TX_NO_MEMPOOL);\n+        return MempoolAcceptResult::Failure(state);\n+    }\n+    auto result = AcceptToMemoryPool(active_chainstate, *active_chainstate.m_mempool, tx, /* bypass_limits= */ false, test_accept);",
    "path": "src/validation.cpp",
    "position": null,
    "original_position": 45,
    "commit_id": "0fdb619aaf1d62598263361a6082d182be1af792",
    "original_commit_id": "3bb34f0c7104dd5bfc141b6c24ab206c08f1b8c7",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "nit in f21c86c6fa\r\n```suggestion\r\n    const auto result = AcceptToMemoryPool(active_chainstate, *active_chainstate.m_mempool, tx, /* bypass_limits= */ false, test_accept);\r\n```",
    "created_at": "2021-10-20T16:17:34Z",
    "updated_at": "2021-10-20T16:38:18Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r732942757",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732942757"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r732942757"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732942757/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 3433,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732944744",
    "pull_request_review_id": 784717677,
    "id": 732944744,
    "node_id": "PRRC_kwDOABII584rr9lo",
    "diff_hunk": "@@ -350,7 +350,7 @@ void CChainState::MaybeUpdateMempoolForReorg(\n         // ignore validation errors in resurrected transactions\n         if (!fAddToMempool || (*it)->IsCoinBase() ||\n             AcceptToMemoryPool(\n-                *this, *m_mempool, *it, true /* bypass_limits */).m_result_type !=\n+                *this, *m_mempool, *it, true /* bypass_limits */, /* test_accept= */ false).m_result_type !=",
    "path": "src/validation.cpp",
    "position": null,
    "original_position": 19,
    "commit_id": "0fdb619aaf1d62598263361a6082d182be1af792",
    "original_commit_id": "3bb34f0c7104dd5bfc141b6c24ab206c08f1b8c7",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "in aad911d28b: I don't disagree with this change (in fact it would be nice to remove the default argument in the future since it's common to mix up the two bools), but it's not related to this commit.",
    "created_at": "2021-10-20T16:19:58Z",
    "updated_at": "2021-10-20T16:38:18Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r732944744",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732944744"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r732944744"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732944744/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 353,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732948334",
    "pull_request_review_id": 784717677,
    "id": 732948334,
    "node_id": "PRRC_kwDOABII584rr-du",
    "diff_hunk": "@@ -3433,6 +3431,20 @@ bool ChainstateManager::ProcessNewBlock(const CChainParams& chainparams, const s\n     return true;\n }\n \n+MempoolAcceptResult ChainstateManager::ProcessTransaction(const CTransactionRef& tx,\n+                                                          bool test_accept)\n+{\n+    CChainState& active_chainstate = ActiveChainstate();\n+    if (!active_chainstate.m_mempool) {\n+        TxValidationState state;\n+        state.Invalid(TxValidationResult::TX_NO_MEMPOOL);\n+        return MempoolAcceptResult::Failure(state);\n+    }\n+    auto result = AcceptToMemoryPool(active_chainstate, *active_chainstate.m_mempool, tx, /* bypass_limits= */ false, test_accept);",
    "path": "src/validation.cpp",
    "position": null,
    "original_position": 45,
    "commit_id": "0fdb619aaf1d62598263361a6082d182be1af792",
    "original_commit_id": "3bb34f0c7104dd5bfc141b6c24ab206c08f1b8c7",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "The addition of the /* bypass_limits= */ comment should be moved from 90f1a1f8cf to f21c86c6fa",
    "created_at": "2021-10-20T16:24:12Z",
    "updated_at": "2021-10-20T16:38:18Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r732948334",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732948334"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r732948334"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732948334/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 3433,
    "side": "RIGHT",
    "in_reply_to_id": 732942757
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732956508",
    "pull_request_review_id": 784717677,
    "id": 732956508,
    "node_id": "PRRC_kwDOABII584rsAdc",
    "diff_hunk": "@@ -997,6 +1005,15 @@ class ChainstateManager\n      */\n     bool ProcessNewBlockHeaders(const std::vector<CBlockHeader>& block, BlockValidationState& state, const CChainParams& chainparams, const CBlockIndex** ppindex = nullptr) LOCKS_EXCLUDED(cs_main);\n \n+    /**\n+     * Try to add a transaction to the memory pool.\n+     *\n+     * @param[in]  tx              The transaction to submit for mempool acceptance.\n+     * @param[in]  test_accept     When true, run validation checks but don't submit to mempool.\n+     */\n+    MempoolAcceptResult ProcessTransaction(const CTransactionRef& tx, bool test_accept=false)",
    "path": "src/validation.h",
    "position": null,
    "original_position": 35,
    "commit_id": "0fdb619aaf1d62598263361a6082d182be1af792",
    "original_commit_id": "3bb34f0c7104dd5bfc141b6c24ab206c08f1b8c7",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "in 48e69da541: it would be nice for the compiler to let us know we aren't doing all this validation work for nothing, how about a lil dash of C++17 spice?\r\n```suggestion\r\n    [[nodiscard]] MempoolAcceptResult ProcessTransaction(const CTransactionRef& tx, bool test_accept=false)\r\n```",
    "created_at": "2021-10-20T16:34:06Z",
    "updated_at": "2021-10-20T16:38:18Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r732956508",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732956508"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r732956508"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/732956508/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1014,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/739133450",
    "pull_request_review_id": 792897358,
    "id": 739133450,
    "node_id": "PRRC_kwDOABII584sDkgK",
    "diff_hunk": "@@ -997,6 +1005,15 @@ class ChainstateManager\n      */\n     bool ProcessNewBlockHeaders(const std::vector<CBlockHeader>& block, BlockValidationState& state, const CChainParams& chainparams, const CBlockIndex** ppindex = nullptr) LOCKS_EXCLUDED(cs_main);\n \n+    /**\n+     * Try to add a transaction to the memory pool.\n+     *\n+     * @param[in]  tx              The transaction to submit for mempool acceptance.\n+     * @param[in]  test_accept     When true, run validation checks but don't submit to mempool.\n+     */\n+    MempoolAcceptResult ProcessTransaction(const CTransactionRef& tx, bool test_accept=false)",
    "path": "src/validation.h",
    "position": null,
    "original_position": 35,
    "commit_id": "0fdb619aaf1d62598263361a6082d182be1af792",
    "original_commit_id": "3bb34f0c7104dd5bfc141b6c24ab206c08f1b8c7",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done! :hot_pepper: ",
    "created_at": "2021-10-29T10:52:24Z",
    "updated_at": "2021-10-29T10:52:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r739133450",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/739133450"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r739133450"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/739133450/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1014,
    "side": "RIGHT",
    "in_reply_to_id": 732956508
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/739133471",
    "pull_request_review_id": 792897396,
    "id": 739133471,
    "node_id": "PRRC_kwDOABII584sDkgf",
    "diff_hunk": "@@ -350,7 +350,7 @@ void CChainState::MaybeUpdateMempoolForReorg(\n         // ignore validation errors in resurrected transactions\n         if (!fAddToMempool || (*it)->IsCoinBase() ||\n             AcceptToMemoryPool(\n-                *this, *m_mempool, *it, true /* bypass_limits */).m_result_type !=\n+                *this, *m_mempool, *it, true /* bypass_limits */, /* test_accept= */ false).m_result_type !=",
    "path": "src/validation.cpp",
    "position": null,
    "original_position": 19,
    "commit_id": "0fdb619aaf1d62598263361a6082d182be1af792",
    "original_commit_id": "3bb34f0c7104dd5bfc141b6c24ab206c08f1b8c7",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "You're right. I've removed it and will leave for a future cleanup.",
    "created_at": "2021-10-29T10:52:27Z",
    "updated_at": "2021-10-29T10:52:27Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r739133471",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/739133471"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r739133471"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/739133471/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 353,
    "side": "RIGHT",
    "in_reply_to_id": 732944744
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/739133488",
    "pull_request_review_id": 792897430,
    "id": 739133488,
    "node_id": "PRRC_kwDOABII584sDkgw",
    "diff_hunk": "@@ -3433,6 +3431,20 @@ bool ChainstateManager::ProcessNewBlock(const CChainParams& chainparams, const s\n     return true;\n }\n \n+MempoolAcceptResult ChainstateManager::ProcessTransaction(const CTransactionRef& tx,\n+                                                          bool test_accept)\n+{\n+    CChainState& active_chainstate = ActiveChainstate();\n+    if (!active_chainstate.m_mempool) {\n+        TxValidationState state;\n+        state.Invalid(TxValidationResult::TX_NO_MEMPOOL);\n+        return MempoolAcceptResult::Failure(state);\n+    }\n+    auto result = AcceptToMemoryPool(active_chainstate, *active_chainstate.m_mempool, tx, /* bypass_limits= */ false, test_accept);",
    "path": "src/validation.cpp",
    "position": null,
    "original_position": 45,
    "commit_id": "0fdb619aaf1d62598263361a6082d182be1af792",
    "original_commit_id": "3bb34f0c7104dd5bfc141b6c24ab206c08f1b8c7",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I don't agree. Prior to 90f1a1f8cf8ba4a11b2f93b55d1c0e25bcdcdd6f, the argument passed here is a named variable `bypass_limits`. In that commit we change it to be the literal `false`, so adding the `/* bypass_limits= */` comment makes it obvious which argument we're passing.",
    "created_at": "2021-10-29T10:52:28Z",
    "updated_at": "2021-10-29T10:52:29Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r739133488",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/739133488"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r739133488"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/739133488/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 3433,
    "side": "RIGHT",
    "in_reply_to_id": 732942757
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/739133506",
    "pull_request_review_id": 792897458,
    "id": 739133506,
    "node_id": "PRRC_kwDOABII584sDkhC",
    "diff_hunk": "@@ -206,12 +206,20 @@ struct PackageMempoolAcceptResult\n };\n \n /**\n- * (Try to) add a transaction to the memory pool.\n- * @param[in]  bypass_limits   When true, don't enforce mempool fee limits.\n- * @param[in]  test_accept     When true, run validation checks but don't submit to mempool.\n+ * Try to add a transaction to the mempool. This is an internal function and is\n+ * exposed only for testing. Client code should use ChainstateManager::ProcessTransaction()\n+ *\n+ * @param[in]  active_chainstate  Reference to the active chainstate.\n+ * @param[in]  pool               Reference to the node's mempool.\n+ * @param[in]  tx                 The transaction to submit for mempool acceptance.\n+ * @param[in]  bypass_limits      When true, don't enforce mempool fee limits.",
    "path": "src/validation.h",
    "position": null,
    "original_position": 13,
    "commit_id": "0fdb619aaf1d62598263361a6082d182be1af792",
    "original_commit_id": "3bb34f0c7104dd5bfc141b6c24ab206c08f1b8c7",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Thanks. Fixed!",
    "created_at": "2021-10-29T10:52:30Z",
    "updated_at": "2021-10-29T10:52:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r739133506",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/739133506"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r739133506"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/739133506/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 215,
    "side": "RIGHT",
    "in_reply_to_id": 732942466
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/740541469",
    "pull_request_review_id": 794663227,
    "id": 740541469,
    "node_id": "PRRC_kwDOABII584sI8Qd",
    "diff_hunk": "@@ -38,7 +38,7 @@ BOOST_FIXTURE_TEST_CASE(tx_mempool_reject_coinbase, TestChain100Setup)\n \n     unsigned int initialPoolSize = m_node.mempool->size();\n     const MempoolAcceptResult result = AcceptToMemoryPool(m_node.chainman->ActiveChainstate(), *m_node.mempool, MakeTransactionRef(coinbaseTx),\n-                true /* bypass_limits */);\n+                false /* bypass_limits */);",
    "path": "src/test/txvalidation_tests.cpp",
    "position": null,
    "original_position": 5,
    "commit_id": "0fdb619aaf1d62598263361a6082d182be1af792",
    "original_commit_id": "23e5cba7749ae0a668c0e3b084e65f723617ba9f",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "In commit \"[test] Don't set bypass_limits to true in txvalidation_tests.cpp\" (23e5cba7749ae0a668c0e3b084e65f723617ba9f)\r\n\r\nNote, just for understanding: I think this change is safe and doesn't risk making the test meaningless because checks below verify it fails `TX_CONSENSUS`, not `TX_MEMPOOL_POLICY`. Might be worth saying this in the commit description, though, if you happen to update it.",
    "created_at": "2021-11-01T21:26:36Z",
    "updated_at": "2021-11-01T22:34:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r740541469",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/740541469"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r740541469"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/740541469/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 41,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/740551011",
    "pull_request_review_id": 794663227,
    "id": 740551011,
    "node_id": "PRRC_kwDOABII584sI-lj",
    "diff_hunk": "@@ -20,9 +20,9 @@ bilingual_str TransactionErrorString(const TransactionError err)\n         case TransactionError::P2P_DISABLED:\n             return Untranslated(\"Peer-to-peer functionality missing or disabled\");\n         case TransactionError::MEMPOOL_REJECTED:\n-            return Untranslated(\"Transaction rejected by AcceptToMemoryPool\");\n+            return Untranslated(\"Transaction rejected by mempool\");\n         case TransactionError::MEMPOOL_ERROR:\n-            return Untranslated(\"AcceptToMemoryPool failed\");\n+            return Untranslated(\"Mempool logic error\");",
    "path": "src/util/error.cpp",
    "position": null,
    "original_position": 8,
    "commit_id": "0fdb619aaf1d62598263361a6082d182be1af792",
    "original_commit_id": "edd4b472adbe6f45aee40d739f6c1f44e2dc35e2",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "In commit \"[refactor] Don't call AcceptToMemoryPool() from outside validation.cpp\" (edd4b472adbe6f45aee40d739f6c1f44e2dc35e2)\r\n\r\nAre these changes part of the wrong commit? I wouldn't expect to see changing error messages in a refactoring commit.",
    "created_at": "2021-11-01T21:45:28Z",
    "updated_at": "2021-11-01T22:34:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r740551011",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/740551011"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r740551011"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/740551011/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": 22,
    "start_side": "RIGHT",
    "line": null,
    "original_line": 25,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/740552929",
    "pull_request_review_id": 794663227,
    "id": 740552929,
    "node_id": "PRRC_kwDOABII584sI_Dh",
    "diff_hunk": "@@ -3423,6 +3423,19 @@ bool ChainstateManager::ProcessNewBlock(const CChainParams& chainparams, const s\n     return true;\n }\n \n+MempoolAcceptResult ChainstateManager::ProcessTransaction(const CTransactionRef& tx,\n+                                                          bool bypass_limits,\n+                                                          bool test_accept)\n+{\n+    CChainState& active_chainstate = ActiveChainstate();\n+    if (!active_chainstate.m_mempool) {\n+        TxValidationState state;\n+        state.Invalid(TxValidationResult::TX_NO_MEMPOOL);",
    "path": "src/validation.cpp",
    "position": null,
    "original_position": 11,
    "commit_id": "0fdb619aaf1d62598263361a6082d182be1af792",
    "original_commit_id": "bbc785f31b5d70c702ae37d259c46652e243ddba",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "In commit \"[validation] Add CChainState::ProcessTransaction()\" (bbc785f31b5d70c702ae37d259c46652e243ddba)\r\n\r\nIs it intentional to not pass reject reason & debug message strings to `Invalid()`? Depending on when this is expected to happen, strings might be more friendly than a numeric error code.",
    "created_at": "2021-11-01T21:49:46Z",
    "updated_at": "2021-11-01T22:34:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r740552929",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/740552929"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r740552929"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/740552929/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 3433,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/740555364",
    "pull_request_review_id": 794663227,
    "id": 740555364,
    "node_id": "PRRC_kwDOABII584sI_pk",
    "diff_hunk": "@@ -1658,8 +1658,6 @@ bool CChainState::ConnectBlock(const CBlock& block, BlockValidationState& state,\n     // can be duplicated to remove the ability to spend the first instance -- even after\n     // being sent to another address.\n     // See BIP30, CVE-2012-1909, and http://r6.ca/blog/20120206T005236Z.html for more information.\n-    // This logic is not necessary for memory pool transactions, as AcceptToMemoryPool\n-    // already refuses previously-known transaction ids entirely.",
    "path": "src/validation.cpp",
    "position": 5,
    "original_position": 5,
    "commit_id": "0fdb619aaf1d62598263361a6082d182be1af792",
    "original_commit_id": "bc9218139fd17d26eaac5093ac36b7da016734b6",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "In commit \"[validation] Remove comment about AcceptToMemoryPool()\" (bc9218139fd17d26eaac5093ac36b7da016734b6)\r\n\r\nNice find!",
    "created_at": "2021-11-01T21:54:55Z",
    "updated_at": "2021-11-01T22:34:32Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r740555364",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/740555364"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r740555364"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/740555364/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": 1661,
    "original_start_line": 1661,
    "start_side": "LEFT",
    "line": 1662,
    "original_line": 1662,
    "side": "LEFT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/740560773",
    "pull_request_review_id": 794663227,
    "id": 740560773,
    "node_id": "PRRC_kwDOABII584sJA-F",
    "diff_hunk": "@@ -3430,7 +3430,9 @@ MempoolAcceptResult ChainstateManager::ProcessTransaction(const CTransactionRef&\n         state.Invalid(TxValidationResult::TX_NO_MEMPOOL);\n         return MempoolAcceptResult::Failure(state);\n     }\n-    return AcceptToMemoryPool(active_chainstate, *active_chainstate.m_mempool, tx, /* bypass_limits= */ false, test_accept);\n+    auto result = AcceptToMemoryPool(active_chainstate, *active_chainstate.m_mempool, tx, /* bypass_limits= */ false, test_accept);\n+    active_chainstate.m_mempool->check(active_chainstate.CoinsTip(), active_chainstate.m_chain.Height() + 1);",
    "path": "src/validation.cpp",
    "position": 22,
    "original_position": 6,
    "commit_id": "0fdb619aaf1d62598263361a6082d182be1af792",
    "original_commit_id": "f87e07c6fe321f0fb97703c82c0e4122f800589f",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "In commit \"[validation] Always call mempool.check() after processing a new transaction\" (f87e07c6fe321f0fb97703c82c0e4122f800589f)\r\n\r\nThis change does not appear to be a pure refactoring, so it would be helpful if commit description mentioned something about cases when these new checks will be done and whether there are effects on validation or performance.",
    "created_at": "2021-11-01T22:06:46Z",
    "updated_at": "2021-11-01T22:34:32Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r740560773",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/740560773"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r740560773"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/740560773/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 3433,
    "original_line": 3433,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/740567565",
    "pull_request_review_id": 794663227,
    "id": 740567565,
    "node_id": "PRRC_kwDOABII584sJCoN",
    "diff_hunk": "@@ -994,6 +994,16 @@ class ChainstateManager\n      */\n     bool ProcessNewBlockHeaders(const std::vector<CBlockHeader>& block, BlockValidationState& state, const CChainParams& chainparams, const CBlockIndex** ppindex = nullptr) LOCKS_EXCLUDED(cs_main);\n \n+    /**\n+     * Try to add a transaction to the memory pool.\n+     *\n+     * @param[in]  tx              The transaction to submit for mempool acceptance.\n+     * @param[in]  bypass_limits   When true, don't enforce mempool fee and capacity limits.\n+     * @param[in]  test_accept     When true, run validation checks but don't submit to mempool.\n+     */\n+    [[nodiscard]] MempoolAcceptResult ProcessTransaction(const CTransactionRef& tx, bool bypass_limits, bool test_accept=false)",
    "path": "src/validation.h",
    "position": null,
    "original_position": 11,
    "commit_id": "0fdb619aaf1d62598263361a6082d182be1af792",
    "original_commit_id": "bbc785f31b5d70c702ae37d259c46652e243ddba",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "In commit \"[validation] Add CChainState::ProcessTransaction()\" (bbc785f31b5d70c702ae37d259c46652e243ddba)\r\n\r\nIMO it would be really good to add this function in its final form without the `bypass_limits` parameter, so the later commit removing it can be dropped. This would simplify reviewing the PR, and more importantly avoid unsafe change:\r\n\r\n```diff\r\n-    [[nodiscard]] MempoolAcceptResult ProcessTransaction(const CTransactionRef& tx, bool bypass_limits, bool test_accept=false)\r\n+    [[nodiscard]] MempoolAcceptResult ProcessTransaction(const CTransactionRef& tx, bool test_accept=false)\r\n```\r\n\r\nChange is unsafe because a `ProcessTransaction(tx, true)` call would still compile and silently change meaning from \"bypass limits and don't test\" to \"don't bypass limits and do test\"\r\n\r\nBetter to avoid this churn and risk, and just add the new method in final form without temporary (bool, bool) params.\r\n\r\n\r\n",
    "created_at": "2021-11-01T22:22:17Z",
    "updated_at": "2021-11-01T22:34:32Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r740567565",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/740567565"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r740567565"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/740567565/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1004,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/741230001",
    "pull_request_review_id": 795606569,
    "id": 741230001,
    "node_id": "PRRC_kwDOABII584sLkWx",
    "diff_hunk": "@@ -994,6 +994,16 @@ class ChainstateManager\n      */\n     bool ProcessNewBlockHeaders(const std::vector<CBlockHeader>& block, BlockValidationState& state, const CChainParams& chainparams, const CBlockIndex** ppindex = nullptr) LOCKS_EXCLUDED(cs_main);\n \n+    /**\n+     * Try to add a transaction to the memory pool.\n+     *\n+     * @param[in]  tx              The transaction to submit for mempool acceptance.\n+     * @param[in]  bypass_limits   When true, don't enforce mempool fee and capacity limits.\n+     * @param[in]  test_accept     When true, run validation checks but don't submit to mempool.\n+     */\n+    [[nodiscard]] MempoolAcceptResult ProcessTransaction(const CTransactionRef& tx, bool bypass_limits, bool test_accept=false)",
    "path": "src/validation.h",
    "position": null,
    "original_position": 11,
    "commit_id": "0fdb619aaf1d62598263361a6082d182be1af792",
    "original_commit_id": "bbc785f31b5d70c702ae37d259c46652e243ddba",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "In commit \"[validation] Add CChainState::ProcessTransaction()\" (bbc785f31b5d70c702ae37d259c46652e243ddba)\r\n\r\nMaybe for consistency with `ProcessNewBlock` and `ProcessNewBlockHeaders`, call this method `ProcessNewTransaction` instead of `ProcessTransaction`. Might also help suggest that purpose of processing is to add new data, not validate existing data.",
    "created_at": "2021-11-02T15:54:03Z",
    "updated_at": "2021-11-02T15:54:03Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r741230001",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/741230001"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r741230001"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/741230001/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1004,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/742027716",
    "pull_request_review_id": 796674760,
    "id": 742027716,
    "node_id": "PRRC_kwDOABII584sOnHE",
    "diff_hunk": "@@ -994,6 +994,16 @@ class ChainstateManager\n      */\n     bool ProcessNewBlockHeaders(const std::vector<CBlockHeader>& block, BlockValidationState& state, const CChainParams& chainparams, const CBlockIndex** ppindex = nullptr) LOCKS_EXCLUDED(cs_main);\n \n+    /**\n+     * Try to add a transaction to the memory pool.\n+     *\n+     * @param[in]  tx              The transaction to submit for mempool acceptance.\n+     * @param[in]  bypass_limits   When true, don't enforce mempool fee and capacity limits.\n+     * @param[in]  test_accept     When true, run validation checks but don't submit to mempool.\n+     */\n+    [[nodiscard]] MempoolAcceptResult ProcessTransaction(const CTransactionRef& tx, bool bypass_limits, bool test_accept=false)",
    "path": "src/validation.h",
    "position": null,
    "original_position": 11,
    "commit_id": "0fdb619aaf1d62598263361a6082d182be1af792",
    "original_commit_id": "bbc785f31b5d70c702ae37d259c46652e243ddba",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Haha you noticed. I actually hope that we'd go the other way and change `ProcessNewBlock` to `ProcessBlock` and `ProcessNewBlockHeaders` to `ProcessBlockHeaders`. There's nothing to prevent passing in the same block/headers/transaction that have previously been processed, and the functions have ways of returning that information to the caller (`ProcessNewBlock` will set the `new_block` out-param to false and `ProcessTransaction` will set the `TxValidationState` result to `TX_CONFLICT` to indicate \"Tx already in mempool or conflicts with a tx in the chain\"). I think the `New` in `ProcessNew` is therefore redundant and perhaps even a bit misleading.",
    "created_at": "2021-11-03T14:56:57Z",
    "updated_at": "2021-11-03T14:56:57Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r742027716",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/742027716"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r742027716"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/742027716/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1004,
    "side": "RIGHT",
    "in_reply_to_id": 741230001
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/742027769",
    "pull_request_review_id": 796674822,
    "id": 742027769,
    "node_id": "PRRC_kwDOABII584sOnH5",
    "diff_hunk": "@@ -994,6 +994,16 @@ class ChainstateManager\n      */\n     bool ProcessNewBlockHeaders(const std::vector<CBlockHeader>& block, BlockValidationState& state, const CChainParams& chainparams, const CBlockIndex** ppindex = nullptr) LOCKS_EXCLUDED(cs_main);\n \n+    /**\n+     * Try to add a transaction to the memory pool.\n+     *\n+     * @param[in]  tx              The transaction to submit for mempool acceptance.\n+     * @param[in]  bypass_limits   When true, don't enforce mempool fee and capacity limits.\n+     * @param[in]  test_accept     When true, run validation checks but don't submit to mempool.\n+     */\n+    [[nodiscard]] MempoolAcceptResult ProcessTransaction(const CTransactionRef& tx, bool bypass_limits, bool test_accept=false)",
    "path": "src/validation.h",
    "position": null,
    "original_position": 11,
    "commit_id": "0fdb619aaf1d62598263361a6082d182be1af792",
    "original_commit_id": "bbc785f31b5d70c702ae37d259c46652e243ddba",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Good idea. This was a misguided attempt to make the commits as granular as possible, but you're right that it just adds churn and confusion.",
    "created_at": "2021-11-03T14:56:59Z",
    "updated_at": "2021-11-03T14:57:00Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r742027769",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/742027769"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r742027769"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/742027769/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1004,
    "side": "RIGHT",
    "in_reply_to_id": 740567565
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/742027824",
    "pull_request_review_id": 796674901,
    "id": 742027824,
    "node_id": "PRRC_kwDOABII584sOnIw",
    "diff_hunk": "@@ -3430,7 +3430,9 @@ MempoolAcceptResult ChainstateManager::ProcessTransaction(const CTransactionRef&\n         state.Invalid(TxValidationResult::TX_NO_MEMPOOL);\n         return MempoolAcceptResult::Failure(state);\n     }\n-    return AcceptToMemoryPool(active_chainstate, *active_chainstate.m_mempool, tx, /* bypass_limits= */ false, test_accept);\n+    auto result = AcceptToMemoryPool(active_chainstate, *active_chainstate.m_mempool, tx, /* bypass_limits= */ false, test_accept);\n+    active_chainstate.m_mempool->check(active_chainstate.CoinsTip(), active_chainstate.m_chain.Height() + 1);",
    "path": "src/validation.cpp",
    "position": 22,
    "original_position": 6,
    "commit_id": "0fdb619aaf1d62598263361a6082d182be1af792",
    "original_commit_id": "f87e07c6fe321f0fb97703c82c0e4122f800589f",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "For mainnet nodes with default config, there's no behaviour change. I've added the following text to the commit log:\r\n\r\n>    CTxMemPool::check() will carry out internal consistency checks 1/n times,\r\n>    where n is set by the `-checkmempool` configuration option. By default,\r\n>    mempool consistency checks are disabled entirely on mainnet.\r\n>    \r\n>    Therefore, this change has no effect on mainnet nodes running with\r\n>    default configuration. It simply removes the responsibility to trigger\r\n>    mempool consistency checks from net_processing.",
    "created_at": "2021-11-03T14:57:03Z",
    "updated_at": "2021-11-03T14:57:03Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r742027824",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/742027824"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r742027824"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/742027824/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 3433,
    "original_line": 3433,
    "side": "RIGHT",
    "in_reply_to_id": 740560773
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/742027864",
    "pull_request_review_id": 796674955,
    "id": 742027864,
    "node_id": "PRRC_kwDOABII584sOnJY",
    "diff_hunk": "@@ -1658,8 +1658,6 @@ bool CChainState::ConnectBlock(const CBlock& block, BlockValidationState& state,\n     // can be duplicated to remove the ability to spend the first instance -- even after\n     // being sent to another address.\n     // See BIP30, CVE-2012-1909, and http://r6.ca/blog/20120206T005236Z.html for more information.\n-    // This logic is not necessary for memory pool transactions, as AcceptToMemoryPool\n-    // already refuses previously-known transaction ids entirely.",
    "path": "src/validation.cpp",
    "position": 5,
    "original_position": 5,
    "commit_id": "0fdb619aaf1d62598263361a6082d182be1af792",
    "original_commit_id": "bc9218139fd17d26eaac5093ac36b7da016734b6",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": ":bow: ",
    "created_at": "2021-11-03T14:57:05Z",
    "updated_at": "2021-11-03T14:57:05Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r742027864",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/742027864"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r742027864"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/742027864/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": 1661,
    "original_start_line": 1661,
    "start_side": "LEFT",
    "line": 1662,
    "original_line": 1662,
    "side": "LEFT",
    "in_reply_to_id": 740555364
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/742027895",
    "pull_request_review_id": 796674994,
    "id": 742027895,
    "node_id": "PRRC_kwDOABII584sOnJ3",
    "diff_hunk": "@@ -3423,6 +3423,19 @@ bool ChainstateManager::ProcessNewBlock(const CChainParams& chainparams, const s\n     return true;\n }\n \n+MempoolAcceptResult ChainstateManager::ProcessTransaction(const CTransactionRef& tx,\n+                                                          bool bypass_limits,\n+                                                          bool test_accept)\n+{\n+    CChainState& active_chainstate = ActiveChainstate();\n+    if (!active_chainstate.m_mempool) {\n+        TxValidationState state;\n+        state.Invalid(TxValidationResult::TX_NO_MEMPOOL);",
    "path": "src/validation.cpp",
    "position": null,
    "original_position": 11,
    "commit_id": "0fdb619aaf1d62598263361a6082d182be1af792",
    "original_commit_id": "bbc785f31b5d70c702ae37d259c46652e243ddba",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Good point. Fixed!",
    "created_at": "2021-11-03T14:57:06Z",
    "updated_at": "2021-11-03T14:57:07Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r742027895",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/742027895"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r742027895"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/742027895/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 3433,
    "side": "RIGHT",
    "in_reply_to_id": 740552929
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/742027928",
    "pull_request_review_id": 796675047,
    "id": 742027928,
    "node_id": "PRRC_kwDOABII584sOnKY",
    "diff_hunk": "@@ -20,9 +20,9 @@ bilingual_str TransactionErrorString(const TransactionError err)\n         case TransactionError::P2P_DISABLED:\n             return Untranslated(\"Peer-to-peer functionality missing or disabled\");\n         case TransactionError::MEMPOOL_REJECTED:\n-            return Untranslated(\"Transaction rejected by AcceptToMemoryPool\");\n+            return Untranslated(\"Transaction rejected by mempool\");\n         case TransactionError::MEMPOOL_ERROR:\n-            return Untranslated(\"AcceptToMemoryPool failed\");\n+            return Untranslated(\"Mempool logic error\");",
    "path": "src/util/error.cpp",
    "position": null,
    "original_position": 8,
    "commit_id": "0fdb619aaf1d62598263361a6082d182be1af792",
    "original_commit_id": "edd4b472adbe6f45aee40d739f6c1f44e2dc35e2",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "That's a fair point. I've split this change into its own commit with the reasoning in the commit log.",
    "created_at": "2021-11-03T14:57:09Z",
    "updated_at": "2021-11-03T14:57:09Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r742027928",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/742027928"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r742027928"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/742027928/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": 22,
    "start_side": "RIGHT",
    "line": null,
    "original_line": 25,
    "side": "RIGHT",
    "in_reply_to_id": 740551011
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/742027956",
    "pull_request_review_id": 796675103,
    "id": 742027956,
    "node_id": "PRRC_kwDOABII584sOnK0",
    "diff_hunk": "@@ -38,7 +38,7 @@ BOOST_FIXTURE_TEST_CASE(tx_mempool_reject_coinbase, TestChain100Setup)\n \n     unsigned int initialPoolSize = m_node.mempool->size();\n     const MempoolAcceptResult result = AcceptToMemoryPool(m_node.chainman->ActiveChainstate(), *m_node.mempool, MakeTransactionRef(coinbaseTx),\n-                true /* bypass_limits */);\n+                false /* bypass_limits */);",
    "path": "src/test/txvalidation_tests.cpp",
    "position": null,
    "original_position": 5,
    "commit_id": "0fdb619aaf1d62598263361a6082d182be1af792",
    "original_commit_id": "23e5cba7749ae0a668c0e3b084e65f723617ba9f",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "That's correct. I've updated the commit log as suggested.",
    "created_at": "2021-11-03T14:57:11Z",
    "updated_at": "2021-11-03T14:57:11Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r742027956",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/742027956"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r742027956"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/742027956/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 41,
    "side": "RIGHT",
    "in_reply_to_id": 740541469
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/746054653",
    "pull_request_review_id": 801892972,
    "id": 746054653,
    "node_id": "PRRC_kwDOABII584sd-P9",
    "diff_hunk": "@@ -20,9 +20,9 @@ bilingual_str TransactionErrorString(const TransactionError err)\n         case TransactionError::P2P_DISABLED:\n             return Untranslated(\"Peer-to-peer functionality missing or disabled\");\n         case TransactionError::MEMPOOL_REJECTED:\n-            return Untranslated(\"Transaction rejected by AcceptToMemoryPool\");\n+            return Untranslated(\"Transaction rejected by mempool\");\n         case TransactionError::MEMPOOL_ERROR:\n-            return Untranslated(\"AcceptToMemoryPool failed\");\n+            return Untranslated(\"Mempool logic error\");",
    "path": "src/util/error.cpp",
    "position": null,
    "original_position": 8,
    "commit_id": "0fdb619aaf1d62598263361a6082d182be1af792",
    "original_commit_id": "edd4b472adbe6f45aee40d739f6c1f44e2dc35e2",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "re: https://github.com/bitcoin/bitcoin/pull/23173#discussion_r742027928\r\n\r\n> I've split this change into its own commit with the reasoning in the commit log.\r\n\r\nNot sure if it's intentional, but part of edd4b472adbe6f45aee40d739f6c1f44e2dc35e2 that was changing \"transaction pool\" to \"mempool\" in some comments was also dropped. Seem fine but just checking it wasn't lost accidentally.",
    "created_at": "2021-11-09T21:19:06Z",
    "updated_at": "2021-11-09T21:19:07Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r746054653",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/746054653"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/23173#discussion_r746054653"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23173"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/746054653/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": 22,
    "start_side": "RIGHT",
    "line": null,
    "original_line": 25,
    "side": "RIGHT",
    "in_reply_to_id": 740551011
  }
]