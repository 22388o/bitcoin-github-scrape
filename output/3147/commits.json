[
  {
    "sha": "6dcb165dbbdfa4fea32a16b20a88da3774a16edc",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo2ZGNiMTY1ZGJiZGZhNGZlYTMyYTE2YjIwYTg4ZGEzNzc0YTE2ZWRj",
    "commit": {
      "author": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2013-09-09T02:02:28Z"
      },
      "committer": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2013-10-24T20:29:18Z"
      },
      "message": "configure: Simplify common AM_CPPFLAGS and AM_LDFLAGS to a Makefile.common",
      "tree": {
        "sha": "702d00ecfb93f50a91d063bbbb3b8da19b87f253",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/702d00ecfb93f50a91d063bbbb3b8da19b87f253"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6dcb165dbbdfa4fea32a16b20a88da3774a16edc",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6dcb165dbbdfa4fea32a16b20a88da3774a16edc",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/6dcb165dbbdfa4fea32a16b20a88da3774a16edc",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6dcb165dbbdfa4fea32a16b20a88da3774a16edc/comments",
    "author": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "356587686cc5027adbd73e3a5b5c4bdf7861cfa3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/356587686cc5027adbd73e3a5b5c4bdf7861cfa3",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/356587686cc5027adbd73e3a5b5c4bdf7861cfa3"
      }
    ],
    "stats": {
      "total": 45,
      "additions": 21,
      "deletions": 24
    },
    "files": [
      {
        "sha": "96095aa43d80cc838893d9451b1656bb3e444dd2",
        "filename": "src/Makefile.am",
        "status": "modified",
        "additions": 3,
        "deletions": 4,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6dcb165dbbdfa4fea32a16b20a88da3774a16edc/src/Makefile.am",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6dcb165dbbdfa4fea32a16b20a88da3774a16edc/src/Makefile.am",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/Makefile.am?ref=6dcb165dbbdfa4fea32a16b20a88da3774a16edc",
        "patch": "@@ -1,8 +1,7 @@\n include Makefile.include\n-AM_CPPFLAGS =  $(INCLUDES) -I$(top_builddir)/src/obj \\\n-  -I$(top_srcdir)/src/leveldb/include -I$(top_srcdir)/src/leveldb/helpers \\\n-  -I$(builddir) $(BOOST_INCLUDES) $(BDB_CPPFLAGS)\n-AM_LDFLAGS = $(PTHREAD_CFLAGS)\n+\n+AM_CPPFLAGS += -I$(top_srcdir)/src/leveldb/helpers/memenv \\\n+  -I$(builddir)\n \n noinst_LIBRARIES = libbitcoin.a\n "
      },
      {
        "sha": "8c2274a287a1b13bb920eef28a9df20947771451",
        "filename": "src/Makefile.include",
        "status": "modified",
        "additions": 6,
        "deletions": 2,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6dcb165dbbdfa4fea32a16b20a88da3774a16edc/src/Makefile.include",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6dcb165dbbdfa4fea32a16b20a88da3774a16edc/src/Makefile.include",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/Makefile.include?ref=6dcb165dbbdfa4fea32a16b20a88da3774a16edc",
        "patch": "@@ -1,5 +1,9 @@\n-# Helper for rules and subdir Makefiles to find parent targets.\n-# Flags and other non-target variables should not be set here.\n+AM_CPPFLAGS =  $(INCLUDES) \\\n+  -I$(top_builddir)/src/obj \\\n+  -I$(top_srcdir)/src/leveldb/include \\\n+  $(BDB_CPPFLAGS) \\\n+  $(BOOST_INCLUDES)\n+AM_LDFLAGS = $(PTHREAD_CFLAGS)\n \n LIBBITCOIN=$(top_builddir)/src/libbitcoin.a\n LIBLEVELDB=$(top_builddir)/src/leveldb/libleveldb.a"
      },
      {
        "sha": "ac408e8bf5d182842307a98d8eeea1cd3365354f",
        "filename": "src/leveldb.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6dcb165dbbdfa4fea32a16b20a88da3774a16edc/src/leveldb.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6dcb165dbbdfa4fea32a16b20a88da3774a16edc/src/leveldb.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/leveldb.cpp?ref=6dcb165dbbdfa4fea32a16b20a88da3774a16edc",
        "patch": "@@ -8,7 +8,7 @@\n #include <leveldb/env.h>\n #include <leveldb/cache.h>\n #include <leveldb/filter_policy.h>\n-#include <memenv/memenv.h>\n+#include <memenv.h>\n \n #include <boost/filesystem.hpp>\n "
      },
      {
        "sha": "cdcd1f5d00336445cf8c45e9553a99063fcae7f0",
        "filename": "src/qt/Makefile.am",
        "status": "modified",
        "additions": 5,
        "deletions": 6,
        "changes": 11,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6dcb165dbbdfa4fea32a16b20a88da3774a16edc/src/qt/Makefile.am",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6dcb165dbbdfa4fea32a16b20a88da3774a16edc/src/qt/Makefile.am",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/Makefile.am?ref=6dcb165dbbdfa4fea32a16b20a88da3774a16edc",
        "patch": "@@ -1,11 +1,10 @@\n include $(top_srcdir)/src/Makefile.include\n \n-AM_CPPFLAGS =  $(INCLUDES) -I$(top_builddir)/src/obj \\\n-  -I$(top_srcdir)/src/leveldb/include -I$(top_srcdir)/src \\\n-  -I$(top_srcdir)/src/leveldb/helpers -I$(top_builddir)/src/qt \\\n-  -I$(top_builddir)/src/qt/forms $(BOOST_INCLUDES) $(PROTOBUF_CFLAGS) \\\n-  $(QR_CFLAGS) $(BDB_CPPFLAGS)\n-AM_LDFLAGS = $(PTHREAD_CFLAGS)\n+AM_CPPFLAGS += -I$(top_srcdir)/src \\\n+  -I$(top_builddir)/src/qt \\\n+  -I$(top_builddir)/src/qt/forms \\\n+  $(PROTOBUF_CFLAGS) \\\n+  $(QR_CFLAGS)\n bin_PROGRAMS = bitcoin-qt\n noinst_LIBRARIES = libbitcoinqt.a\n SUBDIRS = $(BUILD_TEST_QT)"
      },
      {
        "sha": "7891c3e97564fe6b48b836f6dc510b34d507267f",
        "filename": "src/qt/test/Makefile.am",
        "status": "modified",
        "additions": 5,
        "deletions": 6,
        "changes": 11,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6dcb165dbbdfa4fea32a16b20a88da3774a16edc/src/qt/test/Makefile.am",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6dcb165dbbdfa4fea32a16b20a88da3774a16edc/src/qt/test/Makefile.am",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/test/Makefile.am?ref=6dcb165dbbdfa4fea32a16b20a88da3774a16edc",
        "patch": "@@ -1,11 +1,10 @@\n include $(top_srcdir)/src/Makefile.include\n \n-AM_CPPFLAGS =  $(INCLUDES) -I$(top_builddir)/src/obj \\\n-  -I$(top_srcdir)/src/leveldb/include -I$(top_srcdir)/src \\\n-  -I$(top_srcdir)/src/leveldb/helpers -I$(top_srcdir)/src/qt \\\n-  -I$(top_builddir)/src/qt $(BOOST_INCLUDES) $(PROTOBUF_CFLAGS) \\\n-    $(QR_CFLAGS) $(BDB_CPPFLAGS)\n-AM_LDFLAGS = $(PTHREAD_CFLAGS)\n+AM_CPPFLAGS += -I$(top_srcdir)/src \\\n+  -I$(top_srcdir)/src/qt \\\n+  -I$(top_builddir)/src/qt \\\n+  $(PROTOBUF_CFLAGS) \\\n+    $(QR_CFLAGS)\n bin_PROGRAMS = test_bitcoin-qt\n TESTS = test_bitcoin-qt\n "
      },
      {
        "sha": "180fd7effa41a238e044c1c85915af88bbcfb249",
        "filename": "src/test/Makefile.am",
        "status": "modified",
        "additions": 1,
        "deletions": 5,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6dcb165dbbdfa4fea32a16b20a88da3774a16edc/src/test/Makefile.am",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6dcb165dbbdfa4fea32a16b20a88da3774a16edc/src/test/Makefile.am",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/Makefile.am?ref=6dcb165dbbdfa4fea32a16b20a88da3774a16edc",
        "patch": "@@ -1,10 +1,6 @@\n include $(top_srcdir)/src/Makefile.include\n \n-AM_CPPFLAGS =  $(INCLUDES) -I$(top_builddir)/src/obj \\\n-  -I$(top_srcdir)/src/leveldb/include -I$(top_srcdir)/src/leveldb/helpers \\\n-  -I$(top_srcdir)/src $(BOOST_INCLUDES) $(BDB_CPPFLAGS)\n-\n-AM_LDFLAGS = $(PTHREAD_CFLAGS)\n+AM_CPPFLAGS += -I$(top_srcdir)/src\n \n bin_PROGRAMS = test_bitcoin\n "
      }
    ]
  },
  {
    "sha": "af15eacd5e194e56f8b272afc2bc12b1715856e0",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzphZjE1ZWFjZDVlMTk0ZTU2ZjhiMjcyYWZjMmJjMTJiMTcxNTg1NmUw",
    "commit": {
      "author": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2013-09-07T21:01:08Z"
      },
      "committer": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2013-10-24T21:10:17Z"
      },
      "message": "configure: Automatically disable bitcoin-qt by default, if dependencies are not met",
      "tree": {
        "sha": "0da952399333bc13ca78df9803407701d24c07c2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/0da952399333bc13ca78df9803407701d24c07c2"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/af15eacd5e194e56f8b272afc2bc12b1715856e0",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/af15eacd5e194e56f8b272afc2bc12b1715856e0",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/af15eacd5e194e56f8b272afc2bc12b1715856e0",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/af15eacd5e194e56f8b272afc2bc12b1715856e0/comments",
    "author": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "6dcb165dbbdfa4fea32a16b20a88da3774a16edc",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6dcb165dbbdfa4fea32a16b20a88da3774a16edc",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/6dcb165dbbdfa4fea32a16b20a88da3774a16edc"
      }
    ],
    "stats": {
      "total": 127,
      "additions": 66,
      "deletions": 61
    },
    "files": [
      {
        "sha": "47cc9191a649782f25ec1dadb785e8f1e32b5858",
        "filename": "configure.ac",
        "status": "modified",
        "additions": 66,
        "deletions": 61,
        "changes": 127,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/af15eacd5e194e56f8b272afc2bc12b1715856e0/configure.ac",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/af15eacd5e194e56f8b272afc2bc12b1715856e0/configure.ac",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/configure.ac?ref=af15eacd5e194e56f8b272afc2bc12b1715856e0",
        "patch": "@@ -61,7 +61,32 @@ AC_ARG_WITH([qt],\n   [AS_HELP_STRING([--with-qt],\n   [enable qt (default is yes)])],\n   [use_qt=$withval],\n-  [use_qt=yes])\n+  [use_qt=auto])\n+AC_DEFUN([BITCOIN_QT_FAIL],[\n+  if test \"x$use_qt\" = \"xauto\"; then\n+    AC_MSG_WARN([$1; bitcoin-qt frontend will not be built])\n+    use_qt=no\n+  else\n+    AC_MSG_ERROR([$1])\n+  fi\n+])\n+AC_DEFUN([BITCOIN_QT_CHECK],[\n+  if test \"x$use_qt\" != \"xno\"; then\n+    true\n+    $1\n+  else\n+    true\n+    $2\n+  fi\n+])\n+AC_DEFUN([BITCOIN_QT_PATH_PROGS],[\n+  BITCOIN_QT_CHECK([\n+    AC_PATH_PROGS($1,$2,$3,$4)\n+    if test \"x$$1\" = \"x\"; then\n+      BITCOIN_QT_FAIL([$1 not found])\n+    fi\n+  ])\n+])\n \n AC_ARG_ENABLE(tests,\n     AS_HELP_STRING([--enable-tests],[compile tests (default is yes)]),\n@@ -131,12 +156,12 @@ AC_PATH_PROG(LCOV, lcov)\n AC_PATH_PROG(JAVA, java)\n AC_PATH_PROG(GENHTML, genhtml)\n AC_PATH_PROG([GIT], [git])\n-AC_PATH_PROGS([MOC], [moc-qt4 moc4 moc],, $qt_bin_path:$PATH)\n-AC_PATH_PROGS([UIC], [uic-qt4 uic4 uic],, $qt_bin_path:$PATH)\n-AC_PATH_PROGS([RCC], [rcc-qt4 rcc4 rcc],, $qt_bin_path:$PATH)\n-AC_PATH_PROGS([LRELEASE], [lrelease-qt4 lrelease4 lrelease],, $qt_bin_path:$PATH)\n-AC_PATH_PROGS([LUPDATE], [lupdate-qt4 lupdate4 lupdate],, $qt_bin_path:$PATH)\n-AC_PATH_PROG([PROTOC], [protoc],, $protoc_bin_path:$PATH)\n+BITCOIN_QT_PATH_PROGS([MOC], [moc-qt4 moc4 moc],, $qt_bin_path:$PATH)\n+BITCOIN_QT_PATH_PROGS([UIC], [uic-qt4 uic4 uic],, $qt_bin_path:$PATH)\n+BITCOIN_QT_PATH_PROGS([RCC], [rcc-qt4 rcc4 rcc],, $qt_bin_path:$PATH)\n+BITCOIN_QT_PATH_PROGS([LRELEASE], [lrelease-qt4 lrelease4 lrelease],, $qt_bin_path:$PATH)\n+BITCOIN_QT_PATH_PROGS([LUPDATE], [lupdate-qt4 lupdate4 lupdate],, $qt_bin_path:$PATH)\n+BITCOIN_QT_PATH_PROGS([PROTOC], [protoc],, $protoc_bin_path:$PATH)\n AC_PATH_PROG(CCACHE,ccache)\n AC_PATH_PROG(XGETTEXT,xgettext)\n AC_PATH_PROG(HEXDUMP,hexdump)\n@@ -217,11 +242,11 @@ case $host in\n        fi\n      fi\n \n-     if test x$use_qt = xyes; then\n+     BITCOIN_QT_CHECK([\n        MOC_DEFS=\"-DQ_OS_MAC\"\n        base_frameworks=\"-framework Foundation -framework ApplicationServices -framework AppKit\"\n        AX_CHECK_LINK_FLAG([[$base_frameworks]],[LIBS=\"$LIBS $base_frameworks\"],[AC_MSG_ERROR(could not find base frameworks)])\n-     fi\n+     ])\n \n      CPPFLAGS=\"$CPPFLAGS -DMAC_OSX\"\n      TESTDEFS=\"-DBOOST_TEST_DYN_LINK\"\n@@ -413,8 +438,11 @@ if test x$use_pkgconfig = xyes; then\n       PKG_CHECK_MODULES([SSL], [libssl], [INCLUDES=\"$INCLUDES $SSL_CFLAGS\"; LIBS=\"$LIBS $SSL_LIBS\"], [AC_MSG_ERROR(openssl  not found.)])\n       PKG_CHECK_MODULES([CRYPTO], [libcrypto], [INCLUDES=\"$INCLUDES $CRYPTO_CFLAGS\"; LIBS=\"$LIBS $CRYPTO_LIBS\"], [AC_MSG_ERROR(libcrypto  not found.)])\n \n-      if test x$use_qt = xyes; then\n-        PKG_CHECK_MODULES([QT], [QtCore QtGui QtNetwork], [QT_INCLUDES=\"$QT_CFLAGS\"; have_qt=yes], [have_qt=no])\n+      BITCOIN_QT_CHECK([\n+        PKG_CHECK_MODULES([QT], [QtCore QtGui QtNetwork], [QT_INCLUDES=\"$QT_CFLAGS\"; have_qt=yes],[\n+          have_qt=no\n+          BITCOIN_QT_FAIL([Qt dependencies not found])\n+        ])\n         if test x$use_tests = xyes; then\n           PKG_CHECK_MODULES([QT_TEST], [QtTest], [QT_TEST_INCLUDES=\"$QT_TEST_CFLAGS\"; have_qt_test=yes], [have_qt_test=no])\n         fi\n@@ -425,7 +453,7 @@ if test x$use_pkgconfig = xyes; then\n           PKG_CHECK_MODULES([QR], [libqrencode], [have_qrencode=yes], [have_qrencode=no])\n         fi\n         PKG_CHECK_MODULES([PROTOBUF], [protobuf], [have_protobuf=yes], [AC_MSG_ERROR(libprotobuf not found.)])\n-      fi\n+      ])\n     ]\n   )\n else\n@@ -435,7 +463,7 @@ else\n   AC_CHECK_HEADER([openssl/ssl.h],, AC_MSG_ERROR(libssl headers missing),)\n   AC_CHECK_LIB([ssl],         [main],, AC_MSG_ERROR(libssl missing))\n \n-  if test x$use_qt = xyes; then\n+  BITCOIN_QT_CHECK([\n     TEMP_LIBS=\"$LIBS\"\n     LIBS=\n     if test x$qt_lib_path != x; then\n@@ -448,22 +476,25 @@ else\n     fi\n \n     if test x$TARGET_OS == xwindows; then\n-      AC_CHECK_LIB([imm32],      [main],, AC_MSG_ERROR(libimm32 not found. Install it or use --without-qt.))\n+      AC_CHECK_LIB([imm32],      [main],, BITCOIN_QT_FAIL(libimm32 not found))\n     fi\n+  ])\n \n     #TODO: These are only needed when they're linked directly to parent libs. It really has nothing to do with windows.\n     #Instead, check for missing functions in parent libs and assume static if they're absent.\n     if test x$TARGET_OS == xwindows; then\n-      AC_CHECK_LIB([qcncodecs],      [main],, AC_MSG_ERROR(libqcncodecs not found. Install it or use --without-qt.))\n-      AC_CHECK_LIB([qjpcodecs],      [main],, AC_MSG_ERROR(libqjpcodecs not found. Install it or use --without-qt.))\n-      AC_CHECK_LIB([qkrcodecs],      [main],, AC_MSG_ERROR(libqkrcodecs not found. Install it or use --without-qt.))\n-      AC_CHECK_LIB([qtwcodecs],      [main],, AC_MSG_ERROR(libqtwcodecs not found. Install it or use --without-qt.))\n+      BITCOIN_QT_CHECK(AC_CHECK_LIB([qcncodecs],[main],,BITCOIN_QT_FAIL(libqcncodecs not found)))\n+      BITCOIN_QT_CHECK(AC_CHECK_LIB([qjpcodecs],[main],,BITCOIN_QT_FAIL(libqjpcodecs not found)))\n+      BITCOIN_QT_CHECK(AC_CHECK_LIB([qkrcodecs],[main],,BITCOIN_QT_FAIL(libqkrcodecs not found)))\n+      BITCOIN_QT_CHECK(AC_CHECK_LIB([qtwcodecs],[main],,BITCOIN_QT_FAIL(libqtwcodecs not found)))\n     fi\n \n-    AC_CHECK_LIB([QtCore],      [main],, AC_MSG_ERROR(libQtCore not found. Install it or use --without-qt.))\n-    AC_CHECK_LIB([QtGui],      [main],, AC_MSG_ERROR(libQtGui not found. Install it or use --without-qt.))\n-    AC_CHECK_LIB([QtNetwork],      [main],, AC_MSG_ERROR(libQtNetwork not found. Install it or use --without-qt.))\n-    AC_CHECK_LIB([protobuf],      [main],, AC_MSG_ERROR(libprotobuf not found. Install it or use --without-qt.))\n+    BITCOIN_QT_CHECK(AC_CHECK_LIB([QtCore]   ,[main],,BITCOIN_QT_FAIL(libQtCore not found)))\n+    BITCOIN_QT_CHECK(AC_CHECK_LIB([QtGui]    ,[main],,BITCOIN_QT_FAIL(libQtGui not found)))\n+    BITCOIN_QT_CHECK(AC_CHECK_LIB([QtNetwork],[main],,BITCOIN_QT_FAIL(libQtNetwork not found)))\n+    BITCOIN_QT_CHECK(AC_CHECK_LIB([protobuf] ,[main],,BITCOIN_QT_FAIL(libprotobuf not found)))\n+\n+  BITCOIN_QT_CHECK([\n     QT_LIBS=\"$LIBS\"\n     LIBS=\"$TEMP_LIBS\"\n \n@@ -472,10 +503,13 @@ else\n       QT_INCLUDES=\"-I$qt_include_path -I$qt_include_path/QtCore -I$qt_include_path/QtGui -I$qt_include_path/QtNetwork -I$qt_include_path/QtTest -I$qt_include_path/QtDBus\"\n       CPPFLAGS=\"$CPPFLAGS $QT_INCLUDES\"\n     fi\n-    AC_CHECK_HEADER([QtPlugin],, AC_MSG_ERROR(QtCore headers missing. Install them or use --without-qt.),)\n-    AC_CHECK_HEADER([QApplication],, AC_MSG_ERROR(QtGUI headers missing. Install them or use --without-qt.),)\n-    AC_CHECK_HEADER([QLocalSocket],, AC_MSG_ERROR(QtNetwork headers missing. Install them or use --without-qt.),)\n+  ])\n+\n+    BITCOIN_QT_CHECK(AC_CHECK_HEADER([QtPlugin],,BITCOIN_QT_FAIL(QtCore headers missing),))\n+    BITCOIN_QT_CHECK(AC_CHECK_HEADER([QApplication],, BITCOIN_QT_FAIL(QtGui headers missing),))\n+    BITCOIN_QT_CHECK(AC_CHECK_HEADER([QLocalSocket],, BITCOIN_QT_FAIL(QtNetwork headers missing),))\n \n+  BITCOIN_QT_CHECK([\n     if test x$use_tests = xyes; then\n       TEMP_LIBS=\"$LIBS\"\n       LIBS=\n@@ -503,7 +537,7 @@ else\n       AC_CHECK_LIB([qrencode], [main],, [have_qrencode=no])\n       AC_CHECK_HEADER([qrencode.h],, have_qrencode=no)\n     fi\n-  fi\n+  ])\n fi\n \n if test x$use_ipv6 = xyes; then\n@@ -590,47 +624,18 @@ fi\n \n dnl enable qt support\n AC_MSG_CHECKING([if qt should be enabled])\n-if test x$use_qt = xyes; then\n-  if test x$have_qt = xno; then\n-     AC_MSG_ERROR(\"qt support requested but qt could not be located. use --without-qt\")\n-  fi\n-  if test x$MOC = x; then\n-    AC_MSG_ERROR(\"qt support requested but moc was not found. use --without-qt\")\n-  fi\n-  if test x$PROTOC = x; then\n-    AC_MSG_ERROR(\"qt support requested but protoc was not found. use --without-qt\")\n-  fi\n-  if test x$UIC = x; then\n-    AC_MSG_ERROR(\"qt support requested but uic was not found. use --without-qt\")\n-  fi\n-  if test x$RCC = x; then\n-    AC_MSG_ERROR(\"qt support requested but rcc was not found. use --without-qt\")\n-  fi\n-  if test x$LRELEASE = x; then\n-    AC_MSG_ERROR(\"qt support requested but lrelease was not found. use --without-qt\")\n-  fi\n-  if test x$use_tests = xyes; then\n-    if test x$have_qt_test = xno; then\n-      AC_MSG_ERROR(\"libQtTest not found. Use --disable-tests or --without-qt.\")\n-    fi\n-  fi\n-  if test x$have_qt_dbus = xno;  then\n-    use_dbus=no\n-    if test x$use_dbus = xyes; then\n-      AC_MSG_ERROR(\"libQtDBus not found. Use --without-qtdbus.\")\n-    fi\n-  fi\n+BITCOIN_QT_CHECK([\n+  use_qt=yes\n+  BUILD_QT=qt\n   if test x$XGETTEXT == x; then\n     AC_MSG_WARN(\"xgettext is required to update qt translations\")\n   fi\n   if test x$LUPDATE == x; then\n     AC_MSG_WARN(\"lupdate is required to update qt translations\")\n   fi\n-\n-  BUILD_QT=qt\n-else\n+],[\n   use_qt=no\n-fi\n+])\n \n AC_MSG_RESULT($use_qt)\n \n@@ -664,7 +669,7 @@ if test x$use_qt = xyes; then\n     fi\n   fi\n \n-  if test x$use_tests = xyes; then\n+  if test x$use_tests$have_qt_test = xyesyes; then\n     BUILD_TEST_QT=\"test\"\n   fi\n fi"
      }
    ]
  },
  {
    "sha": "fa94a2ee7a3610c285ba57e02938aa05172cf5dd",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYTk0YTJlZTdhMzYxMGMyODViYTU3ZTAyOTM4YWEwNTE3MmNmNWRk",
    "commit": {
      "author": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2013-09-09T03:06:17Z"
      },
      "committer": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2013-10-24T21:15:35Z"
      },
      "message": "configure: Add unsupported --with-system-leveldb configure flag",
      "tree": {
        "sha": "8dec68d3784d058d06fcbda04380396f3f36d41c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/8dec68d3784d058d06fcbda04380396f3f36d41c"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa94a2ee7a3610c285ba57e02938aa05172cf5dd",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa94a2ee7a3610c285ba57e02938aa05172cf5dd",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fa94a2ee7a3610c285ba57e02938aa05172cf5dd",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa94a2ee7a3610c285ba57e02938aa05172cf5dd/comments",
    "author": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "af15eacd5e194e56f8b272afc2bc12b1715856e0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/af15eacd5e194e56f8b272afc2bc12b1715856e0",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/af15eacd5e194e56f8b272afc2bc12b1715856e0"
      }
    ],
    "stats": {
      "total": 47,
      "additions": 38,
      "deletions": 9
    },
    "files": [
      {
        "sha": "0da40c60de116669eb1d915055fc7967a2ee99c2",
        "filename": "configure.ac",
        "status": "modified",
        "additions": 21,
        "deletions": 0,
        "changes": 21,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa94a2ee7a3610c285ba57e02938aa05172cf5dd/configure.ac",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa94a2ee7a3610c285ba57e02938aa05172cf5dd/configure.ac",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/configure.ac?ref=fa94a2ee7a3610c285ba57e02938aa05172cf5dd",
        "patch": "@@ -348,6 +348,27 @@ AC_TRY_COMPILE([#include <sys/socket.h>],\n  [ AC_MSG_RESULT(no)]\n )\n \n+dnl Check for leveldb, only if explicitly requested\n+AC_ARG_WITH([system-leveldb],\n+  [AS_HELP_STRING([--with-system-leveldb],\n+  [Build with system LevelDB (default is no; DANGEROUS; NOT SUPPORTED)])],\n+  [system_leveldb=$withval],\n+  [system_leveldb=no]\n+)\n+if test x$system_leveldb = xno; then\n+  LEVELDB_CPPFLAGS='-I$(top_srcdir)/src/leveldb/include'\n+  LIBLEVELDB='$(top_builddir)/src/leveldb/libleveldb.a'\n+  LIBMEMENV='$(top_builddir)/src/leveldb/libmemenv.a'\n+else\n+  LEVELDB_CPPFLAGS=\n+  LIBLEVELDB=-lleveldb\n+  LIBMEMENV=-lmemenv\n+fi\n+AC_SUBST(LEVELDB_CPPFLAGS)\n+AC_SUBST(LIBLEVELDB)\n+AC_SUBST(LIBMEMENV)\n+AM_CONDITIONAL([INTERNAL_LEVELDB], [test x$system_leveldb = xno])\n+\n dnl Check for libdb_cxx\n BITCOIN_FIND_BDB48\n "
      },
      {
        "sha": "35cebbbc07e206e8150af2fb759d6c145ccdbe68",
        "filename": "src/Makefile.am",
        "status": "modified",
        "additions": 11,
        "deletions": 5,
        "changes": 16,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa94a2ee7a3610c285ba57e02938aa05172cf5dd/src/Makefile.am",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa94a2ee7a3610c285ba57e02938aa05172cf5dd/src/Makefile.am",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/Makefile.am?ref=fa94a2ee7a3610c285ba57e02938aa05172cf5dd",
        "patch": "@@ -1,7 +1,9 @@\n include Makefile.include\n \n-AM_CPPFLAGS += -I$(top_srcdir)/src/leveldb/helpers/memenv \\\n-  -I$(builddir)\n+AM_CPPFLAGS += -I$(builddir)\n+if INTERNAL_LEVELDB\n+AM_CPPFLAGS += -I$(top_srcdir)/src/leveldb/helpers/memenv\n+endif\n \n noinst_LIBRARIES = libbitcoin.a\n \n@@ -42,7 +44,7 @@ nodist_libbitcoin_a_SOURCES = $(top_srcdir)/src/obj/build.h\n #\n \n # bitcoind binary #\n-bitcoind_LDADD = libbitcoin.a leveldb/libleveldb.a leveldb/libmemenv.a \\\n+bitcoind_LDADD = libbitcoin.a $(LIBLEVELDB) $(LIBMEMENV) \\\n   $(BOOST_LIBS)\n bitcoind_SOURCES = bitcoind.cpp\n #\n@@ -55,7 +57,7 @@ AM_CPPFLAGS += $(BDB_CPPFLAGS)\n bitcoind_LDADD += $(BDB_LIBS)\n \n # bitcoin-cli binary #\n-bitcoin_cli_LDADD = libbitcoin.a leveldb/libleveldb.a leveldb/libmemenv.a \\\n+bitcoin_cli_LDADD = libbitcoin.a $(LIBLEVELDB) $(LIBMEMENV) \\\n   $(BOOST_LIBS)\n bitcoin_cli_SOURCES = bitcoin-cli.cpp\n #\n@@ -76,7 +78,11 @@ qt/bitcoinstrings.cpp: $(libbitcoin_a_SOURCES)\n \t@test -n $(XGETTEXT) || echo \"xgettext is required for updating translations\"\n \t@cd $(top_srcdir); XGETTEXT=$(XGETTEXT) share/qt/extract_strings_qt.py\n \n-CLEANFILES = leveldb/libleveldb.a leveldb/libmemenv.a *.gcda *.gcno\n+CLEANFILES = *.gcda *.gcno\n+\n+if INTERNAL_LEVELDB\n+CLEANFILES += leveldb/libleveldb.a leveldb/libmemenv.a\n+endif\n \n DISTCLEANFILES = obj/build.h\n "
      },
      {
        "sha": "492e69745be7b6ceefec777d8eb47bdcfb41de88",
        "filename": "src/Makefile.common",
        "status": "added",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa94a2ee7a3610c285ba57e02938aa05172cf5dd/src/Makefile.common",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa94a2ee7a3610c285ba57e02938aa05172cf5dd/src/Makefile.common",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/Makefile.common?ref=fa94a2ee7a3610c285ba57e02938aa05172cf5dd",
        "patch": "@@ -0,0 +1,4 @@\n+AM_CPPFLAGS =  $(INCLUDES) -I$(top_builddir)/src/obj \\\n+  $(LEVELDB_CPPFLAGS)  \\\n+  $(BOOST_INCLUDES)\n+AM_LDFLAGS = $(PTHREAD_CFLAGS)"
      },
      {
        "sha": "0b392f0da04873580c27afa2b630f2438b130633",
        "filename": "src/Makefile.include",
        "status": "modified",
        "additions": 2,
        "deletions": 4,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa94a2ee7a3610c285ba57e02938aa05172cf5dd/src/Makefile.include",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa94a2ee7a3610c285ba57e02938aa05172cf5dd/src/Makefile.include",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/Makefile.include?ref=fa94a2ee7a3610c285ba57e02938aa05172cf5dd",
        "patch": "@@ -1,20 +1,18 @@\n AM_CPPFLAGS =  $(INCLUDES) \\\n   -I$(top_builddir)/src/obj \\\n-  -I$(top_srcdir)/src/leveldb/include \\\n+  $(LEVELDB_CPPFLAGS) \\\n   $(BDB_CPPFLAGS) \\\n   $(BOOST_INCLUDES)\n AM_LDFLAGS = $(PTHREAD_CFLAGS)\n \n LIBBITCOIN=$(top_builddir)/src/libbitcoin.a\n-LIBLEVELDB=$(top_builddir)/src/leveldb/libleveldb.a\n-LIBMEMENV=$(top_builddir)/src/leveldb/libmemenv.a\n LIBBITCOINQT=$(top_builddir)/src/qt/libbitcoinqt.a\n \n $(LIBBITCOIN):\n \t$(MAKE) -C $(top_builddir)/src $(@F)\n \n $(LIBLEVELDB) $(LIBMEMENV):\n-\t$(MAKE) -C $(top_builddir)/src leveldb/$(@F)\n+\t$(MAKE) -C $(top_builddir)/src $@\n \n $(LIBBITCOINQT):\n \t$(MAKE) -C $(top_builddir)/src/qt $(@F)"
      }
    ]
  }
]