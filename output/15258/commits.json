[
  {
    "sha": "2434ab5c2afd61aa0cf81f80b1b236ea52d1d20d",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyNDM0YWI1YzJhZmQ2MWFhMGNmODFmODBiMWIyMzZlYTUyZDFkMjBk",
    "commit": {
      "author": {
        "name": "Ben Woosley",
        "email": "ben.woosley@gmail.com",
        "date": "2019-01-25T06:49:48Z"
      },
      "committer": {
        "name": "Ben Woosley",
        "email": "ben.woosley@gmail.com",
        "date": "2019-01-25T07:46:06Z"
      },
      "message": "Scripts and tools: Fix devtools/copyright_header.py to always honor exclusions\n\nThis script compared paths relative to the report directory to test for exclusion,\nmeaning the directory exclusions did not work properly, as they were relative to\nthe project root.\n\nFix this by creating absolute paths through the combination of:\n'git ls-files --full-name' and 'git rev-parse --show-toplevel'",
      "tree": {
        "sha": "6fda93c7d503b93b596a4f9534ae2f83ccd0e91a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6fda93c7d503b93b596a4f9534ae2f83ccd0e91a"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2434ab5c2afd61aa0cf81f80b1b236ea52d1d20d",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE+XLHXoy4Dim7e8hvTYykuhgECQYFAlxKvr8ACgkQTYykuhgE\nCQaVFxAAhqiahqa/N8TfvqFKfjLeOf97tamp5VBjqkVPnOjTZjFsPDEmZ1DlXDsJ\ncd8VZcjsCH/L2XwKYZcxxLbuM0DLJ22LZTppLPw9ti0yGYw4LNtt9cTlaaqrzYqS\ns+v83I6qHv/cxs6b8VcPh4IguiFXTCDeNquTznn0QgsadVmVrFZgg+zhHSM2xaYZ\nhCmKmoNBZQQ9eaFlMf1bV04ADrGyfn1PeTQB0MDYLq/PzCCbISdiSqO1NxYIajan\na5dYe7tSH+Hot5adqaDB+JgdJDEo2iUX9l4V42bvKaNCEEjIDv2V2450Y57KIqV8\n+qxMCKfoPkcoX88u822M/w4qDudCbT76j6rGBdFqqVGi7XKYAttgAcI1rWs41bjU\nYffEY/3q3dqsxL6eHAdCztb0ATPjw8a3KIKys/GIfHUkhn6gtdtO2XATFB/ru++v\nSqCSIgWgcjsXi3XE8g5KCjuqKYwmmRkIBhDZbXdDTWd7nIQg7GWk/1AkfaVpuzi5\n7uccHT12yFm/o4rfCPh/Qib5upuVLso+yXto5w/Ql46jmpP5L+HrfGabOGazjtS6\nWxBh5t4nUe71eeOKHkZS5n8f0nuL9kUaaEjJmuJNtuayT55KOYglLxrkkK1oWhP8\nR3+ulHDzGZxE13RxJNdT8rvtJ80FIh6RgOpK6DWa0OS0gEhpmsg=\n=U5yh\n-----END PGP SIGNATURE-----",
        "payload": "tree 6fda93c7d503b93b596a4f9534ae2f83ccd0e91a\nparent 72bd4ab867e3be0d8410403d9641c08288d343e3\nauthor Ben Woosley <ben.woosley@gmail.com> 1548398988 -0800\ncommitter Ben Woosley <ben.woosley@gmail.com> 1548402366 -0800\n\nScripts and tools: Fix devtools/copyright_header.py to always honor exclusions\n\nThis script compared paths relative to the report directory to test for exclusion,\nmeaning the directory exclusions did not work properly, as they were relative to\nthe project root.\n\nFix this by creating absolute paths through the combination of:\n'git ls-files --full-name' and 'git rev-parse --show-toplevel'\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2434ab5c2afd61aa0cf81f80b1b236ea52d1d20d",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/2434ab5c2afd61aa0cf81f80b1b236ea52d1d20d",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2434ab5c2afd61aa0cf81f80b1b236ea52d1d20d/comments",
    "author": {
      "login": "Empact",
      "id": 5470,
      "node_id": "MDQ6VXNlcjU0NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Empact",
      "html_url": "https://github.com/Empact",
      "followers_url": "https://api.github.com/users/Empact/followers",
      "following_url": "https://api.github.com/users/Empact/following{/other_user}",
      "gists_url": "https://api.github.com/users/Empact/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Empact/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
      "organizations_url": "https://api.github.com/users/Empact/orgs",
      "repos_url": "https://api.github.com/users/Empact/repos",
      "events_url": "https://api.github.com/users/Empact/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Empact/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "Empact",
      "id": 5470,
      "node_id": "MDQ6VXNlcjU0NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Empact",
      "html_url": "https://github.com/Empact",
      "followers_url": "https://api.github.com/users/Empact/followers",
      "following_url": "https://api.github.com/users/Empact/following{/other_user}",
      "gists_url": "https://api.github.com/users/Empact/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Empact/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
      "organizations_url": "https://api.github.com/users/Empact/orgs",
      "repos_url": "https://api.github.com/users/Empact/repos",
      "events_url": "https://api.github.com/users/Empact/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Empact/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "72bd4ab867e3be0d8410403d9641c08288d343e3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/72bd4ab867e3be0d8410403d9641c08288d343e3",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/72bd4ab867e3be0d8410403d9641c08288d343e3"
      }
    ],
    "stats": {
      "total": 35,
      "additions": 18,
      "deletions": 17
    },
    "files": [
      {
        "sha": "1bc304c9470df0d1c263e67d30fb38b9f63b22aa",
        "filename": "contrib/devtools/copyright_header.py",
        "status": "modified",
        "additions": 18,
        "deletions": 17,
        "changes": 35,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2434ab5c2afd61aa0cf81f80b1b236ea52d1d20d/contrib/devtools/copyright_header.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2434ab5c2afd61aa0cf81f80b1b236ea52d1d20d/contrib/devtools/copyright_header.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/devtools/copyright_header.py?ref=2434ab5c2afd61aa0cf81f80b1b236ea52d1d20d",
        "patch": "@@ -48,15 +48,22 @@ def applies_to_file(filename):\n # obtain list of files in repo according to INCLUDE and EXCLUDE\n ################################################################################\n \n-GIT_LS_CMD = 'git ls-files'\n+GIT_LS_CMD = 'git ls-files --full-name'.split(' ')\n+GIT_TOPLEVEL_CMD = 'git rev-parse --show-toplevel'.split(' ')\n \n-def call_git_ls():\n-    out = subprocess.check_output(GIT_LS_CMD.split(' '))\n+def call_git_ls(base_directory):\n+    out = subprocess.check_output([*GIT_LS_CMD, base_directory])\n     return [f for f in out.decode(\"utf-8\").split('\\n') if f != '']\n \n-def get_filenames_to_examine():\n-    filenames = call_git_ls()\n-    return sorted([filename for filename in filenames if\n+def call_git_toplevel():\n+    \"Returns the absolute path to the project root\"\n+    return subprocess.check_output(GIT_TOPLEVEL_CMD).strip().decode(\"utf-8\")\n+\n+def get_filenames_to_examine(base_directory):\n+    \"Returns an array of absolute paths to any project files in the base_directory that pass the include/exclude filters\"\n+    root = call_git_toplevel()\n+    filenames = call_git_ls(base_directory)\n+    return sorted([os.path.join(root, filename) for filename in filenames if\n                    applies_to_file(filename)])\n \n ################################################################################\n@@ -146,7 +153,7 @@ def file_has_without_c_style_copyright_for_holder(contents, holder_name):\n ################################################################################\n \n def read_file(filename):\n-    return open(os.path.abspath(filename), 'r', encoding=\"utf8\").read()\n+    return open(filename, 'r', encoding=\"utf8\").read()\n \n def gather_file_info(filename):\n     info = {}\n@@ -260,12 +267,9 @@ def print_report(file_infos, verbose):\n     print(SEPARATOR)\n \n def exec_report(base_directory, verbose):\n-    original_cwd = os.getcwd()\n-    os.chdir(base_directory)\n-    filenames = get_filenames_to_examine()\n+    filenames = get_filenames_to_examine(base_directory)\n     file_infos = [gather_file_info(f) for f in filenames]\n     print_report(file_infos, verbose)\n-    os.chdir(original_cwd)\n \n ################################################################################\n # report cmd\n@@ -325,13 +329,13 @@ def get_most_recent_git_change_year(filename):\n ################################################################################\n \n def read_file_lines(filename):\n-    f = open(os.path.abspath(filename), 'r', encoding=\"utf8\")\n+    f = open(filename, 'r', encoding=\"utf8\")\n     file_lines = f.readlines()\n     f.close()\n     return file_lines\n \n def write_file_lines(filename, file_lines):\n-    f = open(os.path.abspath(filename), 'w', encoding=\"utf8\")\n+    f = open(filename, 'w', encoding=\"utf8\")\n     f.write(''.join(file_lines))\n     f.close()\n \n@@ -399,11 +403,8 @@ def update_updatable_copyright(filename):\n                               \"Copyright updated! -> %s\" % last_git_change_year)\n \n def exec_update_header_year(base_directory):\n-    original_cwd = os.getcwd()\n-    os.chdir(base_directory)\n-    for filename in get_filenames_to_examine():\n+    for filename in get_filenames_to_examine(base_directory):\n         update_updatable_copyright(filename)\n-    os.chdir(original_cwd)\n \n ################################################################################\n # update cmd"
      }
    ]
  },
  {
    "sha": "ad5e5a105e873b6cca277370312d3d31a3427d38",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzphZDVlNWExMDVlODczYjZjY2EyNzczNzAzMTJkM2QzMWEzNDI3ZDM4",
    "commit": {
      "author": {
        "name": "Ben Woosley",
        "email": "ben.woosley@gmail.com",
        "date": "2019-01-25T07:38:23Z"
      },
      "committer": {
        "name": "Ben Woosley",
        "email": "ben.woosley@gmail.com",
        "date": "2019-01-25T07:46:12Z"
      },
      "message": "Scripts and tools: Drop no-longer-relevant copyright holder names\n\nNow that leveldb, secp256k1, etc. are reliably excluded, these\nnames will not show up in the searched files.",
      "tree": {
        "sha": "8a5a08bf7cedb3efc1fcf3f368bfb6a4f867b10f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/8a5a08bf7cedb3efc1fcf3f368bfb6a4f867b10f"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ad5e5a105e873b6cca277370312d3d31a3427d38",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE+XLHXoy4Dim7e8hvTYykuhgECQYFAlxKvsQACgkQTYykuhgE\nCQaeOQ/9FubwUiePrUrLjY9luikb3t/fBQF9zCx5gVEL6gPCRomJy59NzIksUSU2\n6Ox+iWmN0LXXe7QFICzdOHsataA0+6RhXyZSs/NQLYt5BAmDhV+bBe6YTB0SE/ww\n6QPouFcCVx1X6Jxnr5hpN/hi83CHWQo5OPvp0+ZP1cz0Xad8Mj27bPKiqNDdgg2p\nzSMgvtoHTQsZquLd4kvyfel/O/p/Slg9on2mDJ9ZYCtR9w4n6eH0X0yka8nzdjOf\nuXLL2foawiiQSrgefqyIIR2iEd8JlXU1y41+LAVTLTe3k06mDIuYzLKMLAdamqaH\nf/y/Yc7JlnsWCRr6Ncn8ZuFgcv8Be8jZQPDtasXo/io2bFt399diH7agm0SgV2cE\ncIvxW+i4+bbmuK5WvacrmUxDEhDQfd1kqrzTJAIFLADqMEvnDDTxh7H58pETYXxY\nsgGH0T7g0YRCPEsHhmZxhXtbjt0NxuOMXaaujnu7JkdPYHQe1Sx6TmNA7zuefvkb\nlUfY89dMyM7b2Vgko2y4cfg43arndX8yw1l4K90rLezeR5+fTkW8QYH9NRSrjBWl\nSXAwYkYHv4cAUMLUw5Z9ppvj/668BYzcfnENmJ7s2AKn33MlG9SQd3rIgb2KIxoi\nNkdwcpy7GEIX9aGVMeev4XYbYbYtxSGwC7oF+gJ5OzJTtU0dPnY=\n=Ixtm\n-----END PGP SIGNATURE-----",
        "payload": "tree 8a5a08bf7cedb3efc1fcf3f368bfb6a4f867b10f\nparent 2434ab5c2afd61aa0cf81f80b1b236ea52d1d20d\nauthor Ben Woosley <ben.woosley@gmail.com> 1548401903 -0800\ncommitter Ben Woosley <ben.woosley@gmail.com> 1548402372 -0800\n\nScripts and tools: Drop no-longer-relevant copyright holder names\n\nNow that leveldb, secp256k1, etc. are reliably excluded, these\nnames will not show up in the searched files.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ad5e5a105e873b6cca277370312d3d31a3427d38",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/ad5e5a105e873b6cca277370312d3d31a3427d38",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ad5e5a105e873b6cca277370312d3d31a3427d38/comments",
    "author": {
      "login": "Empact",
      "id": 5470,
      "node_id": "MDQ6VXNlcjU0NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Empact",
      "html_url": "https://github.com/Empact",
      "followers_url": "https://api.github.com/users/Empact/followers",
      "following_url": "https://api.github.com/users/Empact/following{/other_user}",
      "gists_url": "https://api.github.com/users/Empact/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Empact/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
      "organizations_url": "https://api.github.com/users/Empact/orgs",
      "repos_url": "https://api.github.com/users/Empact/repos",
      "events_url": "https://api.github.com/users/Empact/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Empact/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "Empact",
      "id": 5470,
      "node_id": "MDQ6VXNlcjU0NzA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Empact",
      "html_url": "https://github.com/Empact",
      "followers_url": "https://api.github.com/users/Empact/followers",
      "following_url": "https://api.github.com/users/Empact/following{/other_user}",
      "gists_url": "https://api.github.com/users/Empact/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Empact/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
      "organizations_url": "https://api.github.com/users/Empact/orgs",
      "repos_url": "https://api.github.com/users/Empact/repos",
      "events_url": "https://api.github.com/users/Empact/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Empact/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "2434ab5c2afd61aa0cf81f80b1b236ea52d1d20d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2434ab5c2afd61aa0cf81f80b1b236ea52d1d20d",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/2434ab5c2afd61aa0cf81f80b1b236ea52d1d20d"
      }
    ],
    "stats": {
      "total": 12,
      "additions": 0,
      "deletions": 12
    },
    "files": [
      {
        "sha": "f2987f2260546c067aaa7fe24acd4804ac4570b2",
        "filename": "contrib/devtools/copyright_header.py",
        "status": "modified",
        "additions": 0,
        "deletions": 12,
        "changes": 12,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/ad5e5a105e873b6cca277370312d3d31a3427d38/contrib/devtools/copyright_header.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/ad5e5a105e873b6cca277370312d3d31a3427d38/contrib/devtools/copyright_header.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/devtools/copyright_header.py?ref=ad5e5a105e873b6cca277370312d3d31a3427d38",
        "patch": "@@ -90,24 +90,12 @@ def compile_copyright_regex(copyright_style, year_style, name):\n EXPECTED_HOLDER_NAMES = [\n     \"Satoshi Nakamoto\\n\",\n     \"The Bitcoin Core developers\\n\",\n-    \"The Bitcoin Core developers \\n\",\n     \"Bitcoin Core Developers\\n\",\n-    \"the Bitcoin Core developers\\n\",\n-    \"The Bitcoin developers\\n\",\n-    \"The LevelDB Authors\\. All rights reserved\\.\\n\",\n     \"BitPay Inc\\.\\n\",\n-    \"BitPay, Inc\\.\\n\",\n     \"University of Illinois at Urbana-Champaign\\.\\n\",\n-    \"MarcoFalke\\n\",\n     \"Pieter Wuille\\n\",\n-    \"Pieter Wuille +\\*\\n\",\n-    \"Pieter Wuille, Gregory Maxwell +\\*\\n\",\n-    \"Pieter Wuille, Andrew Poelstra +\\*\\n\",\n-    \"Andrew Poelstra +\\*\\n\",\n     \"Wladimir J. van der Laan\\n\",\n     \"Jeff Garzik\\n\",\n-    \"Diederik Huys, Pieter Wuille +\\*\\n\",\n-    \"Thomas Daede, Cory Fields +\\*\\n\",\n     \"Jan-Klaas Kollhof\\n\",\n     \"Sam Rushing\\n\",\n     \"ArtForz -- public domain half-a-node\\n\","
      }
    ]
  }
]