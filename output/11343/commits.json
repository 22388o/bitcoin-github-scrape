[
  {
    "sha": "d83c28e1a8f0c7da6714a1fc16dd7e614af0ef73",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkODNjMjhlMWE4ZjBjN2RhNjcxNGExZmMxNmRkN2U2MTRhZjBlZjcz",
    "commit": {
      "author": {
        "name": "Isidoro Ghezzi",
        "email": "isidoro.ghezzi@icloud.com",
        "date": "2017-09-15T16:31:30Z"
      },
      "committer": {
        "name": "Isidoro Ghezzi",
        "email": "isidoro.ghezzi@icloud.com",
        "date": "2017-09-15T16:31:30Z"
      },
      "message": "added `-walletallowsymboliclink` (default false)\n\nWhen is set to 1, permits to use symbolic link as a wallet.",
      "tree": {
        "sha": "d6c03094375b3d7cc6c472bd8a02292676a9ecbd",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d6c03094375b3d7cc6c472bd8a02292676a9ecbd"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d83c28e1a8f0c7da6714a1fc16dd7e614af0ef73",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEBqFy6+0+b1lSMxmElx4feYC7PesFAlm8AZsACgkQlx4feYC7\nPeuMVg/+OT/pb0cXaNektcEG2SS0svkz2f5k7lWe7DnJ4JSGPrfcwniN9dtICUD9\niZjffsQoYwVTfv4DrEia64sBCqyJHTvzRVwMiLN8pYw0pVYRH1Lyfx2mpZ1cq0oZ\nb/mcgIcOIDmE0T/aBXw70Wgf0e1gQlC7qz/wPo3/TIauyV7BQQpRPpes/zSjpxEV\nwq3u4df4sIAdRUMAxPL3a5VPGyzRM9cE0MO8tAhplaZnZijPRSASubQ0QeYhRKG6\nwsXfBwAwgrSFYsWmUr9DW121Ley3jYf3nuSshaPO3UCMSuNmMvX0R2/uhwCFxzK2\nDQzp5KZvR/kFUHtm92Y5jPX+vq4mL//pU6CKF6tzwSe/lY9M0JU14iB5Yas70BMO\nseKeymfy/KVOYhejuFRqm/P1756JeUK2A0lm/LehLICiEXlbGX38Io+2RDWcVYDW\nimH3xum30QS6j/lpWsEe5p+H4D5AdRDU/O49Ma15pN9fZvgtmf/EOhWhIQ/qdhJx\nj74c/xZ2IO0/dtpHpMgYw7sRqZ5MX6abviJgs0Za5hLBSgCdyG5jfxnPcDOAAGnQ\nwMo6FrC3qPEyIO82VrrJBs+9Wb1XEN/S6fXACv0rvILlMntpItbggG5ApCnOwW+h\nOJ+ja43XTa4ecipgsQ415RTMMfEEG1qOGj18G4Y41V3ITz9XbgU=\n=Q/GM\n-----END PGP SIGNATURE-----\n-----BEGIN OPENTIMESTAMPS GIT TIMESTAMP-----\n\nAQD/8BBa4y9WHrDQLBA8cwcREXftCPEg2n8F44BvV6CNQ0aLabrdJMbi9hgkoFkS\nVESMKQe3vxoI8CBcVd0qiPnYu4NYLio34U+UvXP2eFTXPIMBKIWDy0FhaQjxBFm8\nAaHwCE3+UL6fK3S7AIPf4w0u+QyOLi1odHRwczovL2FsaWNlLmJ0Yy5jYWxlbmRh\nci5vcGVudGltZXN0YW1wcy5vcmf/8BBpN7eYQIOufgGJU/TZMcb/CPAgzxmHiV9g\no60+oNthHZ39HUJ6p3xdFUB+iWVq/PBn5KgI8QRZvAGh8AgmkgGiJca5FACD3+MN\nLvkMjiwraHR0cHM6Ly9ib2IuYnRjLmNhbGVuZGFyLm9wZW50aW1lc3RhbXBzLm9y\nZ/AQ/aTP2ROPZ9XLKEvq0x2a3gjxBFm8AaDwCHkvuqhCAn50AIPf4w0u+QyOKSho\ndHRwczovL2Zpbm5leS5jYWxlbmRhci5ldGVybml0eXdhbGwuY29t\n-----END OPENTIMESTAMPS GIT TIMESTAMP-----",
        "payload": "tree d6c03094375b3d7cc6c472bd8a02292676a9ecbd\nparent 46c8d23dad216d990564014f4c8000b79fd36f4e\nauthor Isidoro Ghezzi <isidoro.ghezzi@icloud.com> 1505493090 +0200\ncommitter Isidoro Ghezzi <isidoro.ghezzi@icloud.com> 1505493090 +0200\n\nadded `-walletallowsymboliclink` (default false)\n\nWhen is set to 1, permits to use symbolic link as a wallet.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d83c28e1a8f0c7da6714a1fc16dd7e614af0ef73",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/d83c28e1a8f0c7da6714a1fc16dd7e614af0ef73",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d83c28e1a8f0c7da6714a1fc16dd7e614af0ef73/comments",
    "author": {
      "login": "isghe",
      "id": 1006078,
      "node_id": "MDQ6VXNlcjEwMDYwNzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1006078?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/isghe",
      "html_url": "https://github.com/isghe",
      "followers_url": "https://api.github.com/users/isghe/followers",
      "following_url": "https://api.github.com/users/isghe/following{/other_user}",
      "gists_url": "https://api.github.com/users/isghe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/isghe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/isghe/subscriptions",
      "organizations_url": "https://api.github.com/users/isghe/orgs",
      "repos_url": "https://api.github.com/users/isghe/repos",
      "events_url": "https://api.github.com/users/isghe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/isghe/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "isghe",
      "id": 1006078,
      "node_id": "MDQ6VXNlcjEwMDYwNzg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1006078?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/isghe",
      "html_url": "https://github.com/isghe",
      "followers_url": "https://api.github.com/users/isghe/followers",
      "following_url": "https://api.github.com/users/isghe/following{/other_user}",
      "gists_url": "https://api.github.com/users/isghe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/isghe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/isghe/subscriptions",
      "organizations_url": "https://api.github.com/users/isghe/orgs",
      "repos_url": "https://api.github.com/users/isghe/repos",
      "events_url": "https://api.github.com/users/isghe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/isghe/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "46c8d23dad216d990564014f4c8000b79fd36f4e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/46c8d23dad216d990564014f4c8000b79fd36f4e",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/46c8d23dad216d990564014f4c8000b79fd36f4e"
      }
    ],
    "stats": {
      "total": 10,
      "additions": 9,
      "deletions": 1
    },
    "files": [
      {
        "sha": "4a8b836e0fd701d60597f36fcd3cf66697f2af38",
        "filename": "src/wallet/wallet.cpp",
        "status": "modified",
        "additions": 7,
        "deletions": 1,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d83c28e1a8f0c7da6714a1fc16dd7e614af0ef73/src/wallet/wallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d83c28e1a8f0c7da6714a1fc16dd7e614af0ef73/src/wallet/wallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.cpp?ref=d83c28e1a8f0c7da6714a1fc16dd7e614af0ef73",
        "patch": "@@ -494,6 +494,11 @@ void CWallet::Flush(bool shutdown)\n     dbw->Flush(shutdown);\n }\n \n+static bool allowSymbolicLink()\n+{\n+\treturn gArgs.GetBoolArg(\"-walletallowsymboliclink\", DEFAULT_WALLET_ALLOW_SYMBOLIC_LINK);\n+}\n+\n bool CWallet::Verify()\n {\n     if (gArgs.GetBoolArg(\"-disablewallet\", DEFAULT_DISABLE_WALLET))\n@@ -515,7 +520,7 @@ bool CWallet::Verify()\n \n         fs::path wallet_path = fs::absolute(walletFile, GetDataDir());\n \n-        if (fs::exists(wallet_path) && (!fs::is_regular_file(wallet_path) || fs::is_symlink(wallet_path))) {\n+        if (fs::exists(wallet_path) && (!fs::is_regular_file(wallet_path) || (fs::is_symlink(wallet_path) && !allowSymbolicLink()))) {\n             return InitError(strprintf(_(\"Error loading wallet %s. -wallet filename must be a regular file.\"), walletFile));\n         }\n \n@@ -3907,6 +3912,7 @@ std::string CWallet::GetWalletHelpString(bool showDebug)\n     strUsage += HelpMessageOpt(\"-txconfirmtarget=<n>\", strprintf(_(\"If paytxfee is not set, include enough fee so transactions begin confirmation on average within n blocks (default: %u)\"), DEFAULT_TX_CONFIRM_TARGET));\n     strUsage += HelpMessageOpt(\"-usehd\", _(\"Use hierarchical deterministic key generation (HD) after BIP32. Only has effect during wallet creation/first start\") + \" \" + strprintf(_(\"(default: %u)\"), DEFAULT_USE_HD_WALLET));\n     strUsage += HelpMessageOpt(\"-walletrbf\", strprintf(_(\"Send transactions with full-RBF opt-in enabled (default: %u)\"), DEFAULT_WALLET_RBF));\n+    strUsage += HelpMessageOpt(\"-walletallowsymboliclink\", strprintf(_(\"Allow symbolic link for wallet (default: %u)\"), DEFAULT_WALLET_ALLOW_SYMBOLIC_LINK));\n     strUsage += HelpMessageOpt(\"-upgradewallet\", _(\"Upgrade wallet to latest format on startup\"));\n     strUsage += HelpMessageOpt(\"-wallet=<file>\", _(\"Specify wallet file (within data directory)\") + \" \" + strprintf(_(\"(default: %s)\"), DEFAULT_WALLET_DAT));\n     strUsage += HelpMessageOpt(\"-walletbroadcast\", _(\"Make the wallet broadcast transactions\") + \" \" + strprintf(_(\"(default: %u)\"), DEFAULT_WALLETBROADCAST));"
      },
      {
        "sha": "60265a03c4534cb9f8c370070013731e2c2689c1",
        "filename": "src/wallet/wallet.h",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d83c28e1a8f0c7da6714a1fc16dd7e614af0ef73/src/wallet/wallet.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d83c28e1a8f0c7da6714a1fc16dd7e614af0ef73/src/wallet/wallet.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.h?ref=d83c28e1a8f0c7da6714a1fc16dd7e614af0ef73",
        "patch": "@@ -65,6 +65,8 @@ static const unsigned int DEFAULT_TX_CONFIRM_TARGET = 6;\n static const bool DEFAULT_WALLET_RBF = false;\n static const bool DEFAULT_WALLETBROADCAST = true;\n static const bool DEFAULT_DISABLE_WALLET = false;\n+//! -walletallowsymboliclink default\n+static const bool DEFAULT_WALLET_ALLOW_SYMBOLIC_LINK = false;\n //! if set, all keys will be derived by using BIP32\n static const bool DEFAULT_USE_HD_WALLET = true;\n "
      }
    ]
  }
]