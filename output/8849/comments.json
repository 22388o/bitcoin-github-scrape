[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/272163094",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8849#issuecomment-272163094",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8849",
    "id": 272163094,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI3MjE2MzA5NA==",
    "user": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?u=a0e0040aacd7d4f0787481e8ac30b494fa429e11&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-01-12T13:29:20Z",
    "updated_at": "2017-01-12T13:29:20Z",
    "author_association": "MEMBER",
    "body": "Closing this due to inactivity. @czzarr If this is something that you would still like to see merged, please rebase and feel free to reopen.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/272163094/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/81368638",
    "pull_request_review_id": 2354946,
    "id": 81368638,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDgxMzY4NjM4",
    "diff_hunk": "@@ -90,6 +90,18 @@ void TxToJSON(const CTransaction& tx, const uint256 hashBlock, UniValue& entry)\n                     txinwitness.push_back(HexStr(item.begin(), item.end()));\n                 }\n                 in.push_back(Pair(\"txinwitness\", txinwitness));\n+                // try to parse the last item as a pubkey\n+                // In version 0, there are two valid witness types: P2WPKH and P2WSH.\n+                // P2WPKH witnesses have two items on the witness stack, the second of which is a public key.\n+                // We test whether the last item on the witness stack is a valid public key, and if it isn't we try to parse it as a redeem script.\n+                // if someone constructed the redeem script to look like a pubkey, then he's insane\n+                CPubKey pubkey(tx.wit.vtxinwit[i].scriptWitness.stack.back().begin(), tx.wit.vtxinwit[i].scriptWitness.stack.back().end());\n+                if (!pubkey.IsFullyValid()) {\n+                  CScript redeemScript(tx.wit.vtxinwit[i].scriptWitness.stack.back().begin(), tx.wit.vtxinwit[i].scriptWitness.stack.back().end());\n+                  UniValue r(UniValue::VOBJ);\n+                  ScriptPubKeyToJSON(redeemScript, r, true);\n+                  in.push_back(Pair(\"redeemScript\", r));",
    "path": "src/rpc/rawtransaction.cpp",
    "position": null,
    "original_position": 14,
    "commit_id": "0793b62ef4cbbd0483a1224621961009a19c40c0",
    "original_commit_id": "5f1800466b575219d50b7af93d539d1aa04da17c",
    "user": {
      "login": "jl2012",
      "id": 8403418,
      "node_id": "MDQ6VXNlcjg0MDM0MTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8403418?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jl2012",
      "html_url": "https://github.com/jl2012",
      "followers_url": "https://api.github.com/users/jl2012/followers",
      "following_url": "https://api.github.com/users/jl2012/following{/other_user}",
      "gists_url": "https://api.github.com/users/jl2012/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jl2012/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jl2012/subscriptions",
      "organizations_url": "https://api.github.com/users/jl2012/orgs",
      "repos_url": "https://api.github.com/users/jl2012/repos",
      "events_url": "https://api.github.com/users/jl2012/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jl2012/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This is called `witnessScript` in BIP141\n",
    "created_at": "2016-09-30T16:07:18Z",
    "updated_at": "2016-09-30T16:45:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8849#discussion_r81368638",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8849",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/81368638"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8849#discussion_r81368638"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8849"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/81368638/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 103,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/81375175",
    "pull_request_review_id": 2361050,
    "id": 81375175,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDgxMzc1MTc1",
    "diff_hunk": "@@ -90,6 +90,18 @@ void TxToJSON(const CTransaction& tx, const uint256 hashBlock, UniValue& entry)\n                     txinwitness.push_back(HexStr(item.begin(), item.end()));\n                 }\n                 in.push_back(Pair(\"txinwitness\", txinwitness));\n+                // try to parse the last item as a pubkey\n+                // In version 0, there are two valid witness types: P2WPKH and P2WSH.\n+                // P2WPKH witnesses have two items on the witness stack, the second of which is a public key.\n+                // We test whether the last item on the witness stack is a valid public key, and if it isn't we try to parse it as a redeem script.\n+                // if someone constructed the redeem script to look like a pubkey, then he's insane\n+                CPubKey pubkey(tx.wit.vtxinwit[i].scriptWitness.stack.back().begin(), tx.wit.vtxinwit[i].scriptWitness.stack.back().end());\n+                if (!pubkey.IsFullyValid()) {\n+                  CScript redeemScript(tx.wit.vtxinwit[i].scriptWitness.stack.back().begin(), tx.wit.vtxinwit[i].scriptWitness.stack.back().end());\n+                  UniValue r(UniValue::VOBJ);\n+                  ScriptPubKeyToJSON(redeemScript, r, true);\n+                  in.push_back(Pair(\"redeemScript\", r));",
    "path": "src/rpc/rawtransaction.cpp",
    "position": null,
    "original_position": 14,
    "commit_id": "0793b62ef4cbbd0483a1224621961009a19c40c0",
    "original_commit_id": "5f1800466b575219d50b7af93d539d1aa04da17c",
    "user": {
      "login": "czzarr",
      "id": 855082,
      "node_id": "MDQ6VXNlcjg1NTA4Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/855082?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/czzarr",
      "html_url": "https://github.com/czzarr",
      "followers_url": "https://api.github.com/users/czzarr/followers",
      "following_url": "https://api.github.com/users/czzarr/following{/other_user}",
      "gists_url": "https://api.github.com/users/czzarr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/czzarr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/czzarr/subscriptions",
      "organizations_url": "https://api.github.com/users/czzarr/orgs",
      "repos_url": "https://api.github.com/users/czzarr/repos",
      "events_url": "https://api.github.com/users/czzarr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/czzarr/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I renamed the variables.\n",
    "created_at": "2016-09-30T16:46:02Z",
    "updated_at": "2016-09-30T16:46:02Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8849#discussion_r81375175",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8849",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/81375175"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8849#discussion_r81375175"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8849"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/81375175/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 103,
    "side": "RIGHT",
    "in_reply_to_id": 81368638
  }
]