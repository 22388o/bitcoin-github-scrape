[
  {
    "sha": "5c4a35f4ea2b2f5eccedd2390828bd0852066d3a",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo1YzRhMzVmNGVhMmIyZjVlY2NlZGQyMzkwODI4YmQwODUyMDY2ZDNh",
    "commit": {
      "author": {
        "name": "Raw Ol' Dirty",
        "email": "rawodb@users.noreply.github.com",
        "date": "2017-11-29T15:36:01Z"
      },
      "committer": {
        "name": "Raw Ol' Dirty",
        "email": "rawodb@users.noreply.github.com",
        "date": "2017-11-29T15:36:01Z"
      },
      "message": "Introduce start up parameters for SegWit addresses, change addresses and P2SH wrap",
      "tree": {
        "sha": "a206865056819a71e736cd4dde0569a4a6946ff2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a206865056819a71e736cd4dde0569a4a6946ff2"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5c4a35f4ea2b2f5eccedd2390828bd0852066d3a",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5c4a35f4ea2b2f5eccedd2390828bd0852066d3a",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/5c4a35f4ea2b2f5eccedd2390828bd0852066d3a",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5c4a35f4ea2b2f5eccedd2390828bd0852066d3a/comments",
    "author": {
      "login": "rawodb",
      "id": 20778324,
      "node_id": "MDQ6VXNlcjIwNzc4MzI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/20778324?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rawodb",
      "html_url": "https://github.com/rawodb",
      "followers_url": "https://api.github.com/users/rawodb/followers",
      "following_url": "https://api.github.com/users/rawodb/following{/other_user}",
      "gists_url": "https://api.github.com/users/rawodb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rawodb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rawodb/subscriptions",
      "organizations_url": "https://api.github.com/users/rawodb/orgs",
      "repos_url": "https://api.github.com/users/rawodb/repos",
      "events_url": "https://api.github.com/users/rawodb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rawodb/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "rawodb",
      "id": 20778324,
      "node_id": "MDQ6VXNlcjIwNzc4MzI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/20778324?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rawodb",
      "html_url": "https://github.com/rawodb",
      "followers_url": "https://api.github.com/users/rawodb/followers",
      "following_url": "https://api.github.com/users/rawodb/following{/other_user}",
      "gists_url": "https://api.github.com/users/rawodb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rawodb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rawodb/subscriptions",
      "organizations_url": "https://api.github.com/users/rawodb/orgs",
      "repos_url": "https://api.github.com/users/rawodb/repos",
      "events_url": "https://api.github.com/users/rawodb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rawodb/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "32c9b570fceaad76536a2c881b4dc1d961d9b306",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/32c9b570fceaad76536a2c881b4dc1d961d9b306",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/32c9b570fceaad76536a2c881b4dc1d961d9b306"
      }
    ],
    "stats": {
      "total": 18,
      "additions": 18,
      "deletions": 0
    },
    "files": [
      {
        "sha": "873d976b81fb3d96aad34ff20083f90b2c56339e",
        "filename": "src/wallet/init.cpp",
        "status": "modified",
        "additions": 6,
        "deletions": 0,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5c4a35f4ea2b2f5eccedd2390828bd0852066d3a/src/wallet/init.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5c4a35f4ea2b2f5eccedd2390828bd0852066d3a/src/wallet/init.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/init.cpp?ref=5c4a35f4ea2b2f5eccedd2390828bd0852066d3a",
        "patch": "@@ -30,6 +30,9 @@ std::string GetWalletHelpString(bool showDebug)\n     strUsage += HelpMessageOpt(\"-rescan\", _(\"Rescan the block chain for missing wallet transactions on startup\"));\n     strUsage += HelpMessageOpt(\"-salvagewallet\", _(\"Attempt to recover private keys from a corrupt wallet on startup\"));\n     strUsage += HelpMessageOpt(\"-spendzeroconfchange\", strprintf(_(\"Spend unconfirmed change when sending transactions (default: %u)\"), DEFAULT_SPEND_ZEROCONF_CHANGE));\n+    strUsage += HelpMessageOpt(\"-segwitaddresses\", strprintf(_(\"Return SegWit addresses in RPC requests and UI (default: %u)\"), DEFAULT_GET_SEGWIT_ADDRESSES));\n+    strUsage += HelpMessageOpt(\"-segwitchangeaddresses\", strprintf(_(\"Create transactions with SegWit change addresses (default: %u)\"), DEFAULT_GET_SEGWIT_CHANGE_ADDRESSES));\n+    strUsage += HelpMessageOpt(\"-segwitp2shaddresses\", strprintf(_(\"Wrap SegWit addresses in P2SH (default: %u)\"), DEFAULT_GET_SEGWIT_P2SH_ADDRESSES));\n     strUsage += HelpMessageOpt(\"-txconfirmtarget=<n>\", strprintf(_(\"If paytxfee is not set, include enough fee so transactions begin confirmation on average within n blocks (default: %u)\"), DEFAULT_TX_CONFIRM_TARGET));\n     strUsage += HelpMessageOpt(\"-walletrbf\", strprintf(_(\"Send transactions with full-RBF opt-in enabled (default: %u)\"), DEFAULT_WALLET_RBF));\n     strUsage += HelpMessageOpt(\"-upgradewallet\", _(\"Upgrade wallet to latest format on startup\"));\n@@ -173,6 +176,9 @@ bool WalletParameterInteraction()\n     }\n     nTxConfirmTarget = gArgs.GetArg(\"-txconfirmtarget\", DEFAULT_TX_CONFIRM_TARGET);\n     bSpendZeroConfChange = gArgs.GetBoolArg(\"-spendzeroconfchange\", DEFAULT_SPEND_ZEROCONF_CHANGE);\n+    bGetSegwitAddresses = gArgs.GetBoolArg(\"-segwitaddresses\", DEFAULT_GET_SEGWIT_ADDRESSES);\n+    bGetSegwitChangeAddresses = gArgs.GetBoolArg(\"-segwitchangeaddresses\", DEFAULT_GET_SEGWIT_CHANGE_ADDRESSES);\n+    bGetSegwitP2shAddresses = gArgs.GetBoolArg(\"-segwitp2shaddresses\", DEFAULT_GET_SEGWIT_P2SH_ADDRESSES);\n     fWalletRbf = gArgs.GetBoolArg(\"-walletrbf\", DEFAULT_WALLET_RBF);\n \n     return true;"
      },
      {
        "sha": "c08bd1444b98867402842ea25acb50c66979839e",
        "filename": "src/wallet/wallet.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5c4a35f4ea2b2f5eccedd2390828bd0852066d3a/src/wallet/wallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5c4a35f4ea2b2f5eccedd2390828bd0852066d3a/src/wallet/wallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.cpp?ref=5c4a35f4ea2b2f5eccedd2390828bd0852066d3a",
        "patch": "@@ -43,6 +43,9 @@ std::vector<CWalletRef> vpwallets;\n CFeeRate payTxFee(DEFAULT_TRANSACTION_FEE);\n unsigned int nTxConfirmTarget = DEFAULT_TX_CONFIRM_TARGET;\n bool bSpendZeroConfChange = DEFAULT_SPEND_ZEROCONF_CHANGE;\n+bool bGetSegwitAddresses = DEFAULT_GET_SEGWIT_ADDRESSES;\n+bool bGetSegwitChangeAddresses = DEFAULT_GET_SEGWIT_CHANGE_ADDRESSES;\n+bool bGetSegwitP2shAddresses = DEFAULT_GET_SEGWIT_P2SH_ADDRESSES;\n bool fWalletRbf = DEFAULT_WALLET_RBF;\n \n const char * DEFAULT_WALLET_DAT = \"wallet.dat\";"
      },
      {
        "sha": "d93d7e4ed95bf6570c3dfaca7d04da1c76fd9e91",
        "filename": "src/wallet/wallet.h",
        "status": "modified",
        "additions": 9,
        "deletions": 0,
        "changes": 9,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5c4a35f4ea2b2f5eccedd2390828bd0852066d3a/src/wallet/wallet.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5c4a35f4ea2b2f5eccedd2390828bd0852066d3a/src/wallet/wallet.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.h?ref=5c4a35f4ea2b2f5eccedd2390828bd0852066d3a",
        "patch": "@@ -38,6 +38,9 @@ extern std::vector<CWalletRef> vpwallets;\n extern CFeeRate payTxFee;\n extern unsigned int nTxConfirmTarget;\n extern bool bSpendZeroConfChange;\n+extern bool bGetSegwitAddresses;\n+extern bool bGetSegwitChangeAddresses;\n+extern bool bGetSegwitP2shAddresses;\n extern bool fWalletRbf;\n \n static const unsigned int DEFAULT_KEYPOOL_SIZE = 1000;\n@@ -57,6 +60,12 @@ static const CAmount MIN_CHANGE = CENT;\n static const CAmount MIN_FINAL_CHANGE = MIN_CHANGE/2;\n //! Default for -spendzeroconfchange\n static const bool DEFAULT_SPEND_ZEROCONF_CHANGE = true;\n+//! Default for -segwitaddresses\n+static const bool DEFAULT_GET_SEGWIT_ADDRESSES = false;\n+//! Default for -segwitchangeaddresses\n+static const bool DEFAULT_GET_SEGWIT_CHANGE_ADDRESSES = false;\n+//! Default for -segwitp2shddresses\n+static const bool DEFAULT_GET_SEGWIT_P2SH_ADDRESSES = false;\n //! Default for -walletrejectlongchains\n static const bool DEFAULT_WALLET_REJECT_LONG_CHAINS = false;\n //! -txconfirmtarget default"
      }
    ]
  },
  {
    "sha": "757a06b8541bf1fe3df003b398bf9bc31b19aab4",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo3NTdhMDZiODU0MWJmMWZlM2RmMDAzYjM5OGJmOWJjMzFiMTlhYWI0",
    "commit": {
      "author": {
        "name": "Raw Ol' Dirty",
        "email": "rawodb@users.noreply.github.com",
        "date": "2017-11-29T15:37:36Z"
      },
      "committer": {
        "name": "Raw Ol' Dirty",
        "email": "rawodb@users.noreply.github.com",
        "date": "2017-11-29T15:37:36Z"
      },
      "message": "Support SegWit addresses in RPC command \"getnewaddress\"",
      "tree": {
        "sha": "6aeb91e5acf84c7d3156bacbe3a19f05887941db",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6aeb91e5acf84c7d3156bacbe3a19f05887941db"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/757a06b8541bf1fe3df003b398bf9bc31b19aab4",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/757a06b8541bf1fe3df003b398bf9bc31b19aab4",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/757a06b8541bf1fe3df003b398bf9bc31b19aab4",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/757a06b8541bf1fe3df003b398bf9bc31b19aab4/comments",
    "author": {
      "login": "rawodb",
      "id": 20778324,
      "node_id": "MDQ6VXNlcjIwNzc4MzI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/20778324?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rawodb",
      "html_url": "https://github.com/rawodb",
      "followers_url": "https://api.github.com/users/rawodb/followers",
      "following_url": "https://api.github.com/users/rawodb/following{/other_user}",
      "gists_url": "https://api.github.com/users/rawodb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rawodb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rawodb/subscriptions",
      "organizations_url": "https://api.github.com/users/rawodb/orgs",
      "repos_url": "https://api.github.com/users/rawodb/repos",
      "events_url": "https://api.github.com/users/rawodb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rawodb/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "rawodb",
      "id": 20778324,
      "node_id": "MDQ6VXNlcjIwNzc4MzI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/20778324?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rawodb",
      "html_url": "https://github.com/rawodb",
      "followers_url": "https://api.github.com/users/rawodb/followers",
      "following_url": "https://api.github.com/users/rawodb/following{/other_user}",
      "gists_url": "https://api.github.com/users/rawodb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rawodb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rawodb/subscriptions",
      "organizations_url": "https://api.github.com/users/rawodb/orgs",
      "repos_url": "https://api.github.com/users/rawodb/repos",
      "events_url": "https://api.github.com/users/rawodb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rawodb/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "5c4a35f4ea2b2f5eccedd2390828bd0852066d3a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5c4a35f4ea2b2f5eccedd2390828bd0852066d3a",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/5c4a35f4ea2b2f5eccedd2390828bd0852066d3a"
      }
    ],
    "stats": {
      "total": 13,
      "additions": 13,
      "deletions": 0
    },
    "files": [
      {
        "sha": "23c768a270fe4007e5accb1b7402927951132eaf",
        "filename": "src/wallet/rpcwallet.cpp",
        "status": "modified",
        "additions": 13,
        "deletions": 0,
        "changes": 13,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/757a06b8541bf1fe3df003b398bf9bc31b19aab4/src/wallet/rpcwallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/757a06b8541bf1fe3df003b398bf9bc31b19aab4/src/wallet/rpcwallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/rpcwallet.cpp?ref=757a06b8541bf1fe3df003b398bf9bc31b19aab4",
        "patch": "@@ -169,6 +169,19 @@ UniValue getnewaddress(const JSONRPCRequest& request)\n     }\n     CKeyID keyID = newKey.GetID();\n \n+    if (::bGetSegwitAddresses) {\n+        CScript basescript = GetScriptForDestination(keyID);\n+        CScript witscript = GetScriptForWitness(basescript);\n+        CTxDestination result;\n+        ExtractDestination(witscript,result);\n+        pwallet->AddCScript(witscript);\n+        if (::bGetSegwitP2shAddresses) {\n+            result = CScriptID(witscript);\n+        }\n+        pwallet->SetAddressBook(result, strAccount, \"receive\");\n+        return EncodeDestination(result);\n+    }\n+    \n     pwallet->SetAddressBook(keyID, strAccount, \"receive\");\n \n     return EncodeDestination(keyID);"
      }
    ]
  },
  {
    "sha": "c8b329badff468f9714115fc51efe20ba0745772",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjOGIzMjliYWRmZjQ2OGY5NzE0MTE1ZmM1MWVmZTIwYmEwNzQ1Nzcy",
    "commit": {
      "author": {
        "name": "Raw Ol' Dirty",
        "email": "rawodb@users.noreply.github.com",
        "date": "2017-11-29T15:38:41Z"
      },
      "committer": {
        "name": "Raw Ol' Dirty",
        "email": "rawodb@users.noreply.github.com",
        "date": "2017-11-29T15:38:41Z"
      },
      "message": "Support SegWit addresses in RPC command \"getaccountaddress\" / Force new accounts when used",
      "tree": {
        "sha": "8b3e4a7755bef54f99dd6e6197473d42326b7045",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/8b3e4a7755bef54f99dd6e6197473d42326b7045"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c8b329badff468f9714115fc51efe20ba0745772",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c8b329badff468f9714115fc51efe20ba0745772",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/c8b329badff468f9714115fc51efe20ba0745772",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c8b329badff468f9714115fc51efe20ba0745772/comments",
    "author": {
      "login": "rawodb",
      "id": 20778324,
      "node_id": "MDQ6VXNlcjIwNzc4MzI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/20778324?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rawodb",
      "html_url": "https://github.com/rawodb",
      "followers_url": "https://api.github.com/users/rawodb/followers",
      "following_url": "https://api.github.com/users/rawodb/following{/other_user}",
      "gists_url": "https://api.github.com/users/rawodb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rawodb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rawodb/subscriptions",
      "organizations_url": "https://api.github.com/users/rawodb/orgs",
      "repos_url": "https://api.github.com/users/rawodb/repos",
      "events_url": "https://api.github.com/users/rawodb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rawodb/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "rawodb",
      "id": 20778324,
      "node_id": "MDQ6VXNlcjIwNzc4MzI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/20778324?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rawodb",
      "html_url": "https://github.com/rawodb",
      "followers_url": "https://api.github.com/users/rawodb/followers",
      "following_url": "https://api.github.com/users/rawodb/following{/other_user}",
      "gists_url": "https://api.github.com/users/rawodb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rawodb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rawodb/subscriptions",
      "organizations_url": "https://api.github.com/users/rawodb/orgs",
      "repos_url": "https://api.github.com/users/rawodb/repos",
      "events_url": "https://api.github.com/users/rawodb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rawodb/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "757a06b8541bf1fe3df003b398bf9bc31b19aab4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/757a06b8541bf1fe3df003b398bf9bc31b19aab4",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/757a06b8541bf1fe3df003b398bf9bc31b19aab4"
      }
    ],
    "stats": {
      "total": 18,
      "additions": 17,
      "deletions": 1
    },
    "files": [
      {
        "sha": "e0843a3392264fb137c1626602f08781c934ca55",
        "filename": "src/wallet/rpcwallet.cpp",
        "status": "modified",
        "additions": 14,
        "deletions": 0,
        "changes": 14,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c8b329badff468f9714115fc51efe20ba0745772/src/wallet/rpcwallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c8b329badff468f9714115fc51efe20ba0745772/src/wallet/rpcwallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/rpcwallet.cpp?ref=c8b329badff468f9714115fc51efe20ba0745772",
        "patch": "@@ -227,6 +227,20 @@ UniValue getaccountaddress(const JSONRPCRequest& request)\n \n     UniValue ret(UniValue::VSTR);\n \n+    if (::bGetSegwitAddresses) {\n+        CTxDestination keyID = GetAccountAddress(pwallet, strAccount);\n+        CScript basescript = GetScriptForDestination(keyID);\n+        CScript witscript = GetScriptForWitness(basescript);\n+        CTxDestination result;\n+        ExtractDestination(witscript,result);\n+        \n+        pwallet->AddCScript(witscript);\n+        if (::bGetSegwitP2shAddresses) {\n+            result = CScriptID(witscript);\n+        }\n+        pwallet->SetAddressBook(result, strAccount, \"receive\");\n+        return EncodeDestination(result);\n+    }\n     ret = EncodeDestination(GetAccountAddress(pwallet, strAccount));\n     return ret;\n }"
      },
      {
        "sha": "1c7124ba8311eaa356814fb39786d69174138359",
        "filename": "src/wallet/wallet.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 1,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c8b329badff468f9714115fc51efe20ba0745772/src/wallet/wallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c8b329badff468f9714115fc51efe20ba0745772/src/wallet/wallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.cpp?ref=c8b329badff468f9714115fc51efe20ba0745772",
        "patch": "@@ -831,11 +831,13 @@ bool CWallet::GetAccountPubkey(CPubKey &pubKey, std::string strAccount, bool bFo\n         else {\n             // Check if the current key has been used\n             CScript scriptPubKey = GetScriptForDestination(account.vchPubKey.GetID());\n+            CScript scriptWitness = GetScriptForWitness(scriptPubKey);\n+            CScript scriptWitnessP2sh = GetScriptForDestination(scriptWitness);\n             for (std::map<uint256, CWalletTx>::iterator it = mapWallet.begin();\n                  it != mapWallet.end() && account.vchPubKey.IsValid();\n                  ++it)\n                 for (const CTxOut& txout : (*it).second.tx->vout)\n-                    if (txout.scriptPubKey == scriptPubKey) {\n+                    if (txout.scriptPubKey == scriptPubKey || txout.scriptPubKey == scriptWitness || txout.scriptPubKey == scriptWitnessP2sh) {\n                         bForceNew = true;\n                         break;\n                     }"
      }
    ]
  },
  {
    "sha": "666244d8cda124c6130de86d6b05667a27ab22e2",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo2NjYyNDRkOGNkYTEyNGM2MTMwZGU4NmQ2YjA1NjY3YTI3YWIyMmUy",
    "commit": {
      "author": {
        "name": "Raw Ol' Dirty",
        "email": "rawodb@users.noreply.github.com",
        "date": "2017-11-29T15:39:01Z"
      },
      "committer": {
        "name": "Raw Ol' Dirty",
        "email": "rawodb@users.noreply.github.com",
        "date": "2017-11-29T15:39:01Z"
      },
      "message": "Support SegWit addresses in RPC command \"getrawchangeaddress\"",
      "tree": {
        "sha": "8023cd3ee38cf37d62f3025db89e8a13b6d8be44",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/8023cd3ee38cf37d62f3025db89e8a13b6d8be44"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/666244d8cda124c6130de86d6b05667a27ab22e2",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/666244d8cda124c6130de86d6b05667a27ab22e2",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/666244d8cda124c6130de86d6b05667a27ab22e2",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/666244d8cda124c6130de86d6b05667a27ab22e2/comments",
    "author": {
      "login": "rawodb",
      "id": 20778324,
      "node_id": "MDQ6VXNlcjIwNzc4MzI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/20778324?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rawodb",
      "html_url": "https://github.com/rawodb",
      "followers_url": "https://api.github.com/users/rawodb/followers",
      "following_url": "https://api.github.com/users/rawodb/following{/other_user}",
      "gists_url": "https://api.github.com/users/rawodb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rawodb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rawodb/subscriptions",
      "organizations_url": "https://api.github.com/users/rawodb/orgs",
      "repos_url": "https://api.github.com/users/rawodb/repos",
      "events_url": "https://api.github.com/users/rawodb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rawodb/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "rawodb",
      "id": 20778324,
      "node_id": "MDQ6VXNlcjIwNzc4MzI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/20778324?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rawodb",
      "html_url": "https://github.com/rawodb",
      "followers_url": "https://api.github.com/users/rawodb/followers",
      "following_url": "https://api.github.com/users/rawodb/following{/other_user}",
      "gists_url": "https://api.github.com/users/rawodb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rawodb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rawodb/subscriptions",
      "organizations_url": "https://api.github.com/users/rawodb/orgs",
      "repos_url": "https://api.github.com/users/rawodb/repos",
      "events_url": "https://api.github.com/users/rawodb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rawodb/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "c8b329badff468f9714115fc51efe20ba0745772",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c8b329badff468f9714115fc51efe20ba0745772",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/c8b329badff468f9714115fc51efe20ba0745772"
      }
    ],
    "stats": {
      "total": 14,
      "additions": 14,
      "deletions": 0
    },
    "files": [
      {
        "sha": "0fd904fdba7ccf0208f6ce591d1a0bd76241a81b",
        "filename": "src/wallet/rpcwallet.cpp",
        "status": "modified",
        "additions": 14,
        "deletions": 0,
        "changes": 14,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/666244d8cda124c6130de86d6b05667a27ab22e2/src/wallet/rpcwallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/666244d8cda124c6130de86d6b05667a27ab22e2/src/wallet/rpcwallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/rpcwallet.cpp?ref=666244d8cda124c6130de86d6b05667a27ab22e2",
        "patch": "@@ -280,6 +280,20 @@ UniValue getrawchangeaddress(const JSONRPCRequest& request)\n \n     CKeyID keyID = vchPubKey.GetID();\n \n+    if (::bGetSegwitAddresses) {\n+        CScript basescript = GetScriptForDestination(keyID);\n+        CScript witscript = GetScriptForWitness(basescript);\n+        CTxDestination result;\n+        ExtractDestination(witscript,result);\n+        \n+        pwallet->AddCScript(witscript);\n+        if (::bGetSegwitP2shAddresses) {\n+            result = CScriptID(witscript);\n+        }\n+        //pwallet->SetAddressBook(result, strAccount, \"receive\");\n+        return EncodeDestination(result);\n+    }\n+\n     return EncodeDestination(keyID);\n }\n "
      }
    ]
  },
  {
    "sha": "975391ef444f5bf5cd6c0e2d2df35dd1b9e7c1f9",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo5NzUzOTFlZjQ0NGY1YmY1Y2Q2YzBlMmQyZGYzNWRkMWI5ZTdjMWY5",
    "commit": {
      "author": {
        "name": "Raw Ol' Dirty",
        "email": "rawodb@users.noreply.github.com",
        "date": "2017-11-29T15:39:49Z"
      },
      "committer": {
        "name": "Raw Ol' Dirty",
        "email": "rawodb@users.noreply.github.com",
        "date": "2017-11-29T16:11:51Z"
      },
      "message": "Support generating SegWit addresses in Request Payment QT window",
      "tree": {
        "sha": "deeab8d2d475500990c82c222e3d7c4d116bc430",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/deeab8d2d475500990c82c222e3d7c4d116bc430"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/975391ef444f5bf5cd6c0e2d2df35dd1b9e7c1f9",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/975391ef444f5bf5cd6c0e2d2df35dd1b9e7c1f9",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/975391ef444f5bf5cd6c0e2d2df35dd1b9e7c1f9",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/975391ef444f5bf5cd6c0e2d2df35dd1b9e7c1f9/comments",
    "author": {
      "login": "rawodb",
      "id": 20778324,
      "node_id": "MDQ6VXNlcjIwNzc4MzI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/20778324?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rawodb",
      "html_url": "https://github.com/rawodb",
      "followers_url": "https://api.github.com/users/rawodb/followers",
      "following_url": "https://api.github.com/users/rawodb/following{/other_user}",
      "gists_url": "https://api.github.com/users/rawodb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rawodb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rawodb/subscriptions",
      "organizations_url": "https://api.github.com/users/rawodb/orgs",
      "repos_url": "https://api.github.com/users/rawodb/repos",
      "events_url": "https://api.github.com/users/rawodb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rawodb/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "rawodb",
      "id": 20778324,
      "node_id": "MDQ6VXNlcjIwNzc4MzI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/20778324?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rawodb",
      "html_url": "https://github.com/rawodb",
      "followers_url": "https://api.github.com/users/rawodb/followers",
      "following_url": "https://api.github.com/users/rawodb/following{/other_user}",
      "gists_url": "https://api.github.com/users/rawodb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rawodb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rawodb/subscriptions",
      "organizations_url": "https://api.github.com/users/rawodb/orgs",
      "repos_url": "https://api.github.com/users/rawodb/repos",
      "events_url": "https://api.github.com/users/rawodb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rawodb/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "666244d8cda124c6130de86d6b05667a27ab22e2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/666244d8cda124c6130de86d6b05667a27ab22e2",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/666244d8cda124c6130de86d6b05667a27ab22e2"
      }
    ],
    "stats": {
      "total": 15,
      "additions": 14,
      "deletions": 1
    },
    "files": [
      {
        "sha": "35acfd6697429e216786ff2317b16f9080397b81",
        "filename": "src/qt/addresstablemodel.cpp",
        "status": "modified",
        "additions": 14,
        "deletions": 1,
        "changes": 15,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/975391ef444f5bf5cd6c0e2d2df35dd1b9e7c1f9/src/qt/addresstablemodel.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/975391ef444f5bf5cd6c0e2d2df35dd1b9e7c1f9/src/qt/addresstablemodel.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/addresstablemodel.cpp?ref=975391ef444f5bf5cd6c0e2d2df35dd1b9e7c1f9",
        "patch": "@@ -384,7 +384,20 @@ QString AddressTableModel::addRow(const QString &type, const QString &label, con\n                 return QString();\n             }\n         }\n-        strAddress = EncodeDestination(newKey.GetID());\n+        if (::bGetSegwitAddresses) {\n+            CScript basescript = GetScriptForDestination(newKey.GetID());\n+            CScript witscript = GetScriptForWitness(basescript);\n+            CTxDestination result;\n+            ExtractDestination(witscript,result);\n+            wallet->AddCScript(witscript);\n+            if (::bGetSegwitP2shAddresses) {\n+                result = CScriptID(witscript);\n+            }\n+            //pwallet->SetAddressBook(result, strAccount, \"receive\");\n+            strAddress = EncodeDestination(result);\n+        } else {\n+            strAddress = EncodeDestination(newKey.GetID());\n+        }\n     }\n     else\n     {"
      }
    ]
  },
  {
    "sha": "b4a475d2deed57fcaa3dc7d76e5446eb7f729aa0",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiNGE0NzVkMmRlZWQ1N2ZjYWEzZGM3ZDc2ZTU0NDZlYjdmNzI5YWEw",
    "commit": {
      "author": {
        "name": "Raw Ol' Dirty",
        "email": "rawodb@users.noreply.github.com",
        "date": "2017-11-29T15:40:19Z"
      },
      "committer": {
        "name": "Raw Ol' Dirty",
        "email": "rawodb@users.noreply.github.com",
        "date": "2017-11-29T16:11:51Z"
      },
      "message": "Support creating transactions with SegWit change addresses",
      "tree": {
        "sha": "3d2060332cffa82d55451f19bbc292bbd0ab16e4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3d2060332cffa82d55451f19bbc292bbd0ab16e4"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b4a475d2deed57fcaa3dc7d76e5446eb7f729aa0",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b4a475d2deed57fcaa3dc7d76e5446eb7f729aa0",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/b4a475d2deed57fcaa3dc7d76e5446eb7f729aa0",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b4a475d2deed57fcaa3dc7d76e5446eb7f729aa0/comments",
    "author": {
      "login": "rawodb",
      "id": 20778324,
      "node_id": "MDQ6VXNlcjIwNzc4MzI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/20778324?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rawodb",
      "html_url": "https://github.com/rawodb",
      "followers_url": "https://api.github.com/users/rawodb/followers",
      "following_url": "https://api.github.com/users/rawodb/following{/other_user}",
      "gists_url": "https://api.github.com/users/rawodb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rawodb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rawodb/subscriptions",
      "organizations_url": "https://api.github.com/users/rawodb/orgs",
      "repos_url": "https://api.github.com/users/rawodb/repos",
      "events_url": "https://api.github.com/users/rawodb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rawodb/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "rawodb",
      "id": 20778324,
      "node_id": "MDQ6VXNlcjIwNzc4MzI0",
      "avatar_url": "https://avatars.githubusercontent.com/u/20778324?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rawodb",
      "html_url": "https://github.com/rawodb",
      "followers_url": "https://api.github.com/users/rawodb/followers",
      "following_url": "https://api.github.com/users/rawodb/following{/other_user}",
      "gists_url": "https://api.github.com/users/rawodb/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rawodb/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rawodb/subscriptions",
      "organizations_url": "https://api.github.com/users/rawodb/orgs",
      "repos_url": "https://api.github.com/users/rawodb/repos",
      "events_url": "https://api.github.com/users/rawodb/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rawodb/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "975391ef444f5bf5cd6c0e2d2df35dd1b9e7c1f9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/975391ef444f5bf5cd6c0e2d2df35dd1b9e7c1f9",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/975391ef444f5bf5cd6c0e2d2df35dd1b9e7c1f9"
      }
    ],
    "stats": {
      "total": 8,
      "additions": 8,
      "deletions": 0
    },
    "files": [
      {
        "sha": "167d58d552f6031d0714e62e6eda8395ed0b3019",
        "filename": "src/wallet/wallet.cpp",
        "status": "modified",
        "additions": 8,
        "deletions": 0,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b4a475d2deed57fcaa3dc7d76e5446eb7f729aa0/src/wallet/wallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b4a475d2deed57fcaa3dc7d76e5446eb7f729aa0/src/wallet/wallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.cpp?ref=b4a475d2deed57fcaa3dc7d76e5446eb7f729aa0",
        "patch": "@@ -2742,6 +2742,14 @@ bool CWallet::CreateTransaction(const std::vector<CRecipient>& vecSend, CWalletT\n                 }\n \n                 scriptChange = GetScriptForDestination(vchPubKey.GetID());\n+                if (::bGetSegwitChangeAddresses) {\n+                    CScript witnessScript = GetScriptForWitness(scriptChange);\n+                    this->AddCScript(witnessScript);\n+                    scriptChange = witnessScript;\n+                    if (::bGetSegwitP2shAddresses) {\n+                        scriptChange = GetScriptForDestination(scriptChange);\n+                    }\n+                }\n             }\n             CTxOut change_prototype_txout(0, scriptChange);\n             size_t change_prototype_size = GetSerializeSize(change_prototype_txout, SER_DISK, 0);"
      }
    ]
  }
]