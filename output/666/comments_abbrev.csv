laanwj,2011-11-26T06:55:55Z,"Improves security AND makes the code more readable, I like this.\n\nACK.\n",https://github.com/bitcoin/bitcoin/pull/666#issuecomment-2880284,2880284,
laanwj,2011-11-26T07:43:19Z,"Using ::c_cstr at API boundaries does have the drawback that '\0' characters are not allowed -- the canonical form of converting between string types is to use data() and size(), or .begin()/.end(). Then again, I don't think you can enter those in form fields anyway :)\n",https://github.com/bitcoin/bitcoin/pull/666#issuecomment-2880421,2880421,
TheBlueMatt,2011-11-26T19:27:51Z,"Though it does make some code a bit easier to read, it is no more secure (in fact, with the additional conversions, one could argue its less secure, though not really).  Anyway, meh.\n",https://github.com/bitcoin/bitcoin/pull/666#issuecomment-2883409,2883409,
laanwj,2011-11-26T21:27:25Z,Less secure? How?\n,https://github.com/bitcoin/bitcoin/pull/666#issuecomment-2884023,2884023,
TheBlueMatt,2011-11-26T21:33:18Z,.get_str().c_str() instead of .get_str() in several places means the string (likely) gets copied twice in memory instead of once.\n,https://github.com/bitcoin/bitcoin/pull/666#issuecomment-2884043,2884043,
laanwj,2011-11-26T21:43:37Z,"I really don't see how this could make things less secure. \n- By passing all the passphrases as SecureString all the way into the CWallet API, this makes sure the passphrases only exist in mlocked memory (except _in_ Qt and inside the JSON parser, but  that was already the case before, and in the case of Qt there is little to do against it). Before, they were passed in plain std::strings.\n- As I",https://github.com/bitcoin/bitcoin/pull/666#issuecomment-2884107,2884107,
laanwj,2011-11-26T21:49:15Z,"No, it does not copy anything (it can't, where would it copy to?). c_str() simply returns a pointer to the data inside the string.\n",https://github.com/bitcoin/bitcoin/pull/666#issuecomment-2884135,2884135,
TheBlueMatt,2011-11-26T21:56:06Z,"re: 1 yes, but those strings were previously mlocked, so no security is gained.\n\nre: 2 yes, that is my bad, I had just forgotten that those were returning pointers, not creating new objects...just my C++ inexperience showing...\n",https://github.com/bitcoin/bitcoin/pull/666#issuecomment-2884180,2884180,
TheBlueMatt,2011-11-26T22:00:50Z,"Let my rephrase my original comment:\nMakes code easier to read, but doesnt add security, probably worth pulling. Meh.\n",https://github.com/bitcoin/bitcoin/pull/666#issuecomment-2884212,2884212,
laanwj,2011-11-26T22:01:09Z,"1) In the case of bitcoin-qt they weren't. That was my reason for saying this is more secure.\n\n2) STL has a bad name from the MSVC 6.0 implementation, but luckily is not _that_ inefficient :)\n\nAlso this makes it harder to forget manually mlocking/munlocking (or maybe worse, skipping munlocking in the case of an exception so that memory stays locked indefinitely) in future usages of the API.\n",https://github.com/bitcoin/bitcoin/pull/666#issuecomment-2884214,2884214,
