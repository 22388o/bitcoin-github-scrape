[
  {
    "sha": "d65eb63fc8ff782e80438f81a21aadd0e4830cbb",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkNjVlYjYzZmM4ZmY3ODJlODA0MzhmODFhMjFhYWRkMGU0ODMwY2Ji",
    "commit": {
      "author": {
        "name": "Cory Fields",
        "email": "cory-nospam-@coryfields.com",
        "date": "2015-10-13T16:50:41Z"
      },
      "committer": {
        "name": "Cory Fields",
        "email": "cory-nospam-@coryfields.com",
        "date": "2015-10-13T17:17:55Z"
      },
      "message": "build: force zeromq to work with static linking+mingw\n\nI have no idea if this actually works, it's only meant to be enough link\na binary.",
      "tree": {
        "sha": "c81a4646bf5297817607d435dd6ac8d43b71c2ab",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c81a4646bf5297817607d435dd6ac8d43b71c2ab"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d65eb63fc8ff782e80438f81a21aadd0e4830cbb",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d65eb63fc8ff782e80438f81a21aadd0e4830cbb",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/d65eb63fc8ff782e80438f81a21aadd0e4830cbb",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d65eb63fc8ff782e80438f81a21aadd0e4830cbb/comments",
    "author": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "a1d623da3ea4c73605d27703bc966ed8109d231e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a1d623da3ea4c73605d27703bc966ed8109d231e",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/a1d623da3ea4c73605d27703bc966ed8109d231e"
      }
    ],
    "stats": {
      "total": 46,
      "additions": 43,
      "deletions": 3
    },
    "files": [
      {
        "sha": "487931322b737b3a5183226cbdd679d1b79438df",
        "filename": "configure.ac",
        "status": "modified",
        "additions": 9,
        "deletions": 0,
        "changes": 9,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d65eb63fc8ff782e80438f81a21aadd0e4830cbb/configure.ac",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d65eb63fc8ff782e80438f81a21aadd0e4830cbb/configure.ac",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/configure.ac?ref=d65eb63fc8ff782e80438f81a21aadd0e4830cbb",
        "patch": "@@ -722,6 +722,15 @@ else\n     AC_DEFINE_UNQUOTED([ENABLE_ZMQ],[0],[Define to 1 to enable ZMQ functions])\n   fi\n \n+  if test \"x$use_zmq\" = \"xyes\"; then\n+    dnl Assume libzmq was built for static linking\n+    case $host in\n+      *mingw*)\n+        ZMQ_CFLAGS=\"$ZMQ_CFLAGS -DZMQ_STATIC\"\n+      ;;\n+    esac\n+  fi\n+\n   BITCOIN_QT_CHECK(AC_CHECK_LIB([protobuf] ,[main],[PROTOBUF_LIBS=-lprotobuf], BITCOIN_QT_FAIL(libprotobuf not found)))\n   if test x$use_qr != xno; then\n     BITCOIN_QT_CHECK([AC_CHECK_LIB([qrencode], [main],[QR_LIBS=-lqrencode], [have_qrencode=no])])"
      },
      {
        "sha": "17471d8ce75bd407c9c8fa131d86dffd0548b714",
        "filename": "depends/packages/packages.mk",
        "status": "modified",
        "additions": 1,
        "deletions": 3,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d65eb63fc8ff782e80438f81a21aadd0e4830cbb/depends/packages/packages.mk",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d65eb63fc8ff782e80438f81a21aadd0e4830cbb/depends/packages/packages.mk",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/packages/packages.mk?ref=d65eb63fc8ff782e80438f81a21aadd0e4830cbb",
        "patch": "@@ -1,6 +1,4 @@\n-packages:=boost openssl libevent\n-darwin_packages:=zeromq\n-linux_packages:=zeromq\n+packages:=boost openssl libevent zeromq\n native_packages := native_ccache native_comparisontool\n \n qt_native_packages = native_protobuf"
      },
      {
        "sha": "d428cf21e04ea4d4c2f7681ff8292971f20aa2a7",
        "filename": "depends/packages/zeromq.mk",
        "status": "modified",
        "additions": 8,
        "deletions": 0,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d65eb63fc8ff782e80438f81a21aadd0e4830cbb/depends/packages/zeromq.mk",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d65eb63fc8ff782e80438f81a21aadd0e4830cbb/depends/packages/zeromq.mk",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/packages/zeromq.mk?ref=d65eb63fc8ff782e80438f81a21aadd0e4830cbb",
        "patch": "@@ -3,10 +3,18 @@ $(package)_version=4.0.4\n $(package)_download_path=http://download.zeromq.org\n $(package)_file_name=$(package)-$($(package)_version).tar.gz\n $(package)_sha256_hash=1ef71d46e94f33e27dd5a1661ed626cd39be4d2d6967792a275040e34457d399\n+$(package)_patches=configure.patch headerguard.patch\n \n define $(package)_set_vars\n   $(package)_config_opts=--without-documentation --disable-shared\n   $(package)_config_opts_linux=--with-pic\n+  $(package)_cppflags_mingw32=-DZMQ_STATIC\n+endef\n+\n+define $(package)_preprocess_cmds\n+    patch -p1 < $($(package)_patch_dir)/configure.patch && \\\n+    patch -p1 < $($(package)_patch_dir)/headerguard.patch && \\\n+    ./autogen.sh\n endef\n \n define $(package)_config_cmds"
      },
      {
        "sha": "d249ae57c24df8c9342e7f4c180cb6c998708ac4",
        "filename": "depends/patches/zeromq/configure.patch",
        "status": "added",
        "additions": 12,
        "deletions": 0,
        "changes": 12,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d65eb63fc8ff782e80438f81a21aadd0e4830cbb/depends/patches/zeromq/configure.patch",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d65eb63fc8ff782e80438f81a21aadd0e4830cbb/depends/patches/zeromq/configure.patch",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/patches/zeromq/configure.patch?ref=d65eb63fc8ff782e80438f81a21aadd0e4830cbb",
        "patch": "@@ -0,0 +1,12 @@\n+--- old/configure.ac\t2015-10-13 12:13:21.560330183 -0400\n++++ new/configure.ac\t2015-10-13 12:13:31.468330323 -0400\n+@@ -237,9 +237,6 @@\n+         libzmq_on_mingw32=\"yes\"\n+         libzmq_dso_visibility=\"no\"\n+ \n+-        if test \"x$enable_static\" = \"xyes\"; then\n+-            AC_MSG_ERROR([Building static libraries is not supported under MinGW32])\n+-        fi\n+         ;;\n+     *cygwin*)\n+         # Define on Cygwin to enable all library features"
      },
      {
        "sha": "b53c5fa6d65765c387411b5053cbb6723fcf9faa",
        "filename": "depends/patches/zeromq/headerguard.patch",
        "status": "added",
        "additions": 13,
        "deletions": 0,
        "changes": 13,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d65eb63fc8ff782e80438f81a21aadd0e4830cbb/depends/patches/zeromq/headerguard.patch",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d65eb63fc8ff782e80438f81a21aadd0e4830cbb/depends/patches/zeromq/headerguard.patch",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/patches/zeromq/headerguard.patch?ref=d65eb63fc8ff782e80438f81a21aadd0e4830cbb",
        "patch": "@@ -0,0 +1,13 @@\n+--- old/src/windows.hpp\t2014-03-10 17:20:14.000000000 -0400\n++++ new/src/windows.hpp\t2015-10-13 12:19:40.036335509 -0400\n+@@ -165,7 +165,10 @@\n+  \n+ #include <winsock2.h>\n+ #include <mswsock.h>\n++\n++#ifndef __MINGW32__\n+ #include <Mstcpip.h>\n++#endif\n+ \n+ #include <ws2tcpip.h>\n+ #include <ipexport.h>"
      }
    ]
  }
]