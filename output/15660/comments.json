[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/476006719",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15660#issuecomment-476006719",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15660",
    "id": 476006719,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3NjAwNjcxOQ==",
    "user": {
      "login": "sdaftuar",
      "id": 7463573,
      "node_id": "MDQ6VXNlcjc0NjM1NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sdaftuar",
      "html_url": "https://github.com/sdaftuar",
      "followers_url": "https://api.github.com/users/sdaftuar/followers",
      "following_url": "https://api.github.com/users/sdaftuar/following{/other_user}",
      "gists_url": "https://api.github.com/users/sdaftuar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
      "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
      "repos_url": "https://api.github.com/users/sdaftuar/repos",
      "events_url": "https://api.github.com/users/sdaftuar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-24T22:21:51Z",
    "updated_at": "2019-03-24T22:21:51Z",
    "author_association": "MEMBER",
    "body": "This makes changes like that proposed in #15633 much easier to make (I have a relatively small diff to the test that would support that change in particular, should we want to adopt a different behavior).",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/476006719/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/478071476",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15660#issuecomment-478071476",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15660",
    "id": 478071476,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3ODA3MTQ3Ng==",
    "user": {
      "login": "sdaftuar",
      "id": 7463573,
      "node_id": "MDQ6VXNlcjc0NjM1NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sdaftuar",
      "html_url": "https://github.com/sdaftuar",
      "followers_url": "https://api.github.com/users/sdaftuar/followers",
      "following_url": "https://api.github.com/users/sdaftuar/following{/other_user}",
      "gists_url": "https://api.github.com/users/sdaftuar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
      "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
      "repos_url": "https://api.github.com/users/sdaftuar/repos",
      "events_url": "https://api.github.com/users/sdaftuar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-29T16:53:08Z",
    "updated_at": "2019-03-29T16:53:08Z",
    "author_association": "MEMBER",
    "body": "I've taken a bunch of the feedback and cherry-picked a few commits from @jnewbery's branch, and updated this PR.  Old version is here: https://github.com/sdaftuar/bitcoin/commits/15660.1",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/478071476/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/478145613",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15660#issuecomment-478145613",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15660",
    "id": 478145613,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3ODE0NTYxMw==",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-03-29T20:51:15Z",
    "updated_at": "2019-03-29T20:51:15Z",
    "author_association": "MEMBER",
    "body": "tested ACK f97b82149a5cda1443f8f1d085b95c7987b9ba1f. Please squash commits.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/478145613/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/478749167",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15660#issuecomment-478749167",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15660",
    "id": 478749167,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3ODc0OTE2Nw==",
    "user": {
      "login": "sdaftuar",
      "id": 7463573,
      "node_id": "MDQ6VXNlcjc0NjM1NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sdaftuar",
      "html_url": "https://github.com/sdaftuar",
      "followers_url": "https://api.github.com/users/sdaftuar/followers",
      "following_url": "https://api.github.com/users/sdaftuar/following{/other_user}",
      "gists_url": "https://api.github.com/users/sdaftuar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
      "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
      "repos_url": "https://api.github.com/users/sdaftuar/repos",
      "events_url": "https://api.github.com/users/sdaftuar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-01T21:10:05Z",
    "updated_at": "2019-04-01T21:10:05Z",
    "author_association": "MEMBER",
    "body": "Squashed.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/478749167/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/479048197",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15660#issuecomment-479048197",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15660",
    "id": 479048197,
    "node_id": "MDEyOklzc3VlQ29tbWVudDQ3OTA0ODE5Nw==",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2019-04-02T15:22:11Z",
    "updated_at": "2019-04-02T15:22:11Z",
    "author_association": "MEMBER",
    "body": "utACK 7813eb1db132c023902ad945995cc32a325893ca\r\n\r\nTravis failure is unrelated. I've restarted it.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/479048197/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/268535232",
    "pull_request_review_id": 218201677,
    "id": 268535232,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI2ODUzNTIzMg==",
    "diff_hunk": "@@ -135,11 +131,18 @@ def make_utxos(self):\n         block2.vtx.append(tx)\n         block2.hashMerkleRoot = block2.calc_merkle_root()\n         block2.solve()\n-        self.test_node.send_and_ping(msg_block(block2))\n+        self.segwit_node.send_and_ping(msg_block(block2))\n         assert_equal(int(self.nodes[0].getbestblockhash(), 16), block2.sha256)\n         self.utxos.extend([[tx.sha256, i, out_value] for i in range(10)])\n         return\n \n+    # Send balance to a segwit output\n+    def make_segwit_output(self, node):",
    "path": "test/functional/p2p_compactblocks.py",
    "position": null,
    "original_position": 52,
    "commit_id": "7813eb1db132c023902ad945995cc32a325893ca",
    "original_commit_id": "5bc755fdd166e84d8606a613c379705b362f0bf2",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Nit: Since `self` is not used -- this could be a function instead of a method?",
    "created_at": "2019-03-25T08:52:09Z",
    "updated_at": "2019-04-01T21:09:58Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15660#discussion_r268535232",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15660",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/268535232"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15660#discussion_r268535232"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15660"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/268535232/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 140,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/268644233",
    "pull_request_review_id": 218332682,
    "id": 268644233,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI2ODY0NDIzMw==",
    "diff_hunk": "@@ -94,11 +93,9 @@ def send_await_disconnect(self, message, timeout=30):\n class CompactBlocksTest(BitcoinTestFramework):\n     def set_test_params(self):\n         self.setup_clean_chain = True\n-        # Node0 = pre-segwit, node1 = segwit-aware\n-        self.num_nodes = 2\n+        self.num_nodes = 1\n         # This test was written assuming SegWit is activated using BIP9 at height 432 (3x confirmation window).",
    "path": "test/functional/p2p_compactblocks.py",
    "position": null,
    "original_position": 24,
    "commit_id": "7813eb1db132c023902ad945995cc32a325893ca",
    "original_commit_id": "5bc755fdd166e84d8606a613c379705b362f0bf2",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This comment is no longer accurate and can be removed.",
    "created_at": "2019-03-25T13:40:08Z",
    "updated_at": "2019-04-01T21:09:58Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15660#discussion_r268644233",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15660",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/268644233"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15660#discussion_r268644233"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15660"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/268644233/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 97,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/268660065",
    "pull_request_review_id": 218332682,
    "id": 268660065,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI2ODY2MDA2NQ==",
    "diff_hunk": "@@ -135,11 +131,18 @@ def make_utxos(self):\n         block2.vtx.append(tx)\n         block2.hashMerkleRoot = block2.calc_merkle_root()\n         block2.solve()\n-        self.test_node.send_and_ping(msg_block(block2))\n+        self.segwit_node.send_and_ping(msg_block(block2))\n         assert_equal(int(self.nodes[0].getbestblockhash(), 16), block2.sha256)\n         self.utxos.extend([[tx.sha256, i, out_value] for i in range(10)])\n         return\n \n+    # Send balance to a segwit output\n+    def make_segwit_output(self, node):\n+        if node.getbalance() < 2:\n+            node.generate(101)\n+        address = node.getnewaddress(\"bech32\")",
    "path": "test/functional/p2p_compactblocks.py",
    "position": null,
    "original_position": 55,
    "commit_id": "7813eb1db132c023902ad945995cc32a325893ca",
    "original_commit_id": "5bc755fdd166e84d8606a613c379705b362f0bf2",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "The first argument to `getnewaddress()` is `label` (the second argument is `address_type`) so this doesn't actually create a bech32 address. Consider using named arguments to avoid this class of bug.\r\n\r\nGiven that the test passes anyway, is it actually testing what you want?",
    "created_at": "2019-03-25T14:14:00Z",
    "updated_at": "2019-04-01T21:09:58Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15660#discussion_r268660065",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15660",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/268660065"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15660#discussion_r268660065"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15660"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/268660065/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 143,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/268660288",
    "pull_request_review_id": 218332682,
    "id": 268660288,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI2ODY2MDI4OA==",
    "diff_hunk": "@@ -135,11 +131,18 @@ def make_utxos(self):\n         block2.vtx.append(tx)\n         block2.hashMerkleRoot = block2.calc_merkle_root()\n         block2.solve()\n-        self.test_node.send_and_ping(msg_block(block2))\n+        self.segwit_node.send_and_ping(msg_block(block2))\n         assert_equal(int(self.nodes[0].getbestblockhash(), 16), block2.sha256)\n         self.utxos.extend([[tx.sha256, i, out_value] for i in range(10)])\n         return\n \n+    # Send balance to a segwit output\n+    def make_segwit_output(self, node):",
    "path": "test/functional/p2p_compactblocks.py",
    "position": null,
    "original_position": 52,
    "commit_id": "7813eb1db132c023902ad945995cc32a325893ca",
    "original_commit_id": "5bc755fdd166e84d8606a613c379705b362f0bf2",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I suggest you combine this with `make_utxos()`, since both are called only once.",
    "created_at": "2019-03-25T14:14:30Z",
    "updated_at": "2019-04-01T21:09:58Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15660#discussion_r268660288",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15660",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/268660288"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15660#discussion_r268660288"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15660"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/268660288/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 140,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/268661595",
    "pull_request_review_id": 218332682,
    "id": 268661595,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI2ODY2MTU5NQ==",
    "diff_hunk": "@@ -793,126 +785,56 @@ def announce_cmpct_block(node, peer):\n \n     def run_test(self):\n         # Setup the p2p connections\n-        self.test_node = self.nodes[0].add_p2p_connection(TestP2PConn())\n-        self.segwit_node = self.nodes[1].add_p2p_connection(TestP2PConn(), services=NODE_NETWORK | NODE_WITNESS)\n-        self.old_node = self.nodes[1].add_p2p_connection(TestP2PConn(), services=NODE_NETWORK)\n+        self.segwit_node = self.nodes[0].add_p2p_connection(TestP2PConn(), services=NODE_NETWORK | NODE_WITNESS)\n+        self.old_node = self.nodes[0].add_p2p_connection(TestP2PConn(), services=NODE_NETWORK)\n+        self.additional_segwit_node = self.nodes[0].add_p2p_connection(TestP2PConn(), services=NODE_NETWORK | NODE_WITNESS)\n \n         # We will need UTXOs to construct transactions in later tests.\n         self.make_utxos()\n+        self.make_segwit_output(self.nodes[0])\n \n-        self.log.info(\"Running tests, pre-segwit activation:\")\n+        assert_equal(get_bip9_status(self.nodes[0], \"segwit\")[\"status\"], 'active')\n \n         self.log.info(\"Testing SENDCMPCT p2p message... \")\n-        self.test_sendcmpct(self.nodes[0], self.test_node, 1)\n-        sync_blocks(self.nodes)\n-        self.test_sendcmpct(self.nodes[1], self.segwit_node, 2, old_node=self.old_node)\n-        sync_blocks(self.nodes)\n+        self.test_sendcmpct(self.nodes[0], self.segwit_node, 2, old_node=self.old_node)",
    "path": "test/functional/p2p_compactblocks.py",
    "position": null,
    "original_position": 139,
    "commit_id": "7813eb1db132c023902ad945995cc32a325893ca",
    "original_commit_id": "5bc755fdd166e84d8606a613c379705b362f0bf2",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Since there's only one node under test now, all of these methods can drop the `node` argument.",
    "created_at": "2019-03-25T14:17:17Z",
    "updated_at": "2019-04-01T21:09:58Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15660#discussion_r268661595",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15660",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/268661595"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15660#discussion_r268661595"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15660"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/268661595/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 799,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/268673629",
    "pull_request_review_id": 218332682,
    "id": 268673629,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI2ODY3MzYyOQ==",
    "diff_hunk": "@@ -793,126 +785,56 @@ def announce_cmpct_block(node, peer):\n \n     def run_test(self):\n         # Setup the p2p connections\n-        self.test_node = self.nodes[0].add_p2p_connection(TestP2PConn())\n-        self.segwit_node = self.nodes[1].add_p2p_connection(TestP2PConn(), services=NODE_NETWORK | NODE_WITNESS)\n-        self.old_node = self.nodes[1].add_p2p_connection(TestP2PConn(), services=NODE_NETWORK)\n+        self.segwit_node = self.nodes[0].add_p2p_connection(TestP2PConn(), services=NODE_NETWORK | NODE_WITNESS)\n+        self.old_node = self.nodes[0].add_p2p_connection(TestP2PConn(), services=NODE_NETWORK)\n+        self.additional_segwit_node = self.nodes[0].add_p2p_connection(TestP2PConn(), services=NODE_NETWORK | NODE_WITNESS)\n \n         # We will need UTXOs to construct transactions in later tests.\n         self.make_utxos()\n+        self.make_segwit_output(self.nodes[0])\n \n-        self.log.info(\"Running tests, pre-segwit activation:\")\n+        assert_equal(get_bip9_status(self.nodes[0], \"segwit\")[\"status\"], 'active')\n \n         self.log.info(\"Testing SENDCMPCT p2p message... \")\n-        self.test_sendcmpct(self.nodes[0], self.test_node, 1)\n-        sync_blocks(self.nodes)\n-        self.test_sendcmpct(self.nodes[1], self.segwit_node, 2, old_node=self.old_node)\n-        sync_blocks(self.nodes)\n+        self.test_sendcmpct(self.nodes[0], self.segwit_node, 2, old_node=self.old_node)",
    "path": "test/functional/p2p_compactblocks.py",
    "position": null,
    "original_position": 139,
    "commit_id": "7813eb1db132c023902ad945995cc32a325893ca",
    "original_commit_id": "5bc755fdd166e84d8606a613c379705b362f0bf2",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "`test_compct()` always takes the same `version` so that argument can be dropped.\r\n\r\nSame is true for most of these subtest functions.",
    "created_at": "2019-03-25T14:40:08Z",
    "updated_at": "2019-04-01T21:09:58Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15660#discussion_r268673629",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15660",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/268673629"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15660#discussion_r268673629"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15660"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/268673629/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 799,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/268762043",
    "pull_request_review_id": 218332682,
    "id": 268762043,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI2ODc2MjA0Mw==",
    "diff_hunk": "@@ -793,126 +785,56 @@ def announce_cmpct_block(node, peer):\n \n     def run_test(self):\n         # Setup the p2p connections\n-        self.test_node = self.nodes[0].add_p2p_connection(TestP2PConn())\n-        self.segwit_node = self.nodes[1].add_p2p_connection(TestP2PConn(), services=NODE_NETWORK | NODE_WITNESS)\n-        self.old_node = self.nodes[1].add_p2p_connection(TestP2PConn(), services=NODE_NETWORK)\n+        self.segwit_node = self.nodes[0].add_p2p_connection(TestP2PConn(), services=NODE_NETWORK | NODE_WITNESS)",
    "path": "test/functional/p2p_compactblocks.py",
    "position": null,
    "original_position": 123,
    "commit_id": "7813eb1db132c023902ad945995cc32a325893ca",
    "original_commit_id": "5bc755fdd166e84d8606a613c379705b362f0bf2",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Default network services are `NODE_NETWORK | NODE_WITNESS` so this argument doesn't need to be passed.",
    "created_at": "2019-03-25T17:24:03Z",
    "updated_at": "2019-04-01T21:09:58Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15660#discussion_r268762043",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15660",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/268762043"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15660#discussion_r268762043"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15660"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/268762043/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 788,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/270492816",
    "pull_request_review_id": 220650203,
    "id": 270492816,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI3MDQ5MjgxNg==",
    "diff_hunk": "@@ -94,11 +93,9 @@ def send_await_disconnect(self, message, timeout=30):\n class CompactBlocksTest(BitcoinTestFramework):\n     def set_test_params(self):\n         self.setup_clean_chain = True\n-        # Node0 = pre-segwit, node1 = segwit-aware\n-        self.num_nodes = 2\n+        self.num_nodes = 1\n         # This test was written assuming SegWit is activated using BIP9 at height 432 (3x confirmation window).",
    "path": "test/functional/p2p_compactblocks.py",
    "position": null,
    "original_position": 24,
    "commit_id": "7813eb1db132c023902ad945995cc32a325893ca",
    "original_commit_id": "5bc755fdd166e84d8606a613c379705b362f0bf2",
    "user": {
      "login": "sdaftuar",
      "id": 7463573,
      "node_id": "MDQ6VXNlcjc0NjM1NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sdaftuar",
      "html_url": "https://github.com/sdaftuar",
      "followers_url": "https://api.github.com/users/sdaftuar/followers",
      "following_url": "https://api.github.com/users/sdaftuar/following{/other_user}",
      "gists_url": "https://api.github.com/users/sdaftuar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
      "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
      "repos_url": "https://api.github.com/users/sdaftuar/repos",
      "events_url": "https://api.github.com/users/sdaftuar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done.",
    "created_at": "2019-03-29T16:48:28Z",
    "updated_at": "2019-04-01T21:09:58Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15660#discussion_r270492816",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15660",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/270492816"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15660#discussion_r270492816"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15660"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/270492816/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 97,
    "side": "RIGHT",
    "in_reply_to_id": 268644233
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/270492848",
    "pull_request_review_id": 220650251,
    "id": 270492848,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI3MDQ5Mjg0OA==",
    "diff_hunk": "@@ -135,11 +131,18 @@ def make_utxos(self):\n         block2.vtx.append(tx)\n         block2.hashMerkleRoot = block2.calc_merkle_root()\n         block2.solve()\n-        self.test_node.send_and_ping(msg_block(block2))\n+        self.segwit_node.send_and_ping(msg_block(block2))\n         assert_equal(int(self.nodes[0].getbestblockhash(), 16), block2.sha256)\n         self.utxos.extend([[tx.sha256, i, out_value] for i in range(10)])\n         return\n \n+    # Send balance to a segwit output\n+    def make_segwit_output(self, node):\n+        if node.getbalance() < 2:\n+            node.generate(101)\n+        address = node.getnewaddress(\"bech32\")",
    "path": "test/functional/p2p_compactblocks.py",
    "position": null,
    "original_position": 55,
    "commit_id": "7813eb1db132c023902ad945995cc32a325893ca",
    "original_commit_id": "5bc755fdd166e84d8606a613c379705b362f0bf2",
    "user": {
      "login": "sdaftuar",
      "id": 7463573,
      "node_id": "MDQ6VXNlcjc0NjM1NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sdaftuar",
      "html_url": "https://github.com/sdaftuar",
      "followers_url": "https://api.github.com/users/sdaftuar/followers",
      "following_url": "https://api.github.com/users/sdaftuar/following{/other_user}",
      "gists_url": "https://api.github.com/users/sdaftuar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
      "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
      "repos_url": "https://api.github.com/users/sdaftuar/repos",
      "events_url": "https://api.github.com/users/sdaftuar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Fixed.",
    "created_at": "2019-03-29T16:48:34Z",
    "updated_at": "2019-04-01T21:09:58Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15660#discussion_r270492848",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15660",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/270492848"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15660#discussion_r270492848"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15660"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/270492848/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 143,
    "side": "RIGHT",
    "in_reply_to_id": 268660065
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/270492875",
    "pull_request_review_id": 220650296,
    "id": 270492875,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI3MDQ5Mjg3NQ==",
    "diff_hunk": "@@ -135,11 +131,18 @@ def make_utxos(self):\n         block2.vtx.append(tx)\n         block2.hashMerkleRoot = block2.calc_merkle_root()\n         block2.solve()\n-        self.test_node.send_and_ping(msg_block(block2))\n+        self.segwit_node.send_and_ping(msg_block(block2))\n         assert_equal(int(self.nodes[0].getbestblockhash(), 16), block2.sha256)\n         self.utxos.extend([[tx.sha256, i, out_value] for i in range(10)])\n         return\n \n+    # Send balance to a segwit output\n+    def make_segwit_output(self, node):",
    "path": "test/functional/p2p_compactblocks.py",
    "position": null,
    "original_position": 52,
    "commit_id": "7813eb1db132c023902ad945995cc32a325893ca",
    "original_commit_id": "5bc755fdd166e84d8606a613c379705b362f0bf2",
    "user": {
      "login": "sdaftuar",
      "id": 7463573,
      "node_id": "MDQ6VXNlcjc0NjM1NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sdaftuar",
      "html_url": "https://github.com/sdaftuar",
      "followers_url": "https://api.github.com/users/sdaftuar/followers",
      "following_url": "https://api.github.com/users/sdaftuar/following{/other_user}",
      "gists_url": "https://api.github.com/users/sdaftuar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
      "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
      "repos_url": "https://api.github.com/users/sdaftuar/repos",
      "events_url": "https://api.github.com/users/sdaftuar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done.",
    "created_at": "2019-03-29T16:48:39Z",
    "updated_at": "2019-04-01T21:09:58Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15660#discussion_r270492875",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15660",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/270492875"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15660#discussion_r270492875"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15660"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/270492875/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 140,
    "side": "RIGHT",
    "in_reply_to_id": 268660288
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/270492909",
    "pull_request_review_id": 220650347,
    "id": 270492909,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI3MDQ5MjkwOQ==",
    "diff_hunk": "@@ -793,126 +785,56 @@ def announce_cmpct_block(node, peer):\n \n     def run_test(self):\n         # Setup the p2p connections\n-        self.test_node = self.nodes[0].add_p2p_connection(TestP2PConn())\n-        self.segwit_node = self.nodes[1].add_p2p_connection(TestP2PConn(), services=NODE_NETWORK | NODE_WITNESS)\n-        self.old_node = self.nodes[1].add_p2p_connection(TestP2PConn(), services=NODE_NETWORK)\n+        self.segwit_node = self.nodes[0].add_p2p_connection(TestP2PConn(), services=NODE_NETWORK | NODE_WITNESS)\n+        self.old_node = self.nodes[0].add_p2p_connection(TestP2PConn(), services=NODE_NETWORK)\n+        self.additional_segwit_node = self.nodes[0].add_p2p_connection(TestP2PConn(), services=NODE_NETWORK | NODE_WITNESS)\n \n         # We will need UTXOs to construct transactions in later tests.\n         self.make_utxos()\n+        self.make_segwit_output(self.nodes[0])\n \n-        self.log.info(\"Running tests, pre-segwit activation:\")\n+        assert_equal(get_bip9_status(self.nodes[0], \"segwit\")[\"status\"], 'active')\n \n         self.log.info(\"Testing SENDCMPCT p2p message... \")\n-        self.test_sendcmpct(self.nodes[0], self.test_node, 1)\n-        sync_blocks(self.nodes)\n-        self.test_sendcmpct(self.nodes[1], self.segwit_node, 2, old_node=self.old_node)\n-        sync_blocks(self.nodes)\n+        self.test_sendcmpct(self.nodes[0], self.segwit_node, 2, old_node=self.old_node)",
    "path": "test/functional/p2p_compactblocks.py",
    "position": null,
    "original_position": 139,
    "commit_id": "7813eb1db132c023902ad945995cc32a325893ca",
    "original_commit_id": "5bc755fdd166e84d8606a613c379705b362f0bf2",
    "user": {
      "login": "sdaftuar",
      "id": 7463573,
      "node_id": "MDQ6VXNlcjc0NjM1NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sdaftuar",
      "html_url": "https://github.com/sdaftuar",
      "followers_url": "https://api.github.com/users/sdaftuar/followers",
      "following_url": "https://api.github.com/users/sdaftuar/following{/other_user}",
      "gists_url": "https://api.github.com/users/sdaftuar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
      "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
      "repos_url": "https://api.github.com/users/sdaftuar/repos",
      "events_url": "https://api.github.com/users/sdaftuar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Done.",
    "created_at": "2019-03-29T16:48:44Z",
    "updated_at": "2019-04-01T21:09:58Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15660#discussion_r270492909",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15660",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/270492909"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15660#discussion_r270492909"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15660"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/270492909/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 799,
    "side": "RIGHT",
    "in_reply_to_id": 268661595
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/270493001",
    "pull_request_review_id": 220650468,
    "id": 270493001,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI3MDQ5MzAwMQ==",
    "diff_hunk": "@@ -793,126 +785,56 @@ def announce_cmpct_block(node, peer):\n \n     def run_test(self):\n         # Setup the p2p connections\n-        self.test_node = self.nodes[0].add_p2p_connection(TestP2PConn())\n-        self.segwit_node = self.nodes[1].add_p2p_connection(TestP2PConn(), services=NODE_NETWORK | NODE_WITNESS)\n-        self.old_node = self.nodes[1].add_p2p_connection(TestP2PConn(), services=NODE_NETWORK)\n+        self.segwit_node = self.nodes[0].add_p2p_connection(TestP2PConn(), services=NODE_NETWORK | NODE_WITNESS)\n+        self.old_node = self.nodes[0].add_p2p_connection(TestP2PConn(), services=NODE_NETWORK)\n+        self.additional_segwit_node = self.nodes[0].add_p2p_connection(TestP2PConn(), services=NODE_NETWORK | NODE_WITNESS)\n \n         # We will need UTXOs to construct transactions in later tests.\n         self.make_utxos()\n+        self.make_segwit_output(self.nodes[0])\n \n-        self.log.info(\"Running tests, pre-segwit activation:\")\n+        assert_equal(get_bip9_status(self.nodes[0], \"segwit\")[\"status\"], 'active')\n \n         self.log.info(\"Testing SENDCMPCT p2p message... \")\n-        self.test_sendcmpct(self.nodes[0], self.test_node, 1)\n-        sync_blocks(self.nodes)\n-        self.test_sendcmpct(self.nodes[1], self.segwit_node, 2, old_node=self.old_node)\n-        sync_blocks(self.nodes)\n+        self.test_sendcmpct(self.nodes[0], self.segwit_node, 2, old_node=self.old_node)",
    "path": "test/functional/p2p_compactblocks.py",
    "position": null,
    "original_position": 139,
    "commit_id": "7813eb1db132c023902ad945995cc32a325893ca",
    "original_commit_id": "5bc755fdd166e84d8606a613c379705b362f0bf2",
    "user": {
      "login": "sdaftuar",
      "id": 7463573,
      "node_id": "MDQ6VXNlcjc0NjM1NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sdaftuar",
      "html_url": "https://github.com/sdaftuar",
      "followers_url": "https://api.github.com/users/sdaftuar/followers",
      "following_url": "https://api.github.com/users/sdaftuar/following{/other_user}",
      "gists_url": "https://api.github.com/users/sdaftuar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
      "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
      "repos_url": "https://api.github.com/users/sdaftuar/repos",
      "events_url": "https://api.github.com/users/sdaftuar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Simplified.",
    "created_at": "2019-03-29T16:48:59Z",
    "updated_at": "2019-04-01T21:09:58Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15660#discussion_r270493001",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15660",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/270493001"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15660#discussion_r270493001"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15660"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/270493001/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 799,
    "side": "RIGHT",
    "in_reply_to_id": 268673629
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/270493024",
    "pull_request_review_id": 220650506,
    "id": 270493024,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI3MDQ5MzAyNA==",
    "diff_hunk": "@@ -793,126 +785,56 @@ def announce_cmpct_block(node, peer):\n \n     def run_test(self):\n         # Setup the p2p connections\n-        self.test_node = self.nodes[0].add_p2p_connection(TestP2PConn())\n-        self.segwit_node = self.nodes[1].add_p2p_connection(TestP2PConn(), services=NODE_NETWORK | NODE_WITNESS)\n-        self.old_node = self.nodes[1].add_p2p_connection(TestP2PConn(), services=NODE_NETWORK)\n+        self.segwit_node = self.nodes[0].add_p2p_connection(TestP2PConn(), services=NODE_NETWORK | NODE_WITNESS)",
    "path": "test/functional/p2p_compactblocks.py",
    "position": null,
    "original_position": 123,
    "commit_id": "7813eb1db132c023902ad945995cc32a325893ca",
    "original_commit_id": "5bc755fdd166e84d8606a613c379705b362f0bf2",
    "user": {
      "login": "sdaftuar",
      "id": 7463573,
      "node_id": "MDQ6VXNlcjc0NjM1NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sdaftuar",
      "html_url": "https://github.com/sdaftuar",
      "followers_url": "https://api.github.com/users/sdaftuar/followers",
      "following_url": "https://api.github.com/users/sdaftuar/following{/other_user}",
      "gists_url": "https://api.github.com/users/sdaftuar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
      "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
      "repos_url": "https://api.github.com/users/sdaftuar/repos",
      "events_url": "https://api.github.com/users/sdaftuar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Removed.",
    "created_at": "2019-03-29T16:49:03Z",
    "updated_at": "2019-04-01T21:09:58Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15660#discussion_r270493024",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15660",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/270493024"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15660#discussion_r270493024"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15660"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/270493024/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 788,
    "side": "RIGHT",
    "in_reply_to_id": 268762043
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/270493181",
    "pull_request_review_id": 220650701,
    "id": 270493181,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI3MDQ5MzE4MQ==",
    "diff_hunk": "@@ -135,11 +131,18 @@ def make_utxos(self):\n         block2.vtx.append(tx)\n         block2.hashMerkleRoot = block2.calc_merkle_root()\n         block2.solve()\n-        self.test_node.send_and_ping(msg_block(block2))\n+        self.segwit_node.send_and_ping(msg_block(block2))\n         assert_equal(int(self.nodes[0].getbestblockhash(), 16), block2.sha256)\n         self.utxos.extend([[tx.sha256, i, out_value] for i in range(10)])\n         return\n \n+    # Send balance to a segwit output\n+    def make_segwit_output(self, node):",
    "path": "test/functional/p2p_compactblocks.py",
    "position": null,
    "original_position": 52,
    "commit_id": "7813eb1db132c023902ad945995cc32a325893ca",
    "original_commit_id": "5bc755fdd166e84d8606a613c379705b362f0bf2",
    "user": {
      "login": "sdaftuar",
      "id": 7463573,
      "node_id": "MDQ6VXNlcjc0NjM1NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sdaftuar",
      "html_url": "https://github.com/sdaftuar",
      "followers_url": "https://api.github.com/users/sdaftuar/followers",
      "following_url": "https://api.github.com/users/sdaftuar/following{/other_user}",
      "gists_url": "https://api.github.com/users/sdaftuar/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
      "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
      "repos_url": "https://api.github.com/users/sdaftuar/repos",
      "events_url": "https://api.github.com/users/sdaftuar/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Eliminated this in the latest version.",
    "created_at": "2019-03-29T16:49:28Z",
    "updated_at": "2019-04-01T21:09:58Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/15660#discussion_r270493181",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15660",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/270493181"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/15660#discussion_r270493181"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15660"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/270493181/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 140,
    "side": "RIGHT",
    "in_reply_to_id": 268535232
  }
]