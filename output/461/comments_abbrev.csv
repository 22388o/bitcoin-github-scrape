sgimenez,2011-08-11T12:58:53Z,How to compile without linking to libupnp then?\n,https://github.com/bitcoin/bitcoin/pull/461#issuecomment-1781561,1781561,
muggenhor,2011-08-11T13:07:21Z,Set USE_UPNP=0 in the makefile. (or on the commandline)\n,https://github.com/bitcoin/bitcoin/pull/461#issuecomment-1781635,1781635,
sgimenez,2011-08-11T14:20:20Z,"This does not sound consistent with the `init.cpp` change.\nThere was three states before : `undefined` -> no linking, `0` -> linked but off by default. `1` -> linked and on by default.\nA bit odd, but a least functional.\n",https://github.com/bitcoin/bitcoin/pull/461#issuecomment-1782166,1782166,
TheBlueMatt,2011-08-11T17:39:22Z,"The relevant section from build-unix.txt:\n\nRequires miniupnpc for UPnP port mapping.  It can be downloaded from\nhttp://miniupnp.tuxfamily.org/files/.  UPnP support is compiled in and\nturned off by default.  Set USE_UPNP to a different value to control this:\nUSE_UPNP=   no UPnP support, miniupnp not required;\nUSE_UPNP=0  (the default) UPnP support turned off by default at runtime;\nUSE_UPNP=1",https://github.com/bitcoin/bitcoin/pull/461#issuecomment-1783944,1783944,
gavinandresen,2011-08-12T16:16:22Z,I hate to open this kettle of worms...\n\n... but the tri-state nature of USE_UPNP seems to be a chronic source of confusion. Any objections to changing the rules to be:\n\nUSE_UPNP=1 : upnp support compiled in and turned on by default at runtime\nAnything else:  upnp support NOT compiled in.\n\nAnd the build rules:\nbitcoin GUI : built with USE_UPNP=1\nbitcoind : no upnp\n,https://github.com/bitcoin/bitcoin/pull/461#issuecomment-1792587,1792587,
TheBlueMatt,2011-08-12T16:19:49Z,Well the original argument was we will have autotools in a couple weeks so it will all go away...but autotools kinda fell flat.\n,https://github.com/bitcoin/bitcoin/pull/461#issuecomment-1792619,1792619,
muggenhor,2011-08-12T23:52:02Z,"I'm not sure how autotools would fix that problem, as the tri-state nature of USE_UPNP would remain a problem... If you _really_ want to be able to configure the default UPnP state at compile time (which seems rather senseless to me): use _two_ macros for the job.\n",https://github.com/bitcoin/bitcoin/pull/461#issuecomment-1795629,1795629,
TheBlueMatt,2011-08-12T23:55:05Z,Well autotools can figure out if upnp is there and then automatically either set or unset USE_UPNP and you can do a configure flag to set the default on or off.\n,https://github.com/bitcoin/bitcoin/pull/461#issuecomment-1795643,1795643,
muggenhor,2011-08-12T23:58:26Z,"The fact that upnp is available doesn't mean you actually want to build against it. As for a configure flag to set the default on/off, the same can be accomplished with a macro (the -D thing) by optionally defining one depending on make's command line....\n",https://github.com/bitcoin/bitcoin/pull/461#issuecomment-1795670,1795670,
TheBlueMatt,2011-08-13T00:01:22Z,"I cant see many scenarios where you would want to not build against a library you have even if its use if off by default (most programs will build this way, even if you can force it one way or another)...\nAnyway, not that it really matters, the initial idea was autotools could have more/more clear flags.\n",https://github.com/bitcoin/bitcoin/pull/461#issuecomment-1795687,1795687,
laanwj,2011-10-11T18:08:20Z,"I'm fine with it being possible to link to libupnp without enabling it by default (linux distributions might use this) but these would indeed be better off as separate options, the tristate option is really confusing.\n",https://github.com/bitcoin/bitcoin/pull/461#issuecomment-2369054,2369054,
T-X,2011-11-02T12:23:43Z,"I like gavin's suggestion to only have one option, USE_UPNP=1 or else.\n\nJust one question, because I don't really know what is meant with ""build rule"": Is the build rule only refering to the provided, statically linked binaries on the website? Or to the default behaviour of qmake and make?\n\nI think that as long as for instance a simple ""make -f makefile.unix"" after a clean git checkout does no",https://github.com/bitcoin/bitcoin/pull/461#issuecomment-2602696,2602696,
laanwj,2011-11-02T12:57:21Z,how big is libupnpc? would it be feasible to include it in bitcoin like we\ndo with spirit-json? if it is only a few source files we could... as it is\nnot a very common library for distributions to have available\n,https://github.com/bitcoin/bitcoin/pull/461#issuecomment-2603022,2603022,
TheBlueMatt,2011-11-02T15:02:19Z,"@T_X in gavin's comment, build rule would refer to the default when calling make/qmake+make and the distributed binaries.\n\nPersonally, I don't care what the default is, the tri-state option was added because no one would agree on what the default for UPnP should be and thus it wasn't getting merged, so tri-state was added to move the process forward.  If you want to change it, go ahead, but even",https://github.com/bitcoin/bitcoin/pull/461#issuecomment-2604425,2604425,
laanwj,2011-11-02T20:01:31Z,"IMO it would be fine to always enable libupnp by default when it is linked.\nAfter all, it can still be disabled through a command-line option and in\nthe options UI.\n\nBut you're right that it seems that we can never agree on anything and so\nthese kind of small changes linger forever.\n",https://github.com/bitcoin/bitcoin/pull/461#issuecomment-2608701,2608701,
neofutur,2012-03-17T21:44:15Z,"also have a problem with this USE_UPNP build option mostly not working, please fix\n",https://github.com/bitcoin/bitcoin/pull/461#issuecomment-4557331,4557331,
laanwj,2012-03-17T22:43:57Z,"It's not broken afaik.\n\nExplain ""mostly not working""?\n",https://github.com/bitcoin/bitcoin/pull/461#issuecomment-4557766,4557766,
neofutur,2012-03-18T06:09:09Z,"just tried to build from latest github and I had to manually modify the makefile to build with no UPNP libs or includes\nI ll try again, perhaps its just me.\n",https://github.com/bitcoin/bitcoin/pull/461#issuecomment-4559511,4559511,
sipa,2012-03-19T01:41:14Z,"@neofutur have you even read the rest of this issue? I'm sure it is confusing, and I agree it needs to be changed, but you know that USE_UPNP= disables linking against miniupnpc?\n",https://github.com/bitcoin/bitcoin/pull/461#issuecomment-4566547,4566547,
TheBlueMatt,2011-08-13T14:12:27Z,"If you are going to redefine USE_UPNP to mean in and on by default, you should remove the whole #else -upnp (and its existence elsewhere in the code) block.\n",https://github.com/bitcoin/bitcoin/pull/461#discussion_r91168,91168,src/init.cpp
