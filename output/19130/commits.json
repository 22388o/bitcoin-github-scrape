[
  {
    "sha": "d896aee3aea7a0463ffb3755d1146e6f2af383cf",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpkODk2YWVlM2FlYTdhMDQ2M2ZmYjM3NTVkMTE0NmU2ZjJhZjM4M2Nm",
    "commit": {
      "author": {
        "name": "Anthony Towns",
        "email": "aj@erisian.com.au",
        "date": "2020-06-01T04:18:32Z"
      },
      "committer": {
        "name": "Anthony Towns",
        "email": "aj@erisian.com.au",
        "date": "2020-06-01T04:18:32Z"
      },
      "message": "doc: make it easier to work out size of bloom filter",
      "tree": {
        "sha": "c8a37c3f48500ab92f2988567a202fc1a89c1eb4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c8a37c3f48500ab92f2988567a202fc1a89c1eb4"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d896aee3aea7a0463ffb3755d1146e6f2af383cf",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d896aee3aea7a0463ffb3755d1146e6f2af383cf",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/d896aee3aea7a0463ffb3755d1146e6f2af383cf",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d896aee3aea7a0463ffb3755d1146e6f2af383cf/comments",
    "author": {
      "login": "ajtowns",
      "id": 127186,
      "node_id": "MDQ6VXNlcjEyNzE4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajtowns",
      "html_url": "https://github.com/ajtowns",
      "followers_url": "https://api.github.com/users/ajtowns/followers",
      "following_url": "https://api.github.com/users/ajtowns/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajtowns/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
      "organizations_url": "https://api.github.com/users/ajtowns/orgs",
      "repos_url": "https://api.github.com/users/ajtowns/repos",
      "events_url": "https://api.github.com/users/ajtowns/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajtowns/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "ajtowns",
      "id": 127186,
      "node_id": "MDQ6VXNlcjEyNzE4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajtowns",
      "html_url": "https://github.com/ajtowns",
      "followers_url": "https://api.github.com/users/ajtowns/followers",
      "following_url": "https://api.github.com/users/ajtowns/following{/other_user}",
      "gists_url": "https://api.github.com/users/ajtowns/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
      "organizations_url": "https://api.github.com/users/ajtowns/orgs",
      "repos_url": "https://api.github.com/users/ajtowns/repos",
      "events_url": "https://api.github.com/users/ajtowns/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ajtowns/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "a65b55fa45d41761c3e67ac5107d284d6edc2525",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a65b55fa45d41761c3e67ac5107d284d6edc2525",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/a65b55fa45d41761c3e67ac5107d284d6edc2525"
      }
    ],
    "stats": {
      "total": 13,
      "additions": 12,
      "deletions": 1
    },
    "files": [
      {
        "sha": "03026f3c9e80d3ca6d8da449569a922ac850e846",
        "filename": "src/bloom.cpp",
        "status": "modified",
        "additions": 12,
        "deletions": 1,
        "changes": 13,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/d896aee3aea7a0463ffb3755d1146e6f2af383cf/src/bloom.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/d896aee3aea7a0463ffb3755d1146e6f2af383cf/src/bloom.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/bloom.cpp?ref=d896aee3aea7a0463ffb3755d1146e6f2af383cf",
        "patch": "@@ -192,7 +192,18 @@ CRollingBloomFilter::CRollingBloomFilter(const unsigned int nElements, const dou\n      * bit is treated as unset. If the bits are (01), (10), or (11), the bit is\n      * treated as set in generation 1, 2, or 3 respectively.\n      * These bits are stored in separate integers: position P corresponds to bit\n-     * (P & 63) of the integers data[(P >> 6) * 2] and data[(P >> 6) * 2 + 1]. */\n+     * (P & 63) of the integers data[(P >> 6) * 2] and data[(P >> 6) * 2 + 1].\n+     *\n+     * Python code to calculate the filter size in bytes:\n+\n+       def filterbytes(nel, fprate):\n+           logfp = math.log(fprate)\n+           nhash = max(1, min(round(logfp/math.log(0.5)), 50))\n+           nfilbits = math.ceil(-1.0*nhash*(3*int((nel+1)/2)) / math.log(1.0 - math.exp(logfp / nhash)))\n+           return (nfilbits+63)/64*2*8\n+\n+     */\n+\n     data.resize(((nFilterBits + 63) / 64) << 1);\n     reset();\n }"
      }
    ]
  }
]