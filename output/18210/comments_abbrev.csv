MarcoFalke,2020-02-25 19:23:30,"Is there a way to make python crash if the type hint is incorrect? In that case they seem useful, otherwise they might get outdated and cause more confusion.",https://github.com/bitcoin/bitcoin/pull/18210#issuecomment-591024017,591024017,
kiminuo,2020-02-25 19:48:51,"There is [Mypy](https://mypy.readthedocs.io/en/latest/index.html) - a static type checker for Python 3 and Python 2.7.\n\n### Example\n\n```\nPS C:\temp> cat test.py\n#!/usr/bin/env python3\n\ns: str\ns = 1\nPS C:\temp> python -m mypy test.py\ntest.py:4: error: Incompatible types in assignment (expression has type ""int"", variable has type ""str"")\nFound 1 error in 1 file (checked 1 sour",https://github.com/bitcoin/bitcoin/pull/18210#issuecomment-591035926,591035926,
DrahtBot,2020-02-25 22:23:43,<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.,https://github.com/bitcoin/bitcoin/pull/18210#issuecomment-591102083,591102083,
kiminuo,2020-02-26 09:37:52,"1) Python 3.5 EOL is 09/2020. Maybe Python may be bumped to 3.6 in not too distant future. What is the policy for Python upgrade?\n2) Should a specific version of `mypy` be installed? ",https://github.com/bitcoin/bitcoin/pull/18210#issuecomment-591331637,591331637,
practicalswift,2020-02-26 12:04:29,Concept ACK on checking type hints using `mypy` and gradually adding type hints to our Python code base :),https://github.com/bitcoin/bitcoin/pull/18210#issuecomment-591392300,591392300,
MarcoFalke,2020-02-26 14:39:06,"https://packages.ubuntu.com/xenial/python3 is still supported and not EOL until April next year, so we can't bump to python 3.6 yet.",https://github.com/bitcoin/bitcoin/pull/18210#issuecomment-591458941,591458941,
kiminuo,2020-02-26 15:47:29,@MarcoFalke So Ubuntu provides support for Python 3.5 even after Python developers do not support the software? I thought that this is relevant source of information: https://devguide.python.org/#status-of-python-branches (saying EOF is 2020-09-13),https://github.com/bitcoin/bitcoin/pull/18210#issuecomment-591494912,591494912,
laanwj,2020-02-26 17:04:57,"Agree that they need to be checked in the CI, but very much concept ACK, thanks for doing this.",https://github.com/bitcoin/bitcoin/pull/18210#issuecomment-591535079,591535079,
elichai,2020-03-01 15:09:26,"Concept ACK cool to hear about `MyPy`, tested it locally and it's pretty nice except for the need to ignore it on all imports. maybe adding this flag is better? https://mypy.readthedocs.io/en/latest/command_line.html#cmdoption-mypy-ignore-missing-imports\n\nExample, changed:\n```\ndiff --git a/test/functional/feature_cltv.py b/test/functional/feature_cltv.py\n--- a/test/functional/feature_clt",https://github.com/bitcoin/bitcoin/pull/18210#issuecomment-593107696,593107696,
kiminuo,2020-03-01 19:56:39,"@elichai I'm slightly more in favor of *not* using that ignore flag because:\n\n1) https://github.com/python/typeshed seems very active so somebody may actually add typings for `zmq` to typeshed which would be ideal I guess.\n2) It does not seem that number of `# type: ignore`s needed for module imports will be high - correct me if I'm wrong.\n\nEDIT: I have changed my mind and I have added `",https://github.com/bitcoin/bitcoin/pull/18210#issuecomment-593138097,593138097,
troygiorshev,2020-06-01 13:10:55,Concept ACK.  The combination of Type Hinting and `mypy` is the single best improvement to ever occur to the python ecosystem IMO.  However we'll need to go about this gradually.  This may be a useful guide: https://mypy.readthedocs.io/en/stable/existing_code.html,https://github.com/bitcoin/bitcoin/pull/18210#issuecomment-636852312,636852312,
MarcoFalke,2020-06-01 23:24:24,ACK 600ba915f84129fb74f39c5eafd2a28ef4841fa0,https://github.com/bitcoin/bitcoin/pull/18210#issuecomment-637177672,637177672,
MarcoFalke,2020-06-02 10:27:54,ACK bd7e530f010d43816bb05d6f1590d1cd36cdaa2c fine with me,https://github.com/bitcoin/bitcoin/pull/18210#issuecomment-637446320,637446320,
hebasto,2020-06-05 05:23:49,"I have linter warnings on master (4ede05d421e7799e631bb83ed16799e8bae79eeb):\n```\n$ python3 --version\nPython 3.6.9\n$ ./test/lint/lint-python.sh\ntest/functional/data/invalid_txs.py:24:1: F401 'typing.Optional' imported but unused\ntest/functional/test_framework/script.py:12:1: F401 'typing.List' imported but unused\ntest/functional/test_framework/script.py:12:1: F401 'typing.Dict' import",https://github.com/bitcoin/bitcoin/pull/18210#issuecomment-639266292,639266292,
fanquake,2020-02-26 02:34:48,We can't use these annotations while we are still supporting Python 3.5.,https://github.com/bitcoin/bitcoin/pull/18210#discussion_r384245231,384245231,test/functional/test_framework/test_framework.py
kiminuo,2020-02-26 06:20:39,"Yes, that's unfortunately true. However, Python 3.5 EOL is 09/2020. Is that a sufficient reason to bump Python version, or what is the policy for upgrade here?",https://github.com/bitcoin/bitcoin/pull/18210#discussion_r384293655,384293655,test/functional/test_framework/test_framework.py
MarcoFalke,2020-06-01 13:13:24,"This means that mypy is a requirement to run the tests, right?",https://github.com/bitcoin/bitcoin/pull/18210#discussion_r433225466,433225466,test/functional/data/invalid_txs.py
MarcoFalke,2020-06-01 13:15:07,"Ah no, this is the standard library: https://docs.python.org/3/library/typing.html",https://github.com/bitcoin/bitcoin/pull/18210#discussion_r433226305,433226305,test/functional/data/invalid_txs.py
kiminuo,2020-06-01 13:39:37,Right,https://github.com/bitcoin/bitcoin/pull/18210#discussion_r433239301,433239301,test/functional/data/invalid_txs.py
MarcoFalke,2020-06-01 13:57:50,"Can this be set to a specific version or is this assumed to be a stable program? We had trillion of issues with flake8 and codespell being updated from down under, so I'd like to avoid any such mishaps in the future.",https://github.com/bitcoin/bitcoin/pull/18210#discussion_r433249592,433249592,ci/lint/04_install.sh
kiminuo,2020-06-01 14:08:35,"Looks like there is a new release every month or so: https://github.com/python/mypy/releases (it should be stable enough though as they seem to fix bugs and improve it, they don't redesign it every month)\n\nSo it makes sense to set: `travis_retry pip3 install mypy==0.770`",https://github.com/bitcoin/bitcoin/pull/18210#discussion_r433256265,433256265,ci/lint/04_install.sh
kiminuo,2020-06-01 18:34:21,@MarcoFalke Done,https://github.com/bitcoin/bitcoin/pull/18210#discussion_r433414727,433414727,ci/lint/04_install.sh
fanquake,2020-06-02 00:44:22,The `type: ignore` here should no longer be required?,https://github.com/bitcoin/bitcoin/pull/18210#discussion_r433561476,433561476,test/functional/test_framework/test_framework.py
kiminuo,2020-06-02 06:09:08,You are right. Fixed.,https://github.com/bitcoin/bitcoin/pull/18210#discussion_r433640509,433640509,test/functional/test_framework/test_framework.py
ysangkok,2020-06-21 07:57:08,why did you set 0.700 instead of 0.770 like you mentioned in [this comment](https://github.com/bitcoin/bitcoin/pull/18210#discussion_r433256265)?,https://github.com/bitcoin/bitcoin/pull/18210#discussion_r443193088,443193088,ci/lint/04_install.sh
kiminuo,2020-06-21 07:59:16,I screwed up.,https://github.com/bitcoin/bitcoin/pull/18210#discussion_r443193268,443193268,ci/lint/04_install.sh
MarcoFalke,2020-06-21 09:54:21,I think this should be bumped because version 700 can not be compiled with python3.8-dev,https://github.com/bitcoin/bitcoin/pull/18210#discussion_r443202644,443202644,ci/lint/04_install.sh
