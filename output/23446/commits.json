[
  {
    "sha": "7eb5b25e6ec790577f84f48942c9e8791dec8697",
    "node_id": "C_kwDOABII59oAKDdlYjViMjVlNmVjNzkwNTc3Zjg0ZjQ4OTQyYzllODc5MWRlYzg2OTc",
    "commit": {
      "author": {
        "name": "W. J. van der Laan",
        "email": "laanwj@protonmail.com",
        "date": "2021-11-05T17:22:43Z"
      },
      "committer": {
        "name": "W. J. van der Laan",
        "email": "laanwj@protonmail.com",
        "date": "2021-11-05T18:27:17Z"
      },
      "message": "doc: Mention that BerkeleyDB is for legacy wallet in build-unix\n\nThis updates build-unix for the descriptor wallet, and prepares for\neventual legacy wallet deprecation.\n\n- Move 'descriptor wallet' dependencies above legacy wallet deps both\nfor Debian and Fedora.\n- Explicitly mention 'legacy wallet' where referring to the BerkeleyDB\nwallet. Shorten BerkeleyDB instruction to a single paragraph.",
      "tree": {
        "sha": "d6b8df3c9a03ad505570aba80b9ccb0b00cbc0a2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d6b8df3c9a03ad505570aba80b9ccb0b00cbc0a2"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7eb5b25e6ec790577f84f48942c9e8791dec8697",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7eb5b25e6ec790577f84f48942c9e8791dec8697",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/7eb5b25e6ec790577f84f48942c9e8791dec8697",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7eb5b25e6ec790577f84f48942c9e8791dec8697/comments",
    "author": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "77a2f5d30c5ecb764b8a7c098492e1f5cdec90f0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/77a2f5d30c5ecb764b8a7c098492e1f5cdec90f0",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/77a2f5d30c5ecb764b8a7c098492e1f5cdec90f0"
      }
    ],
    "stats": {
      "total": 38,
      "additions": 17,
      "deletions": 21
    },
    "files": [
      {
        "sha": "c6082436edbc15da96e99c14ccbbe142147a1b28",
        "filename": "doc/build-unix.md",
        "status": "modified",
        "additions": 17,
        "deletions": 21,
        "changes": 38,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/7eb5b25e6ec790577f84f48942c9e8791dec8697/doc/build-unix.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/7eb5b25e6ec790577f84f48942c9e8791dec8697/doc/build-unix.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/doc/build-unix.md?ref=7eb5b25e6ec790577f84f48942c9e8791dec8697",
        "patch": "@@ -42,12 +42,12 @@ Optional dependencies:\n  ------------|------------------|----------------------\n  miniupnpc   | UPnP Support     | Firewall-jumping support\n  libnatpmp   | NAT-PMP Support  | Firewall-jumping support\n- libdb4.8    | Berkeley DB      | Optional, wallet storage (only needed when wallet enabled)\n+ libdb4.8    | Berkeley DB      | Optional, wallet storage (only needed when legacy wallet enabled)\n  qt          | GUI              | GUI toolkit (only needed when GUI enabled)\n  libqrencode | QR codes in GUI  | Optional for generating QR codes (only needed when GUI enabled)\n  univalue    | Utility          | JSON parsing and encoding (bundled version will be used unless --with-system-univalue passed to configure)\n  libzmq3     | ZMQ notification | Optional, allows generating ZMQ notifications (requires ZMQ version >= 4.0.0)\n- sqlite3     | SQLite DB        | Optional, wallet storage (only needed when wallet enabled)\n+ sqlite3     | SQLite DB        | Optional, wallet storage (only needed when descriptor wallet enabled)\n  systemtap   | Tracing (USDT)   | Optional, statically defined tracepoints\n \n For the versions used, see [dependencies.md](dependencies.md)\n@@ -85,19 +85,15 @@ Now, you can either build from self-compiled [depends](/depends/README.md) or in\n \n     sudo apt-get install libevent-dev libboost-dev libboost-system-dev libboost-filesystem-dev libboost-test-dev\n \n-Berkeley DB is required for the wallet.\n-\n-Ubuntu and Debian have their own `libdb-dev` and `libdb++-dev` packages, but these will install\n-Berkeley DB 5.1 or later. This will break binary wallet compatibility with the distributed executables, which\n-are based on BerkeleyDB 4.8. If you do not care about wallet compatibility,\n-pass `--with-incompatible-bdb` to configure.\n-\n-Otherwise, you can build Berkeley DB [yourself](#berkeley-db).\n-\n SQLite is required for the descriptor wallet:\n \n     sudo apt install libsqlite3-dev\n \n+Berkeley DB is required for the legacy wallet. Ubuntu and Debian have their own `libdb-dev` and `libdb++-dev` packages,\n+but these will install Berkeley DB 5.1 or later. This will break binary wallet compatibility with the distributed\n+executables, which are based on BerkeleyDB 4.8. If you do not care about wallet compatibility, pass\n+`--with-incompatible-bdb` to configure. Otherwise, you can build Berkeley DB [yourself](#berkeley-db).\n+\n To build Bitcoin Core without wallet, see [*Disable-wallet mode*](#disable-wallet-mode)\n \n Optional port mapping libraries (see: `--with-miniupnpc`, `--enable-upnp-default`, and `--with-natpmp`, `--enable-natpmp-default`):\n@@ -146,20 +142,18 @@ Now, you can either build from self-compiled [depends](/depends/README.md) or in\n \n     sudo dnf install libevent-devel boost-devel\n \n-Berkeley DB is required for the wallet:\n+SQLite is required for the descriptor wallet:\n+\n+    sudo dnf install sqlite-devel\n+\n+Berkeley DB is required for the legacy wallet:\n \n     sudo dnf install libdb4-devel libdb4-cxx-devel\n \n Newer Fedora releases, since Fedora 33, have only `libdb-devel` and `libdb-cxx-devel` packages, but these will install\n Berkeley DB 5.3 or later. This will break binary wallet compatibility with the distributed executables, which\n are based on Berkeley DB 4.8. If you do not care about wallet compatibility,\n-pass `--with-incompatible-bdb` to configure.\n-\n-Otherwise, you can build Berkeley DB [yourself](#berkeley-db).\n-\n-SQLite is required for the descriptor wallet:\n-\n-    sudo dnf install sqlite-devel\n+pass `--with-incompatible-bdb` to configure. Otherwise, you can build Berkeley DB [yourself](#berkeley-db).\n \n To build Bitcoin Core without wallet, see [*Disable-wallet mode*](#disable-wallet-mode)\n \n@@ -225,8 +219,10 @@ turned off by default. See the configure options for NAT-PMP behavior desired:\n \n Berkeley DB\n -----------\n-It is recommended to use Berkeley DB 4.8. If you have to build it yourself,\n-you can use [the installation script included in contrib/](/contrib/install_db4.sh)\n+\n+The legacy wallet uses Berkeley DB. To ensure backwards compatibility it is\n+recommended to use Berkeley DB 4.8. If you have to build it yourself, you can\n+use [the installation script included in contrib/](/contrib/install_db4.sh)\n like so:\n \n ```shell"
      }
    ]
  }
]