Diapolo,2012-08-24T06:38:56Z,IMHO it would be nice to only need the monkey-patch code in one place.\n,https://github.com/bitcoin/bitcoin/pull/1716#issuecomment-7993551,7993551,
laanwj,2012-08-24T13:10:51Z,"And if you move all message queue related code to qtipcserver.cpp, this workaround could be limited to one file, which'd be nice.\n",https://github.com/bitcoin/bitcoin/pull/1716#issuecomment-8000776,8000776,
luke-jr,2012-08-24T17:01:51Z,How's that?\n,https://github.com/bitcoin/bitcoin/pull/1716#issuecomment-8008411,8008411,
TheBlueMatt,2012-08-24T20:28:35Z,Id highly prefer we just simply upgrade to boost 1.50 or later instead of continuing to use this patch.\n,https://github.com/bitcoin/bitcoin/pull/1716#issuecomment-8013895,8013895,
luke-jr,2012-08-24T20:42:53Z,"@TheBlueMatt No reason the Gitian build can't be updated to use 1.50 too, but it sounds non-trivial, and I think @gavinandresen wants to do 0.7rc1 today.\n",https://github.com/bitcoin/bitcoin/pull/1716#issuecomment-8014263,8014263,
laanwj,2012-08-25T07:08:11Z,"I do like the de-duplication of code, even if we're going to remove the workaround.\n\nAlso, note that at least boost 1.51 has a new issue (#1719) which surfaces in Wine but may possibly trigger in other cases when NtQuerySemaphore fails. Be careful.\n",https://github.com/bitcoin/bitcoin/pull/1716#issuecomment-8020881,8020881,
BitcoinPullTester,2012-08-26T02:40:07Z,"Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/ec6493e12c1c695cccfb69f31e2f5aaca6f95154 for binaries and test log.\n",https://github.com/bitcoin/bitcoin/pull/1716#issuecomment-8029574,8029574,
sipa,2012-08-27T00:30:51Z,"Can this be merged, or are there still issues? I'd be nice to do Windows gitian builds again...\n",https://github.com/bitcoin/bitcoin/pull/1716#issuecomment-8044806,8044806,
TheBlueMatt,2012-08-27T00:48:09Z,"ACK all except ""Bugfix: Move boost::interprocess Win32 workaround to Bitcoin-Qt sourc… "", Id really rather just switch to boost 1.50, I haven't heard anything about bugs as a result, plus we haven't started rc yet...\n",https://github.com/bitcoin/bitcoin/pull/1716#issuecomment-8044960,8044960,
luke-jr,2012-08-27T00:50:37Z,"Adjusted for @Diapolo's comment. Whether we switch to boost 1.50 or not is another issue IMO, and the 1.49 build should still be fixed either way...\n",https://github.com/bitcoin/bitcoin/pull/1716#issuecomment-8044982,8044982,
laanwj,2012-08-27T02:15:15Z,"I think this should be merged nevertheless. If anything, it is harmless when 1.50+ is used because of the version check.\n\nEdit: btw @luke-jr, now that you're changing the boost build,\n- can you add `runtime-link=static` to build only the mt-s variant that we use, instead of mt-s and mt? this just saves some compilation time.\n- also we need a `<ranlib>i686-w64-mingw32-ranlib` in user-config.jam",https://github.com/bitcoin/bitcoin/pull/1716#issuecomment-8045745,8045745,
TheBlueMatt,2012-08-27T02:53:13Z,"My point isnt that this shouldn't be merged (it should), but that I'd rather see 1.50 in 0.7 than use any of these patches or odd headers in 0.7, ie dont merge this and do 0.7rc1 right away.\n",https://github.com/bitcoin/bitcoin/pull/1716#issuecomment-8046075,8046075,
laanwj,2012-08-27T03:04:54Z,BTW I just verified: boost 1.50 does **not** suffer from #1719. \n,https://github.com/bitcoin/bitcoin/pull/1716#issuecomment-8046185,8046185,
Diapolo,2012-08-27T05:34:43Z,"I have to admit, I really like the idea of directly switching to Boost 1.50 and use that.\n\n@laanwj Did you yet report that Boost 1.51 bug to the Boost devs? Would be nice to notify them.\nJust for comparison, my Boost command-line to build contains `--build-type=minimal stage link=static runtime-link=static threading=multi variant=release -a -j 4 --with-filesystem --with-program_options --with-s",https://github.com/bitcoin/bitcoin/pull/1716#issuecomment-8047323,8047323,
gavinandresen,2012-08-27T15:57:15Z,"Compiling on the mac, I get warning:\n  src/qt/qtipcserver.cpp:29: warning: ‘void ipcThread2(void*)’ declared ‘static’ but never defined\n",https://github.com/bitcoin/bitcoin/pull/1716#issuecomment-8060398,8060398,
Diapolo,2012-08-27T16:34:39Z,"Well `ipcThread2()` is currently unused on Mac, perhaps we should put the declaration into an else-branch here: https://github.com/bitcoin/bitcoin/pull/1716/files#L3R37?\n",https://github.com/bitcoin/bitcoin/pull/1716#issuecomment-8061694,8061694,
luke-jr,2012-08-24T01:53:20Z,"I'm not sure if init.cpp needs this, but it does include some boost::interprocess stuff, so I included it just to be safe.\n",https://github.com/bitcoin/bitcoin/pull/1716#discussion_r1450847,1450847,src/init.cpp
laanwj,2012-08-24T06:05:42Z,Shouldn't this be <= 104900 ?\n,https://github.com/bitcoin/bitcoin/pull/1716#discussion_r1451504,1451504,src/qt/qtipcserver.cpp
Diapolo,2012-08-24T06:40:15Z,"I guess init.cpp does not need this, as we don't use message queues there.\n",https://github.com/bitcoin/bitcoin/pull/1716#discussion_r1451613,1451613,src/init.cpp
Diapolo,2012-08-24T06:42:44Z,"The code with 1.48 was also different, so to be safe I think that is correct.\nMatts code checks for < 1.49 for his compiler warning detection, but for the fix to work it has to be 1.49 (with version above that we could remove all that hacks and checks alltogether).\n",https://github.com/bitcoin/bitcoin/pull/1716#discussion_r1451619,1451619,src/qt/qtipcserver.cpp
laanwj,2012-08-24T13:08:03Z,"Yeah, that's true.\n",https://github.com/bitcoin/bitcoin/pull/1716#discussion_r1453373,1453373,src/qt/qtipcserver.cpp
laanwj,2012-08-24T13:10:40Z,"It only uses boost::interprocess::file_lock in init.cpp, so it's not needed there.\n",https://github.com/bitcoin/bitcoin/pull/1716#discussion_r1453385,1453385,src/init.cpp
Diapolo,2012-08-25T07:47:59Z,"I'm rather sure you can remove the above include, as win32_api.hpp get's included below message_queue.hpp.\n\ninterprocess/ipc/message_queue.hpp\nincludes: interprocess/detail/managed_open_or_create_impl.hpp\nincludes: interprocess/detail/os_thread_functions.hpp\ncontains:\n\n`#if (defined BOOST_INTERPROCESS_WINDOWS)`\n`#  include <boost/interprocess/detail/win32_api.hpp>`\n",https://github.com/bitcoin/bitcoin/pull/1716#discussion_r1459401,1459401,src/qt/qtipcserver.cpp
Diapolo,2012-08-25T07:49:53Z,"But if we continue to use the work-around for now, @luke-jr should include a small comment here IMHO.\n",https://github.com/bitcoin/bitcoin/pull/1716#discussion_r1459405,1459405,src/qt/qtipcserver.cpp
