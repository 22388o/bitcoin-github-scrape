[
  {
    "sha": "adba4e40f64a3db8465954d0d7f1d727105469c7",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzphZGJhNGU0MGY2NGEzZGI4NDY1OTU0ZDBkN2YxZDcyNzEwNTQ2OWM3",
    "commit": {
      "author": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2018-12-06T15:50:43Z"
      },
      "committer": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2018-12-06T17:41:50Z"
      },
      "message": "rpc: Support time specifiers in dumpwallet filename",
      "tree": {
        "sha": "fede4b40ccc3933f157bfba9bc467b5e18b01fe1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/fede4b40ccc3933f157bfba9bc467b5e18b01fe1"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/adba4e40f64a3db8465954d0d7f1d727105469c7",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/adba4e40f64a3db8465954d0d7f1d727105469c7",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/adba4e40f64a3db8465954d0d7f1d727105469c7",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/adba4e40f64a3db8465954d0d7f1d727105469c7/comments",
    "author": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "e2c473ff75f9ec272ab23e0ee30728b72aecd8f2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e2c473ff75f9ec272ab23e0ee30728b72aecd8f2",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/e2c473ff75f9ec272ab23e0ee30728b72aecd8f2"
      }
    ],
    "stats": {
      "total": 12,
      "additions": 8,
      "deletions": 4
    },
    "files": [
      {
        "sha": "c907f5408257a3858ae4b9167c8714304babdad5",
        "filename": "src/wallet/rpcdump.cpp",
        "status": "modified",
        "additions": 7,
        "deletions": 4,
        "changes": 11,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/adba4e40f64a3db8465954d0d7f1d727105469c7/src/wallet/rpcdump.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/adba4e40f64a3db8465954d0d7f1d727105469c7/src/wallet/rpcdump.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/rpcdump.cpp?ref=adba4e40f64a3db8465954d0d7f1d727105469c7",
        "patch": "@@ -719,7 +719,7 @@ UniValue dumpwallet(const JSONRPCRequest& request)\n                 \"Note that if your wallet contains keys which are not derived from your HD seed (e.g. imported keys), these are not covered by\\n\"\n                 \"only backing up the seed itself, and must be backed up too (e.g. ensure you back up the whole dumpfile).\\n\",\n                 {\n-                    {\"filename\", RPCArg::Type::STR, /* opt */ false, /* default_val */ \"\", \"The filename with path (either absolute or relative to bitcoind)\"},\n+                    {\"filename\", RPCArg::Type::STR, /* opt */ false, /* default_val */ \"\", \"The filename with path (either absolute or relative to bitcoind). TODO: mention time specifiers\"},\n                 }}\n                 .ToString() +\n             \"\\nResult:\\n\"\n@@ -728,16 +728,19 @@ UniValue dumpwallet(const JSONRPCRequest& request)\n             \"}\\n\"\n             \"\\nExamples:\\n\"\n             + HelpExampleCli(\"dumpwallet\", \"\\\"test\\\"\")\n-            + HelpExampleRpc(\"dumpwallet\", \"\\\"test\\\"\")\n+            + HelpExampleRpc(\"dumpwallet\", \"\\\"test_%Y%m%d_%H%M%S\\\"\")\n         );\n \n     auto locked_chain = pwallet->chain().lock();\n     LOCK(pwallet->cs_wallet);\n \n     EnsureWalletIsUnlocked(pwallet);\n \n-    fs::path filepath = request.params[0].get_str();\n-    filepath = fs::absolute(filepath);\n+    char path[1024];\n+    time_t now = time(0);\n+    strftime(path, sizeof(path), request.params[0].get_str().c_str(), localtime(&now));\n+\n+    const fs::path filepath = fs::absolute(fs::path(path));\n \n     /* Prevent arbitrary files from being overwritten. There have been reports\n      * that users have overwritten wallet files this way:"
      },
      {
        "sha": "5387d32d8acd812373f1e0c6eaa02956acac7043",
        "filename": "test/lint/lint-locale-dependence.sh",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/adba4e40f64a3db8465954d0d7f1d727105469c7/test/lint/lint-locale-dependence.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/adba4e40f64a3db8465954d0d7f1d727105469c7/test/lint/lint-locale-dependence.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/lint/lint-locale-dependence.sh?ref=adba4e40f64a3db8465954d0d7f1d727105469c7",
        "patch": "@@ -28,6 +28,7 @@ KNOWN_VIOLATIONS=(\n     \"src/util/strencodings.cpp:.*strtoul\"\n     \"src/util/strencodings.cpp:.*strtoull\"\n     \"src/util/strencodings.h:.*atoi\"\n+    \"src/wallet/rpcdump.cpp:.*strftime\"\n )\n \n REGEXP_IGNORE_EXTERNAL_DEPENDENCIES=\"^src/(crypto/ctaes/|leveldb/|secp256k1/|tinyformat.h|univalue/)\""
      }
    ]
  }
]