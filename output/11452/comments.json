[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/334309961",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11452#issuecomment-334309961",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11452",
    "id": 334309961,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNDMwOTk2MQ==",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?u=4a9af998e1a560b3f49c3827f453e1bcbe6a5cfb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-04T22:38:56Z",
    "updated_at": "2017-10-04T22:38:56Z",
    "author_association": "MEMBER",
    "body": "Ping @jnewbery, @ryanofsky and @TheBlueMatt.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/334309961/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/334353048",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11452#issuecomment-334353048",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11452",
    "id": 334353048,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNDM1MzA0OA==",
    "user": {
      "login": "esotericnonsense",
      "id": 7999704,
      "node_id": "MDQ6VXNlcjc5OTk3MDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7999704?u=2c4cbde362272b2679f7047c19673451d73a176f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/esotericnonsense",
      "html_url": "https://github.com/esotericnonsense",
      "followers_url": "https://api.github.com/users/esotericnonsense/followers",
      "following_url": "https://api.github.com/users/esotericnonsense/following{/other_user}",
      "gists_url": "https://api.github.com/users/esotericnonsense/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/esotericnonsense/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/esotericnonsense/subscriptions",
      "organizations_url": "https://api.github.com/users/esotericnonsense/orgs",
      "repos_url": "https://api.github.com/users/esotericnonsense/repos",
      "events_url": "https://api.github.com/users/esotericnonsense/events{/privacy}",
      "received_events_url": "https://api.github.com/users/esotericnonsense/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-05T04:05:29Z",
    "updated_at": "2017-10-05T04:05:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "Tested ACK db3b646bac37a54cb09f121b048fcfbb6d522808, few nits above.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/334353048/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/334411403",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11452#issuecomment-334411403",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11452",
    "id": 334411403,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNDQxMTQwMw==",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?u=4a9af998e1a560b3f49c3827f453e1bcbe6a5cfb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-05T09:29:37Z",
    "updated_at": "2017-10-05T09:29:37Z",
    "author_association": "MEMBER",
    "body": "Thanks for the review @esotericnonsense.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/334411403/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/335321698",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11452#issuecomment-335321698",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11452",
    "id": 335321698,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNTMyMTY5OA==",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?u=4a9af998e1a560b3f49c3827f453e1bcbe6a5cfb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-10T00:04:35Z",
    "updated_at": "2017-10-10T00:04:35Z",
    "author_association": "MEMBER",
    "body": "Rebased and added a commit to address comments.Will squash after reviews.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/335321698/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/335630899",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11452#issuecomment-335630899",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11452",
    "id": 335630899,
    "node_id": "MDEyOklzc3VlQ29tbWVudDMzNTYzMDg5OQ==",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?u=4a9af998e1a560b3f49c3827f453e1bcbe6a5cfb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2017-10-10T22:50:17Z",
    "updated_at": "2017-10-10T22:50:17Z",
    "author_association": "MEMBER",
    "body": "@jnewbery Thanks, renamed to `topic`. Now squashed.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/335630899/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142842750",
    "pull_request_review_id": 67263302,
    "id": 142842750,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0Mjg0Mjc1MA==",
    "diff_hunk": "@@ -33,121 +57,68 @@ def setup_nodes(self):\n         if not config[\"components\"].getboolean(\"ENABLE_ZMQ\"):\n             raise SkipTest(\"bitcoind has not been built with zmq enabled.\")\n \n-        self.zmqContext = zmq.Context()\n-        self.zmqSubSocket = self.zmqContext.socket(zmq.SUB)\n-        self.zmqSubSocket.set(zmq.RCVTIMEO, 60000)\n-        self.zmqSubSocket.setsockopt(zmq.SUBSCRIBE, b\"hashblock\")\n-        self.zmqSubSocket.setsockopt(zmq.SUBSCRIBE, b\"hashtx\")\n-        self.zmqSubSocket.setsockopt(zmq.SUBSCRIBE, b\"rawblock\")\n-        self.zmqSubSocket.setsockopt(zmq.SUBSCRIBE, b\"rawtx\")\n-        ip_address = \"tcp://127.0.0.1:28332\"\n-        self.zmqSubSocket.connect(ip_address)\n-        self.extra_args = [['-zmqpubhashblock=%s' % ip_address, '-zmqpubhashtx=%s' % ip_address,\n-                       '-zmqpubrawblock=%s' % ip_address, '-zmqpubrawtx=%s' % ip_address], []]\n+        # Initialize ZMQ context and socket.\n+        # At the moment all messages are received in the same socket which means\n+        # that this test fails if the publishing order changes.\n+        # Note that the publishing order is not defined in the documentation and\n+        # is subject to change.\n+        self.zmq_context = zmq.Context()\n+        self.socket = self.zmq_context.socket(zmq.SUB)\n+        self.socket.set(zmq.RCVTIMEO, 60000)\n+        self.socket.connect(self.address)\n+\n+        # Subscribe to all available topics.\n+        self.subscribe(\"hashblock\")\n+        self.subscribe(\"hashtx\")\n+        self.subscribe(\"rawblock\")\n+        self.subscribe(\"rawtx\")",
    "path": "test/functional/zmq_test.py",
    "position": null,
    "original_position": 81,
    "commit_id": "cc9ee809ad19a63ca284d2fbc327ac1cbcee31e4",
    "original_commit_id": "db3b646bac37a54cb09f121b048fcfbb6d522808",
    "user": {
      "login": "esotericnonsense",
      "id": 7999704,
      "node_id": "MDQ6VXNlcjc5OTk3MDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7999704?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/esotericnonsense",
      "html_url": "https://github.com/esotericnonsense",
      "followers_url": "https://api.github.com/users/esotericnonsense/followers",
      "following_url": "https://api.github.com/users/esotericnonsense/following{/other_user}",
      "gists_url": "https://api.github.com/users/esotericnonsense/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/esotericnonsense/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/esotericnonsense/subscriptions",
      "organizations_url": "https://api.github.com/users/esotericnonsense/orgs",
      "repos_url": "https://api.github.com/users/esotericnonsense/repos",
      "events_url": "https://api.github.com/users/esotericnonsense/events{/privacy}",
      "received_events_url": "https://api.github.com/users/esotericnonsense/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I found 'subscribe' a bit misleading here, though it could be that I'm thinking too much.\r\nIt's not merely a standard ZeroMQ subscription; the ZMQSubscriber class created tracks sequence. As it's written, my immediate thought was 'why aren't we just doing `self.subscribe(\"\")`' (pre this commit, the four setsockopt calls could have been replaced with just one).\r\nPerhaps 'create_subscriber' or fluffing up the comment a bit.",
    "created_at": "2017-10-05T03:48:15Z",
    "updated_at": "2017-10-10T22:49:35Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11452#discussion_r142842750",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11452",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142842750"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/11452#discussion_r142842750"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11452"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142842750/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 74,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142842981",
    "pull_request_review_id": 67263302,
    "id": 142842981,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0Mjg0Mjk4MQ==",
    "diff_hunk": "@@ -13,9 +13,33 @@\n                                  hash256,\n                                 )\n \n+class ZMQSubscriber:\n+    def __init__(self, socket, address):\n+        self.address = address\n+        self.socket = socket\n+        self.sequence = 0\n+\n class ZMQTest (BitcoinTestFramework):\n     def set_test_params(self):\n+        self.address = \"tcp://127.0.0.1:28332\"\n+        self.num_blocks = 5\n         self.num_nodes = 2\n+        self.subscribers = {}\n+\n+    def subscribe(self, type):\n+        import zmq\n+        self.socket.setsockopt(zmq.SUBSCRIBE, type.encode('latin-1'))\n+        self.subscribers[type] = ZMQSubscriber(self.socket, self.address)\n+\n+    def receive(self, type):\n+        subscriber = self.subscribers[type]\n+        topic, body, seq = subscriber.socket.recv_multipart()",
    "path": "test/functional/zmq_test.py",
    "position": null,
    "original_position": 33,
    "commit_id": "cc9ee809ad19a63ca284d2fbc327ac1cbcee31e4",
    "original_commit_id": "db3b646bac37a54cb09f121b048fcfbb6d522808",
    "user": {
      "login": "esotericnonsense",
      "id": 7999704,
      "node_id": "MDQ6VXNlcjc5OTk3MDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7999704?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/esotericnonsense",
      "html_url": "https://github.com/esotericnonsense",
      "followers_url": "https://api.github.com/users/esotericnonsense/followers",
      "following_url": "https://api.github.com/users/esotericnonsense/following{/other_user}",
      "gists_url": "https://api.github.com/users/esotericnonsense/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/esotericnonsense/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/esotericnonsense/subscriptions",
      "organizations_url": "https://api.github.com/users/esotericnonsense/orgs",
      "repos_url": "https://api.github.com/users/esotericnonsense/repos",
      "events_url": "https://api.github.com/users/esotericnonsense/events{/privacy}",
      "received_events_url": "https://api.github.com/users/esotericnonsense/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "The subscribers don't actually have independent sockets, perhaps just use self.socket?",
    "created_at": "2017-10-05T03:51:12Z",
    "updated_at": "2017-10-10T22:49:35Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11452#discussion_r142842981",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11452",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142842981"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/11452#discussion_r142842981"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11452"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142842981/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 36,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142843513",
    "pull_request_review_id": 67263302,
    "id": 142843513,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0Mjg0MzUxMw==",
    "diff_hunk": "@@ -13,9 +13,33 @@\n                                  hash256,\n                                 )\n \n+class ZMQSubscriber:\n+    def __init__(self, socket, address):\n+        self.address = address\n+        self.socket = socket\n+        self.sequence = 0\n+\n class ZMQTest (BitcoinTestFramework):\n     def set_test_params(self):\n+        self.address = \"tcp://127.0.0.1:28332\"\n+        self.num_blocks = 5\n         self.num_nodes = 2\n+        self.subscribers = {}\n+\n+    def subscribe(self, type):\n+        import zmq\n+        self.socket.setsockopt(zmq.SUBSCRIBE, type.encode('latin-1'))\n+        self.subscribers[type] = ZMQSubscriber(self.socket, self.address)\n+\n+    def receive(self, type):",
    "path": "test/functional/zmq_test.py",
    "position": null,
    "original_position": 31,
    "commit_id": "cc9ee809ad19a63ca284d2fbc327ac1cbcee31e4",
    "original_commit_id": "db3b646bac37a54cb09f121b048fcfbb6d522808",
    "user": {
      "login": "esotericnonsense",
      "id": 7999704,
      "node_id": "MDQ6VXNlcjc5OTk3MDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7999704?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/esotericnonsense",
      "html_url": "https://github.com/esotericnonsense",
      "followers_url": "https://api.github.com/users/esotericnonsense/followers",
      "following_url": "https://api.github.com/users/esotericnonsense/following{/other_user}",
      "gists_url": "https://api.github.com/users/esotericnonsense/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/esotericnonsense/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/esotericnonsense/subscriptions",
      "organizations_url": "https://api.github.com/users/esotericnonsense/orgs",
      "repos_url": "https://api.github.com/users/esotericnonsense/repos",
      "events_url": "https://api.github.com/users/esotericnonsense/events{/privacy}",
      "received_events_url": "https://api.github.com/users/esotericnonsense/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "nit: assert_receive? My initial thought was that you're selectively receiving a type (which makes sense if different sockets, but if the sockets are all identical, you get what you're given, as this code tests)",
    "created_at": "2017-10-05T03:58:18Z",
    "updated_at": "2017-10-10T22:49:35Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11452#discussion_r142843513",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11452",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142843513"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/11452#discussion_r142843513"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11452"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142843513/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 34,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142843905",
    "pull_request_review_id": 67264458,
    "id": 142843905,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0Mjg0MzkwNQ==",
    "diff_hunk": "@@ -24,7 +48,7 @@ def setup_nodes(self):\n         except ImportError:\n             raise SkipTest(\"python3-zmq module not available.\")\n \n-        # Check that bitcoin has been built with ZMQ enabled\n+        # Check that bitcoin has been built with ZMQ enabled.\n         config = configparser.ConfigParser()\n         if not self.options.configfile:\n             self.options.configfile = os.path.dirname(__file__) + \"/../config.ini\"",
    "path": "test/functional/zmq_test.py",
    "position": null,
    "original_position": 51,
    "commit_id": "cc9ee809ad19a63ca284d2fbc327ac1cbcee31e4",
    "original_commit_id": "db3b646bac37a54cb09f121b048fcfbb6d522808",
    "user": {
      "login": "esotericnonsense",
      "id": 7999704,
      "node_id": "MDQ6VXNlcjc5OTk3MDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7999704?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/esotericnonsense",
      "html_url": "https://github.com/esotericnonsense",
      "followers_url": "https://api.github.com/users/esotericnonsense/followers",
      "following_url": "https://api.github.com/users/esotericnonsense/following{/other_user}",
      "gists_url": "https://api.github.com/users/esotericnonsense/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/esotericnonsense/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/esotericnonsense/subscriptions",
      "organizations_url": "https://api.github.com/users/esotericnonsense/orgs",
      "repos_url": "https://api.github.com/users/esotericnonsense/repos",
      "events_url": "https://api.github.com/users/esotericnonsense/events{/privacy}",
      "received_events_url": "https://api.github.com/users/esotericnonsense/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Likely a pre-existing issue, on my box this prevents `python zmq_test.py` running in isolation (works through test_runner because the option already exists). If you wrap it e.g. `os.path.abspath(os.path.dirname(__file__))` (as test_runner.py does) it works.",
    "created_at": "2017-10-05T04:03:39Z",
    "updated_at": "2017-10-10T22:49:35Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11452#discussion_r142843905",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11452",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142843905"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/11452#discussion_r142843905"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11452"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142843905/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 48,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142888382",
    "pull_request_review_id": 67315309,
    "id": 142888382,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0Mjg4ODM4Mg==",
    "diff_hunk": "@@ -24,7 +48,7 @@ def setup_nodes(self):\n         except ImportError:\n             raise SkipTest(\"python3-zmq module not available.\")\n \n-        # Check that bitcoin has been built with ZMQ enabled\n+        # Check that bitcoin has been built with ZMQ enabled.\n         config = configparser.ConfigParser()\n         if not self.options.configfile:\n             self.options.configfile = os.path.dirname(__file__) + \"/../config.ini\"",
    "path": "test/functional/zmq_test.py",
    "position": null,
    "original_position": 51,
    "commit_id": "cc9ee809ad19a63ca284d2fbc327ac1cbcee31e4",
    "original_commit_id": "db3b646bac37a54cb09f121b048fcfbb6d522808",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "It works for me \ud83d\ude44 ",
    "created_at": "2017-10-05T09:22:58Z",
    "updated_at": "2017-10-10T22:49:35Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11452#discussion_r142888382",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11452",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142888382"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/11452#discussion_r142888382"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11452"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142888382/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 48,
    "side": "RIGHT",
    "in_reply_to_id": 142843905
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142888442",
    "pull_request_review_id": 67315371,
    "id": 142888442,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0Mjg4ODQ0Mg==",
    "diff_hunk": "@@ -33,121 +57,68 @@ def setup_nodes(self):\n         if not config[\"components\"].getboolean(\"ENABLE_ZMQ\"):\n             raise SkipTest(\"bitcoind has not been built with zmq enabled.\")\n \n-        self.zmqContext = zmq.Context()\n-        self.zmqSubSocket = self.zmqContext.socket(zmq.SUB)\n-        self.zmqSubSocket.set(zmq.RCVTIMEO, 60000)\n-        self.zmqSubSocket.setsockopt(zmq.SUBSCRIBE, b\"hashblock\")\n-        self.zmqSubSocket.setsockopt(zmq.SUBSCRIBE, b\"hashtx\")\n-        self.zmqSubSocket.setsockopt(zmq.SUBSCRIBE, b\"rawblock\")\n-        self.zmqSubSocket.setsockopt(zmq.SUBSCRIBE, b\"rawtx\")\n-        ip_address = \"tcp://127.0.0.1:28332\"\n-        self.zmqSubSocket.connect(ip_address)\n-        self.extra_args = [['-zmqpubhashblock=%s' % ip_address, '-zmqpubhashtx=%s' % ip_address,\n-                       '-zmqpubrawblock=%s' % ip_address, '-zmqpubrawtx=%s' % ip_address], []]\n+        # Initialize ZMQ context and socket.\n+        # At the moment all messages are received in the same socket which means\n+        # that this test fails if the publishing order changes.\n+        # Note that the publishing order is not defined in the documentation and\n+        # is subject to change.\n+        self.zmq_context = zmq.Context()\n+        self.socket = self.zmq_context.socket(zmq.SUB)\n+        self.socket.set(zmq.RCVTIMEO, 60000)\n+        self.socket.connect(self.address)\n+\n+        # Subscribe to all available topics.\n+        self.subscribe(\"hashblock\")\n+        self.subscribe(\"hashtx\")\n+        self.subscribe(\"rawblock\")\n+        self.subscribe(\"rawtx\")",
    "path": "test/functional/zmq_test.py",
    "position": null,
    "original_position": 81,
    "commit_id": "cc9ee809ad19a63ca284d2fbc327ac1cbcee31e4",
    "original_commit_id": "db3b646bac37a54cb09f121b048fcfbb6d522808",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I can rename.",
    "created_at": "2017-10-05T09:23:14Z",
    "updated_at": "2017-10-10T22:49:35Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11452#discussion_r142888442",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11452",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142888442"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/11452#discussion_r142888442"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11452"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142888442/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 74,
    "side": "RIGHT",
    "in_reply_to_id": 142842750
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142888665",
    "pull_request_review_id": 67315628,
    "id": 142888665,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0Mjg4ODY2NQ==",
    "diff_hunk": "@@ -13,9 +13,33 @@\n                                  hash256,\n                                 )\n \n+class ZMQSubscriber:\n+    def __init__(self, socket, address):\n+        self.address = address\n+        self.socket = socket\n+        self.sequence = 0\n+\n class ZMQTest (BitcoinTestFramework):\n     def set_test_params(self):\n+        self.address = \"tcp://127.0.0.1:28332\"\n+        self.num_blocks = 5\n         self.num_nodes = 2\n+        self.subscribers = {}\n+\n+    def subscribe(self, type):\n+        import zmq\n+        self.socket.setsockopt(zmq.SUBSCRIBE, type.encode('latin-1'))\n+        self.subscribers[type] = ZMQSubscriber(self.socket, self.address)\n+\n+    def receive(self, type):\n+        subscriber = self.subscribers[type]\n+        topic, body, seq = subscriber.socket.recv_multipart()",
    "path": "test/functional/zmq_test.py",
    "position": null,
    "original_position": 33,
    "commit_id": "cc9ee809ad19a63ca284d2fbc327ac1cbcee31e4",
    "original_commit_id": "db3b646bac37a54cb09f121b048fcfbb6d522808",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I would like to leave it this way so in the future we can have more sockets.",
    "created_at": "2017-10-05T09:24:18Z",
    "updated_at": "2017-10-10T22:49:35Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11452#discussion_r142888665",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11452",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142888665"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/11452#discussion_r142888665"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11452"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142888665/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 36,
    "side": "RIGHT",
    "in_reply_to_id": 142842981
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142889692",
    "pull_request_review_id": 67316847,
    "id": 142889692,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0Mjg4OTY5Mg==",
    "diff_hunk": "@@ -13,9 +13,33 @@\n                                  hash256,\n                                 )\n \n+class ZMQSubscriber:\n+    def __init__(self, socket, address):\n+        self.address = address\n+        self.socket = socket\n+        self.sequence = 0\n+\n class ZMQTest (BitcoinTestFramework):\n     def set_test_params(self):\n+        self.address = \"tcp://127.0.0.1:28332\"\n+        self.num_blocks = 5\n         self.num_nodes = 2\n+        self.subscribers = {}\n+\n+    def subscribe(self, type):\n+        import zmq\n+        self.socket.setsockopt(zmq.SUBSCRIBE, type.encode('latin-1'))\n+        self.subscribers[type] = ZMQSubscriber(self.socket, self.address)\n+\n+    def receive(self, type):",
    "path": "test/functional/zmq_test.py",
    "position": null,
    "original_position": 31,
    "commit_id": "cc9ee809ad19a63ca284d2fbc327ac1cbcee31e4",
    "original_commit_id": "db3b646bac37a54cb09f121b048fcfbb6d522808",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Below feels better to read `foo = self.receive(...)`, no need for the `assert_` IMO.\r\n\r\n> but if the sockets are all identical, you get what you're given\r\n\r\nNot really, if below you swap 2 consecutive receives the test will fail. What comes from the socket has a specific order and we must follow it when reading.",
    "created_at": "2017-10-05T09:29:07Z",
    "updated_at": "2017-10-10T22:49:35Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11452#discussion_r142889692",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11452",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142889692"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/11452#discussion_r142889692"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11452"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142889692/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 34,
    "side": "RIGHT",
    "in_reply_to_id": 142843513
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142889747",
    "pull_request_review_id": 67316913,
    "id": 142889747,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0Mjg4OTc0Nw==",
    "diff_hunk": "@@ -24,7 +48,7 @@ def setup_nodes(self):\n         except ImportError:\n             raise SkipTest(\"python3-zmq module not available.\")\n \n-        # Check that bitcoin has been built with ZMQ enabled\n+        # Check that bitcoin has been built with ZMQ enabled.\n         config = configparser.ConfigParser()\n         if not self.options.configfile:\n             self.options.configfile = os.path.dirname(__file__) + \"/../config.ini\"",
    "path": "test/functional/zmq_test.py",
    "position": null,
    "original_position": 51,
    "commit_id": "cc9ee809ad19a63ca284d2fbc327ac1cbcee31e4",
    "original_commit_id": "db3b646bac37a54cb09f121b048fcfbb6d522808",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I'll check with your suggestion.",
    "created_at": "2017-10-05T09:29:24Z",
    "updated_at": "2017-10-10T22:49:35Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11452#discussion_r142889747",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11452",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142889747"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/11452#discussion_r142889747"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11452"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142889747/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 48,
    "side": "RIGHT",
    "in_reply_to_id": 142843905
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142908671",
    "pull_request_review_id": 67339303,
    "id": 142908671,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0MjkwODY3MQ==",
    "diff_hunk": "@@ -24,7 +48,7 @@ def setup_nodes(self):\n         except ImportError:\n             raise SkipTest(\"python3-zmq module not available.\")\n \n-        # Check that bitcoin has been built with ZMQ enabled\n+        # Check that bitcoin has been built with ZMQ enabled.\n         config = configparser.ConfigParser()\n         if not self.options.configfile:\n             self.options.configfile = os.path.dirname(__file__) + \"/../config.ini\"",
    "path": "test/functional/zmq_test.py",
    "position": null,
    "original_position": 51,
    "commit_id": "cc9ee809ad19a63ca284d2fbc327ac1cbcee31e4",
    "original_commit_id": "db3b646bac37a54cb09f121b048fcfbb6d522808",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Also should use `os.path.join()`",
    "created_at": "2017-10-05T11:07:11Z",
    "updated_at": "2017-10-10T22:49:35Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11452#discussion_r142908671",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11452",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142908671"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/11452#discussion_r142908671"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11452"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142908671/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 48,
    "side": "RIGHT",
    "in_reply_to_id": 142843905
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142950638",
    "pull_request_review_id": 67389455,
    "id": 142950638,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0Mjk1MDYzOA==",
    "diff_hunk": "@@ -13,9 +13,33 @@\n                                  hash256,\n                                 )\n \n+class ZMQSubscriber:\n+    def __init__(self, socket, address):\n+        self.address = address\n+        self.socket = socket\n+        self.sequence = 0\n+\n class ZMQTest (BitcoinTestFramework):\n     def set_test_params(self):\n+        self.address = \"tcp://127.0.0.1:28332\"\n+        self.num_blocks = 5\n         self.num_nodes = 2\n+        self.subscribers = {}",
    "path": "test/functional/zmq_test.py",
    "position": null,
    "original_position": 24,
    "commit_id": "cc9ee809ad19a63ca284d2fbc327ac1cbcee31e4",
    "original_commit_id": "db3b646bac37a54cb09f121b048fcfbb6d522808",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I don't like adding these assignments to `set_test_params`.\r\n\r\n- `num_blocks` and `subscribers` can be local variables in `run_test()`\r\n- `address` should be a local variable in `setup_nodes()` and passed into the `ZMQSubscriber` constructor. Conceptually, `address` is the address of the ZMQ subscriber, not the test framework.\r\n\r\n`set_test_params()` should be used for overriding the number of nodes, network topology, etc.",
    "created_at": "2017-10-05T14:17:35Z",
    "updated_at": "2017-10-10T22:49:35Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11452#discussion_r142950638",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11452",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142950638"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/11452#discussion_r142950638"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11452"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142950638/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 27,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142951570",
    "pull_request_review_id": 67389455,
    "id": 142951570,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0Mjk1MTU3MA==",
    "diff_hunk": "@@ -33,121 +57,68 @@ def setup_nodes(self):\n         if not config[\"components\"].getboolean(\"ENABLE_ZMQ\"):\n             raise SkipTest(\"bitcoind has not been built with zmq enabled.\")\n \n-        self.zmqContext = zmq.Context()\n-        self.zmqSubSocket = self.zmqContext.socket(zmq.SUB)\n-        self.zmqSubSocket.set(zmq.RCVTIMEO, 60000)\n-        self.zmqSubSocket.setsockopt(zmq.SUBSCRIBE, b\"hashblock\")\n-        self.zmqSubSocket.setsockopt(zmq.SUBSCRIBE, b\"hashtx\")\n-        self.zmqSubSocket.setsockopt(zmq.SUBSCRIBE, b\"rawblock\")\n-        self.zmqSubSocket.setsockopt(zmq.SUBSCRIBE, b\"rawtx\")\n-        ip_address = \"tcp://127.0.0.1:28332\"\n-        self.zmqSubSocket.connect(ip_address)\n-        self.extra_args = [['-zmqpubhashblock=%s' % ip_address, '-zmqpubhashtx=%s' % ip_address,\n-                       '-zmqpubrawblock=%s' % ip_address, '-zmqpubrawtx=%s' % ip_address], []]\n+        # Initialize ZMQ context and socket.\n+        # At the moment all messages are received in the same socket which means",
    "path": "test/functional/zmq_test.py",
    "position": null,
    "original_position": 68,
    "commit_id": "cc9ee809ad19a63ca284d2fbc327ac1cbcee31e4",
    "original_commit_id": "db3b646bac37a54cb09f121b048fcfbb6d522808",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Nit: remove `At the moment`",
    "created_at": "2017-10-05T14:20:40Z",
    "updated_at": "2017-10-10T22:49:35Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11452#discussion_r142951570",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11452",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142951570"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/11452#discussion_r142951570"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11452"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142951570/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 61,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142952369",
    "pull_request_review_id": 67389455,
    "id": 142952369,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0Mjk1MjM2OQ==",
    "diff_hunk": "@@ -13,9 +13,33 @@\n                                  hash256,\n                                 )\n \n+class ZMQSubscriber:\n+    def __init__(self, socket, address):\n+        self.address = address\n+        self.socket = socket\n+        self.sequence = 0\n+\n class ZMQTest (BitcoinTestFramework):\n     def set_test_params(self):\n+        self.address = \"tcp://127.0.0.1:28332\"\n+        self.num_blocks = 5\n         self.num_nodes = 2\n+        self.subscribers = {}\n+\n+    def subscribe(self, type):",
    "path": "test/functional/zmq_test.py",
    "position": null,
    "original_position": 26,
    "commit_id": "cc9ee809ad19a63ca284d2fbc327ac1cbcee31e4",
    "original_commit_id": "db3b646bac37a54cb09f121b048fcfbb6d522808",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "As in my comment here https://github.com/bitcoin/bitcoin/pull/11439#discussion_r142474301, I think it makes sense for the subscribe and receive logic to be owned by `ZMQSubscriber`",
    "created_at": "2017-10-05T14:23:26Z",
    "updated_at": "2017-10-10T22:49:35Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11452#discussion_r142952369",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11452",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142952369"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/11452#discussion_r142952369"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11452"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142952369/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 29,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142999932",
    "pull_request_review_id": 67447625,
    "id": 142999932,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0Mjk5OTkzMg==",
    "diff_hunk": "@@ -24,7 +48,7 @@ def setup_nodes(self):\n         except ImportError:\n             raise SkipTest(\"python3-zmq module not available.\")\n \n-        # Check that bitcoin has been built with ZMQ enabled\n+        # Check that bitcoin has been built with ZMQ enabled.\n         config = configparser.ConfigParser()\n         if not self.options.configfile:\n             self.options.configfile = os.path.dirname(__file__) + \"/../config.ini\"",
    "path": "test/functional/zmq_test.py",
    "position": null,
    "original_position": 51,
    "commit_id": "cc9ee809ad19a63ca284d2fbc327ac1cbcee31e4",
    "original_commit_id": "db3b646bac37a54cb09f121b048fcfbb6d522808",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Ok.",
    "created_at": "2017-10-05T17:12:47Z",
    "updated_at": "2017-10-10T22:49:35Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11452#discussion_r142999932",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11452",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142999932"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/11452#discussion_r142999932"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11452"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/142999932/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 48,
    "side": "RIGHT",
    "in_reply_to_id": 142843905
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143305195",
    "pull_request_review_id": 67805796,
    "id": 143305195,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0MzMwNTE5NQ==",
    "diff_hunk": "@@ -13,9 +13,33 @@\n                                  hash256,\n                                 )\n \n+class ZMQSubscriber:\n+    def __init__(self, socket, address):\n+        self.address = address\n+        self.socket = socket\n+        self.sequence = 0\n+\n class ZMQTest (BitcoinTestFramework):\n     def set_test_params(self):\n+        self.address = \"tcp://127.0.0.1:28332\"\n+        self.num_blocks = 5\n         self.num_nodes = 2\n+        self.subscribers = {}",
    "path": "test/functional/zmq_test.py",
    "position": null,
    "original_position": 24,
    "commit_id": "cc9ee809ad19a63ca284d2fbc327ac1cbcee31e4",
    "original_commit_id": "db3b646bac37a54cb09f121b048fcfbb6d522808",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Ok.",
    "created_at": "2017-10-06T22:16:23Z",
    "updated_at": "2017-10-10T22:49:35Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11452#discussion_r143305195",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11452",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143305195"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/11452#discussion_r143305195"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11452"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143305195/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 27,
    "side": "RIGHT",
    "in_reply_to_id": 142950638
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143604805",
    "pull_request_review_id": 68138999,
    "id": 143604805,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0MzYwNDgwNQ==",
    "diff_hunk": "@@ -13,9 +13,33 @@\n                                  hash256,\n                                 )\n \n+class ZMQSubscriber:\n+    def __init__(self, socket, address):\n+        self.address = address\n+        self.socket = socket\n+        self.sequence = 0\n+\n class ZMQTest (BitcoinTestFramework):\n     def set_test_params(self):\n+        self.address = \"tcp://127.0.0.1:28332\"\n+        self.num_blocks = 5\n         self.num_nodes = 2\n+        self.subscribers = {}\n+\n+    def subscribe(self, type):",
    "path": "test/functional/zmq_test.py",
    "position": null,
    "original_position": 26,
    "commit_id": "cc9ee809ad19a63ca284d2fbc327ac1cbcee31e4",
    "original_commit_id": "db3b646bac37a54cb09f121b048fcfbb6d522808",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Ok.",
    "created_at": "2017-10-10T00:02:59Z",
    "updated_at": "2017-10-10T22:49:35Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11452#discussion_r143604805",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11452",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143604805"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/11452#discussion_r143604805"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11452"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143604805/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 29,
    "side": "RIGHT",
    "in_reply_to_id": 142952369
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143604809",
    "pull_request_review_id": 68139006,
    "id": 143604809,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0MzYwNDgwOQ==",
    "diff_hunk": "@@ -33,121 +57,68 @@ def setup_nodes(self):\n         if not config[\"components\"].getboolean(\"ENABLE_ZMQ\"):\n             raise SkipTest(\"bitcoind has not been built with zmq enabled.\")\n \n-        self.zmqContext = zmq.Context()\n-        self.zmqSubSocket = self.zmqContext.socket(zmq.SUB)\n-        self.zmqSubSocket.set(zmq.RCVTIMEO, 60000)\n-        self.zmqSubSocket.setsockopt(zmq.SUBSCRIBE, b\"hashblock\")\n-        self.zmqSubSocket.setsockopt(zmq.SUBSCRIBE, b\"hashtx\")\n-        self.zmqSubSocket.setsockopt(zmq.SUBSCRIBE, b\"rawblock\")\n-        self.zmqSubSocket.setsockopt(zmq.SUBSCRIBE, b\"rawtx\")\n-        ip_address = \"tcp://127.0.0.1:28332\"\n-        self.zmqSubSocket.connect(ip_address)\n-        self.extra_args = [['-zmqpubhashblock=%s' % ip_address, '-zmqpubhashtx=%s' % ip_address,\n-                       '-zmqpubrawblock=%s' % ip_address, '-zmqpubrawtx=%s' % ip_address], []]\n+        # Initialize ZMQ context and socket.\n+        # At the moment all messages are received in the same socket which means",
    "path": "test/functional/zmq_test.py",
    "position": null,
    "original_position": 68,
    "commit_id": "cc9ee809ad19a63ca284d2fbc327ac1cbcee31e4",
    "original_commit_id": "db3b646bac37a54cb09f121b048fcfbb6d522808",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Ok.",
    "created_at": "2017-10-10T00:03:02Z",
    "updated_at": "2017-10-10T22:49:35Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11452#discussion_r143604809",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11452",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143604809"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/11452#discussion_r143604809"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11452"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143604809/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 61,
    "side": "RIGHT",
    "in_reply_to_id": 142951570
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143774127",
    "pull_request_review_id": 68335406,
    "id": 143774127,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0Mzc3NDEyNw==",
    "diff_hunk": "@@ -13,6 +13,25 @@\n                                  hash256,\n                                 )\n \n+class ZMQSubscriber:\n+    def __init__(self, socket, type):",
    "path": "test/functional/zmq_test.py",
    "position": null,
    "original_position": 14,
    "commit_id": "cc9ee809ad19a63ca284d2fbc327ac1cbcee31e4",
    "original_commit_id": "480c4526b845f69072306a047a4718d769403cdd",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "[type is a builtin](https://docs.python.org/3/library/functions.html#type). Perhaps `notification _type` is better?",
    "created_at": "2017-10-10T15:59:28Z",
    "updated_at": "2017-10-10T22:49:35Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11452#discussion_r143774127",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11452",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143774127"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/11452#discussion_r143774127"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11452"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143774127/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 17,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144096057",
    "pull_request_review_id": 68705364,
    "id": 144096057,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0NDA5NjA1Nw==",
    "diff_hunk": "@@ -24,130 +43,79 @@ def setup_nodes(self):\n         except ImportError:\n             raise SkipTest(\"python3-zmq module not available.\")\n \n-        # Check that bitcoin has been built with ZMQ enabled\n+        # Check that bitcoin has been built with ZMQ enabled.\n         config = configparser.ConfigParser()\n         if not self.options.configfile:\n-            self.options.configfile = os.path.dirname(__file__) + \"/../config.ini\"\n+            self.options.configfile = os.path.abspath(os.path.join(os.path.dirname(__file__), \"../config.ini\"))\n         config.read_file(open(self.options.configfile))\n \n         if not config[\"components\"].getboolean(\"ENABLE_ZMQ\"):\n             raise SkipTest(\"bitcoind has not been built with zmq enabled.\")\n \n-        self.zmqContext = zmq.Context()\n-        self.zmqSubSocket = self.zmqContext.socket(zmq.SUB)\n-        self.zmqSubSocket.set(zmq.RCVTIMEO, 60000)\n-        self.zmqSubSocket.setsockopt(zmq.SUBSCRIBE, b\"hashblock\")\n-        self.zmqSubSocket.setsockopt(zmq.SUBSCRIBE, b\"hashtx\")\n-        self.zmqSubSocket.setsockopt(zmq.SUBSCRIBE, b\"rawblock\")\n-        self.zmqSubSocket.setsockopt(zmq.SUBSCRIBE, b\"rawtx\")\n-        ip_address = \"tcp://127.0.0.1:28332\"\n-        self.zmqSubSocket.connect(ip_address)\n-        self.extra_args = [['-zmqpubhashblock=%s' % ip_address, '-zmqpubhashtx=%s' % ip_address,\n-                       '-zmqpubrawblock=%s' % ip_address, '-zmqpubrawtx=%s' % ip_address], []]\n+        # Initialize ZMQ context and socket.\n+        # All messages are received in the same socket which means\n+        # that this test fails if the publishing order changes.",
    "path": "test/functional/zmq_test.py",
    "position": 63,
    "original_position": 63,
    "commit_id": "cc9ee809ad19a63ca284d2fbc327ac1cbcee31e4",
    "original_commit_id": "cc9ee809ad19a63ca284d2fbc327ac1cbcee31e4",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "The ZMQSubscriber class makes it harder for the test to work if topics are sent in a different order.\r\n\r\nCan you take a look at and consider squashing 3668dcdd5a7a12dea0ce5fd9a1d7d17ade0f7b75, which builds on your change, but gets rid of ZMQSubscriber, shortens the test, and lets it pass regardless of ordering of messages from different topics?",
    "created_at": "2017-10-11T18:25:21Z",
    "updated_at": "2017-10-11T18:25:21Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11452#discussion_r144096057",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11452",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144096057"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/11452#discussion_r144096057"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11452"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144096057/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 57,
    "original_line": 57,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144220827",
    "pull_request_review_id": 68846159,
    "id": 144220827,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0NDIyMDgyNw==",
    "diff_hunk": "@@ -24,130 +43,79 @@ def setup_nodes(self):\n         except ImportError:\n             raise SkipTest(\"python3-zmq module not available.\")\n \n-        # Check that bitcoin has been built with ZMQ enabled\n+        # Check that bitcoin has been built with ZMQ enabled.\n         config = configparser.ConfigParser()\n         if not self.options.configfile:\n-            self.options.configfile = os.path.dirname(__file__) + \"/../config.ini\"\n+            self.options.configfile = os.path.abspath(os.path.join(os.path.dirname(__file__), \"../config.ini\"))\n         config.read_file(open(self.options.configfile))\n \n         if not config[\"components\"].getboolean(\"ENABLE_ZMQ\"):\n             raise SkipTest(\"bitcoind has not been built with zmq enabled.\")\n \n-        self.zmqContext = zmq.Context()\n-        self.zmqSubSocket = self.zmqContext.socket(zmq.SUB)\n-        self.zmqSubSocket.set(zmq.RCVTIMEO, 60000)\n-        self.zmqSubSocket.setsockopt(zmq.SUBSCRIBE, b\"hashblock\")\n-        self.zmqSubSocket.setsockopt(zmq.SUBSCRIBE, b\"hashtx\")\n-        self.zmqSubSocket.setsockopt(zmq.SUBSCRIBE, b\"rawblock\")\n-        self.zmqSubSocket.setsockopt(zmq.SUBSCRIBE, b\"rawtx\")\n-        ip_address = \"tcp://127.0.0.1:28332\"\n-        self.zmqSubSocket.connect(ip_address)\n-        self.extra_args = [['-zmqpubhashblock=%s' % ip_address, '-zmqpubhashtx=%s' % ip_address,\n-                       '-zmqpubrawblock=%s' % ip_address, '-zmqpubrawtx=%s' % ip_address], []]\n+        # Initialize ZMQ context and socket.\n+        # All messages are received in the same socket which means\n+        # that this test fails if the publishing order changes.",
    "path": "test/functional/zmq_test.py",
    "position": 63,
    "original_position": 63,
    "commit_id": "cc9ee809ad19a63ca284d2fbc327ac1cbcee31e4",
    "original_commit_id": "cc9ee809ad19a63ca284d2fbc327ac1cbcee31e4",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "@ryanofsky Thanks for the time spent on this. For the moment we want this test to fail if the order changes, see https://github.com/bitcoin/bitcoin/pull/11439#issuecomment-334181141.",
    "created_at": "2017-10-12T08:16:23Z",
    "updated_at": "2017-10-12T08:16:23Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11452#discussion_r144220827",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11452",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144220827"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/11452#discussion_r144220827"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11452"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144220827/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 57,
    "original_line": 57,
    "side": "RIGHT",
    "in_reply_to_id": 144096057
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144221025",
    "pull_request_review_id": 68846393,
    "id": 144221025,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0NDIyMTAyNQ==",
    "diff_hunk": "@@ -24,130 +43,79 @@ def setup_nodes(self):\n         except ImportError:\n             raise SkipTest(\"python3-zmq module not available.\")\n \n-        # Check that bitcoin has been built with ZMQ enabled\n+        # Check that bitcoin has been built with ZMQ enabled.\n         config = configparser.ConfigParser()\n         if not self.options.configfile:\n-            self.options.configfile = os.path.dirname(__file__) + \"/../config.ini\"\n+            self.options.configfile = os.path.abspath(os.path.join(os.path.dirname(__file__), \"../config.ini\"))\n         config.read_file(open(self.options.configfile))\n \n         if not config[\"components\"].getboolean(\"ENABLE_ZMQ\"):\n             raise SkipTest(\"bitcoind has not been built with zmq enabled.\")\n \n-        self.zmqContext = zmq.Context()\n-        self.zmqSubSocket = self.zmqContext.socket(zmq.SUB)\n-        self.zmqSubSocket.set(zmq.RCVTIMEO, 60000)\n-        self.zmqSubSocket.setsockopt(zmq.SUBSCRIBE, b\"hashblock\")\n-        self.zmqSubSocket.setsockopt(zmq.SUBSCRIBE, b\"hashtx\")\n-        self.zmqSubSocket.setsockopt(zmq.SUBSCRIBE, b\"rawblock\")\n-        self.zmqSubSocket.setsockopt(zmq.SUBSCRIBE, b\"rawtx\")\n-        ip_address = \"tcp://127.0.0.1:28332\"\n-        self.zmqSubSocket.connect(ip_address)\n-        self.extra_args = [['-zmqpubhashblock=%s' % ip_address, '-zmqpubhashtx=%s' % ip_address,\n-                       '-zmqpubrawblock=%s' % ip_address, '-zmqpubrawtx=%s' % ip_address], []]\n+        # Initialize ZMQ context and socket.\n+        # All messages are received in the same socket which means\n+        # that this test fails if the publishing order changes.",
    "path": "test/functional/zmq_test.py",
    "position": 63,
    "original_position": 63,
    "commit_id": "cc9ee809ad19a63ca284d2fbc327ac1cbcee31e4",
    "original_commit_id": "cc9ee809ad19a63ca284d2fbc327ac1cbcee31e4",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "BTW, if the order changes it's only a matter of changing the order of the `sub.receive()` calls.",
    "created_at": "2017-10-12T08:17:27Z",
    "updated_at": "2017-10-12T08:17:27Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11452#discussion_r144221025",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11452",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144221025"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/11452#discussion_r144221025"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11452"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144221025/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 57,
    "original_line": 57,
    "side": "RIGHT",
    "in_reply_to_id": 144096057
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144273928",
    "pull_request_review_id": 68906493,
    "id": 144273928,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0NDI3MzkyOA==",
    "diff_hunk": "@@ -24,130 +43,79 @@ def setup_nodes(self):\n         except ImportError:\n             raise SkipTest(\"python3-zmq module not available.\")\n \n-        # Check that bitcoin has been built with ZMQ enabled\n+        # Check that bitcoin has been built with ZMQ enabled.\n         config = configparser.ConfigParser()\n         if not self.options.configfile:\n-            self.options.configfile = os.path.dirname(__file__) + \"/../config.ini\"\n+            self.options.configfile = os.path.abspath(os.path.join(os.path.dirname(__file__), \"../config.ini\"))\n         config.read_file(open(self.options.configfile))\n \n         if not config[\"components\"].getboolean(\"ENABLE_ZMQ\"):\n             raise SkipTest(\"bitcoind has not been built with zmq enabled.\")\n \n-        self.zmqContext = zmq.Context()\n-        self.zmqSubSocket = self.zmqContext.socket(zmq.SUB)\n-        self.zmqSubSocket.set(zmq.RCVTIMEO, 60000)\n-        self.zmqSubSocket.setsockopt(zmq.SUBSCRIBE, b\"hashblock\")\n-        self.zmqSubSocket.setsockopt(zmq.SUBSCRIBE, b\"hashtx\")\n-        self.zmqSubSocket.setsockopt(zmq.SUBSCRIBE, b\"rawblock\")\n-        self.zmqSubSocket.setsockopt(zmq.SUBSCRIBE, b\"rawtx\")\n-        ip_address = \"tcp://127.0.0.1:28332\"\n-        self.zmqSubSocket.connect(ip_address)\n-        self.extra_args = [['-zmqpubhashblock=%s' % ip_address, '-zmqpubhashtx=%s' % ip_address,\n-                       '-zmqpubrawblock=%s' % ip_address, '-zmqpubrawtx=%s' % ip_address], []]\n+        # Initialize ZMQ context and socket.\n+        # All messages are received in the same socket which means\n+        # that this test fails if the publishing order changes.",
    "path": "test/functional/zmq_test.py",
    "position": 63,
    "original_position": 63,
    "commit_id": "cc9ee809ad19a63ca284d2fbc327ac1cbcee31e4",
    "original_commit_id": "cc9ee809ad19a63ca284d2fbc327ac1cbcee31e4",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Thanks for the input @ryanofsky . I personally think the `ZMQSubscriber` class is clearer, but it was me who pushed @promag in that direction initially, so we should see what other reviewers think.",
    "created_at": "2017-10-12T12:29:54Z",
    "updated_at": "2017-10-12T12:29:54Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11452#discussion_r144273928",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11452",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144273928"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/11452#discussion_r144273928"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11452"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144273928/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 57,
    "original_line": 57,
    "side": "RIGHT",
    "in_reply_to_id": 144096057
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144345952",
    "pull_request_review_id": 68990969,
    "id": 144345952,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0NDM0NTk1Mg==",
    "diff_hunk": "@@ -24,130 +43,79 @@ def setup_nodes(self):\n         except ImportError:\n             raise SkipTest(\"python3-zmq module not available.\")\n \n-        # Check that bitcoin has been built with ZMQ enabled\n+        # Check that bitcoin has been built with ZMQ enabled.\n         config = configparser.ConfigParser()\n         if not self.options.configfile:\n-            self.options.configfile = os.path.dirname(__file__) + \"/../config.ini\"\n+            self.options.configfile = os.path.abspath(os.path.join(os.path.dirname(__file__), \"../config.ini\"))\n         config.read_file(open(self.options.configfile))\n \n         if not config[\"components\"].getboolean(\"ENABLE_ZMQ\"):\n             raise SkipTest(\"bitcoind has not been built with zmq enabled.\")\n \n-        self.zmqContext = zmq.Context()\n-        self.zmqSubSocket = self.zmqContext.socket(zmq.SUB)\n-        self.zmqSubSocket.set(zmq.RCVTIMEO, 60000)\n-        self.zmqSubSocket.setsockopt(zmq.SUBSCRIBE, b\"hashblock\")\n-        self.zmqSubSocket.setsockopt(zmq.SUBSCRIBE, b\"hashtx\")\n-        self.zmqSubSocket.setsockopt(zmq.SUBSCRIBE, b\"rawblock\")\n-        self.zmqSubSocket.setsockopt(zmq.SUBSCRIBE, b\"rawtx\")\n-        ip_address = \"tcp://127.0.0.1:28332\"\n-        self.zmqSubSocket.connect(ip_address)\n-        self.extra_args = [['-zmqpubhashblock=%s' % ip_address, '-zmqpubhashtx=%s' % ip_address,\n-                       '-zmqpubrawblock=%s' % ip_address, '-zmqpubrawtx=%s' % ip_address], []]\n+        # Initialize ZMQ context and socket.\n+        # All messages are received in the same socket which means\n+        # that this test fails if the publishing order changes.",
    "path": "test/functional/zmq_test.py",
    "position": 63,
    "original_position": 63,
    "commit_id": "cc9ee809ad19a63ca284d2fbc327ac1cbcee31e4",
    "original_commit_id": "cc9ee809ad19a63ca284d2fbc327ac1cbcee31e4",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "~~~Comment isn't accurate. Should say \"test hangs\" instead of \"test fails.\"~~~\r\n\r\nEDIT: Actually, this isn't true. I was thinking of the other unnecessarily fragile version of the test that used multiple sockets :)",
    "created_at": "2017-10-12T16:45:11Z",
    "updated_at": "2017-10-12T16:52:06Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11452#discussion_r144345952",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11452",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144345952"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/11452#discussion_r144345952"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11452"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144345952/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 57,
    "original_line": 57,
    "side": "RIGHT",
    "in_reply_to_id": 144096057
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144670938",
    "pull_request_review_id": 69366645,
    "id": 144670938,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0NDY3MDkzOA==",
    "diff_hunk": "@@ -24,130 +43,79 @@ def setup_nodes(self):\n         except ImportError:\n             raise SkipTest(\"python3-zmq module not available.\")\n \n-        # Check that bitcoin has been built with ZMQ enabled\n+        # Check that bitcoin has been built with ZMQ enabled.\n         config = configparser.ConfigParser()\n         if not self.options.configfile:\n-            self.options.configfile = os.path.dirname(__file__) + \"/../config.ini\"\n+            self.options.configfile = os.path.abspath(os.path.join(os.path.dirname(__file__), \"../config.ini\"))\n         config.read_file(open(self.options.configfile))\n \n         if not config[\"components\"].getboolean(\"ENABLE_ZMQ\"):\n             raise SkipTest(\"bitcoind has not been built with zmq enabled.\")\n \n-        self.zmqContext = zmq.Context()\n-        self.zmqSubSocket = self.zmqContext.socket(zmq.SUB)\n-        self.zmqSubSocket.set(zmq.RCVTIMEO, 60000)\n-        self.zmqSubSocket.setsockopt(zmq.SUBSCRIBE, b\"hashblock\")\n-        self.zmqSubSocket.setsockopt(zmq.SUBSCRIBE, b\"hashtx\")\n-        self.zmqSubSocket.setsockopt(zmq.SUBSCRIBE, b\"rawblock\")\n-        self.zmqSubSocket.setsockopt(zmq.SUBSCRIBE, b\"rawtx\")\n-        ip_address = \"tcp://127.0.0.1:28332\"\n-        self.zmqSubSocket.connect(ip_address)\n-        self.extra_args = [['-zmqpubhashblock=%s' % ip_address, '-zmqpubhashtx=%s' % ip_address,\n-                       '-zmqpubrawblock=%s' % ip_address, '-zmqpubrawtx=%s' % ip_address], []]\n+        # Initialize ZMQ context and socket.\n+        # All messages are received in the same socket which means\n+        # that this test fails if the publishing order changes.",
    "path": "test/functional/zmq_test.py",
    "position": 63,
    "original_position": 63,
    "commit_id": "cc9ee809ad19a63ca284d2fbc327ac1cbcee31e4",
    "original_commit_id": "cc9ee809ad19a63ca284d2fbc327ac1cbcee31e4",
    "user": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Ah right, that one hangs :+1:",
    "created_at": "2017-10-13T22:41:47Z",
    "updated_at": "2017-10-13T22:41:47Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/11452#discussion_r144670938",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11452",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144670938"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/11452#discussion_r144670938"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/11452"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/144670938/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 57,
    "original_line": 57,
    "side": "RIGHT",
    "in_reply_to_id": 144096057
  }
]