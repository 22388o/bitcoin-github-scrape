[
  {
    "sha": "883175f5d361720c75c89efcbc9d199cd6d3b2ab",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo4ODMxNzVmNWQzNjE3MjBjNzVjODllZmNiYzlkMTk5Y2Q2ZDNiMmFi",
    "commit": {
      "author": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2016-08-26T14:26:02Z"
      },
      "committer": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2016-08-28T14:12:10Z"
      },
      "message": "build: Updates for OpenBSD\n\n- LevelDB platform was not guessed correctly (it ended up defining\n  `-DOS_OPENBSD59` instead of `-DOS_OPENBSD`)\n\n- On OpenBSD there is no convenience link from `python3.5` to `python3`:\n  add detection for other python interpreter names.\n\n- If it has to guess the LevelDB OS, print a autoconf warning so that\n  the user can check.",
      "tree": {
        "sha": "8a0f45978799a9b3a7860f54168044028e2cef3b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/8a0f45978799a9b3a7860f54168044028e2cef3b"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/883175f5d361720c75c89efcbc9d199cd6d3b2ab",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/883175f5d361720c75c89efcbc9d199cd6d3b2ab",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/883175f5d361720c75c89efcbc9d199cd6d3b2ab",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/883175f5d361720c75c89efcbc9d199cd6d3b2ab/comments",
    "author": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "12892dbb9fb6d6f46505d7b9caf8ae6905601c7f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/12892dbb9fb6d6f46505d7b9caf8ae6905601c7f",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/12892dbb9fb6d6f46505d7b9caf8ae6905601c7f"
      }
    ],
    "stats": {
      "total": 10,
      "additions": 9,
      "deletions": 1
    },
    "files": [
      {
        "sha": "add8d217817ca98974f88b60956ab11f0ec98d8a",
        "filename": "configure.ac",
        "status": "modified",
        "additions": 9,
        "deletions": 1,
        "changes": 10,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/883175f5d361720c75c89efcbc9d199cd6d3b2ab/configure.ac",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/883175f5d361720c75c89efcbc9d199cd6d3b2ab/configure.ac",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/configure.ac?ref=883175f5d361720c75c89efcbc9d199cd6d3b2ab",
        "patch": "@@ -66,7 +66,8 @@ AC_PATH_TOOL(RANLIB, ranlib)\n AC_PATH_TOOL(STRIP, strip)\n AC_PATH_TOOL(GCOV, gcov)\n AC_PATH_PROG(LCOV, lcov)\n-AC_PATH_PROGS([PYTHON], [python3 python2.7 python2 python])\n+dnl Python 3.x is supported from 3.4 on (see https://github.com/bitcoin/bitcoin/issues/7893)\n+AC_PATH_PROGS([PYTHON], [python3.6 python3.5 python3.4 python3 python2.7 python2 python])\n AC_PATH_PROG(GENHTML, genhtml)\n AC_PATH_PROG([GIT], [git])\n AC_PATH_PROG(CCACHE,ccache)\n@@ -355,8 +356,15 @@ case $host in\n      TARGET_OS=linux\n      LEVELDB_TARGET_FLAGS=\"-DOS_LINUX\"\n      ;;\n+   *freebsd*)\n+     LEVELDB_TARGET_FLAGS=\"-DOS_FREEBSD\"\n+     ;;\n+   *openbsd*)\n+     LEVELDB_TARGET_FLAGS=\"-DOS_OPENBSD\"\n+     ;;\n    *)\n      OTHER_OS=`echo ${host_os} | awk '{print toupper($0)}'`\n+     AC_MSG_WARN([Guessing LevelDB OS as OS_${OTHER_OS}, please check whether this is correct, if not add an entry to configure.ac.])\n      LEVELDB_TARGET_FLAGS=\"-DOS_${OTHER_OS}\"\n      ;;\n esac"
      }
    ]
  },
  {
    "sha": "6275123ce960172aeecfe087c8c0e303a216736a",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo2Mjc1MTIzY2U5NjAxNzJhZWVjZmUwODdjOGMwZTMwM2EyMTY3MzZh",
    "commit": {
      "author": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2016-08-26T14:26:09Z"
      },
      "committer": {
        "name": "Wladimir J. van der Laan",
        "email": "laanwj@gmail.com",
        "date": "2016-08-28T14:12:10Z"
      },
      "message": "doc: Update build-openbsd for 0.13.0+ and OpenBSD 5.9\n\n- Python 3 now supported.\n\n- Bump boost version to 1.61 - one boost patch no longer needed.\n\n- All checked with OpenBSD 5.9, except for the clang part, I left this\n  as-is for someone adventurous.\n\n- Mention overriding resource limits, OpenBSD's default ulimit does not\n  suffice for building Bitcoin Core with gcc 4.9.3.",
      "tree": {
        "sha": "636c7b3186e4e75210da6e29f57554c50ed4ec2e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/636c7b3186e4e75210da6e29f57554c50ed4ec2e"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6275123ce960172aeecfe087c8c0e303a216736a",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6275123ce960172aeecfe087c8c0e303a216736a",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/6275123ce960172aeecfe087c8c0e303a216736a",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6275123ce960172aeecfe087c8c0e303a216736a/comments",
    "author": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "883175f5d361720c75c89efcbc9d199cd6d3b2ab",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/883175f5d361720c75c89efcbc9d199cd6d3b2ab",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/883175f5d361720c75c89efcbc9d199cd6d3b2ab"
      }
    ],
    "stats": {
      "total": 46,
      "additions": 29,
      "deletions": 17
    },
    "files": [
      {
        "sha": "55283d6dcea93c44f2a0b09a232a7a4be133d956",
        "filename": "doc/build-openbsd.md",
        "status": "modified",
        "additions": 29,
        "deletions": 17,
        "changes": 46,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6275123ce960172aeecfe087c8c0e303a216736a/doc/build-openbsd.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6275123ce960172aeecfe087c8c0e303a216736a/doc/build-openbsd.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/doc/build-openbsd.md?ref=6275123ce960172aeecfe087c8c0e303a216736a",
        "patch": "@@ -1,6 +1,6 @@\n OpenBSD build guide\n ======================\n-(updated for OpenBSD 5.7)\n+(updated for OpenBSD 5.9)\n \n This guide describes how to build bitcoind and command-line utilities on OpenBSD.\n \n@@ -15,19 +15,18 @@ Run the following as root to install the base dependencies for building:\n pkg_add gmake libtool libevent\n pkg_add autoconf # (select highest version, e.g. 2.69)\n pkg_add automake # (select highest version, e.g. 1.15)\n-pkg_add python # (select version 2.7.x, not 3.x)\n-ln -sf /usr/local/bin/python2.7 /usr/local/bin/python2\n+pkg_add python # (select highest version, e.g. 3.5)\n ```\n \n-The default C++ compiler that comes with OpenBSD 5.7 is g++ 4.2. This version is old (from 2007), and is not able to compile the current version of Bitcoin Core. It is possible to patch it up to compile, but with the planned transition to C++11 this is a losing battle. So here we will be installing a newer compiler.\n+The default C++ compiler that comes with OpenBSD 5.9 is g++ 4.2. This version is old (from 2007), and is not able to compile the current version of Bitcoin Core, primarily as it has no C++11 support, but even before there were issues. So here we will be installing a newer compiler.\n \n GCC\n -------\n \n You can install a newer version of gcc with:\n \n ```bash\n-pkg_add g++ # (select newest 4.x version, e.g. 4.9.2)\n+pkg_add g++ # (select newest 4.x version, e.g. 4.9.3)\n ```\n \n This compiler will not overwrite the system compiler, it will be installed as `egcc` and `eg++` in `/usr/local/bin`.\n@@ -49,18 +48,15 @@ BOOST_PREFIX=\"${BITCOIN_ROOT}/boost\"\n mkdir -p $BOOST_PREFIX\n \n # Fetch the source and verify that it is not tampered with\n-wget http://heanet.dl.sourceforge.net/project/boost/boost/1.59.0/boost_1_59_0.tar.bz2\n-echo '727a932322d94287b62abb1bd2d41723eec4356a7728909e38adb65ca25241ca  boost_1_59_0.tar.bz2' | sha256 -c\n-# MUST output: (SHA256) boost_1_59_0.tar.bz2: OK\n-tar -xjf boost_1_59_0.tar.bz2\n+curl -o boost_1_61_0.tar.bz2 http://heanet.dl.sourceforge.net/project/boost/boost/1.61.0/boost_1_61_0.tar.bz2\n+echo 'a547bd06c2fd9a71ba1d169d9cf0339da7ebf4753849a8f7d6fdb8feee99b640  boost_1_61_0.tar.bz2' | sha256 -c\n+# MUST output: (SHA256) boost_1_61_0.tar.bz2: OK\n+tar -xjf boost_1_61_0.tar.bz2\n \n-# Boost 1.59 needs two small patches for OpenBSD\n-cd boost_1_59_0\n+# Boost 1.61 needs one small patch for OpenBSD\n+cd boost_1_61_0\n # Also here: https://gist.githubusercontent.com/laanwj/bf359281dc319b8ff2e1/raw/92250de8404b97bb99d72ab898f4a8cb35ae1ea3/patch-boost_test_impl_execution_monitor_ipp.patch\n patch -p0 < /usr/ports/devel/boost/patches/patch-boost_test_impl_execution_monitor_ipp\n-# https://github.com/boostorg/filesystem/commit/90517e459681790a091566dce27ca3acabf9a70c\n-sed 's/__OPEN_BSD__/__OpenBSD__/g' < libs/filesystem/src/path.cpp > libs/filesystem/src/path.cpp.tmp\n-mv libs/filesystem/src/path.cpp.tmp libs/filesystem/src/path.cpp\n \n # Build w/ minimum configuration necessary for bitcoin\n echo 'using gcc : : eg++ : <cxxflags>\"-fvisibility=hidden -fPIC\" <linkflags>\"\" <archiver>\"ar\" <striper>\"strip\"  <ranlib>\"ranlib\" <rc>\"\" : ;' > user-config.jam\n@@ -84,7 +80,7 @@ BDB_PREFIX=\"${BITCOIN_ROOT}/db4\"\n mkdir -p $BDB_PREFIX\n \n # Fetch the source and verify that it is not tampered with\n-wget 'http://download.oracle.com/berkeley-db/db-4.8.30.NC.tar.gz'\n+curl -o db-4.8.30.NC.tar.gz 'http://download.oracle.com/berkeley-db/db-4.8.30.NC.tar.gz'\n echo '12edc0df75bf9abd7f82f821795bcee50f42cb2e5f76a6a281b85732798364ef  db-4.8.30.NC.tar.gz' | sha256 -c\n # MUST output: (SHA256) db-4.8.30.NC.tar.gz: OK\n tar -xzf db-4.8.30.NC.tar.gz\n@@ -93,9 +89,25 @@ tar -xzf db-4.8.30.NC.tar.gz\n cd db-4.8.30.NC/build_unix/\n #  Note: Do a static build so that it can be embedded into the executable, instead of having to find a .so at runtime\n ../dist/configure --enable-cxx --disable-shared --with-pic --prefix=$BDB_PREFIX CC=egcc CXX=eg++ CPP=ecpp\n-make install\n+make install # do NOT use -jX, this is broken\n ```\n \n+### Resource limits\n+\n+The standard ulimit restrictions in OpenBSD are very strict:\n+\n+    data(kbytes)         1572864\n+\n+This is, unfortunately, no longer enough to compile some `.cpp` files in the project,\n+at least with gcc 4.9.3 (see issue https://github.com/bitcoin/bitcoin/issues/6658).\n+If your user is in the `staff` group the limit can be raised with:\n+\n+    ulimit -d 3000000\n+\n+The change will only affect the current shell and processes spawned by it. To\n+make the change system-wide, change `datasize-cur` and `datasize-max` in\n+`/etc/login.conf`, and reboot.\n+\n ### Building Bitcoin Core\n \n **Important**: use `gmake`, not `make`. The non-GNU `make` will exit with a horrible error.\n@@ -123,7 +135,7 @@ To configure without wallet:\n \n Build and run the tests:\n ```bash\n-gmake\n+gmake # can use -jX here for parallelism\n gmake check\n ```\n "
      }
    ]
  }
]