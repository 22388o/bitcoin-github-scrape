[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/10044423",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/1974#issuecomment-10044423",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/1974",
    "id": 10044423,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwMDQ0NDIz",
    "user": {
      "login": "freewil",
      "id": 716621,
      "node_id": "MDQ6VXNlcjcxNjYyMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/716621?u=b325514099ddfa1103626887550df641af5d5757&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/freewil",
      "html_url": "https://github.com/freewil",
      "followers_url": "https://api.github.com/users/freewil/followers",
      "following_url": "https://api.github.com/users/freewil/following{/other_user}",
      "gists_url": "https://api.github.com/users/freewil/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/freewil/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/freewil/subscriptions",
      "organizations_url": "https://api.github.com/users/freewil/orgs",
      "repos_url": "https://api.github.com/users/freewil/repos",
      "events_url": "https://api.github.com/users/freewil/events{/privacy}",
      "received_events_url": "https://api.github.com/users/freewil/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-11-03T21:25:33Z",
    "updated_at": "2012-11-03T21:25:33Z",
    "author_association": "CONTRIBUTOR",
    "body": "This is repetitive and doesn't add any new functionality. You can check for new incoming transactions after -blocknotify and obviously you will already know about outgoing transactions.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/10044423/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/10044686",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/1974#issuecomment-10044686",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/1974",
    "id": 10044686,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwMDQ0Njg2",
    "user": {
      "login": "kjj2",
      "id": 2375220,
      "node_id": "MDQ6VXNlcjIzNzUyMjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2375220?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kjj2",
      "html_url": "https://github.com/kjj2",
      "followers_url": "https://api.github.com/users/kjj2/followers",
      "following_url": "https://api.github.com/users/kjj2/following{/other_user}",
      "gists_url": "https://api.github.com/users/kjj2/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kjj2/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kjj2/subscriptions",
      "organizations_url": "https://api.github.com/users/kjj2/orgs",
      "repos_url": "https://api.github.com/users/kjj2/repos",
      "events_url": "https://api.github.com/users/kjj2/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kjj2/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-11-03T21:53:54Z",
    "updated_at": "2012-11-03T21:53:54Z",
    "author_association": "NONE",
    "body": "No, this triggers when a transaction comes in or goes out in any way, not just when blocks hit.  And now that we have the raw transaction API and offline signing and transmission is relatively easy, it is no longer obvious when transactions go out.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/10044686/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/10057975",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/1974#issuecomment-10057975",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/1974",
    "id": 10057975,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwMDU3OTc1",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-11-05T00:46:55Z",
    "updated_at": "2012-11-05T00:46:55Z",
    "author_association": "MEMBER",
    "body": "This is probably useful for a lot of people who would otherwise depend on polling (or using centralized services to know when to poll), but it hopefully doesn't inspire people to do 0-conf accepts.\n\nACK.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/10057975/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/10434507",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/1974#issuecomment-10434507",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/1974",
    "id": 10434507,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEwNDM0NTA3",
    "user": {
      "login": "jgarzik",
      "id": 494411,
      "node_id": "MDQ6VXNlcjQ5NDQxMQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/494411?u=0b02049ec38b6bb7d55c5c66d9bbeb0d4b822129&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jgarzik",
      "html_url": "https://github.com/jgarzik",
      "followers_url": "https://api.github.com/users/jgarzik/followers",
      "following_url": "https://api.github.com/users/jgarzik/following{/other_user}",
      "gists_url": "https://api.github.com/users/jgarzik/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jgarzik/subscriptions",
      "organizations_url": "https://api.github.com/users/jgarzik/orgs",
      "repos_url": "https://api.github.com/users/jgarzik/repos",
      "events_url": "https://api.github.com/users/jgarzik/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jgarzik/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-11-16T02:27:31Z",
    "updated_at": "2012-11-16T02:27:31Z",
    "author_association": "CONTRIBUTOR",
    "body": "ACK... with maybe some doc describing some usage issues like what Gavin raised.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/10434507/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/11655453",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/1974#issuecomment-11655453",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/1974",
    "id": 11655453,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExNjU1NDUz",
    "user": {
      "login": "CodeShark",
      "id": 894059,
      "node_id": "MDQ6VXNlcjg5NDA1OQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/894059?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CodeShark",
      "html_url": "https://github.com/CodeShark",
      "followers_url": "https://api.github.com/users/CodeShark/followers",
      "following_url": "https://api.github.com/users/CodeShark/following{/other_user}",
      "gists_url": "https://api.github.com/users/CodeShark/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CodeShark/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CodeShark/subscriptions",
      "organizations_url": "https://api.github.com/users/CodeShark/orgs",
      "repos_url": "https://api.github.com/users/CodeShark/repos",
      "events_url": "https://api.github.com/users/CodeShark/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CodeShark/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-12-24T07:09:19Z",
    "updated_at": "2012-12-24T07:09:19Z",
    "author_association": "CONTRIBUTOR",
    "body": "I've had a need for this kind of alert in applications before and as a result ended up writing a custom bitcoin client with its own internal filtering. I would love to be able to attach a listener to the mempool (perhaps SyncWithWallets could be extended to this end) which can perform filtering beyond just CWallet::IsMine(). Perhaps we can also filter out transactions below a certain size threshold, for instance.\n\nThe need for being able to monitor transactions actually motivated https://github.com/bitcoin/bitcoin/pull/2121, which combined with -walletnotify would allow realtime tracking of payments without having to store any private keys at all.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/11655453/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/11659181",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/1974#issuecomment-11659181",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/1974",
    "id": 11659181,
    "node_id": "MDEyOklzc3VlQ29tbWVudDExNjU5MTgx",
    "user": {
      "login": "rebroad",
      "id": 1530283,
      "node_id": "MDQ6VXNlcjE1MzAyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1530283?u=6a4a31aaddbc438e053c52d084a698a5f622f1ea&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rebroad",
      "html_url": "https://github.com/rebroad",
      "followers_url": "https://api.github.com/users/rebroad/followers",
      "following_url": "https://api.github.com/users/rebroad/following{/other_user}",
      "gists_url": "https://api.github.com/users/rebroad/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rebroad/subscriptions",
      "organizations_url": "https://api.github.com/users/rebroad/orgs",
      "repos_url": "https://api.github.com/users/rebroad/repos",
      "events_url": "https://api.github.com/users/rebroad/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rebroad/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2012-12-24T11:41:37Z",
    "updated_at": "2012-12-24T11:41:37Z",
    "author_association": "CONTRIBUTOR",
    "body": "How about instead an option to output transaction information to a file instead? That way, a separate program can deal with the problem of flooding, etc, and triggering commands from output as it appears in the file.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/11659181/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/13954885",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/1974#issuecomment-13954885",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/1974",
    "id": 13954885,
    "node_id": "MDEyOklzc3VlQ29tbWVudDEzOTU0ODg1",
    "user": {
      "login": "gavinandresen",
      "id": 331997,
      "node_id": "MDQ6VXNlcjMzMTk5Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/331997?u=db313a954a318b81f5283d34908397d1ea3aeba3&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gavinandresen",
      "html_url": "https://github.com/gavinandresen",
      "followers_url": "https://api.github.com/users/gavinandresen/followers",
      "following_url": "https://api.github.com/users/gavinandresen/following{/other_user}",
      "gists_url": "https://api.github.com/users/gavinandresen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gavinandresen/subscriptions",
      "organizations_url": "https://api.github.com/users/gavinandresen/orgs",
      "repos_url": "https://api.github.com/users/gavinandresen/repos",
      "events_url": "https://api.github.com/users/gavinandresen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gavinandresen/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2013-02-22T16:47:00Z",
    "updated_at": "2013-02-22T16:47:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "Couple of ACKS... this is definitely better than what we have now.  I'm going to pull.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/13954885/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2033822",
    "pull_request_review_id": null,
    "id": 2033822,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzM4MjI=",
    "diff_hunk": "@@ -470,6 +471,16 @@ bool CWallet::AddToWallet(const CWalletTx& wtxIn)\n \n         // Notify UI of new or updated transaction\n         NotifyTransactionChanged(this, hash, fInsertedNew ? CT_NEW : CT_UPDATED);\n+\n+        // notify an external script when a wallet transaction comes in or is updated\n+        std::string strCmd = GetArg(\"-walletnotify\", \"\");\n+\n+        if ( !strCmd.empty())\n+        {\n+            boost::replace_all(strCmd, \"%s\", wtxIn.GetHash().GetHex());\n+            boost::thread t(runCommand, strCmd); // thread runs free",
    "path": "src/wallet.cpp",
    "position": 19,
    "original_position": 19,
    "commit_id": "cae686d31e18a68826ef61931ae8379fe9461d7b",
    "original_commit_id": "cae686d31e18a68826ef61931ae8379fe9461d7b",
    "user": {
      "login": "gavinandresen",
      "id": 331997,
      "node_id": "MDQ6VXNlcjMzMTk5Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/331997?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gavinandresen",
      "html_url": "https://github.com/gavinandresen",
      "followers_url": "https://api.github.com/users/gavinandresen/followers",
      "following_url": "https://api.github.com/users/gavinandresen/following{/other_user}",
      "gists_url": "https://api.github.com/users/gavinandresen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gavinandresen/subscriptions",
      "organizations_url": "https://api.github.com/users/gavinandresen/orgs",
      "repos_url": "https://api.github.com/users/gavinandresen/repos",
      "events_url": "https://api.github.com/users/gavinandresen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gavinandresen/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This opens up a potential DoS, I can send you a gazillion tiny transactions to try to get you to spawn gazillions of threads.\n\nI'd suggest not notifying transactions that are less than MIN_TX_FEE/-mintxfee (see code after // Fee-per-kilobyte amount considered the same as \"free\" in main.cpp)\n",
    "created_at": "2012-11-05T19:28:24Z",
    "updated_at": "2012-11-05T19:28:24Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/1974#discussion_r2033822",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/1974",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2033822"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/1974#discussion_r2033822"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/1974"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2033822/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 481,
    "original_line": 481,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2033882",
    "pull_request_review_id": null,
    "id": 2033882,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzM4ODI=",
    "diff_hunk": "@@ -470,6 +471,16 @@ bool CWallet::AddToWallet(const CWalletTx& wtxIn)\n \n         // Notify UI of new or updated transaction\n         NotifyTransactionChanged(this, hash, fInsertedNew ? CT_NEW : CT_UPDATED);\n+\n+        // notify an external script when a wallet transaction comes in or is updated\n+        std::string strCmd = GetArg(\"-walletnotify\", \"\");\n+\n+        if ( !strCmd.empty())\n+        {\n+            boost::replace_all(strCmd, \"%s\", wtxIn.GetHash().GetHex());\n+            boost::thread t(runCommand, strCmd); // thread runs free",
    "path": "src/wallet.cpp",
    "position": 19,
    "original_position": 19,
    "commit_id": "cae686d31e18a68826ef61931ae8379fe9461d7b",
    "original_commit_id": "cae686d31e18a68826ef61931ae8379fe9461d7b",
    "user": {
      "login": "gmaxwell",
      "id": 858454,
      "node_id": "MDQ6VXNlcjg1ODQ1NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/858454?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gmaxwell",
      "html_url": "https://github.com/gmaxwell",
      "followers_url": "https://api.github.com/users/gmaxwell/followers",
      "following_url": "https://api.github.com/users/gmaxwell/following{/other_user}",
      "gists_url": "https://api.github.com/users/gmaxwell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
      "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
      "repos_url": "https://api.github.com/users/gmaxwell/repos",
      "events_url": "https://api.github.com/users/gmaxwell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Uh.  I'd worry that callers wouldn't be aware of that subtle detail and would have applications which missed small transactions.\n\nIf the API worked in a way that it could simply be rate limited to not notify more than X times per second then that would be a preferable option, but the 1:1 behavior doesn't seem to work for that.\n",
    "created_at": "2012-11-05T19:32:14Z",
    "updated_at": "2012-11-05T19:32:14Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/1974#discussion_r2033882",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/1974",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2033882"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/1974#discussion_r2033882"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/1974"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2033882/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 481,
    "original_line": 481,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2034267",
    "pull_request_review_id": null,
    "id": 2034267,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzQyNjc=",
    "diff_hunk": "@@ -470,6 +471,16 @@ bool CWallet::AddToWallet(const CWalletTx& wtxIn)\n \n         // Notify UI of new or updated transaction\n         NotifyTransactionChanged(this, hash, fInsertedNew ? CT_NEW : CT_UPDATED);\n+\n+        // notify an external script when a wallet transaction comes in or is updated\n+        std::string strCmd = GetArg(\"-walletnotify\", \"\");\n+\n+        if ( !strCmd.empty())\n+        {\n+            boost::replace_all(strCmd, \"%s\", wtxIn.GetHash().GetHex());\n+            boost::thread t(runCommand, strCmd); // thread runs free",
    "path": "src/wallet.cpp",
    "position": 19,
    "original_position": 19,
    "commit_id": "cae686d31e18a68826ef61931ae8379fe9461d7b",
    "original_commit_id": "cae686d31e18a68826ef61931ae8379fe9461d7b",
    "user": {
      "login": "kjj2",
      "id": 2375220,
      "node_id": "MDQ6VXNlcjIzNzUyMjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2375220?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kjj2",
      "html_url": "https://github.com/kjj2",
      "followers_url": "https://api.github.com/users/kjj2/followers",
      "following_url": "https://api.github.com/users/kjj2/following{/other_user}",
      "gists_url": "https://api.github.com/users/kjj2/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kjj2/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kjj2/subscriptions",
      "organizations_url": "https://api.github.com/users/kjj2/orgs",
      "repos_url": "https://api.github.com/users/kjj2/repos",
      "events_url": "https://api.github.com/users/kjj2/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kjj2/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Since this triggers when a transaction updates the wallet, a potential DOS attacker would need to know both your IP (because no one will relay), and one of your addresses (pubkeys) to do their dust attack.  In my opinion, there are easier ways for them to DOS you at that point.\n\nAlso, the fee calculations are not trivial.  Adding that would require either duplicating a lot of code, or moving those calculations into their own function.\n\nRate limiting would be a bit easier, but the best way to do it would be open to question.  Make a queue to toss them into, and then have a thread poll and dump that queue every 30 seconds or so?\n\nI made this after two people popped into IRC, within an hour or two of each other, both having problems figuring out the \"right\" way to spot new transactions coming in to their wallets.  This solves their problems quickly and simply.  I'd rather see this get out quickly for those people, along with a note or something about the potential danger (and how to mitigate it for critical nodes) than make them keep waiting while we figure out how to make it safer under circumstances that may or may not ever happen.\n\nThen again, no one comes bitching to me when things don't work, so I defer to the judgment of the more experienced developers.\n",
    "created_at": "2012-11-05T20:01:46Z",
    "updated_at": "2012-11-05T20:01:46Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/1974#discussion_r2034267",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/1974",
    "author_association": "NONE",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2034267"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/1974#discussion_r2034267"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/1974"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2034267/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 481,
    "original_line": 481,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2037444",
    "pull_request_review_id": null,
    "id": 2037444,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwMzc0NDQ=",
    "diff_hunk": "@@ -470,6 +471,16 @@ bool CWallet::AddToWallet(const CWalletTx& wtxIn)\n \n         // Notify UI of new or updated transaction\n         NotifyTransactionChanged(this, hash, fInsertedNew ? CT_NEW : CT_UPDATED);\n+\n+        // notify an external script when a wallet transaction comes in or is updated\n+        std::string strCmd = GetArg(\"-walletnotify\", \"\");\n+\n+        if ( !strCmd.empty())\n+        {\n+            boost::replace_all(strCmd, \"%s\", wtxIn.GetHash().GetHex());\n+            boost::thread t(runCommand, strCmd); // thread runs free",
    "path": "src/wallet.cpp",
    "position": 19,
    "original_position": 19,
    "commit_id": "cae686d31e18a68826ef61931ae8379fe9461d7b",
    "original_commit_id": "cae686d31e18a68826ef61931ae8379fe9461d7b",
    "user": {
      "login": "gavinandresen",
      "id": 331997,
      "node_id": "MDQ6VXNlcjMzMTk5Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/331997?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gavinandresen",
      "html_url": "https://github.com/gavinandresen",
      "followers_url": "https://api.github.com/users/gavinandresen/followers",
      "following_url": "https://api.github.com/users/gavinandresen/following{/other_user}",
      "gists_url": "https://api.github.com/users/gavinandresen/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gavinandresen/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gavinandresen/subscriptions",
      "organizations_url": "https://api.github.com/users/gavinandresen/orgs",
      "repos_url": "https://api.github.com/users/gavinandresen/repos",
      "events_url": "https://api.github.com/users/gavinandresen/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gavinandresen/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I'd be curious to see what happens if you run this experiment on testnet:\n- Create 100 transactions, each with 1 well-aged input and (oh, I dunno) 100 output that all go to the same wallet (100 different addresses, though).\n- Now send them all at the same time.\n\nIf the inputs are old enough and large enough, you could perform the above attack paying minimal transaction fees.\n\nI predict Bad Things will happen as the bitcoin process forks 10,000 times.  -blocknotify doesn't have to worry about these issues because we've got one block on average every 10 minutes.\n\n-walletnotify=/path/to/named_pipe would be safer.  Actually, -blocknotify=/path/to/named_pipe might be useful, too...\n",
    "created_at": "2012-11-06T00:36:01Z",
    "updated_at": "2012-11-06T00:36:01Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/1974#discussion_r2037444",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/1974",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2037444"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/1974#discussion_r2037444"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/1974"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2037444/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 481,
    "original_line": 481,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2043461",
    "pull_request_review_id": null,
    "id": 2043461,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNDM0NjE=",
    "diff_hunk": "@@ -470,6 +471,16 @@ bool CWallet::AddToWallet(const CWalletTx& wtxIn)\n \n         // Notify UI of new or updated transaction\n         NotifyTransactionChanged(this, hash, fInsertedNew ? CT_NEW : CT_UPDATED);\n+\n+        // notify an external script when a wallet transaction comes in or is updated\n+        std::string strCmd = GetArg(\"-walletnotify\", \"\");\n+\n+        if ( !strCmd.empty())\n+        {\n+            boost::replace_all(strCmd, \"%s\", wtxIn.GetHash().GetHex());\n+            boost::thread t(runCommand, strCmd); // thread runs free",
    "path": "src/wallet.cpp",
    "position": 19,
    "original_position": 19,
    "commit_id": "cae686d31e18a68826ef61931ae8379fe9461d7b",
    "original_commit_id": "cae686d31e18a68826ef61931ae8379fe9461d7b",
    "user": {
      "login": "kjj2",
      "id": 2375220,
      "node_id": "MDQ6VXNlcjIzNzUyMjA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2375220?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kjj2",
      "html_url": "https://github.com/kjj2",
      "followers_url": "https://api.github.com/users/kjj2/followers",
      "following_url": "https://api.github.com/users/kjj2/following{/other_user}",
      "gists_url": "https://api.github.com/users/kjj2/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kjj2/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kjj2/subscriptions",
      "organizations_url": "https://api.github.com/users/kjj2/orgs",
      "repos_url": "https://api.github.com/users/kjj2/repos",
      "events_url": "https://api.github.com/users/kjj2/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kjj2/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I only have one live wallet with RPC access at the moment, so I wasn't able to test your setup exactly.  But I did create 10 new keys in my wallet, and I made a sendtomany raw transaction that sent something to each of them, then signed it offline and relayed it through a different node.\n\nhttp://blockexplorer.com/tx/7650e6a4ef61485a3f6c44fbeaa1063c6ea0bbe4bf040fb91c6fd71888a81677\n\nThat transaction triggered walletnotify exactly twice on my box, once when it entered the memory pool, and once when the block containing it arrived.  It doesn't trigger for each input or each output of a transaction, just for each transaction-event.\n\nI like the named pipe thing too.  I'll look into it.\n",
    "created_at": "2012-11-06T15:08:44Z",
    "updated_at": "2012-11-06T15:08:44Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/1974#discussion_r2043461",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/1974",
    "author_association": "NONE",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2043461"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/1974#discussion_r2043461"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/1974"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2043461/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 481,
    "original_line": 481,
    "side": "RIGHT"
  }
]