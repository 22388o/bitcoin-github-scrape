laanwj,2014-06-23T08:29:13Z,"On one hand, this is very useful for diagnostics.\n\nOn the other hand this moves our internal anti-DDoS mechanism into the P2P interface. This means that\na) we can't change it to some other mechanism anymore at a later time\nb) other node implementations need to use the same or a similar system\n\nNot sure how much of a drawback this is. Accumulating a ban score is a straightforward mechanism. A",https://github.com/bitcoin/bitcoin/pull/4389#issuecomment-46817865,46817865,
laanwj,2014-06-23T09:43:07Z,Why close it?\n,https://github.com/bitcoin/bitcoin/pull/4389#issuecomment-46824298,46824298,
rebroad,2014-06-23T10:16:28Z,"@laanwj only because I noticed it didn't compile, re-opened now.\n",https://github.com/bitcoin/bitcoin/pull/4389#issuecomment-46826995,46826995,
kazcw,2014-06-23T18:14:52Z,"Providing more information to identify node misbehavior seems like a good move, but:\n- I'm having a hard time picturing how a running node could modify its behavior in response to misbehavior messages; if a node knows ""I could do X so that my peer won't increase my banscore,"" wouldn't it be doing X anyway?\n- It seems difficult to impossible to identify what misbehavior warning is in response to ",https://github.com/bitcoin/bitcoin/pull/4389#issuecomment-46881450,46881450,
sipa,2014-06-23T18:21:26Z,"I think there's a general intent to be conservative about offences causing DoS scoring; in particular, anything that can be relayed by older nodes can generally not trigger DoS, as it could lead to network partitioning.\n\nThey are not random frequently occurring things - they are highly exceptional, intended to never trigger for non-attacking nodes, and the only reason they don't always cause a d",https://github.com/bitcoin/bitcoin/pull/4389#issuecomment-46882283,46882283,
laanwj,2014-06-25T05:03:55Z,Good point @sipa.\n,https://github.com/bitcoin/bitcoin/pull/4389#issuecomment-47060859,47060859,
BitcoinPullTester,2014-06-25T21:49:52Z,"Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/p4389_d7b5f1fbab7d9c8c9c37f7edd43bc00577eba9f3/ for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-te",https://github.com/bitcoin/bitcoin/pull/4389#issuecomment-47163535,47163535,
laanwj,2014-06-28T13:06:49Z,"Seems there is no consensus on this, closing.\n",https://github.com/bitcoin/bitcoin/pull/4389#issuecomment-47426910,47426910,
laanwj,2014-07-02T15:59:32Z,"I have an alternative idea to this which doesn't expose as much of the internal state, but is still useful for troubleshooting and network diagnostics: a `bye` message.\n\nAn optional message that can be sent to the peer you're about to disconnect with a message why you're disconnecting them (ping timeout, ban, etc). The receiving peer would only log this - it's not possible to act on it - but it ",https://github.com/bitcoin/bitcoin/pull/4389#issuecomment-47795684,47795684,
ghost,2014-07-02T16:26:05Z,@laanwj that is a very good idea.\n,https://github.com/bitcoin/bitcoin/pull/4389#issuecomment-47799140,47799140,
rebroad,2014-07-03T00:20:53Z,"@laanwj I did think of that (a message when disconnecting), but that wouldn't allow nodes to adapt to their misbehavior. A good example of when this might be needed is with the recent pull that has been merged that allows nodes to double-spend. It was only noticed after the merge about a potential attack vector where nodes could be manipulated into being banned. If this patch (and a following patc",https://github.com/bitcoin/bitcoin/pull/4389#issuecomment-47853547,47853547,
laanwj,2014-07-03T04:34:50Z,I have my doubts on to how much a node can intelligently adapt its behaviour to such messages. Also as to whether it should at all. It could open it up to 'bad feedback' sybil attacks. What if your node is the one that gets it right?\n\nIn my eyes a message like this would only be useful for troubleshooting by actual human developers. And in that case a message at disconnection works better.\n,https://github.com/bitcoin/bitcoin/pull/4389#issuecomment-47865956,47865956,
rebroad,2014-07-05T04:55:59Z,"@laanwj How is the ""bye"" message better? It's effectively the same as this, but less granular.\n",https://github.com/bitcoin/bitcoin/pull/4389#issuecomment-48078448,48078448,
laanwj,2014-07-05T06:57:28Z,"OK - done arguing this, I'm pretty sure neither of both will be implemented anyway.\n",https://github.com/bitcoin/bitcoin/pull/4389#issuecomment-48079927,48079927,
rebroad,2016-09-13T03:13:14Z,"@laanwj Just re-read your message https://github.com/bitcoin/bitcoin/pull/4389#issuecomment-47865956 above, and I realise the assumption you were making, i.e. that behaviour learned about misbehaviour would apply to more nodes than the node giving the feedback.\n\nI don't think a node should assume all nodes classify the same behaviour as misbehaviour, this would certainly open up to the ""bad feed",https://github.com/bitcoin/bitcoin/pull/4389#issuecomment-246561285,246561285,
sipa,2016-09-13T03:50:49Z,"I think we should just get rid of misbehaviour scores entirely - all they do is making it harder to debug problems. Things that result in a ban score should just immediately trigger a ban, and others should have no effect at all. The only thing they help with is reduce the chance of accidentally have a relayed network message not immediately partition the network, but if this can happen with a 100",https://github.com/bitcoin/bitcoin/pull/4389#issuecomment-246566035,246566035,
venzen,2016-09-13T05:56:22Z,"that would be more efficient, wrt connection management, and eliminate the need for node behavior accounting/tracking.\n\nit seems that notions of ""misbehavior"" belong in consensus code. Blatant breaches of protocol should just result in a ban, straight-away\n",https://github.com/bitcoin/bitcoin/pull/4389#issuecomment-246582367,246582367,
venzen,2016-09-13T12:14:07Z,"if a ban disconnect is accompanied by a `bye` message as suggested by @laanwj then that could be useful to other clients and their developers, It will also mean that protocol breach is explicitly stated as the reason for disconnect both for specifically challenging unacceptable protocol behavior and to assist client software developers with correcting such incorrect behavior.\n\nYes, client develo",https://github.com/bitcoin/bitcoin/pull/4389#issuecomment-246662349,246662349,
rebroad,2016-09-15T07:04:49Z,"@sipa Is there some sort of roadmap document for Bitcoin Core? If so, I think your idea to abolish the current misbehaviour model should be added and I am in agreement. I like the ""bye"" message idea also, although technically, it's not needed as all unknown commands are currently logged so any messages could be sent that way :) \n\nI'd be happy to write a commit now that sends bye messages prior t",https://github.com/bitcoin/bitcoin/pull/4389#issuecomment-247252399,247252399,
sipa,2016-09-15T14:57:46Z,"This was just a personal opinion, certainly not something that has been\naddressed project-wide, and people may very well disagree.\n\nAlso, sorry for furthering this. We should hijact a old issue for this\ndiscussion.\n",https://github.com/bitcoin/bitcoin/pull/4389#issuecomment-247353000,247353000,
rebroad,2016-09-25T04:00:41Z,"@sipa Given the varying timezones we occupy, this is a better place to discuss this (for me at least) than the IRC channel.. We really need a better medium to discuss these things. Both IRC and the mailing list seem less than ideal compared to here. Perhaps wiki.bitcoin.com ?\n",https://github.com/bitcoin/bitcoin/pull/4389#issuecomment-249401342,249401342,
