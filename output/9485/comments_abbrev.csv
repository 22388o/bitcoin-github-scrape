jonasschnelli,2017-01-07T12:45:48Z,"What about ""rewriting"" the current python2 zmq example instead of creating a new one for python3? I don't think we need a python2 example.",https://github.com/bitcoin/bitcoin/pull/9485#issuecomment-271081796,271081796,
mcelrath,2017-01-07T13:18:09Z,"For nearly a decade people have been ""avoiding"" upgrading to python 3.  I don't know what's wrong with these people.  They should probably see a psychologist and get a friendly lobotomy.\n\nObviously I think python3 and asyncio is the ""right way"" to do anything.  It has all the advantages of javascript's asynchronicity and event loop while not being a totally brain-dead language.\n\nTL;DR I'd ",https://github.com/bitcoin/bitcoin/pull/9485#issuecomment-271083354,271083354,
MarcoFalke,2017-01-07T14:02:41Z,Maybe mention that the old version can still be retrieved from git history?,https://github.com/bitcoin/bitcoin/pull/9485#issuecomment-271085520,271085520,
fanquake,2017-01-08T11:43:00Z,"Agree with re-writing to use Python3, I don't think we need to keep examples for both in the repo.",https://github.com/bitcoin/bitcoin/pull/9485#issuecomment-271145840,271145840,
venzen,2017-01-08T12:22:04Z,"Agreed that a Python3 version is preferable. Python2 support for ZMQ libraries > 3 is uncertain and attempts to script for both Py2 and Py3 will run into incompatibilities of hex encoding, as well as pickle protocol limitations in Py2's pyzmq module.",https://github.com/bitcoin/bitcoin/pull/9485#issuecomment-271147654,271147654,
mcelrath,2017-01-09T22:27:45Z,"Since everyone here likes python3, I replaced the python2.7 file with the python3 example, and included a link to the python2.7 example in the git history.  I also removed the Polling wrapper class from the example, in favor of more direct use of asyncio primitives.\n\nAgain it's functionally identical to the original example.",https://github.com/bitcoin/bitcoin/pull/9485#issuecomment-271427952,271427952,
venzen,2017-01-10T03:08:08Z,"Python 3.4 seems to be widely used while Python 3.5 is still pushing out the boat.\n\nDeprecating Python 2 in favor of version 3 has many benefits, yet, thinking about general usability, it would perhaps make sense to keep this script's functionality dependent on the *zmq* module and avoid adding *asyncio* dependency? Don't get me wrong - the use of *asyncio* in this script is clean and efficien",https://github.com/bitcoin/bitcoin/pull/9485#issuecomment-271474525,271474525,
laanwj,2017-01-10T14:16:00Z,"Bah, I think we should support 3.4 for the forseeable future. I don't care about 2.x compatibility.\n\nCan't we make asyncio usage dependent on Python version or something? Is it hard to make a fallback, to support both, use the fancy new i/o system on 3.5+?",https://github.com/bitcoin/bitcoin/pull/9485#issuecomment-271585760,271585760,
mcelrath,2017-01-10T15:58:30Z,"See I told ya this would result in a python version fight...I just didn't anticipate anyone wanting 3.4! :-P\n\nPython 3.4 was last released in Ubuntu in version 14.04.  It has been excluded in 14.10, 15.04, 15.10, 16.04 LTS, and 16.10.  It's ancient history.  The python project itself has designated 3.4 as ""security fixes only"" and is no longer producing binaries for it.\n\nThe syntax change ",https://github.com/bitcoin/bitcoin/pull/9485#issuecomment-271614406,271614406,
laanwj,2017-01-11T13:04:35Z,"Concept ACK, cannot test this right now, may do so later (I do have an Ubuntu Trusty/14.04 instance to test, note that we also use this version of Ubuntu on Travis and to build gitian releases).",https://github.com/bitcoin/bitcoin/pull/9485#issuecomment-271863242,271863242,
MarcoFalke,2017-01-18T10:07:41Z,"Needs rebase.\n\nMaybe also squash the first two commits?",https://github.com/bitcoin/bitcoin/pull/9485#issuecomment-273435050,273435050,
mcelrath,2017-01-18T15:56:30Z,Rebased.  I usually squash when merging but I can squash ahead of time if desired.,https://github.com/bitcoin/bitcoin/pull/9485#issuecomment-273514947,273514947,
mcelrath,2017-01-18T17:16:49Z,"@jnewbery Well the point of `/contrib` is to provide examples, so nothing in there is truly necessary!  Devs should be able to figure it all out themselves!  ;-)  The necessary syntax change between 3.4 and 3.5 is somewhat tedious to discover and understand.  So I do think having both (and even the 2.7 version) is valuable.",https://github.com/bitcoin/bitcoin/pull/9485#issuecomment-273539172,273539172,
jnewbery,2017-01-18T18:10:52Z,"@mcelrath Sure. I'm not massively concerned about what goes on in /contrib. Having two versions of zmq_sub.py just makes this marginally less maintainable, since any changes to the code would need to be repeated and tested in two places against two different versions of python. Perhaps adding a comment to the top of the module with a link to the python docs about asyncio syntax differences is a be",https://github.com/bitcoin/bitcoin/pull/9485#issuecomment-273554249,273554249,
jnewbery,2017-01-19T22:25:18Z,Looks great. Tested ACK https://github.com/bitcoin/bitcoin/pull/9485/commits/b471daf85b07d0ca072a8d7ec482a25401a67399,https://github.com/bitcoin/bitcoin/pull/9485#issuecomment-273918291,273918291,
jmcorgan,2017-02-20T06:12:03Z,ACK,https://github.com/bitcoin/bitcoin/pull/9485#issuecomment-280996310,280996310,
venzen,2017-01-10T03:01:11Z,This function definition syntax is specific to Python 3.5 and throws an exception in Python 3.4. Perhaps a ```from __future__ import``` option exists that will allow compatibility with all Python 3 minor versions?,https://github.com/bitcoin/bitcoin/pull/9485#discussion_r95293079,95293079,contrib/zmq/zmq_sub.py
mcelrath,2017-01-10T03:38:36Z,"Asyncio was only introduced in 3.5 including these syntax enhancements and was ""provisional"".  It's now final that 3.6 was released a week ago, and backported (as final) to 3.5 point releases.  3.4 doesn't have it and never will.  But, it doesn't have anywhere near the user base of 2.7 and I don't think is worth supporting long term.\n\nI tried to install 3.4 while testing this, it's not even pr",https://github.com/bitcoin/bitcoin/pull/9485#discussion_r95295631,95295631,contrib/zmq/zmq_sub.py
mcelrath,2017-01-10T03:39:44Z,"FYI the ""yield from"" syntax of 3.4 has been entirely deprecated.",https://github.com/bitcoin/bitcoin/pull/9485#discussion_r95295720,95295720,contrib/zmq/zmq_sub.py
venzen,2017-01-10T09:28:52Z,"Useful to know and thanks for the info & link @mcelrath \n\nPython 3.5 will undoubtedly become the de facto standard, as you imply. In providing example scripts it seems reasonable that Bitcoin cater to the common denominator. It's probably safe to assume that most nodes out there are not running on the latest OS versions and that Ubuntu 14.04 and even 12.04 (in some cases) are the majority. Fro",https://github.com/bitcoin/bitcoin/pull/9485#discussion_r95326421,95326421,contrib/zmq/zmq_sub.py
jnewbery,2017-01-18T16:25:11Z,nit: I'd like to see a module-level docstring describing what this does (which can include the comment block below about the pre-2.7 version),https://github.com/bitcoin/bitcoin/pull/9485#discussion_r96673989,96673989,contrib/zmq/zmq_sub.py
jnewbery,2017-01-18T16:25:33Z,nit: I don't think this import array is actually used?,https://github.com/bitcoin/bitcoin/pull/9485#discussion_r96674079,96674079,contrib/zmq/zmq_sub.py
jnewbery,2017-01-18T16:26:03Z,"nit: prefer imports to be on individual line (PEP8 E401), and listed individually.",https://github.com/bitcoin/bitcoin/pull/9485#discussion_r96674200,96674200,contrib/zmq/zmq_sub.py
benma,2017-02-23T00:04:35Z,"Ubuntu 14.04 LTS is supported until April 2019, and currently ships Python 3.4.3, so I also think it makes sense to provide examples compatible with Python 3.4.",https://github.com/bitcoin/bitcoin/pull/9485#discussion_r102607540,102607540,contrib/zmq/zmq_sub.py
