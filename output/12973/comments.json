[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381029842",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12973#issuecomment-381029842",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12973",
    "id": 381029842,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MTAyOTg0Mg==",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?u=5ff13e375b40ea55ecd3c108337dd6a23f68eddf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-13T05:42:10Z",
    "updated_at": "2018-04-13T05:42:10Z",
    "author_association": "CONTRIBUTOR",
    "body": "Concept ACK",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381029842/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381036919",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12973#issuecomment-381036919",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12973",
    "id": 381036919,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MTAzNjkxOQ==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-13T06:27:41Z",
    "updated_at": "2018-04-13T06:27:41Z",
    "author_association": "MEMBER",
    "body": "A potential problem is that `strftime` depends on the locale, just like many other C string formatting functions, which has made us avoid them in general. From the developer notes:\r\n> - Use `std::string`, avoid C string manipulation functions\r\n>  - *Rationale*: C++ string handling is marginally safer, less scope for buffer overflows and surprises with `\\0` characters. Also some C string manipulations **tend to act differently depending on platform, or even the user locale**\r\n\r\nThe imbue stuff forces using the 'C' locale, I'm afraid if we want to use C functions we'd need a C equivalent of that and that's probably just as bad.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381036919/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381037446",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12973#issuecomment-381037446",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12973",
    "id": 381037446,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MTAzNzQ0Ng==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-13T06:30:33Z",
    "updated_at": "2018-04-13T06:31:56Z",
    "author_association": "MEMBER",
    "body": "FWIW it doesn't need full `strftime` support. The only datetime formats left in non-test code are ISO8601:\r\n```c++\r\nsrc/utiltime.cpp:    return DateTimeStrFormat(\"%Y-%m-%dT%H:%M:%SZ\", nTime);\r\nsrc/utiltime.cpp:    return DateTimeStrFormat(\"%Y-%m-%d\", nTime);\r\nsrc/utiltime.cpp:    return DateTimeStrFormat(\"%H:%M:%SZ\", nTime);\r\n```\r\nAnother potential simplification could be around that they all deal with UTC, and have UNIX epoch format as input.\r\n\r\nEdit: so to be clear, big **concept ACK** on getting rid of this madness, but let's think about the replacement a bit. Maybe there's something like `tinyformat.h` that we can just import from somewhere...",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381037446/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381038600",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12973#issuecomment-381038600",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12973",
    "id": 381038600,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MTAzODYwMA==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-13T06:37:07Z",
    "updated_at": "2018-04-13T07:21:13Z",
    "author_association": "MEMBER",
    "body": "> The imbue stuff forces using the 'C' locale, I'm afraid if we want to use C functions we'd need a C equivalent of that and that's probably just as bad.\r\n\r\nA reminder that this is where we're coming from: 3e8ac6af9a993e262d1160fb2e6e1e1f1d5d19f2\r\n\r\nEdit: Thinking about it further - it becomes less clear to me whether the slowness is due to our own code, or due to formatting, or something else. After all, the speed seems to depend on the operating system. Maybe the slowdown (fixed by #12970) is due to barraging the kernel with \"get current time\" system calls. This is fairly fast on Linux - due to vdso user-space implementation of some syscalls - but not on windows or other OSes.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381038600/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381066033",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12973#issuecomment-381066033",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12973",
    "id": 381066033,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MTA2NjAzMw==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-13T08:37:14Z",
    "updated_at": "2018-04-13T08:43:53Z",
    "author_association": "MEMBER",
    "body": "@laanwj Thanks, you're right that this approach ignores the reasons why the old code existed in the first place. I've replaced it with just hardcoded ISO8601 format strings... please let me know if you think this is too NIH.\r\n\r\nPerhaps this is overkill as it may not help for performance. I remember we've had multiple horror stories in the past with this code though; I'd prefer to get rid of it.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381066033/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381118117",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12973#issuecomment-381118117",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12973",
    "id": 381118117,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MTExODExNw==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-13T12:20:31Z",
    "updated_at": "2018-04-14T16:32:45Z",
    "author_association": "MEMBER",
    "body": ">  I've replaced it with just hardcoded ISO8601 format strings... please let me know if you think this is too NIH.\r\n\r\nNo I think this is great :+1: It's very straightforward.\r\n\r\ntACK 152701568159915828613fa131e94e21337c0c2d",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381118117/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381120201",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12973#issuecomment-381120201",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12973",
    "id": 381120201,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MTEyMDIwMQ==",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?u=5ff13e375b40ea55ecd3c108337dd6a23f68eddf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-13T12:29:28Z",
    "updated_at": "2018-04-13T12:29:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "utACK 152701568159915828613fa131e94e21337c0c2d",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381120201/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381224896",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12973#issuecomment-381224896",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12973",
    "id": 381224896,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MTIyNDg5Ng==",
    "user": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?u=eab5d0cdbb6cc25087cb61d4ca4a6f85255f42a7&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-13T18:36:22Z",
    "updated_at": "2018-04-13T18:36:22Z",
    "author_association": "CONTRIBUTOR",
    "body": "utACK 152701568159915828613fa131e94e21337c0c2d",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381224896/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381373082",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12973#issuecomment-381373082",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12973",
    "id": 381373082,
    "node_id": "MDEyOklzc3VlQ29tbWVudDM4MTM3MzA4Mg==",
    "user": {
      "login": "sipsorcery",
      "id": 197660,
      "node_id": "MDQ6VXNlcjE5NzY2MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/197660?u=56479352d085f0d392512768d25957b0b3b770b4&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipsorcery",
      "html_url": "https://github.com/sipsorcery",
      "followers_url": "https://api.github.com/users/sipsorcery/followers",
      "following_url": "https://api.github.com/users/sipsorcery/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipsorcery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipsorcery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipsorcery/subscriptions",
      "organizations_url": "https://api.github.com/users/sipsorcery/orgs",
      "repos_url": "https://api.github.com/users/sipsorcery/repos",
      "events_url": "https://api.github.com/users/sipsorcery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipsorcery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2018-04-15T01:22:59Z",
    "updated_at": "2018-04-15T01:22:59Z",
    "author_association": "MEMBER",
    "body": "As an fyi Windows doesn't come with gmtime_r so this PR broke the msvc build.\r\n\r\nI'd say there's an easy enough workaround and will look into it.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/381373082/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/181289765",
    "pull_request_review_id": 111888271,
    "id": 181289765,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4MTI4OTc2NQ==",
    "diff_hunk": "@@ -77,13 +77,13 @@ void MilliSleep(int64_t n)\n \n std::string DateTimeStrFormat(const char* pszFormat, int64_t nTime)\n {\n-    static std::locale classic(std::locale::classic());\n-    // std::locale takes ownership of the pointer\n-    std::locale loc(classic, new boost::posix_time::time_facet(pszFormat));\n-    std::stringstream ss;\n-    ss.imbue(loc);\n-    ss << boost::posix_time::from_time_t(nTime);\n-    return ss.str();\n+    char buf[256];\n+    struct tm time_struct;\n+    time_t time_val = nTime;\n+    gmtime_r(&time_val, &time_struct);",
    "path": "src/utiltime.cpp",
    "position": null,
    "original_position": 25,
    "commit_id": "152701568159915828613fa131e94e21337c0c2d",
    "original_commit_id": "3a3ea86ec7617deabc5ba448ae487d5317b1fb40",
    "user": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Is this portable? Afiak all of the madness is usually an abstraction of these variants.",
    "created_at": "2018-04-13T05:40:12Z",
    "updated_at": "2018-04-13T08:37:21Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12973#discussion_r181289765",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12973",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/181289765"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12973#discussion_r181289765"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12973"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/181289765/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 83,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/181295061",
    "pull_request_review_id": 111895920,
    "id": 181295061,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4MTI5NTA2MQ==",
    "diff_hunk": "@@ -77,13 +77,13 @@ void MilliSleep(int64_t n)\n \n std::string DateTimeStrFormat(const char* pszFormat, int64_t nTime)\n {\n-    static std::locale classic(std::locale::classic());\n-    // std::locale takes ownership of the pointer\n-    std::locale loc(classic, new boost::posix_time::time_facet(pszFormat));\n-    std::stringstream ss;\n-    ss.imbue(loc);\n-    ss << boost::posix_time::from_time_t(nTime);\n-    return ss.str();\n+    char buf[256];\n+    struct tm time_struct;\n+    time_t time_val = nTime;\n+    gmtime_r(&time_val, &time_struct);",
    "path": "src/utiltime.cpp",
    "position": null,
    "original_position": 25,
    "commit_id": "152701568159915828613fa131e94e21337c0c2d",
    "original_commit_id": "3a3ea86ec7617deabc5ba448ae487d5317b1fb40",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Well at least this code doesn't need any allocations.",
    "created_at": "2018-04-13T06:24:36Z",
    "updated_at": "2018-04-13T08:37:21Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12973#discussion_r181295061",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12973",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/181295061"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12973#discussion_r181295061"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12973"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/181295061/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 83,
    "side": "RIGHT",
    "in_reply_to_id": 181289765
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/181311420",
    "pull_request_review_id": 111915286,
    "id": 181311420,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4MTMxMTQyMA==",
    "diff_hunk": "@@ -77,13 +77,13 @@ void MilliSleep(int64_t n)\n \n std::string DateTimeStrFormat(const char* pszFormat, int64_t nTime)\n {\n-    static std::locale classic(std::locale::classic());\n-    // std::locale takes ownership of the pointer\n-    std::locale loc(classic, new boost::posix_time::time_facet(pszFormat));\n-    std::stringstream ss;\n-    ss.imbue(loc);\n-    ss << boost::posix_time::from_time_t(nTime);\n-    return ss.str();\n+    char buf[256];\n+    struct tm time_struct;\n+    time_t time_val = nTime;\n+    gmtime_r(&time_val, &time_struct);",
    "path": "src/utiltime.cpp",
    "position": null,
    "original_position": 25,
    "commit_id": "152701568159915828613fa131e94e21337c0c2d",
    "original_commit_id": "3a3ea86ec7617deabc5ba448ae487d5317b1fb40",
    "user": {
      "login": "ken2812221",
      "id": 11154118,
      "node_id": "MDQ6VXNlcjExMTU0MTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11154118?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ken2812221",
      "html_url": "https://github.com/ken2812221",
      "followers_url": "https://api.github.com/users/ken2812221/followers",
      "following_url": "https://api.github.com/users/ken2812221/following{/other_user}",
      "gists_url": "https://api.github.com/users/ken2812221/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ken2812221/subscriptions",
      "organizations_url": "https://api.github.com/users/ken2812221/orgs",
      "repos_url": "https://api.github.com/users/ken2812221/repos",
      "events_url": "https://api.github.com/users/ken2812221/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ken2812221/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Why don't just use `gmtime`? It's more portable.",
    "created_at": "2018-04-13T07:58:10Z",
    "updated_at": "2018-04-13T08:37:21Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12973#discussion_r181311420",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12973",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/181311420"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12973#discussion_r181311420"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12973"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/181311420/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 83,
    "side": "RIGHT",
    "in_reply_to_id": 181289765
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/181324043",
    "pull_request_review_id": 111930401,
    "id": 181324043,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4MTMyNDA0Mw==",
    "diff_hunk": "@@ -77,13 +77,13 @@ void MilliSleep(int64_t n)\n \n std::string DateTimeStrFormat(const char* pszFormat, int64_t nTime)\n {\n-    static std::locale classic(std::locale::classic());\n-    // std::locale takes ownership of the pointer\n-    std::locale loc(classic, new boost::posix_time::time_facet(pszFormat));\n-    std::stringstream ss;\n-    ss.imbue(loc);\n-    ss << boost::posix_time::from_time_t(nTime);\n-    return ss.str();\n+    char buf[256];\n+    struct tm time_struct;\n+    time_t time_val = nTime;\n+    gmtime_r(&time_val, &time_struct);",
    "path": "src/utiltime.cpp",
    "position": null,
    "original_position": 25,
    "commit_id": "152701568159915828613fa131e94e21337c0c2d",
    "original_commit_id": "3a3ea86ec7617deabc5ba448ae487d5317b1fb40",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "@ken2812221 `gmtime` is not thread safe. We either user `gmtime_r`, or introduce a lock around the call.",
    "created_at": "2018-04-13T08:51:17Z",
    "updated_at": "2018-04-13T08:51:17Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12973#discussion_r181324043",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12973",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/181324043"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12973#discussion_r181324043"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12973"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/181324043/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 83,
    "side": "RIGHT",
    "in_reply_to_id": 181289765
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/181377401",
    "pull_request_review_id": 111996700,
    "id": 181377401,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4MTM3NzQwMQ==",
    "diff_hunk": "@@ -75,25 +76,23 @@ void MilliSleep(int64_t n)\n #endif\n }\n \n-std::string DateTimeStrFormat(const char* pszFormat, int64_t nTime)\n-{\n-    static std::locale classic(std::locale::classic());\n-    // std::locale takes ownership of the pointer\n-    std::locale loc(classic, new boost::posix_time::time_facet(pszFormat));\n-    std::stringstream ss;\n-    ss.imbue(loc);\n-    ss << boost::posix_time::from_time_t(nTime);\n-    return ss.str();\n-}\n-\n std::string FormatISO8601DateTime(int64_t nTime) {\n-    return DateTimeStrFormat(\"%Y-%m-%dT%H:%M:%SZ\", nTime);\n+    struct tm ts;\n+    time_t time_val = nTime;\n+    gmtime_r(&time_val, &ts);",
    "path": "src/utiltime.cpp",
    "position": 31,
    "original_position": 31,
    "commit_id": "152701568159915828613fa131e94e21337c0c2d",
    "original_commit_id": "152701568159915828613fa131e94e21337c0c2d",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I'm happy that this works on windows as-is as well!",
    "created_at": "2018-04-13T12:51:07Z",
    "updated_at": "2018-04-13T12:51:20Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/12973#discussion_r181377401",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12973",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/181377401"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/12973#discussion_r181377401"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12973"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/181377401/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 82,
    "original_line": 82,
    "side": "RIGHT"
  }
]