laanwj,2020-07-08 15:03:01,Code review ACK 0b8ba84659b56b12d74587ea31b6062fce887ba3,https://github.com/bitcoin/bitcoin/pull/19470#issuecomment-655575422,655575422,
jnewbery,2020-07-09 10:50:16,"Code review ACK 0b8ba84659b56b12d74587ea31b6062fce887ba3\n\nNow that the local `banmap` isn't being used after `SetBanned()`, we could change `SetBanned()` to take an rvalue reference and do a move, rather than the expensive copy. (not in this PR)",https://github.com/bitcoin/bitcoin/pull/19470#issuecomment-656056464,656056464,
fanquake,2020-07-09 12:10:00,"> In a couple of manual checks, both master and this branch logged the correct number with 0 and 1 banned peers using setban/clearbanned, so I didn't hit the timing to produce a wrong count.\n\nYou can observe the issue on master by just setting a short ban, and restarting bitcoind. i.e:\n\n```bash\nsrc/bitcoind -regtest\n\n# set a short-lived ban\nsrc/bitcoin-cli -regtest setban ""2001:4d4",https://github.com/bitcoin/bitcoin/pull/19470#issuecomment-656089856,656089856,
jonatack,2020-07-09 12:25:36,"Ok, reproduced on mainnet. I wasn't shutting down bitcoind fast enough before it expired.",https://github.com/bitcoin/bitcoin/pull/19470#issuecomment-656096842,656096842,
jonatack,2020-07-09 11:59:29,"FWIW I would find this logging handy as a regular debug log `LogPrintf`, like the other ones in this function.",https://github.com/bitcoin/bitcoin/pull/19470#discussion_r452164707,452164707,src/banman.cpp
