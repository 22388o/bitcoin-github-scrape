[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/746531361",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20665#issuecomment-746531361",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20665",
    "id": 746531361,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc0NjUzMTM2MQ==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-16T15:59:23Z",
    "updated_at": "2020-12-16T15:59:23Z",
    "author_association": "MEMBER",
    "body": "<details>\r\n  <summary>Diff between old and new patch</summary>\r\n\r\n```patch\r\n--- clang.patch\t2020-12-16 16:55:03.987104506 +0100\r\n+++ clang_cxx_11.patch\t2020-12-16 16:54:47.747154861 +0100\r\n@@ -1,7 +1,13 @@\r\n-diff --git a/src/dbinc/atomic.h b/src/dbinc/atomic.h\r\n-index 6a858f7..9f338dc 100644\r\n---- a/src/dbinc/atomic.h\r\n-+++ b/src/dbinc/atomic.h\r\n+commit 3311d68f11d1697565401eee6efc85c34f022ea7\r\n+Author: fanquake <fanquake@gmail.com>\r\n+Date:   Mon Aug 17 20:03:56 2020 +0800\r\n+\r\n+    Fix C++11 compatibility\r\n+\r\n+diff --git a/dbinc/atomic.h b/dbinc/atomic.h\r\n+index 0034dcc..7c11d4a 100644\r\n+--- a/dbinc/atomic.h\r\n++++ b/dbinc/atomic.h\r\n @@ -70,7 +70,7 @@ typedef struct {\r\n   * These have no memory barriers; the caller must include them when necessary.\r\n   */\r\n@@ -38,11 +44,11 @@\r\n  #else\r\n  #define atomic_inc(env, p)\t__atomic_inc(env, p)\r\n  #define atomic_dec(env, p)\t__atomic_dec(env, p)\r\n-diff --git a/src/mp/mp_fget.c b/src/mp/mp_fget.c\r\n-index 16de695..d0dcc29 100644\r\n---- a/src/mp/mp_fget.c\r\n-+++ b/src/mp/mp_fget.c\r\n-@@ -649,7 +649,7 @@ alloc:\t\t/* Allocate a new buffer header and data space. */\r\n+diff --git a/mp/mp_fget.c b/mp/mp_fget.c\r\n+index 5fdee5a..0b75f57 100644\r\n+--- a/mp/mp_fget.c\r\n++++ b/mp/mp_fget.c\r\n+@@ -617,7 +617,7 @@ alloc:\t\t/* Allocate a new buffer header and data space. */\r\n  \r\n  \t\t/* Initialize enough so we can call __memp_bhfree. */\r\n  \t\talloc_bhp->flags = 0;\r\n@@ -50,9 +56,9 @@\r\n +\t\tatomic_init_db(&alloc_bhp->ref, 1);\r\n  #ifdef DIAGNOSTIC\r\n  \t\tif ((uintptr_t)alloc_bhp->buf & (sizeof(size_t) - 1)) {\r\n- \t\t\t__db_errx(env, DB_STR(\"3025\",\r\n-@@ -955,7 +955,7 @@ alloc:\t\t/* Allocate a new buffer header and data space. */\r\n- \t\t\tMVCC_MPROTECT(bhp->buf, mfp->pagesize,\r\n+ \t\t\t__db_errx(env,\r\n+@@ -911,7 +911,7 @@ alloc:\t\t/* Allocate a new buffer header and data space. */\r\n+ \t\t\tMVCC_MPROTECT(bhp->buf, mfp->stat.st_pagesize,\r\n  \t\t\t    PROT_READ);\r\n  \r\n -\t\tatomic_init(&alloc_bhp->ref, 1);\r\n@@ -60,10 +66,10 @@\r\n  \t\tMUTEX_LOCK(env, alloc_bhp->mtx_buf);\r\n  \t\talloc_bhp->priority = bhp->priority;\r\n  \t\talloc_bhp->pgno = bhp->pgno;\r\n-diff --git a/src/mp/mp_mvcc.c b/src/mp/mp_mvcc.c\r\n-index 770bad8..e28cce0 100644\r\n---- a/src/mp/mp_mvcc.c\r\n-+++ b/src/mp/mp_mvcc.c\r\n+diff --git a/mp/mp_mvcc.c b/mp/mp_mvcc.c\r\n+index 34467d2..f05aa0c 100644\r\n+--- a/mp/mp_mvcc.c\r\n++++ b/mp/mp_mvcc.c\r\n @@ -276,7 +276,7 @@ __memp_bh_freeze(dbmp, infop, hp, bhp, need_frozenp)\r\n  #else\r\n  \tmemcpy(frozen_bhp, bhp, SSZA(BH, buf));\r\n@@ -82,11 +88,11 @@\r\n  \t\tF_CLR(alloc_bhp, BH_FROZEN);\r\n  \t}\r\n  \r\n-diff --git a/src/mp/mp_region.c b/src/mp/mp_region.c\r\n-index 4952030..47645f8 100644\r\n---- a/src/mp/mp_region.c\r\n-+++ b/src/mp/mp_region.c\r\n-@@ -245,7 +245,7 @@ __memp_init(env, dbmp, reginfo_off, htab_buckets, max_nreg)\r\n+diff --git a/mp/mp_region.c b/mp/mp_region.c\r\n+index e6cece9..ddbe906 100644\r\n+--- a/mp/mp_region.c\r\n++++ b/mp/mp_region.c\r\n+@@ -224,7 +224,7 @@ __memp_init(env, dbmp, reginfo_off, htab_buckets, max_nreg)\r\n  \t\t\t     MTX_MPOOL_FILE_BUCKET, 0, &htab[i].mtx_hash)) != 0)\r\n  \t\t\t\treturn (ret);\r\n  \t\t\tSH_TAILQ_INIT(&htab[i].hash_bucket);\r\n@@ -95,20 +101,20 @@\r\n  \t\t}\r\n  \r\n  \t\t/*\r\n-@@ -302,7 +302,7 @@ no_prealloc:\r\n- \t\t} else\r\n- \t\t\thp->mtx_hash = mtx_base + (i % dbenv->mp_mtxcount);\r\n+@@ -269,7 +269,7 @@ __memp_init(env, dbmp, reginfo_off, htab_buckets, max_nreg)\r\n+ \t\thp->mtx_hash = (mtx_base == MUTEX_INVALID) ? MUTEX_INVALID :\r\n+ \t\t    mtx_base + i;\r\n  \t\tSH_TAILQ_INIT(&hp->hash_bucket);\r\n -\t\tatomic_init(&hp->hash_page_dirty, 0);\r\n +\t\tatomic_init_db(&hp->hash_page_dirty, 0);\r\n  #ifdef HAVE_STATISTICS\r\n  \t\thp->hash_io_wait = 0;\r\n  \t\thp->hash_frozen = hp->hash_thawed = hp->hash_frozen_freed = 0;\r\n-diff --git a/src/mutex/mut_method.c b/src/mutex/mut_method.c\r\n-index 09353b0..177353c 100644\r\n---- a/src/mutex/mut_method.c\r\n-+++ b/src/mutex/mut_method.c\r\n-@@ -474,7 +474,7 @@ atomic_compare_exchange(env, v, oldval, newval)\r\n+diff --git a/mutex/mut_method.c b/mutex/mut_method.c\r\n+index 2588763..5c6d516 100644\r\n+--- a/mutex/mut_method.c\r\n++++ b/mutex/mut_method.c\r\n+@@ -426,7 +426,7 @@ atomic_compare_exchange(env, v, oldval, newval)\r\n  \tMUTEX_LOCK(env, mtx);\r\n  \tret = atomic_read(v) == oldval;\r\n  \tif (ret)\r\n@@ -117,11 +123,11 @@\r\n  \tMUTEX_UNLOCK(env, mtx);\r\n  \r\n  \treturn (ret);\r\n-diff --git a/src/mutex/mut_tas.c b/src/mutex/mut_tas.c\r\n-index 106b161..fc4de9d 100644\r\n---- a/src/mutex/mut_tas.c\r\n-+++ b/src/mutex/mut_tas.c\r\n-@@ -47,7 +47,7 @@ __db_tas_mutex_init(env, mutex, flags)\r\n+diff --git a/mutex/mut_tas.c b/mutex/mut_tas.c\r\n+index f3922e0..e40fcdf 100644\r\n+--- a/mutex/mut_tas.c\r\n++++ b/mutex/mut_tas.c\r\n+@@ -46,7 +46,7 @@ __db_tas_mutex_init(env, mutex, flags)\r\n  \r\n  #ifdef HAVE_SHARED_LATCHES\r\n  \tif (F_ISSET(mutexp, DB_MUTEX_SHARED))\r\n@@ -130,7 +136,7 @@\r\n  \telse\r\n  #endif\r\n  \tif (MUTEX_INIT(&mutexp->tas)) {\r\n-@@ -536,7 +536,7 @@ __db_tas_mutex_unlock(env, mutex)\r\n+@@ -486,7 +486,7 @@ __db_tas_mutex_unlock(env, mutex)\r\n  \t\t\tF_CLR(mutexp, DB_MUTEX_LOCKED);\r\n  \t\t\t/* Flush flag update before zeroing count */\r\n  \t\t\tMEMBAR_EXIT();\r\n@@ -138,4 +144,4 @@\r\n +\t\t\tatomic_init_db(&mutexp->sharecount, 0);\r\n  \t\t} else {\r\n  \t\t\tDB_ASSERT(env, sharecount > 0);\r\n- \t\t\tMEMBAR_EXIT();\r\n\\ No newline at end of file\r\n+ \t\t\tMEMBAR_EXIT();\r\n```\r\n</details>",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/746531361/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/757432551",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20665#issuecomment-757432551",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20665",
    "id": 757432551,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1NzQzMjU1MQ==",
    "user": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?u=a0e0040aacd7d4f0787481e8ac30b494fa429e11&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-10T07:38:01Z",
    "updated_at": "2021-01-10T07:38:01Z",
    "author_association": "MEMBER",
    "body": "@gruve-p can you squash your commits.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/757432551/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/757458324",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20665#issuecomment-757458324",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20665",
    "id": 757458324,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1NzQ1ODMyNA==",
    "user": {
      "login": "gruve-p",
      "id": 11212268,
      "node_id": "MDQ6VXNlcjExMjEyMjY4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11212268?u=908bbd03f97241182a7e108fdca2e048b6bf462d&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gruve-p",
      "html_url": "https://github.com/gruve-p",
      "followers_url": "https://api.github.com/users/gruve-p/followers",
      "following_url": "https://api.github.com/users/gruve-p/following{/other_user}",
      "gists_url": "https://api.github.com/users/gruve-p/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gruve-p/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gruve-p/subscriptions",
      "organizations_url": "https://api.github.com/users/gruve-p/orgs",
      "repos_url": "https://api.github.com/users/gruve-p/repos",
      "events_url": "https://api.github.com/users/gruve-p/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gruve-p/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-10T11:15:07Z",
    "updated_at": "2021-01-10T11:30:16Z",
    "author_association": "CONTRIBUTOR",
    "body": "@fanquake Squashed",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/757458324/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/757460848",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20665#issuecomment-757460848",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20665",
    "id": 757460848,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1NzQ2MDg0OA==",
    "user": {
      "login": "gruve-p",
      "id": 11212268,
      "node_id": "MDQ6VXNlcjExMjEyMjY4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11212268?u=908bbd03f97241182a7e108fdca2e048b6bf462d&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gruve-p",
      "html_url": "https://github.com/gruve-p",
      "followers_url": "https://api.github.com/users/gruve-p/followers",
      "following_url": "https://api.github.com/users/gruve-p/following{/other_user}",
      "gists_url": "https://api.github.com/users/gruve-p/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gruve-p/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gruve-p/subscriptions",
      "organizations_url": "https://api.github.com/users/gruve-p/orgs",
      "repos_url": "https://api.github.com/users/gruve-p/repos",
      "events_url": "https://api.github.com/users/gruve-p/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gruve-p/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-10T11:33:00Z",
    "updated_at": "2021-01-10T11:33:00Z",
    "author_association": "CONTRIBUTOR",
    "body": "Ready for rereview @laanwj ",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/757460848/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/757640892",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20665#issuecomment-757640892",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20665",
    "id": 757640892,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1NzY0MDg5Mg==",
    "user": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?u=a0e0040aacd7d4f0787481e8ac30b494fa429e11&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-11T05:58:09Z",
    "updated_at": "2021-01-11T05:58:09Z",
    "author_association": "MEMBER",
    "body": "When I asked you to squash I'd assumed you'd actually tested that this works. I've checked that this produces the same `libdb_cxx-4.8.a` & `libdb-4.8.a`, however, as is, the patch wont apply:\r\n```bash\r\nCFLAGS=\"-Wno-error=implicit-function-declaration\" ./contrib/install_db4.sh $(pwd)\r\n...\r\nx db-4.8.30.NC/txn/txn_stat.c\r\nx db-4.8.30.NC/txn/txn_util.c\r\ncan't find file to patch at input line 11\r\nPerhaps you used the wrong -p or --strip option?\r\nThe text leading up to this was:\r\n--------------------------\r\n|commit 3311d68f11d1697565401eee6efc85c34f022ea7\r\n|Author: fanquake <fanquake@gmail.com>\r\n|Date:   Mon Aug 17 20:03:56 2020 +0800\r\n|\r\n|    Fix C++11 compatibility\r\n|\r\n|diff --git a/dbinc/atomic.h b/dbinc/atomic.h\r\n|index 0034dcc..7c11d4a 100644\r\n|--- a/dbinc/atomic.h\r\n|+++ b/dbinc/atomic.h\r\n--------------------------\r\nFile to patch:\r\n```\r\n\r\nYou'll need to fix the paths, something like:\r\n```diff\r\ndiff --git a/contrib/install_db4.sh b/contrib/install_db4.sh\r\nindex 0a022229e..3c88de16e 100755\r\n--- a/contrib/install_db4.sh\r\n+++ b/contrib/install_db4.sh\r\n@@ -75,10 +75,10 @@ Date:   Mon Aug 17 20:03:56 2020 +0800\r\n \r\n     Fix C++11 compatibility\r\n \r\n-diff --git a/dbinc/atomic.h b/dbinc/atomic.h\r\n+diff --git a/src/dbinc/atomic.h b/src/dbinc/atomic.h\r\n index 0034dcc..7c11d4a 100644\r\n---- a/dbinc/atomic.h\r\n-+++ b/dbinc/atomic.h\r\n+--- a/src/dbinc/atomic.h\r\n++++ b/src/dbinc/atomic.h\r\n @@ -70,7 +70,7 @@ typedef struct {\r\n   * These have no memory barriers; the caller must include them when necessary.\r\n   */\r\n@@ -115,10 +115,10 @@ index 0034dcc..7c11d4a 100644\r\n  #else\r\n  #define atomic_inc(env, p)\t__atomic_inc(env, p)\r\n  #define atomic_dec(env, p)\t__atomic_dec(env, p)\r\n-diff --git a/mp/mp_fget.c b/mp/mp_fget.c\r\n+diff --git a/src/mp/mp_fget.c b/src/mp/mp_fget.c\r\n index 5fdee5a..0b75f57 100644\r\n---- a/mp/mp_fget.c\r\n-+++ b/mp/mp_fget.c\r\n+--- a/src/mp/mp_fget.c\r\n++++ b/src/mp/mp_fget.c\r\n @@ -617,7 +617,7 @@ alloc:\t\t/* Allocate a new buffer header and data space. */\r\n \r\n  \t\t/* Initialize enough so we can call __memp_bhfree. */\r\n@@ -137,10 +137,10 @@ index 5fdee5a..0b75f57 100644\r\n  \t\tMUTEX_LOCK(env, alloc_bhp->mtx_buf);\r\n  \t\talloc_bhp->priority = bhp->priority;\r\n  \t\talloc_bhp->pgno = bhp->pgno;\r\n-diff --git a/mp/mp_mvcc.c b/mp/mp_mvcc.c\r\n+diff --git a/src/mp/mp_mvcc.c b/src/mp/mp_mvcc.c\r\n index 34467d2..f05aa0c 100644\r\n---- a/mp/mp_mvcc.c\r\n-+++ b/mp/mp_mvcc.c\r\n+--- a/src/mp/mp_mvcc.c\r\n++++ b/src/mp/mp_mvcc.c\r\n @@ -276,7 +276,7 @@ __memp_bh_freeze(dbmp, infop, hp, bhp, need_frozenp)\r\n  #else\r\n  \tmemcpy(frozen_bhp, bhp, SSZA(BH, buf));\r\n@@ -159,10 +159,10 @@ index 34467d2..f05aa0c 100644\r\n  \t\tF_CLR(alloc_bhp, BH_FROZEN);\r\n  \t}\r\n \r\n-diff --git a/mp/mp_region.c b/mp/mp_region.c\r\n+diff --git a/src/mp/mp_region.c b/src/mp/mp_region.c\r\n index e6cece9..ddbe906 100644\r\n---- a/mp/mp_region.c\r\n-+++ b/mp/mp_region.c\r\n+--- a/src/mp/mp_region.c\r\n++++ b/src/mp/mp_region.c\r\n @@ -224,7 +224,7 @@ __memp_init(env, dbmp, reginfo_off, htab_buckets, max_nreg)\r\n  \t\t\t     MTX_MPOOL_FILE_BUCKET, 0, &htab[i].mtx_hash)) != 0)\r\n  \t\t\t\treturn (ret);\r\n@@ -181,10 +181,10 @@ index e6cece9..ddbe906 100644\r\n  #ifdef HAVE_STATISTICS\r\n  \t\thp->hash_io_wait = 0;\r\n  \t\thp->hash_frozen = hp->hash_thawed = hp->hash_frozen_freed = 0;\r\n-diff --git a/mutex/mut_method.c b/mutex/mut_method.c\r\n+diff --git a/src/mutex/mut_method.c b/src/mutex/mut_method.c\r\n index 2588763..5c6d516 100644\r\n---- a/mutex/mut_method.c\r\n-+++ b/mutex/mut_method.c\r\n+--- a/src/mutex/mut_method.c\r\n++++ b/src/mutex/mut_method.c\r\n @@ -426,7 +426,7 @@ atomic_compare_exchange(env, v, oldval, newval)\r\n  \tMUTEX_LOCK(env, mtx);\r\n  \tret = atomic_read(v) == oldval;\r\n@@ -194,10 +194,10 @@ index 2588763..5c6d516 100644\r\n  \tMUTEX_UNLOCK(env, mtx);\r\n \r\n  \treturn (ret);\r\n-diff --git a/mutex/mut_tas.c b/mutex/mut_tas.c\r\n+diff --git a/src/mutex/mut_tas.c b/src/mutex/mut_tas.c\r\n index f3922e0..e40fcdf 100644\r\n---- a/mutex/mut_tas.c\r\n-+++ b/mutex/mut_tas.c\r\n+--- a/src/mutex/mut_tas.c\r\n++++ b/src/mutex/mut_tas.c\r\n @@ -46,7 +46,7 @@ __db_tas_mutex_init(env, mutex, flags)\r\n \r\n  #ifdef HAVE_SHARED_LATCHES\r\n```\r\n\r\nOnce you're done fixing the changes, make sure you've squashed to a single commit, and write a more meaningful commit message, i.e: \"contrib: embed C++11 patch in install_db4.sh\" & explain why it's being done.\r\n\r\nAlso, in future, please don't open new PRs for the same change.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/757640892/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/757811519",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20665#issuecomment-757811519",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20665",
    "id": 757811519,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1NzgxMTUxOQ==",
    "user": {
      "login": "gruve-p",
      "id": 11212268,
      "node_id": "MDQ6VXNlcjExMjEyMjY4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11212268?u=908bbd03f97241182a7e108fdca2e048b6bf462d&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gruve-p",
      "html_url": "https://github.com/gruve-p",
      "followers_url": "https://api.github.com/users/gruve-p/followers",
      "following_url": "https://api.github.com/users/gruve-p/following{/other_user}",
      "gists_url": "https://api.github.com/users/gruve-p/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gruve-p/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gruve-p/subscriptions",
      "organizations_url": "https://api.github.com/users/gruve-p/orgs",
      "repos_url": "https://api.github.com/users/gruve-p/repos",
      "events_url": "https://api.github.com/users/gruve-p/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gruve-p/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-11T09:41:18Z",
    "updated_at": "2021-01-11T09:41:18Z",
    "author_association": "CONTRIBUTOR",
    "body": "@fanquake Fixed, squashed, changed commit message, force pushed then the PR closed again. Can you reopen it?",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/757811519/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/757944319",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20665#issuecomment-757944319",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20665",
    "id": 757944319,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1Nzk0NDMxOQ==",
    "user": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?u=a0e0040aacd7d4f0787481e8ac30b494fa429e11&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-11T13:15:56Z",
    "updated_at": "2021-01-11T13:15:56Z",
    "author_association": "MEMBER",
    "body": "It's no longer possible to reopen this PR, probably because you force pushed to the branch while the PR was closed, so you will actually have to open another now.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/757944319/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/758119780",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20665#issuecomment-758119780",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20665",
    "id": 758119780,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1ODExOTc4MA==",
    "user": {
      "login": "gruve-p",
      "id": 11212268,
      "node_id": "MDQ6VXNlcjExMjEyMjY4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11212268?u=908bbd03f97241182a7e108fdca2e048b6bf462d&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gruve-p",
      "html_url": "https://github.com/gruve-p",
      "followers_url": "https://api.github.com/users/gruve-p/followers",
      "following_url": "https://api.github.com/users/gruve-p/following{/other_user}",
      "gists_url": "https://api.github.com/users/gruve-p/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gruve-p/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gruve-p/subscriptions",
      "organizations_url": "https://api.github.com/users/gruve-p/orgs",
      "repos_url": "https://api.github.com/users/gruve-p/repos",
      "events_url": "https://api.github.com/users/gruve-p/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gruve-p/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-01-11T17:56:18Z",
    "updated_at": "2021-01-11T17:56:18Z",
    "author_association": "CONTRIBUTOR",
    "body": "New one opened",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/758119780/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/543646499",
    "pull_request_review_id": 552821113,
    "id": 543646499,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzY0NjQ5OQ==",
    "diff_hunk": "@@ -68,8 +68,8 @@ tar -xzvf ${BDB_VERSION}.tar.gz -C \"$BDB_PREFIX\"\n cd \"${BDB_PREFIX}/${BDB_VERSION}/\"\n \n # Apply a patch necessary when building with clang and c++11 (see https://community.oracle.com/thread/3952592)\n-CLANG_CXX11_PATCH_URL='https://gist.githubusercontent.com/LnL7/5153b251fd525fe15de69b67e63a6075/raw/7778e9364679093a32dec2908656738e16b6bdcb/clang.patch'\n-CLANG_CXX11_PATCH_HASH='7a9a47b03fd5fb93a16ef42235fa9512db9b0829cfc3bdf90edd3ec1f44d637c'\n+CLANG_CXX11_PATCH_URL='https://raw.githubusercontent.com/bitcoin/bitcoin/master/depends/patches/bdb/clang_cxx_11.patch'",
    "path": "contrib/install_db4.sh",
    "position": null,
    "original_position": 6,
    "commit_id": "c490dbc0f2a3d2cb9defbc22c37c365e23b467cb",
    "original_commit_id": "f16db9c24f3b4b30e6b118928b62a8cae48058a4",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "if it's in the same repository, does it need a download at all? ",
    "created_at": "2020-12-15T19:59:14Z",
    "updated_at": "2021-01-10T11:29:04Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20665#discussion_r543646499",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20665",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/543646499"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/20665#discussion_r543646499"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20665"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/543646499/reactions",
      "total_count": 3,
      "+1": 3,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 71,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/544201366",
    "pull_request_review_id": 553570168,
    "id": 544201366,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDIwMTM2Ng==",
    "diff_hunk": "@@ -68,8 +68,8 @@ tar -xzvf ${BDB_VERSION}.tar.gz -C \"$BDB_PREFIX\"\n cd \"${BDB_PREFIX}/${BDB_VERSION}/\"\n \n # Apply a patch necessary when building with clang and c++11 (see https://community.oracle.com/thread/3952592)\n-CLANG_CXX11_PATCH_URL='https://gist.githubusercontent.com/LnL7/5153b251fd525fe15de69b67e63a6075/raw/7778e9364679093a32dec2908656738e16b6bdcb/clang.patch'\n-CLANG_CXX11_PATCH_HASH='7a9a47b03fd5fb93a16ef42235fa9512db9b0829cfc3bdf90edd3ec1f44d637c'\n+CLANG_CXX11_PATCH_URL='https://raw.githubusercontent.com/bitcoin/bitcoin/master/depends/patches/bdb/clang_cxx_11.patch'",
    "path": "contrib/install_db4.sh",
    "position": null,
    "original_position": 6,
    "commit_id": "c490dbc0f2a3d2cb9defbc22c37c365e23b467cb",
    "original_commit_id": "f16db9c24f3b4b30e6b118928b62a8cae48058a4",
    "user": {
      "login": "gruve-p",
      "id": 11212268,
      "node_id": "MDQ6VXNlcjExMjEyMjY4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11212268?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gruve-p",
      "html_url": "https://github.com/gruve-p",
      "followers_url": "https://api.github.com/users/gruve-p/followers",
      "following_url": "https://api.github.com/users/gruve-p/following{/other_user}",
      "gists_url": "https://api.github.com/users/gruve-p/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gruve-p/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gruve-p/subscriptions",
      "organizations_url": "https://api.github.com/users/gruve-p/orgs",
      "repos_url": "https://api.github.com/users/gruve-p/repos",
      "events_url": "https://api.github.com/users/gruve-p/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gruve-p/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I see this script as a standalone script which installs libdb4.8 (Berkeley DB) without the need to be in the root of the bitcoin repository. One can just grab this script and run it anywhere on the machine, export BDB_PREFIX and then use the right parameters (BDB_LIBS= and BDB_CFLAGS) on configure",
    "created_at": "2020-12-16T10:54:38Z",
    "updated_at": "2021-01-10T11:29:04Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20665#discussion_r544201366",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20665",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/544201366"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/20665#discussion_r544201366"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20665"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/544201366/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 71,
    "side": "RIGHT",
    "in_reply_to_id": 543646499
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/544411178",
    "pull_request_review_id": 553826574,
    "id": 544411178,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDQxMTE3OA==",
    "diff_hunk": "@@ -68,8 +68,8 @@ tar -xzvf ${BDB_VERSION}.tar.gz -C \"$BDB_PREFIX\"\n cd \"${BDB_PREFIX}/${BDB_VERSION}/\"\n \n # Apply a patch necessary when building with clang and c++11 (see https://community.oracle.com/thread/3952592)\n-CLANG_CXX11_PATCH_URL='https://gist.githubusercontent.com/LnL7/5153b251fd525fe15de69b67e63a6075/raw/7778e9364679093a32dec2908656738e16b6bdcb/clang.patch'\n-CLANG_CXX11_PATCH_HASH='7a9a47b03fd5fb93a16ef42235fa9512db9b0829cfc3bdf90edd3ec1f44d637c'\n+CLANG_CXX11_PATCH_URL='https://raw.githubusercontent.com/bitcoin/bitcoin/master/depends/patches/bdb/clang_cxx_11.patch'",
    "path": "contrib/install_db4.sh",
    "position": null,
    "original_position": 6,
    "commit_id": "c490dbc0f2a3d2cb9defbc22c37c365e23b467cb",
    "original_commit_id": "f16db9c24f3b4b30e6b118928b62a8cae48058a4",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Yes, good point. Well I guess it could at least *try* finding the local patch, and resort to download if it doesn't exist.",
    "created_at": "2020-12-16T15:52:26Z",
    "updated_at": "2021-01-10T11:29:04Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20665#discussion_r544411178",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20665",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/544411178"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/20665#discussion_r544411178"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20665"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/544411178/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 71,
    "side": "RIGHT",
    "in_reply_to_id": 543646499
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/546267638",
    "pull_request_review_id": 555959573,
    "id": 546267638,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjI2NzYzOA==",
    "diff_hunk": "@@ -68,8 +68,8 @@ tar -xzvf ${BDB_VERSION}.tar.gz -C \"$BDB_PREFIX\"\n cd \"${BDB_PREFIX}/${BDB_VERSION}/\"\n \n # Apply a patch necessary when building with clang and c++11 (see https://community.oracle.com/thread/3952592)\n-CLANG_CXX11_PATCH_URL='https://gist.githubusercontent.com/LnL7/5153b251fd525fe15de69b67e63a6075/raw/7778e9364679093a32dec2908656738e16b6bdcb/clang.patch'\n-CLANG_CXX11_PATCH_HASH='7a9a47b03fd5fb93a16ef42235fa9512db9b0829cfc3bdf90edd3ec1f44d637c'\n+CLANG_CXX11_PATCH_URL='https://raw.githubusercontent.com/bitcoin/bitcoin/master/depends/patches/bdb/clang_cxx_11.patch'",
    "path": "contrib/install_db4.sh",
    "position": null,
    "original_position": 6,
    "commit_id": "c490dbc0f2a3d2cb9defbc22c37c365e23b467cb",
    "original_commit_id": "f16db9c24f3b4b30e6b118928b62a8cae48058a4",
    "user": {
      "login": "alevchuk",
      "id": 64738,
      "node_id": "MDQ6VXNlcjY0NzM4",
      "avatar_url": "https://avatars.githubusercontent.com/u/64738?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/alevchuk",
      "html_url": "https://github.com/alevchuk",
      "followers_url": "https://api.github.com/users/alevchuk/followers",
      "following_url": "https://api.github.com/users/alevchuk/following{/other_user}",
      "gists_url": "https://api.github.com/users/alevchuk/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/alevchuk/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/alevchuk/subscriptions",
      "organizations_url": "https://api.github.com/users/alevchuk/orgs",
      "repos_url": "https://api.github.com/users/alevchuk/repos",
      "events_url": "https://api.github.com/users/alevchuk/events{/privacy}",
      "received_events_url": "https://api.github.com/users/alevchuk/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "There is convenience for running curl from anywhere, yet are there other tradeoffs in depending on githubusercontent.com?",
    "created_at": "2020-12-19T18:21:39Z",
    "updated_at": "2021-01-10T11:29:04Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20665#discussion_r546267638",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20665",
    "author_association": "NONE",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/546267638"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/20665#discussion_r546267638"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20665"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/546267638/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 71,
    "side": "RIGHT",
    "in_reply_to_id": 543646499
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/546365479",
    "pull_request_review_id": 556010153,
    "id": 546365479,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjM2NTQ3OQ==",
    "diff_hunk": "@@ -68,8 +68,8 @@ tar -xzvf ${BDB_VERSION}.tar.gz -C \"$BDB_PREFIX\"\n cd \"${BDB_PREFIX}/${BDB_VERSION}/\"\n \n # Apply a patch necessary when building with clang and c++11 (see https://community.oracle.com/thread/3952592)\n-CLANG_CXX11_PATCH_URL='https://gist.githubusercontent.com/LnL7/5153b251fd525fe15de69b67e63a6075/raw/7778e9364679093a32dec2908656738e16b6bdcb/clang.patch'\n-CLANG_CXX11_PATCH_HASH='7a9a47b03fd5fb93a16ef42235fa9512db9b0829cfc3bdf90edd3ec1f44d637c'\n+CLANG_CXX11_PATCH_URL='https://raw.githubusercontent.com/bitcoin/bitcoin/master/depends/patches/bdb/clang_cxx_11.patch'",
    "path": "contrib/install_db4.sh",
    "position": null,
    "original_position": 6,
    "commit_id": "c490dbc0f2a3d2cb9defbc22c37c365e23b467cb",
    "original_commit_id": "f16db9c24f3b4b30e6b118928b62a8cae48058a4",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Possibly an even better solution: embed the patch in the script, with a heredoc.\r\n\r\nIt's more maintenance work *when* the patch needs to change (say, for compatibility with new compilers), but it is a small patch after all and it keeps the script more self-contained.",
    "created_at": "2020-12-20T11:46:34Z",
    "updated_at": "2021-01-10T11:29:04Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20665#discussion_r546365479",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20665",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/546365479"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/20665#discussion_r546365479"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20665"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/546365479/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 71,
    "side": "RIGHT",
    "in_reply_to_id": 543646499
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/546367420",
    "pull_request_review_id": 556011384,
    "id": 546367420,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjM2NzQyMA==",
    "diff_hunk": "@@ -68,8 +68,8 @@ tar -xzvf ${BDB_VERSION}.tar.gz -C \"$BDB_PREFIX\"\n cd \"${BDB_PREFIX}/${BDB_VERSION}/\"\n \n # Apply a patch necessary when building with clang and c++11 (see https://community.oracle.com/thread/3952592)\n-CLANG_CXX11_PATCH_URL='https://gist.githubusercontent.com/LnL7/5153b251fd525fe15de69b67e63a6075/raw/7778e9364679093a32dec2908656738e16b6bdcb/clang.patch'\n-CLANG_CXX11_PATCH_HASH='7a9a47b03fd5fb93a16ef42235fa9512db9b0829cfc3bdf90edd3ec1f44d637c'\n+CLANG_CXX11_PATCH_URL='https://raw.githubusercontent.com/bitcoin/bitcoin/master/depends/patches/bdb/clang_cxx_11.patch'",
    "path": "contrib/install_db4.sh",
    "position": null,
    "original_position": 6,
    "commit_id": "c490dbc0f2a3d2cb9defbc22c37c365e23b467cb",
    "original_commit_id": "f16db9c24f3b4b30e6b118928b62a8cae48058a4",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Good idea. Also, this script will probably go in one or two major releases when we no longer require bdb",
    "created_at": "2020-12-20T12:03:57Z",
    "updated_at": "2021-01-10T11:29:04Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20665#discussion_r546367420",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20665",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/546367420"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/20665#discussion_r546367420"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20665"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/546367420/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 71,
    "side": "RIGHT",
    "in_reply_to_id": 543646499
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/552544888",
    "pull_request_review_id": 562663648,
    "id": 552544888,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjU0NDg4OA==",
    "diff_hunk": "@@ -68,8 +68,8 @@ tar -xzvf ${BDB_VERSION}.tar.gz -C \"$BDB_PREFIX\"\n cd \"${BDB_PREFIX}/${BDB_VERSION}/\"\n \n # Apply a patch necessary when building with clang and c++11 (see https://community.oracle.com/thread/3952592)\n-CLANG_CXX11_PATCH_URL='https://gist.githubusercontent.com/LnL7/5153b251fd525fe15de69b67e63a6075/raw/7778e9364679093a32dec2908656738e16b6bdcb/clang.patch'\n-CLANG_CXX11_PATCH_HASH='7a9a47b03fd5fb93a16ef42235fa9512db9b0829cfc3bdf90edd3ec1f44d637c'\n+CLANG_CXX11_PATCH_URL='https://raw.githubusercontent.com/bitcoin/bitcoin/master/depends/patches/bdb/clang_cxx_11.patch'",
    "path": "contrib/install_db4.sh",
    "position": null,
    "original_position": 6,
    "commit_id": "c490dbc0f2a3d2cb9defbc22c37c365e23b467cb",
    "original_commit_id": "f16db9c24f3b4b30e6b118928b62a8cae48058a4",
    "user": {
      "login": "gruve-p",
      "id": 11212268,
      "node_id": "MDQ6VXNlcjExMjEyMjY4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11212268?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gruve-p",
      "html_url": "https://github.com/gruve-p",
      "followers_url": "https://api.github.com/users/gruve-p/followers",
      "following_url": "https://api.github.com/users/gruve-p/following{/other_user}",
      "gists_url": "https://api.github.com/users/gruve-p/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gruve-p/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gruve-p/subscriptions",
      "organizations_url": "https://api.github.com/users/gruve-p/orgs",
      "repos_url": "https://api.github.com/users/gruve-p/repos",
      "events_url": "https://api.github.com/users/gruve-p/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gruve-p/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Implemented your idea @laanwj\r\nI used my mobile to make the changes so the changes are untested.",
    "created_at": "2021-01-06T12:11:02Z",
    "updated_at": "2021-01-10T11:29:04Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/20665#discussion_r552544888",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20665",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/552544888"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/20665#discussion_r552544888"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20665"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/552544888/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 71,
    "side": "RIGHT",
    "in_reply_to_id": 543646499
  }
]