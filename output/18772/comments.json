[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/619512534",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#issuecomment-619512534",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18772",
    "id": 619512534,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxOTUxMjUzNA==",
    "user": {
      "login": "robot-visions",
      "id": 63171930,
      "node_id": "MDQ6VXNlcjYzMTcxOTMw",
      "avatar_url": "https://avatars.githubusercontent.com/u/63171930?u=a54b743c9d786ee91ddd5512e19bcd0a2f937427&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/robot-visions",
      "html_url": "https://github.com/robot-visions",
      "followers_url": "https://api.github.com/users/robot-visions/followers",
      "following_url": "https://api.github.com/users/robot-visions/following{/other_user}",
      "gists_url": "https://api.github.com/users/robot-visions/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/robot-visions/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/robot-visions/subscriptions",
      "organizations_url": "https://api.github.com/users/robot-visions/orgs",
      "repos_url": "https://api.github.com/users/robot-visions/repos",
      "events_url": "https://api.github.com/users/robot-visions/events{/privacy}",
      "received_events_url": "https://api.github.com/users/robot-visions/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-04-26T08:54:48Z",
    "updated_at": "2020-04-26T08:54:48Z",
    "author_association": "CONTRIBUTOR",
    "body": "The documentation for `getblock` refers to the tx format of `getrawtransaction`.  Any thoughts on what would be a reasonable approach here?\r\n\r\n- Also update `getrawtransaction` (and the documentation) to include a fee if possible (this might be slow since the cost of loading undo data is no longer amortized over many transactions in a block)\r\n- Update the `getblock` documentation to mention that unlike `getrawtransaction`, it might also include fees\r\n- Leave the documentation alone and let the unfortunate user figure out the semantics themselves :)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/619512534/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/619536994",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#issuecomment-619536994",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18772",
    "id": 619536994,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxOTUzNjk5NA==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-04-26T11:51:03Z",
    "updated_at": "2020-04-26T11:51:03Z",
    "author_association": "MEMBER",
    "body": "Please add the right co-author to your commit, if your work is based on someone else's work",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/619536994/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/619594112",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#issuecomment-619594112",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18772",
    "id": 619594112,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYxOTU5NDExMg==",
    "user": {
      "login": "robot-visions",
      "id": 63171930,
      "node_id": "MDQ6VXNlcjYzMTcxOTMw",
      "avatar_url": "https://avatars.githubusercontent.com/u/63171930?u=a54b743c9d786ee91ddd5512e19bcd0a2f937427&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/robot-visions",
      "html_url": "https://github.com/robot-visions",
      "followers_url": "https://api.github.com/users/robot-visions/followers",
      "following_url": "https://api.github.com/users/robot-visions/following{/other_user}",
      "gists_url": "https://api.github.com/users/robot-visions/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/robot-visions/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/robot-visions/subscriptions",
      "organizations_url": "https://api.github.com/users/robot-visions/orgs",
      "repos_url": "https://api.github.com/users/robot-visions/repos",
      "events_url": "https://api.github.com/users/robot-visions/events{/privacy}",
      "received_events_url": "https://api.github.com/users/robot-visions/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-04-26T17:50:28Z",
    "updated_at": "2020-04-26T17:50:28Z",
    "author_association": "CONTRIBUTOR",
    "body": "Updated, thanks!  I didn't know about `Co-authored-by` feature before.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/619594112/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/622017678",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#issuecomment-622017678",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18772",
    "id": 622017678,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyMjAxNzY3OA==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-04-30T18:13:59Z",
    "updated_at": "2020-11-21T09:47:51Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #20406 (util: Avoid invalid integer negation in FormatMoney and ValueFromAmount by practicalswift)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/622017678/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/622339679",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#issuecomment-622339679",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18772",
    "id": 622339679,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyMjMzOTY3OQ==",
    "user": {
      "login": "brakmic",
      "id": 56779,
      "node_id": "MDQ6VXNlcjU2Nzc5",
      "avatar_url": "https://avatars.githubusercontent.com/u/56779?u=17d35db6d21a792a73c54469705cff5da63abe5f&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/brakmic",
      "html_url": "https://github.com/brakmic",
      "followers_url": "https://api.github.com/users/brakmic/followers",
      "following_url": "https://api.github.com/users/brakmic/following{/other_user}",
      "gists_url": "https://api.github.com/users/brakmic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/brakmic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/brakmic/subscriptions",
      "organizations_url": "https://api.github.com/users/brakmic/orgs",
      "repos_url": "https://api.github.com/users/brakmic/repos",
      "events_url": "https://api.github.com/users/brakmic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/brakmic/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-01T10:44:27Z",
    "updated_at": "2020-05-01T10:44:27Z",
    "author_association": "CONTRIBUTOR",
    "body": "ACK 732554a8a64ad5c9d49505272d225626566898de\r\n\r\nBuilt, run and tested on macOS Catalina 10.15.4\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/622339679/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/626358397",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#issuecomment-626358397",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18772",
    "id": 626358397,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyNjM1ODM5Nw==",
    "user": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-10T17:03:51Z",
    "updated_at": "2020-05-10T17:03:51Z",
    "author_association": "MEMBER",
    "body": "Proposed update: https://github.com/bitcoin/bitcoin/compare/master...luke-jr:getblock_fees-0.20",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/626358397/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/626373459",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#issuecomment-626373459",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18772",
    "id": 626373459,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyNjM3MzQ1OQ==",
    "user": {
      "login": "robot-visions",
      "id": 63171930,
      "node_id": "MDQ6VXNlcjYzMTcxOTMw",
      "avatar_url": "https://avatars.githubusercontent.com/u/63171930?u=a54b743c9d786ee91ddd5512e19bcd0a2f937427&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/robot-visions",
      "html_url": "https://github.com/robot-visions",
      "followers_url": "https://api.github.com/users/robot-visions/followers",
      "following_url": "https://api.github.com/users/robot-visions/following{/other_user}",
      "gists_url": "https://api.github.com/users/robot-visions/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/robot-visions/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/robot-visions/subscriptions",
      "organizations_url": "https://api.github.com/users/robot-visions/orgs",
      "repos_url": "https://api.github.com/users/robot-visions/repos",
      "events_url": "https://api.github.com/users/robot-visions/events{/privacy}",
      "received_events_url": "https://api.github.com/users/robot-visions/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-10T19:01:43Z",
    "updated_at": "2020-05-10T19:01:43Z",
    "author_association": "CONTRIBUTOR",
    "body": "Thanks for the review and the update @luke-jr !  I'm happy to go with your proposed update (we can close this PR).\r\n\r\nQuick notes:\r\n- I didn't include the verbosity 3 changes because I wanted to move things over incrementally\r\n- In your updates it might still be necessary to introduce some way to prevent the fuzz tests from failing (it was causing an integer overflow when adding a large value to `amt_total_out`); I added a halfhearted check (which you correctly pointed out doesn't always work) but maybe it makes more sense to just update the fuzz test",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/626373459/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/628349825",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#issuecomment-628349825",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18772",
    "id": 628349825,
    "node_id": "MDEyOklzc3VlQ29tbWVudDYyODM0OTgyNQ==",
    "user": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-05-14T02:35:15Z",
    "updated_at": "2020-05-14T02:35:15Z",
    "author_association": "MEMBER",
    "body": "We don't need to close this PR, you're doing fine.\r\n\r\nIf you want to adopt my branch as-is, you can just checkout yours, `git reset --hard 0b46eb7ac63`, and re-push it here.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/628349825/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 1,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/701511380",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#issuecomment-701511380",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18772",
    "id": 701511380,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMTUxMTM4MA==",
    "user": {
      "login": "troygiorshev",
      "id": 5553787,
      "node_id": "MDQ6VXNlcjU1NTM3ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5553787?u=84369c78e74365314bd9806230ab56f2c1585fb4&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/troygiorshev",
      "html_url": "https://github.com/troygiorshev",
      "followers_url": "https://api.github.com/users/troygiorshev/followers",
      "following_url": "https://api.github.com/users/troygiorshev/following{/other_user}",
      "gists_url": "https://api.github.com/users/troygiorshev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/troygiorshev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/troygiorshev/subscriptions",
      "organizations_url": "https://api.github.com/users/troygiorshev/orgs",
      "repos_url": "https://api.github.com/users/troygiorshev/repos",
      "events_url": "https://api.github.com/users/troygiorshev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/troygiorshev/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-09-30T16:47:29Z",
    "updated_at": "2020-09-30T16:47:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "Approach ACK.\r\n\r\nReviewed changes, ran tests.  Need to manually test further. \ud83d\udcbb \r\n\r\nI agree with the previous review comments.\r\n\r\nFeel free to add a commit at the beginning cleaning up the code around your changes!\r\nFor example:\r\n* Fixing the strange lack of braces around the body of the `if` [here in core_write.cpp](https://github.com/robot-visions/bitcoin/blob/1298f0fca79803f3bc91c052f901a4df63ae343a/src/core_write.cpp#L202)\r\n* Changing to [brace initialization](https://stackoverflow.com/questions/18222926/why-is-list-initialization-using-curly-braces-better-than-the-alternatives) for lines like [this one](https://github.com/robot-visions/bitcoin/blob/1298f0fca79803f3bc91c052f901a4df63ae343a/src/core_write.cpp#L194)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/701511380/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/702045431",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#issuecomment-702045431",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18772",
    "id": 702045431,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMjA0NTQzMQ==",
    "user": {
      "login": "Emzy",
      "id": 1223908,
      "node_id": "MDQ6VXNlcjEyMjM5MDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1223908?u=66477849292f33a9134f23b8d8000f0492d591b3&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Emzy",
      "html_url": "https://github.com/Emzy",
      "followers_url": "https://api.github.com/users/Emzy/followers",
      "following_url": "https://api.github.com/users/Emzy/following{/other_user}",
      "gists_url": "https://api.github.com/users/Emzy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Emzy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Emzy/subscriptions",
      "organizations_url": "https://api.github.com/users/Emzy/orgs",
      "repos_url": "https://api.github.com/users/Emzy/repos",
      "events_url": "https://api.github.com/users/Emzy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Emzy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-01T10:34:51Z",
    "updated_at": "2020-10-01T10:34:51Z",
    "author_association": "CONTRIBUTOR",
    "body": "I get following error:\r\n```\r\n$ bitcoin-cli getblock \"$(bitcoin-cli getblockhash 650684)\" 2\r\nerror code: -1\r\nerror message:\r\ncore_write.cpp:251 (TxToUniv)\r\nInternal bug detected: 'MoneyRange(fee)'\r\nYou may report this issue here: https://github.com/bitcoin/bitcoin/issues\r\n```\r\nA block with only a Coinbase transaction works, for example 650026.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/702045431/reactions",
      "total_count": 1,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 1
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/702717475",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#issuecomment-702717475",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18772",
    "id": 702717475,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwMjcxNzQ3NQ==",
    "user": {
      "login": "Emzy",
      "id": 1223908,
      "node_id": "MDQ6VXNlcjEyMjM5MDg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1223908?u=66477849292f33a9134f23b8d8000f0492d591b3&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Emzy",
      "html_url": "https://github.com/Emzy",
      "followers_url": "https://api.github.com/users/Emzy/followers",
      "following_url": "https://api.github.com/users/Emzy/following{/other_user}",
      "gists_url": "https://api.github.com/users/Emzy/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Emzy/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Emzy/subscriptions",
      "organizations_url": "https://api.github.com/users/Emzy/orgs",
      "repos_url": "https://api.github.com/users/Emzy/repos",
      "events_url": "https://api.github.com/users/Emzy/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Emzy/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-02T12:54:32Z",
    "updated_at": "2020-10-02T12:54:32Z",
    "author_association": "CONTRIBUTOR",
    "body": "> I get following error:\r\n> \r\n> ```\r\n> $ bitcoin-cli getblock \"$(bitcoin-cli getblockhash 650684)\" 2\r\n> error code: -1\r\n> error message:\r\n> core_write.cpp:251 (TxToUniv)\r\n> Internal bug detected: 'MoneyRange(fee)'\r\n> You may report this issue here: https://github.com/bitcoin/bitcoin/issues\r\n> ```\r\n> \r\n> A block with only a Coinbase transaction works, for example 650026.\r\n\r\n8a7229e2e5c306e86a6a589c1ab0e4c58ea49545 fixed it.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/702717475/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/706084886",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#issuecomment-706084886",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18772",
    "id": 706084886,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcwNjA4NDg4Ng==",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-09T09:49:31Z",
    "updated_at": "2020-10-09T09:49:31Z",
    "author_association": "MEMBER",
    "body": "utACK dd4ec0704c66c23d207bb7394823469a1b59b060\r\n\r\nSince the first commit is very different from the version in 16083, you should feel free to set yourself as the commit author and add felix as a co-author (or just add yourself as co-author).\r\n\r\nAlso feel free to set the review comments above as 'resolved' if you think they're addressed. I went through and resolved my own review comments, but didn't resolve comments from other reviewers. Setting all comments to resolved signals to other reviewers that you've addressed all the outstanding issues.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/706084886/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/723641914",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#issuecomment-723641914",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18772",
    "id": 723641914,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcyMzY0MTkxNA==",
    "user": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-11-08T17:37:17Z",
    "updated_at": "2020-11-08T17:37:17Z",
    "author_association": "MEMBER",
    "body": "tACK 66d012ad7f9381bacfc9b8388fa2ebf82cb86c9e",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/723641914/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/750394828",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#issuecomment-750394828",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18772",
    "id": 750394828,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc1MDM5NDgyOA==",
    "user": {
      "login": "fjahr",
      "id": 1322187,
      "node_id": "MDQ6VXNlcjEzMjIxODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1322187?u=348c27f90b6fff8fd72fa27232272651436a2ff0&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjahr",
      "html_url": "https://github.com/fjahr",
      "followers_url": "https://api.github.com/users/fjahr/followers",
      "following_url": "https://api.github.com/users/fjahr/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjahr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
      "organizations_url": "https://api.github.com/users/fjahr/orgs",
      "repos_url": "https://api.github.com/users/fjahr/repos",
      "events_url": "https://api.github.com/users/fjahr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjahr/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-12-23T17:16:47Z",
    "updated_at": "2020-12-23T17:16:47Z",
    "author_association": "CONTRIBUTOR",
    "body": "tACK 66d012ad7f9381bacfc9b8388fa2ebf82cb86c9e\r\n\r\nChanges since last review were a small refactoring of the functional test using MiniWallet and some improvements on comments/docs. ",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/750394828/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422661107",
    "pull_request_review_id": 408756097,
    "id": 422661107,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjY2MTEwNw==",
    "diff_hunk": "@@ -186,6 +187,10 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n     entry.pushKV(\"locktime\", (int64_t)tx.nLockTime);\n \n     UniValue vin(UniValue::VARR);\n+\n+    CAmount nTotalIn = 0;\n+    CAmount nTotalOut = 0;",
    "path": "src/core_write.cpp",
    "position": null,
    "original_position": 23,
    "commit_id": "66d012ad7f9381bacfc9b8388fa2ebf82cb86c9e",
    "original_commit_id": "732554a8a64ad5c9d49505272d225626566898de",
    "user": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Why did you revert these back to the old variable name style? (I had changed them to `amt_total_in`/`amt_total_out` in my rebase...)",
    "created_at": "2020-05-10T15:34:10Z",
    "updated_at": "2020-10-09T15:54:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r422661107",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422661107"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r422661107"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422661107/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": 191,
    "start_side": "RIGHT",
    "line": null,
    "original_line": 192,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422661199",
    "pull_request_review_id": 408756097,
    "id": 422661199,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjY2MTE5OQ==",
    "diff_hunk": "@@ -205,6 +210,13 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n                 }\n                 in.pushKV(\"txinwitness\", txinwitness);\n             }\n+            if (txundo) {\n+                CAmount nPrevOut = txundo->vprevout[i].out.nValue;\n+                // Sanity check to avoid overflow\n+                if (MoneyRange(nPrevOut)) {\n+                    nTotalIn += nPrevOut;\n+                }",
    "path": "src/core_write.cpp",
    "position": null,
    "original_position": 37,
    "commit_id": "66d012ad7f9381bacfc9b8388fa2ebf82cb86c9e",
    "original_commit_id": "732554a8a64ad5c9d49505272d225626566898de",
    "user": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This seems unnecessary.",
    "created_at": "2020-05-10T15:35:16Z",
    "updated_at": "2020-10-09T15:54:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r422661199",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422661199"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r422661199"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422661199/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": 215,
    "start_side": "RIGHT",
    "line": null,
    "original_line": 218,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422661336",
    "pull_request_review_id": 408756097,
    "id": 422661336,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjY2MTMzNg==",
    "diff_hunk": "@@ -224,9 +236,21 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n         ScriptPubKeyToUniv(txout.scriptPubKey, o, true);\n         out.pushKV(\"scriptPubKey\", o);\n         vout.push_back(out);\n+\n+        // Sanity check to avoid overflow\n+        if (MoneyRange(txout.nValue)) {\n+            nTotalOut += txout.nValue;\n+        }",
    "path": "src/core_write.cpp",
    "position": null,
    "original_position": 50,
    "commit_id": "66d012ad7f9381bacfc9b8388fa2ebf82cb86c9e",
    "original_commit_id": "732554a8a64ad5c9d49505272d225626566898de",
    "user": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This won't work right... `nTotalOut` would just be missing part of its amount, and the result calculated later will still be wrong.",
    "created_at": "2020-05-10T15:36:15Z",
    "updated_at": "2020-10-09T15:54:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r422661336",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422661336"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r422661336"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422661336/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": 240,
    "start_side": "RIGHT",
    "line": null,
    "original_line": 247,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422661411",
    "pull_request_review_id": 408756097,
    "id": 422661411,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjY2MTQxMQ==",
    "diff_hunk": "@@ -224,9 +236,21 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n         ScriptPubKeyToUniv(txout.scriptPubKey, o, true);\n         out.pushKV(\"scriptPubKey\", o);\n         vout.push_back(out);\n+\n+        // Sanity check to avoid overflow\n+        if (MoneyRange(txout.nValue)) {\n+            nTotalOut += txout.nValue;\n+        }\n     }\n     entry.pushKV(\"vout\", vout);\n \n+    // For coinbase transactions we have txundo == nullptr\n+    if (txundo) {\n+        CAmount nFee = nTotalIn - nTotalOut;\n+        assert(MoneyRange(nFee));",
    "path": "src/core_write.cpp",
    "position": null,
    "original_position": 57,
    "commit_id": "66d012ad7f9381bacfc9b8388fa2ebf82cb86c9e",
    "original_commit_id": "732554a8a64ad5c9d49505272d225626566898de",
    "user": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "`CHECK_NONFATAL` in RPC code",
    "created_at": "2020-05-10T15:37:00Z",
    "updated_at": "2020-10-09T15:54:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r422661411",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422661411"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r422661411"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422661411/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 250,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422661449",
    "pull_request_review_id": 408756097,
    "id": 422661449,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjY2MTQ0OQ==",
    "diff_hunk": "@@ -224,9 +236,21 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n         ScriptPubKeyToUniv(txout.scriptPubKey, o, true);\n         out.pushKV(\"scriptPubKey\", o);\n         vout.push_back(out);\n+\n+        // Sanity check to avoid overflow\n+        if (MoneyRange(txout.nValue)) {\n+            nTotalOut += txout.nValue;\n+        }\n     }\n     entry.pushKV(\"vout\", vout);\n \n+    // For coinbase transactions we have txundo == nullptr\n+    if (txundo) {\n+        CAmount nFee = nTotalIn - nTotalOut;",
    "path": "src/core_write.cpp",
    "position": null,
    "original_position": 56,
    "commit_id": "66d012ad7f9381bacfc9b8388fa2ebf82cb86c9e",
    "original_commit_id": "732554a8a64ad5c9d49505272d225626566898de",
    "user": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "`fees`",
    "created_at": "2020-05-10T15:37:29Z",
    "updated_at": "2020-10-09T15:54:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r422661449",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422661449"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r422661449"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422661449/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 249,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422661827",
    "pull_request_review_id": 408756097,
    "id": 422661827,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjY2MTgyNw==",
    "diff_hunk": "@@ -143,16 +143,20 @@ UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIn\n     result.pushKV(\"versionHex\", strprintf(\"%08x\", block.nVersion));\n     result.pushKV(\"merkleroot\", block.hashMerkleRoot.GetHex());\n     UniValue txs(UniValue::VARR);\n-    for(const auto& tx : block.vtx)\n-    {\n-        if(txDetails)\n-        {\n+    if (txDetails) {\n+        CBlockUndo blockUndo;\n+        bool hasUndo = !IsBlockPruned(blockindex) && UndoReadFromDisk(blockUndo, blockindex);",
    "path": "src/rpc/blockchain.cpp",
    "position": null,
    "original_position": 10,
    "commit_id": "66d012ad7f9381bacfc9b8388fa2ebf82cb86c9e",
    "original_commit_id": "732554a8a64ad5c9d49505272d225626566898de",
    "user": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "`have_undo`",
    "created_at": "2020-05-10T15:40:34Z",
    "updated_at": "2020-10-09T15:54:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r422661827",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422661827"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r422661827"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422661827/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 148,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422661862",
    "pull_request_review_id": 408756097,
    "id": 422661862,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjY2MTg2Mg==",
    "diff_hunk": "@@ -143,16 +143,20 @@ UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIn\n     result.pushKV(\"versionHex\", strprintf(\"%08x\", block.nVersion));\n     result.pushKV(\"merkleroot\", block.hashMerkleRoot.GetHex());\n     UniValue txs(UniValue::VARR);\n-    for(const auto& tx : block.vtx)\n-    {\n-        if(txDetails)\n-        {\n+    if (txDetails) {\n+        CBlockUndo blockUndo;\n+        bool hasUndo = !IsBlockPruned(blockindex) && UndoReadFromDisk(blockUndo, blockindex);\n+        for (size_t i = 0; i < block.vtx.size(); ++i) {\n+            const auto& tx = block.vtx[i];",
    "path": "src/rpc/blockchain.cpp",
    "position": null,
    "original_position": 12,
    "commit_id": "66d012ad7f9381bacfc9b8388fa2ebf82cb86c9e",
    "original_commit_id": "732554a8a64ad5c9d49505272d225626566898de",
    "user": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "`.at(i)`",
    "created_at": "2020-05-10T15:40:50Z",
    "updated_at": "2020-10-09T15:54:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r422661862",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422661862"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r422661862"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422661862/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 150,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422684708",
    "pull_request_review_id": 408771964,
    "id": 422684708,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjY4NDcwOA==",
    "diff_hunk": "@@ -205,6 +210,13 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n                 }\n                 in.pushKV(\"txinwitness\", txinwitness);\n             }\n+            if (txundo) {\n+                CAmount nPrevOut = txundo->vprevout[i].out.nValue;\n+                // Sanity check to avoid overflow\n+                if (MoneyRange(nPrevOut)) {\n+                    nTotalIn += nPrevOut;\n+                }",
    "path": "src/core_write.cpp",
    "position": null,
    "original_position": 37,
    "commit_id": "66d012ad7f9381bacfc9b8388fa2ebf82cb86c9e",
    "original_commit_id": "732554a8a64ad5c9d49505272d225626566898de",
    "user": {
      "login": "robot-visions",
      "id": 63171930,
      "node_id": "MDQ6VXNlcjYzMTcxOTMw",
      "avatar_url": "https://avatars.githubusercontent.com/u/63171930?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/robot-visions",
      "html_url": "https://github.com/robot-visions",
      "followers_url": "https://api.github.com/users/robot-visions/followers",
      "following_url": "https://api.github.com/users/robot-visions/following{/other_user}",
      "gists_url": "https://api.github.com/users/robot-visions/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/robot-visions/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/robot-visions/subscriptions",
      "organizations_url": "https://api.github.com/users/robot-visions/orgs",
      "repos_url": "https://api.github.com/users/robot-visions/repos",
      "events_url": "https://api.github.com/users/robot-visions/events{/privacy}",
      "received_events_url": "https://api.github.com/users/robot-visions/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Yeah, I agree it seems unnecessary.  I added this in order to fix a failing fuzz test.",
    "created_at": "2020-05-10T18:55:08Z",
    "updated_at": "2020-10-09T15:54:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r422684708",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422684708"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r422684708"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422684708/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": 215,
    "start_side": "RIGHT",
    "line": null,
    "original_line": 218,
    "side": "RIGHT",
    "in_reply_to_id": 422661199
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422684773",
    "pull_request_review_id": 408772005,
    "id": 422684773,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjY4NDc3Mw==",
    "diff_hunk": "@@ -186,6 +187,10 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n     entry.pushKV(\"locktime\", (int64_t)tx.nLockTime);\n \n     UniValue vin(UniValue::VARR);\n+\n+    CAmount nTotalIn = 0;\n+    CAmount nTotalOut = 0;",
    "path": "src/core_write.cpp",
    "position": null,
    "original_position": 23,
    "commit_id": "66d012ad7f9381bacfc9b8388fa2ebf82cb86c9e",
    "original_commit_id": "732554a8a64ad5c9d49505272d225626566898de",
    "user": {
      "login": "robot-visions",
      "id": 63171930,
      "node_id": "MDQ6VXNlcjYzMTcxOTMw",
      "avatar_url": "https://avatars.githubusercontent.com/u/63171930?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/robot-visions",
      "html_url": "https://github.com/robot-visions",
      "followers_url": "https://api.github.com/users/robot-visions/followers",
      "following_url": "https://api.github.com/users/robot-visions/following{/other_user}",
      "gists_url": "https://api.github.com/users/robot-visions/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/robot-visions/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/robot-visions/subscriptions",
      "organizations_url": "https://api.github.com/users/robot-visions/orgs",
      "repos_url": "https://api.github.com/users/robot-visions/repos",
      "events_url": "https://api.github.com/users/robot-visions/events{/privacy}",
      "received_events_url": "https://api.github.com/users/robot-visions/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "No particular reason; I'd be happy with either way.",
    "created_at": "2020-05-10T18:55:42Z",
    "updated_at": "2020-10-09T15:54:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r422684773",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422684773"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r422684773"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422684773/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": 191,
    "start_side": "RIGHT",
    "line": null,
    "original_line": 192,
    "side": "RIGHT",
    "in_reply_to_id": 422661107
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/437789086",
    "pull_request_review_id": 427626897,
    "id": 437789086,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzc4OTA4Ng==",
    "diff_hunk": "@@ -0,0 +1,40 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+'''Test getblock rpc fee calculation.\n+'''\n+\n+import os\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import get_datadir_path\n+\n+\n+class GetblockFeeTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+\n+    def run_test(self):\n+        node = self.nodes[0]\n+        address = node.getnewaddress()\n+        node.generatetoaddress(101, address)\n+        txid = node.sendtoaddress(address, 1)",
    "path": "test/functional/rpc_getblock_fee.py",
    "position": null,
    "original_position": 25,
    "commit_id": "66d012ad7f9381bacfc9b8388fa2ebf82cb86c9e",
    "original_commit_id": "0b46eb7ac63c7fc4105fb28f3886970565946fd1",
    "user": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "`txid` is unused.\r\n\r\n(Feel free to update from my branch again)",
    "created_at": "2020-06-10T00:08:31Z",
    "updated_at": "2020-10-09T15:54:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r437789086",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/437789086"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r437789086"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/437789086/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 25,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/439866641",
    "pull_request_review_id": 430250302,
    "id": 439866641,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTg2NjY0MQ==",
    "diff_hunk": "@@ -224,9 +234,18 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n         ScriptPubKeyToUniv(txout.scriptPubKey, o, true);\n         out.pushKV(\"scriptPubKey\", o);\n         vout.push_back(out);\n+\n+        amt_total_out += txout.nValue;",
    "path": "src/core_write.cpp",
    "position": null,
    "original_position": 46,
    "commit_id": "66d012ad7f9381bacfc9b8388fa2ebf82cb86c9e",
    "original_commit_id": "0b46eb7ac63c7fc4105fb28f3886970565946fd1",
    "user": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "The fuzzer can trigger undefined behaviour here with an overflow, which causes CI to fail even though it's harmless. Not sure what the solution should be - seems like overkill to actually prevent.",
    "created_at": "2020-06-14T20:55:01Z",
    "updated_at": "2020-10-09T15:54:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r439866641",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/439866641"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r439866641"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/439866641/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 244,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/440235335",
    "pull_request_review_id": 430722850,
    "id": 440235335,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIzNTMzNQ==",
    "diff_hunk": "@@ -224,9 +234,18 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n         ScriptPubKeyToUniv(txout.scriptPubKey, o, true);\n         out.pushKV(\"scriptPubKey\", o);\n         vout.push_back(out);\n+\n+        amt_total_out += txout.nValue;",
    "path": "src/core_write.cpp",
    "position": null,
    "original_position": 46,
    "commit_id": "66d012ad7f9381bacfc9b8388fa2ebf82cb86c9e",
    "original_commit_id": "0b46eb7ac63c7fc4105fb28f3886970565946fd1",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "@luke-jr Functions are assumed to be robust as long as they are fed with inputs fulfilling their documented preconditions, so I think the only robust alternative to preventing it is to make the implicit precondition explicit by documenting it. However, in this case it seems easy to just use `MoneyRange(\u2026)` and be done with it, no? :)",
    "created_at": "2020-06-15T14:54:00Z",
    "updated_at": "2020-10-09T15:54:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r440235335",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/440235335"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r440235335"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/440235335/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 244,
    "side": "RIGHT",
    "in_reply_to_id": 439866641
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/494988059",
    "pull_request_review_id": 496419603,
    "id": 494988059,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDk4ODA1OQ==",
    "diff_hunk": "@@ -162,16 +162,21 @@ UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIn\n     result.pushKV(\"versionHex\", strprintf(\"%08x\", block.nVersion));\n     result.pushKV(\"merkleroot\", block.hashMerkleRoot.GetHex());\n     UniValue txs(UniValue::VARR);\n-    for(const auto& tx : block.vtx)\n-    {\n-        if(txDetails)\n-        {\n+    if (txDetails) {\n+        CBlockUndo blockUndo;\n+        const bool have_undo = !IsBlockPruned(blockindex) && UndoReadFromDisk(blockUndo, blockindex);\n+        for (size_t i = 0; i < block.vtx.size(); ++i) {\n+            const auto& tx = block.vtx.at(i);\n+            // coinbase transaction (i == 0) doesn't have undo data\n+            const CTxUndo* ptr_txundo = (have_undo && i) ? &blockUndo.vtxundo.at(i - 1) : nullptr;",
    "path": "src/rpc/blockchain.cpp",
    "position": null,
    "original_position": 14,
    "commit_id": "66d012ad7f9381bacfc9b8388fa2ebf82cb86c9e",
    "original_commit_id": "1298f0fca79803f3bc91c052f901a4df63ae343a",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Just `txundo` is fine for the var name. Our style isn't to prefix variable names with the type.",
    "created_at": "2020-09-25T13:29:44Z",
    "updated_at": "2020-10-09T15:54:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r494988059",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/494988059"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r494988059"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/494988059/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 171,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/494996867",
    "pull_request_review_id": 496419603,
    "id": 494996867,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDk5Njg2Nw==",
    "diff_hunk": "@@ -162,16 +162,21 @@ UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIn\n     result.pushKV(\"versionHex\", strprintf(\"%08x\", block.nVersion));\n     result.pushKV(\"merkleroot\", block.hashMerkleRoot.GetHex());\n     UniValue txs(UniValue::VARR);\n-    for(const auto& tx : block.vtx)\n-    {\n-        if(txDetails)\n-        {\n+    if (txDetails) {\n+        CBlockUndo blockUndo;\n+        const bool have_undo = !IsBlockPruned(blockindex) && UndoReadFromDisk(blockUndo, blockindex);\n+        for (size_t i = 0; i < block.vtx.size(); ++i) {\n+            const auto& tx = block.vtx.at(i);",
    "path": "src/rpc/blockchain.cpp",
    "position": null,
    "original_position": 12,
    "commit_id": "66d012ad7f9381bacfc9b8388fa2ebf82cb86c9e",
    "original_commit_id": "1298f0fca79803f3bc91c052f901a4df63ae343a",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I think auto should only be used when it's immediately obvious from looking at the code what the type is, and when not using auto would be annoyingly verbose. Here, you'd need to look at the definition of a `CBlock` to determine that `tx` is a `CTransactionRef` object, and you're not saving my characters by not typing `CTransactionRef`, so I'd recommend avoiding auto.",
    "created_at": "2020-09-25T13:43:33Z",
    "updated_at": "2020-10-09T15:54:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r494996867",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/494996867"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r494996867"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/494996867/reactions",
      "total_count": 3,
      "+1": 3,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 169,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/494997052",
    "pull_request_review_id": 496419603,
    "id": 494997052,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDk5NzA1Mg==",
    "diff_hunk": "@@ -0,0 +1,44 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+'''Test getblock rpc fee calculation.\n+'''",
    "path": "test/functional/rpc_getblock_fee.py",
    "position": null,
    "original_position": 6,
    "commit_id": "66d012ad7f9381bacfc9b8388fa2ebf82cb86c9e",
    "original_commit_id": "1298f0fca79803f3bc91c052f901a4df63ae343a",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Join with line above",
    "created_at": "2020-09-25T13:43:51Z",
    "updated_at": "2020-10-09T15:54:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r494997052",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/494997052"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r494997052"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/494997052/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 6,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/494997865",
    "pull_request_review_id": 496419603,
    "id": 494997865,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDk5Nzg2NQ==",
    "diff_hunk": "@@ -0,0 +1,44 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+'''Test getblock rpc fee calculation.\n+'''\n+\n+import os\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import get_datadir_path\n+\n+\n+class GetblockFeeTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+\n+    def run_test(self):\n+        node = self.nodes[0]\n+        address = node.getnewaddress()\n+        node.generatetoaddress(101, address)\n+        node.sendtoaddress(address, 1)\n+        blockhash = node.generatetoaddress(1, address)[0]\n+\n+        self.log.info('Ensure that getblock with verbosity 2 includes fee')\n+        block = node.getblock(blockhash, 2)\n+        assert 'fee' in block['tx'][1]\n+\n+        self.log.info('Ensure that getblock with verbosity 1 doesn\\'t include fee')",
    "path": "test/functional/rpc_getblock_fee.py",
    "position": null,
    "original_position": 32,
    "commit_id": "66d012ad7f9381bacfc9b8388fa2ebf82cb86c9e",
    "original_commit_id": "1298f0fca79803f3bc91c052f901a4df63ae343a",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Use double quotes to avoid having to escape the quote inside the log:\r\n\r\n```suggestion\r\n        self.log.info(\"Ensure that getblock with verbosity 1 doesn't include fee\")\r\n```\r\n\r\nSame in the log below.",
    "created_at": "2020-09-25T13:45:03Z",
    "updated_at": "2020-10-09T15:54:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r494997865",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/494997865"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r494997865"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/494997865/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 32,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495007723",
    "pull_request_review_id": 496419603,
    "id": 495007723,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTAwNzcyMw==",
    "diff_hunk": "@@ -209,6 +215,11 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n                 txinwitness.push_back(HexStr(item));\n             }\n             in.pushKV(\"txinwitness\", txinwitness);\n+            if (txundo) {\n+                const CTxOut& txout = txundo->vprevout[i].out;\n+                // Suppress fuzz test failures by ignoring nonsense values",
    "path": "src/core_write.cpp",
    "position": null,
    "original_position": 36,
    "commit_id": "66d012ad7f9381bacfc9b8388fa2ebf82cb86c9e",
    "original_commit_id": "1298f0fca79803f3bc91c052f901a4df63ae343a",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "It seems strange to me to have code in the produce that exists only to work around shortcomings in the fuzz tests. Which fuzz test fails if you don't do this? (the only fuzz tester that calls `TxToUniv()` doesn't provide a `txundo` param).",
    "created_at": "2020-09-25T14:00:05Z",
    "updated_at": "2020-10-09T15:54:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r495007723",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495007723"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r495007723"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495007723/reactions",
      "total_count": 3,
      "+1": 3,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 220,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/496144902",
    "pull_request_review_id": 497783350,
    "id": 496144902,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjE0NDkwMg==",
    "diff_hunk": "@@ -209,6 +215,11 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n                 txinwitness.push_back(HexStr(item));\n             }\n             in.pushKV(\"txinwitness\", txinwitness);\n+            if (txundo) {\n+                const CTxOut& txout = txundo->vprevout[i].out;\n+                // Suppress fuzz test failures by ignoring nonsense values",
    "path": "src/core_write.cpp",
    "position": null,
    "original_position": 36,
    "commit_id": "66d012ad7f9381bacfc9b8388fa2ebf82cb86c9e",
    "original_commit_id": "1298f0fca79803f3bc91c052f901a4df63ae343a",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Agree with @jnewbery . It is impossible to hit this condition in production, so an assert or just nothing at all might be more appropriate.",
    "created_at": "2020-09-28T18:17:52Z",
    "updated_at": "2020-10-09T15:54:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r496144902",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/496144902"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r496144902"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/496144902/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 220,
    "side": "RIGHT",
    "in_reply_to_id": 495007723
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/496167710",
    "pull_request_review_id": 497812708,
    "id": 496167710,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjE2NzcxMA==",
    "diff_hunk": "@@ -209,6 +215,11 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n                 txinwitness.push_back(HexStr(item));\n             }\n             in.pushKV(\"txinwitness\", txinwitness);\n+            if (txundo) {\n+                const CTxOut& txout = txundo->vprevout[i].out;\n+                // Suppress fuzz test failures by ignoring nonsense values",
    "path": "src/core_write.cpp",
    "position": null,
    "original_position": 36,
    "commit_id": "66d012ad7f9381bacfc9b8388fa2ebf82cb86c9e",
    "original_commit_id": "1298f0fca79803f3bc91c052f901a4df63ae343a",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I suggest stating the pre-condition in the form of an assertion or documentation. Then it is the fuzzer's responsibility the fulfil all explicitly stated pre-conditions.",
    "created_at": "2020-09-28T18:59:51Z",
    "updated_at": "2020-10-09T15:54:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r496167710",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/496167710"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r496167710"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/496167710/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 220,
    "side": "RIGHT",
    "in_reply_to_id": 495007723
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/497024259",
    "pull_request_review_id": 498859736,
    "id": 497024259,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzAyNDI1OQ==",
    "diff_hunk": "@@ -209,6 +215,11 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n                 txinwitness.push_back(HexStr(item));\n             }\n             in.pushKV(\"txinwitness\", txinwitness);\n+            if (txundo) {\n+                const CTxOut& txout = txundo->vprevout[i].out;",
    "path": "src/core_write.cpp",
    "position": null,
    "original_position": 35,
    "commit_id": "66d012ad7f9381bacfc9b8388fa2ebf82cb86c9e",
    "original_commit_id": "a05fe7f59e211fcd4c128c775d15f0a493b196c4",
    "user": {
      "login": "fjahr",
      "id": 1322187,
      "node_id": "MDQ6VXNlcjEzMjIxODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjahr",
      "html_url": "https://github.com/fjahr",
      "followers_url": "https://api.github.com/users/fjahr/followers",
      "following_url": "https://api.github.com/users/fjahr/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjahr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
      "organizations_url": "https://api.github.com/users/fjahr/orgs",
      "repos_url": "https://api.github.com/users/fjahr/repos",
      "events_url": "https://api.github.com/users/fjahr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjahr/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "maybe call this `prev_txout` or so",
    "created_at": "2020-09-29T20:28:33Z",
    "updated_at": "2020-10-09T15:54:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r497024259",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/497024259"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r497024259"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/497024259/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 219,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/497024539",
    "pull_request_review_id": 498859736,
    "id": 497024539,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzAyNDUzOQ==",
    "diff_hunk": "@@ -228,9 +239,19 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n         ScriptPubKeyToUniv(txout.scriptPubKey, o, true);\n         out.pushKV(\"scriptPubKey\", o);\n         vout.push_back(out);\n+\n+        // Suppress fuzz test failures by ignoring nonsense values\n+        if (MoneyRange(txout.nValue)) amt_total_out += txout.nValue;\n     }\n     entry.pushKV(\"vout\", vout);\n \n+    // For coinbase transactions we have txundo == nullptr\n+    if (txundo) {\n+        CAmount fee = amt_total_in - amt_total_out;",
    "path": "src/core_write.cpp",
    "position": null,
    "original_position": 54,
    "commit_id": "66d012ad7f9381bacfc9b8388fa2ebf82cb86c9e",
    "original_commit_id": "a05fe7f59e211fcd4c128c775d15f0a493b196c4",
    "user": {
      "login": "fjahr",
      "id": 1322187,
      "node_id": "MDQ6VXNlcjEzMjIxODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjahr",
      "html_url": "https://github.com/fjahr",
      "followers_url": "https://api.github.com/users/fjahr/followers",
      "following_url": "https://api.github.com/users/fjahr/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjahr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
      "organizations_url": "https://api.github.com/users/fjahr/orgs",
      "repos_url": "https://api.github.com/users/fjahr/repos",
      "events_url": "https://api.github.com/users/fjahr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjahr/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "nit\r\n```suggestion\r\n        const CAmount fee = amt_total_in - amt_total_out;\r\n```",
    "created_at": "2020-09-29T20:29:04Z",
    "updated_at": "2020-10-09T15:54:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r497024539",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/497024539"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r497024539"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/497024539/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 250,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/497028881",
    "pull_request_review_id": 498859736,
    "id": 497028881,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzAyODg4MQ==",
    "diff_hunk": "@@ -162,16 +162,21 @@ UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIn\n     result.pushKV(\"versionHex\", strprintf(\"%08x\", block.nVersion));\n     result.pushKV(\"merkleroot\", block.hashMerkleRoot.GetHex());\n     UniValue txs(UniValue::VARR);\n-    for(const auto& tx : block.vtx)\n-    {\n-        if(txDetails)\n-        {\n+    if (txDetails) {\n+        CBlockUndo blockUndo;\n+        const bool have_undo = !IsBlockPruned(blockindex) && UndoReadFromDisk(blockUndo, blockindex);",
    "path": "src/rpc/blockchain.cpp",
    "position": 10,
    "original_position": 10,
    "commit_id": "66d012ad7f9381bacfc9b8388fa2ebf82cb86c9e",
    "original_commit_id": "a05fe7f59e211fcd4c128c775d15f0a493b196c4",
    "user": {
      "login": "fjahr",
      "id": 1322187,
      "node_id": "MDQ6VXNlcjEzMjIxODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjahr",
      "html_url": "https://github.com/fjahr",
      "followers_url": "https://api.github.com/users/fjahr/followers",
      "following_url": "https://api.github.com/users/fjahr/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjahr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
      "organizations_url": "https://api.github.com/users/fjahr/orgs",
      "repos_url": "https://api.github.com/users/fjahr/repos",
      "events_url": "https://api.github.com/users/fjahr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjahr/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I think you should use `GetUndoChecked` here and the RPC should fail if the details are requested but the undo data can not be found. Otherwise, the users can not trust that they get the fees in the response and they will have no way to know why they weren't included, it will just seem random to them.\r\n\r\nBTW, I am unsure in which cases we are missing the undo data. Is that only in the case of data corruption or are there reasons that make this common? Or is pruning unreliable there in some sense? I couldn't find anything on the topic.",
    "created_at": "2020-09-29T20:35:31Z",
    "updated_at": "2020-10-09T15:54:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r497028881",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/497028881"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r497028881"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/497028881/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 167,
    "original_line": 167,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/497046067",
    "pull_request_review_id": 498859736,
    "id": 497046067,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzA0NjA2Nw==",
    "diff_hunk": "@@ -0,0 +1,44 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+'''Test getblock rpc fee calculation.\n+'''\n+\n+import os\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import get_datadir_path\n+\n+\n+class GetblockFeeTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+\n+    def run_test(self):\n+        node = self.nodes[0]\n+        address = node.getnewaddress()\n+        node.generatetoaddress(101, address)",
    "path": "test/functional/rpc_getblock_fee.py",
    "position": null,
    "original_position": 24,
    "commit_id": "66d012ad7f9381bacfc9b8388fa2ebf82cb86c9e",
    "original_commit_id": "1298f0fca79803f3bc91c052f901a4df63ae343a",
    "user": {
      "login": "fjahr",
      "id": 1322187,
      "node_id": "MDQ6VXNlcjEzMjIxODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjahr",
      "html_url": "https://github.com/fjahr",
      "followers_url": "https://api.github.com/users/fjahr/followers",
      "following_url": "https://api.github.com/users/fjahr/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjahr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
      "organizations_url": "https://api.github.com/users/fjahr/orgs",
      "repos_url": "https://api.github.com/users/fjahr/repos",
      "events_url": "https://api.github.com/users/fjahr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjahr/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "You don't need to do this to have coins to spend. This is done for you automatically by default (see docs on `setup_clean_chain`) and this uses fewer resources by loading the chain from cache.",
    "created_at": "2020-09-29T20:52:15Z",
    "updated_at": "2020-10-09T15:54:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r497046067",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/497046067"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r497046067"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/497046067/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 24,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/497063838",
    "pull_request_review_id": 498859736,
    "id": 497063838,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzA2MzgzOA==",
    "diff_hunk": "@@ -0,0 +1,44 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+'''Test getblock rpc fee calculation.\n+'''\n+\n+import os\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import get_datadir_path\n+\n+\n+class GetblockFeeTest(BitcoinTestFramework):",
    "path": "test/functional/rpc_getblock_fee.py",
    "position": null,
    "original_position": 14,
    "commit_id": "66d012ad7f9381bacfc9b8388fa2ebf82cb86c9e",
    "original_commit_id": "1298f0fca79803f3bc91c052f901a4df63ae343a",
    "user": {
      "login": "fjahr",
      "id": 1322187,
      "node_id": "MDQ6VXNlcjEzMjIxODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjahr",
      "html_url": "https://github.com/fjahr",
      "followers_url": "https://api.github.com/users/fjahr/followers",
      "following_url": "https://api.github.com/users/fjahr/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjahr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
      "organizations_url": "https://api.github.com/users/fjahr/orgs",
      "repos_url": "https://api.github.com/users/fjahr/repos",
      "events_url": "https://api.github.com/users/fjahr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjahr/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I think `rpc_blockchain.py` is the natural place for these tests. A new file is not necessary for such a specific and small test IMO.",
    "created_at": "2020-09-29T21:14:53Z",
    "updated_at": "2020-10-09T15:54:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r497063838",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/497063838"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r497063838"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/497063838/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 14,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/497674965",
    "pull_request_review_id": 499649219,
    "id": 497674965,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzY3NDk2NQ==",
    "diff_hunk": "@@ -0,0 +1,44 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+'''Test getblock rpc fee calculation.\n+'''",
    "path": "test/functional/rpc_getblock_fee.py",
    "position": null,
    "original_position": 6,
    "commit_id": "66d012ad7f9381bacfc9b8388fa2ebf82cb86c9e",
    "original_commit_id": "1298f0fca79803f3bc91c052f901a4df63ae343a",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following{/other_user}",
      "gists_url": "https://api.github.com/users/glozow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/glozow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "nit: I think we also usually do double quotes? `\"\"\"`",
    "created_at": "2020-09-30T17:15:53Z",
    "updated_at": "2020-10-09T15:54:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r497674965",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/497674965"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r497674965"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/497674965/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 6,
    "side": "RIGHT",
    "in_reply_to_id": 494997052
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/498525344",
    "pull_request_review_id": 500735483,
    "id": 498525344,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUyNTM0NA==",
    "diff_hunk": "@@ -162,16 +162,21 @@ UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIn\n     result.pushKV(\"versionHex\", strprintf(\"%08x\", block.nVersion));\n     result.pushKV(\"merkleroot\", block.hashMerkleRoot.GetHex());\n     UniValue txs(UniValue::VARR);\n-    for(const auto& tx : block.vtx)\n-    {\n-        if(txDetails)\n-        {\n+    if (txDetails) {\n+        CBlockUndo blockUndo;\n+        const bool have_undo = !IsBlockPruned(blockindex) && UndoReadFromDisk(blockUndo, blockindex);",
    "path": "src/rpc/blockchain.cpp",
    "position": 10,
    "original_position": 10,
    "commit_id": "66d012ad7f9381bacfc9b8388fa2ebf82cb86c9e",
    "original_commit_id": "a05fe7f59e211fcd4c128c775d15f0a493b196c4",
    "user": {
      "login": "robot-dreams",
      "id": 4276679,
      "node_id": "MDQ6VXNlcjQyNzY2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4276679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/robot-dreams",
      "html_url": "https://github.com/robot-dreams",
      "followers_url": "https://api.github.com/users/robot-dreams/followers",
      "following_url": "https://api.github.com/users/robot-dreams/following{/other_user}",
      "gists_url": "https://api.github.com/users/robot-dreams/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/robot-dreams/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/robot-dreams/subscriptions",
      "organizations_url": "https://api.github.com/users/robot-dreams/orgs",
      "repos_url": "https://api.github.com/users/robot-dreams/repos",
      "events_url": "https://api.github.com/users/robot-dreams/events{/privacy}",
      "received_events_url": "https://api.github.com/users/robot-dreams/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Great idea!\r\n\r\nYes, according to https://github.com/bitcoin/bitcoin/blob/1b313cacc99a1b372238f9036abed5491f9d28f7/src/validation.h#L370 it looks like block and undo data are always deleted together.\r\n\r\nI definitely might be missing something, but from a quick search I couldn't find any other reason we'd delete `rev` but not `blk` files.",
    "created_at": "2020-10-01T21:36:22Z",
    "updated_at": "2020-10-09T15:54:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r498525344",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/498525344"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r498525344"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/498525344/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 167,
    "original_line": 167,
    "side": "RIGHT",
    "in_reply_to_id": 497028881
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/498526377",
    "pull_request_review_id": 500736751,
    "id": 498526377,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUyNjM3Nw==",
    "diff_hunk": "@@ -162,16 +162,21 @@ UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIn\n     result.pushKV(\"versionHex\", strprintf(\"%08x\", block.nVersion));\n     result.pushKV(\"merkleroot\", block.hashMerkleRoot.GetHex());\n     UniValue txs(UniValue::VARR);\n-    for(const auto& tx : block.vtx)\n-    {\n-        if(txDetails)\n-        {\n+    if (txDetails) {\n+        CBlockUndo blockUndo;\n+        const bool have_undo = !IsBlockPruned(blockindex) && UndoReadFromDisk(blockUndo, blockindex);",
    "path": "src/rpc/blockchain.cpp",
    "position": 10,
    "original_position": 10,
    "commit_id": "66d012ad7f9381bacfc9b8388fa2ebf82cb86c9e",
    "original_commit_id": "a05fe7f59e211fcd4c128c775d15f0a493b196c4",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I think it's not unreasonable to delete undo data while keeping block data (that means you could still serve it to other syncing nodes, and rescan, but can't reorg out of it). That just was never implemented.",
    "created_at": "2020-10-01T21:38:48Z",
    "updated_at": "2020-10-09T15:54:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r498526377",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/498526377"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r498526377"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/498526377/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 167,
    "original_line": 167,
    "side": "RIGHT",
    "in_reply_to_id": 497028881
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/498614355",
    "pull_request_review_id": 500854917,
    "id": 498614355,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODYxNDM1NQ==",
    "diff_hunk": "@@ -162,16 +162,21 @@ UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIn\n     result.pushKV(\"versionHex\", strprintf(\"%08x\", block.nVersion));\n     result.pushKV(\"merkleroot\", block.hashMerkleRoot.GetHex());\n     UniValue txs(UniValue::VARR);\n-    for(const auto& tx : block.vtx)\n-    {\n-        if(txDetails)\n-        {\n+    if (txDetails) {\n+        CBlockUndo blockUndo;\n+        const bool have_undo = !IsBlockPruned(blockindex) && UndoReadFromDisk(blockUndo, blockindex);",
    "path": "src/rpc/blockchain.cpp",
    "position": 10,
    "original_position": 10,
    "commit_id": "66d012ad7f9381bacfc9b8388fa2ebf82cb86c9e",
    "original_commit_id": "a05fe7f59e211fcd4c128c775d15f0a493b196c4",
    "user": {
      "login": "robot-dreams",
      "id": 4276679,
      "node_id": "MDQ6VXNlcjQyNzY2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4276679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/robot-dreams",
      "html_url": "https://github.com/robot-dreams",
      "followers_url": "https://api.github.com/users/robot-dreams/followers",
      "following_url": "https://api.github.com/users/robot-dreams/following{/other_user}",
      "gists_url": "https://api.github.com/users/robot-dreams/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/robot-dreams/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/robot-dreams/subscriptions",
      "organizations_url": "https://api.github.com/users/robot-dreams/orgs",
      "repos_url": "https://api.github.com/users/robot-dreams/repos",
      "events_url": "https://api.github.com/users/robot-dreams/events{/privacy}",
      "received_events_url": "https://api.github.com/users/robot-dreams/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "OK, you both make some great points. I can think of three approaches at the moment:\r\n\r\n- Use `GetUndoChecked` which means if someone deletes undo data in the future, they'll cause this RPC to fail\r\n- Silently leave out the fee if block data is present but undo data is missing\r\n- Add some verbose documentation that says \"we'll include the fee if we have the data needed to efficiently calculate it\"\r\n\r\nDo any of these approaches seem reasonable to both of you?",
    "created_at": "2020-10-02T04:29:29Z",
    "updated_at": "2020-10-09T15:54:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r498614355",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/498614355"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r498614355"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/498614355/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 167,
    "original_line": 167,
    "side": "RIGHT",
    "in_reply_to_id": 497028881
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/499066443",
    "pull_request_review_id": 501468308,
    "id": 499066443,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTA2NjQ0Mw==",
    "diff_hunk": "@@ -162,16 +162,21 @@ UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIn\n     result.pushKV(\"versionHex\", strprintf(\"%08x\", block.nVersion));\n     result.pushKV(\"merkleroot\", block.hashMerkleRoot.GetHex());\n     UniValue txs(UniValue::VARR);\n-    for(const auto& tx : block.vtx)\n-    {\n-        if(txDetails)\n-        {\n+    if (txDetails) {\n+        CBlockUndo blockUndo;\n+        const bool have_undo = !IsBlockPruned(blockindex) && UndoReadFromDisk(blockUndo, blockindex);",
    "path": "src/rpc/blockchain.cpp",
    "position": 10,
    "original_position": 10,
    "commit_id": "66d012ad7f9381bacfc9b8388fa2ebf82cb86c9e",
    "original_commit_id": "a05fe7f59e211fcd4c128c775d15f0a493b196c4",
    "user": {
      "login": "fjahr",
      "id": 1322187,
      "node_id": "MDQ6VXNlcjEzMjIxODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjahr",
      "html_url": "https://github.com/fjahr",
      "followers_url": "https://api.github.com/users/fjahr/followers",
      "following_url": "https://api.github.com/users/fjahr/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjahr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
      "organizations_url": "https://api.github.com/users/fjahr/orgs",
      "repos_url": "https://api.github.com/users/fjahr/repos",
      "events_url": "https://api.github.com/users/fjahr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjahr/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "As @sipa says it's not implemented and I think there is no one working on something like that (Side-note: I will look into that now :) ). So I would say the first option would still be my first choice if we could have a test that would reliably fail when the change comes. But that seems unrealistic, at least if it is implemented the way I envision it now and generally it would be poking around in the dark. So, I guess I would be happy if you add some docs but you don't have to since with the current state of the code the fee should be there reliably.",
    "created_at": "2020-10-02T21:55:36Z",
    "updated_at": "2020-10-09T15:54:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r499066443",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/499066443"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r499066443"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/499066443/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 167,
    "original_line": 167,
    "side": "RIGHT",
    "in_reply_to_id": 497028881
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/499261276",
    "pull_request_review_id": 501636226,
    "id": 499261276,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTI2MTI3Ng==",
    "diff_hunk": "@@ -189,13 +191,20 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n     entry.pushKV(\"weight\", GetTransactionWeight(tx));\n     entry.pushKV(\"locktime\", (int64_t)tx.nLockTime);\n \n-    UniValue vin(UniValue::VARR);\n+    UniValue vin{UniValue::VARR};\n+\n+    // If available, use Undo data to calculate the fee. Note that txundo == nullptr\n+    // for coinbase transactions and for transactions in pruned blocks.\n+    bool calculate_fee = txundo != nullptr;",
    "path": "src/core_write.cpp",
    "position": null,
    "original_position": 28,
    "commit_id": "66d012ad7f9381bacfc9b8388fa2ebf82cb86c9e",
    "original_commit_id": "8e38a27c69e8ac8abf5d0c2ad29b8be41a140117",
    "user": {
      "login": "fjahr",
      "id": 1322187,
      "node_id": "MDQ6VXNlcjEzMjIxODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjahr",
      "html_url": "https://github.com/fjahr",
      "followers_url": "https://api.github.com/users/fjahr/followers",
      "following_url": "https://api.github.com/users/fjahr/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjahr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
      "organizations_url": "https://api.github.com/users/fjahr/orgs",
      "repos_url": "https://api.github.com/users/fjahr/repos",
      "events_url": "https://api.github.com/users/fjahr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjahr/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "nit: could be const",
    "created_at": "2020-10-04T15:58:02Z",
    "updated_at": "2020-10-09T15:54:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r499261276",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/499261276"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r499261276"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/499261276/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 198,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/499263865",
    "pull_request_review_id": 501636226,
    "id": 499263865,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTI2Mzg2NQ==",
    "diff_hunk": "@@ -926,6 +931,7 @@ static RPCHelpMan getblock()\n                         {RPCResult::Type::OBJ, \"\", \"\",\n                         {\n                             {RPCResult::Type::ELISION, \"\", \"The transactions in the format of the getrawtransaction RPC. Different from verbosity = 1 \\\"tx\\\" result\"},\n+                            {RPCResult::Type::NUM, \"fee\", \"The transaction fee in \" + CURRENCY_UNIT + \", omitted if efficient calculation isn't possible (due to pruning)\"},",
    "path": "src/rpc/blockchain.cpp",
    "position": null,
    "original_position": 32,
    "commit_id": "66d012ad7f9381bacfc9b8388fa2ebf82cb86c9e",
    "original_commit_id": "8e38a27c69e8ac8abf5d0c2ad29b8be41a140117",
    "user": {
      "login": "fjahr",
      "id": 1322187,
      "node_id": "MDQ6VXNlcjEzMjIxODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjahr",
      "html_url": "https://github.com/fjahr",
      "followers_url": "https://api.github.com/users/fjahr/followers",
      "following_url": "https://api.github.com/users/fjahr/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjahr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
      "organizations_url": "https://api.github.com/users/fjahr/orgs",
      "repos_url": "https://api.github.com/users/fjahr/repos",
      "events_url": "https://api.github.com/users/fjahr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjahr/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Hm, I think since with the currently available version of pruning the block wouldn't be found anyway this would be slightly better and also more precise:\r\n```suggestion\r\n                            {RPCResult::Type::NUM, \"fee\", \"The transaction fee in \" + CURRENCY_UNIT + \", omitted if efficient calculation isn't possible (due to block undo data being unavailable)\"},\r\n```",
    "created_at": "2020-10-04T16:26:47Z",
    "updated_at": "2020-10-09T15:54:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r499263865",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/499263865"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r499263865"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/499263865/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 934,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/499264006",
    "pull_request_review_id": 501636226,
    "id": 499264006,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTI2NDAwNg==",
    "diff_hunk": "@@ -189,13 +191,20 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n     entry.pushKV(\"weight\", GetTransactionWeight(tx));\n     entry.pushKV(\"locktime\", (int64_t)tx.nLockTime);\n \n-    UniValue vin(UniValue::VARR);\n+    UniValue vin{UniValue::VARR};\n+\n+    // If available, use Undo data to calculate the fee. Note that txundo == nullptr\n+    // for coinbase transactions and for transactions in pruned blocks.",
    "path": "src/core_write.cpp",
    "position": null,
    "original_position": 27,
    "commit_id": "66d012ad7f9381bacfc9b8388fa2ebf82cb86c9e",
    "original_commit_id": "8e38a27c69e8ac8abf5d0c2ad29b8be41a140117",
    "user": {
      "login": "fjahr",
      "id": 1322187,
      "node_id": "MDQ6VXNlcjEzMjIxODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjahr",
      "html_url": "https://github.com/fjahr",
      "followers_url": "https://api.github.com/users/fjahr/followers",
      "following_url": "https://api.github.com/users/fjahr/following{/other_user}",
      "gists_url": "https://api.github.com/users/fjahr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
      "organizations_url": "https://api.github.com/users/fjahr/orgs",
      "repos_url": "https://api.github.com/users/fjahr/repos",
      "events_url": "https://api.github.com/users/fjahr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fjahr/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I think it's slightly better to be a bit more precise here. There may be other reason (in the future) why there is no undo data.\r\n```suggestion\r\n    // for coinbase transactions and for transactions where undo data is unavailable.\r\n```",
    "created_at": "2020-10-04T16:28:24Z",
    "updated_at": "2020-10-09T15:54:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r499264006",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/499264006"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r499264006"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/499264006/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 197,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/499429396",
    "pull_request_review_id": 501831553,
    "id": 499429396,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTQyOTM5Ng==",
    "diff_hunk": "@@ -162,16 +162,21 @@ UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIn\n     result.pushKV(\"versionHex\", strprintf(\"%08x\", block.nVersion));\n     result.pushKV(\"merkleroot\", block.hashMerkleRoot.GetHex());\n     UniValue txs(UniValue::VARR);\n-    for(const auto& tx : block.vtx)\n-    {\n-        if(txDetails)\n-        {\n+    if (txDetails) {\n+        CBlockUndo blockUndo;\n+        const bool have_undo = !IsBlockPruned(blockindex) && UndoReadFromDisk(blockUndo, blockindex);",
    "path": "src/rpc/blockchain.cpp",
    "position": 10,
    "original_position": 10,
    "commit_id": "66d012ad7f9381bacfc9b8388fa2ebf82cb86c9e",
    "original_commit_id": "a05fe7f59e211fcd4c128c775d15f0a493b196c4",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I think either leaving it like it is now, or returning an error when the undo file is not available but the block file is (since that's currently an unexpected condition) are both fine.",
    "created_at": "2020-10-05T08:33:59Z",
    "updated_at": "2020-10-09T15:54:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r499429396",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/499429396"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r499429396"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/499429396/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 167,
    "original_line": 167,
    "side": "RIGHT",
    "in_reply_to_id": 497028881
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/499431094",
    "pull_request_review_id": 501833820,
    "id": 499431094,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTQzMTA5NA==",
    "diff_hunk": "@@ -926,6 +931,7 @@ static RPCHelpMan getblock()\n                         {RPCResult::Type::OBJ, \"\", \"\",\n                         {\n                             {RPCResult::Type::ELISION, \"\", \"The transactions in the format of the getrawtransaction RPC. Different from verbosity = 1 \\\"tx\\\" result\"},\n+                            {RPCResult::Type::NUM, \"fee\", \"The transaction fee in \" + CURRENCY_UNIT + \", omitted if efficient calculation isn't possible (due to unavailable block undo data)\"},",
    "path": "src/rpc/blockchain.cpp",
    "position": null,
    "original_position": 32,
    "commit_id": "66d012ad7f9381bacfc9b8388fa2ebf82cb86c9e",
    "original_commit_id": "aae692c3e29f4d3cb654cb40f18d658b624fa870",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I think this would be fine as just \"omitted if block undo data is not available\". I don't think users would care about or understand what you mean by 'efficient calculation'.",
    "created_at": "2020-10-05T08:37:05Z",
    "updated_at": "2020-10-09T15:54:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r499431094",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/499431094"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r499431094"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/499431094/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 934,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/499432395",
    "pull_request_review_id": 501833820,
    "id": 499432395,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTQzMjM5NQ==",
    "diff_hunk": "@@ -352,6 +355,42 @@ def assert_waitforheight(height, timeout=2):\n         assert_waitforheight(current_height)\n         assert_waitforheight(current_height + 1)\n \n+    def _test_getblock(self):\n+        if not self.is_wallet_compiled():",
    "path": "test/functional/rpc_blockchain.py",
    "position": null,
    "original_position": 29,
    "commit_id": "66d012ad7f9381bacfc9b8388fa2ebf82cb86c9e",
    "original_commit_id": "aae692c3e29f4d3cb654cb40f18d658b624fa870",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Did you look at using miniwallet.py to manually create the transactions? That would avoid a dependency on a compiled wallet to test this functionality.",
    "created_at": "2020-10-05T08:39:27Z",
    "updated_at": "2020-10-09T15:54:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r499432395",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/499432395"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r499432395"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/499432395/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 359,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/499432813",
    "pull_request_review_id": 501833820,
    "id": 499432813,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTQzMjgxMw==",
    "diff_hunk": "@@ -352,6 +355,42 @@ def assert_waitforheight(height, timeout=2):\n         assert_waitforheight(current_height)\n         assert_waitforheight(current_height + 1)\n \n+    def _test_getblock(self):\n+        if not self.is_wallet_compiled():\n+            self.log.info(\"Skipping getblock tests because wallet is disabled\")\n+            return\n+\n+        node = self.nodes[0]\n+        address = node.getnewaddress()\n+        node.sendtoaddress(address, 1)\n+        blockhash = node.generatetoaddress(1, address)[0]\n+\n+        self.log.info(\"Test that getblock with verbosity 1 doesn't include fee\")\n+        block = node.getblock(blockhash, 1)\n+        assert 'fee' not in block['tx'][1]\n+\n+        self.log.info('Test that getblock with verbosity 2 includes expected fee')\n+        block = node.getblock(blockhash, 2)\n+        assert 'fee' in block['tx'][1]\n+        assert_equal(block['tx'][1]['fee'], Decimal('0.00004380'))",
    "path": "test/functional/rpc_blockchain.py",
    "position": null,
    "original_position": 45,
    "commit_id": "66d012ad7f9381bacfc9b8388fa2ebf82cb86c9e",
    "original_commit_id": "aae692c3e29f4d3cb654cb40f18d658b624fa870",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Unless you're setting amounts/fee explicitly, this feels brittle (i.e. this test would break if an unrelated change was made in how the wallet code sets fees).",
    "created_at": "2020-10-05T08:40:13Z",
    "updated_at": "2020-10-09T15:54:22Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r499432813",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/499432813"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r499432813"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/499432813/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 375,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/548539410",
    "pull_request_review_id": 558545334,
    "id": 548539410,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODUzOTQxMA==",
    "diff_hunk": "@@ -352,6 +356,46 @@ def assert_waitforheight(height, timeout=2):\n         assert_waitforheight(current_height)\n         assert_waitforheight(current_height + 1)\n \n+    def _test_getblock(self):\n+        node = self.nodes[0]\n+\n+        miniwallet = MiniWallet(node)\n+        miniwallet.generate(5)\n+        node.generate(100)\n+\n+        fee_per_byte = Decimal('0.00000010')\n+        fee_per_kb = 1000 * fee_per_byte\n+\n+        miniwallet.send_self_transfer(fee_rate=fee_per_kb, from_node=node)\n+        blockhash = node.generate(1)[0]\n+\n+        self.log.info(\"Test that getblock with verbosity 1 doesn't include fee\")\n+        block = node.getblock(blockhash, 1)\n+        assert 'fee' not in block['tx'][1]\n+\n+        self.log.info('Test that getblock with verbosity 2 includes expected fee')\n+        block = node.getblock(blockhash, 2)\n+        tx = block['tx'][1]\n+        assert 'fee' in tx",
    "path": "test/functional/rpc_blockchain.py",
    "position": 50,
    "original_position": 50,
    "commit_id": "66d012ad7f9381bacfc9b8388fa2ebf82cb86c9e",
    "original_commit_id": "66d012ad7f9381bacfc9b8388fa2ebf82cb86c9e",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "no need for this check. The next line would already fail with `KeyError`",
    "created_at": "2020-12-24T14:05:41Z",
    "updated_at": "2020-12-24T14:31:39Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r548539410",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/548539410"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r548539410"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/548539410/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 379,
    "original_line": 379,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/548539687",
    "pull_request_review_id": 558545334,
    "id": 548539687,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODUzOTY4Nw==",
    "diff_hunk": "@@ -352,6 +356,46 @@ def assert_waitforheight(height, timeout=2):\n         assert_waitforheight(current_height)\n         assert_waitforheight(current_height + 1)\n \n+    def _test_getblock(self):\n+        node = self.nodes[0]\n+\n+        miniwallet = MiniWallet(node)\n+        miniwallet.generate(5)\n+        node.generate(100)\n+\n+        fee_per_byte = Decimal('0.00000010')\n+        fee_per_kb = 1000 * fee_per_byte\n+\n+        miniwallet.send_self_transfer(fee_rate=fee_per_kb, from_node=node)\n+        blockhash = node.generate(1)[0]\n+\n+        self.log.info(\"Test that getblock with verbosity 1 doesn't include fee\")\n+        block = node.getblock(blockhash, 1)\n+        assert 'fee' not in block['tx'][1]\n+\n+        self.log.info('Test that getblock with verbosity 2 includes expected fee')\n+        block = node.getblock(blockhash, 2)\n+        tx = block['tx'][1]\n+        assert 'fee' in tx\n+        assert_equal(tx['fee'], tx['vsize'] * fee_per_byte)\n+\n+        self.log.info(\"Test that getblock with verbosity 2 still works with pruned Undo data\")\n+        datadir = get_datadir_path(self.options.tmpdir, 0)",
    "path": "test/functional/rpc_blockchain.py",
    "position": 54,
    "original_position": 54,
    "commit_id": "66d012ad7f9381bacfc9b8388fa2ebf82cb86c9e",
    "original_commit_id": "66d012ad7f9381bacfc9b8388fa2ebf82cb86c9e",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "no need for the import `node.datadir` should suffice",
    "created_at": "2020-12-24T14:06:41Z",
    "updated_at": "2020-12-24T14:31:39Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r548539687",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/548539687"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r548539687"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/548539687/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 383,
    "original_line": 383,
    "side": "RIGHT"
  }
]