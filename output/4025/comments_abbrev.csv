BitcoinPullTester,2014-04-08T21:45:57Z,"Automatic sanity-testing: FAILED BUILD/TEST, see http://jenkins.bluematt.me/pull-tester/1b28a78a9996795b36ebd5b1b5aff6a48f1a54d7 for binaries and test log.\n\nThis could happen for one of several reasons:\n1. It chanages paths in makefile.linux-mingw or otherwise changes build scripts in a way that made them incompatible with the automated testing scripts (please tweak those patches in qa/pull-tes",https://github.com/bitcoin/bitcoin/pull/4025#issuecomment-39905827,39905827,
sipa,2014-04-08T21:48:30Z,"I _really_ wish we could pull this, but I doubt that all supported build environments are at a stage where a sufficiently compatible C++11-compiler is present (pull tester being one...).\n",https://github.com/bitcoin/bitcoin/pull/4025#issuecomment-39906075,39906075,
kdomanski,2014-04-08T21:51:17Z,Of course mingw is being a bitch. -.-'\n,https://github.com/bitcoin/bitcoin/pull/4025#issuecomment-39906339,39906339,
sipa,2014-04-08T22:01:48Z,"For the deterministic builds of the release binaries, we're currently using precise as build platform, which only has gcc 4.4-4.6 and clang 3.0 (and you need gcc 4.7 or 4.8, or clang 3.4 for decent C++11 support).\n\n@theuni @laanwj Can you comment on what it would take to have more modern compilers in gitian? In particular, is installing a newer version an option?\n",https://github.com/bitcoin/bitcoin/pull/4025#issuecomment-39907341,39907341,
pstratem,2014-04-09T02:56:53Z,NACK\n\nrequires new gcc/clang not considered stable by any sane distro\n\nmaybe in a few years...\n,https://github.com/bitcoin/bitcoin/pull/4025#issuecomment-39924184,39924184,
luke-jr,2014-04-09T03:01:42Z,"Even if we have C++11 in gitian, we need to support compiling on stable distros too.\n",https://github.com/bitcoin/bitcoin/pull/4025#issuecomment-39924370,39924370,
luke-jr,2014-04-09T03:38:17Z,"Looks like GCC 4.6 (stable everywhere that matters?) actually supports everything in _this_ PR, except std::unique_ptr, which is a library matter. Not sure how to figure out how to evaluate that.\n",https://github.com/bitcoin/bitcoin/pull/4025#issuecomment-39925865,39925865,
decster,2014-04-09T04:03:29Z,"I checked g++ 4.6.1(with -std=c++0x) and Apple LLVM version 5.0 (clang-500.2.79)(-std=c++11), it should be sufficient, including unique_ptr, initialiser lists, range based for\n",https://github.com/bitcoin/bitcoin/pull/4025#issuecomment-39926785,39926785,
luke-jr,2014-04-09T04:10:50Z,@decster The question is the C++ stdlib version available on stable platforms.\n,https://github.com/bitcoin/bitcoin/pull/4025#issuecomment-39927102,39927102,
decster,2014-04-09T05:19:36Z,"I thought normally libstdc++ should be the same version with g++, right? at least in my os. std::unique_ptr is header only, maybe not depending on runtime libraries, or just use boost instead?\n",https://github.com/bitcoin/bitcoin/pull/4025#issuecomment-39929518,39929518,
laanwj,2014-04-09T07:50:40Z,"Looks good. If gcc4.6 can indeed support this, it's good enough for me. Has anyone tried a gitian build with this? If not, I'll give it a try.\n\nWe have to upgrade the pull tester environment anyway. It builds invalid Windows executables for a while already - due to hardening flags incompatible with mingw 4.4.\n",https://github.com/bitcoin/bitcoin/pull/4025#issuecomment-39937218,39937218,
theuni,2014-04-09T18:19:08Z,"NACK. I was originally for this, but after a discussion on IRC last night, I've revisited it after learning that gcc 4.8 hasn't landed in stable debian or gentoo yet.\n\nC++11 is essentially a new language. Only ""allowing"" part of it would be a nightmare for maintenance.\n\nC++11 cannot be used in any reasonable sense until gcc 4.8/clang 3.4. If the decision is to move towards c++11 support, this ",https://github.com/bitcoin/bitcoin/pull/4025#issuecomment-39998397,39998397,
theuni,2014-04-09T18:28:38Z,"Er.. s/variadic macros/variadic templates/.\n\nIf it's not clear from the above, I'm a huge fan of c++11 and would very much support the change when distros are ready.\n",https://github.com/bitcoin/bitcoin/pull/4025#issuecomment-39999523,39999523,
laanwj,2014-04-09T18:29:30Z,So this _doesn't_ work as-is on gcc 4.6?\n,https://github.com/bitcoin/bitcoin/pull/4025#issuecomment-39999639,39999639,
theuni,2014-04-09T18:41:08Z,"@laanwj Whether this set of changes works or not is irrelevant. The significance here is the move to c++11.\n\nAs @luke-jr said last night, that'd be like moving from c to c++ for std::string. Everything else may continue to work, but you've just redefined the language that the program is written in, and must assume that people will try to use the features now at their disposal.\n",https://github.com/bitcoin/bitcoin/pull/4025#issuecomment-40000988,40000988,
laanwj,2014-04-09T18:55:27Z,"That could be avoided by documenting it well, and by making the pulltester test with the correct g++ version it can be made sure that nothing is merged that wouldn't work with the ""lowest"" g++ version.\n\nHasn't compiler support for c++11 always been a mixed beast? Are there even now compilers that implement every single feature?\n\nIMO even your example of switching from C to C++ for std::string ",https://github.com/bitcoin/bitcoin/pull/4025#issuecomment-40002584,40002584,
gavinandresen,2014-04-09T19:02:14Z,"I agree with @laanwj : pull-tester can quickly weed out any unsupported features. And I firmly believe in ""better is better"" -- if we wait for perfect, complete C++11 support everywhere we will wait forever.\n",https://github.com/bitcoin/bitcoin/pull/4025#issuecomment-40003338,40003338,
theuni,2014-04-09T19:02:25Z,"Tying all dev to the concept of a ""correct"" compiler is just not workable. I can't review the code above without compiling it.\n\nYes, it has been a mixed beast. At the compiler versions I listed, that confusion practically ends.\n\nOk, with the std::string example, someone comes along the next day and adds a std::vector, only to find that it doesn't work for some compilers. Switching over time ju",https://github.com/bitcoin/bitcoin/pull/4025#issuecomment-40003364,40003364,
theuni,2014-04-09T19:15:32Z,"There is no abstract ideal level. The language is a spec. Support is complete at gcc 4.8 and clang 3.4. Those are hard numbers.\n\nThere is no ""waiting forever"". If you want to use those tools on your dev machine, you can install them. The only issue is whether they're installed by default or not (a matter of convenience). If I had to pick an inconvenience for project management, I'd pick ""making ",https://github.com/bitcoin/bitcoin/pull/4025#issuecomment-40004791,40004791,
kdomanski,2014-04-09T19:17:09Z,"@theuni: This works perfectly with GCC-4.7 which is available on all stable distros, including the Ubuntu LTS which arrives this month. And another grand benefit here is that with a few more changes it's possible to drop all dependency on boost except for boost::filesystem.\n",https://github.com/bitcoin/bitcoin/pull/4025#issuecomment-40004971,40004971,
theuni,2014-04-09T19:40:37Z,"@kdomanski So you can replace most of boost, but it'll require a bump of pull-tester and release-toolchain to 4.7? Aren't you confirming my concern?\n\nMy arguments don't come from theory. I've been writing c++11 exclusively for my projects. gcc 4.6/4.7 just were not practically usable. Even for supported features, they're buggy as hell.\n\nI've made my opinion clear, and repeating my points isn't",https://github.com/bitcoin/bitcoin/pull/4025#issuecomment-40007477,40007477,
laanwj,2014-04-09T19:51:50Z,"As for replacing boost, wouldn't you still need boost::spirit (for json) and boost::asio (for networking) as well?\n",https://github.com/bitcoin/bitcoin/pull/4025#issuecomment-40008690,40008690,
kdomanski,2014-04-09T20:02:50Z,"@laanwj Correct, but still, replacing Boost is not the main objective here.\n",https://github.com/bitcoin/bitcoin/pull/4025#issuecomment-40009814,40009814,
sipa,2014-04-09T20:05:09Z,"I agree with @theuni that the larger advantage to C++11 is different things than what is being used here.\n\nI do not think that dropping Boost is viable, and if it isn't, there is no need to attempting it. Of course, if C++11 has drop-in replacements for what Boost has, moving to those more standard solutions is nice, but just an incremental thing.\n\nWhether it makes sense to just have the small",https://github.com/bitcoin/bitcoin/pull/4025#issuecomment-40010064,40010064,
laanwj,2014-04-09T20:13:46Z,"Seems that there is no consensus for this. Let's try again in a few years...\n\n@kdomanski you could have saved yourself a lot of work if you discussed this with us first, for example on the mailing list :/\n",https://github.com/bitcoin/bitcoin/pull/4025#issuecomment-40010921,40010921,
kdomanski,2014-04-09T20:35:52Z,"@sipa This PR wasn't meant to tackle the larger advantage, just open the pathway to it.\n",https://github.com/bitcoin/bitcoin/pull/4025#issuecomment-40013123,40013123,
kdomanski,2014-04-10T01:44:55Z,@theuni @laanwj I just tested - it works like a charm on GCC 4.6\n,https://github.com/bitcoin/bitcoin/pull/4025#issuecomment-40035450,40035450,
gmaxwell,2014-04-10T02:10:16Z,We should also keep in mind implementation maturity.  I'm not keen to be the 'first' to use any language feature which was just implemented in our compiler. I would like to see us advancing to a newer compiler soon for reasons unrelated to language featureset supportâ€” there have been non-trivial improvements in the reliability of the compilers in the last couple years due to some advances in testi,https://github.com/bitcoin/bitcoin/pull/4025#issuecomment-40036480,40036480,
laanwj,2014-04-10T06:15:16Z,"Upgrading to a new compiler at this point would imply changing the gitian build images to be even newer. This would bring a new glibc, libc++ and compiler.\nMind that this makes the compatibility gap - which we attempt to patch over in #4042 - even larger.\n",https://github.com/bitcoin/bitcoin/pull/4025#issuecomment-40046339,40046339,
kdomanski,2014-04-10T07:31:13Z,"If your aim is compatibility with very old systems, then this pull request is misguided.\n",https://github.com/bitcoin/bitcoin/pull/4025#issuecomment-40050536,40050536,
laanwj,2014-04-10T07:32:18Z,"The resulting executables from gitian should run on old systems, that's the only requirement (which is manageable if we build on 12.04 with gcc 4.6, but maybe not if we switch to 14.04 guests).\n",https://github.com/bitcoin/bitcoin/pull/4025#issuecomment-40050620,40050620,
BitcoinPullTester,2014-04-12T00:35:34Z,"Automatic sanity-testing: FAILED BUILD/TEST, see http://jenkins.bluematt.me/pull-tester/0a0a0362cf2ed53764f9d1a8b21a3268136099c8 for binaries and test log.\n\nThis could happen for one of several reasons:\n1. It chanages paths in makefile.linux-mingw or otherwise changes build scripts in a way that made them incompatible with the automated testing scripts (please tweak those patches in qa/pull-tes",https://github.com/bitcoin/bitcoin/pull/4025#issuecomment-40266936,40266936,
jgarzik,2014-05-02T13:21:42Z,"OK, closing this PR.  Consensus has matched a familiar pattern which I hope serves as a template to move forward.\n\n1) Bitcoin is not going to be a first mover on new language features.\n\n2) boost::int64_t deserves a quick and violent death.  All our platforms can handle stdint.h types such as int64_t or uint64_t.  That commit in this PR useful.\n\n3) Other commits, like std::pair use are good t",https://github.com/bitcoin/bitcoin/pull/4025#issuecomment-42031179,42031179,
laanwj,2014-05-02T13:27:40Z,"Right, some of the commits could go in already without needing any specific C++11 support (like the std::pair one and boost::int64_t). May be worth splitting them off.\n",https://github.com/bitcoin/bitcoin/pull/4025#issuecomment-42031759,42031759,
kdomanski,2014-05-04T21:46:53Z,"Thanks for the feedback.\nThe whole deal with std::pair is that it needs a macro wrapper to go through BOOST_FOREACH, which only became discardable with C++11. As for the int64, I will prepare a separate merge request.\n",https://github.com/bitcoin/bitcoin/pull/4025#issuecomment-42146286,42146286,
laanwj,2014-04-09T08:37:33Z,"BTW: if you're going to replace all lines with PRIsz\* in it, you can remove those macros entirely and replace then by %*. Size specifiers are not needed with the tinyformat-based formatting that we use now (see how the macros are defined in util.h).\n",https://github.com/bitcoin/bitcoin/pull/4025#discussion_r11427057,11427057,src/init.cpp
