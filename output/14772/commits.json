[
  {
    "sha": "fa71eb5196fc157213d7b6364071530ab19df724",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYTcxZWI1MTk2ZmMxNTcyMTNkN2I2MzY0MDcxNTMwYWIxOWRmNzI0",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2018-02-02T23:11:01Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2018-11-21T01:29:16Z"
      },
      "message": "Convert comments to thread safety annotations",
      "tree": {
        "sha": "f2a5f14ec10c389633b66beed5808ab10fdf6da0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f2a5f14ec10c389633b66beed5808ab10fdf6da0"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa71eb5196fc157213d7b6364071530ab19df724",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGcBAABCgAGBQJb9LTsAAoJEM4rdWl+aaVIH60L+wW4dZCxRUaZ9UDo3TJ0SXOz\n63Plun+Ajlv5Yw+qhAKtFaEqo8uklXCVEee5b8MIWUKLyPdj5YdQ8WsSuSgD1nu7\nSowTMw5eXdtvtg5pdKGKg+HvKmvGeO1FuaQw1YcBx2OPKyW7KBbpmO5S8mLrM4iT\nkkrFhhC0qaHdL+gZP7z1zXYSKyIld29VaMQ40GEo44iE56dGCapD6EMcceBUAGDq\n3EJEFgj4jsJsFOp/2PUuZea76jYg5yfCHKqJnsl+ILlOgqEDBwwaWbx6QuqUVJJr\n+Sf4G3J7Sq/l7iUFYatt+lkmzRSy1/ucCOhSgxfk+UuUrm2YQjmeNAtDLDfCO6P/\nukNNPtJhWaEVX5JW1BJbUdZcQam1r/a1dHUSfAVSsTUOILYRwH9+wJmHlgHtn0Nv\n22yYBZOXtFiAYN1lTFdnqnZIGOOTIe1lC3pyq8drIafRqf+FpPgEjj7yRiE6mEiz\niDxhbsTx5drcIYbcDc03Cy4ojYCT3/28Ly1j7aB3tA==\n=GssH\n-----END PGP SIGNATURE-----",
        "payload": "tree f2a5f14ec10c389633b66beed5808ab10fdf6da0\nparent 6d58a5c3b05585b01c960776e00856637ff1794d\nauthor MarcoFalke <falke.marco@gmail.com> 1517613061 -0500\ncommitter MarcoFalke <falke.marco@gmail.com> 1542763756 -0500\n\nConvert comments to thread safety annotations\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa71eb5196fc157213d7b6364071530ab19df724",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fa71eb5196fc157213d7b6364071530ab19df724",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa71eb5196fc157213d7b6364071530ab19df724/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "6d58a5c3b05585b01c960776e00856637ff1794d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6d58a5c3b05585b01c960776e00856637ff1794d",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/6d58a5c3b05585b01c960776e00856637ff1794d"
      }
    ],
    "stats": {
      "total": 18,
      "additions": 8,
      "deletions": 10
    },
    "files": [
      {
        "sha": "e065ac0f2838e5448cf0bcd62f451e985f3b7070",
        "filename": "src/net.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa71eb5196fc157213d7b6364071530ab19df724/src/net.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa71eb5196fc157213d7b6364071530ab19df724/src/net.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/net.cpp?ref=fa71eb5196fc157213d7b6364071530ab19df724",
        "patch": "@@ -1011,6 +1011,7 @@ bool CConnman::AttemptToEvictConnection()\n                 continue;\n             if (node->fDisconnect)\n                 continue;\n+            LOCK(node->cs_filter);\n             NodeEvictionCandidate candidate = {node->GetId(), node->nTimeConnected, node->nMinPingUsecTime,\n                                                node->nLastBlockTime, node->nLastTXTime,\n                                                HasAllDesirableServiceFlags(node->nServices),"
      },
      {
        "sha": "32cc02f5a9c27de58ff1202207810bd9a4106141",
        "filename": "src/net.h",
        "status": "modified",
        "additions": 5,
        "deletions": 6,
        "changes": 11,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa71eb5196fc157213d7b6364071530ab19df724/src/net.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa71eb5196fc157213d7b6364071530ab19df724/src/net.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/net.h?ref=fa71eb5196fc157213d7b6364071530ab19df724",
        "patch": "@@ -677,10 +677,10 @@ class CNode\n     // a) it allows us to not relay tx invs before receiving the peer's version message\n     // b) the peer may tell us in its version message that we should not relay tx invs\n     //    unless it loads a bloom filter.\n-    bool fRelayTxes; //protected by cs_filter\n+    bool fRelayTxes GUARDED_BY(cs_filter);\n     bool fSentAddr;\n     CSemaphoreGrant grantOutbound;\n-    CCriticalSection cs_filter;\n+    mutable CCriticalSection cs_filter;\n     std::unique_ptr<CBloomFilter> pfilter;\n     std::atomic<int> nRefCount;\n \n@@ -718,10 +718,9 @@ class CNode\n     std::multimap<int64_t, CInv> mapAskFor;\n     int64_t nNextInvSend;\n     // Used for headers announcements - unfiltered blocks to relay\n-    // Also protected by cs_inventory\n-    std::vector<uint256> vBlockHashesToAnnounce;\n-    // Used for BIP35 mempool sending, also protected by cs_inventory\n-    bool fSendMempool;\n+    std::vector<uint256> vBlockHashesToAnnounce GUARDED_BY(cs_inventory);\n+    // Used for BIP35 mempool sending\n+    bool fSendMempool GUARDED_BY(cs_inventory);\n \n     // Last time a \"MEMPOOL\" request was serviced.\n     std::atomic<int64_t> timeLastMempoolReq;"
      },
      {
        "sha": "6333dd98d2e4e58b721bad81a929303b3995eb5c",
        "filename": "src/validation.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 4,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa71eb5196fc157213d7b6364071530ab19df724/src/validation.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa71eb5196fc157213d7b6364071530ab19df724/src/validation.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/validation.cpp?ref=fa71eb5196fc157213d7b6364071530ab19df724",
        "patch": "@@ -1680,8 +1680,7 @@ void ThreadScriptCheck() {\n     scriptcheckqueue.Thread();\n }\n \n-// Protected by cs_main\n-VersionBitsCache versionbitscache;\n+VersionBitsCache versionbitscache GUARDED_BY(cs_main);\n \n int32_t ComputeBlockVersion(const CBlockIndex* pindexPrev, const Consensus::Params& params)\n {\n@@ -1722,8 +1721,7 @@ class WarningBitsConditionChecker : public AbstractThresholdConditionChecker\n     }\n };\n \n-// Protected by cs_main\n-static ThresholdConditionCache warningcache[VERSIONBITS_NUM_BITS];\n+static ThresholdConditionCache warningcache[VERSIONBITS_NUM_BITS] GUARDED_BY(cs_main);\n \n // 0.13.0 was shipped with a segwit deployment defined for testnet, but not for\n // mainnet. We no longer need to support disabling the segwit deployment"
      }
    ]
  }
]