practicalswift,2018-11-29T12:53:31Z,"Concept ACK\n\nThanks for working on this @hebasto \n\nYou might want to review #14829 which enables TSan testing in Travis for the functional tests (which are the relevants tests from a data race/threading perspective :-)).",https://github.com/bitcoin/bitcoin/pull/14841#issuecomment-442823023,442823023,
DrahtBot,2018-11-29T13:00:23Z,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#14829](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/14829.html) (travis: Enable functional tests in the Thre",https://github.com/bitcoin/bitcoin/pull/14841#issuecomment-442825071,442825071,
promag,2018-11-29T17:41:00Z,"#9765 moved the lock after `CheckBlock` call for unknown reason cc @sdaftuar.\n\nVerified that all `CheckBlock` calls hold `cs_main`, except `PartiallyDownloadedBlock::FillBlock`. It would be cool to add annotation but because of that exception I don't think it's possible (?)\n\nutACK 9cab291.",https://github.com/bitcoin/bitcoin/pull/14841#issuecomment-442925961,442925961,
hebasto,2018-11-29T21:08:30Z,"@MarcoFalke \nThank you for your review. Your comment has been addressed.",https://github.com/bitcoin/bitcoin/pull/14841#issuecomment-442993714,442993714,
hebasto,2018-11-30T10:41:56Z,"@kallewoof \nThank you for your review. Your comment has been addressed.",https://github.com/bitcoin/bitcoin/pull/14841#issuecomment-443164119,443164119,
gmaxwell,2018-11-30T10:43:19Z,"utACK.  I talked to @sdaftuar and it sounded like this change is fine, it was an incidental side effect of an earlier change.",https://github.com/bitcoin/bitcoin/pull/14841#issuecomment-443164494,443164494,
hebasto,2018-11-30T11:05:35Z,~How can the comment line modifying cause `mempool_persist.py` test failure in [Travis](https://travis-ci.org/bitcoin/bitcoin/jobs/461717547)?~,https://github.com/bitcoin/bitcoin/pull/14841#issuecomment-443170491,443170491,
MarcoFalke,2018-11-30T15:28:49Z,utACK c5ed6e73d3e18f26558c49fa3ecb1b7b0bb40d12,https://github.com/bitcoin/bitcoin/pull/14841#issuecomment-443238874,443238874,
gmaxwell,2018-11-30T18:50:57Z,Has someone validated that all other calls to checkblock are also under a lock?,https://github.com/bitcoin/bitcoin/pull/14841#issuecomment-443301858,443301858,
promag,2018-11-30T19:04:00Z,@gmaxwell yes ☝️ https://github.com/bitcoin/bitcoin/pull/14841#issuecomment-442925961,https://github.com/bitcoin/bitcoin/pull/14841#issuecomment-443305874,443305874,
MarcoFalke,2018-11-30T19:10:18Z,"Yes, but adding the annotation would poison the blockencodings header. Not sure if that is worth it.",https://github.com/bitcoin/bitcoin/pull/14841#issuecomment-443307688,443307688,
gmaxwell,2018-11-30T23:51:43Z,Great! (still utACK),https://github.com/bitcoin/bitcoin/pull/14841#issuecomment-443374646,443374646,
meshcollider,2018-12-01T05:44:09Z,utACK https://github.com/bitcoin/bitcoin/commit/c5ed6e73d3e18f26558c49fa3ecb1b7b0bb40d12,https://github.com/bitcoin/bitcoin/pull/14841#issuecomment-443401983,443401983,
laanwj,2018-12-01T09:27:32Z,utACK c5ed6e73d3e18f26558c49fa3ecb1b7b0bb40d12,https://github.com/bitcoin/bitcoin/pull/14841#issuecomment-443412979,443412979,
MarcoFalke,2018-11-29T19:38:12Z,Could add a comment to explain why this lock is here?,https://github.com/bitcoin/bitcoin/pull/14841#discussion_r237630420,237630420,src/validation.cpp
kallewoof,2018-11-30T08:57:26Z,Wording: due to -> because,https://github.com/bitcoin/bitcoin/pull/14841#discussion_r237785610,237785610,src/validation.cpp
