[
  {
    "sha": "3e4f069d23cd2ea5de8fa3c4b1a761ab097ad56f",
    "node_id": "C_kwDOABII59oAKDNlNGYwNjlkMjNjZDJlYTVkZThmYTNjNGIxYTc2MWFiMDk3YWQ1NmY",
    "commit": {
      "author": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2021-10-30T19:19:22Z"
      },
      "committer": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2021-11-03T08:35:47Z"
      },
      "message": "wallet, refactor: Make GetOldestKeyPoolTime return type std::optional\n\nThis change gets rid of the magic number 0 in the\nDescriptorScriptPubKeyMan::GetOldestKeyPoolTime() function.\n\nNo behavior change.",
      "tree": {
        "sha": "adb1abecbd5e4f80994e48d8f44e10f767d0e8c7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/adb1abecbd5e4f80994e48d8f44e10f767d0e8c7"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3e4f069d23cd2ea5de8fa3c4b1a761ab097ad56f",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE0dvyxLlvLev0wWZUQQEIES5+qB8FAmGCSeMACgkQQQEIES5+\nqB9uxBAAvQZdmAbdV2iW13Uue0TrUFzKneCGuY9Hhlj8Odzz/EIf/Rc3sPREdOvQ\nuQATyteOM/J8ojlyp41dv/4+dz4/2WorunJarFEE4FO4Af1wl7kmuOrxYe9rtRAw\n0vpBtJMBNkmyqKD3rfxKhZQ0kh+YkOpQ+eopIc/NAoj4mjd9Dlmm1XL5uIJj0DxC\nr+HIEYis20E3T01YIjfC+D4t3H0A3q2Ge2WDqkJKl9iszpl7dnCt+acCpRXGljcC\nXRy9AKu37dfCDiPW2c7v9e/5aIThi3O4mKgs6qnQIjoVfDSdIJLE0KLHwLoOwHwJ\nKO/kI0zoW3JxZUaBnQvZ7MmSzbeiiXyko0sO7hMMplPk3emHV5GqtObtjTXI45C2\nD/SkkbxBcM1ZN6KCJJjiXJUOwbqiV1SJNdh+w7LOBTr7SrXWL0B+seokTHe+AwTy\ng8DREu9vsOMkqHrPMLo2Cx3Ka9PkOSSHwc2yl0rN6FaWleM7Q0FB0RoHf8CO9mfW\nzfISUCiZ5trPggLVYrqDeSJrTTQhHSMk4d6Nk6hKD94KZcqgm886KHFnRBI3zRuF\nv83j7vjZDvHmUuypm5JdTZoQhJWb3U3s+M37etIM4KhBKOVrPBp1IcqqtCQcio1c\nPLdNMgD10SY+jVNieRvLxXETH9Th0MHC4oje2d1kAd3esUJcn4U=\n=1GyD\n-----END PGP SIGNATURE-----",
        "payload": "tree adb1abecbd5e4f80994e48d8f44e10f767d0e8c7\nparent 7efc628539573af4b4a76d93b853cc46e9e52eae\nauthor Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1635621562 +0300\ncommitter Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1635928547 +0200\n\nwallet, refactor: Make GetOldestKeyPoolTime return type std::optional\n\nThis change gets rid of the magic number 0 in the\nDescriptorScriptPubKeyMan::GetOldestKeyPoolTime() function.\n\nNo behavior change.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3e4f069d23cd2ea5de8fa3c4b1a761ab097ad56f",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/3e4f069d23cd2ea5de8fa3c4b1a761ab097ad56f",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3e4f069d23cd2ea5de8fa3c4b1a761ab097ad56f/comments",
    "author": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "7efc628539573af4b4a76d93b853cc46e9e52eae",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7efc628539573af4b4a76d93b853cc46e9e52eae",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/7efc628539573af4b4a76d93b853cc46e9e52eae"
      }
    ],
    "stats": {
      "total": 30,
      "additions": 15,
      "deletions": 15
    },
    "files": [
      {
        "sha": "5c3231c5b6e9ef38ef721bfdce2b09432152e209",
        "filename": "src/wallet/rpcwallet.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/3e4f069d23cd2ea5de8fa3c4b1a761ab097ad56f/src/wallet/rpcwallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/3e4f069d23cd2ea5de8fa3c4b1a761ab097ad56f/src/wallet/rpcwallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/rpcwallet.cpp?ref=3e4f069d23cd2ea5de8fa3c4b1a761ab097ad56f",
        "patch": "@@ -2513,16 +2513,16 @@ static RPCHelpMan getwalletinfo()\n \n     size_t kpExternalSize = pwallet->KeypoolCountExternalKeys();\n     const auto bal = GetBalance(*pwallet);\n-    int64_t kp_oldest = pwallet->GetOldestKeyPoolTime();\n     obj.pushKV(\"walletname\", pwallet->GetName());\n     obj.pushKV(\"walletversion\", pwallet->GetVersion());\n     obj.pushKV(\"format\", pwallet->GetDatabase().Format());\n     obj.pushKV(\"balance\", ValueFromAmount(bal.m_mine_trusted));\n     obj.pushKV(\"unconfirmed_balance\", ValueFromAmount(bal.m_mine_untrusted_pending));\n     obj.pushKV(\"immature_balance\", ValueFromAmount(bal.m_mine_immature));\n     obj.pushKV(\"txcount\",       (int)pwallet->mapWallet.size());\n-    if (kp_oldest > 0) {\n-        obj.pushKV(\"keypoololdest\", kp_oldest);\n+    const auto kp_oldest = pwallet->GetOldestKeyPoolTime();\n+    if (kp_oldest.has_value()) {\n+        obj.pushKV(\"keypoololdest\", kp_oldest.value());\n     }\n     obj.pushKV(\"keypoolsize\", (int64_t)kpExternalSize);\n "
      },
      {
        "sha": "f8ba6da20ae8ad75304984bc05b493905c9769f3",
        "filename": "src/wallet/scriptpubkeyman.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 4,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/3e4f069d23cd2ea5de8fa3c4b1a761ab097ad56f/src/wallet/scriptpubkeyman.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/3e4f069d23cd2ea5de8fa3c4b1a761ab097ad56f/src/wallet/scriptpubkeyman.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/scriptpubkeyman.cpp?ref=3e4f069d23cd2ea5de8fa3c4b1a761ab097ad56f",
        "patch": "@@ -528,7 +528,7 @@ static int64_t GetOldestKeyTimeInPool(const std::set<int64_t>& setKeyPool, Walle\n     return keypool.nTime;\n }\n \n-int64_t LegacyScriptPubKeyMan::GetOldestKeyPoolTime() const\n+std::optional<int64_t> LegacyScriptPubKeyMan::GetOldestKeyPoolTime() const\n {\n     LOCK(cs_KeyStore);\n \n@@ -1970,11 +1970,10 @@ bool DescriptorScriptPubKeyMan::HavePrivateKeys() const\n     return m_map_keys.size() > 0 || m_map_crypted_keys.size() > 0;\n }\n \n-int64_t DescriptorScriptPubKeyMan::GetOldestKeyPoolTime() const\n+std::optional<int64_t> DescriptorScriptPubKeyMan::GetOldestKeyPoolTime() const\n {\n     // This is only used for getwalletinfo output and isn't relevant to descriptor wallets.\n-    // The magic number 0 indicates that it shouldn't be displayed so that's what we return.\n-    return 0;\n+    return std::nullopt;\n }\n \n "
      },
      {
        "sha": "2d447f1d6743f4fde1e743cd559ce0a74499a2e1",
        "filename": "src/wallet/scriptpubkeyman.h",
        "status": "modified",
        "additions": 4,
        "deletions": 3,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/3e4f069d23cd2ea5de8fa3c4b1a761ab097ad56f/src/wallet/scriptpubkeyman.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/3e4f069d23cd2ea5de8fa3c4b1a761ab097ad56f/src/wallet/scriptpubkeyman.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/scriptpubkeyman.h?ref=3e4f069d23cd2ea5de8fa3c4b1a761ab097ad56f",
        "patch": "@@ -19,6 +19,7 @@\n \n #include <boost/signals2/signal.hpp>\n \n+#include <optional>\n #include <unordered_map>\n \n enum class OutputType;\n@@ -203,7 +204,7 @@ class ScriptPubKeyMan\n     //! The action to do when the DB needs rewrite\n     virtual void RewriteDB() {}\n \n-    virtual int64_t GetOldestKeyPoolTime() const { return GetTime(); }\n+    virtual std::optional<int64_t> GetOldestKeyPoolTime() const { return GetTime(); }\n \n     virtual unsigned int GetKeyPoolSize() const { return 0; }\n \n@@ -371,7 +372,7 @@ class LegacyScriptPubKeyMan : public ScriptPubKeyMan, public FillableSigningProv\n \n     void RewriteDB() override;\n \n-    int64_t GetOldestKeyPoolTime() const override;\n+    std::optional<int64_t> GetOldestKeyPoolTime() const override;\n     size_t KeypoolCountExternalKeys() const;\n     unsigned int GetKeyPoolSize() const override;\n \n@@ -577,7 +578,7 @@ class DescriptorScriptPubKeyMan : public ScriptPubKeyMan\n \n     bool HavePrivateKeys() const override;\n \n-    int64_t GetOldestKeyPoolTime() const override;\n+    std::optional<int64_t> GetOldestKeyPoolTime() const override;\n     unsigned int GetKeyPoolSize() const override;\n \n     int64_t GetTimeFirstKey() const override;"
      },
      {
        "sha": "904154c91da6fc24d5b569c198aea46be6657873",
        "filename": "src/wallet/wallet.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 4,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/3e4f069d23cd2ea5de8fa3c4b1a761ab097ad56f/src/wallet/wallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/3e4f069d23cd2ea5de8fa3c4b1a761ab097ad56f/src/wallet/wallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.cpp?ref=3e4f069d23cd2ea5de8fa3c4b1a761ab097ad56f",
        "patch": "@@ -2169,14 +2169,14 @@ bool CWallet::GetNewChangeDestination(const OutputType type, CTxDestination& des\n     return true;\n }\n \n-int64_t CWallet::GetOldestKeyPoolTime() const\n+std::optional<int64_t> CWallet::GetOldestKeyPoolTime() const\n {\n     LOCK(cs_wallet);\n-    int64_t oldestKey = std::numeric_limits<int64_t>::max();\n+    std::optional<int64_t> oldest_key{std::numeric_limits<int64_t>::max()};\n     for (const auto& spk_man_pair : m_spk_managers) {\n-        oldestKey = std::min(oldestKey, spk_man_pair.second->GetOldestKeyPoolTime());\n+        oldest_key = std::min(oldest_key, spk_man_pair.second->GetOldestKeyPoolTime());\n     }\n-    return oldestKey;\n+    return oldest_key;\n }\n \n void CWallet::MarkDestinationsDirty(const std::set<CTxDestination>& destinations) {"
      },
      {
        "sha": "96fb84a2cf38bde8c69a0825dee6572a9d7ff2b7",
        "filename": "src/wallet/wallet.h",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/3e4f069d23cd2ea5de8fa3c4b1a761ab097ad56f/src/wallet/wallet.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/3e4f069d23cd2ea5de8fa3c4b1a761ab097ad56f/src/wallet/wallet.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.h?ref=3e4f069d23cd2ea5de8fa3c4b1a761ab097ad56f",
        "patch": "@@ -628,7 +628,7 @@ class CWallet final : public WalletStorage, public interfaces::Chain::Notificati\n     size_t KeypoolCountExternalKeys() const EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n     bool TopUpKeyPool(unsigned int kpSize = 0);\n \n-    int64_t GetOldestKeyPoolTime() const;\n+    std::optional<int64_t> GetOldestKeyPoolTime() const;\n \n     std::set<CTxDestination> GetLabelAddresses(const std::string& label) const EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n "
      }
    ]
  },
  {
    "sha": "ee03c782ba61993d9e95fa499546cd14cee35445",
    "node_id": "C_kwDOABII59oAKGVlMDNjNzgyYmE2MTk5M2Q5ZTk1ZmE0OTk1NDZjZDE0Y2VlMzU0NDU",
    "commit": {
      "author": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2021-10-30T19:19:22Z"
      },
      "committer": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2021-11-03T08:35:47Z"
      },
      "message": "wallet: Make GetOldestKeyPoolTime return nullopt for blank wallets\n\nThis change suppress the \"keypoololdest\" field in the getwalletinfo RPC\nresponse for blank descriptor wallets.",
      "tree": {
        "sha": "c50e3899df1f2cbab79d6bbebda9ec38dc3e73aa",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c50e3899df1f2cbab79d6bbebda9ec38dc3e73aa"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ee03c782ba61993d9e95fa499546cd14cee35445",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE0dvyxLlvLev0wWZUQQEIES5+qB8FAmGCSeMACgkQQQEIES5+\nqB/hsQ/7BfCUCXai32YIYPG4vKqlBMUBQNwVdw+SzdlPeP6s9Yvo2Kt0yoXU+dJ3\nG2Uk3otwFVDZcofBa8kynSqxNABUj2YiySuXIf87xOHRT5EIFSC+VYJYQM9THcdo\nz3IUlz/qylgZYGBQ1VMq54j++SXqz2eukldXXDamdkcuuC5tv1ybXF2Hqnp7/cgl\nMedL4d51q4Pui4dW03euG4uPdvOZOJu4Mi9s1/xeaOzhZjDkBq6hXswImKJUUro/\nXisAk3TrQ/KG67G3LkkaLk9DdsB4HvBs5m5gtHkfVpvw+ny3zKaSv8nI+zpZLQZy\nFpCZe5sQ8oZC6uyTm3JiTcxCyAGseUQJXapjlZFbS/SgN7mWU6rJb8yNYRfJv68J\nOOFguCgwDZo6FnwHZBt6NYPOydufvbHEAjbxqnT7Eufm8/cH0kEoA/4T/3tU/eOa\ntepANAKp+PL/ASnhpk2lMa6B3tDbzIPgjJFytN6+1VlkDbbu8YuNZBz92JMI92u8\nEFUqOJwlPbE2WLl5R/GXO7IgJBcKtI04EYAAKPp0Z19xKiDJEJV5nqE9zO5QvCrZ\nkvoCy+mFHQhXjDi4t9BthqSDQ8EucDDMuwP7eIPmlApbXFqHJFR2RmGZXKRk4xtr\nwasDEmLprEn6fYuMT9tcKKT6ZjIc7lxVVS/l/yO+tXX7zF3W4yg=\n=n4lI\n-----END PGP SIGNATURE-----",
        "payload": "tree c50e3899df1f2cbab79d6bbebda9ec38dc3e73aa\nparent 3e4f069d23cd2ea5de8fa3c4b1a761ab097ad56f\nauthor Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1635621562 +0300\ncommitter Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1635928547 +0200\n\nwallet: Make GetOldestKeyPoolTime return nullopt for blank wallets\n\nThis change suppress the \"keypoololdest\" field in the getwalletinfo RPC\nresponse for blank descriptor wallets.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ee03c782ba61993d9e95fa499546cd14cee35445",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/ee03c782ba61993d9e95fa499546cd14cee35445",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ee03c782ba61993d9e95fa499546cd14cee35445/comments",
    "author": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "3e4f069d23cd2ea5de8fa3c4b1a761ab097ad56f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3e4f069d23cd2ea5de8fa3c4b1a761ab097ad56f",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/3e4f069d23cd2ea5de8fa3c4b1a761ab097ad56f"
      }
    ],
    "stats": {
      "total": 4,
      "additions": 4,
      "deletions": 0
    },
    "files": [
      {
        "sha": "e535a080f28a90e2607771f123f7d03dce2ad8ec",
        "filename": "src/wallet/wallet.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/ee03c782ba61993d9e95fa499546cd14cee35445/src/wallet/wallet.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/ee03c782ba61993d9e95fa499546cd14cee35445/src/wallet/wallet.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/wallet/wallet.cpp?ref=ee03c782ba61993d9e95fa499546cd14cee35445",
        "patch": "@@ -2172,6 +2172,10 @@ bool CWallet::GetNewChangeDestination(const OutputType type, CTxDestination& des\n std::optional<int64_t> CWallet::GetOldestKeyPoolTime() const\n {\n     LOCK(cs_wallet);\n+    if (m_spk_managers.empty()) {\n+        return std::nullopt;\n+    }\n+\n     std::optional<int64_t> oldest_key{std::numeric_limits<int64_t>::max()};\n     for (const auto& spk_man_pair : m_spk_managers) {\n         oldest_key = std::min(oldest_key, spk_man_pair.second->GetOldestKeyPoolTime());"
      }
    ]
  }
]