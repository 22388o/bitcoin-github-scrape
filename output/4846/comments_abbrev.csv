BitcoinPullTester,2014-09-05T02:03:19Z,"Automatic sanity-testing: FAILED BUILD/TEST, see http://jenkins.bluematt.me/pull-tester/p4846_582d7e8294926136389bf2cb65fade180f85ba0e/ for binaries and test log.\n\nThis could happen for one of several reasons:\n1. It chanages paths in makefile.linux-mingw or otherwise changes build scripts in a way that made them incompatible with the automated testing scripts (please tweak those patches in qa/p",https://github.com/bitcoin/bitcoin/pull/4846#issuecomment-54573330,54573330,
gmaxwell,2014-09-05T16:36:51Z,"We don't always have a pindexBestKnownBlock— pretty much never immediately after startup, only when we've seen an inv for a block in common.\n\nIIRC the substantial grace span is require to prevent gratuitous convergence delays/failures when there is a better chain with fewer blocks and was an intentional element of the design. The recognition heuristic sounds fine but doesn't cover the case where",https://github.com/bitcoin/bitcoin/pull/4846#issuecomment-54649541,54649541,
rebroad,2014-09-15T11:29:56Z,"@gmaxwell in the case where we haven't seen a block inv from them, it resorts to using nStartingHeight (provided in the version message).\n",https://github.com/bitcoin/bitcoin/pull/4846#issuecomment-55578378,55578378,
laanwj,2014-09-22T10:36:28Z,@sipa can you please take a look at this change?\n,https://github.com/bitcoin/bitcoin/pull/4846#issuecomment-56355813,56355813,
sipa,2014-09-27T01:03:28Z,"I'm very wary about touching this code before headersfirst is rolled out; not because the change itself is bad, but because it may interact in unexpected ways with the current broken fetching logic on the other side.\n\nSpecifically, if we made this code perfect and only announced new blocks to peers that were already caught up, we risk having peers that are stuck (for the various existing reasons",https://github.com/bitcoin/bitcoin/pull/4846#issuecomment-57037412,57037412,
rebroad,2014-09-28T15:18:38Z,I agree with @sipa 's comment above. headersfirst8 is a prerequisite for this pull. Should I close it until headersfirst8 is merged?\n,https://github.com/bitcoin/bitcoin/pull/4846#issuecomment-57088592,57088592,
laanwj,2014-10-07T08:52:56Z,"Yes, let's close this until headers-first is merged. That has priority now.\n",https://github.com/bitcoin/bitcoin/pull/4846#issuecomment-58154924,58154924,
sipa,2014-10-07T18:36:55Z,Not just until it is merged. Until it is released and deployed. The reason for keeping the code as-is is because it may affect old peers.\n,https://github.com/bitcoin/bitcoin/pull/4846#issuecomment-58236392,58236392,
rebroad,2014-09-05T02:02:02Z,"I contentiously removed the ""- 2000"", which I suspect will get objections/NAKs. In fact, there's probably a better way to determine whether to broadcast an inv than using the height number - i.e. broadcast if their height is lower OR if their latest block is not in our best chain. (Although actually, this is probably good to go, as we could broadcast our latest block inv the moment we realise thei",https://github.com/bitcoin/bitcoin/pull/4846#discussion_r17153958,17153958,src/main.cpp
