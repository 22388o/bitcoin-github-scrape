ryanofsky,2020-04-07 14:52:27,"I'm not sure this change is worth it and doesn't introduce more strange behaviors. If goal is to retroactively fix detection of change addresses in v0.19 wallets, this seems like it would simpler and be more convenient to use as a standalone wallet tool function.\n\nAs I understand things, #13756 in v0.19 introduced a bug where change addresses might be marked in a way where they are treated as ",https://github.com/bitcoin/bitcoin/pull/18550#issuecomment-610433547,610433547,
ryanofsky,2020-04-07 15:11:27,"re comment in IRC about tests: [`feature_backwards_compatibility.py`](https://github.com/bitcoin/bitcoin/blob/master/test/functional/feature_backwards_compatibility.py) could be useful here. As an example, https://github.com/Sjors/bitcoin/commit/bacf55990905c0257c7bc45bbbd2b028716efc7f was a test added for the backwards compatibility bug #18075",https://github.com/bitcoin/bitcoin/pull/18550#issuecomment-610444557,610444557,
luke-jr,2020-04-07 17:36:43,"Without this, we can't start adding more destdata to change without breaking backward compatibility. If we go that route, we should make a wallet version bump so 0.19 doesn't try to load the wallet at all. But that also means new features based on it won't be available until users do wallet upgrades explicitly... I'd rather avoid that.\n\nMy eventual intent is to (for 0.21) add a new destdata in",https://github.com/bitcoin/bitcoin/pull/18550#issuecomment-610523497,610523497,
sipa,2020-04-07 18:45:10,@achow101 Does the above interfere in any way with descriptor wallets?,https://github.com/bitcoin/bitcoin/pull/18550#issuecomment-610556855,610556855,
achow101,2020-04-07 18:49:40,"> @achow101 Does the above interfere in any way with descriptor wallets?\n\nIt shouldn't. Descriptor wallets currently does not touch any address book stuff or change how change is detected.",https://github.com/bitcoin/bitcoin/pull/18550#issuecomment-610559137,610559137,
ryanofsky,2020-04-07 19:15:25,"So the behavior change I described above is NOT actually the intent of the PR? Just kind of a side effect? I'm more confused now about what the benefit of this change is.\n\n> Without this, we can't start adding more destdata to change without breaking backward compatibility\n\nWith or without this PR, adding DESTDATA rows in the database for change addresses will break backwards compatibility",https://github.com/bitcoin/bitcoin/pull/18550#issuecomment-610571113,610571113,
luke-jr,2020-04-07 19:47:31,">With or without this PR, adding DESTDATA rows in the database for change addresses will break backwards compatibility and cause them to be treated as non-change using previous releases, and this PR can't change that.\n\nIt does change that. By storing destdata in ""changedata"" keys, old versions ignore them entirely, thus retain the change-ness of the destination.\n",https://github.com/bitcoin/bitcoin/pull/18550#issuecomment-610585394,610585394,
ryanofsky,2020-04-09 07:40:36,"> > With or without this PR, adding DESTDATA rows in the database for change addresses will break backwards compatibility and cause them to be treated as non-change using previous releases, and this PR can't change that.\n> \n> It does change that. By storing destdata in ""changedata"" keys, old versions ignore them entirely, thus retain the change-ness of the destination.\n\nIt seems like this ",https://github.com/bitcoin/bitcoin/pull/18550#issuecomment-611381217,611381217,
luke-jr,2020-04-09 15:05:16,"I don't understand what you are missing either... :/\n\nI suppose we could unconditionally change the DESTDATA key entirely, but I don't see why that would be preferred.",https://github.com/bitcoin/bitcoin/pull/18550#issuecomment-611578585,611578585,
ryanofsky,2020-04-12 20:39:25,"re: http://www.erisian.com.au/bitcoin-core-dev/log-2020-04-10.html#l-542\n\n> there isn't really much context.. ryanofsky got confused by the PRs :/\n\nAppreciate the empathy, but I wasn't confused about what this PR and #18572 do. I was confused by what these PRs are _trying_ to do. But I get it now. Here is the story:\n\n#13756 started recording used destination information as rows with `(",https://github.com/bitcoin/bitcoin/pull/18550#issuecomment-612672886,612672886,
DrahtBot,2020-04-12 22:45:59,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #18618 (gui: Drop RecentRequestsTableModel dependency to WalletModel by promag)\n* #18608 (refactor: Remove CAddressBookDa",https://github.com/bitcoin/bitcoin/pull/18550#issuecomment-612687603,612687603,
meshcollider,2020-04-16 10:31:22,"I agree with Russ (thank you, by the way, for the excellent write-up of the issue). I'll close this now, but we can discuss it in the meeting if you have a strong argument that we are missing Luke.",https://github.com/bitcoin/bitcoin/pull/18550#issuecomment-614563624,614563624,
