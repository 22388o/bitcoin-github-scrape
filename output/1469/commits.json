[
  {
    "sha": "47894585aeaa4f5475c50bc4415ed6ced868fbf7",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo0Nzg5NDU4NWFlYWE0ZjU0NzVjNTBiYzQ0MTVlZDZjZWQ4NjhmYmY3",
    "commit": {
      "author": {
        "name": "Philip Kaufmann",
        "email": "phil.kaufmann@t-online.de",
        "date": "2012-06-15T07:48:26Z"
      },
      "committer": {
        "name": "Philip Kaufmann",
        "email": "phil.kaufmann@t-online.de",
        "date": "2012-07-06T09:31:27Z"
      },
      "message": "GUI: merge sign/verify message into a single window with tabbed UI\n\n- add UI-feedback via QValidatedLineEdit\n- copy button for generated signature was moved to the signature output field\n- add an addressbook button to verify message tab\n- input fields are now evenly ordered for sign and verify tabs\n- update FIRST_CLASS_MESSAGING support to ensure a good UX\n- add a button and context menu entry in addressbook for verify message (to be consistent with sign message)\n- focus is now only set/changed, when clearing input fields or adding an address via addressbook\n- re-work / update some strings\n- ensure model gets initialized in the SignVerifyMessageDialog constructor\n- add checks for a valid model to both addressbook buttons\n- remove unneeded includes for Qt GUI elements that are listed in ui_signverifymessagedialog.h anyway",
      "tree": {
        "sha": "bcde56cf582a8c1b705b7101df076eb8fb34f147",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/bcde56cf582a8c1b705b7101df076eb8fb34f147"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/47894585aeaa4f5475c50bc4415ed6ced868fbf7",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/47894585aeaa4f5475c50bc4415ed6ced868fbf7",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/47894585aeaa4f5475c50bc4415ed6ced868fbf7",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/47894585aeaa4f5475c50bc4415ed6ced868fbf7/comments",
    "author": null,
    "committer": null,
    "parents": [
      {
        "sha": "6e3a1a374293a8a5adeb2ad464f7205e819585ee",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6e3a1a374293a8a5adeb2ad464f7205e819585ee",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/6e3a1a374293a8a5adeb2ad464f7205e819585ee"
      }
    ],
    "stats": {
      "total": 1528,
      "additions": 822,
      "deletions": 706
    },
    "files": [
      {
        "sha": "ed6ce85aa897f0284711fecb2cf211572cc6d676",
        "filename": "bitcoin-qt.pro",
        "status": "modified",
        "additions": 4,
        "deletions": 7,
        "changes": 11,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/47894585aeaa4f5475c50bc4415ed6ced868fbf7/bitcoin-qt.pro",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/47894585aeaa4f5475c50bc4415ed6ced868fbf7/bitcoin-qt.pro",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/bitcoin-qt.pro?ref=47894585aeaa4f5475c50bc4415ed6ced868fbf7",
        "patch": "@@ -100,7 +100,7 @@ HEADERS += src/qt/bitcoingui.h \\\n     src/qt/optionsdialog.h \\\n     src/qt/sendcoinsdialog.h \\\n     src/qt/addressbookpage.h \\\n-    src/qt/messagepage.h \\\n+    src/qt/signverifymessagedialog.h \\\n     src/qt/aboutdialog.h \\\n     src/qt/editaddressdialog.h \\\n     src/qt/bitcoinaddressvalidator.h \\\n@@ -160,16 +160,15 @@ HEADERS += src/qt/bitcoingui.h \\\n     src/qt/qtipcserver.h \\\n     src/allocators.h \\\n     src/ui_interface.h \\\n-    src/qt/rpcconsole.h \\\n-    src/qt/verifymessagedialog.h\n+    src/qt/rpcconsole.h\n \n SOURCES += src/qt/bitcoin.cpp src/qt/bitcoingui.cpp \\\n     src/qt/transactiontablemodel.cpp \\\n     src/qt/addresstablemodel.cpp \\\n     src/qt/optionsdialog.cpp \\\n     src/qt/sendcoinsdialog.cpp \\\n     src/qt/addressbookpage.cpp \\\n-    src/qt/messagepage.cpp \\\n+    src/qt/signverifymessagedialog.cpp \\\n     src/qt/aboutdialog.cpp \\\n     src/qt/editaddressdialog.cpp \\\n     src/qt/bitcoinaddressvalidator.cpp \\\n@@ -220,7 +219,6 @@ SOURCES += src/qt/bitcoin.cpp src/qt/bitcoingui.cpp \\\n     src/qt/notificator.cpp \\\n     src/qt/qtipcserver.cpp \\\n     src/qt/rpcconsole.cpp \\\n-    src/qt/verifymessagedialog.cpp \\\n     src/noui.cpp\n \n RESOURCES += \\\n@@ -229,15 +227,14 @@ RESOURCES += \\\n FORMS += \\\n     src/qt/forms/sendcoinsdialog.ui \\\n     src/qt/forms/addressbookpage.ui \\\n-    src/qt/forms/messagepage.ui \\\n+    src/qt/forms/signverifymessagedialog.ui \\\n     src/qt/forms/aboutdialog.ui \\\n     src/qt/forms/editaddressdialog.ui \\\n     src/qt/forms/transactiondescdialog.ui \\\n     src/qt/forms/overviewpage.ui \\\n     src/qt/forms/sendcoinsentry.ui \\\n     src/qt/forms/askpassphrasedialog.ui \\\n     src/qt/forms/rpcconsole.ui \\\n-    src/qt/forms/verifymessagedialog.ui \\\n     src/qt/forms/optionsdialog.ui\n \n contains(USE_QRCODE, 1) {"
      },
      {
        "sha": "98598933219bf0f8ac85d001201bf0654625d6fd",
        "filename": "src/qt/addressbookpage.cpp",
        "status": "modified",
        "additions": 28,
        "deletions": 1,
        "changes": 29,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/47894585aeaa4f5475c50bc4415ed6ced868fbf7/src/qt/addressbookpage.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/47894585aeaa4f5475c50bc4415ed6ced868fbf7/src/qt/addressbookpage.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/addressbookpage.cpp?ref=47894585aeaa4f5475c50bc4415ed6ced868fbf7",
        "patch": "@@ -65,6 +65,7 @@ AddressBookPage::AddressBookPage(Mode mode, Tabs tab, QWidget *parent) :\n     QAction *editAction = new QAction(tr(\"&Edit\"), this);\n     QAction *showQRCodeAction = new QAction(ui->showQRCode->text(), this);\n     QAction *signMessageAction = new QAction(ui->signMessage->text(), this);\n+    QAction *verifyMessageAction = new QAction(ui->verifyMessage->text(), this);\n     deleteAction = new QAction(ui->deleteButton->text(), this);\n \n     // Build context menu\n@@ -78,6 +79,8 @@ AddressBookPage::AddressBookPage(Mode mode, Tabs tab, QWidget *parent) :\n     contextMenu->addAction(showQRCodeAction);\n     if(tab == ReceivingTab)\n         contextMenu->addAction(signMessageAction);\n+    else if(tab == SendingTab)\n+        contextMenu->addAction(verifyMessageAction);\n \n     // Connect signals for context menu actions\n     connect(copyAddressAction, SIGNAL(triggered()), this, SLOT(on_copyToClipboard_clicked()));\n@@ -86,6 +89,7 @@ AddressBookPage::AddressBookPage(Mode mode, Tabs tab, QWidget *parent) :\n     connect(deleteAction, SIGNAL(triggered()), this, SLOT(on_deleteButton_clicked()));\n     connect(showQRCodeAction, SIGNAL(triggered()), this, SLOT(on_showQRCode_clicked()));\n     connect(signMessageAction, SIGNAL(triggered()), this, SLOT(on_signMessage_clicked()));\n+    connect(verifyMessageAction, SIGNAL(triggered()), this, SLOT(on_verifyMessage_clicked()));\n \n     connect(ui->tableView, SIGNAL(customContextMenuRequested(QPoint)), this, SLOT(contextualMenu(QPoint)));\n \n@@ -182,7 +186,25 @@ void AddressBookPage::on_signMessage_clicked()\n     QObject *qoGUI = parent()->parent();\n     BitcoinGUI *gui = qobject_cast<BitcoinGUI *>(qoGUI);\n     if (gui)\n-        gui->gotoMessagePage(addr);\n+        gui->gotoSignMessageTab(addr);\n+}\n+\n+void AddressBookPage::on_verifyMessage_clicked()\n+{\n+    QTableView *table = ui->tableView;\n+    QModelIndexList indexes = table->selectionModel()->selectedRows(AddressTableModel::Address);\n+    QString addr;\n+\n+    foreach (QModelIndex index, indexes)\n+    {\n+        QVariant address = index.data();\n+        addr = address.toString();\n+    }\n+\n+    QObject *qoGUI = parent()->parent();\n+    BitcoinGUI *gui = qobject_cast<BitcoinGUI *>(qoGUI);\n+    if (gui)\n+        gui->gotoVerifyMessageTab(addr);\n }\n \n void AddressBookPage::on_newAddressButton_clicked()\n@@ -230,6 +252,8 @@ void AddressBookPage::selectionChanged()\n             deleteAction->setEnabled(true);\n             ui->signMessage->setEnabled(false);\n             ui->signMessage->setVisible(false);\n+            ui->verifyMessage->setEnabled(true);\n+            ui->verifyMessage->setVisible(true);\n             break;\n         case ReceivingTab:\n             // Deleting receiving addresses, however, is not allowed\n@@ -238,6 +262,8 @@ void AddressBookPage::selectionChanged()\n             deleteAction->setEnabled(false);\n             ui->signMessage->setEnabled(true);\n             ui->signMessage->setVisible(true);\n+            ui->verifyMessage->setEnabled(false);\n+            ui->verifyMessage->setVisible(false);\n             break;\n         }\n         ui->copyToClipboard->setEnabled(true);\n@@ -249,6 +275,7 @@ void AddressBookPage::selectionChanged()\n         ui->showQRCode->setEnabled(false);\n         ui->copyToClipboard->setEnabled(false);\n         ui->signMessage->setEnabled(false);\n+        ui->verifyMessage->setEnabled(false);\n     }\n }\n "
      },
      {
        "sha": "6bd56ffe336006fc7cf5d9bc675657d6fd345037",
        "filename": "src/qt/addressbookpage.h",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/47894585aeaa4f5475c50bc4415ed6ced868fbf7/src/qt/addressbookpage.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/47894585aeaa4f5475c50bc4415ed6ced868fbf7/src/qt/addressbookpage.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/addressbookpage.h?ref=47894585aeaa4f5475c50bc4415ed6ced868fbf7",
        "patch": "@@ -60,6 +60,7 @@ private slots:\n     /** Copy address of currently selected address entry to clipboard */\n     void on_copyToClipboard_clicked();\n     void on_signMessage_clicked();\n+    void on_verifyMessage_clicked();\n     void selectionChanged();\n     void on_showQRCode_clicked();\n     /** Spawn contextual menu (right mouse menu) for address book entry */"
      },
      {
        "sha": "e8ecf8ad4e332362a4a3c0a06ddc92f70a1827bb",
        "filename": "src/qt/bitcoingui.cpp",
        "status": "modified",
        "additions": 56,
        "deletions": 30,
        "changes": 86,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/47894585aeaa4f5475c50bc4415ed6ced868fbf7/src/qt/bitcoingui.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/47894585aeaa4f5475c50bc4415ed6ced868fbf7/src/qt/bitcoingui.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoingui.cpp?ref=47894585aeaa4f5475c50bc4415ed6ced868fbf7",
        "patch": "@@ -8,8 +8,7 @@\n #include \"transactiontablemodel.h\"\n #include \"addressbookpage.h\"\n #include \"sendcoinsdialog.h\"\n-#include \"messagepage.h\"\n-#include \"verifymessagedialog.h\"\n+#include \"signverifymessagedialog.h\"\n #include \"optionsdialog.h\"\n #include \"aboutdialog.h\"\n #include \"clientmodel.h\"\n@@ -108,7 +107,7 @@ BitcoinGUI::BitcoinGUI(QWidget *parent):\n \n     sendCoinsPage = new SendCoinsDialog(this);\n \n-    messagePage = new MessagePage(this);\n+    signVerifyMessageDialog = new SignVerifyMessageDialog(this);\n \n     centralWidget = new QStackedWidget(this);\n     centralWidget->addWidget(overviewPage);\n@@ -117,7 +116,7 @@ BitcoinGUI::BitcoinGUI(QWidget *parent):\n     centralWidget->addWidget(receiveCoinsPage);\n     centralWidget->addWidget(sendCoinsPage);\n #ifdef FIRST_CLASS_MESSAGING\n-    centralWidget->addWidget(messagePage);\n+    centralWidget->addWidget(signVerifyMessageDialog);\n #endif\n     setCentralWidget(centralWidget);\n \n@@ -212,12 +211,20 @@ void BitcoinGUI::createActions()\n     sendCoinsAction->setShortcut(QKeySequence(Qt::ALT + Qt::Key_2));\n     tabGroup->addAction(sendCoinsAction);\n \n-    messageAction = new QAction(QIcon(\":/icons/edit\"), tr(\"Sign &message...\"), this);\n-    messageAction->setToolTip(tr(\"Prove you control an address\"));\n+    signMessageAction = new QAction(QIcon(\":/icons/edit\"), tr(\"Sign &message...\"), this);\n+    signMessageAction->setToolTip(tr(\"Sign a message to prove you own a Bitcoin address\"));\n+    tabGroup->addAction(signMessageAction);\n+\n+    verifyMessageAction = new QAction(QIcon(\":/icons/transaction_0\"), tr(\"&Verify message...\"), this);\n+    verifyMessageAction->setToolTip(tr(\"Verify a message to ensure it was signed with a specified Bitcoin address\"));\n+    tabGroup->addAction(verifyMessageAction);\n+\n #ifdef FIRST_CLASS_MESSAGING\n-    messageAction->setCheckable(true);\n+    firstClassMessagingAction = new QAction(QIcon(\":/icons/edit\"), tr(\"S&ignatures\"), this);\n+    firstClassMessagingAction->setToolTip(signMessageAction->toolTip() + QString(\". / \") + verifyMessageAction->toolTip() + QString(\".\"));\n+    firstClassMessagingAction->setCheckable(true);\n+    tabGroup->addAction(firstClassMessagingAction);\n #endif\n-    tabGroup->addAction(messageAction);\n \n     connect(overviewAction, SIGNAL(triggered()), this, SLOT(showNormalIfMinimized()));\n     connect(overviewAction, SIGNAL(triggered()), this, SLOT(gotoOverviewPage()));\n@@ -229,8 +236,15 @@ void BitcoinGUI::createActions()\n     connect(receiveCoinsAction, SIGNAL(triggered()), this, SLOT(gotoReceiveCoinsPage()));\n     connect(sendCoinsAction, SIGNAL(triggered()), this, SLOT(showNormalIfMinimized()));\n     connect(sendCoinsAction, SIGNAL(triggered()), this, SLOT(gotoSendCoinsPage()));\n-    connect(messageAction, SIGNAL(triggered()), this, SLOT(showNormalIfMinimized()));\n-    connect(messageAction, SIGNAL(triggered()), this, SLOT(gotoMessagePage()));\n+    connect(signMessageAction, SIGNAL(triggered()), this, SLOT(showNormalIfMinimized()));\n+    connect(signMessageAction, SIGNAL(triggered()), this, SLOT(gotoSignMessageTab()));\n+    connect(verifyMessageAction, SIGNAL(triggered()), this, SLOT(showNormalIfMinimized()));\n+    connect(verifyMessageAction, SIGNAL(triggered()), this, SLOT(gotoVerifyMessageTab()));\n+#ifdef FIRST_CLASS_MESSAGING\n+    connect(firstClassMessagingAction, SIGNAL(triggered()), this, SLOT(showNormalIfMinimized()));\n+    // Always start with the sign message tab for FIRST_CLASS_MESSAGING\n+    connect(firstClassMessagingAction, SIGNAL(triggered()), this, SLOT(gotoSignMessageTab()));\n+#endif\n \n     quitAction = new QAction(QIcon(\":/icons/quit\"), tr(\"E&xit\"), this);\n     quitAction->setToolTip(tr(\"Quit application\"));\n@@ -258,8 +272,6 @@ void BitcoinGUI::createActions()\n     changePassphraseAction->setToolTip(tr(\"Change the passphrase used for wallet encryption\"));\n     openRPCConsoleAction = new QAction(QIcon(\":/icons/debugwindow\"), tr(\"&Debug window\"), this);\n     openRPCConsoleAction->setToolTip(tr(\"Open debugging and diagnostic console\"));\n-    verifyMessageAction = new QAction(QIcon(\":/icons/transaction_0\"), tr(\"&Verify message...\"), this);\n-    verifyMessageAction->setToolTip(tr(\"Verify a message signature\"));\n \n     connect(quitAction, SIGNAL(triggered()), qApp, SLOT(quit()));\n     connect(optionsAction, SIGNAL(triggered()), this, SLOT(optionsClicked()));\n@@ -269,7 +281,6 @@ void BitcoinGUI::createActions()\n     connect(encryptWalletAction, SIGNAL(triggered(bool)), this, SLOT(encryptWallet(bool)));\n     connect(backupWalletAction, SIGNAL(triggered()), this, SLOT(backupWallet()));\n     connect(changePassphraseAction, SIGNAL(triggered()), this, SLOT(changePassphrase()));\n-    connect(verifyMessageAction, SIGNAL(triggered()), this, SLOT(verifyMessage()));\n }\n \n void BitcoinGUI::createMenuBar()\n@@ -287,9 +298,9 @@ void BitcoinGUI::createMenuBar()\n     file->addAction(backupWalletAction);\n     file->addAction(exportAction);\n #ifndef FIRST_CLASS_MESSAGING\n-    file->addAction(messageAction);\n-#endif\n+    file->addAction(signMessageAction);\n     file->addAction(verifyMessageAction);\n+#endif\n     file->addSeparator();\n     file->addAction(quitAction);\n \n@@ -316,7 +327,7 @@ void BitcoinGUI::createToolBars()\n     toolbar->addAction(historyAction);\n     toolbar->addAction(addressBookAction);\n #ifdef FIRST_CLASS_MESSAGING\n-    toolbar->addAction(messageAction);\n+    toolbar->addAction(firstClassMessagingAction);\n #endif\n \n     QToolBar *toolbar2 = addToolBar(tr(\"Actions toolbar\"));\n@@ -375,7 +386,7 @@ void BitcoinGUI::setWalletModel(WalletModel *walletModel)\n         addressBookPage->setModel(walletModel->getAddressTableModel());\n         receiveCoinsPage->setModel(walletModel->getAddressTableModel());\n         sendCoinsPage->setModel(walletModel);\n-        messagePage->setModel(walletModel);\n+        signVerifyMessageDialog->setModel(walletModel);\n \n         setEncryptionStatus(walletModel->getEncryptionStatus());\n         connect(walletModel, SIGNAL(encryptionStatusChanged(int)), this, SLOT(setEncryptionStatus(int)));\n@@ -415,7 +426,7 @@ void BitcoinGUI::createTrayIcon()\n #ifndef FIRST_CLASS_MESSAGING\n     trayIconMenu->addSeparator();\n #endif\n-    trayIconMenu->addAction(messageAction);\n+    trayIconMenu->addAction(signMessageAction);\n     trayIconMenu->addAction(verifyMessageAction);\n     trayIconMenu->addSeparator();\n     trayIconMenu->addAction(optionsAction);\n@@ -717,20 +728,42 @@ void BitcoinGUI::gotoSendCoinsPage()\n     disconnect(exportAction, SIGNAL(triggered()), 0, 0);\n }\n \n-void BitcoinGUI::gotoMessagePage(QString addr)\n+void BitcoinGUI::gotoSignMessageTab(QString addr)\n {\n+#ifdef FIRST_CLASS_MESSAGING\n+    firstClassMessagingAction->setChecked(true);\n+    centralWidget->setCurrentWidget(signVerifyMessageDialog);\n+\n+    exportAction->setEnabled(false);\n+    disconnect(exportAction, SIGNAL(triggered()), 0, 0);\n+\n+    signVerifyMessageDialog->showTab_SM(false);\n+#else\n+    // call show() in showTab_SM()\n+    signVerifyMessageDialog->showTab_SM(true);\n+#endif\n+\n     if(!addr.isEmpty())\n-        messagePage->setAddress(addr);\n+        signVerifyMessageDialog->setAddress_SM(addr);\n+}\n \n+void BitcoinGUI::gotoVerifyMessageTab(QString addr)\n+{\n #ifdef FIRST_CLASS_MESSAGING\n-    messageAction->setChecked(true);\n-    centralWidget->setCurrentWidget(messagePage);\n+    firstClassMessagingAction->setChecked(true);\n+    centralWidget->setCurrentWidget(signVerifyMessageDialog);\n \n     exportAction->setEnabled(false);\n     disconnect(exportAction, SIGNAL(triggered()), 0, 0);\n+\n+    signVerifyMessageDialog->showTab_VM(false);\n #else\n-    messagePage->show();\n+    // call show() in showTab_VM()\n+    signVerifyMessageDialog->showTab_VM(true);\n #endif\n+\n+    if(!addr.isEmpty())\n+        signVerifyMessageDialog->setAddress_VM(addr);\n }\n \n void BitcoinGUI::dragEnterEvent(QDragEnterEvent *event)\n@@ -833,13 +866,6 @@ void BitcoinGUI::changePassphrase()\n     dlg.exec();\n }\n \n-void BitcoinGUI::verifyMessage()\n-{\n-    VerifyMessageDialog *dlg = new VerifyMessageDialog(this);\n-    dlg->setAttribute(Qt::WA_DeleteOnClose);\n-    dlg->show();\n-}\n-\n void BitcoinGUI::unlockWallet()\n {\n     if(!walletModel)"
      },
      {
        "sha": "4a395012ee3c3b4e23e9829818ee88aa66c0dfb7",
        "filename": "src/qt/bitcoingui.h",
        "status": "modified",
        "additions": 6,
        "deletions": 6,
        "changes": 12,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/47894585aeaa4f5475c50bc4415ed6ced868fbf7/src/qt/bitcoingui.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/47894585aeaa4f5475c50bc4415ed6ced868fbf7/src/qt/bitcoingui.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoingui.h?ref=47894585aeaa4f5475c50bc4415ed6ced868fbf7",
        "patch": "@@ -11,7 +11,7 @@ class TransactionView;\n class OverviewPage;\n class AddressBookPage;\n class SendCoinsDialog;\n-class MessagePage;\n+class SignVerifyMessageDialog;\n class Notificator;\n class RPCConsole;\n \n@@ -64,7 +64,7 @@ class BitcoinGUI : public QMainWindow\n     AddressBookPage *addressBookPage;\n     AddressBookPage *receiveCoinsPage;\n     SendCoinsDialog *sendCoinsPage;\n-    MessagePage *messagePage;\n+    SignVerifyMessageDialog *signVerifyMessageDialog;\n \n     QLabel *labelEncryptionIcon;\n     QLabel *labelConnectionsIcon;\n@@ -78,8 +78,9 @@ class BitcoinGUI : public QMainWindow\n     QAction *quitAction;\n     QAction *sendCoinsAction;\n     QAction *addressBookAction;\n-    QAction *messageAction;\n+    QAction *signMessageAction;\n     QAction *verifyMessageAction;\n+    QAction *firstClassMessagingAction;\n     QAction *aboutAction;\n     QAction *receiveCoinsAction;\n     QAction *optionsAction;\n@@ -131,7 +132,8 @@ public slots:\n     void askFee(qint64 nFeeRequired, bool *payFee);\n     void handleURI(QString strURI);\n \n-    void gotoMessagePage(QString addr = \"\");\n+    void gotoSignMessageTab(QString addr = \"\");\n+    void gotoVerifyMessageTab(QString addr = \"\");\n \n private slots:\n     /** Switch to overview (home) page */\n@@ -164,8 +166,6 @@ private slots:\n     void backupWallet();\n     /** Change encrypted wallet passphrase */\n     void changePassphrase();\n-    /** Verify a message signature */\n-    void verifyMessage();\n     /** Ask for pass phrase to unlock wallet temporarily */\n     void unlockWallet();\n "
      },
      {
        "sha": "7708e15363fda350b4446bd51dc08617cadb6367",
        "filename": "src/qt/forms/addressbookpage.ui",
        "status": "modified",
        "additions": 18,
        "deletions": 4,
        "changes": 22,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/47894585aeaa4f5475c50bc4415ed6ced868fbf7/src/qt/forms/addressbookpage.ui",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/47894585aeaa4f5475c50bc4415ed6ced868fbf7/src/qt/forms/addressbookpage.ui",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/forms/addressbookpage.ui?ref=47894585aeaa4f5475c50bc4415ed6ced868fbf7",
        "patch": "@@ -6,7 +6,7 @@\n    <rect>\n     <x>0</x>\n     <y>0</y>\n-    <width>627</width>\n+    <width>691</width>\n     <height>347</height>\n    </rect>\n   </property>\n@@ -17,10 +17,10 @@\n    <item>\n     <widget class=\"QLabel\" name=\"labelExplanation\">\n      <property name=\"text\">\n-      <string>These are your Bitcoin addresses for receiving payments.  You may want to give a different one to each sender so you can keep track of who is paying you.</string>\n+      <string>These are your Bitcoin addresses for receiving payments. You may want to give a different one to each sender so you can keep track of who is paying you.</string>\n      </property>\n      <property name=\"textFormat\">\n-      <enum>Qt::AutoText</enum>\n+      <enum>Qt::PlainText</enum>\n      </property>\n      <property name=\"wordWrap\">\n       <bool>true</bool>\n@@ -99,7 +99,7 @@\n      <item>\n       <widget class=\"QPushButton\" name=\"signMessage\">\n        <property name=\"toolTip\">\n-        <string>Sign a message to prove you own this address</string>\n+        <string>Sign a message to prove you own a Bitcoin address</string>\n        </property>\n        <property name=\"text\">\n         <string>&amp;Sign Message</string>\n@@ -110,6 +110,20 @@\n        </property>\n       </widget>\n      </item>\n+     <item>\n+      <widget class=\"QPushButton\" name=\"verifyMessage\">\n+       <property name=\"toolTip\">\n+        <string>Verify a message to ensure it was signed with a specified Bitcoin address</string>\n+       </property>\n+       <property name=\"text\">\n+        <string>&amp;Verify Message</string>\n+       </property>\n+       <property name=\"icon\">\n+        <iconset resource=\"../bitcoin.qrc\">\n+         <normaloff>:/icons/transaction_0</normaloff>:/icons/transaction_0</iconset>\n+       </property>\n+      </widget>\n+     </item>\n      <item>\n       <widget class=\"QPushButton\" name=\"deleteButton\">\n        <property name=\"toolTip\">"
      },
      {
        "sha": "0b685aae1dcf0cb007fdbd18a836a6796f0bb643",
        "filename": "src/qt/forms/messagepage.ui",
        "status": "removed",
        "additions": 0,
        "deletions": 181,
        "changes": 181,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6e3a1a374293a8a5adeb2ad464f7205e819585ee/src/qt/forms/messagepage.ui",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6e3a1a374293a8a5adeb2ad464f7205e819585ee/src/qt/forms/messagepage.ui",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/forms/messagepage.ui?ref=6e3a1a374293a8a5adeb2ad464f7205e819585ee",
        "patch": "@@ -1,181 +0,0 @@\n-<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n-<ui version=\"4.0\">\n- <class>MessagePage</class>\n- <widget class=\"QWidget\" name=\"MessagePage\">\n-  <property name=\"geometry\">\n-   <rect>\n-    <x>0</x>\n-    <y>0</y>\n-    <width>627</width>\n-    <height>380</height>\n-   </rect>\n-  </property>\n-  <property name=\"windowTitle\">\n-   <string>Sign Message</string>\n-  </property>\n-  <layout class=\"QVBoxLayout\" name=\"verticalLayout\">\n-   <item>\n-    <widget class=\"QLabel\" name=\"labelExplanation\">\n-     <property name=\"text\">\n-      <string>You can sign messages with your addresses to prove you own them. Be careful not to sign anything vague, as phishing attacks may try to trick you into signing your identity over to them. Only sign fully-detailed statements you agree to.</string>\n-     </property>\n-     <property name=\"textFormat\">\n-      <enum>Qt::AutoText</enum>\n-     </property>\n-     <property name=\"wordWrap\">\n-      <bool>true</bool>\n-     </property>\n-    </widget>\n-   </item>\n-   <item>\n-    <layout class=\"QHBoxLayout\" name=\"horizontalLayout_3\">\n-     <property name=\"spacing\">\n-      <number>0</number>\n-     </property>\n-     <item>\n-      <widget class=\"QValidatedLineEdit\" name=\"signFrom\">\n-       <property name=\"toolTip\">\n-        <string>The address to sign the message with  (e.g. 1NS17iag9jJgTHD1VXjvLCEnZuQ3rJDE9L)</string>\n-       </property>\n-       <property name=\"maxLength\">\n-        <number>34</number>\n-       </property>\n-      </widget>\n-     </item>\n-     <item>\n-      <widget class=\"QPushButton\" name=\"addressBookButton\">\n-       <property name=\"toolTip\">\n-        <string>Choose adress from address book</string>\n-       </property>\n-       <property name=\"text\">\n-        <string/>\n-       </property>\n-       <property name=\"icon\">\n-        <iconset resource=\"../bitcoin.qrc\">\n-         <normaloff>:/icons/address-book</normaloff>:/icons/address-book</iconset>\n-       </property>\n-       <property name=\"shortcut\">\n-        <string>Alt+A</string>\n-       </property>\n-       <property name=\"autoDefault\">\n-        <bool>false</bool>\n-       </property>\n-       <property name=\"flat\">\n-        <bool>false</bool>\n-       </property>\n-      </widget>\n-     </item>\n-     <item>\n-      <widget class=\"QPushButton\" name=\"pasteButton\">\n-       <property name=\"toolTip\">\n-        <string>Paste address from clipboard</string>\n-       </property>\n-       <property name=\"text\">\n-        <string/>\n-       </property>\n-       <property name=\"icon\">\n-        <iconset resource=\"../bitcoin.qrc\">\n-         <normaloff>:/icons/editpaste</normaloff>:/icons/editpaste</iconset>\n-       </property>\n-       <property name=\"shortcut\">\n-        <string>Alt+P</string>\n-       </property>\n-       <property name=\"autoDefault\">\n-        <bool>false</bool>\n-       </property>\n-      </widget>\n-     </item>\n-    </layout>\n-   </item>\n-   <item>\n-    <widget class=\"QPlainTextEdit\" name=\"message\">\n-     <property name=\"toolTip\">\n-      <string>Enter the message you want to sign here</string>\n-     </property>\n-    </widget>\n-   </item>\n-   <item>\n-    <widget class=\"QLineEdit\" name=\"signature\">\n-     <property name=\"font\">\n-      <font>\n-       <italic>true</italic>\n-      </font>\n-     </property>\n-     <property name=\"readOnly\">\n-      <bool>true</bool>\n-     </property>\n-    </widget>\n-   </item>\n-   <item>\n-    <layout class=\"QHBoxLayout\" name=\"horizontalLayout\">\n-     <item>\n-      <widget class=\"QPushButton\" name=\"signMessage\">\n-       <property name=\"toolTip\">\n-        <string>Sign a message to prove you own this address</string>\n-       </property>\n-       <property name=\"text\">\n-        <string>&amp;Sign Message</string>\n-       </property>\n-       <property name=\"icon\">\n-        <iconset resource=\"../bitcoin.qrc\">\n-         <normaloff>:/icons/edit</normaloff>:/icons/edit</iconset>\n-       </property>\n-      </widget>\n-     </item>\n-     <item>\n-      <widget class=\"QPushButton\" name=\"copyToClipboard\">\n-       <property name=\"toolTip\">\n-        <string>Copy the current signature to the system clipboard</string>\n-       </property>\n-       <property name=\"text\">\n-        <string>&amp;Copy Signature</string>\n-       </property>\n-       <property name=\"icon\">\n-        <iconset resource=\"../bitcoin.qrc\">\n-         <normaloff>:/icons/editcopy</normaloff>:/icons/editcopy</iconset>\n-       </property>\n-      </widget>\n-     </item>\n-     <item>\n-      <widget class=\"QPushButton\" name=\"clearButton\">\n-       <property name=\"toolTip\">\n-        <string>Reset all sign message fields</string>\n-       </property>\n-       <property name=\"text\">\n-        <string>Clear &amp;All</string>\n-       </property>\n-       <property name=\"icon\">\n-        <iconset resource=\"../bitcoin.qrc\">\n-         <normaloff>:/icons/remove</normaloff>:/icons/remove</iconset>\n-       </property>\n-      </widget>\n-     </item>\n-     <item>\n-      <spacer name=\"horizontalSpacer\">\n-       <property name=\"orientation\">\n-        <enum>Qt::Horizontal</enum>\n-       </property>\n-       <property name=\"sizeHint\" stdset=\"0\">\n-        <size>\n-         <width>40</width>\n-         <height>20</height>\n-        </size>\n-       </property>\n-      </spacer>\n-     </item>\n-    </layout>\n-   </item>\n-  </layout>\n- </widget>\n- <customwidgets>\n-  <customwidget>\n-   <class>QValidatedLineEdit</class>\n-   <extends>QLineEdit</extends>\n-   <header>qvalidatedlineedit.h</header>\n-  </customwidget>\n- </customwidgets>\n- <resources>\n-  <include location=\"../bitcoin.qrc\"/>\n- </resources>\n- <connections/>\n-</ui>"
      },
      {
        "sha": "e22aea867579882f032bf8b182f2b3dc7a60adf3",
        "filename": "src/qt/forms/signverifymessagedialog.ui",
        "status": "added",
        "additions": 386,
        "deletions": 0,
        "changes": 386,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/47894585aeaa4f5475c50bc4415ed6ced868fbf7/src/qt/forms/signverifymessagedialog.ui",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/47894585aeaa4f5475c50bc4415ed6ced868fbf7/src/qt/forms/signverifymessagedialog.ui",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/forms/signverifymessagedialog.ui?ref=47894585aeaa4f5475c50bc4415ed6ced868fbf7",
        "patch": "@@ -0,0 +1,386 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<ui version=\"4.0\">\n+ <class>SignVerifyMessageDialog</class>\n+ <widget class=\"QDialog\" name=\"SignVerifyMessageDialog\">\n+  <property name=\"geometry\">\n+   <rect>\n+    <x>0</x>\n+    <y>0</y>\n+    <width>700</width>\n+    <height>380</height>\n+   </rect>\n+  </property>\n+  <property name=\"windowTitle\">\n+   <string>Messaging - Sign / Verify a Message</string>\n+  </property>\n+  <property name=\"modal\">\n+   <bool>true</bool>\n+  </property>\n+  <layout class=\"QVBoxLayout\" name=\"verticalLayout\">\n+   <item>\n+    <widget class=\"QTabWidget\" name=\"tabWidget\">\n+     <property name=\"currentIndex\">\n+      <number>0</number>\n+     </property>\n+     <widget class=\"QWidget\" name=\"tabSignMessage\">\n+      <attribute name=\"title\">\n+       <string>&amp;Sign Message</string>\n+      </attribute>\n+      <layout class=\"QVBoxLayout\" name=\"verticalLayout_SM\">\n+       <item>\n+        <widget class=\"QLabel\" name=\"infoLabel_SM\">\n+         <property name=\"text\">\n+          <string>You can sign messages with your addresses to prove you own them. Be careful not to sign anything vague, as phishing attacks may try to trick you into signing your identity over to them. Only sign fully-detailed statements you agree to.</string>\n+         </property>\n+         <property name=\"textFormat\">\n+          <enum>Qt::PlainText</enum>\n+         </property>\n+         <property name=\"wordWrap\">\n+          <bool>true</bool>\n+         </property>\n+        </widget>\n+       </item>\n+       <item>\n+        <layout class=\"QHBoxLayout\" name=\"horizontalLayout_1_SM\">\n+         <property name=\"spacing\">\n+          <number>0</number>\n+         </property>\n+         <item>\n+          <widget class=\"QValidatedLineEdit\" name=\"addressIn_SM\">\n+           <property name=\"toolTip\">\n+            <string>The address to sign the message with (e.g. 1NS17iag9jJgTHD1VXjvLCEnZuQ3rJDE9L)</string>\n+           </property>\n+           <property name=\"maxLength\">\n+            <number>34</number>\n+           </property>\n+          </widget>\n+         </item>\n+         <item>\n+          <widget class=\"QPushButton\" name=\"addressBookButton_SM\">\n+           <property name=\"toolTip\">\n+            <string>Choose an address from the address book</string>\n+           </property>\n+           <property name=\"text\">\n+            <string/>\n+           </property>\n+           <property name=\"icon\">\n+            <iconset resource=\"../bitcoin.qrc\">\n+             <normaloff>:/icons/address-book</normaloff>:/icons/address-book</iconset>\n+           </property>\n+           <property name=\"shortcut\">\n+            <string>Alt+A</string>\n+           </property>\n+           <property name=\"autoDefault\">\n+            <bool>false</bool>\n+           </property>\n+          </widget>\n+         </item>\n+         <item>\n+          <widget class=\"QPushButton\" name=\"pasteButton_SM\">\n+           <property name=\"toolTip\">\n+            <string>Paste address from clipboard</string>\n+           </property>\n+           <property name=\"text\">\n+            <string/>\n+           </property>\n+           <property name=\"icon\">\n+            <iconset resource=\"../bitcoin.qrc\">\n+             <normaloff>:/icons/editpaste</normaloff>:/icons/editpaste</iconset>\n+           </property>\n+           <property name=\"shortcut\">\n+            <string>Alt+P</string>\n+           </property>\n+           <property name=\"autoDefault\">\n+            <bool>false</bool>\n+           </property>\n+          </widget>\n+         </item>\n+        </layout>\n+       </item>\n+       <item>\n+        <widget class=\"QPlainTextEdit\" name=\"messageIn_SM\">\n+         <property name=\"toolTip\">\n+          <string>Enter the message you want to sign here</string>\n+         </property>\n+        </widget>\n+       </item>\n+       <item>\n+        <layout class=\"QHBoxLayout\" name=\"horizontalLayout_2_SM\">\n+         <property name=\"spacing\">\n+          <number>0</number>\n+         </property>\n+         <item>\n+          <widget class=\"QLineEdit\" name=\"signatureOut_SM\">\n+           <property name=\"font\">\n+            <font>\n+             <italic>true</italic>\n+            </font>\n+           </property>\n+           <property name=\"readOnly\">\n+            <bool>true</bool>\n+           </property>\n+          </widget>\n+         </item>\n+         <item>\n+          <widget class=\"QPushButton\" name=\"copySignatureButton_SM\">\n+           <property name=\"toolTip\">\n+            <string>Copy the current signature to the system clipboard</string>\n+           </property>\n+           <property name=\"text\">\n+            <string/>\n+           </property>\n+           <property name=\"icon\">\n+            <iconset resource=\"../bitcoin.qrc\">\n+             <normaloff>:/icons/editcopy</normaloff>:/icons/editcopy</iconset>\n+           </property>\n+           <property name=\"autoDefault\">\n+            <bool>false</bool>\n+           </property>\n+          </widget>\n+         </item>\n+        </layout>\n+       </item>\n+       <item>\n+        <layout class=\"QHBoxLayout\" name=\"horizontalLayout_3_SM\">\n+         <item>\n+          <widget class=\"QPushButton\" name=\"signMessageButton_SM\">\n+           <property name=\"toolTip\">\n+            <string>Sign the message to prove you own this Bitcoin address</string>\n+           </property>\n+           <property name=\"text\">\n+            <string>&amp;Sign Message</string>\n+           </property>\n+           <property name=\"icon\">\n+            <iconset resource=\"../bitcoin.qrc\">\n+             <normaloff>:/icons/edit</normaloff>:/icons/edit</iconset>\n+           </property>\n+           <property name=\"autoDefault\">\n+            <bool>false</bool>\n+           </property>\n+          </widget>\n+         </item>\n+         <item>\n+          <widget class=\"QPushButton\" name=\"clearButton_SM\">\n+           <property name=\"toolTip\">\n+            <string>Reset all sign message fields</string>\n+           </property>\n+           <property name=\"text\">\n+            <string>Clear &amp;All</string>\n+           </property>\n+           <property name=\"icon\">\n+            <iconset resource=\"../bitcoin.qrc\">\n+             <normaloff>:/icons/remove</normaloff>:/icons/remove</iconset>\n+           </property>\n+           <property name=\"autoDefault\">\n+            <bool>false</bool>\n+           </property>\n+          </widget>\n+         </item>\n+         <item>\n+          <spacer name=\"horizontalSpacer_1_SM\">\n+           <property name=\"orientation\">\n+            <enum>Qt::Horizontal</enum>\n+           </property>\n+           <property name=\"sizeHint\" stdset=\"0\">\n+            <size>\n+             <width>40</width>\n+             <height>48</height>\n+            </size>\n+           </property>\n+          </spacer>\n+         </item>\n+         <item>\n+          <widget class=\"QLabel\" name=\"statusLabel_SM\">\n+           <property name=\"font\">\n+            <font>\n+             <weight>75</weight>\n+             <bold>true</bold>\n+            </font>\n+           </property>\n+           <property name=\"text\">\n+            <string/>\n+           </property>\n+           <property name=\"wordWrap\">\n+            <bool>true</bool>\n+           </property>\n+          </widget>\n+         </item>\n+         <item>\n+          <spacer name=\"horizontalSpacer_2_SM\">\n+           <property name=\"orientation\">\n+            <enum>Qt::Horizontal</enum>\n+           </property>\n+           <property name=\"sizeHint\" stdset=\"0\">\n+            <size>\n+             <width>40</width>\n+             <height>48</height>\n+            </size>\n+           </property>\n+          </spacer>\n+         </item>\n+        </layout>\n+       </item>\n+      </layout>\n+     </widget>\n+     <widget class=\"QWidget\" name=\"tabVerifyMessage\">\n+      <attribute name=\"title\">\n+       <string>&amp;Verify Message</string>\n+      </attribute>\n+      <layout class=\"QVBoxLayout\" name=\"verticalLayout_VM\">\n+       <item>\n+        <widget class=\"QLabel\" name=\"infoLabel_VM\">\n+         <property name=\"text\">\n+          <string>Enter the signing address, message (ensure you copy line breaks, spaces, tabs, etc. exactly) and signature below to verify the message. Be careful not to read more into the signature than what is in the signed message itself, to avoid being tricked by a man-in-the-middle attack.</string>\n+         </property>\n+         <property name=\"textFormat\">\n+          <enum>Qt::PlainText</enum>\n+         </property>\n+         <property name=\"alignment\">\n+          <set>Qt::AlignLeading|Qt::AlignLeft|Qt::AlignTop</set>\n+         </property>\n+         <property name=\"wordWrap\">\n+          <bool>true</bool>\n+         </property>\n+        </widget>\n+       </item>\n+       <item>\n+        <layout class=\"QHBoxLayout\" name=\"horizontalLayout_1_VM\">\n+         <property name=\"spacing\">\n+          <number>0</number>\n+         </property>\n+         <item>\n+          <widget class=\"QValidatedLineEdit\" name=\"addressIn_VM\">\n+           <property name=\"toolTip\">\n+            <string>The address the message was signed with (e.g. 1NS17iag9jJgTHD1VXjvLCEnZuQ3rJDE9L)</string>\n+           </property>\n+           <property name=\"maxLength\">\n+            <number>34</number>\n+           </property>\n+          </widget>\n+         </item>\n+         <item>\n+          <widget class=\"QPushButton\" name=\"addressBookButton_VM\">\n+           <property name=\"toolTip\">\n+            <string>Choose an address from the address book</string>\n+           </property>\n+           <property name=\"text\">\n+            <string/>\n+           </property>\n+           <property name=\"icon\">\n+            <iconset resource=\"../bitcoin.qrc\">\n+             <normaloff>:/icons/address-book</normaloff>:/icons/address-book</iconset>\n+           </property>\n+           <property name=\"shortcut\">\n+            <string>Alt+A</string>\n+           </property>\n+           <property name=\"autoDefault\">\n+            <bool>false</bool>\n+           </property>\n+          </widget>\n+         </item>\n+        </layout>\n+       </item>\n+       <item>\n+        <widget class=\"QPlainTextEdit\" name=\"messageIn_VM\"/>\n+       </item>\n+       <item>\n+        <widget class=\"QValidatedLineEdit\" name=\"signatureIn_VM\"/>\n+       </item>\n+       <item>\n+        <layout class=\"QHBoxLayout\" name=\"horizontalLayout_2_VM\">\n+         <item>\n+          <widget class=\"QPushButton\" name=\"verifyMessageButton_VM\">\n+           <property name=\"toolTip\">\n+            <string>Verify the message to ensure it was signed with the specified Bitcoin address</string>\n+           </property>\n+           <property name=\"text\">\n+            <string>&amp;Verify Message</string>\n+           </property>\n+           <property name=\"icon\">\n+            <iconset resource=\"../bitcoin.qrc\">\n+             <normaloff>:/icons/transaction_0</normaloff>:/icons/transaction_0</iconset>\n+           </property>\n+           <property name=\"autoDefault\">\n+            <bool>false</bool>\n+           </property>\n+          </widget>\n+         </item>\n+         <item>\n+          <widget class=\"QPushButton\" name=\"clearButton_VM\">\n+           <property name=\"toolTip\">\n+            <string>Reset all verify message fields</string>\n+           </property>\n+           <property name=\"text\">\n+            <string>Clear &amp;All</string>\n+           </property>\n+           <property name=\"icon\">\n+            <iconset resource=\"../bitcoin.qrc\">\n+             <normaloff>:/icons/remove</normaloff>:/icons/remove</iconset>\n+           </property>\n+           <property name=\"autoDefault\">\n+            <bool>false</bool>\n+           </property>\n+          </widget>\n+         </item>\n+         <item>\n+          <spacer name=\"horizontalSpacer_1_VM\">\n+           <property name=\"orientation\">\n+            <enum>Qt::Horizontal</enum>\n+           </property>\n+           <property name=\"sizeHint\" stdset=\"0\">\n+            <size>\n+             <width>40</width>\n+             <height>48</height>\n+            </size>\n+           </property>\n+          </spacer>\n+         </item>\n+         <item>\n+          <widget class=\"QLabel\" name=\"statusLabel_VM\">\n+           <property name=\"font\">\n+            <font>\n+             <weight>75</weight>\n+             <bold>true</bold>\n+            </font>\n+           </property>\n+           <property name=\"text\">\n+            <string/>\n+           </property>\n+           <property name=\"wordWrap\">\n+            <bool>true</bool>\n+           </property>\n+          </widget>\n+         </item>\n+         <item>\n+          <spacer name=\"horizontalSpacer_2_VM\">\n+           <property name=\"orientation\">\n+            <enum>Qt::Horizontal</enum>\n+           </property>\n+           <property name=\"sizeHint\" stdset=\"0\">\n+            <size>\n+             <width>40</width>\n+             <height>48</height>\n+            </size>\n+           </property>\n+          </spacer>\n+         </item>\n+        </layout>\n+       </item>\n+      </layout>\n+     </widget>\n+    </widget>\n+   </item>\n+  </layout>\n+ </widget>\n+ <customwidgets>\n+  <customwidget>\n+   <class>QValidatedLineEdit</class>\n+   <extends>QLineEdit</extends>\n+   <header>qvalidatedlineedit.h</header>\n+  </customwidget>\n+ </customwidgets>\n+ <resources>\n+  <include location=\"../bitcoin.qrc\"/>\n+ </resources>\n+ <connections/>\n+</ui>"
      },
      {
        "sha": "afe98b05ab552890b82821d968468a8e616edc5b",
        "filename": "src/qt/forms/verifymessagedialog.ui",
        "status": "removed",
        "additions": 0,
        "deletions": 140,
        "changes": 140,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6e3a1a374293a8a5adeb2ad464f7205e819585ee/src/qt/forms/verifymessagedialog.ui",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6e3a1a374293a8a5adeb2ad464f7205e819585ee/src/qt/forms/verifymessagedialog.ui",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/forms/verifymessagedialog.ui?ref=6e3a1a374293a8a5adeb2ad464f7205e819585ee",
        "patch": "@@ -1,140 +0,0 @@\n-<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n-<ui version=\"4.0\">\n- <class>VerifyMessageDialog</class>\n- <widget class=\"QDialog\" name=\"VerifyMessageDialog\">\n-  <property name=\"geometry\">\n-   <rect>\n-    <x>0</x>\n-    <y>0</y>\n-    <width>650</width>\n-    <height>380</height>\n-   </rect>\n-  </property>\n-  <property name=\"windowTitle\">\n-   <string>Verify Signed Message</string>\n-  </property>\n-  <layout class=\"QVBoxLayout\" name=\"verticalLayout\">\n-   <item>\n-    <widget class=\"QLabel\" name=\"label\">\n-     <property name=\"text\">\n-      <string>Enter the signing address, signature and message below (be careful to correctly copy newlines, spaces, tabs and other invisible characters) to verify the message.</string>\n-     </property>\n-     <property name=\"alignment\">\n-      <set>Qt::AlignLeading|Qt::AlignLeft|Qt::AlignTop</set>\n-     </property>\n-     <property name=\"wordWrap\">\n-      <bool>true</bool>\n-     </property>\n-    </widget>\n-   </item>\n-   <item>\n-    <widget class=\"QValidatedLineEdit\" name=\"lnAddress\">\n-     <property name=\"text\">\n-      <string/>\n-     </property>\n-    </widget>\n-   </item>\n-   <item>\n-    <widget class=\"QValidatedLineEdit\" name=\"lnSig\">\n-     <property name=\"text\">\n-      <string/>\n-     </property>\n-    </widget>\n-   </item>\n-   <item>\n-    <widget class=\"QPlainTextEdit\" name=\"edMessage\"/>\n-   </item>\n-   <item>\n-    <layout class=\"QHBoxLayout\" name=\"horizontalLayout\">\n-     <item>\n-      <widget class=\"QPushButton\" name=\"verifyMessage\">\n-       <property name=\"toolTip\">\n-        <string>Verify a message to ensure it was signed with the specified Bitcoin address</string>\n-       </property>\n-       <property name=\"text\">\n-        <string>&amp;Verify Message</string>\n-       </property>\n-       <property name=\"icon\">\n-        <iconset resource=\"../bitcoin.qrc\">\n-         <normaloff>:/icons/transaction_0</normaloff>:/icons/transaction_0</iconset>\n-       </property>\n-      </widget>\n-     </item>\n-     <item>\n-      <widget class=\"QPushButton\" name=\"clearButton\">\n-       <property name=\"toolTip\">\n-        <string>Reset all verify message fields</string>\n-       </property>\n-       <property name=\"text\">\n-        <string>Clear &amp;All</string>\n-       </property>\n-       <property name=\"icon\">\n-        <iconset resource=\"../bitcoin.qrc\">\n-         <normaloff>:/icons/remove</normaloff>:/icons/remove</iconset>\n-       </property>\n-      </widget>\n-     </item>\n-     <item>\n-      <spacer name=\"horizontalSpacer_2\">\n-       <property name=\"orientation\">\n-        <enum>Qt::Horizontal</enum>\n-       </property>\n-       <property name=\"sizeHint\" stdset=\"0\">\n-        <size>\n-         <width>40</width>\n-         <height>20</height>\n-        </size>\n-       </property>\n-      </spacer>\n-     </item>\n-     <item>\n-      <widget class=\"QLabel\" name=\"lblStatus\">\n-       <property name=\"minimumSize\">\n-        <size>\n-         <width>0</width>\n-         <height>48</height>\n-        </size>\n-       </property>\n-       <property name=\"font\">\n-        <font>\n-         <weight>75</weight>\n-         <bold>true</bold>\n-        </font>\n-       </property>\n-       <property name=\"text\">\n-        <string/>\n-       </property>\n-       <property name=\"wordWrap\">\n-        <bool>true</bool>\n-       </property>\n-      </widget>\n-     </item>\n-     <item>\n-      <spacer name=\"horizontalSpacer\">\n-       <property name=\"orientation\">\n-        <enum>Qt::Horizontal</enum>\n-       </property>\n-       <property name=\"sizeHint\" stdset=\"0\">\n-        <size>\n-         <width>40</width>\n-         <height>20</height>\n-        </size>\n-       </property>\n-      </spacer>\n-     </item>\n-    </layout>\n-   </item>\n-  </layout>\n- </widget>\n- <customwidgets>\n-  <customwidget>\n-   <class>QValidatedLineEdit</class>\n-   <extends>QLineEdit</extends>\n-   <header>qvalidatedlineedit.h</header>\n-  </customwidget>\n- </customwidgets>\n- <resources>\n-  <include location=\"../bitcoin.qrc\"/>\n- </resources>\n- <connections/>\n-</ui>"
      },
      {
        "sha": "ab3ea5a0c5585d3ecdf1e2f23e534e4e5a13021e",
        "filename": "src/qt/messagepage.cpp",
        "status": "removed",
        "additions": 0,
        "deletions": 143,
        "changes": 143,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6e3a1a374293a8a5adeb2ad464f7205e819585ee/src/qt/messagepage.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6e3a1a374293a8a5adeb2ad464f7205e819585ee/src/qt/messagepage.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/messagepage.cpp?ref=6e3a1a374293a8a5adeb2ad464f7205e819585ee",
        "patch": "@@ -1,143 +0,0 @@\n-#include <string>\n-#include <vector>\n-\n-#include <QClipboard>\n-#include <QInputDialog>\n-#include <QList>\n-#include <QListWidgetItem>\n-#include <QMessageBox>\n-\n-#include \"main.h\"\n-#include \"wallet.h\"\n-#include \"init.h\"\n-#include \"base58.h\"\n-\n-#include \"messagepage.h\"\n-#include \"ui_messagepage.h\"\n-\n-#include \"addressbookpage.h\"\n-#include \"guiutil.h\"\n-#include \"walletmodel.h\"\n-\n-MessagePage::MessagePage(QWidget *parent) :\n-    QDialog(parent),\n-    ui(new Ui::MessagePage)\n-{\n-    ui->setupUi(this);\n-\n-#if (QT_VERSION >= 0x040700)\n-    /* Do not move this to the XML file, Qt before 4.7 will choke on it */\n-    ui->signFrom->setPlaceholderText(tr(\"Enter a Bitcoin address (e.g. 1NS17iag9jJgTHD1VXjvLCEnZuQ3rJDE9L)\"));\n-    ui->signature->setPlaceholderText(tr(\"Click \\\"Sign Message\\\" to get signature\"));\n-#endif\n-\n-    GUIUtil::setupAddressWidget(ui->signFrom, this);\n-    ui->signature->installEventFilter(this);\n-\n-    ui->signFrom->setFocus();\n-}\n-\n-MessagePage::~MessagePage()\n-{\n-    delete ui;\n-}\n-\n-void MessagePage::setModel(WalletModel *model)\n-{\n-    this->model = model;\n-}\n-\n-void MessagePage::setAddress(QString addr)\n-{\n-    ui->signFrom->setText(addr);\n-    ui->message->setFocus();\n-}\n-\n-void MessagePage::on_pasteButton_clicked()\n-{\n-    setAddress(QApplication::clipboard()->text());\n-}\n-\n-void MessagePage::on_addressBookButton_clicked()\n-{\n-    AddressBookPage dlg(AddressBookPage::ForSending, AddressBookPage::ReceivingTab, this);\n-    dlg.setModel(model->getAddressTableModel());\n-    if(dlg.exec())\n-    {\n-        setAddress(dlg.getReturnValue());\n-    }\n-}\n-\n-void MessagePage::on_copyToClipboard_clicked()\n-{\n-    QApplication::clipboard()->setText(ui->signature->text());\n-}\n-\n-void MessagePage::on_signMessage_clicked()\n-{\n-    QString address = ui->signFrom->text();\n-\n-    CBitcoinAddress addr(address.toStdString());\n-    if (!addr.IsValid())\n-    {\n-        QMessageBox::critical(this, tr(\"Error signing\"), tr(\"%1 is not a valid address.\").arg(address),\n-                              QMessageBox::Abort, QMessageBox::Abort);\n-        return;\n-    }\n-    CKeyID keyID;\n-    if (!addr.GetKeyID(keyID))\n-    {\n-        QMessageBox::critical(this, tr(\"Error signing\"), tr(\"%1 does not refer to a key.\").arg(address),\n-                              QMessageBox::Abort, QMessageBox::Abort);\n-        return;\n-    }\n-\n-    WalletModel::UnlockContext ctx(model->requestUnlock());\n-    if(!ctx.isValid())\n-    {\n-        // Unlock wallet was cancelled\n-        return;\n-    }\n-\n-    CKey key;\n-    if (!pwalletMain->GetKey(keyID, key))\n-    {\n-        QMessageBox::critical(this, tr(\"Error signing\"), tr(\"Private key for %1 is not available.\").arg(address),\n-                              QMessageBox::Abort, QMessageBox::Abort);\n-        return;\n-    }\n-\n-    CDataStream ss(SER_GETHASH, 0);\n-    ss << strMessageMagic;\n-    ss << ui->message->document()->toPlainText().toStdString();\n-\n-    std::vector<unsigned char> vchSig;\n-    if (!key.SignCompact(Hash(ss.begin(), ss.end()), vchSig))\n-    {\n-        QMessageBox::critical(this, tr(\"Error signing\"), tr(\"Sign failed\"),\n-                              QMessageBox::Abort, QMessageBox::Abort);\n-    }\n-\n-    ui->signature->setText(QString::fromStdString(EncodeBase64(&vchSig[0], vchSig.size())));\n-    ui->signature->setFont(GUIUtil::bitcoinAddressFont());\n-}\n-\n-void MessagePage::on_clearButton_clicked()\n-{\n-    ui->signFrom->clear();\n-    ui->message->clear();\n-    ui->signature->clear();\n-\n-    ui->signFrom->setFocus();\n-}\n-\n-bool MessagePage::eventFilter(QObject *object, QEvent *event)\n-{\n-    if(object == ui->signature && (event->type() == QEvent::MouseButtonPress ||\n-                                   event->type() == QEvent::FocusIn))\n-    {\n-        ui->signature->selectAll();\n-        return true;\n-    }\n-    return QDialog::eventFilter(object, event);\n-}"
      },
      {
        "sha": "d668ae98d051971c680482920473078c45d6d6f2",
        "filename": "src/qt/messagepage.h",
        "status": "removed",
        "additions": 0,
        "deletions": 42,
        "changes": 42,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6e3a1a374293a8a5adeb2ad464f7205e819585ee/src/qt/messagepage.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6e3a1a374293a8a5adeb2ad464f7205e819585ee/src/qt/messagepage.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/messagepage.h?ref=6e3a1a374293a8a5adeb2ad464f7205e819585ee",
        "patch": "@@ -1,42 +0,0 @@\n-#ifndef MESSAGEPAGE_H\n-#define MESSAGEPAGE_H\n-\n-#include <QDialog>\n-\n-namespace Ui {\n-    class MessagePage;\n-}\n-class WalletModel;\n-\n-QT_BEGIN_NAMESPACE\n-QT_END_NAMESPACE\n-\n-class MessagePage : public QDialog\n-{\n-    Q_OBJECT\n-\n-public:\n-    explicit MessagePage(QWidget *parent = 0);\n-    ~MessagePage();\n-\n-    void setModel(WalletModel *model);\n-\n-    void setAddress(QString);\n-\n-protected:\n-    bool eventFilter(QObject *object, QEvent *event);\n-\n-private:\n-    Ui::MessagePage *ui;\n-    WalletModel *model;\n-\n-private slots:\n-    void on_pasteButton_clicked();\n-    void on_addressBookButton_clicked();\n-\n-    void on_signMessage_clicked();\n-    void on_copyToClipboard_clicked();\n-    void on_clearButton_clicked();\n-};\n-\n-#endif // MESSAGEPAGE_H"
      },
      {
        "sha": "f8edbf80ea778034172a27777bbdac1292f3b36b",
        "filename": "src/qt/signverifymessagedialog.cpp",
        "status": "added",
        "additions": 274,
        "deletions": 0,
        "changes": 274,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/47894585aeaa4f5475c50bc4415ed6ced868fbf7/src/qt/signverifymessagedialog.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/47894585aeaa4f5475c50bc4415ed6ced868fbf7/src/qt/signverifymessagedialog.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/signverifymessagedialog.cpp?ref=47894585aeaa4f5475c50bc4415ed6ced868fbf7",
        "patch": "@@ -0,0 +1,274 @@\n+#include \"signverifymessagedialog.h\"\n+#include \"ui_signverifymessagedialog.h\"\n+\n+#include \"addressbookpage.h\"\n+#include \"base58.h\"\n+#include \"guiutil.h\"\n+#include \"init.h\"\n+#include \"main.h\"\n+#include \"optionsmodel.h\"\n+#include \"walletmodel.h\"\n+#include \"wallet.h\"\n+\n+#include <string>\n+#include <vector>\n+\n+#include <QClipboard>\n+\n+SignVerifyMessageDialog::SignVerifyMessageDialog(QWidget *parent) :\n+    QDialog(parent),\n+    ui(new Ui::SignVerifyMessageDialog),\n+    model(0)\n+{\n+    ui->setupUi(this);\n+\n+#if (QT_VERSION >= 0x040700)\n+    /* Do not move this to the XML file, Qt before 4.7 will choke on it */\n+    ui->addressIn_SM->setPlaceholderText(tr(\"Enter a Bitcoin address (e.g. 1NS17iag9jJgTHD1VXjvLCEnZuQ3rJDE9L)\"));\n+    ui->signatureOut_SM->setPlaceholderText(tr(\"Click \\\"Sign Message\\\" to generate signature\"));\n+\n+    ui->addressIn_VM->setPlaceholderText(tr(\"Enter a Bitcoin address (e.g. 1NS17iag9jJgTHD1VXjvLCEnZuQ3rJDE9L)\"));\n+    ui->signatureIn_VM->setPlaceholderText(tr(\"Enter Bitcoin signature\"));\n+#endif\n+\n+    GUIUtil::setupAddressWidget(ui->addressIn_SM, this);\n+    GUIUtil::setupAddressWidget(ui->addressIn_VM, this);\n+\n+    ui->addressIn_SM->installEventFilter(this);\n+    ui->messageIn_SM->installEventFilter(this);\n+    ui->signatureOut_SM->installEventFilter(this);\n+    ui->addressIn_VM->installEventFilter(this);\n+    ui->messageIn_VM->installEventFilter(this);\n+    ui->signatureIn_VM->installEventFilter(this);\n+\n+    ui->signatureOut_SM->setFont(GUIUtil::bitcoinAddressFont());\n+    ui->signatureIn_VM->setFont(GUIUtil::bitcoinAddressFont());\n+}\n+\n+SignVerifyMessageDialog::~SignVerifyMessageDialog()\n+{\n+    delete ui;\n+}\n+\n+void SignVerifyMessageDialog::setModel(WalletModel *model)\n+{\n+    this->model = model;\n+}\n+\n+void SignVerifyMessageDialog::setAddress_SM(QString address)\n+{\n+    ui->addressIn_SM->setText(address);\n+    ui->messageIn_SM->setFocus();\n+}\n+\n+void SignVerifyMessageDialog::setAddress_VM(QString address)\n+{\n+    ui->addressIn_VM->setText(address);\n+    ui->messageIn_VM->setFocus();\n+}\n+\n+void SignVerifyMessageDialog::showTab_SM(bool fShow)\n+{\n+    ui->tabWidget->setCurrentIndex(0);\n+\n+    if (fShow)\n+        this->show();\n+}\n+\n+void SignVerifyMessageDialog::showTab_VM(bool fShow)\n+{\n+    ui->tabWidget->setCurrentIndex(1);\n+    if (fShow)\n+        this->show();\n+}\n+\n+void SignVerifyMessageDialog::on_addressBookButton_SM_clicked()\n+{\n+    if (model && model->getAddressTableModel())\n+    {\n+        AddressBookPage dlg(AddressBookPage::ForSending, AddressBookPage::ReceivingTab, this);\n+        dlg.setModel(model->getAddressTableModel());\n+        if (dlg.exec())\n+        {\n+            setAddress_SM(dlg.getReturnValue());\n+        }\n+    }\n+}\n+\n+void SignVerifyMessageDialog::on_pasteButton_SM_clicked()\n+{\n+    setAddress_SM(QApplication::clipboard()->text());\n+}\n+\n+void SignVerifyMessageDialog::on_signMessageButton_SM_clicked()\n+{\n+    /* Clear old signature to ensure users don't get confused on error with an old signature displayed */\n+    ui->signatureOut_SM->clear();\n+\n+    CBitcoinAddress addr(ui->addressIn_SM->text().toStdString());\n+    if (!addr.IsValid())\n+    {\n+        ui->addressIn_SM->setValid(false);\n+        ui->statusLabel_SM->setStyleSheet(\"QLabel { color: red; }\");\n+        ui->statusLabel_SM->setText(tr(\"The entered address is invalid.\") + QString(\" \") + tr(\"Please check the address and try again.\"));\n+        return;\n+    }\n+    CKeyID keyID;\n+    if (!addr.GetKeyID(keyID))\n+    {\n+        ui->addressIn_SM->setValid(false);\n+        ui->statusLabel_SM->setStyleSheet(\"QLabel { color: red; }\");\n+        ui->statusLabel_SM->setText(tr(\"The entered address does not refer to a key.\") + QString(\" \") + tr(\"Please check the address and try again.\"));\n+        return;\n+    }\n+\n+    WalletModel::UnlockContext ctx(model->requestUnlock());\n+    if (!ctx.isValid())\n+    {\n+        ui->statusLabel_SM->setStyleSheet(\"QLabel { color: red; }\");\n+        ui->statusLabel_SM->setText(tr(\"Wallet unlock was canceled.\"));\n+        return;\n+    }\n+\n+    CKey key;\n+    if (!pwalletMain->GetKey(keyID, key))\n+    {\n+        ui->statusLabel_SM->setStyleSheet(\"QLabel { color: red; }\");\n+        ui->statusLabel_SM->setText(tr(\"Private key for the entered address is not available.\"));\n+        return;\n+    }\n+\n+    CDataStream ss(SER_GETHASH, 0);\n+    ss << strMessageMagic;\n+    ss << ui->messageIn_SM->document()->toPlainText().toStdString();\n+\n+    std::vector<unsigned char> vchSig;\n+    if (!key.SignCompact(Hash(ss.begin(), ss.end()), vchSig))\n+    {\n+        ui->statusLabel_SM->setStyleSheet(\"QLabel { color: red; }\");\n+        ui->statusLabel_SM->setText(QString(\"<nobr>\") + tr(\"Message signing failed.\") + QString(\"</nobr>\"));\n+        return;\n+    }\n+\n+    ui->statusLabel_SM->setStyleSheet(\"QLabel { color: green; }\");\n+    ui->statusLabel_SM->setText(QString(\"<nobr>\") + tr(\"Message signed.\") + QString(\"</nobr>\"));\n+\n+    ui->signatureOut_SM->setText(QString::fromStdString(EncodeBase64(&vchSig[0], vchSig.size())));\n+}\n+\n+void SignVerifyMessageDialog::on_copySignatureButton_SM_clicked()\n+{\n+    QApplication::clipboard()->setText(ui->signatureOut_SM->text());\n+}\n+\n+void SignVerifyMessageDialog::on_clearButton_SM_clicked()\n+{\n+    ui->addressIn_SM->clear();\n+    ui->messageIn_SM->clear();\n+    ui->signatureOut_SM->clear();\n+    ui->statusLabel_SM->clear();\n+\n+    ui->addressIn_SM->setFocus();\n+}\n+\n+void SignVerifyMessageDialog::on_addressBookButton_VM_clicked()\n+{\n+    if (model && model->getAddressTableModel())\n+    {\n+        AddressBookPage dlg(AddressBookPage::ForSending, AddressBookPage::SendingTab, this);\n+        dlg.setModel(model->getAddressTableModel());\n+        if (dlg.exec())\n+        {\n+            setAddress_VM(dlg.getReturnValue());\n+        }\n+    }\n+}\n+\n+void SignVerifyMessageDialog::on_verifyMessageButton_VM_clicked()\n+{\n+    CBitcoinAddress addr(ui->addressIn_VM->text().toStdString());\n+    if (!addr.IsValid())\n+    {\n+        ui->addressIn_VM->setValid(false);\n+        ui->statusLabel_VM->setStyleSheet(\"QLabel { color: red; }\");\n+        ui->statusLabel_VM->setText(tr(\"The entered address is invalid.\") + QString(\" \") + tr(\"Please check the address and try again.\"));\n+        return;\n+    }\n+    CKeyID keyID;\n+    if (!addr.GetKeyID(keyID))\n+    {\n+        ui->addressIn_VM->setValid(false);\n+        ui->statusLabel_VM->setStyleSheet(\"QLabel { color: red; }\");\n+        ui->statusLabel_VM->setText(tr(\"The entered address does not refer to a key.\") + QString(\" \") + tr(\"Please check the address and try again.\"));\n+        return;\n+    }\n+\n+    bool fInvalid = false;\n+    std::vector<unsigned char> vchSig = DecodeBase64(ui->signatureIn_VM->text().toStdString().c_str(), &fInvalid);\n+\n+    if (fInvalid)\n+    {\n+        ui->signatureIn_VM->setValid(false);\n+        ui->statusLabel_VM->setStyleSheet(\"QLabel { color: red; }\");\n+        ui->statusLabel_VM->setText(tr(\"The signature could not be decoded.\") + QString(\" \") + tr(\"Please check the signature and try again.\"));\n+        return;\n+    }\n+\n+    CDataStream ss(SER_GETHASH, 0);\n+    ss << strMessageMagic;\n+    ss << ui->messageIn_VM->document()->toPlainText().toStdString();\n+\n+    CKey key;\n+    if (!key.SetCompactSignature(Hash(ss.begin(), ss.end()), vchSig))\n+    {\n+        ui->signatureIn_VM->setValid(false);\n+        ui->statusLabel_VM->setStyleSheet(\"QLabel { color: red; }\");\n+        ui->statusLabel_VM->setText(tr(\"The signature did not match the message digest.\") + QString(\" \") + tr(\"Please check the signature and try again.\"));\n+        return;\n+    }\n+\n+    if (!(CBitcoinAddress(key.GetPubKey().GetID()) == addr))\n+    {\n+        ui->statusLabel_VM->setStyleSheet(\"QLabel { color: red; }\");\n+        ui->statusLabel_VM->setText(QString(\"<nobr>\") + tr(\"Message verification failed.\") + QString(\"</nobr>\"));\n+        return;\n+    }\n+\n+    ui->statusLabel_VM->setStyleSheet(\"QLabel { color: green; }\");\n+    ui->statusLabel_VM->setText(QString(\"<nobr>\") + tr(\"Message verified.\") + QString(\"</nobr>\"));\n+}\n+\n+void SignVerifyMessageDialog::on_clearButton_VM_clicked()\n+{\n+    ui->addressIn_VM->clear();\n+    ui->signatureIn_VM->clear();\n+    ui->messageIn_VM->clear();\n+    ui->statusLabel_VM->clear();\n+\n+    ui->addressIn_VM->setFocus();\n+}\n+\n+bool SignVerifyMessageDialog::eventFilter(QObject *object, QEvent *event)\n+{\n+    if (event->type() == QEvent::MouseButtonPress || event->type() == QEvent::FocusIn)\n+    {\n+        if (ui->tabWidget->currentIndex() == 0)\n+        {\n+            /* Clear status message on focus change */\n+            ui->statusLabel_SM->clear();\n+\n+            /* Select generated signature */\n+            if (object == ui->signatureOut_SM)\n+            {\n+                ui->signatureOut_SM->selectAll();\n+                return true;\n+            }\n+        }\n+        else if (ui->tabWidget->currentIndex() == 1)\n+        {\n+            /* Clear status message on focus change */\n+            ui->statusLabel_VM->clear();\n+        }\n+    }\n+    return QDialog::eventFilter(object, event);\n+}"
      },
      {
        "sha": "5569c8bf33b86bf08efad07d2dd39869169b88e4",
        "filename": "src/qt/signverifymessagedialog.h",
        "status": "added",
        "additions": 49,
        "deletions": 0,
        "changes": 49,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/47894585aeaa4f5475c50bc4415ed6ced868fbf7/src/qt/signverifymessagedialog.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/47894585aeaa4f5475c50bc4415ed6ced868fbf7/src/qt/signverifymessagedialog.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/signverifymessagedialog.h?ref=47894585aeaa4f5475c50bc4415ed6ced868fbf7",
        "patch": "@@ -0,0 +1,49 @@\n+#ifndef SIGNVERIFYMESSAGEDIALOG_H\n+#define SIGNVERIFYMESSAGEDIALOG_H\n+\n+#include <QDialog>\n+\n+namespace Ui {\n+    class SignVerifyMessageDialog;\n+}\n+class WalletModel;\n+\n+QT_BEGIN_NAMESPACE\n+QT_END_NAMESPACE\n+\n+class SignVerifyMessageDialog : public QDialog\n+{\n+    Q_OBJECT\n+\n+public:\n+    explicit SignVerifyMessageDialog(QWidget *parent = 0);\n+    ~SignVerifyMessageDialog();\n+\n+    void setModel(WalletModel *model);\n+    void setAddress_SM(QString address);\n+    void setAddress_VM(QString address);\n+\n+    void showTab_SM(bool fShow);\n+    void showTab_VM(bool fShow);\n+\n+protected:\n+    bool eventFilter(QObject *object, QEvent *event);\n+\n+private:\n+    Ui::SignVerifyMessageDialog *ui;\n+    WalletModel *model;\n+\n+private slots:\n+    /* sign message */\n+    void on_addressBookButton_SM_clicked();\n+    void on_pasteButton_SM_clicked();\n+    void on_signMessageButton_SM_clicked();\n+    void on_copySignatureButton_SM_clicked();\n+    void on_clearButton_SM_clicked();\n+    /* verify message */\n+    void on_addressBookButton_VM_clicked();\n+    void on_verifyMessageButton_VM_clicked();\n+    void on_clearButton_VM_clicked();\n+};\n+\n+#endif // SIGNVERIFYMESSAGEDIALOG_H"
      },
      {
        "sha": "92f58328a47569bb5cb2e79dacc98ba1035f9573",
        "filename": "src/qt/verifymessagedialog.cpp",
        "status": "removed",
        "additions": 0,
        "deletions": 119,
        "changes": 119,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6e3a1a374293a8a5adeb2ad464f7205e819585ee/src/qt/verifymessagedialog.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6e3a1a374293a8a5adeb2ad464f7205e819585ee/src/qt/verifymessagedialog.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/verifymessagedialog.cpp?ref=6e3a1a374293a8a5adeb2ad464f7205e819585ee",
        "patch": "@@ -1,119 +0,0 @@\n-#include \"verifymessagedialog.h\"\n-#include \"ui_verifymessagedialog.h\"\n-\n-#include <string>\n-#include <vector>\n-\n-#include <QDialog>\n-#include <QLabel>\n-#include <QLineEdit>\n-#include <QPlainTextEdit>\n-#include <QPushButton>\n-\n-#include \"main.h\"\n-#include \"wallet.h\"\n-#include \"walletmodel.h\"\n-#include \"guiutil.h\"\n-#include \"base58.h\"\n-\n-VerifyMessageDialog::VerifyMessageDialog(QWidget *parent) :\n-    QDialog(parent),\n-    ui(new Ui::VerifyMessageDialog)\n-{\n-    ui->setupUi(this);\n-\n-#if (QT_VERSION >= 0x040700)\n-    /* Do not move this to the XML file, Qt before 4.7 will choke on it */\n-    ui->lnAddress->setPlaceholderText(tr(\"Enter a Bitcoin address (e.g. 1NS17iag9jJgTHD1VXjvLCEnZuQ3rJDE9L)\"));\n-    ui->lnSig->setPlaceholderText(tr(\"Enter Bitcoin signature\"));\n-#endif\n-\n-    GUIUtil::setupAddressWidget(ui->lnAddress, this);\n-    ui->lnAddress->installEventFilter(this);\n-\n-    ui->lnSig->setFont(GUIUtil::bitcoinAddressFont());\n-\n-    ui->lnAddress->setFocus();\n-}\n-\n-VerifyMessageDialog::~VerifyMessageDialog()\n-{\n-    delete ui;\n-}\n-\n-void VerifyMessageDialog::on_verifyMessage_clicked()\n-{\n-    CBitcoinAddress addr(ui->lnAddress->text().toStdString());\n-    if (!addr.IsValid())\n-    {\n-        ui->lnAddress->setValid(false);\n-        ui->lblStatus->setStyleSheet(\"QLabel { color: red; }\");\n-        ui->lblStatus->setText(tr(\"\\\"%1\\\" is not a valid address.\").arg(ui->lnAddress->text()) + QString(\" \") + tr(\"Please check the address and try again.\"));\n-        return;\n-    }\n-    CKeyID keyID;\n-    if (!addr.GetKeyID(keyID))\n-    {\n-        ui->lnAddress->setValid(false);\n-        ui->lblStatus->setStyleSheet(\"QLabel { color: red; }\");\n-        ui->lblStatus->setText(tr(\"\\\"%1\\\" does not refer to a key.\").arg(ui->lnAddress->text()) + QString(\" \") + tr(\"Please check the address and try again.\"));\n-        return;\n-    }\n-\n-    bool fInvalid = false;\n-    std::vector<unsigned char> vchSig = DecodeBase64(ui->lnSig->text().toStdString().c_str(), &fInvalid);\n-\n-    if (fInvalid)\n-    {\n-        ui->lnSig->setValid(false);\n-        ui->lblStatus->setStyleSheet(\"QLabel { color: red; }\");\n-        ui->lblStatus->setText(tr(\"The signature could not be decoded.\") + QString(\" \") + tr(\"Please check the signature and try again.\"));\n-        return;\n-    }\n-\n-    CDataStream ss(SER_GETHASH, 0);\n-    ss << strMessageMagic;\n-    ss << ui->edMessage->document()->toPlainText().toStdString();\n-\n-    CKey key;\n-    if (!key.SetCompactSignature(Hash(ss.begin(), ss.end()), vchSig))\n-    {\n-        ui->lnSig->setValid(false);\n-        ui->lblStatus->setStyleSheet(\"QLabel { color: red; }\");\n-        ui->lblStatus->setText(tr(\"The signature did not match the message digest.\")+ QString(\" \") + tr(\"Please check the signature and try again.\"));\n-        return;\n-    }\n-\n-    if (!(CBitcoinAddress(key.GetPubKey().GetID()) == addr))\n-    {\n-        ui->lblStatus->setStyleSheet(\"QLabel { color: red; }\");\n-        ui->lblStatus->setText(QString(\"<nobr>\") + tr(\"Message verification failed.\") + QString(\"</nobr>\"));\n-        return;\n-    }\n-\n-    ui->lblStatus->setStyleSheet(\"QLabel { color: green; }\");\n-    ui->lblStatus->setText(QString(\"<nobr>\") + tr(\"Message verified.\") + QString(\"</nobr>\"));\n-}\n-\n-void VerifyMessageDialog::on_clearButton_clicked()\n-{\n-    ui->lnAddress->clear();\n-    ui->lnSig->clear();\n-    ui->edMessage->clear();\n-    ui->lblStatus->clear();\n-\n-    ui->edMessage->setFocus();\n-}\n-\n-bool VerifyMessageDialog::eventFilter(QObject *object, QEvent *event)\n-{\n-    if (object == ui->lnAddress && (event->type() == QEvent::MouseButtonPress ||\n-                                   event->type() == QEvent::FocusIn))\n-    {\n-        // set lnAddress to valid, as QEvent::FocusIn would not reach QValidatedLineEdit::focusInEvent\n-        ui->lnAddress->setValid(true);\n-        ui->lnAddress->selectAll();\n-        return true;\n-    }\n-    return QDialog::eventFilter(object, event);\n-}"
      },
      {
        "sha": "0bed442d4ce82df94628f895331f83a1acff0574",
        "filename": "src/qt/verifymessagedialog.h",
        "status": "removed",
        "additions": 0,
        "deletions": 33,
        "changes": 33,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6e3a1a374293a8a5adeb2ad464f7205e819585ee/src/qt/verifymessagedialog.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6e3a1a374293a8a5adeb2ad464f7205e819585ee/src/qt/verifymessagedialog.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/verifymessagedialog.h?ref=6e3a1a374293a8a5adeb2ad464f7205e819585ee",
        "patch": "@@ -1,33 +0,0 @@\n-#ifndef VERIFYMESSAGEDIALOG_H\n-#define VERIFYMESSAGEDIALOG_H\n-\n-#include <QDialog>\n-\n-namespace Ui {\n-    class VerifyMessageDialog;\n-}\n-class AddressTableModel;\n-\n-QT_BEGIN_NAMESPACE\n-QT_END_NAMESPACE\n-\n-class VerifyMessageDialog : public QDialog\n-{\n-    Q_OBJECT\n-\n-public:\n-    explicit VerifyMessageDialog(QWidget *parent);\n-    ~VerifyMessageDialog();\n-\n-protected:\n-    bool eventFilter(QObject *object, QEvent *event);\n-\n-private:\n-    Ui::VerifyMessageDialog *ui;\n-\n-private slots:\n-    void on_verifyMessage_clicked();\n-    void on_clearButton_clicked();\n-};\n-\n-#endif // VERIFYMESSAGEDIALOG_H"
      }
    ]
  }
]