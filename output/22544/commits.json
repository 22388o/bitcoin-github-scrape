[
  {
    "sha": "75ea9ecf11bfeb120c58dc6c62539021a94ef97c",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo3NWVhOWVjZjExYmZlYjEyMGM1OGRjNmM2MjUzOTAyMWE5NGVmOTdj",
    "commit": {
      "author": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2021-07-25T10:55:01Z"
      },
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2021-07-25T10:55:48Z"
      },
      "message": "cli -addrinfo: drop torv2, torv3 becomes onion per GetNetworkName()",
      "tree": {
        "sha": "d7f047e637c72065c15b100589b7a99c8f10a1a8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d7f047e637c72065c15b100589b7a99c8f10a1a8"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/75ea9ecf11bfeb120c58dc6c62539021a94ef97c",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEd6u7+MhX7zEv6RP5T1chs9Djkh0FAmD9Q08ACgkQT1chs9Dj\nkh28SQ/9GgRK70LKCKydmbzuzEAutx3t+wYKV14ygqvDKvhHJ9XsHB4MQqh9CGXR\ntnf+W5lkVPM2ptgZT7kXuD4HcYyHeLMZPXJJbo0FwUCaBNt938qRNy3/uAH8cAkP\nbdbO7F7gBOkmB8N4wgnbHxLBqLubXj+kRRV0ajsoRv1kd1K4de/flZSPY7d2p2L5\nipNEvh4YaPn/2AO7XMqjaTuRZnqkJlI0KNU6HJQeDwKv7zbu7Lk+rox466xk6x7d\nJNGW0IOiUfVM6Sc8+crlintV919OAMP/94/IIgUJJydrem8QJh8IS2s9eFuBK6po\n4Cf1ZWtSPFTGvzCbib/RcjUV0XzrQAom5bDgJ61mNDl2CfAWGYY1RJWCDVJoTUp+\n0L2YO0qQ6i4wG6fEWq2haRV+MnV3YxqE2ZACWpwVlMvbaAx2cQQHegeeJNlnV5Gu\nC8yOPnfV9gHE/9Jrs8fdruNNqjb5fujCyvIzzG/lJjpZYuYZKSWJYeoEi/XgcP8x\nsWSJIirwQPZrVJExOZ2nzTEg/9JPMmOj9LZQvLsHcHLUTuqpEAkz/X0IVcptSr/u\nACovoKMsQs7oI/5kgoFVZ8QyNdRWH+pLUa6f6hZqkBUT3dFgKd+2u1c4RNJ/0LzN\nO4v50ZN42Efinw9+1GKV4cFfIAJTzvL9XUu55gmxcruXiRQXQQU=\n=lQ68\n-----END PGP SIGNATURE-----\n-----BEGIN OPENTIMESTAMPS GIT TIMESTAMP-----\n\nAQHwIGqrUDLpi/rEwGp++vIBZrF6Sm/knNueXtPQZjT7bwqlCP/wEHps8eme2Ypa\nS0QRKT92+TEI8QRg/UNR8Aic12M4rCPQbQCD3+MNLvkMjiMiaHR0cHM6Ly9idGMu\nY2FsZW5kYXIuY2F0YWxsYXh5LmNvbf/wELY0ObMKuZnQc128h8VfhZYI8QRg/UNT\n8Ag4cBFWpKHqXACD3+MNLvkMjikoaHR0cHM6Ly9maW5uZXkuY2FsZW5kYXIuZXRl\ncm5pdHl3YWxsLmNvbf/wELb7e5rrYNhrT3T/pCK2ZpoI8QRg/UNR8AgE1qA0xhcf\nvQCD3+MNLvkMji4taHR0cHM6Ly9hbGljZS5idGMuY2FsZW5kYXIub3BlbnRpbWVz\ndGFtcHMub3Jn8BDtHp3OydRCT3utkHTvpOAHCPEEYP1DUvAI5dXw9uPXVbUAg9/j\nDS75DI4sK2h0dHBzOi8vYm9iLmJ0Yy5jYWxlbmRhci5vcGVudGltZXN0YW1wcy5v\ncmc=\n-----END OPENTIMESTAMPS GIT TIMESTAMP-----",
        "payload": "tree d7f047e637c72065c15b100589b7a99c8f10a1a8\nparent 2aa937e97af66206f9f128e59b47ec93cfb5e0b3\nauthor Jon Atack <jon@atack.com> 1627210501 +0200\ncommitter Jon Atack <jon@atack.com> 1627210548 +0200\n\ncli -addrinfo: drop torv2, torv3 becomes onion per GetNetworkName()\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/75ea9ecf11bfeb120c58dc6c62539021a94ef97c",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/75ea9ecf11bfeb120c58dc6c62539021a94ef97c",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/75ea9ecf11bfeb120c58dc6c62539021a94ef97c/comments",
    "author": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "2aa937e97af66206f9f128e59b47ec93cfb5e0b3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2aa937e97af66206f9f128e59b47ec93cfb5e0b3",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/2aa937e97af66206f9f128e59b47ec93cfb5e0b3"
      }
    ],
    "stats": {
      "total": 7,
      "additions": 2,
      "deletions": 5
    },
    "files": [
      {
        "sha": "f72804d29c1e2bb450dfe48c61503e7cb5f6f009",
        "filename": "src/bitcoin-cli.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 5,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/75ea9ecf11bfeb120c58dc6c62539021a94ef97c/src/bitcoin-cli.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/75ea9ecf11bfeb120c58dc6c62539021a94ef97c/src/bitcoin-cli.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/bitcoin-cli.cpp?ref=75ea9ecf11bfeb120c58dc6c62539021a94ef97c",
        "patch": "@@ -245,7 +245,7 @@ class BaseRequestHandler\n class AddrinfoRequestHandler : public BaseRequestHandler\n {\n private:\n-    static constexpr std::array m_networks{\"ipv4\", \"ipv6\", \"torv2\", \"torv3\", \"i2p\"};\n+    static constexpr std::array m_networks{\"ipv4\", \"ipv6\", \"onion\", \"i2p\"};\n     int8_t NetworkStringToId(const std::string& str) const\n     {\n         for (size_t i = 0; i < m_networks.size(); ++i) {\n@@ -271,13 +271,10 @@ class AddrinfoRequestHandler : public BaseRequestHandler\n         if (!nodes.empty() && nodes.at(0)[\"network\"].isNull()) {\n             throw std::runtime_error(\"-addrinfo requires bitcoind server to be running v22.0 and up\");\n         }\n-        // Count the number of peers we know by network, including torv2 versus torv3.\n+        // Count the number of peers known to our node, by network.\n         std::array<uint64_t, m_networks.size()> counts{{}};\n         for (const UniValue& node : nodes) {\n             std::string network_name{node[\"network\"].get_str()};\n-            if (network_name == \"onion\") {\n-                network_name = node[\"address\"].get_str().size() > 22 ? \"torv3\" : \"torv2\";\n-            }\n             const int8_t network_id{NetworkStringToId(network_name)};\n             if (network_id == UNKNOWN_NETWORK) continue;\n             ++counts.at(network_id);"
      }
    ]
  },
  {
    "sha": "49d503aefa74f11e5d93432987fa3775ed82c979",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo0OWQ1MDNhZWZhNzRmMTFlNWQ5MzQzMjk4N2ZhMzc3NWVkODJjOTc5",
    "commit": {
      "author": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2021-07-30T07:41:39Z"
      },
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2021-08-03T10:12:47Z"
      },
      "message": "doc: update -addrinfo in release-notes.md and tor.md",
      "tree": {
        "sha": "b5de9e14b30a816e2bf6f6415713f49056812d1f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b5de9e14b30a816e2bf6f6415713f49056812d1f"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/49d503aefa74f11e5d93432987fa3775ed82c979",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEd6u7+MhX7zEv6RP5T1chs9Djkh0FAmEJFrMACgkQT1chs9Dj\nkh3U6RAAoJBPjSRhppGTSNWd3AkJ9DQIgCYl+ErhwyRWS6EzcmRJUu3Ue+fT3XJD\nhgb1FrWNuOrilye6x0ZEZ3OB6ZJDzdWZft+LlDfL6tkIM+VZwN5tAnsDCRiMVnVP\nMC458O82uG1ljQzjlgG8nnI5f1xQIEybtOZKsmsuQu1Fco58getA2Hlot//0CTK0\nJSSQ8Cl1qQ8l9FAgUQKMtJ1CT6Ygh2ARucv2xEWOI7E/FHKykfiYtTjuNL2m5S1r\nNK02awZO3UHAW8ZZGEV5ptbsK6eNWvgrrjT8XO0xmYsMmJk/TMuRvLVWoeXszfrk\nGFqRQJF/RWekXQZbZ6rE4G2MazrlaY6Pgva/D+IEc2s8oPYIww02X/y6Jf2szciU\nCYALaxyjfG75Cg1nkn+W+qlLdCG2QsZ+6kfq0k9LpC+fMIYgpNpt1bp7zUPJTnhS\ni2GecqEEtTprEZwElVpvjrN3u36yB32h6LCjosVjk0ny1a5UPS/zIIKak45/ra50\n4LYwCWSl/WBRDN8Nv3jg/TU9p89yeVt+bwnOLiSoXW7RMNMFRN7tTdcOBkhogmv5\nVU71eyj36hqgEtZ4mbxpDitwiKbGJdRiA5VsQinbu8lMOSVbKHTHBX80RHJyo+2s\nGzG4rNRMtXevlz3+WyhpgQow//T1A+aETmpcEVGNMvy/pKWBu5M=\n=604i\n-----END PGP SIGNATURE-----\n-----BEGIN OPENTIMESTAMPS GIT TIMESTAMP-----\n\nAQHwIBaUylD/FjOqLiDXJlzOzWmdj7j0SVV9XJiXhrER3rVyCP/wEAUm8ptGGX0q\ntli9mfu1fhwI8CCdz7o3FVxk90Ry+zjx6f5bwu4hX5BdLVIpS62eW0fhUgjwIJhF\nYe5PFekOAGu2ctWEDD+FcZ4heY8HPuVt8/L8sd5OCPEEYQkWtvAIKzMLWrSQq6AA\ng9/jDS75DI4pKGh0dHBzOi8vZmlubmV5LmNhbGVuZGFyLmV0ZXJuaXR5d2FsbC5j\nb23/8BAUqmlfRtAwsVPOwxojVStUCPEEYQkWtfAIpeGmNq4Nt68Ag9/jDS75DI4u\nLWh0dHBzOi8vYWxpY2UuYnRjLmNhbGVuZGFyLm9wZW50aW1lc3RhbXBzLm9yZ//w\nEIkAH8RP5DrAIfeNI5phrksI8QRhCRa18Ahv2pw9j9wt2wCD3+MNLvkMjiwraHR0\ncHM6Ly9ib2IuYnRjLmNhbGVuZGFyLm9wZW50aW1lc3RhbXBzLm9yZ/AQiyjg0ni1\nQfIOwXQ3HgDOiAjxBGEJFrbwCHZj/tMcunaLAIPf4w0u+QyOIyJodHRwczovL2J0\nYy5jYWxlbmRhci5jYXRhbGxheHkuY29t\n-----END OPENTIMESTAMPS GIT TIMESTAMP-----",
        "payload": "tree b5de9e14b30a816e2bf6f6415713f49056812d1f\nparent 75ea9ecf11bfeb120c58dc6c62539021a94ef97c\nauthor Jon Atack <jon@atack.com> 1627630899 +0200\ncommitter Jon Atack <jon@atack.com> 1627985567 +0200\n\ndoc: update -addrinfo in release-notes.md and tor.md\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/49d503aefa74f11e5d93432987fa3775ed82c979",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/49d503aefa74f11e5d93432987fa3775ed82c979",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/49d503aefa74f11e5d93432987fa3775ed82c979/comments",
    "author": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "75ea9ecf11bfeb120c58dc6c62539021a94ef97c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/75ea9ecf11bfeb120c58dc6c62539021a94ef97c",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/75ea9ecf11bfeb120c58dc6c62539021a94ef97c"
      }
    ],
    "stats": {
      "total": 11,
      "additions": 7,
      "deletions": 4
    },
    "files": [
      {
        "sha": "81e6f36dbffcc6590a739fc0be85227d33b39c65",
        "filename": "doc/release-notes.md",
        "status": "modified",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/49d503aefa74f11e5d93432987fa3775ed82c979/doc/release-notes.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/49d503aefa74f11e5d93432987fa3775ed82c979/doc/release-notes.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/doc/release-notes.md?ref=49d503aefa74f11e5d93432987fa3775ed82c979",
        "patch": "@@ -77,6 +77,10 @@ Tools and Utilities\n \n - Update `-getinfo` to return data in a user-friendly format that also reduces vertical space. (#21832)\n \n+- CLI `-addrinfo` now returns a single field for the number of `onion` addresses\n+  known to the node instead of separate `torv2` and `torv3` fields, as support\n+  for Tor V2 addresses was removed from Bitcoin Core in 22.0. (#22544)\n+\n Wallet\n ------\n "
      },
      {
        "sha": "a1a64bfe6fca9c28c248614c52b5e102f43529b8",
        "filename": "doc/tor.md",
        "status": "modified",
        "additions": 3,
        "deletions": 4,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/49d503aefa74f11e5d93432987fa3775ed82c979/doc/tor.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/49d503aefa74f11e5d93432987fa3775ed82c979/doc/tor.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/doc/tor.md?ref=49d503aefa74f11e5d93432987fa3775ed82c979",
        "patch": "@@ -23,10 +23,9 @@ There are several ways to see your local onion address in Bitcoin Core:\n You may set the `-debug=tor` config logging option to have additional\n information in the debug log about your Tor configuration.\n \n-CLI `-addrinfo` returns the number of addresses known to your node per network\n-type, including Tor v2 and v3. This is useful to see how many onion addresses\n-are known to your node for `-onlynet=onion` and how many Tor v3 addresses it\n-knows when upgrading to Bitcoin Core v22.0 and up that supports Tor v3 only.\n+CLI `-addrinfo` returns the number of addresses known to your node per\n+network. This can be useful to see how many onion peers your node knows,\n+e.g. for `-onlynet=onion`.\n \n ## 1. Run Bitcoin Core behind a Tor proxy\n "
      }
    ]
  }
]