[
  {
    "sha": "a6d3a1ff9e7df07182bea0f0bf5ba8b6e56234d0",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzphNmQzYTFmZjllN2RmMDcxODJiZWEwZjBiZjViYThiNmU1NjIzNGQw",
    "commit": {
      "author": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2011-12-23T15:14:57Z"
      },
      "committer": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2012-01-26T19:35:52Z"
      },
      "message": "Bitcoin-Qt signmessage GUI",
      "tree": {
        "sha": "79eb64f0322a6b6fadaa72cbce3b3fc369a2a007",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/79eb64f0322a6b6fadaa72cbce3b3fc369a2a007"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a6d3a1ff9e7df07182bea0f0bf5ba8b6e56234d0",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a6d3a1ff9e7df07182bea0f0bf5ba8b6e56234d0",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/a6d3a1ff9e7df07182bea0f0bf5ba8b6e56234d0",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a6d3a1ff9e7df07182bea0f0bf5ba8b6e56234d0/comments",
    "author": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following{/other_user}",
      "gists_url": "https://api.github.com/users/luke-jr/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events{/privacy}",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "70f55355e29c8e45b607e782c5d76609d23cc858",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/70f55355e29c8e45b607e782c5d76609d23cc858",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/70f55355e29c8e45b607e782c5d76609d23cc858"
      }
    ],
    "stats": {
      "total": 420,
      "additions": 418,
      "deletions": 2
    },
    "files": [
      {
        "sha": "4913d0fec1005a80fb8aaa67c5bd3885eb098ade",
        "filename": "bitcoin-qt.pro",
        "status": "modified",
        "additions": 9,
        "deletions": 0,
        "changes": 9,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a6d3a1ff9e7df07182bea0f0bf5ba8b6e56234d0/bitcoin-qt.pro",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a6d3a1ff9e7df07182bea0f0bf5ba8b6e56234d0/bitcoin-qt.pro",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/bitcoin-qt.pro?ref=a6d3a1ff9e7df07182bea0f0bf5ba8b6e56234d0",
        "patch": "@@ -68,6 +68,12 @@ contains(USE_SSL, 1) {\n     DEFINES += USE_SSL\n }\n \n+# use: qmake \"FIRST_CLASS_MESSAGING=1\"\n+contains(FIRST_CLASS_MESSAGING, 1) {\n+    message(Building with first-class messaging)\n+    DEFINES += FIRST_CLASS_MESSAGING\n+}\n+\n contains(BITCOIN_NEED_QT_PLUGINS, 1) {\n     DEFINES += BITCOIN_NEED_QT_PLUGINS\n     QTPLUGIN += qcncodecs qjpcodecs qtwcodecs qkrcodecs\n@@ -91,6 +97,7 @@ HEADERS += src/qt/bitcoingui.h \\\n     src/qt/optionsdialog.h \\\n     src/qt/sendcoinsdialog.h \\\n     src/qt/addressbookpage.h \\\n+    src/qt/messagepage.h \\\n     src/qt/aboutdialog.h \\\n     src/qt/editaddressdialog.h \\\n     src/qt/bitcoinaddressvalidator.h \\\n@@ -154,6 +161,7 @@ SOURCES += src/qt/bitcoin.cpp src/qt/bitcoingui.cpp \\\n     src/qt/optionsdialog.cpp \\\n     src/qt/sendcoinsdialog.cpp \\\n     src/qt/addressbookpage.cpp \\\n+    src/qt/messagepage.cpp \\\n     src/qt/aboutdialog.cpp \\\n     src/qt/editaddressdialog.cpp \\\n     src/qt/bitcoinaddressvalidator.cpp \\\n@@ -204,6 +212,7 @@ RESOURCES += \\\n FORMS += \\\n     src/qt/forms/sendcoinsdialog.ui \\\n     src/qt/forms/addressbookpage.ui \\\n+    src/qt/forms/messagepage.ui \\\n     src/qt/forms/aboutdialog.ui \\\n     src/qt/forms/editaddressdialog.ui \\\n     src/qt/forms/transactiondescdialog.ui \\"
      },
      {
        "sha": "03c01f7b2160fd71f665f62cfc1f07d387d8fdba",
        "filename": "src/bitcoinrpc.cpp",
        "status": "modified",
        "additions": 0,
        "deletions": 2,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a6d3a1ff9e7df07182bea0f0bf5ba8b6e56234d0/src/bitcoinrpc.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a6d3a1ff9e7df07182bea0f0bf5ba8b6e56234d0/src/bitcoinrpc.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/bitcoinrpc.cpp?ref=a6d3a1ff9e7df07182bea0f0bf5ba8b6e56234d0",
        "patch": "@@ -589,8 +589,6 @@ Value sendtoaddress(const Array& params, bool fHelp)\n     return wtx.GetHash().GetHex();\n }\n \n-static const string strMessageMagic = \"Bitcoin Signed Message:\\n\";\n-\n Value signmessage(const Array& params, bool fHelp)\n {\n     if (fHelp || params.size() != 2)"
      },
      {
        "sha": "9e13f7a36e3aa43f4664da6f860185965619872e",
        "filename": "src/main.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a6d3a1ff9e7df07182bea0f0bf5ba8b6e56234d0/src/main.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a6d3a1ff9e7df07182bea0f0bf5ba8b6e56234d0/src/main.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/main.cpp?ref=a6d3a1ff9e7df07182bea0f0bf5ba8b6e56234d0",
        "patch": "@@ -53,6 +53,9 @@ map<uint256, CDataStream*> mapOrphanTransactions;\n multimap<uint256, CDataStream*> mapOrphanTransactionsByPrev;\n \n \n+const string strMessageMagic = \"Bitcoin Signed Message:\\n\";\n+\n+\n double dHashesPerSec;\n int64 nHPSTimerStart;\n "
      },
      {
        "sha": "825c81e48509b08de674f519698df5c4b3cafa53",
        "filename": "src/main.h",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a6d3a1ff9e7df07182bea0f0bf5ba8b6e56234d0/src/main.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a6d3a1ff9e7df07182bea0f0bf5ba8b6e56234d0/src/main.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/main.h?ref=a6d3a1ff9e7df07182bea0f0bf5ba8b6e56234d0",
        "patch": "@@ -72,6 +72,7 @@ extern uint64 nPooledTx;\n extern unsigned int nTransactionsUpdated;\n extern uint64 nLastBlockTx;\n extern uint64 nLastBlockSize;\n+extern const std::string strMessageMagic;\n extern double dHashesPerSec;\n extern int64 nHPSTimerStart;\n extern int64 nTimeBestReceived;"
      },
      {
        "sha": "b5a798ca31f233c295e21981c4153748bc8be9bd",
        "filename": "src/qt/addressbookpage.cpp",
        "status": "modified",
        "additions": 22,
        "deletions": 0,
        "changes": 22,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a6d3a1ff9e7df07182bea0f0bf5ba8b6e56234d0/src/qt/addressbookpage.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a6d3a1ff9e7df07182bea0f0bf5ba8b6e56234d0/src/qt/addressbookpage.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/addressbookpage.cpp?ref=a6d3a1ff9e7df07182bea0f0bf5ba8b6e56234d0",
        "patch": "@@ -2,6 +2,7 @@\n #include \"ui_addressbookpage.h\"\n \n #include \"addresstablemodel.h\"\n+#include \"bitcoingui.h\"\n #include \"editaddressdialog.h\"\n #include \"csvmodelwriter.h\"\n #include \"guiutil.h\"\n@@ -156,6 +157,24 @@ void AddressBookPage::onEditAction()\n     dlg.exec();\n }\n \n+void AddressBookPage::on_signMessage_clicked()\n+{\n+    QTableView *table = ui->tableView;\n+    QModelIndexList indexes = table->selectionModel()->selectedRows(AddressTableModel::Address);\n+    QString addr;\n+\n+    foreach (QModelIndex index, indexes)\n+    {\n+        QVariant address = index.data();\n+        addr = address.toString();\n+    }\n+\n+    QObject *qoGUI = parent()->parent();\n+    BitcoinGUI *gui = qobject_cast<BitcoinGUI *>(qoGUI);\n+    if (gui)\n+        gui->gotoMessagePage(addr);\n+}\n+\n void AddressBookPage::on_newAddressButton_clicked()\n {\n     if(!model)\n@@ -207,11 +226,13 @@ void AddressBookPage::selectionChanged()\n             // In sending tab, allow deletion of selection\n             ui->deleteButton->setEnabled(true);\n             deleteAction->setEnabled(true);\n+            ui->signMessage->setEnabled(false);\n             break;\n         case ReceivingTab:\n             // Deleting receiving addresses, however, is not allowed\n             ui->deleteButton->setEnabled(false);\n             deleteAction->setEnabled(false);\n+            ui->signMessage->setEnabled(true);\n             break;\n         }\n         ui->copyToClipboard->setEnabled(true);\n@@ -222,6 +243,7 @@ void AddressBookPage::selectionChanged()\n         ui->deleteButton->setEnabled(false);\n         ui->showQRCode->setEnabled(false);\n         ui->copyToClipboard->setEnabled(false);\n+        ui->signMessage->setEnabled(false);\n     }\n }\n "
      },
      {
        "sha": "b2cf2db97943088fdccd6cd2c62f674aed3d87a7",
        "filename": "src/qt/addressbookpage.h",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a6d3a1ff9e7df07182bea0f0bf5ba8b6e56234d0/src/qt/addressbookpage.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a6d3a1ff9e7df07182bea0f0bf5ba8b6e56234d0/src/qt/addressbookpage.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/addressbookpage.h?ref=a6d3a1ff9e7df07182bea0f0bf5ba8b6e56234d0",
        "patch": "@@ -57,6 +57,7 @@ private slots:\n     void on_newAddressButton_clicked();\n     /** Copy address of currently selected address entry to clipboard */\n     void on_copyToClipboard_clicked();\n+    void on_signMessage_clicked();\n     void selectionChanged();\n     void on_showQRCode_clicked();\n     /** Spawn contextual menu (right mouse menu) for address book entry */"
      },
      {
        "sha": "3e0a12b9cf14cb6a0fd97f2fb922faad0ae18238",
        "filename": "src/qt/bitcoingui.cpp",
        "status": "modified",
        "additions": 47,
        "deletions": 0,
        "changes": 47,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a6d3a1ff9e7df07182bea0f0bf5ba8b6e56234d0/src/qt/bitcoingui.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a6d3a1ff9e7df07182bea0f0bf5ba8b6e56234d0/src/qt/bitcoingui.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoingui.cpp?ref=a6d3a1ff9e7df07182bea0f0bf5ba8b6e56234d0",
        "patch": "@@ -8,6 +8,7 @@\n #include \"transactiontablemodel.h\"\n #include \"addressbookpage.h\"\n #include \"sendcoinsdialog.h\"\n+#include \"messagepage.h\"\n #include \"optionsdialog.h\"\n #include \"aboutdialog.h\"\n #include \"clientmodel.h\"\n@@ -99,12 +100,17 @@ BitcoinGUI::BitcoinGUI(QWidget *parent):\n \n     sendCoinsPage = new SendCoinsDialog(this);\n \n+    messagePage = new MessagePage(this);\n+\n     centralWidget = new QStackedWidget(this);\n     centralWidget->addWidget(overviewPage);\n     centralWidget->addWidget(transactionsPage);\n     centralWidget->addWidget(addressBookPage);\n     centralWidget->addWidget(receiveCoinsPage);\n     centralWidget->addWidget(sendCoinsPage);\n+#ifdef FIRST_CLASS_MESSAGING\n+    centralWidget->addWidget(messagePage);\n+#endif\n     setCentralWidget(centralWidget);\n \n     // Create status bar\n@@ -192,6 +198,13 @@ void BitcoinGUI::createActions()\n     sendCoinsAction->setShortcut(QKeySequence(Qt::ALT + Qt::Key_2));\n     tabGroup->addAction(sendCoinsAction);\n \n+    messageAction = new QAction(QIcon(\":/icons/edit\"), tr(\"Sign &message\"), this);\n+    messageAction->setToolTip(tr(\"Prove you control an address\"));\n+#ifdef FIRST_CLASS_MESSAGING\n+    messageAction->setCheckable(true);\n+#endif\n+    tabGroup->addAction(messageAction);\n+\n     connect(overviewAction, SIGNAL(triggered()), this, SLOT(show()));\n     connect(overviewAction, SIGNAL(triggered()), this, SLOT(gotoOverviewPage()));\n     connect(historyAction, SIGNAL(triggered()), this, SLOT(show()));\n@@ -202,6 +215,8 @@ void BitcoinGUI::createActions()\n     connect(receiveCoinsAction, SIGNAL(triggered()), this, SLOT(gotoReceiveCoinsPage()));\n     connect(sendCoinsAction, SIGNAL(triggered()), this, SLOT(show()));\n     connect(sendCoinsAction, SIGNAL(triggered()), this, SLOT(gotoSendCoinsPage()));\n+    connect(messageAction, SIGNAL(triggered()), this, SLOT(show()));\n+    connect(messageAction, SIGNAL(triggered()), this, SLOT(gotoMessagePage()));\n \n     quitAction = new QAction(QIcon(\":/icons/quit\"), tr(\"E&xit\"), this);\n     quitAction->setToolTip(tr(\"Quit application\"));\n@@ -247,6 +262,10 @@ void BitcoinGUI::createMenuBar()\n \n     // Configure the menus\n     QMenu *file = appMenuBar->addMenu(tr(\"&File\"));\n+#ifndef FIRST_CLASS_MESSAGING\n+    file->addAction(messageAction);\n+    file->addSeparator();\n+#endif\n     file->addAction(quitAction);\n \n     QMenu *settings = appMenuBar->addMenu(tr(\"&Settings\"));\n@@ -269,6 +288,9 @@ void BitcoinGUI::createToolBars()\n     toolbar->addAction(receiveCoinsAction);\n     toolbar->addAction(historyAction);\n     toolbar->addAction(addressBookAction);\n+#ifdef FIRST_CLASS_MESSAGING\n+    toolbar->addAction(messageAction);\n+#endif\n \n     QToolBar *toolbar2 = addToolBar(tr(\"Actions toolbar\"));\n     toolbar2->setToolButtonStyle(Qt::ToolButtonTextBesideIcon);\n@@ -323,6 +345,7 @@ void BitcoinGUI::setWalletModel(WalletModel *walletModel)\n         addressBookPage->setModel(walletModel->getAddressTableModel());\n         receiveCoinsPage->setModel(walletModel->getAddressTableModel());\n         sendCoinsPage->setModel(walletModel);\n+        messagePage->setModel(walletModel);\n \n         setEncryptionStatus(walletModel->getEncryptionStatus());\n         connect(walletModel, SIGNAL(encryptionStatusChanged(int)), this, SLOT(setEncryptionStatus(int)));\n@@ -358,6 +381,10 @@ void BitcoinGUI::createTrayIcon()\n     // Configuration of the tray icon (or dock icon) icon menu\n     trayIconMenu->addAction(openBitcoinAction);\n     trayIconMenu->addSeparator();\n+    trayIconMenu->addAction(messageAction);\n+#ifndef FIRST_CLASS_MESSAGING\n+    trayIconMenu->addSeparator();\n+#endif\n     trayIconMenu->addAction(receiveCoinsAction);\n     trayIconMenu->addAction(sendCoinsAction);\n     trayIconMenu->addSeparator();\n@@ -648,6 +675,26 @@ void BitcoinGUI::gotoSendCoinsPage()\n     disconnect(exportAction, SIGNAL(triggered()), 0, 0);\n }\n \n+void BitcoinGUI::gotoMessagePage()\n+{\n+#ifdef FIRST_CLASS_MESSAGING\n+    messageAction->setChecked(true);\n+    centralWidget->setCurrentWidget(messagePage);\n+\n+    exportAction->setEnabled(false);\n+    disconnect(exportAction, SIGNAL(triggered()), 0, 0);\n+#else\n+    messagePage->show();\n+    messagePage->setFocus();\n+#endif\n+}\n+\n+void BitcoinGUI::gotoMessagePage(QString addr)\n+{\n+    gotoMessagePage();\n+    messagePage->setAddress(addr);\n+}\n+\n void BitcoinGUI::dragEnterEvent(QDragEnterEvent *event)\n {\n     // Accept only URLs"
      },
      {
        "sha": "09ad89a894054f7fc3262622941256ceb53683fd",
        "filename": "src/qt/bitcoingui.h",
        "status": "modified",
        "additions": 6,
        "deletions": 0,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a6d3a1ff9e7df07182bea0f0bf5ba8b6e56234d0/src/qt/bitcoingui.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a6d3a1ff9e7df07182bea0f0bf5ba8b6e56234d0/src/qt/bitcoingui.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoingui.h?ref=a6d3a1ff9e7df07182bea0f0bf5ba8b6e56234d0",
        "patch": "@@ -11,6 +11,7 @@ class TransactionView;\n class OverviewPage;\n class AddressBookPage;\n class SendCoinsDialog;\n+class MessagePage;\n class Notificator;\n \n QT_BEGIN_NAMESPACE\n@@ -62,6 +63,7 @@ class BitcoinGUI : public QMainWindow\n     AddressBookPage *addressBookPage;\n     AddressBookPage *receiveCoinsPage;\n     SendCoinsDialog *sendCoinsPage;\n+    MessagePage *messagePage;\n \n     QLabel *labelEncryptionIcon;\n     QLabel *labelConnectionsIcon;\n@@ -75,6 +77,7 @@ class BitcoinGUI : public QMainWindow\n     QAction *quitAction;\n     QAction *sendCoinsAction;\n     QAction *addressBookAction;\n+    QAction *messageAction;\n     QAction *aboutAction;\n     QAction *receiveCoinsAction;\n     QAction *optionsAction;\n@@ -125,6 +128,9 @@ public slots:\n     void askFee(qint64 nFeeRequired, bool *payFee);\n     void handleURL(QString strURL);\n \n+    void gotoMessagePage();\n+    void gotoMessagePage(QString);\n+\n private slots:\n     /** Switch to overview (home) page */\n     void gotoOverviewPage();"
      },
      {
        "sha": "b31a9ce997fb9c3f3aa04bef61308234a4396cda",
        "filename": "src/qt/forms/addressbookpage.ui",
        "status": "modified",
        "additions": 14,
        "deletions": 0,
        "changes": 14,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a6d3a1ff9e7df07182bea0f0bf5ba8b6e56234d0/src/qt/forms/addressbookpage.ui",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a6d3a1ff9e7df07182bea0f0bf5ba8b6e56234d0/src/qt/forms/addressbookpage.ui",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/forms/addressbookpage.ui?ref=a6d3a1ff9e7df07182bea0f0bf5ba8b6e56234d0",
        "patch": "@@ -90,6 +90,20 @@\n        </property>\n       </widget>\n      </item>\n+     <item>\n+      <widget class=\"QPushButton\" name=\"signMessage\">\n+       <property name=\"toolTip\">\n+        <string>Sign a message to prove you own this address</string>\n+       </property>\n+       <property name=\"text\">\n+        <string>&amp;Sign Message</string>\n+       </property>\n+       <property name=\"icon\">\n+        <iconset resource=\"../bitcoin.qrc\">\n+         <normaloff>:/icons/edit</normaloff>:/icons/edit</iconset>\n+       </property>\n+      </widget>\n+     </item>\n      <item>\n       <widget class=\"QPushButton\" name=\"deleteButton\">\n        <property name=\"toolTip\">"
      },
      {
        "sha": "8afa4b59ddf9a4abc5bc203a499c2247f91a2a06",
        "filename": "src/qt/forms/messagepage.ui",
        "status": "added",
        "additions": 170,
        "deletions": 0,
        "changes": 170,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a6d3a1ff9e7df07182bea0f0bf5ba8b6e56234d0/src/qt/forms/messagepage.ui",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a6d3a1ff9e7df07182bea0f0bf5ba8b6e56234d0/src/qt/forms/messagepage.ui",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/forms/messagepage.ui?ref=a6d3a1ff9e7df07182bea0f0bf5ba8b6e56234d0",
        "patch": "@@ -0,0 +1,170 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<ui version=\"4.0\">\n+ <class>MessagePage</class>\n+ <widget class=\"QWidget\" name=\"MessagePage\">\n+  <property name=\"geometry\">\n+   <rect>\n+    <x>0</x>\n+    <y>0</y>\n+    <width>627</width>\n+    <height>380</height>\n+   </rect>\n+  </property>\n+  <property name=\"windowTitle\">\n+   <string>Message</string>\n+  </property>\n+  <layout class=\"QVBoxLayout\" name=\"verticalLayout\">\n+   <item>\n+    <widget class=\"QLabel\" name=\"labelExplanation\">\n+     <property name=\"text\">\n+      <string>You can sign messages with your addresses to prove you own them. Be careful to only sign statement you agree to with full details, as phishing attacks may try to trick you into signing access to them.</string>\n+     </property>\n+     <property name=\"textFormat\">\n+      <enum>Qt::AutoText</enum>\n+     </property>\n+     <property name=\"wordWrap\">\n+      <bool>true</bool>\n+     </property>\n+    </widget>\n+   </item>\n+   <item>\n+    <layout class=\"QHBoxLayout\" name=\"horizontalLayout_3\">\n+     <property name=\"spacing\">\n+      <number>0</number>\n+     </property>\n+     <item>\n+      <widget class=\"QValidatedLineEdit\" name=\"signFrom\">\n+       <property name=\"toolTip\">\n+        <string>The address to send the payment to  (e.g. 1NS17iag9jJgTHD1VXjvLCEnZuQ3rJDE9L)</string>\n+       </property>\n+       <property name=\"maxLength\">\n+        <number>34</number>\n+       </property>\n+      </widget>\n+     </item>\n+     <item>\n+      <widget class=\"QPushButton\" name=\"addressBookButton\">\n+       <property name=\"toolTip\">\n+        <string>Choose adress from address book</string>\n+       </property>\n+       <property name=\"text\">\n+        <string/>\n+       </property>\n+       <property name=\"icon\">\n+        <iconset resource=\"../bitcoin.qrc\">\n+         <normaloff>:/icons/address-book</normaloff>:/icons/address-book</iconset>\n+       </property>\n+       <property name=\"shortcut\">\n+        <string>Alt+A</string>\n+       </property>\n+       <property name=\"autoDefault\">\n+        <bool>false</bool>\n+       </property>\n+       <property name=\"flat\">\n+        <bool>false</bool>\n+       </property>\n+      </widget>\n+     </item>\n+     <item>\n+      <widget class=\"QPushButton\" name=\"pasteButton\">\n+       <property name=\"toolTip\">\n+        <string>Paste address from clipboard</string>\n+       </property>\n+       <property name=\"text\">\n+        <string/>\n+       </property>\n+       <property name=\"icon\">\n+        <iconset resource=\"../bitcoin.qrc\">\n+         <normaloff>:/icons/editpaste</normaloff>:/icons/editpaste</iconset>\n+       </property>\n+       <property name=\"shortcut\">\n+        <string>Alt+P</string>\n+       </property>\n+       <property name=\"autoDefault\">\n+        <bool>false</bool>\n+       </property>\n+      </widget>\n+     </item>\n+    </layout>\n+   </item>\n+   <item>\n+    <widget class=\"QPlainTextEdit\" name=\"message\">\n+     <property name=\"toolTip\">\n+      <string>Enter the message you want to sign here</string>\n+     </property>\n+    </widget>\n+   </item>\n+   <item>\n+    <widget class=\"QLineEdit\" name=\"signature\">\n+     <property name=\"font\">\n+      <font>\n+       <italic>true</italic>\n+      </font>\n+     </property>\n+     <property name=\"text\">\n+      <string>Click &quot;Sign Message&quot; to get signature</string>\n+     </property>\n+     <property name=\"readOnly\">\n+      <bool>true</bool>\n+     </property>\n+    </widget>\n+   </item>\n+   <item>\n+    <layout class=\"QHBoxLayout\" name=\"horizontalLayout\">\n+     <item>\n+      <widget class=\"QPushButton\" name=\"signMessage\">\n+       <property name=\"toolTip\">\n+        <string>Sign a message to prove you own this address</string>\n+       </property>\n+       <property name=\"text\">\n+        <string>&amp;Sign Message</string>\n+       </property>\n+       <property name=\"icon\">\n+        <iconset resource=\"../bitcoin.qrc\">\n+         <normaloff>:/icons/edit</normaloff>:/icons/edit</iconset>\n+       </property>\n+      </widget>\n+     </item>\n+     <item>\n+      <widget class=\"QPushButton\" name=\"copyToClipboard\">\n+       <property name=\"toolTip\">\n+        <string>Copy the currently selected address to the system clipboard</string>\n+       </property>\n+       <property name=\"text\">\n+        <string>&amp;Copy to Clipboard</string>\n+       </property>\n+       <property name=\"icon\">\n+        <iconset resource=\"../bitcoin.qrc\">\n+         <normaloff>:/icons/editcopy</normaloff>:/icons/editcopy</iconset>\n+       </property>\n+      </widget>\n+     </item>\n+     <item>\n+      <spacer name=\"horizontalSpacer\">\n+       <property name=\"orientation\">\n+        <enum>Qt::Horizontal</enum>\n+       </property>\n+       <property name=\"sizeHint\" stdset=\"0\">\n+        <size>\n+         <width>40</width>\n+         <height>20</height>\n+        </size>\n+       </property>\n+      </spacer>\n+     </item>\n+    </layout>\n+   </item>\n+  </layout>\n+ </widget>\n+ <customwidgets>\n+  <customwidget>\n+   <class>QValidatedLineEdit</class>\n+   <extends>QLineEdit</extends>\n+   <header>qvalidatedlineedit.h</header>\n+  </customwidget>\n+ </customwidgets>\n+ <resources>\n+  <include location=\"../bitcoin.qrc\"/>\n+ </resources>\n+ <connections/>\n+</ui>"
      },
      {
        "sha": "dee1837ed67483c05d0f9e8aa50caf114bfde25d",
        "filename": "src/qt/messagepage.cpp",
        "status": "added",
        "additions": 107,
        "deletions": 0,
        "changes": 107,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a6d3a1ff9e7df07182bea0f0bf5ba8b6e56234d0/src/qt/messagepage.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a6d3a1ff9e7df07182bea0f0bf5ba8b6e56234d0/src/qt/messagepage.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/messagepage.cpp?ref=a6d3a1ff9e7df07182bea0f0bf5ba8b6e56234d0",
        "patch": "@@ -0,0 +1,107 @@\n+#include <string>\n+#include <vector>\n+\n+#include \"main.h\"\n+#include \"wallet.h\"\n+#include \"init.h\"\n+#include \"util.h\"\n+\n+#include \"messagepage.h\"\n+#include \"ui_messagepage.h\"\n+\n+#include \"addressbookpage.h\"\n+#include \"guiutil.h\"\n+#include \"walletmodel.h\"\n+\n+#include <QClipboard>\n+#include <QInputDialog>\n+#include <QList>\n+#include <QListWidgetItem>\n+#include <QMessageBox>\n+\n+MessagePage::MessagePage(QWidget *parent) :\n+    QDialog(parent),\n+    ui(new Ui::MessagePage)\n+{\n+    ui->setupUi(this);\n+\n+    GUIUtil::setupAddressWidget(ui->signFrom, this);\n+}\n+\n+MessagePage::~MessagePage()\n+{\n+    delete ui;\n+}\n+\n+void MessagePage::setModel(WalletModel *model)\n+{\n+    this->model = model;\n+}\n+\n+void MessagePage::setAddress(QString addr)\n+{\n+    ui->signFrom->setText(addr);\n+    ui->message->setFocus();\n+}\n+\n+void MessagePage::on_pasteButton_clicked()\n+{\n+    setAddress(QApplication::clipboard()->text());\n+}\n+\n+void MessagePage::on_addressBookButton_clicked()\n+{\n+    AddressBookPage dlg(AddressBookPage::ForSending, AddressBookPage::ReceivingTab, this);\n+    dlg.setModel(model->getAddressTableModel());\n+    if(dlg.exec())\n+    {\n+        setAddress(dlg.getReturnValue());\n+    }\n+}\n+\n+void MessagePage::on_copyToClipboard_clicked()\n+{\n+    QApplication::clipboard()->setText(ui->signature->text());\n+}\n+\n+void MessagePage::on_signMessage_clicked()\n+{\n+    QString address = ui->signFrom->text();\n+\n+    CBitcoinAddress addr(address.toStdString());\n+    if (!addr.IsValid())\n+    {\n+        QMessageBox::critical(this, tr(\"Error signing\"), tr(\"%1 is not a valid address.\").arg(address),\n+                              QMessageBox::Abort, QMessageBox::Abort);\n+        return;\n+    }\n+\n+    WalletModel::UnlockContext ctx(model->requestUnlock());\n+    if(!ctx.isValid())\n+    {\n+        // Unlock wallet was cancelled\n+        return;\n+    }\n+\n+    CKey key;\n+    if (!pwalletMain->GetKey(addr, key))\n+    {\n+        QMessageBox::critical(this, tr(\"Error signing\"), tr(\"Private key for %1 is not available.\").arg(address),\n+                              QMessageBox::Abort, QMessageBox::Abort);\n+        return;\n+    }\n+\n+    CDataStream ss(SER_GETHASH);\n+    ss << strMessageMagic;\n+    ss << ui->message->document()->toPlainText().toStdString();\n+\n+    std::vector<unsigned char> vchSig;\n+    if (!key.SignCompact(Hash(ss.begin(), ss.end()), vchSig))\n+    {\n+        QMessageBox::critical(this, tr(\"Error signing\"), tr(\"Sign failed\"),\n+                              QMessageBox::Abort, QMessageBox::Abort);\n+    }\n+\n+    ui->signature->setText(QString::fromStdString(EncodeBase64(&vchSig[0], vchSig.size())));\n+    ui->signature->setFont(GUIUtil::bitcoinAddressFont());\n+}"
      },
      {
        "sha": "55e6228124c5219e33c9e3bdfb7d6d8e4750b549",
        "filename": "src/qt/messagepage.h",
        "status": "added",
        "additions": 38,
        "deletions": 0,
        "changes": 38,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a6d3a1ff9e7df07182bea0f0bf5ba8b6e56234d0/src/qt/messagepage.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a6d3a1ff9e7df07182bea0f0bf5ba8b6e56234d0/src/qt/messagepage.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/messagepage.h?ref=a6d3a1ff9e7df07182bea0f0bf5ba8b6e56234d0",
        "patch": "@@ -0,0 +1,38 @@\n+#ifndef MESSAGEPAGE_H\n+#define MESSAGEPAGE_H\n+\n+#include <QDialog>\n+\n+namespace Ui {\n+    class MessagePage;\n+}\n+class WalletModel;\n+\n+QT_BEGIN_NAMESPACE\n+QT_END_NAMESPACE\n+\n+class MessagePage : public QDialog\n+{\n+    Q_OBJECT\n+\n+public:\n+    explicit MessagePage(QWidget *parent = 0);\n+    ~MessagePage();\n+\n+    void setModel(WalletModel *model);\n+\n+    void setAddress(QString);\n+\n+private:\n+    Ui::MessagePage *ui;\n+    WalletModel *model;\n+\n+private slots:\n+    void on_pasteButton_clicked();\n+    void on_addressBookButton_clicked();\n+\n+    void on_signMessage_clicked();\n+    void on_copyToClipboard_clicked();\n+};\n+\n+#endif // MESSAGEPAGE_H"
      }
    ]
  }
]