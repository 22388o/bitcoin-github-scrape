[
  {
    "sha": "e0fc4a73563189a1d60a222cf89c4f624d2d8e80",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzplMGZjNGE3MzU2MzE4OWExZDYwYTIyMmNmODljNGY2MjRkMmQ4ZTgw",
    "commit": {
      "author": {
        "name": "Aaron Clauson",
        "email": "aaron.clauson@gmail.com",
        "date": "2017-10-15T11:51:53Z"
      },
      "committer": {
        "name": "Aaron Clauson",
        "email": "aaron.clauson@gmail.com",
        "date": "2017-10-15T11:51:53Z"
      },
      "message": "Updated Windows build doc for WSL/Xenial workarounds.",
      "tree": {
        "sha": "f2d3a4692a1f0232c69e2bfed6726b540db641f2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f2d3a4692a1f0232c69e2bfed6726b540db641f2"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e0fc4a73563189a1d60a222cf89c4f624d2d8e80",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e0fc4a73563189a1d60a222cf89c4f624d2d8e80",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/e0fc4a73563189a1d60a222cf89c4f624d2d8e80",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e0fc4a73563189a1d60a222cf89c4f624d2d8e80/comments",
    "author": {
      "login": "sipsorcery",
      "id": 197660,
      "node_id": "MDQ6VXNlcjE5NzY2MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/197660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipsorcery",
      "html_url": "https://github.com/sipsorcery",
      "followers_url": "https://api.github.com/users/sipsorcery/followers",
      "following_url": "https://api.github.com/users/sipsorcery/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipsorcery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipsorcery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipsorcery/subscriptions",
      "organizations_url": "https://api.github.com/users/sipsorcery/orgs",
      "repos_url": "https://api.github.com/users/sipsorcery/repos",
      "events_url": "https://api.github.com/users/sipsorcery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipsorcery/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "sipsorcery",
      "id": 197660,
      "node_id": "MDQ6VXNlcjE5NzY2MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/197660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipsorcery",
      "html_url": "https://github.com/sipsorcery",
      "followers_url": "https://api.github.com/users/sipsorcery/followers",
      "following_url": "https://api.github.com/users/sipsorcery/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipsorcery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipsorcery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipsorcery/subscriptions",
      "organizations_url": "https://api.github.com/users/sipsorcery/orgs",
      "repos_url": "https://api.github.com/users/sipsorcery/repos",
      "events_url": "https://api.github.com/users/sipsorcery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipsorcery/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "6ab0e4cf49549640b903bf5fce0e6035b8116397",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6ab0e4cf49549640b903bf5fce0e6035b8116397",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/6ab0e4cf49549640b903bf5fce0e6035b8116397"
      }
    ],
    "stats": {
      "total": 70,
      "additions": 53,
      "deletions": 17
    },
    "files": [
      {
        "sha": "90bf53d9d0750e2c079030d7a6f3053ceeb02d86",
        "filename": "doc/build-windows.md",
        "status": "modified",
        "additions": 53,
        "deletions": 17,
        "changes": 70,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e0fc4a73563189a1d60a222cf89c4f624d2d8e80/doc/build-windows.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e0fc4a73563189a1d60a222cf89c4f624d2d8e80/doc/build-windows.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/doc/build-windows.md?ref=e0fc4a73563189a1d60a222cf89c4f624d2d8e80",
        "patch": "@@ -4,11 +4,14 @@ WINDOWS BUILD NOTES\n Below are some notes on how to build Bitcoin Core for Windows.\n \n Most developers use cross-compilation from Ubuntu to build executables for\n-Windows. Cross-compilation is also used to build the release binaries.\n+Windows. This is also used to build the release binaries.\n \n-Currently only building on Ubuntu Trusty 14.04 or Ubuntu Zesty 17.04 or later is supported.\n-Building on Ubuntu Xenial 16.04 is known to be broken, see extensive discussion in issue [8732](https://github.com/bitcoin/bitcoin/issues/8732).\n-While it may be possible to do so with work arounds, it's potentially dangerous and not recommended.\n+Building on Ubuntu Trusty 14.04 is recommended.\n+At the time of writing the Windows Subsystem for Linux installs Ubuntu Xenial 16.04. The default cross\n+compiler package for Ubuntu Xenial does not produce working executables for some of the bitcoin applications.\n+It is possible to build on Ubuntu Xenial by installing the cross compiler packages from\n+Ubuntu Zesty, see the steps below.\n+Building on Ubuntu Zesty 17.04 up to 17.10 has been verified to work.\n \n While there are potentially a number of ways to build on Windows (for example using msys / mingw-w64),\n using the Windows Subsystem For Linux is the most straightforward. If you are building with\n@@ -19,7 +22,7 @@ Compiling with Windows Subsystem For Linux\n -------------------------------------------\n \n With Windows 10, Microsoft has released a new feature named the [Windows\n-Subsystem for Linux](https://msdn.microsoft.com/commandline/wsl/about). This\n+Subsystem for Linux (WSL)](https://msdn.microsoft.com/commandline/wsl/about). This\n feature allows you to run a bash shell directly on Windows in an Ubuntu-based\n environment. Within this environment you can cross compile for Windows without\n the need for a separate Linux VM or server.\n@@ -57,28 +60,40 @@ installing the toolchain will be different.\n \n First, install the general dependencies:\n \n-    sudo apt-get install build-essential libtool autotools-dev automake pkg-config bsdmainutils curl\n+    sudo apt install build-essential libtool autotools-dev automake pkg-config bsdmainutils curl git\n \n A host toolchain (`build-essential`) is necessary because some dependency\n packages (such as `protobuf`) need to build host utilities that are used in the\n build process.\n \n See also: [dependencies.md](dependencies.md).\n \n-If you're building on Ubuntu 17.04 or later, run these two commands, selecting the 'posix' variant for both,\n-to work around issues with mingw-w64. See issue [8732](https://github.com/bitcoin/bitcoin/issues/8732) for more information.\n-```\n-sudo update-alternatives --config x86_64-w64-mingw32-g++\n-sudo update-alternatives --config x86_64-w64-mingw32-gcc\n-```\n-\n ## Building for 64-bit Windows\n \n-To build executables for Windows 64-bit, install the following dependencies:\n+The first step is to install the mingw-w64 cross-compilation tool chain. Due to different Ubuntu\n+packages for each distribution and problems with the Xenial packages the steps for each are different.\n \n-    sudo apt-get install g++-mingw-w64-x86-64 mingw-w64-x86-64-dev\n+Common steps to install mingw32 cross compiler tool chain:\n \n-Then build using:\n+    sudo apt install g++-mingw-w64-x86-64\n+\n+Ubuntu Trusty 14.04:\n+\n+    No further steps required\n+\n+Ubuntu Xenial 16.04 and Windows Subsystem for Linux <sup>[1](#footnote1),[2](#footnote2)</sup>:\n+\n+    sudo apt install software-properties-common\n+    sudo add-apt-repository \"deb http://archive.ubuntu.com/ubuntu zesty universe\"\n+    sudo apt update\n+    sudo apt upgrade\n+    sudo update-alternatives --config x86_64-w64-mingw32-g++ # Set the default mingw32 g++ compiler option to posix.\n+\n+Ubuntu Zesty 17.04 <sup>[2](#footnote2)</sup>:\n+\n+    sudo update-alternatives --config x86_64-w64-mingw32-g++ # Set the default mingw32 g++ compiler option to posix.\n+\n+Once the tool chain is installed the build steps are common:\n \n     PATH=$(echo \"$PATH\" | sed -e 's/:\\/mnt.*//g') # strip out problematic Windows %PATH% imported var\n     cd depends\n@@ -92,7 +107,11 @@ Then build using:\n \n To build executables for Windows 32-bit, install the following dependencies:\n \n-    sudo apt-get install g++-mingw-w64-i686 mingw-w64-i686-dev\n+    sudo apt install g++-mingw-w64-i686 mingw-w64-i686-dev\n+\n+For Ubuntu Xenial 16.04, Ubuntu Zesty 17.04 and Windows Subsystem for Linux <sup>[2](#footnote2)</sup>:\n+\n+    sudo update-alternatives --config i686-w64-mingw32-g++  # Set the default mingw32 g++ compiler option to posix.\n \n Then build using:\n \n@@ -117,3 +136,20 @@ as they appear in the release `.zip` archive. This can be done in the following\n way. This will install to `c:\\workspace\\bitcoin`, for example:\n \n     make install DESTDIR=/mnt/c/workspace/bitcoin\n+\n+Footnotes\n+---------\n+\n+<a name=\"footnote1\">1</a>: There is currently a bug in the 64 bit mingw-w64 cross compiler packaged for WSL/Ubuntu Xenial 16.04 that\n+causes two of the bitcoin executables to crash shortly after start up. The bug is related to the\n+-fstack-protector-all g++ compiler flag which is used to mitigate buffer overflows.\n+Installing the mingw-w64 packages from the Ubuntu 17 distribution solves the issue, however, this is not\n+an officially supported approach and it's only recommended if you are prepared to reinstall WSL/Ubutntu should\n+something break.\n+\n+<a name=\"footnote2\">2</a>: Starting from Ubuntu Xenial 16.04 both the 32 and 64 bit mingw-w64 packages install two different\n+compiler options to allow a choice between either posix or win32 threads. The default option is win32 threads which is the more\n+efficient since it will result in binary code that links directly with the Windows kernel32.lib. Unfortunately, the headers\n+required to support win32 threads conflict with some of the classes in the C++11 standard library in particular std::mutex.\n+It's not possible to build the bitcoin code using the win32 version of the mingw-w64 cross compilers (at least not without\n+modifying headers in the bitcoin source code)."
      }
    ]
  },
  {
    "sha": "7383d772644c965e4af8596cb425fff289af409c",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo3MzgzZDc3MjY0NGM5NjVlNGFmODU5NmNiNDI1ZmZmMjg5YWY0MDlj",
    "commit": {
      "author": {
        "name": "Aaron Clauson",
        "email": "aaron@sipsorcery.com",
        "date": "2017-10-17T23:14:22Z"
      },
      "committer": {
        "name": "GitHub",
        "email": "noreply@github.com",
        "date": "2017-10-17T23:14:22Z"
      },
      "message": "Updated instructions for Windows 10 Fall Creators Update.",
      "tree": {
        "sha": "e4a6ddde15ece15f305f98252d438c93b6c79b0b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e4a6ddde15ece15f305f98252d438c93b6c79b0b"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7383d772644c965e4af8596cb425fff289af409c",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7383d772644c965e4af8596cb425fff289af409c",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/7383d772644c965e4af8596cb425fff289af409c",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7383d772644c965e4af8596cb425fff289af409c/comments",
    "author": {
      "login": "sipsorcery",
      "id": 197660,
      "node_id": "MDQ6VXNlcjE5NzY2MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/197660?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipsorcery",
      "html_url": "https://github.com/sipsorcery",
      "followers_url": "https://api.github.com/users/sipsorcery/followers",
      "following_url": "https://api.github.com/users/sipsorcery/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipsorcery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipsorcery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipsorcery/subscriptions",
      "organizations_url": "https://api.github.com/users/sipsorcery/orgs",
      "repos_url": "https://api.github.com/users/sipsorcery/repos",
      "events_url": "https://api.github.com/users/sipsorcery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipsorcery/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "web-flow",
      "id": 19864447,
      "node_id": "MDQ6VXNlcjE5ODY0NDQ3",
      "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/web-flow",
      "html_url": "https://github.com/web-flow",
      "followers_url": "https://api.github.com/users/web-flow/followers",
      "following_url": "https://api.github.com/users/web-flow/following{/other_user}",
      "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions",
      "organizations_url": "https://api.github.com/users/web-flow/orgs",
      "repos_url": "https://api.github.com/users/web-flow/repos",
      "events_url": "https://api.github.com/users/web-flow/events{/privacy}",
      "received_events_url": "https://api.github.com/users/web-flow/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "e0fc4a73563189a1d60a222cf89c4f624d2d8e80",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e0fc4a73563189a1d60a222cf89c4f624d2d8e80",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/e0fc4a73563189a1d60a222cf89c4f624d2d8e80"
      }
    ],
    "stats": {
      "total": 4,
      "additions": 4,
      "deletions": 0
    },
    "files": [
      {
        "sha": "c415595e439561aaab7ca48dea059232715d2890",
        "filename": "doc/build-windows.md",
        "status": "modified",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/7383d772644c965e4af8596cb425fff289af409c/doc/build-windows.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/7383d772644c965e4af8596cb425fff289af409c/doc/build-windows.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/doc/build-windows.md?ref=7383d772644c965e4af8596cb425fff289af409c",
        "patch": "@@ -31,6 +31,10 @@ This feature is not supported in versions of Windows prior to Windows 10 or on\n Windows Server SKUs. In addition, it is available [only for 64-bit versions of\n Windows](https://msdn.microsoft.com/en-us/commandline/wsl/install_guide).\n \n+For Windows 10 systems with the Fall Creators Update applied (version >= 16215.0) use the Windows Store\n+to install Ubuntu. Search for \"Linux\" in the Windows Store and install the free \"Ubuntu\" application.\n+Full instructions are available on the above link.\n+\n To get the bash shell, you must first activate the feature in Windows.\n \n 1. Turn on Developer Mode"
      }
    ]
  }
]