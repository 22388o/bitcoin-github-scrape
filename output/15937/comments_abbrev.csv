DrahtBot,2019-05-02 00:41:53,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #19099 (refactor: Move wallet methods out of chain.h and node.h by ryanofsky)\n* #18654 (rpc: separate bumpfee's psbt crea",https://github.com/bitcoin/bitcoin/pull/15937#issuecomment-488521570,488521570,
jonasschnelli,2019-05-18 10:23:02,"Strong Concept ACK\n""Loosing"" the wallets especially in conjunction with pruning is a concept hard to understand.",https://github.com/bitcoin/bitcoin/pull/15937#issuecomment-493666062,493666062,
luke-jr,2020-01-29 03:32:32,">For GUI this makes perfect sense, for RPC I'm not sure if there's a use case that pays off.\n\nbitcoind also autoloads wallets as configured. (And it only really makes sense in general to use bitcoin_rw.conf for this...)",https://github.com/bitcoin/bitcoin/pull/15937#issuecomment-579576452,579576452,
achow101,2020-06-11 17:02:59,Concept ACK. I think I'll rebase #15454 on top of this.,https://github.com/bitcoin/bitcoin/pull/15937#issuecomment-642811636,642811636,
achow101,2020-06-12 19:16:09,"Is it intended that the default wallet won't be loaded anymore when a wallet is explicitly loaded? That seems like it would cause problems for users who are using both the default wallet and other wallets.\n\nAlso, why default to not loading on start? I think it makes sense that restarting would load all previously loaded wallets too.",https://github.com/bitcoin/bitcoin/pull/15937#issuecomment-643442112,643442112,
ryanofsky,2020-06-12 20:43:22,"> Is it intended that the default wallet won't be loaded anymore when a wallet is explicitly loaded? That seems like it would cause problems for users who are using both the default wallet and other wallets.\n\nGood catch. No that's a bug. Should continue to load default wallet unless it was explicitly overridden with a -wallet or -nowallet argument or config value (as before). Will fix and add ",https://github.com/bitcoin/bitcoin/pull/15937#issuecomment-643475377,643475377,
ryanofsky,2020-06-16 22:35:10,"re: https://github.com/bitcoin/bitcoin/pull/15937#issuecomment-643475377\n\n> > Is it intended that the default wallet won't be loaded anymore when a wallet is explicitly loaded? That seems like it would cause problems for users who are using both the default wallet and other wallets.\n> \n> Good catch. No that's a bug. Should continue to load default wallet unless it was explicitly overridden",https://github.com/bitcoin/bitcoin/pull/15937#issuecomment-645046145,645046145,
achow101,2020-06-18 16:42:08,ACK 9b69729015eee6c70d0209396bd6d34024e2aed4,https://github.com/bitcoin/bitcoin/pull/15937#issuecomment-646156718,646156718,
achow101,2020-06-18 19:19:08,"Did a bit of testing, and it seems another issue is that `unloadwallet` will cause the default wallet to no longer be loaded as well. If multiple wallets are loaded with `-wallet=` and then one of those is unloaded, the setting will get written without the default wallet which causes it to also not be loaded.\n\nAdditionally if a wallet is set to load on startup but is also specified in the comm",https://github.com/bitcoin/bitcoin/pull/15937#issuecomment-646257720,646257720,
ryanofsky,2020-06-18 20:15:10,"> Did a bit of testing, and it seems another issue is that `unloadwallet` will cause the default wallet to no longer be loaded as well. If multiple wallets are loaded with `-wallet=` and then one of those is unloaded, the setting will get written without the default wallet which causes it to also not be loaded.\n\nThis was intentional. This idea is for this pr to be backwards compatible as long ",https://github.com/bitcoin/bitcoin/pull/15937#issuecomment-646283037,646283037,
achow101,2020-06-18 20:35:00,"> Once you actively start using `load_on_startup=true`, it jettisons the old behavior where a default """" wallet you unloaded and didn't ask for can get created/loaded automatically on a future startup. If a default """" wallet was already loaded for you on startup and you didn't unload it,\n\nI agree that's what should happen, but this issue was because I had somehow had a default wallet loaded on",https://github.com/bitcoin/bitcoin/pull/15937#issuecomment-646291979,646291979,
jonatack,2020-07-24 11:45:57,"Concept ACK.\n\nI would definitely find this useful and use it.",https://github.com/bitcoin/bitcoin/pull/15937#issuecomment-663500042,663500042,
meshcollider,2020-08-02 00:12:39,Concept ACK,https://github.com/bitcoin/bitcoin/pull/15937#issuecomment-667603471,667603471,
achow101,2020-08-06 00:12:48,"> How would you see this option in the GUI? A checkbox somewhere?\n\nFor #15454, the GUI implementation is to just make this the default.",https://github.com/bitcoin/bitcoin/pull/15937#issuecomment-669609156,669609156,
promag,2020-08-07 22:08:49,"@achow101 need to review #15454 again. Do you mean load_on_startup=true for menus create and load? If so, I think menu unload should set load_on_startup=false.",https://github.com/bitcoin/bitcoin/pull/15937#issuecomment-670737371,670737371,
achow101,2020-08-10 16:29:32,"> Do you mean load_on_startup=true for menus create and load?\n\n`load_on_startup=true` for loading, and `load_on_startup=false` on unloading.",https://github.com/bitcoin/bitcoin/pull/15937#issuecomment-671457454,671457454,
ryanofsky,2020-08-13 18:23:57,"Rebased 3062303a682492f3c90e64eb008dbdfe54e0cb60 -> 904bc013e36dc6ea9d013e664d5e9446aae94c7b ([`pr/walset.15`](https://github.com/ryanofsky/bitcoin/commits/pr/walset.15) -> [`pr/walset.16`](https://github.com/ryanofsky/bitcoin/commits/pr/walset.16), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/walset.15-rebase..pr/walset.16)) due to conflict with #18654\nUpdated 904bc013e36dc6ea9d013",https://github.com/bitcoin/bitcoin/pull/15937#issuecomment-673637446,673637446,
achow101,2020-08-13 18:35:44,re-ACK 61709e87c6a92e12e8ecf4cdffc058ebb565ccdc. Only changes since last was rebase and test suggestion.,https://github.com/bitcoin/bitcoin/pull/15937#issuecomment-673642915,673642915,
achow101,2020-08-13 22:52:06,re-ACK 642ad31b418bbf8da06cb3641329b0810e18e55b Only change is the test,https://github.com/bitcoin/bitcoin/pull/15937#issuecomment-673748402,673748402,
promag,2020-08-15 00:30:33,"> > Do you mean load_on_startup=true for menus create and load?\n> \n> `load_on_startup=true` for loading, and `load_on_startup=false` on unloading.\n\nNot sure if you interpret create as loading, but IMO created wallets should have load_on_startup=true too.",https://github.com/bitcoin/bitcoin/pull/15937#issuecomment-674321218,674321218,
jonatack,2020-08-16 08:22:29,Posthumous strong concept ACK -- looking forward to using this feature.,https://github.com/bitcoin/bitcoin/pull/15937#issuecomment-674497218,674497218,
promag,2019-06-25 14:17:22,"Nit, remove ` && request.params[4].isBool()`?",https://github.com/bitcoin/bitcoin/pull/15937#discussion_r297212143,297212143,src/wallet/rpcwallet.cpp
promag,2019-06-25 14:19:13,"An error is thrown but wallet remains loaded. Either:\n - make this a warning in the response;\n - move `AddWalletSetting()` before loading - which must be reverted if the actual load fails;\n - unload the wallet before throwing.",https://github.com/bitcoin/bitcoin/pull/15937#discussion_r297213064,297213064,src/wallet/rpcwallet.cpp
ryanofsky,2020-06-05 01:17:00,"re: https://github.com/bitcoin/bitcoin/pull/15937#discussion_r297213064\n\n> An error is thrown but wallet remains loaded. Either:\n> \n> * make this a warning in the response;\n> * move `AddWalletSetting()` before loading - which must be reverted if the actual load fails;\n> * unload the wallet before throwing.\n\nMade warning",https://github.com/bitcoin/bitcoin/pull/15937#discussion_r435639451,435639451,src/wallet/rpcwallet.cpp
ryanofsky,2020-06-05 01:22:53,"re: https://github.com/bitcoin/bitcoin/pull/15937#discussion_r297212143\n\n> Nit, remove ` && request.params[4].isBool()`?\n\nThanks, removed",https://github.com/bitcoin/bitcoin/pull/15937#discussion_r435640778,435640778,src/wallet/rpcwallet.cpp
achow101,2020-06-22 22:47:36,I don't think we can remove this behavior in #15454 as we still are loading the default wallet if it exists. So we still need this behavior there.,https://github.com/bitcoin/bitcoin/pull/15937#discussion_r443866400,443866400,src/wallet/load.cpp
ryanofsky,2020-06-25 21:26:07,"re: https://github.com/bitcoin/bitcoin/pull/15937#discussion_r443866400\n\n> I don't think we can remove this behavior in #15454 as we still are loading the default wallet if it exists. So we still need this behavior there.\n\nThanks, rethinking this and looking at #15454, there's no need to have a temporary workaround here at all if WalletInit::Construct initializes the wallet setting, so the",https://github.com/bitcoin/bitcoin/pull/15937#discussion_r445847321,445847321,src/wallet/load.cpp
achow101,2020-08-05 18:29:26,nit: this could be `self.restart_node(0)`,https://github.com/bitcoin/bitcoin/pull/15937#discussion_r465921931,465921931,test/functional/wallet_startup.py
ryanofsky,2020-08-13 18:18:53,"re: https://github.com/bitcoin/bitcoin/pull/15937#discussion_r465921931\n\n> nit: this could be `self.restart_node(0)`\n\nThanks, updated",https://github.com/bitcoin/bitcoin/pull/15937#discussion_r470155605,470155605,test/functional/wallet_startup.py
meshcollider,2020-08-13 21:28:54,very minor suggestion: `load_on_startup` is already false for this wallet so it may be a more interesting test to check load without a value keeps that previous setting here.,https://github.com/bitcoin/bitcoin/pull/15937#discussion_r470259520,470259520,test/functional/wallet_startup.py
ryanofsky,2020-08-13 21:42:24,"re: https://github.com/bitcoin/bitcoin/pull/15937#discussion_r470259520\n\n> very minor suggestion: `load_on_startup` is already false for this wallet so it may be a more interesting test to check load without a value keeps that previous setting here.\n\nGood idea, updated",https://github.com/bitcoin/bitcoin/pull/15937#discussion_r470265584,470265584,test/functional/wallet_startup.py
