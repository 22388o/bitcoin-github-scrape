[
  {
    "sha": "102518fdb711b646dec8f0cc26fa170364bf2e0b",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoxMDI1MThmZGI3MTFiNjQ2ZGVjOGYwY2MyNmZhMTcwMzY0YmYyZTBi",
    "commit": {
      "author": {
        "name": "Gregory Maxwell",
        "email": "greg@xiph.org",
        "date": "2013-09-08T11:54:06Z"
      },
      "committer": {
        "name": "Gregory Maxwell",
        "email": "greg@xiph.org",
        "date": "2013-09-08T11:54:06Z"
      },
      "message": "Rename -tor to -onion to better reflect what it does.\n\nI've seen users confused multiple times thinking they\n should be using -tor to set their tor proxy and then\n finding in horror that they were still connecting to\n the IPv4 internet.\n\nEven Jeff guesses wrong about what the knob does, so\n I think we should rename it. This leaves the old\n knob working, we can pull it out completely in a\n later release.",
      "tree": {
        "sha": "929a041784aebb0fe142626b10ea6831b2d2f22c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/929a041784aebb0fe142626b10ea6831b2d2f22c"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/102518fdb711b646dec8f0cc26fa170364bf2e0b",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/102518fdb711b646dec8f0cc26fa170364bf2e0b",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/102518fdb711b646dec8f0cc26fa170364bf2e0b",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/102518fdb711b646dec8f0cc26fa170364bf2e0b/comments",
    "author": {
      "login": "gmaxwell",
      "id": 858454,
      "node_id": "MDQ6VXNlcjg1ODQ1NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/858454?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gmaxwell",
      "html_url": "https://github.com/gmaxwell",
      "followers_url": "https://api.github.com/users/gmaxwell/followers",
      "following_url": "https://api.github.com/users/gmaxwell/following{/other_user}",
      "gists_url": "https://api.github.com/users/gmaxwell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
      "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
      "repos_url": "https://api.github.com/users/gmaxwell/repos",
      "events_url": "https://api.github.com/users/gmaxwell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "gmaxwell",
      "id": 858454,
      "node_id": "MDQ6VXNlcjg1ODQ1NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/858454?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gmaxwell",
      "html_url": "https://github.com/gmaxwell",
      "followers_url": "https://api.github.com/users/gmaxwell/followers",
      "following_url": "https://api.github.com/users/gmaxwell/following{/other_user}",
      "gists_url": "https://api.github.com/users/gmaxwell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
      "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
      "repos_url": "https://api.github.com/users/gmaxwell/repos",
      "events_url": "https://api.github.com/users/gmaxwell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "12564aa1664cb81b3a81e1a706bde997108aba00",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/12564aa1664cb81b3a81e1a706bde997108aba00",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/12564aa1664cb81b3a81e1a706bde997108aba00"
      }
    ],
    "stats": {
      "total": 23,
      "additions": 14,
      "deletions": 9
    },
    "files": [
      {
        "sha": "41ebed0c8d4682191897d40ea7212614332ba346",
        "filename": "doc/tor.md",
        "status": "modified",
        "additions": 3,
        "deletions": 3,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/102518fdb711b646dec8f0cc26fa170364bf2e0b/doc/tor.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/102518fdb711b646dec8f0cc26fa170364bf2e0b/doc/tor.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/doc/tor.md?ref=102518fdb711b646dec8f0cc26fa170364bf2e0b",
        "patch": "@@ -21,8 +21,8 @@ outgoing connections be anonimized, but more is possible.\n \t-proxy=ip:port  Set the proxy server. If SOCKS5 is selected (default), this proxy\n \t                server will be used to try to reach .onion addresses as well.\n \t\n-\t-tor=ip:port    Set the proxy server to use for tor hidden services. You do not\n-\t                need to set this if it's the same as -proxy. You can use -notor\n+\t-onion=ip:port  Set the proxy server to use for tor hidden services. You do not\n+\t                need to set this if it's the same as -proxy. You can use -noonion\n \t                to explicitly disable access to hidden service.\n \t\n \t-listen         When using -proxy, listening is disabled by default. If you want\n@@ -85,5 +85,5 @@ and open port 8333 on your firewall (or use -upnp).\n If you only want to use Tor to reach onion addresses, but not use it as a proxy\n for normal IPv4/IPv6 communication, use:\n \n-\t./bitcoin -tor=127.0.0.1:9050 -externalip=57qr3yd1nyntf5k.onion -discover\n+\t./bitcoin -onion=127.0.0.1:9050 -externalip=57qr3yd1nyntf5k.onion -discover\n "
      },
      {
        "sha": "0d90f0295d38228e5005fe1959ae248c053b4c60",
        "filename": "src/init.cpp",
        "status": "modified",
        "additions": 11,
        "deletions": 6,
        "changes": 17,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/102518fdb711b646dec8f0cc26fa170364bf2e0b/src/init.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/102518fdb711b646dec8f0cc26fa170364bf2e0b/src/init.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/init.cpp?ref=102518fdb711b646dec8f0cc26fa170364bf2e0b",
        "patch": "@@ -180,7 +180,7 @@ std::string HelpMessage()\n     strUsage += \"  -timeout=<n>           \" + _(\"Specify connection timeout in milliseconds (default: 5000)\") + \"\\n\";\n     strUsage += \"  -proxy=<ip:port>       \" + _(\"Connect through socks proxy\") + \"\\n\";\n     strUsage += \"  -socks=<n>             \" + _(\"Select the version of socks proxy to use (4-5, default: 5)\") + \"\\n\";\n-    strUsage += \"  -tor=<ip:port>         \" + _(\"Use proxy to reach tor hidden services (default: same as -proxy)\") + \"\\n\";\n+    strUsage += \"  -onion=<ip:port>       \" + _(\"Use proxy to reach tor hidden services (default: same as -proxy)\") + \"\\n\";\n     strUsage += \"  -dns                   \" + _(\"Allow DNS lookups for -addnode, -seednode and -connect\") + \"\\n\";\n     strUsage += \"  -port=<port>           \" + _(\"Listen for connections on <port> (default: 8333 or testnet: 18333)\") + \"\\n\";\n     strUsage += \"  -maxconnections=<n>    \" + _(\"Maintain at most <n> connections to peers (default: 125)\") + \"\\n\";\n@@ -637,15 +637,20 @@ bool AppInit2(boost::thread_group& threadGroup)\n         fProxy = true;\n     }\n \n-    // -tor can override normal proxy, -notor disables tor entirely\n-    if (!(mapArgs.count(\"-tor\") && mapArgs[\"-tor\"] == \"0\") && (fProxy || mapArgs.count(\"-tor\"))) {\n+    // -onion can override normal proxy, -noonion disables tor entirely\n+    // -tor here is a temporary backwards compatibility measure\n+    if (mapArgs.count(\"-tor\"))\n+        printf(\"Notice: option -tor has been replaced with -onion and will be removed in a later version.\\n\");\n+    if (!(mapArgs.count(\"-onion\") && mapArgs[\"-onion\"] == \"0\") &&\n+        !(mapArgs.count(\"-tor\") && mapArgs[\"-tor\"] == \"0\") &&\n+         (fProxy || mapArgs.count(\"-onion\") || mapArgs.count(\"-tor\"))) {\n         CService addrOnion;\n-        if (!mapArgs.count(\"-tor\"))\n+        if (!mapArgs.count(\"-onion\") && !mapArgs.count(\"-tor\"))\n             addrOnion = addrProxy;\n         else\n-            addrOnion = CService(mapArgs[\"-tor\"], 9050);\n+            addrOnion = mapArgs.count(\"-onion\")?CService(mapArgs[\"-onion\"], 9050):CService(mapArgs[\"-tor\"], 9050);\n         if (!addrOnion.IsValid())\n-            return InitError(strprintf(_(\"Invalid -tor address: '%s'\"), mapArgs[\"-tor\"].c_str()));\n+            return InitError(strprintf(_(\"Invalid -onion address: '%s'\"), mapArgs.count(\"-onion\")?mapArgs[\"-onion\"].c_str():mapArgs[\"-tor\"].c_str()));\n         SetProxy(NET_TOR, addrOnion, 5);\n         SetReachable(NET_TOR);\n     }"
      }
    ]
  }
]