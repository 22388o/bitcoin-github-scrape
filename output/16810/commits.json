[
  {
    "sha": "0093a5869a30797ccb139d0cb5a0427d3f3c2d94",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowMDkzYTU4NjlhMzA3OTdjY2IxMzlkMGNiNWEwNDI3ZDNmM2MyZDk0",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2019-09-05T18:43:30Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2019-09-05T18:50:44Z"
      },
      "message": "contrib: guix: More robust search paths, add checks\n\n- store_path() previously only worked for cross compilation packages, we\n  remove this assumption here\n- Add CROSS_GCC_LIB variable which points to where gcc libs/headers are\n  located\n- Add gcc libs/headers to our CROSS_*_PATH environment variables\n- Check that all directories in CROSS_*_PATH are sane",
      "tree": {
        "sha": "2ca985e914baa220330500aa3707dc948bb59446",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2ca985e914baa220330500aa3707dc948bb59446"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0093a5869a30797ccb139d0cb5a0427d3f3c2d94",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEECc3SW1JEo3Z49u6oDMUhUxl5kaUFAl1xWQgACgkQDMUhUxl5\nkaV6VBAAwBU4HWYlrNfMGPsxduZ3m1bU8JA1MLgMsH2675JYsf5Ydi4vX5xFx2uK\nWtxdqBSpAmt/LxQchWX72JdlT/eXzrfoeHfuHzmZ21DzVMYZw36t89kfrHURPvYK\nXvKDa03U3GgZKoWeAwfeYhfQTecFc2PlQESW2KC/AoaR0fMHhWlWW07he5WAojtl\ngVX9YOSQJ2uEXgGHn7zmT63daW//Yku8jbfiLflEFfZsNU801wgC3gpuEakbwxUu\n84TP/6ahQ1yFV8IPpShp1TlD8/bFUmGYMiNwdvsroVcD1dLgC+D5K4txNvfnHU1i\n5sfkWS7JTKmthJNJES0JVcTG+Nt9PoUKEOtLbCON1EASPiaaaX3PU7MM26BDpdRa\nEnYMV8/srz0+SSvvLi6qcjqEboD2fp6t0Ha9oHWJO7VTYMJ7kcKcXPyMFQbgq/aA\n3owjkDrjQGqLVmRGXSL0G9ep0CU4Q9MuPgB1PckAbuS9RSFPjF3KevxmViUOD/+d\nqbTj5ROEnIbFIyYlBIgAQC4E405DNpfSG0hSV0GEvdlxeRsPPzV1Yc1njbKX/P6C\n14TjzuhHG0oN8qhgqiXHAdQngkuzrhpixOis6QEv/qBYbTkiqlDnEUkBBOBMSNKv\noUWGc+Kr3ft1iYuMgqxAPVZQkvLKWd8bjiinhK1pidsZN6REOok=\n=6qcr\n-----END PGP SIGNATURE-----",
        "payload": "tree 2ca985e914baa220330500aa3707dc948bb59446\nparent 5e202382a987351a59d5cda98ea9f2aee99f61a5\nauthor Carl Dong <contact@carldong.me> 1567709010 -0400\ncommitter Carl Dong <contact@carldong.me> 1567709444 -0400\n\ncontrib: guix: More robust search paths, add checks\n\n- store_path() previously only worked for cross compilation packages, we\n  remove this assumption here\n- Add CROSS_GCC_LIB variable which points to where gcc libs/headers are\n  located\n- Add gcc libs/headers to our CROSS_*_PATH environment variables\n- Check that all directories in CROSS_*_PATH are sane\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0093a5869a30797ccb139d0cb5a0427d3f3c2d94",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/0093a5869a30797ccb139d0cb5a0427d3f3c2d94",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0093a5869a30797ccb139d0cb5a0427d3f3c2d94/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "5e202382a987351a59d5cda98ea9f2aee99f61a5",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5e202382a987351a59d5cda98ea9f2aee99f61a5",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/5e202382a987351a59d5cda98ea9f2aee99f61a5"
      }
    ],
    "stats": {
      "total": 31,
      "additions": 23,
      "deletions": 8
    },
    "files": [
      {
        "sha": "25d0582d163b279e12a5f89039a732e50de9f7bb",
        "filename": "contrib/guix/libexec/build.sh",
        "status": "modified",
        "additions": 23,
        "deletions": 8,
        "changes": 31,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0093a5869a30797ccb139d0cb5a0427d3f3c2d94/contrib/guix/libexec/build.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0093a5869a30797ccb139d0cb5a0427d3f3c2d94/contrib/guix/libexec/build.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/libexec/build.sh?ref=0093a5869a30797ccb139d0cb5a0427d3f3c2d94",
        "patch": "@@ -30,23 +30,38 @@ fi\n # Given a package name and an output name, return the path of that output in our\n # current guix environment\n store_path() {\n-    grep --extended-regexp \"/[^-]{32}-${1}-cross-${HOST}-[^-]+${2:+-${2}}\" \"${GUIX_ENVIRONMENT}/manifest\" \\\n+    grep --extended-regexp \"/[^-]{32}-${1}-[^-]+${2:+-${2}}\" \"${GUIX_ENVIRONMENT}/manifest\" \\\n         | head --lines=1 \\\n         | sed --expression='s|^[[:space:]]*\"||' \\\n               --expression='s|\"[[:space:]]*$||'\n }\n \n # Determine output paths to use in CROSS_* environment variables\n-CROSS_GLIBC=\"$(store_path glibc)\"\n-CROSS_GLIBC_STATIC=\"$(store_path glibc static)\"\n-CROSS_KERNEL=\"$(store_path linux-libre-headers)\"\n-CROSS_GCC=\"$(store_path gcc)\"\n+CROSS_GLIBC=\"$(store_path glibc-cross-${HOST})\"\n+CROSS_GLIBC_STATIC=\"$(store_path glibc-cross-${HOST} static)\"\n+CROSS_KERNEL=\"$(store_path linux-libre-headers-cross-${HOST})\"\n+CROSS_GCC=\"$(store_path gcc-cross-${HOST})\"\n+CROSS_GCC_LIBS=( \"${CROSS_GCC}/lib/gcc/${HOST}\"/* ) # This expands to an array of directories...\n+CROSS_GCC_LIB=\"${CROSS_GCC_LIBS[0]}\" # ...we just want the first one (there should only be one)\n \n # Set environment variables to point Guix's cross-toolchain to the right\n # includes/libs for $HOST\n-export CROSS_C_INCLUDE_PATH=\"${CROSS_GCC}/include:${CROSS_GLIBC}/include:${CROSS_KERNEL}/include\"\n-export CROSS_CPLUS_INCLUDE_PATH=\"${CROSS_GCC}/include/c++:${CROSS_GLIBC}/include:${CROSS_KERNEL}/include\"\n-export CROSS_LIBRARY_PATH=\"${CROSS_GLIBC}/lib:${CROSS_GLIBC_STATIC}/lib:${CROSS_GCC}/lib:${CROSS_GCC}/${HOST}/lib:${CROSS_KERNEL}/lib\"\n+#\n+# NOTE: CROSS_C_INCLUDE_PATH is missing ${CROSS_GCC_LIB}/include-fixed, because\n+# the limits.h in it is missing a '#include_next <limits.h>'\n+#\n+export CROSS_C_INCLUDE_PATH=\"${CROSS_GCC_LIB}/include:${CROSS_GLIBC}/include:${CROSS_KERNEL}/include\"\n+export CROSS_CPLUS_INCLUDE_PATH=\"${CROSS_GCC}/include/c++:${CROSS_GCC}/include/c++/${HOST}:${CROSS_GCC}/include/c++/backward:${CROSS_C_INCLUDE_PATH}\"\n+export CROSS_LIBRARY_PATH=\"${CROSS_GCC}/lib:${CROSS_GCC}/${HOST}/lib:${CROSS_GCC_LIB}:${CROSS_GLIBC}/lib:${CROSS_GLIBC_STATIC}/lib\"\n+\n+# Sanity check CROSS_*_PATH directories\n+IFS=':' read -ra PATHS <<< \"${CROSS_C_INCLUDE_PATH}:${CROSS_CPLUS_INCLUDE_PATH}:${CROSS_LIBRARY_PATH}\"\n+for p in \"${PATHS[@]}\"; do\n+    if [ ! -d \"$p\" ]; then\n+        echo \"'$p' doesn't exist or isn't a directory... Aborting...\"\n+        exit 1\n+    fi\n+done\n \n # Disable Guix ld auto-rpath behavior\n export GUIX_LD_WRAPPER_DISABLE_RPATH=yes"
      }
    ]
  },
  {
    "sha": "0065ead5ebdad9f743d89ee2558c93253a597967",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowMDY1ZWFkNWViZGFkOWY3NDNkODllZTI1NThjOTMyNTNhNTk3OTY3",
    "commit": {
      "author": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2019-09-05T18:45:03Z"
      },
      "committer": {
        "name": "Carl Dong",
        "email": "contact@carldong.me",
        "date": "2019-09-05T18:50:56Z"
      },
      "message": "contrib: guix: Remove ssp spec file hack\n\nThis hack is no longer needed after fixing our cross-compilation search\npaths.",
      "tree": {
        "sha": "c0b6a2dddd00ba5bafd178e20721518383ef907a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c0b6a2dddd00ba5bafd178e20721518383ef907a"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0065ead5ebdad9f743d89ee2558c93253a597967",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEECc3SW1JEo3Z49u6oDMUhUxl5kaUFAl1xWRAACgkQDMUhUxl5\nkaV6cA//Sbxe5Uzhf/5jFRnM9n9ngvitQB98eVQP/OWIZdE0gGD28ChC48cdUEF4\nE3SkpTRrkZR++YPXt9bi5MT4jiz453nxMAfS5+cNeMM8a37NIkij1j38BAKT/a+D\nHsNk0JnnVzuyRstYoMmibDAcJ0zDnFJ6vpjhJI3gIVdB8YXKf+QAWJxevo2tTOe5\na/YnTkArdGppE6DqTHMfg6YiaB1q7uDzuBiDbu06Hik0gYPmbJy4lW+gW9RvmoLH\no9C7GlW1l5XXYONXD0XP4nlzeEkotUDO63poz111uUx7mhwf41GuQ3zXuuC5lFEE\naUI9GSwoK248q6g12itJbZGcjjDCRcGUDWD+uPDfkKShwxBVSJhD1p1xu0SkkBBf\nBSkNHAyjZ6t+2GCM/6GEdyiXuJS+Xmd6ysHrydjsFiKuwRX30QNvq0J9bleBfao7\n8q0Gj4V8++OJ20MGd9FvI//ex2b6M/Tr4tuObYjzkRbLDzsen3aexjIlPPqmNC80\nKcPeCLQS0FcFb8KZbkLju15asexy5Vgu6amhvZZCzdpVlfL3GQBrBLrbY2B3E/+o\nR7OOxGZuFfOeHnloKTdg3Ie2K+Cob5txjJHUTnQmc9FB5n8AwZiebVgHREC1qPUT\ng708byZ73vQ/wi/f9x6RlxOuQTxOdf63AaD1C4wbamGBb4w1Bh4=\n=fW9V\n-----END PGP SIGNATURE-----",
        "payload": "tree c0b6a2dddd00ba5bafd178e20721518383ef907a\nparent 0093a5869a30797ccb139d0cb5a0427d3f3c2d94\nauthor Carl Dong <contact@carldong.me> 1567709103 -0400\ncommitter Carl Dong <contact@carldong.me> 1567709456 -0400\n\ncontrib: guix: Remove ssp spec file hack\n\nThis hack is no longer needed after fixing our cross-compilation search\npaths.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0065ead5ebdad9f743d89ee2558c93253a597967",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/0065ead5ebdad9f743d89ee2558c93253a597967",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0065ead5ebdad9f743d89ee2558c93253a597967/comments",
    "author": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dongcarl",
      "id": 3445290,
      "node_id": "MDQ6VXNlcjM0NDUyOTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dongcarl",
      "html_url": "https://github.com/dongcarl",
      "followers_url": "https://api.github.com/users/dongcarl/followers",
      "following_url": "https://api.github.com/users/dongcarl/following{/other_user}",
      "gists_url": "https://api.github.com/users/dongcarl/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
      "organizations_url": "https://api.github.com/users/dongcarl/orgs",
      "repos_url": "https://api.github.com/users/dongcarl/repos",
      "events_url": "https://api.github.com/users/dongcarl/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dongcarl/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "0093a5869a30797ccb139d0cb5a0427d3f3c2d94",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0093a5869a30797ccb139d0cb5a0427d3f3c2d94",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/0093a5869a30797ccb139d0cb5a0427d3f3c2d94"
      }
    ],
    "stats": {
      "total": 11,
      "additions": 2,
      "deletions": 9
    },
    "files": [
      {
        "sha": "ee207a957c12be10c155fec9ae8aa856ea3906e5",
        "filename": "contrib/guix/libexec/build.sh",
        "status": "modified",
        "additions": 2,
        "deletions": 9,
        "changes": 11,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0065ead5ebdad9f743d89ee2558c93253a597967/contrib/guix/libexec/build.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0065ead5ebdad9f743d89ee2558c93253a597967/contrib/guix/libexec/build.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/guix/libexec/build.sh?ref=0065ead5ebdad9f743d89ee2558c93253a597967",
        "patch": "@@ -136,17 +136,10 @@ DISTNAME=\"$(basename \"$SOURCEDIST\" '.tar.gz')\"\n # Binary Tarball Building #\n ###########################\n \n-# Create a spec file to normalize ssp linking behaviour\n-spec_file=\"$(mktemp)\"\n-cat << EOF > \"$spec_file\"\n-*link_ssp:\n-%{fstack-protector|fstack-protector-all|fstack-protector-strong|fstack-protector-explicit:}\n-EOF\n-\n # Similar flags to Gitian\n CONFIGFLAGS=\"--enable-glibc-back-compat --enable-reduce-exports --disable-bench --disable-gui-tests\"\n-HOST_CFLAGS=\"-O2 -g -specs=${spec_file} -ffile-prefix-map=${PWD}=.\"\n-HOST_CXXFLAGS=\"-O2 -g -specs=${spec_file} -ffile-prefix-map=${PWD}=.\"\n+HOST_CFLAGS=\"-O2 -g -ffile-prefix-map=${PWD}=.\"\n+HOST_CXXFLAGS=\"-O2 -g -ffile-prefix-map=${PWD}=.\"\n HOST_LDFLAGS=\"-Wl,--as-needed -Wl,--dynamic-linker=$glibc_dynamic_linker -static-libstdc++\"\n \n # Make $HOST-specific native binaries from depends available in $PATH"
      }
    ]
  }
]