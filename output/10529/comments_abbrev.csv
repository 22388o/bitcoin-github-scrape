TheBlueMatt,2017-06-07T15:18:48Z,It seems weird to move the datadir without the user noticing?,https://github.com/bitcoin/bitcoin/pull/10529#issuecomment-306828028,306828028,
laanwj,2017-06-07T16:01:32Z,"> It seems weird to move the datadir without the user noticing?\n\n`/var/lib/bitcoind` seems to make more sense too. Without specifying it it will move to somewhere under `/home`, which is not recommended for a system-wide daemon.",https://github.com/bitcoin/bitcoin/pull/10529#issuecomment-306841714,306841714,
luke-jr,2017-06-07T18:27:11Z,"Context: bitcoind's service scripts (at least the openrc one) has always used the bitcoin user's default datadir. This systemd script was incompatible with this for some reason.\n\nAt least on Gentoo systems, the bitcoin user's home directory is itself `/var/lib/bitcoin`, so the datadir ends up as  `/var/lib/bitcoin/.bitcoin/`",https://github.com/bitcoin/bitcoin/pull/10529#issuecomment-306883656,306883656,
Flowdalic,2017-06-07T19:30:12Z,"Besides what @luke-jr said, my rationale was that as few things as possible should be specified in the systemd service, all bitcoind specifics should go into `/etc/bitcoin/bitcoin.conf`. Thus the bare minium the service file has to specify how `bitcoind` should be invoked is\n1. `-daemon`\n2. `-conf=`\n3. `-pid=`\n\nI'm not sure if it's the case, but if command arguments override bitcoin.conf",https://github.com/bitcoin/bitcoin/pull/10529#issuecomment-306900392,306900392,
laanwj,2017-06-08T07:59:09Z,"What about `TimeoutStartSec`? #10531 increases it to `120s`, this removes it completely. I'm not sure what you mean with 'should be set individually' in the OP. What is the default?",https://github.com/bitcoin/bitcoin/pull/10529#issuecomment-307029051,307029051,
Flowdalic,2017-06-08T10:09:53Z,"> What about TimeoutStartSec? #10531 increases it to 120s, this removes it completely.\n\nThe default is 90s, which is sufficient for most bitcoind setups I know. If a users has a particular cause for a different value (like a very slow system), then he can simply to override it, using the `systemctl edit bitocind.service` approach mentioned in the added comment block. That is what I meant with ",https://github.com/bitcoin/bitcoin/pull/10529#issuecomment-307060268,307060268,
laanwj,2017-06-08T10:44:20Z,What does this timeout measure in the first place? Until RPC becomes reachable? Or until it becomes usable?,https://github.com/bitcoin/bitcoin/pull/10529#issuecomment-307067653,307067653,
Flowdalic,2017-06-08T11:24:03Z,"> What does this timeout measure in the first place?\n\nGood question. I can't find anything in the documentation. And a short look at the source also didn't help.\n\n> Until RPC becomes reachable? Or until it becomes usable?\n\nI doubt that, since systemd has no specific knowledge of the service. I'd guess that for 'forking' type services like bitcoind, it's the time the initial process nee",https://github.com/bitcoin/bitcoin/pull/10529#issuecomment-307075474,307075474,
laanwj,2017-06-25T10:13:42Z,"So I'm not clear what to do here. This isn't gathering any (ut)ACKs and neither is #10531.\nWho is using these files and has an opinion about them?",https://github.com/bitcoin/bitcoin/pull/10529#issuecomment-310894206,310894206,
laanwj,2017-07-25T11:56:55Z,"This seems inactive, closing for now",https://github.com/bitcoin/bitcoin/pull/10529#issuecomment-317715156,317715156,
Flowdalic,2017-07-25T12:11:19Z,"What a pity. Needless to say that I believe this PR was an improvement over what is currently in the repo. ;)\n\nThe usual consumers are people who package bitcoind for their Linux distribution. For example, the Gentoo bitcoin overlay (which I'm involved with) and the Gentoo in-tree ebuilds would probably switch to the canonical bitcoind systemd files if they where in a good shape.",https://github.com/bitcoin/bitcoin/pull/10529#issuecomment-317718309,317718309,
laanwj,2017-07-25T12:26:28Z,"After discussion on IRC I'm reopening this.\n\n(Apparently the current state is completely broken, so if there can't be agreement on how to improve it, it'd be better to remove it completely.)",https://github.com/bitcoin/bitcoin/pull/10529#issuecomment-317721556,317721556,
ryanofsky,2017-07-25T14:37:40Z,"> What does this timeout measure in the first place? Until RPC becomes reachable? Or until it becomes usable?\n\nThis is a forking service so timeout is just checking time until original foreground process exits successfully.",https://github.com/bitcoin/bitcoin/pull/10529#issuecomment-317758334,317758334,
laanwj,2017-10-02T12:52:07Z,Please squash before merging.,https://github.com/bitcoin/bitcoin/pull/10529#issuecomment-333525097,333525097,
Flowdalic,2017-10-02T13:12:39Z,Squashed.,https://github.com/bitcoin/bitcoin/pull/10529#issuecomment-333530124,333530124,
ryanofsky,2017-10-12T18:32:40Z,utACK 16be7ddbaa7cb0de99c84fac2d33d713e03301cf again (the later commit fac2c22ce176529893bb41a1856e2854d1db5e20 which had the -printtoconsole stuff is now gone).,https://github.com/bitcoin/bitcoin/pull/10529#issuecomment-336226508,336226508,
ryanofsky,2017-07-25T14:40:11Z,Probably should use `/etc/bitcoind` to be consistent with `/run/bitcoind` or `/run/bitcoin` to be consistent with `/etc/bitcoin` ,https://github.com/bitcoin/bitcoin/pull/10529#discussion_r129324794,129324794,contrib/init/bitcoind.service
Flowdalic,2017-07-26T18:05:16Z,"I've no strong feelings towards any of those options, besides that keeping `/etc/bitcoin/` would make it a bit easier for the gentoo ebuilds, as that is what they currently use.",https://github.com/bitcoin/bitcoin/pull/10529#discussion_r129651449,129651449,contrib/init/bitcoind.service
ryanofsky,2017-07-26T19:11:34Z,Yeah actually I take back the suggestion. Seems fine to stick with /etc/bitcoin since the config there could potentially could be shared with different bitcoin tools. And /var/bitcoind at least keeps consistency with the binary and service names.,https://github.com/bitcoin/bitcoin/pull/10529#discussion_r129669288,129669288,contrib/init/bitcoind.service
luke-jr,2017-07-27T02:45:02Z,"Yeah, at least hypothetically, `bitcoin-cli` would ideally be able to use it too.",https://github.com/bitcoin/bitcoin/pull/10529#discussion_r129743350,129743350,contrib/init/bitcoind.service
laanwj,2017-08-28T10:29:14Z,Don't combine `-daemon` and `-printtoconsole` - stdout will have nowhere to go after daemonization.,https://github.com/bitcoin/bitcoin/pull/10529#discussion_r135491465,135491465,contrib/init/bitcoind.service
Flowdalic,2017-08-29T12:13:03Z,"The idea was to let systemd handle bitcoind's log output. At first using `-daemon` and `-printtoconsole` appeared to do the trick, but on a second look it sees that the log output stops after bitcoind demonized (possibly after the `fork()`?)",https://github.com/bitcoin/bitcoin/pull/10529#discussion_r135771042,135771042,contrib/init/bitcoind.service
ryanofsky,2017-08-29T14:30:21Z,"> The idea was to let systemd handle bitcoind's log output. At first using -daemon and -printtoconsole appeared to do the trick, but on a second look it sees that the log output stops after bitcoind demonized (possibly after the fork()?) \n\nYou could make work this by removing -daemon and -pid options, removing PIDFile setting, and changing Type setting from forking to simple. Personally, I wou",https://github.com/bitcoin/bitcoin/pull/10529#discussion_r135807567,135807567,contrib/init/bitcoind.service
Flowdalic,2017-08-30T20:49:26Z,"I see your rationale, but on the other hand there are also good reasons to let systemd handle the log output of bitcoind. But since the this change was broken anyways (and since we can decide what's best later on,) I've reverted the commit with the hope that it would make it easier to get this PR merged.",https://github.com/bitcoin/bitcoin/pull/10529#discussion_r136185361,136185361,contrib/init/bitcoind.service
erols,2017-11-27T21:44:07Z,If I'm setting up systemd do I need to create the bitcoin user and group myself?,https://github.com/bitcoin/bitcoin/pull/10529#discussion_r153332618,153332618,contrib/init/bitcoind.service
