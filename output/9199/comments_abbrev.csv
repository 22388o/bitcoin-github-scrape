gmaxwell,2016-11-22T02:55:28Z,Needs backport.,https://github.com/bitcoin/bitcoin/pull/9199#issuecomment-262134043,262134043,
gmaxwell,2016-11-22T17:53:08Z,@TheBlueMatt please reivew,https://github.com/bitcoin/bitcoin/pull/9199#issuecomment-262314326,262314326,
morcos,2016-11-22T18:25:56Z,"seems reasonable to me\nutACK\n\n",https://github.com/bitcoin/bitcoin/pull/9199#issuecomment-262323213,262323213,
theuni,2016-11-22T18:41:20Z,Why not just erase the id from lNodesAnnouncingHeaderAndIDs in FinalizeNode()?,https://github.com/bitcoin/bitcoin/pull/9199#issuecomment-262327332,262327332,
sdaftuar,2016-11-22T18:52:38Z,"@theuni This still seems cleaner because I think sometimes nodes hang out in a semi-disconnected state sometimes, with a delay between when they're removed from vNodes and when FinalizeNode gets called.",https://github.com/bitcoin/bitcoin/pull/9199#issuecomment-262330364,262330364,
theuni,2016-11-22T18:57:14Z,"@sdaftuar Ah yes, good point.",https://github.com/bitcoin/bitcoin/pull/9199#issuecomment-262331703,262331703,
sdaftuar,2016-11-22T22:18:09Z,utACK,https://github.com/bitcoin/bitcoin/pull/9199#issuecomment-262382696,262382696,
sipa,2016-11-22T22:18:56Z,utACK,https://github.com/bitcoin/bitcoin/pull/9199#issuecomment-262382881,262382881,
TheBlueMatt,2016-11-23T08:35:49Z,utACK ca8549d2bd32f17f8b69d1edbe3f2976fba504b4,https://github.com/bitcoin/bitcoin/pull/9199#issuecomment-262457550,262457550,
gmaxwell,2016-11-23T09:10:55Z,"> Why not just erase the id from lNodesAnnouncingHeaderAndIDs in FinalizeNode()?\n\nI thought about that, but it's actually irrelevant until a new peer sends a block in any case... and would still need this code regardless, to care care of peers that are removed but not finalized yet.\n\nIt might make more sense in the future if we increase the list beyond three in order to have some 'spares' ",https://github.com/bitcoin/bitcoin/pull/9199#issuecomment-262463512,262463512,
gmaxwell,2016-11-23T22:50:44Z,"FWIW, on my test host a HB selected peer dropped and it successfully removed HB status from a peer two blocks later with this change.",https://github.com/bitcoin/bitcoin/pull/9199#issuecomment-262649165,262649165,
laanwj,2016-12-02T07:22:57Z,"Backported in #9264, removing tag.",https://github.com/bitcoin/bitcoin/pull/9199#issuecomment-264390559,264390559,
sipa,2016-11-22T03:11:22Z,Can this line go as well?,https://github.com/bitcoin/bitcoin/pull/9199#discussion_r89036578,89036578,src/main.cpp
gmaxwell,2016-11-22T04:29:00Z,"meh, the prototype of the lambda here is that it returns bool, just dropping the return should produce a warning that a function with a non-void return type can fail to return a value if the compiler is at all sane.  Changing the prototype of ForNode seems unreasonable to me... the return value should be useful.",https://github.com/bitcoin/bitcoin/pull/9199#discussion_r89041833,89041833,src/main.cpp
sipa,2016-11-22T04:29:48Z,Ok!,https://github.com/bitcoin/bitcoin/pull/9199#discussion_r89041893,89041893,src/main.cpp
theuni,2016-11-22T18:12:15Z,"Since there's only 1 user of ForNode, and since it's terribly awkward for that use, I think we should just replace it by adding an extra:\n```\nCConnman::PushMessage(NodeId id, ...);\n```\nWe can do that as a follow-up to #9128.",https://github.com/bitcoin/bitcoin/pull/9199#discussion_r89176523,89176523,src/main.cpp
