sipa,2014-11-01T16:50:03Z,"Moving code out makes perfect sense, but please don't create circular dependencies (between main and undo, in this case).\n\nSee #5111 for an alternative that moves the methods with implementation to main, and all header definitions to undo.h (including CBlockUndo).\n",https://github.com/bitcoin/bitcoin/pull/5192#issuecomment-61374476,61374476,
sipa,2014-11-01T16:53:19Z,"I see you're also moving code out of DisconnectBlock, which makes sense. But can you leave that as a function in main, rather than a method in undo? We're aiming in general to have a separation between files that purely define data structures and serializations (core/transaction.h, core/block.h, undo.h, script/script.h, serialize.h, ...), and others that operate on their validity and database inte",https://github.com/bitcoin/bitcoin/pull/5192#issuecomment-61374590,61374590,
domob1812,2014-11-01T17:08:38Z,I understand that.  So what about _only_ creating `CTxInUndo::Apply` with implementation in `main.cpp` and without creating `undo.cpp` at all?\n,https://github.com/bitcoin/bitcoin/pull/5192#issuecomment-61375178,61375178,
sipa,2014-11-01T17:11:53Z,"No, please keep implementations in the corresponding .cpp file of the .h file where things are defined. Not doing so makes it impossible to reason about dependencies (you could end up having code that needs main.o or not, just depending on whether you use a particular method defined in an unrelated file).\n",https://github.com/bitcoin/bitcoin/pull/5192#issuecomment-61375291,61375291,
domob1812,2014-11-01T17:33:23Z,"Ok.  So if you want to keep the code in main, it will be a standalone method `ApplyTxInUndo` and not part of class `CTxInUndo`.  That's also perfectly possible.  Is this what you have in mind?\n",https://github.com/bitcoin/bitcoin/pull/5192#issuecomment-61375960,61375960,
sipa,2014-11-01T19:16:14Z,To me that sounds fine yes - it also avoids having undo.h depend on coins.\n,https://github.com/bitcoin/bitcoin/pull/5192#issuecomment-61379614,61379614,
domob1812,2014-11-02T10:58:47Z,Updated accordingly.\n,https://github.com/bitcoin/bitcoin/pull/5192#issuecomment-61401830,61401830,
sipa,2014-11-03T16:03:05Z,"utACK, verified move-only.\n",https://github.com/bitcoin/bitcoin/pull/5192#issuecomment-61500177,61500177,
fanquake,2015-01-23T08:35:58Z,Needs rebase.\n,https://github.com/bitcoin/bitcoin/pull/5192#issuecomment-71162545,71162545,
domob1812,2015-01-23T13:56:02Z,Rebased.  The new version is here: https://github.com/bitcoin/bitcoin/pull/5699  See there for an explanation why I had to create a new pull request.  (They are identical.)  Closing this.\n,https://github.com/bitcoin/bitcoin/pull/5192#issuecomment-71195935,71195935,
Diapolo,2014-11-01T16:45:11Z,Not sure this part belongs in undo.\n,https://github.com/bitcoin/bitcoin/pull/5192#discussion_r19705309,19705309,src/undo.cpp
