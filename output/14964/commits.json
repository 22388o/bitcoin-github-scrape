[
  {
    "sha": "faee59103d8f5f2a5c91711d55c9a1f346593b33",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYWVlNTkxMDNkOGY1ZjJhNWM5MTcxMWQ1NWM5YTFmMzQ2NTkzYjMz",
    "commit": {
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2018-12-14T23:16:06Z"
      },
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2018-12-14T23:12:17Z"
      },
      "message": "test: Fix race in mempool_accept",
      "tree": {
        "sha": "c3c672eb181c7a6a53876fbbd0d95602b9202284",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c3c672eb181c7a6a53876fbbd0d95602b9202284"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/faee59103d8f5f2a5c91711d55c9a1f346593b33",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGcBAABCgAGBQJcFDjRAAoJEM4rdWl+aaVIiO8L/RsF734k90GYiK4WFxLs/KTS\ne6vl++h3Fp4XRz9Ob0dVEHp0TP/mDIQ69bP/5tw7c8E7q+K2ohS8GwVZ11V5qBf5\nKfzNDE5PEtI43LkSH/Y9q30R+LYcb6P3oB3/PAFuqn70fvPNEMD1A2ZwKC2raSfh\nF3ss1dPojCLTeZb3ULRAlp+WjJ7lIf3x+/NShd700RZzaGbQKvGj+tEBb9hyu/TY\nlFS+gDP1pdtfiIGZ8uqc6jfu14I1+F0VyT+8iRCL91yRJhko0dfZjEYoOxCC7f8U\no4fsH/IWpOcTGx3zkwNSrFu1ylTmEJWF1rBAh3BNB+O9qD2816LfaNaNo6PEgYV0\nwarTK7B1C/9bjCGfhA2yVRwe6kFbMlPnpzEqeNqw3rt+CvHruXp7u4HO+F/SOWkO\nk7jZljrzxVFd96eO7l+pBGj1f3pHNDYB/TzVcqg85D8Taf3nkLBzCFOUz0iPxbqU\nkqCZilF8e+TQfOD+frRjXI1auTv1OwNinvgOA997aQ==\n=sC0V\n-----END PGP SIGNATURE-----",
        "payload": "tree c3c672eb181c7a6a53876fbbd0d95602b9202284\nparent b53573e5c6c7cac3086cbfd22311b31cbc8140ec\nauthor MarcoFalke <falke.marco@gmail.com> 1544829366 -0500\ncommitter MarcoFalke <falke.marco@gmail.com> 1544829137 -0500\n\ntest: Fix race in mempool_accept\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/faee59103d8f5f2a5c91711d55c9a1f346593b33",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/faee59103d8f5f2a5c91711d55c9a1f346593b33",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/faee59103d8f5f2a5c91711d55c9a1f346593b33/comments",
    "author": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "b53573e5c6c7cac3086cbfd22311b31cbc8140ec",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b53573e5c6c7cac3086cbfd22311b31cbc8140ec",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/b53573e5c6c7cac3086cbfd22311b31cbc8140ec"
      }
    ],
    "stats": {
      "total": 5,
      "additions": 3,
      "deletions": 2
    },
    "files": [
      {
        "sha": "02f1cc43913d5b26513c65ec0a12a284aebc0def",
        "filename": "test/functional/mempool_accept.py",
        "status": "modified",
        "additions": 3,
        "deletions": 2,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/faee59103d8f5f2a5c91711d55c9a1f346593b33/test/functional/mempool_accept.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/faee59103d8f5f2a5c91711d55c9a1f346593b33/test/functional/mempool_accept.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/mempool_accept.py?ref=faee59103d8f5f2a5c91711d55c9a1f346593b33",
        "patch": "@@ -58,14 +58,15 @@ def run_test(self):\n         self.mempool_size = 0\n         wait_until(lambda: node.getblockcount() == 200)\n         assert_equal(node.getmempoolinfo()['size'], self.mempool_size)\n+        coins = node.listunspent()\n \n         self.log.info('Should not accept garbage to testmempoolaccept')\n         assert_raises_rpc_error(-3, 'Expected type array, got string', lambda: node.testmempoolaccept(rawtxs='ff00baar'))\n         assert_raises_rpc_error(-8, 'Array must contain exactly one raw transaction for now', lambda: node.testmempoolaccept(rawtxs=['ff00baar', 'ff22']))\n         assert_raises_rpc_error(-22, 'TX decode failed', lambda: node.testmempoolaccept(rawtxs=['ff00baar']))\n \n         self.log.info('A transaction already in the blockchain')\n-        coin = node.listunspent()[0]  # Pick a random coin(base) to spend\n+        coin = coins.pop()  # Pick a random coin(base) to spend\n         raw_tx_in_block = node.signrawtransactionwithwallet(node.createrawtransaction(\n             inputs=[{'txid': coin['txid'], 'vout': coin['vout']}],\n             outputs=[{node.getnewaddress(): 0.3}, {node.getnewaddress(): 49}],\n@@ -93,7 +94,7 @@ def run_test(self):\n         )\n \n         self.log.info('A final transaction not in the mempool')\n-        coin = node.listunspent()[0]  # Pick a random coin(base) to spend\n+        coin = coins.pop()  # Pick a random coin(base) to spend\n         raw_tx_final = node.signrawtransactionwithwallet(node.createrawtransaction(\n             inputs=[{'txid': coin['txid'], 'vout': coin['vout'], \"sequence\": 0xffffffff}],  # SEQUENCE_FINAL\n             outputs=[{node.getnewaddress(): 0.025}],"
      }
    ]
  }
]