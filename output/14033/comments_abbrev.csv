laanwj,2018-08-23T18:06:23Z,"I'm trying to remember what the plan was for removing the hardcoded alert\nI think now that the key has been revealed it's ok to remove that for 0.18 as well",https://github.com/bitcoin/bitcoin/pull/14033#issuecomment-415514540,415514540,
DrahtBot,2018-08-23T18:27:48Z,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #17785 (p2p: Unify Send and Receive protocol versions by hebasto)\n* #17194 (p2p: Avoid forwarding ADDR messages to SPV no",https://github.com/bitcoin/bitcoin/pull/14033#issuecomment-415521226,415521226,
MarcoFalke,2018-08-23T18:32:20Z,"I couldn't find anything in https://btcinformation.org/en/alert/2016-11-01-alert-retirement, but yeah, might as well remove it here.",https://github.com/bitcoin/bitcoin/pull/14033#issuecomment-415522881,415522881,
Empact,2018-08-23T18:49:03Z,"Dropped the announcement in #14034. Restored the CAddress serialization check because absent it, tests were failing around `verack`.\n\nhttps://github.com/bitcoin/bitcoin/blob/540bf8aacc50aae0ea5beb76511905a7d2a3e15f/src/protocol.h#L346-L348",https://github.com/bitcoin/bitcoin/pull/14033#issuecomment-415528279,415528279,
kanzure,2018-08-23T18:49:48Z,"> I'm trying to remember what the plan was for removing the hardcoded alert. I think now that the key has been revealed it's ok to remove that for 0.18 as well.\n\nThe threat model seems to be: someone has been offline for quite a while (possibly using old software), reconnects to the network, and nobody has the final alert message. Instead they get connected to someone's weird node that spams t",https://github.com/bitcoin/bitcoin/pull/14033#issuecomment-415528515,415528515,
gmaxwell,2018-08-23T18:56:15Z,"Unless there is a reason to do otherwise, I think we should probably leave it in so long as we still connect to nodes that had the alert system enabled.\n\n@kanzure  Because the alert key is published if someone starts older software that still has it, they could get a message like ""Your wallet is outdated and could lose funds! go to leaksyourprivatekeys.com to get the new official bitcoin softw",https://github.com/bitcoin/bitcoin/pull/14033#issuecomment-415530508,415530508,
kanzure,2018-08-23T22:30:12Z,"> The hardcoded final alert mitigates this\n\nRight, they were asking about removing the hardcoded alert. Anyway, I agree with leaving it in- unless it's causing issue or problems or maintenance headache.",https://github.com/bitcoin/bitcoin/pull/14033#issuecomment-415591670,415591670,
Empact,2018-08-23T22:35:36Z,"Fair enough, @gmaxwell and @kanzure, I closed #14034",https://github.com/bitcoin/bitcoin/pull/14033#issuecomment-415592706,415592706,
laanwj,2018-08-27T09:33:18Z,"> I think we should probably leave it in so long as we still connect to nodes that had the alert system enabled.\n\nI think this is a good policy, there is little overhead in keeping it but I also think it would make sense to add a comment saying this, so that it's clear for future maintainers.\n\n(out of scope for this PR though as it no longer touches anything alert-system related)\n",https://github.com/bitcoin/bitcoin/pull/14033#issuecomment-416171100,416171100,
laanwj,2018-08-27T09:36:34Z,"Is it intentional that you're keeping the `static const int CADDR_TIME_VERSION = 31402;` around in `src/version.h`? \n\nFWIW, there seem to be no other constants for versions before `MIN_PEER_PROTO_VERSION`.\n\nIf so, please do add a comment saying this, so it won't be 'accidentally' removed in a follow-up commit when someone notices that it's no longer used.\n",https://github.com/bitcoin/bitcoin/pull/14033#issuecomment-416171995,416171995,
MarcoFalke,2018-08-27T13:03:42Z,utACK 66bbc8ce26547348906d4d648e7a22c6f9e3fc7a,https://github.com/bitcoin/bitcoin/pull/14033#issuecomment-416219355,416219355,
MarcoFalke,2018-08-27T13:22:22Z,"I'd guess the remaining check can be replaced by `nVersion != INIT_PROTO_VERSION`, but no strong opinion.\n\n<details><summary><code>nVersion != INIT_PROTO_VERSION</code> diff</summary>\n\n```diff\ndiff --git a/src/protocol.h b/src/protocol.h\nindex 50d197415b..4778dd9520 100644\n--- a/src/protocol.h\n+++ b/src/protocol.h\n@@ -344,7 +344,7 @@ public:\n         if (s.GetType() & SER_DISK)",https://github.com/bitcoin/bitcoin/pull/14033#issuecomment-416224661,416224661,
Empact,2018-09-01T07:00:20Z,WIP: looking into how to test for https://github.com/bitcoin/bitcoin/pull/14033/files#r214007626,https://github.com/bitcoin/bitcoin/pull/14033#issuecomment-417838376,417838376,
MarcoFalke,2018-09-04T15:36:37Z,re-utACK 7fb962c4c1946caf0b4546bcfb6901b9d41d1443,https://github.com/bitcoin/bitcoin/pull/14033#issuecomment-418414655,418414655,
DrahtBot,2019-05-07T17:06:40Z,"<!--5d09a71f8925f3f132321140b44b946d-->The last travis run for this pull request was 243 days ago and is thus outdated. To trigger a fresh travis build, this pull request should be closed and re-opened.",https://github.com/bitcoin/bitcoin/pull/14033#issuecomment-490166483,490166483,
vasild,2020-04-13T10:11:51Z,utACK 60c1519,https://github.com/bitcoin/bitcoin/pull/14033#issuecomment-612839962,612839962,
Empact,2020-06-22T20:18:43Z,"Rebased, I think the x86_64 Linux build failure is spurious but I'm not able to rerun it.",https://github.com/bitcoin/bitcoin/pull/14033#issuecomment-647748290,647748290,
vasild,2020-06-23T07:26:39Z,"This looks good - it only changes e.g. `A && B` to `B` if we know `A` will always be `true`.\n\nWhat happened with the removal of `CConnman::GetAddressCount()`? That method is now unused.",https://github.com/bitcoin/bitcoin/pull/14033#issuecomment-647962060,647962060,
jnewbery,2020-07-01T01:55:52Z,I think the change here: https://github.com/bitcoin/bitcoin/pull/14033#issuecomment-416224661 should be applied to remove all uses of `CADDR_TIME_VERSION`. I'd also suggest adding comments to the `CAddress` serializer/deserializer to say that the time is only omitted for `CAddress` objects in the initial VERSION message.,https://github.com/bitcoin/bitcoin/pull/14033#issuecomment-652140628,652140628,
vasild,2020-07-01T06:24:33Z,"In this patch so far we assume `nVersion >= CADDR_TIME_VERSION` is always going to be `true` and `nVersion < CADDR_TIME_VERSION` is always going to be `false` and we remove those expressions accordingly to not change the behavior.\n\nWhy the difference in https://github.com/bitcoin/bitcoin/pull/14033#issuecomment-416224661 where `nVersion >= CADDR_TIME_VERSION (31402)` is replaced by `nVersion !",https://github.com/bitcoin/bitcoin/pull/14033#issuecomment-652218064,652218064,
jnewbery,2020-07-01T14:35:26Z,"> Why the difference in #14033 (comment) where nVersion >= CADDR_TIME_VERSION (31402) is replaced by nVersion != INIT_PROTO_VERSION (209)? If nVersion is in the range [210, 31401] then that would be a change in behavior and I guess this PR aims to be a non-behavioral change.\n\nGood question! I should have been a bit more explicit with my comment ""I'd also suggest adding comments to the CAddress",https://github.com/bitcoin/bitcoin/pull/14033#issuecomment-652456443,652456443,
vasild,2020-07-02T12:11:17Z,"@jnewbery Thanks for the elaborate explanation! So `nVersion` could be less than `CADDR_TIME_VERSION` during `CAddress` serialization - it could be `INIT_PROTO_VERSION` and we want to keep the expression `false` in that case.\n\nI think the patch is good as it is and it would also be good if extended as per https://github.com/bitcoin/bitcoin/pull/14033#issuecomment-416224661.",https://github.com/bitcoin/bitcoin/pull/14033#issuecomment-652968801,652968801,
MarcoFalke,2020-07-02T13:00:39Z,"Also, pull request description needs to be updated",https://github.com/bitcoin/bitcoin/pull/14033#issuecomment-652991329,652991329,
jnewbery,2020-07-10T15:56:13Z,"@Empact are you still maintaining this PR? I'm doing some work in net_processing and would like to get rid of this cruft, so I'm happy to take this over if you're no longer interested.\n\nI have a branch at https://github.com/jnewbery/bitcoin/tree/pr14033.1 that fully removes the `CADDR_TIME_VERSION` and `GETHEADERS_VERSION` constants, and adds comments. Feel free to grab those commits, or let m",https://github.com/bitcoin/bitcoin/pull/14033#issuecomment-656749874,656749874,
sipa,2020-07-10T16:55:05Z,"Code reivew ACK 57b0c0a93a243769beb306c89560d1eda61f54bd\n\nPR description indeed needs updating.",https://github.com/bitcoin/bitcoin/pull/14033#issuecomment-656778428,656778428,
jnewbery,2020-07-10T17:04:45Z,"Code review ACK 57b0c0a93a243769beb306c89560d1eda61f54bd\n\nCan we change the PR description and get this merged? Other changes can be done in a follow-up.",https://github.com/bitcoin/bitcoin/pull/14033#issuecomment-656782958,656782958,
Empact,2020-07-10T20:15:26Z,"For those who wanted a PR description update, does the current description meet your expectations?  @jnewbery thanks for the full explanation above, feel free to go ahead with the follow up, I don't have any immediate aspirations.",https://github.com/bitcoin/bitcoin/pull/14033#issuecomment-656870349,656870349,
luke-jr,2018-08-30T12:18:45Z,"This looks wrong? Shouldn't it be unconditional now, since the condition was `||`?",https://github.com/bitcoin/bitcoin/pull/14033#discussion_r214007626,214007626,src/net_processing.cpp
Empact,2018-09-01T06:59:49Z,"Yep, def wrong. Thanks for catching that.",https://github.com/bitcoin/bitcoin/pull/14033#discussion_r214506662,214506662,src/net_processing.cpp
practicalswift,2018-09-05T07:17:20Z,"`GetAddressCount` is no longer used and can be removed, no? :-)",https://github.com/bitcoin/bitcoin/pull/14033#discussion_r215158765,215158765,src/net_processing.cpp
Empact,2018-09-05T18:31:13Z,Indeed! Dropped `GetAddressCount` as well.,https://github.com/bitcoin/bitcoin/pull/14033#discussion_r215379937,215379937,src/net_processing.cpp
