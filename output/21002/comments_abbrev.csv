DrahtBot,2021-04-22 15:58:16,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#23462](https://github.com/bitcoin/bitcoin/pull/23462) (test: Enable SC2046 and SC2086 shellcheck rules by hebasto)\n\nIf",https://github.com/bitcoin/bitcoin/pull/21002#issuecomment-824968485,824968485,
adamjonas,2021-06-23 12:30:41,"Hi @4D617278, would you mind squashing your commits as described in [these guidelines](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#squashing-commits)?",https://github.com/bitcoin/bitcoin/pull/21002#issuecomment-866794252,866794252,
DrahtBot,2021-11-15 17:26:42,"<!--cf906140f33d8803c4a75a2196329ecb-->\nüêô This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a ""draft"".</sub>",https://github.com/bitcoin/bitcoin/pull/21002#issuecomment-969139818,969139818,
MarcoFalke,2021-01-25 10:31:05,./ci/lint/06_script.sh: test/lint/commit-script-check.sh: /bin/env: bad interpreter: No such file or directory,https://github.com/bitcoin/bitcoin/pull/21002#discussion_r563616331,563616331,test/lint/commit-script-check.sh
4D617278,2021-01-25 10:35:29,I made changes according to developer notes here: https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md#shebang,https://github.com/bitcoin/bitcoin/pull/21002#discussion_r563619248,563619248,test/lint/commit-script-check.sh
MarcoFalke,2021-01-25 10:54:24,"Missing expected shebang ""#!/usr/bin/env bash"" or ""#!/bin/sh"" in test/lint/commit-script-check.sh",https://github.com/bitcoin/bitcoin/pull/21002#discussion_r563631737,563631737,test/lint/commit-script-check.sh
ajtowns,2021-01-25 12:33:27,"Missing the `/usr` -- not everyone has merged `/usr`. If  you're changing to to env, probably should also change it to bash as well to avoid getting weird incompatibilities?",https://github.com/bitcoin/bitcoin/pull/21002#discussion_r563688976,563688976,test/lint/commit-script-check.sh
4D617278,2021-01-25 12:34:37,I changed it back to #!/bin/sh in a later commit,https://github.com/bitcoin/bitcoin/pull/21002#discussion_r563689648,563689648,test/lint/commit-script-check.sh
MarcoFalke,2021-01-25 15:05:22,"This seems a bit hard to read and impossible to maintain without comments if this should ever fail. I'd say that a simple prompt like ""If you are using sed, make sure to not use bsd sed syntax"" on failure is sufficient.",https://github.com/bitcoin/bitcoin/pull/21002#discussion_r563792968,563792968,test/lint/commit-script-check.sh
4D617278,2021-01-25 15:22:14,So you don't need me to check for sed bsd syntax or you want the regex to be simpler? I can increase false positives but increase readability and revert to an older commit.,https://github.com/bitcoin/bitcoin/pull/21002#discussion_r563806800,563806800,test/lint/commit-script-check.sh
4D617278,2021-01-25 15:34:55,Or should I add comments to explain the regex better?,https://github.com/bitcoin/bitcoin/pull/21002#discussion_r563817083,563817083,test/lint/commit-script-check.sh
MarcoFalke,2021-01-25 15:54:25,"I am not sure myself, but I think I'd rather not do the check. It just seems too fragile, especially with the non-greedy regex, which often isn't implemented correctly in regex engines. And how would we check that the `grep --perl-regexp` is using the right regex engine, and not maybe a BSD regex engine? Add another check ...?",https://github.com/bitcoin/bitcoin/pull/21002#discussion_r563832775,563832775,test/lint/commit-script-check.sh
4D617278,2021-01-25 15:57:32,"Ok, how about I just grep for sed without any regular expressions then? Do you want me to undo my commits or to just add a new one?",https://github.com/bitcoin/bitcoin/pull/21002#discussion_r563835195,563835195,test/lint/commit-script-check.sh
MarcoFalke,2021-01-26 08:32:25,"Would be better to only print this warning if the check fails, no?",https://github.com/bitcoin/bitcoin/pull/21002#discussion_r564329169,564329169,test/lint/commit-script-check.sh
MarcoFalke,2021-01-26 08:40:28,"With ""check"" I mean ""script evaluation""",https://github.com/bitcoin/bitcoin/pull/21002#discussion_r564334073,564334073,test/lint/commit-script-check.sh
ajtowns,2021-02-15 15:52:57,"I would have expected a generic warning that the command failed, maybe something more like:\n\n```sh\nif ! (eval ""$SCRIPT""); then\n    echo ""Warning: Script failed (non-zero exit code)""\n    if echo ""$SCRIPT"" | grep -q ""sed""; then\n        echo ""Suggestion: did you use BSD sed syntax?""\n        echo ""Example: sed -i '' 's/foo/bar/' filename (Bad)""\n    fi\nfi\n```",https://github.com/bitcoin/bitcoin/pull/21002#discussion_r576285897,576285897,test/lint/commit-script-check.sh
MarcoFalke,2021-02-15 16:23:27,"sed doesn't have an exit code for ""error"", so checking the exit code wouldn't work either way.\n\n\n```\n$ sed -i -e 's/FOOBAR/foobar/g' ./src/init.cpp && echo $?\n0\n",https://github.com/bitcoin/bitcoin/pull/21002#discussion_r576304706,576304706,test/lint/commit-script-check.sh
4D617278,2021-04-17 10:08:21,"""sed -i '' -e 's/FOOBAR/foobar/g' ./src/init.cpp && echo $?"" results in no output for me since the sed command fails and the ""echo $?"" command is not executed but ""sed -i -e 's/FOOBAR/foobar/g' ./src/init.cpp"" does in fact work. I think this is because ""sed -i -e 's/FOOBAR/foobar/g' ./src/init.cpp"" is a legitimate sed command, it just doesn't cause any changes since FOOBAR is not present in the fi",https://github.com/bitcoin/bitcoin/pull/21002#discussion_r615236662,615236662,test/lint/commit-script-check.sh
4D617278,2021-04-17 12:13:29,"In the OpenBSD 6.9 man pages for sed, it states EXIT STATUS The sed utility exits 0 on success, and >0 if an error occurs.\n",https://github.com/bitcoin/bitcoin/pull/21002#discussion_r615248179,615248179,test/lint/commit-script-check.sh
MarcoFalke,2021-04-17 14:50:57,failing to replace is not an error,https://github.com/bitcoin/bitcoin/pull/21002#discussion_r615264147,615264147,test/lint/commit-script-check.sh
4D617278,2021-04-17 21:21:14,"The line ""git --no-pager diff --exit-code $commit && echo ""OK"" || (echo ""Failed""; false) || RET=1"" should check if the script failed to change anything, do you want to check each command and error if if has no change?",https://github.com/bitcoin/bitcoin/pull/21002#discussion_r615305818,615305818,test/lint/commit-script-check.sh
4D617278,2021-04-17 21:36:00,Do you want to not check for non zero exit codes but only check if the output of the script is the same as the commit?,https://github.com/bitcoin/bitcoin/pull/21002#discussion_r615307012,615307012,test/lint/commit-script-check.sh
