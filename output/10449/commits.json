[
  {
    "sha": "32325a3f58fd607c29030b0dd6f2388579b9c926",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzozMjMyNWEzZjU4ZmQ2MDdjMjkwMzBiMGRkNmYyMzg4NTc5YjljOTI2",
    "commit": {
      "author": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2017-05-24T15:08:19Z"
      },
      "committer": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2017-05-24T15:08:19Z"
      },
      "message": "[Qt] hide bump context menu action if tx already has been bumped",
      "tree": {
        "sha": "52cf00bd93d0b213b284523fd1576a01e56fb396",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/52cf00bd93d0b213b284523fd1576a01e56fb396"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/32325a3f58fd607c29030b0dd6f2388579b9c926",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEyhopCNzi8TB0xizeHrd2uwPHki0FAlklogQACgkQHrd2uwPH\nki2EBg//YncqHFXjFF+e6wkNTmg2G4ijf8e+d79ZpV8AhXajp8uQOfsrCtmA5QSn\nD4mdRAn008YJ4Tk6HwdyPaB1Mpf02rEdcR66oRREvyXVw3uKhk4fltfEFsNG1rS+\nKaxkr1j2+R3JfTEAOAdM8WjoiJwcr0a+59XDRRXoukAMOfZn5zGUCY1mOEjPKE0S\nUEuO6jaA9q8PaUeo99XTK3zxn7ZxMCtSDxqsQtrqB9GYs7SXRuqIyEiittaRGcYC\nf+elImGftBczTdbdQ0XpYuSkbG6G9oEZEXBZClcMoQ8y3evMABdUB9qUrBqHDnfX\nIFhz2V7SDo5jHGKsruG/dfWUHH509ETdYhnPOvxWzWdY/Nun4B146J4NM3IanXAk\nfyfLuHKnM+4ocQE4DRa+JBAb3R5t7PFXHPWKi6TEVbTUs+8HFRnnixT600eMo9OR\napUQe9QXSb+NlInp274TpU4qwVhD6A4sJS9AMAZ3msWrXr6Nr4IIRSVfXl6hHLrs\nRBPy/imnJuq4BkQWlmavaKYllkWDO8tHc87I1kNydqWI3X2vIWYvksM80BSNqv1V\nMK2MVH/s9h7rpxiWg9Fw5i2yXG0ykBuUGcV+bgMcIQaE72NbWa7++uO3H1OklGKH\nXbQUgUuHfWp0ikKjRyATXSLxbfYcLwJ3mgwT8YLcT9u2sRTEWbc=\n=1/M3\n-----END PGP SIGNATURE-----",
        "payload": "tree 52cf00bd93d0b213b284523fd1576a01e56fb396\nparent 4314544d46e8e46c3c9da60f1d18297f52f58418\nauthor Jonas Schnelli <dev@jonasschnelli.ch> 1495638499 +0200\ncommitter Jonas Schnelli <dev@jonasschnelli.ch> 1495638499 +0200\n\n[Qt] hide bump context menu action if tx already has been bumped\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/32325a3f58fd607c29030b0dd6f2388579b9c926",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/32325a3f58fd607c29030b0dd6f2388579b9c926",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/32325a3f58fd607c29030b0dd6f2388579b9c926/comments",
    "author": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "4314544d46e8e46c3c9da60f1d18297f52f58418",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4314544d46e8e46c3c9da60f1d18297f52f58418",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/4314544d46e8e46c3c9da60f1d18297f52f58418"
      }
    ],
    "stats": {
      "total": 8,
      "additions": 4,
      "deletions": 4
    },
    "files": [
      {
        "sha": "e3e070b27f3545d96498d27167854516b4709890",
        "filename": "src/qt/transactionview.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/32325a3f58fd607c29030b0dd6f2388579b9c926/src/qt/transactionview.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/32325a3f58fd607c29030b0dd6f2388579b9c926/src/qt/transactionview.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/transactionview.cpp?ref=32325a3f58fd607c29030b0dd6f2388579b9c926",
        "patch": "@@ -379,7 +379,7 @@ void TransactionView::contextualMenu(const QPoint &point)\n     uint256 hash;\n     hash.SetHex(selection.at(0).data(TransactionTableModel::TxHashRole).toString().toStdString());\n     abandonAction->setEnabled(model->transactionCanBeAbandoned(hash));\n-    bumpFeeAction->setEnabled(model->transactionSignalsRBF(hash));\n+    bumpFeeAction->setEnabled(model->transactionCanBeBumped(hash));\n \n     if(index.isValid())\n     {"
      },
      {
        "sha": "8df0e481bdb47d2a8d0a328b172e904f3ad1697a",
        "filename": "src/qt/walletmodel.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/32325a3f58fd607c29030b0dd6f2388579b9c926/src/qt/walletmodel.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/32325a3f58fd607c29030b0dd6f2388579b9c926/src/qt/walletmodel.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/walletmodel.cpp?ref=32325a3f58fd607c29030b0dd6f2388579b9c926",
        "patch": "@@ -656,11 +656,11 @@ bool WalletModel::abandonTransaction(uint256 hash) const\n     return wallet->AbandonTransaction(hash);\n }\n \n-bool WalletModel::transactionSignalsRBF(uint256 hash) const\n+bool WalletModel::transactionCanBeBumped(uint256 hash) const\n {\n     LOCK2(cs_main, wallet->cs_wallet);\n     const CWalletTx *wtx = wallet->GetWalletTx(hash);\n-    return wtx && SignalsOptInRBF(*wtx);\n+    return wtx && SignalsOptInRBF(*wtx) && !wtx->mapValue.count(\"replaced_by_txid\");\n }\n \n bool WalletModel::bumpFee(uint256 hash)"
      },
      {
        "sha": "16b0caed4efa99f7f98fdc5cb31bde65c2d1f96b",
        "filename": "src/qt/walletmodel.h",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/32325a3f58fd607c29030b0dd6f2388579b9c926/src/qt/walletmodel.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/32325a3f58fd607c29030b0dd6f2388579b9c926/src/qt/walletmodel.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/walletmodel.h?ref=32325a3f58fd607c29030b0dd6f2388579b9c926",
        "patch": "@@ -207,7 +207,7 @@ class WalletModel : public QObject\n     bool transactionCanBeAbandoned(uint256 hash) const;\n     bool abandonTransaction(uint256 hash) const;\n \n-    bool transactionSignalsRBF(uint256 hash) const;\n+    bool transactionCanBeBumped(uint256 hash) const;\n     bool bumpFee(uint256 hash);\n \n     static bool isWalletEnabled();"
      }
    ]
  },
  {
    "sha": "6d7104c9944218bcf60073ff9934b6f27eb5da6f",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo2ZDcxMDRjOTk0NDIxOGJjZjYwMDczZmY5OTM0YjZmMjdlYjVkYTZm",
    "commit": {
      "author": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2017-05-24T15:09:01Z"
      },
      "committer": {
        "name": "Jonas Schnelli",
        "email": "dev@jonasschnelli.ch",
        "date": "2017-05-24T15:09:01Z"
      },
      "message": "[Qt] make sure transaction table entry gets updated after bump",
      "tree": {
        "sha": "fe2d745395c8db5d3554274e8dceea5e40dfa43e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/fe2d745395c8db5d3554274e8dceea5e40dfa43e"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6d7104c9944218bcf60073ff9934b6f27eb5da6f",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEyhopCNzi8TB0xizeHrd2uwPHki0FAlkloh8ACgkQHrd2uwPH\nki1nGA//Q8oouml7zO28P8O5UVi8slZ601272eh6cyIaija6XubdyNIRlemIQR5e\nUN0grgLUht/o1Pz55vGBcAHI46h8KXDaxQJEFnZLQpS2a4Ljb91/w2JMct+M8EE0\ntkBojG45YnBJcb7UpaMaFWEW5ZnqRahQQ6PXbPqJx99mhoNGWiZOt5QhUg5iO6rc\nywbwP1Qara3Np/ZgrMhZCP/YyRzU/r9aWoKAYVdCyw6YbnmTJY10pMER/B6jJ1Lx\n8YblWAGsqAFaA+ImjAxuzt9ypFucJH90gvH+kgZT2BEcTtLdIiBN0Wfb0cX+vh0M\nZkRPLoDXHV73zaa2EnGDlcFXEiP3NbN5jmvNF/eQho420lNcHcHibU19YEEJuEI4\nMcku/0gz07OhHUP3aR229kyNYW0h1PwBKqWs2399cNd1Dlr389jD+eBmsKq1LygT\nbIefet3C329uQ61H63b7ClvDbblCi6xU1AjfE8hR6KnCi1nXR2pCUvc2CCiCLq1Y\nxwMpOeDYiusB2UYZfmXbQAm4D75SF+4ti/thaz/TSgXyMV3chQKr0Lal4nMaC1yN\niUV09nCx+LDBgfrypbB3cd110nPytExHnu2blM6bZ8c0oZd2sfljWC11F/Qr/5FN\nI4gBbtNpzF05Dmk5U27FgJyox8/3QBefwPRjz8St5gXeTbZ1NFk=\n=seIA\n-----END PGP SIGNATURE-----",
        "payload": "tree fe2d745395c8db5d3554274e8dceea5e40dfa43e\nparent 32325a3f58fd607c29030b0dd6f2388579b9c926\nauthor Jonas Schnelli <dev@jonasschnelli.ch> 1495638541 +0200\ncommitter Jonas Schnelli <dev@jonasschnelli.ch> 1495638541 +0200\n\n[Qt] make sure transaction table entry gets updated after bump\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6d7104c9944218bcf60073ff9934b6f27eb5da6f",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/6d7104c9944218bcf60073ff9934b6f27eb5da6f",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6d7104c9944218bcf60073ff9934b6f27eb5da6f/comments",
    "author": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "32325a3f58fd607c29030b0dd6f2388579b9c926",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/32325a3f58fd607c29030b0dd6f2388579b9c926",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/32325a3f58fd607c29030b0dd6f2388579b9c926"
      }
    ],
    "stats": {
      "total": 10,
      "additions": 8,
      "deletions": 2
    },
    "files": [
      {
        "sha": "0090b0c74bf5924267b222b7d5708cc122e8e195",
        "filename": "src/qt/transactionrecord.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6d7104c9944218bcf60073ff9934b6f27eb5da6f/src/qt/transactionrecord.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6d7104c9944218bcf60073ff9934b6f27eb5da6f/src/qt/transactionrecord.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/transactionrecord.cpp?ref=6d7104c9944218bcf60073ff9934b6f27eb5da6f",
        "patch": "@@ -246,13 +246,13 @@ void TransactionRecord::updateStatus(const CWalletTx &wtx)\n             status.status = TransactionStatus::Confirmed;\n         }\n     }\n-\n+    status.needsUpdate = false;\n }\n \n bool TransactionRecord::statusUpdateNeeded()\n {\n     AssertLockHeld(cs_main);\n-    return status.cur_num_blocks != chainActive.Height();\n+    return status.cur_num_blocks != chainActive.Height() || status.needsUpdate;\n }\n \n QString TransactionRecord::getTxID() const"
      },
      {
        "sha": "59f681224fc995b8e5a610d3e107e672a5bc58b5",
        "filename": "src/qt/transactionrecord.h",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6d7104c9944218bcf60073ff9934b6f27eb5da6f/src/qt/transactionrecord.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6d7104c9944218bcf60073ff9934b6f27eb5da6f/src/qt/transactionrecord.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/transactionrecord.h?ref=6d7104c9944218bcf60073ff9934b6f27eb5da6f",
        "patch": "@@ -61,6 +61,8 @@ class TransactionStatus\n \n     /** Current number of blocks (to know whether cached status is still valid) */\n     int cur_num_blocks;\n+\n+    bool needsUpdate;\n };\n \n /** UI model for a transaction. A core transaction can be represented by multiple UI transactions if it has"
      },
      {
        "sha": "f27abc2104cbfb566ca92c5007d9ac9e8d4959f8",
        "filename": "src/qt/transactiontablemodel.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/6d7104c9944218bcf60073ff9934b6f27eb5da6f/src/qt/transactiontablemodel.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/6d7104c9944218bcf60073ff9934b6f27eb5da6f/src/qt/transactiontablemodel.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/transactiontablemodel.cpp?ref=6d7104c9944218bcf60073ff9934b6f27eb5da6f",
        "patch": "@@ -168,6 +168,10 @@ class TransactionTablePriv\n         case CT_UPDATED:\n             // Miscellaneous updates -- nothing to do, status update will take care of this, and is only computed for\n             // visible transactions.\n+            for (int i = lowerIndex; i < upperIndex; i++) {\n+                TransactionRecord *rec = &cachedWallet[i];\n+                rec->status.needsUpdate = true;\n+            }\n             break;\n         }\n     }"
      }
    ]
  }
]