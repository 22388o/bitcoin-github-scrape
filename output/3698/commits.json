[
  {
    "sha": "5409404d7585d45b5d4a7142171f138c213e6e19",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo1NDA5NDA0ZDc1ODVkNDViNWQ0YTcxNDIxNzFmMTM4YzIxM2U2ZTE5",
    "commit": {
      "author": {
        "name": "Philip Kaufmann",
        "email": "phil.kaufmann@t-online.de",
        "date": "2014-02-18T11:48:16Z"
      },
      "committer": {
        "name": "Philip Kaufmann",
        "email": "phil.kaufmann@t-online.de",
        "date": "2014-03-27T10:54:13Z"
      },
      "message": "add constant for shared (GUI/core) -par settings\n\n- introduce DEFAULT_SCRIPTCHECK_THREADS in main.h\n- only show values from -\"MAX_HW_THREADS\" up to 16 for -par, as it\n  makes no sense to try to leave more \"cores free\" than the system\n  supports anyway\n- use the new constant in optionsdialog and remove defaults from\n  .ui file",
      "tree": {
        "sha": "e04848a16e77aee270cd7bd5fe1c12f825860aac",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e04848a16e77aee270cd7bd5fe1c12f825860aac"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5409404d7585d45b5d4a7142171f138c213e6e19",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5409404d7585d45b5d4a7142171f138c213e6e19",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/5409404d7585d45b5d4a7142171f138c213e6e19",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5409404d7585d45b5d4a7142171f138c213e6e19/comments",
    "author": null,
    "committer": null,
    "parents": [
      {
        "sha": "77eaa6fc45ba7cda90ca7c1ed2374e488a553d2e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/77eaa6fc45ba7cda90ca7c1ed2374e488a553d2e",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/77eaa6fc45ba7cda90ca7c1ed2374e488a553d2e"
      }
    ],
    "stats": {
      "total": 39,
      "additions": 19,
      "deletions": 20
    },
    "files": [
      {
        "sha": "cd06e0c2048ce854ec193879520454ae99fbe5b7",
        "filename": "src/init.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5409404d7585d45b5d4a7142171f138c213e6e19/src/init.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5409404d7585d45b5d4a7142171f138c213e6e19/src/init.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/init.cpp?ref=5409404d7585d45b5d4a7142171f138c213e6e19",
        "patch": "@@ -205,7 +205,7 @@ std::string HelpMessage(HelpMessageMode hmm)\n     strUsage += \"  -dbcache=<n>           \" + strprintf(_(\"Set database cache size in megabytes (%d to %d, default: %d)\"), nMinDbCache, nMaxDbCache, nDefaultDbCache) + \"\\n\";\n     strUsage += \"  -keypool=<n>           \" + _(\"Set key pool size to <n> (default: 100)\") + \"\\n\";\n     strUsage += \"  -loadblock=<file>      \" + _(\"Imports blocks from external blk000??.dat file\") + \" \" + _(\"on startup\") + \"\\n\";\n-    strUsage += \"  -par=<n>               \" + _(\"Set the number of script verification threads (up to 16, 0 = auto, <0 = leave that many cores free, default: 0)\") + \"\\n\";\n+    strUsage += \"  -par=<n>               \" + strprintf(_(\"Set the number of script verification threads (%u to %d, 0 = auto, <0 = leave that many cores free, default: %d)\"), -(int)boost::thread::hardware_concurrency(), MAX_SCRIPTCHECK_THREADS, DEFAULT_SCRIPTCHECK_THREADS) + \"\\n\";\n     strUsage += \"  -pid=<file>            \" + _(\"Specify pid file (default: bitcoind.pid)\") + \"\\n\";\n     strUsage += \"  -reindex               \" + _(\"Rebuild block chain index from current blk000??.dat files\") + \" \" + _(\"on startup\") + \"\\n\";\n     strUsage += \"  -txindex               \" + _(\"Maintain a full transaction index (default: 0)\") + \"\\n\";\n@@ -519,7 +519,7 @@ bool AppInit2(boost::thread_group& threadGroup)\n     Checkpoints::fEnabled = GetBoolArg(\"-checkpoints\", true);\n \n     // -par=0 means autodetect, but nScriptCheckThreads==0 means no concurrency\n-    nScriptCheckThreads = GetArg(\"-par\", 0);\n+    nScriptCheckThreads = GetArg(\"-par\", DEFAULT_SCRIPTCHECK_THREADS);\n     if (nScriptCheckThreads <= 0)\n         nScriptCheckThreads += boost::thread::hardware_concurrency();\n     if (nScriptCheckThreads <= 1)"
      },
      {
        "sha": "aff20d0379f67ab0b7680061982590a47205fc02",
        "filename": "src/main.h",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5409404d7585d45b5d4a7142171f138c213e6e19/src/main.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5409404d7585d45b5d4a7142171f138c213e6e19/src/main.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/main.h?ref=5409404d7585d45b5d4a7142171f138c213e6e19",
        "patch": "@@ -60,6 +60,8 @@ static const int COINBASE_MATURITY = 100;\n static const unsigned int LOCKTIME_THRESHOLD = 500000000; // Tue Nov  5 00:53:20 1985 UTC\n /** Maximum number of script-checking threads allowed */\n static const int MAX_SCRIPTCHECK_THREADS = 16;\n+/** -par default (number of script-checking threads, 0 = auto) */\n+static const int DEFAULT_SCRIPTCHECK_THREADS = 0;\n /** Number of blocks that can be requested at any given time from a single peer. */\n static const int MAX_BLOCKS_IN_TRANSIT_PER_PEER = 128;\n /** Timeout in seconds before considering a block download peer unresponsive. */"
      },
      {
        "sha": "9fbc865185bcfe56247fafee05d6c97c0bb128f6",
        "filename": "src/qt/forms/optionsdialog.ui",
        "status": "modified",
        "additions": 1,
        "deletions": 7,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5409404d7585d45b5d4a7142171f138c213e6e19/src/qt/forms/optionsdialog.ui",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5409404d7585d45b5d4a7142171f138c213e6e19/src/qt/forms/optionsdialog.ui",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/forms/optionsdialog.ui?ref=5409404d7585d45b5d4a7142171f138c213e6e19",
        "patch": "@@ -98,13 +98,7 @@\n          <item>\n           <widget class=\"QSpinBox\" name=\"threadsScriptVerif\">\n            <property name=\"toolTip\">\n-            <string>Set the number of script verification threads (up to 16, 0 = auto, &lt;0 = leave that many cores free, default: 0)</string>\n-           </property>\n-           <property name=\"minimum\">\n-            <number>-16</number>\n-           </property>\n-           <property name=\"maximum\">\n-            <number>16</number>\n+            <string>(0 = auto, &lt;0 = leave that many cores free)</string>\n            </property>\n           </widget>\n          </item>"
      },
      {
        "sha": "977f7f4da7e67cc1803ae342e819f8d4ae721cee",
        "filename": "src/qt/optionsdialog.cpp",
        "status": "modified",
        "additions": 3,
        "deletions": 1,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5409404d7585d45b5d4a7142171f138c213e6e19/src/qt/optionsdialog.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5409404d7585d45b5d4a7142171f138c213e6e19/src/qt/optionsdialog.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/optionsdialog.cpp?ref=5409404d7585d45b5d4a7142171f138c213e6e19",
        "patch": "@@ -14,7 +14,7 @@\n #include \"monitoreddatamapper.h\"\n #include \"optionsmodel.h\"\n \n-#include \"main.h\" // for CTransaction::nMinTxFee\n+#include \"main.h\" // for CTransaction::nMinTxFee and MAX_SCRIPTCHECK_THREADS\n #include \"netbase.h\"\n #include \"txdb.h\" // for -dbcache defaults\n \n@@ -37,6 +37,8 @@ OptionsDialog::OptionsDialog(QWidget *parent) :\n     /* Main elements init */\n     ui->databaseCache->setMinimum(nMinDbCache);\n     ui->databaseCache->setMaximum(nMaxDbCache);\n+    ui->threadsScriptVerif->setMinimum(-(int)boost::thread::hardware_concurrency());\n+    ui->threadsScriptVerif->setMaximum(MAX_SCRIPTCHECK_THREADS);\n \n     /* Network elements init */\n #ifndef USE_UPNP"
      },
      {
        "sha": "9abe9351bbf8cdf859888021f2fe3240f46849ec",
        "filename": "src/qt/optionsmodel.cpp",
        "status": "modified",
        "additions": 11,
        "deletions": 10,
        "changes": 21,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5409404d7585d45b5d4a7142171f138c213e6e19/src/qt/optionsmodel.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5409404d7585d45b5d4a7142171f138c213e6e19/src/qt/optionsmodel.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/optionsmodel.cpp?ref=5409404d7585d45b5d4a7142171f138c213e6e19",
        "patch": "@@ -76,6 +76,17 @@ void OptionsModel::Init()\n     // by command-line and show this in the UI.\n \n     // Main\n+    if (!settings.contains(\"nDatabaseCache\"))\n+        settings.setValue(\"nDatabaseCache\", (qint64)nDefaultDbCache);\n+    if (!SoftSetArg(\"-dbcache\", settings.value(\"nDatabaseCache\").toString().toStdString()))\n+        addOverriddenOption(\"-dbcache\");\n+\n+    if (!settings.contains(\"nThreadsScriptVerif\"))\n+        settings.setValue(\"nThreadsScriptVerif\", DEFAULT_SCRIPTCHECK_THREADS);\n+    if (!SoftSetArg(\"-par\", settings.value(\"nThreadsScriptVerif\").toString().toStdString()))\n+        addOverriddenOption(\"-par\");\n+\n+    // Wallet\n #ifdef ENABLE_WALLET\n     if (!settings.contains(\"nTransactionFee\"))\n         settings.setValue(\"nTransactionFee\", 0);\n@@ -89,16 +100,6 @@ void OptionsModel::Init()\n         addOverriddenOption(\"-spendzeroconfchange\");\n #endif\n \n-    if (!settings.contains(\"nDatabaseCache\"))\n-        settings.setValue(\"nDatabaseCache\", (qint64)nDefaultDbCache);\n-    if (!SoftSetArg(\"-dbcache\", settings.value(\"nDatabaseCache\").toString().toStdString()))\n-        addOverriddenOption(\"-dbcache\");\n-\n-    if (!settings.contains(\"nThreadsScriptVerif\"))\n-        settings.setValue(\"nThreadsScriptVerif\", 0);\n-    if (!SoftSetArg(\"-par\", settings.value(\"nThreadsScriptVerif\").toString().toStdString()))\n-        addOverriddenOption(\"-par\");\n-\n     // Network\n     if (!settings.contains(\"fUseUPnP\"))\n #ifdef USE_UPNP"
      }
    ]
  }
]