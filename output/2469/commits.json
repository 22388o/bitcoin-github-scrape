[
  {
    "sha": "87dd6035e583d45d6c2e464867425ee1a9cad8e9",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo4N2RkNjAzNWU1ODNkNDVkNmMyZTQ2NDg2NzQyNWVlMWE5Y2FkOGU5",
    "commit": {
      "author": {
        "name": "Philip Kaufmann",
        "email": "phil.kaufmann@t-online.de",
        "date": "2013-04-06T10:14:05Z"
      },
      "committer": {
        "name": "Philip Kaufmann",
        "email": "phil.kaufmann@t-online.de",
        "date": "2013-04-06T16:50:34Z"
      },
      "message": "Bitcoin-Qt: emit numBlocksChanged for changed reindex or importing state\n\n- this allows our progressbarlabel to correctly update, when we\n  finish a reindex or import, but do not get new blocks from other sources",
      "tree": {
        "sha": "3f23763c138b71a765e18fa5c663fb129d157102",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3f23763c138b71a765e18fa5c663fb129d157102"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/87dd6035e583d45d6c2e464867425ee1a9cad8e9",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/87dd6035e583d45d6c2e464867425ee1a9cad8e9",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/87dd6035e583d45d6c2e464867425ee1a9cad8e9",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/87dd6035e583d45d6c2e464867425ee1a9cad8e9/comments",
    "author": null,
    "committer": null,
    "parents": [
      {
        "sha": "ab806a69a23c47e75821aa8a1fcd8d7f9e32999e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ab806a69a23c47e75821aa8a1fcd8d7f9e32999e",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/ab806a69a23c47e75821aa8a1fcd8d7f9e32999e"
      }
    ],
    "stats": {
      "total": 12,
      "additions": 10,
      "deletions": 2
    },
    "files": [
      {
        "sha": "c17c602b50540845150c829927255feecddd7a23",
        "filename": "src/qt/clientmodel.cpp",
        "status": "modified",
        "additions": 8,
        "deletions": 2,
        "changes": 10,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/87dd6035e583d45d6c2e464867425ee1a9cad8e9/src/qt/clientmodel.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/87dd6035e583d45d6c2e464867425ee1a9cad8e9/src/qt/clientmodel.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/clientmodel.cpp?ref=87dd6035e583d45d6c2e464867425ee1a9cad8e9",
        "patch": "@@ -17,7 +17,9 @@ static const int64 nClientStartupTime = GetTime();\n \n ClientModel::ClientModel(OptionsModel *optionsModel, QObject *parent) :\n     QObject(parent), optionsModel(optionsModel),\n-    cachedNumBlocks(0), cachedNumBlocksOfPeers(0), numBlocksAtStartup(-1), pollTimer(0)\n+    cachedNumBlocks(0), cachedNumBlocksOfPeers(0),\n+    cachedReindexing(0), cachedImporting(0),\n+    numBlocksAtStartup(-1), pollTimer(0)\n {\n     pollTimer = new QTimer(this);\n     pollTimer->setInterval(MODEL_UPDATE_DELAY);\n@@ -70,10 +72,14 @@ void ClientModel::updateTimer()\n     int newNumBlocks = getNumBlocks();\n     int newNumBlocksOfPeers = getNumBlocksOfPeers();\n \n-    if(cachedNumBlocks != newNumBlocks || cachedNumBlocksOfPeers != newNumBlocksOfPeers)\n+    // check for changed number of blocks we have, number of blocks peers claim to have, reindexing state and importing state\n+    if (cachedNumBlocks != newNumBlocks || cachedNumBlocksOfPeers != newNumBlocksOfPeers ||\n+        cachedReindexing != fReindex || cachedImporting != fImporting)\n     {\n         cachedNumBlocks = newNumBlocks;\n         cachedNumBlocksOfPeers = newNumBlocksOfPeers;\n+        cachedReindexing = fReindex;\n+        cachedImporting = fImporting;\n \n         // ensure we return the maximum of newNumBlocksOfPeers and newNumBlocks to not create weird displays in the GUI\n         emit numBlocksChanged(newNumBlocks, std::max(newNumBlocksOfPeers, newNumBlocks));"
      },
      {
        "sha": "904bff1886f827f488d5df1baa43f230738b89c7",
        "filename": "src/qt/clientmodel.h",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/87dd6035e583d45d6c2e464867425ee1a9cad8e9/src/qt/clientmodel.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/87dd6035e583d45d6c2e464867425ee1a9cad8e9/src/qt/clientmodel.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/clientmodel.h?ref=87dd6035e583d45d6c2e464867425ee1a9cad8e9",
        "patch": "@@ -60,6 +60,8 @@ class ClientModel : public QObject\n \n     int cachedNumBlocks;\n     int cachedNumBlocksOfPeers;\n+\tbool cachedReindexing;\n+\tbool cachedImporting;\n \n     int numBlocksAtStartup;\n "
      }
    ]
  }
]