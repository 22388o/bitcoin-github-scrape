MarcoFalke,2020-08-18 14:26:31,Very nice. Concept ACK,https://github.com/bitcoin/bitcoin/pull/19752#issuecomment-675511036,675511036,
practicalswift,2020-08-18 17:32:01,"Nice first-time contribution! Warm welcome as a contributor @slmtpz :)\n\nConcept ACK",https://github.com/bitcoin/bitcoin/pull/19752#issuecomment-675614094,675614094,
slmtpz,2020-08-18 17:35:32,"> Nice first-time contribution! Warm welcome as a contributor @slmtpz :)\n> \n> Concept ACK\n\nThank you, looking forward to more contributions in future!",https://github.com/bitcoin/bitcoin/pull/19752#issuecomment-675615994,675615994,
DrahtBot,2020-08-20 20:08:17,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #19700 (wallet: Replace -zapwallettxes with wallet tool command by achow101)\n* #19671 (wallet: Remove -zapwallettxes by a",https://github.com/bitcoin/bitcoin/pull/19752#issuecomment-677877412,677877412,
slmtpz,2020-08-25 19:40:31,"> Concept ACK, welcome! ðŸ˜Š this is awesome!\n> \n> I complain about this pretty often ðŸ˜… The util `wait_until` function doesn't have any context from the TestFramework instance (i.e. `timeout` and `timeout_factor`). Sometimes when it's used, the test writer forgets to pass in the `mininode_lock` which is even worse. I think it would be a good idea to add a comment to the `wait_until` function in t",https://github.com/bitcoin/bitcoin/pull/19752#issuecomment-680231078,680231078,
MarcoFalke,2020-08-27 06:21:38,"Thanks for keeping this updated and addressing all the feedback!\n\nACK d841301010914203fb5ef02627c76fad99cb11f1 ðŸ¦†\n\n<details><summary>Show signature and timestamp</summary>\n\nSignature:\n\n```\n-----BEGIN PGP SIGNED MESSAGE-----\nHash: SHA512\n\nACK d841301010914203fb5ef02627c76fad99cb11f1 ðŸ¦†\n-----BEGIN PGP SIGNATURE-----\n\niQGzBAEBCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgk",https://github.com/bitcoin/bitcoin/pull/19752#issuecomment-681617705,681617705,
glozow,2020-08-21 02:57:16,"Style nit: I think it's preferred to keep the list on newlines with commas at the end, otherwise we have a situation like this where the diff goes from 1 line to 6. Is there a reason you're changing it?",https://github.com/bitcoin/bitcoin/pull/19752#discussion_r474380879,474380879,test/functional/p2p_leak.py
glozow,2020-08-21 03:12:18,"Hm, is there a reason for removing `mininode_lock` and adding `check_connected=False`?",https://github.com/bitcoin/bitcoin/pull/19752#discussion_r474384465,474384465,test/functional/p2p_compactblocks.py
glozow,2020-08-21 03:13:34,why are you removing the timeout and lock here?,https://github.com/bitcoin/bitcoin/pull/19752#discussion_r474384763,474384763,test/functional/p2p_sendheaders.py
glozow,2020-08-21 03:13:43,same,https://github.com/bitcoin/bitcoin/pull/19752#discussion_r474384793,474384793,test/functional/p2p_sendheaders.py
glozow,2020-08-21 03:26:12,"I'm not sure if this is one of the goals of this PR, but in this situation I think it's best to use `test_node.wait_until()`. \n\nSame with the rest of the test.",https://github.com/bitcoin/bitcoin/pull/19752#discussion_r474387675,474387675,test/functional/p2p_compactblocks.py
glozow,2020-08-21 03:30:44,"Here, `wait_for_broadcast(txid)` would be more appropriate\n\n(txid needs to not be converted to int though)",https://github.com/bitcoin/bitcoin/pull/19752#discussion_r474388691,474388691,test/functional/wallet_resendwallettransactions.py
glozow,2020-08-21 03:30:55,same,https://github.com/bitcoin/bitcoin/pull/19752#discussion_r474388724,474388724,test/functional/wallet_resendwallettransactions.py
glozow,2020-08-21 03:33:31,"Also, `wait_for_disconnect` would be better.",https://github.com/bitcoin/bitcoin/pull/19752#discussion_r474389262,474389262,test/functional/p2p_compactblocks.py
slmtpz,2020-08-25 18:09:54,"I was considering line lengths. It seemed a bit awkward to keep this structure even if there is only one import. However, I totally agree with you on separating with new lines so git history stays clean. \nWhat about the imports where this structure is not used? While I'm here, should I put them in a list?",https://github.com/bitcoin/bitcoin/pull/19752#discussion_r476643158,476643158,test/functional/p2p_leak.py
MarcoFalke,2020-08-25 18:21:27,"When the list is longer than one item and it was previously on multiple lines, it probably makes sense to keep it on multiple lines",https://github.com/bitcoin/bitcoin/pull/19752#discussion_r476649324,476649324,test/functional/p2p_leak.py
MarcoFalke,2020-08-25 18:22:18,nit: accidental change,https://github.com/bitcoin/bitcoin/pull/19752#discussion_r476649797,476649797,test/functional/rpc_invalidateblock.py
slmtpz,2020-08-25 18:25:52,Corrected.,https://github.com/bitcoin/bitcoin/pull/19752#discussion_r476651852,476651852,test/functional/rpc_invalidateblock.py
slmtpz,2020-08-25 18:47:25,"I was inclined to use the one from `BitcoinTestFramework` since I thought it would be good to keep consistency. However, in this case, since we are waiting for a change in `test_node`, using that one makes more sense, did I get it right? :) ",https://github.com/bitcoin/bitcoin/pull/19752#discussion_r476663715,476663715,test/functional/p2p_compactblocks.py
slmtpz,2020-08-25 18:58:46,"This class extends `P2PInterface` not `BitcoinTestFramework`. mininode one already has a lock. As for timeout, it already has a default value of 60.",https://github.com/bitcoin/bitcoin/pull/19752#discussion_r476670346,476670346,test/functional/p2p_sendheaders.py
slmtpz,2020-08-25 18:59:06,"This class extends P2PInterface not BitcoinTestFramework. mininode one already has a lock. As for timeout, it already has a default value of 60.\n\n",https://github.com/bitcoin/bitcoin/pull/19752#discussion_r476670575,476670575,test/functional/p2p_sendheaders.py
slmtpz,2020-08-25 19:35:35,"Used `wait_for_disconnect` instead, thanks!",https://github.com/bitcoin/bitcoin/pull/19752#discussion_r476690295,476690295,test/functional/p2p_compactblocks.py
slmtpz,2020-08-25 19:35:54,Updated.,https://github.com/bitcoin/bitcoin/pull/19752#discussion_r476690465,476690465,test/functional/p2p_compactblocks.py
slmtpz,2020-08-25 19:36:34,It looks cleaner now! Please have a look.,https://github.com/bitcoin/bitcoin/pull/19752#discussion_r476690804,476690804,test/functional/wallet_resendwallettransactions.py
slmtpz,2020-08-25 19:36:41,Updated,https://github.com/bitcoin/bitcoin/pull/19752#discussion_r476690871,476690871,test/functional/wallet_resendwallettransactions.py
MarcoFalke,2020-08-26 06:25:20,"```suggestion\n        self.nodes[2].p2p.wait_until(lambda: sorted(blocks) == sorted(list(self.nodes[2].p2p.block_receive_map.keys())), timeout=5)\n```\n\nShouldn't this be",https://github.com/bitcoin/bitcoin/pull/19752#discussion_r477061731,477061731,test/functional/example_test.py
MarcoFalke,2020-08-26 06:26:09,"```suggestion\n        self.wait_until(lambda: not node.getblockchaininfo()['initialblockdownload'], timeout=10)\n```\n\nwhy the lock?",https://github.com/bitcoin/bitcoin/pull/19752#discussion_r477062057,477062057,test/functional/feature_versionbits_warning.py
MarcoFalke,2020-08-26 06:28:42,"```suggestion\n        self.wtx_node.wait_until(received_wtxidrelay)\n```",https://github.com/bitcoin/bitcoin/pull/19752#discussion_r477063111,477063111,test/functional/p2p_segwit.py
MarcoFalke,2020-08-26 06:30:09,"```suggestion\n                inv_node.wait_until(lambda: inv_node.block_announced)\n```",https://github.com/bitcoin/bitcoin/pull/19752#discussion_r477063826,477063826,test/functional/p2p_sendheaders.py
MarcoFalke,2020-08-26 06:30:38,"```suggestion\n        p.wait_until(lambda: p.tx_getdata_count >= MAX_GETDATA_IN_FLIGHT)\n```",https://github.com/bitcoin/bitcoin/pull/19752#discussion_r477064053,477064053,test/functional/p2p_tx_download.py
MarcoFalke,2020-08-26 06:30:51,same,https://github.com/bitcoin/bitcoin/pull/19752#discussion_r477064127,477064127,test/functional/p2p_tx_download.py
MarcoFalke,2020-08-26 06:30:59,"same\n",https://github.com/bitcoin/bitcoin/pull/19752#discussion_r477064174,477064174,test/functional/p2p_tx_download.py
slmtpz,2020-08-26 06:38:40,Is there a big difference between two? I was inclined to use the one from framework wherever possible.,https://github.com/bitcoin/bitcoin/pull/19752#discussion_r477067273,477067273,test/functional/example_test.py
slmtpz,2020-08-26 06:39:57,The class of this method inherits from `BitcoinTestFramework` which does not have a default lock.,https://github.com/bitcoin/bitcoin/pull/19752#discussion_r477067799,477067799,test/functional/feature_versionbits_warning.py
MarcoFalke,2020-08-26 06:42:18,"It seems a bit convolved to import the lock, which needs to be taken, then call a method, which passes the imported lock to be taken.\n\nSimply calling a member function that takes the lock when needed without importing or passing it seems less error prone, as there is no way it can be missed. Also, it makes the calling code shorter and more readable",https://github.com/bitcoin/bitcoin/pull/19752#discussion_r477068786,477068786,test/functional/example_test.py
MarcoFalke,2020-08-26 06:43:16,but why is the lock needed? Why does it need to be taken here?,https://github.com/bitcoin/bitcoin/pull/19752#discussion_r477069182,477069182,test/functional/feature_versionbits_warning.py
slmtpz,2020-08-26 06:44:51,"I frankly don't know. It was there before, so I didn't touch it.",https://github.com/bitcoin/bitcoin/pull/19752#discussion_r477069861,477069861,test/functional/feature_versionbits_warning.py
slmtpz,2020-08-26 06:51:54,"Updated, thanks for clear explanation.",https://github.com/bitcoin/bitcoin/pull/19752#discussion_r477073072,477073072,test/functional/example_test.py
slmtpz,2020-08-26 06:52:09,Updated.,https://github.com/bitcoin/bitcoin/pull/19752#discussion_r477073184,477073184,test/functional/p2p_segwit.py
slmtpz,2020-08-26 06:52:17,Updated.,https://github.com/bitcoin/bitcoin/pull/19752#discussion_r477073243,477073243,test/functional/p2p_sendheaders.py
slmtpz,2020-08-26 06:52:48,Updated.,https://github.com/bitcoin/bitcoin/pull/19752#discussion_r477073508,477073508,test/functional/p2p_tx_download.py
slmtpz,2020-08-26 06:52:51,Updated.,https://github.com/bitcoin/bitcoin/pull/19752#discussion_r477073548,477073548,test/functional/p2p_tx_download.py
slmtpz,2020-08-26 06:52:55,Updated.,https://github.com/bitcoin/bitcoin/pull/19752#discussion_r477073568,477073568,test/functional/p2p_tx_download.py
