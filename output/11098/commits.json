[
  {
    "sha": "89e9edacbf95d32c177bb33aeb442d790c28e9bd",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo4OWU5ZWRhY2JmOTVkMzJjMTc3YmIzM2FlYjQ0MmQ3OTBjMjhlOWJk",
    "commit": {
      "author": {
        "name": "CryptAxe",
        "email": "cryptaxe@gmail.com",
        "date": "2017-08-20T05:04:56Z"
      },
      "committer": {
        "name": "CryptAxe",
        "email": "cryptaxe@gmail.com",
        "date": "2017-08-20T05:04:56Z"
      },
      "message": "[Qt] Add spend all button to the SendCoinsDialog\n\nGet the balance of the wallet (with CoinControl if enabled).\nThen divide the amount available by all of the SendCoinEntry(s) and\ncheck the subtract fee from amount checkbox for all SendCoinEntry(s).",
      "tree": {
        "sha": "6e7468848b9ac99f99b1aa6d1815324904380d76",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6e7468848b9ac99f99b1aa6d1815324904380d76"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/89e9edacbf95d32c177bb33aeb442d790c28e9bd",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "expired_key",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIcBAABCAAGBQJZmRk/AAoJEJHwhYy7m2V0NnYP/inBWbUs8aR7xAE7HIQKTo/Y\nyf1Yhg5lIHxhof8KKF3I4ttA3Cxx06qQ3UJeMey4txzSIssb/JZY7/mLxBKd72oI\nJUTuDK3zTnOAimk9Y4SY+EI3bQKeDDTFx7LXwyNBKOlLxlQ9wJP5wgZGAK9QUFtH\n9JZ556wRKAhdYIYXDgojC5eNBlxJ7cpy3c3JuEqXPOov+oJKNaHzL0gSSs4g0ptt\njsnHmV6C0K65AFBTsBb4VXrM4uevVMmlqbzddMWf+wmKSQfsnSAFzw/PgwWgxFsC\n+3HJs94kkPgvbQZ0vEj/fi4Q2EaP+u4/PSsAiBgGQC5HX1SIjHQY+raYdbbHhyQp\nlD2849X25eJYy3+hhc7YNnLhSXSNaMb699V4mAf8cxm4d8s2ua/qofTRcmmawvIL\nEgT0k7sx3rCK0tgUDewJoaDdKqpNQ98GAiZIZJQD007X7fHXlQZ0faHbBffYbTCM\nmvMUKyrmmkYZdCPmRbzk4S59bz7JzBWjIp1W3/yQtpj9gsR0Ch2/5rPjZ4W8lIJP\nJvZC+J5z0olZzCq3dhg1eHklyu5q0xSnXTfPZ1R0Ep+OTYag6jg+tmy+8y0R0hH6\nTkOXmv6jLiFzszuCaRiX5c7xQagRWIzyZ1rivYjvKgs+zb4Trx6tINsnv8nHh9ok\nYhMfwIK+jHqyQfIB4r+N\n=DW5C\n-----END PGP SIGNATURE-----",
        "payload": "tree 6e7468848b9ac99f99b1aa6d1815324904380d76\nparent 262167393d05eb46b962cf0515a6dc73c4cec8ea\nauthor CryptAxe <cryptaxe@gmail.com> 1503205496 -0700\ncommitter CryptAxe <cryptaxe@gmail.com> 1503205496 -0700\n\n[Qt] Add spend all button to the SendCoinsDialog\n\nGet the balance of the wallet (with CoinControl if enabled).\nThen divide the amount available by all of the SendCoinEntry(s) and\ncheck the subtract fee from amount checkbox for all SendCoinEntry(s).\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/89e9edacbf95d32c177bb33aeb442d790c28e9bd",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/89e9edacbf95d32c177bb33aeb442d790c28e9bd",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/89e9edacbf95d32c177bb33aeb442d790c28e9bd/comments",
    "author": {
      "login": "CryptAxe",
      "id": 8107318,
      "node_id": "MDQ6VXNlcjgxMDczMTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8107318?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CryptAxe",
      "html_url": "https://github.com/CryptAxe",
      "followers_url": "https://api.github.com/users/CryptAxe/followers",
      "following_url": "https://api.github.com/users/CryptAxe/following{/other_user}",
      "gists_url": "https://api.github.com/users/CryptAxe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CryptAxe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CryptAxe/subscriptions",
      "organizations_url": "https://api.github.com/users/CryptAxe/orgs",
      "repos_url": "https://api.github.com/users/CryptAxe/repos",
      "events_url": "https://api.github.com/users/CryptAxe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CryptAxe/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "CryptAxe",
      "id": 8107318,
      "node_id": "MDQ6VXNlcjgxMDczMTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8107318?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/CryptAxe",
      "html_url": "https://github.com/CryptAxe",
      "followers_url": "https://api.github.com/users/CryptAxe/followers",
      "following_url": "https://api.github.com/users/CryptAxe/following{/other_user}",
      "gists_url": "https://api.github.com/users/CryptAxe/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/CryptAxe/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/CryptAxe/subscriptions",
      "organizations_url": "https://api.github.com/users/CryptAxe/orgs",
      "repos_url": "https://api.github.com/users/CryptAxe/repos",
      "events_url": "https://api.github.com/users/CryptAxe/events{/privacy}",
      "received_events_url": "https://api.github.com/users/CryptAxe/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "262167393d05eb46b962cf0515a6dc73c4cec8ea",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/262167393d05eb46b962cf0515a6dc73c4cec8ea",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/262167393d05eb46b962cf0515a6dc73c4cec8ea"
      }
    ],
    "stats": {
      "total": 48,
      "additions": 48,
      "deletions": 0
    },
    "files": [
      {
        "sha": "ae30efe35f633b494a0ced1e619f338c12e6c24f",
        "filename": "src/qt/forms/sendcoinsdialog.ui",
        "status": "modified",
        "additions": 7,
        "deletions": 0,
        "changes": 7,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/89e9edacbf95d32c177bb33aeb442d790c28e9bd/src/qt/forms/sendcoinsdialog.ui",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/89e9edacbf95d32c177bb33aeb442d790c28e9bd/src/qt/forms/sendcoinsdialog.ui",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/forms/sendcoinsdialog.ui?ref=89e9edacbf95d32c177bb33aeb442d790c28e9bd",
        "patch": "@@ -1223,6 +1223,13 @@\n        </property>\n       </spacer>\n      </item>\n+     <item>\n+      <widget class=\"QPushButton\" name=\"buttonSendAll\">\n+       <property name=\"text\">\n+        <string>Send All</string>\n+       </property>\n+      </widget>\n+     </item>\n      <item>\n       <layout class=\"QHBoxLayout\" name=\"horizontalLayout_2\">\n        <property name=\"spacing\">"
      },
      {
        "sha": "1063674c8bf8098dd16f7ac3b6b759a7575b69ad",
        "filename": "src/qt/sendcoinsdialog.cpp",
        "status": "modified",
        "additions": 28,
        "deletions": 0,
        "changes": 28,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/89e9edacbf95d32c177bb33aeb442d790c28e9bd/src/qt/sendcoinsdialog.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/89e9edacbf95d32c177bb33aeb442d790c28e9bd/src/qt/sendcoinsdialog.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/sendcoinsdialog.cpp?ref=89e9edacbf95d32c177bb33aeb442d790c28e9bd",
        "patch": "@@ -607,6 +607,34 @@ void SendCoinsDialog::on_buttonMinimizeFee_clicked()\n     minimizeFeeSection(true);\n }\n \n+void SendCoinsDialog::on_buttonSendAll_clicked()\n+{\n+    // Get CCoinControl instance if CoinControl is enabled or create a new one\n+    CCoinControl coinControl;\n+    if (model->getOptionsModel()->getCoinControlFeatures())\n+        coinControl = *CoinControlDialog::coinControl;\n+\n+    // Calculate total amount to spend\n+    CAmount nTotalAmount = model->getBalance(&coinControl);\n+\n+    // Calculate amount per entry\n+    int nEntries = ui->entries->count();\n+    CAmount nAmountPerEntry = (nEntries ? (nTotalAmount / nEntries) : nTotalAmount);\n+\n+    for(int i = 0; i < nEntries; ++i)\n+    {\n+        SendCoinsEntry *entry = qobject_cast<SendCoinsEntry*>(ui->entries->itemAt(i)->widget());\n+        if(entry)\n+        {\n+            // Check subtract fee from amount checkbox\n+            entry->checkSubtractFeeFromAmount();\n+\n+            // Set new amount for entry\n+            entry->setAmount(nAmountPerEntry);\n+        }\n+    }\n+}\n+\n void SendCoinsDialog::setMinimumFee()\n {\n     ui->radioCustomPerKilobyte->setChecked(true);"
      },
      {
        "sha": "6c004cc9e789c32b5373b6970fdeee479ec8b3ef",
        "filename": "src/qt/sendcoinsdialog.h",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/89e9edacbf95d32c177bb33aeb442d790c28e9bd/src/qt/sendcoinsdialog.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/89e9edacbf95d32c177bb33aeb442d790c28e9bd/src/qt/sendcoinsdialog.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/sendcoinsdialog.h?ref=89e9edacbf95d32c177bb33aeb442d790c28e9bd",
        "patch": "@@ -75,6 +75,7 @@ private Q_SLOTS:\n     void on_sendButton_clicked();\n     void on_buttonChooseFee_clicked();\n     void on_buttonMinimizeFee_clicked();\n+    void on_buttonSendAll_clicked();\n     void removeEntry(SendCoinsEntry* entry);\n     void updateDisplayUnit();\n     void coinControlFeatureChanged(bool);"
      },
      {
        "sha": "5a87b4b29767021747a39e94edba5528711d6627",
        "filename": "src/qt/sendcoinsentry.cpp",
        "status": "modified",
        "additions": 10,
        "deletions": 0,
        "changes": 10,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/89e9edacbf95d32c177bb33aeb442d790c28e9bd/src/qt/sendcoinsentry.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/89e9edacbf95d32c177bb33aeb442d790c28e9bd/src/qt/sendcoinsentry.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/sendcoinsentry.cpp?ref=89e9edacbf95d32c177bb33aeb442d790c28e9bd",
        "patch": "@@ -112,6 +112,11 @@ void SendCoinsEntry::clear()\n     updateDisplayUnit();\n }\n \n+void SendCoinsEntry::checkSubtractFeeFromAmount()\n+{\n+    ui->checkboxSubtractFeeFromAmount->setChecked(true);\n+}\n+\n void SendCoinsEntry::deleteClicked()\n {\n     Q_EMIT removeEntry(this);\n@@ -228,6 +233,11 @@ void SendCoinsEntry::setAddress(const QString &address)\n     ui->payAmount->setFocus();\n }\n \n+void SendCoinsEntry::setAmount(const CAmount &amount)\n+{\n+    ui->payAmount->setValue(amount);\n+}\n+\n bool SendCoinsEntry::isClear()\n {\n     return ui->payTo->text().isEmpty() && ui->payTo_is->text().isEmpty() && ui->payTo_s->text().isEmpty();"
      },
      {
        "sha": "34d97a78e03850b672124ae1b14b4631e637fa1c",
        "filename": "src/qt/sendcoinsentry.h",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/89e9edacbf95d32c177bb33aeb442d790c28e9bd/src/qt/sendcoinsentry.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/89e9edacbf95d32c177bb33aeb442d790c28e9bd/src/qt/sendcoinsentry.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/sendcoinsentry.h?ref=89e9edacbf95d32c177bb33aeb442d790c28e9bd",
        "patch": "@@ -38,6 +38,7 @@ class SendCoinsEntry : public QStackedWidget\n \n     void setValue(const SendCoinsRecipient &value);\n     void setAddress(const QString &address);\n+    void setAmount(const CAmount &amount);\n \n     /** Set up the tab chain manually, as Qt messes up the tab chain by default in some cases\n      *  (issue https://bugreports.qt-project.org/browse/QTBUG-10907).\n@@ -48,6 +49,7 @@ class SendCoinsEntry : public QStackedWidget\n \n public Q_SLOTS:\n     void clear();\n+    void checkSubtractFeeFromAmount();\n \n Q_SIGNALS:\n     void removeEntry(SendCoinsEntry *entry);"
      }
    ]
  }
]