[
  {
    "sha": "1a9f462caa63fa16d7b4415312d2032a42b3fe0b",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoxYTlmNDYyY2FhNjNmYTE2ZDdiNDQxNTMxMmQyMDMyYTQyYjNmZTBi",
    "commit": {
      "author": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2020-07-08T07:55:16Z"
      },
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2020-07-14T08:18:17Z"
      },
      "message": "gui, doc: rm Ban Score in GUI Peers window/release notes updates",
      "tree": {
        "sha": "a6630c483f4b0fc6e6e8a971d60e546784c814f2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a6630c483f4b0fc6e6e8a971d60e546784c814f2"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1a9f462caa63fa16d7b4415312d2032a42b3fe0b",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEd6u7+MhX7zEv6RP5T1chs9Djkh0FAl8NapEACgkQT1chs9Dj\nkh03gg//fSHQknGNyQSnQ7lg4hgmZXZQgNygk+Cyy6oMYVP8o5ox1nmR6nZPW2v/\nizaEkLTYzPBxOtzdfVxM+YLs5QUrXT2xx55HyE2wALgVQ/n91NijCs/CIcqdpoyk\nobKC3GcZFnQg027rrxmi+W4E1q4RL5+Tluoj/erzDWIJWyZ+fZfkDWTB2cr5WE6c\nnmUvCIENLvbG6QoK8LZuYAMCancbQX1b2I4NKTHDT9cCXjGr0p1ErAO0iA+cf+H6\nwPmlttBLyjAdDQPVDgnZ/dOC8XGfLVCiWlNdTAkY4+TIffszD5gQKkrvwKC6mS0G\nDI9a3ElAVqoAlLxtuBVx2HIM3hLZwTRTNWsuPMVfxTxJqzoqp1U5mcZ4CWmgZFsb\nB3HreCNl57PZUTE4eKrjqWX5HMKt0hWnMk+zTA6JYlWPaN2Azi3TiypGr+BIr+k/\nuwNwQtRpxCiFHsJRhRmqw5l2dyV/5U9GleyuCCjlKEZwd8/8HvJ1lTXy95oyJrWQ\n5/Yh/Tsvb77hyI/I6gEIdZ04IK+wPOQiDjv+FsxcN+reMYIDnmpYJKnFj8ymqHUX\nMrpzL91S2wgfsXqeMiNDDSAqrO+9gDbFjGPYzCwGxz3xFMw2xJzr6T0BOnDkWx0K\nLxhV1NrOafaFF6eSRuFCQZvBhqt+WX+zbzcLWMA5iIDzAd43GqA=\n=j8x6\n-----END PGP SIGNATURE-----\n-----BEGIN OPENTIMESTAMPS GIT TIMESTAMP-----\n\nAQHwIBD0uNRZDRR6/gRj6f+RFkGLbtEti8i+MSHNLXxcov3jCP/wEAV7E+zjHAIk\nCXclNulm7ScI8QRfDWqT8AjeSaJigCa5aQCD3+MNLvkMjiMiaHR0cHM6Ly9idGMu\nY2FsZW5kYXIuY2F0YWxsYXh5LmNvbf/wEDYvuj5niyTuzosMb5YuYLwI8SBGumgV\nqI7Hgffw9fKe6ftl8lsxTYWytk+F9/zyG4SHjAjxBF8NapPwCJeyGgzGiWgQAIPf\n4w0u+QyOKShodHRwczovL2Zpbm5leS5jYWxlbmRhci5ldGVybml0eXdhbGwuY29t\n//AQUouHyNwofdmPAlVzEnBdFwjxBF8NapPwCGCvGGfEcKXNAIPf4w0u+QyOLCto\ndHRwczovL2JvYi5idGMuY2FsZW5kYXIub3BlbnRpbWVzdGFtcHMub3Jn8BDW99Fx\n8TsZpdL8xmwfpIQDCPEgTdzD4tWC1iruD1JYJo3Sn1jsuoiZdzbhHb7wMiNPEgcI\n8QRfDWqT8AjjUw3j17iBqwCD3+MNLvkMji4taHR0cHM6Ly9hbGljZS5idGMuY2Fs\nZW5kYXIub3BlbnRpbWVzdGFtcHMub3Jn\n-----END OPENTIMESTAMPS GIT TIMESTAMP-----",
        "payload": "tree a6630c483f4b0fc6e6e8a971d60e546784c814f2\nparent 90b5fc9ce41117b3a85170e6fc129e87bbd15f48\nauthor Jon Atack <jon@atack.com> 1594194916 +0200\ncommitter Jon Atack <jon@atack.com> 1594714697 +0200\n\ngui, doc: rm Ban Score in GUI Peers window/release notes updates\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1a9f462caa63fa16d7b4415312d2032a42b3fe0b",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/1a9f462caa63fa16d7b4415312d2032a42b3fe0b",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1a9f462caa63fa16d7b4415312d2032a42b3fe0b/comments",
    "author": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "90b5fc9ce41117b3a85170e6fc129e87bbd15f48",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/90b5fc9ce41117b3a85170e6fc129e87bbd15f48",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/90b5fc9ce41117b3a85170e6fc129e87bbd15f48"
      }
    ],
    "stats": {
      "total": 78,
      "additions": 29,
      "deletions": 49
    },
    "files": [
      {
        "sha": "23983dcd7bea93c106158f569da7887afefe319f",
        "filename": "doc/release-notes.md",
        "status": "modified",
        "additions": 9,
        "deletions": 3,
        "changes": 12,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/1a9f462caa63fa16d7b4415312d2032a42b3fe0b/doc/release-notes.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/1a9f462caa63fa16d7b4415312d2032a42b3fe0b/doc/release-notes.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/doc/release-notes.md?ref=1a9f462caa63fa16d7b4415312d2032a42b3fe0b",
        "patch": "@@ -98,7 +98,7 @@ will trigger BIP 125 (replace-by-fee) opt-in. (#11413)\n - The `bumpfee` command now uses `conf_target` rather than `confTarget` in the\n   options. (#11413)\n \n-- `getpeerinfo` no longer returns the `banscore` field unless the configuration\n+- The `getpeerinfo` RPC no longer returns the `banscore` field unless the configuration\n   option `-deprecatedrpc=banscore` is used. The `banscore` field will be fully\n   removed in the next major release. (#19469)\n \n@@ -123,8 +123,9 @@ Updated settings\n \n - The `-banscore` configuration option, which modified the default threshold for\n   disconnecting and discouraging misbehaving peers, has been removed as part of\n-  changes in this release to the handling of misbehaving peers. Refer to the\n-  section, \"Changes regarding misbehaving peers\", for details. (#19464)\n+  changes in 0.20.1 and in this release to the handling of misbehaving peers.\n+  Refer to \"Changes regarding misbehaving peers\" in the 0.20.1 release notes for\n+  details. (#19464)\n \n - The `-debug=db` logging category, which was deprecated in 0.20 and replaced by\n   `-debug=walletdb` to distinguish it from `coindb`, has been removed. (#19202)\n@@ -303,6 +304,11 @@ issue.\n GUI changes\n -----------\n \n+- The GUI Peers window no longer displays a \"Ban Score\" field. This is part of\n+  changes in 0.20.1 and in this release to the handling of misbehaving\n+  peers. Refer to \"Changes regarding misbehaving peers\" in the 0.20.1 release\n+  notes for details. (#19512)\n+\n Low-level changes\n =================\n "
      },
      {
        "sha": "4747dd6d26f014aa56c432e425abdc83aa06e839",
        "filename": "src/qt/forms/debugwindow.ui",
        "status": "modified",
        "additions": 20,
        "deletions": 43,
        "changes": 63,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/1a9f462caa63fa16d7b4415312d2032a42b3fe0b/src/qt/forms/debugwindow.ui",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/1a9f462caa63fa16d7b4415312d2032a42b3fe0b/src/qt/forms/debugwindow.ui",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/forms/debugwindow.ui?ref=1a9f462caa63fa16d7b4415312d2032a42b3fe0b",
        "patch": "@@ -1264,36 +1264,13 @@\n                 </widget>\n                </item>\n                <item row=\"8\" column=\"0\">\n-                <widget class=\"QLabel\" name=\"label_24\">\n-                 <property name=\"text\">\n-                  <string>Ban Score</string>\n-                 </property>\n-                </widget>\n-               </item>\n-               <item row=\"8\" column=\"1\">\n-                <widget class=\"QLabel\" name=\"peerBanScore\">\n-                 <property name=\"cursor\">\n-                  <cursorShape>IBeamCursor</cursorShape>\n-                 </property>\n-                 <property name=\"text\">\n-                  <string>N/A</string>\n-                 </property>\n-                 <property name=\"textFormat\">\n-                  <enum>Qt::PlainText</enum>\n-                 </property>\n-                 <property name=\"textInteractionFlags\">\n-                  <set>Qt::LinksAccessibleByMouse|Qt::TextSelectableByKeyboard|Qt::TextSelectableByMouse</set>\n-                 </property>\n-                </widget>\n-               </item>\n-               <item row=\"9\" column=\"0\">\n                 <widget class=\"QLabel\" name=\"label_22\">\n                  <property name=\"text\">\n                   <string>Connection Time</string>\n                  </property>\n                 </widget>\n                </item>\n-               <item row=\"9\" column=\"1\">\n+               <item row=\"8\" column=\"1\">\n                 <widget class=\"QLabel\" name=\"peerConnTime\">\n                  <property name=\"cursor\">\n                   <cursorShape>IBeamCursor</cursorShape>\n@@ -1309,14 +1286,14 @@\n                  </property>\n                 </widget>\n                </item>\n-               <item row=\"10\" column=\"0\">\n+               <item row=\"9\" column=\"0\">\n                 <widget class=\"QLabel\" name=\"label_15\">\n                  <property name=\"text\">\n                   <string>Last Send</string>\n                  </property>\n                 </widget>\n                </item>\n-               <item row=\"10\" column=\"1\">\n+               <item row=\"9\" column=\"1\">\n                 <widget class=\"QLabel\" name=\"peerLastSend\">\n                  <property name=\"cursor\">\n                   <cursorShape>IBeamCursor</cursorShape>\n@@ -1332,14 +1309,14 @@\n                  </property>\n                 </widget>\n                </item>\n-               <item row=\"11\" column=\"0\">\n+               <item row=\"10\" column=\"0\">\n                 <widget class=\"QLabel\" name=\"label_19\">\n                  <property name=\"text\">\n                   <string>Last Receive</string>\n                  </property>\n                 </widget>\n                </item>\n-               <item row=\"11\" column=\"1\">\n+               <item row=\"10\" column=\"1\">\n                 <widget class=\"QLabel\" name=\"peerLastRecv\">\n                  <property name=\"cursor\">\n                   <cursorShape>IBeamCursor</cursorShape>\n@@ -1355,14 +1332,14 @@\n                  </property>\n                 </widget>\n                </item>\n-               <item row=\"12\" column=\"0\">\n+               <item row=\"11\" column=\"0\">\n                 <widget class=\"QLabel\" name=\"label_18\">\n                  <property name=\"text\">\n                   <string>Sent</string>\n                  </property>\n                 </widget>\n                </item>\n-               <item row=\"12\" column=\"1\">\n+               <item row=\"11\" column=\"1\">\n                 <widget class=\"QLabel\" name=\"peerBytesSent\">\n                  <property name=\"cursor\">\n                   <cursorShape>IBeamCursor</cursorShape>\n@@ -1378,14 +1355,14 @@\n                  </property>\n                 </widget>\n                </item>\n-               <item row=\"13\" column=\"0\">\n+               <item row=\"12\" column=\"0\">\n                 <widget class=\"QLabel\" name=\"label_20\">\n                  <property name=\"text\">\n                   <string>Received</string>\n                  </property>\n                 </widget>\n                </item>\n-               <item row=\"13\" column=\"1\">\n+               <item row=\"12\" column=\"1\">\n                 <widget class=\"QLabel\" name=\"peerBytesRecv\">\n                  <property name=\"cursor\">\n                   <cursorShape>IBeamCursor</cursorShape>\n@@ -1401,14 +1378,14 @@\n                  </property>\n                 </widget>\n                </item>\n-               <item row=\"14\" column=\"0\">\n+               <item row=\"13\" column=\"0\">\n                 <widget class=\"QLabel\" name=\"label_26\">\n                  <property name=\"text\">\n                   <string>Ping Time</string>\n                  </property>\n                 </widget>\n                </item>\n-               <item row=\"14\" column=\"1\">\n+               <item row=\"13\" column=\"1\">\n                 <widget class=\"QLabel\" name=\"peerPingTime\">\n                  <property name=\"cursor\">\n                   <cursorShape>IBeamCursor</cursorShape>\n@@ -1424,7 +1401,7 @@\n                  </property>\n                 </widget>\n                </item>\n-               <item row=\"15\" column=\"0\">\n+               <item row=\"14\" column=\"0\">\n                 <widget class=\"QLabel\" name=\"peerPingWaitLabel\">\n                  <property name=\"toolTip\">\n                   <string>The duration of a currently outstanding ping.</string>\n@@ -1434,7 +1411,7 @@\n                  </property>\n                 </widget>\n                </item>\n-               <item row=\"15\" column=\"1\">\n+               <item row=\"14\" column=\"1\">\n                 <widget class=\"QLabel\" name=\"peerPingWait\">\n                  <property name=\"cursor\">\n                   <cursorShape>IBeamCursor</cursorShape>\n@@ -1450,14 +1427,14 @@\n                  </property>\n                 </widget>\n                </item>\n-               <item row=\"16\" column=\"0\">\n+               <item row=\"15\" column=\"0\">\n                 <widget class=\"QLabel\" name=\"peerMinPingLabel\">\n                  <property name=\"text\">\n                   <string>Min Ping</string>\n                  </property>\n                 </widget>\n                </item>\n-               <item row=\"16\" column=\"1\">\n+               <item row=\"15\" column=\"1\">\n                 <widget class=\"QLabel\" name=\"peerMinPing\">\n                  <property name=\"cursor\">\n                   <cursorShape>IBeamCursor</cursorShape>\n@@ -1473,14 +1450,14 @@\n                  </property>\n                 </widget>\n                </item>\n-               <item row=\"17\" column=\"0\">\n+               <item row=\"16\" column=\"0\">\n                 <widget class=\"QLabel\" name=\"label_timeoffset\">\n                  <property name=\"text\">\n                   <string>Time Offset</string>\n                  </property>\n                 </widget>\n                </item>\n-               <item row=\"17\" column=\"1\">\n+               <item row=\"16\" column=\"1\">\n                 <widget class=\"QLabel\" name=\"timeoffset\">\n                  <property name=\"cursor\">\n                   <cursorShape>IBeamCursor</cursorShape>\n@@ -1496,7 +1473,7 @@\n                  </property>\n                 </widget>\n                </item>\n-               <item row=\"18\" column=\"0\">\n+               <item row=\"17\" column=\"0\">\n                 <widget class=\"QLabel\" name=\"peerMappedASLabel\">\n                  <property name=\"toolTip\">\n                   <string>The mapped Autonomous System used for diversifying peer selection.</string>\n@@ -1506,7 +1483,7 @@\n                  </property>\n                 </widget>\n                </item>\n-               <item row=\"18\" column=\"1\">\n+               <item row=\"17\" column=\"1\">\n                 <widget class=\"QLabel\" name=\"peerMappedAS\">\n                  <property name=\"cursor\">\n                   <cursorShape>IBeamCursor</cursorShape>\n@@ -1522,7 +1499,7 @@\n                  </property>\n                 </widget>\n                </item>\n-               <item row=\"19\" column=\"0\">\n+               <item row=\"18\" column=\"0\">\n                 <spacer name=\"verticalSpacer_3\">\n                  <property name=\"orientation\">\n                   <enum>Qt::Vertical</enum>"
      },
      {
        "sha": "694e1c2eaed97530345c904ff66dee2cb9ebdef8",
        "filename": "src/qt/rpcconsole.cpp",
        "status": "modified",
        "additions": 0,
        "deletions": 3,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/1a9f462caa63fa16d7b4415312d2032a42b3fe0b/src/qt/rpcconsole.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/1a9f462caa63fa16d7b4415312d2032a42b3fe0b/src/qt/rpcconsole.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/rpcconsole.cpp?ref=1a9f462caa63fa16d7b4415312d2032a42b3fe0b",
        "patch": "@@ -1126,9 +1126,6 @@ void RPCConsole::updateNodeDetail(const CNodeCombinedStats *stats)\n     // This check fails for example if the lock was busy and\n     // nodeStateStats couldn't be fetched.\n     if (stats->fNodeStateStatsAvailable) {\n-        // Ban score is init to 0\n-        ui->peerBanScore->setText(QString(\"%1\").arg(stats->nodeStateStats.nMisbehavior));\n-\n         // Sync height is init to -1\n         if (stats->nodeStateStats.nSyncHeight > -1)\n             ui->peerSyncHeight->setText(QString(\"%1\").arg(stats->nodeStateStats.nSyncHeight));"
      }
    ]
  },
  {
    "sha": "fa108d6a757838225179a8df942cfb6d99c98c90",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYTEwOGQ2YTc1NzgzODIyNTE3OWE4ZGY5NDJjZmI2ZDk5Yzk4Yzkw",
    "commit": {
      "author": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2020-07-14T07:52:57Z"
      },
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2020-07-14T12:15:01Z"
      },
      "message": "test: update tests for peer discouragement",
      "tree": {
        "sha": "464ae40feccda07b7f0a151fdd0d081448558ffb",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/464ae40feccda07b7f0a151fdd0d081448558ffb"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa108d6a757838225179a8df942cfb6d99c98c90",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEd6u7+MhX7zEv6RP5T1chs9Djkh0FAl8NocsACgkQT1chs9Dj\nkh2mPhAAtmobttVUgEpNvsqL56shvYcK0AfKsI61z13eTqfWi4D5HCn95/j4eY1A\na7ZjYwYF3d/GF3VG6k4XEzE9k5qN0hHxHNfKVQnDpGpy9/PUkYKnc1R+YfVQbH87\nwWzrhBeaxYulDJdbfOfTrZr613ldkXbl+oQCeAC9QW3kYbkswpzU+tBPkkZ7Yk+x\n7jTiQqM6JP+uGUOdU3h7aZq/XTNKNckTuRQbAVfEfMLdRAXaY30zfh4wSj6oJ/yW\n7CM5ZXfRxVfLAdKejQxVPGCipJi8A+R734ly9Bev4gaxqLeSbYYxpORzsrb7vCST\n+YFgCrazXgG8pbET07wMJiw6RLid3wKrtoq9m/Qaf2n4BSI/37QBQXiIEtfZF9NA\n5prbLzF5Mib0M80QCUWpRzeMxDdXbv0RSC9YXiPzgrNowFrjAaRGACjk17doGQRT\njoAPYlRyFFDPF4a3LDqI3CJW5SAP9GHI+ubv9cKXIB2FxUpwEKKivhzEtap8L274\ngn6xlwvnMqDh8G6565XKWSXAq9Uwjgeio+uAhA/geuLtuEnXZVmU3tHjc2Sgd+XO\n8WgwrLkkHC0bYxaYnhL7kZDIwyn37Kabjqa/mZMUhaIEpwZxFu0OPAJkDZ6Q1RE/\nFWRbsc/A07ygPeqfnMrgjUfogk7BDOInYdOWEyFxL9arO15+opA=\n=Uvxv\n-----END PGP SIGNATURE-----\n-----BEGIN OPENTIMESTAMPS GIT TIMESTAMP-----\n\nAQHwID5W0/DLhdxU5g1p0N/ril6P1XTcC+JSlxyhWUqaBLhjCP/wECP8oCkDXLNx\nseCVk8o/s3sI8QRfDaHM8Aigi8OR0RW5/wCD3+MNLvkMjiwraHR0cHM6Ly9ib2Iu\nYnRjLmNhbGVuZGFyLm9wZW50aW1lc3RhbXBzLm9yZ//wEIyL7w5pqM94Mqfo+aSJ\nXGUI8QRfDaHN8AiTYmNW/uy7TACD3+MNLvkMjiMiaHR0cHM6Ly9idGMuY2FsZW5k\nYXIuY2F0YWxsYXh5LmNvbf/wENM+xds+wDe9twj+C/ER9uwI8QRfDaHN8AhrmQOr\nsVcqTACD3+MNLvkMjikoaHR0cHM6Ly9maW5uZXkuY2FsZW5kYXIuZXRlcm5pdHl3\nYWxsLmNvbfAQ4joa3R+9eAZ7mis2ycaq/wjxBF8Noc3wCATRRWvG9c27AIPf4w0u\n+QyOLi1odHRwczovL2FsaWNlLmJ0Yy5jYWxlbmRhci5vcGVudGltZXN0YW1wcy5v\ncmc=\n-----END OPENTIMESTAMPS GIT TIMESTAMP-----",
        "payload": "tree 464ae40feccda07b7f0a151fdd0d081448558ffb\nparent 1a9f462caa63fa16d7b4415312d2032a42b3fe0b\nauthor Jon Atack <jon@atack.com> 1594713177 +0200\ncommitter Jon Atack <jon@atack.com> 1594728901 +0200\n\ntest: update tests for peer discouragement\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa108d6a757838225179a8df942cfb6d99c98c90",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fa108d6a757838225179a8df942cfb6d99c98c90",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fa108d6a757838225179a8df942cfb6d99c98c90/comments",
    "author": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "1a9f462caa63fa16d7b4415312d2032a42b3fe0b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1a9f462caa63fa16d7b4415312d2032a42b3fe0b",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/1a9f462caa63fa16d7b4415312d2032a42b3fe0b"
      }
    ],
    "stats": {
      "total": 72,
      "additions": 15,
      "deletions": 57
    },
    "files": [
      {
        "sha": "d49b51926cff66b7c20c17ad2242afbffb65fc09",
        "filename": "src/test/denialofservice_tests.cpp",
        "status": "modified",
        "additions": 5,
        "deletions": 49,
        "changes": 54,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa108d6a757838225179a8df942cfb6d99c98c90/src/test/denialofservice_tests.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa108d6a757838225179a8df942cfb6d99c98c90/src/test/denialofservice_tests.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/test/denialofservice_tests.cpp?ref=fa108d6a757838225179a8df942cfb6d99c98c90",
        "patch": "@@ -217,7 +217,7 @@ BOOST_AUTO_TEST_CASE(stale_tip_peer_management)\n     connman->ClearNodes();\n }\n \n-BOOST_AUTO_TEST_CASE(DoS_banning)\n+BOOST_AUTO_TEST_CASE(peer_discouragement)\n {\n     auto banman = MakeUnique<BanMan>(GetDataDir() / \"banlist.dat\", nullptr, DEFAULT_MISBEHAVING_BANTIME);\n     auto connman = MakeUnique<CConnman>(0x1337, 0x1337);\n@@ -249,7 +249,7 @@ BOOST_AUTO_TEST_CASE(DoS_banning)\n     dummyNode2.fSuccessfullyConnected = true;\n     {\n         LOCK(cs_main);\n-        Misbehaving(dummyNode2.GetId(), 50);\n+        Misbehaving(dummyNode2.GetId(), DISCOURAGEMENT_THRESHOLD - 1);\n     }\n     {\n         LOCK2(cs_main, dummyNode2.cs_sendProcessing);\n@@ -259,64 +259,20 @@ BOOST_AUTO_TEST_CASE(DoS_banning)\n     BOOST_CHECK(banman->IsDiscouraged(addr1));  // ... but 1 still should be\n     {\n         LOCK(cs_main);\n-        Misbehaving(dummyNode2.GetId(), 50);\n+        Misbehaving(dummyNode2.GetId(), 1); // 2 reaches discouragement threshold\n     }\n     {\n         LOCK2(cs_main, dummyNode2.cs_sendProcessing);\n         BOOST_CHECK(peerLogic->SendMessages(&dummyNode2));\n     }\n-    BOOST_CHECK(banman->IsDiscouraged(addr2));\n+    BOOST_CHECK(banman->IsDiscouraged(addr1));  // Expect both 1 and 2\n+    BOOST_CHECK(banman->IsDiscouraged(addr2));  // to be discouraged now\n \n     bool dummy;\n     peerLogic->FinalizeNode(dummyNode1.GetId(), dummy);\n     peerLogic->FinalizeNode(dummyNode2.GetId(), dummy);\n }\n \n-BOOST_AUTO_TEST_CASE(DoS_banscore)\n-{\n-    auto banman = MakeUnique<BanMan>(GetDataDir() / \"banlist.dat\", nullptr, DEFAULT_MISBEHAVING_BANTIME);\n-    auto connman = MakeUnique<CConnman>(0x1337, 0x1337);\n-    auto peerLogic = MakeUnique<PeerLogicValidation>(connman.get(), banman.get(), *m_node.scheduler, *m_node.chainman, *m_node.mempool);\n-\n-    banman->ClearBanned();\n-    CAddress addr1(ip(0xa0b0c001), NODE_NONE);\n-    CNode dummyNode1(id++, NODE_NETWORK, 0, INVALID_SOCKET, addr1, 3, 1, CAddress(), \"\", true);\n-    dummyNode1.SetSendVersion(PROTOCOL_VERSION);\n-    peerLogic->InitializeNode(&dummyNode1);\n-    dummyNode1.nVersion = 1;\n-    dummyNode1.fSuccessfullyConnected = true;\n-    {\n-        LOCK(cs_main);\n-        Misbehaving(dummyNode1.GetId(), DISCOURAGEMENT_THRESHOLD - 11);\n-    }\n-    {\n-        LOCK2(cs_main, dummyNode1.cs_sendProcessing);\n-        BOOST_CHECK(peerLogic->SendMessages(&dummyNode1));\n-    }\n-    BOOST_CHECK(!banman->IsDiscouraged(addr1));\n-    {\n-        LOCK(cs_main);\n-        Misbehaving(dummyNode1.GetId(), 10);\n-    }\n-    {\n-        LOCK2(cs_main, dummyNode1.cs_sendProcessing);\n-        BOOST_CHECK(peerLogic->SendMessages(&dummyNode1));\n-    }\n-    BOOST_CHECK(!banman->IsDiscouraged(addr1));\n-    {\n-        LOCK(cs_main);\n-        Misbehaving(dummyNode1.GetId(), 1);\n-    }\n-    {\n-        LOCK2(cs_main, dummyNode1.cs_sendProcessing);\n-        BOOST_CHECK(peerLogic->SendMessages(&dummyNode1));\n-    }\n-    BOOST_CHECK(banman->IsDiscouraged(addr1));\n-\n-    bool dummy;\n-    peerLogic->FinalizeNode(dummyNode1.GetId(), dummy);\n-}\n-\n BOOST_AUTO_TEST_CASE(DoS_bantime)\n {\n     auto banman = MakeUnique<BanMan>(GetDataDir() / \"banlist.dat\", nullptr, DEFAULT_MISBEHAVING_BANTIME);"
      },
      {
        "sha": "fe6e236fc4118d4fa3223826e6835062a6dfbf35",
        "filename": "test/functional/p2p_leak.py",
        "status": "modified",
        "additions": 10,
        "deletions": 8,
        "changes": 18,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fa108d6a757838225179a8df942cfb6d99c98c90/test/functional/p2p_leak.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fa108d6a757838225179a8df942cfb6d99c98c90/test/functional/p2p_leak.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/p2p_leak.py?ref=fa108d6a757838225179a8df942cfb6d99c98c90",
        "patch": "@@ -65,9 +65,10 @@ def on_blocktxn(self, message): self.bad_message(message)\n \n # Node that never sends a version. We'll use this to send a bunch of messages\n # anyway, and eventually get disconnected.\n-class CNodeNoVersionBan(CLazyNode):\n-    # send a bunch of veracks without sending a message. This should get us disconnected.\n-    # NOTE: implementation-specific check here. Remove if bitcoind ban behavior changes\n+class CNodeNoVersionMisbehavior(CLazyNode):\n+    # Send enough veracks without a message to reach the peer discouragement\n+    # threshold. This should get us disconnected. NOTE: implementation-specific\n+    # test; update if our discouragement policy for peer misbehavior changes.\n     def on_open(self):\n         super().on_open()\n         for _ in range(DISCOURAGEMENT_THRESHOLD):\n@@ -108,15 +109,16 @@ def set_test_params(self):\n         self.num_nodes = 1\n \n     def run_test(self):\n-        no_version_bannode = self.nodes[0].add_p2p_connection(CNodeNoVersionBan(), send_version=False, wait_for_verack=False)\n+        no_version_disconnect_node = self.nodes[0].add_p2p_connection(\n+            CNodeNoVersionMisbehavior(), send_version=False, wait_for_verack=False)\n         no_version_idlenode = self.nodes[0].add_p2p_connection(CNodeNoVersionIdle(), send_version=False, wait_for_verack=False)\n         no_verack_idlenode = self.nodes[0].add_p2p_connection(CNodeNoVerackIdle(), wait_for_verack=False)\n \n         # Wait until we got the verack in response to the version. Though, don't wait for the other node to receive the\n         # verack, since we never sent one\n         no_verack_idlenode.wait_for_verack()\n \n-        wait_until(lambda: no_version_bannode.ever_connected, timeout=10, lock=mininode_lock)\n+        wait_until(lambda: no_version_disconnect_node.ever_connected, timeout=10, lock=mininode_lock)\n         wait_until(lambda: no_version_idlenode.ever_connected, timeout=10, lock=mininode_lock)\n         wait_until(lambda: no_verack_idlenode.version_received, timeout=10, lock=mininode_lock)\n \n@@ -126,13 +128,13 @@ def run_test(self):\n         #Give the node enough time to possibly leak out a message\n         time.sleep(5)\n \n-        #This node should have been banned\n-        assert not no_version_bannode.is_connected\n+        # Expect this node to be disconnected for misbehavior\n+        assert not no_version_disconnect_node.is_connected\n \n         self.nodes[0].disconnect_p2ps()\n \n         # Make sure no unexpected messages came in\n-        assert no_version_bannode.unexpected_msg == False\n+        assert no_version_disconnect_node.unexpected_msg == False\n         assert no_version_idlenode.unexpected_msg == False\n         assert no_verack_idlenode.unexpected_msg == False\n "
      }
    ]
  }
]