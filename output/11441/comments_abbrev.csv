jnewbery,2017-10-03T21:45:04Z,"I'm not sure what the motivation is for this, since there's no PR description.\n\nAs currently implemented, this doesn't seem to work for bitcoin.cli. Options don't get converted from strings into the correct type:\n\n```\nâ†’ bitcoin-cli -named fundrawtransaction hexstring=02000000000100bca065010000001976a9146bed745a50ee10d6dbd524b4806f84fec46c4bf388ac00000000 changeAddress=mqMd4D1wY8ye82FpPbT",https://github.com/bitcoin/bitcoin/pull/11441#issuecomment-333988160,333988160,
luke-jr,2017-10-04T00:18:16Z,"> As currently implemented, this doesn't seem to work for bitcoin.cli. Options don't get converted from strings into the correct type:\n\nThat would be a task for an independent PR. This is just for the server.\n\n> It also seems to break argument name checking.\n\nDoesn't look broken to me. It's seeing the missing argument before checking options. If we want the other behaviour, the RPC met",https://github.com/bitcoin/bitcoin/pull/11441#issuecomment-334016046,334016046,
sipa,2017-10-04T00:35:22Z,"How about going the other way? When an 'options' parameter is present, and the RPC has no argument with that name, treat its keys as extra named arguments. This presents an easier interface for implementing RPCs (which can just use named arguments, rather than needing to disassemble and typecheck fields of an object).\n\nThis needs motivation regardless.",https://github.com/bitcoin/bitcoin/pull/11441#issuecomment-334018329,334018329,
luke-jr,2017-10-04T01:11:12Z,"The motivation is to fix the named args interface.\n\nGoing ""the other way"" encourages terrible array-args interfaces, which should be discouraged.",https://github.com/bitcoin/bitcoin/pull/11441#issuecomment-334023206,334023206,
sipa,2017-10-04T02:15:34Z,"> Going ""the other way"" encourages terrible array-args interfaces, which should be discouraged.\nMerge state\n\nThe interface would be identical. You'd accept any named argument either as real named argument, or as a key in a positional 'options' argument. You either convert one to the other, or the other to one.\n\nBut it would be easier to write RPC handlers for.",https://github.com/bitcoin/bitcoin/pull/11441#issuecomment-334031796,334031796,
luke-jr,2017-10-04T03:09:22Z,"But when using positional arguments, you'd have a terrible interface where you have a dozen null values just to reach the one you actually want to set.",https://github.com/bitcoin/bitcoin/pull/11441#issuecomment-334038484,334038484,
laanwj,2017-10-04T12:46:31Z,"slight NACK - I'm not convinced this is really necessary. As I see it it adds complexity to the argument parsing code and makes nothing new possible. Just follow the darn API and pass these additional options in the options object and don't be lazy.\n(a slight argument could be made that this makes using bitcoin-cli with the options object easier, but that's nullified by the difficulty of getting",https://github.com/bitcoin/bitcoin/pull/11441#issuecomment-334143543,334143543,
jnewbery,2017-10-04T13:11:34Z,"> That would be a task for an independent PR. This is just for the server.\n\nThe interface for `bitcoin-cli` should be as close as possible to the RPC interface. It's a useful testing tool for people writing their own RPC clients, so we should avoid there being any surprises when switching between the two. In general, I don't think we should merge PRs that increase the delta between bitcoin-cli",https://github.com/bitcoin/bitcoin/pull/11441#issuecomment-334150135,334150135,
promag,2017-10-04T23:01:05Z,"Named arguments with `--` prefix (or whatever) could form the options object, just a shortcut to *write*  the JSON. Example:\n```\nbitcoin-cli -named fundrawtransaction hexstring=... --lockUnspents=true\n```\nThis sounds more command line to me.\n\nAnyway, IMO we should avoid adding *fat* to bitcoin-cli.",https://github.com/bitcoin/bitcoin/pull/11441#issuecomment-334313908,334313908,
luke-jr,2017-10-04T23:11:26Z,Named args should not be used as an excuse to have a crappy positional-args interface.,https://github.com/bitcoin/bitcoin/pull/11441#issuecomment-334315558,334315558,
promag,2017-10-04T23:41:19Z,"> where you have a dozen null values just to reach the one you actually want to set.\n\nThis is not improved here. The JSON-RPC implementation supports both positional and named arguments and this can not change. If all RPC method implementations change to use named arguments then we must invert the index->name mapping to keep compatibility with the existing version.\n\nI can't see the advanta",https://github.com/bitcoin/bitcoin/pull/11441#issuecomment-334320059,334320059,
luke-jr,2017-10-05T03:44:00Z,@promag The other day someone was being suggested to make the problem *worse*.,https://github.com/bitcoin/bitcoin/pull/11441#issuecomment-334350695,334350695,
luke-jr,2017-11-11T11:28:05Z,"Superceded by #11660, hopefully addressing the concerns here.",https://github.com/bitcoin/bitcoin/pull/11441#issuecomment-343658228,343658228,
