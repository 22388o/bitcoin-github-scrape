promag,2018-12-17T17:32:36Z,"Thanks @MarcoFalke, the report says >100k. I don't think this matters for small mempool.",https://github.com/bitcoin/bitcoin/pull/14984#issuecomment-447929939,447929939,
promag,2018-12-17T21:35:09Z,"mempool with 100k transactions:\n\nBefore:\n```\ntime bitcoin-cli -regtest getrawmempool true  > /dev/null\nbitcoin-cli -regtest getrawmempool true > /dev/null  3.75s user 0.90s system 8% cpu 52.170 total\n```\nAfter:\n```\ntime bitcoin-cli -regtest getrawmempool true  > /dev/null\nbitcoin-cli -regtest getrawmempool true > /dev/null  3.43s user 0.73s system 45% cpu 9.174 total\n```\n\",https://github.com/bitcoin/bitcoin/pull/14984#issuecomment-448007197,448007197,
Empact,2018-12-18T07:41:39Z,Could call `__pushKV` instead.,https://github.com/bitcoin/bitcoin/pull/14984#issuecomment-448125815,448125815,
promag,2018-12-18T07:55:43Z,"I don't think that's ""public""?",https://github.com/bitcoin/bitcoin/pull/14984#issuecomment-448129044,448129044,
Empact,2018-12-18T08:14:17Z,"It's declared publicly, may be `__` because it does not check the type of target, which is set properly here.",https://github.com/bitcoin/bitcoin/pull/14984#issuecomment-448133501,448133501,
promag,2018-12-18T10:20:59Z,"`__pushKV` was added in https://github.com/jgarzik/univalue/commit/ceb1194137421afba01e8c1042bf75f3a2cdddc3.\n\nLooks like it could be either private or have another name. I don't have strong preference as the goal is to avoid the duplicate key check, but I'm more inclined to not use the ""internal/private/reserved"" method.\n\nOTOH it would be reasonable to add duplicate key checks to `pushKVs`",https://github.com/bitcoin/bitcoin/pull/14984#issuecomment-448170597,448170597,
promag,2019-02-21T17:05:01Z,"@MarcoFalke not sure about the benchmark. This is a small change to fix the original issue. But I think univalue should have an official API to avoid duplicate key checks and so the benchmark should be there, or am I wrong?\n\nPushed with your suggestion.",https://github.com/bitcoin/bitcoin/pull/14984#issuecomment-466081283,466081283,
DrahtBot,2019-02-25T17:00:08Z,<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.,https://github.com/bitcoin/bitcoin/pull/14984#issuecomment-467090626,467090626,
promag,2019-03-08T15:52:19Z,"Rebased, switched to `UniValue::__pushKV` and adjusted the comment.",https://github.com/bitcoin/bitcoin/pull/14984#issuecomment-470975972,470975972,
promag,2019-05-14T17:04:53Z,Anything left to do here? This is pretty much the same as #15463.,https://github.com/bitcoin/bitcoin/pull/14984#issuecomment-492324249,492324249,
0xB10C,2019-05-15T18:34:57Z,"I've seen this PR a bit late (just after it got merged), but fwiw here is some real world improvement data:\n\nTime it takes to GET `/rest/mempool/contents.json` (querys over a minute apart):\n\nin v0.18.0 :\n```\n57.9s for 59474 unconfirmed Transactions (36.11 MB)\n48.7s for 60199 unconfirmed Transactions (37.02 MB) \n59.2s for 55544 unconfirmed Transactions (36.14 MB) \n45.5s for 55464 ",https://github.com/bitcoin/bitcoin/pull/14984#issuecomment-492772843,492772843,
promag,2019-05-15T18:44:07Z,Thanks @0xB10C for the feedback.,https://github.com/bitcoin/bitcoin/pull/14984#issuecomment-492776218,492776218,
promag,2019-05-16T06:37:54Z,This is an easy backport but I'm not sure if it's a candidate.,https://github.com/bitcoin/bitcoin/pull/14984#issuecomment-492937819,492937819,
promag,2019-05-16T19:35:49Z,"@laanwj I'm going to backport this 0.18.1, not sure if milestone should be changed.",https://github.com/bitcoin/bitcoin/pull/14984#issuecomment-493203378,493203378,
fanquake,2019-05-16T22:03:43Z,"@promag the milestone can remain 0.19.0 here, your backport  PR will get 0.18.1.",https://github.com/bitcoin/bitcoin/pull/14984#issuecomment-493247589,493247589,
MarcoFalke,2019-05-20T15:57:19Z,"https://codespeed.bitcoinperf.com/timeline/?exe=3%2C4%2C2%2C1&base=1%2B23&ben=micro.clang.RpcMempool&env=1&revs=10&equid=off&quarts=on&extr=on\n\n<img src=""https://screenshotscdn.firefoxusercontent.com/images/669c4a3d-b06d-4592-9b78-d9028f248327.png""></img>",https://github.com/bitcoin/bitcoin/pull/14984#issuecomment-494047606,494047606,
promag,2019-05-23T19:47:29Z,@0xB10C after all this is not a backport candidate.,https://github.com/bitcoin/bitcoin/pull/14984#issuecomment-495359788,495359788,
MarcoFalke,2019-02-21T16:31:59Z,"```suggestion\n            // pushKVs is used to avoid duplicate key check in pushKV\n            // It is safe to use because ::mempool.mapTx is a set without duplicates\n```",https://github.com/bitcoin/bitcoin/pull/14984#discussion_r259009736,259009736,src/rpc/blockchain.cpp
