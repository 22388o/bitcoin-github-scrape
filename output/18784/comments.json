[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/662780381",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18784#issuecomment-662780381",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18784",
    "id": 662780381,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2Mjc4MDM4MQ==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-23T01:41:56Z",
    "updated_at": "2020-10-07T10:17:49Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #19673 (Move cs_vSend into SocketSendData and resolve RecordBytesSent lock inconsistency by troygiorshev)\n* #19509 (Per-Peer Message Capture by troygiorshev)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/662780381/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/663522773",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18784#issuecomment-663522773",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18784",
    "id": 663522773,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2MzUyMjc3Mw==",
    "user": {
      "login": "troygiorshev",
      "id": 5553787,
      "node_id": "MDQ6VXNlcjU1NTM3ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5553787?u=84369c78e74365314bd9806230ab56f2c1585fb4&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/troygiorshev",
      "html_url": "https://github.com/troygiorshev",
      "followers_url": "https://api.github.com/users/troygiorshev/followers",
      "following_url": "https://api.github.com/users/troygiorshev/following{/other_user}",
      "gists_url": "https://api.github.com/users/troygiorshev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/troygiorshev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/troygiorshev/subscriptions",
      "organizations_url": "https://api.github.com/users/troygiorshev/orgs",
      "repos_url": "https://api.github.com/users/troygiorshev/repos",
      "events_url": "https://api.github.com/users/troygiorshev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/troygiorshev/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-24T12:51:39Z",
    "updated_at": "2020-08-05T21:45:39Z",
    "author_association": "CONTRIBUTOR",
    "body": "~ACK faae6ca9e8a3f67c737c03e122fd315cef5e66d7~\r\n\r\n~Reviewed, ran tests.~\r\n\r\n~This is a nice readability improvement too \ud83d\udcd6~\r\n\r\nChanged my mind, see below.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/663522773/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/667217798",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18784#issuecomment-667217798",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18784",
    "id": 667217798,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2NzIxNzc5OA==",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-07-31T16:36:30Z",
    "updated_at": "2020-07-31T16:36:38Z",
    "author_association": "MEMBER",
    "body": "> getnettotals returns \"stale\" values or values that don't add up\r\n\r\nCan you explain this a bit? What do the values not add up to? As far as I can tell, `getnettotals` simply returns the totalbytessent and totalbytesreceived at some point in time. There are not consistency guarantees with subsequent calls to the `getpeerinfo` values.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/667217798/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/669529191",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18784#issuecomment-669529191",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18784",
    "id": 669529191,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY2OTUyOTE5MQ==",
    "user": {
      "login": "troygiorshev",
      "id": 5553787,
      "node_id": "MDQ6VXNlcjU1NTM3ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5553787?u=84369c78e74365314bd9806230ab56f2c1585fb4&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/troygiorshev",
      "html_url": "https://github.com/troygiorshev",
      "followers_url": "https://api.github.com/users/troygiorshev/followers",
      "following_url": "https://api.github.com/users/troygiorshev/following{/other_user}",
      "gists_url": "https://api.github.com/users/troygiorshev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/troygiorshev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/troygiorshev/subscriptions",
      "organizations_url": "https://api.github.com/users/troygiorshev/orgs",
      "repos_url": "https://api.github.com/users/troygiorshev/repos",
      "events_url": "https://api.github.com/users/troygiorshev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/troygiorshev/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-05T21:44:58Z",
    "updated_at": "2020-08-05T21:47:29Z",
    "author_association": "CONTRIBUTOR",
    "body": "I've changed my mind on this one.  `getnettotals` and `getpeerinfo` are two separate rpcs, we shouldn't try and make them sync up.  `nTotalBytesSent` is separate from a node's `nSendBytes`.  Looking at the analogous structures on the receiving side, `nTotalBytesRecv` is clearly separate from `nRecvBytes`.\r\n\r\nHowever, I think a PR like this is needed to bring consistency between the two calls to `RecordBytesSent` (as it stands before this PR, one is under `cs_vSend` and the other is not).  I can see a few more improvements available too.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/669529191/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/682009846",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18784#issuecomment-682009846",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18784",
    "id": 682009846,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MjAwOTg0Ng==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-27T15:09:10Z",
    "updated_at": "2020-08-27T15:09:10Z",
    "author_association": "MEMBER",
    "body": "> I've changed my mind on this one. getnettotals and getpeerinfo are two separate rpcs, we shouldn't try and make them sync up. nTotalBytesSent is separate from a node's nSendBytes. Looking at the analogous structures on the receiving side, nTotalBytesRecv is clearly separate from nRecvBytes.\r\n\r\nWhy are they separate? Let's assume we connect to a peer, send 100 bytes, disconnect. Send 100 bytes to another peer, then the total bytes sent should simply equal 200 bytes.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/682009846/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/682025637",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18784#issuecomment-682025637",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18784",
    "id": 682025637,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MjAyNTYzNw==",
    "user": {
      "login": "troygiorshev",
      "id": 5553787,
      "node_id": "MDQ6VXNlcjU1NTM3ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5553787?u=84369c78e74365314bd9806230ab56f2c1585fb4&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/troygiorshev",
      "html_url": "https://github.com/troygiorshev",
      "followers_url": "https://api.github.com/users/troygiorshev/followers",
      "following_url": "https://api.github.com/users/troygiorshev/following{/other_user}",
      "gists_url": "https://api.github.com/users/troygiorshev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/troygiorshev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/troygiorshev/subscriptions",
      "organizations_url": "https://api.github.com/users/troygiorshev/orgs",
      "repos_url": "https://api.github.com/users/troygiorshev/repos",
      "events_url": "https://api.github.com/users/troygiorshev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/troygiorshev/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-27T15:35:35Z",
    "updated_at": "2020-08-27T15:35:35Z",
    "author_association": "CONTRIBUTOR",
    "body": "> Why are they separate? Let's assume we connect to a peer, send 100 bytes, disconnect. Send 100 bytes to another peer, then the total bytes sent should simply equal 200 bytes.\r\n\r\nMaybe I'm completely off-base here, I'm not trying to make a big statement.\r\n\r\nIsn't it impossible to keep these RPCs synced?  They are two separate calls, something might happen in between them.\r\n\r\n1. Call `getnettotals`, note the value of `totalbytesrecv`\r\n2. node receives a message from another peer, of size 100 bytes\r\n3. Call `getpeerinfo`, see that the sum of `bytesrecv` for each node is 100 bytes more than `totalbytesrecv` from above",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/682025637/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/682034739",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18784#issuecomment-682034739",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18784",
    "id": 682034739,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MjAzNDczOQ==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-27T15:51:32Z",
    "updated_at": "2020-08-27T15:51:32Z",
    "author_association": "MEMBER",
    "body": "Ok, I see. The reason I created this pull was that a call to\r\n\r\n```\r\n        net_totals_before = self.nodes[0].getnettotals()\r\n        peer_info = self.nodes[0].getpeerinfo()\r\n        net_totals_after = self.nodes[0].getnettotals()\r\n```\r\n\r\nand then asserting that `before <= sum <= after` would sometimes fail.\r\n\r\nI haven't looked into #19673 so I am wondering if #19673 also fixes that issue.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/682034739/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/682038152",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18784#issuecomment-682038152",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18784",
    "id": 682038152,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MjAzODE1Mg==",
    "user": {
      "login": "troygiorshev",
      "id": 5553787,
      "node_id": "MDQ6VXNlcjU1NTM3ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5553787?u=84369c78e74365314bd9806230ab56f2c1585fb4&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/troygiorshev",
      "html_url": "https://github.com/troygiorshev",
      "followers_url": "https://api.github.com/users/troygiorshev/followers",
      "following_url": "https://api.github.com/users/troygiorshev/following{/other_user}",
      "gists_url": "https://api.github.com/users/troygiorshev/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/troygiorshev/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/troygiorshev/subscriptions",
      "organizations_url": "https://api.github.com/users/troygiorshev/orgs",
      "repos_url": "https://api.github.com/users/troygiorshev/repos",
      "events_url": "https://api.github.com/users/troygiorshev/events{/privacy}",
      "received_events_url": "https://api.github.com/users/troygiorshev/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-27T15:57:41Z",
    "updated_at": "2020-08-27T15:57:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "^\r\n\r\nWoah that shouldn't happen.  Will investigate.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/682038152/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/682047653",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18784#issuecomment-682047653",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18784",
    "id": 682047653,
    "node_id": "MDEyOklzc3VlQ29tbWVudDY4MjA0NzY1Mw==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-08-27T16:14:23Z",
    "updated_at": "2020-08-27T16:14:23Z",
    "author_association": "MEMBER",
    "body": "#17107 ",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/682047653/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/717793951",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18784#issuecomment-717793951",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18784",
    "id": 717793951,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxNzc5Mzk1MQ==",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-28T09:00:25Z",
    "updated_at": "2020-10-28T09:00:25Z",
    "author_association": "MEMBER",
    "body": "> a call to\r\n>\r\n>        net_totals_before = self.nodes[0].getnettotals()\r\n>        peer_info = self.nodes[0].getpeerinfo()\r\n>        net_totals_after = self.nodes[0].getnettotals()\r\n>\r\n> and then asserting that before <= sum <= after would sometimes fail.`\r\n\r\nWhat is `sum` here? Are you saying that `getnettotals.totalbytessent` can go down?\r\n\r\nI don't understand the problem you're trying to solve.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/717793951/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/717804650",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18784#issuecomment-717804650",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18784",
    "id": 717804650,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxNzgwNDY1MA==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-28T09:19:55Z",
    "updated_at": "2020-10-28T09:19:55Z",
    "author_association": "MEMBER",
    "body": "> Are you saying that getnettotals.totalbytessent can go down?\r\n\r\nNo, it is returning the value it returned in a previous call. But getpeerinfo already returned the new correct value.\r\n\r\nhttps://github.com/bitcoin/bitcoin/issues/17107#issuecomment-541081114\r\n\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/717804650/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/717812591",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18784#issuecomment-717812591",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18784",
    "id": 717812591,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxNzgxMjU5MQ==",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-28T09:34:43Z",
    "updated_at": "2020-10-28T09:34:43Z",
    "author_association": "MEMBER",
    "body": "I agree with Wlad's assessment in that issue:\r\n\r\n> these are meant to be overall statistics, it doesn't seem super important that the net totals are immediately up to date.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/717812591/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/717816363",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18784#issuecomment-717816363",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18784",
    "id": 717816363,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxNzgxNjM2Mw==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-28T09:42:05Z",
    "updated_at": "2020-10-28T09:42:05Z",
    "author_association": "MEMBER",
    "body": "Ok, then the test is wrong and should be removed:\r\n\r\n```diff\r\ndiff --git a/test/functional/rpc_net.py b/test/functional/rpc_net.py\r\nindex 03c858c694..afb67891af 100755\r\n--- a/test/functional/rpc_net.py\r\n+++ b/test/functional/rpc_net.py\r\n@@ -104,29 +104,15 @@ class NetTest(BitcoinTestFramework):\r\n \r\n     def test_getnettotals(self):\r\n         self.log.info(\"Test getnettotals\")\r\n-        # getnettotals totalbytesrecv and totalbytessent should be\r\n-        # consistent with getpeerinfo. Since the RPC calls are not atomic,\r\n-        # and messages might have been recvd or sent between RPC calls, call\r\n-        # getnettotals before and after and verify that the returned values\r\n-        # from getpeerinfo are bounded by those values.\r\n-        net_totals_before = self.nodes[0].getnettotals()\r\n         peer_info = self.nodes[0].getpeerinfo()\r\n-        net_totals_after = self.nodes[0].getnettotals()\r\n-        assert_equal(len(peer_info), 2)\r\n-        peers_recv = sum([peer['bytesrecv'] for peer in peer_info])\r\n-        peers_sent = sum([peer['bytessent'] for peer in peer_info])\r\n-\r\n-        assert_greater_than_or_equal(peers_recv, net_totals_before['totalbytesrecv'])\r\n-        assert_greater_than_or_equal(net_totals_after['totalbytesrecv'], peers_recv)\r\n-        assert_greater_than_or_equal(peers_sent, net_totals_before['totalbytessent'])\r\n-        assert_greater_than_or_equal(net_totals_after['totalbytessent'], peers_sent)\r\n+        net_totals = self.nodes[0].getnettotals()\r\n \r\n         # test getnettotals and getpeerinfo by doing a ping\r\n         # the bytes sent/received should change\r\n         # note ping and pong are 32 bytes each\r\n         self.nodes[0].ping()\r\n-        self.wait_until(lambda: (self.nodes[0].getnettotals()['totalbytessent'] >= net_totals_after['totalbytessent'] + 32 * 2), timeout=1)\r\n-        self.wait_until(lambda: (self.nodes[0].getnettotals()['totalbytesrecv'] >= net_totals_after['totalbytesrecv'] + 32 * 2), timeout=1)\r\n+        self.wait_until(lambda: (self.nodes[0].getnettotals()['totalbytessent'] >= net_totals['totalbytessent'] + 32 * 2), timeout=1)\r\n+        self.wait_until(lambda: (self.nodes[0].getnettotals()['totalbytesrecv'] >= net_totals['totalbytesrecv'] + 32 * 2), timeout=1)\r\n \r\n         peer_info_after_ping = self.nodes[0].getpeerinfo()\r\n         for before, after in zip(peer_info, peer_info_after_ping):\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/717816363/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/717836357",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18784#issuecomment-717836357",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18784",
    "id": 717836357,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxNzgzNjM1Nw==",
    "user": {
      "login": "jnewbery",
      "id": 1063656,
      "node_id": "MDQ6VXNlcjEwNjM2NTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1063656?u=71263a00d1269c7f0ed6660aa0c15c894df78a88&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jnewbery",
      "html_url": "https://github.com/jnewbery",
      "followers_url": "https://api.github.com/users/jnewbery/followers",
      "following_url": "https://api.github.com/users/jnewbery/following{/other_user}",
      "gists_url": "https://api.github.com/users/jnewbery/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jnewbery/subscriptions",
      "organizations_url": "https://api.github.com/users/jnewbery/orgs",
      "repos_url": "https://api.github.com/users/jnewbery/repos",
      "events_url": "https://api.github.com/users/jnewbery/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jnewbery/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-28T10:19:13Z",
    "updated_at": "2020-10-28T10:19:13Z",
    "author_association": "MEMBER",
    "body": "> the test is wrong and should be removed:\r\n\r\nDone: #20258",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/717836357/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/717837760",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18784#issuecomment-717837760",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18784",
    "id": 717837760,
    "node_id": "MDEyOklzc3VlQ29tbWVudDcxNzgzNzc2MA==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2020-10-28T10:21:53Z",
    "updated_at": "2020-10-28T10:21:53Z",
    "author_association": "MEMBER",
    "body": "thanks",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/717837760/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  }
]