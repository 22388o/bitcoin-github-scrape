[
  {
    "sha": "2384a2864b6a0b29eec6410057aefe1fd8e7e585",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyMzg0YTI4NjRiNmEwYjI5ZWVjNjQxMDA1N2FlZmUxZmQ4ZTdlNTg1",
    "commit": {
      "author": {
        "name": "Philip Kaufmann",
        "email": "phil.kaufmann@t-online.de",
        "date": "2013-10-24T13:49:13Z"
      },
      "committer": {
        "name": "Philip Kaufmann",
        "email": "phil.kaufmann@t-online.de",
        "date": "2013-10-25T12:24:30Z"
      },
      "message": "allow emit message() in sendcoinsdialog and walletview\n\n- this allows us to use emit message() over MessageBox:: or gui->message()\n  calls in sendcoinsdialog and walletview\n- move main handlePaymentRequest() functionality back to BitcoinGUI\n- move a showNormalIfMinimized() before gotoSendCoinsPage()",
      "tree": {
        "sha": "13442ace1c06ba82339e8daad62557abeb7ab7d3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/13442ace1c06ba82339e8daad62557abeb7ab7d3"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2384a2864b6a0b29eec6410057aefe1fd8e7e585",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2384a2864b6a0b29eec6410057aefe1fd8e7e585",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/2384a2864b6a0b29eec6410057aefe1fd8e7e585",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2384a2864b6a0b29eec6410057aefe1fd8e7e585/comments",
    "author": null,
    "committer": null,
    "parents": [
      {
        "sha": "081c0cdeb2b8c1e8db449f3b38837c4ca3b4ba73",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/081c0cdeb2b8c1e8db449f3b38837c4ca3b4ba73",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/081c0cdeb2b8c1e8db449f3b38837c4ca3b4ba73"
      }
    ],
    "stats": {
      "total": 47,
      "additions": 30,
      "deletions": 17
    },
    "files": [
      {
        "sha": "41191733e86815643f39e043f41a933b5c40e8aa",
        "filename": "src/qt/bitcoingui.cpp",
        "status": "modified",
        "additions": 10,
        "deletions": 2,
        "changes": 12,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2384a2864b6a0b29eec6410057aefe1fd8e7e585/src/qt/bitcoingui.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2384a2864b6a0b29eec6410057aefe1fd8e7e585/src/qt/bitcoingui.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoingui.cpp?ref=2384a2864b6a0b29eec6410057aefe1fd8e7e585",
        "patch": "@@ -752,9 +752,17 @@ bool BitcoinGUI::eventFilter(QObject *object, QEvent *event)\n     return QMainWindow::eventFilter(object, event);\n }\n \n-void BitcoinGUI::handlePaymentRequest(const SendCoinsRecipient& recipient)\n+bool BitcoinGUI::handlePaymentRequest(const SendCoinsRecipient& recipient)\n {\n-    walletFrame->handlePaymentRequest(recipient);\n+    // URI has to be valid\n+    if (walletFrame->handlePaymentRequest(recipient))\n+    {\n+        showNormalIfMinimized();\n+        gotoSendCoinsPage();\n+        return true;\n+    }\n+    else\n+        return false;\n }\n \n void BitcoinGUI::setEncryptionStatus(int status)"
      },
      {
        "sha": "0394e2f84e9493ba3aae1947cf62ef7dbe463829",
        "filename": "src/qt/bitcoingui.h",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2384a2864b6a0b29eec6410057aefe1fd8e7e585/src/qt/bitcoingui.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2384a2864b6a0b29eec6410057aefe1fd8e7e585/src/qt/bitcoingui.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoingui.h?ref=2384a2864b6a0b29eec6410057aefe1fd8e7e585",
        "patch": "@@ -146,7 +146,7 @@ public slots:\n     */\n     void askFee(qint64 nFeeRequired, bool *payFee);\n \n-    void handlePaymentRequest(const SendCoinsRecipient& recipient);\n+    bool handlePaymentRequest(const SendCoinsRecipient& recipient);\n \n     /** Show incoming transaction notification for new transactions. */\n     void incomingTransaction(const QString& date, int unit, qint64 amount, const QString& type, const QString& address);"
      },
      {
        "sha": "b295b7d837c6dd247746050a985dd0249d4a9abb",
        "filename": "src/qt/sendcoinsdialog.h",
        "status": "modified",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2384a2864b6a0b29eec6410057aefe1fd8e7e585/src/qt/sendcoinsdialog.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2384a2864b6a0b29eec6410057aefe1fd8e7e585/src/qt/sendcoinsdialog.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/sendcoinsdialog.h?ref=2384a2864b6a0b29eec6410057aefe1fd8e7e585",
        "patch": "@@ -52,6 +52,10 @@ private slots:\n     void on_sendButton_clicked();\n     void removeEntry(SendCoinsEntry* entry);\n     void updateDisplayUnit();\n+\n+signals:\n+    // Fired when a message should be reported to the user\n+    void message(const QString &title, const QString &message, unsigned int style);\n };\n \n #endif // SENDCOINSDIALOG_H"
      },
      {
        "sha": "75f223d9019d5c25b99c0732f91209e48cedbf63",
        "filename": "src/qt/walletview.cpp",
        "status": "modified",
        "additions": 12,
        "deletions": 14,
        "changes": 26,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2384a2864b6a0b29eec6410057aefe1fd8e7e585/src/qt/walletview.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2384a2864b6a0b29eec6410057aefe1fd8e7e585/src/qt/walletview.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/walletview.cpp?ref=2384a2864b6a0b29eec6410057aefe1fd8e7e585",
        "patch": "@@ -81,9 +81,15 @@ WalletView::~WalletView()\n void WalletView::setBitcoinGUI(BitcoinGUI *gui)\n {\n     this->gui = gui;\n-    if(gui)\n+\n+    if (gui)\n     {\n+        // Clicking on a transaction on the overview page sends you to the transactions tab\n         connect(overviewPage, SIGNAL(transactionClicked(QModelIndex)), gui, SLOT(gotoHistoryPage()));\n+\n+        // Receive and report messages\n+        connect(this, SIGNAL(message(QString,QString,unsigned int)), gui, SLOT(message(QString,QString,unsigned int)));\n+        connect(sendCoinsPage, SIGNAL(message(QString,QString,unsigned int)), gui, SLOT(message(QString,QString,unsigned int)));\n     }\n }\n \n@@ -187,15 +193,7 @@ void WalletView::gotoVerifyMessageTab(QString addr)\n \n bool WalletView::handlePaymentRequest(const SendCoinsRecipient& recipient)\n {\n-    // URI has to be valid\n-    if (sendCoinsPage->handlePaymentRequest(recipient))\n-    {\n-        gotoSendCoinsPage();\n-        emit showNormalIfMinimized();\n-        return true;\n-    }\n-    else\n-        return false;\n+    return sendCoinsPage->handlePaymentRequest(recipient);\n }\n \n void WalletView::showOutOfSyncWarning(bool fShow)\n@@ -229,12 +227,12 @@ void WalletView::backupWallet()\n     QString filename = QFileDialog::getSaveFileName(this, tr(\"Backup Wallet\"), saveDir, tr(\"Wallet Data (*.dat)\"));\n     if (!filename.isEmpty()) {\n         if (!walletModel->backupWallet(filename)) {\n-            gui->message(tr(\"Backup Failed\"), tr(\"There was an error trying to save the wallet data to the new location.\"),\n-                      CClientUIInterface::MSG_ERROR);\n+            emit message(tr(\"Backup Failed\"), tr(\"There was an error trying to save the wallet data to the new location.\"),\n+                CClientUIInterface::MSG_ERROR);\n         }\n         else\n-            gui->message(tr(\"Backup Successful\"), tr(\"The wallet data was successfully saved to the new location.\"),\n-                      CClientUIInterface::MSG_INFORMATION);\n+            emit message(tr(\"Backup Successful\"), tr(\"The wallet data was successfully saved to the new location.\"),\n+                CClientUIInterface::MSG_INFORMATION);\n     }\n }\n "
      },
      {
        "sha": "60544cbf885c960c4be00d12dd84e3b83d6d3c72",
        "filename": "src/qt/walletview.h",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2384a2864b6a0b29eec6410057aefe1fd8e7e585/src/qt/walletview.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2384a2864b6a0b29eec6410057aefe1fd8e7e585/src/qt/walletview.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/walletview.h?ref=2384a2864b6a0b29eec6410057aefe1fd8e7e585",
        "patch": "@@ -105,6 +105,9 @@ public slots:\n signals:\n     /** Signal that we want to show the main window */\n     void showNormalIfMinimized();\n+\n+    /**  Fired when a message should be reported to the user */\n+    void message(const QString &title, const QString &message, unsigned int style);\n };\n \n #endif // WALLETVIEW_H"
      }
    ]
  }
]