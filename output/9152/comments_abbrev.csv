jonasschnelli,2016-11-14T07:41:08Z,"Concept ACK (Haven't really looked at the code).\nI think a sweep function would be a great feature. One could import ""old"" private keys into a new HD wallet for example.\n\nPossible extension: `sweepseed` could be an extended version of that, moving all funds form a HD seed to a new one, generating large lookup-windows on different chainpathes. It could also be UTXO set only not requiring a -resc",https://github.com/bitcoin/bitcoin/pull/9152#issuecomment-260267890,260267890,
gmaxwell,2016-11-15T17:29:21Z,"From a raw flow perspective, the generation of the sweep transaction is something that works from public information and should be possible on an online node without access to the private keys... so that one should be a 'createrawsweeptransaction' which takes a list of adresses/pubkeys/redeemscripts (and maybe private keys ... maybe some kind of BIP32 chain spec) and returns a transaction that spe",https://github.com/bitcoin/bitcoin/pull/9152#issuecomment-260708687,260708687,
paveljanik,2016-11-17T11:20:07Z,"Hmm, what about extending RPC `importprivkey` with another optional argument `sweep` defaulting to `false`?\n",https://github.com/bitcoin/bitcoin/pull/9152#issuecomment-261222140,261222140,
luke-jr,2016-11-17T11:32:07Z,"sweepprivkeys is intended for users, and not to import keys. Users should never use importprivkey.\n",https://github.com/bitcoin/bitcoin/pull/9152#issuecomment-261224370,261224370,
laanwj,2017-02-27T09:31:41Z,"Concept ACK.\n\n> Hmm, what about extending RPC importprivkey with another optional argument sweep defaulting to false?\n\nPlease don't do this. People confuse `import` and `sweep` all over the place. The least we can do is make them separate RPCs with separate documentation.",https://github.com/bitcoin/bitcoin/pull/9152#issuecomment-282670040,282670040,
sipa,2017-07-12T22:50:19Z,Seems this won't be making it for 0.15. Untagging.,https://github.com/bitcoin/bitcoin/pull/9152#issuecomment-314919860,314919860,
jonasschnelli,2017-08-15T20:14:59Z,"Concept Re-ACK. Needs rebase. I guess this is also something we could want for 0.16.\nI have no strong opinion about sweep versus createrawsweep. The approach we took for bumpfee was also to do the non raw one first, although I agree that the ramification of sweep is different then a bump.",https://github.com/bitcoin/bitcoin/pull/9152#issuecomment-322575985,322575985,
luke-jr,2017-08-19T03:55:59Z,Rebased and added a simple functional test.,https://github.com/bitcoin/bitcoin/pull/9152#issuecomment-323497915,323497915,
luke-jr,2017-08-21T03:18:15Z,Fixed the test failure (missing `cs_main` lock on `AcceptToMemoryPool`),https://github.com/bitcoin/bitcoin/pull/9152#issuecomment-323637548,323637548,
jonasschnelli,2017-11-30T06:24:09Z,@luke-jr: can you rebase this once again? Thanks,https://github.com/bitcoin/bitcoin/pull/9152#issuecomment-348094250,348094250,
luke-jr,2017-11-30T06:59:29Z,Rebased,https://github.com/bitcoin/bitcoin/pull/9152#issuecomment-348100082,348100082,
jonasschnelli,2017-12-01T07:18:27Z,"utACK a397deb247fc404064cf76ede8d64eb68f4fefe6 (will test soon).\nI personally dislike the ""direct""-approach. I would like to ""see"" the transaction before submitting.\n\nPossible extensions:\n* Remove the signing and broadcasting, accept a pubkey and rename it to `createrawsweeptransaction` (or similar)\n* Add support for HD sweep (xpub/xpriv)",https://github.com/bitcoin/bitcoin/pull/9152#issuecomment-348420470,348420470,
jaromil,2017-12-06T18:09:29Z,"ACK using a397deb247fc40. This is a great feature many people need.\nI'm moving on to test it on mainnet using the v0.15.0.knots20170914 build.\nI encourage inclusion and later on apply extensions (esp what @jonasschnelli recommends above).",https://github.com/bitcoin/bitcoin/pull/9152#issuecomment-349726160,349726160,
jaromil,2017-12-11T16:39:06Z,"The check fail is unrelated to this PR and limited to the ARM build, lacking the ""flake8"" python library.\n```\ncontrib/devtools/lint-python.sh: 10: contrib/devtools/lint-python.sh: flake8: not found\n```\nremoving unused imports won't fix lint-python.sh either.",https://github.com/bitcoin/bitcoin/pull/9152#issuecomment-350780401,350780401,
jaromil,2018-01-08T15:29:22Z,ping and HNY everyone :^P,https://github.com/bitcoin/bitcoin/pull/9152#issuecomment-355998155,355998155,
MarcoFalke,2018-01-15T00:08:32Z,"Since the keys are not added to the wallet, and thus bumpfee won't work, it makes sense to set nSequence to support rbf and return a list of signed raw transactions that each pay a slightly higher fee?",https://github.com/bitcoin/bitcoin/pull/9152#issuecomment-357554723,357554723,
jaromil,2018-01-15T10:57:56Z,"@MarcoFalke I believe yours is a brilliant idea. Just to be clear, you mean a list of signed raw transactions that are ready to replace the one made and can be fired up from the lowest fee to the higher to bump if necessary, right? such transactions should be discarded once enough confirmations are present.",https://github.com/bitcoin/bitcoin/pull/9152#issuecomment-357649890,357649890,
laanwj,2018-08-31T08:53:55Z,"If we still want this, it needs rebase/implementation in terms of #12196.\nBut I'm going to close it for now, it's been open since 2016 and there's no clear progress.\n\nIt might make sense to open a new PR if you start work on this again, or you can ask me to reopen it.",https://github.com/bitcoin/bitcoin/pull/9152#issuecomment-417599200,417599200,
jaromil,2018-08-31T14:21:50Z,"Interesting revamp. I have read the whole thread in #12196, is there some documentation being worked about use examples for `scantxoutset` to be used in place of sweeping? I like to try to sort out my needs using that, but haven't kept myself up to date enough to understand it without handholding. There is the integration test in python, but...",https://github.com/bitcoin/bitcoin/pull/9152#issuecomment-417679596,417679596,
luke-jr,2018-10-29T18:39:17Z,"Rebased, please reopen @laanwj ",https://github.com/bitcoin/bitcoin/pull/9152#issuecomment-434030739,434030739,
MarcoFalke,2018-10-29T19:11:55Z,"@luke-jr You can only (force) push after it has been reopened. If the branch is different in any way, it won't reopen.",https://github.com/bitcoin/bitcoin/pull/9152#issuecomment-434041815,434041815,
luke-jr,2018-10-29T20:56:03Z,"NOTE: Currently needs #14602 for tests to pass\n\n",https://github.com/bitcoin/bitcoin/pull/9152#issuecomment-434076483,434076483,
DrahtBot,2018-10-29T23:04:50Z,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#16129](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/16129.html) (refactor: Remove unused includes by practic",https://github.com/bitcoin/bitcoin/pull/9152#issuecomment-434113031,434113031,
meshcollider,2018-11-15T19:34:37Z,"Concept ACK. Still needs rebase. IMO this should be reworked to take a descriptor which would address the points above about accepting pubkeys/HD keys. Agree that returning the raw transaction is preferable (`createrawsweeptransaction`)\n",https://github.com/bitcoin/bitcoin/pull/9152#issuecomment-439163148,439163148,
practicalswift,2019-05-07T15:55:50Z,I'm afraid this PR doesn't build when rebased on `master`.,https://github.com/bitcoin/bitcoin/pull/9152#issuecomment-490140192,490140192,
DrahtBot,2019-06-06T15:24:35Z,<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase,https://github.com/bitcoin/bitcoin/pull/9152#issuecomment-499542763,499542763,
practicalswift,2019-06-06T22:29:48Z,Concept ACK,https://github.com/bitcoin/bitcoin/pull/9152#issuecomment-499691635,499691635,
jonasschnelli,2019-06-07T12:27:06Z,"This should probably use ""scantxoutset"" internally (rebase issue).\nI also think it should be a `createrawsweep` call (rather then directly signing and executing).\nMaybe you can change this to be an argument for ""scantxoutset"" that would also spit out a rawtransaction (with configurable fee and eventually configurable target address) for the sweep transaction.",https://github.com/bitcoin/bitcoin/pull/9152#issuecomment-499865461,499865461,
luke-jr,2019-10-14T20:31:53Z,"I don't see any sane way to rebase this post-`bitcoin-wallet`, so going to have to just make it a Knots-only hack for now. :/",https://github.com/bitcoin/bitcoin/pull/9152#issuecomment-541904504,541904504,
ryanofsky,2019-10-15T16:47:20Z,"> I don't see any sane way to rebase this post-bitcoin-wallet\n\nI don't think it should be too bad if someone wants to pick it up. It should just require a new `interfaces::Chain` method to wrap `FindScriptPubKey` calls, since wallet code can no longer access  `mempool` and `pcoinsdbview` globals directly.",https://github.com/bitcoin/bitcoin/pull/9152#issuecomment-542304839,542304839,
ryanofsky,2019-10-24T16:04:09Z,"Maintainers maybe remove ""Waiting for author"" and ""Needs rebase"" tags and mark ""Up for grabs""",https://github.com/bitcoin/bitcoin/pull/9152#issuecomment-545988127,545988127,
ryanofsky,2016-12-28T20:31:23Z,"It might be appropriate to loop over mapCoins calling CTxMemPool::pruneSpent, on each entry, to avoid trying to sweep from an output that is already in the process of being spent.",https://github.com/bitcoin/bitcoin/pull/9152#discussion_r94074507,94074507,src/wallet/rpcwallet.cpp
promag,2017-08-19T15:17:04Z,Throw if duplicate? Add test.,https://github.com/bitcoin/bitcoin/pull/9152#discussion_r134094095,134094095,src/wallet/rpcwallet.cpp
promag,2017-08-19T15:17:10Z,Throw if duplicate? Add test.,https://github.com/bitcoin/bitcoin/pull/9152#discussion_r134094100,134094100,src/wallet/rpcwallet.cpp
promag,2017-08-19T15:18:38Z,Throw if needles is empty? Add test.,https://github.com/bitcoin/bitcoin/pull/9152#discussion_r134094129,134094129,src/wallet/rpcwallet.cpp
promag,2017-08-19T15:20:53Z,Add test for this error?,https://github.com/bitcoin/bitcoin/pull/9152#discussion_r134094162,134094162,src/wallet/rpcwallet.cpp
promag,2017-08-19T15:21:27Z,Unnecessary block?,https://github.com/bitcoin/bitcoin/pull/9152#discussion_r134094173,134094173,src/wallet/rpcwallet.cpp
promag,2017-08-19T15:27:11Z,Take this out of fee loop?,https://github.com/bitcoin/bitcoin/pull/9152#discussion_r134094260,134094260,src/wallet/rpcwallet.cpp
luke-jr,2017-08-21T02:55:04Z,I don't see why a duplicate privkey should be an error.,https://github.com/bitcoin/bitcoin/pull/9152#discussion_r134138130,134138130,src/wallet/rpcwallet.cpp
luke-jr,2017-08-21T02:56:19Z,"If it's empty, we'll throw ""No value to sweep"" later on. And so long as the user provides something, it will never be empty.",https://github.com/bitcoin/bitcoin/pull/9152#discussion_r134138212,134138212,src/wallet/rpcwallet.cpp
luke-jr,2017-08-21T03:07:42Z,"I don't know how, and the two tests currently ""testing"" it don't make logical sense.",https://github.com/bitcoin/bitcoin/pull/9152#discussion_r134138904,134138904,src/wallet/rpcwallet.cpp
luke-jr,2017-08-21T03:08:04Z,Scope for `coins`,https://github.com/bitcoin/bitcoin/pull/9152#discussion_r134138919,134138919,src/wallet/rpcwallet.cpp
luke-jr,2017-08-21T03:12:51Z,"Fee changes require resigning. Perhaps it could be made to sign only before and after the loop, but the time here is trivial in comparison to the UTXO search.",https://github.com/bitcoin/bitcoin/pull/9152#discussion_r134139181,134139181,src/wallet/rpcwallet.cpp
MarcoFalke,2017-12-11T00:26:41Z,seems like unused imports?,https://github.com/bitcoin/bitcoin/pull/9152#discussion_r155965988,155965988,test/functional/sweepprivkeys.py
practicalswift,2018-10-30T09:44:30Z,Could be const reference?,https://github.com/bitcoin/bitcoin/pull/9152#discussion_r229235768,229235768,src/wallet/rpcwallet.cpp
Sjors,2019-08-15T12:04:44Z,"This says ""specified destinations"" but you can't specify the destinations. Can you also make it clear that coins are sweeped one by one to unique addresses (per priv key)?",https://github.com/bitcoin/bitcoin/pull/9152#discussion_r314278807,314278807,src/wallet/rpcwallet.cpp
