[
  {
    "sha": "01087f77b6616b342518b9df50b0cdb29fa0a1a2",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowMTA4N2Y3N2I2NjE2YjM0MjUxOGI5ZGY1MGIwY2RiMjlmYTBhMWEy",
    "commit": {
      "author": {
        "name": "Dave Fletcher",
        "email": "graveyhead@gmail.com",
        "date": "2015-02-26T23:12:34Z"
      },
      "committer": {
        "name": "Dave Fletcher",
        "email": "graveyhead@gmail.com",
        "date": "2015-03-13T20:23:52Z"
      },
      "message": "In Windows, attempt to use CreateProcess to launch [block|wallet|alert] notifications.",
      "tree": {
        "sha": "e6a4014d6c47d93aa007277c85b381030884f438",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e6a4014d6c47d93aa007277c85b381030884f438"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/01087f77b6616b342518b9df50b0cdb29fa0a1a2",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/01087f77b6616b342518b9df50b0cdb29fa0a1a2",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/01087f77b6616b342518b9df50b0cdb29fa0a1a2",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/01087f77b6616b342518b9df50b0cdb29fa0a1a2/comments",
    "author": {
      "login": "dfletcher",
      "id": 189317,
      "node_id": "MDQ6VXNlcjE4OTMxNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/189317?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dfletcher",
      "html_url": "https://github.com/dfletcher",
      "followers_url": "https://api.github.com/users/dfletcher/followers",
      "following_url": "https://api.github.com/users/dfletcher/following{/other_user}",
      "gists_url": "https://api.github.com/users/dfletcher/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dfletcher/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dfletcher/subscriptions",
      "organizations_url": "https://api.github.com/users/dfletcher/orgs",
      "repos_url": "https://api.github.com/users/dfletcher/repos",
      "events_url": "https://api.github.com/users/dfletcher/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dfletcher/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dfletcher",
      "id": 189317,
      "node_id": "MDQ6VXNlcjE4OTMxNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/189317?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dfletcher",
      "html_url": "https://github.com/dfletcher",
      "followers_url": "https://api.github.com/users/dfletcher/followers",
      "following_url": "https://api.github.com/users/dfletcher/following{/other_user}",
      "gists_url": "https://api.github.com/users/dfletcher/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dfletcher/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dfletcher/subscriptions",
      "organizations_url": "https://api.github.com/users/dfletcher/orgs",
      "repos_url": "https://api.github.com/users/dfletcher/repos",
      "events_url": "https://api.github.com/users/dfletcher/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dfletcher/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "7077fe6dd4208bdbd46940f7923b7d89202c3287",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/7077fe6dd4208bdbd46940f7923b7d89202c3287",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/7077fe6dd4208bdbd46940f7923b7d89202c3287"
      }
    ],
    "stats": {
      "total": 32,
      "additions": 31,
      "deletions": 1
    },
    "files": [
      {
        "sha": "c641885ffadc5957c923f576b8468d98c3467f98",
        "filename": "src/util.cpp",
        "status": "modified",
        "additions": 31,
        "deletions": 1,
        "changes": 32,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/01087f77b6616b342518b9df50b0cdb29fa0a1a2/src/util.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/01087f77b6616b342518b9df50b0cdb29fa0a1a2/src/util.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/util.cpp?ref=01087f77b6616b342518b9df50b0cdb29fa0a1a2",
        "patch": "@@ -697,7 +697,37 @@ boost::filesystem::path GetTempPath() {\n \n void runCommand(std::string strCommand)\n {\n-    int nErr = ::system(strCommand.c_str());\n+    int nErr = 0;\n+#ifdef WIN32\n+    // If we're in Windows, use CreateProcess.\n+    ULONG nExitCode;\n+    STARTUPINFO info={sizeof(info)};\n+    ZeroMemory(&info, sizeof(STARTUPINFO));\n+    info.cb = sizeof(STARTUPINFO);\n+    info.dwFlags = STARTF_USESHOWWINDOW;\n+    info.wShowWindow = SW_HIDE;\n+    PROCESS_INFORMATION processInfo;\n+    ZeroMemory(&processInfo, sizeof(PROCESS_INFORMATION));\n+    // Note: copy command because CreateProcess() can't accept a const string.\n+    std::vector<char> cmdCopy(strCommand.begin(), strCommand.end()+1);\n+    if (CreateProcess(NULL, begin_ptr(cmdCopy), NULL, NULL, false, 0, NULL, NULL, &info, &processInfo))\n+    {\n+        // CreateProcess succeeded so wait, check exit code and clean up.\n+        WaitForSingleObject(processInfo.hProcess, INFINITE);\n+        if(!GetExitCodeProcess(processInfo.hProcess, &nExitCode))\n+          nExitCode = 1;\n+        CloseHandle(processInfo.hThread);\n+        CloseHandle(processInfo.hProcess);\n+        nErr = (int)nExitCode; // Had to pass a ULONG to GetExitCodeProcess().\n+    }\n+    else\n+    {\n+        // CreateProcess failed.\n+        nErr = -1;\n+    }\n+#else\n+    nErr = ::system(strCommand.c_str());\n+#endif\n     if (nErr)\n         LogPrintf(\"runCommand error: system(%s) returned %d\\n\", strCommand, nErr);\n }"
      }
    ]
  },
  {
    "sha": "a14488ad610219fe35a7c80e2a45c901aeb25afb",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzphMTQ0ODhhZDYxMDIxOWZlMzVhN2M4MGUyYTQ1YzkwMWFlYjI1YWZi",
    "commit": {
      "author": {
        "name": "Dave Fletcher",
        "email": "graveyhead@gmail.com",
        "date": "2015-03-13T22:27:40Z"
      },
      "committer": {
        "name": "Dave Fletcher",
        "email": "graveyhead@gmail.com",
        "date": "2015-03-13T22:27:40Z"
      },
      "message": "Testing if the reason for Travis failure is the removed fallback to ::system().",
      "tree": {
        "sha": "5b6b20a93d5508a38d016a443c28c1babc29d96d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5b6b20a93d5508a38d016a443c28c1babc29d96d"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a14488ad610219fe35a7c80e2a45c901aeb25afb",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a14488ad610219fe35a7c80e2a45c901aeb25afb",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/a14488ad610219fe35a7c80e2a45c901aeb25afb",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a14488ad610219fe35a7c80e2a45c901aeb25afb/comments",
    "author": {
      "login": "dfletcher",
      "id": 189317,
      "node_id": "MDQ6VXNlcjE4OTMxNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/189317?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dfletcher",
      "html_url": "https://github.com/dfletcher",
      "followers_url": "https://api.github.com/users/dfletcher/followers",
      "following_url": "https://api.github.com/users/dfletcher/following{/other_user}",
      "gists_url": "https://api.github.com/users/dfletcher/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dfletcher/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dfletcher/subscriptions",
      "organizations_url": "https://api.github.com/users/dfletcher/orgs",
      "repos_url": "https://api.github.com/users/dfletcher/repos",
      "events_url": "https://api.github.com/users/dfletcher/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dfletcher/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dfletcher",
      "id": 189317,
      "node_id": "MDQ6VXNlcjE4OTMxNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/189317?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dfletcher",
      "html_url": "https://github.com/dfletcher",
      "followers_url": "https://api.github.com/users/dfletcher/followers",
      "following_url": "https://api.github.com/users/dfletcher/following{/other_user}",
      "gists_url": "https://api.github.com/users/dfletcher/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dfletcher/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dfletcher/subscriptions",
      "organizations_url": "https://api.github.com/users/dfletcher/orgs",
      "repos_url": "https://api.github.com/users/dfletcher/repos",
      "events_url": "https://api.github.com/users/dfletcher/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dfletcher/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "01087f77b6616b342518b9df50b0cdb29fa0a1a2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/01087f77b6616b342518b9df50b0cdb29fa0a1a2",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/01087f77b6616b342518b9df50b0cdb29fa0a1a2"
      }
    ],
    "stats": {
      "total": 2,
      "additions": 1,
      "deletions": 1
    },
    "files": [
      {
        "sha": "b3aa9650a3b3008aa94aa90ac865a602c37278ce",
        "filename": "src/util.cpp",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a14488ad610219fe35a7c80e2a45c901aeb25afb/src/util.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a14488ad610219fe35a7c80e2a45c901aeb25afb/src/util.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/util.cpp?ref=a14488ad610219fe35a7c80e2a45c901aeb25afb",
        "patch": "@@ -723,7 +723,7 @@ void runCommand(std::string strCommand)\n     else\n     {\n         // CreateProcess failed.\n-        nErr = -1;\n+        nErr = ::system(strCommand.c_str());\n     }\n #else\n     nErr = ::system(strCommand.c_str());"
      }
    ]
  },
  {
    "sha": "90c1d35e3976a68be19659f4b4268efd71e96565",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo5MGMxZDM1ZTM5NzZhNjhiZTE5NjU5ZjRiNDI2OGVmZDcxZTk2NTY1",
    "commit": {
      "author": {
        "name": "Dave Fletcher",
        "email": "graveyhead@gmail.com",
        "date": "2015-03-14T01:30:54Z"
      },
      "committer": {
        "name": "Dave Fletcher",
        "email": "graveyhead@gmail.com",
        "date": "2015-03-14T01:30:54Z"
      },
      "message": "Testing explicit interpreter method on Travis.",
      "tree": {
        "sha": "7f9bd5cbb5ef898910350db91314d4c3b9774d56",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7f9bd5cbb5ef898910350db91314d4c3b9774d56"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/90c1d35e3976a68be19659f4b4268efd71e96565",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/90c1d35e3976a68be19659f4b4268efd71e96565",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/90c1d35e3976a68be19659f4b4268efd71e96565",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/90c1d35e3976a68be19659f4b4268efd71e96565/comments",
    "author": {
      "login": "dfletcher",
      "id": 189317,
      "node_id": "MDQ6VXNlcjE4OTMxNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/189317?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dfletcher",
      "html_url": "https://github.com/dfletcher",
      "followers_url": "https://api.github.com/users/dfletcher/followers",
      "following_url": "https://api.github.com/users/dfletcher/following{/other_user}",
      "gists_url": "https://api.github.com/users/dfletcher/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dfletcher/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dfletcher/subscriptions",
      "organizations_url": "https://api.github.com/users/dfletcher/orgs",
      "repos_url": "https://api.github.com/users/dfletcher/repos",
      "events_url": "https://api.github.com/users/dfletcher/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dfletcher/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dfletcher",
      "id": 189317,
      "node_id": "MDQ6VXNlcjE4OTMxNw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/189317?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dfletcher",
      "html_url": "https://github.com/dfletcher",
      "followers_url": "https://api.github.com/users/dfletcher/followers",
      "following_url": "https://api.github.com/users/dfletcher/following{/other_user}",
      "gists_url": "https://api.github.com/users/dfletcher/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dfletcher/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dfletcher/subscriptions",
      "organizations_url": "https://api.github.com/users/dfletcher/orgs",
      "repos_url": "https://api.github.com/users/dfletcher/repos",
      "events_url": "https://api.github.com/users/dfletcher/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dfletcher/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "a14488ad610219fe35a7c80e2a45c901aeb25afb",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a14488ad610219fe35a7c80e2a45c901aeb25afb",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/a14488ad610219fe35a7c80e2a45c901aeb25afb"
      }
    ],
    "stats": {
      "total": 36,
      "additions": 21,
      "deletions": 15
    },
    "files": [
      {
        "sha": "8e1991529d78446fe9757a6ea059f3318cc181a6",
        "filename": "src/util.cpp",
        "status": "modified",
        "additions": 21,
        "deletions": 15,
        "changes": 36,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/90c1d35e3976a68be19659f4b4268efd71e96565/src/util.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/90c1d35e3976a68be19659f4b4268efd71e96565/src/util.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/util.cpp?ref=90c1d35e3976a68be19659f4b4268efd71e96565",
        "patch": "@@ -708,22 +708,28 @@ void runCommand(std::string strCommand)\n     info.wShowWindow = SW_HIDE;\n     PROCESS_INFORMATION processInfo;\n     ZeroMemory(&processInfo, sizeof(PROCESS_INFORMATION));\n-    // Note: copy command because CreateProcess() can't accept a const string.\n-    std::vector<char> cmdCopy(strCommand.begin(), strCommand.end()+1);\n-    if (CreateProcess(NULL, begin_ptr(cmdCopy), NULL, NULL, false, 0, NULL, NULL, &info, &processInfo))\n-    {\n-        // CreateProcess succeeded so wait, check exit code and clean up.\n-        WaitForSingleObject(processInfo.hProcess, INFINITE);\n-        if(!GetExitCodeProcess(processInfo.hProcess, &nExitCode))\n-          nExitCode = 1;\n-        CloseHandle(processInfo.hThread);\n-        CloseHandle(processInfo.hProcess);\n-        nErr = (int)nExitCode; // Had to pass a ULONG to GetExitCodeProcess().\n+    char system32[256];\n+    if (GetSystemDirectory(system32, 255)) {\n+        std::stringstream ssCommand;\n+        ssCommand << system32 << \"\\\\cmd.exe /C \" << strCommand;\n+        std::string strTempCmd = ssCommand.str();\n+        std::vector<char> vecCommand(strTempCmd.begin(), strTempCmd.end() + 1);\n+        if (CreateProcess(NULL, begin_ptr(vecCommand), NULL, NULL, false, 0, NULL, NULL, &info, &processInfo))\n+        {\n+            // CreateProcess succeeded so wait, check exit code and clean up.\n+            WaitForSingleObject(processInfo.hProcess, INFINITE);\n+            if(!GetExitCodeProcess(processInfo.hProcess, &nExitCode))\n+              nExitCode = 1;\n+            CloseHandle(processInfo.hThread);\n+            CloseHandle(processInfo.hProcess);\n+            nErr = (int)nExitCode; // Had to pass a ULONG to GetExitCodeProcess().\n+        }\n+        else {\n+          nErr = (int)GetLastError(); // CreateProcess failed.\n+        }\n     }\n-    else\n-    {\n-        // CreateProcess failed.\n-        nErr = ::system(strCommand.c_str());\n+    else {\n+          nErr = -1; // Could not get system32 directory.\n     }\n #else\n     nErr = ::system(strCommand.c_str());"
      }
    ]
  }
]