[
  {
    "sha": "769684132985cd67cbe8c7629a917aba6a333688",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo3Njk2ODQxMzI5ODVjZDY3Y2JlOGM3NjI5YTkxN2FiYTZhMzMzNjg4",
    "commit": {
      "author": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2017-08-24T17:35:06Z"
      },
      "committer": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2017-09-06T23:35:28Z"
      },
      "message": "Fix style in -stdin and -stdinrpcpass handling",
      "tree": {
        "sha": "1b06c8376be8b76176de43c7c05167a418a99dfe",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/1b06c8376be8b76176de43c7c05167a418a99dfe"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/769684132985cd67cbe8c7629a917aba6a333688",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/769684132985cd67cbe8c7629a917aba6a333688",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/769684132985cd67cbe8c7629a917aba6a333688",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/769684132985cd67cbe8c7629a917aba6a333688/comments",
    "author": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "66a5b419eff57588f674ef7f409c389b71bebb22",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/66a5b419eff57588f674ef7f409c389b71bebb22",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/66a5b419eff57588f674ef7f409c389b71bebb22"
      }
    ],
    "stats": {
      "total": 9,
      "additions": 6,
      "deletions": 3
    },
    "files": [
      {
        "sha": "3c94c99b3e2c7039fc5b0fa46e4cbc6d6753ae79",
        "filename": "src/bitcoin-cli.cpp",
        "status": "modified",
        "additions": 6,
        "deletions": 3,
        "changes": 9,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/769684132985cd67cbe8c7629a917aba6a333688/src/bitcoin-cli.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/769684132985cd67cbe8c7629a917aba6a333688/src/bitcoin-cli.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/bitcoin-cli.cpp?ref=769684132985cd67cbe8c7629a917aba6a333688",
        "patch": "@@ -296,19 +296,22 @@ int CommandLineRPC(int argc, char *argv[])\n         }\n         std::string rpcPass;\n         if (gArgs.GetBoolArg(\"-stdinrpcpass\", false)) {\n-            if(!std::getline(std::cin,rpcPass))\n+            if (!std::getline(std::cin, rpcPass)) {\n                 throw std::runtime_error(\"-stdinrpcpass specified but failed to read from standard input\");\n+            }\n             gArgs.ForceSetArg(\"-rpcpassword\", rpcPass);\n         }\n         std::vector<std::string> args = std::vector<std::string>(&argv[1], &argv[argc]);\n         if (gArgs.GetBoolArg(\"-stdin\", false)) {\n             // Read one arg per line from stdin and append\n             std::string line;\n-            while (std::getline(std::cin,line))\n+            while (std::getline(std::cin, line)) {\n                 args.push_back(line);\n+            }\n         }\n-        if (args.size() < 1)\n+        if (args.size() < 1) {\n             throw std::runtime_error(\"too few parameters (need at least command)\");\n+        }\n         std::string strMethod = args[0];\n         args.erase(args.begin()); // Remove trailing method name from arguments vector\n "
      }
    ]
  },
  {
    "sha": "e1274947d4574bb83a020d0e178f0e5db7fc6282",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzplMTI3NDk0N2Q0NTc0YmI4M2EwMjBkMGUxNzhmMGU1ZGI3ZmM2Mjgy",
    "commit": {
      "author": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2017-09-06T15:52:25Z"
      },
      "committer": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2017-09-06T23:35:28Z"
      },
      "message": "[test] Improve assert_raises_jsonrpc docstring",
      "tree": {
        "sha": "12ab261d43b0890328e154bdd08b6beece95f762",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/12ab261d43b0890328e154bdd08b6beece95f762"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e1274947d4574bb83a020d0e178f0e5db7fc6282",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e1274947d4574bb83a020d0e178f0e5db7fc6282",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/e1274947d4574bb83a020d0e178f0e5db7fc6282",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e1274947d4574bb83a020d0e178f0e5db7fc6282/comments",
    "author": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "769684132985cd67cbe8c7629a917aba6a333688",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/769684132985cd67cbe8c7629a917aba6a333688",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/769684132985cd67cbe8c7629a917aba6a333688"
      }
    ],
    "stats": {
      "total": 4,
      "additions": 2,
      "deletions": 2
    },
    "files": [
      {
        "sha": "a5bc495dfaf86a255e3c0469b1b1a4d834992732",
        "filename": "test/functional/test_framework/util.py",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e1274947d4574bb83a020d0e178f0e5db7fc6282/test/functional/test_framework/util.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e1274947d4574bb83a020d0e178f0e5db7fc6282/test/functional/test_framework/util.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/test_framework/util.py?ref=e1274947d4574bb83a020d0e178f0e5db7fc6282",
        "patch": "@@ -62,13 +62,13 @@ def assert_raises_jsonrpc(code, message, fun, *args, **kwds):\n \n     Calls function `fun` with arguments `args` and `kwds`. Catches a JSONRPCException\n     and verifies that the error code and message are as expected. Throws AssertionError if\n-    no JSONRPCException was returned or if the error code/message are not as expected.\n+    no JSONRPCException was raised or if the error code/message are not as expected.\n \n     Args:\n         code (int), optional: the error code returned by the RPC call (defined\n             in src/rpc/protocol.h). Set to None if checking the error code is not required.\n         message (string), optional: [a substring of] the error string returned by the\n-            RPC call. Set to None if checking the error string is not required\n+            RPC call. Set to None if checking the error string is not required.\n         fun (function): the function to call. This should be the name of an RPC.\n         args*: positional arguments for the function.\n         kwds**: named arguments for the function."
      }
    ]
  },
  {
    "sha": "5c18a84b9a49e3f9dacf0502dbf7d5d755f38da6",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo1YzE4YTg0YjlhNDllM2Y5ZGFjZjA1MDJkYmY3ZDVkNzU1ZjM4ZGE2",
    "commit": {
      "author": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2017-09-06T16:07:21Z"
      },
      "committer": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2017-09-06T23:35:28Z"
      },
      "message": "[test] Add support for custom arguments to TestNodeCLI",
      "tree": {
        "sha": "a0023da655b91e7107876d85e0526f0b94505d3a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a0023da655b91e7107876d85e0526f0b94505d3a"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5c18a84b9a49e3f9dacf0502dbf7d5d755f38da6",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5c18a84b9a49e3f9dacf0502dbf7d5d755f38da6",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/5c18a84b9a49e3f9dacf0502dbf7d5d755f38da6",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5c18a84b9a49e3f9dacf0502dbf7d5d755f38da6/comments",
    "author": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "e1274947d4574bb83a020d0e178f0e5db7fc6282",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e1274947d4574bb83a020d0e178f0e5db7fc6282",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/e1274947d4574bb83a020d0e178f0e5db7fc6282"
      }
    ],
    "stats": {
      "total": 12,
      "additions": 10,
      "deletions": 2
    },
    "files": [
      {
        "sha": "363025740a53648bac2a0fd73048302d6cb6b487",
        "filename": "test/functional/test_framework/test_node.py",
        "status": "modified",
        "additions": 10,
        "deletions": 2,
        "changes": 12,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/5c18a84b9a49e3f9dacf0502dbf7d5d755f38da6/test/functional/test_framework/test_node.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/5c18a84b9a49e3f9dacf0502dbf7d5d755f38da6/test/functional/test_framework/test_node.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/test_framework/test_node.py?ref=5c18a84b9a49e3f9dacf0502dbf7d5d755f38da6",
        "patch": "@@ -155,8 +155,16 @@ class TestNodeCLI():\n     \"\"\"Interface to bitcoin-cli for an individual node\"\"\"\n \n     def __init__(self, binary, datadir):\n+        self.args = []\n         self.binary = binary\n         self.datadir = datadir\n+        self.input = None\n+\n+    def __call__(self, *args, input=None):\n+        # TestNodeCLI is callable with bitcoin-cli command-line args\n+        self.args = [str(arg) for arg in args]\n+        self.input = input\n+        return self\n \n     def __getattr__(self, command):\n         def dispatcher(*args, **kwargs):\n@@ -169,9 +177,9 @@ def send_cli(self, command, *args, **kwargs):\n         pos_args = [str(arg) for arg in args]\n         named_args = [str(key) + \"=\" + str(value) for (key, value) in kwargs.items()]\n         assert not (pos_args and named_args), \"Cannot use positional arguments and named arguments in the same bitcoin-cli call\"\n-        p_args = [self.binary, \"-datadir=\" + self.datadir]\n+        p_args = [self.binary, \"-datadir=\" + self.datadir] + self.args\n         if named_args:\n             p_args += [\"-named\"]\n         p_args += [command] + pos_args + named_args\n-        cli_output = subprocess.check_output(p_args, universal_newlines=True)\n+        cli_output = subprocess.check_output(p_args, input=self.input, universal_newlines=True)\n         return json.loads(cli_output, parse_float=decimal.Decimal)"
      }
    ]
  },
  {
    "sha": "232e3e8471edb346c09f906c996b2f350cabc72a",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyMzJlM2U4NDcxZWRiMzQ2YzA5ZjkwNmM5OTZiMmYzNTBjYWJjNzJh",
    "commit": {
      "author": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2017-09-06T15:35:57Z"
      },
      "committer": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2017-09-06T23:35:28Z"
      },
      "message": "[test] Add assert_raises_process_error to assert process errors",
      "tree": {
        "sha": "5efd9d994f283c4f49a4f1aa4819d9aad7de6e8e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5efd9d994f283c4f49a4f1aa4819d9aad7de6e8e"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/232e3e8471edb346c09f906c996b2f350cabc72a",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/232e3e8471edb346c09f906c996b2f350cabc72a",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/232e3e8471edb346c09f906c996b2f350cabc72a",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/232e3e8471edb346c09f906c996b2f350cabc72a/comments",
    "author": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "5c18a84b9a49e3f9dacf0502dbf7d5d755f38da6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5c18a84b9a49e3f9dacf0502dbf7d5d755f38da6",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/5c18a84b9a49e3f9dacf0502dbf7d5d755f38da6"
      }
    ],
    "stats": {
      "total": 25,
      "additions": 25,
      "deletions": 0
    },
    "files": [
      {
        "sha": "b2d8199d12b87a49d013f8240984aed1abd368c6",
        "filename": "test/functional/test_framework/util.py",
        "status": "modified",
        "additions": 25,
        "deletions": 0,
        "changes": 25,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/232e3e8471edb346c09f906c996b2f350cabc72a/test/functional/test_framework/util.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/232e3e8471edb346c09f906c996b2f350cabc72a/test/functional/test_framework/util.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/test_framework/util.py?ref=232e3e8471edb346c09f906c996b2f350cabc72a",
        "patch": "@@ -12,6 +12,7 @@\n import os\n import random\n import re\n+from subprocess import CalledProcessError\n import time\n \n from . import coverage\n@@ -57,6 +58,30 @@ def assert_raises_message(exc, message, fun, *args, **kwds):\n     else:\n         raise AssertionError(\"No exception raised\")\n \n+def assert_raises_process_error(returncode, output, fun, *args, **kwds):\n+    \"\"\"Execute a process and asserts the process return code and output.\n+\n+    Calls function `fun` with arguments `args` and `kwds`. Catches a CalledProcessError\n+    and verifies that the return code and output are as expected. Throws AssertionError if\n+    no CalledProcessError was raised or if the return code and output are not as expected.\n+\n+    Args:\n+        returncode (int): the process return code.\n+        output (string): [a substring of] the process output.\n+        fun (function): the function to call. This should execute a process.\n+        args*: positional arguments for the function.\n+        kwds**: named arguments for the function.\n+    \"\"\"\n+    try:\n+        fun(*args, **kwds)\n+    except CalledProcessError as e:\n+        if returncode != e.returncode:\n+            raise AssertionError(\"Unexpected returncode %i\" % e.returncode)\n+        if output not in e.output:\n+            raise AssertionError(\"Expected substring not found:\" + e.output)\n+    else:\n+        raise AssertionError(\"No exception raised\")\n+\n def assert_raises_jsonrpc(code, message, fun, *args, **kwds):\n     \"\"\"Run an RPC and verify that a specific JSONRPC exception code and message is raised.\n "
      }
    ]
  },
  {
    "sha": "ce379b47b92d6c04250c21719bb1abfb41c586ad",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjZTM3OWI0N2I5MmQ2YzA0MjUwYzIxNzE5YmIxYWJmYjQxYzU4NmFk",
    "commit": {
      "author": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2017-09-06T15:36:13Z"
      },
      "committer": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2017-09-06T23:35:28Z"
      },
      "message": "[test] Replace check_output with low level version",
      "tree": {
        "sha": "6ebfbf3e22f1aa95419f9a0db3627ffaab075a99",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6ebfbf3e22f1aa95419f9a0db3627ffaab075a99"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ce379b47b92d6c04250c21719bb1abfb41c586ad",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ce379b47b92d6c04250c21719bb1abfb41c586ad",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/ce379b47b92d6c04250c21719bb1abfb41c586ad",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ce379b47b92d6c04250c21719bb1abfb41c586ad/comments",
    "author": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "232e3e8471edb346c09f906c996b2f350cabc72a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/232e3e8471edb346c09f906c996b2f350cabc72a",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/232e3e8471edb346c09f906c996b2f350cabc72a"
      }
    ],
    "stats": {
      "total": 9,
      "additions": 7,
      "deletions": 2
    },
    "files": [
      {
        "sha": "12dab57a022d48c2e31dbb45380b6d8828caeaec",
        "filename": "test/functional/test_framework/test_node.py",
        "status": "modified",
        "additions": 7,
        "deletions": 2,
        "changes": 9,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/ce379b47b92d6c04250c21719bb1abfb41c586ad/test/functional/test_framework/test_node.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/ce379b47b92d6c04250c21719bb1abfb41c586ad/test/functional/test_framework/test_node.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/test_framework/test_node.py?ref=ce379b47b92d6c04250c21719bb1abfb41c586ad",
        "patch": "@@ -181,5 +181,10 @@ def send_cli(self, command, *args, **kwargs):\n         if named_args:\n             p_args += [\"-named\"]\n         p_args += [command] + pos_args + named_args\n-        cli_output = subprocess.check_output(p_args, input=self.input, universal_newlines=True)\n-        return json.loads(cli_output, parse_float=decimal.Decimal)\n+        process = subprocess.Popen(p_args, stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.PIPE, universal_newlines=True)\n+        cli_stdout, cli_stderr = process.communicate(input=self.input)\n+        returncode = process.poll()\n+        if returncode:\n+            # Ignore cli_stdout, raise with cli_stderr\n+            raise subprocess.CalledProcessError(returncode, self.binary, output=cli_stderr)\n+        return json.loads(cli_stdout, parse_float=decimal.Decimal)"
      }
    ]
  },
  {
    "sha": "29e1dfbd9793203479b8499c55ffec2086f5ab39",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyOWUxZGZiZDk3OTMyMDM0NzliODQ5OWM1NWZmZWMyMDg2ZjVhYjM5",
    "commit": {
      "author": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2017-08-25T02:31:27Z"
      },
      "committer": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2017-09-06T23:38:13Z"
      },
      "message": "[test] Add bitcoin-cli -stdin and -stdinrpcpass functional tests",
      "tree": {
        "sha": "a7a0a3a1b348daec3ac563bb14558d639f8a61f2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a7a0a3a1b348daec3ac563bb14558d639f8a61f2"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/29e1dfbd9793203479b8499c55ffec2086f5ab39",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/29e1dfbd9793203479b8499c55ffec2086f5ab39",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/29e1dfbd9793203479b8499c55ffec2086f5ab39",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/29e1dfbd9793203479b8499c55ffec2086f5ab39/comments",
    "author": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "ce379b47b92d6c04250c21719bb1abfb41c586ad",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ce379b47b92d6c04250c21719bb1abfb41c586ad",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/ce379b47b92d6c04250c21719bb1abfb41c586ad"
      }
    ],
    "stats": {
      "total": 24,
      "additions": 16,
      "deletions": 8
    },
    "files": [
      {
        "sha": "ffed5b0d3301603f1cfb994913b2c169fba6ffb1",
        "filename": "test/functional/bitcoin_cli.py",
        "status": "modified",
        "additions": 16,
        "deletions": 8,
        "changes": 24,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/29e1dfbd9793203479b8499c55ffec2086f5ab39/test/functional/bitcoin_cli.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/29e1dfbd9793203479b8499c55ffec2086f5ab39/test/functional/bitcoin_cli.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/functional/bitcoin_cli.py?ref=29e1dfbd9793203479b8499c55ffec2086f5ab39",
        "patch": "@@ -4,7 +4,7 @@\n # file COPYING or http://www.opensource.org/licenses/mit-license.php.\n \"\"\"Test bitcoin-cli\"\"\"\n from test_framework.test_framework import BitcoinTestFramework\n-from test_framework.util import assert_equal\n+from test_framework.util import assert_equal, assert_raises_process_error, get_auth_cookie\n \n class TestBitcoinCli(BitcoinTestFramework):\n \n@@ -16,16 +16,24 @@ def run_test(self):\n         \"\"\"Main test logic\"\"\"\n \n         self.log.info(\"Compare responses from gewalletinfo RPC and `bitcoin-cli getwalletinfo`\")\n-        cli_get_info = self.nodes[0].cli.getwalletinfo()\n-        rpc_get_info = self.nodes[0].getwalletinfo()\n-\n-        assert_equal(cli_get_info, rpc_get_info)\n+        cli_response = self.nodes[0].cli.getwalletinfo()\n+        rpc_response = self.nodes[0].getwalletinfo()\n+        assert_equal(cli_response, rpc_response)\n \n         self.log.info(\"Compare responses from getblockchaininfo RPC and `bitcoin-cli getblockchaininfo`\")\n-        cli_get_info = self.nodes[0].cli.getblockchaininfo()\n-        rpc_get_info = self.nodes[0].getblockchaininfo()\n+        cli_response = self.nodes[0].cli.getblockchaininfo()\n+        rpc_response = self.nodes[0].getblockchaininfo()\n+        assert_equal(cli_response, rpc_response)\n+\n+        user, password = get_auth_cookie(self.nodes[0].datadir)\n+\n+        self.log.info(\"Test -stdinrpcpass option\")\n+        assert_equal(0, self.nodes[0].cli('-rpcuser=%s' % user, '-stdinrpcpass', input=password).getblockcount())\n+        assert_raises_process_error(1, \"incorrect rpcuser or rpcpassword\", self.nodes[0].cli('-rpcuser=%s' % user, '-stdinrpcpass', input=\"foo\").echo)\n \n-        assert_equal(cli_get_info, rpc_get_info)\n+        self.log.info(\"Test -stdin and -stdinrpcpass\")\n+        assert_equal([\"foo\", \"bar\"], self.nodes[0].cli('-rpcuser=%s' % user, '-stdin', '-stdinrpcpass', input=password + \"\\nfoo\\nbar\").echo())\n+        assert_raises_process_error(1, \"incorrect rpcuser or rpcpassword\", self.nodes[0].cli('-rpcuser=%s' % user, '-stdin', '-stdinrpcpass', input=\"foo\").echo)\n \n if __name__ == '__main__':\n     TestBitcoinCli().main()"
      }
    ]
  }
]