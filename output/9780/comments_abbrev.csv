laanwj,2017-02-17T08:09:17Z,"Concept ACK, filtering signal/noise has been a pet peeve of me for as long as we have a travis run, but never got around to it. Thanks for doing this.",https://github.com/bitcoin/bitcoin/pull/9780#issuecomment-280582858,280582858,
JeremyRubin,2017-02-17T08:27:30Z,"I like the approach, but I think that it would be preferable to have some output (e.g., periods) while the tests are running. This is because of a limitation in Travis CI where if no output is seen for 10 minutes the build will fail. This has been a problem historically in the unit tests, but was only addressed (by me) by making them run more quickly such that this is not an issue.",https://github.com/bitcoin/bitcoin/pull/9780#issuecomment-280586359,280586359,
laanwj,2017-02-17T10:10:17Z,"Yes, printing periods or another kind of progress display would be nice. My issue is with tons of unnecessary debug output.\n\nEdit: But don't we already do that during the RPC tests, printing periods?\n",https://github.com/bitcoin/bitcoin/pull/9780#issuecomment-280609989,280609989,
ryanofsky,2017-02-17T11:12:41Z,utACK d580707d6a2481f13e8c83c08b5635c59672ae6d,https://github.com/bitcoin/bitcoin/pull/9780#issuecomment-280623106,280623106,
jnewbery,2017-02-17T21:51:23Z,@laanwj - this PR suppresses the period printing when running --quiet mode. Do you want me to put that back in?,https://github.com/bitcoin/bitcoin/pull/9780#issuecomment-280776398,280776398,
laanwj,2017-02-18T09:21:48Z,"> this PR suppresses the period printing when running --quiet mode. Do you want me to put that back in?\n\nNot necessarily. Just in the mode that Travis uses, apparently it needs to print something (and dots are better than text spam :-) to avoid the timeout problem that @JeremyRubin mentions.",https://github.com/bitcoin/bitcoin/pull/9780#issuecomment-280833549,280833549,
jnewbery,2017-02-23T21:38:16Z,I've rebased this now that #9657 has been merged. I've also made a change so that period printing still happens in quiet mode. That should prevent any Travis timeout issues.,https://github.com/bitcoin/bitcoin/pull/9780#issuecomment-282129405,282129405,
ryanofsky,2017-03-08T18:52:33Z,"re-utACK 85312c075e7bf3379e0a277e3393e734f940b71c. Confirmed no changes since last rebase other than restoring the print('.').\n\nI would definitely prefer not to be adding the catch-all except handler here, though: https://github.com/bitcoin/bitcoin/pull/9780#discussion_r101642780",https://github.com/bitcoin/bitcoin/pull/9780#issuecomment-285132199,285132199,
jnewbery,2017-03-15T18:46:01Z,rebased and addressed https://github.com/bitcoin/bitcoin/pull/9780#discussion_r101642780.,https://github.com/bitcoin/bitcoin/pull/9780#issuecomment-286841608,286841608,
jtimon,2017-03-21T14:38:53Z,utACK a2a565180449b80c054c05c12c93097f1e8752c2 except for @ryanofsky 's nit. Needs rebase.,https://github.com/bitcoin/bitcoin/pull/9780#issuecomment-288098850,288098850,
jnewbery,2017-03-21T15:03:58Z,Updated the exception handler to catch only OSError exceptions as suggested by @ryanofsky and rebased.,https://github.com/bitcoin/bitcoin/pull/9780#issuecomment-288107268,288107268,
jtimon,2017-03-25T13:11:27Z,Needs rebase again.,https://github.com/bitcoin/bitcoin/pull/9780#issuecomment-289210801,289210801,
jnewbery,2017-03-27T15:58:27Z,"rebased. I think this is useful PR since it suppresses noisy output in travis when tests pass and also increases the amount of logging available when the test fails. This will be helpful in debugging intermittent functional test failures in Travis. @MarcoFalke , @laanwj - can I convince you to review this PR?",https://github.com/bitcoin/bitcoin/pull/9780#issuecomment-289498636,289498636,
laanwj,2017-03-27T17:36:23Z,utACK 2c0be25,https://github.com/bitcoin/bitcoin/pull/9780#issuecomment-289526853,289526853,
MarcoFalke,2017-03-27T22:26:26Z,utACK 2c0be25bd6b744cab60a3672409750545522733a. Please squash the fixup commit.,https://github.com/bitcoin/bitcoin/pull/9780#issuecomment-289604702,289604702,
jnewbery,2017-03-27T23:34:38Z,squashed,https://github.com/bitcoin/bitcoin/pull/9780#issuecomment-289617343,289617343,
ryanofsky,2017-02-16T22:17:23Z,"Maybe only call sh.setLevel if args.quiet is true, because logging.DEBUG can still throw away logs at levels < 10.",https://github.com/bitcoin/bitcoin/pull/9780#discussion_r101641004,101641004,qa/pull-tester/rpc-tests.py
ryanofsky,2017-02-16T22:26:12Z,"I think this very broad exception handler could hide information we might like to know about. I would remove it, or narrow it, or at least at stick a ""traceback.print_exc()"" call in here.\n\nIf this handler is supposed to handle the case where f does not exist, you could add an ""if os.path.exists(f)"" or similar check above.",https://github.com/bitcoin/bitcoin/pull/9780#discussion_r101642780,101642780,qa/rpc-tests/test_framework/test_framework.py
jnewbery,2017-03-15T18:45:33Z,"Printing the tails of the log files here is simply to help if the test case fails on travis. My thinking in adding the try/except handling is that if reading a log file fails for *any* reason, we should just continue and try to print out the other log files. I don't want there to be any chance that this commit makes the logging available on travis any worse.\n\nI've added a print out of the stac",https://github.com/bitcoin/bitcoin/pull/9780#discussion_r106251748,106251748,qa/rpc-tests/test_framework/test_framework.py
ryanofsky,2017-03-15T18:59:52Z,"The print addresses most of my concern. If something goes wrong, I would prefer to know about it.\n\nI also think you should change the bare except to `except OSError` or `except Exception`. It isn't right to ignore exceptions like SystemExit or KeyboardInterrupt and keep looping if someone is trying to kill the program. (For reference: https://docs.python.org/3/library/exceptions.html#exception",https://github.com/bitcoin/bitcoin/pull/9780#discussion_r106255287,106255287,qa/rpc-tests/test_framework/test_framework.py
jtimon,2017-03-21T14:37:22Z,"Agree on catching only a more concrete exception, specially if you're expecting one in particular, as it seems to be the case in https://github.com/bitcoin/bitcoin/pull/9780/commits/a2a565180449b80c054c05c12c93097f1e8752c2 . Also you could print the message of the exception too (before the traceback).",https://github.com/bitcoin/bitcoin/pull/9780#discussion_r107171768,107171768,qa/rpc-tests/test_framework/test_framework.py
