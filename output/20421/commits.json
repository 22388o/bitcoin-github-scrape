[
  {
    "sha": "180dc3c8863fc42e93657eda839001a2a35ef634",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoxODBkYzNjODg2M2ZjNDJlOTM2NTdlZGE4MzkwMDFhMmEzNWVmNjM0",
    "commit": {
      "author": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2020-11-18T23:43:42Z"
      },
      "committer": {
        "name": "fanquake",
        "email": "fanquake@gmail.com",
        "date": "2021-03-23T00:39:16Z"
      },
      "message": "build: miniupnpc 2.2.2\n\nCreating the dll subdir is no-longer required.\nWe can also drop our wingen patch.",
      "tree": {
        "sha": "3f0c39031420fc5af498d8e3b08ea91ae11a0140",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3f0c39031420fc5af498d8e3b08ea91ae11a0140"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/180dc3c8863fc42e93657eda839001a2a35ef634",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEz7FuIclQ9n+pXlWPLuufXMCVJsEFAmBZOLYACgkQLuufXMCV\nJsGhjw/+KFiiBZ2pYHTFf+FN4Xu88RsMJpZOFN25hEmvsrtwMclLANgxQRHLtrqn\nxxYHTiQPEN104wrPMxfT68s7DzwL/nfvc9GAHXQdez5RZhnf9gsOWVNZEHNDpsN8\nHKdP3GiQEhr/TTNYFhQHUpwQxcmzsEbM6UP81N7hx0McPjfATl3XnOuwCsOwRHve\nAu1te3ixYU4awBR0bZKI83br3VhZ6uX9OaB76HQ7wMJ9wftE57N0Obo+kfW12i2S\n/CmS/sF40LKDv+mhP8xvYBc8kVTvetF+Eiy6mTBIojx+k15t9TMwSfMJwepebK36\n6KuaUwtO8rT1kj5vIct37Uzfvk/Pac+AfbD2E8henSHy5xXPg9f3NL/Q/IpYZ6PE\nkJQuZHFKLREZT1dOvgo1s3SRLATf3L0eKDeIwRzml6rsB8sg9K8n62NMLbjy/brL\nyAo4muUcn3bcH2ygL9TN6WGF22nmd2485YkMJXpLv9JXfyOMgT/Dldqr3jInmXtU\nylR8fd5Hv9yvyWKoU8H/0gY2PxcTBLhgonZl2RtunJ2isX4iyRnn5Eb+bdKO8IlR\nxbjVMhweHwv2rhdkv5E6d8WLOXf44uqrhuaeonxXqWoUj1jzsiey6b+JcRW5UoRi\nOrgvYzAiOAalILalB+6mBbfpLEKSw6SayYWi5lEQW1fI3Dyo1LE=\n=IkSu\n-----END PGP SIGNATURE-----",
        "payload": "tree 3f0c39031420fc5af498d8e3b08ea91ae11a0140\nparent c46f1ce75196860c8b036d2965faac7db3aa4414\nauthor fanquake <fanquake@gmail.com> 1605743022 +0800\ncommitter fanquake <fanquake@gmail.com> 1616459956 +0800\n\nbuild: miniupnpc 2.2.2\n\nCreating the dll subdir is no-longer required.\nWe can also drop our wingen patch.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/180dc3c8863fc42e93657eda839001a2a35ef634",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/180dc3c8863fc42e93657eda839001a2a35ef634",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/180dc3c8863fc42e93657eda839001a2a35ef634/comments",
    "author": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url": "https://api.github.com/users/fanquake/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events{/privacy}",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "c46f1ce75196860c8b036d2965faac7db3aa4414",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c46f1ce75196860c8b036d2965faac7db3aa4414",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/c46f1ce75196860c8b036d2965faac7db3aa4414"
      }
    ],
    "stats": {
      "total": 70,
      "additions": 37,
      "deletions": 33
    },
    "files": [
      {
        "sha": "99f5b0a8dbcf2c903e1c3d07e78221912d572d02",
        "filename": "depends/packages/miniupnpc.mk",
        "status": "modified",
        "additions": 4,
        "deletions": 6,
        "changes": 10,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/180dc3c8863fc42e93657eda839001a2a35ef634/depends/packages/miniupnpc.mk",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/180dc3c8863fc42e93657eda839001a2a35ef634/depends/packages/miniupnpc.mk",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/packages/miniupnpc.mk?ref=180dc3c8863fc42e93657eda839001a2a35ef634",
        "patch": "@@ -1,9 +1,9 @@\n package=miniupnpc\n-$(package)_version=2.0.20180203\n+$(package)_version=2.2.2\n $(package)_download_path=https://miniupnp.tuxfamily.org/files/\n $(package)_file_name=$(package)-$($(package)_version).tar.gz\n-$(package)_sha256_hash=90dda8c7563ca6cd4a83e23b3c66dbbea89603a1675bfdb852897c2c9cc220b7\n-$(package)_patches=dont_use_wingen.patch\n+$(package)_sha256_hash=888fb0976ba61518276fe1eda988589c700a3f2a69d71089260d75562afd3687\n+$(package)_patches=dont_leak_info.patch\n \n define $(package)_set_vars\n $(package)_build_opts=CC=\"$($(package)_cc)\"\n@@ -13,9 +13,7 @@ $(package)_build_env+=CFLAGS=\"$($(package)_cflags) $($(package)_cppflags)\" AR=\"$\n endef\n \n define $(package)_preprocess_cmds\n-  mkdir dll && \\\n-  sed -e 's|MINIUPNPC_VERSION_STRING \\\"version\\\"|MINIUPNPC_VERSION_STRING \\\"$($(package)_version)\\\"|' -e 's|OS/version|$(host)|' miniupnpcstrings.h.in > miniupnpcstrings.h && \\\n-  patch -p1 < $($(package)_patch_dir)/dont_use_wingen.patch\n+  patch -p1 < $($(package)_patch_dir)/dont_leak_info.patch\n endef\n \n define $(package)_build_cmds"
      },
      {
        "sha": "512f9c50ea8d7fbca35004e92756236721e0919c",
        "filename": "depends/patches/miniupnpc/dont_leak_info.patch",
        "status": "added",
        "additions": 32,
        "deletions": 0,
        "changes": 32,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/180dc3c8863fc42e93657eda839001a2a35ef634/depends/patches/miniupnpc/dont_leak_info.patch",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/180dc3c8863fc42e93657eda839001a2a35ef634/depends/patches/miniupnpc/dont_leak_info.patch",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/patches/miniupnpc/dont_leak_info.patch?ref=180dc3c8863fc42e93657eda839001a2a35ef634",
        "patch": "@@ -0,0 +1,32 @@\n+commit 8815452257437ba36607d0e2381c01142d1c7bb0\n+Author: fanquake <fanquake@gmail.com>\n+Date:   Thu Nov 19 10:51:19 2020 +0800\n+\n+    Don't leak OS and miniupnpc version info in User-Agent\n+\n+diff --git a//minisoap.c b/minisoap.c\n+index 7860667..775580b 100644\n+--- a/minisoap.c\n++++ b/minisoap.c\n+@@ -90,7 +90,7 @@ int soapPostSubmit(SOCKET fd,\n+ \theaderssize = snprintf(headerbuf, sizeof(headerbuf),\n+                        \"POST %s HTTP/%s\\r\\n\"\n+ \t                   \"Host: %s%s\\r\\n\"\n+-\t\t\t\t\t   \"User-Agent: \" OS_STRING \", \" UPNP_VERSION_STRING \", MiniUPnPc/\" MINIUPNPC_VERSION_STRING \"\\r\\n\"\n++\t\t\t\t\t   \"User-Agent: \" UPNP_VERSION_STRING \"\\r\\n\"\n+ \t                   \"Content-Length: %d\\r\\n\"\n+ \t\t\t\t\t   \"Content-Type: text/xml\\r\\n\"\n+ \t\t\t\t\t   \"SOAPAction: \\\"%s\\\"\\r\\n\"\n+diff --git a/miniwget.c b/miniwget.c\n+index d5b7970..05aeb9c 100644\n+--- a/miniwget.c\n++++ b/miniwget.c\n+@@ -444,7 +444,7 @@ miniwget3(const char * host,\n+                  \"GET %s HTTP/%s\\r\\n\"\n+ \t\t\t     \"Host: %s:%d\\r\\n\"\n+ \t\t\t\t \"Connection: Close\\r\\n\"\n+-\t\t\t\t \"User-Agent: \" OS_STRING \", \" UPNP_VERSION_STRING \", MiniUPnPc/\" MINIUPNPC_VERSION_STRING \"\\r\\n\"\n++\t\t\t\t \"User-Agent: \" UPNP_VERSION_STRING \"\\r\\n\"\n+ \n+ \t\t\t\t \"\\r\\n\",\n+ \t\t\t   path, httpversion, host, port);"
      },
      {
        "sha": "a1cc9b50d1509379b121ba3f228821cced0485f9",
        "filename": "depends/patches/miniupnpc/dont_use_wingen.patch",
        "status": "removed",
        "additions": 0,
        "deletions": 26,
        "changes": 26,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c46f1ce75196860c8b036d2965faac7db3aa4414/depends/patches/miniupnpc/dont_use_wingen.patch",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c46f1ce75196860c8b036d2965faac7db3aa4414/depends/patches/miniupnpc/dont_use_wingen.patch",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/depends/patches/miniupnpc/dont_use_wingen.patch?ref=c46f1ce75196860c8b036d2965faac7db3aa4414",
        "patch": "@@ -1,26 +0,0 @@\n-commit e8077044df239bcf0d9e9980b0e1afb9f1f5c446\n-Author: fanquake <fanquake@gmail.com>\n-Date:   Tue Aug 18 20:50:19 2020 +0800\n-\n-    Don't use wingenminiupnpcstrings when generating miniupnpcstrings.h\n-\n-    The wingenminiupnpcstrings tool is used on Windows to generate version\n-    information. This information is irrelevant for us, and trying to use\n-    wingenminiupnpcstrings would cause builds to fail, so just don't use it.\n-\n-    We should be able to drop this once we are using 2.1 or later. See\n-    upstream commit: 9663c55c61408fdcc39a82987d2243f816b22932.\n-\n-diff --git a/Makefile.mingw b/Makefile.mingw\n-index 574720e..fcc17bb 100644\n---- a/Makefile.mingw\n-+++ b/Makefile.mingw\n-@@ -74,7 +74,7 @@ wingenminiupnpcstrings:\twingenminiupnpcstrings.o\n-\n- wingenminiupnpcstrings.o:\twingenminiupnpcstrings.c\n-\n--miniupnpcstrings.h: miniupnpcstrings.h.in wingenminiupnpcstrings\n-+miniupnpcstrings.h: miniupnpcstrings.h.in\n- \twingenminiupnpcstrings $< $@\n-\n- minixml.o:\tminixml.c minixml.h"
      },
      {
        "sha": "22161856cec76b62863b567dadaea1bee9a268ac",
        "filename": "doc/dependencies.md",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/180dc3c8863fc42e93657eda839001a2a35ef634/doc/dependencies.md",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/180dc3c8863fc42e93657eda839001a2a35ef634/doc/dependencies.md",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/doc/dependencies.md?ref=180dc3c8863fc42e93657eda839001a2a35ef634",
        "patch": "@@ -17,7 +17,7 @@ These are the dependencies currently used by Bitcoin Core. You can find instruct\n | libnatpmp | git commit [4536032...](https://github.com/miniupnp/libnatpmp/tree/4536032ae32268a45c073a4d5e91bbab4534773a) |  | No |  |  |\n | libpng |  |  |  |  | [Yes](https://github.com/bitcoin/bitcoin/blob/master/depends/packages/qt.mk) |\n | librsvg | |  |  |  |  |\n-| MiniUPnPc | [2.0.20180203](https://miniupnp.tuxfamily.org/files) |  | No |  |  |\n+| MiniUPnPc | [2.2.2](https://miniupnp.tuxfamily.org/files) |  | No |  |  |\n | PCRE |  |  |  |  | [Yes](https://github.com/bitcoin/bitcoin/blob/master/depends/packages/qt.mk) |\n | Python (tests) |  | [3.6](https://www.python.org/downloads) |  |  |  |\n | qrencode | [3.4.4](https://fukuchi.org/works/qrencode) |  | No |  |  |"
      }
    ]
  }
]