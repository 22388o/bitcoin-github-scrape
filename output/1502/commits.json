[
  {
    "sha": "25d5c195228279b8fd891f2a7767d0529aee0ffd",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyNWQ1YzE5NTIyODI3OWI4ZmQ4OTFmMmE3NzY3ZDA1MjlhZWUwZmZk",
    "commit": {
      "author": {
        "name": "Jeff Garzik",
        "email": "jgarzik@exmulti.com",
        "date": "2012-06-22T15:43:34Z"
      },
      "committer": {
        "name": "Jeff Garzik",
        "email": "jgarzik@redhat.com",
        "date": "2012-06-22T15:43:34Z"
      },
      "message": "RPC: add 'getrawmempool', listing all transaction ids in memory pool",
      "tree": {
        "sha": "2da60e657e3881bfa962258cc680bc14ffde9427",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2da60e657e3881bfa962258cc680bc14ffde9427"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/25d5c195228279b8fd891f2a7767d0529aee0ffd",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/25d5c195228279b8fd891f2a7767d0529aee0ffd",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/25d5c195228279b8fd891f2a7767d0529aee0ffd",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/25d5c195228279b8fd891f2a7767d0529aee0ffd/comments",
    "author": null,
    "committer": null,
    "parents": [
      {
        "sha": "a08e1826981e02c7a5f18fc30b4f40a780e4e86d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a08e1826981e02c7a5f18fc30b4f40a780e4e86d",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/a08e1826981e02c7a5f18fc30b4f40a780e4e86d"
      }
    ],
    "stats": {
      "total": 27,
      "additions": 27,
      "deletions": 0
    },
    "files": [
      {
        "sha": "9dd6774984ea05e4d4feb3dc2ab963d53ef8a6eb",
        "filename": "src/bitcoinrpc.cpp",
        "status": "modified",
        "additions": 18,
        "deletions": 0,
        "changes": 18,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/25d5c195228279b8fd891f2a7767d0529aee0ffd/src/bitcoinrpc.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/25d5c195228279b8fd891f2a7767d0529aee0ffd/src/bitcoinrpc.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/bitcoinrpc.cpp?ref=25d5c195228279b8fd891f2a7767d0529aee0ffd",
        "patch": "@@ -2194,6 +2194,23 @@ Value getmemorypool(const Array& params, bool fHelp)\n     }\n }\n \n+Value getrawmempool(const Array& params, bool fHelp)\n+{\n+    if (fHelp || params.size() != 0)\n+        throw runtime_error(\n+            \"getrawmempool\\n\"\n+            \"Returns all transaction ids in memory pool.\");\n+\n+    vector<uint256> vtxid;\n+    mempool.queryHashes(vtxid);\n+\n+    Array a;\n+    BOOST_FOREACH(const uint256& hash, vtxid)\n+        a.push_back(hash.ToString());\n+\n+    return a;\n+}\n+\n Value getblockhash(const Array& params, bool fHelp)\n {\n     if (fHelp || params.size() != 1)\n@@ -2317,6 +2334,7 @@ static const CRPCCommand vRPCCommands[] =\n     { \"sendfrom\",               &sendfrom,               false },\n     { \"sendmany\",               &sendmany,               false },\n     { \"addmultisigaddress\",     &addmultisigaddress,     false },\n+    { \"getrawmempool\",          &getrawmempool,          true },\n     { \"getblock\",               &getblock,               false },\n     { \"getblockhash\",           &getblockhash,           false },\n     { \"gettransaction\",         &gettransaction,         false },"
      },
      {
        "sha": "6765ed5f05a0c0cbc004a3fc29a38915975c51fc",
        "filename": "src/main.cpp",
        "status": "modified",
        "additions": 8,
        "deletions": 0,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/25d5c195228279b8fd891f2a7767d0529aee0ffd/src/main.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/25d5c195228279b8fd891f2a7767d0529aee0ffd/src/main.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/main.cpp?ref=25d5c195228279b8fd891f2a7767d0529aee0ffd",
        "patch": "@@ -652,7 +652,15 @@ bool CTxMemPool::remove(CTransaction &tx)\n     return true;\n }\n \n+void CTxMemPool::queryHashes(std::vector<uint256>& vtxid)\n+{\n+    vtxid.clear();\n \n+    LOCK(cs);\n+    vtxid.reserve(mapTx.size());\n+    for (map<uint256, CTransaction>::iterator mi = mapTx.begin(); mi != mapTx.end(); ++mi)\n+        vtxid.push_back((*mi).first);\n+}\n \n \n "
      },
      {
        "sha": "bb094ad3c71723dfa6048e8c73e1c549149f8a30",
        "filename": "src/main.h",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/25d5c195228279b8fd891f2a7767d0529aee0ffd/src/main.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/25d5c195228279b8fd891f2a7767d0529aee0ffd/src/main.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/main.h?ref=25d5c195228279b8fd891f2a7767d0529aee0ffd",
        "patch": "@@ -1604,6 +1604,7 @@ class CTxMemPool\n                 bool fCheckInputs, bool* pfMissingInputs);\n     bool addUnchecked(CTransaction &tx);\n     bool remove(CTransaction &tx);\n+    void queryHashes(std::vector<uint256>& vtxid);\n \n     unsigned long size()\n     {"
      }
    ]
  }
]