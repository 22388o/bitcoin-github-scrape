Sjors,2018-08-10T14:04:40Z,"cc @TheBlueMatt, @MarcoFalke, @jamesob as this touches your work\n\ncc @jonasschnelli  since you reviewed the original PR (@skeees did too, but only the commit that I dropped)  ",https://github.com/bitcoin/bitcoin/pull/13937#issuecomment-412092374,412092374,
DrahtBot,2018-08-10T16:24:50Z,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#14624](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/14624.html) (Some simple improvements to the RNG code by",https://github.com/bitcoin/bitcoin/pull/13937#issuecomment-412134370,412134370,
Sjors,2018-08-26T14:12:28Z,"Rebased.\n\nI added commits to explicitly handle cases where `GetBestHeader()` returns `nullptr` in `validation.cpp`. Both cases are UI related and don't seem very important, so they're handled in a fairly lazy way.\n\nI added a commit to make header count fall back to block height in `getblockchaininfo` (`rpc/blockchain.cpp`).\n\nThat leaves `net_processing.cpp`, where I'm not sure what to ",https://github.com/bitcoin/bitcoin/pull/13937#issuecomment-416041790,416041790,
Sjors,2018-10-30T08:50:11Z,Rebased. I'll hold back on addressing specific feedback until there's some high level agreement on whether this is useful at all.,https://github.com/bitcoin/bitcoin/pull/13937#issuecomment-434218370,434218370,
Sjors,2018-11-30T10:58:35Z,"Abandoning for now. Consider it up for grabs, but I suggest getting concept ACKs before trying to rebase.",https://github.com/bitcoin/bitcoin/pull/13937#issuecomment-443168600,443168600,
ryanofsky,2018-12-03T16:30:19Z,"Since this is marked up for grabs, it might be useful to say what motivations for this change are.\n\nIt looks like it was brought up in IRC on 12/1 in the context of ""SPV sync"" but the relationship seems unclear. (I believe ""SPV sync"" refers to downloading blocks out of order during initial sync so wallet can show unvalidated transactions and be usable before the sync finishes.)",https://github.com/bitcoin/bitcoin/pull/13937#issuecomment-443773740,443773740,
Sjors,2018-12-04T09:55:11Z,"@ryanofsky it started out here: https://github.com/bitcoin/bitcoin/pull/9483#issuecomment-349790765, so just one step to make it easier to sync headers and fresh blocks first, and then catch up on historical blocks later.",https://github.com/bitcoin/bitcoin/pull/13937#issuecomment-444039967,444039967,
Sjors,2018-08-10T16:29:30Z,Note: I find the above reverse-to-forward iterator dance remarkably confusing.,https://github.com/bitcoin/bitcoin/pull/13937#discussion_r209315966,209315966,src/validation.cpp
donaloconnor,2018-08-11T14:28:18Z,"Numerous places call this function but no nullptr check is performed and dereferences are executed on the ptr.\nCan this return null in any case where this function is called?",https://github.com/bitcoin/bitcoin/pull/13937#discussion_r209428169,209428169,src/validation.cpp
donaloconnor,2018-08-11T14:41:52Z,"Possible race condition here since we don't lock cs_main? Can the best_head data be deleted between time we call GetBestHeader() and when we use the ptr?\n\nI'm not familiar with the code enough to know the answer to this so just putting it here in case.",https://github.com/bitcoin/bitcoin/pull/13937#discussion_r209428514,209428514,src/interfaces/node.cpp
Sjors,2018-08-26T11:21:38Z,"~It sounds like it would be safer to also make a PR for https://github.com/bitcoin/bitcoin/commit/a9db3dada0119c183d16627805e90c4dbca05c6a that I left out?~ (nvm that was already merged in #13023)\n\nI'll see if I can understand the potential race condition you mention.",https://github.com/bitcoin/bitcoin/pull/13937#discussion_r212822708,212822708,src/interfaces/node.cpp
Sjors,2018-08-26T12:49:03Z,"That seems problematic indeed. There's an `assert` for this in https://github.com/bitcoin/bitcoin/blame/7b1ab22384d944f638c514f838e25b391204ef67/src/net_processing.cpp#L3308, but not in the calls from validation.cpp:\n* in `NotifyHeaderTip()`: here it's compared with `pindexHeaderOld` which is a `nullptr` initially, but would non-null the next time. It's not dereferenced in that function, but it ",https://github.com/bitcoin/bitcoin/pull/13937#discussion_r212825173,212825173,src/validation.cpp
practicalswift,2018-10-30T20:46:47Z,This is dead code. The `parent_present = true;` is not meant to be after `break;` in this scope? :-),https://github.com/bitcoin/bitcoin/pull/13937#discussion_r229479718,229479718,src/validation.cpp
practicalswift,2018-10-30T20:47:32Z,"""going to find them here."" :-)",https://github.com/bitcoin/bitcoin/pull/13937#discussion_r229479982,229479982,src/validation.cpp
practicalswift,2018-10-30T20:47:48Z,Should be insertion?,https://github.com/bitcoin/bitcoin/pull/13937#discussion_r229480065,229480065,src/validation.cpp
practicalswift,2018-10-30T20:49:19Z,"""Don't"" :-)",https://github.com/bitcoin/bitcoin/pull/13937#discussion_r229480577,229480577,src/validation.cpp
practicalswift,2018-10-30T20:49:29Z,"""Don't"" :-)",https://github.com/bitcoin/bitcoin/pull/13937#discussion_r229480628,229480628,src/validation.cpp
