[
  {
    "sha": "8463aaa63c5ac76421c4d2754ea9e17a31584c93",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo4NDYzYWFhNjNjNWFjNzY0MjFjNGQyNzU0ZWE5ZTE3YTMxNTg0Yzkz",
    "commit": {
      "author": {
        "name": "Russell Yanofsky",
        "email": "russ@yanofsky.org",
        "date": "2016-11-02T13:46:55Z"
      },
      "committer": {
        "name": "Russell Yanofsky",
        "email": "russ@yanofsky.org",
        "date": "2016-11-07T17:04:01Z"
      },
      "message": "[qa] Increase wallet-dump RPC timeout\n\nIncrease wallet-dump RPC timeout from 30 seconds to 1 minute. This avoids a\ntimeout error that seemed to happen regularly (around 50% of builds) on a\nparticular jenkins server during the first getnewaddress RPC call made by the\ntest.\n\nThe failing stack trace looked like:\n\n    Unexpected exception caught during testing: timeout('timed out',)\n\n    File \".../bitcoin/qa/rpc-tests/test_framework/test_framework.py\", line 146, in main\n      self.run_test()\n    File \".../bitcoin/qa/rpc-tests/wallet-dump.py\", line 73, in run_test\n      addr = self.nodes[0].getnewaddress()\n    File \".../bitcoin/qa/rpc-tests/test_framework/coverage.py\", line 49, in __call__\n      return_val = self.auth_service_proxy_instance.__call__(*args, **kwargs)\n    File \".../bitcoin/qa/rpc-tests/test_framework/authproxy.py\", line 145, in __call__\n      response = self._request('POST', self.__url.path, postdata.encode('utf-8'))\n    File \".../bitcoin/qa/rpc-tests/test_framework/authproxy.py\", line 121, in _request\n      return self._get_response()\n    File \".../bitcoin/qa/rpc-tests/test_framework/authproxy.py\", line 160, in _get_response\n      http_response = self.__conn.getresponse()\n    File \"/usr/lib/python3.4/http/client.py\", line 1171, in getresponse\n      response.begin()\n    File \"/usr/lib/python3.4/http/client.py\", line 351, in begin\n      version, status, reason = self._read_status()\n    File \"/usr/lib/python3.4/http/client.py\", line 313, in _read_status\n      line = str(self.fp.readline(_MAXLINE + 1), \"iso-8859-1\")\n    File \"/usr/lib/python3.4/socket.py\", line 374, in readinto\n      return self._sock.recv_into(b)",
      "tree": {
        "sha": "efc46eec11b5ff1dd781d341009232b819ef46b0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/efc46eec11b5ff1dd781d341009232b819ef46b0"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8463aaa63c5ac76421c4d2754ea9e17a31584c93",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8463aaa63c5ac76421c4d2754ea9e17a31584c93",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/8463aaa63c5ac76421c4d2754ea9e17a31584c93",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8463aaa63c5ac76421c4d2754ea9e17a31584c93/comments",
    "author": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "273bde37d867d1f6ab67e22a65097b7adfc4831a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/273bde37d867d1f6ab67e22a65097b7adfc4831a",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/273bde37d867d1f6ab67e22a65097b7adfc4831a"
      }
    ],
    "stats": {
      "total": 10,
      "additions": 7,
      "deletions": 3
    },
    "files": [
      {
        "sha": "c0c2b3a6ef474361858815e7b73940645ba5e822",
        "filename": "qa/rpc-tests/test_framework/util.py",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8463aaa63c5ac76421c4d2754ea9e17a31584c93/qa/rpc-tests/test_framework/util.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8463aaa63c5ac76421c4d2754ea9e17a31584c93/qa/rpc-tests/test_framework/util.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/qa/rpc-tests/test_framework/util.py?ref=8463aaa63c5ac76421c4d2754ea9e17a31584c93",
        "patch": "@@ -341,7 +341,7 @@ def start_node(i, dirname, extra_args=None, rpchost=None, timewait=None, binary=\n \n     return proxy\n \n-def start_nodes(num_nodes, dirname, extra_args=None, rpchost=None, binary=None):\n+def start_nodes(num_nodes, dirname, extra_args=None, rpchost=None, timewait=None, binary=None):\n     \"\"\"\n     Start multiple bitcoinds, return RPC connections to them\n     \"\"\"\n@@ -350,7 +350,7 @@ def start_nodes(num_nodes, dirname, extra_args=None, rpchost=None, binary=None):\n     rpcs = []\n     try:\n         for i in range(num_nodes):\n-            rpcs.append(start_node(i, dirname, extra_args[i], rpchost, binary=binary[i]))\n+            rpcs.append(start_node(i, dirname, extra_args[i], rpchost, timewait=timewait, binary=binary[i]))\n     except: # If one node failed to start, stop the others\n         stop_nodes(rpcs)\n         raise"
      },
      {
        "sha": "c6dc2e3d107492075d9b1e6851bc022b369555de",
        "filename": "qa/rpc-tests/wallet-dump.py",
        "status": "modified",
        "additions": 5,
        "deletions": 1,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/8463aaa63c5ac76421c4d2754ea9e17a31584c93/qa/rpc-tests/wallet-dump.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/8463aaa63c5ac76421c4d2754ea9e17a31584c93/qa/rpc-tests/wallet-dump.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/qa/rpc-tests/wallet-dump.py?ref=8463aaa63c5ac76421c4d2754ea9e17a31584c93",
        "patch": "@@ -61,7 +61,11 @@ def __init__(self):\n         self.extra_args = [[\"-keypool=90\"]]\n \n     def setup_network(self, split=False):\n-        self.nodes = start_nodes(self.num_nodes, self.options.tmpdir, self.extra_args)\n+        # Use 1 minute timeout because the initial getnewaddress RPC can take\n+        # longer than the default 30 seconds due to an expensive\n+        # CWallet::TopUpKeyPool call, and the encryptwallet RPC made later in\n+        # the test often takes even longer.\n+        self.nodes = start_nodes(self.num_nodes, self.options.tmpdir, self.extra_args, timewait=60)\n \n     def run_test (self):\n         tmpdir = self.options.tmpdir"
      }
    ]
  },
  {
    "sha": "e89614b6abf28d7fe201c3db44a0df6e4db6de03",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzplODk2MTRiNmFiZjI4ZDdmZTIwMWMzZGI0NGEwZGY2ZTRkYjZkZTAz",
    "commit": {
      "author": {
        "name": "Russell Yanofsky",
        "email": "russ@yanofsky.org",
        "date": "2016-11-02T19:08:54Z"
      },
      "committer": {
        "name": "Russell Yanofsky",
        "email": "russ@yanofsky.org",
        "date": "2016-11-07T17:04:19Z"
      },
      "message": "[qa] Add more helpful RPC timeout message\n\nReplace previous timeout('timed out',) exception with more detailed error.",
      "tree": {
        "sha": "e4b06ca2e3700656c2a677a978857d9153bf18f7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e4b06ca2e3700656c2a677a978857d9153bf18f7"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e89614b6abf28d7fe201c3db44a0df6e4db6de03",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e89614b6abf28d7fe201c3db44a0df6e4db6de03",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/e89614b6abf28d7fe201c3db44a0df6e4db6de03",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/e89614b6abf28d7fe201c3db44a0df6e4db6de03/comments",
    "author": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url": "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "8463aaa63c5ac76421c4d2754ea9e17a31584c93",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8463aaa63c5ac76421c4d2754ea9e17a31584c93",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/8463aaa63c5ac76421c4d2754ea9e17a31584c93"
      }
    ],
    "stats": {
      "total": 11,
      "additions": 10,
      "deletions": 1
    },
    "files": [
      {
        "sha": "dd183815da502c8c2ec4670c361e33897d22dd29",
        "filename": "qa/rpc-tests/test_framework/authproxy.py",
        "status": "modified",
        "additions": 10,
        "deletions": 1,
        "changes": 11,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/e89614b6abf28d7fe201c3db44a0df6e4db6de03/qa/rpc-tests/test_framework/authproxy.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/e89614b6abf28d7fe201c3db44a0df6e4db6de03/qa/rpc-tests/test_framework/authproxy.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/qa/rpc-tests/test_framework/authproxy.py?ref=e89614b6abf28d7fe201c3db44a0df6e4db6de03",
        "patch": "@@ -42,6 +42,7 @@\n import decimal\n import json\n import logging\n+import socket\n try:\n     import urllib.parse as urlparse\n except ImportError:\n@@ -161,7 +162,15 @@ def _batch(self, rpc_call_list):\n         return self._request('POST', self.__url.path, postdata.encode('utf-8'))\n \n     def _get_response(self):\n-        http_response = self.__conn.getresponse()\n+        try:\n+            http_response = self.__conn.getresponse()\n+        except socket.timeout as e:\n+            raise JSONRPCException({\n+                'code': -344,\n+                'message': '%r RPC took longer than %f seconds. Consider '\n+                           'using larger timeout for calls that take '\n+                           'longer to return.' % (self._service_name,\n+                                                  self.__conn.timeout)})\n         if http_response is None:\n             raise JSONRPCException({\n                 'code': -342, 'message': 'missing HTTP response from server'})"
      }
    ]
  }
]