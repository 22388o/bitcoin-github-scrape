gmaxwell,2012-10-01T19:39:23Z,"Eh. The functionality is desirable, but the ability to filesystem split the wallet and data dir is a surefire way to end up with a corrupted wallet.  This is subtle and I suspect hard to warn people out of doing, esp since it would mostly work. (until it eats your keys for lunch).\n",https://github.com/bitcoin/bitcoin/pull/1889#issuecomment-9046636,9046636,
BitcoinPullTester,2012-10-02T01:58:42Z,"Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/38ff7ee0239d1609a9bafd764f53fb45bbf3ac33 for binaries and test log.\n",https://github.com/bitcoin/bitcoin/pull/1889#issuecomment-9056625,9056625,
sipa,2012-10-07T13:17:44Z,"I agree with @gmaxwell. Can we add a check so only wallet names without / (or other filesystem separation character) are accepted? Maybe even limit to just alphanumeric names, and add "".dat"" implicitly?\n",https://github.com/bitcoin/bitcoin/pull/1889#issuecomment-9207904,9207904,
gmaxwell,2012-10-21T00:27:34Z,"Now that ultraprune has taken everything else out of the BDB environment, we can now have pluggable wallet locations, but it needs to move the _whole_ db environment too, not just the wallet.dat location.\n",https://github.com/bitcoin/bitcoin/pull/1889#issuecomment-9638381,9638381,
tcatm,2012-10-21T00:34:51Z,This patch was never meant to be used to access wallets outside $DATADIR. I've written it to use multiple wallets within the same datadir.\n,https://github.com/bitcoin/bitcoin/pull/1889#issuecomment-9638427,9638427,
sipa,2012-10-21T00:43:05Z,"Maybe not, but then it should either enforce that requirement. Alternatively, it could allow accessing a wallet file anyway, as long as the BDB dir (not the entire datadir) is moved along.\n",https://github.com/bitcoin/bitcoin/pull/1889#issuecomment-9638466,9638466,
gmaxwell,2012-10-21T00:53:17Z,"Without one of enforcement or moving the datadir it's a serious footgun that will result in permanent coin loss.  I like moving the datadir, since it's viable nowâ€” and it would let you have your wallet file on a encrypted/removable volume while the chain resides on some less secure medium (or even a ramdisk).\n",https://github.com/bitcoin/bitcoin/pull/1889#issuecomment-9638527,9638527,
BitcoinPullTester,2012-10-31T15:14:24Z,"Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/9ccd2da8ad5a1c38db4d3bb73a8638fa6457533a for binaries and test log.\n",https://github.com/bitcoin/bitcoin/pull/1889#issuecomment-9948345,9948345,
luke-jr,2012-11-13T05:56:35Z,@tcatm Any update and/or rebase?\n,https://github.com/bitcoin/bitcoin/pull/1889#issuecomment-10316604,10316604,
Diapolo,2013-01-01T02:07:12Z,"I guess in the light of real multiple wallet support coming along, this is not needed anymore?\n",https://github.com/bitcoin/bitcoin/pull/1889#issuecomment-11786817,11786817,
laanwj,2013-05-19T19:12:16Z,"Agree with the other posts. This is very useful functionality, but this should either \n\n1) Enforce the wallet.dat to be inside the data directory or\n2) Open the database environment in the alternative path if a wallet in another path is specified. As the wallet database is the only thing that uses berkelydb now, there is no reason not to.\n\nPersonally I like (2) most. \n",https://github.com/bitcoin/bitcoin/pull/1889#issuecomment-18122993,18122993,
laanwj,2013-06-04T05:19:19Z,"As for (2) we really need a way to set another wallet directory (ie, walletdir=...). There is no reason anymore why the wallet directory and block chain directory would need to be the same.\n",https://github.com/bitcoin/bitcoin/pull/1889#issuecomment-18889691,18889691,
luke-jr,2013-06-04T05:32:22Z,"Having been using this for a few months, I have to say I prefer (1).\n",https://github.com/bitcoin/bitcoin/pull/1889#issuecomment-18890033,18890033,
laanwj,2013-06-04T05:32:51Z,Why? Are you against setting the wallet directory?\n,https://github.com/bitcoin/bitcoin/pull/1889#issuecomment-18890045,18890045,
luke-jr,2013-06-04T05:34:20Z,"It's easier and less disk-bloating to just use simple files, IMO.\n",https://github.com/bitcoin/bitcoin/pull/1889#issuecomment-18890079,18890079,
laanwj,2013-06-04T05:36:10Z,"How do you mean ""just use simple files""? I don't understand you, we aren't changing the wallet format here. BDB will still create a database environment, and it needs to be on the same disk as the .dat file (for reasons gmaxwell mentions). So if the user wants to store the wallet on say, a removable disk, he needs the database environment there as well.\n\nOption 1 would make this impossible (as t",https://github.com/bitcoin/bitcoin/pull/1889#issuecomment-18890137,18890137,
luke-jr,2013-06-04T05:42:54Z,"Different use cases / user preferences, I guess. Maybe if there's a ""/"" on the end, interpret it as a directory, and if there isn't, make sure there's no ""/""s at all?\n",https://github.com/bitcoin/bitcoin/pull/1889#issuecomment-18890312,18890312,
laanwj,2013-06-04T05:44:48Z,"Or maybe two separate options, instead of trying to parse it from one value:\n\n```\n-walletdir=/dir/etc/   directory of wallet and db env (defaults to datadir)\n-wallet=bla.dat         name of wallet (defaults to wallet.dat). Within walletdir, cannot contain '/'.\n```\n",https://github.com/bitcoin/bitcoin/pull/1889#issuecomment-18890365,18890365,
luke-jr,2013-06-04T05:57:02Z,"Too much shed painting; let's just merge it as long as the main concern is solved :)\n\n(prefer to append the file extension in code, to ease changing wallet formats later)\n",https://github.com/bitcoin/bitcoin/pull/1889#issuecomment-18890664,18890664,
sipa,2013-06-04T07:21:59Z,"I don't see the problem. Just allow specifying any filename, and use database/ in the directory that file is in as a database dir? If filename doesn't contain any /, use the datadir.\n",https://github.com/bitcoin/bitcoin/pull/1889#issuecomment-18893002,18893002,
laanwj,2013-06-04T13:43:55Z,Agree with @sipa\n,https://github.com/bitcoin/bitcoin/pull/1889#issuecomment-18909640,18909640,
tcatm,2013-06-30T10:57:37Z,I've updated this request:\n1. strWalletFile is now used for salvage/recover (previously those features were still using wallet.dat)\n2. The supplied wallet file can not contain paths anymore so only plain filenames are allowed now. Even relative paths inside the data directory will be rejected.\n,https://github.com/bitcoin/bitcoin/pull/1889#issuecomment-20245468,20245468,
sipa,2013-06-30T15:50:56Z,"ACK on the semantics, but can you move strWalletFile from main.cpp to init.cpp? (the validation logic has no business knowing where the wallet file is located).\n",https://github.com/bitcoin/bitcoin/pull/1889#issuecomment-20249269,20249269,
tcatm,2013-07-03T19:01:38Z,Any objections or ACKs?\n,https://github.com/bitcoin/bitcoin/pull/1889#issuecomment-20437874,20437874,
sipa,2013-07-03T19:11:23Z,"ACK, if you squeeze the commits.\n",https://github.com/bitcoin/bitcoin/pull/1889#issuecomment-20438486,20438486,
sipa,2013-07-04T15:21:13Z,ACK\n,https://github.com/bitcoin/bitcoin/pull/1889#issuecomment-20482456,20482456,
BitcoinPullTester,2013-07-20T11:46:23Z,"Automatic sanity-testing: PASSED, see http://jenkins.bluematt.me/pull-tester/674cb304b376358fdcb17b4a0b16ae7b00cdbedc for binaries and test log.\nThis test script verifies pulls every time they are updated. It, however, dies sometimes and fails to test properly.  If you are waiting on a test, please check timestamps to verify that the test.log is moving at http://jenkins.bluematt.me/pull-tester/cu",https://github.com/bitcoin/bitcoin/pull/1889#issuecomment-21292391,21292391,
Diapolo,2012-09-30T10:13:16Z,"I would feel better, if this would be a std::string.\n",https://github.com/bitcoin/bitcoin/pull/1889#discussion_r1724380,1724380,src/main.cpp
laanwj,2012-09-30T10:41:44Z,"Me too, that would make it an owning reference to the underlying data. The memory referenced by .c_str() is deallocated when the underlying std::string goes out of scope, so after the Init() function. Keeping a global reference to it results in use-after-free problems... \n",https://github.com/bitcoin/bitcoin/pull/1889#discussion_r1724405,1724405,src/main.cpp
