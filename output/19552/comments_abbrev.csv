MarcoFalke,2020-07-19 07:37:46,"There are no blocks or transactions to sync, so sync_all should be a no-op.\n\nI presume the issue is that the send messages loop for the peer hasn't been called (yet). This could be fixed by forcing a ping (with the RPC ping) and then waiting for it to propagate, I think.",https://github.com/bitcoin/bitcoin/pull/19552#discussion_r456873834,456873834,test/functional/p2p_ibd_txrelay.py
jonatack,2020-07-19 09:08:07,"Good point, thanks! Trying a simple solution with 14bb388.",https://github.com/bitcoin/bitcoin/pull/19552#discussion_r456883099,456883099,test/functional/p2p_ibd_txrelay.py
jonatack,2020-07-19 09:23:24,"Could also replace the above 3 lines with the following, but it wouldn't be testing exactly the same thing.\n```python\nwait_until(lambda: (conn_info['minfeefilter'] == MAX_FEE_FILTER for conn_info in node.getpeerinfo()))\n```\n",https://github.com/bitcoin/bitcoin/pull/19552#discussion_r456884509,456884509,test/functional/p2p_ibd_txrelay.py
MarcoFalke,2020-07-19 10:37:34,unrelated style nit: If you want you can cherry-pick the change to the test framework from https://github.com/bitcoin/bitcoin/pull/19134/files#diff-64721c5ee64d44f7114d6d0d2226db4d and then call self.wait_until below instead of the import.,https://github.com/bitcoin/bitcoin/pull/19552#discussion_r456891752,456891752,test/functional/p2p_ibd_txrelay.py
MarcoFalke,2020-07-19 10:39:10,"A tuple with more than one element always evaluates to true, so your exact suggestion wouldn't work, but Concept ACK replacing this with just `wait_until`",https://github.com/bitcoin/bitcoin/pull/19552#discussion_r456891890,456891890,test/functional/p2p_ibd_txrelay.py
jonatack,2020-07-19 11:25:32,nice; done,https://github.com/bitcoin/bitcoin/pull/19552#discussion_r456896463,456896463,test/functional/p2p_ibd_txrelay.py
jonatack,2020-07-19 11:35:05,Thank you -- your comment made me realise that there is Python `any(iterable)` like the Ruby [Enumerator#all?](https://ruby-doc.org/core-2.7.1/Enumerable.html#method-i-all-3F) I was familiar with. Mimicked the way it is used in `test/functional/test_framework/util.py:443-444` and applied to both assertions for symmetry and safety.,https://github.com/bitcoin/bitcoin/pull/19552#discussion_r456897387,456897387,test/functional/p2p_ibd_txrelay.py
jonatack,2020-07-19 11:40:06,That also allowed no longer importing anything from `test_framework.util` :+1: ,https://github.com/bitcoin/bitcoin/pull/19552#discussion_r456897882,456897882,test/functional/p2p_ibd_txrelay.py
