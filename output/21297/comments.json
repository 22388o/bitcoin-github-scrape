[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/785719524",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21297#issuecomment-785719524",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21297",
    "id": 785719524,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4NTcxOTUyNA==",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-25T08:36:04Z",
    "updated_at": "2021-02-25T19:06:41Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/785719524/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/785898228",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21297#issuecomment-785898228",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21297",
    "id": 785898228,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4NTg5ODIyOA==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-25T13:33:46Z",
    "updated_at": "2021-02-25T13:33:46Z",
    "author_association": "MEMBER",
    "body": "Happy to ACK after a rebase, if still relevant",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/785898228/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/785931283",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21297#issuecomment-785931283",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21297",
    "id": 785931283,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4NTkzMTI4Mw==",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?u=3f68150a5f30acd541d1ed279376cd20b78046b1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-25T14:23:23Z",
    "updated_at": "2021-02-25T14:23:23Z",
    "author_association": "MEMBER",
    "body": "Thanks -- rebased, updated, and now removes an unneeded node to use one instead of two.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/785931283/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/786058434",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21297#issuecomment-786058434",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21297",
    "id": 786058434,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4NjA1ODQzNA==",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?u=0691974eedcc2ab5366cc1080fb1c030e87244c2&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-25T17:09:15Z",
    "updated_at": "2021-02-25T17:09:15Z",
    "author_association": "MEMBER",
    "body": "ACK 88c4b9b761964d0b3011126796f272cfca2a9fa2",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/786058434/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/786058770",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21297#issuecomment-786058770",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21297",
    "id": 786058770,
    "node_id": "MDEyOklzc3VlQ29tbWVudDc4NjA1ODc3MA==",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?u=3f68150a5f30acd541d1ed279376cd20b78046b1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-02-25T17:09:44Z",
    "updated_at": "2021-02-25T17:09:44Z",
    "author_association": "MEMBER",
    "body": "Updated per feedback to `git diff 3c3e061 88c4b9b`  (thanks!)\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/786058770/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/582587912",
    "pull_request_review_id": 598247867,
    "id": 582587912,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MjU4NzkxMg==",
    "diff_hunk": "@@ -18,32 +18,41 @@ def set_test_params(self):\n     def run_test(self):\n         # test basic pruning compatibility & filter access of pruned blocks\n         self.log.info(\"check if we can access a blockfilter when pruning is enabled but no blocks are actually pruned\")\n-        assert len(self.nodes[1].getblockfilter(self.nodes[1].getbestblockhash())['filter']) > 0\n+        self.sync_all()",
    "path": "test/functional/feature_blockfilterindex_prune.py",
    "position": null,
    "original_position": 15,
    "commit_id": "88c4b9b761964d0b3011126796f272cfca2a9fa2",
    "original_commit_id": "764ac927d16802223219c91eb4aa9fc9f8dd3f79",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "sync_all syncs the mempool and blocks, but not the blockfilter. You'll need `self.wait_until(lambda: self.nodes[1].getindexinfo() == {'basic block filter index': {'synced': True, 'best_block_height': 200}})`. Either in this line or by modifying sync_all.",
    "created_at": "2021-02-25T07:01:17Z",
    "updated_at": "2021-02-25T17:07:53Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21297#discussion_r582587912",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21297",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/582587912"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21297#discussion_r582587912"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21297"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/582587912/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 21,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/582712291",
    "pull_request_review_id": 598406271,
    "id": 582712291,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MjcxMjI5MQ==",
    "diff_hunk": "@@ -18,32 +18,41 @@ def set_test_params(self):\n     def run_test(self):\n         # test basic pruning compatibility & filter access of pruned blocks\n         self.log.info(\"check if we can access a blockfilter when pruning is enabled but no blocks are actually pruned\")\n-        assert len(self.nodes[1].getblockfilter(self.nodes[1].getbestblockhash())['filter']) > 0\n+        self.sync_all()",
    "path": "test/functional/feature_blockfilterindex_prune.py",
    "position": null,
    "original_position": 15,
    "commit_id": "88c4b9b761964d0b3011126796f272cfca2a9fa2",
    "original_commit_id": "764ac927d16802223219c91eb4aa9fc9f8dd3f79",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Thanks! I hadn't seen #21252 that fixes the issue.",
    "created_at": "2021-02-25T10:19:05Z",
    "updated_at": "2021-02-25T17:07:53Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21297#discussion_r582712291",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21297",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/582712291"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21297#discussion_r582712291"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21297"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/582712291/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 21,
    "side": "RIGHT",
    "in_reply_to_id": 582587912
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/582964239",
    "pull_request_review_id": 598739805,
    "id": 582964239,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4Mjk2NDIzOQ==",
    "diff_hunk": "@@ -13,43 +13,53 @@\n \n class FeatureBlockfilterindexPruneTest(BitcoinTestFramework):\n     def set_test_params(self):\n-        self.num_nodes = 2\n-        self.extra_args = [[\"-fastprune\", \"-prune=1\"], [\"-fastprune\", \"-prune=1\", \"-blockfilterindex=1\"]]\n+        self.num_nodes = 1\n+        self.extra_args = [[\"-fastprune\", \"-prune=1\", \"-blockfilterindex=1\"]]\n+\n+    def sync_index(self, height):\n+        expected = {'basic block filter index': {'synced': True, 'best_block_height': height}}\n+        self.wait_until(lambda: self.nodes[0].getindexinfo() == expected)\n \n     def run_test(self):\n         self.log.info(\"check if we can access a blockfilter when pruning is enabled but no blocks are actually pruned\")\n-        self.wait_until(lambda: self.nodes[1].getindexinfo() == {'basic block filter index': {'synced': True, 'best_block_height': 200}})\n-        assert len(self.nodes[1].getblockfilter(self.nodes[1].getbestblockhash())['filter']) > 0\n+        self.sync_index(height=200)\n+        assert_greater_than(len(self.nodes[0].getblockfilter(self.nodes[0].getbestblockhash())['filter']), 0)\n         # Mine two batches of blocks to avoid hitting NODE_NETWORK_LIMITED_MIN_BLOCKS disconnection\n-        self.nodes[1].generate(250)\n+        self.nodes[0].generate(250)\n         self.sync_all()\n-        self.nodes[1].generate(250)\n+        self.nodes[0].generate(250)\n         self.sync_all()\n-        self.wait_until(lambda: self.nodes[1].getindexinfo() == {'basic block filter index': {'synced': True, 'best_block_height': 700}})\n+        self.sync_index(height=700)\n+\n         self.log.info(\"prune some blocks\")\n-        pruneheight = self.nodes[1].pruneblockchain(400)\n+        pruneheight = self.nodes[0].pruneblockchain(400)\n         assert_equal(pruneheight, 250)\n+\n         self.log.info(\"check if we can access the tips blockfilter when we have pruned some blocks\")\n-        assert len(self.nodes[1].getblockfilter(self.nodes[1].getbestblockhash())['filter']) > 0\n+        assert_greater_than(len(self.nodes[0].getblockfilter(self.nodes[0].getbestblockhash())['filter']), 0)\n+\n         self.log.info(\"check if we can access the blockfilter of a pruned block\")\n-        assert len(self.nodes[1].getblockfilter(self.nodes[1].getblockhash(2))['filter']) > 0\n+        assert_greater_than(len(self.nodes[0].getblockfilter(self.nodes[0].getblockhash(2))['filter']), 0)\n+\n         self.log.info(\"start node without blockfilterindex\")\n-        self.stop_node(1)\n-        self.start_node(1, extra_args=self.extra_args[0])\n+        self.stop_node(0)\n+        self.start_node(0, extra_args=[\"-fastprune\", \"-prune=1\"])",
    "path": "test/functional/feature_blockfilterindex_prune.py",
    "position": null,
    "original_position": 46,
    "commit_id": "88c4b9b761964d0b3011126796f272cfca2a9fa2",
    "original_commit_id": "3c3e0617cb7a6f94dddc6e7143c5fdb75263c5eb",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "```suggestion\r\n        self.restart_node(0, extra_args=[\"-fastprune\", \"-prune=1\"])\r\n```\r\n\r\nmight be possible to write shorter",
    "created_at": "2021-02-25T16:11:06Z",
    "updated_at": "2021-02-25T17:07:53Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21297#discussion_r582964239",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21297",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/582964239"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21297#discussion_r582964239"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21297"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/582964239/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": 45,
    "start_side": "RIGHT",
    "line": null,
    "original_line": 46,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/583010565",
    "pull_request_review_id": 598801387,
    "id": 583010565,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MzAxMDU2NQ==",
    "diff_hunk": "@@ -13,43 +13,53 @@\n \n class FeatureBlockfilterindexPruneTest(BitcoinTestFramework):\n     def set_test_params(self):\n-        self.num_nodes = 2\n-        self.extra_args = [[\"-fastprune\", \"-prune=1\"], [\"-fastprune\", \"-prune=1\", \"-blockfilterindex=1\"]]\n+        self.num_nodes = 1\n+        self.extra_args = [[\"-fastprune\", \"-prune=1\", \"-blockfilterindex=1\"]]\n+\n+    def sync_index(self, height):\n+        expected = {'basic block filter index': {'synced': True, 'best_block_height': height}}\n+        self.wait_until(lambda: self.nodes[0].getindexinfo() == expected)\n \n     def run_test(self):\n         self.log.info(\"check if we can access a blockfilter when pruning is enabled but no blocks are actually pruned\")\n-        self.wait_until(lambda: self.nodes[1].getindexinfo() == {'basic block filter index': {'synced': True, 'best_block_height': 200}})\n-        assert len(self.nodes[1].getblockfilter(self.nodes[1].getbestblockhash())['filter']) > 0\n+        self.sync_index(height=200)\n+        assert_greater_than(len(self.nodes[0].getblockfilter(self.nodes[0].getbestblockhash())['filter']), 0)\n         # Mine two batches of blocks to avoid hitting NODE_NETWORK_LIMITED_MIN_BLOCKS disconnection\n-        self.nodes[1].generate(250)\n+        self.nodes[0].generate(250)\n         self.sync_all()\n-        self.nodes[1].generate(250)\n+        self.nodes[0].generate(250)\n         self.sync_all()\n-        self.wait_until(lambda: self.nodes[1].getindexinfo() == {'basic block filter index': {'synced': True, 'best_block_height': 700}})\n+        self.sync_index(height=700)\n+\n         self.log.info(\"prune some blocks\")\n-        pruneheight = self.nodes[1].pruneblockchain(400)\n+        pruneheight = self.nodes[0].pruneblockchain(400)\n         assert_equal(pruneheight, 250)\n+\n         self.log.info(\"check if we can access the tips blockfilter when we have pruned some blocks\")\n-        assert len(self.nodes[1].getblockfilter(self.nodes[1].getbestblockhash())['filter']) > 0\n+        assert_greater_than(len(self.nodes[0].getblockfilter(self.nodes[0].getbestblockhash())['filter']), 0)\n+\n         self.log.info(\"check if we can access the blockfilter of a pruned block\")\n-        assert len(self.nodes[1].getblockfilter(self.nodes[1].getblockhash(2))['filter']) > 0\n+        assert_greater_than(len(self.nodes[0].getblockfilter(self.nodes[0].getblockhash(2))['filter']), 0)\n+\n         self.log.info(\"start node without blockfilterindex\")\n-        self.stop_node(1)\n-        self.start_node(1, extra_args=self.extra_args[0])\n+        self.stop_node(0)\n+        self.start_node(0, extra_args=[\"-fastprune\", \"-prune=1\"])",
    "path": "test/functional/feature_blockfilterindex_prune.py",
    "position": null,
    "original_position": 46,
    "commit_id": "88c4b9b761964d0b3011126796f272cfca2a9fa2",
    "original_commit_id": "3c3e0617cb7a6f94dddc6e7143c5fdb75263c5eb",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonatack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "nice! done",
    "created_at": "2021-02-25T17:08:13Z",
    "updated_at": "2021-02-25T17:08:13Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/21297#discussion_r583010565",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21297",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/583010565"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/21297#discussion_r583010565"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21297"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/583010565/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": 45,
    "start_side": "RIGHT",
    "line": null,
    "original_line": 46,
    "side": "RIGHT",
    "in_reply_to_id": 582964239
  }
]