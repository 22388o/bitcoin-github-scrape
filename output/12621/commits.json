[
  {
    "sha": "1ee72a819fb16a8aad217da7c6ca01ede4bd9ce1",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoxZWU3MmE4MTlmYjE2YThhYWQyMTdkYTdjNmNhMDFlZGU0YmQ5Y2Ux",
    "commit": {
      "author": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2018-03-06T20:31:11Z"
      },
      "committer": {
        "name": "Jo\u00e3o Barbosa",
        "email": "joao.paulo.barbosa@gmail.com",
        "date": "2018-03-11T22:21:51Z"
      },
      "message": "qt: Avoid querying unnecessary model data when filtering transactions",
      "tree": {
        "sha": "ad7eec4469ac5e3aa089529240dc592adf843fcd",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ad7eec4469ac5e3aa089529240dc592adf843fcd"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1ee72a819fb16a8aad217da7c6ca01ede4bd9ce1",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1ee72a819fb16a8aad217da7c6ca01ede4bd9ce1",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/1ee72a819fb16a8aad217da7c6ca01ede4bd9ce1",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/1ee72a819fb16a8aad217da7c6ca01ede4bd9ce1/comments",
    "author": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "promag",
      "id": 3534524,
      "node_id": "MDQ6VXNlcjM1MzQ1MjQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3534524?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/promag",
      "html_url": "https://github.com/promag",
      "followers_url": "https://api.github.com/users/promag/followers",
      "following_url": "https://api.github.com/users/promag/following{/other_user}",
      "gists_url": "https://api.github.com/users/promag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/promag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/promag/subscriptions",
      "organizations_url": "https://api.github.com/users/promag/orgs",
      "repos_url": "https://api.github.com/users/promag/repos",
      "events_url": "https://api.github.com/users/promag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/promag/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "d8d9162f5bad39b2720dd2b2da237c6159e4755f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/d8d9162f5bad39b2720dd2b2da237c6159e4755f",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/d8d9162f5bad39b2720dd2b2da237c6159e4755f"
      }
    ],
    "stats": {
      "total": 28,
      "additions": 16,
      "deletions": 12
    },
    "files": [
      {
        "sha": "6301af7553cbc6841237aa100d1443b0101720a5",
        "filename": "src/qt/transactionfilterproxy.cpp",
        "status": "modified",
        "additions": 16,
        "deletions": 12,
        "changes": 28,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/1ee72a819fb16a8aad217da7c6ca01ede4bd9ce1/src/qt/transactionfilterproxy.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/1ee72a819fb16a8aad217da7c6ca01ede4bd9ce1/src/qt/transactionfilterproxy.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/transactionfilterproxy.cpp?ref=1ee72a819fb16a8aad217da7c6ca01ede4bd9ce1",
        "patch": "@@ -31,31 +31,35 @@ bool TransactionFilterProxy::filterAcceptsRow(int sourceRow, const QModelIndex &\n {\n     QModelIndex index = sourceModel()->index(sourceRow, 0, sourceParent);\n \n-    int type = index.data(TransactionTableModel::TypeRole).toInt();\n-    QDateTime datetime = index.data(TransactionTableModel::DateRole).toDateTime();\n-    bool involvesWatchAddress = index.data(TransactionTableModel::WatchonlyRole).toBool();\n-    QString address = index.data(TransactionTableModel::AddressRole).toString();\n-    QString label = index.data(TransactionTableModel::LabelRole).toString();\n-    QString txid = index.data(TransactionTableModel::TxHashRole).toString();\n-    qint64 amount = llabs(index.data(TransactionTableModel::AmountRole).toLongLong());\n     int status = index.data(TransactionTableModel::StatusRole).toInt();\n-\n-    if(!showInactive && status == TransactionStatus::Conflicted)\n+    if (!showInactive && status == TransactionStatus::Conflicted)\n         return false;\n-    if(!(TYPE(type) & typeFilter))\n+\n+    int type = index.data(TransactionTableModel::TypeRole).toInt();\n+    if (!(TYPE(type) & typeFilter))\n         return false;\n+\n+    bool involvesWatchAddress = index.data(TransactionTableModel::WatchonlyRole).toBool();\n     if (involvesWatchAddress && watchOnlyFilter == WatchOnlyFilter_No)\n         return false;\n     if (!involvesWatchAddress && watchOnlyFilter == WatchOnlyFilter_Yes)\n         return false;\n-    if(datetime < dateFrom || datetime > dateTo)\n+\n+    QDateTime datetime = index.data(TransactionTableModel::DateRole).toDateTime();\n+    if (datetime < dateFrom || datetime > dateTo)\n         return false;\n+\n+    QString address = index.data(TransactionTableModel::AddressRole).toString();\n+    QString label = index.data(TransactionTableModel::LabelRole).toString();\n+    QString txid = index.data(TransactionTableModel::TxHashRole).toString();\n     if (!address.contains(m_search_string, Qt::CaseInsensitive) &&\n         !  label.contains(m_search_string, Qt::CaseInsensitive) &&\n         !   txid.contains(m_search_string, Qt::CaseInsensitive)) {\n         return false;\n     }\n-    if(amount < minAmount)\n+\n+    qint64 amount = llabs(index.data(TransactionTableModel::AmountRole).toLongLong());\n+    if (amount < minAmount)\n         return false;\n \n     return true;"
      }
    ]
  }
]