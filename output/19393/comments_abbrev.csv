hebasto,2020-06-28 15:34:43,"@jonatack \n> Could say in the PR description what led you to see the need for this additional coverage.\n\nThe OP has been updated.\n\n> Testing debug log output is convenient but less robust; better to test for actual change, if possible.\n\nAgree. But we have neither RPC calls nor the public interface for the orphan transaction pool.\n",https://github.com/bitcoin/bitcoin/pull/19393#issuecomment-650781627,650781627,
hebasto,2020-06-28 17:15:57,"Updated 10f7f75502bdcc9045c0623386571e41103b69fe -> a95a6d99b31798a8adb107930857bbe5c6e083df ([pr19393.01](https://github.com/hebasto/bitcoin/commits/pr19393.01) -> [pr19393.02](https://github.com/hebasto/bitcoin/commits/pr19393.02), [diff](https://github.com/hebasto/bitcoin/compare/pr19393.01..pr19393.02)):\n\n- addressed @jonatack's comments",https://github.com/bitcoin/bitcoin/pull/19393#issuecomment-650795757,650795757,
hebasto,2020-06-28 18:16:48,"Updated a95a6d99b31798a8adb107930857bbe5c6e083df -> 3a310fbf1733e2ddaf1e6707251c409b287838de ([pr19393.02](https://github.com/hebasto/bitcoin/commits/pr19393.02) -> [pr19393.03](https://github.com/hebasto/bitcoin/commits/pr19393.03), [diff](https://github.com/hebasto/bitcoin/compare/pr19393.02..pr19393.03)):\n\n- addressed @jonatack's [comment](https://github.com/bitcoin/bitcoin/pull/19393#discu",https://github.com/bitcoin/bitcoin/pull/19393#issuecomment-650802681,650802681,
DrahtBot,2020-08-26 04:07:18,<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.,https://github.com/bitcoin/bitcoin/pull/19393#issuecomment-680554820,680554820,
hebasto,2020-09-29 10:10:55,Rebased 3a310fbf1733e2ddaf1e6707251c409b287838de -> 8e6c42797e0c5b30df34f464eb3b1cddc477da26 ([pr19393.03](https://github.com/hebasto/bitcoin/commits/pr19393.03) -> [pr19393.05](https://github.com/hebasto/bitcoin/commits/pr19393.05)) due to the conflict with #19804.,https://github.com/bitcoin/bitcoin/pull/19393#issuecomment-700605931,700605931,
NelsonGaldeman,2021-02-08 07:18:29,"Concept ACK\n\n- I support the increased coverage proposed by this PR\n- I agree with jonatack it would be better to test against the actual changes instead of debug log output. Although, I understand the data needed to do such change is not currently available.\n- I've compiled 6c61408 commit version and ran the p2p_invalid_tx tests against it, they all passed successfully.\n- The code and s",https://github.com/bitcoin/bitcoin/pull/19393#issuecomment-774929967,774929967,
practicalswift,2021-06-23 19:49:59,Concept ACK,https://github.com/bitcoin/bitcoin/pull/19393#issuecomment-867113081,867113081,
aitorjs,2021-08-25 18:12:20,"- I read all the test and I found sense to it, [ACK](https://github.com/bitcoin/bitcoin/pull/19393/commits/73278e3fda86f89ae70b8922f029e6b2d72d6bd6).\n- Compiles well in Ubuntu 20.04.\n- I liked the increased coverage proposed by this PR. :)",https://github.com/bitcoin/bitcoin/pull/19393#issuecomment-905762329,905762329,
MarcoFalke,2021-08-26 08:10:21,"Needs rebase.\n\nTests don't pass for me on the first commit.\n\n```\nAssertionError: [node 0] Expected messages ""['Erased 100 orphan tx from peer=24']"" does not partially match log:\n\n - 2021-08-26T08:09:23.355383Z [http] [httpserver.cpp:237] [http_request_cb] Received a POST request for / from 127.0.0.1:41922\n - 2021-08-26T08:09:23.355461Z [httpworker.3] [rpc/request.cpp:174] [parse] T",https://github.com/bitcoin/bitcoin/pull/19393#issuecomment-906191224,906191224,
MarcoFalke,2021-08-30 08:14:29,"> Tests don't pass for me on the first commit.\n\nAfter a rebase, that is.",https://github.com/bitcoin/bitcoin/pull/19393#issuecomment-908141083,908141083,
hebasto,2021-09-03 05:15:21,"> Needs rebase.\n> \n> Tests don't pass for me on the first commit.\n\n\nRebased 8e6c42797e0c5b30df34f464eb3b1cddc477da26 -> c0a5fceee9858afd24fe0bf655b7b30728e96e78 ([pr19393.05](https://github.com/hebasto/bitcoin/commits/pr19393.05) -> [pr19393.06](https://github.com/hebasto/bitcoin/commits/pr19393.06)).",https://github.com/bitcoin/bitcoin/pull/19393#issuecomment-912261406,912261406,
jonatack,2020-06-27 16:41:46,"02d0b4e nit\n```suggestion\n        tx_withhold.vout = [CTxOut(nValue=25 * COIN - 12000, scriptPubKey=SCRIPT_PUB_KEY_OP_TRUE)] * 2\n```",https://github.com/bitcoin/bitcoin/pull/19393#discussion_r446543855,446543855,test/functional/p2p_invalid_tx.py
jonatack,2020-06-28 12:49:12,"48b43e2a\n```suggestion\n        self.log.info('Test disconnecting a peer logs erasure of its orphan transactions')\n\n```",https://github.com/bitcoin/bitcoin/pull/19393#discussion_r446647030,446647030,test/functional/p2p_invalid_tx.py
jonatack,2020-06-28 13:03:22,What is being asserted in this subtest?,https://github.com/bitcoin/bitcoin/pull/19393#discussion_r446648461,446648461,test/functional/p2p_invalid_tx.py
jonatack,2020-06-28 13:07:23,This is checking the the txn is not accepted into the mempool; mind mentioning the expected outcome in the info log and why?,https://github.com/bitcoin/bitcoin/pull/19393#discussion_r446648908,446648908,test/functional/p2p_invalid_tx.py
jonatack,2020-06-28 13:10:10,"Idem, mind describing the expected outcome (accepted by the mempool) and why? This log seems more cryptic than reading the test code.",https://github.com/bitcoin/bitcoin/pull/19393#discussion_r446649211,446649211,test/functional/p2p_invalid_tx.py
jonatack,2020-06-28 13:18:07,This test seems dependent on the context/test order. Is it possible to make it order-independent and to test for the change itself? (Ignore if not.),https://github.com/bitcoin/bitcoin/pull/19393#discussion_r446650086,446650086,test/functional/p2p_invalid_tx.py
hebasto,2020-06-28 16:48:35,"hmm, why python linter did not catch it?",https://github.com/bitcoin/bitcoin/pull/19393#discussion_r446672467,446672467,test/functional/p2p_invalid_tx.py
hebasto,2020-06-28 16:58:28,"> What is being asserted in this subtest?\n\nIf a transaction from a new tip block is found in the orphan pool, it should be excluded from it.",https://github.com/bitcoin/bitcoin/pull/19393#discussion_r446673401,446673401,test/functional/p2p_invalid_tx.py
hebasto,2020-06-28 17:01:50,"This variant, i.e., the previous test state reuse, just suggests the minimum diff.",https://github.com/bitcoin/bitcoin/pull/19393#discussion_r446673717,446673717,test/functional/p2p_invalid_tx.py
hebasto,2020-06-28 17:17:11,[Updated](https://github.com/bitcoin/bitcoin/pull/19393#issuecomment-650795757).,https://github.com/bitcoin/bitcoin/pull/19393#discussion_r446675217,446675217,test/functional/p2p_invalid_tx.py
hebasto,2020-06-28 17:19:10,"I'd rather leave log message as is, as working logging implies working erase a tx from the orphan pool.",https://github.com/bitcoin/bitcoin/pull/19393#discussion_r446675398,446675398,test/functional/p2p_invalid_tx.py
hebasto,2020-06-28 17:28:26,"[Re-worded](https://github.com/bitcoin/bitcoin/pull/19393#issuecomment-650795757). It seems mention ""orphan"" transaction implies that it is not accepted into the mempool, no?",https://github.com/bitcoin/bitcoin/pull/19393#discussion_r446676394,446676394,test/functional/p2p_invalid_tx.py
hebasto,2020-06-28 17:29:14,[Re-worded](https://github.com/bitcoin/bitcoin/pull/19393#issuecomment-650795757).,https://github.com/bitcoin/bitcoin/pull/19393#discussion_r446676495,446676495,test/functional/p2p_invalid_tx.py
jonatack,2020-06-28 17:33:36,"Could add that info to the log message. Same with https://github.com/bitcoin/bitcoin/pull/19393#discussion_r446675398: state the action and expected result under test: ""Test (action) causes (result)"". Just my opinion, of course.",https://github.com/bitcoin/bitcoin/pull/19393#discussion_r446676922,446676922,test/functional/p2p_invalid_tx.py
hebasto,2020-06-28 18:17:31,[Updated](https://github.com/bitcoin/bitcoin/pull/19393#issuecomment-650802681).,https://github.com/bitcoin/bitcoin/pull/19393#discussion_r446681425,446681425,test/functional/p2p_invalid_tx.py
hebasto,2020-06-28 18:17:43,[Updated](https://github.com/bitcoin/bitcoin/pull/19393#issuecomment-650802681).,https://github.com/bitcoin/bitcoin/pull/19393#discussion_r446681453,446681453,test/functional/p2p_invalid_tx.py
ShubhamPalriwala,2021-07-27 20:43:18,nit: Having `append()` here would maintain consistency across the entire file,https://github.com/bitcoin/bitcoin/pull/19393#discussion_r677785800,677785800,test/functional/p2p_invalid_tx.py
ShubhamPalriwala,2021-07-27 20:43:32,nit: Having `append()` here would maintain consistency across the entire file,https://github.com/bitcoin/bitcoin/pull/19393#discussion_r677785974,677785974,test/functional/p2p_invalid_tx.py
ShubhamPalriwala,2021-07-27 20:43:43,nit: Having `append()` here would maintain consistency across the entire file,https://github.com/bitcoin/bitcoin/pull/19393#discussion_r677786086,677786086,test/functional/p2p_invalid_tx.py
hebasto,2021-09-03 05:17:30,See the current code in the master branch https://github.com/bitcoin/bitcoin/blob/dd097c42df7378c9d0114c04c82b3c38c18e13dc/test/functional/p2p_invalid_tx.py#L102,https://github.com/bitcoin/bitcoin/pull/19393#discussion_r701590231,701590231,test/functional/p2p_invalid_tx.py
hebasto,2021-09-03 05:17:38,See the current code in the master branch https://github.com/bitcoin/bitcoin/blob/dd097c42df7378c9d0114c04c82b3c38c18e13dc/test/functional/p2p_invalid_tx.py#L102,https://github.com/bitcoin/bitcoin/pull/19393#discussion_r701590284,701590284,test/functional/p2p_invalid_tx.py
hebasto,2021-09-03 05:17:44,See the current code in the master branch https://github.com/bitcoin/bitcoin/blob/dd097c42df7378c9d0114c04c82b3c38c18e13dc/test/functional/p2p_invalid_tx.py#L102,https://github.com/bitcoin/bitcoin/pull/19393#discussion_r701590327,701590327,test/functional/p2p_invalid_tx.py
