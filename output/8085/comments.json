[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/220883338",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#issuecomment-220883338",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8085",
    "id": 220883338,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMDg4MzMzOA==",
    "user": {
      "login": "NicolasDorier",
      "id": 3020646,
      "node_id": "MDQ6VXNlcjMwMjA2NDY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3020646?u=256d78207f88d303d61b62060a309657276cf6cb&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/NicolasDorier",
      "html_url": "https://github.com/NicolasDorier",
      "followers_url": "https://api.github.com/users/NicolasDorier/followers",
      "following_url": "https://api.github.com/users/NicolasDorier/following{/other_user}",
      "gists_url": "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
      "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
      "repos_url": "https://api.github.com/users/NicolasDorier/repos",
      "events_url": "https://api.github.com/users/NicolasDorier/events{/privacy}",
      "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-23T04:04:14Z",
    "updated_at": "2016-05-23T04:04:27Z",
    "author_association": "CONTRIBUTOR",
    "body": "nit typo: \"SocketSendData re**s**urns written size\"\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/220883338/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/221330283",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#issuecomment-221330283",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8085",
    "id": 221330283,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMTMzMDI4Mw==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-24T16:37:34Z",
    "updated_at": "2016-05-24T16:37:34Z",
    "author_association": "MEMBER",
    "body": "#8082 moves mapRelay from net to main. I think it indeed belongs with node processing code and not in base networking code.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/221330283/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/221333543",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#issuecomment-221333543",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8085",
    "id": 221333543,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMTMzMzU0Mw==",
    "user": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-24T16:48:43Z",
    "updated_at": "2016-05-24T16:48:43Z",
    "author_association": "MEMBER",
    "body": "@sipa Indeed, that's definitely the correct approach and the change here can be dropped.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/221333543/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/221754643",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#issuecomment-221754643",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8085",
    "id": 221754643,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMTc1NDY0Mw==",
    "user": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-26T01:30:23Z",
    "updated_at": "2016-05-26T01:30:23Z",
    "author_association": "MEMBER",
    "body": "@laanwj I pushed a bunch of new commits to address the review you gave me. The commit history doesn't really make sense now, though, as there's a good bit of reverting. Please let me know if you'd like me to squash down to a more logical history for easier review, or continue to pile up changes and squash at the end.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/221754643/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/222063946",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#issuecomment-222063946",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8085",
    "id": 222063946,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyMjA2Mzk0Ng==",
    "user": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-05-27T05:34:00Z",
    "updated_at": "2016-05-27T05:34:00Z",
    "author_association": "MEMBER",
    "body": "Rebased to master and squashed down changes so that the history makes sense again.\n\nThough there's still a good bit left to do, I think this is a good stopping point. I'll avoid making further changes here unless requested.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/222063946/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/224092243",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#issuecomment-224092243",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8085",
    "id": 224092243,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyNDA5MjI0Mw==",
    "user": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-06-06T21:21:00Z",
    "updated_at": "2016-06-06T21:21:00Z",
    "author_association": "MEMBER",
    "body": "Rebased to master after #8082, and dropped that commit here. Should be ready for review.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/224092243/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/225290282",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#issuecomment-225290282",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8085",
    "id": 225290282,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyNTI5MDI4Mg==",
    "user": {
      "login": "kazcw",
      "id": 1047859,
      "node_id": "MDQ6VXNlcjEwNDc4NTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1047859?u=4ae8c609c0f95dec74073fe5f047f8176585a26d&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kazcw",
      "html_url": "https://github.com/kazcw",
      "followers_url": "https://api.github.com/users/kazcw/followers",
      "following_url": "https://api.github.com/users/kazcw/following{/other_user}",
      "gists_url": "https://api.github.com/users/kazcw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kazcw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kazcw/subscriptions",
      "organizations_url": "https://api.github.com/users/kazcw/orgs",
      "repos_url": "https://api.github.com/users/kazcw/repos",
      "events_url": "https://api.github.com/users/kazcw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kazcw/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-06-10T20:42:10Z",
    "updated_at": "2016-06-10T21:39:12Z",
    "author_association": "CONTRIBUTOR",
    "body": "utACK the src/*.* changes at f86d0be (with minor notes in comments) [didn't review the subdirectory stuff thoroughly; I'm less familiar with that code]\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/225290282/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/225297383",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#issuecomment-225297383",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8085",
    "id": 225297383,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyNTI5NzM4Mw==",
    "user": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-06-10T21:14:09Z",
    "updated_at": "2016-06-10T21:14:09Z",
    "author_association": "MEMBER",
    "body": "@kazcw Thanks for the excellent review! I'll pick this back up in ~2 weeks. Obviously if that's going to stall progress on lock refactors too much, go ahead with them and I'll cope with it here.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/225297383/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/226218468",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#issuecomment-226218468",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8085",
    "id": 226218468,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyNjIxODQ2OA==",
    "user": {
      "login": "JeremyRubin",
      "id": 886523,
      "node_id": "MDQ6VXNlcjg4NjUyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/886523?u=8cdd8653982252593843d7369ecfebe432b89768&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JeremyRubin",
      "html_url": "https://github.com/JeremyRubin",
      "followers_url": "https://api.github.com/users/JeremyRubin/followers",
      "following_url": "https://api.github.com/users/JeremyRubin/following{/other_user}",
      "gists_url": "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
      "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
      "repos_url": "https://api.github.com/users/JeremyRubin/repos",
      "events_url": "https://api.github.com/users/JeremyRubin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-06-15T15:11:59Z",
    "updated_at": "2016-06-15T15:11:59Z",
    "author_association": "CONTRIBUTOR",
    "body": "utack, other than the atomic::store problem I marked this refactor seems safe.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/226218468/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/228989553",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#issuecomment-228989553",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8085",
    "id": 228989553,
    "node_id": "MDEyOklzc3VlQ29tbWVudDIyODk4OTU1Mw==",
    "user": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-06-28T08:48:02Z",
    "updated_at": "2016-06-28T08:48:02Z",
    "author_association": "MEMBER",
    "body": "Addressed most (all?) of the comments here, and added some commits.\n\nFor future comparison, the current tip is https://github.com/theuni/bitcoin/commit/f96d164f83239e74288ea6a707228be9a4f3ae27. I'll now work on rebasing to master.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/228989553/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/242195853",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#issuecomment-242195853",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8085",
    "id": 242195853,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0MjE5NTg1Mw==",
    "user": {
      "login": "btcdrak",
      "id": 7275704,
      "node_id": "MDQ6VXNlcjcyNzU3MDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7275704?u=578995010af9e1872285cb8e67bcb4f6052d52dd&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/btcdrak",
      "html_url": "https://github.com/btcdrak",
      "followers_url": "https://api.github.com/users/btcdrak/followers",
      "following_url": "https://api.github.com/users/btcdrak/following{/other_user}",
      "gists_url": "https://api.github.com/users/btcdrak/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/btcdrak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/btcdrak/subscriptions",
      "organizations_url": "https://api.github.com/users/btcdrak/orgs",
      "repos_url": "https://api.github.com/users/btcdrak/repos",
      "events_url": "https://api.github.com/users/btcdrak/events{/privacy}",
      "received_events_url": "https://api.github.com/users/btcdrak/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-24T20:23:27Z",
    "updated_at": "2016-08-24T20:23:27Z",
    "author_association": "CONTRIBUTOR",
    "body": "needs rebase.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/242195853/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/242296120",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#issuecomment-242296120",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8085",
    "id": 242296120,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0MjI5NjEyMA==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-25T06:50:21Z",
    "updated_at": "2016-08-25T06:50:21Z",
    "author_association": "MEMBER",
    "body": "Yes, needs rebase, should be merged not very long after that IMO\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/242296120/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/243520576",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#issuecomment-243520576",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8085",
    "id": 243520576,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0MzUyMDU3Ng==",
    "user": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-30T17:44:00Z",
    "updated_at": "2016-08-30T17:44:00Z",
    "author_association": "MEMBER",
    "body": "I have this rebased locally, I've been pulling out more controversial chunks for individual PR. Would you prefer to just do it all in one go here?\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/243520576/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/243520853",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#issuecomment-243520853",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8085",
    "id": 243520853,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0MzUyMDg1Mw==",
    "user": {
      "login": "btcdrak",
      "id": 7275704,
      "node_id": "MDQ6VXNlcjcyNzU3MDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7275704?u=578995010af9e1872285cb8e67bcb4f6052d52dd&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/btcdrak",
      "html_url": "https://github.com/btcdrak",
      "followers_url": "https://api.github.com/users/btcdrak/followers",
      "following_url": "https://api.github.com/users/btcdrak/following{/other_user}",
      "gists_url": "https://api.github.com/users/btcdrak/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/btcdrak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/btcdrak/subscriptions",
      "organizations_url": "https://api.github.com/users/btcdrak/orgs",
      "repos_url": "https://api.github.com/users/btcdrak/repos",
      "events_url": "https://api.github.com/users/btcdrak/events{/privacy}",
      "received_events_url": "https://api.github.com/users/btcdrak/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-30T17:44:54Z",
    "updated_at": "2016-08-30T17:44:54Z",
    "author_association": "CONTRIBUTOR",
    "body": "@theuni all in one go please. \n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/243520853/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/243648138",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#issuecomment-243648138",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8085",
    "id": 243648138,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0MzY0ODEzOA==",
    "user": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-31T03:26:12Z",
    "updated_at": "2016-08-31T03:26:12Z",
    "author_association": "MEMBER",
    "body": "ok, will push up a rebased version tomorrow.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/243648138/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/243855266",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#issuecomment-243855266",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8085",
    "id": 243855266,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0Mzg1NTI2Ng==",
    "user": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-08-31T18:24:14Z",
    "updated_at": "2016-08-31T18:24:14Z",
    "author_association": "MEMBER",
    "body": "Rebased. This has been rebased through lots of changes, though I believe the newer stuff is accounted for.\n\nI'd recommend taking a look at the final CConnman first to get an idea of how it looks, then each individual commit should make more sense.\n\n@jonasschnelli 1cf69d418576a0096f8f3e83494a107774dde2ed is included as we discussed, so that kicking can be done in a more straightforward way, but it's also just nice to have in the gui.\n\nBecause this is such a monster, at this point I'd prefer to add fixes on top rather than rebasing to include them.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/243855266/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/244077083",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#issuecomment-244077083",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8085",
    "id": 244077083,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NDA3NzA4Mw==",
    "user": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?u=eab5d0cdbb6cc25087cb61d4ca4a6f85255f42a7&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-09-01T13:23:54Z",
    "updated_at": "2016-09-08T07:21:25Z",
    "author_association": "CONTRIBUTOR",
    "body": "~~Started IBDing a node with this PR (`-listen=0`, connected to a in-sync mainnet node on the same system). Its built with `--enable-debug` and IBDs with `-debug=net`, `-prune=550` and `-dbcache=4000`.~~\n\n~~Reached progress `progress=0.097296` after 4h where I normally do a full IBD (with `--enable-debug`)  under 4h on the same machine.~~\n\n~~Either the `-debug=net` is causing the slow down or something regarding this PR.\nI can try to run more authentic benchmarks though (direct compare master against this PR on a \"quite\" machine).~~\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/244077083/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/244265995",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#issuecomment-244265995",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8085",
    "id": 244265995,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NDI2NTk5NQ==",
    "user": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-09-02T02:16:08Z",
    "updated_at": "2016-09-02T02:16:08Z",
    "author_association": "MEMBER",
    "body": "@jonasschnelli Thanks for having a look. I'll try to reproduce.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/244265995/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/245514444",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#issuecomment-245514444",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8085",
    "id": 245514444,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NTUxNDQ0NA==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-09-08T07:19:50Z",
    "updated_at": "2016-09-08T07:21:09Z",
    "author_association": "MEMBER",
    "body": "> Either the -debug=net is causing the slow down \n\nHah, I wouldn't be surprised. Thanks for testing.\n\nIs this performance regression serious enough to block this, or shouldit be solved later? This is a large change, which has had a lot of review by now, and it again needs rebase...\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/245514444/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/245514822",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#issuecomment-245514822",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8085",
    "id": 245514822,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NTUxNDgyMg==",
    "user": {
      "login": "jonasschnelli",
      "id": 178464,
      "node_id": "MDQ6VXNlcjE3ODQ2NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/178464?u=eab5d0cdbb6cc25087cb61d4ca4a6f85255f42a7&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasschnelli",
      "html_url": "https://github.com/jonasschnelli",
      "followers_url": "https://api.github.com/users/jonasschnelli/followers",
      "following_url": "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url": "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
      "repos_url": "https://api.github.com/users/jonasschnelli/repos",
      "events_url": "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-09-08T07:21:50Z",
    "updated_at": "2016-09-08T07:21:50Z",
    "author_association": "CONTRIBUTOR",
    "body": "Sorry this was my fault in doing benchmark in conjunctions with `--enable-debug`\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/245514822/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/245517235",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#issuecomment-245517235",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8085",
    "id": 245517235,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NTUxNzIzNQ==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-09-08T07:34:35Z",
    "updated_at": "2016-09-08T07:34:35Z",
    "author_association": "MEMBER",
    "body": "> Sorry this was my fault in doing benchmark in conjunctions with --enable-debug\n\nOk, good to know\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/245517235/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/245595815",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#issuecomment-245595815",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8085",
    "id": 245595815,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NTU5NTgxNQ==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-09-08T13:24:41Z",
    "updated_at": "2016-09-08T13:24:41Z",
    "author_association": "MEMBER",
    "body": "Concept and overall code review ACK. I think you still need to address https://github.com/bitcoin/bitcoin/pull/8085/files#r66671033. I also left a number of nits in various commits, but none of them are blockers.\n\nNeeds rebase, though.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/245595815/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/245598279",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#issuecomment-245598279",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8085",
    "id": 245598279,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NTU5ODI3OQ==",
    "user": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-09-08T13:33:11Z",
    "updated_at": "2016-09-08T13:33:11Z",
    "author_association": "MEMBER",
    "body": "@sipa Yikes, thanks for noticing the missed changes. I'll rebase now and make sure that matches.\nThanks for the review!\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/245598279/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/245671135",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#issuecomment-245671135",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8085",
    "id": 245671135,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NTY3MTEzNQ==",
    "user": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-09-08T17:18:09Z",
    "updated_at": "2016-09-08T17:18:09Z",
    "author_association": "MEMBER",
    "body": "Rebased, fixed up the salt changes, and squashed the win32 build fix.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/245671135/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/245855971",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#issuecomment-245855971",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8085",
    "id": 245855971,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NTg1NTk3MQ==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-09-09T08:47:23Z",
    "updated_at": "2016-09-09T08:47:23Z",
    "author_association": "MEMBER",
    "body": "Thanks for the review @sipa.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/245855971/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/245868868",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#issuecomment-245868868",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8085",
    "id": 245868868,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NTg2ODg2OA==",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-09-09T09:44:59Z",
    "updated_at": "2016-09-09T09:44:59Z",
    "author_association": "MEMBER",
    "body": "ACK 0103c5b\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/245868868/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/246181943",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#issuecomment-246181943",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/8085",
    "id": 246181943,
    "node_id": "MDEyOklzc3VlQ29tbWVudDI0NjE4MTk0Mw==",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?u=7999a16349f0df0fb273fffa18e5a955c9d3f11c&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2016-09-11T14:05:32Z",
    "updated_at": "2016-09-11T14:05:32Z",
    "author_association": "MEMBER",
    "body": "@rebroad It was wrong, as is explained in the commit. If two connections arrive before the version message cycles back, nLocalHostNonce would be overwritten by the second connection before the comparison occurs.\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/246181943/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/64405836",
    "pull_request_review_id": null,
    "id": 64405836,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0NDA1ODM2",
    "diff_hunk": "@@ -490,12 +490,17 @@ class CNode\n     CNode(const CNode&);\n     void operator=(const CNode&);\n \n+    uint64_t nLocalHostNonce;",
    "path": "src/net.h",
    "position": null,
    "original_position": 20,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "46cf6754cf6ac7bab76fb61ad9494741de235f6c",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This won't work. It needs to be a ConnMan-scoped variable, not a CNode-scoped one, as the nonce will come back through another link than the one we sent it through.\n",
    "created_at": "2016-05-24T14:50:32Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r64405836",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/64405836"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r64405836"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/64405836/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 493,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/64423396",
    "pull_request_review_id": null,
    "id": 64423396,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0NDIzMzk2",
    "diff_hunk": "@@ -490,12 +490,17 @@ class CNode\n     CNode(const CNode&);\n     void operator=(const CNode&);\n \n+    uint64_t nLocalHostNonce;",
    "path": "src/net.h",
    "position": null,
    "original_position": 20,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "46cf6754cf6ac7bab76fb61ad9494741de235f6c",
    "user": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "@sipa See https://github.com/bitcoin/bitcoin/pull/8085/commits/46cf6754cf6ac7bab76fb61ad9494741de235f6c#diff-9a82240fe7dfe86564178691cc57f2f1R351.\n\nI started by simply moving this to CConnman as you suggest, but it's racy and dependent on the optimistic send succeeding (nonce is set in one thread, tested in another). With this change, I believe we now guard against rapid-fire connections that may connect to self, which would have been missed before.\n",
    "created_at": "2016-05-24T16:13:08Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r64423396",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/64423396"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r64423396"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/64423396/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 493,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/64424128",
    "pull_request_review_id": null,
    "id": 64424128,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0NDI0MTI4",
    "diff_hunk": "@@ -490,12 +490,17 @@ class CNode\n     CNode(const CNode&);\n     void operator=(const CNode&);\n \n+    uint64_t nLocalHostNonce;",
    "path": "src/net.h",
    "position": null,
    "original_position": 20,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "46cf6754cf6ac7bab76fb61ad9494741de235f6c",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Nevermind, indeed.\n",
    "created_at": "2016-05-24T16:17:14Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r64424128",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/64424128"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r64424128"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/64424128/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 493,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/66666522",
    "pull_request_review_id": null,
    "id": 66666522,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2NjY2NTIy",
    "diff_hunk": "@@ -69,6 +70,7 @@ static const bool DEFAULT_REST_ENABLE = false;\n static const bool DEFAULT_DISABLE_SAFEMODE = false;\n static const bool DEFAULT_STOPAFTERBLOCKIMPORT = false;\n \n+std::shared_ptr<CConnman> g_connman;",
    "path": "src/init.cpp",
    "position": null,
    "original_position": 12,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "f86d0bebcba7102d68563b96b19fc1c0caa8d58f",
    "user": {
      "login": "kazcw",
      "id": 1047859,
      "node_id": "MDQ6VXNlcjEwNDc4NTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1047859?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kazcw",
      "html_url": "https://github.com/kazcw",
      "followers_url": "https://api.github.com/users/kazcw/followers",
      "following_url": "https://api.github.com/users/kazcw/following{/other_user}",
      "gists_url": "https://api.github.com/users/kazcw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kazcw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kazcw/subscriptions",
      "organizations_url": "https://api.github.com/users/kazcw/orgs",
      "repos_url": "https://api.github.com/users/kazcw/repos",
      "events_url": "https://api.github.com/users/kazcw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kazcw/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I don't see g_connman requiring any refcounting, could this be a plain unique_ptr?\n",
    "created_at": "2016-06-10T19:12:28Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r66666522",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/66666522"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r66666522"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/66666522/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 73,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/66667844",
    "pull_request_review_id": null,
    "id": 66667844,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2NjY3ODQ0",
    "diff_hunk": "@@ -69,6 +70,7 @@ static const bool DEFAULT_REST_ENABLE = false;\n static const bool DEFAULT_DISABLE_SAFEMODE = false;\n static const bool DEFAULT_STOPAFTERBLOCKIMPORT = false;\n \n+std::shared_ptr<CConnman> g_connman;",
    "path": "src/init.cpp",
    "position": null,
    "original_position": 12,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "f86d0bebcba7102d68563b96b19fc1c0caa8d58f",
    "user": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This was originally passed around differently, but refactored to essentially be a unique_ptr. So yes :)\n\nThough it's worth mentioning that the global is only temporary until the rpc/qt interfaces learn how to accept/maintain an instance. So it's probably even more important to not encourage any sharing semantics.\n\nWill change.\n",
    "created_at": "2016-06-10T19:22:43Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r66667844",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/66667844"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r66667844"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/66667844/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 73,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/66667939",
    "pull_request_review_id": null,
    "id": 66667939,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2NjY3OTM5",
    "diff_hunk": "@@ -1945,9 +1919,45 @@ void static Discover(boost::thread_group& threadGroup)\n #endif\n }\n \n-void StartNode(boost::thread_group& threadGroup, CScheduler& scheduler)\n+CConnman::CConnman()\n+{\n+    setBannedIsDirty = false;\n+    fAddressesInitialized = false;\n+    nLastNodeId = 0;\n+    nSendBufferMaxSize = 0;\n+    nReceiveFloodSize = 0;\n+    semOutbound = NULL;\n+    nMaxConnections = 0;\n+    nMaxOutbound = 0;\n+    nBestHeight = 0;\n+    clientInterface = NULL;\n+}\n+\n+NodeId CConnman::GetNewNodeId()\n+{\n+    return nLastNodeId.fetch_add(1, std::memory_order_relaxed);\n+}\n+\n+bool CConnman::Start(boost::thread_group& threadGroup, CScheduler& scheduler, std::string& strNodeError, Options connOptions)",
    "path": "src/net.cpp",
    "position": 723,
    "original_position": 689,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "f86d0bebcba7102d68563b96b19fc1c0caa8d58f",
    "user": {
      "login": "kazcw",
      "id": 1047859,
      "node_id": "MDQ6VXNlcjEwNDc4NTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1047859?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kazcw",
      "html_url": "https://github.com/kazcw",
      "followers_url": "https://api.github.com/users/kazcw/followers",
      "following_url": "https://api.github.com/users/kazcw/following{/other_user}",
      "gists_url": "https://api.github.com/users/kazcw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kazcw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kazcw/subscriptions",
      "organizations_url": "https://api.github.com/users/kazcw/orgs",
      "repos_url": "https://api.github.com/users/kazcw/repos",
      "events_url": "https://api.github.com/users/kazcw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kazcw/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Lifetime safety is more robust without the existence of constructed-not-started and stopped-not-destructed twilight states. What do you think about doing the Start/Stop stuff in the ctor/dtor -- would the stuff that AppInit2 currently does between construction and Start make sense to put into the CConnman::Options?\n",
    "created_at": "2016-06-10T19:23:29Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r66667939",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/66667939"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r66667939"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/66667939/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2045,
    "original_line": 1941,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/66669196",
    "pull_request_review_id": null,
    "id": 66669196,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2NjY5MTk2",
    "diff_hunk": "@@ -75,24 +80,218 @@ static const size_t DEFAULT_MAXSENDBUFFER    = 1 * 1000;\n // NOTE: When adjusting this, update rpcnet:setban's help (\"24h\")\n static const unsigned int DEFAULT_MISBEHAVING_BANTIME = 60 * 60 * 24;  // Default 24-hour ban\n \n-unsigned int ReceiveFloodSize();\n-unsigned int SendBufferSize();\n+typedef int NodeId;\n+\n+class CNodeStats;\n+class CClientUIInterface;\n+\n+class CConnman\n+{\n+public:\n+\n+    enum NumConnections {\n+        CONNECTIONS_NONE = 0,\n+        CONNECTIONS_IN = (1U << 0),\n+        CONNECTIONS_OUT = (1U << 1),\n+        CONNECTIONS_ALL = (CONNECTIONS_IN | CONNECTIONS_OUT),\n+    };\n+\n+    struct Options\n+    {\n+        uint64_t nLocalServices = 0;\n+        int nMaxConnections = 0;\n+        int nMaxOutbound = 0;\n+        int nBestHeight = 0;\n+        unsigned int nSendBufferMaxSize = 0;\n+        unsigned int nReceiveFloodSize = 0;\n+        CClientUIInterface* interface = nullptr;\n+    };\n+\n+    CConnman();\n+    ~CConnman();\n+    bool Start(boost::thread_group& threadGroup, CScheduler& scheduler, std::string& strNodeError, Options options);\n+    void Stop();\n+    bool BindListenPort(const CService &bindAddr, std::string& strError, bool fWhitelisted = false);\n+    bool OpenNetworkConnection(const CAddress& addrConnect, CSemaphoreGrant *grantOutbound = NULL, const char *strDest = NULL, bool fOneShot = false);\n+    bool CheckIncomingNonce(uint64_t nonce);\n+\n+    bool ForEachNode(std::function<bool(CNode* pnode)> func);",
    "path": "src/net.h",
    "position": null,
    "original_position": 67,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "f86d0bebcba7102d68563b96b19fc1c0caa8d58f",
    "user": {
      "login": "kazcw",
      "id": 1047859,
      "node_id": "MDQ6VXNlcjEwNDc4NTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1047859?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kazcw",
      "html_url": "https://github.com/kazcw",
      "followers_url": "https://api.github.com/users/kazcw/followers",
      "following_url": "https://api.github.com/users/kazcw/following{/other_user}",
      "gists_url": "https://api.github.com/users/kazcw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kazcw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kazcw/subscriptions",
      "organizations_url": "https://api.github.com/users/kazcw/orgs",
      "repos_url": "https://api.github.com/users/kazcw/repos",
      "events_url": "https://api.github.com/users/kazcw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kazcw/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Nit: std::function indirection is fairly heavyweight, templating these would make the functors inlineable.\n",
    "created_at": "2016-06-10T19:34:18Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r66669196",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/66669196"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r66669196"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/66669196/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 118,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/66670406",
    "pull_request_review_id": null,
    "id": 66670406,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2NjcwNDA2",
    "diff_hunk": "@@ -2927,7 +2920,7 @@ static void NotifyHeaderTip() {\n  * or an activated best chain. pblock is either NULL or a pointer to a block\n  * that is already loaded (to avoid loading it again from disk).\n  */",
    "path": "src/main.cpp",
    "position": 78,
    "original_position": 51,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "f86d0bebcba7102d68563b96b19fc1c0caa8d58f",
    "user": {
      "login": "kazcw",
      "id": 1047859,
      "node_id": "MDQ6VXNlcjEwNDc4NTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1047859?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kazcw",
      "html_url": "https://github.com/kazcw",
      "followers_url": "https://api.github.com/users/kazcw/followers",
      "following_url": "https://api.github.com/users/kazcw/following{/other_user}",
      "gists_url": "https://api.github.com/users/kazcw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kazcw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kazcw/subscriptions",
      "organizations_url": "https://api.github.com/users/kazcw/orgs",
      "repos_url": "https://api.github.com/users/kazcw/repos",
      "events_url": "https://api.github.com/users/kazcw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kazcw/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Nit: could use a comment documenting connman nullability.\n",
    "created_at": "2016-06-10T19:43:19Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r66670406",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/66670406"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r66670406"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/66670406/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 3012,
    "original_line": 2922,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/66671033",
    "pull_request_review_id": null,
    "id": 66671033,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2NjcxMDMz",
    "diff_hunk": "@@ -4418,17 +4412,60 @@ bool static AlreadyHave(const CInv& inv) EXCLUSIVE_LOCKS_REQUIRED(cs_main)\n     return true;\n }\n \n-void static ProcessGetData(CNode* pfrom, const Consensus::Params& consensusParams)\n+static void RelayTransaction(const CTransaction& tx, CConnman& connman)\n+{\n+    CInv inv(MSG_TX, tx.GetHash());\n+    connman.ForEachNode([&inv](CNode* pnode)\n+    {\n+        pnode->PushInventory(inv);\n+        return true;\n+    });\n+}\n+\n+static void RelayAddress(const CAddress& addr, bool fReachable, CConnman& connman)\n+{\n+    int nRelayNodes = fReachable ? 2 : 1; // limited relaying of addresses outside our network(s)\n+\n+    // Relay to a limited number of other nodes\n+    // Use deterministic randomness to send to the same nodes for 24 hours\n+    // at a time so the addrKnowns of the chosen nodes prevent repeats\n+    static uint64_t salt0 = 0, salt1 = 0;\n+    while (salt0 == 0 && salt1 == 0) {",
    "path": "src/main.cpp",
    "position": null,
    "original_position": 119,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "f86d0bebcba7102d68563b96b19fc1c0caa8d58f",
    "user": {
      "login": "kazcw",
      "id": 1047859,
      "node_id": "MDQ6VXNlcjEwNDc4NTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1047859?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kazcw",
      "html_url": "https://github.com/kazcw",
      "followers_url": "https://api.github.com/users/kazcw/followers",
      "following_url": "https://api.github.com/users/kazcw/following{/other_user}",
      "gists_url": "https://api.github.com/users/kazcw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kazcw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kazcw/subscriptions",
      "organizations_url": "https://api.github.com/users/kazcw/orgs",
      "repos_url": "https://api.github.com/users/kazcw/repos",
      "events_url": "https://api.github.com/users/kazcw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kazcw/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "There's a newer version of this initialization in master from #8173, the commit is 8884830.\n",
    "created_at": "2016-06-10T19:48:22Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r66671033",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/66671033"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r66671033"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/66671033/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 4433,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/66671837",
    "pull_request_review_id": null,
    "id": 66671837,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2NjcxODM3",
    "diff_hunk": "@@ -1945,9 +1919,45 @@ void static Discover(boost::thread_group& threadGroup)\n #endif\n }\n \n-void StartNode(boost::thread_group& threadGroup, CScheduler& scheduler)\n+CConnman::CConnman()\n+{\n+    setBannedIsDirty = false;\n+    fAddressesInitialized = false;\n+    nLastNodeId = 0;\n+    nSendBufferMaxSize = 0;\n+    nReceiveFloodSize = 0;\n+    semOutbound = NULL;\n+    nMaxConnections = 0;\n+    nMaxOutbound = 0;\n+    nBestHeight = 0;\n+    clientInterface = NULL;\n+}\n+\n+NodeId CConnman::GetNewNodeId()\n+{\n+    return nLastNodeId.fetch_add(1, std::memory_order_relaxed);\n+}\n+\n+bool CConnman::Start(boost::thread_group& threadGroup, CScheduler& scheduler, std::string& strNodeError, Options connOptions)",
    "path": "src/net.cpp",
    "position": 723,
    "original_position": 689,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "f86d0bebcba7102d68563b96b19fc1c0caa8d58f",
    "user": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "The reason for start/stop doesn't really become obvious until the async behavior comes in. As a next step, all of the connecting/resolving behavior will be replaced with async events handled via callbacks. It's necessary to be able to have some basic connman functionality before the event thread spins up (or in case it's never going to). The most straightforward example is that we'll want to stop app startup if all bind()s fail, before spawning any connection threads.\n\nAs a better example, you can see that none of the tests require that Start() has been called.\n",
    "created_at": "2016-06-10T19:55:06Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r66671837",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/66671837"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r66671837"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/66671837/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2045,
    "original_line": 1941,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/66672120",
    "pull_request_review_id": null,
    "id": 66672120,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2NjcyMTIw",
    "diff_hunk": "@@ -75,24 +80,218 @@ static const size_t DEFAULT_MAXSENDBUFFER    = 1 * 1000;\n // NOTE: When adjusting this, update rpcnet:setban's help (\"24h\")\n static const unsigned int DEFAULT_MISBEHAVING_BANTIME = 60 * 60 * 24;  // Default 24-hour ban\n \n-unsigned int ReceiveFloodSize();\n-unsigned int SendBufferSize();\n+typedef int NodeId;\n+\n+class CNodeStats;\n+class CClientUIInterface;\n+\n+class CConnman\n+{\n+public:\n+\n+    enum NumConnections {\n+        CONNECTIONS_NONE = 0,\n+        CONNECTIONS_IN = (1U << 0),\n+        CONNECTIONS_OUT = (1U << 1),\n+        CONNECTIONS_ALL = (CONNECTIONS_IN | CONNECTIONS_OUT),\n+    };\n+\n+    struct Options\n+    {\n+        uint64_t nLocalServices = 0;\n+        int nMaxConnections = 0;\n+        int nMaxOutbound = 0;\n+        int nBestHeight = 0;\n+        unsigned int nSendBufferMaxSize = 0;\n+        unsigned int nReceiveFloodSize = 0;\n+        CClientUIInterface* interface = nullptr;\n+    };\n+\n+    CConnman();\n+    ~CConnman();\n+    bool Start(boost::thread_group& threadGroup, CScheduler& scheduler, std::string& strNodeError, Options options);\n+    void Stop();\n+    bool BindListenPort(const CService &bindAddr, std::string& strError, bool fWhitelisted = false);\n+    bool OpenNetworkConnection(const CAddress& addrConnect, CSemaphoreGrant *grantOutbound = NULL, const char *strDest = NULL, bool fOneShot = false);\n+    bool CheckIncomingNonce(uint64_t nonce);\n+\n+    bool ForEachNode(std::function<bool(CNode* pnode)> func);",
    "path": "src/net.h",
    "position": null,
    "original_position": 67,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "f86d0bebcba7102d68563b96b19fc1c0caa8d58f",
    "user": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Good point.\n",
    "created_at": "2016-06-10T19:57:02Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r66672120",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/66672120"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r66672120"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/66672120/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 118,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/66672713",
    "pull_request_review_id": null,
    "id": 66672713,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2NjcyNzEz",
    "diff_hunk": "@@ -2927,7 +2920,7 @@ static void NotifyHeaderTip() {\n  * or an activated best chain. pblock is either NULL or a pointer to a block\n  * that is already loaded (to avoid loading it again from disk).\n  */",
    "path": "src/main.cpp",
    "position": 78,
    "original_position": 51,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "f86d0bebcba7102d68563b96b19fc1c0caa8d58f",
    "user": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Agreed, will do. In case it's not clear, the intention is to allow us to avoid skipping the network altogether for utility functions. Beyond the startup stuff where it's currently skipped, in the future it may be interesting to do things like on-the-fly reindexing without having to shut down.\n",
    "created_at": "2016-06-10T20:01:40Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r66672713",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/66672713"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r66672713"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/66672713/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 3012,
    "original_line": 2922,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/66672857",
    "pull_request_review_id": null,
    "id": 66672857,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2NjcyODU3",
    "diff_hunk": "@@ -4418,17 +4412,60 @@ bool static AlreadyHave(const CInv& inv) EXCLUSIVE_LOCKS_REQUIRED(cs_main)\n     return true;\n }\n \n-void static ProcessGetData(CNode* pfrom, const Consensus::Params& consensusParams)\n+static void RelayTransaction(const CTransaction& tx, CConnman& connman)\n+{\n+    CInv inv(MSG_TX, tx.GetHash());\n+    connman.ForEachNode([&inv](CNode* pnode)\n+    {\n+        pnode->PushInventory(inv);\n+        return true;\n+    });\n+}\n+\n+static void RelayAddress(const CAddress& addr, bool fReachable, CConnman& connman)\n+{\n+    int nRelayNodes = fReachable ? 2 : 1; // limited relaying of addresses outside our network(s)\n+\n+    // Relay to a limited number of other nodes\n+    // Use deterministic randomness to send to the same nodes for 24 hours\n+    // at a time so the addrKnowns of the chosen nodes prevent repeats\n+    static uint64_t salt0 = 0, salt1 = 0;\n+    while (salt0 == 0 && salt1 == 0) {",
    "path": "src/main.cpp",
    "position": null,
    "original_position": 119,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "f86d0bebcba7102d68563b96b19fc1c0caa8d58f",
    "user": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Thanks, I'll note this for the next rebase round.\n",
    "created_at": "2016-06-10T20:02:41Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r66672857",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/66672857"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r66672857"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/66672857/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 4433,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/66676159",
    "pull_request_review_id": null,
    "id": 66676159,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2Njc2MTU5",
    "diff_hunk": "@@ -1945,9 +1919,45 @@ void static Discover(boost::thread_group& threadGroup)\n #endif\n }\n \n-void StartNode(boost::thread_group& threadGroup, CScheduler& scheduler)\n+CConnman::CConnman()\n+{\n+    setBannedIsDirty = false;\n+    fAddressesInitialized = false;\n+    nLastNodeId = 0;\n+    nSendBufferMaxSize = 0;\n+    nReceiveFloodSize = 0;\n+    semOutbound = NULL;\n+    nMaxConnections = 0;\n+    nMaxOutbound = 0;\n+    nBestHeight = 0;\n+    clientInterface = NULL;\n+}\n+\n+NodeId CConnman::GetNewNodeId()\n+{\n+    return nLastNodeId.fetch_add(1, std::memory_order_relaxed);\n+}\n+\n+bool CConnman::Start(boost::thread_group& threadGroup, CScheduler& scheduler, std::string& strNodeError, Options connOptions)",
    "path": "src/net.cpp",
    "position": 723,
    "original_position": 689,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "f86d0bebcba7102d68563b96b19fc1c0caa8d58f",
    "user": {
      "login": "kazcw",
      "id": 1047859,
      "node_id": "MDQ6VXNlcjEwNDc4NTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1047859?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kazcw",
      "html_url": "https://github.com/kazcw",
      "followers_url": "https://api.github.com/users/kazcw/followers",
      "following_url": "https://api.github.com/users/kazcw/following{/other_user}",
      "gists_url": "https://api.github.com/users/kazcw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kazcw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kazcw/subscriptions",
      "organizations_url": "https://api.github.com/users/kazcw/orgs",
      "repos_url": "https://api.github.com/users/kazcw/repos",
      "events_url": "https://api.github.com/users/kazcw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kazcw/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I'd be more comfortable with a builder doing those binds or something -- it just seems like it would be easy for a future change to introduce an unchecked dependency on the CConnman state, that could make for subtle and unpredictable bugs. But this is a complex change you're certainly more familiar with than I, so ACK however you decide to ensure safety against that kind of case.\n",
    "created_at": "2016-06-10T20:28:56Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r66676159",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/66676159"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r66676159"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/66676159/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2045,
    "original_line": 1941,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/66677551",
    "pull_request_review_id": null,
    "id": 66677551,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2Njc3NTUx",
    "diff_hunk": "@@ -1945,9 +1919,45 @@ void static Discover(boost::thread_group& threadGroup)\n #endif\n }\n \n-void StartNode(boost::thread_group& threadGroup, CScheduler& scheduler)\n+CConnman::CConnman()\n+{\n+    setBannedIsDirty = false;\n+    fAddressesInitialized = false;\n+    nLastNodeId = 0;\n+    nSendBufferMaxSize = 0;\n+    nReceiveFloodSize = 0;\n+    semOutbound = NULL;\n+    nMaxConnections = 0;\n+    nMaxOutbound = 0;\n+    nBestHeight = 0;\n+    clientInterface = NULL;\n+}\n+\n+NodeId CConnman::GetNewNodeId()\n+{\n+    return nLastNodeId.fetch_add(1, std::memory_order_relaxed);\n+}\n+\n+bool CConnman::Start(boost::thread_group& threadGroup, CScheduler& scheduler, std::string& strNodeError, Options connOptions)",
    "path": "src/net.cpp",
    "position": 723,
    "original_position": 689,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "f86d0bebcba7102d68563b96b19fc1c0caa8d58f",
    "user": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Roger. I see your point and agree, I'm just trying to avoid overthinking this until the async stuff is added. Once it's all hooked up, maybe we can switch to a model where Start() returns some kind of object that guarantees a certain state that CConnman does not.\n\nThe alternative would be to move out things that don't require a running state (addrman/bandb as examples) and let them have separate life-cycles, but I'd like to do that as a next step once all callers understand that those things aren't global.\n",
    "created_at": "2016-06-10T20:39:01Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r66677551",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/66677551"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r66677551"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/66677551/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2045,
    "original_line": 1941,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67036736",
    "pull_request_review_id": null,
    "id": 67036736,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MDM2NzM2",
    "diff_hunk": "@@ -96,9 +96,18 @@ class CConnman\n         CONNECTIONS_ALL = (CONNECTIONS_IN | CONNECTIONS_OUT),\n     };\n \n+    struct Options\n+    {\n+        uint64_t nLocalServices = 0;\n+        int nMaxConnections = 0;\n+        int nMaxOutbound = 0;\n+        int nBestHeight = 0;\n+        CClientUIInterface* interface = nullptr;",
    "path": "src/net.h",
    "position": null,
    "original_position": 10,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "5b81b0aef597ebbb5e6859281c5cf217f841d287",
    "user": {
      "login": "JeremyRubin",
      "id": 886523,
      "node_id": "MDQ6VXNlcjg4NjUyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JeremyRubin",
      "html_url": "https://github.com/JeremyRubin",
      "followers_url": "https://api.github.com/users/JeremyRubin/followers",
      "following_url": "https://api.github.com/users/JeremyRubin/following{/other_user}",
      "gists_url": "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
      "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
      "repos_url": "https://api.github.com/users/JeremyRubin/repos",
      "events_url": "https://api.github.com/users/JeremyRubin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "nit: unclear why interface is in options when it doesn't really seem to be an option. Perhaps having a struct Context to hold state such as interface, scheduler, and threadgroup would be a better encapsulation.\n",
    "created_at": "2016-06-14T19:10:53Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r67036736",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67036736"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r67036736"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67036736/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 105,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67046665",
    "pull_request_review_id": null,
    "id": 67046665,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MDQ2NjY1",
    "diff_hunk": "@@ -303,23 +295,21 @@ UniValue getaddednodeinfo(const UniValue& params, bool fHelp)\n             + HelpExampleRpc(\"getaddednodeinfo\", \"true, \\\"192.168.0.201\\\"\")\n         );\n \n+    if(!g_connman)\n+        throw JSONRPCError(RPC_CLIENT_P2P_DISABLED, \"Error: Peer-to-peer functionality missing or disabled\");\n+\n     bool fDns = params[0].get_bool();\n \n     list<string> laddedNodes(0);\n-    if (params.size() == 1)\n-    {\n-        LOCK(cs_vAddedNodes);\n-        BOOST_FOREACH(const std::string& strAddNode, vAddedNodes)\n-            laddedNodes.push_back(strAddNode);\n-    }\n-    else\n+    g_connman->GetAddedNodes(laddedNodes);\n+\n+    if (params.size() > 1)\n     {\n         string strNode = params[1].get_str();\n-        LOCK(cs_vAddedNodes);\n-        BOOST_FOREACH(const std::string& strAddNode, vAddedNodes) {\n+        BOOST_FOREACH(const std::string& strAddNode, laddedNodes) {\n             if (strAddNode == strNode)\n             {\n-                laddedNodes.push_back(strAddNode);\n+                laddedNodes.assign(1, strAddNode);\n                 break;",
    "path": "src/rpc/net.cpp",
    "position": null,
    "original_position": 55,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "9def7c0bb08c2ff956e54a0b0693aff63e8d615c",
    "user": {
      "login": "JeremyRubin",
      "id": 886523,
      "node_id": "MDQ6VXNlcjg4NjUyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JeremyRubin",
      "html_url": "https://github.com/JeremyRubin",
      "followers_url": "https://api.github.com/users/JeremyRubin/followers",
      "following_url": "https://api.github.com/users/JeremyRubin/following{/other_user}",
      "gists_url": "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
      "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
      "repos_url": "https://api.github.com/users/JeremyRubin/repos",
      "events_url": "https://api.github.com/users/JeremyRubin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "note: This section is a bit more than just a code move, but it seems to have no functional change.\n(the couple lines around this section)\n",
    "created_at": "2016-06-14T20:10:07Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r67046665",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67046665"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r67046665"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67046665/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 295,
    "original_line": 313,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67075817",
    "pull_request_review_id": null,
    "id": 67075817,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MDc1ODE3",
    "diff_hunk": "@@ -2531,6 +2521,50 @@ void CNode::EndMessage(const char* pszCommand) UNLOCK_FUNCTION(cs_vSend)\n     LEAVE_CRITICAL_SECTION(cs_vSend);\n }\n \n+bool CConnman::ForEachNode(std::function<bool(CNode* pnode)> func)",
    "path": "src/net.cpp",
    "position": null,
    "original_position": 75,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "a01fa6c5a2e5884af64c0153dbfbd6a848128129",
    "user": {
      "login": "JeremyRubin",
      "id": 886523,
      "node_id": "MDQ6VXNlcjg4NjUyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JeremyRubin",
      "html_url": "https://github.com/JeremyRubin",
      "followers_url": "https://api.github.com/users/JeremyRubin/followers",
      "following_url": "https://api.github.com/users/JeremyRubin/following{/other_user}",
      "gists_url": "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
      "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
      "repos_url": "https://api.github.com/users/JeremyRubin/repos",
      "events_url": "https://api.github.com/users/JeremyRubin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Nit: I would rename `ForEachNode` as `ForEachNodeContinueIf` or something to signify that the return value being true is critical. I would then make a version of `ForEachNode` that does not check for the return value.\n- This is more consistent\\* with other \"foreach\" API's generally, eg, boost foreach or javascript foreach iterate over all elements\n  - although boost foreach does allow break\n- It is unclear if `ForEachNodeContinueIf` is/will be used anywhere in the codebase, but it could introduce bugs (say, if false is somehow returned by buggy code elsewhere or later), so it's probably better to not have a check that is never used.\n",
    "created_at": "2016-06-14T23:21:20Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r67075817",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67075817"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r67075817"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67075817/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2524,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67076355",
    "pull_request_review_id": null,
    "id": 67076355,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MDc2MzU1",
    "diff_hunk": "@@ -1342,8 +1342,15 @@ bool CWalletTx::RelayWalletTransaction(CConnman* connman)\n     {\n         if (GetDepthInMainChain() == 0 && !isAbandoned() && InMempool()) {\n             LogPrintf(\"Relaying wtx %s\\n\", GetHash().ToString());\n-            RelayTransaction((CTransaction)*this);\n-            return true;\n+            if (connman) {\n+                CInv inv(MSG_TX, GetHash());\n+                connman->ForEachNode([&inv](CNode* pnode)",
    "path": "src/wallet/wallet.cpp",
    "position": 16,
    "original_position": 8,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "a01fa6c5a2e5884af64c0153dbfbd6a848128129",
    "user": {
      "login": "JeremyRubin",
      "id": 886523,
      "node_id": "MDQ6VXNlcjg4NjUyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JeremyRubin",
      "html_url": "https://github.com/JeremyRubin",
      "followers_url": "https://api.github.com/users/JeremyRubin/followers",
      "following_url": "https://api.github.com/users/JeremyRubin/following{/other_user}",
      "gists_url": "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
      "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
      "repos_url": "https://api.github.com/users/JeremyRubin/repos",
      "events_url": "https://api.github.com/users/JeremyRubin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Nit: appears correct, but isn't this the same code as in RelayTransaction?\n",
    "created_at": "2016-06-14T23:26:42Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r67076355",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67076355"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r67076355"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67076355/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1465,
    "original_line": 1347,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67085848",
    "pull_request_review_id": null,
    "id": 67085848,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MDg1ODQ4",
    "diff_hunk": "@@ -2531,6 +2521,50 @@ void CNode::EndMessage(const char* pszCommand) UNLOCK_FUNCTION(cs_vSend)\n     LEAVE_CRITICAL_SECTION(cs_vSend);\n }\n \n+bool CConnman::ForEachNode(std::function<bool(CNode* pnode)> func)",
    "path": "src/net.cpp",
    "position": null,
    "original_position": 75,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "a01fa6c5a2e5884af64c0153dbfbd6a848128129",
    "user": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Ack. I meant to document these, but self-doc would be better.\n\nThe intention is to use these internally later, for example to replace the\nFindNode's which iterate and early-return when possible, to avoid holding\nthe lock longer than necessary.\n\nBut since those changes aren't part of this pull, I think that simply\ndropping the bool return and reintroducing it as ForEachNodeContinueIf\nlater is the way to go.\n",
    "created_at": "2016-06-15T01:17:37Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r67085848",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67085848"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r67085848"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67085848/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2524,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67086047",
    "pull_request_review_id": null,
    "id": 67086047,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MDg2MDQ3",
    "diff_hunk": "@@ -1342,8 +1342,15 @@ bool CWalletTx::RelayWalletTransaction(CConnman* connman)\n     {\n         if (GetDepthInMainChain() == 0 && !isAbandoned() && InMempool()) {\n             LogPrintf(\"Relaying wtx %s\\n\", GetHash().ToString());\n-            RelayTransaction((CTransaction)*this);\n-            return true;\n+            if (connman) {\n+                CInv inv(MSG_TX, GetHash());\n+                connman->ForEachNode([&inv](CNode* pnode)",
    "path": "src/wallet/wallet.cpp",
    "position": 16,
    "original_position": 8,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "a01fa6c5a2e5884af64c0153dbfbd6a848128129",
    "user": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Yes, but it's simple enough that I didn't bother factoring it out. No\nreason not to, except that there's not an obvious place to stick it.\nOn Jun 14, 2016 19:26, \"Jeremy Rubin\" notifications@github.com wrote:\n\n> In src/wallet/wallet.cpp\n> https://github.com/bitcoin/bitcoin/pull/8085#discussion_r67076355:\n> \n> > @@ -1342,8 +1342,15 @@ bool CWalletTx::RelayWalletTransaction(CConnman\\* connman)\n> >      {\n> >          if (GetDepthInMainChain() == 0 && !isAbandoned() && InMempool()) {\n> >              LogPrintf(\"Relaying wtx %s\\n\", GetHash().ToString());\n> > -            RelayTransaction((CTransaction)*this);\n> > -            return true;\n> > -            if (connman) {\n> > -                CInv inv(MSG_TX, GetHash());\n> > -                connman->ForEachNode([&inv](CNode* pnode)\n> \n> Nit: appears correct, but isn't this the same code as in RelayTransaction?\n> \n> \u2014\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> https://github.com/bitcoin/bitcoin/pull/8085/files/a57b3f21e3228f838382e7510dc4e8f2bd023237..a01fa6c5a2e5884af64c0153dbfbd6a848128129#r67076355,\n> or mute the thread\n> https://github.com/notifications/unsubscribe/AAZdE-sEqwxHrvI3wdUKtoHlUCgD1RM2ks5qLzi2gaJpZM4Ij8mn\n> .\n",
    "created_at": "2016-06-15T01:20:16Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r67086047",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67086047"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r67086047"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67086047/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1465,
    "original_line": 1347,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67086457",
    "pull_request_review_id": null,
    "id": 67086457,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MDg2NDU3",
    "diff_hunk": "@@ -96,9 +96,18 @@ class CConnman\n         CONNECTIONS_ALL = (CONNECTIONS_IN | CONNECTIONS_OUT),\n     };\n \n+    struct Options\n+    {\n+        uint64_t nLocalServices = 0;\n+        int nMaxConnections = 0;\n+        int nMaxOutbound = 0;\n+        int nBestHeight = 0;\n+        CClientUIInterface* interface = nullptr;",
    "path": "src/net.h",
    "position": null,
    "original_position": 10,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "5b81b0aef597ebbb5e6859281c5cf217f841d287",
    "user": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This will eventually hold pointers to several structures, chainparams for\nexample.\n\nIt may be reasonable to split it into a set of truly immutable options, and\nstateful app pointers.\n",
    "created_at": "2016-06-15T01:25:47Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r67086457",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67086457"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r67086457"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67086457/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 105,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67177507",
    "pull_request_review_id": null,
    "id": 67177507,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MTc3NTA3",
    "diff_hunk": "@@ -2337,6 +2338,16 @@ uint64_t CConnman::GetLocalServices() const\n     return nLocalServices;\n }\n \n+void CConnman::SetBestHeight(int height)\n+{\n+    nBestHeight.store(height, std::memory_order_release);",
    "path": "src/net.cpp",
    "position": null,
    "original_position": 89,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "148163c9b1ce04ec9fa9c8ff9a4289520bd92127",
    "user": {
      "login": "JeremyRubin",
      "id": 886523,
      "node_id": "MDQ6VXNlcjg4NjUyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JeremyRubin",
      "html_url": "https://github.com/JeremyRubin",
      "followers_url": "https://api.github.com/users/JeremyRubin/followers",
      "following_url": "https://api.github.com/users/JeremyRubin/following{/other_user}",
      "gists_url": "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
      "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
      "repos_url": "https://api.github.com/users/JeremyRubin/repos",
      "events_url": "https://api.github.com/users/JeremyRubin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I'm not sure this actually presents a bug, but it might at least exhibit some undesired behavior.\n\nThis should replace the value only if it is greater than the previous value, unless it is desirable to roll back (but this seems like a different case?).\n\n~~This may also not play well with out of order headers.~~ (ignore, headers aren't processed here/should be in order)\n\nIn any case, I'm not sure this is a consensus critical thing, but it could be the source of future bugs or further identity leaks.\n\nThis (might) also be fixed by moving the call to SetBestHeight inside of `Lock(cs_main)` in `ActivateBestChain`. Would also be reasonable to just document (or self-doc) it a bit better about what you are expecting this to do.\n",
    "created_at": "2016-06-15T14:54:37Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r67177507",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67177507"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r67177507"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67177507/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2458,
    "original_line": 2343,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67179071",
    "pull_request_review_id": null,
    "id": 67179071,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MTc5MDcx",
    "diff_hunk": "@@ -1976,7 +1982,7 @@ bool CConnman::Start(boost::thread_group& threadGroup, CScheduler& scheduler, ui\n         }\n     }\n \n-    uiInterface.InitMessage(_(\"Loading banlist...\"));\n+    clientInterface->InitMessage(_(\"Loading banlist...\"));",
    "path": "src/net.cpp",
    "position": null,
    "original_position": 81,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "cb9c81ee780ca153e471cf275a815e507c94dec6",
    "user": {
      "login": "JeremyRubin",
      "id": 886523,
      "node_id": "MDQ6VXNlcjg4NjUyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JeremyRubin",
      "html_url": "https://github.com/JeremyRubin",
      "followers_url": "https://api.github.com/users/JeremyRubin/followers",
      "following_url": "https://api.github.com/users/JeremyRubin/following{/other_user}",
      "gists_url": "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
      "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
      "repos_url": "https://api.github.com/users/JeremyRubin/repos",
      "events_url": "https://api.github.com/users/JeremyRubin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "may want to null check...\n",
    "created_at": "2016-06-15T15:02:05Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r67179071",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67179071"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r67179071"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67179071/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1985,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67179115",
    "pull_request_review_id": null,
    "id": 67179115,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MTc5MTE1",
    "diff_hunk": "@@ -1962,7 +1967,8 @@ bool CConnman::Start(boost::thread_group& threadGroup, CScheduler& scheduler, ui\n \n     SetBestHeight(nBestHeightIn);\n \n-    uiInterface.InitMessage(_(\"Loading addresses...\"));\n+    clientInterface = interfaceIn;\n+    clientInterface->InitMessage(_(\"Loading addresses...\"));",
    "path": "src/net.cpp",
    "position": null,
    "original_position": 72,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "cb9c81ee780ca153e471cf275a815e507c94dec6",
    "user": {
      "login": "JeremyRubin",
      "id": 886523,
      "node_id": "MDQ6VXNlcjg4NjUyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JeremyRubin",
      "html_url": "https://github.com/JeremyRubin",
      "followers_url": "https://api.github.com/users/JeremyRubin/followers",
      "following_url": "https://api.github.com/users/JeremyRubin/following{/other_user}",
      "gists_url": "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
      "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
      "repos_url": "https://api.github.com/users/JeremyRubin/repos",
      "events_url": "https://api.github.com/users/JeremyRubin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "may want to null check...\n",
    "created_at": "2016-06-15T15:02:15Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r67179115",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67179115"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r67179115"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67179115/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1971,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67180772",
    "pull_request_review_id": null,
    "id": 67180772,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MTgwNzcy",
    "diff_hunk": "@@ -1423,9 +1424,14 @@ bool AppInit2(boost::thread_group& threadGroup, CScheduler& scheduler)\n     if (GetBoolArg(\"-listenonion\", DEFAULT_LISTEN_ONION))\n         StartTorControl(threadGroup, scheduler);\n \n+    Discover(threadGroup);\n+\n+    // Map ports with UPnP\n+    MapPort(GetBoolArg(\"-upnp\", DEFAULT_UPNP));",
    "path": "src/init.cpp",
    "position": null,
    "original_position": 17,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "2258f0730ee9034f951a217d4e645125cbe98a89",
    "user": {
      "login": "JeremyRubin",
      "id": 886523,
      "node_id": "MDQ6VXNlcjg4NjUyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JeremyRubin",
      "html_url": "https://github.com/JeremyRubin",
      "followers_url": "https://api.github.com/users/JeremyRubin/followers",
      "following_url": "https://api.github.com/users/JeremyRubin/following{/other_user}",
      "gists_url": "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
      "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
      "repos_url": "https://api.github.com/users/JeremyRubin/repos",
      "events_url": "https://api.github.com/users/JeremyRubin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "nit: I think I would separate out the GetBoolArg put it into Options.\n\nThen keep the calls to MapPort into Start/Stop.\n\nseems a little more pragmatic & good for debugging (e.g., can dump a nodes options and know how the node was configured)\n",
    "created_at": "2016-06-15T15:10:26Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r67180772",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67180772"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r67180772"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67180772/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1515,
    "original_line": 1430,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67233085",
    "pull_request_review_id": null,
    "id": 67233085,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MjMzMDg1",
    "diff_hunk": "@@ -96,9 +96,18 @@ class CConnman\n         CONNECTIONS_ALL = (CONNECTIONS_IN | CONNECTIONS_OUT),\n     };\n \n+    struct Options\n+    {\n+        uint64_t nLocalServices = 0;\n+        int nMaxConnections = 0;\n+        int nMaxOutbound = 0;\n+        int nBestHeight = 0;\n+        CClientUIInterface* interface = nullptr;",
    "path": "src/net.h",
    "position": null,
    "original_position": 10,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "5b81b0aef597ebbb5e6859281c5cf217f841d287",
    "user": {
      "login": "kazcw",
      "id": 1047859,
      "node_id": "MDQ6VXNlcjEwNDc4NTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1047859?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kazcw",
      "html_url": "https://github.com/kazcw",
      "followers_url": "https://api.github.com/users/kazcw/followers",
      "following_url": "https://api.github.com/users/kazcw/following{/other_user}",
      "gists_url": "https://api.github.com/users/kazcw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kazcw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kazcw/subscriptions",
      "organizations_url": "https://api.github.com/users/kazcw/orgs",
      "repos_url": "https://api.github.com/users/kazcw/repos",
      "events_url": "https://api.github.com/users/kazcw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kazcw/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "ChainParams seems like it could qualify as an option. In the long term I think it would make more sense for the UI to connect to the various backend signals rather than the net layer having any knowledge of the UI, but that change seems outside the scope of this PR.\n",
    "created_at": "2016-06-15T19:51:27Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r67233085",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67233085"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r67233085"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67233085/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 105,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67258821",
    "pull_request_review_id": null,
    "id": 67258821,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MjU4ODIx",
    "diff_hunk": "@@ -2531,6 +2521,50 @@ void CNode::EndMessage(const char* pszCommand) UNLOCK_FUNCTION(cs_vSend)\n     LEAVE_CRITICAL_SECTION(cs_vSend);\n }\n \n+bool CConnman::ForEachNode(std::function<bool(CNode* pnode)> func)",
    "path": "src/net.cpp",
    "position": null,
    "original_position": 75,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "a01fa6c5a2e5884af64c0153dbfbd6a848128129",
    "user": {
      "login": "JeremyRubin",
      "id": 886523,
      "node_id": "MDQ6VXNlcjg4NjUyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JeremyRubin",
      "html_url": "https://github.com/JeremyRubin",
      "followers_url": "https://api.github.com/users/JeremyRubin/followers",
      "following_url": "https://api.github.com/users/JeremyRubin/following{/other_user}",
      "gists_url": "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
      "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
      "repos_url": "https://api.github.com/users/JeremyRubin/repos",
      "events_url": "https://api.github.com/users/JeremyRubin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I'll take care of it...\n",
    "created_at": "2016-06-15T22:37:14Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r67258821",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67258821"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r67258821"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67258821/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2524,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67349082",
    "pull_request_review_id": null,
    "id": 67349082,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MzQ5MDgy",
    "diff_hunk": "@@ -89,7 +89,8 @@ UniValue getinfo(const UniValue& params, bool fHelp)\n #endif\n     obj.push_back(Pair(\"blocks\",        (int)chainActive.Height()));\n     obj.push_back(Pair(\"timeoffset\",    GetTimeOffset()));\n-    obj.push_back(Pair(\"connections\",   (int)vNodes.size()));\n+    if(g_connman)\n+        obj.push_back(Pair(\"connections\",   (int)g_connman->GetNodeCount(CConnman::CONNECTIONS_ALL)));",
    "path": "src/rpc/misc.cpp",
    "position": 6,
    "original_position": 6,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "f86d0bebcba7102d68563b96b19fc1c0caa8d58f",
    "user": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following{/other_user}",
      "gists_url": "https://api.github.com/users/instagibbs/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events{/privacy}",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "nit: perhaps just add 0 if !g_connman or some relevant message\n",
    "created_at": "2016-06-16T14:00:41Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r67349082",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67349082"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r67349082"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67349082/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 93,
    "original_line": 93,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67352999",
    "pull_request_review_id": null,
    "id": 67352999,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MzUyOTk5",
    "diff_hunk": "@@ -2185,18 +2305,33 @@ uint64_t CNode::GetOutboundTargetBytesLeft()\n     return (nMaxOutboundTotalBytesSentInCycle >= nMaxOutboundLimit) ? 0 : nMaxOutboundLimit - nMaxOutboundTotalBytesSentInCycle;\n }\n \n-uint64_t CNode::GetTotalBytesRecv()\n+uint64_t CConnman::GetTotalBytesRecv()\n {\n     LOCK(cs_totalBytesRecv);\n     return nTotalBytesRecv;\n }\n \n-uint64_t CNode::GetTotalBytesSent()\n+uint64_t CConnman::GetTotalBytesSent()\n {\n     LOCK(cs_totalBytesSent);\n     return nTotalBytesSent;\n }\n \n+uint64_t CConnman::GetLocalServices() const\n+{\n+    return nLocalServices;\n+}\n+\n+void CConnman::SetBestHeight(int height)",
    "path": "src/net.cpp",
    "position": 1158,
    "original_position": 1103,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "f86d0bebcba7102d68563b96b19fc1c0caa8d58f",
    "user": {
      "login": "kazcw",
      "id": 1047859,
      "node_id": "MDQ6VXNlcjEwNDc4NTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1047859?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kazcw",
      "html_url": "https://github.com/kazcw",
      "followers_url": "https://api.github.com/users/kazcw/followers",
      "following_url": "https://api.github.com/users/kazcw/following{/other_user}",
      "gists_url": "https://api.github.com/users/kazcw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kazcw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kazcw/subscriptions",
      "organizations_url": "https://api.github.com/users/kazcw/orgs",
      "repos_url": "https://api.github.com/users/kazcw/repos",
      "events_url": "https://api.github.com/users/kazcw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kazcw/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "nit: I think this could use documentation that the setter requires cs_main to be held to prevent older values from overwriting newer values. Also, I don't see any other data that would need to be synchronized with the height via acquire/release semantics; if there are no writes before the release that need to be visible side-effects after the acquire, relaxed load/store would be clearer.\n",
    "created_at": "2016-06-16T14:21:32Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r67352999",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67352999"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r67352999"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67352999/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2456,
    "original_line": 2325,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67358096",
    "pull_request_review_id": null,
    "id": 67358096,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3MzU4MDk2",
    "diff_hunk": "@@ -2185,18 +2305,33 @@ uint64_t CNode::GetOutboundTargetBytesLeft()\n     return (nMaxOutboundTotalBytesSentInCycle >= nMaxOutboundLimit) ? 0 : nMaxOutboundLimit - nMaxOutboundTotalBytesSentInCycle;\n }\n \n-uint64_t CNode::GetTotalBytesRecv()\n+uint64_t CConnman::GetTotalBytesRecv()\n {\n     LOCK(cs_totalBytesRecv);\n     return nTotalBytesRecv;\n }\n \n-uint64_t CNode::GetTotalBytesSent()\n+uint64_t CConnman::GetTotalBytesSent()\n {\n     LOCK(cs_totalBytesSent);\n     return nTotalBytesSent;\n }\n \n+uint64_t CConnman::GetLocalServices() const\n+{\n+    return nLocalServices;\n+}\n+\n+void CConnman::SetBestHeight(int height)",
    "path": "src/net.cpp",
    "position": 1158,
    "original_position": 1103,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "f86d0bebcba7102d68563b96b19fc1c0caa8d58f",
    "user": {
      "login": "JeremyRubin",
      "id": 886523,
      "node_id": "MDQ6VXNlcjg4NjUyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JeremyRubin",
      "html_url": "https://github.com/JeremyRubin",
      "followers_url": "https://api.github.com/users/JeremyRubin/followers",
      "following_url": "https://api.github.com/users/JeremyRubin/following{/other_user}",
      "gists_url": "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
      "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
      "repos_url": "https://api.github.com/users/JeremyRubin/repos",
      "events_url": "https://api.github.com/users/JeremyRubin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "@kazcw see https://github.com/bitcoin/bitcoin/pull/8085#discussion_r67177507.\n\nI don't even think holding cs_main would help unless the new height is also checked to be > than the old one (suppose an orphaned block gets relayed, this would decrease the height).\n",
    "created_at": "2016-06-16T14:45:28Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r67358096",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67358096"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r67358096"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67358096/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2456,
    "original_line": 2325,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67374422",
    "pull_request_review_id": null,
    "id": 67374422,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3Mzc0NDIy",
    "diff_hunk": "@@ -2185,18 +2305,33 @@ uint64_t CNode::GetOutboundTargetBytesLeft()\n     return (nMaxOutboundTotalBytesSentInCycle >= nMaxOutboundLimit) ? 0 : nMaxOutboundLimit - nMaxOutboundTotalBytesSentInCycle;\n }\n \n-uint64_t CNode::GetTotalBytesRecv()\n+uint64_t CConnman::GetTotalBytesRecv()\n {\n     LOCK(cs_totalBytesRecv);\n     return nTotalBytesRecv;\n }\n \n-uint64_t CNode::GetTotalBytesSent()\n+uint64_t CConnman::GetTotalBytesSent()\n {\n     LOCK(cs_totalBytesSent);\n     return nTotalBytesSent;\n }\n \n+uint64_t CConnman::GetLocalServices() const\n+{\n+    return nLocalServices;\n+}\n+\n+void CConnman::SetBestHeight(int height)",
    "path": "src/net.cpp",
    "position": 1158,
    "original_position": 1103,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "f86d0bebcba7102d68563b96b19fc1c0caa8d58f",
    "user": {
      "login": "kazcw",
      "id": 1047859,
      "node_id": "MDQ6VXNlcjEwNDc4NTk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1047859?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kazcw",
      "html_url": "https://github.com/kazcw",
      "followers_url": "https://api.github.com/users/kazcw/followers",
      "following_url": "https://api.github.com/users/kazcw/following{/other_user}",
      "gists_url": "https://api.github.com/users/kazcw/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kazcw/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kazcw/subscriptions",
      "organizations_url": "https://api.github.com/users/kazcw/orgs",
      "repos_url": "https://api.github.com/users/kazcw/repos",
      "events_url": "https://api.github.com/users/kazcw/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kazcw/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Oh, I see... that issue is not introduced by this PR; what's called GetHeight in main and is not treated as non-decreasing is used in net as a \"best height\". Ensuring modification order for nBestHeight matches the order established by cs_main would be sufficient to maintain the current behaviour.\n\nIt does seem like it would be better to have a high-water-mark variable protected by cs_main that main code could use to signal when a new _best_ height was reached. I don't see the need for that change necessarily to be included in this PR though.\n",
    "created_at": "2016-06-16T16:09:24Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r67374422",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67374422"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r67374422"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67374422/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2456,
    "original_line": 2325,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67414899",
    "pull_request_review_id": null,
    "id": 67414899,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY3NDE0ODk5",
    "diff_hunk": "@@ -2185,18 +2305,33 @@ uint64_t CNode::GetOutboundTargetBytesLeft()\n     return (nMaxOutboundTotalBytesSentInCycle >= nMaxOutboundLimit) ? 0 : nMaxOutboundLimit - nMaxOutboundTotalBytesSentInCycle;\n }\n \n-uint64_t CNode::GetTotalBytesRecv()\n+uint64_t CConnman::GetTotalBytesRecv()\n {\n     LOCK(cs_totalBytesRecv);\n     return nTotalBytesRecv;\n }\n \n-uint64_t CNode::GetTotalBytesSent()\n+uint64_t CConnman::GetTotalBytesSent()\n {\n     LOCK(cs_totalBytesSent);\n     return nTotalBytesSent;\n }\n \n+uint64_t CConnman::GetLocalServices() const\n+{\n+    return nLocalServices;\n+}\n+\n+void CConnman::SetBestHeight(int height)",
    "path": "src/net.cpp",
    "position": 1158,
    "original_position": 1103,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "f86d0bebcba7102d68563b96b19fc1c0caa8d58f",
    "user": {
      "login": "JeremyRubin",
      "id": 886523,
      "node_id": "MDQ6VXNlcjg4NjUyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JeremyRubin",
      "html_url": "https://github.com/JeremyRubin",
      "followers_url": "https://api.github.com/users/JeremyRubin/followers",
      "following_url": "https://api.github.com/users/JeremyRubin/following{/other_user}",
      "gists_url": "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
      "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
      "repos_url": "https://api.github.com/users/JeremyRubin/repos",
      "events_url": "https://api.github.com/users/JeremyRubin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I would agree that this PR doesn't need any behavior change. Perhaps just renaming BestHeight -> LastSeenHeight or something. Also a proper best height is semantically unclear -- is it MaxHeight or MaxWorkHeight\n",
    "created_at": "2016-06-16T20:07:37Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r67414899",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67414899"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r67414899"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/67414899/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2456,
    "original_line": 2325,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/68712667",
    "pull_request_review_id": null,
    "id": 68712667,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4NzEyNjY3",
    "diff_hunk": "@@ -1423,9 +1424,14 @@ bool AppInit2(boost::thread_group& threadGroup, CScheduler& scheduler)\n     if (GetBoolArg(\"-listenonion\", DEFAULT_LISTEN_ONION))\n         StartTorControl(threadGroup, scheduler);\n \n+    Discover(threadGroup);\n+\n+    // Map ports with UPnP\n+    MapPort(GetBoolArg(\"-upnp\", DEFAULT_UPNP));",
    "path": "src/init.cpp",
    "position": null,
    "original_position": 17,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "2258f0730ee9034f951a217d4e645125cbe98a89",
    "user": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Yes, I plan to move the remaining args into Options as a next step. There are a handful left to go still.\n",
    "created_at": "2016-06-28T07:58:40Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r68712667",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/68712667"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r68712667"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/68712667/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 1515,
    "original_line": 1430,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/68712690",
    "pull_request_review_id": null,
    "id": 68712690,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4NzEyNjkw",
    "diff_hunk": "@@ -1962,7 +1967,8 @@ bool CConnman::Start(boost::thread_group& threadGroup, CScheduler& scheduler, ui\n \n     SetBestHeight(nBestHeightIn);\n \n-    uiInterface.InitMessage(_(\"Loading addresses...\"));\n+    clientInterface = interfaceIn;\n+    clientInterface->InitMessage(_(\"Loading addresses...\"));",
    "path": "src/net.cpp",
    "position": null,
    "original_position": 72,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "cb9c81ee780ca153e471cf275a815e507c94dec6",
    "user": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Yep, thanks.\n",
    "created_at": "2016-06-28T07:58:51Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r68712690",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/68712690"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r68712690"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/68712690/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 1971,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/68718012",
    "pull_request_review_id": null,
    "id": 68718012,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4NzE4MDEy",
    "diff_hunk": "@@ -2185,18 +2305,33 @@ uint64_t CNode::GetOutboundTargetBytesLeft()\n     return (nMaxOutboundTotalBytesSentInCycle >= nMaxOutboundLimit) ? 0 : nMaxOutboundLimit - nMaxOutboundTotalBytesSentInCycle;\n }\n \n-uint64_t CNode::GetTotalBytesRecv()\n+uint64_t CConnman::GetTotalBytesRecv()\n {\n     LOCK(cs_totalBytesRecv);\n     return nTotalBytesRecv;\n }\n \n-uint64_t CNode::GetTotalBytesSent()\n+uint64_t CConnman::GetTotalBytesSent()\n {\n     LOCK(cs_totalBytesSent);\n     return nTotalBytesSent;\n }\n \n+uint64_t CConnman::GetLocalServices() const\n+{\n+    return nLocalServices;\n+}\n+\n+void CConnman::SetBestHeight(int height)",
    "path": "src/net.cpp",
    "position": 1158,
    "original_position": 1103,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "f86d0bebcba7102d68563b96b19fc1c0caa8d58f",
    "user": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Yea, I don't believe this deviates from the current behavior much, other than slightly obfuscating the exact current known height, since the value is grabbed at connection time now rather than during the handshake.\n\nThough there's the advantage of using the accurate cached value based on a push event, rather than requiring a lock-and-pull as before. I don't think there's any need to try to replicate that old behavior here.\n",
    "created_at": "2016-06-28T08:37:48Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r68718012",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/68718012"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r68718012"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/68718012/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2456,
    "original_line": 2325,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/77985078",
    "pull_request_review_id": null,
    "id": 77985078,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDc3OTg1MDc4",
    "diff_hunk": "@@ -95,28 +95,32 @@ CNode* FindNode(const CService& ip);\n CNode* FindNode(const NodeId id); //TODO: Remove this\n bool OpenNetworkConnection(const CAddress& addrConnect, bool fCountFailure, CSemaphoreGrant *grantOutbound = NULL, const char *strDest = NULL, bool fOneShot = false, bool fFeeler = false);\n \n-struct ListenSocket {\n-    SOCKET socket;\n-    bool whitelisted;\n-\n-    ListenSocket(SOCKET socket, bool whitelisted) : socket(socket), whitelisted(whitelisted) {}\n-};\n-\n class CConnman\n {\n public:\n     CConnman();\n     ~CConnman();\n     bool Start(boost::thread_group& threadGroup, std::string& strNodeError);\n     void Stop();\n+    bool BindListenPort(const CService &bindAddr, std::string& strError, bool fWhitelisted = false);\n+\n private:\n+    struct ListenSocket {",
    "path": "src/net.h",
    "position": null,
    "original_position": 21,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "d4fce84b9a87b2877fb0a9fa47bf5870a005657a",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Just a tip, and not a suggestion to change in this PR right now, you can just say 'struct ListenSocket;' here, and fully define it in the cpp file as 'struct CConnman::ListenSocket { ... };', since I don't think any of the users of this class need the fully materialized definition.\n",
    "created_at": "2016-09-08T10:56:57Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r77985078",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/77985078"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r77985078"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/77985078/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 108,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/77985660",
    "pull_request_review_id": null,
    "id": 77985660,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDc3OTg1NjYw",
    "diff_hunk": "@@ -347,12 +393,6 @@ class CNode\n     const uint64_t nKeyedNetGroup;\n protected:\n \n-    // Denial-of-service detection/prevention\n-    // Key is IP address, value is banned-until-time\n-    static banmap_t setBanned;",
    "path": "src/net.h",
    "position": 487,
    "original_position": 99,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "ac198b7dc479d32862cee9c2ae9b88e88f084142",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I am _so_ happy to see these globals-disguised-as-static-fields disappear!\n",
    "created_at": "2016-09-08T11:01:44Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r77985660",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/77985660"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r77985660"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/77985660/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 379,
    "original_line": null,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/77986785",
    "pull_request_review_id": null,
    "id": 77986785,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDc3OTg2Nzg1",
    "diff_hunk": "@@ -489,6 +489,8 @@ UniValue setban(const UniValue& params, bool fHelp)\n                             + HelpExampleCli(\"setban\", \"\\\"192.168.0.0/24\\\" \\\"add\\\"\")\n                             + HelpExampleRpc(\"setban\", \"\\\"192.168.0.6\\\", \\\"add\\\", 86400\")\n                             );\n+    if(!g_connman)",
    "path": "src/rpc/net.cpp",
    "position": 185,
    "original_position": 4,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "ac198b7dc479d32862cee9c2ae9b88e88f084142",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Style nit: space after if.\n",
    "created_at": "2016-09-08T11:11:31Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r77986785",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/77986785"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r77986785"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/77986785/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 479,
    "original_line": 492,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/77992333",
    "pull_request_review_id": null,
    "id": 77992333,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDc3OTkyMzMz",
    "diff_hunk": "@@ -484,11 +484,12 @@ void MaybeSetPeerAsAnnouncingHeaderAndIDs(const CNodeState* nodestate, CNode* pf\n         if (lNodesAnnouncingHeaderAndIDs.size() >= 3) {\n             // As per BIP152, we only get 3 of our peers to announce\n             // blocks using compact encodings.\n-            CNode* pnodeStop = FindNode(lNodesAnnouncingHeaderAndIDs.front());\n-            if (pnodeStop) {\n+            bool found = connman.ForNode(lNodesAnnouncingHeaderAndIDs.front(), [fAnnounceUsingCMPCTBLOCK, nCMPCTBLOCKVersion](CNode* pnodeStop){",
    "path": "src/main.cpp",
    "position": 49,
    "original_position": 15,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "55af13c9fa598e33630723d1d7aef4df7ee033f7",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Not being very familiar with c++11 lambdas yet, what is the reason for explicitly listing the captures, rather than using [=] ?\n",
    "created_at": "2016-09-08T12:01:29Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r77992333",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/77992333"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r77992333"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/77992333/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 481,
    "original_line": 487,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/77994574",
    "pull_request_review_id": null,
    "id": 77994574,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDc3OTk0NTc0",
    "diff_hunk": "@@ -2671,6 +2659,63 @@ void CNode::EndMessage(const char* pszCommand) UNLOCK_FUNCTION(cs_vSend)\n     LEAVE_CRITICAL_SECTION(cs_vSend);\n }\n \n+bool CConnman::ForNode(NodeId id, std::function<bool(CNode* pnode)> func)\n+{\n+    CNode* found = nullptr;\n+    LOCK(cs_vNodes);\n+    for (auto&& pnode : vNodes) {\n+        if(pnode->id == id) {\n+            found = pnode;\n+            break;\n+        }\n+    }\n+    return found != nullptr && func(found);\n+}\n+\n+bool CConnman::ForEachNode(std::function<bool(CNode* pnode)> func)\n+{\n+    LOCK(cs_vNodes);\n+    for (auto&& node : vNodes)\n+        if(!func(node))\n+            return false;\n+    return true;\n+}\n+\n+bool CConnman::ForEachNode(std::function<bool(const CNode* pnode)> func) const\n+{\n+    LOCK(cs_vNodes);\n+    for (const auto& node : vNodes)\n+        if(!func(node))\n+            return false;\n+    return true;\n+}\n+\n+bool CConnman::ForEachNodeThen(std::function<bool(CNode* pnode)> pre, std::function<void()> post)\n+{\n+    bool ret = true;\n+    LOCK(cs_vNodes);\n+    for (auto&& node : vNodes)",
    "path": "src/net.cpp",
    "position": null,
    "original_position": 128,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "55af13c9fa598e33630723d1d7aef4df7ee033f7",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "A universal reference rvalue seems unnecessary here, since they're just pointers you can copy.\n",
    "created_at": "2016-09-08T12:20:02Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r77994574",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/77994574"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r77994574"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/77994574/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2697,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/77995773",
    "pull_request_review_id": null,
    "id": 77995773,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDc3OTk1Nzcz",
    "diff_hunk": "@@ -2041,9 +2039,13 @@ bool StartNode(CConnman& connman, boost::thread_group& threadGroup, CScheduler&\n     return ret;\n }\n \n-bool CConnman::Start(boost::thread_group& threadGroup, CScheduler& scheduler, std::string& strNodeError)\n+NodeId CConnman::GetNewNodeId()\n {\n+    return nLastNodeId.fetch_add(1, std::memory_order_relaxed);",
    "path": "src/net.cpp",
    "position": null,
    "original_position": 43,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "f1bd45d11ed47084a516964d16b08c991ee97831",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Neat.\n",
    "created_at": "2016-09-08T12:29:26Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r77995773",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/77995773"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r77995773"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/77995773/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2044,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/78002025",
    "pull_request_review_id": null,
    "id": 78002025,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDc4MDAyMDI1",
    "diff_hunk": "@@ -2337,6 +2338,16 @@ uint64_t CConnman::GetLocalServices() const\n     return nLocalServices;\n }\n \n+void CConnman::SetBestHeight(int height)\n+{\n+    nBestHeight.store(height, std::memory_order_release);",
    "path": "src/net.cpp",
    "position": null,
    "original_position": 89,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "148163c9b1ce04ec9fa9c8ff9a4289520bd92127",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I don't think this matters much.\n",
    "created_at": "2016-09-08T13:11:44Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r78002025",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/78002025"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r78002025"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/78002025/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2458,
    "original_line": 2343,
    "side": "RIGHT",
    "in_reply_to_id": 67177507
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/78002897",
    "pull_request_review_id": null,
    "id": 78002897,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDc4MDAyODk3",
    "diff_hunk": "@@ -109,9 +109,18 @@ class CConnman\n         CONNECTIONS_ALL = (CONNECTIONS_IN | CONNECTIONS_OUT),\n     };\n \n+    struct Options\n+    {\n+        ServiceFlags nLocalServices = NODE_NONE;\n+        ServiceFlags nRelevantServices = NODE_NONE;\n+        int nMaxConnections = 0;\n+        int nMaxOutbound = 0;\n+        int nBestHeight = 0;\n+        CClientUIInterface* interface = nullptr;\n+    };\n     CConnman();\n     ~CConnman();\n-    bool Start(boost::thread_group& threadGroup, CScheduler& scheduler, ServiceFlags nLocalServicesIn, ServiceFlags nRelevantServicesIn, int nMaxConnectionsIn, int nMaxOutboundIn, int nBestHeightIn, CClientUIInterface* interfaceIn, std::string& strNodeError);\n+    bool Start(boost::thread_group& threadGroup, CScheduler& scheduler, std::string& strNodeError, Options options);",
    "path": "src/net.h",
    "position": null,
    "original_position": 16,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "9f6a3ea5e2842f0b123db79dfb238a6f7fe2688c",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "rvalue reference for options?\n\nEDIT: nevermind, all of the fields are primitives.\n",
    "created_at": "2016-09-08T13:17:20Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r78002897",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/78002897"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r78002897"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/78002897/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 123,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/78003400",
    "pull_request_review_id": null,
    "id": 78003400,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDc4MDAzNDAw",
    "diff_hunk": "@@ -484,11 +484,12 @@ void MaybeSetPeerAsAnnouncingHeaderAndIDs(const CNodeState* nodestate, CNode* pf\n         if (lNodesAnnouncingHeaderAndIDs.size() >= 3) {\n             // As per BIP152, we only get 3 of our peers to announce\n             // blocks using compact encodings.\n-            CNode* pnodeStop = FindNode(lNodesAnnouncingHeaderAndIDs.front());\n-            if (pnodeStop) {\n+            bool found = connman.ForNode(lNodesAnnouncingHeaderAndIDs.front(), [fAnnounceUsingCMPCTBLOCK, nCMPCTBLOCKVersion](CNode* pnodeStop){",
    "path": "src/main.cpp",
    "position": 49,
    "original_position": 15,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "55af13c9fa598e33630723d1d7aef4df7ee033f7",
    "user": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Just personal preference, I like being explicit about what the lambda is changing. In this case, = is probably desirable, it's [&] that I try to avoid.\n",
    "created_at": "2016-09-08T13:20:16Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r78003400",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/78003400"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r78003400"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/78003400/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 481,
    "original_line": 487,
    "side": "RIGHT",
    "in_reply_to_id": 77992333
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/78003705",
    "pull_request_review_id": null,
    "id": 78003705,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDc4MDAzNzA1",
    "diff_hunk": "@@ -2671,6 +2659,63 @@ void CNode::EndMessage(const char* pszCommand) UNLOCK_FUNCTION(cs_vSend)\n     LEAVE_CRITICAL_SECTION(cs_vSend);\n }\n \n+bool CConnman::ForNode(NodeId id, std::function<bool(CNode* pnode)> func)\n+{\n+    CNode* found = nullptr;\n+    LOCK(cs_vNodes);\n+    for (auto&& pnode : vNodes) {\n+        if(pnode->id == id) {\n+            found = pnode;\n+            break;\n+        }\n+    }\n+    return found != nullptr && func(found);\n+}\n+\n+bool CConnman::ForEachNode(std::function<bool(CNode* pnode)> func)\n+{\n+    LOCK(cs_vNodes);\n+    for (auto&& node : vNodes)\n+        if(!func(node))\n+            return false;\n+    return true;\n+}\n+\n+bool CConnman::ForEachNode(std::function<bool(const CNode* pnode)> func) const\n+{\n+    LOCK(cs_vNodes);\n+    for (const auto& node : vNodes)\n+        if(!func(node))\n+            return false;\n+    return true;\n+}\n+\n+bool CConnman::ForEachNodeThen(std::function<bool(CNode* pnode)> pre, std::function<void()> post)\n+{\n+    bool ret = true;\n+    LOCK(cs_vNodes);\n+    for (auto&& node : vNodes)",
    "path": "src/net.cpp",
    "position": null,
    "original_position": 128,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "55af13c9fa598e33630723d1d7aef4df7ee033f7",
    "user": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Yea, this is just a habit I've picked up. See the \"notes\" here: http://en.cppreference.com/w/cpp/language/range-for\n",
    "created_at": "2016-09-08T13:22:08Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r78003705",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/78003705"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r78003705"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/78003705/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 2697,
    "side": "RIGHT",
    "in_reply_to_id": 77994574
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/78004260",
    "pull_request_review_id": null,
    "id": 78004260,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDc4MDA0MjYw",
    "diff_hunk": "@@ -484,11 +484,12 @@ void MaybeSetPeerAsAnnouncingHeaderAndIDs(const CNodeState* nodestate, CNode* pf\n         if (lNodesAnnouncingHeaderAndIDs.size() >= 3) {\n             // As per BIP152, we only get 3 of our peers to announce\n             // blocks using compact encodings.\n-            CNode* pnodeStop = FindNode(lNodesAnnouncingHeaderAndIDs.front());\n-            if (pnodeStop) {\n+            bool found = connman.ForNode(lNodesAnnouncingHeaderAndIDs.front(), [fAnnounceUsingCMPCTBLOCK, nCMPCTBLOCKVersion](CNode* pnodeStop){",
    "path": "src/main.cpp",
    "position": 49,
    "original_position": 15,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "55af13c9fa598e33630723d1d7aef4df7ee033f7",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Seems reasonable.\n",
    "created_at": "2016-09-08T13:25:08Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r78004260",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/78004260"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r78004260"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/78004260/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 481,
    "original_line": 487,
    "side": "RIGHT",
    "in_reply_to_id": 77992333
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/78004355",
    "pull_request_review_id": null,
    "id": 78004355,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDc4MDA0MzU1",
    "diff_hunk": "@@ -95,28 +95,32 @@ CNode* FindNode(const CService& ip);\n CNode* FindNode(const NodeId id); //TODO: Remove this\n bool OpenNetworkConnection(const CAddress& addrConnect, bool fCountFailure, CSemaphoreGrant *grantOutbound = NULL, const char *strDest = NULL, bool fOneShot = false, bool fFeeler = false);\n \n-struct ListenSocket {\n-    SOCKET socket;\n-    bool whitelisted;\n-\n-    ListenSocket(SOCKET socket, bool whitelisted) : socket(socket), whitelisted(whitelisted) {}\n-};\n-\n class CConnman\n {\n public:\n     CConnman();\n     ~CConnman();\n     bool Start(boost::thread_group& threadGroup, std::string& strNodeError);\n     void Stop();\n+    bool BindListenPort(const CService &bindAddr, std::string& strError, bool fWhitelisted = false);\n+\n private:\n+    struct ListenSocket {",
    "path": "src/net.h",
    "position": null,
    "original_position": 21,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "d4fce84b9a87b2877fb0a9fa47bf5870a005657a",
    "user": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Hmm, I've never had luck with forward-declaring nested classes. I'll give it a shot!\n",
    "created_at": "2016-09-08T13:25:40Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r78004355",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/78004355"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r78004355"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/78004355/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 108,
    "side": "RIGHT",
    "in_reply_to_id": 77985078
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/78005054",
    "pull_request_review_id": null,
    "id": 78005054,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDc4MDA1MDU0",
    "diff_hunk": "@@ -109,9 +109,18 @@ class CConnman\n         CONNECTIONS_ALL = (CONNECTIONS_IN | CONNECTIONS_OUT),\n     };\n \n+    struct Options\n+    {\n+        ServiceFlags nLocalServices = NODE_NONE;\n+        ServiceFlags nRelevantServices = NODE_NONE;\n+        int nMaxConnections = 0;\n+        int nMaxOutbound = 0;\n+        int nBestHeight = 0;\n+        CClientUIInterface* interface = nullptr;\n+    };\n     CConnman();\n     ~CConnman();\n-    bool Start(boost::thread_group& threadGroup, CScheduler& scheduler, ServiceFlags nLocalServicesIn, ServiceFlags nRelevantServicesIn, int nMaxConnectionsIn, int nMaxOutboundIn, int nBestHeightIn, CClientUIInterface* interfaceIn, std::string& strNodeError);\n+    bool Start(boost::thread_group& threadGroup, CScheduler& scheduler, std::string& strNodeError, Options options);",
    "path": "src/net.h",
    "position": null,
    "original_position": 16,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "9f6a3ea5e2842f0b123db79dfb238a6f7fe2688c",
    "user": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "They're passed by value so that they can be std::move'd in if desired, but as-is, all members are fundamental, so they'll all be copied anyway\n",
    "created_at": "2016-09-08T13:29:20Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r78005054",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/78005054"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r78005054"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/78005054/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 123,
    "side": "RIGHT",
    "in_reply_to_id": 78002897
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/78005094",
    "pull_request_review_id": null,
    "id": 78005094,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDc4MDA1MDk0",
    "diff_hunk": "@@ -484,11 +484,12 @@ void MaybeSetPeerAsAnnouncingHeaderAndIDs(const CNodeState* nodestate, CNode* pf\n         if (lNodesAnnouncingHeaderAndIDs.size() >= 3) {\n             // As per BIP152, we only get 3 of our peers to announce\n             // blocks using compact encodings.\n-            CNode* pnodeStop = FindNode(lNodesAnnouncingHeaderAndIDs.front());\n-            if (pnodeStop) {\n+            bool found = connman.ForNode(lNodesAnnouncingHeaderAndIDs.front(), [fAnnounceUsingCMPCTBLOCK, nCMPCTBLOCKVersion](CNode* pnodeStop){",
    "path": "src/main.cpp",
    "position": 49,
    "original_position": 15,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "55af13c9fa598e33630723d1d7aef4df7ee033f7",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following{/other_user}",
      "gists_url": "https://api.github.com/users/sipa/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sipa/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "It seems you can use [=,x&,y&,...] as well to mean \"capture everything by value, but x and y by reference\", neat.\n",
    "created_at": "2016-09-08T13:29:35Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r78005094",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/78005094"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r78005094"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/78005094/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 481,
    "original_line": 487,
    "side": "RIGHT",
    "in_reply_to_id": 77992333
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/78007960",
    "pull_request_review_id": null,
    "id": 78007960,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDc4MDA3OTYw",
    "diff_hunk": "@@ -484,11 +484,12 @@ void MaybeSetPeerAsAnnouncingHeaderAndIDs(const CNodeState* nodestate, CNode* pf\n         if (lNodesAnnouncingHeaderAndIDs.size() >= 3) {\n             // As per BIP152, we only get 3 of our peers to announce\n             // blocks using compact encodings.\n-            CNode* pnodeStop = FindNode(lNodesAnnouncingHeaderAndIDs.front());\n-            if (pnodeStop) {\n+            bool found = connman.ForNode(lNodesAnnouncingHeaderAndIDs.front(), [fAnnounceUsingCMPCTBLOCK, nCMPCTBLOCKVersion](CNode* pnodeStop){",
    "path": "src/main.cpp",
    "position": 49,
    "original_position": 15,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "55af13c9fa598e33630723d1d7aef4df7ee033f7",
    "user": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following{/other_user}",
      "gists_url": "https://api.github.com/users/theuni/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theuni/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Ah, perfect. That's great as a general rule.\n",
    "created_at": "2016-09-08T13:44:00Z",
    "updated_at": "2016-09-08T17:09:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r78007960",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/78007960"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r78007960"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/78007960/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 481,
    "original_line": 487,
    "side": "RIGHT",
    "in_reply_to_id": 77992333
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/78291571",
    "pull_request_review_id": null,
    "id": 78291571,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDc4MjkxNTcx",
    "diff_hunk": "@@ -5238,7 +5254,7 @@ bool static ProcessMessage(CNode* pfrom, string strCommand, CDataStream& vRecv,\n                         nodestate->nBlocksInFlight < MAX_BLOCKS_IN_TRANSIT_PER_PEER &&\n                         (!IsWitnessEnabled(chainActive.Tip(), chainparams.GetConsensus()) || State(pfrom->GetId())->fHaveWitness)) {\n                         inv.type |= nFetchFlags;\n-                        if (nodestate->fProvidesHeaderAndIDs && !(nLocalServices & NODE_WITNESS))\n+                        if (nodestate->fProvidesHeaderAndIDs && !(pfrom->GetLocalServices() & NODE_WITNESS))",
    "path": "src/main.cpp",
    "position": 309,
    "original_position": 309,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "user": {
      "login": "rebroad",
      "id": 1530283,
      "node_id": "MDQ6VXNlcjE1MzAyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1530283?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rebroad",
      "html_url": "https://github.com/rebroad",
      "followers_url": "https://api.github.com/users/rebroad/followers",
      "following_url": "https://api.github.com/users/rebroad/following{/other_user}",
      "gists_url": "https://api.github.com/users/rebroad/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rebroad/subscriptions",
      "organizations_url": "https://api.github.com/users/rebroad/orgs",
      "repos_url": "https://api.github.com/users/rebroad/repos",
      "events_url": "https://api.github.com/users/rebroad/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rebroad/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I think the current naming is a little confusing as to be a function of pfrom implies that the \"Local\" Services are local to pfrom. \"nLocalServices\" seemed more intuitively compatible with talking about the services local to our peer. \n",
    "created_at": "2016-09-11T10:02:30Z",
    "updated_at": "2016-09-11T10:02:30Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r78291571",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/78291571"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r78291571"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/78291571/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 5257,
    "original_line": 5257,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/78291920",
    "pull_request_review_id": null,
    "id": 78291920,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDc4MjkxOTIw",
    "diff_hunk": "@@ -4984,7 +5019,7 @@ bool static ProcessMessage(CNode* pfrom, string strCommand, CDataStream& vRecv,\n         }\n \n         // Disconnect if we connected to ourself\n-        if (nNonce == nLocalHostNonce && nNonce > 1)\n+        if (pfrom->fInbound && !connman.CheckIncomingNonce(nNonce))",
    "path": "src/main.cpp",
    "position": 232,
    "original_position": 232,
    "commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "original_commit_id": "0103c5b90fa61b5d159a825fcb5a05ca31d0d1c3",
    "user": {
      "login": "rebroad",
      "id": 1530283,
      "node_id": "MDQ6VXNlcjE1MzAyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1530283?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rebroad",
      "html_url": "https://github.com/rebroad",
      "followers_url": "https://api.github.com/users/rebroad/followers",
      "following_url": "https://api.github.com/users/rebroad/following{/other_user}",
      "gists_url": "https://api.github.com/users/rebroad/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rebroad/subscriptions",
      "organizations_url": "https://api.github.com/users/rebroad/orgs",
      "repos_url": "https://api.github.com/users/rebroad/repos",
      "events_url": "https://api.github.com/users/rebroad/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rebroad/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "The code isn't as simple as it used to be - what was wrong with \"nNonce == nLocalHostNonce\"? it was so much clearer what the code was doing before...\n",
    "created_at": "2016-09-11T10:22:52Z",
    "updated_at": "2016-09-11T10:22:52Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r78291920",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/78291920"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/8085#discussion_r78291920"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/8085"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/78291920/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 5022,
    "original_line": 5022,
    "side": "RIGHT"
  }
]