gmaxwell,2019-02-25T09:56:18Z,Regretful concept ACK.  Logs are also problematic (people having one problem see the false 'errors' and waste their time trying to eliminate them) but less urgent and can be addresses separately. ,https://github.com/bitcoin/bitcoin/pull/15471#issuecomment-466948373,466948373,
DrahtBot,2019-02-25T11:16:55Z,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#14954](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/14954.html) (build: Require python 3.5 by MarcoFalke)\n\",https://github.com/bitcoin/bitcoin/pull/15471#issuecomment-466973763,466973763,
Sjors,2019-02-25T12:10:35Z,"Concept ACK and ~tACK 6154e50~ (update: MarcoFalke found an issue). Note that there's currently no test for `-alertnotify` large fork notifications; `feature_notifications.py` sets this param on the test nodes, but doesn't do anything with it. Add a TODO?\n\nMaybe we can put this back in if something like [BIP 320](https://github.com/bitcoin/bips/blob/master/bip-0320.mediawiki) is accepted, see ",https://github.com/bitcoin/bitcoin/pull/15471#issuecomment-466988716,466988716,
laanwj,2019-02-25T12:16:17Z,"> Note that there's currently no test for `-alertnotify` large fork notifications; `feature_notifications.py` sets this param on the test nodes, but doesn't do anything with it. Add a TODO?\n\nOK, makes sense.",https://github.com/bitcoin/bitcoin/pull/15471#issuecomment-466990312,466990312,
luke-jr,2019-02-25T13:42:16Z,"I haven't seen community support for this protocol change. Do we really want to set a precedent for simply giving in to miner protocol violations?\n\nEdit: To be clear, we should do *something* - I just don't know what that something is, and simply giving in seems like a bad idea.",https://github.com/bitcoin/bitcoin/pull/15471#issuecomment-467015266,467015266,
Sjors,2019-02-25T14:11:09Z,"It seems we have three or four options:\n1. Add a meta warning that the warning is probably nonsense, but could be serious\n2. Drop the warning (this PR  currently)\n3. Implement BIP 320:\n  a) can be entirely dropped in a future release (so it becomes the current PR)\n  b) only if it happens to match existing behavior\n  c) if it matches the BetterHash proposal\n4. Make the heuristics a bi",https://github.com/bitcoin/bitcoin/pull/15471#issuecomment-467024849,467024849,
laanwj,2019-02-25T14:13:19Z,"This is not a ""protocol change"", it doesn't change the P2P code at all.\n\nI'd say we should simply do this. An alternative or better warning mechanism can be added later if someone implements it.\n\nIf not, this is going to miss 0.18, simple as that, there's no time to do a lot here.\n",https://github.com/bitcoin/bitcoin/pull/15471#issuecomment-467025680,467025680,
luke-jr,2019-02-25T14:13:47Z,"Perhaps:\n\n5. Change the warning to indicate miner protocol violations as a alternative possibility to an upgrade.\n\n?",https://github.com/bitcoin/bitcoin/pull/15471#issuecomment-467025864,467025864,
laanwj,2019-02-25T14:15:20Z,"Could do that for the warning in the log. I really think we should remove the one from the GUI and RPC. \nprotocol violations are not a *alternative possibility* they're the order of the day and we know that, claiming anything else is just dishonest.",https://github.com/bitcoin/bitcoin/pull/15471#issuecomment-467026489,467026489,
MarcoFalke,2019-02-25T14:33:08Z,"ACK on removing the ""50 check"", but NACK on removing the versionbits softfork activation warning (or test)",https://github.com/bitcoin/bitcoin/pull/15471#issuecomment-467032895,467032895,
Sjors,2019-02-25T14:37:34Z,Good catch @MarcoFalke. It seems like option 4 should be fairly easy to implement in the `for (int bit = 0; bit < VERSIONBITS_NUM_BITS; bit++)` loop above.,https://github.com/bitcoin/bitcoin/pull/15471#issuecomment-467034525,467034525,
laanwj,2019-02-25T15:00:20Z,"Added TODO and restored `feature_versionbits_warning.py` apart from the part testing for the specific warning.\n\n> I actually think option 4 might be better; just turn `nUpgraded` in a vector and check `nUpgraded > 100/2` for each bit.\n\nI don't think this is better: when random noise is inserted in the version bits, won't the chance for individual bits still be 50% on average? Could tweak t",https://github.com/bitcoin/bitcoin/pull/15471#issuecomment-467043213,467043213,
Sjors,2019-02-25T15:31:27Z,"> when random noise is inserted in the version bits, won't the chance for individual bits still be 50% on average\n\nDepends on the average percentage of bits set per block. @alecalve you don't happen to have a chart? :-)   (I'll make a measurement...)",https://github.com/bitcoin/bitcoin/pull/15471#issuecomment-467055534,467055534,
TheBlueMatt,2019-02-25T15:42:13Z,"Regretful Concept ACK for either this or reducing the VERSIONBITS_NUM_BITS constant. I don't have a strong feeling either way, whatever the implementer wants to do.",https://github.com/bitcoin/bitcoin/pull/15471#issuecomment-467059908,467059908,
MarcoFalke,2019-02-25T16:13:53Z,utACK ef362f27733e9281062b4e65a26e5696f34692b4,https://github.com/bitcoin/bitcoin/pull/15471#issuecomment-467072737,467072737,
luke-jr,2019-02-25T18:24:02Z,"This IS a protocol change. The version field indicate a rule change in some undefined way. Miners filling it with garbage is redefining it to a nonce instead. Removing the warning is conceding the protocol change.\n\nIt's not much different than merging code for a miner-decided and miner-enforced extension block.",https://github.com/bitcoin/bitcoin/pull/15471#issuecomment-467121903,467121903,
Sjors,2019-02-25T18:36:27Z,"I wrote a script that checks all block versions form the tip down to 470,000. When it finds 50 out of a rolling 100 blocks with a version number other than `100000000000000000000000000000` it starts an alert. It stops the alert when it finds 100 blocks with version `100000000000000000000000000000`. This happened 66 times. It roughly represents how many times a user could have seen a fresh alert.\",https://github.com/bitcoin/bitcoin/pull/15471#issuecomment-467127226,467127226,
gmaxwell,2019-02-25T19:01:41Z,"> Edit: To be clear, we should do something\n\nSomething simple like a removal is the only 'something' we can do for the 0.18 release without blowing up the schedule.  Removing this warning for now doesn't preclude doing something else later.\n\nKeep in mind at the end of the day this issue is just a spurious warning. We should conserve our efforts for important issues.  It's hard to justify m",https://github.com/bitcoin/bitcoin/pull/15471#issuecomment-467137209,467137209,
Sjors,2019-02-25T19:02:07Z,"Some clarification: this PR does not remove alerts for unknown BIP9 activations. Here's the code from master:\n\n<img width=""999"" alt=""schermafbeelding 2019-02-25 om 19 54 29"" src=""https://user-images.githubusercontent.com/10217/53360946-2f3ca980-3937-11e9-976f-0f8701a86523.png"">\n\nLine 2244 displays a warning if an unknown rule is activated with more than the BIP9 activation threshold. This ",https://github.com/bitcoin/bitcoin/pull/15471#issuecomment-467137377,467137377,
Sjors,2019-02-25T19:14:42Z,"Actually implementing per bit counting seems a bit involved (expand `BIP9Stats` and/or `ThresholdState`?), so I think I agree with @gmaxwell to just remove the spurious warnings completely for now and then doing something better later.",https://github.com/bitcoin/bitcoin/pull/15471#issuecomment-467142537,467142537,
gmaxwell,2019-02-25T20:15:11Z,"There are lots of other options, for example we could move version signing to be in the coinbase txn. As an aside, the existing warnings are probably ruined now-- if you google them you find lots of answers where people are being told they're spurious.  So in the case they're real users won't be correctly warned, and the false positives still cause damage with users trying to 'fix' an unfixable no",https://github.com/bitcoin/bitcoin/pull/15471#issuecomment-467165855,467165855,
luke-jr,2019-02-25T21:29:17Z,"Per-bit counting seems like a fair bug fix for now. I don't know how complicated it would be, but as a bugfix, there's no freeze.\n\nIf we remove the warning, it may be hard to add it back later if miners are still abusing the version field.\n\nBad search result advice can be mitigated by changing the message language.",https://github.com/bitcoin/bitcoin/pull/15471#issuecomment-467190764,467190764,
practicalswift,2019-02-25T23:04:42Z,Concept ACK,https://github.com/bitcoin/bitcoin/pull/15471#issuecomment-467220720,467220720,
moneyball,2019-02-26T00:26:26Z,"Concept ACK although unclear to me the best approach now and later. I too was alarmed and confused when I first saw this message, Google'd, and found others sharing their concerns on Reddit. Agree it needs to be dealt with somehow in v0.18.",https://github.com/bitcoin/bitcoin/pull/15471#issuecomment-467240774,467240774,
jonasschnelli,2019-02-26T08:08:36Z,utACK ef362f27733e9281062b4e65a26e5696f34692b4,https://github.com/bitcoin/bitcoin/pull/15471#issuecomment-467338310,467338310,
MarcoFalke,2019-02-26T14:30:00Z,"This is a minimal patch. A more involved solution (like BIP320 #13972 or similar) with a new reworded warning can later be added, if desired",https://github.com/bitcoin/bitcoin/pull/15471#issuecomment-467459567,467459567,
jtimon,2019-10-05T20:23:39Z,"I tend to prefer #13972 but as other point out, just disabling warnings is easy and they can be simply re-added later when it's clearer how they should be.\nPosthumous concept ACK. ",https://github.com/bitcoin/bitcoin/pull/15471#issuecomment-538685631,538685631,
laanwj,2019-10-06T09:18:44Z,"Yes, things take so long to bikeshed here that getting something in that solves the immediate problem is generally worth it.\n(FWIW I prefer #13972 too but I think there's no realistic chance of it making it in)",https://github.com/bitcoin/bitcoin/pull/15471#issuecomment-538726984,538726984,
MarcoFalke,2019-02-25T14:31:23Z,"Why is this test removed?\n\nthis warning is still in the code and is still triggered in the gui, rpc and alertnotify",https://github.com/bitcoin/bitcoin/pull/15471#discussion_r259849146,259849146,test/functional/feature_versionbits_warning.py
Sjors,2019-02-25T14:34:21Z,"Oh oops, I missed that as well in my review, that should probably stay.",https://github.com/bitcoin/bitcoin/pull/15471#discussion_r259850481,259850481,test/functional/feature_versionbits_warning.py
laanwj,2019-02-25T14:43:08Z,"It seemed like this test was failing locally, will take a look.",https://github.com/bitcoin/bitcoin/pull/15471#discussion_r259854517,259854517,test/functional/feature_versionbits_warning.py
