laanwj,2015-04-23T15:28:48Z,"Agree on the simplification here, some comments:\n- How will this interact with `-onlynet=ipv6`? I hope we don't end up disabling proxying of names, or connecting to names, when IPv4 is disabled?\n- Please define a `NET_NAME` or such constant, and alias it to `NET_IPV4`. This makes it clearer that we use the `[NET_IPV4]`  proxy for (not further specified) names as well\n",https://github.com/bitcoin/bitcoin/pull/6053#issuecomment-95625355,95625355,
Diapolo,2015-04-24T06:44:38Z,"@laanwj Should I just alias NET_IPV4 and NET_NAME or should NET_NAME be an own proxy, which could potentially be user-configured (not scope of this pull)?\n",https://github.com/bitcoin/bitcoin/pull/6053#issuecomment-95822866,95822866,
laanwj,2015-04-24T12:49:36Z,"I'd say just alias it to `NET_IPV4`. Otherwise you'd reintroduce the name proxy in a different guise. In principle `NET_NAME` means `NET_IPV4_OR_IPV6`, but actually defining that doesn't make much sense implementation-wise.\n\nThe most true-to-reality design would be to decouple the proxies from `NET_*`, and introduce a new enumeration with `PROXY_DEFAULT` and `PROXY_ONION`. After all the proxies ",https://github.com/bitcoin/bitcoin/pull/6053#issuecomment-95922937,95922937,
Diapolo,2015-04-28T12:34:01Z,"@laanwj `-onlynet` seems to not touch proxy setup so we alsways can be sure, if -proxy is valid, we have an IPv4/IPv6 proxy setup. I'll push an updated version shortly, which will include an alias NET_DEFAULT and also pick up your suggestion for `ConnectSocketByName()`.\n\nEdit: Updated...\n",https://github.com/bitcoin/bitcoin/pull/6053#issuecomment-97046865,97046865,
laanwj,2015-04-30T12:47:53Z,"This is failing the proxy test on all platforms that run the tests:\n\n```\nInitializing test directory /tmp/testLRq9Jg\n\nProxy: Socks5Command(1,3,127.0.0.1,11297,None,None)\n\nProxy: Socks5Command(1,3,127.0.0.1,11296,91632771,1889679809)\n\nProxy: Socks5Command(1,3,127.0.0.1,11296,None,None)\n\nProxy: Socks5Command(1,3,127.0.0.1,11295,None,None)\n\nProxy: Socks5Command(1,3,127.0.0.1,11298,384213",https://github.com/bitcoin/bitcoin/pull/6053#issuecomment-97760803,97760803,
Diapolo,2015-05-10T11:14:06Z,"@laanwj Any idea why this fails, I'm able to use this locally just fine.\n",https://github.com/bitcoin/bitcoin/pull/6053#issuecomment-100625103,100625103,
jonasschnelli,2015-05-10T11:20:14Z,@Diapolo: somehow your given IP has no effect. See https://travis-ci.org/bitcoin/bitcoin/jobs/60370174#L3838 . You probably have to debug/bugfix your changes.\n,https://github.com/bitcoin/bitcoin/pull/6053#issuecomment-100625487,100625487,
Diapolo,2015-05-25T17:19:30Z,"I found a problem related to setting `addr = CService(""0.0.0.0:0"");` but still the tests are failing. Which builds are running the proxy tests and could it be a problem of the test itself? Perhaps I need to revert what @laanwj suggested above (third comment) and see if the tests pass with the old codeflow.\n",https://github.com/bitcoin/bitcoin/pull/6053#issuecomment-105272311,105272311,
Diapolo,2015-06-12T09:48:30Z,"@laanwj Maybe you are able to help me debugging this, while you are also in the proxy code :)?\n",https://github.com/bitcoin/bitcoin/pull/6053#issuecomment-111431756,111431756,
Diapolo,2015-06-15T05:52:21Z,"I'm giving this another take, when https://github.com/bitcoin/bitcoin/pull/6272 is meged.\n",https://github.com/bitcoin/bitcoin/pull/6053#issuecomment-111934341,111934341,
Diapolo,2015-06-20T22:04:56Z,"I still don't understand why this is failing the tests? @laanwj Can it be a problem with the test itself? I'm using the IPv4 proxy as nameproxy, as we discussed.\n",https://github.com/bitcoin/bitcoin/pull/6053#issuecomment-113825738,113825738,
Diapolo,2015-06-23T19:27:53Z,"@laanwj It's passing now in that form, do we want to merge or shall I try to optimize the code-flow in a second commit?\n",https://github.com/bitcoin/bitcoin/pull/6053#issuecomment-114616814,114616814,
laanwj,2015-08-07T10:53:10Z,"I'm sorry but I'm no longer fully convinced that this is an improvement. Even though I think it was my own idea.\n\nSure it cleans up some code, however having a separate proxy definition for unknown name lookup - separate from IPv4/IPv6/Tor makes intuitive sense. Even if in practice they're always the same.\n",https://github.com/bitcoin/bitcoin/pull/6053#issuecomment-128671852,128671852,
laanwj,2015-04-23T15:33:37Z,"Could completely bypass this lookup in the case that a proxy is used, after all we always pass the name to the proxy. e.g.\n\n```\nProxyType proxy;\nif(GetProxy(NET_NAME, proxy))\n{\n    addr = CService(""0.0.0.0:0""); \n    return ConnectThroughProxy(proxy, strDest, port, hSocketRet, nTimeout, outProxyConnectionFailed);\n}\nCService addrResolved(CNetAddr(strDest, fNameLookup), port);\nif (!addrReso",https://github.com/bitcoin/bitcoin/pull/6053#discussion_r28973796,28973796,src/netbase.cpp
