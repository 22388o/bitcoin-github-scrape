[
  {
    "sha": "22123c85f3722abad896aebb564a89d88da92e81",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyMjEyM2M4NWYzNzIyYWJhZDg5NmFlYmI1NjRhODlkODhkYTkyZTgx",
    "commit": {
      "author": {
        "name": "sje397",
        "email": "sje397@gmail.com",
        "date": "2011-11-10T14:20:17Z"
      },
      "committer": {
        "name": "sje397",
        "email": "sje397@gmail.com",
        "date": "2011-12-20T11:11:24Z"
      },
      "message": "Added QRCode generation functions via libqrencode. Switch on with USE_QRENCODE=1.\nAmended build docs for Linux and OSX, and OSX makefile.\nAdded package 'qrencode' to gitian.yml",
      "tree": {
        "sha": "212d80a39a64c31bc7746127306cdb4eb9ce1614",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/212d80a39a64c31bc7746127306cdb4eb9ce1614"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/22123c85f3722abad896aebb564a89d88da92e81",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/22123c85f3722abad896aebb564a89d88da92e81",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/22123c85f3722abad896aebb564a89d88da92e81",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/22123c85f3722abad896aebb564a89d88da92e81/comments",
    "author": {
      "login": "sje397",
      "id": 214252,
      "node_id": "MDQ6VXNlcjIxNDI1Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/214252?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sje397",
      "html_url": "https://github.com/sje397",
      "followers_url": "https://api.github.com/users/sje397/followers",
      "following_url": "https://api.github.com/users/sje397/following{/other_user}",
      "gists_url": "https://api.github.com/users/sje397/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sje397/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sje397/subscriptions",
      "organizations_url": "https://api.github.com/users/sje397/orgs",
      "repos_url": "https://api.github.com/users/sje397/repos",
      "events_url": "https://api.github.com/users/sje397/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sje397/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "sje397",
      "id": 214252,
      "node_id": "MDQ6VXNlcjIxNDI1Mg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/214252?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sje397",
      "html_url": "https://github.com/sje397",
      "followers_url": "https://api.github.com/users/sje397/followers",
      "following_url": "https://api.github.com/users/sje397/following{/other_user}",
      "gists_url": "https://api.github.com/users/sje397/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sje397/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sje397/subscriptions",
      "organizations_url": "https://api.github.com/users/sje397/orgs",
      "repos_url": "https://api.github.com/users/sje397/repos",
      "events_url": "https://api.github.com/users/sje397/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sje397/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "3528650560a2c417da2303869c743da019defc6d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3528650560a2c417da2303869c743da019defc6d",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/3528650560a2c417da2303869c743da019defc6d"
      }
    ],
    "stats": {
      "total": 441,
      "additions": 434,
      "deletions": 7
    },
    "files": [
      {
        "sha": "4a8dedc1070f617f14c7cfb55ac46e5dde55eea6",
        "filename": "bitcoin-qt.pro",
        "status": "modified",
        "additions": 14,
        "deletions": 0,
        "changes": 14,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/22123c85f3722abad896aebb564a89d88da92e81/bitcoin-qt.pro",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/22123c85f3722abad896aebb564a89d88da92e81/bitcoin-qt.pro",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/bitcoin-qt.pro?ref=22123c85f3722abad896aebb564a89d88da92e81",
        "patch": "@@ -19,6 +19,14 @@ OBJECTS_DIR = build\n MOC_DIR = build\n UI_DIR = build\n \n+# use: qmake \"USE_QRCODE=1\"\n+# libqrencode (http://fukuchi.org/works/qrencode/index.en.html) must be installed for support\n+contains(USE_QRCODE, 1) {\n+    message(Building with QRCode support)\n+    DEFINES += USE_QRCODE\n+    LIBS += -lqrencode\n+}\n+\n # use: qmake \"RELEASE=1\"\n contains(RELEASE, 1) {\n     # Mac: compile for maximum compatibility (10.5, 32-bit)\n@@ -199,6 +207,12 @@ FORMS += \\\n     src/qt/forms/sendcoinsentry.ui \\\n     src/qt/forms/askpassphrasedialog.ui\n \n+contains(USE_QRCODE, 1) {\n+HEADERS += src/qt/qrcodedialog.h\n+SOURCES += src/qt/qrcodedialog.cpp\n+FORMS += src/qt/forms/qrcodedialog.ui\n+}\n+\n CODECFORTR = UTF-8\n \n # for lrelease/lupdate"
      },
      {
        "sha": "6f503ac0bfee416dae29099b06f3b692c572ca70",
        "filename": "contrib/gitian-descriptors/gitian.yml",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/22123c85f3722abad896aebb564a89d88da92e81/contrib/gitian-descriptors/gitian.yml",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/22123c85f3722abad896aebb564a89d88da92e81/contrib/gitian-descriptors/gitian.yml",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/gitian-descriptors/gitian.yml?ref=22123c85f3722abad896aebb564a89d88da92e81",
        "patch": "@@ -16,6 +16,7 @@ packages:\n - \"libssl-dev\"\n - \"git-core\"\n - \"unzip\"\n+- \"qrencode\"\n reference_datetime: \"2011-01-30 00:00:00\"\n remotes:\n - \"url\": \"https://github.com/bitcoin/bitcoin.git\""
      },
      {
        "sha": "d47febe94b4449d34072a57bec5552a6bb1b3f96",
        "filename": "doc/build-osx.txt",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/22123c85f3722abad896aebb564a89d88da92e81/doc/build-osx.txt",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/22123c85f3722abad896aebb564a89d88da92e81/doc/build-osx.txt",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/doc/build-osx.txt?ref=22123c85f3722abad896aebb564a89d88da92e81",
        "patch": "@@ -43,6 +43,9 @@ pushd bitcoin/contrib/minipupnpc; sudo port install; popd\n (this will be unnecessary soon, you will just port install miniupnpc\n along with the rest of the dependencies).\n \n+Optionally install qrencode (and set USE_QRCODE=1):\n+sudo port install qrencode\n+\n 4.  Now you should be able to build bitcoind:\n \n cd bitcoin/src"
      },
      {
        "sha": "538933984cf465ba5a40e5e56534ca3d32710d94",
        "filename": "doc/build-unix.txt",
        "status": "modified",
        "additions": 13,
        "deletions": 7,
        "changes": 20,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/22123c85f3722abad896aebb564a89d88da92e81/doc/build-unix.txt",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/22123c85f3722abad896aebb564a89d88da92e81/doc/build-unix.txt",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/doc/build-unix.txt?ref=22123c85f3722abad896aebb564a89d88da92e81",
        "patch": "@@ -23,12 +23,13 @@ the graphical bitcoin.\n Dependencies\n ------------\n \n- Library    Purpose       Description\n- -------    -------       -----------\n- libssl     SSL Support   Secure communications\n- libdb4.8   Berkeley DB   Blockchain & wallet storage\n- libboost   Boost         C++ Library\n- miniupnpc  UPnP Support  Optional firewall-jumping support\n+ Library     Purpose           Description\n+ -------     -------           -----------\n+ libssl      SSL Support       Secure communications\n+ libdb4.8    Berkeley DB       Blockchain & wallet storage\n+ libboost    Boost             C++ Library\n+ miniupnpc   UPnP Support      Optional firewall-jumping support\n+ libqrencode QRCode generation Optional QRCode generation\n \n miniupnpc may be used for UPnP port mapping.  It can be downloaded from\n http://miniupnp.tuxfamily.org/files/.  UPnP support is compiled in and\n@@ -37,6 +38,12 @@ turned off by default.  Set USE_UPNP to a different value to control this:\n  USE_UPNP=0    (the default) UPnP support turned off by default at runtime\n  USE_UPNP=1    UPnP support turned on by default at runtime\n \n+libqrencode may be used for QRCode image generation. It can be downloaded\n+from http://fukuchi.org/works/qrencode/index.html.en, or installed via\n+your package manager. Set USE_QRCODE to control this:\n+ USE_QRCODE=0   (the default) No QRCode support - libarcode not required\n+ USE_QRCODE=1   QRCode support enabled\n+\n Licenses of statically linked libraries:\n  Berkeley DB   New BSD license with additional requirement that linked\n                software must be free open source\n@@ -50,7 +57,6 @@ Versions used in this release:\n  Boost         1.37\n  miniupnpc     1.6\n \n-\n Dependency Build Instructions: Ubuntu & Debian\n ----------------------------------------------\n sudo apt-get install build-essential"
      },
      {
        "sha": "2bb898049db04959f3a8aad4b3390a11cc50e309",
        "filename": "src/makefile.osx",
        "status": "modified",
        "additions": 4,
        "deletions": 0,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/22123c85f3722abad896aebb564a89d88da92e81/src/makefile.osx",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/22123c85f3722abad896aebb564a89d88da92e81/src/makefile.osx",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/makefile.osx?ref=22123c85f3722abad896aebb564a89d88da92e81",
        "patch": "@@ -95,6 +95,10 @@ else\n endif\n endif\n \n+ifdef USE_QRCODE\n+\tDEFS += -DUSE_QRCODE=$(USE_QRCODE)\n+\tLIBS += -lqrencode\n+endif\n \n all: bitcoind\n "
      },
      {
        "sha": "d207fe30faa34b323b05846199bf9d9f26462533",
        "filename": "src/qt/addressbookpage.cpp",
        "status": "modified",
        "additions": 30,
        "deletions": 0,
        "changes": 30,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/22123c85f3722abad896aebb564a89d88da92e81/src/qt/addressbookpage.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/22123c85f3722abad896aebb564a89d88da92e81/src/qt/addressbookpage.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/addressbookpage.cpp?ref=22123c85f3722abad896aebb564a89d88da92e81",
        "patch": "@@ -10,6 +10,10 @@\n #include <QFileDialog>\n #include <QMessageBox>\n \n+#ifdef USE_QRCODE\n+#include \"qrcodedialog.h\"\n+#endif\n+\n AddressBookPage::AddressBookPage(Mode mode, Tabs tab, QWidget *parent) :\n     QDialog(parent),\n     ui(new Ui::AddressBookPage),\n@@ -25,6 +29,10 @@ AddressBookPage::AddressBookPage(Mode mode, Tabs tab, QWidget *parent) :\n     ui->deleteButton->setIcon(QIcon());\n #endif\n \n+#ifndef USE_QRCODE\n+    ui->showQRCode->setVisible(false);\n+#endif\n+\n     switch(mode)\n     {\n     case ForSending:\n@@ -169,10 +177,12 @@ void AddressBookPage::selectionChanged()\n             break;\n         }\n         ui->copyToClipboard->setEnabled(true);\n+        ui->showQRCode->setEnabled(true);\n     }\n     else\n     {\n         ui->deleteButton->setEnabled(false);\n+        ui->showQRCode->setEnabled(false);\n         ui->copyToClipboard->setEnabled(false);\n     }\n }\n@@ -227,3 +237,23 @@ void AddressBookPage::exportClicked()\n                               QMessageBox::Abort, QMessageBox::Abort);\n     }\n }\n+\n+void AddressBookPage::on_showQRCode_clicked()\n+{\n+#ifdef USE_QRCODE\n+    QTableView *table = ui->tableView;\n+    QModelIndexList indexes = table->selectionModel()->selectedRows(AddressTableModel::Address);\n+\n+\n+    QRCodeDialog *d;\n+    foreach (QModelIndex index, indexes)\n+    {\n+        QString address = index.data().toString(),\n+            label = index.sibling(index.row(), 0).data().toString(),\n+            title = QString(\"%1 << %2 >>\").arg(label).arg(address);\n+\n+        QRCodeDialog *d = new QRCodeDialog(title, address, label, tab == ReceivingTab, this);\n+        d->show();\n+    }\n+#endif\n+}"
      },
      {
        "sha": "2538f319dda3205e2d93570f9085e833bc46e4cf",
        "filename": "src/qt/addressbookpage.h",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/22123c85f3722abad896aebb564a89d88da92e81/src/qt/addressbookpage.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/22123c85f3722abad896aebb564a89d88da92e81/src/qt/addressbookpage.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/addressbookpage.h?ref=22123c85f3722abad896aebb564a89d88da92e81",
        "patch": "@@ -54,6 +54,7 @@ private slots:\n     void on_newAddressButton_clicked();\n     void on_copyToClipboard_clicked();\n     void selectionChanged();\n+    void on_showQRCode_clicked();\n };\n \n #endif // ADDRESSBOOKDIALOG_H"
      },
      {
        "sha": "5693ae187ea3edb842e581a3216465d9590de54e",
        "filename": "src/qt/bitcoin.qrc",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/22123c85f3722abad896aebb564a89d88da92e81/src/qt/bitcoin.qrc",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/22123c85f3722abad896aebb564a89d88da92e81/src/qt/bitcoin.qrc",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoin.qrc?ref=22123c85f3722abad896aebb564a89d88da92e81",
        "patch": "@@ -41,6 +41,7 @@\n     <qresource prefix=\"/images\">\n         <file alias=\"about\">res/images/about.png</file>\n         <file alias=\"splash\">res/images/splash2.jpg</file>\n+        <file alias=\"qrcode\">res/images/qrcode.png</file>\n     </qresource>\n     <qresource prefix=\"/movies\">\n         <file alias=\"update_spinner\">res/movies/update_spinner.mng</file>"
      },
      {
        "sha": "9b301cbbfa273b29e82f77a7a510824053257475",
        "filename": "src/qt/forms/addressbookpage.ui",
        "status": "modified",
        "additions": 11,
        "deletions": 0,
        "changes": 11,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/22123c85f3722abad896aebb564a89d88da92e81/src/qt/forms/addressbookpage.ui",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/22123c85f3722abad896aebb564a89d88da92e81/src/qt/forms/addressbookpage.ui",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/forms/addressbookpage.ui?ref=22123c85f3722abad896aebb564a89d88da92e81",
        "patch": "@@ -79,6 +79,17 @@\n        </property>\n       </widget>\n      </item>\n+     <item>\n+      <widget class=\"QPushButton\" name=\"showQRCode\">\n+       <property name=\"text\">\n+        <string>Show &amp;QR Code</string>\n+       </property>\n+       <property name=\"icon\">\n+        <iconset resource=\"../bitcoin.qrc\">\n+         <normaloff>:/images/qrcode</normaloff>:/images/qrcode</iconset>\n+       </property>\n+      </widget>\n+     </item>\n      <item>\n       <widget class=\"QPushButton\" name=\"deleteButton\">\n        <property name=\"toolTip\">"
      },
      {
        "sha": "fa21f60b9e877cf8cb4fa94fa985f10856e80098",
        "filename": "src/qt/forms/qrcodedialog.ui",
        "status": "added",
        "additions": 213,
        "deletions": 0,
        "changes": 213,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/22123c85f3722abad896aebb564a89d88da92e81/src/qt/forms/qrcodedialog.ui",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/22123c85f3722abad896aebb564a89d88da92e81/src/qt/forms/qrcodedialog.ui",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/forms/qrcodedialog.ui?ref=22123c85f3722abad896aebb564a89d88da92e81",
        "patch": "@@ -0,0 +1,213 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<ui version=\"4.0\">\n+ <class>QRCodeDialog</class>\n+ <widget class=\"QDialog\" name=\"QRCodeDialog\">\n+  <property name=\"geometry\">\n+   <rect>\n+    <x>0</x>\n+    <y>0</y>\n+    <width>320</width>\n+    <height>404</height>\n+   </rect>\n+  </property>\n+  <property name=\"windowTitle\">\n+   <string>Dialog</string>\n+  </property>\n+  <layout class=\"QVBoxLayout\" name=\"verticalLayout_3\">\n+   <item>\n+    <widget class=\"QLabel\" name=\"lblQRCode\">\n+     <property name=\"sizePolicy\">\n+      <sizepolicy hsizetype=\"Expanding\" vsizetype=\"Expanding\">\n+       <horstretch>0</horstretch>\n+       <verstretch>0</verstretch>\n+      </sizepolicy>\n+     </property>\n+     <property name=\"minimumSize\">\n+      <size>\n+       <width>300</width>\n+       <height>300</height>\n+      </size>\n+     </property>\n+     <property name=\"text\">\n+      <string>QR Code</string>\n+     </property>\n+     <property name=\"alignment\">\n+      <set>Qt::AlignCenter</set>\n+     </property>\n+    </widget>\n+   </item>\n+   <item>\n+    <widget class=\"QWidget\" name=\"widget\" native=\"true\">\n+     <layout class=\"QVBoxLayout\" name=\"verticalLayout_2\">\n+      <item>\n+       <layout class=\"QHBoxLayout\" name=\"horizontalLayout_2\">\n+        <item>\n+         <layout class=\"QVBoxLayout\" name=\"verticalLayout\">\n+          <item>\n+           <widget class=\"QCheckBox\" name=\"chkReq\">\n+            <property name=\"enabled\">\n+             <bool>true</bool>\n+            </property>\n+            <property name=\"text\">\n+             <string>Request Payment</string>\n+            </property>\n+           </widget>\n+          </item>\n+          <item>\n+           <layout class=\"QHBoxLayout\" name=\"horizontalLayout\">\n+            <item>\n+             <widget class=\"QLabel\" name=\"lblAm1\">\n+              <property name=\"sizePolicy\">\n+               <sizepolicy hsizetype=\"Preferred\" vsizetype=\"Maximum\">\n+                <horstretch>0</horstretch>\n+                <verstretch>0</verstretch>\n+               </sizepolicy>\n+              </property>\n+              <property name=\"text\">\n+               <string>Amount:</string>\n+              </property>\n+              <property name=\"alignment\">\n+               <set>Qt::AlignRight|Qt::AlignTrailing|Qt::AlignVCenter</set>\n+              </property>\n+              <property name=\"buddy\">\n+               <cstring>lnReqAmount</cstring>\n+              </property>\n+             </widget>\n+            </item>\n+            <item>\n+             <widget class=\"QLineEdit\" name=\"lnReqAmount\">\n+              <property name=\"enabled\">\n+               <bool>false</bool>\n+              </property>\n+              <property name=\"minimumSize\">\n+               <size>\n+                <width>60</width>\n+                <height>0</height>\n+               </size>\n+              </property>\n+              <property name=\"alignment\">\n+               <set>Qt::AlignRight|Qt::AlignTrailing|Qt::AlignVCenter</set>\n+              </property>\n+             </widget>\n+            </item>\n+            <item>\n+             <widget class=\"QLabel\" name=\"lblAm2\">\n+              <property name=\"sizePolicy\">\n+               <sizepolicy hsizetype=\"Preferred\" vsizetype=\"Maximum\">\n+                <horstretch>0</horstretch>\n+                <verstretch>0</verstretch>\n+               </sizepolicy>\n+              </property>\n+              <property name=\"text\">\n+               <string>BTC</string>\n+              </property>\n+              <property name=\"buddy\">\n+               <cstring>lnReqAmount</cstring>\n+              </property>\n+             </widget>\n+            </item>\n+           </layout>\n+          </item>\n+         </layout>\n+        </item>\n+        <item>\n+         <layout class=\"QGridLayout\" name=\"gridLayout\">\n+          <item row=\"0\" column=\"0\">\n+           <widget class=\"QLabel\" name=\"label_3\">\n+            <property name=\"text\">\n+             <string>Label:</string>\n+            </property>\n+            <property name=\"alignment\">\n+             <set>Qt::AlignRight|Qt::AlignTrailing|Qt::AlignVCenter</set>\n+            </property>\n+            <property name=\"buddy\">\n+             <cstring>lnLabel</cstring>\n+            </property>\n+           </widget>\n+          </item>\n+          <item row=\"0\" column=\"1\">\n+           <widget class=\"QLineEdit\" name=\"lnLabel\">\n+            <property name=\"minimumSize\">\n+             <size>\n+              <width>100</width>\n+              <height>0</height>\n+             </size>\n+            </property>\n+           </widget>\n+          </item>\n+          <item row=\"1\" column=\"0\">\n+           <widget class=\"QLabel\" name=\"label_4\">\n+            <property name=\"text\">\n+             <string>Message:</string>\n+            </property>\n+            <property name=\"alignment\">\n+             <set>Qt::AlignRight|Qt::AlignTrailing|Qt::AlignVCenter</set>\n+            </property>\n+            <property name=\"buddy\">\n+             <cstring>lnMessage</cstring>\n+            </property>\n+           </widget>\n+          </item>\n+          <item row=\"1\" column=\"1\">\n+           <widget class=\"QLineEdit\" name=\"lnMessage\">\n+            <property name=\"minimumSize\">\n+             <size>\n+              <width>100</width>\n+              <height>0</height>\n+             </size>\n+            </property>\n+           </widget>\n+          </item>\n+         </layout>\n+        </item>\n+       </layout>\n+      </item>\n+      <item>\n+       <layout class=\"QHBoxLayout\" name=\"horizontalLayout_3\">\n+        <item>\n+         <spacer name=\"horizontalSpacer\">\n+          <property name=\"orientation\">\n+           <enum>Qt::Horizontal</enum>\n+          </property>\n+          <property name=\"sizeHint\" stdset=\"0\">\n+           <size>\n+            <width>40</width>\n+            <height>20</height>\n+           </size>\n+          </property>\n+         </spacer>\n+        </item>\n+        <item>\n+         <widget class=\"QPushButton\" name=\"btnSaveAs\">\n+          <property name=\"text\">\n+           <string>&amp;Save As...</string>\n+          </property>\n+         </widget>\n+        </item>\n+       </layout>\n+      </item>\n+     </layout>\n+    </widget>\n+   </item>\n+  </layout>\n+ </widget>\n+ <resources/>\n+ <connections>\n+  <connection>\n+   <sender>chkReq</sender>\n+   <signal>clicked(bool)</signal>\n+   <receiver>lnReqAmount</receiver>\n+   <slot>setEnabled(bool)</slot>\n+   <hints>\n+    <hint type=\"sourcelabel\">\n+     <x>92</x>\n+     <y>285</y>\n+    </hint>\n+    <hint type=\"destinationlabel\">\n+     <x>98</x>\n+     <y>311</y>\n+    </hint>\n+   </hints>\n+  </connection>\n+ </connections>\n+</ui>"
      },
      {
        "sha": "ed4c758e3822b12ceaf1ab9426b0b909a6dfe0f9",
        "filename": "src/qt/qrcodedialog.cpp",
        "status": "added",
        "additions": 106,
        "deletions": 0,
        "changes": 106,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/22123c85f3722abad896aebb564a89d88da92e81/src/qt/qrcodedialog.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/22123c85f3722abad896aebb564a89d88da92e81/src/qt/qrcodedialog.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/qrcodedialog.cpp?ref=22123c85f3722abad896aebb564a89d88da92e81",
        "patch": "@@ -0,0 +1,106 @@\n+#include \"qrcodedialog.h\"\n+#include \"ui_qrcodedialog.h\"\n+#include <QPixmap>\n+#include <QUrl>\n+#include <QFileDialog>\n+#include <QDesktopServices>\n+#include <QDebug>\n+\n+#include <qrencode.h>\n+\n+#define EXPORT_IMAGE_SIZE   256\n+\n+QRCodeDialog::QRCodeDialog(const QString &title, const QString &addr, const QString &label, bool enableReq, QWidget *parent) :\n+    QDialog(parent),\n+    ui(new Ui::QRCodeDialog),\n+    address(addr)\n+{\n+    ui->setupUi(this);\n+    setWindowTitle(title);\n+    setAttribute(Qt::WA_DeleteOnClose);\n+\n+    ui->chkReq->setVisible(enableReq);\n+    ui->lnReqAmount->setVisible(enableReq);\n+    ui->lblAm1->setVisible(enableReq);\n+    ui->lblAm2->setVisible(enableReq);\n+\n+    ui->lnLabel->setText(label);\n+\n+    genCode();\n+}\n+\n+QRCodeDialog::~QRCodeDialog()\n+{\n+    delete ui;\n+}\n+\n+void QRCodeDialog::genCode() {\n+\n+    QString uri = getURI();\n+    //qDebug() << \"Encoding:\" << uri.toUtf8().constData();\n+    QRcode *code = QRcode_encodeString(uri.toUtf8().constData(), 0, QR_ECLEVEL_L, QR_MODE_8, 1);\n+    myImage = QImage(code->width + 8, code->width + 8, QImage::Format_RGB32);\n+    myImage.fill(0xffffff);\n+    unsigned char *p = code->data;\n+    for(int y = 0; y < code->width; y++) {\n+        for(int x = 0; x < code->width; x++) {\n+            myImage.setPixel(x + 4, y + 4, ((*p & 1) ? 0x0 : 0xffffff));\n+            p++;\n+        }\n+    }\n+    QRcode_free(code);\n+    ui->lblQRCode->setPixmap(QPixmap::fromImage(myImage).scaled(300, 300));\n+}\n+\n+QString QRCodeDialog::getURI() {\n+    QString ret = QString(\"bitcoin:%1\").arg(address);\n+\n+    int paramCount = 0;\n+    if(ui->chkReq->isChecked() && ui->lnReqAmount->text().isEmpty() == false) {\n+        bool ok= false;\n+        double amount = ui->lnReqAmount->text().toDouble(&ok);\n+        if(ok) {\n+            ret += QString(\"?amount=%1X8\").arg(ui->lnReqAmount->text());\n+            paramCount++;\n+        }\n+    }\n+\n+    if(ui->lnLabel->text().isEmpty() == false) {\n+        QString lbl(QUrl::toPercentEncoding(ui->lnLabel->text()));\n+        ret += QString(\"%1label=%2\").arg(paramCount == 0 ? \"?\" : \"&\").arg(lbl);\n+        paramCount++;\n+    }\n+\n+    if(ui->lnMessage->text().isEmpty() == false) {\n+        QString msg(QUrl::toPercentEncoding(ui->lnMessage->text()));\n+        ret += QString(\"%1message=%2\").arg(paramCount == 0 ? \"?\" : \"&\").arg(msg);\n+        paramCount++;\n+    }\n+\n+    return ret;\n+}\n+\n+void QRCodeDialog::on_lnReqAmount_textChanged(const QString &) {\n+    genCode();\n+}\n+\n+void QRCodeDialog::on_lnLabel_textChanged(const QString &) {\n+    genCode();\n+}\n+\n+void QRCodeDialog::on_lnMessage_textChanged(const QString &) {\n+    genCode();\n+}\n+\n+void QRCodeDialog::on_btnSaveAs_clicked()\n+{\n+    QString fn = QFileDialog::getSaveFileName(this, \"Save Image...\", QDesktopServices::storageLocation(QDesktopServices::DocumentsLocation), \"Images (*.png)\");\n+    if(!fn.isEmpty()) {\n+        myImage.scaled(EXPORT_IMAGE_SIZE, EXPORT_IMAGE_SIZE).save(fn);\n+    }\n+}\n+\n+void QRCodeDialog::on_chkReq_toggled(bool)\n+{\n+    genCode();\n+}"
      },
      {
        "sha": "7463a8810ef598e1826f179d4dff730043c77b08",
        "filename": "src/qt/qrcodedialog.h",
        "status": "added",
        "additions": 37,
        "deletions": 0,
        "changes": 37,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/22123c85f3722abad896aebb564a89d88da92e81/src/qt/qrcodedialog.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/22123c85f3722abad896aebb564a89d88da92e81/src/qt/qrcodedialog.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/qrcodedialog.h?ref=22123c85f3722abad896aebb564a89d88da92e81",
        "patch": "@@ -0,0 +1,37 @@\n+#ifndef QRCODEDIALOG_H\n+#define QRCODEDIALOG_H\n+\n+#include <QDialog>\n+#include <QImage>\n+\n+namespace Ui {\n+    class QRCodeDialog;\n+}\n+\n+class QRCodeDialog : public QDialog\n+{\n+    Q_OBJECT\n+\n+public:\n+    explicit QRCodeDialog(const QString &title, const QString &address, const QString &label, bool allowReq, QWidget *parent = 0);\n+    ~QRCodeDialog();\n+\n+private slots:\n+    void on_lnReqAmount_textChanged(const QString &arg1);\n+    void on_lnLabel_textChanged(const QString &arg1);\n+    void on_lnMessage_textChanged(const QString &arg1);\n+    void on_btnSaveAs_clicked();\n+\n+    void on_chkReq_toggled(bool checked);\n+\n+private:\n+    Ui::QRCodeDialog *ui;\n+    QImage myImage;\n+\n+    QString getURI();\n+    QString address;\n+\n+    void genCode();\n+};\n+\n+#endif // QRCODEDIALOG_H"
      },
      {
        "sha": "c89a49bbceba56e1901487b970645dd9eea95608",
        "filename": "src/qt/res/images/qrcode.png",
        "status": "added",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/22123c85f3722abad896aebb564a89d88da92e81/src/qt/res/images/qrcode.png",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/22123c85f3722abad896aebb564a89d88da92e81/src/qt/res/images/qrcode.png",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/res/images/qrcode.png?ref=22123c85f3722abad896aebb564a89d88da92e81"
      }
    ]
  }
]