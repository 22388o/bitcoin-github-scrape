[
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/913726985",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22902#issuecomment-913726985",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22902",
    "id": 913726985,
    "node_id": "IC_kwDOABII5842dl4J",
    "user": {
      "login": "0xB10C",
      "id": 19157360,
      "node_id": "MDQ6VXNlcjE5MTU3MzYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/19157360?u=a20996a145f1be613c7b0a57e75d36508572e29d&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0xB10C",
      "html_url": "https://github.com/0xB10C",
      "followers_url": "https://api.github.com/users/0xB10C/followers",
      "following_url": "https://api.github.com/users/0xB10C/following{/other_user}",
      "gists_url": "https://api.github.com/users/0xB10C/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
      "organizations_url": "https://api.github.com/users/0xB10C/orgs",
      "repos_url": "https://api.github.com/users/0xB10C/repos",
      "events_url": "https://api.github.com/users/0xB10C/events{/privacy}",
      "received_events_url": "https://api.github.com/users/0xB10C/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-06T15:25:12Z",
    "updated_at": "2021-09-06T16:22:48Z",
    "author_association": "CONTRIBUTOR",
    "body": "Concept ACK.\r\n\r\n@arnabsen1729 is working on this as part of his [summerofbitcoin.org](https://summerofbitcoin.org) project. I've mentored him along the way. Some earlier review is in https://github.com/0xB10C/bitcoin/pull/1.\r\n\r\nI suspect hooking into the `add` and `spend` tracepoints during IBD could have a noticeable performance impact. I'll test this. If is is the case, then it should be documented. Not hooking into the tracepoints shouldn't have any performance impact.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/913726985/reactions",
      "total_count": 3,
      "+1": 3,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/913911250",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22902#issuecomment-913911250",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22902",
    "id": 913911250,
    "node_id": "IC_kwDOABII5842eS3S",
    "user": {
      "login": "DrahtBot",
      "id": 39886733,
      "node_id": "MDQ6VXNlcjM5ODg2NzMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/39886733?u=3c1e73d828cf5a5850dfc25c8397c1cf751db5ac&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/DrahtBot",
      "html_url": "https://github.com/DrahtBot",
      "followers_url": "https://api.github.com/users/DrahtBot/followers",
      "following_url": "https://api.github.com/users/DrahtBot/following{/other_user}",
      "gists_url": "https://api.github.com/users/DrahtBot/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
      "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
      "repos_url": "https://api.github.com/users/DrahtBot/repos",
      "events_url": "https://api.github.com/users/DrahtBot/events{/privacy}",
      "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-07T00:28:44Z",
    "updated_at": "2021-09-07T00:28:44Z",
    "author_association": "CONTRIBUTOR",
    "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#9384](https://github.com/bitcoin/bitcoin/pull/9384) (CCoinsViewCache code cleanup & deduplication by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/913911250/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/915008258",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22902#issuecomment-915008258",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22902",
    "id": 915008258,
    "node_id": "IC_kwDOABII5842iesC",
    "user": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?u=5ff13e375b40ea55ecd3c108337dd6a23f68eddf&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-08T07:58:08Z",
    "updated_at": "2021-09-08T07:58:08Z",
    "author_association": "CONTRIBUTOR",
    "body": "Concept ACK",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/915008258/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/915289125",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22902#issuecomment-915289125",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22902",
    "id": 915289125,
    "node_id": "IC_kwDOABII5842jjQl",
    "user": {
      "login": "theStack",
      "id": 91535,
      "node_id": "MDQ6VXNlcjkxNTM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theStack",
      "html_url": "https://github.com/theStack",
      "followers_url": "https://api.github.com/users/theStack/followers",
      "following_url": "https://api.github.com/users/theStack/following{/other_user}",
      "gists_url": "https://api.github.com/users/theStack/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/theStack/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
      "organizations_url": "https://api.github.com/users/theStack/orgs",
      "repos_url": "https://api.github.com/users/theStack/repos",
      "events_url": "https://api.github.com/users/theStack/events{/privacy}",
      "received_events_url": "https://api.github.com/users/theStack/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-08T14:28:20Z",
    "updated_at": "2021-09-08T14:28:20Z",
    "author_association": "CONTRIBUTOR",
    "body": "Concept ACK",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/915289125/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/916768924",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22902#issuecomment-916768924",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22902",
    "id": 916768924,
    "node_id": "IC_kwDOABII5842pMic",
    "user": {
      "login": "0xB10C",
      "id": 19157360,
      "node_id": "MDQ6VXNlcjE5MTU3MzYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/19157360?u=a20996a145f1be613c7b0a57e75d36508572e29d&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0xB10C",
      "html_url": "https://github.com/0xB10C",
      "followers_url": "https://api.github.com/users/0xB10C/followers",
      "following_url": "https://api.github.com/users/0xB10C/following{/other_user}",
      "gists_url": "https://api.github.com/users/0xB10C/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
      "organizations_url": "https://api.github.com/users/0xB10C/orgs",
      "repos_url": "https://api.github.com/users/0xB10C/repos",
      "events_url": "https://api.github.com/users/0xB10C/events{/privacy}",
      "received_events_url": "https://api.github.com/users/0xB10C/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-10T09:32:29Z",
    "updated_at": "2021-09-10T09:35:01Z",
    "author_association": "CONTRIBUTOR",
    "body": "My benchmarks (4x reindex-chainstate till block 500000 for both the mergebase 92aad5303b9b96c46015156b5dc96b48e9e7bc76 and 15b8ba500d59c6c5de764cd13c22d0cb44d6bd14) show that this PR increases time spent in `ConnectBlock` by about 3.4%. This is without hooking into the tracepoints. \r\n\r\n![image](https://user-images.githubusercontent.com/19157360/132832934-81727f02-0292-4530-95e7-7e754c843e18.png)\r\n\r\nAs discussed in https://github.com/bitcoin/bitcoin/pull/22902#discussion_r705176691 we can drop the first argument of the `add`, `spent`, and `uncache` tracepoints which should improve the performance. Will re-benchmark then.\r\n",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/916768924/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/917498376",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22902#issuecomment-917498376",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22902",
    "id": 917498376,
    "node_id": "IC_kwDOABII5842r-oI",
    "user": {
      "login": "0xB10C",
      "id": 19157360,
      "node_id": "MDQ6VXNlcjE5MTU3MzYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/19157360?u=a20996a145f1be613c7b0a57e75d36508572e29d&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0xB10C",
      "html_url": "https://github.com/0xB10C",
      "followers_url": "https://api.github.com/users/0xB10C/followers",
      "following_url": "https://api.github.com/users/0xB10C/following{/other_user}",
      "gists_url": "https://api.github.com/users/0xB10C/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
      "organizations_url": "https://api.github.com/users/0xB10C/orgs",
      "repos_url": "https://api.github.com/users/0xB10C/repos",
      "events_url": "https://api.github.com/users/0xB10C/events{/privacy}",
      "received_events_url": "https://api.github.com/users/0xB10C/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-09-11T23:00:52Z",
    "updated_at": "2021-09-11T23:00:52Z",
    "author_association": "CONTRIBUTOR",
    "body": "Did some more profiling on a node in IBD running with this PR (https://github.com/bitcoin/bitcoin/commit/15b8ba500d59c6c5de764cd13c22d0cb44d6bd14) to make sure the `ToString()` is really the issue here.\r\n\r\nIn `CCoinsViewCache::SpendCoin` we spend more than half of the time in `ToString()`.  \r\n![image](https://user-images.githubusercontent.com/19157360/132963574-4df9aa0a-6cce-4149-8cb1-8f08ca0b44b8.png)\r\n\r\nIn `CCoinsViewCache::AddCoin` we spend a lot less time in `ToString()` compared to `CCoinsViewCache::SpendCoin`, but still significant time.\r\n![image](https://user-images.githubusercontent.com/19157360/132963510-d62b2a02-29b4-4eaa-b8f8-2123d90d63d2.png)\r\n\r\n\r\n(please ignore the `bitcoind-22902-mergebase` binary name shown here. It's not the mergebase, the binary is build from https://github.com/bitcoin/bitcoin/commit/15b8ba500d59c6c5de764cd13c22d0cb44d6bd14)",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/917498376/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/931979916",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22902#issuecomment-931979916",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22902",
    "id": 931979916,
    "node_id": "IC_kwDOABII5843jOKM",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-10-01T07:29:25Z",
    "updated_at": "2021-10-01T07:30:28Z",
    "author_association": "MEMBER",
    "body": "I think in general good advice is to pass binary/raw data into the trace functions directly. Don't spent effort formatting, you can do this on the other side (and only when necessary, just before presentation to the user).",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/931979916/reactions",
      "total_count": 3,
      "+1": 3,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/965631546",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22902#issuecomment-965631546",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22902",
    "id": 965631546,
    "node_id": "IC_kwDOABII5845jl46",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-10T18:39:49Z",
    "updated_at": "2021-11-10T19:01:00Z",
    "author_association": "MEMBER",
    "body": "Concept and light code review ACK, thanks for adding tracepoints!\r\n\r\nEdit: see discussion please remove the `ToString`.",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/965631546/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/981592097",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22902#issuecomment-981592097",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22902",
    "id": 981592097,
    "node_id": "IC_kwDOABII5846gegh",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?u=13b19d1ff2f5f914e180c41418f451a4ba6f8bd1&v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "created_at": "2021-11-29T12:31:56Z",
    "updated_at": "2021-11-29T12:31:56Z",
    "author_association": "MEMBER",
    "body": "Thanks for updating!\r\nCode and documentation review ACK 2bc51c5c3215398875c04456a3f3df1c07b830b5",
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/981592097/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/703001878",
    "pull_request_review_id": 747350284,
    "id": 703001878,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwMzAwMTg3OA==",
    "diff_hunk": "@@ -2120,6 +2120,13 @@ bool CChainState::FlushStateToDisk(\n             nLastFlush = nNow;\n             full_flush_completed = true;\n         }\n+        TRACE6(utxocache, flush,\n+               (int64_t)(GetTimeMicros() - nNow.count()), // in microseconds (\u00b5s)",
    "path": "src/validation.cpp",
    "position": 5,
    "original_position": 5,
    "commit_id": "2bc51c5c3215398875c04456a3f3df1c07b830b5",
    "original_commit_id": "15b8ba500d59c6c5de764cd13c22d0cb44d6bd14",
    "user": {
      "login": "jb55",
      "id": 45598,
      "node_id": "MDQ6VXNlcjQ1NTk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/45598?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jb55",
      "html_url": "https://github.com/jb55",
      "followers_url": "https://api.github.com/users/jb55/followers",
      "following_url": "https://api.github.com/users/jb55/following{/other_user}",
      "gists_url": "https://api.github.com/users/jb55/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jb55/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jb55/subscriptions",
      "organizations_url": "https://api.github.com/users/jb55/orgs",
      "repos_url": "https://api.github.com/users/jb55/repos",
      "events_url": "https://api.github.com/users/jb55/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jb55/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "what's the purpose of this argument? ",
    "created_at": "2021-09-06T16:26:26Z",
    "updated_at": "2021-09-06T16:38:40Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22902#discussion_r703001878",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22902",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/703001878"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22902#discussion_r703001878"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22902"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/703001878/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2105,
    "original_line": 2105,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/703005689",
    "pull_request_review_id": 747350284,
    "id": 703005689,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwMzAwNTY4OQ==",
    "diff_hunk": "@@ -95,6 +96,15 @@ void CCoinsViewCache::AddCoin(const COutPoint &outpoint, Coin&& coin, bool possi\n     it->second.coin = std::move(coin);\n     it->second.flags |= CCoinsCacheEntry::DIRTY | (fresh ? CCoinsCacheEntry::FRESH : 0);\n     cachedCoinsUsage += it->second.coin.DynamicMemoryUsage();\n+    TRACE8(utxocache, add,\n+           outpoint.hash.ToString().c_str(),",
    "path": "src/coins.cpp",
    "position": null,
    "original_position": 13,
    "commit_id": "2bc51c5c3215398875c04456a3f3df1c07b830b5",
    "original_commit_id": "15b8ba500d59c6c5de764cd13c22d0cb44d6bd14",
    "user": {
      "login": "jb55",
      "id": 45598,
      "node_id": "MDQ6VXNlcjQ1NTk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/45598?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jb55",
      "html_url": "https://github.com/jb55",
      "followers_url": "https://api.github.com/users/jb55/followers",
      "following_url": "https://api.github.com/users/jb55/following{/other_user}",
      "gists_url": "https://api.github.com/users/jb55/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jb55/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jb55/subscriptions",
      "organizations_url": "https://api.github.com/users/jb55/orgs",
      "repos_url": "https://api.github.com/users/jb55/repos",
      "events_url": "https://api.github.com/users/jb55/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jb55/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "do we need the hash string here (and the ones below)? we should avoid doing non-negligible computations in traces.",
    "created_at": "2021-09-06T16:36:38Z",
    "updated_at": "2021-09-06T16:38:40Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22902#discussion_r703005689",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22902",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/703005689"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22902#discussion_r703005689"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22902"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/703005689/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 100,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/703013754",
    "pull_request_review_id": 747363336,
    "id": 703013754,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwMzAxMzc1NA==",
    "diff_hunk": "@@ -95,6 +96,15 @@ void CCoinsViewCache::AddCoin(const COutPoint &outpoint, Coin&& coin, bool possi\n     it->second.coin = std::move(coin);\n     it->second.flags |= CCoinsCacheEntry::DIRTY | (fresh ? CCoinsCacheEntry::FRESH : 0);\n     cachedCoinsUsage += it->second.coin.DynamicMemoryUsage();\n+    TRACE8(utxocache, add,\n+           outpoint.hash.ToString().c_str(),",
    "path": "src/coins.cpp",
    "position": null,
    "original_position": 13,
    "commit_id": "2bc51c5c3215398875c04456a3f3df1c07b830b5",
    "original_commit_id": "15b8ba500d59c6c5de764cd13c22d0cb44d6bd14",
    "user": {
      "login": "0xB10C",
      "id": 19157360,
      "node_id": "MDQ6VXNlcjE5MTU3MzYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0xB10C",
      "html_url": "https://github.com/0xB10C",
      "followers_url": "https://api.github.com/users/0xB10C/followers",
      "following_url": "https://api.github.com/users/0xB10C/following{/other_user}",
      "gists_url": "https://api.github.com/users/0xB10C/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
      "organizations_url": "https://api.github.com/users/0xB10C/orgs",
      "repos_url": "https://api.github.com/users/0xB10C/repos",
      "events_url": "https://api.github.com/users/0xB10C/events{/privacy}",
      "received_events_url": "https://api.github.com/users/0xB10C/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "We need if we want to support the current versions of `bpftrace` as it can't print binary data in hex (or at all really).\r\n\r\nrelated discussion https://github.com/bitcoin/bitcoin/pull/22006#discussion_r638775357 \r\n\r\nmight be worth thinking about adding support for this in `bpftrace` rather than this _work around_ here",
    "created_at": "2021-09-06T17:01:01Z",
    "updated_at": "2021-09-06T17:58:57Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22902#discussion_r703013754",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22902",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/703013754"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22902#discussion_r703013754"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22902"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/703013754/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 100,
    "side": "RIGHT",
    "in_reply_to_id": 703005689
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/703014722",
    "pull_request_review_id": 747364330,
    "id": 703014722,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwMzAxNDcyMg==",
    "diff_hunk": "@@ -95,6 +96,15 @@ void CCoinsViewCache::AddCoin(const COutPoint &outpoint, Coin&& coin, bool possi\n     it->second.coin = std::move(coin);\n     it->second.flags |= CCoinsCacheEntry::DIRTY | (fresh ? CCoinsCacheEntry::FRESH : 0);\n     cachedCoinsUsage += it->second.coin.DynamicMemoryUsage();\n+    TRACE8(utxocache, add,\n+           outpoint.hash.ToString().c_str(),",
    "path": "src/coins.cpp",
    "position": null,
    "original_position": 13,
    "commit_id": "2bc51c5c3215398875c04456a3f3df1c07b830b5",
    "original_commit_id": "15b8ba500d59c6c5de764cd13c22d0cb44d6bd14",
    "user": {
      "login": "0xB10C",
      "id": 19157360,
      "node_id": "MDQ6VXNlcjE5MTU3MzYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0xB10C",
      "html_url": "https://github.com/0xB10C",
      "followers_url": "https://api.github.com/users/0xB10C/followers",
      "following_url": "https://api.github.com/users/0xB10C/following{/other_user}",
      "gists_url": "https://api.github.com/users/0xB10C/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
      "organizations_url": "https://api.github.com/users/0xB10C/orgs",
      "repos_url": "https://api.github.com/users/0xB10C/repos",
      "events_url": "https://api.github.com/users/0xB10C/events{/privacy}",
      "received_events_url": "https://api.github.com/users/0xB10C/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I agree that `outpoint.hash.ToString().c_str()` here is called _a lot_ more than the `hash.data().toString().c_str()` in the connect_block tracepoint. This could hurt performance. Might need to drop this. ",
    "created_at": "2021-09-06T17:03:53Z",
    "updated_at": "2021-09-06T17:47:08Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22902#discussion_r703014722",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22902",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/703014722"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22902#discussion_r703014722"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22902"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/703014722/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 100,
    "side": "RIGHT",
    "in_reply_to_id": 703005689
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/705041737",
    "pull_request_review_id": 749964690,
    "id": 705041737,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNTA0MTczNw==",
    "diff_hunk": "@@ -95,6 +96,15 @@ void CCoinsViewCache::AddCoin(const COutPoint &outpoint, Coin&& coin, bool possi\n     it->second.coin = std::move(coin);\n     it->second.flags |= CCoinsCacheEntry::DIRTY | (fresh ? CCoinsCacheEntry::FRESH : 0);\n     cachedCoinsUsage += it->second.coin.DynamicMemoryUsage();\n+    TRACE8(utxocache, add,\n+           outpoint.hash.ToString().c_str(),",
    "path": "src/coins.cpp",
    "position": null,
    "original_position": 13,
    "commit_id": "2bc51c5c3215398875c04456a3f3df1c07b830b5",
    "original_commit_id": "15b8ba500d59c6c5de764cd13c22d0cb44d6bd14",
    "user": {
      "login": "martinus",
      "id": 14386,
      "node_id": "MDQ6VXNlcjE0Mzg2",
      "avatar_url": "https://avatars.githubusercontent.com/u/14386?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/martinus",
      "html_url": "https://github.com/martinus",
      "followers_url": "https://api.github.com/users/martinus/followers",
      "following_url": "https://api.github.com/users/martinus/following{/other_user}",
      "gists_url": "https://api.github.com/users/martinus/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/martinus/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/martinus/subscriptions",
      "organizations_url": "https://api.github.com/users/martinus/orgs",
      "repos_url": "https://api.github.com/users/martinus/repos",
      "events_url": "https://api.github.com/users/martinus/events{/privacy}",
      "received_events_url": "https://api.github.com/users/martinus/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "How about only using the first 64bit of the hash: `outpoint.hash.GetUint64(0)`. This should be very fast and maybe unique enough, at least for the purpose of tracing",
    "created_at": "2021-09-09T07:12:38Z",
    "updated_at": "2021-09-09T07:12:38Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22902#discussion_r705041737",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22902",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/705041737"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22902#discussion_r705041737"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22902"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/705041737/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 100,
    "side": "RIGHT",
    "in_reply_to_id": 703005689
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/705047534",
    "pull_request_review_id": 749970539,
    "id": 705047534,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNTA0NzUzNA==",
    "diff_hunk": "@@ -95,6 +96,15 @@ void CCoinsViewCache::AddCoin(const COutPoint &outpoint, Coin&& coin, bool possi\n     it->second.coin = std::move(coin);\n     it->second.flags |= CCoinsCacheEntry::DIRTY | (fresh ? CCoinsCacheEntry::FRESH : 0);\n     cachedCoinsUsage += it->second.coin.DynamicMemoryUsage();\n+    TRACE8(utxocache, add,\n+           outpoint.hash.ToString().c_str(),",
    "path": "src/coins.cpp",
    "position": null,
    "original_position": 13,
    "commit_id": "2bc51c5c3215398875c04456a3f3df1c07b830b5",
    "original_commit_id": "15b8ba500d59c6c5de764cd13c22d0cb44d6bd14",
    "user": {
      "login": "0xB10C",
      "id": 19157360,
      "node_id": "MDQ6VXNlcjE5MTU3MzYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0xB10C",
      "html_url": "https://github.com/0xB10C",
      "followers_url": "https://api.github.com/users/0xB10C/followers",
      "following_url": "https://api.github.com/users/0xB10C/following{/other_user}",
      "gists_url": "https://api.github.com/users/0xB10C/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
      "organizations_url": "https://api.github.com/users/0xB10C/orgs",
      "repos_url": "https://api.github.com/users/0xB10C/repos",
      "events_url": "https://api.github.com/users/0xB10C/events{/privacy}",
      "received_events_url": "https://api.github.com/users/0xB10C/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "We already pass `outpoint.hash.data()` as the last argument, that's not the issue. The issue here is the `ToString()` part which might be to expensive in such a frequently called function while being only a work around for `bpftrace` not supporting hex-formatting.",
    "created_at": "2021-09-09T07:19:16Z",
    "updated_at": "2021-09-09T07:30:33Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22902#discussion_r705047534",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22902",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/705047534"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22902#discussion_r705047534"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22902"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/705047534/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 100,
    "side": "RIGHT",
    "in_reply_to_id": 703005689
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/705176691",
    "pull_request_review_id": 750130308,
    "id": 705176691,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNTE3NjY5MQ==",
    "diff_hunk": "@@ -95,6 +96,15 @@ void CCoinsViewCache::AddCoin(const COutPoint &outpoint, Coin&& coin, bool possi\n     it->second.coin = std::move(coin);\n     it->second.flags |= CCoinsCacheEntry::DIRTY | (fresh ? CCoinsCacheEntry::FRESH : 0);\n     cachedCoinsUsage += it->second.coin.DynamicMemoryUsage();\n+    TRACE8(utxocache, add,\n+           outpoint.hash.ToString().c_str(),",
    "path": "src/coins.cpp",
    "position": null,
    "original_position": 13,
    "commit_id": "2bc51c5c3215398875c04456a3f3df1c07b830b5",
    "original_commit_id": "15b8ba500d59c6c5de764cd13c22d0cb44d6bd14",
    "user": {
      "login": "0xB10C",
      "id": 19157360,
      "node_id": "MDQ6VXNlcjE5MTU3MzYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0xB10C",
      "html_url": "https://github.com/0xB10C",
      "followers_url": "https://api.github.com/users/0xB10C/followers",
      "following_url": "https://api.github.com/users/0xB10C/following{/other_user}",
      "gists_url": "https://api.github.com/users/0xB10C/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
      "organizations_url": "https://api.github.com/users/0xB10C/orgs",
      "repos_url": "https://api.github.com/users/0xB10C/repos",
      "events_url": "https://api.github.com/users/0xB10C/events{/privacy}",
      "received_events_url": "https://api.github.com/users/0xB10C/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "I just came across https://github.com/iovisor/bpftrace/issues/659#issuecomment-568624842. We don't need to use the built-in hex-formatting as it's quite simple just `printf(\"%02x\")` each byte of the txid in an [`unroll () {...}`][1]. This even allows us to print the txids in big-endian (the block-explorer format). \r\n\r\n```\r\n  $p = $txid + 31;\r\n  unroll(32) {\r\n      $b = *(uint8*)$p;\r\n      printf(\"%02x\", $b);\r\n      $p-=1;\r\n  }\r\n```\r\n[1]: https://github.com/iovisor/bpftrace/blob/master/docs/reference_guide.md#9-unroll---unroll\r\n\r\nThis means we can drop the `outpoint.hash.ToString().c_str()` from the tracepoints added here and use the `outpoint.hash.data()` as the first argument. ",
    "created_at": "2021-09-09T09:55:57Z",
    "updated_at": "2021-09-09T09:55:57Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22902#discussion_r705176691",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22902",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/705176691"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22902#discussion_r705176691"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22902"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/705176691/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 100,
    "side": "RIGHT",
    "in_reply_to_id": 703005689
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706044573",
    "pull_request_review_id": 751233617,
    "id": 706044573,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNjA0NDU3Mw==",
    "diff_hunk": "@@ -2120,6 +2120,13 @@ bool CChainState::FlushStateToDisk(\n             nLastFlush = nNow;\n             full_flush_completed = true;\n         }\n+        TRACE6(utxocache, flush,\n+               (int64_t)(GetTimeMicros() - nNow.count()), // in microseconds (\u00b5s)",
    "path": "src/validation.cpp",
    "position": 5,
    "original_position": 5,
    "commit_id": "2bc51c5c3215398875c04456a3f3df1c07b830b5",
    "original_commit_id": "15b8ba500d59c6c5de764cd13c22d0cb44d6bd14",
    "user": {
      "login": "arnabsen1729",
      "id": 51032928,
      "node_id": "MDQ6VXNlcjUxMDMyOTI4",
      "avatar_url": "https://avatars.githubusercontent.com/u/51032928?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arnabsen1729",
      "html_url": "https://github.com/arnabsen1729",
      "followers_url": "https://api.github.com/users/arnabsen1729/followers",
      "following_url": "https://api.github.com/users/arnabsen1729/following{/other_user}",
      "gists_url": "https://api.github.com/users/arnabsen1729/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arnabsen1729/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arnabsen1729/subscriptions",
      "organizations_url": "https://api.github.com/users/arnabsen1729/orgs",
      "repos_url": "https://api.github.com/users/arnabsen1729/repos",
      "events_url": "https://api.github.com/users/arnabsen1729/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arnabsen1729/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "The purpose was to get the duration of the flush, this value can be used for benchmarking purposes. \r\n\r\nThe `nNow` was declared here:\r\nhttps://github.com/bitcoin/bitcoin/blob/384d07601185d0779c324392e798da234163ca72/src/validation.cpp#L1969",
    "created_at": "2021-09-10T09:40:10Z",
    "updated_at": "2021-09-10T09:40:10Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22902#discussion_r706044573",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22902",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706044573"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22902#discussion_r706044573"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22902"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706044573/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2105,
    "original_line": 2105,
    "side": "RIGHT",
    "in_reply_to_id": 703001878
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706509325",
    "pull_request_review_id": 751844670,
    "id": 706509325,
    "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwNjUwOTMyNQ==",
    "diff_hunk": "@@ -95,6 +96,15 @@ void CCoinsViewCache::AddCoin(const COutPoint &outpoint, Coin&& coin, bool possi\n     it->second.coin = std::move(coin);\n     it->second.flags |= CCoinsCacheEntry::DIRTY | (fresh ? CCoinsCacheEntry::FRESH : 0);\n     cachedCoinsUsage += it->second.coin.DynamicMemoryUsage();\n+    TRACE8(utxocache, add,\n+           outpoint.hash.ToString().c_str(),",
    "path": "src/coins.cpp",
    "position": null,
    "original_position": 13,
    "commit_id": "2bc51c5c3215398875c04456a3f3df1c07b830b5",
    "original_commit_id": "15b8ba500d59c6c5de764cd13c22d0cb44d6bd14",
    "user": {
      "login": "jb55",
      "id": 45598,
      "node_id": "MDQ6VXNlcjQ1NTk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/45598?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jb55",
      "html_url": "https://github.com/jb55",
      "followers_url": "https://api.github.com/users/jb55/followers",
      "following_url": "https://api.github.com/users/jb55/following{/other_user}",
      "gists_url": "https://api.github.com/users/jb55/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jb55/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jb55/subscriptions",
      "organizations_url": "https://api.github.com/users/jb55/orgs",
      "repos_url": "https://api.github.com/users/jb55/repos",
      "events_url": "https://api.github.com/users/jb55/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jb55/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Nice, I was trying to use unroll like this for printing data in bpftrace but could never figure it out. I was never able to do it based on a length argument, probably because it wasn't a literal. This case works fine though since we know the length of the hash.",
    "created_at": "2021-09-10T22:55:26Z",
    "updated_at": "2021-09-10T22:55:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22902#discussion_r706509325",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22902",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706509325"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22902#discussion_r706509325"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22902"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/706509325/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 100,
    "side": "RIGHT",
    "in_reply_to_id": 703005689
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/746898280",
    "pull_request_review_id": 803028022,
    "id": 746898280,
    "node_id": "PRRC_kwDOABII584shMNo",
    "diff_hunk": "@@ -95,6 +96,15 @@ void CCoinsViewCache::AddCoin(const COutPoint &outpoint, Coin&& coin, bool possi\n     it->second.coin = std::move(coin);\n     it->second.flags |= CCoinsCacheEntry::DIRTY | (fresh ? CCoinsCacheEntry::FRESH : 0);\n     cachedCoinsUsage += it->second.coin.DynamicMemoryUsage();\n+    TRACE8(utxocache, add,\n+           outpoint.hash.ToString().c_str(),",
    "path": "src/coins.cpp",
    "position": null,
    "original_position": 13,
    "commit_id": "2bc51c5c3215398875c04456a3f3df1c07b830b5",
    "original_commit_id": "15b8ba500d59c6c5de764cd13c22d0cb44d6bd14",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url": "https://api.github.com/users/laanwj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "> We already pass outpoint.hash.data() as the last argument, that's not the issue. The issue here is the ToString() part which might be to expensive in such a frequently called function while being only a work around for bpftrace not supporting hex-formatting.\r\n\r\nI agree here. Let's remove this ToString argument. It's too much overhead to allocate, construct, deallocate a string here every time even if the tracepoint is disabled.",
    "created_at": "2021-11-10T19:00:11Z",
    "updated_at": "2021-11-10T19:00:11Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22902#discussion_r746898280",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22902",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/746898280"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22902#discussion_r746898280"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22902"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/746898280/reactions",
      "total_count": 1,
      "+1": 1,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": null,
    "original_line": 100,
    "side": "RIGHT",
    "in_reply_to_id": 703005689
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/758492317",
    "pull_request_review_id": 817979316,
    "id": 758492317,
    "node_id": "PRRC_kwDOABII584tNayd",
    "diff_hunk": "@@ -2101,6 +2101,13 @@ bool CChainState::FlushStateToDisk(\n             nLastFlush = nNow;\n             full_flush_completed = true;\n         }\n+        TRACE6(utxocache, flush,",
    "path": "src/validation.cpp",
    "position": 4,
    "original_position": 4,
    "commit_id": "2bc51c5c3215398875c04456a3f3df1c07b830b5",
    "original_commit_id": "2bc51c5c3215398875c04456a3f3df1c07b830b5",
    "user": {
      "login": "0xB10C",
      "id": 19157360,
      "node_id": "MDQ6VXNlcjE5MTU3MzYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0xB10C",
      "html_url": "https://github.com/0xB10C",
      "followers_url": "https://api.github.com/users/0xB10C/followers",
      "following_url": "https://api.github.com/users/0xB10C/following{/other_user}",
      "gists_url": "https://api.github.com/users/0xB10C/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
      "organizations_url": "https://api.github.com/users/0xB10C/orgs",
      "repos_url": "https://api.github.com/users/0xB10C/repos",
      "events_url": "https://api.github.com/users/0xB10C/events{/privacy}",
      "received_events_url": "https://api.github.com/users/0xB10C/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This tracepoint is being called each time `FlushStateToDisk()` is called, even when we don't flush. We call `FlushStateToDisk()` with `FlushStateMode::PERIODIC` in `AcceptToMemoryPoolWithTime()` for each transaction accepted to mempool.",
    "created_at": "2021-11-29T15:48:34Z",
    "updated_at": "2021-11-29T16:16:31Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22902#discussion_r758492317",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22902",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/758492317"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22902#discussion_r758492317"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22902"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/758492317/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2104,
    "original_line": 2104,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/758494620",
    "pull_request_review_id": 817979316,
    "id": 758494620,
    "node_id": "PRRC_kwDOABII584tNbWc",
    "diff_hunk": "@@ -234,3 +234,62 @@ Histogram of block connection times in milliseconds (ms).\n [16, 32)               9 |                                                    |\n [32, 64)               4 |                                                    |\n ```\n+\n+### log_utxocache_flush.py\n+\n+A BCC Python script to log the cache and index flushes. Based on the\n+`utxocache:flush` tracepoint.\n+\n+```bash\n+$ python3 contrib/tracing/log_utxocache_flush.py ./src/bitcoind\n+```\n+\n+```\n+Logging utxocache flushes. Ctrl-C to end...\n+Duration (\u00b5s)   Mode       Coins Count     Memory Usage    Prune    Full Flush\n+0               PERIODIC   28484           3929.87 kB      False    False",
    "path": "contrib/tracing/README.md",
    "position": 17,
    "original_position": 17,
    "commit_id": "2bc51c5c3215398875c04456a3f3df1c07b830b5",
    "original_commit_id": "2bc51c5c3215398875c04456a3f3df1c07b830b5",
    "user": {
      "login": "0xB10C",
      "id": 19157360,
      "node_id": "MDQ6VXNlcjE5MTU3MzYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0xB10C",
      "html_url": "https://github.com/0xB10C",
      "followers_url": "https://api.github.com/users/0xB10C/followers",
      "following_url": "https://api.github.com/users/0xB10C/following{/other_user}",
      "gists_url": "https://api.github.com/users/0xB10C/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
      "organizations_url": "https://api.github.com/users/0xB10C/orgs",
      "repos_url": "https://api.github.com/users/0xB10C/repos",
      "events_url": "https://api.github.com/users/0xB10C/events{/privacy}",
      "received_events_url": "https://api.github.com/users/0xB10C/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "We didn't flush here. We should only trace and log on flushes and not each time `FlushStateToDisk()` is called. See https://github.com/bitcoin/bitcoin/pull/22902#discussion_r758492317.",
    "created_at": "2021-11-29T15:50:45Z",
    "updated_at": "2021-11-29T15:57:26Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22902#discussion_r758494620",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22902",
    "author_association": "CONTRIBUTOR",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/758494620"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22902#discussion_r758494620"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22902"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/758494620/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 250,
    "original_line": 250,
    "side": "RIGHT"
  },
  {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/758611463",
    "pull_request_review_id": 818139542,
    "id": 758611463,
    "node_id": "PRRC_kwDOABII584tN34H",
    "diff_hunk": "@@ -2101,6 +2101,13 @@ bool CChainState::FlushStateToDisk(\n             nLastFlush = nNow;\n             full_flush_completed = true;\n         }\n+        TRACE6(utxocache, flush,",
    "path": "src/validation.cpp",
    "position": 4,
    "original_position": 4,
    "commit_id": "2bc51c5c3215398875c04456a3f3df1c07b830b5",
    "original_commit_id": "2bc51c5c3215398875c04456a3f3df1c07b830b5",
    "user": {
      "login": "jamesob",
      "id": 73197,
      "node_id": "MDQ6VXNlcjczMTk3",
      "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jamesob",
      "html_url": "https://github.com/jamesob",
      "followers_url": "https://api.github.com/users/jamesob/followers",
      "following_url": "https://api.github.com/users/jamesob/following{/other_user}",
      "gists_url": "https://api.github.com/users/jamesob/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
      "organizations_url": "https://api.github.com/users/jamesob/orgs",
      "repos_url": "https://api.github.com/users/jamesob/repos",
      "events_url": "https://api.github.com/users/jamesob/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jamesob/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "If this is specifically about flushing the UTXO set, it should probably be moved a few lines higher into the conditional where the associated `LOG_TIME_MILLIS...` call is: https://github.com/bitcoin/bitcoin/blob/master/src/validation.cpp#L2087-L2089\r\n\r\nHowever based on the included doc, it sounds like this tracepoint is attempting to include both UTXO cache flushes and block index flushes. I think this will be difficult to do with a single tracepoint, so probably the scope should be reduced to a tracepoint for writing the coins cache to disk.",
    "created_at": "2021-11-29T18:03:48Z",
    "updated_at": "2021-11-29T18:03:48Z",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/22902#discussion_r758611463",
    "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22902",
    "author_association": "MEMBER",
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/758611463"
      },
      "html": {
        "href": "https://github.com/bitcoin/bitcoin/pull/22902#discussion_r758611463"
      },
      "pull_request": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22902"
      }
    },
    "reactions": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/758611463/reactions",
      "total_count": 2,
      "+1": 2,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "start_line": null,
    "original_start_line": null,
    "start_side": null,
    "line": 2104,
    "original_line": 2104,
    "side": "RIGHT",
    "in_reply_to_id": 758492317
  }
]