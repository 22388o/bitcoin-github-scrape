Diapolo,2014-10-22T06:38:09Z,"Seems to be this change was made, when CAmount was introduced, nice you catched that.\n",https://github.com/bitcoin/bitcoin/pull/5117#issuecomment-60042702,60042702,
laanwj,2014-10-22T08:00:52Z,"NACK. This solution is hacky because CAmount is not guaranteed to be a uint64_t, and the type of setValue is actually a CAmount.\n\nThat's weird actually. Why doesn't CAmount work here? We do register the type with Qt, here\nhttps://github.com/bitcoin/bitcoin/blob/master/src/qt/bitcoin.cpp#L516\n\nI cannot reproduce it here either. The fee field works fine w/ Qt 5.2.1. What version of Qt are you b",https://github.com/bitcoin/bitcoin/pull/5117#issuecomment-60049209,60049209,
cozz,2014-10-22T18:31:25Z,"Agreed on the hack, but I dont know better.\nIt works under qt5.3 for me too. Problem exists with 4.8.\nDo we still build linux-releases with qt4?\n",https://github.com/bitcoin/bitcoin/pull/5117#issuecomment-60132315,60132315,
laanwj,2014-10-23T07:15:01Z,"Yes, we do, so I guess we need to find a solution for qt4 (even if we wouldn't build with it ourselves anymore we should support it).\nIn the worst case we could make this an #ifdef ... but I wonder if I'm not just doing something wrong in the registration?\n",https://github.com/bitcoin/bitcoin/pull/5117#issuecomment-60200892,60200892,
cozz,2014-10-23T17:23:53Z,"I tried playing around with the MetaType-Registration, does not work.\nUpdated now to an #if.\n",https://github.com/bitcoin/bitcoin/pull/5117#issuecomment-60275053,60275053,
theuni,2014-10-23T18:47:22Z,I don't see any difference on OSX with 4.8.6. Seems to work fine without the hack. Could you describe exactly what's fixed? I'm assuming I'd know the problem if I saw it.\n\nWhat is the build/runtime environment you're using?\n,https://github.com/bitcoin/bitcoin/pull/5117#issuecomment-60289189,60289189,
cozz,2014-10-23T23:10:46Z,"I compile archlinux, but I also tested compiling a release in virtualbox and then tested the resulting linux executable in a different linux virtualbox, same bug. Dont know about windows or osx.\n\n![bug](https://cloud.githubusercontent.com/assets/2814559/4759559/4efe8aa4-5ae8-11e4-9191-6ec22f04b0f7.png)\n\nThe field is always empty when opening the dialog. You can enter a value and its stored cor",https://github.com/bitcoin/bitcoin/pull/5117#issuecomment-60323409,60323409,
theuni,2014-10-24T05:17:21Z,"Ok, I've reproduced in linux with qt4.8. I went pretty far down the rabbit hole and I believe I've found the core issue, but I can only wildly speculate as to the reason.\n\nlinux64: typedef long int                int64_t;\nosx64: typedef long long               int64_t;\nlinux32: typedef long long int           int64_t;\nwin64: typedef long long  int64_t;\nwin32: typedef long long  int64_t;\n\nO",https://github.com/bitcoin/bitcoin/pull/5117#issuecomment-60345625,60345625,
laanwj,2014-10-24T07:11:32Z,"@theuni I dived into another part of the rabbit hole last night. The issue is twofold:\n1. QDataWidgetMapper doesn't seem to accept the custom property types. No matter what, it doesn't seem to be able to pass a user type like CAmount from the model's data to the widget property. It just treats the result as invalid.\n2. In `OptionsModel::data` with FEE we actually return a QVariant(qint64), not a",https://github.com/bitcoin/bitcoin/pull/5117#issuecomment-60352126,60352126,
theuni,2014-10-24T07:35:02Z,"@laanwj I started down the same path as well. I began by using QVariant::fromValue<CAmount>() and value.value<CAmount>() as necessary, but I never had any luck that way. I assumed that If I treated it as though it were an opaque class that wasn't compatible to an integral type I'd eventually be able to get the same ""class"" back out by doing all variant operations manually and in reverse, but I had",https://github.com/bitcoin/bitcoin/pull/5117#issuecomment-60353942,60353942,
cozz,2014-10-25T04:56:23Z,"Updated now for both qt4/5 and linked to this issue.\n\nI also suspect that because there is a weird difference between long and long long\nthe mapping does not work.\n\n@laanwj \nAbout smartfee, I thought the same and was really trying to come up with something\nto bring -txconfirmtarget to the GUI, but I didnt. See full thoughts here: #4866\n",https://github.com/bitcoin/bitcoin/pull/5117#issuecomment-60471753,60471753,
