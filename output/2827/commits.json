[
  {
    "sha": "c431e9f1f03023d216db0ff48d3d598e705c97f9",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpjNDMxZTlmMWYwMzAyM2QyMTZkYjBmZjQ4ZDNkNTk4ZTcwNWM5N2Y5",
    "commit": {
      "author": {
        "name": "Philip Kaufmann",
        "email": "phil.kaufmann@t-online.de",
        "date": "2013-07-13T11:14:23Z"
      },
      "committer": {
        "name": "Philip Kaufmann",
        "email": "phil.kaufmann@t-online.de",
        "date": "2013-07-29T14:22:46Z"
      },
      "message": "Bitcoin-Qt: save and restore position of debug window\n\n- move the code for saving and restoring window positions from BitcoinGUI\n  to GUIUtil, make it more generic and also use it for saving/restoring\n  debug window positions",
      "tree": {
        "sha": "6132628aa34888e6e9af93982c77d8afcff2f045",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6132628aa34888e6e9af93982c77d8afcff2f045"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c431e9f1f03023d216db0ff48d3d598e705c97f9",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c431e9f1f03023d216db0ff48d3d598e705c97f9",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/c431e9f1f03023d216db0ff48d3d598e705c97f9",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c431e9f1f03023d216db0ff48d3d598e705c97f9/comments",
    "author": null,
    "committer": null,
    "parents": [
      {
        "sha": "c4316fefa5f56d62eeceb710ee18313bd9be1128",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c4316fefa5f56d62eeceb710ee18313bd9be1128",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/c4316fefa5f56d62eeceb710ee18313bd9be1128"
      }
    ],
    "stats": {
      "total": 64,
      "additions": 34,
      "deletions": 30
    },
    "files": [
      {
        "sha": "15541f914d127a2fffe83bc3e64481d37ddbb252",
        "filename": "src/qt/bitcoingui.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 26,
        "changes": 28,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c431e9f1f03023d216db0ff48d3d598e705c97f9/src/qt/bitcoingui.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c431e9f1f03023d216db0ff48d3d598e705c97f9/src/qt/bitcoingui.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoingui.cpp?ref=c431e9f1f03023d216db0ff48d3d598e705c97f9",
        "patch": "@@ -49,8 +49,6 @@\n #endif\n #include <QMimeData>\n #include <QStyle>\n-#include <QSettings>\n-#include <QDesktopWidget>\n #include <QListWidget>\n \n #include <iostream>\n@@ -68,7 +66,7 @@ BitcoinGUI::BitcoinGUI(bool fIsTestnet, QWidget *parent) :\n     rpcConsole(0),\n     prevBlocks(0)\n {\n-    restoreWindowGeometry();\n+    GUIUtil::restoreWindowGeometry(\"nWindow\", QSize(850, 550), this);\n \n #ifndef Q_OS_MAC\n     if (!fIsTestnet)\n@@ -166,7 +164,7 @@ BitcoinGUI::BitcoinGUI(bool fIsTestnet, QWidget *parent) :\n \n BitcoinGUI::~BitcoinGUI()\n {\n-    saveWindowGeometry();\n+    GUIUtil::saveWindowGeometry(\"nWindow\", this);\n     if(trayIcon) // Hide tray icon, as deleting will let it linger until quit (on Ubuntu)\n         trayIcon->hide();\n #ifdef Q_OS_MAC\n@@ -425,28 +423,6 @@ void BitcoinGUI::trayIconActivated(QSystemTrayIcon::ActivationReason reason)\n }\n #endif\n \n-void BitcoinGUI::saveWindowGeometry()\n-{\n-    QSettings settings;\n-    settings.setValue(\"nWindowPos\", pos());\n-    settings.setValue(\"nWindowSize\", size());\n-}\n-\n-void BitcoinGUI::restoreWindowGeometry()\n-{\n-    QSettings settings;\n-    QPoint pos = settings.value(\"nWindowPos\").toPoint();\n-    QSize size = settings.value(\"nWindowSize\", QSize(850, 550)).toSize();\n-    if (!pos.x() && !pos.y())\n-    {\n-        QRect screen = QApplication::desktop()->screenGeometry();\n-        pos.setX((screen.width()-size.width())/2);\n-        pos.setY((screen.height()-size.height())/2);\n-    }\n-    resize(size);\n-    move(pos);\n-}\n-\n void BitcoinGUI::optionsClicked()\n {\n     if(!clientModel || !clientModel->getOptionsModel())"
      },
      {
        "sha": "6b9161539cc0817d725cb2e724da4447f902b3ea",
        "filename": "src/qt/bitcoingui.h",
        "status": "modified",
        "additions": 0,
        "deletions": 4,
        "changes": 4,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c431e9f1f03023d216db0ff48d3d598e705c97f9/src/qt/bitcoingui.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c431e9f1f03023d216db0ff48d3d598e705c97f9/src/qt/bitcoingui.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/bitcoingui.h?ref=c431e9f1f03023d216db0ff48d3d598e705c97f9",
        "patch": "@@ -122,10 +122,6 @@ class BitcoinGUI : public QMainWindow\n     void createTrayIcon(bool fIsTestnet);\n     /** Create system tray menu (or setup the dock menu) */\n     void createTrayIconMenu();\n-    /** Save window size and position */\n-    void saveWindowGeometry();\n-    /** Restore window size and position */\n-    void restoreWindowGeometry();\n \n public slots:\n     /** Set number of connections shown in the UI */"
      },
      {
        "sha": "d51b68e0403159a8e8f1981e830d72c1003c842a",
        "filename": "src/qt/guiutil.cpp",
        "status": "modified",
        "additions": 25,
        "deletions": 0,
        "changes": 25,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c431e9f1f03023d216db0ff48d3d598e705c97f9/src/qt/guiutil.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c431e9f1f03023d216db0ff48d3d598e705c97f9/src/qt/guiutil.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/guiutil.cpp?ref=c431e9f1f03023d216db0ff48d3d598e705c97f9",
        "patch": "@@ -24,6 +24,8 @@\n #include <QFileDialog>\n #include <QDesktopServices>\n #include <QThread>\n+#include <QSettings>\n+#include <QDesktopWidget>\n \n #include <boost/filesystem.hpp>\n #include <boost/filesystem/fstream.hpp>\n@@ -487,6 +489,29 @@ bool SetStartOnSystemStartup(bool fAutoStart) { return false; }\n \n #endif\n \n+void saveWindowGeometry(const QString& strSetting, QWidget *parent)\n+{\n+    QSettings settings;\n+    settings.setValue(strSetting + \"Pos\", parent->pos());\n+    settings.setValue(strSetting + \"Size\", parent->size());\n+}\n+\n+void restoreWindowGeometry(const QString& strSetting, const QSize& defaultSize, QWidget *parent)\n+{\n+    QSettings settings;\n+    QPoint pos = settings.value(strSetting + \"Pos\").toPoint();\n+    QSize size = settings.value(strSetting + \"Size\", defaultSize).toSize();\n+\n+    if (!pos.x() && !pos.y()) {\n+        QRect screen = QApplication::desktop()->screenGeometry();\n+        pos.setX((screen.width() - size.width()) / 2);\n+        pos.setY((screen.height() - size.height()) / 2);\n+    }\n+\n+    parent->resize(size);\n+    parent->move(pos);\n+}\n+\n HelpMessageBox::HelpMessageBox(QWidget *parent) :\n     QMessageBox(parent)\n {"
      },
      {
        "sha": "ca3e7fe91dbd843f9c5eec6b0e2dbed307fa803e",
        "filename": "src/qt/guiutil.h",
        "status": "modified",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c431e9f1f03023d216db0ff48d3d598e705c97f9/src/qt/guiutil.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c431e9f1f03023d216db0ff48d3d598e705c97f9/src/qt/guiutil.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/guiutil.h?ref=c431e9f1f03023d216db0ff48d3d598e705c97f9",
        "patch": "@@ -96,6 +96,11 @@ namespace GUIUtil\n     bool GetStartOnSystemStartup();\n     bool SetStartOnSystemStartup(bool fAutoStart);\n \n+    /** Save window size and position */\n+    void saveWindowGeometry(const QString& strSetting, QWidget *parent);\n+    /** Restore window size and position */\n+    void restoreWindowGeometry(const QString& strSetting, const QSize &defaultSizeIn, QWidget *parent);\n+\n     /** Help message for Bitcoin-Qt, shown with --help. */\n     class HelpMessageBox : public QMessageBox\n     {"
      },
      {
        "sha": "8953c3657920e41df26c1446495e4c4b26939057",
        "filename": "src/qt/rpcconsole.cpp",
        "status": "modified",
        "additions": 2,
        "deletions": 0,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/c431e9f1f03023d216db0ff48d3d598e705c97f9/src/qt/rpcconsole.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/c431e9f1f03023d216db0ff48d3d598e705c97f9/src/qt/rpcconsole.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/qt/rpcconsole.cpp?ref=c431e9f1f03023d216db0ff48d3d598e705c97f9",
        "patch": "@@ -187,6 +187,7 @@ RPCConsole::RPCConsole(QWidget *parent) :\n     historyPtr(0)\n {\n     ui->setupUi(this);\n+    GUIUtil::restoreWindowGeometry(\"nRPCConsoleWindow\", this->size(), this);\n \n #ifndef Q_OS_MAC\n     ui->openDebugLogfileButton->setIcon(QIcon(\":/icons/export\"));\n@@ -209,6 +210,7 @@ RPCConsole::RPCConsole(QWidget *parent) :\n \n RPCConsole::~RPCConsole()\n {\n+    GUIUtil::saveWindowGeometry(\"nRPCConsoleWindow\", this);\n     emit stopExecutor();\n     delete ui;\n }"
      }
    ]
  }
]