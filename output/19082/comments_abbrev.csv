MarcoFalke,2020-05-27 17:18:59,"Concept ACK\n\nIt would be good to motivate the change. Maybe something like this?\n\nThe scriptnum test (https://github.com/bitcoin/bitcoin/pull/14816) is a roundtrip test of the test framwork. Thus, it would be better suited as a unit test. This is now possible with the introduction of the unit test module for the functional tests. See https://github.com/bitcoin/bitcoin/pull/18576",https://github.com/bitcoin/bitcoin/pull/19082#issuecomment-634814645,634814645,
practicalswift,2020-05-27 19:06:47,"Concept ACK: more testing is better!\n\nWelcome as a contributor @gillichu :)",https://github.com/bitcoin/bitcoin/pull/19082#issuecomment-634878006,634878006,
DrahtBot,2020-05-27 19:47:30,<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.,https://github.com/bitcoin/bitcoin/pull/19082#issuecomment-634902275,634902275,
laanwj,2020-05-28 14:59:06,"Thanks for you contribution. Looks good to me.\n\nA small nit: please change the git commit message to a short title (up to say, 70 characters), then an empty line, then the rest of the description. This because tools (such as `git pretty=oneline`) will otherwise put it all on one line instead of displaying just the title:\n```\n9d5dd8752â€¦ (pull/19082/head) [test] Migrates the CScriptNum decod",https://github.com/bitcoin/bitcoin/pull/19082#issuecomment-635404401,635404401,
jnewbery,2020-05-31 17:00:07,"A couple more suggestions for the commit log and PR description:\n\n- use the imperative mood (s/Moved the CScript/Move the CScript/ and s/Migrates the CScript/Migrate the CScript/).\n- wrap the message body width at 72 or 80 characters.\n\nSee https://chris.beams.io/posts/git-commit/ for more tips on writing great commit logs.",https://github.com/bitcoin/bitcoin/pull/19082#issuecomment-636498365,636498365,
gillichu,2020-06-03 20:31:18,"rebased the branch, addressed review comments and updated tests. thanks for the review @laanwj  @gzhao408  @jnewbery comments have been addressed!",https://github.com/bitcoin/bitcoin/pull/19082#issuecomment-638445406,638445406,
jnewbery,2020-06-04 03:03:24,"Thanks @gillichu. I think the PR title, commit summary and commit details could be made a bit clearer:\n\n- switch to indicative mood (eg ""test: Moved the CScriptNum asserts into the unit test in script.py"" -> ""Add CScriptNum and create_coinbase unit tests"", ""Migrates the CScriptNum decode tests"" -> ""Migrate the CScriptNum decode tests"", etc)\n- no need to include the complete history (""... cha",https://github.com/bitcoin/bitcoin/pull/19082#issuecomment-638573839,638573839,
laanwj,2020-06-04 15:26:23,"ACK 7daffc6a90a797ce7c365a893a31a31b0206985c\nLooks good to me now!\nPlease keep the additional suggestions in mind for a next PR, but I don't think we should keep iterating on the commit message too much.",https://github.com/bitcoin/bitcoin/pull/19082#issuecomment-638923914,638923914,
MarcoFalke,2020-05-27 17:21:06,I think for a unit test it could make sense to simply hard-code the value of `coinbase_tx.vin[0].scriptSig` instead of computing it every single time by mining 200 blocks.,https://github.com/bitcoin/bitcoin/pull/19082#discussion_r431312915,431312915,test/functional/test_framework/script.py
MarcoFalke,2020-05-27 17:50:32,"I think this one was actually testing the miner, so should be kept in this file.",https://github.com/bitcoin/bitcoin/pull/19082#discussion_r431331283,431331283,test/functional/mining_basic.py
glozow,2020-05-27 18:32:09,"I think you should only really be touching these 4 lines in `mining_basic.py`. The first assertion should stay like Marco said, and you'll need to keep the import statement in order for it to work.",https://github.com/bitcoin/bitcoin/pull/19082#discussion_r431357527,431357527,test/functional/mining_basic.py
glozow,2020-05-27 18:50:58,"nit: maybe name this `test_cscriptnum_encoding` or something else more specific? Since there are other encode/decode functions in this file, i.e. for `CScriptOp`.",https://github.com/bitcoin/bitcoin/pull/19082#discussion_r431367857,431367857,test/functional/test_framework/script.py
glozow,2020-05-27 18:54:10,Does this comment apply here?,https://github.com/bitcoin/bitcoin/pull/19082#discussion_r431369690,431369690,test/functional/test_framework/script.py
glozow,2020-05-27 18:57:00,"Maybe out of scope for this PR, but would it be helpful to add more tests (e.g. big numbers up to 4 bytes)?",https://github.com/bitcoin/bitcoin/pull/19082#discussion_r431371299,431371299,test/functional/test_framework/script.py
MarcoFalke,2020-05-28 11:34:35,Any reason to remove this comment and the empty lines?,https://github.com/bitcoin/bitcoin/pull/19082#discussion_r431769307,431769307,test/functional/mining_basic.py
laanwj,2020-05-28 15:05:07,"Yesâ€”more tests would be welcome here IMO, \nMaybe the list of test numbers in [scriptnum_tests.cpp](https://github.com/bitcoin/bitcoin/blob/master/src/test/scriptnum_tests.cpp#L17) also comes in useful here.",https://github.com/bitcoin/bitcoin/pull/19082#discussion_r431909280,431909280,test/functional/test_framework/script.py
glozow,2020-05-30 18:43:10,"Question: I'm not too familiar with what ""catch python regression"" means ðŸ˜•  so I'm kind of confused about the difference between`test_cscriptnum_encoding` and `test_cscriptnum_encoding_large`. Could they be combined in the `values` array?",https://github.com/bitcoin/bitcoin/pull/19082#discussion_r432877670,432877670,test/functional/test_framework/script.py
MarcoFalke,2020-05-30 22:59:31,"""python regression"" is an odd way to say ""regression in the scriptnum encoding (which is written in python and not c++)""",https://github.com/bitcoin/bitcoin/pull/19082#discussion_r432893900,432893900,test/functional/test_framework/script.py
MarcoFalke,2020-05-30 23:00:04,So you are probably right and they can be combined in one list.,https://github.com/bitcoin/bitcoin/pull/19082#discussion_r432893937,432893937,test/functional/test_framework/script.py
jnewbery,2020-05-31 16:49:27,"I think you can remove "" to catch python regression"" from the comment",https://github.com/bitcoin/bitcoin/pull/19082#discussion_r432964270,432964270,test/functional/test_framework/script.py
jnewbery,2020-05-31 16:54:56,This seems to be a test of the `create_coinbase()` function in blocktools.py. It might be worth moving it to a unit test there.,https://github.com/bitcoin/bitcoin/pull/19082#discussion_r432964710,432964710,test/functional/mining_basic.py
jnewbery,2020-05-31 16:55:38,Please add a blank line between function definitions.,https://github.com/bitcoin/bitcoin/pull/19082#discussion_r432964785,432964785,test/functional/test_framework/script.py
gillichu,2020-05-31 17:48:24,"Added this newline failing the Python linter, will update with next batch of changes.",https://github.com/bitcoin/bitcoin/pull/19082#discussion_r432968791,432968791,test/functional/test_framework/blocktools.py
glozow,2020-05-31 18:14:03,"Btw, if you install `flake8`, you can run the python linter with `test/lint/lint-python.sh`. It has saved me a lot of force pushes ðŸ˜‚ ",https://github.com/bitcoin/bitcoin/pull/19082#discussion_r432970799,432970799,test/functional/test_framework/blocktools.py
glozow,2020-05-31 18:20:30,I think you might have copied this from `script.py`? A better name might be `TestFrameworkBlocktools`,https://github.com/bitcoin/bitcoin/pull/19082#discussion_r432971275,432971275,test/functional/test_framework/blocktools.py
glozow,2020-05-31 18:21:59,"nit: I would keep the underscore in between, i.e. `test_create_coinbase`, and maybe just call it `height` since it's not in a sequence of blocks.",https://github.com/bitcoin/bitcoin/pull/19082#discussion_r432971382,432971382,test/functional/test_framework/blocktools.py
glozow,2020-05-31 18:23:01,delete this comment?,https://github.com/bitcoin/bitcoin/pull/19082#discussion_r432971473,432971473,test/functional/mining_basic.py
jnewbery,2020-06-01 02:00:32,nit: sort please :),https://github.com/bitcoin/bitcoin/pull/19082#discussion_r433013248,433013248,test/functional/test_runner.py
jnewbery,2020-06-04 16:12:54,"I don't understand. How is this testing the miner? It's asserting on the return value of `create_coinbase()`, which is purely a python helper function.",https://github.com/bitcoin/bitcoin/pull/19082#discussion_r435380500,435380500,test/functional/mining_basic.py
jnewbery,2020-06-04 16:13:15,This hasn't been deleted.,https://github.com/bitcoin/bitcoin/pull/19082#discussion_r435380720,435380720,test/functional/mining_basic.py
MarcoFalke,2020-06-04 16:23:54,"Correct. I missed that this is not the coinbase from the previous `generatetoaddress`. It seems the test was moved, so this should be correct now in master.",https://github.com/bitcoin/bitcoin/pull/19082#discussion_r435387447,435387447,test/functional/mining_basic.py
gillichu,2020-06-04 16:25:46,"Sorry about that :( I'll watch my changes more carefully next time, and look for a chance to take this out in the future.",https://github.com/bitcoin/bitcoin/pull/19082#discussion_r435388608,435388608,test/functional/mining_basic.py
