theuni,2017-09-04T00:16:34Z,"I believe that the proxy_test failure is a false-positive.\n\nLooks like the issue is that disconnection happens so quickly now after an error that the testnode fails.",https://github.com/bitcoin/bitcoin/pull/11227#issuecomment-326841655,326841655,
laanwj,2017-09-05T21:56:02Z,"Concept ACK, woohoo!",https://github.com/bitcoin/bitcoin/pull/11227#issuecomment-327315068,327315068,
promag,2017-10-18T21:19:35Z,Needs rebase.,https://github.com/bitcoin/bitcoin/pull/11227#issuecomment-337731082,337731082,
DrahtBot,2018-11-08T23:20:41Z,"<!--5fd3d806e98f4a0ca80977bb178665a0-->There hasn't been much activity lately and the patch still needs rebase, so I am closing this for now. Please let me know when you want to continue working on this, so the pull request can be re-opened.",https://github.com/bitcoin/bitcoin/pull/11227#issuecomment-437192644,437192644,
sipa,2017-09-04T04:07:32Z,"It looks like this could be a scripted diff, `s/fDisconnect = true/Disconnect()/g`.",https://github.com/bitcoin/bitcoin/pull/11227#discussion_r136741410,136741410,src/net.cpp
sipa,2017-09-04T06:20:24Z,This test is no longer needed?,https://github.com/bitcoin/bitcoin/pull/11227#discussion_r136750497,136750497,src/net.cpp
sipa,2017-09-04T06:37:05Z,"Heh, I'd have hoped that this restriction wouldn't be needed anymore with libevent.",https://github.com/bitcoin/bitcoin/pull/11227#discussion_r136752250,136752250,src/net.cpp
sipa,2017-09-04T07:16:31Z,"The documentation on `event_base_init_common_timeout` says ""To do this, call this function with the common duration. It will return a pointer to a different, opaque timeout value. (Don't depend on its actual contents!)"".\n\nI'm not sure whether that means you need to use the exact pointer returned, or just a copy of its value (as this code does).",https://github.com/bitcoin/bitcoin/pull/11227#discussion_r136756884,136756884,src/net.cpp
sipa,2017-09-04T07:22:11Z,I would prefer it if you could have some RAII wrappers around the libevent structures before adding all this.,https://github.com/bitcoin/bitcoin/pull/11227#discussion_r136757653,136757653,src/net.cpp
theuni,2017-09-04T10:34:46Z,"Probably so, will give it a shot.",https://github.com/bitcoin/bitcoin/pull/11227#discussion_r136792970,136792970,src/net.cpp
theuni,2017-09-04T10:37:08Z,"I believe all of these are gone by the end of the change set, the removal may make more sense in an earlier commit, though.",https://github.com/bitcoin/bitcoin/pull/11227#discussion_r136793387,136793387,src/net.cpp
theuni,2017-09-04T10:37:29Z,"Agreed, see PR description :)",https://github.com/bitcoin/bitcoin/pull/11227#discussion_r136793461,136793461,src/net.cpp
theuni,2017-09-04T10:38:44Z,"It's only needed if select ends up being used, which should be very unlikely on most platforms. I'll add a comment here, and print something to the log so that it's clear which back-end is being used.",https://github.com/bitcoin/bitcoin/pull/11227#discussion_r136793635,136793635,src/net.cpp
theuni,2017-09-04T10:41:36Z,Good eye! I wasn't sure how to store this properly either. This usage is taken from the official documentation. I'll add a comment about its sanity and a link to the docs.,https://github.com/bitcoin/bitcoin/pull/11227#discussion_r136794167,136794167,src/net.cpp
laanwj,2017-09-05T21:57:12Z,We could just bail out if select is being used. But not sure what platforms would be affected.,https://github.com/bitcoin/bitcoin/pull/11227#discussion_r137125533,137125533,src/net.cpp
jimpo,2017-09-05T23:00:14Z,Should this be moved into the above `if` block? (It used to be inside the `if (notify)` statement),https://github.com/bitcoin/bitcoin/pull/11227#discussion_r137135950,137135950,src/net.cpp
sipa,2017-09-05T23:18:10Z,"> ||=\n\nI don't think such an operator exists in C++.",https://github.com/bitcoin/bitcoin/pull/11227#discussion_r137138600,137138600,src/net.cpp
jimpo,2017-09-05T23:21:19Z,"Oops, you're right. Should have checked.",https://github.com/bitcoin/bitcoin/pull/11227#discussion_r137139010,137139010,src/net.cpp
theuni,2017-09-06T00:02:58Z,"Yes, thank you.",https://github.com/bitcoin/bitcoin/pull/11227#discussion_r137144026,137144026,src/net.cpp
theuni,2017-09-06T00:04:50Z,I can say for certain that the operator doesn't exist because I tried it first :),https://github.com/bitcoin/bitcoin/pull/11227#discussion_r137144255,137144255,src/net.cpp
laanwj,2017-09-06T18:12:37Z,Hehe I also remember it doesn't exist - I looked it up a long time ago and IIRC the rationale is that's because `|=` is the same when using only booleans. In any case this is ok as it is.,https://github.com/bitcoin/bitcoin/pull/11227#discussion_r137347641,137347641,src/net.cpp
