[
  {
    "sha": "b37257fcbd47a22984b0dae9a5765018587993ae",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiMzcyNTdmY2JkNDdhMjI5ODRiMGRhZTlhNTc2NTAxODU4Nzk5M2Fl",
    "commit": {
      "author": {
        "name": "practicalswift",
        "email": "practicalswift@users.noreply.github.com",
        "date": "2019-03-12T21:23:11Z"
      },
      "committer": {
        "name": "practicalswift",
        "email": "practicalswift@users.noreply.github.com",
        "date": "2019-03-13T10:34:19Z"
      },
      "message": "lint: Teach lint-whitespace.sh to detect missing newline at end of file\n\nAccidental omission of newline at EOF is a quite common review nit which\nis better handled by lint-whitespace.sh :-)\n\nBackground reading: https://stackoverflow.com/questions/729692/why-should-text-files-end-with-a-newline",
      "tree": {
        "sha": "c54c36c6f96f80168290903f75b48ce255b4c013",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c54c36c6f96f80168290903f75b48ce255b4c013"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b37257fcbd47a22984b0dae9a5765018587993ae",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b37257fcbd47a22984b0dae9a5765018587993ae",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/b37257fcbd47a22984b0dae9a5765018587993ae",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b37257fcbd47a22984b0dae9a5765018587993ae/comments",
    "author": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "c3b1cb958f7c57c5d87db663f2b1a83e3471d354",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c3b1cb958f7c57c5d87db663f2b1a83e3471d354",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/c3b1cb958f7c57c5d87db663f2b1a83e3471d354"
      }
    ],
    "stats": {
      "total": 22,
      "additions": 22,
      "deletions": 0
    },
    "files": [
      {
        "sha": "e28d2652e8f1679a63b0cd3933f79f20331eb014",
        "filename": "test/lint/lint-whitespace.sh",
        "status": "modified",
        "additions": 22,
        "deletions": 0,
        "changes": 22,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/b37257fcbd47a22984b0dae9a5765018587993ae/test/lint/lint-whitespace.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/b37257fcbd47a22984b0dae9a5765018587993ae/test/lint/lint-whitespace.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/lint/lint-whitespace.sh?ref=b37257fcbd47a22984b0dae9a5765018587993ae",
        "patch": "@@ -37,6 +37,13 @@ showdiff() {\n   fi\n }\n \n+showmodifiedfiles() {\n+  if ! git diff --name-only \"${TRAVIS_COMMIT_RANGE}\" -- \".\" \":(exclude)depends/patches/\" \":(exclude)src/leveldb/\" \":(exclude)src/secp256k1/\" \":(exclude)src/univalue/\" \":(exclude)doc/release-notes/\"; then\n+    echo \"Failed to list modified files\"\n+    exit 1\n+  fi\n+}\n+\n showcodediff() {\n   if ! git diff -U0 \"${TRAVIS_COMMIT_RANGE}\" -- *.cpp *.h *.md *.py *.sh \":(exclude)src/leveldb/\" \":(exclude)src/secp256k1/\" \":(exclude)src/univalue/\" \":(exclude)doc/release-notes/\"; then\n     echo \"Failed to get a diff\"\n@@ -110,4 +117,19 @@ if showcodediff | perl -nle '$MATCH++ if m{^\\+.*\\t}; END{exit 1 unless $MATCH>0}\n   RET=1\n fi\n \n+# Check for modified text files not ending with a newline (\\n)\n+for MODIFIED_FILE in $(showmodifiedfiles); do\n+    if [[ ! -e ${MODIFIED_FILE} || ${MODIFIED_FILE} =~ \\.(svg|ts)$ ]]; then\n+        continue\n+    fi\n+    if ! grep -qIl \"\" \"${MODIFIED_FILE}\"; then\n+        # Not a text file\n+        continue\n+    fi\n+    if [[ \"$(tail -c1 \"${MODIFIED_FILE}\" | tr -d '\\0')\" ]]; then\n+        echo \"Modified text file does not end with a newline: ${MODIFIED_FILE}\"\n+        RET=1\n+    fi\n+done\n+\n exit $RET"
      }
    ]
  },
  {
    "sha": "fc3ffffceea81eedace5b0ac55ea5a19ce189757",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmYzNmZmZmY2VlYTgxZWVkYWNlNWIwYWM1NWVhNWExOWNlMTg5NzU3",
    "commit": {
      "author": {
        "name": "practicalswift",
        "email": "practicalswift@users.noreply.github.com",
        "date": "2019-03-13T10:51:58Z"
      },
      "committer": {
        "name": "practicalswift",
        "email": "practicalswift@users.noreply.github.com",
        "date": "2019-03-13T10:51:58Z"
      },
      "message": "[wip] Test: No newline at end of file",
      "tree": {
        "sha": "68e4721b40cd7f8484eb43993e81b321d5e01a7b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/68e4721b40cd7f8484eb43993e81b321d5e01a7b"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fc3ffffceea81eedace5b0ac55ea5a19ce189757",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fc3ffffceea81eedace5b0ac55ea5a19ce189757",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/fc3ffffceea81eedace5b0ac55ea5a19ce189757",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/fc3ffffceea81eedace5b0ac55ea5a19ce189757/comments",
    "author": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "b37257fcbd47a22984b0dae9a5765018587993ae",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b37257fcbd47a22984b0dae9a5765018587993ae",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/b37257fcbd47a22984b0dae9a5765018587993ae"
      }
    ],
    "stats": {
      "total": 2,
      "additions": 1,
      "deletions": 1
    },
    "files": [
      {
        "sha": "d79f0497aa7f9233d9bd390e9d38c608cdeb422a",
        "filename": "test/lint/lint-whitespace.sh",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/fc3ffffceea81eedace5b0ac55ea5a19ce189757/test/lint/lint-whitespace.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/fc3ffffceea81eedace5b0ac55ea5a19ce189757/test/lint/lint-whitespace.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/test/lint/lint-whitespace.sh?ref=fc3ffffceea81eedace5b0ac55ea5a19ce189757",
        "patch": "@@ -132,4 +132,4 @@ for MODIFIED_FILE in $(showmodifiedfiles); do\n     fi\n done\n \n-exit $RET\n+exit $RET\n\\ No newline at end of file"
      }
    ]
  }
]