whitslack,2021-06-27 00:34:36,"> Not sure this is a good idea. If the user starts bitcoind at boot, he will need to wait potentially an annoyingly long time before he can login...?\n\nThe other way I could do it would be to have the initscript mark the service as inactive and fork a subshell process into the background to wait for the lock and eventually reinvoke the initscript (with `IN_BACKGROUND=yes`) to mark the service a",https://github.com/bitcoin/bitcoin/pull/22285#issuecomment-869079796,869079796,
luke-jr,2021-06-27 01:46:35,I've never seen a login prompt before *all* startup has completed... (console login),https://github.com/bitcoin/bitcoin/pull/22285#issuecomment-869085918,869085918,
whitslack,2021-06-27 02:05:35,"Oh, sure. SystemV `init` with the default Gentoo config won't start `agetty` until `openrc` is finished transitioning to the `default` runlevel.\n\nSo, would you be more amenable to this change if I did the background thing? To be honest, that's how I've had it set up on my machine for years (since long before `-startupnotify` was implemented), but I assumed the rather gross hackishness of that ",https://github.com/bitcoin/bitcoin/pull/22285#issuecomment-869087775,869087775,
luke-jr,2021-06-27 05:00:05,"I'm not familiar enough with the tradeoffs and implementation details, but it sounds like a better solution at face value.",https://github.com/bitcoin/bitcoin/pull/22285#issuecomment-869100855,869100855,
whitslack,2021-06-27 05:02:15,"Okay, I'll show you. Might take me a couple days to get to it.",https://github.com/bitcoin/bitcoin/pull/22285#issuecomment-869101026,869101026,
whitslack,2021-06-27 19:55:08,@luke-jr: See #22354.,https://github.com/bitcoin/bitcoin/pull/22285#issuecomment-869216000,869216000,
DrahtBot,2021-06-28 07:04:42,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#22354](https://github.com/bitcoin/bitcoin/pull/22354) (contrib/init: (OpenRC) use -startupnotify to wait for startup com",https://github.com/bitcoin/bitcoin/pull/22285#issuecomment-869416123,869416123,
laanwj,2021-07-07 10:52:03,"Wouldn't `-daemonwait` help here? This option was added for doing a similar thing for the systemd script, and seems more straightforward.",https://github.com/bitcoin/bitcoin/pull/22285#issuecomment-875503645,875503645,
whitslack,2021-07-07 14:49:25,"> Wouldn't `-daemonwait` help here? This option was added for doing a similar thing for the systemd script, and seems more straightforward.\n\n@laanwj: That's the option I was searching for when I started out on this project, as I was certain I'd seen it mentioned in the Bitcoin Optech newsletter, but it's not listed in `--help`, so I abandoned that avenue. Thanks for the pointer.\n\nThat said",https://github.com/bitcoin/bitcoin/pull/22285#issuecomment-875669409,875669409,
laanwj,2021-08-16 14:35:10,">  it's not listed in --help, so I abandoned that avenue. Thanks for the pointer.\n\nAre you sure? It is mentioned in `--help` here:\n```\n  -daemonwait\n       Wait for initialization to be finished before exiting. This implies\n       -daemon (default: 0)\n```\nIt's relatively new, so make sure you check with at least 22.x.",https://github.com/bitcoin/bitcoin/pull/22285#issuecomment-899562250,899562250,
whitslack,2021-08-17 19:33:08,"> It's relatively new, so make sure you check with at least 22.x.\n\n@laanwj: Great! I don't run prerelease versions of Bitcoin Core, so I haven't seen it yet.\n\nNevertheless, na√Øvely using `-daemonwait` doesn't seem to be a good option here, as it would delay the completion of OpenRC's switch to the default runlevel at boot and thus will delay `init`'s startup of agetty/login for longer than",https://github.com/bitcoin/bitcoin/pull/22285#issuecomment-900574795,900574795,
