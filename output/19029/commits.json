[
  {
    "sha": "a68a536c42bb66a8a6bcdcc6a4eb07518d535643",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzphNjhhNTM2YzQyYmI2NmE4YTZiY2RjYzZhNGViMDc1MThkNTM1NjQz",
    "commit": {
      "author": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2020-05-20T15:27:05Z"
      },
      "committer": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2020-05-31T06:34:29Z"
      },
      "message": "net: Add m_interrupt_dnsseed_thread",
      "tree": {
        "sha": "ac182501ac3812ee1e06060e8969e91208c9e814",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ac182501ac3812ee1e06060e8969e91208c9e814"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a68a536c42bb66a8a6bcdcc6a4eb07518d535643",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE0dvyxLlvLev0wWZUQQEIES5+qB8FAl7TT/UACgkQQQEIES5+\nqB8n4xAAtgCHqcg1uIp3p4ZlMXjTP+uMetvZrJXwzBEHi5SG6JgfTy2slX9tn5U1\nnLiZiq908ILSs7Su/lVhXDGb0HCY07ITwdmm6gU0L5Aukff40V2u/VJGSX6bLHXc\nYtEtCaUCwfvd0CwHZyBQBIcxIzBOXKvHcYk2Js70SAfwO6+kNR2SK0OLF94o7nlR\nCzMvoL3R7FFyfPoAw0MWfotRD/bfx4uwMnKLsdCT4JXcsbNWiX4nEDDGAfJNJLuO\nVoZqwmkKzli+9hikN+JlCAB2TyXTNcNUmfbUZrvf7/RC3FoTAUUO4JXuzrNiJnN1\nKgLntxYudikq1Bmi0WcEskI114xcUN6OjeH8DS7UEFy7mEmavemhbUwzkDwWM+3E\nRq6YRI3ea589XInrI8BGxPYGI/dNL9nxnGaIdE9/C8Idy/XnzYREOWbXlYDeuFHQ\npYaiAdmdOXo8pCyVa6zPxrUbiRJtNMhpaaYXgXIODMMWcJMpJQsbaDpBzPeUToWx\nfR7CVy491XWQTdox60ai4fmG8qLXVmm9YwYrKb+Tmt4y/0IqIJvK2rLE5Lh0MGqV\ntm110H6vV/2CvCRlGrOcs7NUNzzm0IYR6+gqWdEMYizwp2KuBAP/bSmQj/LZiyTk\nKzQUi1jw3FiIarUnEYWogmcQDBwi0t/L7sCg0O7xJcj/YgXmK6A=\n=osg9\n-----END PGP SIGNATURE-----",
        "payload": "tree ac182501ac3812ee1e06060e8969e91208c9e814\nparent dec067f5a019fbeea0403efcfc501238a114d095\nauthor Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1589988425 +0300\ncommitter Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1590906869 +0300\n\nnet: Add m_interrupt_dnsseed_thread\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a68a536c42bb66a8a6bcdcc6a4eb07518d535643",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/a68a536c42bb66a8a6bcdcc6a4eb07518d535643",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a68a536c42bb66a8a6bcdcc6a4eb07518d535643/comments",
    "author": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "dec067f5a019fbeea0403efcfc501238a114d095",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/dec067f5a019fbeea0403efcfc501238a114d095",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/dec067f5a019fbeea0403efcfc501238a114d095"
      }
    ],
    "stats": {
      "total": 9,
      "additions": 6,
      "deletions": 3
    },
    "files": [
      {
        "sha": "dd7ce2dbf987016007eb8d8e296699a805f8c7a7",
        "filename": "src/net.cpp",
        "status": "modified",
        "additions": 5,
        "deletions": 3,
        "changes": 8,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a68a536c42bb66a8a6bcdcc6a4eb07518d535643/src/net.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a68a536c42bb66a8a6bcdcc6a4eb07518d535643/src/net.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/net.cpp?ref=a68a536c42bb66a8a6bcdcc6a4eb07518d535643",
        "patch": "@@ -1621,7 +1621,7 @@ void CConnman::ThreadDNSAddressSeed()\n                 std::chrono::seconds to_wait = seeds_wait_time;\n                 while (to_wait.count() > 0) {\n                     std::chrono::seconds w = std::min(DNSSEEDS_DELAY_FEW_PEERS, to_wait);\n-                    if (!interruptNet.sleep_for(w)) return;\n+                    if (!m_interrupt_dnsseed_thread.sleep_for(w)) return;\n                     to_wait -= w;\n \n                     int nRelevant = 0;\n@@ -1644,13 +1644,13 @@ void CConnman::ThreadDNSAddressSeed()\n             }\n         }\n \n-        if (interruptNet) return;\n+        if (m_interrupt_dnsseed_thread) return;\n \n         // hold off on querying seeds if p2p network deactivated\n         if (!fNetworkActive) {\n             LogPrintf(\"Waiting for network to be reactivated before querying DNS seeds.\\n\");\n             do {\n-                if (!interruptNet.sleep_for(std::chrono::seconds{1})) return;\n+                if (!m_interrupt_dnsseed_thread.sleep_for(std::chrono::seconds{1})) return;\n             } while (!fNetworkActive);\n         }\n \n@@ -2351,6 +2351,7 @@ bool CConnman::Start(CScheduler& scheduler, const Options& connOptions)\n     //\n     assert(m_msgproc);\n     InterruptSocks5(false);\n+    m_interrupt_dnsseed_thread.reset();\n     interruptNet.reset();\n     flagInterruptMsgProc = false;\n \n@@ -2413,6 +2414,7 @@ void CConnman::Interrupt()\n     }\n     condMsgProc.notify_all();\n \n+    m_interrupt_dnsseed_thread();\n     interruptNet();\n     InterruptSocks5(true);\n "
      },
      {
        "sha": "9652d0da0f19c88839a8943fd60f34d5cbb75337",
        "filename": "src/net.h",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/a68a536c42bb66a8a6bcdcc6a4eb07518d535643/src/net.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/a68a536c42bb66a8a6bcdcc6a4eb07518d535643/src/net.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/net.h?ref=a68a536c42bb66a8a6bcdcc6a4eb07518d535643",
        "patch": "@@ -460,6 +460,7 @@ class CConnman\n     Mutex mutexMsgProc;\n     std::atomic<bool> flagInterruptMsgProc{false};\n \n+    CThreadInterrupt m_interrupt_dnsseed_thread;\n     CThreadInterrupt interruptNet;\n \n     std::thread threadDNSAddressSeed;"
      }
    ]
  },
  {
    "sha": "bad0f26b6c73678c4282343978f75a84b537923a",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzpiYWQwZjI2YjZjNzM2NzhjNDI4MjM0Mzk3OGY3NWE4NGI1Mzc5MjNh",
    "commit": {
      "author": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2020-05-20T15:34:27Z"
      },
      "committer": {
        "name": "Hennadii Stepanov",
        "email": "32963518+hebasto@users.noreply.github.com",
        "date": "2020-05-31T06:34:36Z"
      },
      "message": "net: Add m_interrupt_addcon_thread",
      "tree": {
        "sha": "b64f4b6807806c0a5ce0b633592cee70bb1f31ec",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b64f4b6807806c0a5ce0b633592cee70bb1f31ec"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/bad0f26b6c73678c4282343978f75a84b537923a",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE0dvyxLlvLev0wWZUQQEIES5+qB8FAl7TT/wACgkQQQEIES5+\nqB9urBAAlBKS+OvHHCd47p6MWZtvcRjgYmYbNE8dsnnmv7D8wuEXpI15HL09pG0s\nIZm5lq4VabA0wssd4w4zO7HpZ+lpRgKPSWrC5sQDsteiS4lojC2BVNlp1ZiD09x+\nMnnLj43qnpfT5XHeSlYOqERa2KviCT7kOxbGRIoZ8odhQnR1Go2XmBwdRY+HiTRN\nk4uM7lY3QHFeAruWUNMUZaigTLvMwGbi2dF8Ep6XDR0EjQHecktpsSpflAFBDDZK\nu/ICN0FTfwBkNohpmWY8LSJAxz8og9euFNUMrplAMoKdCtzOMcS4bzdw/MzxHl6Y\nbY6f0FNFOAs546fj9RtDzyLxMRJ06Sx3/Y9YWq80VxM4VvS6NrzTlVUM9Ml6jToj\n5f3DyTA/Oov02mZrV8MOnHfOI+4V/ChRGVEorWsivXIIScMpHSF2hbwG95mQRdH8\nrR4oliJNuFzVmzFhSu1lC4elhdhhMYirFxIGIV1gv9hhS4j62gH5xw8Y2lrkMWhq\nZL1mC6W+NBS8LIre9fVLUMqQy9cR0Ck9f8p8dyjxo/tUaUppv/2dN/r6pQBRERMp\n+muFBnebo7A6d6OoTnsSnn+0HZ5q7NxDwaRYxKKQVhoRFNH6Zsh1duSJz/HVbFeB\ncZL4IsI4p/flSnHsquN+gypExVq4pBApPT4VtdjgprJwFMw+meA=\n=y6QE\n-----END PGP SIGNATURE-----",
        "payload": "tree b64f4b6807806c0a5ce0b633592cee70bb1f31ec\nparent a68a536c42bb66a8a6bcdcc6a4eb07518d535643\nauthor Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1589988867 +0300\ncommitter Hennadii Stepanov <32963518+hebasto@users.noreply.github.com> 1590906876 +0300\n\nnet: Add m_interrupt_addcon_thread\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/bad0f26b6c73678c4282343978f75a84b537923a",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/bad0f26b6c73678c4282343978f75a84b537923a",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/bad0f26b6c73678c4282343978f75a84b537923a/comments",
    "author": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hebasto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "a68a536c42bb66a8a6bcdcc6a4eb07518d535643",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/a68a536c42bb66a8a6bcdcc6a4eb07518d535643",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/a68a536c42bb66a8a6bcdcc6a4eb07518d535643"
      }
    ],
    "stats": {
      "total": 7,
      "additions": 5,
      "deletions": 2
    },
    "files": [
      {
        "sha": "59da5ea4db0eb4dd2efb1b7b5ca17a9eb5b319c7",
        "filename": "src/net.cpp",
        "status": "modified",
        "additions": 4,
        "deletions": 2,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/bad0f26b6c73678c4282343978f75a84b537923a/src/net.cpp",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/bad0f26b6c73678c4282343978f75a84b537923a/src/net.cpp",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/net.cpp?ref=bad0f26b6c73678c4282343978f75a84b537923a",
        "patch": "@@ -2007,12 +2007,12 @@ void CConnman::ThreadOpenAddedConnections()\n                 tried = true;\n                 CAddress addr(CService(), NODE_NONE);\n                 OpenNetworkConnection(addr, false, &grant, info.strAddedNode.c_str(), false, false, true);\n-                if (!interruptNet.sleep_for(std::chrono::milliseconds(500)))\n+                if (!m_interrupt_addcon_thread.sleep_for(std::chrono::milliseconds(500)))\n                     return;\n             }\n         }\n         // Retry every 60 seconds if a connection was attempted, otherwise two seconds\n-        if (!interruptNet.sleep_for(std::chrono::seconds(tried ? 60 : 2)))\n+        if (!m_interrupt_addcon_thread.sleep_for(std::chrono::seconds(tried ? 60 : 2)))\n             return;\n     }\n }\n@@ -2352,6 +2352,7 @@ bool CConnman::Start(CScheduler& scheduler, const Options& connOptions)\n     assert(m_msgproc);\n     InterruptSocks5(false);\n     m_interrupt_dnsseed_thread.reset();\n+    m_interrupt_addcon_thread.reset();\n     interruptNet.reset();\n     flagInterruptMsgProc = false;\n \n@@ -2415,6 +2416,7 @@ void CConnman::Interrupt()\n     condMsgProc.notify_all();\n \n     m_interrupt_dnsseed_thread();\n+    m_interrupt_addcon_thread();\n     interruptNet();\n     InterruptSocks5(true);\n "
      },
      {
        "sha": "bb60b2bac68acdcb2f00941615a3d6f4e6452255",
        "filename": "src/net.h",
        "status": "modified",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/bad0f26b6c73678c4282343978f75a84b537923a/src/net.h",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/bad0f26b6c73678c4282343978f75a84b537923a/src/net.h",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/src/net.h?ref=bad0f26b6c73678c4282343978f75a84b537923a",
        "patch": "@@ -461,6 +461,7 @@ class CConnman\n     std::atomic<bool> flagInterruptMsgProc{false};\n \n     CThreadInterrupt m_interrupt_dnsseed_thread;\n+    CThreadInterrupt m_interrupt_addcon_thread;\n     CThreadInterrupt interruptNet;\n \n     std::thread threadDNSAddressSeed;"
      }
    ]
  }
]