[
  {
    "sha": "0d69a741e606029e8e796d585b3009dc1414691c",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzowZDY5YTc0MWU2MDYwMjllOGU3OTZkNTg1YjMwMDlkYzE0MTQ2OTFj",
    "commit": {
      "author": {
        "name": "practicalswift",
        "email": "practicalswift@users.noreply.github.com",
        "date": "2019-09-30T12:30:59Z"
      },
      "committer": {
        "name": "practicalswift",
        "email": "practicalswift@users.noreply.github.com",
        "date": "2019-10-01T09:33:58Z"
      },
      "message": "Add contrib/devtools/test_fuzzing_harnesses.sh for quick testing of all fuzzing harnesses",
      "tree": {
        "sha": "5d3e7d0f02be159631c85788538b99f2fe1cd5cd",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5d3e7d0f02be159631c85788538b99f2fe1cd5cd"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0d69a741e606029e8e796d585b3009dc1414691c",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0d69a741e606029e8e796d585b3009dc1414691c",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/0d69a741e606029e8e796d585b3009dc1414691c",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0d69a741e606029e8e796d585b3009dc1414691c/comments",
    "author": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "79aeed8e76e8bc70722e6178678b0b3840694d5c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/79aeed8e76e8bc70722e6178678b0b3840694d5c",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/79aeed8e76e8bc70722e6178678b0b3840694d5c"
      }
    ],
    "stats": {
      "total": 56,
      "additions": 56,
      "deletions": 0
    },
    "files": [
      {
        "sha": "e4a923079820d068e7978322c6a0a491960faafc",
        "filename": "contrib/devtools/test_fuzzing_harnesses.sh",
        "status": "added",
        "additions": 56,
        "deletions": 0,
        "changes": 56,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/0d69a741e606029e8e796d585b3009dc1414691c/contrib/devtools/test_fuzzing_harnesses.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/0d69a741e606029e8e796d585b3009dc1414691c/contrib/devtools/test_fuzzing_harnesses.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/contrib/devtools/test_fuzzing_harnesses.sh?ref=0d69a741e606029e8e796d585b3009dc1414691c",
        "patch": "@@ -0,0 +1,56 @@\n+#!/usr/bin/env bash\n+\n+export LC_ALL=C\n+\n+set -e\n+set -o pipefail\n+\n+TEST_REGEXP=\"${1:-}\"\n+RUNNING_TIME=\"${2:-1}\"\n+\n+FUZZER_DIR=\"src/test/fuzz/\"\n+N_FUZZERS=$(find \"${FUZZER_DIR}\" -type f -executable |  wc -l)\n+if [[ ${N_FUZZERS} == 0 ]]; then\n+    echo \"Error: Could not find any compiled fuzz harnesses in ${FUZZER_DIR}\"\n+    echo\n+    echo \"Enable and build the fuzzers using:\"\n+    echo \"    \\$ CC=clang CXX=clang++ ./configure --enable-fuzz --with-sanitizers=address,fuzzer,undefined\"\n+    echo \"    \\$ make\"\n+    exit 1\n+fi\n+\n+if [[ ${TEST_REGEXP} == \"\" ]]; then\n+    echo \"Found ${N_FUZZERS} fuzz harnesses to test.\"\n+    echo\n+fi\n+\n+N_RUNS=0\n+for FUZZER_PATH in $(find \"${FUZZER_DIR}\" -type f -executable | sort); do\n+    FUZZER=$(basename \"${FUZZER_PATH}\")\n+    if [[ ! ${FUZZER} =~ ${TEST_REGEXP} ]]; then\n+        continue\n+    fi\n+    CORPUS_DIR=$(mktemp -d)\n+    echo \"Testing fuzzer ${FUZZER} during ${RUNNING_TIME} second(s)\"\n+    echo \"A subset of reached functions:\"\n+    ${FUZZER_PATH} -verbosity=0 -detect_leaks=0 -print_funcs=20 -timeout=\"${RUNNING_TIME}\" -max_total_time=\"${RUNNING_TIME}\" -print_final_stats=1 \"${CORPUS_DIR}\" 2>&1 | grep -vE '^(INFO: .*(files found in|max_len is not provided|seed corpus: files|A corpus is not provided)|#|\"|.*/include/)' | sed \"s%$(pwd)/%%g\"\n+    N_RUNS=$((N_RUNS + 1))\n+    COVERED_CODE_PATHS=$(find \"${CORPUS_DIR}\" -type f | wc -l)\n+    echo \"Number of unique code paths taken during fuzzing round: ${COVERED_CODE_PATHS}\"\n+    if [[ ${COVERED_CODE_PATHS} == 0 ]]; then\n+        echo \"No taken code paths recorded during the fuzzing round. The fuzzing setup for ${FUZZER} seems broken. Aborting.\"\n+        exit 1\n+    fi\n+    if [[ ${COVERED_CODE_PATHS} == 1 ]]; then\n+        echo \"Only one unique code path was taken when executing ${FUZZING} during ${RUNNING_TIME} second(s) with varying inputs. Investigate how you can make more code paths reachable for the fuzzer. Aborting.\"\n+        exit 1\n+    fi\n+    rm -r \"${CORPUS_DIR}\"\n+    echo\n+done\n+\n+if [[ ${N_RUNS} == 0 ]]; then\n+    echo \"Could not find any fuzzers matching regexp \\\"${TEST_REGEXP}\\\".\"\n+else\n+    echo \"Tested fuzz harnesses seem to work as expected.\"\n+fi"
      }
    ]
  },
  {
    "sha": "2a92b0f0f786ef7c13181eed39b162829d41dad7",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyYTkyYjBmMGY3ODZlZjdjMTMxODFlZWQzOWIxNjI4MjlkNDFkYWQ3",
    "commit": {
      "author": {
        "name": "practicalswift",
        "email": "practicalswift@users.noreply.github.com",
        "date": "2019-09-30T12:31:36Z"
      },
      "committer": {
        "name": "practicalswift",
        "email": "practicalswift@users.noreply.github.com",
        "date": "2019-10-01T09:33:58Z"
      },
      "message": "Run test_fuzzing_harnesses.sh as part of RUN_FUZZ_TESTS in Travis",
      "tree": {
        "sha": "e8be31f57c70d286e85cc86dda51dd23ea015af4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e8be31f57c70d286e85cc86dda51dd23ea015af4"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2a92b0f0f786ef7c13181eed39b162829d41dad7",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2a92b0f0f786ef7c13181eed39b162829d41dad7",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/2a92b0f0f786ef7c13181eed39b162829d41dad7",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2a92b0f0f786ef7c13181eed39b162829d41dad7/comments",
    "author": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "0d69a741e606029e8e796d585b3009dc1414691c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0d69a741e606029e8e796d585b3009dc1414691c",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/0d69a741e606029e8e796d585b3009dc1414691c"
      }
    ],
    "stats": {
      "total": 3,
      "additions": 3,
      "deletions": 0
    },
    "files": [
      {
        "sha": "eb286ea66d719280e57c74de1a98d917b3691f07",
        "filename": "ci/test/06_script_b.sh",
        "status": "modified",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2a92b0f0f786ef7c13181eed39b162829d41dad7/ci/test/06_script_b.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2a92b0f0f786ef7c13181eed39b162829d41dad7/ci/test/06_script_b.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/ci/test/06_script_b.sh?ref=2a92b0f0f786ef7c13181eed39b162829d41dad7",
        "patch": "@@ -24,6 +24,9 @@ if [ \"$RUN_FUZZ_TESTS\" = \"true\" ]; then\n   BEGIN_FOLD fuzz-tests\n   DOCKER_EXEC test/fuzz/test_runner.py -l DEBUG ${DIR_FUZZ_IN}\n   END_FOLD\n+  BEGIN_FOLD fuzz-tests-verify-coverage\n+  DOCKER_EXEC ${BASE_BUILD_DIR}/contrib/devtools/test_fuzzing_harnesses.sh\n+  END_FOLD\n fi\n \n cd ${BASE_BUILD_DIR} || (echo \"could not enter travis build dir $BASE_BUILD_DIR\"; exit 1)"
      }
    ]
  },
  {
    "sha": "19e317557a00879dbf48065746d7f5a50717d563",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoxOWUzMTc1NTdhMDA4NzlkYmY0ODA2NTc0NmQ3ZjVhNTA3MTdkNTYz",
    "commit": {
      "author": {
        "name": "practicalswift",
        "email": "practicalswift@users.noreply.github.com",
        "date": "2019-10-01T09:33:36Z"
      },
      "committer": {
        "name": "practicalswift",
        "email": "practicalswift@users.noreply.github.com",
        "date": "2019-10-01T09:33:58Z"
      },
      "message": "Enable UBSan for Travis fuzzer job",
      "tree": {
        "sha": "81d92cdeb6e081486f779a203d4486ad1cd16bc1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/81d92cdeb6e081486f779a203d4486ad1cd16bc1"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/19e317557a00879dbf48065746d7f5a50717d563",
      "comment_count": 0,
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "signature": null,
        "payload": null
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/19e317557a00879dbf48065746d7f5a50717d563",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/19e317557a00879dbf48065746d7f5a50717d563",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/19e317557a00879dbf48065746d7f5a50717d563/comments",
    "author": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "practicalswift",
      "id": 7826565,
      "node_id": "MDQ6VXNlcjc4MjY1NjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7826565?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/practicalswift",
      "html_url": "https://github.com/practicalswift",
      "followers_url": "https://api.github.com/users/practicalswift/followers",
      "following_url": "https://api.github.com/users/practicalswift/following{/other_user}",
      "gists_url": "https://api.github.com/users/practicalswift/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/practicalswift/subscriptions",
      "organizations_url": "https://api.github.com/users/practicalswift/orgs",
      "repos_url": "https://api.github.com/users/practicalswift/repos",
      "events_url": "https://api.github.com/users/practicalswift/events{/privacy}",
      "received_events_url": "https://api.github.com/users/practicalswift/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "2a92b0f0f786ef7c13181eed39b162829d41dad7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2a92b0f0f786ef7c13181eed39b162829d41dad7",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/2a92b0f0f786ef7c13181eed39b162829d41dad7"
      }
    ],
    "stats": {
      "total": 4,
      "additions": 2,
      "deletions": 2
    },
    "files": [
      {
        "sha": "3467103d100f45d39a7e846761486200618ac0a2",
        "filename": ".travis.yml",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/19e317557a00879dbf48065746d7f5a50717d563/.travis.yml",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/19e317557a00879dbf48065746d7f5a50717d563/.travis.yml",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/.travis.yml?ref=19e317557a00879dbf48065746d7f5a50717d563",
        "patch": "@@ -125,7 +125,7 @@ jobs:\n         FILE_ENV=\"./ci/test/00_setup_env_amd64_asan.sh\"\n \n     - stage: test\n-      name: 'x86_64 Linux  [GOAL: install]  [bionic]  [no depends, only system libs, sanitizers: fuzzer,address]'\n+      name: 'x86_64 Linux  [GOAL: install]  [bionic]  [no depends, only system libs, sanitizers: fuzzer,address,undefined]'\n       env: >-\n         FILE_ENV=\"./ci/test/00_setup_env_amd64_fuzz.sh\"\n "
      },
      {
        "sha": "7bdfc2c320056d6b5f10ac8fda04dc46467a2940",
        "filename": "ci/test/00_setup_env_amd64_fuzz.sh",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/19e317557a00879dbf48065746d7f5a50717d563/ci/test/00_setup_env_amd64_fuzz.sh",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/19e317557a00879dbf48065746d7f5a50717d563/ci/test/00_setup_env_amd64_fuzz.sh",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/ci/test/00_setup_env_amd64_fuzz.sh?ref=19e317557a00879dbf48065746d7f5a50717d563",
        "patch": "@@ -13,4 +13,4 @@ export RUN_UNIT_TESTS=false\n export RUN_FUNCTIONAL_TESTS=false\n export RUN_FUZZ_TESTS=true\n export GOAL=\"install\"\n-export BITCOIN_CONFIG=\"--enable-fuzz --with-sanitizers=fuzzer,address CC=clang CXX=clang++\"\n+export BITCOIN_CONFIG=\"--enable-fuzz --with-sanitizers=fuzzer,address,undefined CC=clang CXX=clang++\""
      }
    ]
  }
]