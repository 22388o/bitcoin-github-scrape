DrahtBot,2020-10-15 16:26:01,"<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #20206 (wallet, refactor: Include headers instead of function declarations by hebasto)\n* #20202 (wallet: Make BDB support",https://github.com/bitcoin/bitcoin/pull/20156#issuecomment-709440593,709440593,
laanwj,2020-10-15 18:59:48,"> Make BDB support optional\n\nMaking bdb optional would be more interesting looking forward. But no problem with this either, concept ACK.",https://github.com/bitcoin/bitcoin/pull/20156#issuecomment-709529415,709529415,
luke-jr,2020-10-15 20:21:02,"Improved configure help per request, and added nicer behaviour in RPC/GUI around descriptor wallet stuff.\n\n(A future PR can remove descriptor wallet code entirely if desired.)",https://github.com/bitcoin/bitcoin/pull/20156#issuecomment-709569117,709569117,
Sjors,2020-10-16 09:12:24,tACK f9b93a0 on macOS (though I couldn't test the scenario of not having a sqlite library at all on the system),https://github.com/bitcoin/bitcoin/pull/20156#issuecomment-709927800,709927800,
hebasto,2020-10-18 12:11:41,Concept ACK.,https://github.com/bitcoin/bitcoin/pull/20156#issuecomment-711158764,711158764,
luke-jr,2020-10-20 13:45:45,"Assert added, checkbox forced off, and help message made to match others",https://github.com/bitcoin/bitcoin/pull/20156#issuecomment-712862197,712862197,
jonasschnelli,2020-10-20 14:05:44,"Concept ACK â€“ however, I agree with @laanwj that making BerkleyDB optional could be more interesting for many users.",https://github.com/bitcoin/bitcoin/pull/20156#issuecomment-712878034,712878034,
luke-jr,2020-10-20 14:17:49,"@jonasschnelli I don't disagree, it's just outside the scope of this PR. Hopefully once it's merged, someone (maybe me) will extend it to BDB and we can discuss if it belongs in 0.21 or 0.22. :)",https://github.com/bitcoin/bitcoin/pull/20156#issuecomment-712886314,712886314,
jonasschnelli,2020-10-20 14:20:20,"Would detecting an sqlite wallet (look for the sqlite magic) make sense to give more specific errors in case someone tries to load a sqlite wallet with a non-sqlite-supporting bitcoind/qt? (could be a follow up PR is complicated).\n\nCurrent error in the deamon...\n```\n2020-10-20T14:17:40Z Error: ""/tmp/dummy/regtest/wallets/test/wallet.dat"" corrupt. Try using the wallet tool bitcoin-wallet to",https://github.com/bitcoin/bitcoin/pull/20156#issuecomment-712888901,712888901,
jonasschnelli,2020-10-20 14:54:36,Tested ACK bbb42a68961a8ae1e4ef3221ffb1d5ff7272b075,https://github.com/bitcoin/bitcoin/pull/20156#issuecomment-712912378,712912378,
luke-jr,2020-10-20 15:12:41,@jonasschnelli Added nicer error messages to the possible followup list,https://github.com/bitcoin/bitcoin/pull/20156#issuecomment-712925075,712925075,
achow101,2020-10-20 16:13:32,ACK bbb42a68961a8ae1e4ef3221ffb1d5ff7272b075,https://github.com/bitcoin/bitcoin/pull/20156#issuecomment-712965312,712965312,
Sjors,2020-10-21 16:10:21,re-utACK bbb42a68961a8ae1e4ef3221ffb1d5ff7272b075,https://github.com/bitcoin/bitcoin/pull/20156#issuecomment-713687927,713687927,
DrahtBot,2020-10-23 07:10:10,<!--a722867cd34abeea1fadc8d60700f111-->\n### Gitian builds\n\n| File | commit f5bd46a4cc6d395ce71ecb99852c1774235a249c<br>(master) | commit 6ffb6bb81f42731dfdf4b5d0cbb30a6674841ab3<br>(master and this pull) |\n|--|--|--|\n| bitcoin-core-linux-0.21-res.yml | [`d1971dabc444008d...`](https://drahtbot.space/gitian/bitcoin/bitcoin/f5bd46a4cc6d395ce71ecb99852c1774235a249c/bitcoin-core-linux-0.21-res.yml,https://github.com/bitcoin/bitcoin/pull/20156#issuecomment-715033148,715033148,
DrahtBot,2020-10-24 12:38:17,<!--9cd9c72976c961c55c7acef8f6ba82cd-->\n### Guix builds\n\n| File | commit 9af7c1993b3512a7230f723b1923abd496989c59<br>(master) | commit 7599eeae0e860fe281987ae2059a240de8169777<br>(master and this pull) |\n|--|--|--|\n| *-aarch64-linux-gnu-debug.tar.gz | [`a0883e94fe7d7b45...`](https://drahtbot.space/guix/bitcoin/bitcoin/9af7c1993b3512a7230f723b1923abd496989c59/bitcoin-9af7c1993b35-aarch64-linux,https://github.com/bitcoin/bitcoin/pull/20156#issuecomment-715909053,715909053,
Sjors,2020-10-15 14:19:51,You mean `(default is no`? Or less ambiguous: `enabled`,https://github.com/bitcoin/bitcoin/pull/20156#discussion_r505581738,505581738,configure.ac
promag,2020-10-18 22:20:21,"nit, do this in definition instead?",https://github.com/bitcoin/bitcoin/pull/20156#discussion_r507225063,507225063,src/wallet/walletutil.cpp
promag,2020-10-18 22:22:39,No need for this since `ExistsSQLiteDatabase` is false.,https://github.com/bitcoin/bitcoin/pull/20156#discussion_r507225700,507225700,src/wallet/walletdb.cpp
promag,2020-10-18 22:23:45,"nit, assert  `format == DatabaseFormat::BERKELEY`.",https://github.com/bitcoin/bitcoin/pull/20156#discussion_r507226021,507226021,src/wallet/walletdb.cpp
achow101,2020-10-19 19:02:40,Shouldn't `wallet/sqlite.h` be included here too?,https://github.com/bitcoin/bitcoin/pull/20156#discussion_r507994597,507994597,src/Makefile.am
luke-jr,2020-10-19 19:30:01,Not based on how we're handling other stuff,https://github.com/bitcoin/bitcoin/pull/20156#discussion_r508009976,508009976,src/Makefile.am
achow101,2020-10-19 21:27:29,Hmm. I would expect that systems without sqlite's `sqlite3.h` header would then fail to compile.,https://github.com/bitcoin/bitcoin/pull/20156#discussion_r508072759,508072759,src/Makefile.am
achow101,2020-10-19 21:38:12,"I think this should also do `setChecked(false)`. When descriptor wallets become the default and this is default checked, that will be necessary.",https://github.com/bitcoin/bitcoin/pull/20156#discussion_r508077859,508077859,src/qt/createwalletdialog.cpp
hebasto,2020-10-20 12:04:56,"5c19bd0f4b893a91c02e652ac8f45ef0ccdeca1c\n\nMind avoiding negative form in help string:\n```suggestion\n  [AS_HELP_STRING([--with-sqlite=yes|no|auto],\n  [enable sqlite wallet support (default: auto, i.e., enabled if wallet is enabled and sqlite is found)])],\n```\n?",https://github.com/bitcoin/bitcoin/pull/20156#discussion_r508443580,508443580,configure.ac
hebasto,2020-10-20 12:07:43,"5c19bd0f4b893a91c02e652ac8f45ef0ccdeca1c\n\nis this a tautology?",https://github.com/bitcoin/bitcoin/pull/20156#discussion_r508445188,508445188,configure.ac
hebasto,2020-10-20 12:21:03,"5c19bd0f4b893a91c02e652ac8f45ef0ccdeca1c\n\nNice!\nDuring reviewing #19077 I've noticed that the `SQLITE_CFLAGS` is empty, and I was not worried about adding it to the `libbitcoin_wallet_a_CPPFLAGS`. But consistency is good, it is not guaranteed the `SQLITE_CFLAGS` will be empty always :)",https://github.com/bitcoin/bitcoin/pull/20156#discussion_r508453364,508453364,src/Makefile.am
hebasto,2020-10-20 12:32:37,"It is needed, as `ExistsSQLiteDatabase` is defined in `wallet/sqlite.h`.",https://github.com/bitcoin/bitcoin/pull/20156#discussion_r508460740,508460740,src/wallet/walletdb.cpp
luke-jr,2020-10-20 13:37:08,It can also be unset. Used `assert(format != DatabaseFormat::SQLITE);`  in an `#else`,https://github.com/bitcoin/bitcoin/pull/20156#discussion_r508509337,508509337,src/wallet/walletdb.cpp
luke-jr,2020-10-20 13:38:23,It's not used despite being listed,https://github.com/bitcoin/bitcoin/pull/20156#discussion_r508510775,508510775,src/Makefile.am
luke-jr,2020-10-20 13:41:18,Done,https://github.com/bitcoin/bitcoin/pull/20156#discussion_r508513160,508513160,configure.ac
luke-jr,2020-10-20 13:43:10,"Yes, but not having anything here would be a bug.",https://github.com/bitcoin/bitcoin/pull/20156#discussion_r508514660,508514660,configure.ac
