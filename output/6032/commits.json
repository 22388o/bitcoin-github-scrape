[
  {
    "sha": "2eadeb27ed40d4dcb252a9d993d3946435f6e22e",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzoyZWFkZWIyN2VkNDBkNGRjYjI1MmE5ZDk5M2QzOTQ2NDM1ZjZlMjJl",
    "commit": {
      "author": {
        "name": "dexX7",
        "email": "dexx@bitwatch.co",
        "date": "2015-04-20T09:50:33Z"
      },
      "committer": {
        "name": "dexX7",
        "email": "dexx@bitwatch.co",
        "date": "2015-04-20T11:09:29Z"
      },
      "message": "QA: stop nodes after RPC tests, even with --nocleanup\n\n`--nocleanup` should provide a way to preserve test data, but should not have an impact on whether nodes are to be stopped after the test execution.\n\nIn particular, when currently running RPC tests with `--nocleanup`, then it may result in several active `bitcoind` processes, which are not terminated properly.",
      "tree": {
        "sha": "a71ca570ea07dc0dbfec1ce56f38b50d2b7d0863",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a71ca570ea07dc0dbfec1ce56f38b50d2b7d0863"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2eadeb27ed40d4dcb252a9d993d3946435f6e22e",
      "comment_count": 0,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1\n\niQIcBAABAgAGBQJVNN5qAAoJEHZ14xz1cZgyQ7EP/0iHLnTzcj7f2ZVOy9Z/ESlX\nfzgDyvTfWOYbg4fUNjH99vXV3QAlW2vv8h+0mXPJP3LwonxlpZAyuCYDWsWFPvns\ncPT9yP8atBy9yHfzoJsR1nPqDoWKcXgvBFZIDQ5ZhCWvcxelr3rJnS27RcVcDu1D\nchp5NAPaW+lEUhLzdrtT91BYZXOFCCqdqAj7qBFY6RF0dUwupN8+rLFGDHAVAslQ\nNwv8xvXp/DMyisOxHg4eEIpMC4zGjyu3rpRl+kK7IAg4zK/vN5nr7Msdkptr8aFk\n6AvWUzLm9wXvumN+v0MltqQkXHM0li9799fWCcqjo1wPgxEEqnPqJ4RaaY8uQtLV\nthjHelhYNlcZi41mgiLza4QQWxlbWdgIAYyZRuuh+2Z2mth12JfYngfjKnaOMkBi\n5F+E3+4Wf8HY/AR+3Ay1mZOoxS9JxwTWanPUuVaVKoZLsj4raG6crRdS/gYQds4J\n95ddlPLw7LhtUI7vd4hB/++jD3yaHenOH9Fb1HE82p8vp2CBL1xMVlfvTT2a56AA\n9vbAGy0l8v1Wa67SPwyqDqBO1JpWapZI055zw0khS42mQUcTjd8kJNBIR6qgyEIq\nN5Tyq5qOjnGK+Kvu3CednO5C1q4c1x1nTLcjrtSQDicpHg0831ak4K04rbCNfOyv\nJUUhl/zKYt+ts+JzAL3z\n=91/P\n-----END PGP SIGNATURE-----",
        "payload": "tree a71ca570ea07dc0dbfec1ce56f38b50d2b7d0863\nparent 8f955b9661224adc950e302b42d2f7bcb5e90bef\nauthor dexX7 <dexx@bitwatch.co> 1429523433 +0200\ncommitter dexX7 <dexx@bitwatch.co> 1429528169 +0200\n\nQA: stop nodes after RPC tests, even with --nocleanup\n\n`--nocleanup` should provide a way to preserve test data, but should not have an impact on whether nodes are to be stopped after the test execution.\n\nIn particular, when currently running RPC tests with `--nocleanup`, then it may result in several active `bitcoind` processes, which are not terminated properly.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2eadeb27ed40d4dcb252a9d993d3946435f6e22e",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/2eadeb27ed40d4dcb252a9d993d3946435f6e22e",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2eadeb27ed40d4dcb252a9d993d3946435f6e22e/comments",
    "author": {
      "login": "dexX7",
      "id": 5836089,
      "node_id": "MDQ6VXNlcjU4MzYwODk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5836089?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dexX7",
      "html_url": "https://github.com/dexX7",
      "followers_url": "https://api.github.com/users/dexX7/followers",
      "following_url": "https://api.github.com/users/dexX7/following{/other_user}",
      "gists_url": "https://api.github.com/users/dexX7/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dexX7/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dexX7/subscriptions",
      "organizations_url": "https://api.github.com/users/dexX7/orgs",
      "repos_url": "https://api.github.com/users/dexX7/repos",
      "events_url": "https://api.github.com/users/dexX7/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dexX7/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dexX7",
      "id": 5836089,
      "node_id": "MDQ6VXNlcjU4MzYwODk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5836089?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dexX7",
      "html_url": "https://github.com/dexX7",
      "followers_url": "https://api.github.com/users/dexX7/followers",
      "following_url": "https://api.github.com/users/dexX7/following{/other_user}",
      "gists_url": "https://api.github.com/users/dexX7/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dexX7/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dexX7/subscriptions",
      "organizations_url": "https://api.github.com/users/dexX7/orgs",
      "repos_url": "https://api.github.com/users/dexX7/repos",
      "events_url": "https://api.github.com/users/dexX7/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dexX7/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "8f955b9661224adc950e302b42d2f7bcb5e90bef",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/8f955b9661224adc950e302b42d2f7bcb5e90bef",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/8f955b9661224adc950e302b42d2f7bcb5e90bef"
      }
    ],
    "stats": {
      "total": 6,
      "additions": 4,
      "deletions": 2
    },
    "files": [
      {
        "sha": "8de7a4b5e4d527c523727b5d950d674a98e5d368",
        "filename": "qa/rpc-tests/test_framework.py",
        "status": "modified",
        "additions": 4,
        "deletions": 2,
        "changes": 6,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/2eadeb27ed40d4dcb252a9d993d3946435f6e22e/qa/rpc-tests/test_framework.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/2eadeb27ed40d4dcb252a9d993d3946435f6e22e/qa/rpc-tests/test_framework.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/qa/rpc-tests/test_framework.py?ref=2eadeb27ed40d4dcb252a9d993d3946435f6e22e",
        "patch": "@@ -128,10 +128,12 @@ def main(self):\n             print(\"Unexpected exception caught during testing: \"+str(e))\n             traceback.print_tb(sys.exc_info()[2])\n \n+        print(\"Stopping nodes\")\n+        stop_nodes(self.nodes)\n+        wait_bitcoinds()\n+\n         if not self.options.nocleanup:\n             print(\"Cleaning up\")\n-            stop_nodes(self.nodes)\n-            wait_bitcoinds()\n             shutil.rmtree(self.options.tmpdir)\n \n         if success:"
      }
    ]
  },
  {
    "sha": "688da79e4a9e262d7aa643cb0f9b46c7781ac655",
    "node_id": "MDY6Q29tbWl0MTE4MTkyNzo2ODhkYTc5ZTRhOWUyNjJkN2FhNjQzY2IwZjliNDZjNzc4MWFjNjU1",
    "commit": {
      "author": {
        "name": "dexX7",
        "email": "dexx@bitwatch.co",
        "date": "2015-04-23T12:19:00Z"
      },
      "committer": {
        "name": "dexX7",
        "email": "dexx@bitwatch.co",
        "date": "2015-04-23T12:19:00Z"
      },
      "message": "QA: add --noshutdown option to prevent stopping nodes\n\nWith `--noshutdown`, the nodes are not stopped explicitly. `--noshutdown` implies `--nocleanup`, to prevent removing datadirs, which are still in use.",
      "tree": {
        "sha": "d51bbb07d3fd29de7187334129003b7b21468dc2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d51bbb07d3fd29de7187334129003b7b21468dc2"
      },
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/688da79e4a9e262d7aa643cb0f9b46c7781ac655",
      "comment_count": 1,
      "verification": {
        "verified": true,
        "reason": "valid",
        "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1\n\niQIcBAABAgAGBQJVOOOWAAoJEHZ14xz1cZgyvT4QAKmsL6HMmrk5HaRdhr+hSlkp\n7WyFtRsEyZrCFolKGKA7HH/P8Y4unmCf9jw+E7Qk4oxgrQIx3Y+1rU1UhXJAk4CW\nZdTnIrCJ6+i4vUVJCiA5hGaYsAcbq/F8sH895TAseGAUBxl6rK5gjSiBpKExoxBm\nfyL8CGOfH9nDku6vL6yhJAnXSvlV1QCmJPsAXyPUhf5vVochaO8+sMkd1HVeLwa8\nzJj/RJRmqDnpvxLRhb1FTJhlzwmSADeTwS/+QMS7MnlO64LJV7VmZzEcj9c+vy8C\n6Eb/ZmWfEoEcv9DHMoJbRSL1O32bqVlZ6N2O0k8C7pbuHoJKz3JG7jo6iQbj8xp3\n2tM+1gxvZRh5Q0j64jqFyyMs9z9vvr+mCvt+RusZpS9WDWssqkbY9rsjUO7hAts8\npE/4fBkl8DXrL82NsGqtQZpfnzkn2pmA2Mgu03Uo6whkBIqCqKFcrRazHs61cTS/\nIxnegIRFy5oKO2oVLJWyOBED7V/n7N2YhQokz/Z1GNVgdl6hOsIMHgOJg2fa+o0L\n2Fs+9hnMtDTNoWTn8Y0YSy+URx4Pf1/FmTZcWaNfL1Ry+/iz3ZbvOblLWzj+AvNw\n5C0UxRa824IpyolUjuE05NpNHPoefhXmrpVdzRX/8X0yrAlD4WGjgivulIe1Zny5\ngYyP3U5SbHGTgqSdW5RT\n=zQCi\n-----END PGP SIGNATURE-----",
        "payload": "tree d51bbb07d3fd29de7187334129003b7b21468dc2\nparent 2eadeb27ed40d4dcb252a9d993d3946435f6e22e\nauthor dexX7 <dexx@bitwatch.co> 1429791540 +0200\ncommitter dexX7 <dexx@bitwatch.co> 1429791540 +0200\n\nQA: add --noshutdown option to prevent stopping nodes\n\nWith `--noshutdown`, the nodes are not stopped explicitly. `--noshutdown` implies `--nocleanup`, to prevent removing datadirs, which are still in use.\n"
      }
    },
    "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/688da79e4a9e262d7aa643cb0f9b46c7781ac655",
    "html_url": "https://github.com/bitcoin/bitcoin/commit/688da79e4a9e262d7aa643cb0f9b46c7781ac655",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/688da79e4a9e262d7aa643cb0f9b46c7781ac655/comments",
    "author": {
      "login": "dexX7",
      "id": 5836089,
      "node_id": "MDQ6VXNlcjU4MzYwODk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5836089?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dexX7",
      "html_url": "https://github.com/dexX7",
      "followers_url": "https://api.github.com/users/dexX7/followers",
      "following_url": "https://api.github.com/users/dexX7/following{/other_user}",
      "gists_url": "https://api.github.com/users/dexX7/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dexX7/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dexX7/subscriptions",
      "organizations_url": "https://api.github.com/users/dexX7/orgs",
      "repos_url": "https://api.github.com/users/dexX7/repos",
      "events_url": "https://api.github.com/users/dexX7/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dexX7/received_events",
      "type": "User",
      "site_admin": false
    },
    "committer": {
      "login": "dexX7",
      "id": 5836089,
      "node_id": "MDQ6VXNlcjU4MzYwODk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5836089?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dexX7",
      "html_url": "https://github.com/dexX7",
      "followers_url": "https://api.github.com/users/dexX7/followers",
      "following_url": "https://api.github.com/users/dexX7/following{/other_user}",
      "gists_url": "https://api.github.com/users/dexX7/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dexX7/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dexX7/subscriptions",
      "organizations_url": "https://api.github.com/users/dexX7/orgs",
      "repos_url": "https://api.github.com/users/dexX7/repos",
      "events_url": "https://api.github.com/users/dexX7/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dexX7/received_events",
      "type": "User",
      "site_admin": false
    },
    "parents": [
      {
        "sha": "2eadeb27ed40d4dcb252a9d993d3946435f6e22e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/commits/2eadeb27ed40d4dcb252a9d993d3946435f6e22e",
        "html_url": "https://github.com/bitcoin/bitcoin/commit/2eadeb27ed40d4dcb252a9d993d3946435f6e22e"
      }
    ],
    "stats": {
      "total": 15,
      "additions": 10,
      "deletions": 5
    },
    "files": [
      {
        "sha": "6f3cc19ddab25c02b4925db7eeee3d996bad3c49",
        "filename": "qa/rpc-tests/test_framework.py",
        "status": "modified",
        "additions": 10,
        "deletions": 5,
        "changes": 15,
        "blob_url": "https://github.com/bitcoin/bitcoin/blob/688da79e4a9e262d7aa643cb0f9b46c7781ac655/qa/rpc-tests/test_framework.py",
        "raw_url": "https://github.com/bitcoin/bitcoin/raw/688da79e4a9e262d7aa643cb0f9b46c7781ac655/qa/rpc-tests/test_framework.py",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/qa/rpc-tests/test_framework.py?ref=688da79e4a9e262d7aa643cb0f9b46c7781ac655",
        "patch": "@@ -89,8 +89,10 @@ def main(self):\n         parser = optparse.OptionParser(usage=\"%prog [options]\")\n         parser.add_option(\"--nocleanup\", dest=\"nocleanup\", default=False, action=\"store_true\",\n                           help=\"Leave bitcoinds and test.* datadir on exit or error\")\n+        parser.add_option(\"--noshutdown\", dest=\"noshutdown\", default=False, action=\"store_true\",\n+                          help=\"Don't stop bitcoinds after the test execution\")\n         parser.add_option(\"--srcdir\", dest=\"srcdir\", default=\"../../src\",\n-                          help=\"Source directory containing bitcoind/bitcoin-cli (default: %default%)\")\n+                          help=\"Source directory containing bitcoind/bitcoin-cli (default: %default)\")\n         parser.add_option(\"--tmpdir\", dest=\"tmpdir\", default=tempfile.mkdtemp(prefix=\"test\"),\n                           help=\"Root directory for datadirs\")\n         parser.add_option(\"--tracerpc\", dest=\"trace_rpc\", default=False, action=\"store_true\",\n@@ -128,11 +130,14 @@ def main(self):\n             print(\"Unexpected exception caught during testing: \"+str(e))\n             traceback.print_tb(sys.exc_info()[2])\n \n-        print(\"Stopping nodes\")\n-        stop_nodes(self.nodes)\n-        wait_bitcoinds()\n+        if not self.options.noshutdown:\n+            print(\"Stopping nodes\")\n+            stop_nodes(self.nodes)\n+            wait_bitcoinds()\n+        else:\n+            print(\"Note: bitcoinds were not stopped and may still be running\")\n \n-        if not self.options.nocleanup:\n+        if not self.options.nocleanup and not self.options.noshutdown:\n             print(\"Cleaning up\")\n             shutil.rmtree(self.options.tmpdir)\n "
      }
    ]
  }
]